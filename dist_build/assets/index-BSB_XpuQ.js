(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function z1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Pg={exports:{}},Zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function aE(){if(Av)return Zc;Av=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:u}}return Zc.Fragment=e,Zc.jsx=t,Zc.jsxs=t,Zc}var Rv;function iE(){return Rv||(Rv=1,Pg.exports=aE()),Pg.exports}var i=iE(),Lg={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function lE(){if(kv)return We;kv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=N&&P[N]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,z={};function Q(P,re,fe){this.props=P,this.context=re,this.refs=z,this.updater=fe||V}Q.prototype.isReactComponent={},Q.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},Q.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ae(){}ae.prototype=Q.prototype;function K(P,re,fe){this.props=P,this.context=re,this.refs=z,this.updater=fe||V}var H=K.prototype=new ae;H.constructor=K,$(H,Q.prototype),H.isPureReactComponent=!0;var ce=Array.isArray;function be(){}var E={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(P,re,fe){var pe=fe.ref;return{$$typeof:s,type:P,key:re,ref:pe!==void 0?pe:null,props:fe}}function D(P,re){return C(P.type,re,P.props)}function k(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function M(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return re[fe]})}var R=/\/+/g;function Te(P,re){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):re.toString(36)}function _e(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(be,be):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function J(P,re,fe,pe,G){var ye=typeof P;(ye==="undefined"||ye==="boolean")&&(P=null);var I=!1;if(P===null)I=!0;else switch(ye){case"bigint":case"string":case"number":I=!0;break;case"object":switch(P.$$typeof){case s:case e:I=!0;break;case b:return I=P._init,J(I(P._payload),re,fe,pe,G)}}if(I)return G=G(P),I=pe===""?"."+Te(P,0):pe,ce(G)?(fe="",I!=null&&(fe=I.replace(R,"$&/")+"/"),J(G,re,fe,"",function(Ne){return Ne})):G!=null&&(k(G)&&(G=D(G,fe+(G.key==null||P&&P.key===G.key?"":(""+G.key).replace(R,"$&/")+"/")+I)),re.push(G)),1;I=0;var U=pe===""?".":pe+":";if(ce(P))for(var q=0;q<P.length;q++)pe=P[q],ye=U+Te(pe,q),I+=J(pe,re,fe,ye,G);else if(q=O(P),typeof q=="function")for(P=q.call(P),q=0;!(pe=P.next()).done;)pe=pe.value,ye=U+Te(pe,q++),I+=J(pe,re,fe,ye,G);else if(ye==="object"){if(typeof P.then=="function")return J(_e(P),re,fe,pe,G);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return I}function te(P,re,fe){if(P==null)return P;var pe=[],G=0;return J(P,pe,"","",function(ye){return re.call(fe,ye,G++)}),pe}function Ee(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var Pe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ae={map:te,forEach:function(P,re,fe){te(P,function(){re.apply(this,arguments)},fe)},count:function(P){var re=0;return te(P,function(){re++}),re},toArray:function(P){return te(P,function(re){return re})||[]},only:function(P){if(!k(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return We.Activity=w,We.Children=Ae,We.Component=Q,We.Fragment=t,We.Profiler=o,We.PureComponent=K,We.StrictMode=a,We.Suspense=x,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,We.__COMPILER_RUNTIME={__proto__:null,c:function(P){return E.H.useMemoCache(P)}},We.cache=function(P){return function(){return P.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(P,re,fe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var pe=$({},P.props),G=P.key;if(re!=null)for(ye in re.key!==void 0&&(G=""+re.key),re)!S.call(re,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&re.ref===void 0||(pe[ye]=re[ye]);var ye=arguments.length-2;if(ye===1)pe.children=fe;else if(1<ye){for(var I=Array(ye),U=0;U<ye;U++)I[U]=arguments[U+2];pe.children=I}return C(P.type,G,pe)},We.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},We.createElement=function(P,re,fe){var pe,G={},ye=null;if(re!=null)for(pe in re.key!==void 0&&(ye=""+re.key),re)S.call(re,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(G[pe]=re[pe]);var I=arguments.length-2;if(I===1)G.children=fe;else if(1<I){for(var U=Array(I),q=0;q<I;q++)U[q]=arguments[q+2];G.children=U}if(P&&P.defaultProps)for(pe in I=P.defaultProps,I)G[pe]===void 0&&(G[pe]=I[pe]);return C(P,ye,G)},We.createRef=function(){return{current:null}},We.forwardRef=function(P){return{$$typeof:g,render:P}},We.isValidElement=k,We.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:Ee}},We.memo=function(P,re){return{$$typeof:p,type:P,compare:re===void 0?null:re}},We.startTransition=function(P){var re=E.T,fe={};E.T=fe;try{var pe=P(),G=E.S;G!==null&&G(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(be,Pe)}catch(ye){Pe(ye)}finally{re!==null&&fe.types!==null&&(re.types=fe.types),E.T=re}},We.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},We.use=function(P){return E.H.use(P)},We.useActionState=function(P,re,fe){return E.H.useActionState(P,re,fe)},We.useCallback=function(P,re){return E.H.useCallback(P,re)},We.useContext=function(P){return E.H.useContext(P)},We.useDebugValue=function(){},We.useDeferredValue=function(P,re){return E.H.useDeferredValue(P,re)},We.useEffect=function(P,re){return E.H.useEffect(P,re)},We.useEffectEvent=function(P){return E.H.useEffectEvent(P)},We.useId=function(){return E.H.useId()},We.useImperativeHandle=function(P,re,fe){return E.H.useImperativeHandle(P,re,fe)},We.useInsertionEffect=function(P,re){return E.H.useInsertionEffect(P,re)},We.useLayoutEffect=function(P,re){return E.H.useLayoutEffect(P,re)},We.useMemo=function(P,re){return E.H.useMemo(P,re)},We.useOptimistic=function(P,re){return E.H.useOptimistic(P,re)},We.useReducer=function(P,re,fe){return E.H.useReducer(P,re,fe)},We.useRef=function(P){return E.H.useRef(P)},We.useState=function(P){return E.H.useState(P)},We.useSyncExternalStore=function(P,re,fe){return E.H.useSyncExternalStore(P,re,fe)},We.useTransition=function(){return E.H.useTransition()},We.version="19.2.0",We}var Iv;function Wp(){return Iv||(Iv=1,Lg.exports=lE()),Lg.exports}var j=Wp();const qr=z1(j);var Ug={exports:{}},eu={},zg={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function oE(){return Dv||(Dv=1,(function(s){function e(J,te){var Ee=J.length;J.push(te);e:for(;0<Ee;){var Pe=Ee-1>>>1,Ae=J[Pe];if(0<o(Ae,te))J[Pe]=te,J[Ee]=Ae,Ee=Pe;else break e}}function t(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var te=J[0],Ee=J.pop();if(Ee!==te){J[0]=Ee;e:for(var Pe=0,Ae=J.length,P=Ae>>>1;Pe<P;){var re=2*(Pe+1)-1,fe=J[re],pe=re+1,G=J[pe];if(0>o(fe,Ee))pe<Ae&&0>o(G,fe)?(J[Pe]=G,J[pe]=Ee,Pe=pe):(J[Pe]=fe,J[re]=Ee,Pe=re);else if(pe<Ae&&0>o(G,Ee))J[Pe]=G,J[pe]=Ee,Pe=pe;else break e}}return te}function o(J,te){var Ee=J.sortIndex-te.sortIndex;return Ee!==0?Ee:J.id-te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var x=[],p=[],b=1,w=null,N=3,O=!1,V=!1,$=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function H(J){for(var te=t(p);te!==null;){if(te.callback===null)a(p);else if(te.startTime<=J)a(p),te.sortIndex=te.expirationTime,e(x,te);else break;te=t(p)}}function ce(J){if($=!1,H(J),!V)if(t(x)!==null)V=!0,be||(be=!0,M());else{var te=t(p);te!==null&&_e(ce,te.startTime-J)}}var be=!1,E=-1,S=5,C=-1;function D(){return z?!0:!(s.unstable_now()-C<S)}function k(){if(z=!1,be){var J=s.unstable_now();C=J;var te=!0;try{e:{V=!1,$&&($=!1,ae(E),E=-1),O=!0;var Ee=N;try{t:{for(H(J),w=t(x);w!==null&&!(w.expirationTime>J&&D());){var Pe=w.callback;if(typeof Pe=="function"){w.callback=null,N=w.priorityLevel;var Ae=Pe(w.expirationTime<=J);if(J=s.unstable_now(),typeof Ae=="function"){w.callback=Ae,H(J),te=!0;break t}w===t(x)&&a(x),H(J)}else a(x);w=t(x)}if(w!==null)te=!0;else{var P=t(p);P!==null&&_e(ce,P.startTime-J),te=!1}}break e}finally{w=null,N=Ee,O=!1}te=void 0}}finally{te?M():be=!1}}}var M;if(typeof K=="function")M=function(){K(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Te=R.port2;R.port1.onmessage=k,M=function(){Te.postMessage(null)}}else M=function(){Q(k,0)};function _e(J,te){E=Q(function(){J(s.unstable_now())},te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(J){switch(N){case 1:case 2:case 3:var te=3;break;default:te=N}var Ee=N;N=te;try{return J()}finally{N=Ee}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(J,te){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=N;N=J;try{return te()}finally{N=Ee}},s.unstable_scheduleCallback=function(J,te,Ee){var Pe=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Pe+Ee:Pe):Ee=Pe,J){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=Ee+Ae,J={id:b++,callback:te,priorityLevel:J,startTime:Ee,expirationTime:Ae,sortIndex:-1},Ee>Pe?(J.sortIndex=Ee,e(p,J),t(x)===null&&J===t(p)&&($?(ae(E),E=-1):$=!0,_e(ce,Ee-Pe))):(J.sortIndex=Ae,e(x,J),V||O||(V=!0,be||(be=!0,M()))),J},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(J){var te=N;return function(){var Ee=N;N=te;try{return J.apply(this,arguments)}finally{N=Ee}}}})(Bg)),Bg}var Ov;function cE(){return Ov||(Ov=1,zg.exports=oE()),zg.exports}var Hg={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function uE(){if(Mv)return $n;Mv=1;var s=Wp();function e(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(x,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:x,containerInfo:p,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,$n.createPortal=function(x,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(x,p,null,b)},$n.flushSync=function(x){var p=d.T,b=a.p;try{if(d.T=null,a.p=2,x)return x()}finally{d.T=p,a.p=b,a.d.f()}},$n.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(x,p))},$n.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},$n.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:O}):b==="script"&&a.d.X(x,{crossOrigin:w,integrity:N,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);a.d.M(x,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(x)},$n.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);a.d.L(x,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(x,p){if(typeof x=="string")if(p){var b=g(p.as,p.crossOrigin);a.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(x)},$n.requestFormReset=function(x){a.d.r(x)},$n.unstable_batchedUpdates=function(x,p){return x(p)},$n.useFormState=function(x,p,b){return d.H.useFormState(x,p,b)},$n.useFormStatus=function(){return d.H.useHostTransitionStatus()},$n.version="19.2.0",$n}var Vv;function dE(){if(Vv)return Hg.exports;Vv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hg.exports=uE(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function hE(){if(Pv)return eu;Pv=1;var s=cE(),e=Wp(),t=dE();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function x(n){if(u(n)!==n)throw Error(a(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(a(188));return r!==n?null:n}for(var l=n,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return x(f),n;if(m===c)return x(f),r;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,T=f.child;T;){if(T===l){v=!0,l=f,c=m;break}if(T===c){v=!0,c=f,l=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===l){v=!0,l=m,c=f;break}if(T===c){v=!0,c=m,l=f;break}T=T.sibling}if(!v)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),K=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Te(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case ce:return"Suspense";case be:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case K:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case H:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return r=n.displayName||null,r!==null?r:Te(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return Te(n(r))}catch{}}return null}var _e=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Pe=[],Ae=-1;function P(n){return{current:n}}function re(n){0>Ae||(n.current=Pe[Ae],Pe[Ae]=null,Ae--)}function fe(n,r){Ae++,Pe[Ae]=n.current,n.current=r}var pe=P(null),G=P(null),ye=P(null),I=P(null);function U(n,r){switch(fe(ye,r),fe(G,n),fe(pe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Jb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Jb(r),n=Zb(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(pe),fe(pe,n)}function q(){re(pe),re(G),re(ye)}function Ne(n){n.memoizedState!==null&&fe(I,n);var r=pe.current,l=Zb(r,n.type);r!==l&&(fe(G,n),fe(pe,l))}function he(n){G.current===n&&(re(pe),re(G)),I.current===n&&(re(I),Qc._currentValue=Ee)}var De,He;function st(n){if(De===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);De=r&&r[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+De+n+He}var Xe=!1;function gt(n,r){if(!n||Xe)return"";Xe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(le){var se=le}Reflect.construct(n,[],ge)}else{try{ge.call()}catch(le){se=le}n.call(ge.prototype)}}else{try{throw Error()}catch(le){se=le}(ge=n())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var L=v.split(`
`),ee=T.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===ee.length)for(c=L.length-1,f=ee.length-1;1<=c&&0<=f&&L[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==ee[f]){var oe=`
`+L[c].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=c&&0<=f);break}}}finally{Xe=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?st(l):""}function pt(n,r){switch(n.tag){case 26:case 27:case 5:return st(n.type);case 16:return st("Lazy");case 13:return n.child!==r&&r!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return gt(n.type,!1);case 11:return gt(n.type.render,!1);case 1:return gt(n.type,!0);case 31:return st("Activity");default:return""}}function Pt(n){try{var r="",l=null;do r+=pt(n,l),l=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Et=Object.prototype.hasOwnProperty,zt=s.unstable_scheduleCallback,vs=s.unstable_cancelCallback,ir=s.unstable_shouldYield,Dn=s.unstable_requestPaint,Bt=s.unstable_now,ws=s.unstable_getCurrentPriorityLevel,_s=s.unstable_ImmediatePriority,zs=s.unstable_UserBlockingPriority,Hn=s.unstable_NormalPriority,mt=s.unstable_LowPriority,Ye=s.unstable_IdlePriority,St=s.log,en=s.unstable_setDisableYieldValue,It=null,bt=null;function Xt(n){if(typeof St=="function"&&en(n),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(It,n)}catch{}}var vt=Math.clz32?Math.clz32:Ns,ln=Math.log,as=Math.LN2;function Ns(n){return n>>>=0,n===0?32:31-(ln(n)/as|0)|0}var jn=256,js=262144,Ct=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function is(n,r,l){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~m,c!==0?f=Fn(c):(v&=T,v!==0?f=Fn(v):l||(l=T&~n,l!==0&&(f=Fn(l))))):(T=c&~m,T!==0?f=Fn(T):v!==0?f=Fn(v):l||(l=c&~n,l!==0&&(f=Fn(l)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:f}function Wn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Fi(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ha(){var n=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),n}function qn(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function ne(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function me(n,r,l,c,f,m){var v=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var T=n.entanglements,L=n.expirationTimes,ee=n.hiddenUpdates;for(l=v&~l;0<l;){var oe=31-vt(l),ge=1<<oe;T[oe]=0,L[oe]=-1;var se=ee[oe];if(se!==null)for(ee[oe]=null,oe=0;oe<se.length;oe++){var le=se[oe];le!==null&&(le.lane&=-536870913)}l&=~ge}c!==0&&je(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~r))}function je(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-vt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function B(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var c=31-vt(l),f=1<<c;f&r|n[c]&r&&(n[c]|=r),l&=~f}}function X(n,r){var l=r&-r;return l=(l&42)!==0?1:ve(l),(l&(n.suspendedLanes|r))!==0?0:l}function ve(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function we(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ve(){var n=te.p;return n!==0?n:(n=window.event,n===void 0?32:_v(n.type))}function Me(n,r){var l=te.p;try{return te.p=n,r()}finally{te.p=l}}var qe=Math.random().toString(36).slice(2),Ze="__reactFiber$"+qe,rt="__reactProps$"+qe,$t="__reactContainer$"+qe,on="__reactEvents$"+qe,Kt="__reactListeners$"+qe,Jn="__reactHandles$"+qe,aa="__reactResources$"+qe,An="__reactMarker$"+qe;function Dl(n){delete n[Ze],delete n[rt],delete n[on],delete n[Kt],delete n[Jn]}function Sr(n){var r=n[Ze];if(r)return r;for(var l=n.parentNode;l;){if(r=l[$t]||l[Ze]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=iv(n);n!==null;){if(l=n[Ze])return l;n=iv(n)}return r}n=l,l=n.parentNode}return null}function Bs(n){if(n=n[Ze]||n[$t]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Ts(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Cr(n){var r=n[aa];return r||(r=n[aa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function fn(n){n[An]=!0}var nc=new Set,sc={};function Ar(n,r){Rr(n,r),Rr(n+"Capture",r)}function Rr(n,r){for(sc[n]=r,n=0;n<r.length;n++)nc.add(r[n])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ac={},ic={};function Zu(n){return Et.call(ic,n)?!0:Et.call(ac,n)?!1:rc.test(n)?ic[n]=!0:(ac[n]=!0,!1)}function Ol(n,r,l){if(Zu(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function Es(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function mn(n,r,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+c)}}function Rn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Fa(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lc(n,r,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function At(n){if(!n._valueTracker){var r=Fa(n)?"checked":"value";n._valueTracker=lc(n,r,""+n[r])}}function qi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return n&&(c=Fa(n)?n.checked?"true":"false":n.value),n=c,n!==l?(r.setValue(n),!0):!1}function kr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $i=/[\n"\\]/g;function ls(n){return n.replace($i,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ml(n,r,l,c,f,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Rn(r)):n.value!==""+Rn(r)&&(n.value=""+Rn(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?oc(n,v,Rn(r)):l!=null?oc(n,v,Rn(l)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Rn(T):n.removeAttribute("name")}function ed(n,r,l,c,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){At(n);return}l=l!=null?""+Rn(l):"",r=r!=null?""+Rn(r):l,T||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),At(n)}function oc(n,r,l){r==="number"&&kr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function qa(n,r,l,c){if(n=n.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=r.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+Rn(l),r=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function td(n,r,l){if(r!=null&&(r=""+Rn(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+Rn(l):""}function $a(n,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(a(92));if(_e(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Rn(r),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),At(n)}function os(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(n,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,l):typeof l!="number"||l===0||nd.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function uc(n,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&l[f]!==c&&cc(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&cc(n,m,r[m])}function Vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(n){return Ka.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function lr(){}var dc=null;function Hs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ga=null,Ir=null;function Ki(n){var r=Bs(n);if(r&&(n=r.stateNode)){var l=n[rt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ml(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ls(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==n&&c.form===n.form){var f=c[rt]||null;if(!f)throw Error(a(90));Ml(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===n.form&&qi(c)}break e;case"textarea":td(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&qa(n,!!l.multiple,r,!1)}}}var Ll=!1;function Ya(n,r,l){if(Ll)return n(r,l);Ll=!0;try{var c=n(r);return c}finally{if(Ll=!1,(Ga!==null||Ir!==null)&&(Xd(),Ga&&(r=Ga,n=Ir,Ir=Ga=null,Ki(r),n)))for(r=0;r<n.length;r++)Ki(n[r])}}function or(n,r){var l=n.stateNode;if(l===null)return null;var c=l[rt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(Fs)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Gi=!1}var Dr=null,hc=null,Yi=null;function fc(){if(Yi)return Yi;var n,r=hc,l=r.length,c,f="value"in Dr?Dr.value:Dr.textContent,m=f.length;for(n=0;n<l&&r[n]===f[n];n++);var v=l-n;for(c=1;c<=v&&r[l-c]===f[m-c];c++);return Yi=f.slice(n,1<c?1-c:void 0)}function Qi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ia(){return!0}function cr(){return!1}function On(n){function r(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(l=n[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ia:cr,this.isPropagationStopped=cr,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),r}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=On(la),Qa=w({},la,{view:0,detail:0}),mc=On(Qa),Xa,Ul,Mr,zl=w({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mr&&(Mr&&n.type==="mousemove"?(Xa=n.screenX-Mr.screenX,Ul=n.screenY-Mr.screenY):Ul=Xa=0,Mr=n),Xa)},movementY:function(n){return"movementY"in n?n.movementY:Ul}}),gc=On(zl),Xi=w({},zl,{dataTransfer:0}),rd=On(Xi),ad=w({},Qa,{relatedTarget:0}),Wi=On(ad),pc=w({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),id=On(pc),Bl=w({},la,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ld=On(Bl),od=w({},la,{data:0}),Vr=On(od),cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dd[n])?!!r[n]:!1}function Wa(){return hd}var Zn=w({},Qa,{key:function(n){if(n.key){var r=cd[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ud[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(n){return n.type==="keypress"?Qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fd=On(Zn),md=w({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oa=On(md),h=w({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),y=On(h),_=w({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=On(_),W=w({},zl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=On(W),Ce=w({},la,{newState:0,oldState:0}),et=On(Ce),cn=[9,13,27,32],wt=Fs&&"CompositionEvent"in window,Gt=null;Fs&&"documentMode"in document&&(Gt=document.documentMode);var qs=Fs&&"TextEvent"in window&&!Gt,Pr=Fs&&(!wt||Gt&&8<Gt&&11>=Gt),ur=" ",dr=!1;function Ji(n,r){switch(n){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fl=!1;function Aj(n,r){switch(n){case"compositionend":return Hl(r);case"keypress":return r.which!==32?null:(dr=!0,ur);case"textInput":return n=r.data,n===ur&&dr?null:n;default:return null}}function Rj(n,r){if(Fl)return n==="compositionend"||!wt&&Ji(n,r)?(n=fc(),Yi=hc=Dr=null,Fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pr&&r.locale!=="ko"?null:r.data;default:return null}}var kj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cx(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!kj[n.type]:r==="textarea"}function ux(n,r,l,c){Ga?Ir?Ir.push(c):Ir=[c]:Ga=c,r=sh(r,"onChange"),0<r.length&&(l=new Or("onChange","change",null,l,c),n.push({event:l,listeners:r}))}var xc=null,yc=null;function Ij(n){Kb(n,0)}function gd(n){var r=Ts(n);if(qi(r))return n}function dx(n,r){if(n==="change")return r}var hx=!1;if(Fs){var qf;if(Fs){var $f="oninput"in document;if(!$f){var fx=document.createElement("div");fx.setAttribute("oninput","return;"),$f=typeof fx.oninput=="function"}qf=$f}else qf=!1;hx=qf&&(!document.documentMode||9<document.documentMode)}function mx(){xc&&(xc.detachEvent("onpropertychange",gx),yc=xc=null)}function gx(n){if(n.propertyName==="value"&&gd(yc)){var r=[];ux(r,yc,n,Hs(n)),Ya(Ij,r)}}function Dj(n,r,l){n==="focusin"?(mx(),xc=r,yc=l,xc.attachEvent("onpropertychange",gx)):n==="focusout"&&mx()}function Oj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gd(yc)}function Mj(n,r){if(n==="click")return gd(r)}function Vj(n,r){if(n==="input"||n==="change")return gd(r)}function Pj(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ss=typeof Object.is=="function"?Object.is:Pj;function bc(n,r){if(Ss(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!Et.call(r,f)||!Ss(n[f],r[f]))return!1}return!0}function px(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xx(n,r){var l=px(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=r&&c>=r)return{node:l,offset:r-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=px(l)}}function yx(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?yx(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function bx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=kr(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=kr(n.document)}return r}function Kf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Lj=Fs&&"documentMode"in document&&11>=document.documentMode,ql=null,Gf=null,vc=null,Yf=!1;function vx(n,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yf||ql==null||ql!==kr(c)||(c=ql,"selectionStart"in c&&Kf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vc&&bc(vc,c)||(vc=c,c=sh(Gf,"onSelect"),0<c.length&&(r=new Or("onSelect","select",null,r,l),n.push({event:r,listeners:c}),r.target=ql)))}function Zi(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var $l={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Qf={},wx={};Fs&&(wx=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function el(n){if(Qf[n])return Qf[n];if(!$l[n])return n;var r=$l[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in wx)return Qf[n]=r[l];return n}var _x=el("animationend"),Nx=el("animationiteration"),jx=el("animationstart"),Uj=el("transitionrun"),zj=el("transitionstart"),Bj=el("transitioncancel"),Tx=el("transitionend"),Ex=new Map,Xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xf.push("scrollEnd");function hr(n,r){Ex.set(n,r),Ar(r,[n])}var pd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$s=[],Kl=0,Wf=0;function xd(){for(var n=Kl,r=Wf=Kl=0;r<n;){var l=$s[r];$s[r++]=null;var c=$s[r];$s[r++]=null;var f=$s[r];$s[r++]=null;var m=$s[r];if($s[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&Sx(l,f,m)}}function yd(n,r,l,c){$s[Kl++]=n,$s[Kl++]=r,$s[Kl++]=l,$s[Kl++]=c,Wf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Jf(n,r,l,c){return yd(n,r,l,c),bd(n)}function tl(n,r){return yd(n,null,null,r),bd(n)}function Sx(n,r,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=n.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-vt(l),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=l|536870912),m):null}function bd(n){if(50<Hc)throw Hc=0,lg=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Gl={};function Hj(n,r,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(n,r,l,c){return new Hj(n,r,l,c)}function Zf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ca(n,r){var l=n.alternate;return l===null?(l=Cs(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Cx(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function vd(n,r,l,c,f,m){var v=0;if(c=n,typeof n=="function")Zf(n)&&(v=1);else if(typeof n=="string")v=GT(n,l,pe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Cs(31,l,r,f),n.elementType=C,n.lanes=m,n;case $:return nl(l.children,f,m,r);case z:v=8,f|=24;break;case Q:return n=Cs(12,l,r,f|2),n.elementType=Q,n.lanes=m,n;case ce:return n=Cs(13,l,r,f),n.elementType=ce,n.lanes=m,n;case be:return n=Cs(19,l,r,f),n.elementType=be,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:v=10;break e;case ae:v=9;break e;case H:v=11;break e;case E:v=14;break e;case S:v=16,c=null;break e}v=29,l=Error(a(130,n===null?"null":typeof n,"")),c=null}return r=Cs(v,l,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function nl(n,r,l,c){return n=Cs(7,n,c,r),n.lanes=l,n}function em(n,r,l){return n=Cs(6,n,null,r),n.lanes=l,n}function Ax(n){var r=Cs(18,null,null,0);return r.stateNode=n,r}function tm(n,r,l){return r=Cs(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Rx=new WeakMap;function Ks(n,r){if(typeof n=="object"&&n!==null){var l=Rx.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Pt(r)},Rx.set(n,r),r)}return{value:n,source:r,stack:Pt(r)}}var Yl=[],Ql=0,wd=null,wc=0,Gs=[],Ys=0,Ja=null,Lr=1,Ur="";function ua(n,r){Yl[Ql++]=wc,Yl[Ql++]=wd,wd=n,wc=r}function kx(n,r,l){Gs[Ys++]=Lr,Gs[Ys++]=Ur,Gs[Ys++]=Ja,Ja=n;var c=Lr;n=Ur;var f=32-vt(c)-1;c&=~(1<<f),l+=1;var m=32-vt(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Lr=1<<32-vt(r)+f|l<<f|c,Ur=m+n}else Lr=1<<m|l<<f|c,Ur=n}function nm(n){n.return!==null&&(ua(n,1),kx(n,1,0))}function sm(n){for(;n===wd;)wd=Yl[--Ql],Yl[Ql]=null,wc=Yl[--Ql],Yl[Ql]=null;for(;n===Ja;)Ja=Gs[--Ys],Gs[Ys]=null,Ur=Gs[--Ys],Gs[Ys]=null,Lr=Gs[--Ys],Gs[Ys]=null}function Ix(n,r){Gs[Ys++]=Lr,Gs[Ys++]=Ur,Gs[Ys++]=Ja,Lr=r.id,Ur=r.overflow,Ja=n}var Mn=null,Ht=null,ht=!1,Za=null,Qs=!1,rm=Error(a(519));function ei(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _c(Ks(r,n)),rm}function Dx(n){var r=n.stateNode,l=n.type,c=n.memoizedProps;switch(r[Ze]=n,r[rt]=c,l){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(l=0;l<qc.length;l++)it(qc[l],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":it("invalid",r),ed(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":it("invalid",r);break;case"textarea":it("invalid",r),$a(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Xb(r.textContent,l)?(c.popover!=null&&(it("beforetoggle",r),it("toggle",r)),c.onScroll!=null&&it("scroll",r),c.onScrollEnd!=null&&it("scrollend",r),c.onClick!=null&&(r.onclick=lr),r=!0):r=!1,r||ei(n,!0)}function Ox(n){for(Mn=n.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Mn=Mn.return}}function Xl(n){if(n!==Mn)return!1;if(!ht)return Ox(n),ht=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||_g(n.type,n.memoizedProps)),l=!l),l&&Ht&&ei(n),Ox(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ht=av(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ht=av(n)}else r===27?(r=Ht,mi(n.type)?(n=Sg,Sg=null,Ht=n):Ht=r):Ht=Mn?Ws(n.stateNode.nextSibling):null;return!0}function sl(){Ht=Mn=null,ht=!1}function am(){var n=Za;return n!==null&&(hs===null?hs=n:hs.push.apply(hs,n),Za=null),n}function _c(n){Za===null?Za=[n]:Za.push(n)}var im=P(null),rl=null,da=null;function ti(n,r,l){fe(im,r._currentValue),r._currentValue=l}function ha(n){n._currentValue=im.current,re(im)}function lm(n,r,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===l)break;n=n.return}}function om(n,r,l,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var L=0;L<r.length;L++)if(T.context===r[L]){m.lanes|=l,T=m.alternate,T!==null&&(T.lanes|=l),lm(m.return,l,n),c||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),lm(v,l,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Wl(n,r,l,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var T=f.type;Ss(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===I.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Qc):n=[Qc])}f=f.return}n!==null&&om(r,n,l,c),r.flags|=262144}function _d(n){for(n=n.firstContext;n!==null;){if(!Ss(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function al(n){rl=n,da=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Vn(n){return Mx(rl,n)}function Nd(n,r){return rl===null&&al(n),Mx(n,r)}function Mx(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},da===null){if(n===null)throw Error(a(308));da=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else da=da.next=r;return l}var Fj=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},qj=s.unstable_scheduleCallback,$j=s.unstable_NormalPriority,gn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cm(){return{controller:new Fj,data:new Map,refCount:0}}function Nc(n){n.refCount--,n.refCount===0&&qj($j,function(){n.controller.abort()})}var jc=null,um=0,Jl=0,Zl=null;function Kj(n,r){if(jc===null){var l=jc=[];um=0,Jl=fg(),Zl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return um++,r.then(Vx,Vx),r}function Vx(){if(--um===0&&jc!==null){Zl!==null&&(Zl.status="fulfilled");var n=jc;jc=null,Jl=0,Zl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Gj(n,r){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<l.length;f++)(0,l[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Px=J.S;J.S=function(n,r){vb=Bt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Kj(n,r),Px!==null&&Px(n,r)};var il=P(null);function dm(){var n=il.current;return n!==null?n:Lt.pooledCache}function jd(n,r){r===null?fe(il,il.current):fe(il,r.pool)}function Lx(){var n=dm();return n===null?null:{parent:gn._currentValue,pool:n}}var eo=Error(a(460)),hm=Error(a(474)),Td=Error(a(542)),Ed={then:function(){}};function Ux(n){return n=n.status,n==="fulfilled"||n==="rejected"}function zx(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(lr,lr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Hx(n),n;default:if(typeof r.status=="string")r.then(lr,lr);else{if(n=Lt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Hx(n),n}throw ol=r,eo}}function ll(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ol=l,eo):l}}var ol=null;function Bx(){if(ol===null)throw Error(a(459));var n=ol;return ol=null,n}function Hx(n){if(n===eo||n===Td)throw Error(a(483))}var to=null,Tc=0;function Sd(n){var r=Tc;return Tc+=1,to===null&&(to=[]),zx(to,n,r)}function Ec(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Cd(n,r){throw r.$$typeof===N?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Fx(n){function r(Y,F){if(n){var Z=Y.deletions;Z===null?(Y.deletions=[F],Y.flags|=16):Z.push(F)}}function l(Y,F){if(!n)return null;for(;F!==null;)r(Y,F),F=F.sibling;return null}function c(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function f(Y,F){return Y=ca(Y,F),Y.index=0,Y.sibling=null,Y}function m(Y,F,Z){return Y.index=Z,n?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<F?(Y.flags|=67108866,F):Z):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function v(Y){return n&&Y.alternate===null&&(Y.flags|=67108866),Y}function T(Y,F,Z,ue){return F===null||F.tag!==6?(F=em(Z,Y.mode,ue),F.return=Y,F):(F=f(F,Z),F.return=Y,F)}function L(Y,F,Z,ue){var Ue=Z.type;return Ue===$?oe(Y,F,Z.props.children,ue,Z.key):F!==null&&(F.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===S&&ll(Ue)===F.type)?(F=f(F,Z.props),Ec(F,Z),F.return=Y,F):(F=vd(Z.type,Z.key,Z.props,null,Y.mode,ue),Ec(F,Z),F.return=Y,F)}function ee(Y,F,Z,ue){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=tm(Z,Y.mode,ue),F.return=Y,F):(F=f(F,Z.children||[]),F.return=Y,F)}function oe(Y,F,Z,ue,Ue){return F===null||F.tag!==7?(F=nl(Z,Y.mode,ue,Ue),F.return=Y,F):(F=f(F,Z),F.return=Y,F)}function ge(Y,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=em(""+F,Y.mode,Z),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return Z=vd(F.type,F.key,F.props,null,Y.mode,Z),Ec(Z,F),Z.return=Y,Z;case V:return F=tm(F,Y.mode,Z),F.return=Y,F;case S:return F=ll(F),ge(Y,F,Z)}if(_e(F)||M(F))return F=nl(F,Y.mode,Z,null),F.return=Y,F;if(typeof F.then=="function")return ge(Y,Sd(F),Z);if(F.$$typeof===K)return ge(Y,Nd(Y,F),Z);Cd(Y,F)}return null}function se(Y,F,Z,ue){var Ue=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ue!==null?null:T(Y,F,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case O:return Z.key===Ue?L(Y,F,Z,ue):null;case V:return Z.key===Ue?ee(Y,F,Z,ue):null;case S:return Z=ll(Z),se(Y,F,Z,ue)}if(_e(Z)||M(Z))return Ue!==null?null:oe(Y,F,Z,ue,null);if(typeof Z.then=="function")return se(Y,F,Sd(Z),ue);if(Z.$$typeof===K)return se(Y,F,Nd(Y,Z),ue);Cd(Y,Z)}return null}function le(Y,F,Z,ue,Ue){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(Z)||null,T(F,Y,""+ue,Ue);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case O:return Y=Y.get(ue.key===null?Z:ue.key)||null,L(F,Y,ue,Ue);case V:return Y=Y.get(ue.key===null?Z:ue.key)||null,ee(F,Y,ue,Ue);case S:return ue=ll(ue),le(Y,F,Z,ue,Ue)}if(_e(ue)||M(ue))return Y=Y.get(Z)||null,oe(F,Y,ue,Ue,null);if(typeof ue.then=="function")return le(Y,F,Z,Sd(ue),Ue);if(ue.$$typeof===K)return le(Y,F,Z,Nd(F,ue),Ue);Cd(F,ue)}return null}function Oe(Y,F,Z,ue){for(var Ue=null,xt=null,Le=F,nt=F=0,ot=null;Le!==null&&nt<Z.length;nt++){Le.index>nt?(ot=Le,Le=null):ot=Le.sibling;var yt=se(Y,Le,Z[nt],ue);if(yt===null){Le===null&&(Le=ot);break}n&&Le&&yt.alternate===null&&r(Y,Le),F=m(yt,F,nt),xt===null?Ue=yt:xt.sibling=yt,xt=yt,Le=ot}if(nt===Z.length)return l(Y,Le),ht&&ua(Y,nt),Ue;if(Le===null){for(;nt<Z.length;nt++)Le=ge(Y,Z[nt],ue),Le!==null&&(F=m(Le,F,nt),xt===null?Ue=Le:xt.sibling=Le,xt=Le);return ht&&ua(Y,nt),Ue}for(Le=c(Le);nt<Z.length;nt++)ot=le(Le,Y,nt,Z[nt],ue),ot!==null&&(n&&ot.alternate!==null&&Le.delete(ot.key===null?nt:ot.key),F=m(ot,F,nt),xt===null?Ue=ot:xt.sibling=ot,xt=ot);return n&&Le.forEach(function(bi){return r(Y,bi)}),ht&&ua(Y,nt),Ue}function Fe(Y,F,Z,ue){if(Z==null)throw Error(a(151));for(var Ue=null,xt=null,Le=F,nt=F=0,ot=null,yt=Z.next();Le!==null&&!yt.done;nt++,yt=Z.next()){Le.index>nt?(ot=Le,Le=null):ot=Le.sibling;var bi=se(Y,Le,yt.value,ue);if(bi===null){Le===null&&(Le=ot);break}n&&Le&&bi.alternate===null&&r(Y,Le),F=m(bi,F,nt),xt===null?Ue=bi:xt.sibling=bi,xt=bi,Le=ot}if(yt.done)return l(Y,Le),ht&&ua(Y,nt),Ue;if(Le===null){for(;!yt.done;nt++,yt=Z.next())yt=ge(Y,yt.value,ue),yt!==null&&(F=m(yt,F,nt),xt===null?Ue=yt:xt.sibling=yt,xt=yt);return ht&&ua(Y,nt),Ue}for(Le=c(Le);!yt.done;nt++,yt=Z.next())yt=le(Le,Y,nt,yt.value,ue),yt!==null&&(n&&yt.alternate!==null&&Le.delete(yt.key===null?nt:yt.key),F=m(yt,F,nt),xt===null?Ue=yt:xt.sibling=yt,xt=yt);return n&&Le.forEach(function(rE){return r(Y,rE)}),ht&&ua(Y,nt),Ue}function Vt(Y,F,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===$&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case O:e:{for(var Ue=Z.key;F!==null;){if(F.key===Ue){if(Ue=Z.type,Ue===$){if(F.tag===7){l(Y,F.sibling),ue=f(F,Z.props.children),ue.return=Y,Y=ue;break e}}else if(F.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===S&&ll(Ue)===F.type){l(Y,F.sibling),ue=f(F,Z.props),Ec(ue,Z),ue.return=Y,Y=ue;break e}l(Y,F);break}else r(Y,F);F=F.sibling}Z.type===$?(ue=nl(Z.props.children,Y.mode,ue,Z.key),ue.return=Y,Y=ue):(ue=vd(Z.type,Z.key,Z.props,null,Y.mode,ue),Ec(ue,Z),ue.return=Y,Y=ue)}return v(Y);case V:e:{for(Ue=Z.key;F!==null;){if(F.key===Ue)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){l(Y,F.sibling),ue=f(F,Z.children||[]),ue.return=Y,Y=ue;break e}else{l(Y,F);break}else r(Y,F);F=F.sibling}ue=tm(Z,Y.mode,ue),ue.return=Y,Y=ue}return v(Y);case S:return Z=ll(Z),Vt(Y,F,Z,ue)}if(_e(Z))return Oe(Y,F,Z,ue);if(M(Z)){if(Ue=M(Z),typeof Ue!="function")throw Error(a(150));return Z=Ue.call(Z),Fe(Y,F,Z,ue)}if(typeof Z.then=="function")return Vt(Y,F,Sd(Z),ue);if(Z.$$typeof===K)return Vt(Y,F,Nd(Y,Z),ue);Cd(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(l(Y,F.sibling),ue=f(F,Z),ue.return=Y,Y=ue):(l(Y,F),ue=em(Z,Y.mode,ue),ue.return=Y,Y=ue),v(Y)):l(Y,F)}return function(Y,F,Z,ue){try{Tc=0;var Ue=Vt(Y,F,Z,ue);return to=null,Ue}catch(Le){if(Le===eo||Le===Td)throw Le;var xt=Cs(29,Le,null,Y.mode);return xt.lanes=ue,xt.return=Y,xt}finally{}}}var cl=Fx(!0),qx=Fx(!1),ni=!1;function fm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function si(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ri(n,r,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=bd(n),Sx(n,null,l),r}return yd(n,c,r,l),bd(n)}function Sc(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,B(n,l)}}function gm(n,r){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var pm=!1;function Cc(){if(pm){var n=Zl;if(n!==null)throw n}}function Ac(n,r,l,c){pm=!1;var f=n.updateQueue;ni=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var L=T,ee=L.next;L.next=null,v===null?m=ee:v.next=ee,v=L;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,T=oe.lastBaseUpdate,T!==v&&(T===null?oe.firstBaseUpdate=ee:T.next=ee,oe.lastBaseUpdate=L))}if(m!==null){var ge=f.baseState;v=0,oe=ee=L=null,T=m;do{var se=T.lane&-536870913,le=se!==T.lane;if(le?(lt&se)===se:(c&se)===se){se!==0&&se===Jl&&(pm=!0),oe!==null&&(oe=oe.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Oe=n,Fe=T;se=r;var Vt=l;switch(Fe.tag){case 1:if(Oe=Fe.payload,typeof Oe=="function"){ge=Oe.call(Vt,ge,se);break e}ge=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Fe.payload,se=typeof Oe=="function"?Oe.call(Vt,ge,se):Oe,se==null)break e;ge=w({},ge,se);break e;case 2:ni=!0}}se=T.callback,se!==null&&(n.flags|=64,le&&(n.flags|=8192),le=f.callbacks,le===null?f.callbacks=[se]:le.push(se))}else le={lane:se,tag:T.tag,payload:T.payload,callback:T.callback,next:null},oe===null?(ee=oe=le,L=ge):oe=oe.next=le,v|=se;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;le=T,T=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);oe===null&&(L=ge),f.baseState=L,f.firstBaseUpdate=ee,f.lastBaseUpdate=oe,m===null&&(f.shared.lanes=0),ci|=v,n.lanes=v,n.memoizedState=ge}}function $x(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function Kx(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)$x(l[n],r)}var no=P(null),Ad=P(0);function Gx(n,r){n=wa,fe(Ad,n),fe(no,r),wa=n|r.baseLanes}function xm(){fe(Ad,wa),fe(no,no.current)}function ym(){wa=Ad.current,re(no),re(Ad)}var As=P(null),Xs=null;function ai(n){var r=n.alternate;fe(un,un.current&1),fe(As,n),Xs===null&&(r===null||no.current!==null||r.memoizedState!==null)&&(Xs=n)}function bm(n){fe(un,un.current),fe(As,n),Xs===null&&(Xs=n)}function Yx(n){n.tag===22?(fe(un,un.current),fe(As,n),Xs===null&&(Xs=n)):ii()}function ii(){fe(un,un.current),fe(As,As.current)}function Rs(n){re(As),Xs===n&&(Xs=null),re(un)}var un=P(0);function Rd(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Tg(l)||Eg(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var fa=0,tt=null,Ot=null,pn=null,kd=!1,so=!1,ul=!1,Id=0,Rc=0,ro=null,Yj=0;function tn(){throw Error(a(321))}function vm(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Ss(n[l],r[l]))return!1;return!0}function wm(n,r,l,c,f,m){return fa=m,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=n===null||n.memoizedState===null?ky:Vm,ul=!1,m=l(c,f),ul=!1,so&&(m=Xx(r,l,c,f)),Qx(n),m}function Qx(n){J.H=Dc;var r=Ot!==null&&Ot.next!==null;if(fa=0,pn=Ot=tt=null,kd=!1,Rc=0,ro=null,r)throw Error(a(300));n===null||xn||(n=n.dependencies,n!==null&&_d(n)&&(xn=!0))}function Xx(n,r,l,c){tt=n;var f=0;do{if(so&&(ro=null),Rc=0,so=!1,25<=f)throw Error(a(301));if(f+=1,pn=Ot=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=Iy,m=r(l,c)}while(so);return m}function Qj(){var n=J.H,r=n.useState()[0];return r=typeof r.then=="function"?kc(r):r,n=n.useState()[0],(Ot!==null?Ot.memoizedState:null)!==n&&(tt.flags|=1024),r}function _m(){var n=Id!==0;return Id=0,n}function Nm(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function jm(n){if(kd){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}kd=!1}fa=0,pn=Ot=tt=null,so=!1,Rc=Id=0,ro=null}function es(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tt.memoizedState=pn=n:pn=pn.next=n,pn}function dn(){if(Ot===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var r=pn===null?tt.memoizedState:pn.next;if(r!==null)pn=r,Ot=n;else{if(n===null)throw tt.alternate===null?Error(a(467)):Error(a(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?tt.memoizedState=pn=n:pn=pn.next=n}return pn}function Dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kc(n){var r=Rc;return Rc+=1,ro===null&&(ro=[]),n=zx(ro,n,r),r=tt,(pn===null?r.memoizedState:pn.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?ky:Vm),n}function Od(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return kc(n);if(n.$$typeof===K)return Vn(n)}throw Error(a(438,String(n)))}function Tm(n){var r=null,l=tt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Dd(),tt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),c=0;c<n;c++)l[c]=D;return r.index++,l}function ma(n,r){return typeof r=="function"?r(n):r}function Md(n){var r=dn();return Em(r,Ot,n)}function Em(n,r,l){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var T=v=null,L=null,ee=r,oe=!1;do{var ge=ee.lane&-536870913;if(ge!==ee.lane?(lt&ge)===ge:(fa&ge)===ge){var se=ee.revertLane;if(se===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ge===Jl&&(oe=!0);else if((fa&se)===se){ee=ee.next,se===Jl&&(oe=!0);continue}else ge={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},L===null?(T=L=ge,v=m):L=L.next=ge,tt.lanes|=se,ci|=se;ge=ee.action,ul&&l(m,ge),m=ee.hasEagerState?ee.eagerState:l(m,ge)}else se={lane:ge,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},L===null?(T=L=se,v=m):L=L.next=se,tt.lanes|=ge,ci|=ge;ee=ee.next}while(ee!==null&&ee!==r);if(L===null?v=m:L.next=T,!Ss(m,n.memoizedState)&&(xn=!0,oe&&(l=Zl,l!==null)))throw l;n.memoizedState=m,n.baseState=v,n.baseQueue=L,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Sm(n){var r=dn(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Ss(m,r.memoizedState)||(xn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function Wx(n,r,l){var c=tt,f=dn(),m=ht;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=r();var v=!Ss((Ot||f).memoizedState,l);if(v&&(f.memoizedState=l,xn=!0),f=f.queue,Rm(ey.bind(null,c,f,n),[n]),f.getSnapshot!==r||v||pn!==null&&pn.memoizedState.tag&1){if(c.flags|=2048,ao(9,{destroy:void 0},Zx.bind(null,c,f,l,r),null),Lt===null)throw Error(a(349));m||(fa&127)!==0||Jx(c,r,l)}return l}function Jx(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=tt.updateQueue,r===null?(r=Dd(),tt.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function Zx(n,r,l,c){r.value=l,r.getSnapshot=c,ty(r)&&ny(n)}function ey(n,r,l){return l(function(){ty(r)&&ny(n)})}function ty(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Ss(n,l)}catch{return!0}}function ny(n){var r=tl(n,2);r!==null&&fs(r,n,2)}function Cm(n){var r=es();if(typeof n=="function"){var l=n;if(n=l(),ul){Xt(!0);try{l()}finally{Xt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:n},r}function sy(n,r,l,c){return n.baseState=l,Em(n,Ot,typeof c=="function"?c:ma)}function Xj(n,r,l,c,f){if(Ld(n))throw Error(a(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};J.T!==null?l(!0):m.isTransition=!1,c(m),l=r.pending,l===null?(m.next=r.pending=m,ry(r,m)):(m.next=l.next,r.pending=l.next=m)}}function ry(n,r){var l=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=J.T,v={};J.T=v;try{var T=l(f,c),L=J.S;L!==null&&L(v,T),ay(n,r,T)}catch(ee){Am(n,r,ee)}finally{m!==null&&v.types!==null&&(m.types=v.types),J.T=m}}else try{m=l(f,c),ay(n,r,m)}catch(ee){Am(n,r,ee)}}function ay(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){iy(n,r,c)},function(c){return Am(n,r,c)}):iy(n,r,l)}function iy(n,r,l){r.status="fulfilled",r.value=l,ly(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,ry(n,l)))}function Am(n,r,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,ly(r),r=r.next;while(r!==c)}n.action=null}function ly(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function oy(n,r){return r}function cy(n,r){if(ht){var l=Lt.formState;if(l!==null){e:{var c=tt;if(ht){if(Ht){t:{for(var f=Ht,m=Qs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ws(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ht=Ws(f.nextSibling),c=f.data==="F!";break e}}ei(c)}c=!1}c&&(r=l[0])}}return l=es(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oy,lastRenderedState:r},l.queue=c,l=Cy.bind(null,tt,c),c.dispatch=l,c=Cm(!1),m=Mm.bind(null,tt,!1,c.queue),c=es(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,l=Xj.bind(null,tt,f,m,l),f.dispatch=l,c.memoizedState=n,[r,l,!1]}function uy(n){var r=dn();return dy(r,Ot,n)}function dy(n,r,l){if(r=Em(n,r,oy)[0],n=Md(ma)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=kc(r)}catch(v){throw v===eo?Td:v}else c=r;r=dn();var f=r.queue,m=f.dispatch;return l!==r.memoizedState&&(tt.flags|=2048,ao(9,{destroy:void 0},Wj.bind(null,f,l),null)),[c,m,n]}function Wj(n,r){n.action=r}function hy(n){var r=dn(),l=Ot;if(l!==null)return dy(r,l,n);dn(),r=r.memoizedState,l=dn();var c=l.queue.dispatch;return l.memoizedState=n,[r,c,!1]}function ao(n,r,l,c){return n={tag:n,create:l,deps:c,inst:r,next:null},r=tt.updateQueue,r===null&&(r=Dd(),tt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,r.lastEffect=n),n}function fy(){return dn().memoizedState}function Vd(n,r,l,c){var f=es();tt.flags|=n,f.memoizedState=ao(1|r,{destroy:void 0},l,c===void 0?null:c)}function Pd(n,r,l,c){var f=dn();c=c===void 0?null:c;var m=f.memoizedState.inst;Ot!==null&&c!==null&&vm(c,Ot.memoizedState.deps)?f.memoizedState=ao(r,m,l,c):(tt.flags|=n,f.memoizedState=ao(1|r,m,l,c))}function my(n,r){Vd(8390656,8,n,r)}function Rm(n,r){Pd(2048,8,n,r)}function Jj(n){tt.flags|=4;var r=tt.updateQueue;if(r===null)r=Dd(),tt.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function gy(n){var r=dn().memoizedState;return Jj({ref:r,nextImpl:n}),function(){if((_t&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function py(n,r){return Pd(4,2,n,r)}function xy(n,r){return Pd(4,4,n,r)}function yy(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function by(n,r,l){l=l!=null?l.concat([n]):null,Pd(4,4,yy.bind(null,r,n),l)}function km(){}function vy(n,r){var l=dn();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&vm(r,c[1])?c[0]:(l.memoizedState=[n,r],n)}function wy(n,r){var l=dn();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&vm(r,c[1]))return c[0];if(c=n(),ul){Xt(!0);try{n()}finally{Xt(!1)}}return l.memoizedState=[c,r],c}function Im(n,r,l){return l===void 0||(fa&1073741824)!==0&&(lt&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=_b(),tt.lanes|=n,ci|=n,l)}function _y(n,r,l,c){return Ss(l,r)?l:no.current!==null?(n=Im(n,l,c),Ss(n,r)||(xn=!0),n):(fa&42)===0||(fa&1073741824)!==0&&(lt&261930)===0?(xn=!0,n.memoizedState=l):(n=_b(),tt.lanes|=n,ci|=n,r)}function Ny(n,r,l,c,f){var m=te.p;te.p=m!==0&&8>m?m:8;var v=J.T,T={};J.T=T,Mm(n,!1,r,l);try{var L=f(),ee=J.S;if(ee!==null&&ee(T,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=Gj(L,c);Ic(n,r,oe,Ds(n))}else Ic(n,r,c,Ds(n))}catch(ge){Ic(n,r,{then:function(){},status:"rejected",reason:ge},Ds())}finally{te.p=m,v!==null&&T.types!==null&&(v.types=T.types),J.T=v}}function Zj(){}function Dm(n,r,l,c){if(n.tag!==5)throw Error(a(476));var f=jy(n).queue;Ny(n,f,r,Ee,l===null?Zj:function(){return Ty(n),l(c)})}function jy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:Ee},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Ty(n){var r=jy(n);r.next===null&&(r=n.alternate.memoizedState),Ic(n,r.next.queue,{},Ds())}function Om(){return Vn(Qc)}function Ey(){return dn().memoizedState}function Sy(){return dn().memoizedState}function eT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ds();n=si(l);var c=ri(r,n,l);c!==null&&(fs(c,r,l),Sc(c,r,l)),r={cache:cm()},n.payload=r;return}r=r.return}}function tT(n,r,l){var c=Ds();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ld(n)?Ay(r,l):(l=Jf(n,r,l,c),l!==null&&(fs(l,n,c),Ry(l,r,c)))}function Cy(n,r,l){var c=Ds();Ic(n,r,l,c)}function Ic(n,r,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ld(n))Ay(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,T=m(v,l);if(f.hasEagerState=!0,f.eagerState=T,Ss(T,v))return yd(n,r,f,0),Lt===null&&xd(),!1}catch{}finally{}if(l=Jf(n,r,f,c),l!==null)return fs(l,n,c),Ry(l,r,c),!0}return!1}function Mm(n,r,l,c){if(c={lane:2,revertLane:fg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ld(n)){if(r)throw Error(a(479))}else r=Jf(n,l,c,2),r!==null&&fs(r,n,2)}function Ld(n){var r=n.alternate;return n===tt||r!==null&&r===tt}function Ay(n,r){so=kd=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Ry(n,r,l){if((l&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,B(n,l)}}var Dc={readContext:Vn,use:Od,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Dc.useEffectEvent=tn;var ky={readContext:Vn,use:Od,useCallback:function(n,r){return es().memoizedState=[n,r===void 0?null:r],n},useContext:Vn,useEffect:my,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,Vd(4194308,4,yy.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Vd(4194308,4,n,r)},useInsertionEffect:function(n,r){Vd(4,2,n,r)},useMemo:function(n,r){var l=es();r=r===void 0?null:r;var c=n();if(ul){Xt(!0);try{n()}finally{Xt(!1)}}return l.memoizedState=[c,r],c},useReducer:function(n,r,l){var c=es();if(l!==void 0){var f=l(r);if(ul){Xt(!0);try{l(r)}finally{Xt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=tT.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var r=es();return n={current:n},r.memoizedState=n},useState:function(n){n=Cm(n);var r=n.queue,l=Cy.bind(null,tt,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:km,useDeferredValue:function(n,r){var l=es();return Im(l,n,r)},useTransition:function(){var n=Cm(!1);return n=Ny.bind(null,tt,n.queue,!0,!1),es().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var c=tt,f=es();if(ht){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),Lt===null)throw Error(a(349));(lt&127)!==0||Jx(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,my(ey.bind(null,c,m,n),[n]),c.flags|=2048,ao(9,{destroy:void 0},Zx.bind(null,c,m,l,r),null),l},useId:function(){var n=es(),r=Lt.identifierPrefix;if(ht){var l=Ur,c=Lr;l=(c&~(1<<32-vt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Id++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Yj++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Om,useFormState:cy,useActionState:cy,useOptimistic:function(n){var r=es();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Mm.bind(null,tt,!0,l),l.dispatch=r,[n,r]},useMemoCache:Tm,useCacheRefresh:function(){return es().memoizedState=eT.bind(null,tt)},useEffectEvent:function(n){var r=es(),l={impl:n};return r.memoizedState=l,function(){if((_t&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Vm={readContext:Vn,use:Od,useCallback:vy,useContext:Vn,useEffect:Rm,useImperativeHandle:by,useInsertionEffect:py,useLayoutEffect:xy,useMemo:wy,useReducer:Md,useRef:fy,useState:function(){return Md(ma)},useDebugValue:km,useDeferredValue:function(n,r){var l=dn();return _y(l,Ot.memoizedState,n,r)},useTransition:function(){var n=Md(ma)[0],r=dn().memoizedState;return[typeof n=="boolean"?n:kc(n),r]},useSyncExternalStore:Wx,useId:Ey,useHostTransitionStatus:Om,useFormState:uy,useActionState:uy,useOptimistic:function(n,r){var l=dn();return sy(l,Ot,n,r)},useMemoCache:Tm,useCacheRefresh:Sy};Vm.useEffectEvent=gy;var Iy={readContext:Vn,use:Od,useCallback:vy,useContext:Vn,useEffect:Rm,useImperativeHandle:by,useInsertionEffect:py,useLayoutEffect:xy,useMemo:wy,useReducer:Sm,useRef:fy,useState:function(){return Sm(ma)},useDebugValue:km,useDeferredValue:function(n,r){var l=dn();return Ot===null?Im(l,n,r):_y(l,Ot.memoizedState,n,r)},useTransition:function(){var n=Sm(ma)[0],r=dn().memoizedState;return[typeof n=="boolean"?n:kc(n),r]},useSyncExternalStore:Wx,useId:Ey,useHostTransitionStatus:Om,useFormState:hy,useActionState:hy,useOptimistic:function(n,r){var l=dn();return Ot!==null?sy(l,Ot,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Tm,useCacheRefresh:Sy};Iy.useEffectEvent=gy;function Pm(n,r,l,c){r=n.memoizedState,l=l(c,r),l=l==null?r:w({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Lm={enqueueSetState:function(n,r,l){n=n._reactInternals;var c=Ds(),f=si(c);f.payload=r,l!=null&&(f.callback=l),r=ri(n,f,c),r!==null&&(fs(r,n,c),Sc(r,n,c))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var c=Ds(),f=si(c);f.tag=1,f.payload=r,l!=null&&(f.callback=l),r=ri(n,f,c),r!==null&&(fs(r,n,c),Sc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Ds(),c=si(l);c.tag=2,r!=null&&(c.callback=r),r=ri(n,c,l),r!==null&&(fs(r,n,l),Sc(r,n,l))}};function Dy(n,r,l,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!bc(l,c)||!bc(f,m):!0}function Oy(n,r,l,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==n&&Lm.enqueueReplaceState(r,r.state,null)}function dl(n,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(n=n.defaultProps){l===r&&(l=w({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function My(n){pd(n)}function Vy(n){console.error(n)}function Py(n){pd(n)}function Ud(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ly(n,r,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Um(n,r,l){return l=si(l),l.tag=3,l.payload={element:null},l.callback=function(){Ud(n,r)},l}function Uy(n){return n=si(n),n.tag=3,n}function zy(n,r,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Ly(r,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Ly(r,l,c),typeof f!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function nT(n,r,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Wl(r,l,f,!0),l=As.current,l!==null){switch(l.tag){case 31:case 13:return Xs===null?Wd():l.alternate===null&&nn===0&&(nn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Ed?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),ug(n,c,f)),!1;case 22:return l.flags|=65536,c===Ed?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),ug(n,c,f)),!1}throw Error(a(435,l.tag))}return ug(n,c,f),Wd(),!1}if(ht)return r=As.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==rm&&(n=Error(a(422),{cause:c}),_c(Ks(n,l)))):(c!==rm&&(r=Error(a(423),{cause:c}),_c(Ks(r,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Ks(c,l),f=Um(n.stateNode,c,f),gm(n,f),nn!==4&&(nn=2)),!1;var m=Error(a(520),{cause:c});if(m=Ks(m,l),Bc===null?Bc=[m]:Bc.push(m),nn!==4&&(nn=2),r===null)return!0;c=Ks(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=Um(l.stateNode,c,n),gm(l,n),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ui===null||!ui.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Uy(f),zy(f,n,l,c),gm(l,f),!1}l=l.return}while(l!==null);return!1}var zm=Error(a(461)),xn=!1;function Pn(n,r,l,c){r.child=n===null?qx(r,null,l,c):cl(r,n.child,l,c)}function By(n,r,l,c,f){l=l.render;var m=r.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return al(r),c=wm(n,r,l,v,m,f),T=_m(),n!==null&&!xn?(Nm(n,r,f),ga(n,r,f)):(ht&&T&&nm(r),r.flags|=1,Pn(n,r,c,f),r.child)}function Hy(n,r,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!Zf(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,Fy(n,r,m,c,f)):(n=vd(l.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Ym(n,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:bc,l(v,c)&&n.ref===r.ref)return ga(n,r,f)}return r.flags|=1,n=ca(m,c),n.ref=r.ref,n.return=r,r.child=n}function Fy(n,r,l,c,f){if(n!==null){var m=n.memoizedProps;if(bc(m,c)&&n.ref===r.ref)if(xn=!1,r.pendingProps=c=m,Ym(n,f))(n.flags&131072)!==0&&(xn=!0);else return r.lanes=n.lanes,ga(n,r,f)}return Bm(n,r,l,c,f)}function qy(n,r,l,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return $y(n,r,m,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&jd(r,m!==null?m.cachePool:null),m!==null?Gx(r,m):xm(),Yx(r);else return c=r.lanes=536870912,$y(n,r,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(jd(r,m.cachePool),Gx(r,m),ii(),r.memoizedState=null):(n!==null&&jd(r,null),xm(),ii());return Pn(n,r,f,l),r.child}function Oc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $y(n,r,l,c,f){var m=dm();return m=m===null?null:{parent:gn._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},n!==null&&jd(r,null),xm(),Yx(r),n!==null&&Wl(n,r,c,!0),r.childLanes=f,null}function zd(n,r){return r=Hd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Ky(n,r,l){return cl(r,n.child,null,l),n=zd(r,r.pendingProps),n.flags|=2,Rs(r),r.memoizedState=null,n}function sT(n,r,l){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(ht){if(c.mode==="hidden")return n=zd(r,c),r.lanes=536870912,Oc(null,n);if(bm(r),(n=Ht)?(n=rv(n,Qs),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Ja!==null?{id:Lr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},l=Ax(n),l.return=r,r.child=l,Mn=r,Ht=null)):n=null,n===null)throw ei(r);return r.lanes=536870912,null}return zd(r,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(bm(r),f)if(r.flags&256)r.flags&=-257,r=Ky(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(xn||Wl(n,r,l,!1),f=(l&n.childLanes)!==0,xn||f){if(c=Lt,c!==null&&(v=X(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,tl(n,v),fs(c,n,v),zm;Wd(),r=Ky(n,r,l)}else n=m.treeContext,Ht=Ws(v.nextSibling),Mn=r,ht=!0,Za=null,Qs=!1,n!==null&&Ix(r,n),r=zd(r,c),r.flags|=4096;return r}return n=ca(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Bd(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function Bm(n,r,l,c,f){return al(r),l=wm(n,r,l,c,void 0,f),c=_m(),n!==null&&!xn?(Nm(n,r,f),ga(n,r,f)):(ht&&c&&nm(r),r.flags|=1,Pn(n,r,l,f),r.child)}function Gy(n,r,l,c,f,m){return al(r),r.updateQueue=null,l=Xx(r,c,l,f),Qx(n),c=_m(),n!==null&&!xn?(Nm(n,r,m),ga(n,r,m)):(ht&&c&&nm(r),r.flags|=1,Pn(n,r,l,m),r.child)}function Yy(n,r,l,c,f){if(al(r),r.stateNode===null){var m=Gl,v=l.contextType;typeof v=="object"&&v!==null&&(m=Vn(v)),m=new l(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},fm(r),v=l.contextType,m.context=typeof v=="object"&&v!==null?Vn(v):Gl,m.state=r.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Pm(r,l,v,c),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Lm.enqueueReplaceState(m,m.state,null),Ac(r,c,m,f),Cc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var T=r.memoizedProps,L=dl(l,T);m.props=L;var ee=m.context,oe=l.contextType;v=Gl,typeof oe=="object"&&oe!==null&&(v=Vn(oe));var ge=l.getDerivedStateFromProps;oe=typeof ge=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,oe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||ee!==v)&&Oy(r,m,c,v),ni=!1;var se=r.memoizedState;m.state=se,Ac(r,c,m,f),Cc(),ee=r.memoizedState,T||se!==ee||ni?(typeof ge=="function"&&(Pm(r,l,ge,c),ee=r.memoizedState),(L=ni||Dy(r,l,L,c,se,ee,v))?(oe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ee),m.props=c,m.state=ee,m.context=v,c=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,mm(n,r),v=r.memoizedProps,oe=dl(l,v),m.props=oe,ge=r.pendingProps,se=m.context,ee=l.contextType,L=Gl,typeof ee=="object"&&ee!==null&&(L=Vn(ee)),T=l.getDerivedStateFromProps,(ee=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ge||se!==L)&&Oy(r,m,c,L),ni=!1,se=r.memoizedState,m.state=se,Ac(r,c,m,f),Cc();var le=r.memoizedState;v!==ge||se!==le||ni||n!==null&&n.dependencies!==null&&_d(n.dependencies)?(typeof T=="function"&&(Pm(r,l,T,c),le=r.memoizedState),(oe=ni||Dy(r,l,oe,c,se,le,L)||n!==null&&n.dependencies!==null&&_d(n.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,le,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,le,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),m.props=c,m.state=le,m.context=L,c=oe):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Bd(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=cl(r,n.child,null,f),r.child=cl(r,null,l,f)):Pn(n,r,l,f),r.memoizedState=m.state,n=r.child):n=ga(n,r,f),n}function Qy(n,r,l,c){return sl(),r.flags|=256,Pn(n,r,l,c),r.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fm(n){return{baseLanes:n,cachePool:Lx()}}function qm(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=Is),n}function Xy(n,r,l){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(un.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(ht){if(f?ai(r):ii(),(n=Ht)?(n=rv(n,Qs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Ja!==null?{id:Lr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},l=Ax(n),l.return=r,r.child=l,Mn=r,Ht=null)):n=null,n===null)throw ei(r);return Eg(n)?r.lanes=32:r.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(ii(),f=r.mode,T=Hd({mode:"hidden",children:T},f),c=nl(c,f,l,null),T.return=r,c.return=r,T.sibling=c,r.child=T,c=r.child,c.memoizedState=Fm(l),c.childLanes=qm(n,v,l),r.memoizedState=Hm,Oc(null,c)):(ai(r),$m(r,T))}var L=n.memoizedState;if(L!==null&&(T=L.dehydrated,T!==null)){if(m)r.flags&256?(ai(r),r.flags&=-257,r=Km(n,r,l)):r.memoizedState!==null?(ii(),r.child=n.child,r.flags|=128,r=null):(ii(),T=c.fallback,f=r.mode,c=Hd({mode:"visible",children:c.children},f),T=nl(T,f,l,null),T.flags|=2,c.return=r,T.return=r,c.sibling=T,r.child=c,cl(r,n.child,null,l),c=r.child,c.memoizedState=Fm(l),c.childLanes=qm(n,v,l),r.memoizedState=Hm,r=Oc(null,c));else if(ai(r),Eg(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var ee=v.dgst;v=ee,c=Error(a(419)),c.stack="",c.digest=v,_c({value:c,source:null,stack:null}),r=Km(n,r,l)}else if(xn||Wl(n,r,l,!1),v=(l&n.childLanes)!==0,xn||v){if(v=Lt,v!==null&&(c=X(v,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,tl(n,c),fs(v,n,c),zm;Tg(T)||Wd(),r=Km(n,r,l)}else Tg(T)?(r.flags|=192,r.child=n.child,r=null):(n=L.treeContext,Ht=Ws(T.nextSibling),Mn=r,ht=!0,Za=null,Qs=!1,n!==null&&Ix(r,n),r=$m(r,c.children),r.flags|=4096);return r}return f?(ii(),T=c.fallback,f=r.mode,L=n.child,ee=L.sibling,c=ca(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,ee!==null?T=ca(ee,T):(T=nl(T,f,l,null),T.flags|=2),T.return=r,c.return=r,c.sibling=T,r.child=c,Oc(null,c),c=r.child,T=n.child.memoizedState,T===null?T=Fm(l):(f=T.cachePool,f!==null?(L=gn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Lx(),T={baseLanes:T.baseLanes|l,cachePool:f}),c.memoizedState=T,c.childLanes=qm(n,v,l),r.memoizedState=Hm,Oc(n.child,c)):(ai(r),l=n.child,n=l.sibling,l=ca(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=l,r.memoizedState=null,l)}function $m(n,r){return r=Hd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Hd(n,r){return n=Cs(22,n,null,r),n.lanes=0,n}function Km(n,r,l){return cl(r,n.child,null,l),n=$m(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Wy(n,r,l){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),lm(n.return,r,l)}function Gm(n,r,l,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function Jy(n,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=un.current,T=(v&2)!==0;if(T?(v=v&1|2,r.flags|=128):v&=1,fe(un,v),Pn(n,r,c,l),c=ht?wc:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wy(n,l,r);else if(n.tag===19)Wy(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=r.child,f=null;l!==null;)n=l.alternate,n!==null&&Rd(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),Gm(r,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Rd(n)===null){r.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Gm(r,!0,l,null,m,c);break;case"together":Gm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ga(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),ci|=r.lanes,(l&r.childLanes)===0)if(n!==null){if(Wl(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,l=ca(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=ca(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function Ym(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&_d(n)))}function rT(n,r,l){switch(r.tag){case 3:U(r,r.stateNode.containerInfo),ti(r,gn,n.memoizedState.cache),sl();break;case 27:case 5:Ne(r);break;case 4:U(r,r.stateNode.containerInfo);break;case 10:ti(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,bm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ai(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Xy(n,r,l):(ai(r),n=ga(n,r,l),n!==null?n.sibling:null);ai(r);break;case 19:var f=(n.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Wl(n,r,l,!1),c=(l&r.childLanes)!==0),f){if(c)return Jy(n,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(un,un.current),c)break;return null;case 22:return r.lanes=0,qy(n,r,l,r.pendingProps);case 24:ti(r,gn,n.memoizedState.cache)}return ga(n,r,l)}function Zy(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)xn=!0;else{if(!Ym(n,l)&&(r.flags&128)===0)return xn=!1,rT(n,r,l);xn=(n.flags&131072)!==0}else xn=!1,ht&&(r.flags&1048576)!==0&&kx(r,wc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=ll(r.elementType),r.type=n,typeof n=="function")Zf(n)?(c=dl(n,c),r.tag=1,r=Yy(null,r,n,c,l)):(r.tag=0,r=Bm(null,r,n,c,l));else{if(n!=null){var f=n.$$typeof;if(f===H){r.tag=11,r=By(null,r,n,c,l);break e}else if(f===E){r.tag=14,r=Hy(null,r,n,c,l);break e}}throw r=Te(n)||n,Error(a(306,r,""))}}return r;case 0:return Bm(n,r,r.type,r.pendingProps,l);case 1:return c=r.type,f=dl(c,r.pendingProps),Yy(n,r,c,f,l);case 3:e:{if(U(r,r.stateNode.containerInfo),n===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,mm(n,r),Ac(r,c,null,l);var v=r.memoizedState;if(c=v.cache,ti(r,gn,c),c!==m.cache&&om(r,[gn],l,!0),Cc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Qy(n,r,c,l);break e}else if(c!==f){f=Ks(Error(a(424)),r),_c(f),r=Qy(n,r,c,l);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ht=Ws(n.firstChild),Mn=r,ht=!0,Za=null,Qs=!0,l=qx(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(sl(),c===f){r=ga(n,r,l);break e}Pn(n,r,c,l)}r=r.child}return r;case 26:return Bd(n,r),n===null?(l=uv(r.type,null,r.pendingProps,null))?r.memoizedState=l:ht||(l=r.type,n=r.pendingProps,c=rh(ye.current).createElement(l),c[Ze]=r,c[rt]=n,Ln(c,l,n),fn(c),r.stateNode=c):r.memoizedState=uv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ne(r),n===null&&ht&&(c=r.stateNode=lv(r.type,r.pendingProps,ye.current),Mn=r,Qs=!0,f=Ht,mi(r.type)?(Sg=f,Ht=Ws(c.firstChild)):Ht=f),Pn(n,r,r.pendingProps.children,l),Bd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&ht&&((f=c=Ht)&&(c=OT(c,r.type,r.pendingProps,Qs),c!==null?(r.stateNode=c,Mn=r,Ht=Ws(c.firstChild),Qs=!1,f=!0):f=!1),f||ei(r)),Ne(r),f=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,_g(f,m)?c=null:v!==null&&_g(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=wm(n,r,Qj,null,null,l),Qc._currentValue=f),Bd(n,r),Pn(n,r,c,l),r.child;case 6:return n===null&&ht&&((n=l=Ht)&&(l=MT(l,r.pendingProps,Qs),l!==null?(r.stateNode=l,Mn=r,Ht=null,n=!0):n=!1),n||ei(r)),null;case 13:return Xy(n,r,l);case 4:return U(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=cl(r,null,c,l):Pn(n,r,c,l),r.child;case 11:return By(n,r,r.type,r.pendingProps,l);case 7:return Pn(n,r,r.pendingProps,l),r.child;case 8:return Pn(n,r,r.pendingProps.children,l),r.child;case 12:return Pn(n,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,ti(r,r.type,c.value),Pn(n,r,c.children,l),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,al(r),f=Vn(f),c=c(f),r.flags|=1,Pn(n,r,c,l),r.child;case 14:return Hy(n,r,r.type,r.pendingProps,l);case 15:return Fy(n,r,r.type,r.pendingProps,l);case 19:return Jy(n,r,l);case 31:return sT(n,r,l);case 22:return qy(n,r,l,r.pendingProps);case 24:return al(r),c=Vn(gn),n===null?(f=dm(),f===null&&(f=Lt,m=cm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),r.memoizedState={parent:c,cache:f},fm(r),ti(r,gn,f)):((n.lanes&l)!==0&&(mm(n,r),Ac(r,null,null,l),Cc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ti(r,gn,c)):(c=m.cache,ti(r,gn,c),c!==f.cache&&om(r,[gn],l,!0))),Pn(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function pa(n){n.flags|=4}function Qm(n,r,l,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Eb())n.flags|=8192;else throw ol=Ed,hm}else n.flags&=-16777217}function eb(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!gv(r))if(Eb())n.flags|=8192;else throw ol=Ed,hm}function Fd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Ha():536870912,n.lanes|=r,co|=r)}function Mc(n,r){if(!ht)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(r)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,r}function aT(n,r,l){var c=r.pendingProps;switch(sm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Ft(r),null;case 3:return l=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ha(gn),q(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Xl(r)?pa(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,am())),Ft(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(pa(r),m!==null?(Ft(r),eb(r,m)):(Ft(r),Qm(r,f,null,c,l))):m?m!==n.memoizedState?(pa(r),Ft(r),eb(r,m)):(Ft(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&pa(r),Ft(r),Qm(r,f,n,c,l)),null;case 27:if(he(r),l=ye.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&pa(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Ft(r),null}n=pe.current,Xl(r)?Dx(r):(n=lv(f,c,l),r.stateNode=n,pa(r))}return Ft(r),null;case 5:if(he(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&pa(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Ft(r),null}if(m=pe.current,Xl(r))Dx(r);else{var v=rh(ye.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Ze]=r,m[rt]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(Ln(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&pa(r)}}return Ft(r),Qm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&pa(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(n=ye.current,Xl(r)){if(n=r.stateNode,l=r.memoizedProps,c=null,f=Mn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Ze]=r,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Xb(n.nodeValue,l)),n||ei(r,!0)}else n=rh(n).createTextNode(c),n[Ze]=r,r.stateNode=n}return Ft(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(c=Xl(r),l!==null){if(n===null){if(!c)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Ze]=r}else sl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),n=!1}else l=am(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(Rs(r),r):(Rs(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Ft(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Xl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ze]=r}else sl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),f=!1}else f=am(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Rs(r),r):(Rs(r),null)}return Rs(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),Fd(r,r.updateQueue),Ft(r),null);case 4:return q(),n===null&&xg(r.stateNode.containerInfo),Ft(r),null;case 10:return ha(r.type),Ft(r),null;case 19:if(re(un),c=r.memoizedState,c===null)return Ft(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)Mc(c,!1);else{if(nn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Rd(n),m!==null){for(r.flags|=128,Mc(c,!1),n=m.updateQueue,r.updateQueue=n,Fd(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)Cx(l,n),l=l.sibling;return fe(un,un.current&1|2),ht&&ua(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&Bt()>Yd&&(r.flags|=128,f=!0,Mc(c,!1),r.lanes=4194304)}else{if(!f)if(n=Rd(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Fd(r,n),Mc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!ht)return Ft(r),null}else 2*Bt()-c.renderingStartTime>Yd&&l!==536870912&&(r.flags|=128,f=!0,Mc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Bt(),n.sibling=null,l=un.current,fe(un,f?l&1|2:l&1),ht&&ua(r,c.treeForkCount),n):(Ft(r),null);case 22:case 23:return Rs(r),ym(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),l=r.updateQueue,l!==null&&Fd(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),n!==null&&re(il),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ha(gn),Ft(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function iT(n,r){switch(sm(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ha(gn),q(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return he(r),null;case 31:if(r.memoizedState!==null){if(Rs(r),r.alternate===null)throw Error(a(340));sl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Rs(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));sl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(un),null;case 4:return q(),null;case 10:return ha(r.type),null;case 22:case 23:return Rs(r),ym(),n!==null&&re(il),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ha(gn),null;case 25:return null;default:return null}}function tb(n,r){switch(sm(r),r.tag){case 3:ha(gn),q();break;case 26:case 27:case 5:he(r);break;case 4:q();break;case 31:r.memoizedState!==null&&Rs(r);break;case 13:Rs(r);break;case 19:re(un);break;case 10:ha(r.type);break;case 22:case 23:Rs(r),ym(),n!==null&&re(il);break;case 24:ha(gn)}}function Vc(n,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&n)===n){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(T){kt(r,r.return,T)}}function li(n,r,l){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=r;var L=l,ee=T;try{ee()}catch(oe){kt(f,L,oe)}}}c=c.next}while(c!==m)}}catch(oe){kt(r,r.return,oe)}}function nb(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{Kx(r,l)}catch(c){kt(n,n.return,c)}}}function sb(n,r,l){l.props=dl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){kt(n,r,c)}}function Pc(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(f){kt(n,r,f)}}function zr(n,r){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){kt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){kt(n,r,f)}else l.current=null}function rb(n){var r=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){kt(n,n.return,f)}}function Xm(n,r,l){try{var c=n.stateNode;CT(c,n.type,l,r),c[rt]=r}catch(f){kt(n,n.return,f)}}function ab(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&mi(n.type)||n.tag===4}function Wm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ab(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&mi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jm(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=lr));else if(c!==4&&(c===27&&mi(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for(Jm(n,r,l),n=n.sibling;n!==null;)Jm(n,r,l),n=n.sibling}function qd(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(c!==4&&(c===27&&mi(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(qd(n,r,l),n=n.sibling;n!==null;)qd(n,r,l),n=n.sibling}function ib(n){var r=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ln(r,c,l),r[Ze]=n,r[rt]=l}catch(m){kt(n,n.return,m)}}var xa=!1,yn=!1,Zm=!1,lb=typeof WeakSet=="function"?WeakSet:Set,kn=null;function lT(n,r){if(n=n.containerInfo,vg=dh,n=bx(n),Kf(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,T=-1,L=-1,ee=0,oe=0,ge=n,se=null;t:for(;;){for(var le;ge!==l||f!==0&&ge.nodeType!==3||(T=v+f),ge!==m||c!==0&&ge.nodeType!==3||(L=v+c),ge.nodeType===3&&(v+=ge.nodeValue.length),(le=ge.firstChild)!==null;)se=ge,ge=le;for(;;){if(ge===n)break t;if(se===l&&++ee===f&&(T=v),se===m&&++oe===c&&(L=v),(le=ge.nextSibling)!==null)break;ge=se,se=ge.parentNode}ge=le}l=T===-1||L===-1?null:{start:T,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(wg={focusedElem:n,selectionRange:l},dh=!1,kn=r;kn!==null;)if(r=kn,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,kn=n;else for(;kn!==null;){switch(r=kn,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=r,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Oe=dl(l.type,f);n=c.getSnapshotBeforeUpdate(Oe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Fe){kt(l,l.return,Fe)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)jg(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,kn=n;break}kn=r.return}}function ob(n,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ba(n,l),c&4&&Vc(5,l);break;case 1:if(ba(n,l),c&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(v){kt(l,l.return,v)}else{var f=dl(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(v){kt(l,l.return,v)}}c&64&&nb(l),c&512&&Pc(l,l.return);break;case 3:if(ba(n,l),c&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Kx(n,r)}catch(v){kt(l,l.return,v)}}break;case 27:r===null&&c&4&&ib(l);case 26:case 5:ba(n,l),r===null&&c&4&&rb(l),c&512&&Pc(l,l.return);break;case 12:ba(n,l);break;case 31:ba(n,l),c&4&&db(n,l);break;case 13:ba(n,l),c&4&&hb(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=pT.bind(null,l),VT(n,l))));break;case 22:if(c=l.memoizedState!==null||xa,!c){r=r!==null&&r.memoizedState!==null||yn,f=xa;var m=yn;xa=c,(yn=r)&&!m?va(n,l,(l.subtreeFlags&8772)!==0):ba(n,l),xa=f,yn=m}break;case 30:break;default:ba(n,l)}}function cb(n){var r=n.alternate;r!==null&&(n.alternate=null,cb(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Dl(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Yt=null,cs=!1;function ya(n,r,l){for(l=l.child;l!==null;)ub(n,r,l),l=l.sibling}function ub(n,r,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(It,l)}catch{}switch(l.tag){case 26:yn||zr(l,r),ya(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:yn||zr(l,r);var c=Yt,f=cs;mi(l.type)&&(Yt=l.stateNode,cs=!1),ya(n,r,l),Kc(l.stateNode),Yt=c,cs=f;break;case 5:yn||zr(l,r);case 6:if(c=Yt,f=cs,Yt=null,ya(n,r,l),Yt=c,cs=f,Yt!==null)if(cs)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(l.stateNode)}catch(m){kt(l,r,m)}else try{Yt.removeChild(l.stateNode)}catch(m){kt(l,r,m)}break;case 18:Yt!==null&&(cs?(n=Yt,nv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),yo(n)):nv(Yt,l.stateNode));break;case 4:c=Yt,f=cs,Yt=l.stateNode.containerInfo,cs=!0,ya(n,r,l),Yt=c,cs=f;break;case 0:case 11:case 14:case 15:li(2,l,r),yn||li(4,l,r),ya(n,r,l);break;case 1:yn||(zr(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&sb(l,r,c)),ya(n,r,l);break;case 21:ya(n,r,l);break;case 22:yn=(c=yn)||l.memoizedState!==null,ya(n,r,l),yn=c;break;default:ya(n,r,l)}}function db(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{yo(n)}catch(l){kt(r,r.return,l)}}}function hb(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{yo(n)}catch(l){kt(r,r.return,l)}}function oT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new lb),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new lb),r;default:throw Error(a(435,n.tag))}}function $d(n,r){var l=oT(n);r.forEach(function(c){if(!l.has(c)){l.add(c);var f=xT.bind(null,n,c);c.then(f,f)}})}function us(n,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=n,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(mi(T.type)){Yt=T.stateNode,cs=!1;break e}break;case 5:Yt=T.stateNode,cs=!1;break e;case 3:case 4:Yt=T.stateNode.containerInfo,cs=!0;break e}T=T.return}if(Yt===null)throw Error(a(160));ub(m,v,f),Yt=null,cs=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)fb(r,n),r=r.sibling}var fr=null;function fb(n,r){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:us(r,n),ds(n),c&4&&(li(3,n,n.return),Vc(3,n),li(5,n,n.return));break;case 1:us(r,n),ds(n),c&512&&(yn||l===null||zr(l,l.return)),c&64&&xa&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=fr;if(us(r,n),ds(n),c&512&&(yn||l===null||zr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[An]||m[Ze]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ln(m,c,l),m[Ze]=n,fn(m),c=m;break e;case"link":var v=fv("link","href",f).get(c+(l.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(c),Ln(m,c,l),f.head.appendChild(m);break;case"meta":if(v=fv("meta","content",f).get(c+(l.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(T,1);break t}}m=f.createElement(c),Ln(m,c,l),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Ze]=n,fn(m),c=m}n.stateNode=c}else mv(f,n.type,n.stateNode);else n.stateNode=hv(f,c,n.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?mv(f,n.type,n.stateNode):hv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Xm(n,n.memoizedProps,l.memoizedProps)}break;case 27:us(r,n),ds(n),c&512&&(yn||l===null||zr(l,l.return)),l!==null&&c&4&&Xm(n,n.memoizedProps,l.memoizedProps);break;case 5:if(us(r,n),ds(n),c&512&&(yn||l===null||zr(l,l.return)),n.flags&32){f=n.stateNode;try{os(f,"")}catch(Oe){kt(n,n.return,Oe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Xm(n,f,l!==null?l.memoizedProps:f)),c&1024&&(Zm=!0);break;case 6:if(us(r,n),ds(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Oe){kt(n,n.return,Oe)}}break;case 3:if(lh=null,f=fr,fr=ah(r.containerInfo),us(r,n),fr=f,ds(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{yo(r.containerInfo)}catch(Oe){kt(n,n.return,Oe)}Zm&&(Zm=!1,mb(n));break;case 4:c=fr,fr=ah(n.stateNode.containerInfo),us(r,n),ds(n),fr=c;break;case 12:us(r,n),ds(n);break;case 31:us(r,n),ds(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 13:us(r,n),ds(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gd=Bt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 22:f=n.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,ee=xa,oe=yn;if(xa=ee||f,yn=oe||L,us(r,n),yn=oe,xa=ee,ds(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(l===null||L||xa||yn||hl(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=L.stateNode;var ge=L.memoizedProps.style,se=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;T.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Oe){kt(L,L.return,Oe)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Oe){kt(L,L.return,Oe)}}}else if(r.tag===18){if(l===null){L=r;try{var le=L.stateNode;f?sv(le,!0):sv(L.stateNode,!1)}catch(Oe){kt(L,L.return,Oe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,$d(n,l))));break;case 19:us(r,n),ds(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 30:break;case 21:break;default:us(r,n),ds(n)}}function ds(n){var r=n.flags;if(r&2){try{for(var l,c=n.return;c!==null;){if(ab(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,m=Wm(n);qd(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(os(v,""),l.flags&=-33);var T=Wm(n);qd(n,T,v);break;case 3:case 4:var L=l.stateNode.containerInfo,ee=Wm(n);Jm(n,ee,L);break;default:throw Error(a(161))}}catch(oe){kt(n,n.return,oe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function mb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;mb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ba(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ob(n,r.alternate,r),r=r.sibling}function hl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:li(4,r,r.return),hl(r);break;case 1:zr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&sb(r,r.return,l),hl(r);break;case 27:Kc(r.stateNode);case 26:case 5:zr(r,r.return),hl(r);break;case 22:r.memoizedState===null&&hl(r);break;case 30:hl(r);break;default:hl(r)}n=n.sibling}}function va(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:va(f,m,l),Vc(4,m);break;case 1:if(va(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){kt(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var T=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)$x(L[f],T)}catch(ee){kt(c,c.return,ee)}}l&&v&64&&nb(m),Pc(m,m.return);break;case 27:ib(m);case 26:case 5:va(f,m,l),l&&c===null&&v&4&&rb(m),Pc(m,m.return);break;case 12:va(f,m,l);break;case 31:va(f,m,l),l&&v&4&&db(f,m);break;case 13:va(f,m,l),l&&v&4&&hb(f,m);break;case 22:m.memoizedState===null&&va(f,m,l),Pc(m,m.return);break;case 30:break;default:va(f,m,l)}r=r.sibling}}function eg(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Nc(l))}function tg(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Nc(n))}function mr(n,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gb(n,r,l,c),r=r.sibling}function gb(n,r,l,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:mr(n,r,l,c),f&2048&&Vc(9,r);break;case 1:mr(n,r,l,c);break;case 3:mr(n,r,l,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Nc(n)));break;case 12:if(f&2048){mr(n,r,l,c),n=r.stateNode;try{var m=r.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){kt(r,r.return,L)}}else mr(n,r,l,c);break;case 31:mr(n,r,l,c);break;case 13:mr(n,r,l,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?mr(n,r,l,c):Lc(n,r):m._visibility&2?mr(n,r,l,c):(m._visibility|=2,io(n,r,l,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&eg(v,r);break;case 24:mr(n,r,l,c),f&2048&&tg(r.alternate,r);break;default:mr(n,r,l,c)}}function io(n,r,l,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,v=r,T=l,L=c,ee=v.flags;switch(v.tag){case 0:case 11:case 15:io(m,v,T,L,f),Vc(8,v);break;case 23:break;case 22:var oe=v.stateNode;v.memoizedState!==null?oe._visibility&2?io(m,v,T,L,f):Lc(m,v):(oe._visibility|=2,io(m,v,T,L,f)),f&&ee&2048&&eg(v.alternate,v);break;case 24:io(m,v,T,L,f),f&&ee&2048&&tg(v.alternate,v);break;default:io(m,v,T,L,f)}r=r.sibling}}function Lc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,c=r,f=c.flags;switch(c.tag){case 22:Lc(l,c),f&2048&&eg(c.alternate,c);break;case 24:Lc(l,c),f&2048&&tg(c.alternate,c);break;default:Lc(l,c)}r=r.sibling}}var Uc=8192;function lo(n,r,l){if(n.subtreeFlags&Uc)for(n=n.child;n!==null;)pb(n,r,l),n=n.sibling}function pb(n,r,l){switch(n.tag){case 26:lo(n,r,l),n.flags&Uc&&n.memoizedState!==null&&YT(l,fr,n.memoizedState,n.memoizedProps);break;case 5:lo(n,r,l);break;case 3:case 4:var c=fr;fr=ah(n.stateNode.containerInfo),lo(n,r,l),fr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Uc,Uc=16777216,lo(n,r,l),Uc=c):lo(n,r,l));break;default:lo(n,r,l)}}function xb(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function zc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];kn=c,bb(c,n)}xb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yb(n),n=n.sibling}function yb(n){switch(n.tag){case 0:case 11:case 15:zc(n),n.flags&2048&&li(9,n,n.return);break;case 3:zc(n);break;case 12:zc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Kd(n)):zc(n);break;default:zc(n)}}function Kd(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];kn=c,bb(c,n)}xb(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:li(8,r,r.return),Kd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Kd(r));break;default:Kd(r)}n=n.sibling}}function bb(n,r){for(;kn!==null;){var l=kn;switch(l.tag){case 0:case 11:case 15:li(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,kn=c;else e:for(l=n;kn!==null;){c=kn;var f=c.sibling,m=c.return;if(cb(c),c===l){kn=null;break e}if(f!==null){f.return=m,kn=f;break e}kn=m}}}var cT={getCacheForType:function(n){var r=Vn(gn),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return Vn(gn).controller.signal}},uT=typeof WeakMap=="function"?WeakMap:Map,_t=0,Lt=null,at=null,lt=0,Rt=0,ks=null,oi=!1,oo=!1,ng=!1,wa=0,nn=0,ci=0,fl=0,sg=0,Is=0,co=0,Bc=null,hs=null,rg=!1,Gd=0,vb=0,Yd=1/0,Qd=null,ui=null,Tn=0,di=null,uo=null,_a=0,ag=0,ig=null,wb=null,Hc=0,lg=null;function Ds(){return(_t&2)!==0&&lt!==0?lt&-lt:J.T!==null?fg():Ve()}function _b(){if(Is===0)if((lt&536870912)===0||ht){var n=js;js<<=1,(js&3932160)===0&&(js=262144),Is=n}else Is=536870912;return n=As.current,n!==null&&(n.flags|=32),Is}function fs(n,r,l){(n===Lt&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)&&(ho(n,0),hi(n,lt,Is,!1)),ne(n,l),((_t&2)===0||n!==Lt)&&(n===Lt&&((_t&2)===0&&(fl|=l),nn===4&&hi(n,lt,Is,!1)),Br(n))}function Nb(n,r,l){if((_t&6)!==0)throw Error(a(327));var c=!l&&(r&127)===0&&(r&n.expiredLanes)===0||Wn(n,r),f=c?fT(n,r):cg(n,r,!0),m=c;do{if(f===0){oo&&!c&&hi(n,r,0,!1);break}else{if(l=n.current.alternate,m&&!dT(l)){f=cg(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=n;f=Bc;var L=T.current.memoizedState.isDehydrated;if(L&&(ho(T,v).flags|=256),v=cg(T,v,!1),v!==2){if(ng&&!L){T.errorRecoveryDisabledLanes|=m,fl|=m,f=4;break e}m=hs,hs=f,m!==null&&(hs===null?hs=m:hs.push.apply(hs,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){ho(n,0),hi(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:hi(c,r,Is,!oi);break e;case 2:hs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=Gd+300-Bt(),10<f)){if(hi(c,r,Is,!oi),is(c,0,!0)!==0)break e;_a=r,c.timeoutHandle=ev(jb.bind(null,c,l,hs,Qd,rg,r,Is,fl,co,oi,m,"Throttled",-0,0),f);break e}jb(c,l,hs,Qd,rg,r,Is,fl,co,oi,m,null,-0,0)}}break}while(!0);Br(n)}function jb(n,r,l,c,f,m,v,T,L,ee,oe,ge,se,le){if(n.timeoutHandle=-1,ge=r.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},pb(r,m,ge);var Oe=(m&62914560)===m?Gd-Bt():(m&4194048)===m?vb-Bt():0;if(Oe=QT(ge,Oe),Oe!==null){_a=m,n.cancelPendingCommit=Oe(Ib.bind(null,n,r,m,l,c,f,v,T,L,oe,ge,null,se,le)),hi(n,m,v,!ee);return}}Ib(n,r,m,l,c,f,v,T,L)}function dT(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Ss(m(),f))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function hi(n,r,l,c){r&=~sg,r&=~fl,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-vt(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&je(n,l,r)}function Xd(){return(_t&6)===0?(Fc(0),!1):!0}function og(){if(at!==null){if(Rt===0)var n=at.return;else n=at,da=rl=null,jm(n),to=null,Tc=0,n=at;for(;n!==null;)tb(n.alternate,n),n=n.return;at=null}}function ho(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,kT(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),_a=0,og(),Lt=n,at=l=ca(n.current,null),lt=r,Rt=0,ks=null,oi=!1,oo=Wn(n,r),ng=!1,co=Is=sg=fl=ci=nn=0,hs=Bc=null,rg=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-vt(c),m=1<<f;r|=n[f],c&=~m}return wa=r,xd(),l}function Tb(n,r){tt=null,J.H=Dc,r===eo||r===Td?(r=Bx(),Rt=3):r===hm?(r=Bx(),Rt=4):Rt=r===zm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ks=r,at===null&&(nn=1,Ud(n,Ks(r,n.current)))}function Eb(){var n=As.current;return n===null?!0:(lt&4194048)===lt?Xs===null:(lt&62914560)===lt||(lt&536870912)!==0?n===Xs:!1}function Sb(){var n=J.H;return J.H=Dc,n===null?Dc:n}function Cb(){var n=J.A;return J.A=cT,n}function Wd(){nn=4,oi||(lt&4194048)!==lt&&As.current!==null||(oo=!0),(ci&134217727)===0&&(fl&134217727)===0||Lt===null||hi(Lt,lt,Is,!1)}function cg(n,r,l){var c=_t;_t|=2;var f=Sb(),m=Cb();(Lt!==n||lt!==r)&&(Qd=null,ho(n,r)),r=!1;var v=nn;e:do try{if(Rt!==0&&at!==null){var T=at,L=ks;switch(Rt){case 8:og(),v=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(r=!0);var ee=Rt;if(Rt=0,ks=null,fo(n,T,L,ee),l&&oo){v=0;break e}break;default:ee=Rt,Rt=0,ks=null,fo(n,T,L,ee)}}hT(),v=nn;break}catch(oe){Tb(n,oe)}while(!0);return r&&n.shellSuspendCounter++,da=rl=null,_t=c,J.H=f,J.A=m,at===null&&(Lt=null,lt=0,xd()),v}function hT(){for(;at!==null;)Ab(at)}function fT(n,r){var l=_t;_t|=2;var c=Sb(),f=Cb();Lt!==n||lt!==r?(Qd=null,Yd=Bt()+500,ho(n,r)):oo=Wn(n,r);e:do try{if(Rt!==0&&at!==null){r=at;var m=ks;t:switch(Rt){case 1:Rt=0,ks=null,fo(n,r,m,1);break;case 2:case 9:if(Ux(m)){Rt=0,ks=null,Rb(r);break}r=function(){Rt!==2&&Rt!==9||Lt!==n||(Rt=7),Br(n)},m.then(r,r);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Ux(m)?(Rt=0,ks=null,Rb(r)):(Rt=0,ks=null,fo(n,r,m,7));break;case 5:var v=null;switch(at.tag){case 26:v=at.memoizedState;case 5:case 27:var T=at;if(v?gv(v):T.stateNode.complete){Rt=0,ks=null;var L=T.sibling;if(L!==null)at=L;else{var ee=T.return;ee!==null?(at=ee,Jd(ee)):at=null}break t}}Rt=0,ks=null,fo(n,r,m,5);break;case 6:Rt=0,ks=null,fo(n,r,m,6);break;case 8:og(),nn=6;break e;default:throw Error(a(462))}}mT();break}catch(oe){Tb(n,oe)}while(!0);return da=rl=null,J.H=c,J.A=f,_t=l,at!==null?0:(Lt=null,lt=0,xd(),nn)}function mT(){for(;at!==null&&!ir();)Ab(at)}function Ab(n){var r=Zy(n.alternate,n,wa);n.memoizedProps=n.pendingProps,r===null?Jd(n):at=r}function Rb(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=Gy(l,r,r.pendingProps,r.type,void 0,lt);break;case 11:r=Gy(l,r,r.pendingProps,r.type.render,r.ref,lt);break;case 5:jm(r);default:tb(l,r),r=at=Cx(r,wa),r=Zy(l,r,wa)}n.memoizedProps=n.pendingProps,r===null?Jd(n):at=r}function fo(n,r,l,c){da=rl=null,jm(r),to=null,Tc=0;var f=r.return;try{if(nT(n,f,r,l,lt)){nn=1,Ud(n,Ks(l,n.current)),at=null;return}}catch(m){if(f!==null)throw at=f,m;nn=1,Ud(n,Ks(l,n.current)),at=null;return}r.flags&32768?(ht||c===1?n=!0:oo||(lt&536870912)!==0?n=!1:(oi=n=!0,(c===2||c===9||c===3||c===6)&&(c=As.current,c!==null&&c.tag===13&&(c.flags|=16384))),kb(r,n)):Jd(r)}function Jd(n){var r=n;do{if((r.flags&32768)!==0){kb(r,oi);return}n=r.return;var l=aT(r.alternate,r,wa);if(l!==null){at=l;return}if(r=r.sibling,r!==null){at=r;return}at=r=n}while(r!==null);nn===0&&(nn=5)}function kb(n,r){do{var l=iT(n.alternate,n);if(l!==null){l.flags&=32767,at=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){at=n;return}at=n=l}while(n!==null);nn=6,at=null}function Ib(n,r,l,c,f,m,v,T,L){n.cancelPendingCommit=null;do Zd();while(Tn!==0);if((_t&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Wf,me(n,l,m,v,T,L),n===Lt&&(at=Lt=null,lt=0),uo=r,di=n,_a=l,ag=m,ig=f,wb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,yT(Hn,function(){return Pb(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,f=te.p,te.p=2,v=_t,_t|=4;try{lT(n,r,l)}finally{_t=v,te.p=f,J.T=c}}Tn=1,Db(),Ob(),Mb()}}function Db(){if(Tn===1){Tn=0;var n=di,r=uo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=te.p;te.p=2;var f=_t;_t|=4;try{fb(r,n);var m=wg,v=bx(n.containerInfo),T=m.focusedElem,L=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&yx(T.ownerDocument.documentElement,T)){if(L!==null&&Kf(T)){var ee=L.start,oe=L.end;if(oe===void 0&&(oe=ee),"selectionStart"in T)T.selectionStart=ee,T.selectionEnd=Math.min(oe,T.value.length);else{var ge=T.ownerDocument||document,se=ge&&ge.defaultView||window;if(se.getSelection){var le=se.getSelection(),Oe=T.textContent.length,Fe=Math.min(L.start,Oe),Vt=L.end===void 0?Fe:Math.min(L.end,Oe);!le.extend&&Fe>Vt&&(v=Vt,Vt=Fe,Fe=v);var Y=xx(T,Fe),F=xx(T,Vt);if(Y&&F&&(le.rangeCount!==1||le.anchorNode!==Y.node||le.anchorOffset!==Y.offset||le.focusNode!==F.node||le.focusOffset!==F.offset)){var Z=ge.createRange();Z.setStart(Y.node,Y.offset),le.removeAllRanges(),Fe>Vt?(le.addRange(Z),le.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),le.addRange(Z))}}}}for(ge=[],le=T;le=le.parentNode;)le.nodeType===1&&ge.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ge.length;T++){var ue=ge[T];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}dh=!!vg,wg=vg=null}finally{_t=f,te.p=c,J.T=l}}n.current=r,Tn=2}}function Ob(){if(Tn===2){Tn=0;var n=di,r=uo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=te.p;te.p=2;var f=_t;_t|=4;try{ob(n,r.alternate,r)}finally{_t=f,te.p=c,J.T=l}}Tn=3}}function Mb(){if(Tn===4||Tn===3){Tn=0,Dn();var n=di,r=uo,l=_a,c=wb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Tn=5:(Tn=0,uo=di=null,Vb(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ui=null),we(l),r=r.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(It,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,f=te.p,te.p=2,J.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var T=c[v];m(T.value,{componentStack:T.stack})}}finally{J.T=r,te.p=f}}(_a&3)!==0&&Zd(),Br(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===lg?Hc++:(Hc=0,lg=n):Hc=0,Fc(0)}}function Vb(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Nc(r)))}function Zd(){return Db(),Ob(),Mb(),Pb()}function Pb(){if(Tn!==5)return!1;var n=di,r=ag;ag=0;var l=we(_a),c=J.T,f=te.p;try{te.p=32>l?32:l,J.T=null,l=ig,ig=null;var m=di,v=_a;if(Tn=0,uo=di=null,_a=0,(_t&6)!==0)throw Error(a(331));var T=_t;if(_t|=4,yb(m.current),gb(m,m.current,v,l),_t=T,Fc(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(It,m)}catch{}return!0}finally{te.p=f,J.T=c,Vb(n,r)}}function Lb(n,r,l){r=Ks(l,r),r=Um(n.stateNode,r,2),n=ri(n,r,2),n!==null&&(ne(n,2),Br(n))}function kt(n,r,l){if(n.tag===3)Lb(n,n,l);else for(;r!==null;){if(r.tag===3){Lb(r,n,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ui===null||!ui.has(c))){n=Ks(l,n),l=Uy(2),c=ri(r,l,2),c!==null&&(zy(l,c,r,n),ne(c,2),Br(c));break}}r=r.return}}function ug(n,r,l){var c=n.pingCache;if(c===null){c=n.pingCache=new uT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(ng=!0,f.add(l),n=gT.bind(null,n,r,l),r.then(n,n))}function gT(n,r,l){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Lt===n&&(lt&l)===l&&(nn===4||nn===3&&(lt&62914560)===lt&&300>Bt()-Gd?(_t&2)===0&&ho(n,0):sg|=l,co===lt&&(co=0)),Br(n)}function Ub(n,r){r===0&&(r=Ha()),n=tl(n,r),n!==null&&(ne(n,r),Br(n))}function pT(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Ub(n,l)}function xT(n,r){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Ub(n,l)}function yT(n,r){return zt(n,r)}var eh=null,mo=null,dg=!1,th=!1,hg=!1,fi=0;function Br(n){n!==mo&&n.next===null&&(mo===null?eh=mo=n:mo=mo.next=n),th=!0,dg||(dg=!0,vT())}function Fc(n,r){if(!hg&&th){hg=!0;do for(var l=!1,c=eh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,T=c.pingedLanes;m=(1<<31-vt(42|n)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Fb(c,m))}else m=lt,m=is(c,c===Lt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Wn(c,m)||(l=!0,Fb(c,m));c=c.next}while(l);hg=!1}}function bT(){zb()}function zb(){th=dg=!1;var n=0;fi!==0&&RT()&&(n=fi);for(var r=Bt(),l=null,c=eh;c!==null;){var f=c.next,m=Bb(c,r);m===0?(c.next=null,l===null?eh=f:l.next=f,f===null&&(mo=l)):(l=c,(n!==0||(m&3)!==0)&&(th=!0)),c=f}Tn!==0&&Tn!==5||Fc(n),fi!==0&&(fi=0)}function Bb(n,r){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-vt(m),T=1<<v,L=f[v];L===-1?((T&l)===0||(T&c)!==0)&&(f[v]=Fi(T,r)):L<=r&&(n.expiredLanes|=T),m&=~T}if(r=Lt,l=lt,l=is(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===r&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&vs(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Wn(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(c!==null&&vs(c),we(l)){case 2:case 8:l=zs;break;case 32:l=Hn;break;case 268435456:l=Ye;break;default:l=Hn}return c=Hb.bind(null,n),l=zt(l,c),n.callbackPriority=r,n.callbackNode=l,r}return c!==null&&c!==null&&vs(c),n.callbackPriority=2,n.callbackNode=null,2}function Hb(n,r){if(Tn!==0&&Tn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Zd()&&n.callbackNode!==l)return null;var c=lt;return c=is(n,n===Lt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Nb(n,c,r),Bb(n,Bt()),n.callbackNode!=null&&n.callbackNode===l?Hb.bind(null,n):null)}function Fb(n,r){if(Zd())return null;Nb(n,r,!0)}function vT(){IT(function(){(_t&6)!==0?zt(_s,bT):zb()})}function fg(){if(fi===0){var n=Jl;n===0&&(n=jn,jn<<=1,(jn&261888)===0&&(jn=256)),fi=n}return fi}function qb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Pl(""+n)}function $b(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function wT(n,r,l,c,f){if(r==="submit"&&l&&l.stateNode===f){var m=qb((f[rt]||null).action),v=c.submitter;v&&(r=(r=v[rt]||null)?qb(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var T=new Or("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fi!==0){var L=v?$b(f,v):new FormData(f);Dm(l,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(T.preventDefault(),L=v?$b(f,v):new FormData(f),Dm(l,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var mg=0;mg<Xf.length;mg++){var gg=Xf[mg],_T=gg.toLowerCase(),NT=gg[0].toUpperCase()+gg.slice(1);hr(_T,"on"+NT)}hr(_x,"onAnimationEnd"),hr(Nx,"onAnimationIteration"),hr(jx,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Uj,"onTransitionRun"),hr(zj,"onTransitionStart"),hr(Bj,"onTransitionCancel"),hr(Tx,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function Kb(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var T=c[v],L=T.instance,ee=T.currentTarget;if(T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=ee;try{m(f)}catch(oe){pd(oe)}f.currentTarget=null,m=L}else for(v=0;v<c.length;v++){if(T=c[v],L=T.instance,ee=T.currentTarget,T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=ee;try{m(f)}catch(oe){pd(oe)}f.currentTarget=null,m=L}}}}function it(n,r){var l=r[on];l===void 0&&(l=r[on]=new Set);var c=n+"__bubble";l.has(c)||(Gb(r,n,2,!1),l.add(c))}function pg(n,r,l){var c=0;r&&(c|=4),Gb(l,n,c,r)}var nh="_reactListening"+Math.random().toString(36).slice(2);function xg(n){if(!n[nh]){n[nh]=!0,nc.forEach(function(l){l!=="selectionchange"&&(jT.has(l)||pg(l,!1,n),pg(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[nh]||(r[nh]=!0,pg("selectionchange",!1,r))}}function Gb(n,r,l,c){switch(_v(r)){case 2:var f=JT;break;case 8:f=ZT;break;default:f=Ig}l=f.bind(null,r,l,n),f=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,l,{capture:!0,passive:f}):n.addEventListener(r,l,!0):f!==void 0?n.addEventListener(r,l,{passive:f}):n.addEventListener(r,l,!1)}function yg(n,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=c.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Sr(T),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){c=m=v;continue e}T=T.parentNode}}c=c.return}Ya(function(){var ee=m,oe=Hs(l),ge=[];e:{var se=Ex.get(n);if(se!==void 0){var le=Or,Oe=n;switch(n){case"keypress":if(Qi(l)===0)break e;case"keydown":case"keyup":le=fd;break;case"focusin":Oe="focus",le=Wi;break;case"focusout":Oe="blur",le=Wi;break;case"beforeblur":case"afterblur":le=Wi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=y;break;case _x:case Nx:case jx:le=id;break;case Tx:le=A;break;case"scroll":case"scrollend":le=mc;break;case"wheel":le=ie;break;case"copy":case"cut":case"paste":le=ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=oa;break;case"toggle":case"beforetoggle":le=et}var Fe=(r&4)!==0,Vt=!Fe&&(n==="scroll"||n==="scrollend"),Y=Fe?se!==null?se+"Capture":null:se;Fe=[];for(var F=ee,Z;F!==null;){var ue=F;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||Y===null||(ue=or(F,Y),ue!=null&&Fe.push($c(F,ue,Z))),Vt)break;F=F.return}0<Fe.length&&(se=new le(se,Oe,null,l,oe),ge.push({event:se,listeners:Fe}))}}if((r&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",se&&l!==dc&&(Oe=l.relatedTarget||l.fromElement)&&(Sr(Oe)||Oe[$t]))break e;if((le||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Oe=l.relatedTarget||l.toElement,le=ee,Oe=Oe?Sr(Oe):null,Oe!==null&&(Vt=u(Oe),Fe=Oe.tag,Oe!==Vt||Fe!==5&&Fe!==27&&Fe!==6)&&(Oe=null)):(le=null,Oe=ee),le!==Oe)){if(Fe=gc,ue="onMouseLeave",Y="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Fe=oa,ue="onPointerLeave",Y="onPointerEnter",F="pointer"),Vt=le==null?se:Ts(le),Z=Oe==null?se:Ts(Oe),se=new Fe(ue,F+"leave",le,l,oe),se.target=Vt,se.relatedTarget=Z,ue=null,Sr(oe)===ee&&(Fe=new Fe(Y,F+"enter",Oe,l,oe),Fe.target=Z,Fe.relatedTarget=Vt,ue=Fe),Vt=ue,le&&Oe)t:{for(Fe=TT,Y=le,F=Oe,Z=0,ue=Y;ue;ue=Fe(ue))Z++;ue=0;for(var Ue=F;Ue;Ue=Fe(Ue))ue++;for(;0<Z-ue;)Y=Fe(Y),Z--;for(;0<ue-Z;)F=Fe(F),ue--;for(;Z--;){if(Y===F||F!==null&&Y===F.alternate){Fe=Y;break t}Y=Fe(Y),F=Fe(F)}Fe=null}else Fe=null;le!==null&&Yb(ge,se,le,Fe,!1),Oe!==null&&Vt!==null&&Yb(ge,Vt,Oe,Fe,!0)}}e:{if(se=ee?Ts(ee):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var xt=dx;else if(cx(se))if(hx)xt=Vj;else{xt=Oj;var Le=Dj}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ee&&Vl(ee.elementType)&&(xt=dx):xt=Mj;if(xt&&(xt=xt(n,ee))){ux(ge,xt,l,oe);break e}Le&&Le(n,se,ee),n==="focusout"&&ee&&se.type==="number"&&ee.memoizedProps.value!=null&&oc(se,"number",se.value)}switch(Le=ee?Ts(ee):window,n){case"focusin":(cx(Le)||Le.contentEditable==="true")&&(ql=Le,Gf=ee,vc=null);break;case"focusout":vc=Gf=ql=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,vx(ge,l,oe);break;case"selectionchange":if(Lj)break;case"keydown":case"keyup":vx(ge,l,oe)}var nt;if(wt)e:{switch(n){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Fl?Ji(n,l)&&(ot="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ot="onCompositionStart");ot&&(Pr&&l.locale!=="ko"&&(Fl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Fl&&(nt=fc()):(Dr=oe,hc="value"in Dr?Dr.value:Dr.textContent,Fl=!0)),Le=sh(ee,ot),0<Le.length&&(ot=new Vr(ot,n,null,l,oe),ge.push({event:ot,listeners:Le}),nt?ot.data=nt:(nt=Hl(l),nt!==null&&(ot.data=nt)))),(nt=qs?Aj(n,l):Rj(n,l))&&(ot=sh(ee,"onBeforeInput"),0<ot.length&&(Le=new Vr("onBeforeInput","beforeinput",null,l,oe),ge.push({event:Le,listeners:ot}),Le.data=nt)),wT(ge,n,ee,l,oe)}Kb(ge,r)})}function $c(n,r,l){return{instance:n,listener:r,currentTarget:l}}function sh(n,r){for(var l=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=or(n,l),f!=null&&c.unshift($c(n,f,m)),f=or(n,r),f!=null&&c.push($c(n,f,m))),n.tag===3)return c;n=n.return}return[]}function TT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Yb(n,r,l,c,f){for(var m=r._reactName,v=[];l!==null&&l!==c;){var T=l,L=T.alternate,ee=T.stateNode;if(T=T.tag,L!==null&&L===c)break;T!==5&&T!==26&&T!==27||ee===null||(L=ee,f?(ee=or(l,m),ee!=null&&v.unshift($c(l,ee,L))):f||(ee=or(l,m),ee!=null&&v.push($c(l,ee,L)))),l=l.return}v.length!==0&&n.push({event:r,listeners:v})}var ET=/\r\n?/g,ST=/\u0000|\uFFFD/g;function Qb(n){return(typeof n=="string"?n:""+n).replace(ET,`
`).replace(ST,"")}function Xb(n,r){return r=Qb(r),Qb(n)===r}function Mt(n,r,l,c,f,m){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||os(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&os(n,""+c);break;case"className":Es(n,"class",c);break;case"tabIndex":Es(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Es(n,l,c);break;case"style":uc(n,c,m);break;case"data":if(r!=="object"){Es(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Pl(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&Mt(n,r,"name",f.name,f,null),Mt(n,r,"formEncType",f.formEncType,f,null),Mt(n,r,"formMethod",f.formMethod,f,null),Mt(n,r,"formTarget",f.formTarget,f,null)):(Mt(n,r,"encType",f.encType,f,null),Mt(n,r,"method",f.method,f,null),Mt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Pl(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=lr);break;case"onScroll":c!=null&&it("scroll",n);break;case"onScrollEnd":c!=null&&it("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=Pl(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":it("beforetoggle",n),it("toggle",n),Ol(n,"popover",c);break;case"xlinkActuate":mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":mn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":mn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":mn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":mn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ol(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=sd.get(l)||l,Ol(n,l,c))}}function bg(n,r,l,c,f,m){switch(l){case"style":uc(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof c=="string"?os(n,c):(typeof c=="number"||typeof c=="bigint")&&os(n,""+c);break;case"onScroll":c!=null&&it("scroll",n);break;case"onScrollEnd":c!=null&&it("scrollend",n);break;case"onClick":c!=null&&(n.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),r=l.slice(2,f?l.length-7:void 0),m=n[rt]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,c,f);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Ol(n,l,c)}}}function Ln(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",n),it("load",n);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Mt(n,r,m,v,l,null)}}f&&Mt(n,r,"srcSet",l.srcSet,l,null),c&&Mt(n,r,"src",l.src,l,null);return;case"input":it("invalid",n);var T=m=v=f=null,L=null,ee=null;for(c in l)if(l.hasOwnProperty(c)){var oe=l[c];if(oe!=null)switch(c){case"name":f=oe;break;case"type":v=oe;break;case"checked":L=oe;break;case"defaultChecked":ee=oe;break;case"value":m=oe;break;case"defaultValue":T=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,r));break;default:Mt(n,r,c,oe,l,null)}}ed(n,m,T,L,ee,v,f,!1);return;case"select":it("invalid",n),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:Mt(n,r,f,T,l,null)}r=m,l=v,n.multiple=!!c,r!=null?qa(n,!!c,r,!1):l!=null&&qa(n,!!c,l,!0);return;case"textarea":it("invalid",n),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(T=l[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Mt(n,r,v,T,l,null)}$a(n,c,f,m);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Mt(n,r,L,c,l,null)}return;case"dialog":it("beforetoggle",n),it("toggle",n),it("cancel",n),it("close",n);break;case"iframe":case"object":it("load",n);break;case"video":case"audio":for(c=0;c<qc.length;c++)it(qc[c],n);break;case"image":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"embed":case"source":case"link":it("error",n),it("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(c=l[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Mt(n,r,ee,c,l,null)}return;default:if(Vl(r)){for(oe in l)l.hasOwnProperty(oe)&&(c=l[oe],c!==void 0&&bg(n,r,oe,c,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(c=l[T],c!=null&&Mt(n,r,T,c,l,null))}function CT(n,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,L=null,ee=null,oe=null;for(le in l){var ge=l[le];if(l.hasOwnProperty(le)&&ge!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":L=ge;default:c.hasOwnProperty(le)||Mt(n,r,le,null,c,ge)}}for(var se in c){var le=c[se];if(ge=l[se],c.hasOwnProperty(se)&&(le!=null||ge!=null))switch(se){case"type":m=le;break;case"name":f=le;break;case"checked":ee=le;break;case"defaultChecked":oe=le;break;case"value":v=le;break;case"defaultValue":T=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,r));break;default:le!==ge&&Mt(n,r,se,le,c,ge)}}Ml(n,v,T,L,ee,oe,m,f);return;case"select":le=v=T=se=null;for(m in l)if(L=l[m],l.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":le=L;default:c.hasOwnProperty(m)||Mt(n,r,m,null,c,L)}for(f in c)if(m=c[f],L=l[f],c.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":se=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==L&&Mt(n,r,f,m,c,L)}r=T,l=v,c=le,se!=null?qa(n,!!l,se,!1):!!c!=!!l&&(r!=null?qa(n,!!l,r,!0):qa(n,!!l,l?[]:"",!1));return;case"textarea":le=se=null;for(T in l)if(f=l[T],l.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Mt(n,r,T,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":se=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Mt(n,r,v,f,c,m)}td(n,se,le);return;case"option":for(var Oe in l)if(se=l[Oe],l.hasOwnProperty(Oe)&&se!=null&&!c.hasOwnProperty(Oe))switch(Oe){case"selected":n.selected=!1;break;default:Mt(n,r,Oe,null,c,se)}for(L in c)if(se=c[L],le=l[L],c.hasOwnProperty(L)&&se!==le&&(se!=null||le!=null))switch(L){case"selected":n.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Mt(n,r,L,se,c,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)se=l[Fe],l.hasOwnProperty(Fe)&&se!=null&&!c.hasOwnProperty(Fe)&&Mt(n,r,Fe,null,c,se);for(ee in c)if(se=c[ee],le=l[ee],c.hasOwnProperty(ee)&&se!==le&&(se!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,r));break;default:Mt(n,r,ee,se,c,le)}return;default:if(Vl(r)){for(var Vt in l)se=l[Vt],l.hasOwnProperty(Vt)&&se!==void 0&&!c.hasOwnProperty(Vt)&&bg(n,r,Vt,void 0,c,se);for(oe in c)se=c[oe],le=l[oe],!c.hasOwnProperty(oe)||se===le||se===void 0&&le===void 0||bg(n,r,oe,se,c,le);return}}for(var Y in l)se=l[Y],l.hasOwnProperty(Y)&&se!=null&&!c.hasOwnProperty(Y)&&Mt(n,r,Y,null,c,se);for(ge in c)se=c[ge],le=l[ge],!c.hasOwnProperty(ge)||se===le||se==null&&le==null||Mt(n,r,ge,se,c,le)}function Wb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,T=f.duration;if(m&&T&&Wb(v)){for(v=0,T=f.responseEnd,c+=1;c<l.length;c++){var L=l[c],ee=L.startTime;if(ee>T)break;var oe=L.transferSize,ge=L.initiatorType;oe&&Wb(ge)&&(L=L.responseEnd,v+=oe*(L<T?1:(T-ee)/(L-ee)))}if(--c,r+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var vg=null,wg=null;function rh(n){return n.nodeType===9?n:n.ownerDocument}function Jb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zb(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function _g(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ng=null;function RT(){var n=window.event;return n&&n.type==="popstate"?n===Ng?!1:(Ng=n,!0):(Ng=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,kT=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,IT=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(n){return tv.resolve(null).then(n).catch(DT)}:ev;function DT(n){setTimeout(function(){throw n})}function mi(n){return n==="head"}function nv(n,r){var l=r,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(f),yo(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Kc(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Kc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[An]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&Kc(n.ownerDocument.body);l=f}while(l);yo(r)}function sv(n,r){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function jg(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jg(l),Dl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function OT(n,r,l,c){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[An])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ws(n.nextSibling),n===null)break}return null}function MT(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ws(n.nextSibling),n===null))return null;return n}function rv(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Ws(n.nextSibling),n===null))return null;return n}function Tg(n){return n.data==="$?"||n.data==="$~"}function Eg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function VT(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ws(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Sg=null;function av(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return Ws(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function iv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function lv(n,r,l){switch(r=rh(l),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Kc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Dl(n)}var Js=new Map,ov=new Set;function ah(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Na=te.d;te.d={f:PT,r:LT,D:UT,C:zT,L:BT,m:HT,X:qT,S:FT,M:$T};function PT(){var n=Na.f(),r=Xd();return n||r}function LT(n){var r=Bs(n);r!==null&&r.tag===5&&r.type==="form"?Ty(r):Na.r(n)}var go=typeof document>"u"?null:document;function cv(n,r,l){var c=go;if(c&&typeof r=="string"&&r){var f=ls(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),ov.has(f)||(ov.add(f),n={rel:n,crossOrigin:l,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Ln(r,"link",n),fn(r),c.head.appendChild(r)))}}function UT(n){Na.D(n),cv("dns-prefetch",n,null)}function zT(n,r){Na.C(n,r),cv("preconnect",n,r)}function BT(n,r,l){Na.L(n,r,l);var c=go;if(c&&n&&r){var f='link[rel="preload"][as="'+ls(r)+'"]';r==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+ls(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+ls(l.imageSizes)+'"]')):f+='[href="'+ls(n)+'"]';var m=f;switch(r){case"style":m=po(n);break;case"script":m=xo(n)}Js.has(m)||(n=w({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),Js.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Gc(m))||r==="script"&&c.querySelector(Yc(m))||(r=c.createElement("link"),Ln(r,"link",n),fn(r),c.head.appendChild(r)))}}function HT(n,r){Na.m(n,r);var l=go;if(l&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ls(c)+'"][href="'+ls(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xo(n)}if(!Js.has(m)&&(n=w({rel:"modulepreload",href:n},r),Js.set(m,n),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yc(m)))return}c=l.createElement("link"),Ln(c,"link",n),fn(c),l.head.appendChild(c)}}}function FT(n,r,l){Na.S(n,r,l);var c=go;if(c&&n){var f=Cr(c).hoistableStyles,m=po(n);r=r||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(Gc(m)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},l),(l=Js.get(m))&&Cg(n,l);var L=v=c.createElement("link");fn(L),Ln(L,"link",n),L._p=new Promise(function(ee,oe){L.onload=ee,L.onerror=oe}),L.addEventListener("load",function(){T.loading|=1}),L.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ih(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function qT(n,r){Na.X(n,r);var l=go;if(l&&n){var c=Cr(l).hoistableScripts,f=xo(n),m=c.get(f);m||(m=l.querySelector(Yc(f)),m||(n=w({src:n,async:!0},r),(r=Js.get(f))&&Ag(n,r),m=l.createElement("script"),fn(m),Ln(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function $T(n,r){Na.M(n,r);var l=go;if(l&&n){var c=Cr(l).hoistableScripts,f=xo(n),m=c.get(f);m||(m=l.querySelector(Yc(f)),m||(n=w({src:n,async:!0,type:"module"},r),(r=Js.get(f))&&Ag(n,r),m=l.createElement("script"),fn(m),Ln(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function uv(n,r,l,c){var f=(f=ye.current)?ah(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=po(l.href),l=Cr(f).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=po(l.href);var m=Cr(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Gc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Js.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Js.set(n,l),m||KT(f,n,l,v.state))),r&&c===null)throw Error(a(528,""));return v}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xo(l),l=Cr(f).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function po(n){return'href="'+ls(n)+'"'}function Gc(n){return'link[rel="stylesheet"]['+n+"]"}function dv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function KT(n,r,l,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ln(r,"link",l),fn(r),n.head.appendChild(r))}function xo(n){return'[src="'+ls(n)+'"]'}function Yc(n){return"script[async]"+n}function hv(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+ls(l.href)+'"]');if(c)return r.instance=c,fn(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),fn(c),Ln(c,"style",f),ih(c,l.precedence,n),r.instance=c;case"stylesheet":f=po(l.href);var m=n.querySelector(Gc(f));if(m)return r.state.loading|=4,r.instance=m,fn(m),m;c=dv(l),(f=Js.get(f))&&Cg(c,f),m=(n.ownerDocument||n).createElement("link"),fn(m);var v=m;return v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Ln(m,"link",c),r.state.loading|=4,ih(m,l.precedence,n),r.instance=m;case"script":return m=xo(l.src),(f=n.querySelector(Yc(m)))?(r.instance=f,fn(f),f):(c=l,(f=Js.get(m))&&(c=w({},l),Ag(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),fn(f),Ln(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,ih(c,l.precedence,n));return r.instance}function ih(n,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function Cg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Ag(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var lh=null;function fv(n,r,l){if(lh===null){var c=new Map,f=lh=new Map;f.set(l,c)}else f=lh,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var m=l[f];if(!(m[An]||m[Ze]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=n+v;var T=c.get(v);T?T.push(m):c.set(v,[m])}}return c}function mv(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function GT(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function gv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function YT(n,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=po(c.href),m=r.querySelector(Gc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=oh.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=m,fn(m);return}m=r.ownerDocument||r,c=dv(c),(f=Js.get(f))&&Cg(c,f),m=m.createElement("link"),fn(m);var v=m;v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Ln(m,"link",c),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=oh.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var Rg=0;function QT(n,r){return n.stylesheets&&n.count===0&&uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&Rg===0&&(Rg=62500*AT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Rg?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ch=null;function uh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ch=new Map,r.forEach(XT,n),ch=null,oh.call(n))}function XT(n,r){if(!(r.state.loading&4)){var l=ch.get(n);if(l)var c=l.get(null);else{l=new Map,ch.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=oh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Qc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function WT(n,r,l,c,f,m,v,T,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qn(0),this.hiddenUpdates=qn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function pv(n,r,l,c,f,m,v,T,L,ee,oe,ge){return n=new WT(n,r,l,v,L,ee,oe,ge,T),r=1,m===!0&&(r|=24),m=Cs(3,null,null,r),n.current=m,m.stateNode=n,r=cm(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:r},fm(m),n}function xv(n){return n?(n=Gl,n):Gl}function yv(n,r,l,c,f,m){f=xv(f),c.context===null?c.context=f:c.pendingContext=f,c=si(r),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=ri(n,c,r),l!==null&&(fs(l,n,r),Sc(l,n,r))}function bv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function kg(n,r){bv(n,r),(n=n.alternate)&&bv(n,r)}function vv(n){if(n.tag===13||n.tag===31){var r=tl(n,67108864);r!==null&&fs(r,n,67108864),kg(n,67108864)}}function wv(n){if(n.tag===13||n.tag===31){var r=Ds();r=ve(r);var l=tl(n,r);l!==null&&fs(l,n,r),kg(n,r)}}var dh=!0;function JT(n,r,l,c){var f=J.T;J.T=null;var m=te.p;try{te.p=2,Ig(n,r,l,c)}finally{te.p=m,J.T=f}}function ZT(n,r,l,c){var f=J.T;J.T=null;var m=te.p;try{te.p=8,Ig(n,r,l,c)}finally{te.p=m,J.T=f}}function Ig(n,r,l,c){if(dh){var f=Dg(c);if(f===null)yg(n,r,c,hh,l),Nv(n,c);else if(tE(f,n,r,l,c))c.stopPropagation();else if(Nv(n,c),r&4&&-1<eE.indexOf(n)){for(;f!==null;){var m=Bs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Fn(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var L=1<<31-vt(v);T.entanglements[1]|=L,v&=~L}Br(m),(_t&6)===0&&(Yd=Bt()+500,Fc(0))}}break;case 31:case 13:T=tl(m,2),T!==null&&fs(T,m,2),Xd(),kg(m,2)}if(m=Dg(c),m===null&&yg(n,r,c,hh,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else yg(n,r,c,null,l)}}function Dg(n){return n=Hs(n),Og(n)}var hh=null;function Og(n){if(hh=null,n=Sr(n),n!==null){var r=u(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=d(r),n!==null)return n;n=null}else if(l===31){if(n=g(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return hh=n,null}function _v(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ws()){case _s:return 2;case zs:return 8;case Hn:case mt:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Mg=!1,gi=null,pi=null,xi=null,Xc=new Map,Wc=new Map,yi=[],eE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(n,r){switch(n){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Xc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(r.pointerId)}}function Jc(n,r,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Bs(r),r!==null&&vv(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function tE(n,r,l,c,f){switch(r){case"focusin":return gi=Jc(gi,n,r,l,c,f),!0;case"dragenter":return pi=Jc(pi,n,r,l,c,f),!0;case"mouseover":return xi=Jc(xi,n,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return Xc.set(m,Jc(Xc.get(m)||null,n,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Wc.set(m,Jc(Wc.get(m)||null,n,r,l,c,f)),!0}return!1}function jv(n){var r=Sr(n.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=d(l),r!==null){n.blockedOn=r,Me(n.priority,function(){wv(l)});return}}else if(r===31){if(r=g(l),r!==null){n.blockedOn=r,Me(n.priority,function(){wv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Dg(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);dc=c,l.target.dispatchEvent(c),dc=null}else return r=Bs(l),r!==null&&vv(r),n.blockedOn=l,!1;r.shift()}return!0}function Tv(n,r,l){fh(n)&&l.delete(r)}function nE(){Mg=!1,gi!==null&&fh(gi)&&(gi=null),pi!==null&&fh(pi)&&(pi=null),xi!==null&&fh(xi)&&(xi=null),Xc.forEach(Tv),Wc.forEach(Tv)}function mh(n,r){n.blockedOn===r&&(n.blockedOn=null,Mg||(Mg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nE)))}var gh=null;function Ev(n){gh!==n&&(gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gh===n&&(gh=null);for(var r=0;r<n.length;r+=3){var l=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(Og(c||l)===null)continue;break}var m=Bs(l);m!==null&&(n.splice(r,3),r-=3,Dm(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function yo(n){function r(L){return mh(L,n)}gi!==null&&mh(gi,n),pi!==null&&mh(pi,n),xi!==null&&mh(xi,n),Xc.forEach(r),Wc.forEach(r);for(var l=0;l<yi.length;l++){var c=yi[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<yi.length&&(l=yi[0],l.blockedOn===null);)jv(l),l.blockedOn===null&&yi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[rt]||null;if(typeof m=="function")v||Ev(l);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[rt]||null)T=v.formAction;else if(Og(f)!==null)continue}else T=v.action;typeof T=="function"?l[c+1]=T:(l.splice(c,3),c-=3),Ev(l)}}}function Sv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Vg(n){this._internalRoot=n}ph.prototype.render=Vg.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,c=Ds();yv(l,c,n,r,null,null)},ph.prototype.unmount=Vg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;yv(n.current,2,null,n,null,null),Xd(),r[$t]=null}};function ph(n){this._internalRoot=n}ph.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ve();n={blockedOn:null,target:n,priority:r};for(var l=0;l<yi.length&&r!==0&&r<yi[l].priority;l++);yi.splice(l,0,n),l===0&&jv(n)}};var Cv=e.version;if(Cv!=="19.2.0")throw Error(a(527,Cv,"19.2.0"));te.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var sE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{It=xh.inject(sE),bt=xh}catch{}}return eu.createRoot=function(n,r){if(!o(n))throw Error(a(299));var l=!1,c="",f=My,m=Vy,v=Py;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=pv(n,1,!1,null,null,l,c,null,f,m,v,Sv),n[$t]=r.current,xg(n),new Vg(r)},eu.hydrateRoot=function(n,r,l){if(!o(n))throw Error(a(299));var c=!1,f="",m=My,v=Vy,T=Py,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=pv(n,1,!0,r,l??null,c,f,L,m,v,T,Sv),r.context=xv(null),l=r.current,c=Ds(),c=ve(c),f=si(c),f.callback=null,ri(l,f,c),l=c,r.current.lanes=l,ne(r,l),Br(r),n[$t]=r.current,xg(n),new ph(r)},eu.version="19.2.0",eu}var Lv;function fE(){if(Lv)return Ug.exports;Lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ug.exports=hE(),Ug.exports}var mE=fE();const gE=z1(mE);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uv="popstate";function pE(s={}){function e(o,u){let{pathname:d="/",search:g="",hash:x=""}=Tl(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),hp("",{pathname:d,search:g,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let x=o.location.href,p=x.indexOf("#");g=p===-1?x:x.slice(0,p)}return g+"#"+(typeof u=="string"?u:bu(u))}function a(o,u){Ls(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return yE(e,t,a,s)}function Wt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ls(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xE(){return Math.random().toString(36).substring(2,10)}function zv(s,e){return{usr:s.state,key:s.key,idx:e}}function hp(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Tl(e):e,state:t,key:e&&e.key||a||xE()}}function bu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Tl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function yE(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,g="POP",x=null,p=b();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function b(){return(d.state||{idx:null}).idx}function w(){g="POP";let z=b(),Q=z==null?null:z-p;p=z,x&&x({action:g,location:$.location,delta:Q})}function N(z,Q){g="PUSH";let ae=hp($.location,z,Q);t&&t(ae,z),p=b()+1;let K=zv(ae,p),H=$.createHref(ae);try{d.pushState(K,"",H)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(H)}u&&x&&x({action:g,location:$.location,delta:1})}function O(z,Q){g="REPLACE";let ae=hp($.location,z,Q);t&&t(ae,z),p=b();let K=zv(ae,p),H=$.createHref(ae);d.replaceState(K,"",H),u&&x&&x({action:g,location:$.location,delta:0})}function V(z){return bE(z)}let $={get action(){return g},get location(){return s(o,d)},listen(z){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(Uv,w),x=z,()=>{o.removeEventListener(Uv,w),x=null}},createHref(z){return e(o,z)},createURL:V,encodeLocation(z){let Q=V(z);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:N,replace:O,go(z){return d.go(z)}};return $}function bE(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:bu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function B1(s,e,t="/"){return vE(s,e,t,!1)}function vE(s,e,t,a){let o=typeof e=="string"?Tl(e):e,u=Oa(o.pathname||"/",t);if(u==null)return null;let d=H1(s);wE(d);let g=null;for(let x=0;g==null&&x<d.length;++x){let p=IE(u);g=RE(d[x],p,a)}return g}function H1(s,e=[],t=[],a="",o=!1){let u=(d,g,x=o,p)=>{let b={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&x)return;Wt(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let w=ka([a,b.relativePath]),N=t.concat(b);d.children&&d.children.length>0&&(Wt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),H1(d.children,e,N,w,x)),!(d.path==null&&!d.index)&&e.push({path:w,score:CE(w,d.index),routesMeta:N})};return s.forEach((d,g)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))u(d,g);else for(let p of F1(d.path))u(d,g,!0,p)}),e}function F1(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=F1(a.join("/")),g=[];return g.push(...d.map(x=>x===""?u:[u,x].join("/"))),o&&g.push(...d),g.map(x=>s.startsWith("/")&&x===""?"/":x)}function wE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:AE(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var _E=/^:[\w-]+$/,NE=3,jE=2,TE=1,EE=10,SE=-2,Bv=s=>s==="*";function CE(s,e){let t=s.split("/"),a=t.length;return t.some(Bv)&&(a+=SE),e&&(a+=jE),t.filter(o=>!Bv(o)).reduce((o,u)=>o+(_E.test(u)?NE:u===""?TE:EE),a)}function AE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function RE(s,e,t=!1){let{routesMeta:a}=s,o={},u="/",d=[];for(let g=0;g<a.length;++g){let x=a[g],p=g===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},b),N=x.route;if(!w&&p&&t&&!a[a.length-1].route.index&&(w=Bh({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:ka([u,w.pathname]),pathnameBase:PE(ka([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=ka([u,w.pathnameBase]))}return d}function Bh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=kE(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:w},N)=>{if(b==="*"){let V=g[N]||"";d=u.slice(0,u.length-V.length).replace(/(.)\/+$/,"$1")}const O=g[N];return w&&!O?p[b]=void 0:p[b]=(O||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function kE(s,e=!1,t=!0){Ls(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,x)=>(a.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function IE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ls(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Oa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var DE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OE=s=>DE.test(s);function ME(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?Tl(s):s,u;if(t)if(OE(t))u=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Ls(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?u=Hv(t.substring(1),"/"):u=Hv(t,e)}else u=e;return{pathname:u,search:LE(a),hash:UE(o)}}function Hv(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Fg(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function q1(s){let e=VE(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function $1(s,e,t,a=!1){let o;typeof s=="string"?o=Tl(s):(o={...s},Wt(!o.pathname||!o.pathname.includes("?"),Fg("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),Fg("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),Fg("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,g;if(d==null)g=t;else{let w=e.length-1;if(!a&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}g=w>=0?e[w]:"/"}let x=ME(o,g),p=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(p||b)&&(x.pathname+="/"),x}var ka=s=>s.join("/").replace(/\/\/+/g,"/"),PE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),LE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,UE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function zE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var K1=["POST","PUT","PATCH","DELETE"];new Set(K1);var BE=["GET",...K1];new Set(BE);var Yo=j.createContext(null);Yo.displayName="DataRouter";var hf=j.createContext(null);hf.displayName="DataRouterState";j.createContext(!1);var G1=j.createContext({isTransitioning:!1});G1.displayName="ViewTransition";var HE=j.createContext(new Map);HE.displayName="Fetchers";var FE=j.createContext(null);FE.displayName="Await";var ta=j.createContext(null);ta.displayName="Navigation";var Au=j.createContext(null);Au.displayName="Location";var na=j.createContext({outlet:null,matches:[],isDataRoute:!1});na.displayName="Route";var Jp=j.createContext(null);Jp.displayName="RouteError";function qE(s,{relative:e}={}){Wt(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=j.useContext(ta),{hash:o,pathname:u,search:d}=ku(s,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:ka([t,u])),a.createHref({pathname:g,search:d,hash:o})}function Ru(){return j.useContext(Au)!=null}function za(){return Wt(Ru(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Au).location}var Y1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q1(s){j.useContext(ta).static||j.useLayoutEffect(s)}function ar(){let{isDataRoute:s}=j.useContext(na);return s?rS():$E()}function $E(){Wt(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(Yo),{basename:e,navigator:t}=j.useContext(ta),{matches:a}=j.useContext(na),{pathname:o}=za(),u=JSON.stringify(q1(a)),d=j.useRef(!1);return Q1(()=>{d.current=!0}),j.useCallback((x,p={})=>{if(Ls(d.current,Y1),!d.current)return;if(typeof x=="number"){t.go(x);return}let b=$1(x,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ka([e,b.pathname])),(p.replace?t.replace:t.push)(b,p.state,p)},[e,t,u,o,s])}j.createContext(null);function KE(){let{matches:s}=j.useContext(na),e=s[s.length-1];return e?e.params:{}}function ku(s,{relative:e}={}){let{matches:t}=j.useContext(na),{pathname:a}=za(),o=JSON.stringify(q1(t));return j.useMemo(()=>$1(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function GE(s,e){return X1(s,e)}function X1(s,e,t,a,o){var ae;Wt(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(ta),{matches:d}=j.useContext(na),g=d[d.length-1],x=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let K=w&&w.path||"";W1(p,!w||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let N=za(),O;if(e){let K=typeof e=="string"?Tl(e):e;Wt(b==="/"||((ae=K.pathname)==null?void 0:ae.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${K.pathname}" was given in the \`location\` prop.`),O=K}else O=N;let V=O.pathname||"/",$=V;if(b!=="/"){let K=b.replace(/^\//,"").split("/");$="/"+V.replace(/^\//,"").split("/").slice(K.length).join("/")}let z=B1(s,{pathname:$});Ls(w||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Ls(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=JE(z&&z.map(K=>Object.assign({},K,{params:Object.assign({},x,K.params),pathname:ka([b,u.encodeLocation?u.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?b:ka([b,u.encodeLocation?u.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),d,t,a,o);return e&&Q?j.createElement(Au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Q):Q}function YE(){let s=sS(),e=zE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,d)}var QE=j.createElement(YE,null),XE=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?j.createElement(na.Provider,{value:this.props.routeContext},j.createElement(Jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WE({routeContext:s,match:e,children:t}){let a=j.useContext(Yo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(na.Provider,{value:s},t)}function JE(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t==null?void 0:t.errors;if(d!=null){let b=u.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);Wt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,x=-1;if(t)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(x=b),w.route.id){let{loaderData:N,errors:O}=t,V=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!O||O[w.route.id]===void 0);if(w.route.lazy||V){g=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}let p=t&&a?(b,w)=>{var N,O;a(b,{location:t.location,params:((O=(N=t.matches)==null?void 0:N[0])==null?void 0:O.params)??{},errorInfo:w})}:void 0;return u.reduceRight((b,w,N)=>{let O,V=!1,$=null,z=null;t&&(O=d&&w.route.id?d[w.route.id]:void 0,$=w.route.errorElement||QE,g&&(x<0&&N===0?(W1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,z=null):x===N&&(V=!0,z=w.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,N+1)),ae=()=>{let K;return O?K=$:V?K=z:w.route.Component?K=j.createElement(w.route.Component,null):w.route.element?K=w.route.element:K=b,j.createElement(WE,{match:w,routeContext:{outlet:b,matches:Q,isDataRoute:t!=null},children:K})};return t&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?j.createElement(XE,{location:t.location,revalidation:t.revalidation,component:$,error:O,children:ae(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:p}):ae()},null)}function Zp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(s){let e=j.useContext(Yo);return Wt(e,Zp(s)),e}function eS(s){let e=j.useContext(hf);return Wt(e,Zp(s)),e}function tS(s){let e=j.useContext(na);return Wt(e,Zp(s)),e}function e0(s){let e=tS(s),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function nS(){return e0("useRouteId")}function sS(){var a;let s=j.useContext(Jp),e=eS("useRouteError"),t=e0("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[t]}function rS(){let{router:s}=ZE("useNavigate"),e=e0("useNavigate"),t=j.useRef(!1);return Q1(()=>{t.current=!0}),j.useCallback(async(o,u={})=>{Ls(t.current,Y1),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Fv={};function W1(s,e,t){!e&&!Fv[s]&&(Fv[s]=!0,Ls(!1,t))}j.memo(aS);function aS({routes:s,future:e,state:t,unstable_onError:a}){return X1(s,void 0,t,a,e)}function Hr(s){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iS({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:u=!1}){Wt(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof t=="string"&&(t=Tl(t));let{pathname:x="/",search:p="",hash:b="",state:w=null,key:N="default"}=t,O=j.useMemo(()=>{let V=Oa(x,d);return V==null?null:{location:{pathname:V,search:p,hash:b,state:w,key:N},navigationType:a}},[d,x,p,b,w,N,a]);return Ls(O!=null,`<Router basename="${d}"> is not able to match the URL "${x}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:j.createElement(ta.Provider,{value:g},j.createElement(Au.Provider,{children:e,value:O}))}function lS({children:s,location:e}){return GE(fp(s),e)}function fp(s,e=[]){let t=[];return j.Children.forEach(s,(a,o)=>{if(!j.isValidElement(a))return;let u=[...e,o];if(a.type===j.Fragment){t.push.apply(t,fp(a.props.children,u));return}Wt(a.type===Hr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=fp(a.props.children,u)),t.push(d)}),t}var Ch="get",Ah="application/x-www-form-urlencoded";function ff(s){return s!=null&&typeof s.tagName=="string"}function oS(s){return ff(s)&&s.tagName.toLowerCase()==="button"}function cS(s){return ff(s)&&s.tagName.toLowerCase()==="form"}function uS(s){return ff(s)&&s.tagName.toLowerCase()==="input"}function dS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function hS(s,e){return s.button===0&&(!e||e==="_self")&&!dS(s)}function mp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function fS(s,e){let t=mp(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(u=>{t.append(o,u)})}),t}var yh=null;function mS(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var gS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qg(s){return s!=null&&!gS.has(s)?(Ls(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ah}"`),null):s}function pS(s,e){let t,a,o,u,d;if(cS(s)){let g=s.getAttribute("action");a=g?Oa(g,e):null,t=s.getAttribute("method")||Ch,o=qg(s.getAttribute("enctype"))||Ah,u=new FormData(s)}else if(oS(s)||uS(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=s.getAttribute("formaction")||g.getAttribute("action");if(a=x?Oa(x,e):null,t=s.getAttribute("formmethod")||g.getAttribute("method")||Ch,o=qg(s.getAttribute("formenctype"))||qg(g.getAttribute("enctype"))||Ah,u=new FormData(g,s),!mS()){let{name:p,type:b,value:w}=s;if(b==="image"){let N=p?`${p}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else p&&u.append(p,w)}}else{if(ff(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ch,a=null,o=Ah,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function t0(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function xS(s,e,t){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&Oa(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function yS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function vS(s,e,t){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await yS(u,t);return d.links?d.links():[]}return[]}));return jS(a.flat(1).filter(bS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function qv(s,e,t,a,o,u){let d=(x,p)=>t[p]?x.route.id!==t[p].route.id:!0,g=(x,p)=>{var b;return t[p].pathname!==x.pathname||((b=t[p].route.path)==null?void 0:b.endsWith("*"))&&t[p].params["*"]!==x.params["*"]};return u==="assets"?e.filter((x,p)=>d(x,p)||g(x,p)):u==="data"?e.filter((x,p)=>{var w;let b=a.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(d(x,p)||g(x,p))return!0;if(x.route.shouldRevalidate){let N=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function wS(s,e,{includeHydrateFallback:t}={}){return _S(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function _S(s){return[...new Set(s)]}function NS(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function jS(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(NS(o));return t.has(u)||(t.add(u),a.push({key:u,link:o})),a},[])}function J1(){let s=j.useContext(Yo);return t0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function TS(){let s=j.useContext(hf);return t0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var n0=j.createContext(void 0);n0.displayName="FrameworkContext";function Z1(){let s=j.useContext(n0);return t0(s,"You must render this element inside a <HydratedRouter> element"),s}function ES(s,e){let t=j.useContext(n0),[a,o]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:p,onMouseLeave:b,onTouchStart:w}=e,N=j.useRef(null);j.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let $=Q=>{Q.forEach(ae=>{d(ae.isIntersecting)})},z=new IntersectionObserver($,{threshold:.5});return N.current&&z.observe(N.current),()=>{z.disconnect()}}},[s]),j.useEffect(()=>{if(a){let $=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout($)}}},[a]);let O=()=>{o(!0)},V=()=>{o(!1),d(!1)};return t?s!=="intent"?[u,N,{}]:[u,N,{onFocus:tu(g,O),onBlur:tu(x,V),onMouseEnter:tu(p,O),onMouseLeave:tu(b,V),onTouchStart:tu(w,O)}]:[!1,N,{}]}function tu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function SS({page:s,...e}){let{router:t}=J1(),a=j.useMemo(()=>B1(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?j.createElement(AS,{page:s,matches:a,...e}):null}function CS(s){let{manifest:e,routeModules:t}=Z1(),[a,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return vS(s,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,t]),a}function AS({page:s,matches:e,...t}){let a=za(),{manifest:o,routeModules:u}=Z1(),{basename:d}=J1(),{loaderData:g,matches:x}=TS(),p=j.useMemo(()=>qv(s,e,x,o,a,"data"),[s,e,x,o,a]),b=j.useMemo(()=>qv(s,e,x,o,a,"assets"),[s,e,x,o,a]),w=j.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let V=new Set,$=!1;if(e.forEach(Q=>{var K;let ae=o.routes[Q.route.id];!ae||!ae.hasLoader||(!p.some(H=>H.route.id===Q.route.id)&&Q.route.id in g&&((K=u[Q.route.id])!=null&&K.shouldRevalidate)||ae.hasClientLoader?$=!0:V.add(Q.route.id))}),V.size===0)return[];let z=xS(s,d,"data");return $&&V.size>0&&z.searchParams.set("_routes",e.filter(Q=>V.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[z.pathname+z.search]},[d,g,a,o,p,e,s,u]),N=j.useMemo(()=>wS(b,o),[b,o]),O=CS(b);return j.createElement(j.Fragment,null,w.map(V=>j.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),N.map(V=>j.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),O.map(({key:V,link:$})=>j.createElement("link",{key:V,nonce:t.nonce,...$})))}function RS(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var e_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{e_&&(window.__reactRouterVersion="7.9.6")}catch{}function kS({basename:s,children:e,window:t}){let a=j.useRef();a.current==null&&(a.current=pE({window:t,v5Compat:!0}));let o=a.current,[u,d]=j.useState({action:o.action,location:o.location}),g=j.useCallback(x=>{j.startTransition(()=>d(x))},[d]);return j.useLayoutEffect(()=>o.listen(g),[o,g]),j.createElement(iS,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var t_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n_=j.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:g,target:x,to:p,preventScrollReset:b,viewTransition:w,...N},O){let{basename:V}=j.useContext(ta),$=typeof p=="string"&&t_.test(p),z,Q=!1;if(typeof p=="string"&&$&&(z=p,e_))try{let C=new URL(window.location.href),D=p.startsWith("//")?new URL(C.protocol+p):new URL(p),k=Oa(D.pathname,V);D.origin===C.origin&&k!=null?p=k+D.search+D.hash:Q=!0}catch{Ls(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=qE(p,{relative:o}),[K,H,ce]=ES(a,N),be=MS(p,{replace:d,state:g,target:x,preventScrollReset:b,relative:o,viewTransition:w});function E(C){e&&e(C),C.defaultPrevented||be(C)}let S=j.createElement("a",{...N,...ce,href:z||ae,onClick:Q||u?e:E,ref:RS(O,H),target:x,"data-discover":!$&&t==="render"?"true":void 0});return K&&!$?j.createElement(j.Fragment,null,S,j.createElement(SS,{page:ae})):S});n_.displayName="Link";var IS=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:g,children:x,...p},b){let w=ku(d,{relative:p.relative}),N=za(),O=j.useContext(hf),{navigator:V,basename:$}=j.useContext(ta),z=O!=null&&zS(w)&&g===!0,Q=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,ae=N.pathname,K=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),K=K?K.toLowerCase():null,Q=Q.toLowerCase()),K&&$&&(K=Oa(K,$)||K);const H=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ce=ae===Q||!o&&ae.startsWith(Q)&&ae.charAt(H)==="/",be=K!=null&&(K===Q||!o&&K.startsWith(Q)&&K.charAt(Q.length)==="/"),E={isActive:ce,isPending:be,isTransitioning:z},S=ce?e:void 0,C;typeof a=="function"?C=a(E):C=[a,ce?"active":null,be?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(E):u;return j.createElement(n_,{...p,"aria-current":S,className:C,ref:b,style:D,to:d,viewTransition:g},typeof x=="function"?x(E):x)});IS.displayName="NavLink";var DS=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:u,method:d=Ch,action:g,onSubmit:x,relative:p,preventScrollReset:b,viewTransition:w,...N},O)=>{let V=LS(),$=US(g,{relative:p}),z=d.toLowerCase()==="get"?"get":"post",Q=typeof g=="string"&&t_.test(g),ae=K=>{if(x&&x(K),K.defaultPrevented)return;K.preventDefault();let H=K.nativeEvent.submitter,ce=(H==null?void 0:H.getAttribute("formmethod"))||d;V(H||K.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:w})};return j.createElement("form",{ref:O,method:z,action:$,onSubmit:a?x:ae,...N,"data-discover":!Q&&s==="render"?"true":void 0})});DS.displayName="Form";function OS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s_(s){let e=j.useContext(Yo);return Wt(e,OS(s)),e}function MS(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:u,viewTransition:d}={}){let g=ar(),x=za(),p=ku(s,{relative:u});return j.useCallback(b=>{if(hS(b,e)){b.preventDefault();let w=t!==void 0?t:bu(x)===bu(p);g(s,{replace:w,state:a,preventScrollReset:o,relative:u,viewTransition:d})}},[x,g,p,t,a,e,s,o,u,d])}function r_(s){Ls(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(mp(s)),t=j.useRef(!1),a=za(),o=j.useMemo(()=>fS(a.search,t.current?null:e.current),[a.search]),u=ar(),d=j.useCallback((g,x)=>{const p=mp(typeof g=="function"?g(new URLSearchParams(o)):g);t.current=!0,u("?"+p,x)},[u,o]);return[o,d]}var VS=0,PS=()=>`__${String(++VS)}__`;function LS(){let{router:s}=s_("useSubmit"),{basename:e}=j.useContext(ta),t=nS();return j.useCallback(async(a,o={})=>{let{action:u,method:d,encType:g,formData:x,body:p}=pS(a,e);if(o.navigate===!1){let b=o.fetcherKey||PS();await s.fetch(b,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function US(s,{relative:e}={}){let{basename:t}=j.useContext(ta),a=j.useContext(na);Wt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...ku(s||".",{relative:e})},d=za();if(s==null){u.search=d.search;let g=new URLSearchParams(u.search),x=g.getAll("index");if(x.some(b=>b==="")){g.delete("index"),x.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ka([t,u.pathname])),bu(u)}function zS(s,{relative:e}={}){let t=j.useContext(G1);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=s_("useViewTransitionState"),o=ku(s,{relative:e});if(!t.isTransitioning)return!1;let u=Oa(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=Oa(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Bh(o.pathname,d)!=null||Bh(o.pathname,u)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),$v=s=>{const e=HS(s);return e.charAt(0).toUpperCase()+e.slice(1)},a_=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),FS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:d,...g},x)=>j.createElement("svg",{ref:x,...qS,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:a_("lucide",o),...!u&&!FS(g)&&{"aria-hidden":"true"},...g},[...d.map(([p,b])=>j.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(s,e)=>{const t=j.forwardRef(({className:a,...o},u)=>j.createElement($S,{ref:u,iconNode:e,className:a_(`lucide-${BS($v(s))}`,`lucide-${s}`,a),...o}));return t.displayName=$v(s),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Do=Re("arrow-left",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hh=Re("arrow-right",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],$g=Re("baby",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],XS=Re("banknote",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kv=Re("bell",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ZS=Re("book-open",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Fh=Re("briefcase",eC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],cu=Re("building-2",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],sC=Re("calendar-days",nC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vr=Re("calendar",rC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],iC=Re("camera",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oC=Re("chart-column",lC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],uC=Re("chart-pie",cC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uu=Re("check",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gp=Re("chevron-down",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mC=Re("chevron-left",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gs=Re("chevron-right",gC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gv=Re("chevron-up",pC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qn=Re("circle-alert",xC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ys=Re("circle-check-big",yC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gr=Re("circle-check",bC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wC=Re("circle-question-mark",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],NC=Re("circle-user",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qh=Re("circle-x",jC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pr=Re("clock",TC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],mf=Re("cloud-upload",EC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Yv=Re("database",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wn=Re("download",CC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],i_=Re("external-link",AC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pp=Re("eye-off",RC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bl=Re("eye",kC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],s0=Re("file-spreadsheet",IC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ge=Re("file-text",DC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],gf=Re("file",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Kg=Re("flask-conical",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Qv=Re("folder-open",VC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Xv=Re("folder",PC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],UC=Re("funnel",LC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],r0=Re("graduation-cap",zC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Gg=Re("image",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xp=Re("info",HC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],qC=Re("landmark",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],l_=Re("layout-grid",$C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Yg=Re("list",KC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ni=Re("loader-circle",GC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Oo=Re("lock",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],XC=Re("log-out",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],o_=Re("mail",WC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ZC=Re("map-pin",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],c_=Re("maximize-2",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ca=Re("message-circle",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$r=Re("message-square",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Os=Re("pen-line",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],u_=Re("phone",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mo=Re("plus",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Wv=Re("refresh-ccw",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],oA=Re("reply",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],d_=Re("rotate-ccw",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Iu=Re("save",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],h_=Re("school",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],El=Re("search",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Du=Re("send",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gA=Re("settings",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],To=Re("shield-check",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qg=Re("square-check-big",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ji=Re("square-pen",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],vA=Re("stethoscope",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],En=Re("trash-2",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jv=Re("triangle-alert",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sn=Re("upload",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xr=Re("user",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vo=Re("users",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],yp=Re("utensils",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jt=Re("x",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],a0=Re("zoom-in",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],i0=Re("zoom-out",AA),RA=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:To,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],f_="TRC D LIU TRNG MU GIO VNG ANH",kA="modulepreload",IA=function(s){return"/"+s},Zv={},du=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(t.map(p=>{if(p=IA(p),p in Zv)return;Zv[p]=!0;const b=p.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":kA,b||(N.as="script"),N.crossOrigin="",N.href=p,x&&N.setAttribute("nonce",x),document.head.appendChild(N),b)return new Promise((O,V)=>{N.addEventListener("load",O),N.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},DA=()=>{};var ew={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},OA=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],g=s[t++],x=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const u=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},g_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,g=d?s[o+1]:0,x=o+2<s.length,p=x?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let N=(g&15)<<2|p>>6,O=p&63;x||(O=64,d||(N=64)),a.push(t[b],t[w],t[N],t[O])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(m_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):OA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],g=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new MA;const N=u<<2|g>>4;if(a.push(N),p!==64){const O=g<<4&240|p>>2;if(a.push(O),w!==64){const V=p<<6&192|w;a.push(V)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VA=function(s){const e=m_(s);return g_.encodeByteArray(e,!0)},$h=function(s){return VA(s).replace(/\./g,"")},p_=function(s){try{return g_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=()=>PA().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof ew>"u")return;const s=ew.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&p_(s[1]);return e&&JSON.parse(e)},pf=()=>{try{return DA()||LA()||UA()||zA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},x_=s=>{var e,t;return(t=(e=pf())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},l0=s=>{const e=x_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},y_=()=>{var s;return(s=pf())==null?void 0:s.config},b_=s=>{var e;return(e=pf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xf(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[$h(JSON.stringify(t)),$h(JSON.stringify(d)),""].join(".")}const hu={};function HA(){const s={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?s.emulator.push(e):s.prod.push(e);return s}function FA(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let tw=!1;function yf(s,e){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||hu[s]===e||hu[s]||tw)return;hu[s]=e;function t(N){return`__firebase__banner__${N}`}const a="__firebase__banner",u=HA().prod.length>0;function d(){const N=document.getElementById(a);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function x(N,O){N.setAttribute("width","24"),N.setAttribute("id",O),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{tw=!0,d()},N}function b(N,O){N.setAttribute("id",O),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=FA(a),O=t("text"),V=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),z=document.getElementById($)||document.createElement("a"),Q=t("preprendIcon"),ae=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const K=N.element;g(K),b(z,$);const H=p();x(ae,Q),K.append(ae,V,z,H),document.body.appendChild(K)}u?(V.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function $A(){var e;const s=(e=pf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function YA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QA(){const s=Xn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function XA(){return!$A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WA(){try{return typeof indexedDB=="object"}catch{return!1}}function JA(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="FirebaseError";class Tr extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=ZA,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?e4(u,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Tr(o,g,a)}}function e4(s,e){return s.replace(t4,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const t4=/\{\$([^}]+)}/g;function n4(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ai(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const u=s[o],d=e[o];if(nw(u)&&nw(d)){if(!Ai(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function nw(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function su(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ru(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function s4(s,e){const t=new r4(s,e);return t.subscribe.bind(t)}class r4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");a4(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=Xg),o.error===void 0&&(o.error=Xg),o.complete===void 0&&(o.complete=Xg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a4(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(s){return s&&s._delegate?s._delegate:s}class Ma{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new BA;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o4(e))try{this.getOrInitializeService({instanceIdentifier:ml})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=ml){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ml){return this.instances.has(e)}getOptions(e=ml){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:l4(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ml){return this.component?this.component.multipleInstances?e:ml:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l4(s){return s===ml?void 0:s}function o4(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ct||(ct={}));const u4={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},d4=ct.INFO,h4={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},f4=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=h4[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=d4,this._logHandler=f4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const m4=(s,e)=>e.some(t=>s instanceof t);let sw,rw;function g4(){return sw||(sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p4(){return rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w_=new WeakMap,bp=new WeakMap,__=new WeakMap,Wg=new WeakMap,c0=new WeakMap;function x4(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(Ti(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&w_.set(t,s)}).catch(()=>{}),c0.set(e,s),e}function y4(s){if(bp.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});bp.set(s,e)}let vp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return bp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||__.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function b4(s){vp=s(vp)}function v4(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(Jg(this),e,...t);return __.set(a,e.sort?e.sort():[e]),Ti(a)}:p4().includes(s)?function(...e){return s.apply(Jg(this),e),Ti(w_.get(this))}:function(...e){return Ti(s.apply(Jg(this),e))}}function w4(s){return typeof s=="function"?v4(s):(s instanceof IDBTransaction&&y4(s),m4(s,g4())?new Proxy(s,vp):s)}function Ti(s){if(s instanceof IDBRequest)return x4(s);if(Wg.has(s))return Wg.get(s);const e=w4(s);return e!==s&&(Wg.set(s,e),c0.set(e,s)),e}const Jg=s=>c0.get(s);function _4(s,e,{blocked:t,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),g=Ti(d);return a&&d.addEventListener("upgradeneeded",x=>{a(Ti(d.result),x.oldVersion,x.newVersion,Ti(d.transaction),x)}),t&&d.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),g.then(x=>{u&&x.addEventListener("close",()=>u()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const N4=["get","getKey","getAll","getAllKeys","count"],j4=["put","add","delete","clear"],Zg=new Map;function aw(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=j4.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||N4.includes(t)))return;const u=async function(d,...g){const x=this.transaction(d,o?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[t](...g),o&&x.done]))[0]};return Zg.set(e,u),u}b4(s=>({...s,get:(e,t,a)=>aw(e,t)||s.get(e,t,a),has:(e,t)=>!!aw(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E4(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function E4(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",iw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new o0("@firebase/app"),S4="@firebase/app-compat",C4="@firebase/analytics-compat",A4="@firebase/analytics",R4="@firebase/app-check-compat",k4="@firebase/app-check",I4="@firebase/auth",D4="@firebase/auth-compat",O4="@firebase/database",M4="@firebase/data-connect",V4="@firebase/database-compat",P4="@firebase/functions",L4="@firebase/functions-compat",U4="@firebase/installations",z4="@firebase/installations-compat",B4="@firebase/messaging",H4="@firebase/messaging-compat",F4="@firebase/performance",q4="@firebase/performance-compat",$4="@firebase/remote-config",K4="@firebase/remote-config-compat",G4="@firebase/storage",Y4="@firebase/storage-compat",Q4="@firebase/firestore",X4="@firebase/ai",W4="@firebase/firestore-compat",J4="firebase",Z4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",e5={[wp]:"fire-core",[S4]:"fire-core-compat",[A4]:"fire-analytics",[C4]:"fire-analytics-compat",[k4]:"fire-app-check",[R4]:"fire-app-check-compat",[I4]:"fire-auth",[D4]:"fire-auth-compat",[O4]:"fire-rtdb",[M4]:"fire-data-connect",[V4]:"fire-rtdb-compat",[P4]:"fire-fn",[L4]:"fire-fn-compat",[U4]:"fire-iid",[z4]:"fire-iid-compat",[B4]:"fire-fcm",[H4]:"fire-fcm-compat",[F4]:"fire-perf",[q4]:"fire-perf-compat",[$4]:"fire-rc",[K4]:"fire-rc-compat",[G4]:"fire-gcs",[Y4]:"fire-gcs-compat",[Q4]:"fire-fst",[W4]:"fire-fst-compat",[X4]:"fire-vertex","fire-js":"fire-js",[J4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Map,Np=new Map,jp=new Map;function lw(s,e){try{s.container.addComponent(e)}catch(t){Va.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ri(s){const e=s.name;if(jp.has(e))return Va.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,s);for(const t of Vo.values())lw(t,s);for(const t of Np.values())lw(t,s);return!0}function Vu(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ps(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Ou("app","Firebase",t5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=Z4;function u0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:_p,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=y_()),!t)throw Ei.create("no-options");const u=Vo.get(o);if(u){if(Ai(t,u.options)&&Ai(a,u.config))return u;throw Ei.create("duplicate-app",{appName:o})}const d=new c4(o);for(const x of jp.values())d.addComponent(x);const g=new n5(t,a,d);return Vo.set(o,g),g}function bf(s=_p){const e=Vo.get(s);if(!e&&s===_p&&y_())return u0();if(!e)throw Ei.create("no-app",{appName:s});return e}async function s5(s){let e=!1;const t=s.name;Vo.has(t)?(e=!0,Vo.delete(t)):Np.has(t)&&s.decRefCount()<=0&&(Np.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(a=>a.delete())),s.isDeleted=!0)}function er(s,e,t){let a=e5[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Va.warn(d.join(" "));return}Ri(new Ma(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="firebase-heartbeat-database",a5=1,vu="firebase-heartbeat-store";let ep=null;function N_(){return ep||(ep=_4(r5,a5,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ei.create("idb-open",{originalErrorMessage:s.message})})),ep}async function i5(s){try{const t=(await N_()).transaction(vu),a=await t.objectStore(vu).get(j_(s));return await t.done,a}catch(e){if(e instanceof Tr)Va.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Va.warn(t.message)}}}async function ow(s,e){try{const a=(await N_()).transaction(vu,"readwrite");await a.objectStore(vu).put(e,j_(s)),await a.done}catch(t){if(t instanceof Tr)Va.warn(t.message);else{const a=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Va.warn(a.message)}}}function j_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=1024,o5=30;class c5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d5(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=cw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>o5){const d=h5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Va.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cw(),{heartbeatsToSend:a,unsentEntries:o}=u5(this._heartbeatsCache.heartbeats),u=$h(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Va.warn(t),""}}}function cw(){return new Date().toISOString().substring(0,10)}function u5(s,e=l5){const t=[];let a=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),uw(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),uw(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class d5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WA()?JA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ow(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ow(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function uw(s){return $h(JSON.stringify({version:2,heartbeats:s})).length}function h5(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(s){Ri(new Ma("platform-logger",e=>new T4(e),"PRIVATE")),Ri(new Ma("heartbeat",e=>new c5(e),"PRIVATE")),er(wp,iw,s),er(wp,iw,"esm2020"),er("fire-js","")}f5("");var m5="firebase",g5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(m5,g5,"app");var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,T_;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,S){function C(){}C.prototype=S.prototype,E.F=S.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(D,k,M){for(var R=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)R[Te-2]=arguments[Te];return S.prototype[k].apply(D,R)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)D[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;k<16;++k)D[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=E.g[0],C=E.g[1],k=E.g[2];let M=E.g[3],R;R=S+(M^C&(k^M))+D[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(k^S&(C^k))+D[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=k+(C^M&(S^C))+D[2]+606105819&4294967295,k=M+(R<<17&4294967295|R>>>15),R=C+(S^k&(M^S))+D[3]+3250441966&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(M^C&(k^M))+D[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(k^S&(C^k))+D[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=k+(C^M&(S^C))+D[6]+2821735955&4294967295,k=M+(R<<17&4294967295|R>>>15),R=C+(S^k&(M^S))+D[7]+4249261313&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(M^C&(k^M))+D[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(k^S&(C^k))+D[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=k+(C^M&(S^C))+D[10]+4294925233&4294967295,k=M+(R<<17&4294967295|R>>>15),R=C+(S^k&(M^S))+D[11]+2304563134&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(M^C&(k^M))+D[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(k^S&(C^k))+D[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=k+(C^M&(S^C))+D[14]+2792965006&4294967295,k=M+(R<<17&4294967295|R>>>15),R=C+(S^k&(M^S))+D[15]+1236535329&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(k^M&(C^k))+D[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^k&(S^C))+D[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(M^S))+D[11]+643717713&4294967295,k=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(k^M))+D[0]+3921069994&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^M&(C^k))+D[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^k&(S^C))+D[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(M^S))+D[15]+3634488961&4294967295,k=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(k^M))+D[4]+3889429448&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^M&(C^k))+D[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^k&(S^C))+D[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(M^S))+D[3]+4107603335&4294967295,k=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(k^M))+D[8]+1163531501&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^M&(C^k))+D[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^k&(S^C))+D[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(M^S))+D[7]+1735328473&4294967295,k=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(k^M))+D[12]+2368359562&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(C^k^M)+D[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^k)+D[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=k+(M^S^C)+D[11]+1839030562&4294967295,k=M+(R<<16&4294967295|R>>>16),R=C+(k^M^S)+D[14]+4259657740&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^M)+D[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^k)+D[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=k+(M^S^C)+D[7]+4139469664&4294967295,k=M+(R<<16&4294967295|R>>>16),R=C+(k^M^S)+D[10]+3200236656&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^M)+D[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^k)+D[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=k+(M^S^C)+D[3]+3572445317&4294967295,k=M+(R<<16&4294967295|R>>>16),R=C+(k^M^S)+D[6]+76029189&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^M)+D[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^k)+D[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=k+(M^S^C)+D[15]+530742520&4294967295,k=M+(R<<16&4294967295|R>>>16),R=C+(k^M^S)+D[2]+3299628645&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(k^(C|~M))+D[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~k))+D[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=k+(S^(M|~C))+D[14]+2878612391&4294967295,k=M+(R<<15&4294967295|R>>>17),R=C+(M^(k|~S))+D[5]+4237533241&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~M))+D[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~k))+D[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=k+(S^(M|~C))+D[10]+4293915773&4294967295,k=M+(R<<15&4294967295|R>>>17),R=C+(M^(k|~S))+D[1]+2240044497&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~M))+D[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~k))+D[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=k+(S^(M|~C))+D[6]+2734768916&4294967295,k=M+(R<<15&4294967295|R>>>17),R=C+(M^(k|~S))+D[13]+1309151649&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~M))+D[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~k))+D[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=k+(S^(M|~C))+D[2]+718787259&4294967295,k=M+(R<<15&4294967295|R>>>17),R=C+(M^(k|~S))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+M&4294967295}a.prototype.v=function(E,S){S===void 0&&(S=E.length);const C=S-this.blockSize,D=this.C;let k=this.h,M=0;for(;M<S;){if(k==0)for(;M<=C;)o(this,E,M),M+=this.blockSize;if(typeof E=="string"){for(;M<S;)if(D[k++]=E.charCodeAt(M++),k==this.blockSize){o(this,D),k=0;break}}else for(;M<S;)if(D[k++]=E[M++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=S},a.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;S=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=S&255,S/=256;for(this.v(E),E=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)E[S++]=this.g[C]>>>D&255;return E};function u(E,S){var C=g;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=S(E)}function d(E,S){this.h=S;const C=[];let D=!0;for(let k=E.length-1;k>=0;k--){const M=E[k]|0;D&&M==S||(C[k]=M,D=!1)}this.g=C}var g={};function x(E){return-128<=E&&E<128?u(E,function(S){return new d([S|0],S<0?-1:0)}):new d([E|0],E<0?-1:0)}function p(E){if(isNaN(E)||!isFinite(E))return w;if(E<0)return z(p(-E));const S=[];let C=1;for(let D=0;E>=C;D++)S[D]=E/C|0,C*=4294967296;return new d(S,0)}function b(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return z(b(E.substring(1),S));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(S,8));let D=w;for(let M=0;M<E.length;M+=8){var k=Math.min(8,E.length-M);const R=parseInt(E.substring(M,M+k),S);k<8?(k=p(Math.pow(S,k)),D=D.j(k).add(p(R))):(D=D.j(C),D=D.add(p(R)))}return D}var w=x(0),N=x(1),O=x(16777216);s=d.prototype,s.m=function(){if($(this))return-z(this).m();let E=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);E+=(D>=0?D:4294967296+D)*S,S*=4294967296}return E},s.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(V(this))return"0";if($(this))return"-"+z(this).toString(E);const S=p(Math.pow(E,6));var C=this;let D="";for(;;){const k=H(C,S).g;C=Q(C,k.j(S));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=k,V(C))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},s.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function V(E){if(E.h!=0)return!1;for(let S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function $(E){return E.h==-1}s.l=function(E){return E=Q(this,E),$(E)?-1:V(E)?0:1};function z(E){const S=E.g.length,C=[];for(let D=0;D<S;D++)C[D]=~E.g[D];return new d(C,~E.h).add(N)}s.abs=function(){return $(this)?z(this):this},s.add=function(E){const S=Math.max(this.g.length,E.g.length),C=[];let D=0;for(let k=0;k<=S;k++){let M=D+(this.i(k)&65535)+(E.i(k)&65535),R=(M>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);D=R>>>16,M&=65535,R&=65535,C[k]=R<<16|M}return new d(C,C[C.length-1]&-2147483648?-1:0)};function Q(E,S){return E.add(z(S))}s.j=function(E){if(V(this)||V(E))return w;if($(this))return $(E)?z(this).j(z(E)):z(z(this).j(E));if($(E))return z(this.j(z(E)));if(this.l(O)<0&&E.l(O)<0)return p(this.m()*E.m());const S=this.g.length+E.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let k=0;k<E.g.length;k++){const M=this.i(D)>>>16,R=this.i(D)&65535,Te=E.i(k)>>>16,_e=E.i(k)&65535;C[2*D+2*k]+=R*_e,ae(C,2*D+2*k),C[2*D+2*k+1]+=M*_e,ae(C,2*D+2*k+1),C[2*D+2*k+1]+=R*Te,ae(C,2*D+2*k+1),C[2*D+2*k+2]+=M*Te,ae(C,2*D+2*k+2)}for(E=0;E<S;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=S;E<2*S;E++)C[E]=0;return new d(C,0)};function ae(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function K(E,S){this.g=E,this.h=S}function H(E,S){if(V(S))throw Error("division by zero");if(V(E))return new K(w,w);if($(E))return S=H(z(E),S),new K(z(S.g),z(S.h));if($(S))return S=H(E,z(S)),new K(z(S.g),S.h);if(E.g.length>30){if($(E)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var C=N,D=S;D.l(E)<=0;)C=ce(C),D=ce(D);var k=be(C,1),M=be(D,1);for(D=be(D,2),C=be(C,2);!V(D);){var R=M.add(D);R.l(E)<=0&&(k=k.add(C),M=R),D=be(D,1),C=be(C,1)}return S=Q(E,k.j(S)),new K(k,S)}for(k=w;E.l(S)>=0;){for(C=Math.max(1,Math.floor(E.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=p(C),R=M.j(S);$(R)||R.l(E)>0;)C-=D,M=p(C),R=M.j(S);V(M)&&(M=N),k=k.add(M),E=Q(E,R)}return new K(k,E)}s.B=function(E){return H(this,E).h},s.and=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&E.i(D);return new d(C,this.h&E.h)},s.or=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|E.i(D);return new d(C,this.h|E.h)},s.xor=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^E.i(D);return new d(C,this.h^E.h)};function ce(E){const S=E.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=E.i(D)<<1|E.i(D-1)>>>31;return new d(C,E.h)}function be(E,S){const C=S>>5;S%=32;const D=E.g.length-C,k=[];for(let M=0;M<D;M++)k[M]=S>0?E.i(M+C)>>>S|E.i(M+C+1)<<32-S:E.i(M+C);return new d(k,E.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,T_=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=b,Si=d}).apply(typeof dw<"u"?dw:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E_,au,S_,Rh,Tp,C_,A_,R_;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=t(this);function o(h,y){if(y)e:{var _=a;h=h.split(".");for(var A=0;A<h.length-1;A++){var W=h[A];if(!(W in _))break e;_=_[W]}h=h[h.length-1],A=_[h],y=y(A),y!=A&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function x(h,y,_){return h.call.apply(h.bind,arguments)}function p(h,y,_){return p=x,p.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(A,W,ie){for(var Ce=Array(arguments.length-2),et=2;et<arguments.length;et++)Ce[et-2]=arguments[et];return y.prototype[W].apply(A,Ce)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=h[A];return _}return[]}function V(h,y){for(let A=1;A<arguments.length;A++){const W=arguments[A];var _=typeof W;if(_=_!="object"?_:W?Array.isArray(W)?"array":_:"null",_=="array"||_=="object"&&typeof W.length=="number"){_=h.length||0;const ie=W.length||0;h.length=_+ie;for(let Ce=0;Ce<ie;Ce++)h[_+Ce]=W[Ce]}else h.push(W)}}class ${constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){d.setTimeout(()=>{throw h},0)}function Q(){var h=E;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,_){const A=K.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var K=new $(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,be=!1,E=new ae,S=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(C)}};function C(){for(var h;h=Q();){try{h.h.call(h.g)}catch(_){z(_)}var y=K;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}be=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Te(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(Te,k),Te.prototype.init=function(h,y){const _=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),J=0;function te(h,y,_,A,W){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=W,this.key=++J,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,y,_){for(const A in h)y.call(_,h[A],A,h)}function Ae(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function P(h){const y={};for(const _ in h)y[_]=h[_];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,y){let _,A;for(let W=1;W<arguments.length;W++){A=arguments[W];for(_ in A)h[_]=A[_];for(let ie=0;ie<re.length;ie++)_=re[ie],Object.prototype.hasOwnProperty.call(A,_)&&(h[_]=A[_])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,y,_,A,W){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const Ce=ye(h,y,A,W);return Ce>-1?(y=h[Ce],_||(y.fa=!1)):(y=new te(y,this.src,ie,!!A,W),y.fa=_,h.push(y)),y};function G(h,y){const _=y.type;if(_ in h.g){var A=h.g[_],W=Array.prototype.indexOf.call(A,y,void 0),ie;(ie=W>=0)&&Array.prototype.splice.call(A,W,1),ie&&(Ee(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function ye(h,y,_,A){for(let W=0;W<h.length;++W){const ie=h[W];if(!ie.da&&ie.listener==y&&ie.capture==!!_&&ie.ha==A)return W}return-1}var I="closure_lm_"+(Math.random()*1e6|0),U={};function q(h,y,_,A,W){if(Array.isArray(y)){for(let ie=0;ie<y.length;ie++)q(h,y[ie],_,A,W);return null}return _=Pt(_),h&&h[_e]?h.J(y,_,g(A)?!!A.capture:!1,W):Ne(h,y,_,!1,A,W)}function Ne(h,y,_,A,W,ie){if(!y)throw Error("Invalid event type");const Ce=g(W)?!!W.capture:!!W;let et=gt(h);if(et||(h[I]=et=new pe(h)),_=et.add(y,_,A,Ce,ie),_.proxy)return _;if(A=he(),_.proxy=A,A.src=h,A.listener=_,h.addEventListener)M||(W=Ce),W===void 0&&(W=!1),h.addEventListener(y.toString(),A,W);else if(h.attachEvent)h.attachEvent(st(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function he(){function h(_){return y.call(h.src,h.listener,_)}const y=Xe;return h}function De(h,y,_,A,W){if(Array.isArray(y))for(var ie=0;ie<y.length;ie++)De(h,y[ie],_,A,W);else A=g(A)?!!A.capture:!!A,_=Pt(_),h&&h[_e]?(h=h.i,ie=String(y).toString(),ie in h.g&&(y=h.g[ie],_=ye(y,_,A,W),_>-1&&(Ee(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[ie],h.h--)))):h&&(h=gt(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ye(y,_,A,W)),(_=h>-1?y[h]:null)&&He(_))}function He(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[_e])G(y.i,h);else{var _=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(_,A,h.capture):y.detachEvent?y.detachEvent(st(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=gt(y))?(G(_,h),_.h==0&&(_.src=null,y[I]=null)):Ee(h)}}}function st(h){return h in U?U[h]:U[h]="on"+h}function Xe(h,y){if(h.da)h=!0;else{y=new Te(y,this);const _=h.listener,A=h.ha||h.src;h.fa&&He(h),h=_.call(A,y)}return h}function gt(h){return h=h[I],h instanceof pe?h:null}var pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(h){return typeof h=="function"?h:(h[pt]||(h[pt]=function(y){return h.handleEvent(y)}),h[pt])}function Et(){D.call(this),this.i=new pe(this),this.M=this,this.G=null}w(Et,D),Et.prototype[_e]=!0,Et.prototype.removeEventListener=function(h,y,_,A){De(this,h,y,_,A)};function zt(h,y){var _,A=h.G;if(A)for(_=[];A;A=A.G)_.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var W=y;y=new k(A,h),fe(y,W)}W=!0;let ie,Ce;if(_)for(Ce=_.length-1;Ce>=0;Ce--)ie=y.g=_[Ce],W=vs(ie,A,!0,y)&&W;if(ie=y.g=h,W=vs(ie,A,!0,y)&&W,W=vs(ie,A,!1,y)&&W,_)for(Ce=0;Ce<_.length;Ce++)ie=y.g=_[Ce],W=vs(ie,A,!1,y)&&W}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let A=0;A<_.length;A++)Ee(_[A]);delete h.g[y],h.h--}}this.G=null},Et.prototype.J=function(h,y,_,A){return this.i.add(String(h),y,!1,_,A)},Et.prototype.K=function(h,y,_,A){return this.i.add(String(h),y,!0,_,A)};function vs(h,y,_,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let W=!0;for(let ie=0;ie<y.length;++ie){const Ce=y[ie];if(Ce&&!Ce.da&&Ce.capture==_){const et=Ce.listener,cn=Ce.ha||Ce.src;Ce.fa&&G(h.i,Ce),W=et.call(cn,A)!==!1&&W}}return W&&!A.defaultPrevented}function ir(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Dn(h){h.g=ir(()=>{h.g=null,h.i&&(h.i=!1,Dn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Bt extends D{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Dn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(h){D.call(this),this.h=h,this.g={}}w(ws,D);var _s=[];function zs(h){Pe(h.g,function(y,_){this.g.hasOwnProperty(_)&&He(y)},h),h.g={}}ws.prototype.N=function(){ws.Z.N.call(this),zs(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=d.JSON.stringify,mt=d.JSON.parse,Ye=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function St(){}function en(){}var It={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){k.call(this,"d")}w(bt,k);function Xt(){k.call(this,"c")}w(Xt,k);var vt={},ln=null;function as(){return ln=ln||new Et}vt.Ia="serverreachability";function Ns(h){k.call(this,vt.Ia,h)}w(Ns,k);function jn(h){const y=as();zt(y,new Ns(y))}vt.STAT_EVENT="statevent";function js(h,y){k.call(this,vt.STAT_EVENT,h),this.stat=y}w(js,k);function Ct(h){const y=as();zt(y,new js(y,h))}vt.Ja="timingevent";function Fn(h,y){k.call(this,vt.Ja,h),this.size=y}w(Fn,k);function is(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Fi(h,y,_,A,W,ie){h.info(function(){if(h.g)if(ie){var Ce="",et=ie.split("&");for(let wt=0;wt<et.length;wt++){var cn=et[wt].split("=");if(cn.length>1){const Gt=cn[0];cn=cn[1];const qs=Gt.split("_");Ce=qs.length>=2&&qs[1]=="type"?Ce+(Gt+"="+cn+"&"):Ce+(Gt+"=redacted&")}}}else Ce=null;else Ce=ie;return"XMLHTTP REQ ("+A+") [attempt "+W+"]: "+y+`
`+_+`
`+Ce})}function Ha(h,y,_,A,W,ie,Ce){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+W+"]: "+y+`
`+_+`
`+ie+" "+Ce})}function qn(h,y,_,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+me(h,_)+(A?" "+A:"")})}function ne(h,y){h.info(function(){return"TIMEOUT: "+y})}Wn.prototype.info=function(){};function me(h,y){if(!h.g)return y;if(!y)return null;try{const ie=JSON.parse(y);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var _=ie[h];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var W=A[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Ce=1;Ce<A.length;Ce++)A[Ce]=""}}}}return Hn(ie)}catch{return y}}var je={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},B={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},X;function ve(){}w(ve,St),ve.prototype.g=function(){return new XMLHttpRequest},X=new ve;function we(h){return encodeURIComponent(String(h))}function Ve(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Me(h,y,_,A){this.j=h,this.i=y,this.l=_,this.S=A||1,this.V=new ws(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var Ze={},rt={};function $t(h,y,_){h.M=1,h.A=qi(mn(y)),h.u=_,h.R=!0,on(h,null)}function on(h,y){h.F=Date.now(),An(h),h.B=mn(h.A);var _=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Vl(_.i,"t",A),h.C=0,_=h.j.L,h.h=new qe,h.g=dd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Bt(p(h.Y,h,h.g),h.P)),y=h.V,_=h.g,A=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(_s[0]=W.toString()),W=_s);for(let ie=0;ie<W.length;ie++){const Ce=q(_,W[ie],A||y.handleEvent,!1,y.h||y);if(!Ce)break;y.g[Ce.key]=Ce}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),jn(),Fi(h.i,h.v,h.B,h.l,h.S,h.u)}Me.prototype.ba=function(h){h=h.target;const y=this.O;y&&cr(h)==3?y.j():this.Y(h)},Me.prototype.Y=function(h){try{if(h==this.g)e:{const et=cr(this.g),cn=this.g.ya(),wt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||et!=4||cn==7||(cn==8||wt<=0?jn(3):jn(2)),Sr(this);var y=this.g.ca();this.X=y;var _=Kt(this);if(this.o=y==200,Ha(this.i,this.v,this.B,this.l,this.S,et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,W=this.g;if((A=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var ie=A;break t}}ie=null}if(h=ie)qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cr(this,h);else{this.o=!1,this.m=3,Ct(12),Ts(this),Bs(this);break e}}if(this.R){h=!0;let Gt;for(;!this.K&&this.C<_.length;)if(Gt=aa(this,_),Gt==rt){et==4&&(this.m=4,Ct(14),h=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Ze){this.m=4,Ct(15),qn(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else qn(this.i,this.l,Gt,null),Cr(this,Gt);if(Jn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),h=!1),this.o=this.o&&h,!h)qn(this.i,this.l,_,"[Invalid Chunked Response]"),Ts(this),Bs(this);else if(_.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),pc(Ce),Ce.P=!0,Ct(11))}}else qn(this.i,this.l,_,null),Cr(this,_);et==4&&Ts(this),this.o&&!this.K&&(et==4?ld(this.j,this):(this.o=!1,An(this)))}else la(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Ts(this),Bs(this)}}}catch{}finally{}};function Kt(h){if(!Jn(h))return h.g.la();const y=On(h.g);if(y==="")return"";let _="";const A=y.length,W=cr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ts(h),Bs(h),"";h.h.i=new d.TextDecoder}for(let ie=0;ie<A;ie++)h.h.h=!0,_+=h.h.i.decode(y[ie],{stream:!(W&&ie==A-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Jn(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function aa(h,y){var _=h.C,A=y.indexOf(`
`,_);return A==-1?rt:(_=Number(y.substring(_,A)),isNaN(_)?Ze:(A+=1,A+_>y.length?rt:(y=y.slice(A,A+_),h.C=A+_,y)))}Me.prototype.cancel=function(){this.K=!0,Ts(this)};function An(h){h.T=Date.now()+h.H,Dl(h,h.H)}function Dl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=is(p(h.aa,h),y)}function Sr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Me.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ne(this.i,this.B),this.M!=2&&(jn(),Ct(17)),Ts(this),this.m=2,Bs(this)):Dl(this,this.T-h)};function Bs(h){h.j.I==0||h.K||ld(h.j,h)}function Ts(h){Sr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,zs(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Cr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||Rr(_.h,h))){if(!h.L&&Rr(_.h,h)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var W=A;if(W[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Bl(_),Xa(_);else break e;Wi(_),Ct(18)}}else _.xa=W[1],0<_.xa-_.K&&W[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=is(p(_.Va,_),6e3));Ar(_.h)<=1&&_.ta&&(_.ta=void 0)}else Vr(_,11)}else if((h.L||_.g==h)&&Bl(_),!R(y))for(W=_.Ba.g.parse(y),y=0;y<W.length;y++){let wt=W[y];const Gt=wt[0];if(!(Gt<=_.K))if(_.K=Gt,wt=wt[1],_.I==2)if(wt[0]=="c"){_.M=wt[1],_.ba=wt[2];const qs=wt[3];qs!=null&&(_.ka=qs,_.j.info("VER="+_.ka));const Pr=wt[4];Pr!=null&&(_.za=Pr,_.j.info("SVER="+_.za));const ur=wt[5];ur!=null&&typeof ur=="number"&&ur>0&&(A=1.5*ur,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const dr=h.g;if(dr){const Ji=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var ie=A.h;ie.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(rc(ie,ie.h),ie.h=null))}if(A.G){const Hl=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(A.wa=Hl,At(A.J,A.G,Hl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var Ce=h;if(A.na=ud(A,A.L?A.ba:null,A.W),Ce.L){ac(A.h,Ce);var et=Ce,cn=A.O;cn&&(et.H=cn),et.D&&(Sr(et),An(et)),A.g=Ce}else ad(A);_.i.length>0&&Mr(_)}else wt[0]!="stop"&&wt[0]!="close"||Vr(_,7);else _.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Vr(_,7):mc(_):wt[0]!="noop"&&_.l&&_.l.qa(wt),_.A=0)}}jn(4)}catch{}}var fn=class{constructor(h,y){this.g=h,this.map=y}};function nc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ar(h){return h.h?1:h.g?h.g.size:0}function Rr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function rc(h,y){h.g?h.g.add(y):h.h=y}function ac(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}nc.prototype.cancel=function(){if(this.i=ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ic(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return O(h.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const A=h[_].indexOf("=");let W,ie=null;A>=0?(W=h[_].substring(0,A),ie=h[_].substring(A+1)):W=h[_],y(W,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Es(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Es?(this.l=h.l,Rn(this,h.j),this.o=h.o,this.g=h.g,Fa(this,h.u),this.h=h.h,lc(this,sd(h.i)),this.m=h.m):h&&(y=String(h).match(Zu))?(this.l=!1,Rn(this,y[1]||"",!0),this.o=kr(y[2]||""),this.g=kr(y[3]||"",!0),Fa(this,y[4]),this.h=kr(y[5]||"",!0),lc(this,y[6]||"",!0),this.m=kr(y[7]||"")):(this.l=!1,this.i=new $a(null,this.l))}Es.prototype.toString=function(){const h=[];var y=this.j;y&&h.push($i(y,Ml,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push($i(y,Ml,!0),"@"),h.push(we(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push($i(_,_.charAt(0)=="/"?oc:ed,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",$i(_,td)),h.join("")},Es.prototype.resolve=function(h){const y=mn(this);let _=!!h.j;_?Rn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var A=h.h;if(_)Fa(y,h.u);else if(_=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var W=y.h.lastIndexOf("/");W!=-1&&(A=y.h.slice(0,W+1)+A)}if(W=A,W==".."||W==".")A="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){A=W.lastIndexOf("/",0)==0,W=W.split("/");const ie=[];for(let Ce=0;Ce<W.length;){const et=W[Ce++];et=="."?A&&Ce==W.length&&ie.push(""):et==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),A&&Ce==W.length&&ie.push("")):(ie.push(et),A=!0)}A=ie.join("/")}else A=W}return _?y.h=A:_=h.i.toString()!=="",_?lc(y,sd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function mn(h){return new Es(h)}function Rn(h,y,_){h.j=_?kr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Fa(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function lc(h,y,_){y instanceof $a?(h.i=y,Pl(h.i,h.l)):(_||(y=$i(y,qa)),h.i=new $a(y,h.l))}function At(h,y,_){h.i.set(y,_)}function qi(h){return At(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function kr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $i(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,ls),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ls(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ml=/[#\/\?@]/g,ed=/[#\?:]/g,oc=/[#\?]/g,qa=/[#\?@]/g,td=/#/g;function $a(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function os(h){h.g||(h.g=new Map,h.h=0,h.i&&Ol(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=$a.prototype,s.add=function(h,y){os(this),this.i=null,h=Ka(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function nd(h,y){os(h),y=Ka(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function cc(h,y){return os(h),y=Ka(h,y),h.g.has(y)}s.forEach=function(h,y){os(this),this.g.forEach(function(_,A){_.forEach(function(W){h.call(y,W,A,this)},this)},this)};function uc(h,y){os(h);let _=[];if(typeof y=="string")cc(h,y)&&(_=_.concat(h.g.get(Ka(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}s.set=function(h,y){return os(this),this.i=null,h=Ka(this,h),cc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=uc(this,h),h.length>0?String(h[0]):y):y};function Vl(h,y,_){nd(h,y),_.length>0&&(h.i=null,h.g.set(Ka(h,y),O(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const W=we(_);_=uc(this,_);for(let ie=0;ie<_.length;ie++){let Ce=W;_[ie]!==""&&(Ce+="="+we(_[ie])),h.push(Ce)}}return this.i=h.join("&")};function sd(h){const y=new $a;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ka(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Pl(h,y){y&&!h.j&&(os(h),h.i=null,h.g.forEach(function(_,A){const W=A.toLowerCase();A!=W&&(nd(this,A),Vl(this,W,_))},h)),h.j=y}function lr(h,y){const _=new Wn;if(d.Image){const A=new Image;A.onload=b(Hs,_,"TestLoadImage: loaded",!0,y,A),A.onerror=b(Hs,_,"TestLoadImage: error",!1,y,A),A.onabort=b(Hs,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=b(Hs,_,"TestLoadImage: timeout",!1,y,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function dc(h,y){const _=new Wn,A=new AbortController,W=setTimeout(()=>{A.abort(),Hs(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(ie=>{clearTimeout(W),ie.ok?Hs(_,"TestPingServer: ok",!0,y):Hs(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Hs(_,"TestPingServer: error",!1,y)})}function Hs(h,y,_,A,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),A(_)}catch{}}function Ga(){this.g=new Ye}function Ir(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Ir,St),Ir.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(h,y){Et.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ki,Et),s=Ki.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,or(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ya(this):or(this),this.readyState==3&&Ll(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ya(this))},s.Na=function(h){this.g&&(this.response=h,Ya(this))},s.ga=function(){this.g&&Ya(this)};function Ya(h){h.readyState=4,h.l=null,h.j=null,h.B=null,or(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fs(h){let y="";return Pe(h,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function Gi(h,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Fs(_),typeof h=="string"?_!=null&&we(_):At(h,y,_))}function Dt(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Dt,Et);var Dr=/^https?$/i,hc=["POST","PUT"];s=Dt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():X.g(),this.g.onreadystatechange=N(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ie){Yi(this,ie);return}if(h=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var W in A)_.set(W,A[W]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const ie of A.keys())_.set(ie,A.get(ie));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(hc,y,void 0)>=0)||A||W||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ce]of _)this.g.setRequestHeader(ie,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){Yi(this,ie)}};function Yi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,fc(h),ia(h)}function fc(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,zt(this,"complete"),zt(this,"abort"),ia(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),Dt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Qi(this):this.Xa())},s.Xa=function(){Qi(this)};function Qi(h){if(h.h&&typeof u<"u"){if(h.v&&cr(h)==4)setTimeout(h.Ca.bind(h),0);else if(zt(h,"readystatechange"),cr(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=ie===0){let Ce=String(h.D).match(Zu)[1]||null;!Ce&&d.self&&d.self.location&&(Ce=d.self.location.protocol.slice(0,-1)),A=!Dr.test(Ce?Ce.toLowerCase():"")}_=A}if(_)zt(h,"complete"),zt(h,"success");else{h.o=6;try{var W=cr(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",fc(h)}}finally{ia(h)}}}}function ia(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||zt(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function cr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),mt(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function la(h){const y={};h=(h.g&&cr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(R(h[A]))continue;var _=Ve(h[A]);const W=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ie=y[W]||[];y[W]=ie,ie.push(_)}Ae(y,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Qa(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Or("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Or("baseRetryDelayMs",5e3,h),this.Za=Or("retryDelaySeedMs",1e4,h),this.Ta=Or("forwardChannelMaxRetries",2,h),this.va=Or("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new nc(h&&h.concurrentRequestLimit),this.Ba=new Ga,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Qa.prototype,s.ka=8,s.I=1,s.connect=function(h,y,_,A){Ct(0),this.W=h,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=ud(this,null,this.W),Mr(this)};function mc(h){if(Ul(h),h.I==3){var y=h.V++,_=mn(h.J);if(At(_,"SID",h.M),At(_,"RID",y),At(_,"TYPE","terminate"),Xi(h,_),y=new Me(h,h.j,y),y.M=2,y.A=qi(mn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=dd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),An(y)}cd(h)}function Xa(h){h.g&&(pc(h),h.g.cancel(),h.g=null)}function Ul(h){Xa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Bl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Mr(h){if(!sc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ce||S(),be||(ce(),be=!0),E.add(y,h),h.D=0}}function zl(h,y){return Ar(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=is(p(h.Ea,h,y),od(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new Me(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=P(ie),fe(ie,this.U)):ie=this.U),this.u!==null||this.R||(W.J=ie,ie=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=rd(this,W,y),_=mn(this.J),At(_,"RID",h),At(_,"CVER",22),this.G&&At(_,"X-HTTP-Session-Id",this.G),Xi(this,_),ie&&(this.R?y="headers="+we(Fs(ie))+"&"+y:this.u&&Gi(_,this.u,ie)),rc(this.h,W),this.Ra&&At(_,"TYPE","init"),this.S?(At(_,"$req",y),At(_,"SID","null"),W.U=!0,$t(W,_,null)):$t(W,_,y),this.I=2}}else this.I==3&&(h?gc(this,h):this.i.length==0||sc(this.h)||gc(this))};function gc(h,y){var _;y?_=y.l:_=h.V++;const A=mn(h.J);At(A,"SID",h.M),At(A,"RID",_),At(A,"AID",h.K),Xi(h,A),h.u&&h.o&&Gi(A,h.u,h.o),_=new Me(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=rd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),rc(h.h,_),$t(_,A,y)}function Xi(h,y){h.H&&Pe(h.H,function(_,A){At(y,A,_)}),h.l&&Pe({},function(_,A){At(y,A,_)})}function rd(h,y,_){_=Math.min(h.i.length,_);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var W=h.i;let et=-1;for(;;){const cn=["count="+_];et==-1?_>0?(et=W[0].g,cn.push("ofs="+et)):et=0:cn.push("ofs="+et);let wt=!0;for(let Gt=0;Gt<_;Gt++){var ie=W[Gt].g;const qs=W[Gt].map;if(ie-=et,ie<0)et=Math.max(0,W[Gt].g-100),wt=!1;else try{ie="req"+ie+"_"||"";try{var Ce=qs instanceof Map?qs:Object.entries(qs);for(const[Pr,ur]of Ce){let dr=ur;g(ur)&&(dr=Hn(ur)),cn.push(ie+Pr+"="+encodeURIComponent(dr))}}catch(Pr){throw cn.push(ie+"type="+encodeURIComponent("_badmap")),Pr}}catch{A&&A(qs)}}if(wt){Ce=cn.join("&");break e}}Ce=void 0}return h=h.i.splice(0,_),y.G=h,Ce}function ad(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ce||S(),be||(ce(),be=!0),E.add(y,h),h.A=0}}function Wi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=is(p(h.Da,h),od(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,id(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=is(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Xa(this),id(this))};function pc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function id(h){h.g=new Me(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=mn(h.na);At(y,"RID","rpc"),At(y,"SID",h.M),At(y,"AID",h.K),At(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&At(y,"TO",h.ia),At(y,"TYPE","xmlhttp"),Xi(h,y),h.u&&h.o&&Gi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=qi(mn(y)),_.u=null,_.R=!0,on(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Xa(this),Wi(this),Ct(19))};function Bl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ld(h,y){var _=null;if(h.g==y){Bl(h),pc(h),h.g=null;var A=2}else if(Rr(h.h,y))_=y.G,ac(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var W=h.D;A=as(),zt(A,new Fn(A,_)),Mr(h)}else ad(h);else if(W=y.m,W==3||W==0&&y.X>0||!(A==1&&zl(h,y)||A==2&&Wi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),W){case 1:Vr(h,5);break;case 4:Vr(h,10);break;case 3:Vr(h,6);break;default:Vr(h,2)}}}function od(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Vr(h,y){if(h.j.info("Error code "+y),y==2){var _=p(h.bb,h),A=h.Ua;const W=!A;A=new Es(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Rn(A,"https"),qi(A),W?lr(A.toString(),_):dc(A.toString(),_)}else Ct(2);h.I=0,h.l&&h.l.pa(y),cd(h),Ul(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function cd(h){if(h.I=0,h.ja=[],h.l){const y=ic(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function ud(h,y,_){var A=_ instanceof Es?mn(_):new Es(_);if(A.g!="")y&&(A.g=y+"."+A.g),Fa(A,A.u);else{var W=d.location;A=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;const ie=new Es(null);A&&Rn(ie,A),y&&(ie.g=y),W&&Fa(ie,W),_&&(ie.h=_),A=ie}return _=h.G,y=h.wa,_&&y&&At(A,_,y),At(A,"VER",h.ka),Xi(h,A),A}function dd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Dt(new Ir({ab:_})):new Dt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function hd(){}s=hd.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Wa(){}Wa.prototype.g=function(h,y){return new Zn(h,y)};function Zn(h,y){Et.call(this),this.g=new Qa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new oa(this)}w(Zn,Et),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){mc(this.g)},Zn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Hn(h),h=_);y.i.push(new fn(y.Ya++,h)),y.I==3&&Mr(y)},Zn.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,Zn.Z.N.call(this)};function fd(h){bt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(fd,bt);function md(){Xt.call(this),this.status=1}w(md,Xt);function oa(h){this.g=h}w(oa,hd),oa.prototype.ra=function(){zt(this.g,"a")},oa.prototype.qa=function(h){zt(this.g,new fd(h))},oa.prototype.pa=function(h){zt(this.g,new md)},oa.prototype.oa=function(){zt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,R_=function(){return new Wa},A_=function(){return as()},C_=vt,Tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Rh=je,B.COMPLETE="complete",S_=B,en.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",Et.prototype.listen=Et.prototype.J,au=en,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,E_=Dt}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const hw="@firebase/firestore",fw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new o0("@firebase/firestore");function wo(){return vl.logLevel}function Ie(s,...e){if(vl.logLevel<=ct.DEBUG){const t=e.map(d0);vl.debug(`Firestore (${Qo}): ${s}`,...t)}}function Pa(s,...e){if(vl.logLevel<=ct.ERROR){const t=e.map(d0);vl.error(`Firestore (${Qo}): ${s}`,...t)}}function Po(s,...e){if(vl.logLevel<=ct.WARN){const t=e.map(d0);vl.warn(`Firestore (${Qo}): ${s}`,...t)}}function d0(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,k_(s,a,t)}function k_(s,e,t){let a=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Pa(a),new Error(a)}function Nt(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||k_(e,o,a)}function Je(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gn.UNAUTHENTICATED)))}shutdown(){}}class x5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y5{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Nt(this.o===void 0,42304);let a=this.i;const o=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let u=new Ia;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ia,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},g=x=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((x=>g(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?g(x):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ia)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Nt(typeof a.accessToken=="string",31837,{l:a}),new I_(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class b5{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v5{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new b5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Nt(this.o===void 0,3512);const a=u=>{u.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ie("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=_5(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<t&&(a+=e.charAt(o[u]%62))}return a}}function ut(s,e){return s<e?-1:s>e?1:0}function Ep(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return tp(o)===tp(u)?ut(o,u):tp(o)?1:-1}return ut(s.length,e.length)}const N5=55296,j5=57343;function tp(s){const e=s.charCodeAt(0);return e>=N5&&e<=j5}function Lo(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="__name__";class Fr{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ke(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ke(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const u=Fr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return ut(e.length,t.length)}static compareSegments(e,t){const a=Fr.isNumericId(e),o=Fr.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?Fr.extractNumericId(e).compare(Fr.extractNumericId(t)):Ep(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class Ut extends Fr{construct(e,t,a){return new Ut(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new Ut(t)}static emptyPath(){return new Ut([])}}const T5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Fr{construct(e,t,a){return new zn(e,t,a)}static isValidIdentifier(e){return T5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gw}static keyField(){return new zn([gw])}static fromServerFormat(e){const t=[];let a="",o=0;const u=()=>{if(a.length===0)throw new ke(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ke(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new ke(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(u(),o++)}if(u(),d)throw new ke(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Ut.fromString(e))}static fromName(e){return new ze(Ut.fromString(e).popFirst(5))}static empty(){return new ze(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(s,e,t){if(!t)throw new ke(de.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function E5(s,e,t,a){if(e===!0&&a===!0)throw new ke(de.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function pw(s){if(!ze.isDocumentKey(s))throw new ke(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xw(s){if(ze.isDocumentKey(s))throw new ke(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function O_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function vf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ke(12329,{type:typeof s})}function ss(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ke(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vf(s);throw new ke(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(s,e){const t={typeString:s};return e&&(t.value=e),t}function Pu(s,e){if(!O_(s))throw new ke(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${a}' field to equal '${u.value}'`;break}}if(t)throw new ke(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=-62135596800,bw=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*bw);return new qt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yw)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bw}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pu(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:_n("string",qt._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new qt(0,0))}static max(){return new Qe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function S5(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Qe.fromTimestamp(a===1e9?new qt(t+1,0):new qt(t,a));return new ki(o,ze.empty(),e)}function C5(s){return new ki(s.readTime,s.key,wu)}class ki{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ki(Qe.min(),ze.empty(),wu)}static max(){return new ki(Qe.max(),ze.empty(),wu)}}function A5(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(s.documentKey,e.documentKey),t!==0?t:ut(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(s){if(s.code!==de.FAILED_PRECONDITION||s.message!==R5)throw s;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,a)=>{t(e)}))}static reject(e){return new xe(((t,a)=>{a(e)}))}static waitFor(e){return new xe(((t,a)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&t()}),(x=>a(x)))})),d=!0,u===o&&t()}))}static or(e){let t=xe.resolve(!1);for(const a of e)t=t.next((o=>o?xe.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,u)=>{a.push(t.call(this,o,u))})),this.waitFor(a)}static mapArray(e,t){return new xe(((a,o)=>{const u=e.length,d=new Array(u);let g=0;for(let x=0;x<u;x++){const p=x;t(e[p]).next((b=>{d[p]=b,++g,g===u&&a(d)}),(b=>o(b)))}}))}static doWhile(e,t){return new xe(((a,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):a()};u()}))}}function I5(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=-1;function _f(s){return s==null}function Kh(s){return s===0&&1/s==-1/0}function D5(s){return typeof s=="number"&&Number.isInteger(s)&&!Kh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="";function O5(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=vw(e)),e=M5(s.get(t),e);return vw(e)}function M5(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case M_:t+="";break;default:t+=u}}return t}function vw(s){return s+M_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Li(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function V_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?a(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,a,o,u){this.key=e,this.value=t,this.color=a??Un.RED,this.left=o??Un.EMPTY,this.right=u??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,u){return new Un(e??this.key,t??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,a),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Un.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,t,a,o,u){return this}insert(e,t,a){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new Cn(zn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new P_("Invalid base64 string: "+u):u}})(e);return new Bn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const V5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(s){if(Nt(!!s,39018),typeof s=="string"){let e=0;const t=V5.exec(s);if(Nt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hn(s.seconds),nanos:hn(s.nanos)}}function hn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Di(s){return typeof s=="string"?Bn.fromBase64String(s):Bn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="server_timestamp",U_="__type__",z_="__previous_value__",B_="__local_write_time__";function m0(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[U_])==null?void 0:a.stringValue)===L_}function Nf(s){const e=s.mapValue.fields[z_];return m0(e)?Nf(e):e}function _u(s){const e=Ii(s.mapValue.fields[B_].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t,a,o,u,d,g,x,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=b}}const Gh="(default)";class Nu{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new Nu("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__type__",L5="__max__",wh={mapValue:{}},F_="__vector__",Yh="value";function Oi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?m0(s)?4:z5(s)?9007199254740991:U5(s)?10:11:Ke(28295,{value:s})}function Zr(s,e){if(s===e)return!0;const t=Oi(s);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return _u(s).isEqual(_u(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ii(o.timestampValue),g=Ii(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Di(o.bytesValue).isEqual(Di(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return hn(o.geoPointValue.latitude)===hn(u.geoPointValue.latitude)&&hn(o.geoPointValue.longitude)===hn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return hn(o.integerValue)===hn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=hn(o.doubleValue),g=hn(u.doubleValue);return d===g?Kh(d)===Kh(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Lo(s.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(ww(d)!==ww(g))return!1;for(const x in d)if(d.hasOwnProperty(x)&&(g[x]===void 0||!Zr(d[x],g[x])))return!1;return!0})(s,e);default:return Ke(52216,{left:s})}}function ju(s,e){return(s.values||[]).find((t=>Zr(t,e)))!==void 0}function Uo(s,e){if(s===e)return 0;const t=Oi(s),a=Oi(e);if(t!==a)return ut(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=hn(u.integerValue||u.doubleValue),x=hn(d.integerValue||d.doubleValue);return g<x?-1:g>x?1:g===x?0:isNaN(g)?isNaN(x)?0:-1:1})(s,e);case 3:return Nw(s.timestampValue,e.timestampValue);case 4:return Nw(_u(s),_u(e));case 5:return Ep(s.stringValue,e.stringValue);case 6:return(function(u,d){const g=Di(u),x=Di(d);return g.compareTo(x)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),x=d.split("/");for(let p=0;p<g.length&&p<x.length;p++){const b=ut(g[p],x[p]);if(b!==0)return b}return ut(g.length,x.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=ut(hn(u.latitude),hn(d.latitude));return g!==0?g:ut(hn(u.longitude),hn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return jw(s.arrayValue,e.arrayValue);case 10:return(function(u,d){var N,O,V,$;const g=u.fields||{},x=d.fields||{},p=(N=g[Yh])==null?void 0:N.arrayValue,b=(O=x[Yh])==null?void 0:O.arrayValue,w=ut(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return w!==0?w:jw(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===wh.mapValue&&d===wh.mapValue)return 0;if(u===wh.mapValue)return 1;if(d===wh.mapValue)return-1;const g=u.fields||{},x=Object.keys(g),p=d.fields||{},b=Object.keys(p);x.sort(),b.sort();for(let w=0;w<x.length&&w<b.length;++w){const N=Ep(x[w],b[w]);if(N!==0)return N;const O=Uo(g[x[w]],p[b[w]]);if(O!==0)return O}return ut(x.length,b.length)})(s.mapValue,e.mapValue);default:throw Ke(23264,{he:t})}}function Nw(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ut(s,e);const t=Ii(s),a=Ii(e),o=ut(t.seconds,a.seconds);return o!==0?o:ut(t.nanos,a.nanos)}function jw(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const u=Uo(t[o],a[o]);if(u)return u}return ut(t.length,a.length)}function zo(s){return Sp(s)}function Sp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=Ii(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Di(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ze.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const u of t.values||[])o?o=!1:a+=",",a+=Sp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${Sp(t.fields[d])}`;return o+"}"})(s.mapValue):Ke(61005,{value:s})}function kh(s){switch(Oi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(s);return e?16+kh(e):16;case 5:return 2*s.stringValue.length;case 6:return Di(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+kh(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Li(a.fields,((u,d)=>{o+=u.length+kh(d)})),o})(s.mapValue);default:throw Ke(13486,{value:s})}}function Tw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Cp(s){return!!s&&"integerValue"in s}function g0(s){return!!s&&"arrayValue"in s}function Ew(s){return!!s&&"nullValue"in s}function Sw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ih(s){return!!s&&"mapValue"in s}function U5(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[H_])==null?void 0:a.stringValue)===F_}function fu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Li(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=fu(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(s.arrayValue.values[t]);return e}return{...s}}function z5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===L5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=zn.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!t.isImmediateParentOf(g)){const x=this.getFieldsMap(t);this.applyChanges(x,a,o),a={},o=[],t=g.popLast()}d?a[g.lastSegment()]=fu(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,a,o)}delete(e){const t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];Ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){Li(t,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new xs(fu(this.value))}}function q_(s){const e=[];return Li(s.fields,((t,a)=>{const o=new zn([t]);if(Ih(a)){const u=q_(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,a,o,u,d,g){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Yn(e,0,Qe.min(),Qe.min(),Qe.min(),xs.empty(),0)}static newFoundDocument(e,t,a,o){return new Yn(e,1,t,Qe.min(),a,o,0)}static newNoDocument(e,t){return new Yn(e,2,t,Qe.min(),Qe.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Qe.min(),Qe.min(),xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.position=e,this.inclusive=t}}function Cw(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?a=ze.comparator(ze.fromName(d.referenceValue),t.key):a=Uo(d,t.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Aw(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Zr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function B5(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class vn extends $_{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new F5(e,t,a):t==="array-contains"?new K5(e,a):t==="in"?new G5(e,a):t==="not-in"?new Y5(e,a):t==="array-contains-any"?new Q5(e,a):new vn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new q5(e,a):new $5(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nr extends $_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nr(e,t)}matches(e){return K_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K_(s){return s.op==="and"}function G_(s){return H5(s)&&K_(s)}function H5(s){for(const e of s.filters)if(e instanceof Nr)return!1;return!0}function Ap(s){if(s instanceof vn)return s.field.canonicalString()+s.op.toString()+zo(s.value);if(G_(s))return s.filters.map((e=>Ap(e))).join(",");{const e=s.filters.map((t=>Ap(t))).join(",");return`${s.op}(${e})`}}function Y_(s,e){return s instanceof vn?(function(a,o){return o instanceof vn&&a.op===o.op&&a.field.isEqual(o.field)&&Zr(a.value,o.value)})(s,e):s instanceof Nr?(function(a,o){return o instanceof Nr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,d,g)=>u&&Y_(d,o.filters[g])),!0):!1})(s,e):void Ke(19439)}function Q_(s){return s instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`})(s):s instanceof Nr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q_).join(" ,")+"}"})(s):"Filter"}class F5 extends vn{constructor(e,t,a){super(e,t,a),this.key=ze.fromName(a.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class q5 extends vn{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $5 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X_(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>ze.fromName(a.referenceValue)))}class K5 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return g0(t)&&ju(t.arrayValue,this.value)}}class G5 extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class Y5 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class Q5 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!g0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>ju(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,t=null,a=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function Rw(s,e=null,t=[],a=[],o=null,u=null,d=null){return new X5(s,e,t,a,o,u,d)}function p0(s){const e=Je(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Ap(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),_f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>zo(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>zo(a))).join(",")),e.Te=t}return e.Te}function x0(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!B5(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Y_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Aw(s.startAt,e.startAt)&&Aw(s.endAt,e.endAt)}function Rp(s){return ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t=null,a=[],o=[],u=null,d="F",g=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W5(s,e,t,a,o,u,d,g){return new Jo(s,e,t,a,o,u,d,g)}function jf(s){return new Jo(s)}function kw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function W_(s){return s.collectionGroup!==null}function mu(s){const e=Je(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Cn(zn.comparator);return d.filters.forEach((x=>{x.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Tu(u,a))})),t.has(zn.keyField().canonicalString())||e.Ie.push(new Tu(zn.keyField(),a))}return e.Ie}function Gr(s){const e=Je(s);return e.Ee||(e.Ee=J5(e,mu(s))),e.Ee}function J5(s,e){if(s.limitType==="F")return Rw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Tu(o.field,u)}));const t=s.endAt?new Qh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Qh(s.startAt.position,s.startAt.inclusive):null;return Rw(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function kp(s,e){const t=s.filters.concat([e]);return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Ip(s,e,t){return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Tf(s,e){return x0(Gr(s),Gr(e))&&s.limitType===e.limitType}function J_(s){return`${p0(Gr(s))}|lt:${s.limitType}`}function _o(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>Q_(o))).join(", ")}]`),_f(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>zo(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>zo(o))).join(",")),`Target(${a})`})(Gr(s))}; limitType=${s.limitType})`}function Ef(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):ze.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of mu(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,x){const p=Cw(d,g,x);return d.inclusive?p<=0:p<0})(a.startAt,mu(a),o)||a.endAt&&!(function(d,g,x){const p=Cw(d,g,x);return d.inclusive?p>=0:p>0})(a.endAt,mu(a),o))})(s,e)}function Z5(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Z_(s){return(e,t)=>{let a=!1;for(const o of mu(s)){const u=eR(o,e,t);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function eR(s,e,t){const a=s.field.isKeyField()?ze.comparator(e.key,t.key):(function(u,d,g){const x=d.data.field(u),p=g.data.field(u);return x!==null&&p!==null?Uo(x,p):Ke(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ke(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,((t,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new Zt(ze.comparator);function La(){return tR}const eN=new Zt(ze.comparator);function iu(...s){let e=eN;for(const t of s)e=e.insert(t.key,t);return e}function tN(s){let e=eN;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function gl(){return gu()}function nN(){return gu()}function gu(){return new Cl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const nR=new Zt(ze.comparator),sR=new Cn(ze.comparator);function dt(...s){let e=sR;for(const t of s)e=e.add(t);return e}const rR=new Cn(ut);function aR(){return rR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function sN(s){return{integerValue:""+s}}function iR(s,e){return D5(e)?sN(e):y0(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function lR(s,e,t){return s instanceof Eu?(function(o,u){const d={fields:{[U_]:{stringValue:L_},[B_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&m0(u)&&(u=Nf(u)),u&&(d.fields[z_]=u),{mapValue:d}})(t,e):s instanceof Bo?aN(s,e):s instanceof Su?iN(s,e):(function(o,u){const d=rN(o,u),g=Iw(d)+Iw(o.Ae);return Cp(d)&&Cp(o.Ae)?sN(g):y0(o.serializer,g)})(s,e)}function oR(s,e,t){return s instanceof Bo?aN(s,e):s instanceof Su?iN(s,e):t}function rN(s,e){return s instanceof Xh?(function(a){return Cp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Eu extends Sf{}class Bo extends Sf{constructor(e){super(),this.elements=e}}function aN(s,e){const t=lN(e);for(const a of s.elements)t.some((o=>Zr(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Su extends Sf{constructor(e){super(),this.elements=e}}function iN(s,e){let t=lN(e);for(const a of s.elements)t=t.filter((o=>!Zr(o,a)));return{arrayValue:{values:t}}}class Xh extends Sf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Iw(s){return hn(s.integerValue||s.doubleValue)}function lN(s){return g0(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t){this.field=e,this.transform=t}}function cR(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Bo&&o instanceof Bo||a instanceof Su&&o instanceof Su?Lo(a.elements,o.elements,Zr):a instanceof Xh&&o instanceof Xh?Zr(a.Ae,o.Ae):a instanceof Eu&&o instanceof Eu})(s.transform,e.transform)}class uR{constructor(e,t){this.version=e,this.transformResults=t}}class rs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Cf{}function cN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Af(s.key,rs.none()):new Lu(s.key,s.data,rs.none());{const t=s.data,a=xs.empty();let o=new Cn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new Ui(s.key,a,new Ms(o.toArray()),rs.none())}}function dR(s,e,t){s instanceof Lu?(function(o,u,d){const g=o.value.clone(),x=Ow(o.fieldTransforms,u,d.transformResults);g.setAll(x),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):s instanceof Ui?(function(o,u,d){if(!Dh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=Ow(o.fieldTransforms,u,d.transformResults),x=u.data;x.setAll(uN(o)),x.setAll(g),u.convertToFoundDocument(d.version,x).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function pu(s,e,t,a){return s instanceof Lu?(function(u,d,g,x){if(!Dh(u.precondition,d))return g;const p=u.value.clone(),b=Mw(u.fieldTransforms,x,d);return p.setAll(b),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,t,a):s instanceof Ui?(function(u,d,g,x){if(!Dh(u.precondition,d))return g;const p=Mw(u.fieldTransforms,x,d),b=d.data;return b.setAll(uN(u)),b.setAll(p),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,t,a):(function(u,d,g){return Dh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,t)}function hR(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=rN(a.transform,o||null);u!=null&&(t===null&&(t=xs.empty()),t.set(a.field,u))}return t||null}function Dw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Lo(a,o,((u,d)=>cR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Lu extends Cf{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ui extends Cf{constructor(e,t,a,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uN(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function Ow(s,e,t){const a=new Map;Nt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,g=e.data.field(u.field);a.set(u.field,oR(d,g,t[o]))}return a}function Mw(s,e,t){const a=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);a.set(o.field,lR(u,d,e))}return a}class Af extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fR extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&dR(u,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=pu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=pu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=nN();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const x=cN(d,g);x!==null&&a.set(o.key,x),d.isValidDocument()||d.convertToNoDocument(Qe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,a)=>Dw(t,a)))&&Lo(this.baseMutations,e.baseMutations,((t,a)=>Dw(t,a)))}}class b0{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){Nt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return nR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new b0(e,t,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ft;function xR(s){switch(s){case de.OK:return Ke(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ke(15467,{code:s})}}function dN(s){if(s===void 0)return Pa("GRPC error has no .code"),de.UNKNOWN;switch(s){case bn.OK:return de.OK;case bn.CANCELLED:return de.CANCELLED;case bn.UNKNOWN:return de.UNKNOWN;case bn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case bn.INTERNAL:return de.INTERNAL;case bn.UNAVAILABLE:return de.UNAVAILABLE;case bn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case bn.NOT_FOUND:return de.NOT_FOUND;case bn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case bn.ABORTED:return de.ABORTED;case bn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case bn.DATA_LOSS:return de.DATA_LOSS;default:return Ke(39323,{code:s})}}(ft=bn||(bn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Si([4294967295,4294967295],0);function Vw(s){const e=yR().encode(s),t=new T_;return t.update(e),new Uint8Array(t.digest())}function Pw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Si([t,a],0),new Si([o,u],0)]}class v0{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new lu(`Invalid padding: ${t}`);if(a<0)throw new lu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Si.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(Si.fromNumber(a)));return o.compare(bR)===1&&(o=new Si([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Vw(e),[a,o]=Pw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new v0(u,o,t);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const t=Vw(e),[a,o]=Pw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,a,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Rf(Qe.min(),o,new Zt(ut),La(),dt())}}class Uu{constructor(e,t,a,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Uu(a,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,a,o){this.be=e,this.removedTargetIds=t,this.key=a,this.De=o}}class hN{constructor(e,t){this.targetId=e,this.Ce=t}}class fN{constructor(e,t,a=Bn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class Lw{constructor(){this.ve=0,this.Fe=Uw(),this.Me=Bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),a=dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Ke(38017,{changeType:u})}})),new Uu(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=Uw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vR{constructor(e){this.Ge=e,this.ze=new Map,this.je=La(),this.Je=_h(),this.He=_h(),this.Ye=new Zt(ut)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Rp(u))if(a===0){const d=new ze(u.path);this.et(t,d,Yn.newNoDocument(d,Qe.min()))}else Nt(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const g=this.ut(e),x=g?this.ct(g,e,d):1;if(x!==0){this.it(t);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=t;let d,g;try{d=Di(a).toUint8Array()}catch(x){if(x instanceof P_)return Po("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{g=new v0(d,o,u)}catch(x){return Po(x instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return g.ge===0?null:g}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Rp(g.target)){const x=new ze(g.target.path);this.It(x).has(d)||this.Et(d,x)||this.et(d,x,Yn.newNoDocument(x,e))}u.Be&&(t.set(d,u.ke()),u.qe())}}));let a=dt();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Rf(e,t,this.Ye,this.je,a);return this.je=La(),this.Je=_h(),this.He=_h(),this.Ye=new Zt(ut),o}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Lw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Cn(ut),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Cn(ut),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _h(){return new Zt(ze.comparator)}function Uw(){return new Zt(ze.comparator)}const wR={asc:"ASCENDING",desc:"DESCENDING"},_R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NR={and:"AND",or:"OR"};class jR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dp(s,e){return s.useProto3Json||_f(e)?e:{value:e}}function Wh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function TR(s,e){return Wh(s,e.toTimestamp())}function Yr(s){return Nt(!!s,49232),Qe.fromTimestamp((function(t){const a=Ii(t);return new qt(a.seconds,a.nanos)})(s))}function w0(s,e){return Op(s,e).canonicalString()}function Op(s,e){const t=(function(o){return new Ut(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function gN(s){const e=Ut.fromString(s);return Nt(vN(e),10190,{key:e.toString()}),e}function Mp(s,e){return w0(s.databaseId,e.path)}function np(s,e){const t=gN(e);if(t.get(1)!==s.databaseId.projectId)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ze(xN(t))}function pN(s,e){return w0(s.databaseId,e)}function ER(s){const e=gN(s);return e.length===4?Ut.emptyPath():xN(e)}function Vp(s){return new Ut(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function xN(s){return Nt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function zw(s,e,t){return{name:Mp(s,e),fields:t.value.mapValue.fields}}function SR(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(Nt(b===void 0||typeof b=="string",58123),Bn.fromBase64String(b||"")):(Nt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Bn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(p){const b=p.code===void 0?de.UNKNOWN:dN(p.code);return new ke(b,p.message||"")})(d);t=new fN(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=np(s,a.document.name),u=Yr(a.document.updateTime),d=a.document.createTime?Yr(a.document.createTime):Qe.min(),g=new xs({mapValue:{fields:a.document.fields}}),x=Yn.newFoundDocument(o,u,d,g),p=a.targetIds||[],b=a.removedTargetIds||[];t=new Oh(p,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=np(s,a.document),u=a.readTime?Yr(a.readTime):Qe.min(),d=Yn.newNoDocument(o,u),g=a.removedTargetIds||[];t=new Oh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=np(s,a.document),u=a.removedTargetIds||[];t=new Oh([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new pR(o,u),g=a.targetId;t=new hN(g,d)}}return t}function CR(s,e){let t;if(e instanceof Lu)t={update:zw(s,e.key,e.value)};else if(e instanceof Af)t={delete:Mp(s,e.key)};else if(e instanceof Ui)t={update:zw(s,e.key,e.data),updateMask:PR(e.fieldMask)};else{if(!(e instanceof fR))return Ke(16599,{Vt:e.type});t={verify:Mp(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const g=d.transform;if(g instanceof Eu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Bo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Xh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ke(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:TR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(s,e.precondition)),t}function AR(s,e){return s&&s.length>0?(Nt(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?Yr(o.updateTime):Yr(u);return d.isEqual(Qe.min())&&(d=Yr(u)),new uR(d,o.transformResults||[])})(t,e)))):[]}function RR(s,e){return{documents:[pN(s,e.path)]}}function kR(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=pN(s,o);const u=(function(p){if(p.length!==0)return bN(Nr.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((b=>(function(N){return{field:No(N.field),direction:OR(N.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=Dp(s,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function IR(s){let e=ER(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){Nt(a===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(w){const N=yN(w);return N instanceof Nr&&G_(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(V){return new Tu(jo(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(N)))})(t.orderBy));let g=null;t.limit&&(g=(function(w){let N;return N=typeof w=="object"?w.value:w,_f(N)?null:N})(t.limit));let x=null;t.startAt&&(x=(function(w){const N=!!w.before,O=w.values||[];return new Qh(O,N)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const N=!w.before,O=w.values||[];return new Qh(O,N)})(t.endAt)),W5(e,o,d,u,g,"F",x,p)}function DR(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=jo(t.unaryFilter.field);return vn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(t.unaryFilter.field);return vn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=jo(t.unaryFilter.field);return vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=jo(t.unaryFilter.field);return vn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(s):s.fieldFilter!==void 0?(function(t){return vn.create(jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Nr.create(t.compositeFilter.filters.map((a=>yN(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(t.compositeFilter.op))})(s):Ke(30097,{filter:s})}function OR(s){return wR[s]}function MR(s){return _R[s]}function VR(s){return NR[s]}function No(s){return{fieldPath:s.canonicalString()}}function jo(s){return zn.fromServerFormat(s.fieldPath)}function bN(s){return s instanceof vn?(function(t){if(t.op==="=="){if(Sw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Ew(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Ew(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:MR(t.op),value:t.value}}})(s):s instanceof Nr?(function(t){const a=t.getFilters().map((o=>bN(o)));return a.length===1?a[0]:{compositeFilter:{op:VR(t.op),filters:a}}})(s):Ke(54877,{filter:s})}function PR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,a,o,u=Qe.min(),d=Qe.min(),g=Bn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=x}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.yt=e}}function UR(s){const e=IR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.Cn=new BR}addToCollectionParentIndex(e,t){return this.Cn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(ki.min())}updateCollectionGroup(e,t,a){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class BR{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new Cn(Ut.comparator),u=!o.has(a);return this.index[t]=o.add(a),u}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Cn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wN=41943040;class ms{static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(wN,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ho(0)}static cr(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LruGarbageCollector",HR=1048576;function Fw([s,e],[t,a]){const o=ut(s,t);return o===0?ut(e,a):o}class FR{constructor(e){this.Ir=e,this.buffer=new Cn(Fw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Fw(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qR{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(Hw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?Ie(Hw,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Vr(3e5)}))}}class $R{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(wf.ce);const a=new FR(t);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(Bw)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,o,u,d,g,x,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,t)))).next((w=>(u=w,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(p=Date.now(),wo()<=ct.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(x-g)+`ms
	Removed ${w} documents in `+(p-x)+`ms
Total Duration: ${p-b}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function KR(s,e){return new $R(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.changes=new Cl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?xe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&pu(a.mutation,o,Ms.empty(),qt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,dt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=dt()){const o=gl();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((u=>{let d=iu();return u.forEach(((g,x)=>{d=d.insert(g,x.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=gl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,dt())))}populateOverlays(e,t,a){const o=[];return a.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{t.set(d,g)}))}))}computeViews(e,t,a,o){let u=La();const d=gu(),g=(function(){return gu()})();return t.forEach(((x,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Ui)?u=u.insert(p.key,p):b!==void 0?(d.set(p.key,b.mutation.getFieldMask()),pu(b.mutation,p,b.mutation.getFieldMask(),qt.now())):d.set(p.key,Ms.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((p,b)=>d.set(p,b))),t.forEach(((p,b)=>g.set(p,new YR(b,d.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,t){const a=gu();let o=new Zt(((d,g)=>d-g)),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const g of d)g.keys().forEach((x=>{const p=t.get(x);if(p===null)return;let b=a.get(x)||Ms.empty();b=g.applyToLocalView(p,b),a.set(x,b);const w=(o.get(g.batchId)||dt()).add(x);o=o.insert(g.batchId,w)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const x=g.getNext(),p=x.key,b=x.value,w=nN();b.forEach((N=>{if(!u.has(N)){const O=cN(t.get(N),a.get(N));O!==null&&w.set(N,O),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,w))}return xe.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return(function(d){return ze.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):W_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-u.size):xe.resolve(gl());let g=wu,x=u;return d.next((p=>xe.forEach(p,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?xe.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{x=x.insert(b,N)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,x,p,dt()))).next((b=>({batchId:g,changes:tN(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next((a=>{let o=iu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const u=t.collectionGroup;let d=iu();return this.indexManager.getCollectionParents(e,u).next((g=>xe.forEach(g,(x=>{const p=(function(w,N){return new Jo(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((b=>{b.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,u,o)))).next((d=>{u.forEach(((x,p)=>{const b=p.getKey();d.get(b)===null&&(d=d.insert(b,Yn.newInvalidDocument(b)))}));let g=iu();return d.forEach(((x,p)=>{const b=u.get(x);b!==void 0&&pu(b.mutation,p,Ms.empty(),qt.now()),Ef(t,p)&&(g=g.insert(x,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return xe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Yr(o.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:UR(o.bundledQuery),readTime:Yr(o.readTime)}})(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.overlays=new Zt(ze.comparator),this.qr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=gl();return xe.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,u)=>{this.St(e,t,u)})),xe.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),xe.resolve()}getOverlaysForCollection(e,t,a){const o=gl(),u=t.length+1,d=new ze(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const x=g.getNext().value,p=x.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&x.largestBatchId>a&&o.set(x.getKey(),x)}return xe.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let u=new Zt(((p,b)=>p-b));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>a){let b=u.get(p.largestBatchId);b===null&&(b=gl(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=gl(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return xe.resolve(g)}St(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new gR(t,a));let u=this.qr.get(t);u===void 0&&(u=dt(),this.qr.set(t,u)),this.qr.set(t,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Qr=new Cn(In.$r),this.Ur=new Cn(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new In(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new In(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new ze(new Ut([])),a=new In(t,e),o=new In(t,e+1),u=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ze(new Ut([])),a=new In(t,e),o=new In(t,e+1);let u=dt();return this.Ur.forEachInRange([a,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new In(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class In{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ze.comparator(e.key,t.key)||ut(e.Yr,t.Yr)}static Kr(e,t){return ut(e.Yr,t.Yr)||ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Cn(In.$r)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new mR(u,t,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new In(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return xe.resolve(d)}lookupMutationBatch(e,t){return xe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.ei(a),u=o<0?0:o;return xe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?f0:this.tr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new In(t,0),o=new In(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),xe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Cn(ut);return t.forEach((o=>{const u=new In(o,0),d=new In(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{a=a.add(g.Yr)}))})),xe.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let u=a;ze.isDocumentKey(u)||(u=u.child(""));const d=new In(new ze(u),0);let g=new Cn(ut);return this.Zr.forEachWhile((x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(x.Yr)),!0)}),d),xe.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return xe.forEach(t.mutations,(o=>{const u=new In(o.key,t.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new In(t,0),o=this.Zr.firstAfterOrEqual(a);return xe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.ri=e,this.docs=(function(){return new Zt(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),u=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return xe.resolve(a?a.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let a=La();return t.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Yn.newInvalidDocument(o))})),xe.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let u=La();const d=t.path,g=new ze(d.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(g);for(;x.hasNext();){const{key:p,value:{document:b}}=x.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||A5(C5(b),a)<=0||(o.has(b.key)||Ef(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return xe.resolve(u)}getAllFromCollectionGroup(e,t,a,o){Ke(9500)}ii(e,t){return xe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new tk(this)}getSize(e){return xe.resolve(this.size)}}class tk extends GR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),xe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.persistence=e,this.si=new Cl((t=>p0(t)),x0),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new _0,this.targetCount=0,this.ai=Ho.ur()}forEachTarget(e,t){return this.si.forEach(((a,o)=>t(o))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),xe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Pr(t),xe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,a){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=t&&a.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),xe.waitFor(u).next((()=>o))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return xe.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),xe.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),xe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return xe.resolve(a)}containsKey(e,t){return xe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,t){this.ui={},this.overlays={},this.ci=new wf(0),this.li=!1,this.li=!0,this.hi=new JR,this.referenceDelegate=e(this),this.Pi=new nk(this),this.indexManager=new zR,this.remoteDocumentCache=(function(o){return new ek(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new LR(t),this.Ii=new XR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new ZR(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){Ie("MemoryPersistence","Starting transaction:",e);const o=new sk(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return xe.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class sk extends k5{constructor(e){super(),this.currentSequenceNumber=e}}class N0{constructor(e){this.persistence=e,this.Ri=new _0,this.Vi=null}static mi(e){return new N0(e)}get fi(){if(this.Vi)return this.Vi;throw Ke(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),xe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.fi,(a=>{const o=ze.fromPath(a);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Qe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return xe.or([()=>xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jh{constructor(e,t){this.persistence=e,this.pi=new Cl((a=>O5(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=KR(this,t)}static mi(e,t){return new Jh(e,t)}Ei(){}di(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return xe.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?xe.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((g=>{g||(a++,u.removeEntry(d,Qe.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),xe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}br(e,t,a){return xe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return xe.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=o}static As(e,t){let a=dt(),o=dt();for(const u of t.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new j0(e,t.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XA()?8:I5(Xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const u={result:null};return this.ys(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,t,o,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new rk;return this.Ss(e,t,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,t,d,g.size)}))})).next((()=>u.result))}bs(e,t,a,o){return a.documentReadCount<this.fs?(wo()<=ct.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xe.resolve()):(wo()<=ct.DEBUG&&Ie("QueryEngine","Query:",_o(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(wo()<=ct.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):xe.resolve())}ys(e,t){if(kw(t))return xe.resolve(null);let a=Gr(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ip(t,null,"F"),a=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=dt(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((x=>{const p=this.Ds(t,g);return this.Cs(t,p,d,x.readTime)?this.ys(e,Ip(t,null,"F")):this.vs(e,p,t,x)}))))})))))}ws(e,t,a,o){return kw(t)||o.isEqual(Qe.min())?xe.resolve(null):this.ps.getDocuments(e,a).next((u=>{const d=this.Ds(t,u);return this.Cs(t,d,a,o)?xe.resolve(null):(wo()<=ct.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.vs(e,d,t,S5(o,wu)).next((g=>g)))}))}Ds(e,t){let a=new Cn(Z_(e));return t.forEach(((o,u)=>{Ef(e,u)&&(a=a.add(u))})),a}Cs(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,a){return wo()<=ct.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,ki.min(),a)}vs(e,t,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LocalStore",ik=3e8;class lk{constructor(e,t,a,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Zt(ut),this.xs=new Cl((u=>p0(u)),x0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ok(s,e,t,a){return new lk(s,e,t,a)}async function NN(s,e){const t=Je(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],g=[];let x=dt();for(const p of o){d.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}return t.localDocuments.getDocuments(a,x).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:g})))}))}))}function ck(s,e){const t=Je(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,x,p,b){const w=p.batch,N=w.keys();let O=xe.resolve();return N.forEach((V=>{O=O.next((()=>b.getEntry(x,V))).next(($=>{const z=p.docVersions.get(V);Nt(z!==null,48541),$.version.compareTo(z)<0&&(w.applyToRemoteDocument($,p),$.isValidDocument()&&($.setReadTime(p.commitVersion),b.addEntry($)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(x,w)))})(t,a,e,u).next((()=>u.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let x=dt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(x=x.add(g.batch.mutations[p].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function jN(s){const e=Je(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uk(s,e){const t=Je(s),a=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((b,w)=>{const N=o.get(w);if(!N)return;g.push(t.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(u,b.addedDocuments,w))));let O=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(Bn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,a)),o=o.insert(w,O),(function($,z,Q){return $.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=ik?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(N,O,b)&&g.push(t.Pi.updateTargetData(u,O))}));let x=La(),p=dt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(dk(u,d,e.documentUpdates).next((b=>{x=b.ks,p=b.qs}))),!a.isEqual(Qe.min())){const b=t.Pi.getLastRemoteSnapshotVersion(u).next((w=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(b)}return xe.waitFor(g).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,x,p))).next((()=>x))})).then((u=>(t.Ms=o,u)))}function dk(s,e,t){let a=dt(),o=dt();return t.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=La();return t.forEach(((g,x)=>{const p=u.get(g);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),x.isNoDocument()&&x.version.isEqual(Qe.min())?(e.removeEntry(g,x.readTime),d=d.insert(g,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),d=d.insert(g,x)):Ie(T0,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",x.version)})),{ks:d,qs:o}}))}function hk(s,e){const t=Je(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=f0),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function fk(s,e){const t=Je(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.Pi.getTargetData(a,e).next((u=>u?(o=u,xe.resolve(o)):t.Pi.allocateTargetId(a).next((d=>(o=new _i(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function Pp(s,e,t){const a=Je(s),o=a.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Wo(d))throw d;Ie(T0,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function qw(s,e,t){const a=Je(s);let o=Qe.min(),u=dt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(x,p,b){const w=Je(x),N=w.xs.get(b);return N!==void 0?xe.resolve(w.Ms.get(N)):w.Pi.getTargetData(p,b)})(a,d,Gr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((x=>{u=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,t?o:Qe.min(),t?u:dt()))).next((g=>(mk(a,Z5(e),g),{documents:g,Qs:u})))))}function mk(s,e,t){let a=s.Os.get(e)||Qe.min();t.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Os.set(e,a)}class $w{constructor(){this.activeTargetIds=aR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gk{constructor(){this.Mo=new $w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $w,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="ConnectivityMonitor";class Gw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(Kw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(Kw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function Lp(){return Nh===null?Nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="RestConnection",xk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Gh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,t,a,o,u){const d=Lp(),g=this.zo(e,t.toUriEncodedString());Ie(sp,`Sending RPC '${e}' ${d}:`,g,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,u);const{host:p}=new URL(g),b=sa(p);return this.Jo(e,g,x,a,b).then((w=>(Ie(sp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Po(sp,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,t,a,o,u,d){return this.Go(e,t,a,o,u)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const a=xk[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class vk extends yk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,o,u){const d=Lp();return new Promise(((g,x)=>{const p=new E_;p.setWithCredentials(!0),p.listenOnce(S_.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rh.NO_ERROR:const w=p.getResponseJson();Ie(Kn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Rh.TIMEOUT:Ie(Kn,`RPC '${e}' ${d} timed out`),x(new ke(de.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const N=p.getStatus();if(Ie(Kn,`RPC '${e}' ${d} failed with status:`,N,"response text:",p.getResponseText()),N>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const V=O==null?void 0:O.error;if(V&&V.status&&V.message){const $=(function(Q){const ae=Q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ae)>=0?ae:de.UNKNOWN})(V.status);x(new ke($,V.message))}else x(new ke(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new ke(de.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ie(Kn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Ie(Kn,`RPC '${e}' ${d} sending request:`,o),p.send(t,"POST",b,a,15)}))}T_(e,t,a){const o=Lp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=R_(),g=A_(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,t,a),x.encodeInitMessageHeaders=!0;const b=u.join("");Ie(Kn,`Creating RPC '${e}' stream ${o}: ${b}`,x);const w=d.createWebChannel(b,x);this.I_(w);let N=!1,O=!1;const V=new bk({Yo:z=>{O?Ie(Kn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(N||(Ie(Kn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),N=!0),Ie(Kn,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Zo:()=>w.close()}),$=(z,Q,ae)=>{z.listen(Q,(K=>{try{ae(K)}catch(H){setTimeout((()=>{throw H}),0)}}))};return $(w,au.EventType.OPEN,(()=>{O||(Ie(Kn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),$(w,au.EventType.CLOSE,(()=>{O||(O=!0,Ie(Kn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(w))})),$(w,au.EventType.ERROR,(z=>{O||(O=!0,Po(Kn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),V.a_(new ke(de.UNAVAILABLE,"The operation could not be completed")))})),$(w,au.EventType.MESSAGE,(z=>{var Q;if(!O){const ae=z.data[0];Nt(!!ae,16349);const K=ae,H=(K==null?void 0:K.error)||((Q=K[0])==null?void 0:Q.error);if(H){Ie(Kn,`RPC '${e}' stream ${o} received error:`,H);const ce=H.status;let be=(function(C){const D=bn[C];if(D!==void 0)return dN(D)})(ce),E=H.message;be===void 0&&(be=de.INTERNAL,E="Unknown error status: "+ce+" with message "+H.message),O=!0,V.a_(new ke(be,E)),w.close()}else Ie(Kn,`RPC '${e}' stream ${o} received:`,ae),V.u_(ae)}})),$(g,C_.STAT_EVENT,(z=>{z.stat===Tp.PROXY?Ie(Kn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Tp.NOPROXY&&Ie(Kn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(s){return new jR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&Ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="PersistentStream";class EN{constructor(e,t,a,o,u,d,g,x){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Pa(t.toString()),Pa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new ke(de.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ie(Yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wk extends EN{constructor(e,t,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=SR(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Qe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Qe.min():d.readTime?Yr(d.readTime):Qe.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Vp(this.serializer),t.addTarget=(function(u,d){let g;const x=d.target;if(g=Rp(x)?{documents:RR(u,x)}:{query:kR(u,x).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=mN(u,d.resumeToken);const p=Dp(u,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(Qe.min())>0){g.readTime=Wh(u,d.snapshotVersion.toTimestamp());const p=Dp(u,d.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=DR(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Vp(this.serializer),t.removeTarget=e,this.q_(t)}}class _k extends EN{constructor(e,t,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=AR(e.writeResults,e.commitTime),a=Yr(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Vp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>CR(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{}class jk extends Nk{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,Op(t,a),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(de.UNKNOWN,u.toString())}))}Ho(e,t,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Op(t,a),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ke(de.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Tk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pa(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="RemoteStore";class Ek{constructor(e,t,a,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Al(this)&&(Ie(wl,"Restarting streams for network reachability change."),await(async function(x){const p=Je(x);p.Ea.add(4),await zu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await If(p)})(this))}))})),this.Ra=new Tk(a,o)}}async function If(s){if(Al(s))for(const e of s.da)await e(!0)}async function zu(s){for(const e of s.da)await e(!1)}function SN(s,e){const t=Je(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),A0(t)?C0(t):Zo(t).O_()&&S0(t,e))}function E0(s,e){const t=Je(s),a=Zo(t);t.Ia.delete(e),a.O_()&&CN(t,e),t.Ia.size===0&&(a.O_()?a.L_():Al(t)&&t.Ra.set("Unknown"))}function S0(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zo(s).Y_(e)}function CN(s,e){s.Va.Ue(e),Zo(s).Z_(e)}function C0(s){s.Va=new vR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Zo(s).start(),s.Ra.ua()}function A0(s){return Al(s)&&!Zo(s).x_()&&s.Ia.size>0}function Al(s){return Je(s).Ea.size===0}function AN(s){s.Va=void 0}async function Sk(s){s.Ra.set("Online")}async function Ck(s){s.Ia.forEach(((e,t)=>{S0(s,e)}))}async function Ak(s,e){AN(s),A0(s)?(s.Ra.ha(e),C0(s)):s.Ra.set("Unknown")}async function Rk(s,e,t){if(s.Ra.set("Online"),e instanceof fN&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){Ie(wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Zh(s,a)}else if(e instanceof Oh?s.Va.Ze(e):e instanceof hN?s.Va.st(e):s.Va.tt(e),!t.isEqual(Qe.min()))try{const a=await jN(s.localStore);t.compareTo(a)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(x.resumeToken,d))}})),g.targetMismatches.forEach(((x,p)=>{const b=u.Ia.get(x);if(!b)return;u.Ia.set(x,b.withResumeToken(Bn.EMPTY_BYTE_STRING,b.snapshotVersion)),CN(u,x);const w=new _i(b.target,x,p,b.sequenceNumber);S0(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,t)}catch(a){Ie(wl,"Failed to raise snapshot:",a),await Zh(s,a)}}async function Zh(s,e,t){if(!Wo(e))throw e;s.Ea.add(1),await zu(s),s.Ra.set("Offline"),t||(t=()=>jN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ie(wl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await If(s)}))}function RN(s,e){return e().catch((t=>Zh(s,t,e)))}async function Df(s){const e=Je(s),t=Mi(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:f0;for(;kk(e);)try{const o=await hk(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,Ik(e,o)}catch(o){await Zh(e,o)}kN(e)&&IN(e)}function kk(s){return Al(s)&&s.Ta.length<10}function Ik(s,e){s.Ta.push(e);const t=Mi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function kN(s){return Al(s)&&!Mi(s).x_()&&s.Ta.length>0}function IN(s){Mi(s).start()}async function Dk(s){Mi(s).ra()}async function Ok(s){const e=Mi(s);for(const t of s.Ta)e.ea(t.mutations)}async function Mk(s,e,t){const a=s.Ta.shift(),o=b0.from(a,e,t);await RN(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Df(s)}async function Vk(s,e){e&&Mi(s).X_&&await(async function(a,o){if((function(d){return xR(d)&&d!==de.ABORTED})(o.code)){const u=a.Ta.shift();Mi(a).B_(),await RN(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Df(a)}})(s,e),kN(s)&&IN(s)}async function Qw(s,e){const t=Je(s);t.asyncQueue.verifyOperationInProgress(),Ie(wl,"RemoteStore received new credentials");const a=Al(t);t.Ea.add(3),await zu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await If(t)}async function Pk(s,e){const t=Je(s);e?(t.Ea.delete(2),await If(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function Zo(s){return s.ma||(s.ma=(function(t,a,o){const u=Je(t);return u.sa(),new wk(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:Sk.bind(null,s),t_:Ck.bind(null,s),r_:Ak.bind(null,s),H_:Rk.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),A0(s)?C0(s):s.Ra.set("Unknown")):(await s.ma.stop(),AN(s))}))),s.ma}function Mi(s){return s.fa||(s.fa=(function(t,a,o){const u=Je(t);return u.sa(),new _k(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Dk.bind(null,s),r_:Vk.bind(null,s),ta:Ok.bind(null,s),na:Mk.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Df(s)):(await s.fa.stop(),s.Ta.length>0&&(Ie(wl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,a,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,u){const d=Date.now()+a,g=new R0(e,t,d,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k0(s,e){if(Pa("AsyncQueue",`${e}: ${s}`),Wo(s))return new ke(de.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||ze.comparator(t.key,a.key):(t,a)=>ze.comparator(t.key,a.key),this.keyedMap=iu(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Co;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.ga=new Zt(ze.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ke(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Fo{constructor(e,t,a,o,u,d,g,x,p){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,t,a,o,u){const d=[];return t.forEach((g=>{d.push({type:0,doc:g})})),new Fo(e,t,Co.emptySet(t),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Uk{constructor(){this.queries=Ww(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=Je(t),u=o.queries;o.queries=Ww(),u.forEach(((d,g)=>{for(const x of g.Sa)x.onError(a)}))})(this,new ke(de.ABORTED,"Firestore shutting down"))}}function Ww(){return new Cl((s=>J_(s)),Tf)}async function I0(s,e){const t=Je(s);let a=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new Lk,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const g=k0(d,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&O0(t)}async function D0(s,e){const t=Je(s),a=e.query;let o=3;const u=t.queries.get(a);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function zk(s,e){const t=Je(s);let a=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&O0(t)}function Bk(s,e,t){const a=Je(s),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);a.queries.delete(e)}function O0(s){s.Ca.forEach((e=>{e.next()}))}var Up,Jw;(Jw=Up||(Up={})).Ma="default",Jw.Cache="cache";class M0{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Fo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.key=e}}class ON{constructor(e){this.key=e}}class Hk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=Z_(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new Xw,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const N=o.get(b),O=Ef(this.query,w)?w:null,V=!!N&&this.mutatedKeys.has(N.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;N&&O?N.data.isEqual(O.data)?V!==$&&(a.track({type:3,doc:O}),z=!0):this.su(N,O)||(a.track({type:2,doc:O}),z=!0,(x&&this.eu(O,x)>0||p&&this.eu(O,p)<0)&&(g=!0)):!N&&O?(a.track({type:0,doc:O}),z=!0):N&&!O&&(a.track({type:1,doc:N}),z=!0,(x||p)&&(g=!0)),z&&(O?(d=d.add(O),u=$?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:d,iu:a,Cs:g,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,w)=>(function(O,V){const $=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Rt:z})}};return $(O)-$(V)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(a),o=o??!1;const g=t&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,d.length!==0||p?{snapshot:new Fo(this.query,e.tu,u,d,e.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new ON(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new DN(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const V0="SyncEngine";class Fk{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class qk{constructor(e){this.key=e,this.hu=!1}}class $k{constructor(e,t,a,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Cl((g=>J_(g)),Tf),this.Iu=new Map,this.Eu=new Set,this.du=new Zt(ze.comparator),this.Au=new Map,this.Ru=new _0,this.Vu={},this.mu=new Map,this.fu=Ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Kk(s,e,t=!0){const a=zN(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await MN(a,e,t,!0),o}async function Gk(s,e){const t=zN(s);await MN(t,e,!0,!1)}async function MN(s,e,t,a){const o=await fk(s.localStore,Gr(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let g;return a&&(g=await Yk(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&SN(s.remoteStore,o),g}async function Yk(s,e,t,a,o){s.pu=(w,N,O)=>(async function($,z,Q,ae){let K=z.view.ru(Q);K.Cs&&(K=await qw($.localStore,z.query,!1).then((({documents:E})=>z.view.ru(E,K))));const H=ae&&ae.targetChanges.get(z.targetId),ce=ae&&ae.targetMismatches.get(z.targetId)!=null,be=z.view.applyChanges(K,$.isPrimaryClient,H,ce);return e1($,z.targetId,be.au),be.snapshot})(s,w,N,O);const u=await qw(s.localStore,e,!0),d=new Hk(e,u.Qs),g=d.ru(u.documents),x=Uu.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,x);e1(s,t,p.au);const b=new Fk(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function Qk(s,e,t){const a=Je(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((d=>!Tf(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Pp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&E0(a.remoteStore,o.targetId),zp(a,o.targetId)})).catch(Xo)):(zp(a,o.targetId),await Pp(a.localStore,o.targetId,!0))}async function Xk(s,e){const t=Je(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),E0(t.remoteStore,a.targetId))}async function Wk(s,e,t){const a=r3(s);try{const o=await(function(d,g){const x=Je(d),p=qt.now(),b=g.reduce(((O,V)=>O.add(V.key)),dt());let w,N;return x.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let V=La(),$=dt();return x.Ns.getEntries(O,b).next((z=>{V=z,V.forEach(((Q,ae)=>{ae.isValidDocument()||($=$.add(Q))}))})).next((()=>x.localDocuments.getOverlayedDocuments(O,V))).next((z=>{w=z;const Q=[];for(const ae of g){const K=hR(ae,w.get(ae.key).overlayedDocument);K!=null&&Q.push(new Ui(ae.key,K,q_(K.value.mapValue),rs.exists(!0)))}return x.mutationQueue.addMutationBatch(O,p,Q,g)})).next((z=>{N=z;const Q=z.applyToLocalDocumentSet(w,$);return x.documentOverlayCache.saveOverlays(O,z.batchId,Q)}))})).then((()=>({batchId:N.batchId,changes:tN(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,x){let p=d.Vu[d.currentUser.toKey()];p||(p=new Zt(ut)),p=p.insert(g,x),d.Vu[d.currentUser.toKey()]=p})(a,o.batchId,t),await Bu(a,o.changes),await Df(a.remoteStore)}catch(o){const u=k0(o,"Failed to persist write");t.reject(u)}}async function VN(s,e){const t=Je(s);try{const a=await uk(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(Nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Nt(d.hu,14607):o.removedDocuments.size>0&&(Nt(d.hu,42227),d.hu=!1))})),await Bu(t,a,e)}catch(a){await Xo(a)}}function Zw(s,e,t){const a=Je(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const x=Je(d);x.onlineState=g;let p=!1;x.queries.forEach(((b,w)=>{for(const N of w.Sa)N.va(g)&&(p=!0)})),p&&O0(x)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Jk(s,e,t){const a=Je(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),u=o&&o.key;if(u){let d=new Zt(ze.comparator);d=d.insert(u,Yn.newNoDocument(u,Qe.min()));const g=dt().add(u),x=new Rf(Qe.min(),new Map,new Zt(ut),d,g);await VN(a,x),a.du=a.du.remove(u),a.Au.delete(e),P0(a)}else await Pp(a.localStore,e,!1).then((()=>zp(a,e,t))).catch(Xo)}async function Zk(s,e){const t=Je(s),a=e.batch.batchId;try{const o=await ck(t.localStore,e);LN(t,a,null),PN(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Bu(t,o)}catch(o){await Xo(o)}}async function e3(s,e,t){const a=Je(s);try{const o=await(function(d,g){const x=Je(d);return x.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return x.mutationQueue.lookupMutationBatch(p,g).next((w=>(Nt(w!==null,37113),b=w.keys(),x.mutationQueue.removeMutationBatch(p,w)))).next((()=>x.mutationQueue.performConsistencyCheck(p))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>x.localDocuments.getDocuments(p,b)))}))})(a.localStore,e);LN(a,e,t),PN(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Bu(a,o)}catch(o){await Xo(o)}}function PN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function LN(s,e,t){const a=Je(s);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function zp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||UN(s,a)}))}function UN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(E0(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),P0(s))}function e1(s,e,t){for(const a of t)a instanceof DN?(s.Ru.addReference(a.key,e),t3(s,a)):a instanceof ON?(Ie(V0,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||UN(s,a.key)):Ke(19791,{wu:a})}function t3(s,e){const t=e.key,a=t.path.canonicalString();s.du.get(t)||s.Eu.has(a)||(Ie(V0,"New document in limbo: "+t),s.Eu.add(a),P0(s))}function P0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ze(Ut.fromString(e)),a=s.fu.next();s.Au.set(a,new qk(t)),s.du=s.du.insert(t,a),SN(s.remoteStore,new _i(Gr(jf(t.path)),a,"TargetPurposeLimboResolution",wf.ce))}}async function Bu(s,e,t){const a=Je(s),o=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,x)=>{d.push(a.pu(x,e,t).then((p=>{var b;if((p||t)&&a.isPrimaryClient){const w=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:b.current;a.sharedClientState.updateQueryState(x.targetId,w?"current":"not-current")}if(p){o.push(p);const w=j0.As(x.targetId,p);u.push(w)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(x,p){const b=Je(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>xe.forEach(p,(N=>xe.forEach(N.Es,(O=>b.persistence.referenceDelegate.addReference(w,N.targetId,O))).next((()=>xe.forEach(N.ds,(O=>b.persistence.referenceDelegate.removeReference(w,N.targetId,O)))))))))}catch(w){if(!Wo(w))throw w;Ie(T0,"Failed to update sequence numbers: "+w)}for(const w of p){const N=w.targetId;if(!w.fromCache){const O=b.Ms.get(N),V=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(V);b.Ms=b.Ms.insert(N,$)}}})(a.localStore,u))}async function n3(s,e){const t=Je(s);if(!t.currentUser.isEqual(e)){Ie(V0,"User change. New user:",e.toKey());const a=await NN(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((x=>{x.reject(new ke(de.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Bu(t,a.Ls)}}function s3(s,e){const t=Je(s),a=t.Au.get(e);if(a&&a.hu)return dt().add(a.key);{let o=dt();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const g=t.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function zN(s){const e=Je(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=VN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jk.bind(null,e),e.Pu.H_=zk.bind(null,e.eventManager),e.Pu.yu=Bk.bind(null,e.eventManager),e}function r3(s){const e=Je(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e3.bind(null,e),e}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ok(this.persistence,new ak,e.initialUser,this.serializer)}Cu(e){return new _N(N0.mi,this.serializer)}Du(e){return new gk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class a3 extends ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Nt(this.persistence.referenceDelegate instanceof Jh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new qR(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ms.withCacheSize(this.cacheSizeBytes):ms.DEFAULT;return new _N((a=>Jh.mi(a,t)),this.serializer)}}class Bp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Zw(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=n3.bind(null,this.syncEngine),await Pk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),a=(function(u){return new vk(u)})(e.databaseInfo);return(function(u,d,g,x){return new jk(u,d,g,x)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,u,d,g){return new Ek(a,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zw(this.syncEngine,t,0)),(function(){return Gw.v()?new Gw:new pk})())}createSyncEngine(e,t){return(function(o,u,d,g,x,p,b){const w=new $k(o,u,d,g,x,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Je(o);Ie(wl,"RemoteStore shutting down."),u.Ea.add(5),await zu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Bp.provider={build:()=>new Bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class i3{constructor(e,t,a,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=o,this.user=Gn.UNAUTHENTICATED,this.clientId=h0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{Ie(Vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Ie(Vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=k0(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ap(s,e){s.asyncQueue.verifyOperationInProgress(),Ie(Vi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await NN(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function t1(s,e){s.asyncQueue.verifyOperationInProgress();const t=await l3(s);Ie(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>Qw(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Qw(e.remoteStore,o))),s._onlineComponents=e}async function l3(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ie(Vi,"Using user provided OfflineComponentProvider");try{await ap(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===de.FAILED_PRECONDITION||o.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await ap(s,new ef)}}else Ie(Vi,"Using default OfflineComponentProvider"),await ap(s,new a3(void 0));return s._offlineComponents}async function BN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ie(Vi,"Using user provided OnlineComponentProvider"),await t1(s,s._uninitializedComponentsProvider._online)):(Ie(Vi,"Using default OnlineComponentProvider"),await t1(s,new Bp))),s._onlineComponents}function o3(s){return BN(s).then((e=>e.syncEngine))}async function tf(s){const e=await BN(s),t=e.eventManager;return t.onListen=Kk.bind(null,e.syncEngine),t.onUnlisten=Qk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Gk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xk.bind(null,e.syncEngine),t}function c3(s,e,t={}){const a=new Ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,x,p){const b=new L0({next:N=>{b.Nu(),d.enqueueAndForget((()=>D0(u,w)));const O=N.docs.has(g);!O&&N.fromCache?p.reject(new ke(de.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&x&&x.source==="server"?p.reject(new ke(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),w=new M0(jf(g.path),b,{includeMetadataChanges:!0,qa:!0});return I0(u,w)})(await tf(s),s.asyncQueue,e,t,a))),a.promise}function u3(s,e,t={}){const a=new Ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,x,p){const b=new L0({next:N=>{b.Nu(),d.enqueueAndForget((()=>D0(u,w))),N.fromCache&&x.source==="server"?p.reject(new ke(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(N)},error:N=>p.reject(N)}),w=new M0(g,b,{includeMetadataChanges:!0,qa:!0});return I0(u,w)})(await tf(s),s.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firestore.googleapis.com",s1=!0;class r1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FN,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HR)throw new ke(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HN(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new p5;switch(a.type){case"firstParty":return new v5(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ke(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=n1.get(t);a&&(Ie("ComponentProvider","Removing Datastore"),n1.delete(t),a.terminate())})(this),Promise.resolve()}}function d3(s,e,t,a={}){var p;s=ss(s,Of);const o=sa(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${t}`;o&&(xf(`https://${g}`),yf("Firestore",!0)),u.host!==FN&&u.host!==g&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:g,ssl:o,emulatorOptions:a};if(!Ai(x,d)&&(s._setSettings(x),a.mockUserToken)){let b,w;if(typeof a.mockUserToken=="string")b=a.mockUserToken,w=Gn.MOCK_USER;else{b=v_(a.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new ke(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Gn(N)}s._authCredentials=new x5(new I_(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class sn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Pu(t,sn._jsonSchema))return new sn(e,a||null,new ze(Ut.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:_n("string",sn._jsonSchemaVersion),referencePath:_n("string")};class Ci extends zi{constructor(e,t,a){super(e,t,jf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ze(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function jt(s,e,...t){if(s=Tt(s),D_("collection","path",e),s instanceof Of){const a=Ut.fromString(e,...t);return xw(a),new Ci(s,null,a)}{if(!(s instanceof sn||s instanceof Ci))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ut.fromString(e,...t));return xw(a),new Ci(s.firestore,null,a)}}function Be(s,e,...t){if(s=Tt(s),arguments.length===1&&(e=h0.newId()),D_("doc","path",e),s instanceof Of){const a=Ut.fromString(e,...t);return pw(a),new sn(s,null,new ze(a))}{if(!(s instanceof sn||s instanceof Ci))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ut.fromString(e,...t));return pw(a),new sn(s.firestore,s instanceof Ci?s.converter:null,new ze(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class i1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TN(this,"async_queue_retry"),this._c=()=>{const a=rp();a&&Ie(a1,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wo(e))throw e;Ie(a1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Pa("INTERNAL UNHANDLED ERROR: ",l1(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=R0.createAndSchedule(this,e,t,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:l1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function l1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s){return(function(t,a){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class ea extends Of{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new i1,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i1(e),this._firestoreClient=void 0,await e}}}function h3(s,e){const t=typeof s=="object"?s:bf(),a=typeof s=="string"?s:Gh,o=Vu(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=l0("firestore");u&&d3(o,...u)}return o}function Hu(s){if(s._terminated)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||f3(s),s._firestoreClient}function f3(s){var a,o,u;const e=s._freezeSettings(),t=(function(g,x,p,b){return new P5(g,x,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,HN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new i3(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(g){const x=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(x),_online:x}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Bn.fromBase64String(e))}catch(t){throw new ke(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zs(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pu(e,Zs._jsonSchema))return Zs.fromBase64String(e.bytes)}}Zs._jsonSchemaVersion="firestore/bytes/1.0",Zs._jsonSchema={type:_n("string",Zs._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(Pu(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:_n("string",Qr._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pu(e,Xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xr(e.vectorValues);throw new ke(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xr._jsonSchemaVersion="firestore/vectorValue/1.0",Xr._jsonSchema={type:_n("string",Xr._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/^__.*__$/;class g3{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}class qN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $N(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{Ac:s})}}class Mf{constructor(e,t,a,o,u,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($N(this.Ac)&&m3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class p3{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||kf(e)}Cc(e,t,a,o=!1){return new Mf({Ac:e,methodName:t,Dc:a,path:zn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(s){const e=s._freezeSettings(),t=kf(s._databaseId);return new p3(s._databaseId,!!e.ignoreUndefinedProperties,t)}function U0(s,e,t,a,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);H0("Data must be an object, but it was:",d,a);const g=YN(a,d);let x,p;if(u.merge)x=new Ms(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const N=Hp(e,w,t);if(!d.contains(N))throw new ke(de.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);XN(b,N)||b.push(N)}x=new Ms(b),p=d.fieldTransforms.filter((w=>x.covers(w.field)))}else x=null,p=d.fieldTransforms;return new g3(new xs(g),x,p)}class Ku extends qu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function x3(s,e,t){return new Mf({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class z0 extends qu{_toFieldTransform(e){return new oN(e.path,new Eu)}isEqual(e){return e instanceof z0}}class B0 extends qu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=x3(this,e,!0),a=this.vc.map((u=>ec(u,t))),o=new Bo(a);return new oN(e.path,o)}isEqual(e){return e instanceof B0&&Ai(this.vc,e.vc)}}function KN(s,e,t,a){const o=s.Cc(1,e,t);H0("Data must be an object, but it was:",o,a);const u=[],d=xs.empty();Li(a,((x,p)=>{const b=F0(e,x,t);p=Tt(p);const w=o.yc(b);if(p instanceof Ku)u.push(b);else{const N=ec(p,w);N!=null&&(u.push(b),d.set(b,N))}}));const g=new Ms(u);return new qN(d,g,o.fieldTransforms)}function GN(s,e,t,a,o,u){const d=s.Cc(1,e,t),g=[Hp(e,a,t)],x=[o];if(u.length%2!=0)throw new ke(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(Hp(e,u[N])),x.push(u[N+1]);const p=[],b=xs.empty();for(let N=g.length-1;N>=0;--N)if(!XN(p,g[N])){const O=g[N];let V=x[N];V=Tt(V);const $=d.yc(O);if(V instanceof Ku)p.push(O);else{const z=ec(V,$);z!=null&&(p.push(O),b.set(O,z))}}const w=new Ms(p);return new qN(b,w,d.fieldTransforms)}function y3(s,e,t,a=!1){return ec(t,s.Cc(a?4:3,e))}function ec(s,e){if(QN(s=Tt(s)))return H0("Unsupported field value:",e,s),YN(s,e);if(s instanceof qu)return(function(a,o){if(!$N(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let d=0;for(const g of a){let x=ec(g,o.wc(d));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Tt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return iR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=qt.fromDate(a);return{timestampValue:Wh(o.serializer,u)}}if(a instanceof qt){const u=new qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Wh(o.serializer,u)}}if(a instanceof Qr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Zs)return{bytesValue:mN(o.serializer,a._byteString)};if(a instanceof sn){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:w0(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Xr)return(function(d,g){return{mapValue:{fields:{[H_]:{stringValue:F_},[Yh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return y0(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${vf(a)}`)})(s,e)}function YN(s,e){const t={};return V_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(s,((a,o)=>{const u=ec(o,e.mc(a));u!=null&&(t[a]=u)})),{mapValue:{fields:t}}}function QN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof qt||s instanceof Qr||s instanceof Zs||s instanceof sn||s instanceof qu||s instanceof Xr)}function H0(s,e,t){if(!QN(t)||!O_(t)){const a=vf(t);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Hp(s,e,t){if((e=Tt(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return F0(s,e);throw nf("Field path arguments must be of type string or ",s,!1,void 0,t)}const b3=new RegExp("[~\\*/\\[\\]]");function F0(s,e,t){if(e.search(b3)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Fu(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function nf(s,e,t,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let x="";return(u||d)&&(x+=" (found",u&&(x+=` in field ${a}`),d&&(x+=` in document ${o}`),x+=")"),new ke(de.INVALID_ARGUMENT,g+s+x)}function XN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t,a,o,u){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v3 extends WN{data(){return super.data()}}function Vf(s,e){return typeof e=="string"?F0(s,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ke(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q0{}class ZN extends q0{}function Nn(s,e,...t){let a=[];e instanceof q0&&a.push(e),a=a.concat(t),(function(u){const d=u.filter((x=>x instanceof $0)).length,g=u.filter((x=>x instanceof Pf)).length;if(d>1||d>0&&g>0)throw new ke(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Pf extends ZN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Pf(e,t,a)}_apply(e){const t=this._parse(e);return e2(e._query,t),new zi(e.firestore,e.converter,kp(e._query,t))}_parse(e){const t=$u(e.firestore);return(function(u,d,g,x,p,b,w){let N;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ke(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){u1(w,b);const V=[];for(const $ of w)V.push(c1(x,u,$));N={arrayValue:{values:V}}}else N=c1(x,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||u1(w,b),N=y3(g,d,w,b==="in"||b==="not-in");return vn.create(p,b,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Us(s,e,t){const a=e,o=Vf("where",s);return Pf._create(o,a,t)}class $0 extends q0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $0(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Nr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const x of g)e2(d,x),d=kp(d,x)})(e._query,t),new zi(e.firestore,e.converter,kp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class K0 extends ZN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new K0(e,t)}_apply(e){const t=(function(o,u,d){if(o.startAt!==null)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(u,d)})(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new Jo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function tc(s,e="asc"){const t=e,a=Vf("orderBy",s);return K0._create(a,t)}function c1(s,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new ke(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W_(e)&&t.indexOf("/")!==-1)throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ut.fromString(t));if(!ze.isDocumentKey(a))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Tw(s,new ze(a))}if(t instanceof sn)return Tw(s,t._key);throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(t)}.`)}function u1(s,e){if(!Array.isArray(s)||s.length===0)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e2(s,e){const t=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ke(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class w3{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Li(e,((o,u)=>{a[o]=this.convertValue(u,t)})),a}convertVectorValue(e){var a,o,u;const t=(u=(o=(a=e.fields)==null?void 0:a[Yh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((d=>hn(d.doubleValue)));return new Xr(t)}convertGeoPoint(e){return new Qr(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Nf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ut.fromString(e);Nt(vN(a),9688,{name:e});const o=new Nu(a.get(1),a.get(3)),u=new ze(a.popFirst(5));return o.isEqual(t)||Pa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends WN{constructor(e,t,a,o,u,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Vf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pl._jsonSchemaVersion="firestore/documentSnapshot/1.0",pl._jsonSchema={type:_n("string",pl._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class Mh extends pl{data(e={}){return super.data(e)}}class xl{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Mh(this._firestore,this._userDataWriter,a.key,a,new ou(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const x=new Mh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:x,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const x=new Mh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:_3(g.type),doc:x,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(s){s=ss(s,sn);const e=ss(s.firestore,ea);return c3(Hu(e),s._key).then((t=>t2(e,s,t)))}xl._jsonSchemaVersion="firestore/querySnapshot/1.0",xl._jsonSchema={type:_n("string",xl._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Y0 extends w3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function _r(s){s=ss(s,zi);const e=ss(s.firestore,ea),t=Hu(e),a=new Y0(e);return JN(s._query),u3(t,s._query).then((o=>new xl(e,a,s,o)))}function Ao(s,e,t){s=ss(s,sn);const a=ss(s.firestore,ea),o=G0(s.converter,e,t);return Gu(a,[U0($u(a),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,rs.none())])}function Qt(s,e,t,...a){s=ss(s,sn);const o=ss(s.firestore,ea),u=$u(o);let d;return d=typeof(e=Tt(e))=="string"||e instanceof Fu?GN(u,"updateDoc",s._key,e,t,a):KN(u,"updateDoc",s._key,e),Gu(o,[d.toMutation(s._key,rs.exists(!0))])}function Rl(s){return Gu(ss(s.firestore,ea),[new Af(s._key,rs.none())])}function kl(s,e){const t=ss(s.firestore,ea),a=Be(s),o=G0(s.converter,e);return Gu(t,[U0($u(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,rs.exists(!1))]).then((()=>a))}function rr(s,...e){var x,p,b;s=Tt(s);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||o1(e[a])||(t=e[a++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(o1(e[a])){const w=e[a];e[a]=(x=w.next)==null?void 0:x.bind(w),e[a+1]=(p=w.error)==null?void 0:p.bind(w),e[a+2]=(b=w.complete)==null?void 0:b.bind(w)}let u,d,g;if(s instanceof sn)d=ss(s.firestore,ea),g=jf(s._key.path),u={next:w=>{e[a]&&e[a](t2(d,s,w))},error:e[a+1],complete:e[a+2]};else{const w=ss(s,zi);d=ss(w.firestore,ea),g=w._query;const N=new Y0(d);u={next:O=>{e[a]&&e[a](new xl(d,N,w,O))},error:e[a+1],complete:e[a+2]},JN(s._query)}return(function(N,O,V,$){const z=new L0($),Q=new M0(O,z,V);return N.asyncQueue.enqueueAndForget((async()=>I0(await tf(N),Q))),()=>{z.Nu(),N.asyncQueue.enqueueAndForget((async()=>D0(await tf(N),Q)))}})(Hu(d),g,o,u)}function Gu(s,e){return(function(a,o){const u=new Ia;return a.asyncQueue.enqueueAndForget((async()=>Wk(await o3(a),o,u))),u.promise})(Hu(s),e)}function t2(s,e,t){const a=t.docs.get(e._key),o=new Y0(s);return new pl(s,o,e._key,a,new ou(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,t,a){this._verifyNotCommitted();const o=ip(e,this._firestore),u=G0(o.converter,t,a),d=U0(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,a);return this._mutations.push(d.toMutation(o._key,rs.none())),this}update(e,t,a,...o){this._verifyNotCommitted();const u=ip(e,this._firestore);let d;return d=typeof(t=Tt(t))=="string"||t instanceof Fu?GN(this._dataReader,"WriteBatch.update",u._key,t,a,o):KN(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,rs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ip(e,this._firestore);return this._mutations=this._mutations.concat(new Af(t._key,rs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ip(s,e){if((s=Tt(s)).firestore!==e)throw new ke(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(){return new Ku("deleteField")}function Fp(){return new z0("serverTimestamp")}function qo(...s){return new B0("arrayUnion",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(s){return Hu(s=ss(s,ea)),new N3(s,(e=>Gu(s,e)))}(function(e,t=!0){(function(o){Qo=o})(Sl),Ri(new Ma("firestore",((a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),g=new ea(new y5(a.getProvider("auth-internal")),new w5(d,a.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ke(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(p.options.projectId,b)})(d,o),d);return u={useFetchStreams:t,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),er(hw,fw,e),er(hw,fw,"esm2020")})();function n2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s2=n2,r2=new Ou("auth","Firebase",n2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new o0("@firebase/auth");function j3(s,...e){sf.logLevel<=ct.WARN&&sf.warn(`Auth (${Sl}): ${s}`,...e)}function Vh(s,...e){sf.logLevel<=ct.ERROR&&sf.error(`Auth (${Sl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(s,...e){throw Q0(s,...e)}function Wr(s,...e){return Q0(s,...e)}function a2(s,e,t){const a={...s2(),[e]:t};return new Ou("auth","Firebase",a).create(e,{appName:s.name})}function Da(s){return a2(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q0(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return r2.create(s,...e)}function $e(s,e,...t){if(!s)throw Q0(e,...t)}function Aa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Vh(e),new Error(e)}function Ua(s,e){s||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function T3(){return d1()==="http:"||d1()==="https:"}function d1(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T3()||GA()||"connection"in navigator)?navigator.onLine:!0}function S3(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ua(t>e,"Short delay should be less than long delay!"),this.isMobile=qA()||YA()}get(){return E3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(s,e){Ua(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R3=new Yu(3e4,6e4);function Bi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ba(s,e,t,a,o={}){return l2(s,o,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const g=Mu({key:s.config.apiKey,...d}).slice(1),x=await s._getAdditionalHeaders();x["Content-Type"]="application/json",s.languageCode&&(x["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:x,...u};return KA()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&sa(s.emulatorConfig.host)&&(p.credentials="include"),i2.fetch()(await o2(s,s.config.apiHost,t,g),p)})}async function l2(s,e,t){s._canInitEmulator=!1;const a={...C3,...e};try{const o=new I3(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw jh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[x,p]=g.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(s,"credential-already-in-use",d);if(x==="EMAIL_EXISTS")throw jh(s,"email-already-in-use",d);if(x==="USER_DISABLED")throw jh(s,"user-disabled",d);const b=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw a2(s,b,p);jr(s,b)}}catch(o){if(o instanceof Tr)throw o;jr(s,"network-request-failed",{message:String(o)})}}async function Qu(s,e,t,a,o={}){const u=await Ba(s,e,t,a,o);return"mfaPendingCredential"in u&&jr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function o2(s,e,t,a){const o=`${e}${t}?${a}`,u=s,d=u.config.emulator?X0(s.config,o):`${s.config.apiScheme}://${o}`;return A3.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function k3(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class I3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Wr(this.auth,"network-request-failed")),R3.get())})}}function jh(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Wr(s,e,a);return o.customData._tokenResponse=t,o}function h1(s){return s!==void 0&&s.enterprise!==void 0}class D3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O3(s,e){return Ba(s,"GET","/v2/recaptchaConfig",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(s,e){return Ba(s,"POST","/v1/accounts:delete",e)}async function rf(s,e){return Ba(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c2(s,e=!1){const t=Tt(s),a=await t.getIdToken(e),o=W0(a);$e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:xu(op(o.auth_time)),issuedAtTime:xu(op(o.iat)),expirationTime:xu(op(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function op(s){return Number(s)*1e3}function W0(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=p_(t);return o?JSON.parse(o):(Vh("Failed to decode base64 JWT payload"),null)}catch(o){return Vh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function f1(s){const e=W0(s);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Tr&&V3(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function V3({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(s){var w;const e=s.auth,t=await s.getIdToken(),a=await $o(s,rf(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?d2(o.providerUserInfo):[],d=L3(s.providerData,u),g=s.isAnonymous,x=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),p=g?x:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new $p(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function u2(s){const e=Tt(s);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L3(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function d2(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(s,e){const t=await l2(s,{},async()=>{const a=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await o2(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:g,body:a};return s.emulatorConfig&&sa(s.emulatorConfig.host)&&(x.credentials="include"),i2.fetch()(d,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function z3(s,e){return Ba(s,"POST","/v2/accounts:revokeToken",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=f1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:u}=await U3(e,t);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:u}=t,d=new Ro;return a&&($e(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&($e(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&($e(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(s,e){$e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new P3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $p(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $o(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return c2(this,e)}reload(){return u2(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(Da(this.auth));const e=await this.getIdToken();return await $o(this,M3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,g=t.tenantId??void 0,x=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:O,providerData:V,stsTokenManager:$}=t;$e(w&&$,e,"internal-error");const z=Ro.fromJSON(this.name,$);$e(typeof w=="string",e,"internal-error"),vi(a,e.name),vi(o,e.name),$e(typeof N=="boolean",e,"internal-error"),$e(typeof O=="boolean",e,"internal-error"),vi(u,e.name),vi(d,e.name),vi(g,e.name),vi(x,e.name),vi(p,e.name),vi(b,e.name);const Q=new yr({uid:w,auth:e,email:o,emailVerified:N,displayName:a,isAnonymous:O,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:z,createdAt:p,lastLoginAt:b});return V&&Array.isArray(V)&&(Q.providerData=V.map(ae=>({...ae}))),x&&(Q._redirectEventId=x),Q}static async _fromIdTokenResponse(e,t,a=!1){const o=new Ro;o.updateFromServerResponse(t);const u=new yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await af(u),u}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];$e(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?d2(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new Ro;g.updateFromIdToken(a);const x=new yr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $p(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new Map;function Ra(s){Ua(s instanceof Function,"Expected a class definition");let e=m1.get(s);return e?(Ua(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,m1.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h2.type="NONE";const Kp=h2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(s,e,t){return`firebase:${s}:${e}:${t}`}class ko{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Ph(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ph("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rf(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new ko(Ra(Kp),e,a);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Ra(Kp);const d=Ph(a,e.config.apiKey,e.name);let g=null;for(const p of t)try{const b=await p._get(d);if(b){let w;if(typeof b=="string"){const N=await rf(e,{idToken:b}).catch(()=>{});if(!N)break;w=await yr._fromGetAccountInfoResponse(e,N,b)}else w=yr._fromJSON(e,b);p!==u&&(g=w),u=p;break}}catch{}const x=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new ko(u,e,a):(u=x[0],g&&await u._set(d,g.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new ko(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y2(e))return"Blackberry";if(b2(e))return"Webos";if(m2(e))return"Safari";if((e.includes("chrome/")||g2(e))&&!e.includes("edge/"))return"Chrome";if(x2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function f2(s=Xn()){return/firefox\//i.test(s)}function m2(s=Xn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g2(s=Xn()){return/crios\//i.test(s)}function p2(s=Xn()){return/iemobile/i.test(s)}function x2(s=Xn()){return/android/i.test(s)}function y2(s=Xn()){return/blackberry/i.test(s)}function b2(s=Xn()){return/webos/i.test(s)}function J0(s=Xn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function B3(s=Xn()){var e;return J0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function H3(){return QA()&&document.documentMode===10}function v2(s=Xn()){return J0(s)||x2(s)||b2(s)||y2(s)||/windows phone/i.test(s)||p2(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(s,e=[]){let t;switch(s){case"Browser":t=g1(Xn());break;case"Worker":t=`${g1(Xn())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=u=>new Promise((d,g)=>{try{const x=e(u);d(x)}catch(x){g(x)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(s,e={}){return Ba(s,"GET","/v2/passwordPolicy",Bi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=6;class K3{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p1(this),this.idTokenSubscription=new p1(this),this.beforeStateQueue=new F3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ra(t)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rf(this,{idToken:e}),a=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ps(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,x=await this.tryRedirectSignIn(e);(!d||d===g)&&(x!=null&&x.user)&&(a=x.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(Da(this));const t=e?Tt(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(Da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(Da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q3(this),t=new K3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await z3(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ra(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,a,o);return()=>{d=!0,x()}}else{const x=e.addObserver(t);return()=>{d=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&j3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Il(s){return Tt(s)}class p1{constructor(e){this.auth=e,this.observer=null,this.addObserver=s4(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y3(s){Lf=s}function _2(s){return Lf.loadJS(s)}function Q3(){return Lf.recaptchaEnterpriseScript}function X3(){return Lf.gapiScript}function W3(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class J3{constructor(){this.enterprise=new Z3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Z3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const e6="recaptcha-enterprise",N2="NO_RECAPTCHA";class t6{constructor(e){this.type=e6,this.auth=Il(e)}async verify(e="verify",t=!1){async function a(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{O3(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new D3(x);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(x=>{g(x)})})}function o(u,d,g){const x=window.grecaptcha;h1(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(N2)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J3().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(g=>{if(!t&&h1(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let x=Q3();x.length!==0&&(x+=g),_2(x).then(()=>{o(g,u,d)}).catch(p=>{d(p)})}}).catch(g=>{d(g)})})}}async function x1(s,e,t,a=!1,o=!1){const u=new t6(s);let d;if(o)d=N2;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const x=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const x=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Gp(s,e,t,a,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await x1(s,e,t,t==="getOobCode");return a(s,d)}else return a(s,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await x1(s,e,t,t==="getOobCode");return a(s,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(s,e){const t=Vu(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Ai(u,e??{}))return o;jr(o,"already-initialized")}return t.initialize({options:e})}function n6(s,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ra);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function T2(s,e,t){const a=Il(s);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=E2(e),{host:d,port:g}=s6(e),x=g===null?"":`:${g}`,p={url:`${u}//${d}${x}/`},b=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(Ai(p,a.config.emulator)&&Ai(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,sa(d)?(xf(`${u}//${d}${x}`),yf("Auth",!0)):r6()}function E2(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function s6(s){const e=E2(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:y1(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:y1(d)}}}function y1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function r6(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,t){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function a6(s,e){return Ba(s,"POST","/v1/accounts:update",e)}async function i6(s,e){return Ba(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(s,e){return Qu(s,"POST","/v1/accounts:signInWithPassword",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(s,e){return Qu(s,"POST","/v1/accounts:signInWithEmailLink",Bi(s,e))}async function c6(s,e){return Qu(s,"POST","/v1/accounts:signInWithEmailLink",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Uf{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ko(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Ko(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,t,"signInWithPassword",l6);case"emailLink":return o6(e,{email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,a,"signUpPassword",i6);case"emailLink":return c6(e,{idToken:t,email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(s,e){return Qu(s,"POST","/v1/accounts:signInWithIdp",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="http://localhost";class Pi extends Uf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=t;if(!a||!o)return null;const d=new Pi(a,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Io(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:u6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h6(s){const e=su(ru(s)).link,t=e?su(ru(e)).deep_link_id:null,a=su(ru(s)).deep_link_id;return(a?su(ru(a)).link:null)||a||t||e||s}class zf{constructor(e){const t=su(ru(e)),a=t.apiKey??null,o=t.oobCode??null,u=d6(t.mode??null);$e(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=h6(e);try{return new zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.providerId=Hi.PROVIDER_ID}static credential(e,t){return Ko._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=zf.parseLink(t);return $e(a,"argument-error"),Ko._fromEmailAndCode(e,a.code,a.tenantId)}}Hi.PROVIDER_ID="password";Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends S2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Xu{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";ja.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pi._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Ta.credential(t,a)}catch{return null}}}Ta.GOOGLE_SIGN_IN_METHOD="google.com";Ta.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Xu{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.GITHUB_SIGN_IN_METHOD="github.com";Ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Xu{constructor(){super("twitter.com")}static credential(e,t){return Pi._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Sa.credential(t,a)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(s,e){return Qu(s,"POST","/v1/accounts:signUp",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const u=await yr._fromIdTokenResponse(e,a,o),d=b1(a);return new _l({user:u,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=b1(a);return new _l({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function b1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Tr{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new lf(e,t,a,o)}}function C2(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(s,u,e,a):u})}async function m6(s,e,t=!1){const a=await $o(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return _l._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(s,e,t=!1){const{auth:a}=s;if(ps(a.app))return Promise.reject(Da(a));const o="reauthenticate";try{const u=await $o(s,C2(a,o,e,s),t);$e(u.idToken,a,"internal-error");const d=W0(u.idToken);$e(d,a,"internal-error");const{sub:g}=d;return $e(s.uid===g,a,"user-mismatch"),_l._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&jr(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(s,e,t=!1){if(ps(s.app))return Promise.reject(Da(s));const a="signIn",o=await C2(s,a,e),u=await _l._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(u.user),u}async function k2(s,e){return R2(Il(s),e)}async function I2(s,e){return A2(Tt(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(s){const e=Il(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function O2(s,e,t){if(ps(s.app))return Promise.reject(Da(s));const a=Il(s),d=await Gp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",f6).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&D2(s),x}),g=await _l._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(g.user),g}function M2(s,e,t){return ps(s.app)?Promise.reject(Da(s)):k2(Tt(s),Hi.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&D2(s),a})}function V2(s,e){return g6(Tt(s),null,e)}async function g6(s,e,t){const{auth:a}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(u.password=t);const d=await $o(s,a6(a,u));await s._updateTokensIfNecessary(d,!0)}function P2(s,e,t,a){return Tt(s).onIdTokenChanged(e,t,a)}function L2(s,e,t){return Tt(s).beforeAuthStateChanged(e,t)}function U2(s,e,t,a){return Tt(s).onAuthStateChanged(e,t,a)}function z2(s){return Tt(s).signOut()}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=1e3,x6=10;class H2 extends B2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,g,x)=>{this.notifyListeners(d,x)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);H3()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,x6):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},p6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}H2.type="LOCAL";const F2=H2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends B2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}q2.type="SESSION";const Z0=q2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new Bf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(d).map(async p=>p(t.origin,u)),x=await y6(g);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,x)=>{const p=ex("",20);o.port1.start();const b=setTimeout(()=>{x(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(w){const N=w;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(b),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function v6(s){Jr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function w6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _6(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function N6(){return $2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="firebaseLocalStorageDb",j6=1,cf="firebaseLocalStorage",G2="fbase_key";class Wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hf(s,e){return s.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function T6(){const s=indexedDB.deleteDatabase(K2);return new Wu(s).toPromise()}function Yp(){const s=indexedDB.open(K2,j6);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(cf,{keyPath:G2})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(cf)?e(a):(a.close(),await T6(),e(await Yp()))})})}async function v1(s,e,t){const a=Hf(s,!0).put({[G2]:e,value:t});return new Wu(a).toPromise()}async function E6(s,e){const t=Hf(s,!1).get(e),a=await new Wu(t).toPromise();return a===void 0?null:a.value}function w1(s,e){const t=Hf(s,!0).delete(e);return new Wu(t).toPromise()}const S6=800,C6=3;class Y2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>C6)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(N6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await w6(),!this.activeServiceWorker)return;this.sender=new b6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await v1(e,of,"1"),await w1(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>v1(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>E6(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>w1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Hf(o,!1).getAll();return new Wu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y2.type="LOCAL";const Q2=Y2;new Yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(s,e){return e?Ra(e):($e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx extends Uf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R6(s){return R2(s.auth,new tx(s),s.bypassAuthState)}function k6(s){const{auth:e,user:t}=s;return $e(t,e,"internal-error"),A2(t,new tx(s),s.bypassAuthState)}async function I6(s){const{auth:e,user:t}=s;return $e(t,e,"internal-error"),m6(t,new tx(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const x={auth:this.auth,requestUri:t,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(x))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R6;case"linkViaPopup":case"linkViaRedirect":return I6;case"reauthViaPopup":case"reauthViaRedirect":return k6;default:jr(this.auth,"internal-error")}}resolve(e){Ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Yu(2e3,1e4);class So extends X2{constructor(e,t,a,o,u){super(e,t,o,u),this.provider=a,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Ua(this.filter.length===1,"Popup operations only handle one event");const e=ex();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D6.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="pendingRedirect",Lh=new Map;class M6 extends X2{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Lh.get(this.auth._key());if(!e){try{const a=await V6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Lh.set(this.auth._key(),e)}return this.bypassAuthState||Lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V6(s,e){const t=U6(e),a=L6(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function P6(s,e){Lh.set(s._key(),e)}function L6(s){return Ra(s._redirectPersistence)}function U6(s){return Ph(O6,s.config.apiKey,s.name)}async function z6(s,e,t=!1){if(ps(s.app))return Promise.reject(Da(s));const a=Il(s),o=A6(a,e),d=await new M6(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=600*1e3;class H6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!W2(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B6&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function W2({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(s,e={}){return Ba(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K6=/^https?/;async function G6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await q6(s);for(const t of e)try{if(Y6(t))return}catch{}jr(s,"unauthorized-domain")}function Y6(s){const e=qp(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!K6.test(t))return!1;if($6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Yu(3e4,6e4);function N1(){const s=Jr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function X6(s){return new Promise((e,t)=>{var o,u,d;function a(){N1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N1(),t(Wr(s,"network-request-failed"))},timeout:Q6.get()})}if((u=(o=Jr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=Jr().gapi)!=null&&d.load)a();else{const g=W3("iframefcb");return Jr()[g]=()=>{gapi.load?a():t(Wr(s,"network-request-failed"))},_2(`${X3()}?onload=${g}`).catch(x=>t(x))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function W6(s){return Uh=Uh||X6(s),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=new Yu(5e3,15e3),Z6="__/auth/iframe",eI="emulator/auth/iframe",tI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sI(s){const e=s.config;$e(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?X0(e,eI):`https://${s.config.authDomain}/${Z6}`,a={apiKey:e.apiKey,appName:s.name,v:Sl},o=nI.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${t}?${Mu(a).slice(1)}`}async function rI(s){const e=await W6(s),t=Jr().gapi;return $e(t,s,"internal-error"),e.open({where:document.body,url:sI(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tI,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const d=Wr(s,"network-request-failed"),g=Jr().setTimeout(()=>{u(d)},J6.get());function x(){Jr().clearTimeout(g),o(a)}a.ping(x).then(x,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iI=500,lI=600,oI="_blank",cI="http://localhost";class j1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uI(s,e,t,a=iI,o=lI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const x={...aI,width:a.toString(),height:o.toString(),top:u,left:d},p=Xn().toLowerCase();t&&(g=g2(p)?oI:t),f2(p)&&(e=e||cI,x.scrollbars="yes");const b=Object.entries(x).reduce((N,[O,V])=>`${N}${O}=${V},`,"");if(B3(p)&&g!=="_self")return dI(e||"",g),new j1(null);const w=window.open(e||"",g,b);$e(w,s,"popup-blocked");try{w.focus()}catch{}return new j1(w)}function dI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="__/auth/handler",fI="emulator/auth/handler",mI=encodeURIComponent("fac");async function T1(s,e,t,a,o,u){$e(s.config.authDomain,s,"auth-domain-config-required"),$e(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:Sl,eventId:o};if(e instanceof S2){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",n4(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(e instanceof Xu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const x=await s._getAppCheckToken(),p=x?`#${mI}=${encodeURIComponent(x)}`:"";return`${gI(s)}?${Mu(g).slice(1)}${p}`}function gI({config:s}){return s.emulator?X0(s,fI):`https://${s.authDomain}/${hI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="webStorageSupport";class pI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z0,this._completeRedirectFn=z6,this._overrideRedirectResult=P6}async _openPopup(e,t,a,o){var d;Ua((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await T1(e,t,a,qp(),o);return uI(e,u,ex())}async _openRedirect(e,t,a,o){await this._originValidation(e);const u=await T1(e,t,a,qp(),o);return v6(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Ua(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await rI(e),a=new H6(e);return t.register("authEvent",o=>($e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cp,{type:cp},o=>{var d;const u=(d=o==null?void 0:o[0])==null?void 0:d[cp];u!==void 0&&t(!!u),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v2()||m2()||J0()}}const J2=pI;var E1="@firebase/auth",S1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bI(s){Ri(new Ma("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;$e(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w2(s)},p=new G3(a,o,u,x);return n6(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ri(new Ma("auth-internal",e=>{const t=Il(e.getProvider("auth").getImmediate());return(a=>new xI(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(E1,S1,yI(s)),er(E1,S1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=300,wI=b_("authIdTokenMaxAge")||vI;let C1=null;const _I=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>wI)return;const o=t==null?void 0:t.token;C1!==o&&(C1=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Cu(s=bf()){const e=Vu(s,"auth");if(e.isInitialized())return e.getImmediate();const t=j2(s,{popupRedirectResolver:J2,persistence:[Q2,F2,Z0]}),a=b_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=_I(u.toString());L2(t,d,()=>d(t.currentUser)),P2(t,g=>d(g))}}const o=x_("auth");return o&&T2(t,`http://${o}`),t}function NI(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}Y3({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=Wr("internal-error");u.customData=o,t(u)},a.type="text/javascript",a.charset="UTF-8",NI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bI("Browser");const jI=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:zf,AuthCredential:Uf,EmailAuthCredential:Ko,EmailAuthProvider:Hi,FacebookAuthProvider:ja,GithubAuthProvider:Ea,GoogleAuthProvider:Ta,OAuthCredential:Pi,TwitterAuthProvider:Sa,beforeAuthStateChanged:L2,browserLocalPersistence:F2,browserPopupRedirectResolver:J2,browserSessionPersistence:Z0,connectAuthEmulator:T2,createUserWithEmailAndPassword:O2,getAuth:Cu,getIdTokenResult:c2,inMemoryPersistence:Kp,indexedDBLocalPersistence:Q2,initializeAuth:j2,onAuthStateChanged:U2,onIdTokenChanged:P2,prodErrorMap:s2,reauthenticateWithCredential:I2,reload:u2,signInWithCredential:k2,signInWithEmailAndPassword:M2,signOut:z2,updatePassword:V2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="type.googleapis.com/google.protobuf.Int64Value",EI="type.googleapis.com/google.protobuf.UInt64Value";function Z2(s,e){const t={};for(const a in s)s.hasOwnProperty(a)&&(t[a]=e(s[a]));return t}function uf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>uf(e));if(typeof s=="function"||typeof s=="object")return Z2(s,e=>uf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Go(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case TI:case EI:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Go(e)):typeof s=="function"||typeof s=="object"?Z2(s,e=>Go(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ns extends Tr{constructor(e,t,a){super(`${nx}/${e}`,t||""),this.details=a,Object.setPrototypeOf(this,ns.prototype)}}function SI(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function df(s,e){let t=SI(s),a=t,o;try{const u=e&&e.error;if(u){const d=u.status;if(typeof d=="string"){if(!A1[d])return new ns("internal","internal");t=A1[d],a=d}const g=u.message;typeof g=="string"&&(a=g),o=u.details,o!==void 0&&(o=Go(o))}}catch{}return t==="ok"?null:new ns(t,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ps(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||t.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o==null||o.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="us-central1",AI=/^data: (.*?)(?:\n|$)/;function RI(s){let e=null;return{promise:new Promise((t,a)=>{e=setTimeout(()=>{a(new ns("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class kI{constructor(e,t,a,o,u=Qp,d=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new CI(e,t,a,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Qp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function II(s,e,t){const a=sa(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${t}`,a&&(xf(s.emulatorOrigin+"/backends"),yf("Functions",!0))}function DI(s,e,t){const a=o=>MI(s,e,o,t||{});return a.stream=(o,u)=>PI(s,e,o,u),a}function ej(s){return s.emulatorOrigin&&sa(s.emulatorOrigin)?"include":void 0}async function OI(s,e,t,a,o){t["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:ej(o)})}catch{return{status:0,json:null}}let d=null;try{d=await u.json()}catch{}return{status:u.status,json:d}}async function tj(s,e){const t={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(t.Authorization="Bearer "+a.authToken),a.messagingToken&&(t["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=a.appCheckToken),t}function MI(s,e,t,a){const o=s._url(e);return VI(s,o,t,a)}async function VI(s,e,t,a){t=uf(t);const o={data:t},u=await tj(s,a),d=a.timeout||7e4,g=RI(d),x=await Promise.race([OI(e,o,u,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!x)throw new ns("cancelled","Firebase Functions instance was deleted.");const p=df(x.status,x.json);if(p)throw p;if(!x.json)throw new ns("internal","Response is not valid JSON object.");let b=x.json.data;if(typeof b>"u"&&(b=x.json.result),typeof b>"u")throw new ns("internal","Response is missing data field.");return{data:Go(b)}}function PI(s,e,t,a){const o=s._url(e);return LI(s,o,t,a||{})}async function LI(s,e,t,a){var N;t=uf(t);const o={data:t},u=await tj(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:a==null?void 0:a.signal,credentials:ej(s)})}catch(O){if(O instanceof Error&&O.name==="AbortError"){const $=new ns("cancelled","Request was cancelled.");return{data:Promise.reject($),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject($)}}}}}}const V=df(0,null);return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}let g,x;const p=new Promise((O,V)=>{g=O,x=V});(N=a==null?void 0:a.signal)==null||N.addEventListener("abort",()=>{const O=new ns("cancelled","Request was cancelled.");x(O)});const b=d.body.getReader(),w=UI(b,g,x,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const O=w.getReader();return{async next(){const{value:V,done:$}=await O.read();return{value:V,done:$}},async return(){return await O.cancel(),{done:!0,value:void 0}}}}},data:p}}function UI(s,e,t,a){const o=(d,g)=>{const x=d.match(AI);if(!x)return;const p=x[1];try{const b=JSON.parse(p);if("result"in b){e(Go(b.result));return}if("message"in b){g.enqueue(Go(b.message));return}if("error"in b){const w=df(0,b);g.error(w),t(w);return}}catch(b){if(b instanceof ns){g.error(b),t(b);return}}},u=new TextDecoder;return new ReadableStream({start(d){let g="";return x();async function x(){if(a!=null&&a.aborted){const p=new ns("cancelled","Request was cancelled");return d.error(p),t(p),Promise.resolve()}try{const{value:p,done:b}=await s.read();if(b){g.trim()&&o(g.trim(),d),d.close();return}if(a!=null&&a.aborted){const N=new ns("cancelled","Request was cancelled");d.error(N),t(N),await s.cancel();return}g+=u.decode(p,{stream:!0});const w=g.split(`
`);g=w.pop()||"";for(const N of w)N.trim()&&o(N.trim(),d);return x()}catch(p){const b=p instanceof ns?p:df(0,null);d.error(b),t(b)}}},cancel(){return s.cancel()}})}const R1="@firebase/functions",k1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="auth-internal",BI="app-check-internal",HI="messaging-internal";function FI(s){const e=(t,{instanceIdentifier:a})=>{const o=t.getProvider("app").getImmediate(),u=t.getProvider(zI),d=t.getProvider(HI),g=t.getProvider(BI);return new kI(o,u,d,g,a)};Ri(new Ma(nx,e,"PUBLIC").setMultipleInstances(!0)),er(R1,k1,s),er(R1,k1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(s=bf(),e=Qp){const a=Vu(Tt(s),nx).getImmediate({identifier:e}),o=l0("functions");return o&&sj(a,...o),a}function sj(s,e,t){II(Tt(s),e,t)}function qI(s,e,t){return DI(Tt(s),e,t)}FI();const rj=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:ns,connectFunctionsEmulator:sj,getFunctions:nj,httpsCallable:qI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="firebasestorage.googleapis.com",ij="storageBucket",$I=120*1e3,KI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends Tr{constructor(e,t,a=0){super(up(e),`Firebase Storage: ${t} (${up(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rn||(rn={}));function up(s){return"storage/"+s}function sx(){const s="An unknown error occurred, please check the error payload for server response.";return new an(rn.UNKNOWN,s)}function GI(s){return new an(rn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function YI(s){return new an(rn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function QI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(rn.UNAUTHENTICATED,s)}function XI(){return new an(rn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WI(s){return new an(rn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function JI(){return new an(rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZI(){return new an(rn.CANCELED,"User canceled the upload/download.")}function eD(s){return new an(rn.INVALID_URL,"Invalid URL '"+s+"'.")}function tD(s){return new an(rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function nD(){return new an(rn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ij+"' property when initializing the app?")}function sD(){return new an(rn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rD(){return new an(rn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aD(s){return new an(rn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xp(s){return new an(rn.INVALID_ARGUMENT,s)}function lj(){return new an(rn.APP_DELETED,"The Firebase app was deleted.")}function iD(s){return new an(rn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yu(s,e){return new an(rn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function nu(s){throw new an(rn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=Vs.makeFromUrl(e,t)}catch{return new Vs(e,"")}if(a.path==="")return a;throw tD(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+o+d,"i"),x={bucket:1,path:3};function p(H){H.path_=decodeURIComponent(H.path)}const b="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",O=new RegExp(`^https?://${w}/${b}/b/${o}/o${N}`,"i"),V={bucket:1,path:3},$=t===aj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",Q=new RegExp(`^https?://${$}/${o}/${z}`,"i"),K=[{regex:g,indices:x,postModify:u},{regex:O,indices:V,postModify:p},{regex:Q,indices:{bucket:1,path:2},postModify:p}];for(let H=0;H<K.length;H++){const ce=K[H],be=ce.regex.exec(e);if(be){const E=be[ce.indices.bucket];let S=be[ce.indices.path];S||(S=""),a=new Vs(E,S),ce.postModify(a);break}}if(a==null)throw eD(e);return a}}class lD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(s,e,t){let a=1,o=null,u=null,d=!1,g=0;function x(){return g===2}let p=!1;function b(...z){p||(p=!0,e.apply(null,z))}function w(z){o=setTimeout(()=>{o=null,s(O,x())},z)}function N(){u&&clearTimeout(u)}function O(z,...Q){if(p){N();return}if(z){N(),b.call(null,z,...Q);return}if(x()||d){N(),b.call(null,z,...Q);return}a<64&&(a*=2);let K;g===1?(g=2,K=0):K=(a+Math.random())*1e3,w(K)}let V=!1;function $(z){V||(V=!0,N(),!p&&(o!==null?(z||(g=2),clearTimeout(o),w(0)):z||(g=1)))}return w(0),u=setTimeout(()=>{d=!0,$(!0)},t),$}function cD(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(s){return s!==void 0}function dD(s){return typeof s=="object"&&!Array.isArray(s)}function rx(s){return typeof s=="string"||s instanceof String}function I1(s){return ax()&&s instanceof Blob}function ax(){return typeof Blob<"u"}function D1(s,e,t,a){if(a<e)throw Xp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw Xp(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function oj(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var yl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(yl||(yl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t,a,o,u,d,g,x,p,b,w,N=!0,O=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=x,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,$)=>{this.resolve_=V,this.reject_=$,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Th(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=g=>{const x=g.loaded,p=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,p)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const g=u.getErrorCode()===yl.NO_ERROR,x=u.getStatus();if(!g||hD(x,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===yl.ABORT;a(!1,new Th(!1,null,b));return}const p=this.successCodes_.indexOf(x)!==-1;a(!0,new Th(p,u))})},t=(a,o)=>{const u=this.resolve_,d=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const x=this.callback_(g,g.getResponse());uD(x)?u(x):u()}catch(x){d(x)}else if(g!==null){const x=sx();x.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,x)):d(x)}else if(o.canceled){const x=this.appDelete_?lj():ZI();d(x)}else{const x=JI();d(x)}};this.canceled_?t(!1,new Th(!1,null,!0)):this.backoffId_=oD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function mD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function gD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function xD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function yD(s,e,t,a,o,u,d=!0,g=!1){const x=oj(s.urlParams),p=s.url+x,b=Object.assign({},s.headers);return pD(b,e),mD(b,t),gD(b,u),xD(b,a),new fD(p,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vD(...s){const e=bD();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(ax())return new Blob(s);throw new an(rn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(s){if(typeof atob>"u")throw aD("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dp{constructor(e,t){this.data=e,this.contentType=t||null}}function ND(s,e){switch(s){case Kr.RAW:return new dp(cj(e));case Kr.BASE64:case Kr.BASE64URL:return new dp(uj(s,e));case Kr.DATA_URL:return new dp(TD(e),ED(e))}throw sx()}function cj(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=a,d=s.charCodeAt(++t);a=65536|(u&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function jD(s){let e;try{e=decodeURIComponent(s)}catch{throw yu(Kr.DATA_URL,"Malformed data URL.")}return cj(e)}function uj(s,e){switch(s){case Kr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw yu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw yu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=_D(e)}catch(o){throw o.message.includes("polyfill")?o:yu(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class dj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw yu(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=SD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function TD(s){const e=new dj(s);return e.base64?uj(Kr.BASE64,e.rest):jD(e.rest)}function ED(s){return new dj(s).contentType}function SD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){let a=0,o="";I1(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(I1(this.data_)){const a=this.data_,o=wD(a,e,t);return o===null?null:new wi(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new wi(a,!0)}}static getBlob(...e){if(ax()){const t=e.map(a=>a instanceof wi?a.data_:a);return new wi(vD.apply(null,t))}else{const t=e.map(d=>rx(d)?ND(Kr.RAW,d).data:d.data_);let a=0;t.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let u=0;return t.forEach(d=>{for(let g=0;g<d.length;g++)o[u++]=d[g]}),new wi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(s){let e;try{e=JSON.parse(s)}catch{return null}return dD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function AD(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function fj(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(s,e){return e}class ts{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||RD}}let Eh=null;function kD(s){return!rx(s)||s.length<2?s:fj(s)}function mj(){if(Eh)return Eh;const s=[];s.push(new ts("bucket")),s.push(new ts("generation")),s.push(new ts("metageneration")),s.push(new ts("name","fullPath",!0));function e(u,d){return kD(d)}const t=new ts("name");t.xform=e,s.push(t);function a(u,d){return d!==void 0?Number(d):d}const o=new ts("size");return o.xform=a,s.push(o),s.push(new ts("timeCreated")),s.push(new ts("updated")),s.push(new ts("md5Hash",null,!0)),s.push(new ts("cacheControl",null,!0)),s.push(new ts("contentDisposition",null,!0)),s.push(new ts("contentEncoding",null,!0)),s.push(new ts("contentLanguage",null,!0)),s.push(new ts("contentType",null,!0)),s.push(new ts("metadata","customMetadata",!0)),Eh=s,Eh}function ID(s,e){function t(){const a=s.bucket,o=s.fullPath,u=new Vs(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function DD(s,e,t){const a={};a.type="file";const o=t.length;for(let u=0;u<o;u++){const d=t[u];a[d.local]=d.xform(a,e[d.server])}return ID(a,s),a}function gj(s,e,t){const a=hj(e);return a===null?null:DD(s,a,t)}function OD(s,e,t,a){const o=hj(e);if(o===null||!rx(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(p=>{const b=s.bucket,w=s.fullPath,N="/b/"+d(b)+"/o/"+d(w),O=ix(N,t,a),V=oj({alt:"media",token:p});return O+V})[0]}function MD(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}class pj{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(s){if(!s)throw sx()}function VD(s,e){function t(a,o){const u=gj(s,o,e);return xj(u!==null),u}return t}function PD(s,e){function t(a,o){const u=gj(s,o,e);return xj(u!==null),OD(u,o,s.host,s._protocol)}return t}function yj(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=XI():o=QI():t.getStatus()===402?o=YI(s.bucket):t.getStatus()===403?o=WI(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function LD(s){const e=yj(s);function t(a,o){let u=e(a,o);return a.getStatus()===404&&(u=GI(s.path)),u.serverResponse=o.serverResponse,u}return t}function UD(s,e,t){const a=e.fullServerUrl(),o=ix(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,g=new pj(o,u,PD(s,t),d);return g.errorHandler=LD(e),g}function zD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function BD(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=zD(null,e)),a}function HD(s,e,t,a,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function g(){let K="";for(let H=0;H<2;H++)K=K+Math.random().toString().slice(2);return K}const x=g();d["Content-Type"]="multipart/related; boundary="+x;const p=BD(e,a,o),b=MD(p,t),w="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+x+`\r
Content-Type: `+p.contentType+`\r
\r
`,N=`\r
--`+x+"--",O=wi.getBlob(w,a,N);if(O===null)throw sD();const V={name:p.fullPath},$=ix(u,s.host,s._protocol),z="POST",Q=s.maxUploadRetryTime,ae=new pj($,z,VD(s,t),Q);return ae.urlParams=V,ae.headers=d,ae.body=O.uploadData(),ae.errorHandler=yj(e),ae}class FD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,u){if(this.sent_)throw nu("cannot .send() more than once");if(sa(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qD extends FD{initXhr(){this.xhr_.responseType="text"}}function bj(){return new qD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this._service=e,t instanceof Vs?this._location=t:this._location=Vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nl(e,t)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fj(this._location.path)}get storage(){return this._service}get parent(){const e=CD(this._location.path);if(e===null)return null;const t=new Vs(this._location.bucket,e);return new Nl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iD(e)}}function $D(s,e,t){s._throwIfRoot("uploadBytes");const a=HD(s.storage,s._location,mj(),new wi(e,!0),t);return s.storage.makeRequestWithTokens(a,bj).then(o=>({metadata:o,ref:s}))}function KD(s){s._throwIfRoot("getDownloadURL");const e=UD(s.storage,s._location,mj());return s.storage.makeRequestWithTokens(e,bj).then(t=>{if(t===null)throw rD();return t})}function GD(s,e){const t=AD(s._location.path,e),a=new Vs(s._location.bucket,t);return new Nl(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(s){return/^[A-Za-z]+:\/\//.test(s)}function QD(s,e){return new Nl(s,e)}function vj(s,e){if(s instanceof lx){const t=s;if(t._bucket==null)throw nD();const a=new Nl(t,t._bucket);return e!=null?vj(a,e):a}else return e!==void 0?GD(s,e):s}function XD(s,e){if(e&&YD(e)){if(s instanceof lx)return QD(s,e);throw Xp("To use ref(service, url), the first argument must be a Storage instance.")}else return vj(s,e)}function O1(s,e){const t=e==null?void 0:e[ij];return t==null?null:Vs.makeFromBucketSpec(t,s)}function WD(s,e,t,a={}){s.host=`${e}:${t}`;const o=sa(e);o&&(xf(`https://${s.host}/b`),yf("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:v_(u,s.app.options.projectId))}class lx{constructor(e,t,a,o,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=aj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$I,this._maxUploadRetryTime=KI,this._requests=new Set,o!=null?this._bucket=Vs.makeFromBucketSpec(o,this._host):this._bucket=O1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vs.makeFromBucketSpec(this._url,e):this._bucket=O1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nl(this,e)}_makeRequest(e,t,a,o,u=!0){if(this._deleted)return new lD(lj());{const d=yD(e,this._appId,a,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const M1="@firebase/storage",V1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="storage";function tr(s,e,t){return s=Tt(s),$D(s,e,t)}function nr(s){return s=Tt(s),KD(s)}function sr(s,e){return s=Tt(s),XD(s,e)}function JD(s=bf(),e){s=Tt(s);const a=Vu(s,wj).getImmediate({identifier:e}),o=l0("storage");return o&&ZD(a,...o),a}function ZD(s,e,t,a={}){WD(s,e,t,a)}function eO(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new lx(t,a,o,e,Sl)}function tO(){Ri(new Ma(wj,eO,"PUBLIC").setMultipleInstances(!0)),er(M1,V1,""),er(M1,V1,"esm2020")}tO();const ox={apiKey:"AIzaSyAfqqFbf2AVCOOm8Trm57qTSpWoAk-Jbx4",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},Ff=u0(ox),Se=h3(Ff),zh=Cu(Ff),nO=nj(Ff),Ps=JD(Ff),_j=Object.freeze(Object.defineProperty({__proto__:null,auth:zh,db:Se,firebaseConfig:ox,functions:nO,storage:Ps},Symbol.toStringTag,{value:"Module"})),Nj=j.createContext(void 0),sO=({children:s})=>{const[e,t]=j.useState(null),[a,o]=j.useState(!0);j.useEffect(()=>{const g=U2(zh,async x=>{if(x)try{const p=Be(Se,"users",x.uid),b=await wr(p);if(b.exists())t({id:b.id,...b.data()});else if(x.email){const w=Nn(jt(Se,"users"),Us("email","==",x.email)),N=await _r(w);if(N.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),t(null);else{const O=N.docs[0].data();t({id:N.docs[0].id,...O})}}else t(null)}catch(p){console.error("Error fetching user data:",p),t(null)}else t(null);o(!1)});return()=>g()},[]);const u=async(g,x)=>{try{if(!x)throw new Error("Password is required for Firebase Auth");let p=g;if(!g.includes("@"))try{const{httpsCallable:b}=await du(async()=>{const{httpsCallable:$}=await Promise.resolve().then(()=>rj);return{httpsCallable:$}},[]),{functions:w}=await du(async()=>{const{functions:$}=await Promise.resolve().then(()=>_j);return{functions:$}},void 0);p=(await b(w,"getEmailByUsername")({username:g})).data.email}catch(b){console.error("Username lookup failed:",b);const w=Nn(jt(Se,"users"),Us("username","==",g)),N=await _r(w);if(N.empty)return console.error("Username not found"),!1;const O=N.docs[0].data();O.email&&(p=O.email)}return await M2(zh,p,x),!0}catch(p){return console.error("Login failed:",p),!1}},d=async()=>{try{await z2(zh),t(null)}catch(g){console.error("Logout failed:",g)}};return i.jsx(Nj.Provider,{value:{user:e,login:u,logout:d,isAuthenticated:!!e,loading:a},children:!a&&s})},bs=()=>{const s=j.useContext(Nj);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},jj=j.createContext(void 0),rO=({toasts:s,removeToast:e})=>i.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:s.map(t=>i.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[i.jsxs("div",{className:"p-4 flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(uu,{className:"h-4 w-4 text-green-600"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900",children:t.message}),t.subMessage&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.subMessage})]}),i.jsx("button",{onClick:()=>e(t.id),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Jt,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"h-1 w-full bg-gray-100",children:i.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),i.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},t.id))}),aO=s=>{const e=new Date(s),a=Math.floor((new Date().getTime()-e.getTime())/1e3);return a<60?"Va xong":a<3600?`${Math.floor(a/60)} pht trc`:a<86400?`${Math.floor(a/3600)} gi trc`:`${Math.floor(a/86400)} ngy trc`},iO=({children:s})=>{const{user:e}=bs(),[t,a]=j.useState([]),[o,u]=j.useState([]);j.useEffect(()=>{const N=setTimeout(()=>{d("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(N)},[]),j.useEffect(()=>{if(!e){u([]);return}const N=Nn(jt(Se,"notifications"),Us("receivers","array-contains",e.id),tc("createdAt","desc")),O=rr(N,V=>{const $=V.docs.map(z=>{var ae;const Q=z.data();return{id:z.id,type:Q.type,user:Q.senderName,avatar:Q.senderAvatar,content:Q.message.replace(Q.senderName,"").trim(),time:aO(Q.createdAt),isRead:Q.isRead,fileType:(ae=Q.metadata)==null?void 0:ae.fileType,targetPath:Q.targetPath}});u($)});return()=>O()},[e]);const d=(N,O="",V="success")=>{const $=Date.now().toString();a(z=>[...z,{id:$,message:N,subMessage:O,type:V}]),setTimeout(()=>{a(z=>z.filter(Q=>Q.id!==$))},3e3)},g=N=>{a(O=>O.filter(V=>V.id!==N))},x=async N=>{u(O=>O.map(V=>V.id===N?{...V,isRead:!0}:V));try{const O=Be(Se,"notifications",N);await Qt(O,{isRead:!0})}catch(O){console.error("Error marking notification as read:",O)}},p=async()=>{u(O=>O.map(V=>({...V,isRead:!0}))),o.filter(O=>!O.isRead).map(O=>O.id).forEach(async O=>{try{await Qt(Be(Se,"notifications",O),{isRead:!0})}catch(V){console.error(V)}})},b=N=>{u(O=>O.filter(V=>V.id!==N))},w=o.filter(N=>!N.isRead).length;return i.jsxs(jj.Provider,{value:{addToast:d,notifications:o,markAsRead:x,markAllAsRead:p,removeNotification:b,unreadCount:w},children:[s,i.jsx(rO,{toasts:t,removeToast:g})]})},Er=()=>{const s=j.useContext(jj);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},lO=({isOpen:s,onClose:e})=>{const[t,a]=j.useState(""),[o,u]=j.useState(""),[d,g]=j.useState(""),[x,p]=j.useState(!1),[b,w]=j.useState(!1),[N,O]=j.useState(!1),{addToast:V}=Er();if(!s)return null;const $=async z=>{if(z.preventDefault(),o!==d){V("Mt khu mi khng khp!","error");return}if(o.length<6){V("Mt khu mi phi c t nht 6 k t.","error");return}O(!0);try{const ae=Cu().currentUser;if(ae&&ae.email){const K=Hi.credential(ae.email,t);await I2(ae,K),await V2(ae,o),V("i mt khu thnh cng!","success"),e(),a(""),u(""),g("")}else V("Khng tm thy thng tin ngi dng.","error")}catch(Q){console.error("Error changing password:",Q),Q.code==="auth/wrong-password"?V("Mt khu hin ti khng ng.","error"):Q.code==="auth/too-many-requests"?V("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):V(`Li: ${Q.message}`,"error")}finally{O(!1)}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Oo,{className:"h-5 w-5"}),"i mt khu"]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("form",{onSubmit:$,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:t,onChange:z=>a(z.target.value),placeholder:"Nhp mt khu hin ti..."}),i.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:x?i.jsx(pp,{className:"h-4 w-4"}):i.jsx(bl,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:b?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:z=>u(z.target.value),placeholder:"Nhp mt khu mi..."}),i.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:b?i.jsx(pp,{className:"h-4 w-4"}):i.jsx(bl,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),i.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:d,onChange:z=>g(z.target.value),placeholder:"Nhp li mt khu mi..."})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:N,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},oO=({isOpen:s,onClose:e})=>{const{user:t}=bs(),{addToast:a}=Er(),[o,u]=j.useState(""),[d,g]=j.useState(""),[x,p]=j.useState(""),[b,w]=j.useState(""),[N,O]=j.useState(""),[V,$]=j.useState(!1),[z,Q]=j.useState(!1),[ae,K]=j.useState(!1),H=j.useRef(null),ce=j.useRef(null);if(j.useEffect(()=>{t&&s&&(u(t.fullName||""),g(t.phone||""),p(t.address||""),w(t.avatar||""),O(t.signatureUrl||""))},[t,s]),!s)return null;const be=async M=>{var Te;const R=(Te=M.target.files)==null?void 0:Te[0];if(!(!R||!t)){if(!R.type.startsWith("image/")){a("Vui lng chn file nh!","","error");return}if(R.size>2*1024*1024){a("Kch thc nh ti a l 2MB!","","error");return}Q(!0);try{const _e=sr(Ps,`avatars/${t.id}/${Date.now()}_${R.name}`);await tr(_e,R);const J=await nr(_e);w(J),a("Ti nh i din thnh cng!","","success")}catch(_e){console.error("Error uploading avatar:",_e),a("Li khi ti nh i din!","","error")}finally{Q(!1)}}},E=async M=>{var Te;const R=(Te=M.target.files)==null?void 0:Te[0];if(!(!R||!t)){if(R.type!=="image/png"){a("Vui lng chn file PNG cho ch k ( c nn trong sut)!","","error");return}if(R.size>1*1024*1024){a("Kch thc ch k ti a l 1MB!","","error");return}K(!0);try{const _e=sr(Ps,`signatures/${t.id}/signature.png`);await tr(_e,R,{contentType:"image/png"});const J=await nr(_e);O(J),a("Ti ch k thnh cng!","","success")}catch(_e){console.error("Error uploading signature:",_e),a("Li khi ti ch k!","","error")}finally{K(!1)}}},S=()=>{O(""),a(" xa ch k!","","success")},C=async M=>{if(M.preventDefault(),!!t){if(!o.trim()){a("H v tn khng c  trng!","","error");return}$(!0);try{const R=Be(Se,"users",t.id);await Qt(R,{fullName:o.trim(),phone:d.trim(),address:x.trim(),avatar:b,signatureUrl:N}),a("Cp nht thng tin thnh cng!","","success"),e(),window.location.reload()}catch(R){console.error("Error updating profile:",R),a("Li khi cp nht thng tin!","","error")}finally{$(!1)}}},D=M=>M?M.charAt(0).toUpperCase():"U",k=M=>{switch(M){case"admin":return"bg-red-100 text-red-700 border-red-200";case"head_teacher":return"bg-blue-100 text-blue-700 border-blue-200";case"office_head":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"teacher":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"staff":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(xr,{className:"h-5 w-5"}),"Thng tin ti khon"]}),i.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative group",children:[b?i.jsx("img",{src:b,alt:o,className:"h-24 w-24 rounded-full object-cover border-4 border-blue-100 shadow-lg"}):i.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold border-4 border-blue-100 shadow-lg",children:D(o)}),i.jsx("button",{type:"button",onClick:()=>{var M;return(M=H.current)==null?void 0:M.click()},disabled:z,className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:z?i.jsx(Ni,{className:"h-6 w-6 text-white animate-spin"}):i.jsx(iC,{className:"h-6 w-6 text-white"})}),i.jsx("input",{type:"file",ref:H,onChange:be,accept:"image/*",className:"hidden"})]}),i.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${k(t==null?void 0:t.role)}`,children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(o_,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"truncate",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(xr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:t==null?void 0:t.username})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nhm"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(Fh,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:(t==null?void 0:t.group)||"Cha cp nht"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Trng thi"}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${(t==null?void 0:t.status)==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(t==null?void 0:t.status)==="active"?"Hot ng":"Khng hot ng"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(xr,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:M=>u(M.target.value),placeholder:"Nhp h v tn..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S in thoi"}),i.jsxs("div",{className:"relative",children:[i.jsx(u_,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"tel",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:d,onChange:M=>g(M.target.value),placeholder:"Nhp s in thoi..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"a ch"}),i.jsxs("div",{className:"relative",children:[i.jsx(ZC,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:x,onChange:M=>p(M.target.value),placeholder:"Nhp a ch..."})]})]})]}),i.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Os,{className:"h-5 w-5 text-indigo-600"}),i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ch k in t"})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Ti ln nh ch k nh dng PNG vi nn trong sut. Ch k s c s dng khi chn vo ti liu Word."}),N?i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"relative inline-block rounded-lg border-2 border-dashed border-indigo-200 p-2",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:[i.jsx("img",{src:N,alt:"Ch k",className:"max-h-20 max-w-full object-contain"}),i.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",title:"Xa ch k",children:i.jsx(En,{className:"h-3 w-3"})})]})}):i.jsx("div",{className:"mb-3 flex items-center justify-center h-20 rounded-lg border-2 border-dashed border-indigo-200",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:i.jsx("span",{className:"text-sm text-gray-400",children:"Cha c ch k"})}),i.jsx("button",{type:"button",onClick:()=>{var M;return(M=ce.current)==null?void 0:M.click()},disabled:ae,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-700 bg-white border border-indigo-300 rounded-lg hover:bg-indigo-50 transition-colors disabled:opacity-50",children:ae?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang ti..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Os,{className:"h-4 w-4"})," ",N?"Thay i ch k":"Ti ln ch k"]})}),i.jsx("input",{type:"file",ref:ce,onChange:E,accept:"image/png",className:"hidden"})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-100",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:V,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:V?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang lu..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},cO=()=>{const s=za(),e=ar(),{user:t,logout:a}=bs(),{notifications:o,unreadCount:u,markAllAsRead:d,markAsRead:g,removeNotification:x}=Er(),[p,b]=j.useState(!1),[w,N]=j.useState(!1),[O,V]=j.useState(!1),[$,z]=j.useState(!1),[Q,ae]=j.useState(""),[K,H]=j.useState(""),ce=j.useRef(null),be=j.useRef(null);if(j.useEffect(()=>{const k=M=>{ce.current&&!ce.current.contains(M.target)&&b(!1),be.current&&!be.current.contains(M.target)&&N(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]),j.useEffect(()=>{(async()=>{try{const M=Be(Se,"app_settings","system_logo"),R=await wr(M);R.exists()&&R.data().imageUrl&&ae(R.data().imageUrl);const Te=Be(Se,"app_settings","certification_logo"),_e=await wr(Te);_e.exists()&&_e.data().imageUrl&&H(_e.data().imageUrl)}catch(M){console.error("Error fetching logo:",M)}})()},[]),s.pathname==="/login")return null;const E=async()=>{await a(),e("/login")},S=k=>k?k.charAt(0).toUpperCase():"U",C=k=>{switch(k){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},D=k=>{switch(k){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return i.jsxs("header",{className:`sticky top-0 z-50 w-full ${D(t==null?void 0:t.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-20",children:[i.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[i.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:Q?i.jsx("img",{src:Q,alt:"Logo",className:"h-8 w-8 object-contain"}):i.jsx(r0,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:f_}),i.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),K&&i.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:i.jsx("img",{src:K,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[i.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[i.jsx(El,{className:"h-5 w-5 text-white/70"}),i.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),i.jsxs("div",{className:"relative",ref:be,children:[i.jsxs("button",{onClick:()=>N(!w),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${u>0?"animate-wiggle":""}`,children:[i.jsx(Kv,{className:`h-6 w-6 ${w?"text-white":""} group-hover:scale-110 transition-transform`}),u>0&&i.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:u})]}),w&&i.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),u>0&&i.jsxs("button",{onClick:d,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[i.jsx(uu,{className:"h-3 w-3"})," nh du  c"]})]}),i.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[o.map(k=>i.jsxs("div",{onClick:()=>{if(g(k.id),x(k.id),k.targetPath){const M=k.targetPath.includes("highlight=");let R=k.targetPath;if(!M){const Te=k.targetPath.includes("?")?"&":"?";R=`${k.targetPath}${Te}highlight=true`}e(R),N(!1)}},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${k.isRead?"bg-white":"bg-blue-50/40"}`,children:[i.jsxs("div",{className:"flex-shrink-0 pt-1",children:[k.avatar?i.jsx("img",{src:k.avatar,alt:k.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):i.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${k.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:S(k.user)}),i.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[k.type==="upload"&&i.jsx(Ge,{className:"h-3 w-3 text-emerald-500"}),k.type==="comment"&&i.jsx(Ca,{className:"h-3 w-3 text-blue-500"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[i.jsx("span",{className:"font-bold",children:k.user})," ",k.content]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs text-gray-400 font-medium",children:k.time}),k.fileType&&i.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:k.fileType}),!k.isRead&&i.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},k.id)),o.length===0&&i.jsxs("div",{className:"p-8 text-center text-gray-400",children:[i.jsx(Kv,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),i.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),i.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:i.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),i.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:ce,children:[i.jsxs("button",{onClick:()=>b(!p),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${p?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[i.jsxs("div",{className:"relative",children:[t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:t.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):i.jsx("div",{className:`h-9 w-9 rounded-full ${C(t==null?void 0:t.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:t?S(t.fullName):i.jsx(NC,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),t?i.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[i.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:t.fullName}),i.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:t.roleLabel})]}):i.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:i.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),i.jsx(gp,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:(t==null?void 0:t.fullName)||"Khch"}),i.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"p-1.5",children:[i.jsxs("button",{onClick:()=>{b(!1),z(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:i.jsx(xr,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),i.jsxs("button",{onClick:()=>{b(!1),V(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:i.jsx(gA,{className:"h-4 w-4"})}),"i mt khu"]})]}),i.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),i.jsx("div",{className:"p-1.5",children:i.jsxs("button",{onClick:E,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:i.jsx(XC,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),i.jsx(lO,{isOpen:O,onClose:()=>V(!1)}),i.jsx(oO,{isOpen:$,onClose:()=>z(!1)})]})},ra=()=>{const[s,e]=j.useState(!1);return j.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),s},uO=({data:s,onClick:e})=>{const{id:t,title:a,description:o,icon:u,colorClass:d,bgClass:g,hoverClass:x,stats:p}=s,b=ra();return i.jsxs("div",{onClick:()=>e(t),className:`
        group relative overflow-hidden ${b?"rounded-xl":"rounded-2xl"} border border-gray-100 bg-white ${b?"p-4":"p-8"} shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-1 hover:shadow-xl
        ${x}
      `,children:[i.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${g} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),i.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:`${b?"mb-3 h-10 w-10":"mb-6 h-16 w-16"} inline-flex items-center justify-center ${b?"rounded-xl":"rounded-2xl"} bg-gradient-to-br ${g} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(u,{className:`${b?"h-5 w-5":"h-8 w-8"} ${d}`})}),i.jsx("h3",{className:`${b?"mb-1 text-base":"mb-3 text-2xl"} font-bold text-gray-800 group-hover:text-gray-900 tracking-tight`,children:a}),!b&&i.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:o})]}),i.jsxs("div",{className:`flex items-center justify-between ${b?"pt-2":"pt-4"} border-t border-gray-50`,children:[p&&i.jsx("span",{className:`${b?"text-[10px] px-2 py-0.5":"text-xs px-3 py-1"} font-semibold rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all`,children:p}),!b&&i.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${d} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",i.jsx(Hh,{className:"h-4 w-4"})]})]})]})]})},dO=({currentSchoolYear:s,classes:e})=>{const t=ra(),[a,o]=j.useState({totalClasses:0,classStatuses:[],classesWithWeekPlan:0,classesWithMonthPlan:0,weekPlanStats:{approvedCount:0,pendingCount:0,revisionCount:0,respondedCount:0},monthPlanStats:{approvedCount:0,pendingCount:0,revisionCount:0,respondedCount:0}}),[u,d]=j.useState(!1),[g,x]=j.useState(!1),[p,b]=j.useState("week"),[w,N]=j.useState(!0),O=new Date,V=(O.getMonth()+1).toString().padStart(2,"0"),$=O.getFullYear(),[z,Q]=j.useState(V),[ae,K]=j.useState($),H={"01":"Thng 1","02":"Thng 2","03":"Thng 3","04":"Thng 4","05":"Thng 5","06":"Thng 6","07":"Thng 7","08":"Thng 8","09":"Thng 9",10:"Thng 10",11:"Thng 11",12:"Thng 12"},ce=D=>{let k=parseInt(z),M=ae;D==="prev"?(k--,k<1&&(k=12,M--)):(k++,k>12&&(k=1,M++)),Q(k.toString().padStart(2,"0")),K(M)};j.useEffect(()=>{if(!s||e.length===0){N(!1);return}const D=Nn(jt(Se,"class_files"),Us("category","==","plan")),k=rr(D,M=>{const _e=M.docs.map(Ae=>({id:Ae.id,...Ae.data()})).filter(Ae=>(Ae.schoolYear||"2025-2026")===s).filter(Ae=>String(Ae.month||"").replace("m","").padStart(2,"0")===z),J=_e.filter(Ae=>Ae.planType==="week"),te=_e.filter(Ae=>Ae.planType==="month"),Ee=e.map(Ae=>{const P=J.filter(fe=>fe.classId===Ae.id),re=te.filter(fe=>fe.classId===Ae.id);return{classId:Ae.id,className:Ae.name,hasWeekPlan:P.length>0,hasMonthPlan:re.length>0,weekPlanCount:P.length,monthPlanCount:re.length,weekApprovedCount:P.filter(fe=>{var pe;return((pe=fe.approval)==null?void 0:pe.status)==="approved"}).length,weekPendingCount:P.filter(fe=>{var pe,G;return!((pe=fe.approval)!=null&&pe.status)||((G=fe.approval)==null?void 0:G.status)==="pending"}).length,monthApprovedCount:re.filter(fe=>{var pe;return((pe=fe.approval)==null?void 0:pe.status)==="approved"}).length,monthPendingCount:re.filter(fe=>{var pe,G;return!((pe=fe.approval)!=null&&pe.status)||((G=fe.approval)==null?void 0:G.status)==="pending"}).length}}),Pe=Ae=>{const P=Ae.filter(ye=>{var I;return((I=ye.approval)==null?void 0:I.status)==="approved"}).length,re=Ae.filter(ye=>{var I,U;return!((I=ye.approval)!=null&&I.status)||((U=ye.approval)==null?void 0:U.status)==="pending"}).length,fe=Ae.filter(ye=>{var I;return((I=ye.approval)==null?void 0:I.status)==="needs_revision"}),pe=fe.length,G=fe.filter(ye=>{const I=ye.comments||[],U=I.some(Ne=>Ne.type==="request"),q=I.some(Ne=>Ne.type==="response");return U&&q}).length;return{approvedCount:P,pendingCount:re,revisionCount:pe,respondedCount:G}};o({totalClasses:e.length,classStatuses:Ee,classesWithWeekPlan:Ee.filter(Ae=>Ae.hasWeekPlan).length,classesWithMonthPlan:Ee.filter(Ae=>Ae.hasMonthPlan).length,weekPlanStats:Pe(J),monthPlanStats:Pe(te)}),N(!1)});return()=>k()},[s,e,z]);const be=p==="week"?a.weekPlanStats:a.monthPlanStats,E=p==="week"?a.classesWithWeekPlan:a.classesWithMonthPlan,S=a.classStatuses.filter(D=>p==="week"?D.hasWeekPlan:D.hasMonthPlan),C=a.classStatuses.filter(D=>p==="week"?!D.hasWeekPlan:!D.hasMonthPlan);return w?i.jsx("div",{className:`group relative overflow-hidden ${t?"rounded-xl":"rounded-2xl"} border border-teal-100 bg-white shadow-lg p-6`,children:i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-500"})})}):i.jsxs("div",{className:`group relative overflow-hidden ${t?"rounded-xl":"rounded-2xl"} border border-teal-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-teal-200 hover:border-teal-300`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-teal-50 to-cyan-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsx("div",{className:`${t?"p-3":"p-5"} relative z-10 bg-gradient-to-r from-teal-500 to-cyan-500`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`${t?"h-9 w-9":"h-11 w-11"} inline-flex items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm text-white shadow-sm`,children:i.jsx(oC,{className:`${t?"h-5 w-5":"h-6 w-6"}`})}),i.jsx("h3",{className:`${t?"text-sm":"text-base"} font-bold text-white`,children:"THNG K LP HC"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>ce("prev"),className:"p-1 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:i.jsx(mC,{className:`${t?"h-4 w-4":"h-5 w-5"} text-white`})}),i.jsx("div",{className:`${t?"px-2 py-0.5 min-w-[90px]":"px-3 py-1 min-w-[120px]"} bg-white rounded-full shadow-lg text-center`,children:i.jsxs("span",{className:`${t?"text-[10px]":"text-xs"} font-bold text-teal-700`,children:[H[z]," ",ae]})}),i.jsx("button",{onClick:()=>ce("next"),className:"p-1 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:i.jsx(gs,{className:`${t?"h-4 w-4":"h-5 w-5"} text-white`})})]})]})}),i.jsx("div",{className:`${t?"px-3 pt-3":"px-5 pt-4"} relative z-10`,children:i.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[i.jsxs("button",{onClick:()=>{b("week"),d(!1),x(!1)},className:`flex-1 flex items-center justify-center gap-1.5 ${t?"py-1.5 text-[10px]":"py-2 text-xs"} font-semibold rounded-md transition-all ${p==="week"?"bg-white text-teal-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(vr,{className:`${t?"h-3 w-3":"h-3.5 w-3.5"}`}),"K hoch Tun"]}),i.jsxs("button",{onClick:()=>{b("month"),d(!1),x(!1)},className:`flex-1 flex items-center justify-center gap-1.5 ${t?"py-1.5 text-[10px]":"py-2 text-xs"} font-semibold rounded-md transition-all ${p==="month"?"bg-white text-teal-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(sC,{className:`${t?"h-3 w-3":"h-3.5 w-3.5"}`}),"K hoch Thng"]})]})}),i.jsxs("div",{className:`${t?"p-3":"p-5 pt-4"} relative z-10`,children:[i.jsxs("div",{className:`grid ${t?"grid-cols-3 gap-2":"grid-cols-3 gap-4"}`,children:[i.jsxs("div",{onClick:()=>d(!u),className:`${t?"p-2":"p-4"} bg-gradient-to-br from-teal-50 to-teal-100/50 rounded-xl border border-teal-100 cursor-pointer hover:shadow-md transition-shadow`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx(Sn,{className:`${t?"h-3.5 w-3.5":"h-4 w-4"} text-teal-600`}),i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} font-medium text-teal-700 uppercase tracking-wide`,children:"Ti ln"})]}),i.jsxs("div",{className:`${t?"text-xl":"text-3xl"} font-bold text-teal-700`,children:[E,"/",a.totalClasses]}),i.jsxs("button",{className:`mt-1 flex items-center gap-1 ${t?"text-[9px]":"text-xs"} text-teal-600 hover:text-teal-800`,children:["Chi tit ",u?i.jsx(Gv,{className:"h-3 w-3"}):i.jsx(gp,{className:"h-3 w-3"})]})]}),i.jsxs("div",{onClick:()=>x(!g),className:`${t?"p-2":"p-4"} bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl border border-emerald-100 cursor-pointer hover:shadow-md transition-shadow`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx(gr,{className:`${t?"h-3.5 w-3.5":"h-4 w-4"} text-emerald-600`}),i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} font-medium text-emerald-700 uppercase tracking-wide`,children:"Ph duyt"})]}),i.jsx("div",{className:`${t?"text-xl":"text-3xl"} font-bold text-emerald-700`,children:be.approvedCount}),i.jsx("div",{className:"flex items-center gap-1 mt-1",children:be.pendingCount>0&&i.jsxs("span",{className:`flex items-center gap-0.5 ${t?"text-[9px]":"text-xs"} text-amber-600`,children:[i.jsx(pr,{className:"h-2.5 w-2.5"})," ",be.pendingCount," ch"]})}),i.jsxs("button",{className:`mt-1 flex items-center gap-1 ${t?"text-[9px]":"text-xs"} text-emerald-600 hover:text-emerald-800`,children:["Chi tit ",g?i.jsx(Gv,{className:"h-3 w-3"}):i.jsx(gp,{className:"h-3 w-3"})]})]}),i.jsxs("div",{className:`${t?"p-2":"p-4"} bg-gradient-to-br from-orange-50 to-orange-100/50 rounded-xl border border-orange-100`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx($r,{className:`${t?"h-3.5 w-3.5":"h-4 w-4"} text-orange-600`}),i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} font-medium text-orange-700 uppercase tracking-wide`,children:"Yu cu sa"})]}),i.jsx("div",{className:`${t?"text-xl":"text-3xl"} font-bold text-orange-700`,children:be.revisionCount}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx(oA,{className:`${t?"h-2.5 w-2.5":"h-3 w-3"} text-blue-500`}),i.jsxs("span",{className:`${t?"text-[9px]":"text-xs"} text-blue-600`,children:[be.respondedCount,"  phn hi"]})]})]})]}),u&&i.jsxs("div",{className:`mt-3 ${t?"p-2":"p-3"} bg-gray-50 rounded-lg border border-gray-200`,children:[i.jsxs("p",{className:`${t?"text-[10px]":"text-xs"} font-semibold text-gray-700 mb-2`,children:["Chi tit ti ln ",p==="week"?"k hoch tun":"k hoch thng",":"]}),S.length>0&&i.jsxs("div",{className:"mb-2",children:[i.jsxs("p",{className:`${t?"text-[9px]":"text-[10px]"} text-emerald-700 font-medium mb-1 flex items-center gap-1`,children:[i.jsx(gr,{className:"h-3 w-3"}),"  np (",S.length,"):"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:S.map(D=>i.jsxs("span",{className:`${t?"text-[9px] px-1.5 py-0.5":"text-xs px-2 py-1"} bg-emerald-100 text-emerald-700 rounded border border-emerald-200 font-medium`,children:[D.className," (",p==="week"?D.weekPlanCount:D.monthPlanCount,")"]},D.classId))})]}),C.length>0&&i.jsxs("div",{children:[i.jsxs("p",{className:`${t?"text-[9px]":"text-[10px]"} text-amber-700 font-medium mb-1 flex items-center gap-1`,children:[i.jsx(qh,{className:"h-3 w-3"})," Cha np (",C.length,"):"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:C.map(D=>i.jsx("span",{className:`${t?"text-[9px] px-1.5 py-0.5":"text-xs px-2 py-1"} bg-amber-100 text-amber-700 rounded border border-amber-200 font-medium`,children:D.className},D.classId))})]})]}),g&&i.jsxs("div",{className:`mt-3 ${t?"p-2":"p-3"} bg-gray-50 rounded-lg border border-gray-200`,children:[i.jsxs("p",{className:`${t?"text-[10px]":"text-xs"} font-semibold text-gray-700 mb-2`,children:["Chi tit ph duyt ",p==="week"?"k hoch tun":"k hoch thng",":"]}),i.jsx("div",{className:"space-y-1.5",children:a.classStatuses.map(D=>{const k=p==="week"?D.weekApprovedCount:D.monthApprovedCount,M=p==="week"?D.weekPendingCount:D.monthPendingCount,R=k+M;return(p==="week"?D.hasWeekPlan:D.hasMonthPlan)?i.jsxs("div",{className:`flex items-center justify-between ${t?"py-1 px-1.5":"py-1.5 px-2"} bg-white rounded border border-gray-100`,children:[i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} font-medium text-gray-700`,children:D.className}),i.jsxs("div",{className:"flex items-center gap-2",children:[k>0&&i.jsxs("span",{className:`flex items-center gap-0.5 ${t?"text-[9px]":"text-xs"} text-emerald-600`,children:[i.jsx(gr,{className:"h-3 w-3"})," ",k," duyt"]}),M>0&&i.jsxs("span",{className:`flex items-center gap-0.5 ${t?"text-[9px]":"text-xs"} text-amber-600`,children:[i.jsx(pr,{className:"h-3 w-3"})," ",M," ch"]}),R===0&&i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} text-gray-400`,children:"0 k hoch"})]})]},D.classId):i.jsxs("div",{className:`flex items-center justify-between ${t?"py-1 px-1.5":"py-1.5 px-2"} bg-gray-100 rounded`,children:[i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} font-medium text-gray-500`,children:D.className}),i.jsx("span",{className:`${t?"text-[9px]":"text-xs"} text-gray-400 italic`,children:"Cha np"})]},D.classId)})})]})]})]})},Tj=j.createContext(void 0),hO=({children:s})=>{const[e,t]=j.useState("2025-2026"),[a,o]=j.useState(["2025-2026"]),[u,d]=j.useState(!0);j.useEffect(()=>{const p=Nn(jt(Se,"school_years")),b=rr(p,w=>{const N=w.docs.map(O=>O.id).sort().reverse();N.length===0?g():(o(N),N.includes(e)||t(N[0])),d(!1)});return()=>b()},[]);const g=async()=>{try{await Ao(Be(Se,"school_years","2025-2026"),{createdAt:Fp(),name:"Nm hc 2025-2026"}),o(["2025-2026"]),t("2025-2026")}catch(p){console.error("Error initializing default school year:",p)}},x=async p=>{try{await Ao(Be(Se,"school_years",p),{createdAt:Fp(),name:`Nm hc ${p}`}),t(p)}catch(b){throw console.error("Error creating school year:",b),b}};return i.jsx(Tj.Provider,{value:{currentSchoolYear:e,setCurrentSchoolYear:t,schoolYears:a,isLoading:u,createNewSchoolYear:x},children:s})},Ju=()=>{const s=j.useContext(Tj);if(s===void 0)throw new Error("useSchoolYear must be used within a SchoolYearProvider");return s},fO=()=>{var N,O;const s=ar(),{user:e,isAuthenticated:t}=bs(),{currentSchoolYear:a,setCurrentSchoolYear:o,schoolYears:u,createNewSchoolYear:d}=Ju(),[g,x]=qr.useState([]),p=ra(),b=async()=>{const V=prompt("Nhp nm hc mi (VD: 2026-2027):");if(V){if(!V.match(/^\d{4}-\d{4}$/)){alert("nh dng nm hc khng hp l. Vui lng nhp dng YYYY-YYYY (VD: 2026-2027)");return}try{await d(V),alert(` khi to nm hc ${V} thnh cng!`)}catch{alert("C li xy ra khi to nm hc.")}}};if(j.useEffect(()=>{const V=Nn(jt(Se,"classes")),$=rr(V,async z=>{const Q=z.docs.map(E=>({id:E.id,...E.data()})),ae=Nn(jt(Se,"users"),Us("role","in",["teacher","head_teacher"])),H=(await _r(ae)).docs.map(E=>E.data()),ce=E=>E.toLowerCase().trim().replace(/\s+/g," "),be=Q.map(E=>{const S=new Set,C=ce(E.id),D=ce(E.name);H.forEach(M=>{if(!M.accessScope)return;const R=ce(M.accessScope);(R===C||R===D||D.includes(R)||R.includes(D))&&S.add(M.fullName)});const k=Array.from(S);return{...E,teachers:k.length>0?k:["Cha phn cng"],teacher:k.length>0?k.join(", "):"Cha phn cng"}});be.sort((E,S)=>E.name.localeCompare(S.name)),x(be)});return()=>$()},[]),j.useEffect(()=>{t||s("/login")},[t,s]),!e)return null;const w=V=>{var $;if(V==="van-ban-chi-dao")s("/van-ban-chi-dao");else if(V==="van-ban-truong")s("/van-ban-truong");else if(V==="quan-tri-he-thong")s("/quan-tri-he-thong");else if(V==="to-van-phong-ke-hoach")s("/to-van-phong-ke-hoach");else if(V==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}s("/to-van-phong-thuc-don")}else if(V==="to-chuyen-mon-ke-hoach")s("/to-chuyen-mon-ke-hoach");else if(V.startsWith("class-")){const z=V.replace("class-","");if(e.role==="teacher"){const Q=g.find(K=>K.id===z),ae=($=e.accessScope)==null?void 0:$.toLowerCase().trim();if(Q&&ae!==z.toLowerCase()&&ae!==Q.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}s(`/class/${z}`)}else console.log(`Navigating to category: ${V}`),alert(`ang truy cp vo phn h: ${V} (ang pht trin)`)};return i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsx("div",{className:`bg-white border-b border-gray-200 ${p?"pt-4 pb-4 mb-4":"pt-8 pb-8 mb-8"}`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[!p&&i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(l_,{className:"h-5 w-5 text-yellow-500"}),i.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),i.jsx("h2",{className:`${p?"text-xl":"text-3xl md:text-4xl"} font-bold text-gray-900 truncate`,children:p?`Cho c ${(N=e.fullName)==null?void 0:N.split(" ").pop()}`:`Xin cho c: ${e.fullName}`}),i.jsx("p",{className:`text-gray-500 ${p?"text-xs mt-0.5":"mt-1"}`,children:p?i.jsx("span",{className:"font-medium text-gray-700",children:e.roleLabel}):i.jsxs(i.Fragment,{children:["Vai tr: ",i.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",i.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})})]}),i.jsxs("div",{className:`flex items-center gap-2 bg-gray-50 ${p?"p-1.5":"p-2"} rounded-lg border border-gray-200 flex-shrink-0`,children:[!p&&i.jsx("span",{className:"text-sm font-medium text-gray-600 whitespace-nowrap px-2",children:"Nm hc:"}),i.jsx("select",{value:a,onChange:V=>o(V.target.value),className:`form-select ${p?"text-xs py-1 pl-2 pr-6":"text-sm py-1.5 pl-3 pr-8"} font-bold text-gray-800 bg-white border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500`,children:u.map(V=>i.jsx("option",{value:V,children:V},V))}),e.role==="admin"&&i.jsx("button",{onClick:b,className:`${p?"p-1":"ml-2 p-1.5"} text-blue-600 hover:bg-blue-100 rounded-md transition-colors`,title:"Khi to nm hc mi",children:i.jsx(Qv,{className:`${p?"h-3.5 w-3.5":"h-4 w-4"}`})})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 ${p?"gap-3":"gap-6 xl:gap-8"}`,children:[i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-4"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(Qv,{className:`${p?"h-5 w-5":"h-7 w-7"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors`,children:"QUN L VN BN CHUNG"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),i.jsxs("div",{className:`flex-1 grid grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 ${p?"mt-1":"mt-2"}`,children:[i.jsxs("div",{onClick:()=>s("/van-ban-chi-dao"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative`,children:[i.jsxs("div",{className:`flex items-center justify-between ${p?"mb-1.5":"mb-3"}`,children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-blue-100 text-blue-600 rounded-lg`,children:i.jsx(qC,{className:`${p?"h-4 w-4":"h-6 w-6"}`})}),!p&&i.jsx(Hh,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:`font-bold text-gray-800 ${p?"text-xs mb-0.5":"mb-1"} group-hover/item:text-blue-700`,children:"Vn bn Cp trn"}),i.jsxs("div",{className:"flex flex-wrap gap-0.5",children:[i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"S/B GD"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"UBND"})]})]}),i.jsxs("div",{onClick:()=>s("/van-ban-truong"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative`,children:[i.jsxs("div",{className:`flex items-center justify-between ${p?"mb-1.5":"mb-3"}`,children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-emerald-100 text-emerald-600 rounded-lg`,children:i.jsx(h_,{className:`${p?"h-4 w-4":"h-6 w-6"}`})}),!p&&i.jsx(Hh,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:`font-bold text-gray-800 ${p?"text-xs mb-0.5":"mb-1"} group-hover/item:text-emerald-700`,children:"Vn bn Ni b"}),i.jsxs("div",{className:"flex flex-wrap gap-0.5",children:[i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"K hoch"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"Quyt nh"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-4"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(Fh,{className:`${p?"h-5 w-5":"h-7 w-7"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors`,children:"T VN PHNG"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),i.jsxs("div",{className:`flex-1 grid grid-cols-2 gap-px bg-indigo-100/50 border-t border-indigo-50 ${p?"mt-1":"mt-4"}`,children:[i.jsxs("div",{onClick:()=>w("to-van-phong-ke-hoach"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-indigo-50/60 transition-colors group/item`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-3"}`,children:i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-indigo-100 text-indigo-600 rounded-lg shadow-sm inline-block`,children:i.jsx(Ge,{className:`${p?"h-4 w-4":"h-5 w-5"}`})})}),i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 mb-0.5 group-hover/item:text-indigo-700`,children:p?"K HOCH":"K HOCH & BO CO"}),i.jsx("p",{className:`${p?"text-[10px]":"text-xs"} text-gray-500 line-clamp-2`,children:p?"Ti chnh, Y t":"K hoch ti chnh, Y t, Hot ng chung"})]}),i.jsxs("div",{onClick:()=>w("to-van-phong-thuc-don"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-purple-50/60 transition-colors group/item`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-3"}`,children:i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-purple-100 text-purple-600 rounded-lg shadow-sm inline-block`,children:i.jsx(yp,{className:`${p?"h-4 w-4":"h-5 w-5"}`})})}),i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 mb-0.5 group-hover/item:text-purple-700`,children:p?"THC N":"THC N & BN TR"}),i.jsx("p",{className:`${p?"text-[10px]":"text-xs"} text-gray-500 line-clamp-2`,children:p?"V sinh ATTP":"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-2"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(r0,{className:`${p?"h-5 w-5":"h-8 w-8"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors`,children:"T CHUYN MN"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),i.jsx("div",{className:`${p?"px-4 pb-2":"px-6 pb-4"} relative z-10`,children:i.jsxs("div",{onClick:()=>w("to-chuyen-mon-ke-hoach"),className:`flex items-center justify-between ${p?"p-2":"p-3"} rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-white rounded-lg text-amber-600 shadow-sm`,children:i.jsx(ZS,{className:`${p?"h-4 w-4":"h-5 w-5"}`})}),i.jsx("div",{children:i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 group-hover/plan:text-amber-700`,children:p?"K hoch T":"K hoch T & Bin bn"})})]}),!p&&i.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50/50 border-t border-amber-100 ${p?"p-4 pt-3":"p-6 pt-4"}`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-4"}`,children:i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-2`,children:"LP HC CA TI"})}),i.jsx("div",{className:`grid ${p?"grid-cols-4 gap-1.5":"grid-cols-3 gap-2"}`,children:g.map(V=>{var $;if(e.role==="teacher"){const z=($=e.accessScope)==null?void 0:$.toLowerCase().trim(),Q=V.id.toLowerCase(),ae=V.name.toLowerCase();if(z!==Q&&z!==ae)return null}return i.jsxs("button",{onClick:()=>w(`class-${V.id}`),className:`relative group/btn flex flex-col items-center justify-center ${p?"py-1.5 px-1":"py-2 px-1"} bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all`,children:[i.jsx("span",{className:`${p?"text-[10px]":"text-xs"} font-bold text-gray-700 group-hover/btn:text-amber-800`,children:V.name}),V.newFiles>0&&i.jsx("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},V.id)})})]})]}),e.role==="admin"&&i.jsx(dO,{currentSchoolYear:a,classes:g}),(e.role==="admin"||e.role==="vice_principal"&&((O=e.permissions)==null?void 0:O.includes("access_system_admin")))&&RA.map(V=>i.jsx(uO,{data:V,onClick:w},V.id))]})})]})},Ej=s=>{try{const e=new URL(s),t=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}catch{const t=s.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}},jl=s=>!s||s==="#"?"#":s.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":Ej(s)?`https://docs.google.com/viewer?url=${encodeURIComponent(s)}&embedded=true`:s,bo=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),mO=()=>{var ye;const s=ar(),{addToast:e}=Er(),[t,a]=j.useState([]),[o,u]=j.useState(""),[d,g]=j.useState("Tt c"),{user:x}=bs(),p=ra(),b=(ye=x==null?void 0:x.permissions)==null?void 0:ye.includes("manage_documents"),[w,N]=j.useState(null),[O,V]=j.useState(!1),[$,z]=j.useState(!1),[Q,ae]=j.useState(!1),[K,H]=j.useState(!1),[ce,be]=j.useState(null),[E,S]=j.useState(1),[C,D]=j.useState({}),[k,M]=j.useState(null),[R,Te]=j.useState("");qr.useEffect(()=>{const I=Nn(jt(Se,"directive_documents"),tc("ngayBanHanh","desc")),U=rr(I,q=>{const Ne=[];q.forEach(he=>{Ne.push({id:he.id,...he.data()})}),a(Ne)});return()=>U()},[]);const _e=j.useMemo(()=>t.filter(I=>{const U=I.trichYeu.toLowerCase().includes(o.toLowerCase())||I.soKyHieu.toLowerCase().includes(o.toLowerCase()),q=d==="Tt c"||I.coQuanBanHanh===d;return U&&q}),[t,o,d]),J=I=>{be(I),H(!0)},te=async()=>{if(ce){try{await Rl(Be(Se,"directive_documents",ce.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(I){console.error("Error deleting document:",I),e("Li xa ti liu","Khng th xa ti liu ny.","error")}H(!1),be(null)}},Ee=I=>{N(I),S(1),V(!0)},Pe=()=>{D({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),M(null),Te(""),ae(!1),z(!0)},Ae=I=>{D({...I}),ae(!0),M(null),Te(I.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),z(!0)},P=I=>{if(I.target.files&&I.target.files[0]){const U=I.target.files[0];M(U),Te(U.name)}},re=I=>{I.fileDinhKemUrl&&I.fileDinhKemUrl!=="#"?window.open(I.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},fe=()=>{M(null),Te("")},pe=async I=>{if(I.preventDefault(),!(!C.trichYeu||!C.soKyHieu))try{let U=C.fileDinhKemUrl||"#";if(k){const q=sr(Ps,`directive_documents/${Date.now()}_${k.name}`),Ne=await tr(q,k);U=await nr(Ne.ref)}else!R&&!C.fileDinhKemUrl&&(U="#");Q&&C.id?(await Qt(Be(Se,"directive_documents",C.id),{...C,fileDinhKemUrl:U}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await kl(jt(Se,"directive_documents"),{...C,fileDinhKemUrl:U,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),z(!1)}catch(U){console.error("Error saving document:",U),e("Li lu d liu","Khng th lu vn bn ny.","error")}},G=I=>{switch(I){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${p?"py-4":"py-6"}`,children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[!p&&i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-blue-100 rounded-lg`,children:i.jsx(Ge,{className:`${p?"h-5 w-5":"h-6 w-6"} text-blue-600`})}),i.jsx("h1",{className:`${p?"text-lg":"text-2xl"} font-bold text-gray-900 uppercase`,children:"VN BN CH O"})]})]}),b&&i.jsxs("button",{onClick:Pe,className:`flex items-center gap-2 bg-blue-600 text-white ${p?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg hover:bg-blue-700 transition-colors shadow-md flex-shrink-0`,children:[i.jsx(Mo,{className:`${p?"h-4 w-4":"h-5 w-5"}`}),i.jsx("span",{children:p?"Thm mi":"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(I=>i.jsx("button",{onClick:()=>g(I),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${d===I?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:I},I))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:I=>u(I.target.value)})]})})]})]})}),i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${p?"py-4":"py-8"}`,children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[p?i.jsx("div",{className:"divide-y divide-gray-100",children:_e.length>0?_e.map(I=>i.jsxs("div",{onClick:()=>Ee(I),className:"p-4 hover:bg-blue-50/50 transition-colors cursor-pointer active:bg-blue-100",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-gray-100 text-gray-500 flex-shrink-0",children:i.jsx(Ge,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:I.trichYeu})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-2 ml-9",children:[i.jsx("span",{className:"text-[10px] font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200 text-gray-600",children:I.soKyHieu}),i.jsx(bo,{colorClass:G(I.coQuanBanHanh),children:I.coQuanBanHanh}),i.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-gray-400",children:[i.jsx(vr,{className:"h-2.5 w-2.5"}),new Date(I.ngayBanHanh).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 ml-9",onClick:U=>U.stopPropagation(),children:[i.jsxs("button",{onClick:()=>Ee(I),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[i.jsx(bl,{className:"h-3.5 w-3.5"})," Xem"]}),i.jsxs("button",{onClick:()=>re(I),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(wn,{className:"h-3.5 w-3.5"})," Ti"]}),b&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ae(I),className:"p-1.5 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:i.jsx(ji,{className:"h-3.5 w-3.5"})}),i.jsx("button",{onClick:()=>J(I),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:i.jsx(En,{className:"h-3.5 w-3.5"})})]})]})]},I.id)):i.jsxs("div",{className:"py-12 text-center text-gray-500",children:[i.jsx(Ge,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-xs mt-1",children:"Th thay i b lc"})]})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.length>0?_e.map(I=>i.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>Ee(I),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:I.trichYeu}),I.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:I.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:I.soKyHieu}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:I.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(cu,{className:"h-3 w-3"}),i.jsx("span",{className:G(I.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:I.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(vr,{className:"h-3 w-3"}),new Date(I.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:U=>U.stopPropagation(),children:[i.jsx("button",{onClick:()=>Ee(I),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(bl,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>re(I),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-4 w-4"})}),b&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ae(I),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>J(I),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(En,{className:"h-4 w-4"})})]})]})})]},I.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Ge,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:`${p?"px-4 py-3":"px-6 py-4"} bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500`,children:[i.jsxs("span",{className:p?"text-xs":"",children:[_e.length," vn bn"]}),!p&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),K&&ce&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',ce.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),O&&w&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:p?i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-blue-600 px-4 py-3 flex items-center gap-3 flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>V(!1),className:"p-1.5 -ml-1.5 text-white/80 hover:text-white hover:bg-blue-700 rounded-full transition-all",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-white font-semibold text-sm truncate",children:w.trichYeu}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"text-blue-100 text-[10px] font-mono",children:w.soKyHieu}),i.jsx("span",{className:"text-blue-200 text-[10px]",children:""}),i.jsx("span",{className:"text-blue-100 text-[10px]",children:new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})]}),i.jsx("div",{className:"flex-1 relative overflow-hidden",children:w.fileDinhKemUrl&&w.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(w.fileDinhKemUrl),className:"w-full h-full bg-white",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-white",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-300"}),i.jsx("p",{className:"text-base font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1 text-center px-8",children:"Vn bn ny cha c file nh km"})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between gap-3 safe-area-inset-bottom",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bo,{colorClass:G(w.coQuanBanHanh),children:w.coQuanBanHanh}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:w.loaiVanBan})]}),i.jsxs("button",{onClick:()=>re(w),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-xl shadow-lg transition-all active:scale-95",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v"]})]})]}):i.jsx("div",{className:"h-full flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Ge,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>V(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:w.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(bo,{colorClass:"bg-blue-100 text-blue-800",children:w.coQuanBanHanh}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:w.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(vr,{className:"h-3 w-3"})," ",new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:w.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(cu,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:w.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:w.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>re(w),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>S(I=>Math.max(.5,I-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(i0,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(E*100),"%"]}),i.jsx("button",{onClick:()=>S(I=>Math.min(2,I+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(a0,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>S(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(d_,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:w.fileDinhKemUrl&&w.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(w.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})})}),$&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[Q?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),Q?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:pe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:C.trichYeu||"",onChange:I=>D({...C,trichYeu:I.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:C.soKyHieu||"",onChange:I=>D({...C,soKyHieu:I.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:C.ngayBanHanh||"",onChange:I=>D({...C,ngayBanHanh:I.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:C.coQuanBanHanh||"B GD&T",onChange:I=>D({...C,coQuanBanHanh:I.target.value}),children:[i.jsx("option",{value:"B GD&T",children:"B GD&T"}),i.jsx("option",{value:"S GD&T",children:"S GD&T"}),i.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),i.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:C.loaiVanBan||"Cng vn",onChange:I=>D({...C,loaiVanBan:I.target.value}),children:[i.jsx("option",{value:"Cng vn",children:"Cng vn"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:C.tomTatNoiDung||"",onChange:I=>D({...C,tomTatNoiDung:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),R?i.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:R}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(ys,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:fe,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(Jt,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:P}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(Sn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Iu,{className:"h-4 w-4"})," ",Q?"Lu thay i":"To mi"]})]})]})})]})},Sh=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),gO=()=>{var I;const s=ar(),{currentSchoolYear:e}=Ju(),{addToast:t}=Er(),[a,o]=j.useState([]),[u,d]=j.useState(""),[g,x]=j.useState("Tt c"),{user:p}=bs(),b=ra(),w=(I=p==null?void 0:p.permissions)==null?void 0:I.includes("manage_documents"),[N,O]=j.useState(null),[V,$]=j.useState(!1),[z,Q]=j.useState(!1),[ae,K]=j.useState(!1),[H,ce]=j.useState(!1),[be,E]=j.useState(null),[S,C]=j.useState(1),[D,k]=j.useState({}),[M,R]=j.useState(null),[Te,_e]=j.useState("");qr.useEffect(()=>{const U=Nn(jt(Se,"school_documents"),tc("ngayBanHanh","desc")),q=rr(U,Ne=>{const he=[];Ne.forEach(De=>{const He=De.data();(He.schoolYear||"2025-2026")===e&&he.push({id:De.id,...He})}),o(he)});return()=>q()},[e]);const J=j.useMemo(()=>a.filter(U=>{const q=U.trichYeu.toLowerCase().includes(u.toLowerCase())||U.soKyHieu.toLowerCase().includes(u.toLowerCase()),Ne=g==="Tt c"||U.loaiVanBan===g;return q&&Ne}),[a,u,g]),te=U=>{E(U),ce(!0)},Ee=async()=>{if(be){try{await Rl(Be(Se,"school_documents",be.id)),t(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(U){console.error("Error deleting document:",U),t("Li xa ti liu","Khng th xa ti liu ny.","error")}ce(!1),E(null)}},Pe=U=>{O(U),C(1),$(!0)},Ae=()=>{k({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),R(null),_e(""),K(!1),Q(!0)},P=U=>{k({...U}),K(!0),R(null),_e(U.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),Q(!0)},re=U=>{if(U.target.files&&U.target.files[0]){const q=U.target.files[0];R(q),_e(q.name)}},fe=U=>{U.fileDinhKemUrl&&U.fileDinhKemUrl!=="#"?window.open(U.fileDinhKemUrl,"_blank"):t("Khng c file","Vn bn ny khng c file nh km.","warning")},pe=()=>{R(null),_e("")},G=async U=>{if(U.preventDefault(),!(!D.trichYeu||!D.soKyHieu))try{let q=D.fileDinhKemUrl||"#";if(M){const Ne=sr(Ps,`school_documents/${Date.now()}_${M.name}`),he=await tr(Ne,M);q=await nr(he.ref)}else!Te&&!D.fileDinhKemUrl&&(q="#");ae&&D.id?(await Qt(Be(Se,"school_documents",D.id),{...D,fileDinhKemUrl:q}),t("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await kl(jt(Se,"school_documents"),{...D,fileDinhKemUrl:q,schoolYear:e,createdAt:new Date().toISOString()}),t("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),Q(!1)}catch(q){console.error("Error saving document:",q),t("Li lu d liu","Khng th lu vn bn ny.","error")}},ye=U=>{switch(U){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${b?"py-4":"py-6"}`,children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[!b&&i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:`${b?"p-1.5":"p-2"} bg-emerald-100 rounded-lg`,children:i.jsx(cu,{className:`${b?"h-5 w-5":"h-6 w-6"} text-emerald-600`})}),i.jsx("h1",{className:`${b?"text-lg":"text-2xl"} font-bold text-gray-900 uppercase`,children:"VN BN CA TRNG"})]})]}),w&&i.jsxs("button",{onClick:Ae,className:`flex items-center gap-2 bg-emerald-600 text-white ${b?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg hover:bg-emerald-700 transition-colors shadow-md flex-shrink-0`,children:[i.jsx(Mo,{className:`${b?"h-4 w-4":"h-5 w-5"}`}),i.jsx("span",{children:b?"Thm mi":"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(U=>i.jsx("button",{onClick:()=>x(U),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${g===U?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:U},U))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:u,onChange:U=>d(U.target.value)})]})})]})]})}),i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${b?"py-4":"py-8"}`,children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[b?i.jsx("div",{className:"divide-y divide-gray-100",children:J.length>0?J.map(U=>i.jsxs("div",{onClick:()=>Pe(U),className:"p-4 hover:bg-emerald-50/50 transition-colors cursor-pointer active:bg-emerald-100",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-gray-100 text-gray-500 flex-shrink-0",children:i.jsx(Ge,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:U.trichYeu})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-2 ml-9",children:[i.jsx("span",{className:"text-[10px] font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200 text-gray-600",children:U.soKyHieu}),i.jsx(Sh,{colorClass:ye(U.loaiVanBan),children:U.loaiVanBan}),i.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-gray-400",children:[i.jsx(vr,{className:"h-2.5 w-2.5"}),new Date(U.ngayBanHanh).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 ml-9",onClick:q=>q.stopPropagation(),children:[i.jsxs("button",{onClick:()=>Pe(U),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors",children:[i.jsx(bl,{className:"h-3.5 w-3.5"})," Xem"]}),i.jsxs("button",{onClick:()=>fe(U),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(wn,{className:"h-3.5 w-3.5"})," Ti"]}),w&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>P(U),className:"p-1.5 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:i.jsx(ji,{className:"h-3.5 w-3.5"})}),i.jsx("button",{onClick:()=>te(U),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:i.jsx(En,{className:"h-3.5 w-3.5"})})]})]})]},U.id)):i.jsxs("div",{className:"py-12 text-center text-gray-500",children:[i.jsx(Ge,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-xs mt-1",children:"Th thay i b lc"})]})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.length>0?J.map(U=>i.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>Pe(U),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:U.trichYeu}),U.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:U.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:U.soKyHieu}),i.jsx(Sh,{colorClass:ye(U.loaiVanBan),children:U.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(cu,{className:"h-3 w-3"}),i.jsx("span",{children:U.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(vr,{className:"h-3 w-3"}),new Date(U.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:q=>q.stopPropagation(),children:[i.jsx("button",{onClick:()=>Pe(U),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(bl,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>fe(U),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-4 w-4"})}),w&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>P(U),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>te(U),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(En,{className:"h-4 w-4"})})]})]})})]},U.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Ge,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:`${b?"px-4 py-3":"px-6 py-4"} bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500`,children:[i.jsxs("span",{className:b?"text-xs":"",children:[J.length," vn bn"]}),!b&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),H&&be&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',be.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Ee,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),V&&N&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:b?i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-emerald-600 px-4 py-3 flex items-center gap-3 flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>$(!1),className:"p-1.5 -ml-1.5 text-white/80 hover:text-white hover:bg-emerald-700 rounded-full transition-all",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-white font-semibold text-sm truncate",children:N.trichYeu}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"text-emerald-100 text-[10px] font-mono",children:N.soKyHieu}),i.jsx("span",{className:"text-emerald-200 text-[10px]",children:""}),i.jsx("span",{className:"text-emerald-100 text-[10px]",children:new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})]}),i.jsx("div",{className:"flex-1 relative overflow-hidden",children:N.fileDinhKemUrl&&N.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(N.fileDinhKemUrl),className:"w-full h-full bg-white",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-white",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-300"}),i.jsx("p",{className:"text-base font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1 text-center px-8",children:"Vn bn ny cha c file nh km"})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between gap-3 safe-area-inset-bottom",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Sh,{colorClass:ye(N.loaiVanBan),children:N.loaiVanBan})}),i.jsxs("button",{onClick:()=>fe(N),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-bold text-white bg-emerald-600 hover:bg-emerald-700 rounded-xl shadow-lg transition-all active:scale-95",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v"]})]})]}):i.jsx("div",{className:"h-full flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Ge,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>$(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:N.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(Sh,{colorClass:ye(N.loaiVanBan),children:N.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(vr,{className:"h-3 w-3"})," ",new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:N.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(cu,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:N.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:N.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>fe(N),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>C(U=>Math.max(.5,U-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(i0,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(S*100),"%"]}),i.jsx("button",{onClick:()=>C(U=>Math.min(2,U+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(a0,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>C(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(d_,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:N.fileDinhKemUrl&&N.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(N.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[ae?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),ae?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:G,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:D.trichYeu||"",onChange:U=>k({...D,trichYeu:U.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:D.soKyHieu||"",onChange:U=>k({...D,soKyHieu:U.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:D.ngayBanHanh||"",onChange:U=>k({...D,ngayBanHanh:U.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:D.coQuanBanHanh||"Ban Gim Hiu",onChange:U=>k({...D,coQuanBanHanh:U.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:D.loaiVanBan||"K hoch",onChange:U=>k({...D,loaiVanBan:U.target.value}),children:[i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"Bo co",children:"Bo co"}),i.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:D.tomTatNoiDung||"",onChange:U=>k({...D,tomTatNoiDung:U.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),Te?i.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:Te}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(ys,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:pe,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(Jt,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:re}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(Sn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Iu,{className:"h-4 w-4"})," ",ae?"Lu thay i":"To mi"]})]})]})})]})},pO=()=>{const{user:s}=bs(),{addToast:e}=Er(),[t,a]=j.useState(""),[o,u]=j.useState(""),[d,g]=j.useState(null),[x,p]=j.useState(!1),[b,w]=j.useState(""),[N,O]=j.useState(""),[V,$]=j.useState(null),[z,Q]=j.useState(!1),[ae,K]=j.useState("/login-background.jpg"),[H,ce]=j.useState(""),[be,E]=j.useState(null),[S,C]=j.useState(!1),[D,k]=j.useState(!0),[M,R]=j.useState(!1),[Te,_e]=j.useState(null),[J,te]=j.useState(!1),[Ee,Pe]=j.useState(null),Ae=async()=>{if(s){R(!0),_e(null);try{let he=0,De=0;const He=await _r(jt(Se,"plans")),st=lp(Se);He.forEach(pt=>{const Pt=pt.data();if(!Pt.approval||!Pt.approval.status){const Et=Be(Se,"plans",pt.id);st.update(Et,{approval:{status:"pending"},uploaderRole:Pt.uploaderRole||"teacher"}),he++}}),he>0&&await st.commit();const Xe=await _r(jt(Se,"class_files")),gt=lp(Se);Xe.forEach(pt=>{const Pt=pt.data();if(!Pt.approval||!Pt.approval.status){const Et=Be(Se,"class_files",pt.id);gt.update(Et,{approval:{status:"pending"},uploaderRole:Pt.uploaderRole||"teacher"}),De++}}),De>0&&await gt.commit(),_e({plans:he,classFiles:De}),he>0||De>0?e("Migration hon thnh!",` cp nht ${he} k hoch v ${De} h s lp.`,"success"):e("Khng c g  cp nht","Tt c ti liu  c trng thi duyt.","success")}catch(he){console.error("Migration error:",he),e("Li Migration","Khng th cp nht d liu. Xem console  bit chi tit.","error")}finally{R(!1)}}},P=async()=>{if(!(!s||!window.confirm("Bn c chc mun xa tt c thng bo c c ng dn sai (/professional-group-plans)?"))){te(!0),Pe(null);try{let he=0;const De=await _r(jt(Se,"notifications")),He=[];if(De.forEach(st=>{const Xe=st.data();Xe.targetPath&&Xe.targetPath.includes("/professional-group-plans")&&He.push(st.id)}),He.length>0){for(let Xe=0;Xe<He.length;Xe+=450){const gt=He.slice(Xe,Xe+450),pt=lp(Se);gt.forEach(Pt=>{pt.delete(Be(Se,"notifications",Pt))}),await pt.commit(),he+=gt.length,console.log(`Deleted chunk: ${he}/${He.length}`)}e("Dn dp hon tt!",` xa ${he} thng bo c sai ng dn.`,"success")}else e("Khng c thng bo li","Tt c thng bo hin ti u hp l.","success");Pe(he)}catch(he){console.error("Cleanup error details:",he);const De=he.code==="permission-denied"?"Li dn dp: Quyn truy cp b t chi. Vui lng kim tra li quyn Admin.":`Li dn dp: ${he.message||"Khng th xa d liu c."}`;e("Li",De,"error")}finally{te(!1)}}};j.useEffect(()=>{(async()=>{try{const De=Be(Se,"app_settings","login_background"),He=await wr(De);He.exists()&&He.data().imageUrl&&K(He.data().imageUrl);const st=Be(Se,"app_settings","system_logo"),Xe=await wr(st);Xe.exists()&&Xe.data().imageUrl&&a(Xe.data().imageUrl);const gt=Be(Se,"app_settings","certification_logo"),pt=await wr(gt);pt.exists()&&pt.data().imageUrl&&w(pt.data().imageUrl)}catch(De){console.error("Error fetching settings:",De)}finally{k(!1)}})()},[]);const re=he=>{if(he.target.files&&he.target.files[0]){const De=he.target.files[0];if(!De.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(De.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}g(De),u(URL.createObjectURL(De))}},fe=async()=>{if(!(!d||!s)){p(!0);try{const he=Date.now(),De=sr(Ps,`app_settings/system-logo-${he}.png`);await tr(De,d);const He=await nr(De);await Ao(Be(Se,"app_settings","system_logo"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),a(He),u(""),g(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(he){console.error("Error uploading logo:",he),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{p(!1)}}},pe=()=>{u(""),g(null)},G=he=>{if(he.target.files&&he.target.files[0]){const De=he.target.files[0];if(!De.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(De.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}$(De),O(URL.createObjectURL(De))}},ye=async()=>{if(!(!V||!s)){Q(!0);try{const he=Date.now(),De=sr(Ps,`app_settings/cert-logo-${he}.png`);await tr(De,V);const He=await nr(De);await Ao(Be(Se,"app_settings","certification_logo"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),w(He),O(""),$(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(he){console.error("Error uploading cert logo:",he),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{Q(!1)}}},I=()=>{O(""),$(null)},U=he=>{if(he.target.files&&he.target.files[0]){const De=he.target.files[0];if(!De.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(De.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}E(De),ce(URL.createObjectURL(De))}},q=async()=>{if(!(!be||!s)){C(!0);try{const he=Date.now(),De=sr(Ps,`app_settings/login-background-${he}.jpg`);await tr(De,be);const He=await nr(De);await Ao(Be(Se,"app_settings","login_background"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),K(He),ce(""),E(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(he){console.error("Error uploading:",he),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{C(!1)}}},Ne=()=>{ce(""),E(null)};return D?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-amber-600 rounded-lg",children:i.jsx(Yv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Migration: Thm Trng Thi Duyt"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Cp nht cc ti liu c (K hoch T CM v H s Lp) vi trng thi "Ch duyt"  kch hot chc nng ph duyt mi.',i.jsx("br",{}),i.jsx("span",{className:"text-amber-700 font-medium font-sans",children:"Lu : Ch cn chy mt ln. Cc ti liu  c trng thi s khng b nh hng."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:Ae,disabled:M,className:"flex items-center gap-2 px-6 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:M?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Yv,{className:"h-4 w-4"}),"Chy Migration"]})}),Te&&i.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:["  cp nht: ",i.jsx("span",{className:"font-bold",children:Te.plans})," k hoch, ",i.jsx("span",{className:"font-bold",children:Te.classFiles})," h s lp"]})]})]})]})}),i.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-red-600 rounded-lg",children:i.jsx(Wv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Dn dp: Thng bo li ng dn"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Khc phc vn  "Trang trng" khi nhn vo thng bo c.',i.jsx("br",{}),i.jsx("span",{className:"text-red-700 font-medium font-sans",children:"Dn sch cc thng bo cha ng dn c (/professional-group-plans)."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:P,disabled:J,className:"flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:J?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"}),"ang dn dp..."]}):i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"h-4 w-4"}),"Dn dp thng bo li"]})}),Ee!==null&&i.jsxs("div",{className:"text-sm text-red-700 bg-red-100 px-3 py-1.5 rounded-lg border border-red-200",children:["  xa: ",i.jsx("span",{className:"font-bold",children:Ee})," thng bo li"]})]})]})]})})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:i.jsx(Gg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:t?i.jsx("img",{src:t,alt:"Current Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(Sn,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:re,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),o&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:i.jsx("img",{src:o,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:fe,disabled:!d||x,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:x?"ang ti...":"Lu Logo"}),o&&i.jsx("button",{onClick:pe,disabled:x,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:i.jsx(Gg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:b?i.jsx("img",{src:b,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(Sn,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),N&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:i.jsx("img",{src:N,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:ye,disabled:!V||z,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:z?"ang ti...":"Lu Logo"}),N&&i.jsx("button",{onClick:I,disabled:z,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:i.jsx(Gg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:i.jsx("img",{src:ae,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(Sn,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),i.jsx("input",{type:"file",accept:"image/*",onChange:U,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),i.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),H&&i.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),i.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:i.jsx("img",{src:H,alt:"Preview",className:"w-full h-64 object-contain"})})]}),i.jsxs("div",{className:"mt-6 flex gap-3",children:[i.jsx("button",{onClick:q,disabled:!be||S,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:S?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Sn,{className:"h-4 w-4"}),"Lu v p dng"]})}),H&&i.jsxs("button",{onClick:Ne,disabled:S,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[i.jsx(Wv,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Qn,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm text-amber-800",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[i.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),i.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),i.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),i.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},xO=()=>{var re,fe,pe,G,ye;const s=ar(),{user:e}=bs(),{addToast:t}=Er(),[a,o]=j.useState("users"),[u,d]=qr.useState([]),[g,x]=qr.useState({}),[p,b]=qr.useState({});qr.useEffect(()=>{var I;e&&(e.role==="admin"||(I=e.permissions)!=null&&I.includes("access_system_admin")||(t("Bn khng c quyn truy cp khu vc ny.","error"),s("/")))},[e,s,t]);const[w,N]=j.useState([]),[O,V]=j.useState(""),[$,z]=j.useState("Tt c"),[Q,ae]=j.useState(!1),[K,H]=j.useState(!1),[ce,be]=j.useState(!1),[E,S]=j.useState({}),[C,D]=j.useState(""),[k,M]=j.useState(!1);qr.useEffect(()=>{const I=Nn(jt(Se,"classes")),U=rr(I,q=>{const Ne=q.docs.map(He=>({id:He.id,...He.data()}));Ne.sort((He,st)=>He.name.localeCompare(st.name)),d(Ne);const he={},De={};Ne.forEach(He=>{he[He.name]=He.id,De[He.id]=He.name}),x(he),b(De)});return()=>U()},[]),qr.useEffect(()=>{const I=Nn(jt(Se,"users")),U=rr(I,q=>{const Ne=[];q.forEach(he=>{Ne.push({id:he.id,...he.data()})}),N(Ne)});return()=>U()},[]);const R=j.useMemo(()=>w.filter(I=>{const U=I.fullName.toLowerCase().includes(O.toLowerCase())||I.username.toLowerCase().includes(O.toLowerCase())||I.email.toLowerCase().includes(O.toLowerCase()),q=$==="Tt c"||I.group===$;return U&&q}),[w,O,$]),Te=async I=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await Rl(Be(Se,"users",I))}catch(U){console.error("Error deleting user:",U),t("Khng th xa ngi dng. Vui lng th li.","error")}},_e=()=>{S({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:u.length>0?u[0].id:"choi",permissions:[]}),D(""),H(!1),be(!1),ae(!0)},J=I=>{S({...I}),H(!0),be(!1),D(""),ae(!0)},te=I=>{const U=I.target.value;let q="",Ne=E.group,he="teacher";U==="Hiu Trng"?(q="Ton h thng",Ne="Ban Gim Hiu",he="admin"):U==="Ph Hiu Trng"?(q="Ton trng",Ne="Ban Gim Hiu",he="vice_principal"):U==="T trng chuyn mn"?(q="Ton b T chuyn mn",Ne="T Chuyn Mn",he="head_teacher"):U==="T ph chuyn mn"?(q="Ton b T chuyn mn",Ne="T Chuyn Mn",he="vice_head_teacher"):U==="Gio vin"?(q=u.length>0?u[0].id:"choi",Ne="T Chuyn Mn",he="teacher"):U==="T trng t vn phng"?(q="Ton b T Vn phng",Ne="T Vn Phng",he="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(U)&&(q="Khng gian T Vn phng",Ne="T Vn Phng",he="staff"),S({...E,role:he,roleLabel:U,accessScope:q,group:Ne,permissions:E.permissions||[]})},Ee=async I=>{if(I.preventDefault(),!(!E.username||!E.fullName||!E.email)){M(!0);try{if(K&&E.id){const U=Object.fromEntries(Object.entries(E).filter(([q,Ne])=>Ne!==void 0));if(await Qt(Be(Se,"users",E.id),U),ce&&C)if(e&&E.id===e.id){const{updatePassword:q}=await du(async()=>{const{updatePassword:he}=await Promise.resolve().then(()=>jI);return{updatePassword:he}},void 0),Ne=Cu();Ne.currentUser&&(await q(Ne.currentUser,C),t(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:q}=await du(async()=>{const{httpsCallable:De}=await Promise.resolve().then(()=>rj);return{httpsCallable:De}},void 0),{functions:Ne}=await du(async()=>{const{functions:De}=await Promise.resolve().then(()=>_j);return{functions:De}},void 0),he=q(Ne,"adminResetPassword");t("ang gi yu cu i mt khu...","info"),await he({targetUserId:E.id,newPassword:C}),t(` i mt khu cho user ${E.username} thnh cng!`,"success")}catch(q){console.error("Error calling adminResetPassword:",q),t(`Li i mt khu: ${q.message}`,"error")}else t("Cp nht thng tin h s thnh cng!","success")}else{let U="";try{const q=u0(ox,"SecondaryApp"),Ne=Cu(q);U=(await O2(Ne,E.email,C)).user.uid,await s5(q)}catch(q){console.error("Auth creation error:",q),q.code==="auth/email-already-in-use"?t("Email ny  c s dng bi ti khon khc.","error"):t(`Li to ti khon Auth: ${q.message}`,"error"),M(!1);return}await Ao(Be(Se,"users",U),{...E,id:U,createdAt:new Date().toISOString()}),t(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}ae(!1)}catch(U){console.error("Error saving user:",U),t("Li khi lu d liu.","error")}finally{M(!1)}}},Pe=async I=>{const U=w.find(q=>q.id===I);if(U)try{const q=U.status==="active"?"inactive":"active";await Qt(Be(Se,"users",I),{status:q}),t(` ${q==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(q){console.error("Error updating status:",q),t("Khng th cp nht trng thi.","error")}},Ae=I=>I.includes("Hiu Trng")||I.includes("Admin")?"bg-red-100 text-red-700 border-red-200":I.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":I.includes("T trng")||I.includes("T ph")||I.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",P=()=>{const I=E.role||"";return I==="admin"?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[i.jsx(To,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[i.jsx(Qn,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):I==="vice_principal"?i.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[i.jsx(To,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[i.jsx(Qn,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):I==="head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(ys,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):I==="vice_head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(ys,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):I==="teacher"?i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[i.jsx(h_,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),i.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):I==="office_head"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(ys,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[i.jsx(Fh,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),i.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:i.jsx(To,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),i.jsx("div",{className:"mt-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("button",{onClick:()=>o("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(vo,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),i.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(To,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),a==="users"&&i.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(I=>i.jsx("button",{onClick:()=>z(I),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${$===I?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:I},I))}),i.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[i.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:O,onChange:I=>V(I.target.value)})]}),i.jsxs("button",{onClick:_e,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[i.jsx(Mo,{className:"h-5 w-5"}),i.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="users"?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length>0?R.map(I=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:i.jsx(xr,{className:"h-6 w-6"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.fullName}),i.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xr,{className:"h-3 w-3"})," ",I.username]}),i.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(o_,{className:"h-3 w-3"})," ",I.email]})]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${Ae(I.roleLabel)}`,children:I.roleLabel}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(vo,{className:"h-3 w-3"})," ",I.group]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[i.jsx(Fh,{className:"h-4 w-4 text-gray-400"}),p[I.accessScope]||I.accessScope]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("button",{onClick:()=>Pe(I.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${I.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:I.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(ys,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):i.jsxs(i.Fragment,{children:[i.jsx(qh,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>J(I),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>Te(I.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:i.jsx(En,{className:"h-4 w-4"})})]})})]},I.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(xr,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:i.jsxs("span",{children:["Tng s ",R.length," ngi dng"]})})]})}):i.jsx(pO,{})}),Q&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[K?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),K?"Cp nht thng tin":"To ti khon mi"]}),i.jsx("button",{onClick:()=>ae(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"userForm",onSubmit:Ee,className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[i.jsx(xr,{className:"h-4 w-4"})," Thng tin ti khon"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,disabled:K,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${K?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:E.username||"",onChange:I=>S({...E,username:I.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:E.email||"",onChange:I=>S({...E,email:I.target.value})})]})]}),K?i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),i.jsx("button",{type:"button",onClick:()=>be(!ce),className:"text-xs text-blue-600 hover:underline font-medium",children:ce?"Hy i mt khu":"Reset mt khu"})]}),ce&&i.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[i.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:C,onChange:I=>D(I.target.value)}),i.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",required:!K,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:C,onChange:I=>D(I.target.value)}),i.jsx(Oo,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:E.fullName||"",onChange:I=>S({...E,fullName:I.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:E.group||"T Chuyn Mn",onChange:I=>S({...E,group:I.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:E.roleLabel||"Gio vin",onChange:te,children:[i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),i.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),i.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),i.jsx("option",{value:"Gio vin",children:"Gio vin"}),i.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),i.jsx("option",{value:"K ton",children:"K ton"}),i.jsx("option",{value:"Vn th",children:"Vn th"}),i.jsx("option",{value:"Y t",children:"Y t"}),i.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),P(),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[i.jsx(Qg,{className:"h-4 w-4"})," Quyn hn b sung"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((re=E.permissions)==null?void 0:re.includes("manage_documents"))||!1,onChange:I=>{const U=E.permissions||[];I.target.checked?S({...E,permissions:[...U,"manage_documents"]}):S({...E,permissions:U.filter(q=>q!=="manage_documents")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),i.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((fe=E.permissions)==null?void 0:fe.includes("manage_office_docs"))||!1,onChange:I=>{const U=E.permissions||[];I.target.checked?S({...E,permissions:[...U,"manage_office_docs"]}):S({...E,permissions:U.filter(q=>q!=="manage_office_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),i.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((pe=E.permissions)==null?void 0:pe.includes("manage_boarding_docs"))||!1,onChange:I=>{const U=E.permissions||[];I.target.checked?S({...E,permissions:[...U,"manage_boarding_docs"]}):S({...E,permissions:U.filter(q=>q!=="manage_boarding_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),i.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((G=E.permissions)==null?void 0:G.includes("manage_plans"))||!1,onChange:I=>{const U=E.permissions||[];I.target.checked?S({...E,permissions:[...U,"manage_plans"]}):S({...E,permissions:U.filter(q=>q!=="manage_plans")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),i.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((ye=E.permissions)==null?void 0:ye.includes("access_system_admin"))||!1,onChange:I=>{const U=E.permissions||[];I.target.checked?S({...E,permissions:[...U,"access_system_admin"]}):S({...E,permissions:U.filter(q=>q!=="access_system_admin")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),i.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",form:"userForm",disabled:k,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," ",K?"Lu thay i":"To ti khon"]})})]})]})})]})},yO={admin:"Ban Gim Hiu",vice_principal:"Ph Hiu Trng",head_teacher:"T Trng Chuyn Mn",vice_head_teacher:"T Ph Chuyn Mn",teacher:"Gio Vin",staff:"Nhn Vin",office_head:"T Trng Vn Phng"},bO=async()=>{const s=Nn(jt(Se,"users"),Us("role","==","admin"));return(await _r(s)).docs.map(t=>t.id)},vO=async()=>{const s=Nn(jt(Se,"users"),Us("role","==","head_teacher"));return(await _r(s)).docs.map(t=>t.id)},wO=async s=>{const e=Nn(jt(Se,"users"),Us("role","==","teacher"),Us("group","==",s));return(await _r(e)).docs.map(a=>a.id)},_O=async s=>{const e=Nn(jt(Se,"users"),Us("role","==","teacher"),Us("accessScope","==",s));return(await _r(e)).docs.map(a=>a.id)},br=async(s,e,t)=>{var a,o,u,d;try{let g=[];const x=await bO();if(t.type==="office"){if(s==="upload"&&e.role==="staff"&&(g=[...x]),s==="comment"){const w=(a=t.extraInfo)==null?void 0:a.uploaderId;w&&g.push(w),g=[...g,...x]}}else if(t.type==="class"){const w=(o=t.extraInfo)==null?void 0:o.classId;if(s==="upload"&&e.role==="teacher"){const N=await vO();g=[...x,...N]}else s==="comment"&&((u=t.extraInfo)!=null&&u.uploaderId?g=[t.extraInfo.uploaderId]:(e.role==="admin"||e.role==="head_teacher"||e.role==="vice_head_teacher")&&w&&(g=[...await _O(w)]))}else if(t.type==="group")if(s==="upload"&&e.role==="head_teacher")if(e.group){const w=await wO(e.group);g=[...x,...w]}else g=[...x];else(s==="comment"||s==="system")&&(d=t.extraInfo)!=null&&d.uploaderId&&g.push(t.extraInfo.uploaderId);else t.type==="boarding"&&e.role==="staff"&&(g=[...x]);if(g=g.filter(w=>w!==e.id),g=[...new Set(g)],g.length===0){console.log("No receivers for this notification. Skipping.");return}let p=e.fullName||e.name;(!p||p===e.role||p==="head_teacher"||p==="vice_head_teacher")&&(p=yO[e.role]||e.role);const b={senderId:e.id,senderName:p,senderAvatar:e.avatar||"",targetPath:t.targetPath,message:`${s==="upload"?" ti ln":" gp  vo"} ${t.name||"ti liu"}`,type:s,isRead:!1,createdAt:new Date().toISOString(),receivers:g,metadata:{fileName:t.name}};await kl(jt(Se,"notifications"),b),console.log(`Notification sent to ${g.length} users.`)}catch(g){console.error("Error creating notification:",g)}},P1=s=>{switch(s){case"excel":return i.jsx(s0,{className:"h-6 w-6 text-green-600"});case"word":return i.jsx(Ge,{className:"h-6 w-6 text-blue-600"});case"pdf":return i.jsx(gf,{className:"h-6 w-6 text-red-600"});default:return i.jsx(Ge,{className:"h-6 w-6 text-gray-500"})}},NO=()=>{var I,U;const s=ar(),{user:e}=bs(),{currentSchoolYear:t}=Ju(),{addToast:a}=Er(),o=ra(),[u,d]=j.useState([]),[g,x]=j.useState("all"),[p,b]=j.useState(""),[w,N]=j.useState(null),[O,V]=j.useState(!1),[$,z]=j.useState(""),[Q,ae]=j.useState(!1),K=j.useRef(null),[H,ce]=j.useState(!1),[be,E]=j.useState(null),[S,C]=j.useState({name:"",category:"general",note:""}),[D,k]=j.useState(!1),[M,R]=j.useState(null),Te=e,_e=j.useMemo(()=>w?u.find(q=>q.id===w.id)||w:null,[u,w]);j.useEffect(()=>{const q=Nn(jt(Se,"office_docs"),tc("uploadDate","desc")),Ne=rr(q,he=>{const De=[];he.forEach(He=>{const st=He.data();(st.schoolYear||"2025-2026")===t&&De.push({id:He.id,...st,comments:st.comments||[]})}),d(De)});return()=>Ne()},[t]);const J=u.filter(q=>{const Ne=g==="all"||q.category===g,he=q.name.toLowerCase().includes(p.toLowerCase())||q.uploader.name.toLowerCase().includes(p.toLowerCase());return Ne&&he});j.useEffect(()=>{var q;O&&((q=K.current)==null||q.scrollIntoView({behavior:"smooth"}))},[_e==null?void 0:_e.comments,O]);const te=q=>{N(q),V(!0)},Ee=(q,Ne)=>{Ne.stopPropagation(),R(q),k(!0)},Pe=async()=>{if(M)try{await Rl(Be(Se,"office_docs",M.id)),a(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),k(!1),R(null),(w==null?void 0:w.id)===M.id&&(V(!1),N(null))}catch(q){console.error("Error deleting document: ",q),a("Li","Khng th xa h s.","error")}},Ae=async q=>{if(q.preventDefault(),!$.trim()||!_e||!Te)return;const Ne={id:Date.now().toString(),userId:Te.id,userName:Te.fullName,userRole:Te.role,content:$,timestamp:new Date().toISOString()};try{const he=Be(Se,"office_docs",_e.id);await Qt(he,{comments:qo(Ne)}),z(""),a(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),Te&&await br("comment",Te,{type:"office",name:_e.name,targetPath:"/office-documents",extraInfo:{uploaderId:_e.uploader.id}})}catch(he){console.error("Error adding comment: ",he),a("Li","Khng th gi bnh lun.","error")}},P=q=>{switch(q){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},re=()=>{C({name:"",category:g==="all"?"general":g,note:""}),E(null),ce(!0)},fe=q=>{if(q.preventDefault(),q.dataTransfer.files&&q.dataTransfer.files[0]){const Ne=q.dataTransfer.files[0];E(Ne),S.name||C(he=>({...he,name:Ne.name.split(".")[0]}))}},pe=q=>{if(q.target.files&&q.target.files[0]){const Ne=q.target.files[0];E(Ne),S.name||C(he=>({...he,name:Ne.name.split(".")[0]}))}},G=async()=>{if(be)try{let q="#";const Ne=sr(Ps,`office_docs/${Date.now()}_${be.name}`);await tr(Ne,be),q=await nr(Ne);const he={...S,uploader:{id:(Te==null?void 0:Te.id)||"unknown",name:(Te==null?void 0:Te.fullName)||"n danh",avatar:(Te==null?void 0:Te.avatar)||"",role:(Te==null?void 0:Te.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),schoolYear:t,comments:[],type:be.name.split(".").pop()||"file",fileType:be.name.split(".").pop()||"file",fileUrl:q};await kl(jt(Se,"office_docs"),he),a("Ti ln thnh cng!",` lu h s: ${S.name}`,"success"),ce(!1)}catch(q){console.error("Error adding document: ",q),a("Li","Khng th ti ln h s.","error")}},ye=(q=!1)=>{if(!_e)return null;const Ne=_e.fileUrl;if(Ne&&Ne!=="#"){const he=jl(Ne);return he==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:Ne,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:he,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:`bg-white border-b border-teal-100 ${o?"px-4 py-3":"px-6 py-4"} flex-shrink-0 z-20 shadow-sm`,children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[!o&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),i.jsxs("div",{className:"flex justify-between items-center gap-3",children:[i.jsxs("h1",{className:`${o?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[i.jsx("span",{className:`${o?"p-1.5":"p-2"} bg-teal-100 rounded-lg text-teal-700`,children:i.jsx(Ge,{className:`${o?"h-5 w-5":"h-6 w-6"}`})}),"Kho K hoch & Bo co"]}),(((I=e==null?void 0:e.permissions)==null?void 0:I.includes("manage_documents"))||((U=e==null?void 0:e.permissions)==null?void 0:U.includes("manage_office_docs")))&&i.jsxs("button",{onClick:re,className:`flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white ${o?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg shadow-md transition-colors font-medium`,children:[i.jsx(Sn,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),i.jsxs("nav",{className:"space-y-1",children:[i.jsxs("button",{onClick:()=>x("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${g==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),i.jsxs("button",{onClick:()=>x("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(XS,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),i.jsxs("button",{onClick:()=>x("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(vA,{className:"h-4 w-4"}),"Y t & Bn tr"]}),i.jsxs("button",{onClick:()=>x("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50 overflow-y-auto ${o?"p-4":"p-6"}`,children:[o&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 no-scrollbar",children:[{id:"all",label:"Tt c"},{id:"finance",label:"Ti chnh"},{id:"medical",label:"Y t"},{id:"general",label:"Hnh chnh"}].map(q=>i.jsx("button",{onClick:()=>x(q.id),className:`flex-shrink-0 px-3 py-1.5 text-xs font-bold rounded-full transition-all ${g===q.id?"bg-teal-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:q.label},q.id))}),i.jsxs("div",{className:`${o?"mb-4":"mb-6"} flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 ${o?"":"max-w-md"} shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all`,children:[i.jsx(El,{className:"h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:p,onChange:q=>b(q.target.value)})]}),o?i.jsxs("div",{className:"space-y-3",children:[J.map(q=>i.jsxs("div",{onClick:()=>te(q),className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm hover:shadow-md hover:border-teal-300 transition-all cursor-pointer",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:P1(q.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 truncate",children:q.name}),i.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:P(q.category)})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-6 w-6 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-[10px]",children:q.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600",children:q.uploader.name}),i.jsxs("span",{className:"text-[10px] text-gray-400",children:[" ",new Date(q.uploadDate).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[(q.comments||[]).length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx($r,{className:"w-2.5 h-2.5 mr-0.5"}),(q.comments||[]).length]}),i.jsx("button",{onClick:Ne=>Ee(q,Ne),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:i.jsx(En,{className:"h-4 w-4"})})]})]})]},q.id)),J.length===0&&i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx(Ge,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),i.jsx("p",{className:"text-sm",children:"Khng c ti liu no"})]})]}):i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(q=>i.jsxs("tr",{onClick:()=>te(q),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:P1(q.type)}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:q.name}),i.jsx("div",{className:"text-xs text-gray-500",children:P(q.category)})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:q.uploader.name.charAt(0)}),i.jsxs("div",{className:"ml-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.uploader.name}),i.jsx("div",{className:"text-xs text-gray-500",children:q.uploader.role})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(q.uploadDate).toLocaleDateString("vi-VN")}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(q.comments||[]).length>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[i.jsx($r,{className:"w-3 h-3 mr-1"}),(q.comments||[]).length," Gp  mi"]}):i.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:Ne=>Ne.stopPropagation(),children:[i.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:i.jsx(wn,{className:"h-4 w-4"})}),i.jsx("button",{onClick:Ne=>Ee(q,Ne),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:i.jsx(En,{className:"h-4 w-4"})})]})})]},q.id))})]})})]})]}),D&&M&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',M.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Pe,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),O&&_e&&(o?i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 bg-white flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>V(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-sm font-bold text-gray-900 truncate",children:_e.name}),i.jsxs("p",{className:"text-[10px] text-gray-500",children:[P(_e.category),"  ",new Date(_e.uploadDate).toLocaleDateString("vi-VN")]})]})]}),i.jsx("div",{className:"flex-1 bg-gray-100 overflow-hidden",children:ye(!1)}),i.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 px-4 py-3 safe-area-inset-bottom",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:"h-7 w-7 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-[10px] flex-shrink-0",children:_e.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:_e.uploader.name}),(_e.comments||[]).length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx($r,{className:"w-2.5 h-2.5 mr-0.5"}),(_e.comments||[]).length]})]}),i.jsxs("a",{href:_e.fileUrl,download:!0,className:"flex items-center gap-1.5 px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium shadow-md",onClick:q=>q.stopPropagation(),children:[i.jsx(wn,{className:"h-4 w-4"}),"Ti v"]})]})})]}):i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>V(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:P(_e.category)}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:_e.name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>V(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(Jt,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>ae(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(c_,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:ye(!1)})]}),i.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:_e.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(_e.uploadDate).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx($r,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[(_e.comments||[]).length>0?(_e.comments||[]).map(q=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:q.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:q.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:q.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800",children:q.content})]})]},q.id)):i.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),i.jsx("div",{ref:K})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:i.jsxs("form",{onSubmit:Ae,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:$,onChange:q=>z(q.target.value)}),i.jsx("button",{type:"submit",disabled:!$.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:i.jsx(Du,{className:"h-4 w-4"})})]})})]})]})]})]})),H&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Sn,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),i.jsx("button",{onClick:()=>ce(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:S.name,onChange:q=>C({...S,name:q.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:S.category,onChange:q=>C({...S,category:q.target.value}),children:[i.jsx("option",{value:"general",children:"Hnh chnh chung"}),i.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),i.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:fe,onDragOver:q=>q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${be?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:pe}),be?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(ys,{className:"h-10 w-10 text-teal-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:be.name}),i.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(be.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${S.category==="finance"?"bg-green-100 text-green-600":S.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:i.jsx(mf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),i.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:S.note,onChange:q=>C({...S,note:q.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:G,disabled:!be,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Sn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},jO=({type:s})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(s){case"excel":return i.jsx(s0,{className:`${e} text-green-600`});case"pdf":return i.jsx(gf,{className:`${e} text-red-500`});case"word":return i.jsx(Ge,{className:`${e} text-blue-600`});default:return i.jsx(Ge,{className:`${e} text-gray-400`})}},TO=()=>{const s=ar(),{user:e}=bs(),{addToast:t}=Er(),a=ra(),[o,u]=j.useState([]),[d,g]=j.useState("menu"),[x,p]=j.useState(""),[b,w]=j.useState(null),[N,O]=j.useState(!1),[V,$]=j.useState(""),z=j.useRef(null),[Q,ae]=j.useState(!1),[K,H]=j.useState(null),[ce,be]=j.useState({type:"menu",startDate:"",endDate:"",name:""}),[E,S]=j.useState(!1),[C,D]=j.useState(null),[k,M]=j.useState(!1),R=e;j.useEffect(()=>{const G=Nn(jt(Se,"boarding_docs"),tc("uploadDate","desc")),ye=rr(G,I=>{const U=[];I.forEach(q=>{U.push({id:q.id,...q.data()})}),u(U)});return()=>ye()},[]);const Te=o.filter(G=>{const ye=G.category===d,I=G.name.toLowerCase().includes(x.toLowerCase());return ye&&I});j.useEffect(()=>{var G;N&&((G=z.current)==null||G.scrollIntoView({behavior:"smooth"}))},[b==null?void 0:b.comments,N]),j.useEffect(()=>{if(ce.type==="menu"&&ce.startDate&&ce.endDate){const G=new Date(ce.startDate);new Date(ce.endDate);const ye=new Date(G.getFullYear(),0,1),I=Math.floor((G.getTime()-ye.getTime())/(1440*60*1e3)),U=Math.ceil((G.getDay()+1+I)/7);be(q=>({...q,name:`Thc n Tun ${U} - Thng ${G.getMonth()+1}`}))}},[ce.startDate,ce.endDate,ce.type]);const _e=G=>{w(G),O(!0)},J=(G,ye)=>{ye&&ye.stopPropagation(),D(G),S(!0)},te=async()=>{if(C)try{await Rl(Be(Se,"boarding_docs",C.id)),t(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),S(!1),D(null),(b==null?void 0:b.id)===C.id&&(O(!1),w(null))}catch(G){console.error("Error deleting document: ",G),t("Li","Khng th xa h s.","error")}},Ee=async G=>{if(G.preventDefault(),!V.trim()||!b||!R)return;const ye={id:Date.now().toString(),userId:R.id,userName:R.fullName,userRole:R.role,content:V,timestamp:new Date().toISOString()};try{const I=Be(Se,"boarding_docs",b.id);await Qt(I,{comments:qo(ye)});const U={...b,comments:[...b.comments,ye]};w(U),$(""),t(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await br("comment",R,{type:"boarding",name:b.name,targetPath:"/boarding-menu"})}catch(I){console.error("Error adding comment: ",I),t("Li","Khng th gi bnh lun.","error")}},Pe=G=>{switch(G){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},Ae=()=>{be({type:d==="menu"?"menu":d==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),H(null),ae(!0)},P=G=>{if(G.preventDefault(),G.dataTransfer.files&&G.dataTransfer.files[0]){const ye=G.dataTransfer.files[0];H(ye),!ce.name&&ce.type!=="menu"&&be(I=>({...I,name:ye.name.split(".")[0]}))}},re=G=>{if(G.target.files&&G.target.files[0]){const ye=G.target.files[0];H(ye),!ce.name&&ce.type!=="menu"&&be(I=>({...I,name:ye.name.split(".")[0]}))}},fe=async()=>{if(K)try{const G=sr(Ps,`boarding_docs/${Date.now()}_${K.name}`),ye=await tr(G,K),I=await nr(ye.ref),U={...ce,uploader:{id:(R==null?void 0:R.id)||"unknown",name:(R==null?void 0:R.fullName)||"n danh",avatar:(R==null?void 0:R.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:K.name.split(".").pop()||"file",category:d,fileUrl:I};await kl(jt(Se,"boarding_docs"),U),t("Ti ln thnh cng!",` lu h s: ${ce.name}`,"success"),ae(!1),R&&await br("upload",R,{type:"boarding",name:ce.name,targetPath:"/boarding-menu"})}catch(G){console.error("Error adding document: ",G),t("Li","Khng th ti ln h s.","error")}},pe=(G=!1)=>{if(!b)return null;if(b.fileUrl&&b.fileUrl!=="#"){const ye=jl(b.fileUrl);return ye==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:b.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:ye,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:`bg-white border-b border-emerald-100 ${a?"px-4 py-3":"px-6 py-4"} flex-shrink-0 z-20 shadow-sm`,children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[!a&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:`${a?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[i.jsx("span",{className:`${a?"p-1.5":"p-2"} bg-emerald-100 rounded-lg text-emerald-700`,children:i.jsx(yp,{className:`${a?"h-5 w-5":"h-6 w-6"}`})}),"Qun l Bn tr & Dinh dng"]}),!a&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[i.jsx(Oo,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),i.jsxs("button",{onClick:Ae,className:`flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white ${a?"px-3 py-2 text-sm":"px-5 py-2.5"} rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5`,children:[i.jsx(Sn,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),i.jsxs("nav",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>g("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(yp,{className:"h-4 w-4"}),"Thc n Tun"]}),i.jsxs("button",{onClick:()=>g("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(To,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),i.jsxs("button",{onClick:()=>g("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(uC,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50 overflow-y-auto ${a?"p-4":"p-6"}`,children:[a&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 no-scrollbar",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"V sinh ATTP"},{id:"nutrition",label:"Dinh dng"}].map(G=>i.jsx("button",{onClick:()=>g(G.id),className:`flex-shrink-0 px-3 py-1.5 text-xs font-bold rounded-full transition-all ${d===G.id?"bg-emerald-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:G.label},G.id))}),i.jsxs("div",{className:`flex items-center justify-between ${a?"mb-4":"mb-8"}`,children:[i.jsx("h2",{className:`${a?"text-base":"text-lg"} font-bold text-gray-800`,children:Pe(d)}),i.jsxs("div",{className:"relative",children:[i.jsx(El,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:x,onChange:G=>p(G.target.value),className:`pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 ${a?"w-40":"w-64"} bg-white shadow-sm`})]})]}),i.jsxs("div",{className:`grid ${a?"grid-cols-2 gap-3":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"}`,children:[Te.map(G=>i.jsxs("div",{onClick:()=>_e(G),className:`group bg-white rounded-2xl border border-gray-100 ${a?"p-4":"p-6"} shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden`,children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),i.jsx("div",{className:`${a?"mb-2":"mb-4"}`,children:a?i.jsxs("div",{className:"h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:[G.type==="excel"&&i.jsx(s0,{className:"h-5 w-5 text-green-600"}),G.type==="pdf"&&i.jsx(gf,{className:"h-5 w-5 text-red-500"}),G.type==="word"&&i.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),!["excel","pdf","word"].includes(G.type)&&i.jsx(Ge,{className:"h-5 w-5 text-gray-400"})]}):i.jsx(jO,{type:G.type})}),i.jsx("h3",{className:`${a?"text-xs":"text-sm"} font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors`,children:G.name}),i.jsxs("p",{className:`${a?"text-[10px]":"text-xs"} text-gray-500 ${a?"mb-2":"mb-4"}`,children:["ng bi ",i.jsx("span",{className:"font-medium text-gray-700",children:G.uploader.name})]}),i.jsxs("div",{className:`w-full ${a?"pt-2":"pt-4"} border-t border-gray-50 flex items-center justify-between mt-auto relative z-10`,children:[i.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[i.jsx(vr,{className:"h-3 w-3"}),new Date(G.uploadDate).toLocaleDateString("vi-VN")]}),i.jsxs("div",{className:"flex items-center gap-1",children:[G.comments.length>0&&i.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] font-bold text-red-500 bg-red-50 px-1 py-0.5 rounded-full",children:[i.jsx(Ca,{className:"h-2.5 w-2.5"}),G.comments.length]}),!a&&i.jsx("button",{onClick:ye=>J(G,ye),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:i.jsx(En,{className:"h-4 w-4"})})]})]})]},G.id)),Te.length===0&&i.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:i.jsx(Ge,{className:"h-8 w-8 text-gray-300"})}),i.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),E&&C&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',C.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),N&&b&&(a?i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 bg-white flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>O(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(gs,{className:"h-5 w-5 rotate-180"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-sm font-bold text-gray-900 truncate",children:b.name}),i.jsxs("p",{className:"text-[10px] text-gray-500",children:[Pe(d),"  ",new Date(b.uploadDate).toLocaleDateString("vi-VN")]})]})]}),i.jsx("div",{className:"flex-1 bg-gray-100 overflow-hidden",children:pe(!1)}),i.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 px-4 py-3 safe-area-inset-bottom",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:"h-7 w-7 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-[10px] flex-shrink-0",children:b.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:b.uploader.name}),b.comments.length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx(Ca,{className:"w-2.5 h-2.5 mr-0.5"}),b.comments.length]})]}),i.jsx("button",{onClick:G=>J(b,G),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(En,{className:"h-4 w-4"})}),i.jsxs("a",{href:b.fileUrl,download:!0,className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium shadow-md",onClick:G=>G.stopPropagation(),children:[i.jsx(wn,{className:"h-4 w-4"}),"Ti v"]})]})})]}):i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>O(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:i.jsx(Ge,{className:"h-5 w-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:b.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{b.fileUrl&&b.fileUrl!=="#"?window.open(b.fileUrl,"_blank"):t("Khng c file","Ti liu ny khng c file nh km.","error")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>O(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>M(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(c_,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:pe(!1)})]}),i.jsxs("div",{className:"w-72 lg:w-80 bg-white flex flex-col h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:b.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(b.uploadDate).toLocaleDateString("vi-VN")})]}),b.category==="menu"&&b.startDate&&b.endDate&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[i.jsx(vr,{className:"h-3 w-3"}),i.jsx("span",{children:new Date(b.startDate).toLocaleDateString("vi-VN")}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(b.endDate).toLocaleDateString("vi-VN")})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx(Ca,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),i.jsxs("div",{className:"space-y-4",children:[b.comments&&b.comments.length>0?b.comments.map(G=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:G.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:G.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:G.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:G.content}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(G.timestamp).toLocaleString("vi-VN")})]})]},G.id)):i.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[i.jsx(Ca,{className:"h-10 w-10 mb-2 opacity-50"}),i.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),i.jsx("div",{ref:z})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[i.jsxs("form",{onSubmit:Ee,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:V,onChange:G=>$(G.target.value)}),i.jsx("button",{type:"submit",disabled:!V.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:i.jsx(Du,{className:"h-4 w-4"})})]}),i.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[i.jsx(Oo,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]})),k&&b&&i.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:i.jsx(Ge,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:b.name}),i.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:i.jsx(i0,{className:"h-5 w-5"})}),i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:i.jsx(a0,{className:"h-5 w-5"})}),i.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),i.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:pe(!0)})]}),Q&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Sn,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),i.jsx("button",{onClick:()=>ae(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(G=>i.jsx("button",{onClick:()=>be(ye=>({...ye,type:G.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${ce.type===G.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:G.label},G.id))})]}),ce.type==="menu"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:ce.startDate,onChange:G=>be({...ce,startDate:G.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:ce.endDate,onChange:G=>be({...ce,endDate:G.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:ce.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:ce.name,onChange:G=>be({...ce,name:G.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:P,onDragOver:G=>G.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${K?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:re}),K?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(ys,{className:"h-10 w-10 text-emerald-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:K.name}),i.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(K.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:i.jsx(mf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:fe,disabled:!K,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Sn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},Sj=({file:s,onClose:e,onSaveSuccess:t,onFileUpdate:a,collectionName:o,storageFolder:u="files",canEdit:d=!1,canApprove:g=!1,canComment:x=!1,canRespond:p=!1,onApprove:b,onRequestRevision:w,onPostComment:N,onEditComment:O,onDeleteComment:V,canManageComment:$})=>{var zs,Hn;const[z,Q]=j.useState(!0),[ae,K]=j.useState(!1),[H,ce]=j.useState(null),[be,E]=j.useState(null),[S,C]=j.useState(!1),[D,k]=j.useState(null),[M,R]=j.useState(!1),[Te,_e]=j.useState(null),[J,te]=j.useState(""),[Ee,Pe]=j.useState(!1),[Ae,P]=j.useState(""),[re,fe]=j.useState(null),[pe,G]=j.useState(null),[ye,I]=j.useState(null),[U,q]=j.useState(null),{user:Ne}=bs(),he=ra(),[De,He]=j.useState(!1),st=j.useRef(null),Xe=j.useRef(Date.now()),gt=(mt,Ye="info")=>{_e({message:mt,type:Ye}),setTimeout(()=>_e(null),3e3)},pt=()=>{var Ye,St,en;return s.type?s.type.toLowerCase():((en=(St=(Ye=s.url)==null?void 0:Ye.split(".").pop())==null?void 0:St.split("?")[0])==null?void 0:en.toLowerCase())||""},Pt=()=>{const mt=pt(),Ye=s.name.replace(/\.[^/.]+$/,"");return["xlsx","xls","csv"].includes(mt)?`${Ye}.xlsx`:["pptx","ppt"].includes(mt)?`${Ye}.pptx`:mt==="pdf"?`${Ye}.pdf`:`${Ye}.docx`},Et=()=>{const mt=pt();return!["pdf"].includes(mt)};j.useEffect(()=>{s.url&&(ce(s.url),fe(null))},[s.url]),j.useEffect(()=>{(async()=>{if(!d||!s.uploaderId){k(null);return}try{const Ye=Be(Se,"users",s.uploaderId),St=await wr(Ye);if(St.exists()){const en=St.data();k(en.signatureUrl||null)}}catch(Ye){console.error("Error fetching author signature:",Ye),k(null)}})()},[d,s.uploaderId]);const zt=()=>{var en;if(!D)return;const Ye=`chu_ky_${((en=s.uploader)==null?void 0:en.replace(/\s+/g,"_"))||"author"}.png`,St=new Image;St.crossOrigin="anonymous",St.onload=()=>{const It=document.createElement("canvas");It.width=St.naturalWidth,It.height=St.naturalHeight;const bt=It.getContext("2d");bt&&(bt.drawImage(St,0,0),It.toBlob(Xt=>{if(Xt){const vt=URL.createObjectURL(Xt),ln=document.createElement("a");ln.href=vt,ln.download=Ye,document.body.appendChild(ln),ln.click(),document.body.removeChild(ln),URL.revokeObjectURL(vt),gt(" ti ch k thnh cng!","success")}},"image/png"))},St.onerror=()=>{console.error("Error loading signature image"),gt("Li khi ti ch k","error")},St.src=D};j.useEffect(()=>{const mt=async Ye=>{if(Ye.data.type==="FILE_SAVED"&&Ye.data.base64&&await vs(Ye.data.base64),Ye.data.type==="FILE_LOAD_ERROR"){console.error("File load error from iframe:",Ye.data);const St=Ye.data.code==="88"?"Ti liu c nh dng phc tp hoc qu ln, khng th xem trc trc tip.":`Li ti ti liu: ${Ye.data.message}`;fe(St),Q(!1)}Ye.data.type==="SAVE_NOT_ALLOWED"&&gt(Ye.data.message||"Bn khng phi l tc gi ca file, vui lng lin h tc gi  yu cu chnh sa.","error"),Ye.data.type==="SAVE_ERROR"&&(console.error("Save error from editor:",Ye.data.message),Ye.data.message&&(Ye.data.message.includes("code: 88")||Ye.data.message.includes("code 88"))?console.log("Ignored error code 88 toast"):gt("Li khi lu: "+(Ye.data.message||"Unknown error"),"error"),K(!1))};return window.addEventListener("message",mt),()=>window.removeEventListener("message",mt)},[s,u,o]);const vs=async mt=>{if(d){K(!0);try{const Ye=atob(mt.split(",")[1]),St=new ArrayBuffer(Ye.length),en=new Uint8Array(St);for(let Ct=0;Ct<Ye.length;Ct++)en[Ct]=Ye.charCodeAt(Ct);const It=pt();let bt="application/vnd.openxmlformats-officedocument.wordprocessingml.document";["xlsx","xls"].includes(It)&&(bt="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),["pptx","ppt"].includes(It)&&(bt="application/vnd.openxmlformats-officedocument.presentationml.presentation");const Xt=new Blob([St],{type:bt}),vt=Date.now(),ln=s.name.replace(/[^a-zA-Z0-9]/g,"_"),as=`${u}/${vt}_${ln}.${It==="docx"||It==="doc"?"docx":It}`,Ns=sr(Ps,as);await tr(Ns,Xt,{contentType:bt});const jn=await nr(Ns),js=Be(Se,o,s.id);await Qt(js,{url:jn,lastModified:new Date().toISOString()}),t==null||t(jn),gt(" lu thnh cng!","success")}catch(Ye){console.error("Error saving:",Ye),gt("Li khi lu: "+Ye.message,"error")}finally{K(!1)}}},ir=()=>{if(!J.trim())return;const mt=x?"comment":"response";N==null||N(J.trim(),mt),te(""),q(null)},Dn=()=>{b==null||b()},Bt=()=>{Pe(!0)},ws=()=>{Ae.trim()&&(w==null||w(Ae.trim()),Pe(!1),P(""))},_s=()=>{if(!s.approval)return null;const mt=s.approval.status;return mt==="approved"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[i.jsx(ys,{className:"h-3 w-3"}),"  duyt"]}):mt==="needs_revision"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"})," Cn sa"]}):i.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700",children:"Ch duyt"})};return i.jsxs("div",{className:"fixed inset-0 z-[70] flex bg-gray-900",children:[i.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[i.jsxs("div",{className:`flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md flex-shrink-0 ${he?"py-2":""}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"font-semibold text-base truncate pr-2",children:s.name}),!he&&i.jsx("p",{className:"text-xs text-blue-100 opacity-80",children:Et()?"Chnh sa trc tip":"Ch xem"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!he&&d&&D&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:zt,className:"flex items-center gap-2 px-3 py-2 bg-indigo-500 hover:bg-indigo-600 rounded-lg transition-colors text-sm font-medium",title:"Ti ch k",children:[i.jsx(Os,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Ti ch k"})]}),i.jsx("button",{onClick:()=>R(!0),className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Hng dn chn ch k",children:i.jsx(wC,{className:"h-5 w-5"})})]}),!he&&i.jsx("div",{className:"text-xs bg-blue-800 px-2 py-1 rounded text-blue-200",children:ae?"ang lu...":"T ng lu khi Save"}),i.jsx("a",{href:s.url,download:s.name,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-blue-500 rounded-full transition-colors",children:i.jsx(Jt,{className:"h-5 w-5"})})]})]}),i.jsx("div",{className:"flex-1 relative bg-gray-100",children:re?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Khng th xem trc ti liu"}),i.jsx("p",{className:"text-gray-600 max-w-md mb-6",children:re}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("a",{href:s.url,download:s.name,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg flex items-center justify-center gap-2 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung"]}),i.jsxs("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(s.url)}&embedded=true`,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 font-bold rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(i_,{className:"h-5 w-5"}),"Xem bng Google Viewer"]})]})]}):i.jsxs(i.Fragment,{children:[s.url&&(he?i.jsx("iframe",{ref:st,src:`https://docs.google.com/viewer?url=${encodeURIComponent(s.url)}&embedded=true`,className:"w-full h-full border-none",title:"Document Viewer",onLoad:()=>Q(!1),sandbox:"allow-scripts allow-same-origin allow-popups"}):i.jsx("iframe",{ref:st,src:`/office/index.html?t=${Xe.current}&src=${encodeURIComponent(s.url)}&filename=${encodeURIComponent(Pt())}&locale=en&mode=edit&canSave=${d&&Et()?"true":"false"}`,className:"w-full h-full border-none",title:"Document Editor",onLoad:()=>Q(!1)})),z&&i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:[i.jsx(Ni,{className:"h-10 w-10 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"ang ti ti liu..."})]})]})}),he&&i.jsxs("div",{className:"bg-white border-t border-gray-200 p-3 pb-safe flex flex-col gap-2 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-20",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[_s(),i.jsxs("button",{onClick:()=>He(!0),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-blue-600 bg-gray-100 px-2 py-1 rounded-full",children:[i.jsx(xp,{className:"h-3 w-3"})," Chi tit & LS",s.commentCount?i.jsx("span",{className:"ml-1 bg-red-500 text-white text-[9px] px-1 rounded-full",children:s.commentCount}):null]})]}),d&&D&&i.jsx("button",{onClick:zt,className:"text-indigo-600 p-1.5 bg-indigo-50 rounded-lg",title:"Ti ch k",children:i.jsx(Os,{className:"h-4 w-4"})})]}),g&&((zs=s.approval)==null?void 0:zs.status)!=="approved"&&i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsxs("button",{onClick:Dn,className:"flex-1 px-3 py-2.5 bg-green-600 active:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(ys,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:Bt,className:"flex-1 px-3 py-2.5 bg-amber-500 active:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Qn,{className:"h-4 w-4"})," Yu cu sa"]})]})]})]}),he&&De&&i.jsx("div",{className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/50 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white w-full max-h-[80vh] rounded-t-2xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"Thng tin & Trao i"}),i.jsx("button",{onClick:()=>He(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(xr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:s.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:s.date?new Date(s.date).toLocaleDateString("vi-VN"):"Khng r"})]})]}),i.jsxs("h4",{className:"font-bold text-gray-800 text-sm mb-2 flex items-center gap-2",children:[i.jsx($r,{className:"h-4 w-4"})," Lch s trao i"]}),i.jsx(L1,{comments:s.comments||[],canManageComment:$,onEdit:G,onDelete:I,canRespond:p,replyingToId:U,setReplyingToId:q,newComment:J,setNewComment:te,handleSubmitComment:ir})]}),i.jsx("div",{className:"p-3 border-t border-gray-100",children:i.jsx("button",{onClick:()=>He(!1),className:"w-full py-3 bg-gray-100 text-gray-700 font-bold rounded-lg",children:"ng"})})]})}),!he&&i.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng tin file"}),_s()]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(xr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:s.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:s.date?new Date(s.date).toLocaleDateString("vi-VN"):"Khng r"})]})]})]}),g&&((Hn=s.approval)==null?void 0:Hn.status)!=="approved"&&i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-blue-50 flex gap-2",children:[i.jsxs("button",{onClick:Dn,className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(ys,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:Bt,className:"flex-1 px-3 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(Qn,{className:"h-4 w-4"})," Yu cu sa"]})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"p-3 bg-white border-b border-gray-100 flex items-center gap-2",children:[i.jsx($r,{className:"h-4 w-4 text-gray-500"}),i.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:"Lch s trao i"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:i.jsx(L1,{comments:s.comments||[],canManageComment:$,onEdit:G,onDelete:I,canRespond:p,replyingToId:U,setReplyingToId:q,newComment:J,setNewComment:te,handleSubmitComment:ir})})]})]}),Ee&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Yu cu sa li"}),i.jsx("textarea",{value:Ae,onChange:mt=>P(mt.target.value),placeholder:"Nhp l do yu cu sa...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>{Pe(!1),P("")},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:ws,disabled:!Ae.trim(),className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Gi yu cu"})]})]})}),pe&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Chnh sa gp "}),i.jsx("textarea",{value:pe.content,onChange:mt=>G({...pe,content:mt.target.value}),placeholder:"Nhp ni dung gp ...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>G(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{pe.content.trim()&&O&&(O(pe.id,pe.content.trim()),G(null))},disabled:!pe.content.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Lu thay i"})]})]})}),ye&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Xc nhn xa"}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{V&&(V(ye),I(null))},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold",children:"Xa"})]})]})}),M&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-[500px] max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(xp,{className:"h-5 w-5 text-blue-600"}),"Hng dn chn ch k vo ti liu"]}),i.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:" Lu  quan trng:"}),i.jsx("p",{className:"text-blue-700",children:"Bn va ti xung file ch k. Hy lm theo cc bc di y  chn ch k vo ti liu Word ca bn."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"M ti liu Word"}),i.jsx("p",{className:"text-gray-600",children:"M ti liu cn chn ch k bng Microsoft Word hoc ng dng son tho vn bn."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"t con tr ti v tr mun chn"}),i.jsx("p",{className:"text-gray-600",children:"Click vo v tr trong ti liu ni bn mun t ch k (thng l cui trang hoc di vn bn)."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Vo menu Insert (Chn)"}),i.jsxs("p",{className:"text-gray-600",children:["Trn thanh menu, chn tab ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Insert"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Chn"}),")."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn Image  Image From File"}),i.jsxs("p",{className:"text-gray-600",children:["Click vo ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Picture"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Hnh nh"}),"), sau  chn ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"This Device"})," hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"From File"}),"."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn file ch k va ti"}),i.jsxs("p",{className:"text-gray-600",children:["Tm v chn file ch k ",i.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded text-xs",children:"chu_ky_[tn_ca_bn].png"})," trong th mc Downloads."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"6"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"iu chnh kch thc v v tr"}),i.jsx("p",{className:"text-gray-600",children:"Sau khi chn, bn c th ko gc nh  thay i kch thc v di chuyn n v tr mong mun."})]})]})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[i.jsx("p",{className:"font-semibold text-green-800 mb-1",children:" Hon thnh!"}),i.jsx("p",{className:"text-green-700 text-xs",children:"Ch k ca bn  c chn vo ti liu. Bn c th lu v chia s ti liu ny."})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:" hiu"})})]})}),Te&&i.jsxs("div",{className:`fixed bottom-4 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-lg shadow-lg text-white font-medium flex items-center gap-2
                    ${Te.type==="success"?"bg-green-600":Te.type==="error"?"bg-red-600":"bg-blue-600"}`,children:[Te.type==="success"&&i.jsx("span",{children:""}),Te.type==="error"&&i.jsx("span",{children:""}),Te.message]})]})},L1=({comments:s,canManageComment:e,onEdit:t,onDelete:a,canRespond:o,replyingToId:u,setReplyingToId:d,newComment:g,setNewComment:x,handleSubmitComment:p})=>i.jsx("div",{className:"space-y-3",children:!s||s.length===0?i.jsx("p",{className:"text-sm text-gray-400 italic text-center py-4",children:"Cha c trao i no"}):s.map(b=>{var w;return i.jsxs("div",{className:`flex gap-2 ${b.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`h-7 w-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 text-white
                            ${b.type==="request"?"bg-amber-500":b.type==="response"?"bg-blue-500":"bg-gray-400"}`,children:((w=b.userName)==null?void 0:w.charAt(0))||"U"}),i.jsxs("div",{className:`flex-1 p-2 rounded-lg text-sm ${b.type==="response"?"bg-blue-50":"bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-semibold text-gray-700 text-xs",children:b.userName}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(b.timestamp).toLocaleDateString("vi-VN")}),(e==null?void 0:e(b))&&i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[i.jsx("button",{onClick:()=>t({id:b.id,content:b.content}),className:"p-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx(Os,{className:"h-3 w-3"})}),i.jsx("button",{onClick:()=>a(b.id),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx(En,{className:"h-3 w-3"})})]})]})]}),i.jsx("p",{className:"text-gray-600",children:b.content}),o&&b.type==="request"&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:!u||u!==b.id?i.jsxs("button",{onClick:()=>d(b.id),className:"text-xs text-blue-600 hover:text-blue-800 font-bold flex items-center gap-1 transition-colors",children:[i.jsx($r,{className:"h-3 w-3"}),"Phn hi yu cu ny"]}):i.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 duration-200",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",autoFocus:!0,value:g,onChange:N=>x(N.target.value),placeholder:"Nhp ni dung phn hi...",className:"flex-1 px-3 py-2 text-sm border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",onKeyDown:N=>N.key==="Enter"&&p()}),i.jsx("button",{onClick:p,disabled:!g.trim(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 shadow-sm",children:i.jsx(Du,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>{d(null),x("")},className:"px-2 py-2 text-gray-400 hover:bg-gray-100 rounded-lg",children:i.jsx(Jt,{className:"h-4 w-4"})})]})})})]})]},b.id)})}),EO=()=>{var ne,me,je;const s=ar(),{user:e}=bs(),{addToast:t}=Er(),[a,o]=r_(),{currentSchoolYear:u}=Ju(),d=ra(),[g,x]=j.useState(!1),[p,b]=j.useState(null),[w,N]=j.useState(!1),[O,V]=j.useState(null),[$,z]=j.useState([]),[Q,ae]=j.useState([]);j.useEffect(()=>{const B=Nn(jt(Se,"plans"),tc("uploadDate","desc")),X=rr(B,ve=>{const we=[],Ve=[];ve.forEach(Me=>{const qe=Me.data(),Ze={id:Me.id,...qe};(qe.schoolYear||"2025-2026")===u&&(qe.type==="plan"?we.push(Ze):Ve.push(Ze))}),z(we),ae(Ve)});return()=>X()},[u]);const K=j.useRef(null);j.useEffect(()=>{const B=a.get("fileId"),X=a.get("highlight");if(!B||X!=="true"||$.length===0&&Q.length===0||K.current===B)return;const ve=$.find(Me=>Me.id===B),we=Q.find(Me=>Me.id===B),Ve=ve||we;if(Ve){K.current=B,b(B),o({},{replace:!0});const Me=document.getElementById(`file-${B}`);Me&&Me.scrollIntoView({behavior:"smooth",block:"center"});const qe=setTimeout(()=>{ce(Ve),E(!0)},300),Ze=setTimeout(()=>{b(null),K.current=null},5e3);return()=>{clearTimeout(qe),clearTimeout(Ze)}}},[a,$,Q,o]);const[H,ce]=j.useState(null),[be,E]=j.useState(!1),[S,C]=j.useState(!1),[D,k]=j.useState(!1),[M,R]=j.useState(""),Te=j.useRef(null),[_e,J]=j.useState(null),[te,Ee]=j.useState(""),[Pe,Ae]=j.useState(!1),[P,re]=j.useState(null),[fe,pe]=j.useState(!1),[G,ye]=j.useState(null),[I,U]=j.useState({type:"plan",name:"",date:"",status:"draft"}),[q,Ne]=j.useState(!1),[he,De]=j.useState(null),[He,st]=j.useState(!1),[Xe,gt]=j.useState(null),[pt,Pt]=j.useState(""),[Et,zt]=j.useState(!1),[vs,ir]=j.useState(null),Dn=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="vice_head_teacher"||(e==null?void 0:e.role)==="teacher",Bt=B=>{if(!e)return!1;const X=B,ve=X.uploaderId&&X.uploaderId===e.id,we=B.uploader===e.fullName;return ve||we},ws=B=>{var ve;return!e||((ve=B.approval)==null?void 0:ve.status)==="approved"?!1:["principal","admin"].includes(e.role)},_s=B=>{var Ve;if(!e)return!1;const X=(Ve=B.approval)==null?void 0:Ve.status;return X==="approved"?!1:Bt(B)&&X==="needs_revision"},zs=B=>e?B.userId===e.id:!1,Hn=B=>{const X=B,ve=X.fileType,we=X.url||"",Ve=we.includes(".docx")||we.includes(".doc"),Me=ve==="word"||ve==="docx"||Ve;return console.log("[isWordFile] Checking:",{fileType:ve,url:we.substring(0,50)+"...",hasWordExtension:Ve,result:Me}),Me},mt=(B,X)=>{X.stopPropagation(),ir(B),zt(!0)},Ye=()=>{t("Lu thnh cng","Ti liu  c cp nht.","success")},St=B=>e?["principal","admin"].includes(e.role):!1,en=async B=>{if(e)try{const X=Be(Se,"plans",B.id);await Qt(X,{approval:{status:"approved",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString()}}),t(" duyt",` duyt h s "${B.title}".`,"success"),await br("system",e,{type:"group",name:` duyt: ${B.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:B.uploaderId}})}catch(X){console.error("Error approving plan:",X),t("Li","Khng th duyt h s. Vui lng th li.","error")}},It=async B=>{if(!(!e||B.uploaderId!==e.id)&&window.confirm("Bn c chc chn mun CHT bin bn ny? Sau khi cht s hin th trng thi ' cht'."))try{const X=Be(Se,"plans",B.id);await Qt(X,{status:"finalized"}),t(" cht bin bn","Bin bn hp  c chuyn sang trng thi  cht.","success")}catch(X){console.error("Error finalizing minute:",X),t("Li","Khng th cht bin bn. Vui lng th li.","error")}},bt=B=>{gt(B),Pt(""),st(!0)},Xt=async()=>{if(!(!e||!Xe))try{const B=Be(Se,"plans",Xe.id),X={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:pt||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},ve={status:"needs_revision",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString(),rejectionReason:pt};await Qt(B,{approval:ve,comments:qo(X),commentCount:(Xe.commentCount||0)+1}),H&&H.id===Xe.id&&ce({...H,approval:ve,comments:[...H.comments||[],X],commentCount:(H.commentCount||0)+1}),t(" gi yu cu sa",` yu cu sa li h s "${Xe.title}".`,"success"),await br("comment",e,{type:"group",name:`Yu cu sa: ${Xe.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${Xe.id}&highlight=true`,extraInfo:{uploaderId:Xe.uploaderId}}),st(!1),gt(null),Pt("")}catch(B){console.error("Error requesting revision:",B),t("Li","Khng th gi yu cu sa. Vui lng th li.","error")}};j.useEffect(()=>{var B;S&&((B=Te.current)==null||B.scrollIntoView({behavior:"smooth"}))},[S,H]);const vt=B=>{ce(B),E(!0)},ln=B=>{if(!e)return!1;const X=B,ve=X.uploaderId&&X.uploaderId===e.id,we=B.uploader===e.fullName;return ve||we},as=(B,X)=>{X.stopPropagation(),De(B),Ne(!0)},Ns=async()=>{if(he&&!ln(he)){t("Khng c quyn","Bn khng th xa ti liu ca ngi khc.","error"),Ne(!1);return}if(he)try{await Rl(Be(Se,"plans",he.id)),t(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),Ne(!1),De(null),(H==null?void 0:H.id)===he.id&&(C(!1),ce(null))}catch(B){console.error("Error deleting document: ",B),t("Li","Khng th xa h s. Vui lng th li.","error")}},jn=async B=>{var ve;if(!M.trim()||!H||!e||!_s(H))return;const X={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:M,timestamp:new Date().toISOString(),type:"response"};try{const we=Be(Se,"plans",H.id);await Qt(we,{approval:{...H.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:qo(X),commentCount:(H.commentCount||0)+1}),R(""),t(" gi phn hi","Phn hi ca bn  c gi. H s chuyn sang trng thi ch duyt.","success");const Ve=(ve=H.approval)==null?void 0:ve.reviewerId;Ve&&Ve!==e.id&&await br("comment",e,{type:"group",name:`Phn hi t ${e.fullName}: ${H.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${H.id}&highlight=true`,extraInfo:{uploaderId:Ve}})}catch(we){console.error("Error adding response: ",we),t("Li","Khng th gi phn hi.","error")}},js=async()=>{var B,X;if(!(!e||!P||!H))try{const ve=Be(Se,"plans",H.id),we=H.comments.filter(Ze=>Ze.id!==P.id),Ve={comments:we,commentCount:we.length};let Me=(B=H.approval)==null?void 0:B.status,qe=(X=H.approval)==null?void 0:X.rejectionReason;P.type==="request"&&Me==="needs_revision"&&(Me="pending",qe=void 0,Ve["approval.status"]="pending",Ve["approval.rejectionReason"]=Eo(),Ve["approval.rejectionReason"]=Eo(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","success")),await Qt(ve,Ve),H&&ce({...H,comments:we,commentCount:we.length,approval:{...H.approval,status:Me,rejectionReason:qe}}),t(" xa","Ni dung  c xa.","success"),Ae(!1),re(null)}catch(ve){console.error("Error deleting comment:",ve),t("Li","Khng th xa ni dung.","error")}},Ct=async()=>{if(O)try{const B=Be(Se,"plans",O.id);await Qt(B,{"approval.status":"pending","approval.rejectionReason":Eo(),"approval.reviewedAt":new Date().toISOString()}),H&&H.id===O.id&&ce({...H,approval:{...H.approval,status:"pending",rejectionReason:void 0}}),t(" hon tc","Yu cu sa  c xa.","success"),N(!1),V(null)}catch(B){console.error("Error deleting active revision:",B),t("Li","Khng th xa yu cu.","error")}},Fn=()=>{U({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),ye(null),pe(!0)},is=B=>{if(B.preventDefault(),B.dataTransfer.files&&B.dataTransfer.files[0]){const X=B.dataTransfer.files[0];ye(X),I.name||U(ve=>({...ve,name:X.name.split(".")[0]}))}},Wn=B=>{if(B.target.files&&B.target.files[0]){const X=B.target.files[0];ye(X),I.name||U(ve=>({...ve,name:X.name.split(".")[0]}))}},Fi=async()=>{if(!(!G&&!I.name))try{let B="#",X="word";if(G){const we=sr(Ps,`plans/${Date.now()}_${G.name}`);await tr(we,G),B=await nr(we),X=G.name.endsWith("pdf")?"pdf":"word"}const ve={...I,title:I.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploaderId:(e==null?void 0:e.id)||"",uploaderRole:(e==null?void 0:e.role)||"teacher",uploadDate:new Date().toISOString(),schoolYear:u,viewers:[],commentCount:0,comments:[],fileType:X,url:B,approval:{status:"pending"}};await kl(jt(Se,"plans"),ve),t("Ti ln thnh cng",` lu h s: ${I.name} (${I.type==="plan"?"K hoch":"Bin bn"})`,"success"),pe(!1),e&&await br("upload",e,{type:"group",name:I.name,targetPath:"/to-chuyen-mon-ke-hoach"})}catch(B){console.error("Error adding document: ",B),t("Li","Khng th lu h s. Vui lng th li.","error")}},Ha=(B=!1)=>{if(!H)return null;const X=H.url;if(X&&X!=="#"){const ve=jl(X);return ve==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:X,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsxs("div",{className:"w-full h-full relative group",children:[i.jsx("iframe",{src:ve,className:"w-full h-full border-0",title:"Document Preview",sandbox:"allow-scripts allow-same-origin allow-popups"}),d&&Ej(X)&&i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 w-full px-4",children:i.jsxs("a",{href:ve,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-white/90 backdrop-blur-sm text-gray-800 border border-gray-200 font-bold rounded-xl shadow-lg hover:bg-gray-50 transition-all font-sans",children:[i.jsx(i_,{className:"h-4 w-4"}),"M trong ca s mi"]})})]})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})},qn=()=>{var B,X,ve;return H?i.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-50",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:H.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(H.uploadDate||H.date||H.createdAt||Date.now()).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 shadow-sm flex items-center gap-2",children:[i.jsx($r,{className:"h-5 w-5 text-gray-500"}),i.jsx("h3",{className:"font-bold text-gray-800",children:"Lch s Yu cu & Phn hi"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 font-sans",children:[((B=H.approval)==null?void 0:B.status)==="needs_revision"&&((X=H.approval)==null?void 0:X.rejectionReason)&&!((ve=H.comments)!=null&&ve.length&&H.comments[H.comments.length-1].type==="request"&&H.comments[H.comments.length-1].content===H.approval.rejectionReason)&&i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 group relative",children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"})," Yu cu sa hin ti"]}),i.jsx("p",{className:"text-sm text-amber-900",children:H.approval.rejectionReason})]})})}),!H.comments||H.comments.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:i.jsx(ys,{className:"h-6 w-6 text-gray-300"})}),i.jsx("p",{className:"text-sm",children:"Cha c lch s chnh sa no."})]}):H.comments.map(we=>i.jsxs("div",{className:`flex gap-3 ${we.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold text-white shadow-sm
                           ${we.type==="request"?"bg-amber-500":"bg-blue-500"}
                        `,children:we.userName.charAt(0)}),i.jsxs("div",{className:"flex-1 max-w-[85%] space-y-1",children:[i.jsx("div",{className:`p-3 rounded-2xl shadow-sm text-sm relative group
                              ${we.type==="request"?"bg-amber-50 border border-amber-100 text-gray-800 rounded-tl-none":we.type==="response"?"bg-blue-50 border border-blue-100 text-gray-800 rounded-tr-none":"bg-white border border-gray-200 text-gray-600"}
                           `,children:i.jsx("p",{children:we.content})}),i.jsx("div",{className:`text-[10px] text-gray-400 flex items-center gap-1 ${we.type==="response"?"justify-end":""}`,children:i.jsx("span",{children:new Date(we.timestamp||we.createdAt).toLocaleString("vi-VN")})})]})]},we.id))]})]}):null};return i.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[i.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4",children:[!d&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:`${d?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 md:gap-3 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[d?i.jsx("button",{onClick:B=>{B.stopPropagation(),s("/")},className:"mr-1",children:i.jsx(gs,{className:"h-5 w-5 rotate-180 text-gray-500"})}):i.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsx("span",{children:"H s T Chuyn Mn"})]}),!d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),Dn&&i.jsxs("button",{onClick:Fn,className:`flex items-center justify-center gap-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg shadow-md transition-all font-medium ${d?"w-full py-2 text-sm":"px-5 py-2.5"}`,children:[i.jsx(Sn,{className:"h-4 w-4"}),i.jsx("span",{children:d?"Ti ln mi":"Ti ln Bin bn/K hoch"})]})]})]})}),i.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8 space-y-6 md:space-y-10 pb-24 md:pb-20",children:[i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[i.jsx("h2",{className:"text-base md:text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),i.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",i.jsx(gs,{className:"h-3 w-3"})]})]}),i.jsxs("div",{className:"grid gap-3 md:gap-4 grid-cols-1",children:[$.map(B=>{var X,ve,we,Ve,Me;return i.jsx("div",{id:`file-${B.id}`,onClick:()=>vt(B),className:`bg-white rounded-xl p-4 md:p-5 border shadow-sm hover:shadow-md transition-all cursor-pointer group
                           ${p===B.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-100 hover:border-orange-200"}
                        `,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 md:h-12 md:w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5 md:h-6 md:w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2 mb-1",children:[i.jsx("h3",{className:"text-sm md:text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors leading-tight line-clamp-2",children:B.title}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[((X=B.approval)==null?void 0:X.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase whitespace-nowrap",children:[i.jsx(pr,{className:"h-3 w-3"})," Ch duyt"]}),((ve=B.approval)==null?void 0:ve.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase whitespace-nowrap",children:[i.jsx(gr,{className:"h-3 w-3"}),"  duyt"]}),(((we=B.approval)==null?void 0:we.status)==="rejected"||((Ve=B.approval)==null?void 0:Ve.status)==="needs_revision")&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-orange-100 text-orange-700 uppercase whitespace-nowrap",title:B.approval.rejectionReason,children:[i.jsx(Os,{className:"h-3 w-3"})," Cn sa"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mt-1 text-[10px] md:text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1 truncate max-w-[100px] md:max-w-none",children:[i.jsx(vo,{className:"h-3 w-3"})," ",B.uploader]}),i.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full flex-shrink-0"}),i.jsxs("span",{className:"flex items-center gap-1 flex-shrink-0",children:[i.jsx(pr,{className:"h-3 w-3"})," ",new Date(B.uploadDate).toLocaleDateString("vi-VN")]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 justify-between md:justify-end w-full md:w-auto mt-1 md:mt-0 border-t md:border-t-0 border-gray-100 md:border-transparent pt-3 md:pt-0",children:[St()&&((Me=B.approval)==null?void 0:Me.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:qe=>{qe.stopPropagation(),en(B)},className:"px-2 md:px-3 py-1.5 text-xs font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(gr,{className:"h-3.5 w-3.5"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Duyt"})]}),i.jsxs("button",{onClick:qe=>{qe.stopPropagation(),bt(B)},className:"px-2 md:px-3 py-1.5 text-xs font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(Os,{className:"h-3.5 w-3.5"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Sa"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 ml-auto md:ml-0",children:[i.jsxs("div",{className:"flex -space-x-2",children:[B.viewers.map((qe,Ze)=>i.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-[10px] md:text-xs font-medium text-gray-600",children:qe},Ze)),B.viewers.length>0&&i.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[8px] md:text-[10px] text-gray-400",children:"+"})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[i.jsx($r,{className:"h-3 w-3 md:h-4 md:w-4"}),i.jsx("span",{className:"text-xs font-medium",children:B.commentCount})]})})]})]})]})},B.id)}),$.length===0&&i.jsxs("div",{className:"text-center py-8 md:py-12 bg-white rounded-xl border border-dashed border-gray-300",children:[i.jsx(Ge,{className:"h-10 w-10 md:h-12 md:w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Cha c k hoch no c ti ln."})]})]})]}),i.jsx("div",{className:"border-t border-gray-200"}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[i.jsx("h2",{className:"text-base md:text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp t"}),i.jsx("button",{className:"p-1 text-gray-400 hover:text-orange-600 rounded-lg hover:bg-orange-50",children:i.jsx(UC,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:i.jsxs("div",{className:"relative pl-4 md:pl-8 py-4 md:py-8 space-y-6 md:space-y-8 before:absolute before:inset-y-0 before:left-4 md:before:left-8 before:w-0.5 before:bg-gray-200",children:[Q.map(B=>{var X,ve,we,Ve;return i.jsxs("div",{className:"relative pl-6 md:pl-8 pr-4 md:pr-6",children:[i.jsx("div",{className:`absolute left-[-5px] md:left-[-6px] top-1 h-3 w-3 md:h-4 md:w-4 rounded-full border-2 md:border-4 border-white ${B.status==="finalized"?"bg-green-500 ring-2 ring-green-100":"bg-orange-400 ring-2 ring-orange-100"} z-10`}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-1 md:gap-4 mb-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-500 font-mono",children:B.date}),i.jsxs("div",{className:"flex items-center gap-2",children:[B.status==="draft"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-orange-100 text-orange-700 rounded-full uppercase border border-orange-200",children:[i.jsx(pr,{className:"h-2.5 w-2.5 inline mr-1"})," ang tho lun"]}),((X=B.approval)==null?void 0:X.status)==="pending"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-amber-100 text-amber-700 rounded-full uppercase border border-amber-200",children:[i.jsx(pr,{className:"h-2.5 w-2.5 inline mr-1"})," Ch duyt"]}),((ve=B.approval)==null?void 0:ve.status)==="approved"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-green-100 text-green-700 rounded-full uppercase border border-green-200",children:[i.jsx(gr,{className:"h-2.5 w-2.5 inline mr-1"})," Duyt"]}),(((we=B.approval)==null?void 0:we.status)==="rejected"||((Ve=B.approval)==null?void 0:Ve.status)==="needs_revision")&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-orange-100 text-orange-700 rounded-full uppercase border border-orange-200",children:[i.jsx(Os,{className:"h-2.5 w-2.5 inline mr-1"})," Yu cu sa"]})]})]}),i.jsxs("div",{onClick:()=>vt(B),className:`group p-3 md:p-4 rounded-xl border-2 transition-all cursor-pointer bg-gray-50 hover:bg-white hover:shadow-md
                                 ${p===B.id?"border-orange-500 ring-2 ring-orange-200":"border-transparent hover:border-orange-100"}
                              `,children:[i.jsx("h3",{className:"text-sm md:text-base font-bold text-gray-800 mb-2 md:mb-3 group-hover:text-orange-700 transition-colors",children:B.title}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-xs md:text-sm text-gray-600 group-hover:border-orange-300 transition-colors flex-1 w-full truncate",children:[B.fileType==="word"?i.jsx(Ge,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}):i.jsx(gf,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),i.jsx("span",{className:"truncate flex-1",children:"Xem bin bn chi tit..."})]})})]})]},B.id)}),Q.length===0&&i.jsx("div",{className:"pl-6 md:pl-8 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})})]})]}),q&&he&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',he.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Ne(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Ns,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),He&&Xe&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Os,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn ang yu cu chnh sa cho ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Xe.title,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:pt,onChange:B=>Pt(B.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{st(!1),gt(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:Xt,disabled:!pt.trim(),className:"px-4 py-2 text-sm font-bold text-white bg-amber-500 rounded-lg hover:bg-amber-600 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Du,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),S&&H&&i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>C(!1)}),i.jsxs("div",{className:`relative w-full ${d?"h-full":"max-w-6xl h-full"} bg-white shadow-2xl flex flex-col animate-in slide-in-from-right duration-300`,children:[i.jsxs("div",{className:`px-4 py-3 border-b border-orange-100 flex items-center gap-3 bg-orange-50/30 flex-shrink-0 safe-area-inset-top ${d?"justify-start":"justify-between"}`,children:[d&&i.jsx("button",{onClick:()=>C(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(gs,{className:"h-5 w-5 rotate-180"})}),i.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[i.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-0.5 block",children:H.type==="plan"?"K hoch":"Bin bn hp"}),i.jsx("h2",{className:`font-bold text-gray-900 leading-tight truncate ${d?"text-sm":"text-lg"}`,children:H.title})]}),i.jsx("div",{className:"flex items-center gap-1",children:!d&&i.jsxs(i.Fragment,{children:[H&&Hn(H)&&Bt(H)&&i.jsxs("button",{onClick:B=>mt(H,B),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors flex items-center gap-1",title:"Chnh sa file Word",children:[i.jsx(Os,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:"Sa"})]}),i.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),ln(H)&&i.jsx("button",{onClick:B=>as(H,B),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti liu",children:i.jsx(En,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>C(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(Jt,{className:"h-6 w-6"})})]})})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row relative",children:[i.jsx("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:i.jsx("div",{className:"flex-1 w-full h-full",children:Ha(!1)})}),!d&&i.jsx("div",{className:"w-80 bg-gray-50 border-l border-gray-200 flex flex-col h-full flex-shrink-0",children:qn()})]}),d&&i.jsxs("div",{className:"bg-white border-t border-gray-200 p-3 pb-safe flex flex-col gap-2 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-20",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[((ne=H.approval)==null?void 0:ne.status)==="approved"&&i.jsxs("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[i.jsx(gr,{className:"h-3 w-3"}),"  duyt"]}),((me=H.approval)==null?void 0:me.status)==="pending"&&i.jsxs("span",{className:"text-xs font-bold text-amber-600 flex items-center gap-1",children:[i.jsx(pr,{className:"h-3 w-3"})," Ch duyt"]}),i.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-blue-600 bg-gray-100 px-3 py-1.5 rounded-full",children:[i.jsx(xp,{className:"h-3 w-3"})," Chi tit & LS",H.commentCount?i.jsx("span",{className:"ml-1 bg-red-500 text-white text-[9px] px-1.5 rounded-full",children:H.commentCount}):null]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"p-2 text-gray-500 bg-gray-50 rounded-lg",children:i.jsx(wn,{className:"h-4 w-4"})}),ln(H)&&i.jsx("button",{onClick:B=>as(H,B),className:"p-2 text-red-500 bg-red-50 rounded-lg",children:i.jsx(En,{className:"h-4 w-4"})})]})]}),St()&&((je=H.approval)==null?void 0:je.status)==="pending"&&i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsxs("button",{onClick:()=>en(H),className:"flex-1 px-3 py-2.5 bg-green-600 active:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(gr,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:()=>bt(H),className:"flex-1 px-3 py-2.5 bg-amber-500 active:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Os,{className:"h-4 w-4"})," Yu cu sa"]})]}),H.type==="minute"&&ln(H)&&H.status!=="finalized"&&i.jsxs("button",{onClick:()=>It(H),className:"w-full mt-1 px-3 py-2.5 bg-blue-600 active:bg-blue-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Oo,{className:"h-4 w-4"})," Cht bin bn"]})]}),d&&g&&i.jsx("div",{className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/50 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white w-full max-h-[85vh] rounded-t-2xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"Thng tin & Lch s"}),i.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:qn()})]})})]})]}),fe&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Sn,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),i.jsx("button",{onClick:()=>pe(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>U({...I,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${I.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),i.jsx("button",{onClick:()=>U({...I,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${I.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:I.name,onChange:B=>U({...I,name:B.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:I.type==="minute"?"Ngy hp":"Thi gian p dng"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:I.date,onChange:B=>U({...I,date:B.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:I.status,onChange:B=>U({...I,status:B.target.value}),children:[i.jsx("option",{value:"draft",children:" ang tho lun"}),i.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:is,onDragOver:B=>B.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${G?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Wn,accept:".pdf,.doc,.docx"}),G?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(ys,{className:"h-10 w-10 text-orange-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:G.name}),i.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(G.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:i.jsx(mf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>pe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Fi,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[i.jsx(Sn,{className:"h-4 w-4"})," Lu h s"]})]})]})}),be&&H&&i.jsx(Sj,{file:{id:H.id,name:H.title,url:H.url||"",type:H.fileType,uploader:H.uploader,uploaderId:H.uploaderId,uploaderRole:H.uploaderRole,date:H.uploadDate,comments:H.comments||[],commentCount:H.commentCount||0,approval:H.approval},onClose:()=>{E(!1),ce(null)},onSaveSuccess:Ye,collectionName:"plans",storageFolder:"plans",canEdit:Bt(H),canApprove:St(),canComment:ws(H),canRespond:_s(H),onApprove:()=>en(H),onRequestRevision:B=>{gt(H),Pt(B),Xt()},onPostComment:(B,X)=>{X==="response"&&(R(B),jn())},canManageComment:zs,onEditComment:async(B,X)=>{if(!(!H||!e))try{const ve=(H.type==="plan","plans"),we=Be(Se,ve,H.id),Me=(H.comments||[]).map(qe=>qe.id===B?{...qe,content:X,editedAt:new Date().toISOString()}:qe);await Qt(we,{comments:Me}),ce({...H,comments:Me}),t(" cp nht gp ","Ni dung gp   c lu.","success")}catch(ve){console.error("Error editing comment:",ve),t("Li","Khng th cp nht gp .","error")}},onDeleteComment:async B=>{var ve,we,Ve;if(!H||!e)return;const X=(ve=H.comments)==null?void 0:ve.find(Me=>Me.id===B);if(X)try{const Me=(H.type==="plan","plans"),qe=Be(Se,Me,H.id),rt=(H.comments||[]).filter(Jn=>Jn.id!==B),$t={comments:rt,commentCount:rt.length};let on=(we=H.approval)==null?void 0:we.status,Kt=(Ve=H.approval)==null?void 0:Ve.rejectionReason;X.type==="request"&&on==="needs_revision"&&(on="pending",Kt=void 0,$t["approval.status"]="pending",$t["approval.rejectionReason"]=Eo(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","success")),X.type==="response"&&rt.some(aa=>aa.type==="request")&&on==="pending"&&(on="needs_revision",$t["approval.status"]="needs_revision",t(" hon tc","Phn hi  b xa. Bn c th phn hi li.","success")),await Qt(qe,$t),ce({...H,comments:rt,commentCount:rt.length,approval:{...H.approval,status:on,rejectionReason:Kt}}),t(" xa gp ","Gp   c xa thnh cng.","success")}catch(Me){console.error("Error deleting comment:",Me),t("Li","Khng th xa gp .","error")}}}),Pe&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(En,{className:"h-6 w-6 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xa gp ?"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Bn c chc chn mun xa gp  ny khng? Hnh ng ny khng th hon tc."}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:js,className:"px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa gp "})]})]})})}),w&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-6 w-6 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hy yu cu sa?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa yu cu sa ny? ",i.jsx("br",{}),"H s s quay v trng thi ",i.jsx("span",{className:"font-bold text-blue-600",children:"'Ch duyt'"}),"."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Khng xa"}),i.jsx("button",{onClick:Ct,className:"px-4 py-2 text-sm font-bold text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors",children:"ng  xa"})]})]})})})]})},SO=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],CO=s=>{const e=s.split("-");let t=parseInt(e[0]),a=parseInt(e[1]);return(isNaN(t)||isNaN(a))&&(t=new Date().getFullYear(),a=t+1),[{id:"m9",name:`Thng 09/${t}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${t}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${t}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${t}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${a}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${a}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${a}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${a}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${a}`,fileCount:0,files:[]}]},U1=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],AO=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],RO=()=>{var qn;const{classId:s}=KE(),e=ar(),[t,a]=r_(),{user:o}=bs(),u=ra(),{addToast:d}=Er(),{currentSchoolYear:g}=Ju(),[x,p]=j.useState(null),b=(ne,me,je)=>{if(!ne)return!1;const B=Ve=>Ve.toLowerCase().trim().replace(/\s+/g," "),X=B(ne),ve=B(me),we=je?B(je):"";return X===ve||X===we||we&&X.includes(we)||we&&we.includes(X)?!0:(console.log("[matchesClassScope] No match:",{scope:ne,classId:me,className:je,normalizedScope:X,normalizedName:we}),!1)},[w,N]=j.useState(null),[O,V]=j.useState({}),[$,z]=j.useState({}),[Q,ae]=j.useState([]),[K,H]=j.useState([]),[ce,be]=j.useState(!0),[E,S]=j.useState("students"),[C,D]=j.useState("week"),[k,M]=j.useState(()=>{const me=new Date().getMonth()+1;return me===9?"m9":me>=10?`m${me}`:`m0${me}`}),[R,Te]=j.useState("all"),[_e,J]=j.useState(""),[te,Ee]=j.useState(null),[Pe,Ae]=j.useState(!1),[P,re]=j.useState("");j.useRef(null);const[fe,pe]=j.useState(!1),[G,ye]=j.useState(null),[I,U]=j.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[q,Ne]=j.useState(!1),[he,De]=j.useState(null),[He,st]=j.useState(!1),[Xe,gt]=j.useState(null),[pt,Pt]=j.useState(""),[Et,zt]=j.useState(null),[vs,ir]=j.useState(!1),[Dn,Bt]=j.useState(null),ws=ne=>{if(!o)return!1;const me=ne,je=me.uploaderId&&me.uploaderId===o.id,B=me.uploader===o.fullName;return je||B},_s=()=>{d("Lu thnh cng","Ti liu  c cp nht.","success")},zs=ne=>{var X;if(!o)return!1;const me=ne,je=me.uploaderRole;return!je||((X=me.approval)==null?void 0:X.status)==="approved"?!1:o.role==="vice_principal"?["head_teacher","vice_head_teacher","teacher"].includes(je):["head_teacher","vice_head_teacher"].includes(o.role)?je==="teacher":!1},Hn=ne=>{var Me,qe,Ze;if(!o)return!1;const me=ne,je=(Me=me.approval)==null?void 0:Me.status;if(je==="approved")return!1;const B=me.uploaderId===o.id,X=((qe=me.uploader)==null?void 0:qe.toLowerCase())===((Ze=o.fullName)==null?void 0:Ze.toLowerCase()),ve=B||X,we=je==="needs_revision",Ve=ve&&we;return console.log("[canRespond]",{fileName:ne.name,uploaderId:me.uploaderId,userId:o.id,isOwner:ve,approvalStatus:je,needsRevision:we,result:Ve}),Ve},mt=ne=>{var B,X;if(!o)return!1;const me=ne.uploaderId===o.id,je=((B=ne.uploader)==null?void 0:B.toLowerCase())===((X=o.fullName)==null?void 0:X.toLowerCase());return me||je},Ye=ne=>o?ne.userId===o.id:!1,St=async()=>{var ne,me;if(!(!Dn||!te||!o))try{const je=Be(Se,"class_files",te.id),X=(te.comments||[]).filter(Me=>Me.id!==Dn.id),ve={comments:X,commentCount:X.length,hasNewComments:X.length>0};let we=(ne=te.approval)==null?void 0:ne.status,Ve=(me=te.approval)==null?void 0:me.rejectionReason;Dn.type==="request"&&we==="needs_revision"&&(we="pending",Ve=void 0,ve["approval.status"]="pending",ve["approval.rejectionReason"]=Eo(),d(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),Dn.type==="response"&&X.some(qe=>qe.type==="request")&&we==="pending"&&(we="needs_revision",ve["approval.status"]="needs_revision",d(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Qt(je,ve),Ee({...te,comments:X,commentCount:X.length,hasNewComments:X.length>0,approval:{...te.approval,status:we,rejectionReason:Ve}}),ir(!1),Bt(null),d(" xa gp ","Gp   c xa thnh cng.","success")}catch(je){console.error("Error deleting comment:",je),d("Li","Khng th xa gp .","error")}},en=ne=>{if(!o)return!1;const me=ne.uploaderId===o.id,je=ne.uploader===o.fullName;if(me||!ne.uploaderId&&je)return!1;let B=ne.uploaderRole;return ne.uploaderId&&O[ne.uploaderId]?B=O[ne.uploaderId]:ne.uploader&&$[ne.uploader]&&(B=$[ne.uploader]),B?o.role==="vice_principal"?["head_teacher","vice_head_teacher"].includes(B):["head_teacher","vice_head_teacher"].includes(o.role)?B==="teacher":!1:!1},It=ne=>{let me=[...ne];if(_e.trim()){const je=_e.toLowerCase().trim();me=me.filter(B=>{var X,ve;return((X=B.name)==null?void 0:X.toLowerCase().includes(je))||((ve=B.uploader)==null?void 0:ve.toLowerCase().includes(je))})}switch(R){case"new":const je=new Date;je.setDate(je.getDate()-7),me=me.filter(B=>new Date(B.date)>=je).sort((B,X)=>new Date(X.date).getTime()-new Date(B.date).getTime());break;case"unread":me=me.filter(B=>B.comments&&B.comments.length>0||B.hasNewComments);break;case"all":default:me=me.sort((B,X)=>new Date(X.date).getTime()-new Date(B.date).getTime());break}return me},bt=async ne=>{if(o)try{const me=Be(Se,"class_files",ne.id);await Qt(me,{approval:{status:"approved",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString()}}),d(" duyt h s",`H s "${ne.name}"  c ph duyt.`,"success");const je=`/class/${s}`;await br("system",o,{type:"class",name:` duyt: ${ne.name}`,targetPath:je,extraInfo:{uploaderId:ne.uploaderId}})}catch(me){console.error("Error approving file:",me),d("Li","Khng th duyt h s. Vui lng th li.","error")}},Xt=async()=>{if(!(!o||!Xe))try{const ne=Be(Se,"class_files",Xe.id),me={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:pt||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},je={status:"needs_revision",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString(),rejectionReason:pt};await Qt(ne,{approval:je,comments:qo(me),commentCount:(Xe.commentCount||0)+1}),te&&te.id===Xe.id&&Ee({...te,approval:je,comments:[...te.comments||[],me],commentCount:(te.commentCount||0)+1}),d(" gi yu cu sa",` yu cu sa li h s "${Xe.name}".`,"success");const B=`/class/${s}?fileId=${Xe.id}&highlight=true`;await br("comment",o,{type:"class",name:`Yu cu sa: ${Xe.name}`,targetPath:B,extraInfo:{uploaderId:Xe.uploaderId,classId:s}}),st(!1),gt(null),Pt("")}catch(ne){console.error("Error requesting revision:",ne),d("Li","Khng th gi yu cu sa. Vui lng th li.","error")}},vt=async ne=>{var je;if(!P.trim()||!te||!o||!Hn(te))return;const me={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:P,timestamp:new Date().toISOString(),type:"response"};try{const B=Be(Se,"class_files",te.id);await Qt(B,{approval:{...te.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:qo(me),commentCount:(te.commentCount||0)+1}),Ee({...te,approval:{...te.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:[...te.comments||[],me],commentCount:(te.commentCount||0)+1}),re(""),d(" gi phn hi","Phn hi  c gi. H s chuyn sang trng thi ch duyt.","success");const X=(je=te.approval)==null?void 0:je.reviewerId;if(X&&X!==o.id){const ve=`/class/${s}?fileId=${te.id}&highlight=true`;await br("comment",o,{type:"class",name:`Phn hi t ${o.fullName}: ${te.name}`,targetPath:ve,extraInfo:{uploaderId:X}})}}catch(B){console.error("Error adding response:",B),d("Li","Khng th gi phn hi.","error")}};j.useEffect(()=>{if(!s)return;(async()=>{try{const me=Be(Se,"classes",s),je=await wr(me);let B=null,X=[];if(je.exists())B=je.data();else{console.warn("Class not found in Firestore, checking Mock...");const ve=SO.find(we=>we.id===s);ve&&(B=ve)}if(B){console.log("[ClassRecords] Class data loaded:",{classId:s,className:B.name,currentUser:o==null?void 0:o.fullName,userScope:o==null?void 0:o.accessScope,userRole:o==null?void 0:o.role});const ve=we=>we.toLowerCase().trim().replace(/\s+/g," ");try{const we=Nn(jt(Se,"users"),Us("role","in",["teacher","head_teacher","vice_head_teacher"])),Me=(await _r(we)).docs.map(Kt=>Kt.data()),qe={},Ze={};Me.forEach(Kt=>{Kt.id&&Kt.role&&(qe[Kt.id]=Kt.role),Kt.fullName&&Kt.role&&(Ze[Kt.fullName]=Kt.role)}),V(qe),z(Ze);const rt=new Set,$t=ve(s),on=ve(B.name);Me.forEach(Kt=>{if(!Kt.accessScope)return;const Jn=ve(Kt.accessScope);(Jn===$t||Jn===on||on.includes(Jn)||Jn.includes(on))&&rt.add(Kt.fullName)}),X=Array.from(rt),console.log("[ClassRecords] Found teachers from DB:",X),X.length===0&&(console.warn("[ClassRecords] No teacher found for class:",s),X=["Cha phn cng"])}catch(we){console.error("Error fetching teacher details:",we),X=["Cha phn cng"]}N({id:s,...B,teachers:X,teacher:X.join(", ")})}}catch(me){console.error("Error fetching class:",me)}finally{be(!1)}})()},[s]),j.useEffect(()=>{if(!s)return;const ne=Nn(jt(Se,"class_files"),Us("classId","==",s)),me=rr(ne,je=>{const B=je.docs.map(we=>({id:we.id,...we.data()}));H(B),console.log("[ClassRecords] Fetched files from Firestore:",B.length),B.forEach(we=>console.log(`  - ${we.name} | month: "${we.month}" | type: ${we.planType}`));const ve=CO(g).map(we=>{const Ve=B.filter(Me=>{if((Me.schoolYear||"2025-2026")!==g||(Me.category||"plan")!=="plan")return!1;let rt=!1;const $t=we.id.replace("m",""),on=String(Me.month||"").replace("m","");return parseInt($t,10)===parseInt(on,10)&&(rt=!0),!!rt});return{...we,files:Ve,fileCount:Ve.length}});console.log("[ClassRecords] Grouped files into folders:",ve.map(we=>`${we.name}: ${we.fileCount} files`)),ae(ve)});return()=>me()},[s]),j.useEffect(()=>{!o||ce||o.role==="teacher"&&w&&!b(o.accessScope,s,w.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:o.accessScope,classId:s,className:w.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[o,s,e,w,ce]);const ln=j.useRef(null);if(j.useEffect(()=>{const ne=t.get("fileId"),me=t.get("highlight");if(console.log("[ClassRecords] URL Params:",{fileId:ne,highlight:me,allFilesCount:K.length}),!ne||me!=="true"||K.length===0||ln.current===ne)return;const je=K.find(B=>B.id===ne);if(je){console.log("[ClassRecords] Found target file:",je.name,"category:",je.category),ln.current=ne;const B=je.category||"plan";if(B==="plan"){S("plan");const Ve=je.planType||"week";D(Ve)}else B==="assessment"?S("assessment"):B==="students"?S("students"):B==="steam"&&S("steam");const X=Q.find(Ve=>Ve.files.some(Me=>Me.id===ne));X&&(console.log("[ClassRecords] Auto-expanding folder:",X.id),M(X.id)),p(ne),a({},{replace:!0});const ve=setTimeout(()=>{Ee(je),Ae(!0)},300),we=setTimeout(()=>{p(null),ln.current=null},5e3);return()=>{clearTimeout(ve),clearTimeout(we)}}else console.warn("[ClassRecords] File not found:",ne)},[t,a,Q,K]),ce)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!w)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),i.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const as=((o==null?void 0:o.role)==="teacher"||(o==null?void 0:o.role)==="head_teacher"||(o==null?void 0:o.role)==="vice_head_teacher")&&b(o.accessScope,s,w==null?void 0:w.name);console.log("[ClassRecords] Upload permission:",{canUpload:as,userRole:o==null?void 0:o.role,userScope:o==null?void 0:o.accessScope,classId:s,className:w==null?void 0:w.name});const Ns=(ne,me)=>{me.stopPropagation(),Ee(ne),Ae(!0)},jn=(ne,me,je)=>{je.stopPropagation(),De({file:ne,folderId:me}),Ne(!0)},js=async()=>{if(he)try{console.log("[DELETE] Attempting to delete file:",{fileId:he.file.id,fileName:he.file.name,classId:s}),await Rl(Be(Se,"class_files",he.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),d(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(ne){console.error("[DELETE] Error deleting file:",ne),console.error("[DELETE] Error code:",ne.code),console.error("[DELETE] Error message:",ne.message);let me="Vui lng th li sau.";ne.code==="permission-denied"&&(me="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),d("Li khi xa ti liu",me,"error")}finally{Ne(!1),De(null)}},Ct=ne=>{M(k===ne?null:ne)},Fn=ne=>{switch(ne){case"word":return i.jsx(Ge,{className:"h-5 w-5 text-blue-600"});case"excel":return i.jsx(Ge,{className:"h-5 w-5 text-green-600"});case"pdf":return i.jsx(Ge,{className:"h-5 w-5 text-red-600"});default:return i.jsx(Ge,{className:"h-5 w-5 text-gray-400"})}},is=()=>{U({area:E,planType:C,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),ye(null),pe(!0)},Wn=ne=>{if(ne.preventDefault(),ne.dataTransfer.files&&ne.dataTransfer.files[0]){const me=ne.dataTransfer.files[0];ye(me),I.name||U(je=>({...je,name:me.name.split(".")[0]}))}},Fi=ne=>{if(ne.target.files&&ne.target.files[0]){const me=ne.target.files[0];ye(me),I.name||U(je=>({...je,name:me.name.split(".")[0]}))}},Ha=async()=>{var ne,me;if(!(!G||!I.name||!o))try{const je=sr(Ps,`class-files/${s}/${Date.now()}_${G.name}`);await tr(je,G);const B=await nr(je),X={name:I.name,type:((ne=G.name.split(".").pop())==null?void 0:ne.toLowerCase())||"other",url:B,uploader:o.fullName,uploaderId:o.id,uploaderRole:o.role,schoolYear:g,date:new Date().toISOString(),classId:s,month:I.month,monthName:((me=U1.find(ve=>ve.value===I.month))==null?void 0:me.label)||"Thng khc",hasNewComments:!1,commentCount:0,comments:[],createdAt:Fp(),planType:I.planType,week:I.week,category:I.area,approval:{status:"pending"}};await kl(jt(Se,"class_files"),X),d("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),br("upload",o,{type:"class",name:I.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),pe(!1)}catch(je){console.error("Error uploading file:",je),d("Li khi ti ln","Vui lng th li sau.","error")}};return i.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[i.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[!u&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),i.jsx(gs,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity flex-1 min-w-0",onClick:()=>e("/"),children:[i.jsx("div",{className:`${u?"h-10 w-10":"h-16 w-16"} rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm flex-shrink-0`,children:i.jsx("span",{className:`${u?"text-lg":"text-2xl"} font-bold text-amber-600`,children:((qn=w==null?void 0:w.name)==null?void 0:qn.split(" ").pop())||"?"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h1",{className:`${u?"text-lg":"text-2xl"} font-bold text-gray-900 truncate`,children:(w==null?void 0:w.name)||"Lp hc"}),!u&&i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(l_,{className:"h-4 w-4"})," GVCN:"]}),w!=null&&w.teachers&&w.teachers.length>1?i.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.teachers.map((ne,me)=>i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:ne},me))}):i.jsx("span",{className:"font-semibold text-gray-700",children:(w==null?void 0:w.teacher)||"Cha cp nht"})]}),u&&(w==null?void 0:w.teachers)&&i.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[w.teachers.length," gio vin"]})]})]}),as&&i.jsxs("button",{onClick:is,className:`${u?"p-3 rounded-full":"flex items-center gap-2 px-6 py-3 rounded-xl"} bg-amber-500 hover:bg-amber-600 text-white shadow-md shadow-amber-200 transition-all font-bold flex-shrink-0`,title:"Ti ln h s lp",children:[i.jsx(Sn,{className:"h-5 w-5"}),!u&&i.jsx("span",{children:"Ti ln h s lp"})]})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:u?i.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 gap-0.5",children:[i.jsxs("button",{onClick:()=>S("students"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="students"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(Yg,{className:"h-4 w-4"}),i.jsx("span",{children:"Lp"})]}),i.jsxs("button",{onClick:()=>S("plan"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="plan"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),i.jsx("span",{children:"KH GD"})]}),i.jsxs("button",{onClick:()=>S("assessment"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="assessment"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx($g,{className:"h-4 w-4"}),i.jsx("span",{children:"nh gi"})]}),i.jsxs("button",{onClick:()=>S("steam"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="steam"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(Kg,{className:"h-4 w-4"}),i.jsx("span",{children:"STEAM"})]})]}):i.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[i.jsxs("button",{onClick:()=>S("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Yg,{className:"h-4 w-4"}),"DANH SCH LP",E==="students"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),"K HOCH GIO DC",E==="plan"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx($g,{className:"h-4 w-4"}),"NH GI TR",E==="assessment"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Kg,{className:"h-4 w-4"}),"D N STEAM",E==="steam"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),i.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Te("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),i.jsx("button",{onClick:()=>Te("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),i.jsxs("button",{onClick:()=>Te("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[i.jsx(Ca,{className:"h-3 w-3"})," C gp "]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(El,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",value:_e,onChange:ne=>J(ne.target.value),className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),E==="plan"&&i.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[i.jsx("button",{onClick:()=>D("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${C==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),i.jsx("button",{onClick:()=>D("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${C==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),i.jsx("button",{onClick:()=>D("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${C==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),i.jsxs("div",{className:"space-y-4",children:[E==="plan"&&i.jsxs(i.Fragment,{children:[C==="year"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Xv,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",g]}),(()=>{let ne=Q.flatMap(me=>me.files).filter(me=>me.planType==="year");return ne=It(ne),ne.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ne.map(me=>i.jsxs("div",{onClick:je=>Ns(me,je),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Fn(me.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:me.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(me.date).toLocaleDateString("vi-VN")})]}),i.jsx("button",{onClick:je=>jn(me,"year",je),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(En,{className:"h-4 w-4"})})]},me.id))})})()]}),(C==="month"||C==="week")&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(ne=>{let me=ne.files.filter(X=>C==="month"?X.planType==="month":C==="week"?X.planType==="week"||!X.planType:!1);me=It(me);const je=me.length,B=k===ne.id;return i.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[i.jsxs("div",{onClick:()=>Ct(ne.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${B?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${B?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:i.jsx(Xv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${B?"text-amber-900":"text-gray-700"}`,children:ne.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[je," ",C==="month"?"K hoch thng":"K hoch tun"]})]})]}),i.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${B?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:i.jsx(gs,{className:"h-5 w-5"})})]}),B&&i.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[me.map(X=>{var ve,we,Ve,Me,qe,Ze,rt,$t,on,Kt,Jn,aa;return i.jsxs("div",{onClick:An=>{x===X.id&&p(null),Ns(X,An)},className:`flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all ${x===X.id?"border-red-400 bg-red-50 animate-pulse ring-2 ring-red-300":"border-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[Fn(X.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[u?i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700 truncate",children:X.name}),i.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[((ve=X.approval)==null?void 0:ve.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 whitespace-nowrap",children:[i.jsx(pr,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((we=X.approval)==null?void 0:we.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700 whitespace-nowrap",children:[i.jsx(gr,{className:"h-2.5 w-2.5"}),"  duyt"]}),((Ve=X.approval)==null?void 0:Ve.status)==="needs_revision"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse whitespace-nowrap",children:[i.jsx(Jv,{className:"h-2.5 w-2.5"})," Cn sa"]}),((Me=X.approval)==null?void 0:Me.status)==="responded"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700 whitespace-nowrap",children:[i.jsx(Ca,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((qe=X.approval)==null?void 0:qe.status)==="rejected"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700 whitespace-nowrap",title:X.approval.rejectionReason,children:[i.jsx(qh,{className:"h-2.5 w-2.5"})," T chi"]}),i.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[i.jsx(vr,{className:"h-2.5 w-2.5"})," ",new Date(X.date).toLocaleDateString("vi-VN")]}),C==="week"&&X.week&&i.jsxs("span",{className:"px-1 py-0.5 bg-gray-100 rounded text-[10px] text-gray-600 font-medium whitespace-nowrap",children:["T",X.week]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:X.name}),((Ze=X.approval)==null?void 0:Ze.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700",children:[i.jsx(pr,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((rt=X.approval)==null?void 0:rt.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700",children:[i.jsx(gr,{className:"h-2.5 w-2.5"}),"  duyt"]}),(($t=X.approval)==null?void 0:$t.status)==="needs_revision"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse",children:[i.jsx(Jv,{className:"h-2.5 w-2.5"})," Cn sa"]}),((on=X.approval)==null?void 0:on.status)==="responded"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700",children:[i.jsx(Ca,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((Kt=X.approval)==null?void 0:Kt.status)==="rejected"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700",title:X.approval.rejectionReason,children:[i.jsx(qh,{className:"h-2.5 w-2.5"})," T chi"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(vr,{className:"h-3 w-3"})," ",new Date(X.date).toLocaleDateString("vi-VN"),C==="week"&&X.week&&i.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",X.week]})]})]}),((Jn=X.approval)==null?void 0:Jn.status)==="rejected"&&X.approval.rejectionReason&&i.jsxs("div",{className:"mt-1 text-[10px] text-red-600",children:[i.jsx("span",{className:"font-semibold",children:"L do:"})," ",X.approval.rejectionReason]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[en(X)&&((aa=X.approval)==null?void 0:aa.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:An=>{An.stopPropagation(),bt(X)},className:"px-2 py-1 text-[9px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(gr,{className:"h-3 w-3"})," Duyt"]}),i.jsxs("button",{onClick:An=>{An.stopPropagation(),gt(X),Pt(""),st(!0)},className:"px-2 py-1 text-[9px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(Os,{className:"h-3 w-3"})," Yu cu sa"]})]}),X.hasNewComments&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[i.jsx(Ca,{className:"h-3 w-3"}),"Gp  mi"]}),mt(X)&&i.jsx("button",{onClick:An=>jn(X,ne.id,An),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(En,{className:"h-4 w-4"})})]})]},X.id)}),me.length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},ne.id)})})]}),E==="students"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Yg,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{let ne=K.filter(me=>me.category==="students");return ne=It(ne),console.log("[Student List Tab] Total files:",K.length,"Student files:",ne.length),console.log("[Student List Tab] All file categories:",K.map(me=>({name:me.name,category:me.category}))),ne.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ne.map(me=>i.jsxs("div",{onClick:je=>Ns(me,je),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Fn(me.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:me.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(me.date).toLocaleDateString("vi-VN")})]}),mt(me)&&i.jsx("button",{onClick:je=>jn(me,"students",je),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(En,{className:"h-4 w-4"})})]},me.id))})})()]}),E==="assessment"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx($g,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),E==="steam"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx(Kg,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),q&&he&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',he.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Ne(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:js,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),He&&Xe&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Os,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu gio vin sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp yu cu chnh sa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Xe.name,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:pt,onChange:ne=>Pt(ne.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{st(!1),gt(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:Xt,disabled:!pt.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Du,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),fe&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Sn,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),i.jsx("button",{onClick:()=>pe(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(ne=>i.jsx("button",{onClick:()=>U({...I,area:ne.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${I.area===ne.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ne.label},ne.id))})]}),I.area==="plan"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(ne=>i.jsx("button",{onClick:()=>U({...I,planType:ne.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${I.planType===ne.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ne.label},ne.id))})]}),I.area!=="students"&&(I.area!=="plan"||I.planType!=="year")&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:I.month,onChange:ne=>U({...I,month:ne.target.value}),children:U1.map(ne=>i.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),(I.area!=="plan"||I.planType==="week")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:I.week,onChange:ne=>U({...I,week:ne.target.value}),children:AO.map(ne=>i.jsx("option",{value:ne.value,children:ne.label},ne.value))})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[I.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:I.name,onChange:ne=>U({...I,name:ne.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:Wn,onDragOver:ne=>ne.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${G?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Fi}),G?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(ys,{className:"h-10 w-10 text-amber-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:G.name}),i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(G.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:i.jsx(mf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),i.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:I.note,onChange:ne=>U({...I,note:ne.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>pe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Ha,disabled:!G||!I.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Sn,{className:"h-4 w-4"})," Lu h s"]})]})]})}),vs&&Dn&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(En,{className:"h-6 w-6 text-red-500"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Xa gp "}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm text-gray-700 italic",children:['"',Dn.content.substring(0,100),Dn.content.length>100?"...":"",'"']}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{ir(!1),Bt(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{onClick:St,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors",children:"Xa"})]})]})}),Pe&&te&&i.jsx(Sj,{file:{id:te.id,name:te.name,url:te.url||"",type:te.type,uploader:te.uploader,uploaderId:te.uploaderId,uploaderRole:te.uploaderRole,date:te.date,comments:te.comments,approval:te.approval},onClose:()=>{Ae(!1),Ee(null)},onSaveSuccess:_s,collectionName:"class_files",storageFolder:`class-files/${s}`,canEdit:ws(te),canApprove:en&&en(te),canComment:zs(te),canRespond:Hn(te),onApprove:()=>bt(te),onRequestRevision:ne=>{gt(te),Pt(ne),Xt()},onPostComment:ne=>{re(ne),vt()},canManageComment:Ye,onEditComment:async(ne,me)=>{if(!(!te||!o))try{const je=Be(Se,"class_files",te.id),X=(te.comments||[]).map(ve=>ve.id===ne?{...ve,content:me,editedAt:new Date().toISOString()}:ve);await Qt(je,{comments:X}),Ee({...te,comments:X}),d(" cp nht gp ","Ni dung gp   c lu.","success")}catch(je){console.error("Error editing comment:",je),d("Li","Khng th cp nht gp .","error")}},onDeleteComment:async ne=>{var je,B,X;if(!te||!o)return;const me=(je=te.comments)==null?void 0:je.find(ve=>ve.id===ne);if(me)try{const ve=Be(Se,"class_files",te.id),Ve=(te.comments||[]).filter(rt=>rt.id!==ne),Me={comments:Ve,commentCount:Ve.length,hasNewComments:Ve.length>0};let qe=(B=te.approval)==null?void 0:B.status,Ze=(X=te.approval)==null?void 0:X.rejectionReason;me.type==="request"&&qe==="needs_revision"&&(qe="pending",Ze=void 0,Me["approval.status"]="pending",Me["approval.rejectionReason"]=Eo(),d(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),me.type==="response"&&Ve.some($t=>$t.type==="request")&&qe==="pending"&&(qe="needs_revision",Me["approval.status"]="needs_revision",d(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Qt(ve,Me),Ee({...te,comments:Ve,commentCount:Ve.length,hasNewComments:Ve.length>0,approval:{...te.approval,status:qe,rejectionReason:Ze}}),d(" xa gp ","Gp   c xa thnh cng.","success")}catch(ve){console.error("Error deleting comment:",ve),d("Li","Khng th xa gp .","error")}}})]})},kO=()=>{const s=ar(),{login:e,isAuthenticated:t}=bs();j.useEffect(()=>{t&&s("/")},[t,s]),j.useEffect(()=>{(async()=>{try{const K=Be(Se,"app_settings","login_background"),H=await wr(K);H.exists()&&H.data().imageUrl&&z(H.data().imageUrl)}catch(K){console.error("Error fetching background:",K)}})()},[]);const[a,o]=j.useState(""),[u,d]=j.useState("");j.useEffect(()=>{(async()=>{try{const K=Be(Se,"app_settings","system_logo"),H=await wr(K);H.exists()&&H.data().imageUrl&&o(H.data().imageUrl);const ce=Be(Se,"app_settings","certification_logo"),be=await wr(ce);be.exists()&&be.data().imageUrl&&d(be.data().imageUrl)}catch(K){console.error("Error fetching logo:",K)}})()},[]);const[g,x]=j.useState(!1),[p,b]=j.useState(!1),[w,N]=j.useState(""),[O,V]=j.useState({username:"",password:""}),[$,z]=j.useState("/login-background.jpg"),Q=async ae=>{ae.preventDefault(),b(!0),N("");const K=await e(O.username,O.password);b(!1),K||N("Tn ng nhp hoc mt khu khng ng.")};return i.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 z-0",children:i.jsx("img",{src:$,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:i.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:a?i.jsx("img",{src:a,alt:"Logo",className:"h-12 w-12 object-contain"}):i.jsx(r0,{className:"h-12 w-12 text-blue-900"})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:f_}),i.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),w&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),w]}),i.jsxs("form",{onSubmit:Q,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(xr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:O.username,onChange:ae=>V({...O,username:ae.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Oo,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:O.password,onChange:ae=>V({...O,password:ae.target.value})}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>x(!g),children:g?i.jsx(pp,{className:"h-5 w-5"}):i.jsx(bl,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),i.jsx("div",{className:"text-sm",children:i.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:["ng nhp",i.jsx(Hh,{className:"h-4 w-4"})]})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[i.jsx(u_,{className:"h-3 w-3"}),i.jsxs("span",{children:["H tr k thut: ",i.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),u&&i.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:i.jsx("img",{src:u,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},IO=()=>i.jsx(sO,{children:i.jsx(iO,{children:i.jsx(hO,{children:i.jsx(kS,{children:i.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[i.jsx(cO,{}),i.jsx("main",{className:"flex-grow",children:i.jsxs(lS,{children:[i.jsx(Hr,{path:"/",element:i.jsx(fO,{})}),i.jsx(Hr,{path:"/login",element:i.jsx(kO,{})}),i.jsx(Hr,{path:"/van-ban-chi-dao",element:i.jsx(mO,{})}),i.jsx(Hr,{path:"/van-ban-truong",element:i.jsx(gO,{})}),i.jsx(Hr,{path:"/quan-tri-he-thong",element:i.jsx(xO,{})}),i.jsx(Hr,{path:"/to-van-phong-ke-hoach",element:i.jsx(NO,{})}),i.jsx(Hr,{path:"/to-van-phong-thuc-don",element:i.jsx(TO,{})}),i.jsx(Hr,{path:"/to-chuyen-mon-ke-hoach",element:i.jsx(EO,{})}),i.jsx(Hr,{path:"/class/:classId",element:i.jsx(RO,{})})]})})]})})})})}),Cj=document.getElementById("root");if(!Cj)throw new Error("Could not find root element to mount to");const DO=gE.createRoot(Cj);DO.render(i.jsx(qr.StrictMode,{children:i.jsx(IO,{})}));
