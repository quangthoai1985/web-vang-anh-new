const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DEA9_vr5.es-CeMaHJjR.js","assets/index-CvBqQJbG.es-BwG5Ra_W.js","assets/index-Ch5xh5Co.es-Y0D1ymE5.js","assets/default-BS6z0SoE.es-0Dp3JUBc.js","assets/index-CiiMW3Y4.es-BCvq86wk.js","assets/index-CSaZZzfe.es-Q4IY_rj9.js","assets/index-DLYzyLb1.es-2BR1DlyS.js","assets/index-X1JJ2-Xe.es-CJ1QpmqM.js","assets/index-C045ejDF.es-CIqHpVEK.js"])))=>i.map(i=>d[i]);
var t5e=Object.defineProperty;var BX=t=>{throw TypeError(t)};var n5e=(t,e,n)=>e in t?t5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mt=(t,e,n)=>n5e(t,typeof e!="symbol"?e+"":e,n),TD=(t,e,n)=>e.has(t)||BX("Cannot "+n);var F=(t,e,n)=>(TD(t,e,"read from private field"),n?n.call(t):e.get(t)),st=(t,e,n)=>e.has(t)?BX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),je=(t,e,n,r)=>(TD(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),pe=(t,e,n)=>(TD(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ole(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kD={exports:{}},SE={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jX;function r5e(){if(jX)return SE;jX=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return SE.Fragment=e,SE.jsx=n,SE.jsxs=n,SE}var $X;function i5e(){return $X||($X=1,kD.exports=r5e()),kD.exports}var v=i5e(),CD={exports:{}},Yn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zX;function s5e(){if(zX)return Yn;zX=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),f=Symbol.iterator;function h(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function b(J,K,re){this.props=J,this.context=K,this.refs=w,this.updater=re||m}b.prototype.isReactComponent={},b.prototype.setState=function(J,K){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,K,"setState")},b.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function E(){}E.prototype=b.prototype;function A(J,K,re){this.props=J,this.context=K,this.refs=w,this.updater=re||m}var x=A.prototype=new E;x.constructor=A,y(x,b.prototype),x.isPureReactComponent=!0;var T=Array.isArray;function R(){}var k={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function N(J,K,re){var X=re.ref;return{$$typeof:t,type:J,key:K,ref:X!==void 0?X:null,props:re}}function L(J,K){return N(J.type,K,J.props)}function M(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function C(J){var K={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(re){return K[re]})}var D=/\/+/g;function O(J,K){return typeof J=="object"&&J!==null&&J.key!=null?C(""+J.key):K.toString(36)}function $(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(R,R):(J.status="pending",J.then(function(K){J.status==="pending"&&(J.status="fulfilled",J.value=K)},function(K){J.status==="pending"&&(J.status="rejected",J.reason=K)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function U(J,K,re,X,me){var G=typeof J;(G==="undefined"||G==="boolean")&&(J=null);var B=!1;if(J===null)B=!0;else switch(G){case"bigint":case"string":case"number":B=!0;break;case"object":switch(J.$$typeof){case t:case e:B=!0;break;case u:return B=J._init,U(B(J._payload),K,re,X,me)}}if(B)return me=me(J),B=X===""?"."+O(J,0):X,T(me)?(re="",B!=null&&(re=B.replace(D,"$&/")+"/"),U(me,K,re,"",function(Y){return Y})):me!=null&&(M(me)&&(me=L(me,re+(me.key==null||J&&J.key===me.key?"":(""+me.key).replace(D,"$&/")+"/")+B)),K.push(me)),1;B=0;var z=X===""?".":X+":";if(T(J))for(var de=0;de<J.length;de++)X=J[de],G=z+O(X,de),B+=U(X,K,re,G,me);else if(de=h(J),typeof de=="function")for(J=de.call(J),de=0;!(X=J.next()).done;)X=X.value,G=z+O(X,de++),B+=U(X,K,re,G,me);else if(G==="object"){if(typeof J.then=="function")return U($(J),K,re,X,me);throw K=String(J),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return B}function W(J,K,re){if(J==null)return J;var X=[],me=0;return U(J,X,"","",function(G){return K.call(re,G,me++)}),X}function ce(J){if(J._status===-1){var K=J._result;K=K(),K.then(function(re){(J._status===0||J._status===-1)&&(J._status=1,J._result=re)},function(re){(J._status===0||J._status===-1)&&(J._status=2,J._result=re)}),J._status===-1&&(J._status=0,J._result=K)}if(J._status===1)return J._result.default;throw J._result}var se=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},Q={map:W,forEach:function(J,K,re){W(J,function(){K.apply(this,arguments)},re)},count:function(J){var K=0;return W(J,function(){K++}),K},toArray:function(J){return W(J,function(K){return K})||[]},only:function(J){if(!M(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Yn.Activity=d,Yn.Children=Q,Yn.Component=b,Yn.Fragment=n,Yn.Profiler=i,Yn.PureComponent=A,Yn.StrictMode=r,Yn.Suspense=l,Yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Yn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return k.H.useMemoCache(J)}},Yn.cache=function(J){return function(){return J.apply(null,arguments)}},Yn.cacheSignal=function(){return null},Yn.cloneElement=function(J,K,re){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var X=y({},J.props),me=J.key;if(K!=null)for(G in K.key!==void 0&&(me=""+K.key),K)!_.call(K,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&K.ref===void 0||(X[G]=K[G]);var G=arguments.length-2;if(G===1)X.children=re;else if(1<G){for(var B=Array(G),z=0;z<G;z++)B[z]=arguments[z+2];X.children=B}return N(J.type,me,X)},Yn.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:s,_context:J},J},Yn.createElement=function(J,K,re){var X,me={},G=null;if(K!=null)for(X in K.key!==void 0&&(G=""+K.key),K)_.call(K,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(me[X]=K[X]);var B=arguments.length-2;if(B===1)me.children=re;else if(1<B){for(var z=Array(B),de=0;de<B;de++)z[de]=arguments[de+2];me.children=z}if(J&&J.defaultProps)for(X in B=J.defaultProps,B)me[X]===void 0&&(me[X]=B[X]);return N(J,G,me)},Yn.createRef=function(){return{current:null}},Yn.forwardRef=function(J){return{$$typeof:a,render:J}},Yn.isValidElement=M,Yn.lazy=function(J){return{$$typeof:u,_payload:{_status:-1,_result:J},_init:ce}},Yn.memo=function(J,K){return{$$typeof:c,type:J,compare:K===void 0?null:K}},Yn.startTransition=function(J){var K=k.T,re={};k.T=re;try{var X=J(),me=k.S;me!==null&&me(re,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(R,se)}catch(G){se(G)}finally{K!==null&&re.types!==null&&(K.types=re.types),k.T=K}},Yn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Yn.use=function(J){return k.H.use(J)},Yn.useActionState=function(J,K,re){return k.H.useActionState(J,K,re)},Yn.useCallback=function(J,K){return k.H.useCallback(J,K)},Yn.useContext=function(J){return k.H.useContext(J)},Yn.useDebugValue=function(){},Yn.useDeferredValue=function(J,K){return k.H.useDeferredValue(J,K)},Yn.useEffect=function(J,K){return k.H.useEffect(J,K)},Yn.useEffectEvent=function(J){return k.H.useEffectEvent(J)},Yn.useId=function(){return k.H.useId()},Yn.useImperativeHandle=function(J,K,re){return k.H.useImperativeHandle(J,K,re)},Yn.useInsertionEffect=function(J,K){return k.H.useInsertionEffect(J,K)},Yn.useLayoutEffect=function(J,K){return k.H.useLayoutEffect(J,K)},Yn.useMemo=function(J,K){return k.H.useMemo(J,K)},Yn.useOptimistic=function(J,K){return k.H.useOptimistic(J,K)},Yn.useReducer=function(J,K,re){return k.H.useReducer(J,K,re)},Yn.useRef=function(J){return k.H.useRef(J)},Yn.useState=function(J){return k.H.useState(J)},Yn.useSyncExternalStore=function(J,K,re){return k.H.useSyncExternalStore(J,K,re)},Yn.useTransition=function(){return k.H.useTransition()},Yn.version="19.2.0",Yn}var HX;function T$(){return HX||(HX=1,CD.exports=s5e()),CD.exports}var De=T$();const cf=Ole(De);var _D={exports:{}},AE={},ND={exports:{}},ID={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VX;function o5e(){return VX||(VX=1,(function(t){function e(U,W){var ce=U.length;U.push(W);e:for(;0<ce;){var se=ce-1>>>1,Q=U[se];if(0<i(Q,W))U[se]=W,U[ce]=Q,ce=se;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],ce=U.pop();if(ce!==W){U[0]=ce;e:for(var se=0,Q=U.length,J=Q>>>1;se<J;){var K=2*(se+1)-1,re=U[K],X=K+1,me=U[X];if(0>i(re,ce))X<Q&&0>i(me,re)?(U[se]=me,U[X]=ce,se=X):(U[se]=re,U[K]=ce,se=K);else if(X<Q&&0>i(me,ce))U[se]=me,U[X]=ce,se=X;else break e}}return W}function i(U,W){var ce=U.sortIndex-W.sortIndex;return ce!==0?ce:U.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function x(U){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function T(U){if(y=!1,x(U),!m)if(n(l)!==null)m=!0,R||(R=!0,C());else{var W=n(c);W!==null&&$(T,W.startTime-U)}}var R=!1,k=-1,_=5,N=-1;function L(){return w?!0:!(t.unstable_now()-N<_)}function M(){if(w=!1,R){var U=t.unstable_now();N=U;var W=!0;try{e:{m=!1,y&&(y=!1,E(k),k=-1),h=!0;var ce=f;try{t:{for(x(U),d=n(l);d!==null&&!(d.expirationTime>U&&L());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var Q=se(d.expirationTime<=U);if(U=t.unstable_now(),typeof Q=="function"){d.callback=Q,x(U),W=!0;break t}d===n(l)&&r(l),x(U)}else r(l);d=n(l)}if(d!==null)W=!0;else{var J=n(c);J!==null&&$(T,J.startTime-U),W=!1}}break e}finally{d=null,f=ce,h=!1}W=void 0}}finally{W?C():R=!1}}}var C;if(typeof A=="function")C=function(){A(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,O=D.port2;D.port1.onmessage=M,C=function(){O.postMessage(null)}}else C=function(){b(M,0)};function $(U,W){k=b(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var ce=f;f=W;try{return U()}finally{f=ce}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ce=f;f=U;try{return W()}finally{f=ce}},t.unstable_scheduleCallback=function(U,W,ce){var se=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?se+ce:se):ce=se,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ce+Q,U={id:u++,callback:W,priorityLevel:U,startTime:ce,expirationTime:Q,sortIndex:-1},ce>se?(U.sortIndex=ce,e(c,U),n(l)===null&&U===n(c)&&(y?(E(k),k=-1):y=!0,$(T,ce-se))):(U.sortIndex=Q,e(l,U),m||h||(m=!0,R||(R=!0,C()))),U},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(U){var W=f;return function(){var ce=f;f=W;try{return U.apply(this,arguments)}finally{f=ce}}}})(ID)),ID}var UX;function a5e(){return UX||(UX=1,ND.exports=o5e()),ND.exports}var RD={exports:{}},ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WX;function l5e(){if(WX)return ra;WX=1;var t=T$();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ra.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},ra.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},ra.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ra.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ra.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin),f=typeof c.integrity=="string"?c.integrity:void 0,h=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:f,fetchPriority:h}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:f,fetchPriority:h,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ra.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ra.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ra.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ra.requestFormReset=function(l){r.d.r(l)},ra.unstable_batchedUpdates=function(l,c){return l(c)},ra.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},ra.useFormStatus=function(){return o.H.useHostTransitionStatus()},ra.version="19.2.0",ra}var qX;function c5e(){if(qX)return RD.exports;qX=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),RD.exports=l5e(),RD.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GX;function u5e(){if(GX)return AE;GX=1;var t=a5e(),e=T$(),n=c5e();function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function s(p){var g=p,S=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(S=g.return),p=g.return;while(p)}return g.tag===3?S:null}function o(p){if(p.tag===13){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function a(p){if(p.tag===31){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function l(p){if(s(p)!==p)throw Error(r(188))}function c(p){var g=p.alternate;if(!g){if(g=s(p),g===null)throw Error(r(188));return g!==p?null:p}for(var S=p,I=g;;){var j=S.return;if(j===null)break;var V=j.alternate;if(V===null){if(I=j.return,I!==null){S=I;continue}break}if(j.child===V.child){for(V=j.child;V;){if(V===S)return l(j),p;if(V===I)return l(j),g;V=V.sibling}throw Error(r(188))}if(S.return!==I.return)S=j,I=V;else{for(var ge=!1,Le=j.child;Le;){if(Le===S){ge=!0,S=j,I=V;break}if(Le===I){ge=!0,I=j,S=V;break}Le=Le.sibling}if(!ge){for(Le=V.child;Le;){if(Le===S){ge=!0,S=V,I=j;break}if(Le===I){ge=!0,I=V,S=j;break}Le=Le.sibling}if(!ge)throw Error(r(189))}}if(S.alternate!==I)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?p:g}function u(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=u(p),g!==null)return g;p=p.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function C(p){return p===null||typeof p!="object"?null:(p=M&&p[M]||p["@@iterator"],typeof p=="function"?p:null)}var D=Symbol.for("react.client.reference");function O(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===D?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case y:return"Fragment";case b:return"Profiler";case w:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList";case N:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case m:return"Portal";case A:return p.displayName||"Context";case E:return(p._context.displayName||"Context")+".Consumer";case x:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case k:return g=p.displayName||null,g!==null?g:O(p.type)||"Memo";case _:g=p._payload,p=p._init;try{return O(p(g))}catch{}}return null}var $=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},se=[],Q=-1;function J(p){return{current:p}}function K(p){0>Q||(p.current=se[Q],se[Q]=null,Q--)}function re(p,g){Q++,se[Q]=p.current,p.current=g}var X=J(null),me=J(null),G=J(null),B=J(null);function z(p,g){switch(re(G,g),re(me,p),re(X,null),g.nodeType){case 9:case 11:p=(p=g.documentElement)&&(p=p.namespaceURI)?aX(p):0;break;default:if(p=g.tagName,g=g.namespaceURI)g=aX(g),p=lX(g,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}K(X),re(X,p)}function de(){K(X),K(me),K(G)}function Y(p){p.memoizedState!==null&&re(B,p);var g=X.current,S=lX(g,p.type);g!==S&&(re(me,p),re(X,S))}function ee(p){me.current===p&&(K(X),K(me)),B.current===p&&(K(B),wE._currentValue=ce)}var ae,ie;function H(p){if(ae===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);ae=g&&g[1]||"",ie=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+p+ie}var be=!1;function Te(p,g){if(!p||be)return"";be=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(g){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(St){var yt=St}Reflect.construct(p,[],_t)}else{try{_t.call()}catch(St){yt=St}p.call(_t.prototype)}}else{try{throw Error()}catch(St){yt=St}(_t=p())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(St){if(St&&yt&&typeof St.stack=="string")return[St.stack,yt.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=I.DetermineComponentFrameRoot(),ge=V[0],Le=V[1];if(ge&&Le){var Ke=ge.split(`
`),mt=Le.split(`
`);for(j=I=0;I<Ke.length&&!Ke[I].includes("DetermineComponentFrameRoot");)I++;for(;j<mt.length&&!mt[j].includes("DetermineComponentFrameRoot");)j++;if(I===Ke.length||j===mt.length)for(I=Ke.length-1,j=mt.length-1;1<=I&&0<=j&&Ke[I]!==mt[j];)j--;for(;1<=I&&0<=j;I--,j--)if(Ke[I]!==mt[j]){if(I!==1||j!==1)do if(I--,j--,0>j||Ke[I]!==mt[j]){var At=`
`+Ke[I].replace(" at new "," at ");return p.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",p.displayName)),At}while(1<=I&&0<=j);break}}}finally{be=!1,Error.prepareStackTrace=S}return(S=p?p.displayName||p.name:"")?H(S):""}function Z(p,g){switch(p.tag){case 26:case 27:case 5:return H(p.type);case 16:return H("Lazy");case 13:return p.child!==g&&g!==null?H("Suspense Fallback"):H("Suspense");case 19:return H("SuspenseList");case 0:case 15:return Te(p.type,!1);case 11:return Te(p.type.render,!1);case 1:return Te(p.type,!0);case 31:return H("Activity");default:return""}}function oe(p){try{var g="",S=null;do g+=Z(p,S),S=p,p=p.return;while(p);return g}catch(I){return`
Error generating stack: `+I.message+`
`+I.stack}}var te=Object.prototype.hasOwnProperty,ye=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,we=t.unstable_shouldYield,Ae=t.unstable_requestPaint,Re=t.unstable_now,Pe=t.unstable_getCurrentPriorityLevel,Ce=t.unstable_ImmediatePriority,Oe=t.unstable_UserBlockingPriority,Fe=t.unstable_NormalPriority,$e=t.unstable_LowPriority,he=t.unstable_IdlePriority,q=t.log,ne=t.unstable_setDisableYieldValue,Ee=null,Se=null;function ze(p){if(typeof q=="function"&&ne(p),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(Ee,p)}catch{}}var Ie=Math.clz32?Math.clz32:ft,qe=Math.log,Ye=Math.LN2;function ft(p){return p>>>=0,p===0?32:31-(qe(p)/Ye|0)|0}var We=256,nt=262144,bt=4194304;function ct(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Ft(p,g,S){var I=p.pendingLanes;if(I===0)return 0;var j=0,V=p.suspendedLanes,ge=p.pingedLanes;p=p.warmLanes;var Le=I&134217727;return Le!==0?(I=Le&~V,I!==0?j=ct(I):(ge&=Le,ge!==0?j=ct(ge):S||(S=Le&~p,S!==0&&(j=ct(S))))):(Le=I&~V,Le!==0?j=ct(Le):ge!==0?j=ct(ge):S||(S=I&~p,S!==0&&(j=ct(S)))),j===0?0:g!==0&&g!==j&&(g&V)===0&&(V=j&-j,S=g&-g,V>=S||V===32&&(S&4194048)!==0)?g:j}function tn(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function Zt(p,g){switch(p){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var p=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),p}function Ne(p){for(var g=[],S=0;31>S;S++)g.push(p);return g}function le(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function fe(p,g,S,I,j,V){var ge=p.pendingLanes;p.pendingLanes=S,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=S,p.entangledLanes&=S,p.errorRecoveryDisabledLanes&=S,p.shellSuspendCounter=0;var Le=p.entanglements,Ke=p.expirationTimes,mt=p.hiddenUpdates;for(S=ge&~S;0<S;){var At=31-Ie(S),_t=1<<At;Le[At]=0,Ke[At]=-1;var yt=mt[At];if(yt!==null)for(mt[At]=null,At=0;At<yt.length;At++){var St=yt[At];St!==null&&(St.lane&=-536870913)}S&=~_t}I!==0&&ve(p,I,0),V!==0&&j===0&&p.tag!==0&&(p.suspendedLanes|=V&~(ge&~g))}function ve(p,g,S){p.pendingLanes|=g,p.suspendedLanes&=~g;var I=31-Ie(g);p.entangledLanes|=g,p.entanglements[I]=p.entanglements[I]|1073741824|S&261930}function He(p,g){var S=p.entangledLanes|=g;for(p=p.entanglements;S;){var I=31-Ie(S),j=1<<I;j&g|p[I]&g&&(p[I]|=g),S&=~j}}function Xe(p,g){var S=g&-g;return S=(S&42)!==0?1:it(S),(S&(p.suspendedLanes|g))!==0?0:S}function it(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Lt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Bt(){var p=W.p;return p!==0?p:(p=window.event,p===void 0?32:RX(p.type))}function Wt(p,g){var S=W.p;try{return W.p=p,g()}finally{W.p=S}}var Jt=Math.random().toString(36).slice(2),qt="__reactFiber$"+Jt,et="__reactProps$"+Jt,Ze="__reactContainer$"+Jt,Ue="__reactEvents$"+Jt,at="__reactListeners$"+Jt,vt="__reactHandles$"+Jt,Dt="__reactResources$"+Jt,$t="__reactMarker$"+Jt;function Hn(p){delete p[qt],delete p[et],delete p[Ue],delete p[at],delete p[vt]}function dn(p){var g=p[qt];if(g)return g;for(var S=p.parentNode;S;){if(g=S[Ze]||S[qt]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(p=mX(p);p!==null;){if(S=p[qt])return S;p=mX(p)}return g}p=S,S=p.parentNode}return null}function bn(p){if(p=p[qt]||p[Ze]){var g=p.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return p}return null}function sn(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p.stateNode;throw Error(r(33))}function Jn(p){var g=p[Dt];return g||(g=p[Dt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Rn(p){p[$t]=!0}var lt=new Set,jt={};function cn(p,g){gt(p,g),gt(p+"Capture",g)}function gt(p,g){for(jt[p]=g,p=0;p<g.length;p++)lt.add(g[p])}var Vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yr={},Xn={};function Un(p){return te.call(Xn,p)?!0:te.call(yr,p)?!1:Vn.test(p)?Xn[p]=!0:(yr[p]=!0,!1)}function zn(p,g,S){if(Un(g))if(S===null)p.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":p.removeAttribute(g);return;case"boolean":var I=g.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){p.removeAttribute(g);return}}p.setAttribute(g,""+S)}}function zt(p,g,S){if(S===null)p.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(g);return}p.setAttribute(g,""+S)}}function pn(p,g,S,I){if(I===null)p.removeAttribute(S);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(S);return}p.setAttributeNS(g,S,""+I)}}function Nn(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Pr(p){var g=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function gs(p,g,S){var I=Object.getOwnPropertyDescriptor(p.constructor.prototype,g);if(!p.hasOwnProperty(g)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var j=I.get,V=I.set;return Object.defineProperty(p,g,{configurable:!0,get:function(){return j.call(this)},set:function(ge){S=""+ge,V.call(this,ge)}}),Object.defineProperty(p,g,{enumerable:I.enumerable}),{getValue:function(){return S},setValue:function(ge){S=""+ge},stopTracking:function(){p._valueTracker=null,delete p[g]}}}}function On(p){if(!p._valueTracker){var g=Pr(p)?"checked":"value";p._valueTracker=gs(p,g,""+p[g])}}function Wr(p){if(!p)return!1;var g=p._valueTracker;if(!g)return!0;var S=g.getValue(),I="";return p&&(I=Pr(p)?p.checked?"true":"false":p.value),p=I,p!==S?(g.setValue(p),!0):!1}function mn(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Wi=/[\n"\\]/g;function ur(p){return p.replace(Wi,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function ki(p,g,S,I,j,V,ge,Le){p.name="",ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"?p.type=ge:p.removeAttribute("type"),g!=null?ge==="number"?(g===0&&p.value===""||p.value!=g)&&(p.value=""+Nn(g)):p.value!==""+Nn(g)&&(p.value=""+Nn(g)):ge!=="submit"&&ge!=="reset"||p.removeAttribute("value"),g!=null?_s(p,ge,Nn(g)):S!=null?_s(p,ge,Nn(S)):I!=null&&p.removeAttribute("value"),j==null&&V!=null&&(p.defaultChecked=!!V),j!=null&&(p.checked=j&&typeof j!="function"&&typeof j!="symbol"),Le!=null&&typeof Le!="function"&&typeof Le!="symbol"&&typeof Le!="boolean"?p.name=""+Nn(Le):p.removeAttribute("name")}function ii(p,g,S,I,j,V,ge,Le){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(p.type=V),g!=null||S!=null){if(!(V!=="submit"&&V!=="reset"||g!=null)){On(p);return}S=S!=null?""+Nn(S):"",g=g!=null?""+Nn(g):S,Le||g===p.value||(p.value=g),p.defaultValue=g}I=I??j,I=typeof I!="function"&&typeof I!="symbol"&&!!I,p.checked=Le?p.checked:!!I,p.defaultChecked=!!I,ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"&&(p.name=ge),On(p)}function _s(p,g,S){g==="number"&&mn(p.ownerDocument)===p||p.defaultValue===""+S||(p.defaultValue=""+S)}function si(p,g,S,I){if(p=p.options,g){g={};for(var j=0;j<S.length;j++)g["$"+S[j]]=!0;for(S=0;S<p.length;S++)j=g.hasOwnProperty("$"+p[S].value),p[S].selected!==j&&(p[S].selected=j),j&&I&&(p[S].defaultSelected=!0)}else{for(S=""+Nn(S),g=null,j=0;j<p.length;j++){if(p[j].value===S){p[j].selected=!0,I&&(p[j].defaultSelected=!0);return}g!==null||p[j].disabled||(g=p[j])}g!==null&&(g.selected=!0)}}function gu(p,g,S){if(g!=null&&(g=""+Nn(g),g!==p.value&&(p.value=g),S==null)){p.defaultValue!==g&&(p.defaultValue=g);return}p.defaultValue=S!=null?""+Nn(S):""}function rl(p,g,S,I){if(g==null){if(I!=null){if(S!=null)throw Error(r(92));if($(I)){if(1<I.length)throw Error(r(93));I=I[0]}S=I}S==null&&(S=""),g=S}S=Nn(g),p.defaultValue=S,I=p.textContent,I===S&&I!==""&&I!==null&&(p.value=I),On(p)}function ao(p,g){if(g){var S=p.firstChild;if(S&&S===p.lastChild&&S.nodeType===3){S.nodeValue=g;return}}p.textContent=g}var eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sd(p,g,S){var I=g.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?I?p.setProperty(g,""):g==="float"?p.cssFloat="":p[g]="":I?p.setProperty(g,S):typeof S!="number"||S===0||eh.has(g)?g==="float"?p.cssFloat=S:p[g]=(""+S).trim():p[g]=S+"px"}function Ad(p,g,S){if(g!=null&&typeof g!="object")throw Error(r(62));if(p=p.style,S!=null){for(var I in S)!S.hasOwnProperty(I)||g!=null&&g.hasOwnProperty(I)||(I.indexOf("--")===0?p.setProperty(I,""):I==="float"?p.cssFloat="":p[I]="");for(var j in g)I=g[j],g.hasOwnProperty(j)&&S[j]!==I&&Sd(p,j,I)}else for(var V in g)g.hasOwnProperty(V)&&Sd(p,V,g[V])}function yu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nh(p){return jl.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}function il(){}var tm=null;function Ia(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var bu=null,$l=null;function Td(p){var g=bn(p);if(g&&(p=g.stateNode)){var S=p[et]||null;e:switch(p=g.stateNode,g.type){case"input":if(ki(p,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),g=S.name,S.type==="radio"&&g!=null){for(S=p;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+ur(""+g)+'"][type="radio"]'),g=0;g<S.length;g++){var I=S[g];if(I!==p&&I.form===p.form){var j=I[et]||null;if(!j)throw Error(r(90));ki(I,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(g=0;g<S.length;g++)I=S[g],I.form===p.form&&Wr(I)}break e;case"textarea":gu(p,S.value,S.defaultValue);break e;case"select":g=S.value,g!=null&&si(p,!!S.multiple,g,!1)}}}var rh=!1;function wu(p,g,S){if(rh)return p(g,S);rh=!0;try{var I=p(g);return I}finally{if(rh=!1,(bu!==null||$l!==null)&&(k3(),bu&&(g=bu,p=$l,$l=bu=null,Td(g),p)))for(g=0;g<p.length;g++)Td(p[g])}}function sl(p,g){var S=p.stateNode;if(S===null)return null;var I=S[et]||null;if(I===null)return null;S=I[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(p=p.type,I=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!I;break e;default:p=!1}if(p)return null;if(S&&typeof S!="function")throw Error(r(231,g,typeof S));return S}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=!1;if(Ra)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){ta=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{ta=!1}var na=null,I0=null,vu=null;function kd(){if(vu)return vu;var p,g=I0,S=g.length,I,j="value"in na?na.value:na.textContent,V=j.length;for(p=0;p<S&&g[p]===j[p];p++);var ge=S-p;for(I=1;I<=ge&&g[S-I]===j[V-I];I++);return vu=j.slice(p,1<I?1-I:void 0)}function Ma(p){var g=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&g===13&&(p=13)):p=g,p===10&&(p=13),32<=p||p===13?p:0}function Xs(){return!0}function xu(){return!1}function Lo(p){function g(S,I,j,V,ge){this._reactName=S,this._targetInst=j,this.type=I,this.nativeEvent=V,this.target=ge,this.currentTarget=null;for(var Le in p)p.hasOwnProperty(Le)&&(S=p[Le],this[Le]=S?S(V):V[Le]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Xs:xu,this.isPropagationStopped=xu,this}return d(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),g}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cd=Lo(ih),nm=d({},ih,{view:0,detail:0}),B2=Lo(nm),rm,vw,_d,xw=d({},nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==_d&&(_d&&p.type==="mousemove"?(rm=p.screenX-_d.screenX,vw=p.screenY-_d.screenY):vw=rm=0,_d=p),rm)},movementY:function(p){return"movementY"in p?p.movementY:vw}}),j2=Lo(xw),R0=d({},xw,{dataTransfer:0}),DC=Lo(R0),OC=d({},nm,{relatedTarget:0}),M0=Lo(OC),$2=d({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),PC=Lo($2),Ew=d({},ih,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),FC=Lo(Ew),BC=d({},ih,{data:0}),Nd=Lo(BC),jC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HC(p){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(p):(p=zC[p])?!!g[p]:!1}function im(){return HC}var La=d({},nm,{key:function(p){if(p.key){var g=jC[p.key]||p.key;if(g!=="Unidentified")return g}return p.type==="keypress"?(p=Ma(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?$C[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(p){return p.type==="keypress"?Ma(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Ma(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),VC=Lo(La),UC=d({},xw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sh=Lo(UC),P=d({},nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),ue=Lo(P),xe=d({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),Be=Lo(xe),dt=d({},xw,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),xt=Lo(dt),Ht=d({},ih,{newState:0,oldState:0}),nr=Lo(Ht),ys=[9,13,27,32],qr=Ra&&"CompositionEvent"in window,qi=null;Ra&&"documentMode"in document&&(qi=document.documentMode);var Tc=Ra&&"TextEvent"in window&&!qi,Id=Ra&&(!qr||qi&&8<qi&&11>=qi),Eu=" ",Su=!1;function L0(p,g){switch(p){case"keyup":return ys.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sw(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Aw=!1;function TCe(p,g){switch(p){case"compositionend":return Sw(g);case"keypress":return g.which!==32?null:(Su=!0,Eu);case"textInput":return p=g.data,p===Eu&&Su?null:p;default:return null}}function kCe(p,g){if(Aw)return p==="compositionend"||!qr&&L0(p,g)?(p=kd(),vu=I0=na=null,Aw=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Id&&g.locale!=="ko"?null:g.data;default:return null}}var CCe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bq(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g==="input"?!!CCe[p.type]:g==="textarea"}function wq(p,g,S,I){bu?$l?$l.push(I):$l=[I]:bu=I,g=L3(g,"onChange"),0<g.length&&(S=new Cd("onChange","change",null,S,I),p.push({event:S,listeners:g}))}var z2=null,H2=null;function _Ce(p){tX(p,0)}function WC(p){var g=sn(p);if(Wr(g))return p}function vq(p,g){if(p==="change")return g}var xq=!1;if(Ra){var MM;if(Ra){var LM="oninput"in document;if(!LM){var Eq=document.createElement("div");Eq.setAttribute("oninput","return;"),LM=typeof Eq.oninput=="function"}MM=LM}else MM=!1;xq=MM&&(!document.documentMode||9<document.documentMode)}function Sq(){z2&&(z2.detachEvent("onpropertychange",Aq),H2=z2=null)}function Aq(p){if(p.propertyName==="value"&&WC(H2)){var g=[];wq(g,H2,p,Ia(p)),wu(_Ce,g)}}function NCe(p,g,S){p==="focusin"?(Sq(),z2=g,H2=S,z2.attachEvent("onpropertychange",Aq)):p==="focusout"&&Sq()}function ICe(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return WC(H2)}function RCe(p,g){if(p==="click")return WC(g)}function MCe(p,g){if(p==="input"||p==="change")return WC(g)}function LCe(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var zl=typeof Object.is=="function"?Object.is:LCe;function V2(p,g){if(zl(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var S=Object.keys(p),I=Object.keys(g);if(S.length!==I.length)return!1;for(I=0;I<S.length;I++){var j=S[I];if(!te.call(g,j)||!zl(p[j],g[j]))return!1}return!0}function Tq(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function kq(p,g){var S=Tq(p);p=0;for(var I;S;){if(S.nodeType===3){if(I=p+S.textContent.length,p<=g&&I>=g)return{node:S,offset:g-p};p=I}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Tq(S)}}function Cq(p,g){return p&&g?p===g?!0:p&&p.nodeType===3?!1:g&&g.nodeType===3?Cq(p,g.parentNode):"contains"in p?p.contains(g):p.compareDocumentPosition?!!(p.compareDocumentPosition(g)&16):!1:!1}function _q(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var g=mn(p.document);g instanceof p.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)p=g.contentWindow;else break;g=mn(p.document)}return g}function DM(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g&&(g==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||g==="textarea"||p.contentEditable==="true")}var DCe=Ra&&"documentMode"in document&&11>=document.documentMode,Tw=null,OM=null,U2=null,PM=!1;function Nq(p,g,S){var I=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;PM||Tw==null||Tw!==mn(I)||(I=Tw,"selectionStart"in I&&DM(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),U2&&V2(U2,I)||(U2=I,I=L3(OM,"onSelect"),0<I.length&&(g=new Cd("onSelect","select",null,g,S),p.push({event:g,listeners:I}),g.target=Tw)))}function D0(p,g){var S={};return S[p.toLowerCase()]=g.toLowerCase(),S["Webkit"+p]="webkit"+g,S["Moz"+p]="moz"+g,S}var kw={animationend:D0("Animation","AnimationEnd"),animationiteration:D0("Animation","AnimationIteration"),animationstart:D0("Animation","AnimationStart"),transitionrun:D0("Transition","TransitionRun"),transitionstart:D0("Transition","TransitionStart"),transitioncancel:D0("Transition","TransitionCancel"),transitionend:D0("Transition","TransitionEnd")},FM={},Iq={};Ra&&(Iq=document.createElement("div").style,"AnimationEvent"in window||(delete kw.animationend.animation,delete kw.animationiteration.animation,delete kw.animationstart.animation),"TransitionEvent"in window||delete kw.transitionend.transition);function O0(p){if(FM[p])return FM[p];if(!kw[p])return p;var g=kw[p],S;for(S in g)if(g.hasOwnProperty(S)&&S in Iq)return FM[p]=g[S];return p}var Rq=O0("animationend"),Mq=O0("animationiteration"),Lq=O0("animationstart"),OCe=O0("transitionrun"),PCe=O0("transitionstart"),FCe=O0("transitioncancel"),Dq=O0("transitionend"),Oq=new Map,BM="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");BM.push("scrollEnd");function Au(p,g){Oq.set(p,g),cn(g,[p])}var qC=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},kc=[],Cw=0,jM=0;function GC(){for(var p=Cw,g=jM=Cw=0;g<p;){var S=kc[g];kc[g++]=null;var I=kc[g];kc[g++]=null;var j=kc[g];kc[g++]=null;var V=kc[g];if(kc[g++]=null,I!==null&&j!==null){var ge=I.pending;ge===null?j.next=j:(j.next=ge.next,ge.next=j),I.pending=j}V!==0&&Pq(S,j,V)}}function KC(p,g,S,I){kc[Cw++]=p,kc[Cw++]=g,kc[Cw++]=S,kc[Cw++]=I,jM|=I,p.lanes|=I,p=p.alternate,p!==null&&(p.lanes|=I)}function $M(p,g,S,I){return KC(p,g,S,I),XC(p)}function P0(p,g){return KC(p,null,null,g),XC(p)}function Pq(p,g,S){p.lanes|=S;var I=p.alternate;I!==null&&(I.lanes|=S);for(var j=!1,V=p.return;V!==null;)V.childLanes|=S,I=V.alternate,I!==null&&(I.childLanes|=S),V.tag===22&&(p=V.stateNode,p===null||p._visibility&1||(j=!0)),p=V,V=V.return;return p.tag===3?(V=p.stateNode,j&&g!==null&&(j=31-Ie(S),p=V.hiddenUpdates,I=p[j],I===null?p[j]=[g]:I.push(g),g.lane=S|536870912),V):null}function XC(p){if(50<fE)throw fE=0,XL=null,Error(r(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}var _w={};function BCe(p,g,S,I){this.tag=p,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(p,g,S,I){return new BCe(p,g,S,I)}function zM(p){return p=p.prototype,!(!p||!p.isReactComponent)}function oh(p,g){var S=p.alternate;return S===null?(S=Hl(p.tag,g,p.key,p.mode),S.elementType=p.elementType,S.type=p.type,S.stateNode=p.stateNode,S.alternate=p,p.alternate=S):(S.pendingProps=g,S.type=p.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=p.flags&65011712,S.childLanes=p.childLanes,S.lanes=p.lanes,S.child=p.child,S.memoizedProps=p.memoizedProps,S.memoizedState=p.memoizedState,S.updateQueue=p.updateQueue,g=p.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=p.sibling,S.index=p.index,S.ref=p.ref,S.refCleanup=p.refCleanup,S}function Fq(p,g){p.flags&=65011714;var S=p.alternate;return S===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=S.childLanes,p.lanes=S.lanes,p.child=S.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=S.memoizedProps,p.memoizedState=S.memoizedState,p.updateQueue=S.updateQueue,p.type=S.type,g=S.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function YC(p,g,S,I,j,V){var ge=0;if(I=p,typeof p=="function")zM(p)&&(ge=1);else if(typeof p=="string")ge=V3e(p,S,X.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case N:return p=Hl(31,S,g,j),p.elementType=N,p.lanes=V,p;case y:return F0(S.children,j,V,g);case w:ge=8,j|=24;break;case b:return p=Hl(12,S,g,j|2),p.elementType=b,p.lanes=V,p;case T:return p=Hl(13,S,g,j),p.elementType=T,p.lanes=V,p;case R:return p=Hl(19,S,g,j),p.elementType=R,p.lanes=V,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case A:ge=10;break e;case E:ge=9;break e;case x:ge=11;break e;case k:ge=14;break e;case _:ge=16,I=null;break e}ge=29,S=Error(r(130,p===null?"null":typeof p,"")),I=null}return g=Hl(ge,S,g,j),g.elementType=p,g.type=I,g.lanes=V,g}function F0(p,g,S,I){return p=Hl(7,p,I,g),p.lanes=S,p}function HM(p,g,S){return p=Hl(6,p,null,g),p.lanes=S,p}function Bq(p){var g=Hl(18,null,null,0);return g.stateNode=p,g}function VM(p,g,S){return g=Hl(4,p.children!==null?p.children:[],p.key,g),g.lanes=S,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}var jq=new WeakMap;function Cc(p,g){if(typeof p=="object"&&p!==null){var S=jq.get(p);return S!==void 0?S:(g={value:p,source:g,stack:oe(g)},jq.set(p,g),g)}return{value:p,source:g,stack:oe(g)}}var Nw=[],Iw=0,ZC=null,W2=0,_c=[],Nc=0,sm=null,Rd=1,Md="";function ah(p,g){Nw[Iw++]=W2,Nw[Iw++]=ZC,ZC=p,W2=g}function $q(p,g,S){_c[Nc++]=Rd,_c[Nc++]=Md,_c[Nc++]=sm,sm=p;var I=Rd;p=Md;var j=32-Ie(I)-1;I&=~(1<<j),S+=1;var V=32-Ie(g)+j;if(30<V){var ge=j-j%5;V=(I&(1<<ge)-1).toString(32),I>>=ge,j-=ge,Rd=1<<32-Ie(g)+j|S<<j|I,Md=V+p}else Rd=1<<V|S<<j|I,Md=p}function UM(p){p.return!==null&&(ah(p,1),$q(p,1,0))}function WM(p){for(;p===ZC;)ZC=Nw[--Iw],Nw[Iw]=null,W2=Nw[--Iw],Nw[Iw]=null;for(;p===sm;)sm=_c[--Nc],_c[Nc]=null,Md=_c[--Nc],_c[Nc]=null,Rd=_c[--Nc],_c[Nc]=null}function zq(p,g){_c[Nc++]=Rd,_c[Nc++]=Md,_c[Nc++]=sm,Rd=g.id,Md=g.overflow,sm=p}var Do=null,Fi=null,kr=!1,om=null,Ic=!1,qM=Error(r(519));function am(p){var g=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw q2(Cc(g,p)),qM}function Hq(p){var g=p.stateNode,S=p.type,I=p.memoizedProps;switch(g[qt]=p,g[et]=I,S){case"dialog":hr("cancel",g),hr("close",g);break;case"iframe":case"object":case"embed":hr("load",g);break;case"video":case"audio":for(S=0;S<pE.length;S++)hr(pE[S],g);break;case"source":hr("error",g);break;case"img":case"image":case"link":hr("error",g),hr("load",g);break;case"details":hr("toggle",g);break;case"input":hr("invalid",g),ii(g,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0);break;case"select":hr("invalid",g);break;case"textarea":hr("invalid",g),rl(g,I.value,I.defaultValue,I.children)}S=I.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||g.textContent===""+S||I.suppressHydrationWarning===!0||sX(g.textContent,S)?(I.popover!=null&&(hr("beforetoggle",g),hr("toggle",g)),I.onScroll!=null&&hr("scroll",g),I.onScrollEnd!=null&&hr("scrollend",g),I.onClick!=null&&(g.onclick=il),g=!0):g=!1,g||am(p,!0)}function Vq(p){for(Do=p.return;Do;)switch(Do.tag){case 5:case 31:case 13:Ic=!1;return;case 27:case 3:Ic=!0;return;default:Do=Do.return}}function Rw(p){if(p!==Do)return!1;if(!kr)return Vq(p),kr=!0,!1;var g=p.tag,S;if((S=g!==3&&g!==27)&&((S=g===5)&&(S=p.type,S=!(S!=="form"&&S!=="button")||uD(p.type,p.memoizedProps)),S=!S),S&&Fi&&am(p),Vq(p),g===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Fi=pX(p)}else if(g===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Fi=pX(p)}else g===27?(g=Fi,xm(p.type)?(p=mD,mD=null,Fi=p):Fi=g):Fi=Do?Mc(p.stateNode.nextSibling):null;return!0}function B0(){Fi=Do=null,kr=!1}function GM(){var p=om;return p!==null&&(cl===null?cl=p:cl.push.apply(cl,p),om=null),p}function q2(p){om===null?om=[p]:om.push(p)}var KM=J(null),j0=null,lh=null;function lm(p,g,S){re(KM,g._currentValue),g._currentValue=S}function ch(p){p._currentValue=KM.current,K(KM)}function XM(p,g,S){for(;p!==null;){var I=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),p===S)break;p=p.return}}function YM(p,g,S,I){var j=p.child;for(j!==null&&(j.return=p);j!==null;){var V=j.dependencies;if(V!==null){var ge=j.child;V=V.firstContext;e:for(;V!==null;){var Le=V;V=j;for(var Ke=0;Ke<g.length;Ke++)if(Le.context===g[Ke]){V.lanes|=S,Le=V.alternate,Le!==null&&(Le.lanes|=S),XM(V.return,S,p),I||(ge=null);break e}V=Le.next}}else if(j.tag===18){if(ge=j.return,ge===null)throw Error(r(341));ge.lanes|=S,V=ge.alternate,V!==null&&(V.lanes|=S),XM(ge,S,p),ge=null}else ge=j.child;if(ge!==null)ge.return=j;else for(ge=j;ge!==null;){if(ge===p){ge=null;break}if(j=ge.sibling,j!==null){j.return=ge.return,ge=j;break}ge=ge.return}j=ge}}function Mw(p,g,S,I){p=null;for(var j=g,V=!1;j!==null;){if(!V){if((j.flags&524288)!==0)V=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var ge=j.alternate;if(ge===null)throw Error(r(387));if(ge=ge.memoizedProps,ge!==null){var Le=j.type;zl(j.pendingProps.value,ge.value)||(p!==null?p.push(Le):p=[Le])}}else if(j===B.current){if(ge=j.alternate,ge===null)throw Error(r(387));ge.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(p!==null?p.push(wE):p=[wE])}j=j.return}p!==null&&YM(g,p,S,I),g.flags|=262144}function JC(p){for(p=p.firstContext;p!==null;){if(!zl(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function $0(p){j0=p,lh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Oo(p){return Uq(j0,p)}function QC(p,g){return j0===null&&$0(p),Uq(p,g)}function Uq(p,g){var S=g._currentValue;if(g={context:g,memoizedValue:S,next:null},lh===null){if(p===null)throw Error(r(308));lh=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else lh=lh.next=g;return S}var jCe=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(S,I){p.push(I)}};this.abort=function(){g.aborted=!0,p.forEach(function(S){return S()})}},$Ce=t.unstable_scheduleCallback,zCe=t.unstable_NormalPriority,Ns={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ZM(){return{controller:new jCe,data:new Map,refCount:0}}function G2(p){p.refCount--,p.refCount===0&&$Ce(zCe,function(){p.controller.abort()})}var K2=null,JM=0,Lw=0,Dw=null;function HCe(p,g){if(K2===null){var S=K2=[];JM=0,Lw=tD(),Dw={status:"pending",value:void 0,then:function(I){S.push(I)}}}return JM++,g.then(Wq,Wq),g}function Wq(){if(--JM===0&&K2!==null){Dw!==null&&(Dw.status="fulfilled");var p=K2;K2=null,Lw=0,Dw=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function VCe(p,g){var S=[],I={status:"pending",value:null,reason:null,then:function(j){S.push(j)}};return p.then(function(){I.status="fulfilled",I.value=g;for(var j=0;j<S.length;j++)(0,S[j])(g)},function(j){for(I.status="rejected",I.reason=j,j=0;j<S.length;j++)(0,S[j])(void 0)}),I}var qq=U.S;U.S=function(p,g){NK=Re(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&HCe(p,g),qq!==null&&qq(p,g)};var z0=J(null);function QM(){var p=z0.current;return p!==null?p:Ci.pooledCache}function e3(p,g){g===null?re(z0,z0.current):re(z0,g.pool)}function Gq(){var p=QM();return p===null?null:{parent:Ns._currentValue,pool:p}}var Ow=Error(r(460)),eL=Error(r(474)),t3=Error(r(542)),n3={then:function(){}};function Kq(p){return p=p.status,p==="fulfilled"||p==="rejected"}function Xq(p,g,S){switch(S=p[S],S===void 0?p.push(g):S!==g&&(g.then(il,il),g=S),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,Zq(p),p;default:if(typeof g.status=="string")g.then(il,il);else{if(p=Ci,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=g,p.status="pending",p.then(function(I){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=I}},function(I){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=I}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,Zq(p),p}throw V0=g,Ow}}function H0(p){try{var g=p._init;return g(p._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(V0=S,Ow):S}}var V0=null;function Yq(){if(V0===null)throw Error(r(459));var p=V0;return V0=null,p}function Zq(p){if(p===Ow||p===t3)throw Error(r(483))}var Pw=null,X2=0;function r3(p){var g=X2;return X2+=1,Pw===null&&(Pw=[]),Xq(Pw,p,g)}function Y2(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function i3(p,g){throw g.$$typeof===f?Error(r(525)):(p=Object.prototype.toString.call(g),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function Jq(p){function g(ot,Qe){if(p){var ht=ot.deletions;ht===null?(ot.deletions=[Qe],ot.flags|=16):ht.push(Qe)}}function S(ot,Qe){if(!p)return null;for(;Qe!==null;)g(ot,Qe),Qe=Qe.sibling;return null}function I(ot){for(var Qe=new Map;ot!==null;)ot.key!==null?Qe.set(ot.key,ot):Qe.set(ot.index,ot),ot=ot.sibling;return Qe}function j(ot,Qe){return ot=oh(ot,Qe),ot.index=0,ot.sibling=null,ot}function V(ot,Qe,ht){return ot.index=ht,p?(ht=ot.alternate,ht!==null?(ht=ht.index,ht<Qe?(ot.flags|=67108866,Qe):ht):(ot.flags|=67108866,Qe)):(ot.flags|=1048576,Qe)}function ge(ot){return p&&ot.alternate===null&&(ot.flags|=67108866),ot}function Le(ot,Qe,ht,Tt){return Qe===null||Qe.tag!==6?(Qe=HM(ht,ot.mode,Tt),Qe.return=ot,Qe):(Qe=j(Qe,ht),Qe.return=ot,Qe)}function Ke(ot,Qe,ht,Tt){var vn=ht.type;return vn===y?At(ot,Qe,ht.props.children,Tt,ht.key):Qe!==null&&(Qe.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===_&&H0(vn)===Qe.type)?(Qe=j(Qe,ht.props),Y2(Qe,ht),Qe.return=ot,Qe):(Qe=YC(ht.type,ht.key,ht.props,null,ot.mode,Tt),Y2(Qe,ht),Qe.return=ot,Qe)}function mt(ot,Qe,ht,Tt){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==ht.containerInfo||Qe.stateNode.implementation!==ht.implementation?(Qe=VM(ht,ot.mode,Tt),Qe.return=ot,Qe):(Qe=j(Qe,ht.children||[]),Qe.return=ot,Qe)}function At(ot,Qe,ht,Tt,vn){return Qe===null||Qe.tag!==7?(Qe=F0(ht,ot.mode,Tt,vn),Qe.return=ot,Qe):(Qe=j(Qe,ht),Qe.return=ot,Qe)}function _t(ot,Qe,ht){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=HM(""+Qe,ot.mode,ht),Qe.return=ot,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return ht=YC(Qe.type,Qe.key,Qe.props,null,ot.mode,ht),Y2(ht,Qe),ht.return=ot,ht;case m:return Qe=VM(Qe,ot.mode,ht),Qe.return=ot,Qe;case _:return Qe=H0(Qe),_t(ot,Qe,ht)}if($(Qe)||C(Qe))return Qe=F0(Qe,ot.mode,ht,null),Qe.return=ot,Qe;if(typeof Qe.then=="function")return _t(ot,r3(Qe),ht);if(Qe.$$typeof===A)return _t(ot,QC(ot,Qe),ht);i3(ot,Qe)}return null}function yt(ot,Qe,ht,Tt){var vn=Qe!==null?Qe.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return vn!==null?null:Le(ot,Qe,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case h:return ht.key===vn?Ke(ot,Qe,ht,Tt):null;case m:return ht.key===vn?mt(ot,Qe,ht,Tt):null;case _:return ht=H0(ht),yt(ot,Qe,ht,Tt)}if($(ht)||C(ht))return vn!==null?null:At(ot,Qe,ht,Tt,null);if(typeof ht.then=="function")return yt(ot,Qe,r3(ht),Tt);if(ht.$$typeof===A)return yt(ot,Qe,QC(ot,ht),Tt);i3(ot,ht)}return null}function St(ot,Qe,ht,Tt,vn){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return ot=ot.get(ht)||null,Le(Qe,ot,""+Tt,vn);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case h:return ot=ot.get(Tt.key===null?ht:Tt.key)||null,Ke(Qe,ot,Tt,vn);case m:return ot=ot.get(Tt.key===null?ht:Tt.key)||null,mt(Qe,ot,Tt,vn);case _:return Tt=H0(Tt),St(ot,Qe,ht,Tt,vn)}if($(Tt)||C(Tt))return ot=ot.get(ht)||null,At(Qe,ot,Tt,vn,null);if(typeof Tt.then=="function")return St(ot,Qe,ht,r3(Tt),vn);if(Tt.$$typeof===A)return St(ot,Qe,ht,QC(Qe,Tt),vn);i3(Qe,Tt)}return null}function on(ot,Qe,ht,Tt){for(var vn=null,Fr=null,un=Qe,ir=Qe=0,wr=null;un!==null&&ir<ht.length;ir++){un.index>ir?(wr=un,un=null):wr=un.sibling;var Br=yt(ot,un,ht[ir],Tt);if(Br===null){un===null&&(un=wr);break}p&&un&&Br.alternate===null&&g(ot,un),Qe=V(Br,Qe,ir),Fr===null?vn=Br:Fr.sibling=Br,Fr=Br,un=wr}if(ir===ht.length)return S(ot,un),kr&&ah(ot,ir),vn;if(un===null){for(;ir<ht.length;ir++)un=_t(ot,ht[ir],Tt),un!==null&&(Qe=V(un,Qe,ir),Fr===null?vn=un:Fr.sibling=un,Fr=un);return kr&&ah(ot,ir),vn}for(un=I(un);ir<ht.length;ir++)wr=St(un,ot,ir,ht[ir],Tt),wr!==null&&(p&&wr.alternate!==null&&un.delete(wr.key===null?ir:wr.key),Qe=V(wr,Qe,ir),Fr===null?vn=wr:Fr.sibling=wr,Fr=wr);return p&&un.forEach(function(km){return g(ot,km)}),kr&&ah(ot,ir),vn}function Mn(ot,Qe,ht,Tt){if(ht==null)throw Error(r(151));for(var vn=null,Fr=null,un=Qe,ir=Qe=0,wr=null,Br=ht.next();un!==null&&!Br.done;ir++,Br=ht.next()){un.index>ir?(wr=un,un=null):wr=un.sibling;var km=yt(ot,un,Br.value,Tt);if(km===null){un===null&&(un=wr);break}p&&un&&km.alternate===null&&g(ot,un),Qe=V(km,Qe,ir),Fr===null?vn=km:Fr.sibling=km,Fr=km,un=wr}if(Br.done)return S(ot,un),kr&&ah(ot,ir),vn;if(un===null){for(;!Br.done;ir++,Br=ht.next())Br=_t(ot,Br.value,Tt),Br!==null&&(Qe=V(Br,Qe,ir),Fr===null?vn=Br:Fr.sibling=Br,Fr=Br);return kr&&ah(ot,ir),vn}for(un=I(un);!Br.done;ir++,Br=ht.next())Br=St(un,ot,ir,Br.value,Tt),Br!==null&&(p&&Br.alternate!==null&&un.delete(Br.key===null?ir:Br.key),Qe=V(Br,Qe,ir),Fr===null?vn=Br:Fr.sibling=Br,Fr=Br);return p&&un.forEach(function(e5e){return g(ot,e5e)}),kr&&ah(ot,ir),vn}function wi(ot,Qe,ht,Tt){if(typeof ht=="object"&&ht!==null&&ht.type===y&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case h:e:{for(var vn=ht.key;Qe!==null;){if(Qe.key===vn){if(vn=ht.type,vn===y){if(Qe.tag===7){S(ot,Qe.sibling),Tt=j(Qe,ht.props.children),Tt.return=ot,ot=Tt;break e}}else if(Qe.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===_&&H0(vn)===Qe.type){S(ot,Qe.sibling),Tt=j(Qe,ht.props),Y2(Tt,ht),Tt.return=ot,ot=Tt;break e}S(ot,Qe);break}else g(ot,Qe);Qe=Qe.sibling}ht.type===y?(Tt=F0(ht.props.children,ot.mode,Tt,ht.key),Tt.return=ot,ot=Tt):(Tt=YC(ht.type,ht.key,ht.props,null,ot.mode,Tt),Y2(Tt,ht),Tt.return=ot,ot=Tt)}return ge(ot);case m:e:{for(vn=ht.key;Qe!==null;){if(Qe.key===vn)if(Qe.tag===4&&Qe.stateNode.containerInfo===ht.containerInfo&&Qe.stateNode.implementation===ht.implementation){S(ot,Qe.sibling),Tt=j(Qe,ht.children||[]),Tt.return=ot,ot=Tt;break e}else{S(ot,Qe);break}else g(ot,Qe);Qe=Qe.sibling}Tt=VM(ht,ot.mode,Tt),Tt.return=ot,ot=Tt}return ge(ot);case _:return ht=H0(ht),wi(ot,Qe,ht,Tt)}if($(ht))return on(ot,Qe,ht,Tt);if(C(ht)){if(vn=C(ht),typeof vn!="function")throw Error(r(150));return ht=vn.call(ht),Mn(ot,Qe,ht,Tt)}if(typeof ht.then=="function")return wi(ot,Qe,r3(ht),Tt);if(ht.$$typeof===A)return wi(ot,Qe,QC(ot,ht),Tt);i3(ot,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,Qe!==null&&Qe.tag===6?(S(ot,Qe.sibling),Tt=j(Qe,ht),Tt.return=ot,ot=Tt):(S(ot,Qe),Tt=HM(ht,ot.mode,Tt),Tt.return=ot,ot=Tt),ge(ot)):S(ot,Qe)}return function(ot,Qe,ht,Tt){try{X2=0;var vn=wi(ot,Qe,ht,Tt);return Pw=null,vn}catch(un){if(un===Ow||un===t3)throw un;var Fr=Hl(29,un,null,ot.mode);return Fr.lanes=Tt,Fr.return=ot,Fr}finally{}}}var U0=Jq(!0),Qq=Jq(!1),cm=!1;function tL(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nL(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function um(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function dm(p,g,S){var I=p.updateQueue;if(I===null)return null;if(I=I.shared,(Gr&2)!==0){var j=I.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),I.pending=g,g=XC(p),Pq(p,null,S),g}return KC(p,I,g,S),XC(p)}function Z2(p,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194048)!==0)){var I=g.lanes;I&=p.pendingLanes,S|=I,g.lanes=S,He(p,S)}}function rL(p,g){var S=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,S===I)){var j=null,V=null;if(S=S.firstBaseUpdate,S!==null){do{var ge={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};V===null?j=V=ge:V=V.next=ge,S=S.next}while(S!==null);V===null?j=V=g:V=V.next=g}else j=V=g;S={baseState:I.baseState,firstBaseUpdate:j,lastBaseUpdate:V,shared:I.shared,callbacks:I.callbacks},p.updateQueue=S;return}p=S.lastBaseUpdate,p===null?S.firstBaseUpdate=g:p.next=g,S.lastBaseUpdate=g}var iL=!1;function J2(){if(iL){var p=Dw;if(p!==null)throw p}}function Q2(p,g,S,I){iL=!1;var j=p.updateQueue;cm=!1;var V=j.firstBaseUpdate,ge=j.lastBaseUpdate,Le=j.shared.pending;if(Le!==null){j.shared.pending=null;var Ke=Le,mt=Ke.next;Ke.next=null,ge===null?V=mt:ge.next=mt,ge=Ke;var At=p.alternate;At!==null&&(At=At.updateQueue,Le=At.lastBaseUpdate,Le!==ge&&(Le===null?At.firstBaseUpdate=mt:Le.next=mt,At.lastBaseUpdate=Ke))}if(V!==null){var _t=j.baseState;ge=0,At=mt=Ke=null,Le=V;do{var yt=Le.lane&-536870913,St=yt!==Le.lane;if(St?(br&yt)===yt:(I&yt)===yt){yt!==0&&yt===Lw&&(iL=!0),At!==null&&(At=At.next={lane:0,tag:Le.tag,payload:Le.payload,callback:null,next:null});e:{var on=p,Mn=Le;yt=g;var wi=S;switch(Mn.tag){case 1:if(on=Mn.payload,typeof on=="function"){_t=on.call(wi,_t,yt);break e}_t=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=Mn.payload,yt=typeof on=="function"?on.call(wi,_t,yt):on,yt==null)break e;_t=d({},_t,yt);break e;case 2:cm=!0}}yt=Le.callback,yt!==null&&(p.flags|=64,St&&(p.flags|=8192),St=j.callbacks,St===null?j.callbacks=[yt]:St.push(yt))}else St={lane:yt,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},At===null?(mt=At=St,Ke=_t):At=At.next=St,ge|=yt;if(Le=Le.next,Le===null){if(Le=j.shared.pending,Le===null)break;St=Le,Le=St.next,St.next=null,j.lastBaseUpdate=St,j.shared.pending=null}}while(!0);At===null&&(Ke=_t),j.baseState=Ke,j.firstBaseUpdate=mt,j.lastBaseUpdate=At,V===null&&(j.shared.lanes=0),gm|=ge,p.lanes=ge,p.memoizedState=_t}}function eG(p,g){if(typeof p!="function")throw Error(r(191,p));p.call(g)}function tG(p,g){var S=p.callbacks;if(S!==null)for(p.callbacks=null,p=0;p<S.length;p++)eG(S[p],g)}var Fw=J(null),s3=J(0);function nG(p,g){p=bh,re(s3,p),re(Fw,g),bh=p|g.baseLanes}function sL(){re(s3,bh),re(Fw,Fw.current)}function oL(){bh=s3.current,K(Fw),K(s3)}var Vl=J(null),Rc=null;function fm(p){var g=p.alternate;re(bs,bs.current&1),re(Vl,p),Rc===null&&(g===null||Fw.current!==null||g.memoizedState!==null)&&(Rc=p)}function aL(p){re(bs,bs.current),re(Vl,p),Rc===null&&(Rc=p)}function rG(p){p.tag===22?(re(bs,bs.current),re(Vl,p),Rc===null&&(Rc=p)):hm()}function hm(){re(bs,bs.current),re(Vl,Vl.current)}function Ul(p){K(Vl),Rc===p&&(Rc=null),K(bs)}var bs=J(0);function o3(p){for(var g=p;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||hD(S)||pD(S)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var uh=0,rr=null,yi=null,Is=null,a3=!1,Bw=!1,W0=!1,l3=0,eE=0,jw=null,UCe=0;function ls(){throw Error(r(321))}function lL(p,g){if(g===null)return!1;for(var S=0;S<g.length&&S<p.length;S++)if(!zl(p[S],g[S]))return!1;return!0}function cL(p,g,S,I,j,V){return uh=V,rr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,U.H=p===null||p.memoizedState===null?$G:AL,W0=!1,V=S(I,j),W0=!1,Bw&&(V=sG(g,S,I,j)),iG(p),V}function iG(p){U.H=rE;var g=yi!==null&&yi.next!==null;if(uh=0,Is=yi=rr=null,a3=!1,eE=0,jw=null,g)throw Error(r(300));p===null||Rs||(p=p.dependencies,p!==null&&JC(p)&&(Rs=!0))}function sG(p,g,S,I){rr=p;var j=0;do{if(Bw&&(jw=null),eE=0,Bw=!1,25<=j)throw Error(r(301));if(j+=1,Is=yi=null,p.updateQueue!=null){var V=p.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}U.H=zG,V=g(S,I)}while(Bw);return V}function WCe(){var p=U.H,g=p.useState()[0];return g=typeof g.then=="function"?tE(g):g,p=p.useState()[0],(yi!==null?yi.memoizedState:null)!==p&&(rr.flags|=1024),g}function uL(){var p=l3!==0;return l3=0,p}function dL(p,g,S){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~S}function fL(p){if(a3){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}a3=!1}uh=0,Is=yi=rr=null,Bw=!1,eE=l3=0,jw=null}function Da(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Is===null?rr.memoizedState=Is=p:Is=Is.next=p,Is}function ws(){if(yi===null){var p=rr.alternate;p=p!==null?p.memoizedState:null}else p=yi.next;var g=Is===null?rr.memoizedState:Is.next;if(g!==null)Is=g,yi=p;else{if(p===null)throw rr.alternate===null?Error(r(467)):Error(r(310));yi=p,p={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Is===null?rr.memoizedState=Is=p:Is=Is.next=p}return Is}function c3(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tE(p){var g=eE;return eE+=1,jw===null&&(jw=[]),p=Xq(jw,p,g),g=rr,(Is===null?g.memoizedState:Is.next)===null&&(g=g.alternate,U.H=g===null||g.memoizedState===null?$G:AL),p}function u3(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return tE(p);if(p.$$typeof===A)return Oo(p)}throw Error(r(438,String(p)))}function hL(p){var g=null,S=rr.updateQueue;if(S!==null&&(g=S.memoCache),g==null){var I=rr.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(g={data:I.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),S===null&&(S=c3(),rr.updateQueue=S),S.memoCache=g,S=g.data[g.index],S===void 0)for(S=g.data[g.index]=Array(p),I=0;I<p;I++)S[I]=L;return g.index++,S}function dh(p,g){return typeof g=="function"?g(p):g}function d3(p){var g=ws();return pL(g,yi,p)}function pL(p,g,S){var I=p.queue;if(I===null)throw Error(r(311));I.lastRenderedReducer=S;var j=p.baseQueue,V=I.pending;if(V!==null){if(j!==null){var ge=j.next;j.next=V.next,V.next=ge}g.baseQueue=j=V,I.pending=null}if(V=p.baseState,j===null)p.memoizedState=V;else{g=j.next;var Le=ge=null,Ke=null,mt=g,At=!1;do{var _t=mt.lane&-536870913;if(_t!==mt.lane?(br&_t)===_t:(uh&_t)===_t){var yt=mt.revertLane;if(yt===0)Ke!==null&&(Ke=Ke.next={lane:0,revertLane:0,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),_t===Lw&&(At=!0);else if((uh&yt)===yt){mt=mt.next,yt===Lw&&(At=!0);continue}else _t={lane:0,revertLane:mt.revertLane,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Ke===null?(Le=Ke=_t,ge=V):Ke=Ke.next=_t,rr.lanes|=yt,gm|=yt;_t=mt.action,W0&&S(V,_t),V=mt.hasEagerState?mt.eagerState:S(V,_t)}else yt={lane:_t,revertLane:mt.revertLane,gesture:mt.gesture,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Ke===null?(Le=Ke=yt,ge=V):Ke=Ke.next=yt,rr.lanes|=_t,gm|=_t;mt=mt.next}while(mt!==null&&mt!==g);if(Ke===null?ge=V:Ke.next=Le,!zl(V,p.memoizedState)&&(Rs=!0,At&&(S=Dw,S!==null)))throw S;p.memoizedState=V,p.baseState=ge,p.baseQueue=Ke,I.lastRenderedState=V}return j===null&&(I.lanes=0),[p.memoizedState,I.dispatch]}function mL(p){var g=ws(),S=g.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=p;var I=S.dispatch,j=S.pending,V=g.memoizedState;if(j!==null){S.pending=null;var ge=j=j.next;do V=p(V,ge.action),ge=ge.next;while(ge!==j);zl(V,g.memoizedState)||(Rs=!0),g.memoizedState=V,g.baseQueue===null&&(g.baseState=V),S.lastRenderedState=V}return[V,I]}function oG(p,g,S){var I=rr,j=ws(),V=kr;if(V){if(S===void 0)throw Error(r(407));S=S()}else S=g();var ge=!zl((yi||j).memoizedState,S);if(ge&&(j.memoizedState=S,Rs=!0),j=j.queue,bL(cG.bind(null,I,j,p),[p]),j.getSnapshot!==g||ge||Is!==null&&Is.memoizedState.tag&1){if(I.flags|=2048,$w(9,{destroy:void 0},lG.bind(null,I,j,S,g),null),Ci===null)throw Error(r(349));V||(uh&127)!==0||aG(I,g,S)}return S}function aG(p,g,S){p.flags|=16384,p={getSnapshot:g,value:S},g=rr.updateQueue,g===null?(g=c3(),rr.updateQueue=g,g.stores=[p]):(S=g.stores,S===null?g.stores=[p]:S.push(p))}function lG(p,g,S,I){g.value=S,g.getSnapshot=I,uG(g)&&dG(p)}function cG(p,g,S){return S(function(){uG(g)&&dG(p)})}function uG(p){var g=p.getSnapshot;p=p.value;try{var S=g();return!zl(p,S)}catch{return!0}}function dG(p){var g=P0(p,2);g!==null&&ul(g,p,2)}function gL(p){var g=Da();if(typeof p=="function"){var S=p;if(p=S(),W0){ze(!0);try{S()}finally{ze(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:p},g}function fG(p,g,S,I){return p.baseState=S,pL(p,yi,typeof I=="function"?I:dh)}function qCe(p,g,S,I,j){if(p3(p))throw Error(r(485));if(p=g.action,p!==null){var V={payload:j,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){V.listeners.push(ge)}};U.T!==null?S(!0):V.isTransition=!1,I(V),S=g.pending,S===null?(V.next=g.pending=V,hG(g,V)):(V.next=S.next,g.pending=S.next=V)}}function hG(p,g){var S=g.action,I=g.payload,j=p.state;if(g.isTransition){var V=U.T,ge={};U.T=ge;try{var Le=S(j,I),Ke=U.S;Ke!==null&&Ke(ge,Le),pG(p,g,Le)}catch(mt){yL(p,g,mt)}finally{V!==null&&ge.types!==null&&(V.types=ge.types),U.T=V}}else try{V=S(j,I),pG(p,g,V)}catch(mt){yL(p,g,mt)}}function pG(p,g,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(I){mG(p,g,I)},function(I){return yL(p,g,I)}):mG(p,g,S)}function mG(p,g,S){g.status="fulfilled",g.value=S,gG(g),p.state=S,g=p.pending,g!==null&&(S=g.next,S===g?p.pending=null:(S=S.next,g.next=S,hG(p,S)))}function yL(p,g,S){var I=p.pending;if(p.pending=null,I!==null){I=I.next;do g.status="rejected",g.reason=S,gG(g),g=g.next;while(g!==I)}p.action=null}function gG(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function yG(p,g){return g}function bG(p,g){if(kr){var S=Ci.formState;if(S!==null){e:{var I=rr;if(kr){if(Fi){t:{for(var j=Fi,V=Ic;j.nodeType!==8;){if(!V){j=null;break t}if(j=Mc(j.nextSibling),j===null){j=null;break t}}V=j.data,j=V==="F!"||V==="F"?j:null}if(j){Fi=Mc(j.nextSibling),I=j.data==="F!";break e}}am(I)}I=!1}I&&(g=S[0])}}return S=Da(),S.memoizedState=S.baseState=g,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yG,lastRenderedState:g},S.queue=I,S=FG.bind(null,rr,I),I.dispatch=S,I=gL(!1),V=SL.bind(null,rr,!1,I.queue),I=Da(),j={state:g,dispatch:null,action:p,pending:null},I.queue=j,S=qCe.bind(null,rr,j,V,S),j.dispatch=S,I.memoizedState=p,[g,S,!1]}function wG(p){var g=ws();return vG(g,yi,p)}function vG(p,g,S){if(g=pL(p,g,yG)[0],p=d3(dh)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var I=tE(g)}catch(ge){throw ge===Ow?t3:ge}else I=g;g=ws();var j=g.queue,V=j.dispatch;return S!==g.memoizedState&&(rr.flags|=2048,$w(9,{destroy:void 0},GCe.bind(null,j,S),null)),[I,V,p]}function GCe(p,g){p.action=g}function xG(p){var g=ws(),S=yi;if(S!==null)return vG(g,S,p);ws(),g=g.memoizedState,S=ws();var I=S.queue.dispatch;return S.memoizedState=p,[g,I,!1]}function $w(p,g,S,I){return p={tag:p,create:S,deps:I,inst:g,next:null},g=rr.updateQueue,g===null&&(g=c3(),rr.updateQueue=g),S=g.lastEffect,S===null?g.lastEffect=p.next=p:(I=S.next,S.next=p,p.next=I,g.lastEffect=p),p}function EG(){return ws().memoizedState}function f3(p,g,S,I){var j=Da();rr.flags|=p,j.memoizedState=$w(1|g,{destroy:void 0},S,I===void 0?null:I)}function h3(p,g,S,I){var j=ws();I=I===void 0?null:I;var V=j.memoizedState.inst;yi!==null&&I!==null&&lL(I,yi.memoizedState.deps)?j.memoizedState=$w(g,V,S,I):(rr.flags|=p,j.memoizedState=$w(1|g,V,S,I))}function SG(p,g){f3(8390656,8,p,g)}function bL(p,g){h3(2048,8,p,g)}function KCe(p){rr.flags|=4;var g=rr.updateQueue;if(g===null)g=c3(),rr.updateQueue=g,g.events=[p];else{var S=g.events;S===null?g.events=[p]:S.push(p)}}function AG(p){var g=ws().memoizedState;return KCe({ref:g,nextImpl:p}),function(){if((Gr&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}function TG(p,g){return h3(4,2,p,g)}function kG(p,g){return h3(4,4,p,g)}function CG(p,g){if(typeof g=="function"){p=p();var S=g(p);return function(){typeof S=="function"?S():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function _G(p,g,S){S=S!=null?S.concat([p]):null,h3(4,4,CG.bind(null,g,p),S)}function wL(){}function NG(p,g){var S=ws();g=g===void 0?null:g;var I=S.memoizedState;return g!==null&&lL(g,I[1])?I[0]:(S.memoizedState=[p,g],p)}function IG(p,g){var S=ws();g=g===void 0?null:g;var I=S.memoizedState;if(g!==null&&lL(g,I[1]))return I[0];if(I=p(),W0){ze(!0);try{p()}finally{ze(!1)}}return S.memoizedState=[I,g],I}function vL(p,g,S){return S===void 0||(uh&1073741824)!==0&&(br&261930)===0?p.memoizedState=g:(p.memoizedState=S,p=RK(),rr.lanes|=p,gm|=p,S)}function RG(p,g,S,I){return zl(S,g)?S:Fw.current!==null?(p=vL(p,S,I),zl(p,g)||(Rs=!0),p):(uh&42)===0||(uh&1073741824)!==0&&(br&261930)===0?(Rs=!0,p.memoizedState=S):(p=RK(),rr.lanes|=p,gm|=p,g)}function MG(p,g,S,I,j){var V=W.p;W.p=V!==0&&8>V?V:8;var ge=U.T,Le={};U.T=Le,SL(p,!1,g,S);try{var Ke=j(),mt=U.S;if(mt!==null&&mt(Le,Ke),Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var At=VCe(Ke,I);nE(p,g,At,Gl(p))}else nE(p,g,I,Gl(p))}catch(_t){nE(p,g,{then:function(){},status:"rejected",reason:_t},Gl())}finally{W.p=V,ge!==null&&Le.types!==null&&(ge.types=Le.types),U.T=ge}}function XCe(){}function xL(p,g,S,I){if(p.tag!==5)throw Error(r(476));var j=LG(p).queue;MG(p,j,g,ce,S===null?XCe:function(){return DG(p),S(I)})}function LG(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:ce},next:null};var S={};return g.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:S},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function DG(p){var g=LG(p);g.next===null&&(g=p.alternate.memoizedState),nE(p,g.next.queue,{},Gl())}function EL(){return Oo(wE)}function OG(){return ws().memoizedState}function PG(){return ws().memoizedState}function YCe(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var S=Gl();p=um(S);var I=dm(g,p,S);I!==null&&(ul(I,g,S),Z2(I,g,S)),g={cache:ZM()},p.payload=g;return}g=g.return}}function ZCe(p,g,S){var I=Gl();S={lane:I,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},p3(p)?BG(g,S):(S=$M(p,g,S,I),S!==null&&(ul(S,p,I),jG(S,g,I)))}function FG(p,g,S){var I=Gl();nE(p,g,S,I)}function nE(p,g,S,I){var j={lane:I,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(p3(p))BG(g,j);else{var V=p.alternate;if(p.lanes===0&&(V===null||V.lanes===0)&&(V=g.lastRenderedReducer,V!==null))try{var ge=g.lastRenderedState,Le=V(ge,S);if(j.hasEagerState=!0,j.eagerState=Le,zl(Le,ge))return KC(p,g,j,0),Ci===null&&GC(),!1}catch{}finally{}if(S=$M(p,g,j,I),S!==null)return ul(S,p,I),jG(S,g,I),!0}return!1}function SL(p,g,S,I){if(I={lane:2,revertLane:tD(),gesture:null,action:I,hasEagerState:!1,eagerState:null,next:null},p3(p)){if(g)throw Error(r(479))}else g=$M(p,S,I,2),g!==null&&ul(g,p,2)}function p3(p){var g=p.alternate;return p===rr||g!==null&&g===rr}function BG(p,g){Bw=a3=!0;var S=p.pending;S===null?g.next=g:(g.next=S.next,S.next=g),p.pending=g}function jG(p,g,S){if((S&4194048)!==0){var I=g.lanes;I&=p.pendingLanes,S|=I,g.lanes=S,He(p,S)}}var rE={readContext:Oo,use:u3,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useLayoutEffect:ls,useInsertionEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useSyncExternalStore:ls,useId:ls,useHostTransitionStatus:ls,useFormState:ls,useActionState:ls,useOptimistic:ls,useMemoCache:ls,useCacheRefresh:ls};rE.useEffectEvent=ls;var $G={readContext:Oo,use:u3,useCallback:function(p,g){return Da().memoizedState=[p,g===void 0?null:g],p},useContext:Oo,useEffect:SG,useImperativeHandle:function(p,g,S){S=S!=null?S.concat([p]):null,f3(4194308,4,CG.bind(null,g,p),S)},useLayoutEffect:function(p,g){return f3(4194308,4,p,g)},useInsertionEffect:function(p,g){f3(4,2,p,g)},useMemo:function(p,g){var S=Da();g=g===void 0?null:g;var I=p();if(W0){ze(!0);try{p()}finally{ze(!1)}}return S.memoizedState=[I,g],I},useReducer:function(p,g,S){var I=Da();if(S!==void 0){var j=S(g);if(W0){ze(!0);try{S(g)}finally{ze(!1)}}}else j=g;return I.memoizedState=I.baseState=j,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:j},I.queue=p,p=p.dispatch=ZCe.bind(null,rr,p),[I.memoizedState,p]},useRef:function(p){var g=Da();return p={current:p},g.memoizedState=p},useState:function(p){p=gL(p);var g=p.queue,S=FG.bind(null,rr,g);return g.dispatch=S,[p.memoizedState,S]},useDebugValue:wL,useDeferredValue:function(p,g){var S=Da();return vL(S,p,g)},useTransition:function(){var p=gL(!1);return p=MG.bind(null,rr,p.queue,!0,!1),Da().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,S){var I=rr,j=Da();if(kr){if(S===void 0)throw Error(r(407));S=S()}else{if(S=g(),Ci===null)throw Error(r(349));(br&127)!==0||aG(I,g,S)}j.memoizedState=S;var V={value:S,getSnapshot:g};return j.queue=V,SG(cG.bind(null,I,V,p),[p]),I.flags|=2048,$w(9,{destroy:void 0},lG.bind(null,I,V,S,g),null),S},useId:function(){var p=Da(),g=Ci.identifierPrefix;if(kr){var S=Md,I=Rd;S=(I&~(1<<32-Ie(I)-1)).toString(32)+S,g="_"+g+"R_"+S,S=l3++,0<S&&(g+="H"+S.toString(32)),g+="_"}else S=UCe++,g="_"+g+"r_"+S.toString(32)+"_";return p.memoizedState=g},useHostTransitionStatus:EL,useFormState:bG,useActionState:bG,useOptimistic:function(p){var g=Da();g.memoizedState=g.baseState=p;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=S,g=SL.bind(null,rr,!0,S),S.dispatch=g,[p,g]},useMemoCache:hL,useCacheRefresh:function(){return Da().memoizedState=YCe.bind(null,rr)},useEffectEvent:function(p){var g=Da(),S={impl:p};return g.memoizedState=S,function(){if((Gr&2)!==0)throw Error(r(440));return S.impl.apply(void 0,arguments)}}},AL={readContext:Oo,use:u3,useCallback:NG,useContext:Oo,useEffect:bL,useImperativeHandle:_G,useInsertionEffect:TG,useLayoutEffect:kG,useMemo:IG,useReducer:d3,useRef:EG,useState:function(){return d3(dh)},useDebugValue:wL,useDeferredValue:function(p,g){var S=ws();return RG(S,yi.memoizedState,p,g)},useTransition:function(){var p=d3(dh)[0],g=ws().memoizedState;return[typeof p=="boolean"?p:tE(p),g]},useSyncExternalStore:oG,useId:OG,useHostTransitionStatus:EL,useFormState:wG,useActionState:wG,useOptimistic:function(p,g){var S=ws();return fG(S,yi,p,g)},useMemoCache:hL,useCacheRefresh:PG};AL.useEffectEvent=AG;var zG={readContext:Oo,use:u3,useCallback:NG,useContext:Oo,useEffect:bL,useImperativeHandle:_G,useInsertionEffect:TG,useLayoutEffect:kG,useMemo:IG,useReducer:mL,useRef:EG,useState:function(){return mL(dh)},useDebugValue:wL,useDeferredValue:function(p,g){var S=ws();return yi===null?vL(S,p,g):RG(S,yi.memoizedState,p,g)},useTransition:function(){var p=mL(dh)[0],g=ws().memoizedState;return[typeof p=="boolean"?p:tE(p),g]},useSyncExternalStore:oG,useId:OG,useHostTransitionStatus:EL,useFormState:xG,useActionState:xG,useOptimistic:function(p,g){var S=ws();return yi!==null?fG(S,yi,p,g):(S.baseState=p,[p,S.queue.dispatch])},useMemoCache:hL,useCacheRefresh:PG};zG.useEffectEvent=AG;function TL(p,g,S,I){g=p.memoizedState,S=S(I,g),S=S==null?g:d({},g,S),p.memoizedState=S,p.lanes===0&&(p.updateQueue.baseState=S)}var kL={enqueueSetState:function(p,g,S){p=p._reactInternals;var I=Gl(),j=um(I);j.payload=g,S!=null&&(j.callback=S),g=dm(p,j,I),g!==null&&(ul(g,p,I),Z2(g,p,I))},enqueueReplaceState:function(p,g,S){p=p._reactInternals;var I=Gl(),j=um(I);j.tag=1,j.payload=g,S!=null&&(j.callback=S),g=dm(p,j,I),g!==null&&(ul(g,p,I),Z2(g,p,I))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var S=Gl(),I=um(S);I.tag=2,g!=null&&(I.callback=g),g=dm(p,I,S),g!==null&&(ul(g,p,S),Z2(g,p,S))}};function HG(p,g,S,I,j,V,ge){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,V,ge):g.prototype&&g.prototype.isPureReactComponent?!V2(S,I)||!V2(j,V):!0}function VG(p,g,S,I){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,I),g.state!==p&&kL.enqueueReplaceState(g,g.state,null)}function q0(p,g){var S=g;if("ref"in g){S={};for(var I in g)I!=="ref"&&(S[I]=g[I])}if(p=p.defaultProps){S===g&&(S=d({},S));for(var j in p)S[j]===void 0&&(S[j]=p[j])}return S}function UG(p){qC(p)}function WG(p){console.error(p)}function qG(p){qC(p)}function m3(p,g){try{var S=p.onUncaughtError;S(g.value,{componentStack:g.stack})}catch(I){setTimeout(function(){throw I})}}function GG(p,g,S){try{var I=p.onCaughtError;I(S.value,{componentStack:S.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function CL(p,g,S){return S=um(S),S.tag=3,S.payload={element:null},S.callback=function(){m3(p,g)},S}function KG(p){return p=um(p),p.tag=3,p}function XG(p,g,S,I){var j=S.type.getDerivedStateFromError;if(typeof j=="function"){var V=I.value;p.payload=function(){return j(V)},p.callback=function(){GG(g,S,I)}}var ge=S.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(p.callback=function(){GG(g,S,I),typeof j!="function"&&(ym===null?ym=new Set([this]):ym.add(this));var Le=I.stack;this.componentDidCatch(I.value,{componentStack:Le!==null?Le:""})})}function JCe(p,g,S,I,j){if(S.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(g=S.alternate,g!==null&&Mw(g,S,j,!0),S=Vl.current,S!==null){switch(S.tag){case 31:case 13:return Rc===null?C3():S.alternate===null&&cs===0&&(cs=3),S.flags&=-257,S.flags|=65536,S.lanes=j,I===n3?S.flags|=16384:(g=S.updateQueue,g===null?S.updateQueue=new Set([I]):g.add(I),JL(p,I,j)),!1;case 22:return S.flags|=65536,I===n3?S.flags|=16384:(g=S.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([I])},S.updateQueue=g):(S=g.retryQueue,S===null?g.retryQueue=new Set([I]):S.add(I)),JL(p,I,j)),!1}throw Error(r(435,S.tag))}return JL(p,I,j),C3(),!1}if(kr)return g=Vl.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=j,I!==qM&&(p=Error(r(422),{cause:I}),q2(Cc(p,S)))):(I!==qM&&(g=Error(r(423),{cause:I}),q2(Cc(g,S))),p=p.current.alternate,p.flags|=65536,j&=-j,p.lanes|=j,I=Cc(I,S),j=CL(p.stateNode,I,j),rL(p,j),cs!==4&&(cs=2)),!1;var V=Error(r(520),{cause:I});if(V=Cc(V,S),dE===null?dE=[V]:dE.push(V),cs!==4&&(cs=2),g===null)return!0;I=Cc(I,S),S=g;do{switch(S.tag){case 3:return S.flags|=65536,p=j&-j,S.lanes|=p,p=CL(S.stateNode,I,p),rL(S,p),!1;case 1:if(g=S.type,V=S.stateNode,(S.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(ym===null||!ym.has(V))))return S.flags|=65536,j&=-j,S.lanes|=j,j=KG(j),XG(j,p,S,I),rL(S,j),!1}S=S.return}while(S!==null);return!1}var _L=Error(r(461)),Rs=!1;function Po(p,g,S,I){g.child=p===null?Qq(g,null,S,I):U0(g,p.child,S,I)}function YG(p,g,S,I,j){S=S.render;var V=g.ref;if("ref"in I){var ge={};for(var Le in I)Le!=="ref"&&(ge[Le]=I[Le])}else ge=I;return $0(g),I=cL(p,g,S,ge,V,j),Le=uL(),p!==null&&!Rs?(dL(p,g,j),fh(p,g,j)):(kr&&Le&&UM(g),g.flags|=1,Po(p,g,I,j),g.child)}function ZG(p,g,S,I,j){if(p===null){var V=S.type;return typeof V=="function"&&!zM(V)&&V.defaultProps===void 0&&S.compare===null?(g.tag=15,g.type=V,JG(p,g,V,I,j)):(p=YC(S.type,null,I,g,g.mode,j),p.ref=g.ref,p.return=g,g.child=p)}if(V=p.child,!PL(p,j)){var ge=V.memoizedProps;if(S=S.compare,S=S!==null?S:V2,S(ge,I)&&p.ref===g.ref)return fh(p,g,j)}return g.flags|=1,p=oh(V,I),p.ref=g.ref,p.return=g,g.child=p}function JG(p,g,S,I,j){if(p!==null){var V=p.memoizedProps;if(V2(V,I)&&p.ref===g.ref)if(Rs=!1,g.pendingProps=I=V,PL(p,j))(p.flags&131072)!==0&&(Rs=!0);else return g.lanes=p.lanes,fh(p,g,j)}return NL(p,g,S,I,j)}function QG(p,g,S,I){var j=I.children,V=p!==null?p.memoizedState:null;if(p===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),I.mode==="hidden"){if((g.flags&128)!==0){if(V=V!==null?V.baseLanes|S:S,p!==null){for(I=g.child=p.child,j=0;I!==null;)j=j|I.lanes|I.childLanes,I=I.sibling;I=j&~V}else I=0,g.child=null;return eK(p,g,V,S,I)}if((S&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&e3(g,V!==null?V.cachePool:null),V!==null?nG(g,V):sL(),rG(g);else return I=g.lanes=536870912,eK(p,g,V!==null?V.baseLanes|S:S,S,I)}else V!==null?(e3(g,V.cachePool),nG(g,V),hm(),g.memoizedState=null):(p!==null&&e3(g,null),sL(),hm());return Po(p,g,j,S),g.child}function iE(p,g){return p!==null&&p.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function eK(p,g,S,I,j){var V=QM();return V=V===null?null:{parent:Ns._currentValue,pool:V},g.memoizedState={baseLanes:S,cachePool:V},p!==null&&e3(g,null),sL(),rG(g),p!==null&&Mw(p,g,I,!0),g.childLanes=j,null}function g3(p,g){return g=b3({mode:g.mode,children:g.children},p.mode),g.ref=p.ref,p.child=g,g.return=p,g}function tK(p,g,S){return U0(g,p.child,null,S),p=g3(g,g.pendingProps),p.flags|=2,Ul(g),g.memoizedState=null,p}function QCe(p,g,S){var I=g.pendingProps,j=(g.flags&128)!==0;if(g.flags&=-129,p===null){if(kr){if(I.mode==="hidden")return p=g3(g,I),g.lanes=536870912,iE(null,p);if(aL(g),(p=Fi)?(p=hX(p,Ic),p=p!==null&&p.data==="&"?p:null,p!==null&&(g.memoizedState={dehydrated:p,treeContext:sm!==null?{id:Rd,overflow:Md}:null,retryLane:536870912,hydrationErrors:null},S=Bq(p),S.return=g,g.child=S,Do=g,Fi=null)):p=null,p===null)throw am(g);return g.lanes=536870912,null}return g3(g,I)}var V=p.memoizedState;if(V!==null){var ge=V.dehydrated;if(aL(g),j)if(g.flags&256)g.flags&=-257,g=tK(p,g,S);else if(g.memoizedState!==null)g.child=p.child,g.flags|=128,g=null;else throw Error(r(558));else if(Rs||Mw(p,g,S,!1),j=(S&p.childLanes)!==0,Rs||j){if(I=Ci,I!==null&&(ge=Xe(I,S),ge!==0&&ge!==V.retryLane))throw V.retryLane=ge,P0(p,ge),ul(I,p,ge),_L;C3(),g=tK(p,g,S)}else p=V.treeContext,Fi=Mc(ge.nextSibling),Do=g,kr=!0,om=null,Ic=!1,p!==null&&zq(g,p),g=g3(g,I),g.flags|=4096;return g}return p=oh(p.child,{mode:I.mode,children:I.children}),p.ref=g.ref,g.child=p,p.return=g,p}function y3(p,g){var S=g.ref;if(S===null)p!==null&&p.ref!==null&&(g.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(p===null||p.ref!==S)&&(g.flags|=4194816)}}function NL(p,g,S,I,j){return $0(g),S=cL(p,g,S,I,void 0,j),I=uL(),p!==null&&!Rs?(dL(p,g,j),fh(p,g,j)):(kr&&I&&UM(g),g.flags|=1,Po(p,g,S,j),g.child)}function nK(p,g,S,I,j,V){return $0(g),g.updateQueue=null,S=sG(g,I,S,j),iG(p),I=uL(),p!==null&&!Rs?(dL(p,g,V),fh(p,g,V)):(kr&&I&&UM(g),g.flags|=1,Po(p,g,S,V),g.child)}function rK(p,g,S,I,j){if($0(g),g.stateNode===null){var V=_w,ge=S.contextType;typeof ge=="object"&&ge!==null&&(V=Oo(ge)),V=new S(I,V),g.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=kL,g.stateNode=V,V._reactInternals=g,V=g.stateNode,V.props=I,V.state=g.memoizedState,V.refs={},tL(g),ge=S.contextType,V.context=typeof ge=="object"&&ge!==null?Oo(ge):_w,V.state=g.memoizedState,ge=S.getDerivedStateFromProps,typeof ge=="function"&&(TL(g,S,ge,I),V.state=g.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(ge=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),ge!==V.state&&kL.enqueueReplaceState(V,V.state,null),Q2(g,I,V,j),J2(),V.state=g.memoizedState),typeof V.componentDidMount=="function"&&(g.flags|=4194308),I=!0}else if(p===null){V=g.stateNode;var Le=g.memoizedProps,Ke=q0(S,Le);V.props=Ke;var mt=V.context,At=S.contextType;ge=_w,typeof At=="object"&&At!==null&&(ge=Oo(At));var _t=S.getDerivedStateFromProps;At=typeof _t=="function"||typeof V.getSnapshotBeforeUpdate=="function",Le=g.pendingProps!==Le,At||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Le||mt!==ge)&&VG(g,V,I,ge),cm=!1;var yt=g.memoizedState;V.state=yt,Q2(g,I,V,j),J2(),mt=g.memoizedState,Le||yt!==mt||cm?(typeof _t=="function"&&(TL(g,S,_t,I),mt=g.memoizedState),(Ke=cm||HG(g,S,Ke,I,yt,mt,ge))?(At||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(g.flags|=4194308)):(typeof V.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=mt),V.props=I,V.state=mt,V.context=ge,I=Ke):(typeof V.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{V=g.stateNode,nL(p,g),ge=g.memoizedProps,At=q0(S,ge),V.props=At,_t=g.pendingProps,yt=V.context,mt=S.contextType,Ke=_w,typeof mt=="object"&&mt!==null&&(Ke=Oo(mt)),Le=S.getDerivedStateFromProps,(mt=typeof Le=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ge!==_t||yt!==Ke)&&VG(g,V,I,Ke),cm=!1,yt=g.memoizedState,V.state=yt,Q2(g,I,V,j),J2();var St=g.memoizedState;ge!==_t||yt!==St||cm||p!==null&&p.dependencies!==null&&JC(p.dependencies)?(typeof Le=="function"&&(TL(g,S,Le,I),St=g.memoizedState),(At=cm||HG(g,S,At,I,yt,St,Ke)||p!==null&&p.dependencies!==null&&JC(p.dependencies))?(mt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(I,St,Ke),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(I,St,Ke)),typeof V.componentDidUpdate=="function"&&(g.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof V.componentDidUpdate!="function"||ge===p.memoizedProps&&yt===p.memoizedState||(g.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ge===p.memoizedProps&&yt===p.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=St),V.props=I,V.state=St,V.context=Ke,I=At):(typeof V.componentDidUpdate!="function"||ge===p.memoizedProps&&yt===p.memoizedState||(g.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ge===p.memoizedProps&&yt===p.memoizedState||(g.flags|=1024),I=!1)}return V=I,y3(p,g),I=(g.flags&128)!==0,V||I?(V=g.stateNode,S=I&&typeof S.getDerivedStateFromError!="function"?null:V.render(),g.flags|=1,p!==null&&I?(g.child=U0(g,p.child,null,j),g.child=U0(g,null,S,j)):Po(p,g,S,j),g.memoizedState=V.state,p=g.child):p=fh(p,g,j),p}function iK(p,g,S,I){return B0(),g.flags|=256,Po(p,g,S,I),g.child}var IL={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function RL(p){return{baseLanes:p,cachePool:Gq()}}function ML(p,g,S){return p=p!==null?p.childLanes&~S:0,g&&(p|=ql),p}function sK(p,g,S){var I=g.pendingProps,j=!1,V=(g.flags&128)!==0,ge;if((ge=V)||(ge=p!==null&&p.memoizedState===null?!1:(bs.current&2)!==0),ge&&(j=!0,g.flags&=-129),ge=(g.flags&32)!==0,g.flags&=-33,p===null){if(kr){if(j?fm(g):hm(),(p=Fi)?(p=hX(p,Ic),p=p!==null&&p.data!=="&"?p:null,p!==null&&(g.memoizedState={dehydrated:p,treeContext:sm!==null?{id:Rd,overflow:Md}:null,retryLane:536870912,hydrationErrors:null},S=Bq(p),S.return=g,g.child=S,Do=g,Fi=null)):p=null,p===null)throw am(g);return pD(p)?g.lanes=32:g.lanes=536870912,null}var Le=I.children;return I=I.fallback,j?(hm(),j=g.mode,Le=b3({mode:"hidden",children:Le},j),I=F0(I,j,S,null),Le.return=g,I.return=g,Le.sibling=I,g.child=Le,I=g.child,I.memoizedState=RL(S),I.childLanes=ML(p,ge,S),g.memoizedState=IL,iE(null,I)):(fm(g),LL(g,Le))}var Ke=p.memoizedState;if(Ke!==null&&(Le=Ke.dehydrated,Le!==null)){if(V)g.flags&256?(fm(g),g.flags&=-257,g=DL(p,g,S)):g.memoizedState!==null?(hm(),g.child=p.child,g.flags|=128,g=null):(hm(),Le=I.fallback,j=g.mode,I=b3({mode:"visible",children:I.children},j),Le=F0(Le,j,S,null),Le.flags|=2,I.return=g,Le.return=g,I.sibling=Le,g.child=I,U0(g,p.child,null,S),I=g.child,I.memoizedState=RL(S),I.childLanes=ML(p,ge,S),g.memoizedState=IL,g=iE(null,I));else if(fm(g),pD(Le)){if(ge=Le.nextSibling&&Le.nextSibling.dataset,ge)var mt=ge.dgst;ge=mt,I=Error(r(419)),I.stack="",I.digest=ge,q2({value:I,source:null,stack:null}),g=DL(p,g,S)}else if(Rs||Mw(p,g,S,!1),ge=(S&p.childLanes)!==0,Rs||ge){if(ge=Ci,ge!==null&&(I=Xe(ge,S),I!==0&&I!==Ke.retryLane))throw Ke.retryLane=I,P0(p,I),ul(ge,p,I),_L;hD(Le)||C3(),g=DL(p,g,S)}else hD(Le)?(g.flags|=192,g.child=p.child,g=null):(p=Ke.treeContext,Fi=Mc(Le.nextSibling),Do=g,kr=!0,om=null,Ic=!1,p!==null&&zq(g,p),g=LL(g,I.children),g.flags|=4096);return g}return j?(hm(),Le=I.fallback,j=g.mode,Ke=p.child,mt=Ke.sibling,I=oh(Ke,{mode:"hidden",children:I.children}),I.subtreeFlags=Ke.subtreeFlags&65011712,mt!==null?Le=oh(mt,Le):(Le=F0(Le,j,S,null),Le.flags|=2),Le.return=g,I.return=g,I.sibling=Le,g.child=I,iE(null,I),I=g.child,Le=p.child.memoizedState,Le===null?Le=RL(S):(j=Le.cachePool,j!==null?(Ke=Ns._currentValue,j=j.parent!==Ke?{parent:Ke,pool:Ke}:j):j=Gq(),Le={baseLanes:Le.baseLanes|S,cachePool:j}),I.memoizedState=Le,I.childLanes=ML(p,ge,S),g.memoizedState=IL,iE(p.child,I)):(fm(g),S=p.child,p=S.sibling,S=oh(S,{mode:"visible",children:I.children}),S.return=g,S.sibling=null,p!==null&&(ge=g.deletions,ge===null?(g.deletions=[p],g.flags|=16):ge.push(p)),g.child=S,g.memoizedState=null,S)}function LL(p,g){return g=b3({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function b3(p,g){return p=Hl(22,p,null,g),p.lanes=0,p}function DL(p,g,S){return U0(g,p.child,null,S),p=LL(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function oK(p,g,S){p.lanes|=g;var I=p.alternate;I!==null&&(I.lanes|=g),XM(p.return,g,S)}function OL(p,g,S,I,j,V){var ge=p.memoizedState;ge===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:S,tailMode:j,treeForkCount:V}:(ge.isBackwards=g,ge.rendering=null,ge.renderingStartTime=0,ge.last=I,ge.tail=S,ge.tailMode=j,ge.treeForkCount=V)}function aK(p,g,S){var I=g.pendingProps,j=I.revealOrder,V=I.tail;I=I.children;var ge=bs.current,Le=(ge&2)!==0;if(Le?(ge=ge&1|2,g.flags|=128):ge&=1,re(bs,ge),Po(p,g,I,S),I=kr?W2:0,!Le&&p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&oK(p,S,g);else if(p.tag===19)oK(p,S,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(j){case"forwards":for(S=g.child,j=null;S!==null;)p=S.alternate,p!==null&&o3(p)===null&&(j=S),S=S.sibling;S=j,S===null?(j=g.child,g.child=null):(j=S.sibling,S.sibling=null),OL(g,!1,j,S,V,I);break;case"backwards":case"unstable_legacy-backwards":for(S=null,j=g.child,g.child=null;j!==null;){if(p=j.alternate,p!==null&&o3(p)===null){g.child=j;break}p=j.sibling,j.sibling=S,S=j,j=p}OL(g,!0,S,null,V,I);break;case"together":OL(g,!1,null,null,void 0,I);break;default:g.memoizedState=null}return g.child}function fh(p,g,S){if(p!==null&&(g.dependencies=p.dependencies),gm|=g.lanes,(S&g.childLanes)===0)if(p!==null){if(Mw(p,g,S,!1),(S&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(r(153));if(g.child!==null){for(p=g.child,S=oh(p,p.pendingProps),g.child=S,S.return=g;p.sibling!==null;)p=p.sibling,S=S.sibling=oh(p,p.pendingProps),S.return=g;S.sibling=null}return g.child}function PL(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&JC(p)))}function e3e(p,g,S){switch(g.tag){case 3:z(g,g.stateNode.containerInfo),lm(g,Ns,p.memoizedState.cache),B0();break;case 27:case 5:Y(g);break;case 4:z(g,g.stateNode.containerInfo);break;case 10:lm(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,aL(g),null;break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(fm(g),g.flags|=128,null):(S&g.child.childLanes)!==0?sK(p,g,S):(fm(g),p=fh(p,g,S),p!==null?p.sibling:null);fm(g);break;case 19:var j=(p.flags&128)!==0;if(I=(S&g.childLanes)!==0,I||(Mw(p,g,S,!1),I=(S&g.childLanes)!==0),j){if(I)return aK(p,g,S);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),re(bs,bs.current),I)break;return null;case 22:return g.lanes=0,QG(p,g,S,g.pendingProps);case 24:lm(g,Ns,p.memoizedState.cache)}return fh(p,g,S)}function lK(p,g,S){if(p!==null)if(p.memoizedProps!==g.pendingProps)Rs=!0;else{if(!PL(p,S)&&(g.flags&128)===0)return Rs=!1,e3e(p,g,S);Rs=(p.flags&131072)!==0}else Rs=!1,kr&&(g.flags&1048576)!==0&&$q(g,W2,g.index);switch(g.lanes=0,g.tag){case 16:e:{var I=g.pendingProps;if(p=H0(g.elementType),g.type=p,typeof p=="function")zM(p)?(I=q0(p,I),g.tag=1,g=rK(null,g,p,I,S)):(g.tag=0,g=NL(null,g,p,I,S));else{if(p!=null){var j=p.$$typeof;if(j===x){g.tag=11,g=YG(null,g,p,I,S);break e}else if(j===k){g.tag=14,g=ZG(null,g,p,I,S);break e}}throw g=O(p)||p,Error(r(306,g,""))}}return g;case 0:return NL(p,g,g.type,g.pendingProps,S);case 1:return I=g.type,j=q0(I,g.pendingProps),rK(p,g,I,j,S);case 3:e:{if(z(g,g.stateNode.containerInfo),p===null)throw Error(r(387));I=g.pendingProps;var V=g.memoizedState;j=V.element,nL(p,g),Q2(g,I,null,S);var ge=g.memoizedState;if(I=ge.cache,lm(g,Ns,I),I!==V.cache&&YM(g,[Ns],S,!0),J2(),I=ge.element,V.isDehydrated)if(V={element:I,isDehydrated:!1,cache:ge.cache},g.updateQueue.baseState=V,g.memoizedState=V,g.flags&256){g=iK(p,g,I,S);break e}else if(I!==j){j=Cc(Error(r(424)),g),q2(j),g=iK(p,g,I,S);break e}else{switch(p=g.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(Fi=Mc(p.firstChild),Do=g,kr=!0,om=null,Ic=!0,S=Qq(g,null,I,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling}else{if(B0(),I===j){g=fh(p,g,S);break e}Po(p,g,I,S)}g=g.child}return g;case 26:return y3(p,g),p===null?(S=wX(g.type,null,g.pendingProps,null))?g.memoizedState=S:kr||(S=g.type,p=g.pendingProps,I=D3(G.current).createElement(S),I[qt]=g,I[et]=p,Fo(I,S,p),Rn(I),g.stateNode=I):g.memoizedState=wX(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:return Y(g),p===null&&kr&&(I=g.stateNode=gX(g.type,g.pendingProps,G.current),Do=g,Ic=!0,j=Fi,xm(g.type)?(mD=j,Fi=Mc(I.firstChild)):Fi=j),Po(p,g,g.pendingProps.children,S),y3(p,g),p===null&&(g.flags|=4194304),g.child;case 5:return p===null&&kr&&((j=I=Fi)&&(I=I3e(I,g.type,g.pendingProps,Ic),I!==null?(g.stateNode=I,Do=g,Fi=Mc(I.firstChild),Ic=!1,j=!0):j=!1),j||am(g)),Y(g),j=g.type,V=g.pendingProps,ge=p!==null?p.memoizedProps:null,I=V.children,uD(j,V)?I=null:ge!==null&&uD(j,ge)&&(g.flags|=32),g.memoizedState!==null&&(j=cL(p,g,WCe,null,null,S),wE._currentValue=j),y3(p,g),Po(p,g,I,S),g.child;case 6:return p===null&&kr&&((p=S=Fi)&&(S=R3e(S,g.pendingProps,Ic),S!==null?(g.stateNode=S,Do=g,Fi=null,p=!0):p=!1),p||am(g)),null;case 13:return sK(p,g,S);case 4:return z(g,g.stateNode.containerInfo),I=g.pendingProps,p===null?g.child=U0(g,null,I,S):Po(p,g,I,S),g.child;case 11:return YG(p,g,g.type,g.pendingProps,S);case 7:return Po(p,g,g.pendingProps,S),g.child;case 8:return Po(p,g,g.pendingProps.children,S),g.child;case 12:return Po(p,g,g.pendingProps.children,S),g.child;case 10:return I=g.pendingProps,lm(g,g.type,I.value),Po(p,g,I.children,S),g.child;case 9:return j=g.type._context,I=g.pendingProps.children,$0(g),j=Oo(j),I=I(j),g.flags|=1,Po(p,g,I,S),g.child;case 14:return ZG(p,g,g.type,g.pendingProps,S);case 15:return JG(p,g,g.type,g.pendingProps,S);case 19:return aK(p,g,S);case 31:return QCe(p,g,S);case 22:return QG(p,g,S,g.pendingProps);case 24:return $0(g),I=Oo(Ns),p===null?(j=QM(),j===null&&(j=Ci,V=ZM(),j.pooledCache=V,V.refCount++,V!==null&&(j.pooledCacheLanes|=S),j=V),g.memoizedState={parent:I,cache:j},tL(g),lm(g,Ns,j)):((p.lanes&S)!==0&&(nL(p,g),Q2(g,null,null,S),J2()),j=p.memoizedState,V=g.memoizedState,j.parent!==I?(j={parent:I,cache:I},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),lm(g,Ns,I)):(I=V.cache,lm(g,Ns,I),I!==j.cache&&YM(g,[Ns],S,!0))),Po(p,g,g.pendingProps.children,S),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function hh(p){p.flags|=4}function FL(p,g,S,I,j){if((g=(p.mode&32)!==0)&&(g=!1),g){if(p.flags|=16777216,(j&335544128)===j)if(p.stateNode.complete)p.flags|=8192;else if(OK())p.flags|=8192;else throw V0=n3,eL}else p.flags&=-16777217}function cK(p,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!AX(g))if(OK())p.flags|=8192;else throw V0=n3,eL}function w3(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?ri():536870912,p.lanes|=g,Uw|=g)}function sE(p,g){if(!kr)switch(p.tailMode){case"hidden":g=p.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?p.tail=null:S.sibling=null;break;case"collapsed":S=p.tail;for(var I=null;S!==null;)S.alternate!==null&&(I=S),S=S.sibling;I===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function Bi(p){var g=p.alternate!==null&&p.alternate.child===p.child,S=0,I=0;if(g)for(var j=p.child;j!==null;)S|=j.lanes|j.childLanes,I|=j.subtreeFlags&65011712,I|=j.flags&65011712,j.return=p,j=j.sibling;else for(j=p.child;j!==null;)S|=j.lanes|j.childLanes,I|=j.subtreeFlags,I|=j.flags,j.return=p,j=j.sibling;return p.subtreeFlags|=I,p.childLanes=S,g}function t3e(p,g,S){var I=g.pendingProps;switch(WM(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(g),null;case 1:return Bi(g),null;case 3:return S=g.stateNode,I=null,p!==null&&(I=p.memoizedState.cache),g.memoizedState.cache!==I&&(g.flags|=2048),ch(Ns),de(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(p===null||p.child===null)&&(Rw(g)?hh(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,GM())),Bi(g),null;case 26:var j=g.type,V=g.memoizedState;return p===null?(hh(g),V!==null?(Bi(g),cK(g,V)):(Bi(g),FL(g,j,null,I,S))):V?V!==p.memoizedState?(hh(g),Bi(g),cK(g,V)):(Bi(g),g.flags&=-16777217):(p=p.memoizedProps,p!==I&&hh(g),Bi(g),FL(g,j,p,I,S)),null;case 27:if(ee(g),S=G.current,j=g.type,p!==null&&g.stateNode!=null)p.memoizedProps!==I&&hh(g);else{if(!I){if(g.stateNode===null)throw Error(r(166));return Bi(g),null}p=X.current,Rw(g)?Hq(g):(p=gX(j,I,S),g.stateNode=p,hh(g))}return Bi(g),null;case 5:if(ee(g),j=g.type,p!==null&&g.stateNode!=null)p.memoizedProps!==I&&hh(g);else{if(!I){if(g.stateNode===null)throw Error(r(166));return Bi(g),null}if(V=X.current,Rw(g))Hq(g);else{var ge=D3(G.current);switch(V){case 1:V=ge.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:V=ge.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":V=ge.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":V=ge.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":V=ge.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof I.is=="string"?ge.createElement("select",{is:I.is}):ge.createElement("select"),I.multiple?V.multiple=!0:I.size&&(V.size=I.size);break;default:V=typeof I.is=="string"?ge.createElement(j,{is:I.is}):ge.createElement(j)}}V[qt]=g,V[et]=I;e:for(ge=g.child;ge!==null;){if(ge.tag===5||ge.tag===6)V.appendChild(ge.stateNode);else if(ge.tag!==4&&ge.tag!==27&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===g)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===g)break e;ge=ge.return}ge.sibling.return=ge.return,ge=ge.sibling}g.stateNode=V;e:switch(Fo(V,j,I),j){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}I&&hh(g)}}return Bi(g),FL(g,g.type,p===null?null:p.memoizedProps,g.pendingProps,S),null;case 6:if(p&&g.stateNode!=null)p.memoizedProps!==I&&hh(g);else{if(typeof I!="string"&&g.stateNode===null)throw Error(r(166));if(p=G.current,Rw(g)){if(p=g.stateNode,S=g.memoizedProps,I=null,j=Do,j!==null)switch(j.tag){case 27:case 5:I=j.memoizedProps}p[qt]=g,p=!!(p.nodeValue===S||I!==null&&I.suppressHydrationWarning===!0||sX(p.nodeValue,S)),p||am(g,!0)}else p=D3(p).createTextNode(I),p[qt]=g,g.stateNode=p}return Bi(g),null;case 31:if(S=g.memoizedState,p===null||p.memoizedState!==null){if(I=Rw(g),S!==null){if(p===null){if(!I)throw Error(r(318));if(p=g.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));p[qt]=g}else B0(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Bi(g),p=!1}else S=GM(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=S),p=!0;if(!p)return g.flags&256?(Ul(g),g):(Ul(g),null);if((g.flags&128)!==0)throw Error(r(558))}return Bi(g),null;case 13:if(I=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(j=Rw(g),I!==null&&I.dehydrated!==null){if(p===null){if(!j)throw Error(r(318));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[qt]=g}else B0(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Bi(g),j=!1}else j=GM(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=j),j=!0;if(!j)return g.flags&256?(Ul(g),g):(Ul(g),null)}return Ul(g),(g.flags&128)!==0?(g.lanes=S,g):(S=I!==null,p=p!==null&&p.memoizedState!==null,S&&(I=g.child,j=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(j=I.alternate.memoizedState.cachePool.pool),V=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(V=I.memoizedState.cachePool.pool),V!==j&&(I.flags|=2048)),S!==p&&S&&(g.child.flags|=8192),w3(g,g.updateQueue),Bi(g),null);case 4:return de(),p===null&&sD(g.stateNode.containerInfo),Bi(g),null;case 10:return ch(g.type),Bi(g),null;case 19:if(K(bs),I=g.memoizedState,I===null)return Bi(g),null;if(j=(g.flags&128)!==0,V=I.rendering,V===null)if(j)sE(I,!1);else{if(cs!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(V=o3(p),V!==null){for(g.flags|=128,sE(I,!1),p=V.updateQueue,g.updateQueue=p,w3(g,p),g.subtreeFlags=0,p=S,S=g.child;S!==null;)Fq(S,p),S=S.sibling;return re(bs,bs.current&1|2),kr&&ah(g,I.treeForkCount),g.child}p=p.sibling}I.tail!==null&&Re()>A3&&(g.flags|=128,j=!0,sE(I,!1),g.lanes=4194304)}else{if(!j)if(p=o3(V),p!==null){if(g.flags|=128,j=!0,p=p.updateQueue,g.updateQueue=p,w3(g,p),sE(I,!0),I.tail===null&&I.tailMode==="hidden"&&!V.alternate&&!kr)return Bi(g),null}else 2*Re()-I.renderingStartTime>A3&&S!==536870912&&(g.flags|=128,j=!0,sE(I,!1),g.lanes=4194304);I.isBackwards?(V.sibling=g.child,g.child=V):(p=I.last,p!==null?p.sibling=V:g.child=V,I.last=V)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=Re(),p.sibling=null,S=bs.current,re(bs,j?S&1|2:S&1),kr&&ah(g,I.treeForkCount),p):(Bi(g),null);case 22:case 23:return Ul(g),oL(),I=g.memoizedState!==null,p!==null?p.memoizedState!==null!==I&&(g.flags|=8192):I&&(g.flags|=8192),I?(S&536870912)!==0&&(g.flags&128)===0&&(Bi(g),g.subtreeFlags&6&&(g.flags|=8192)):Bi(g),S=g.updateQueue,S!==null&&w3(g,S.retryQueue),S=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==S&&(g.flags|=2048),p!==null&&K(z0),null;case 24:return S=null,p!==null&&(S=p.memoizedState.cache),g.memoizedState.cache!==S&&(g.flags|=2048),ch(Ns),Bi(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function n3e(p,g){switch(WM(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return ch(Ns),de(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return ee(g),null;case 31:if(g.memoizedState!==null){if(Ul(g),g.alternate===null)throw Error(r(340));B0()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 13:if(Ul(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(r(340));B0()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return K(bs),null;case 4:return de(),null;case 10:return ch(g.type),null;case 22:case 23:return Ul(g),oL(),p!==null&&K(z0),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return ch(Ns),null;case 25:return null;default:return null}}function uK(p,g){switch(WM(g),g.tag){case 3:ch(Ns),de();break;case 26:case 27:case 5:ee(g);break;case 4:de();break;case 31:g.memoizedState!==null&&Ul(g);break;case 13:Ul(g);break;case 19:K(bs);break;case 10:ch(g.type);break;case 22:case 23:Ul(g),oL(),p!==null&&K(z0);break;case 24:ch(Ns)}}function oE(p,g){try{var S=g.updateQueue,I=S!==null?S.lastEffect:null;if(I!==null){var j=I.next;S=j;do{if((S.tag&p)===p){I=void 0;var V=S.create,ge=S.inst;I=V(),ge.destroy=I}S=S.next}while(S!==j)}}catch(Le){mi(g,g.return,Le)}}function pm(p,g,S){try{var I=g.updateQueue,j=I!==null?I.lastEffect:null;if(j!==null){var V=j.next;I=V;do{if((I.tag&p)===p){var ge=I.inst,Le=ge.destroy;if(Le!==void 0){ge.destroy=void 0,j=g;var Ke=S,mt=Le;try{mt()}catch(At){mi(j,Ke,At)}}}I=I.next}while(I!==V)}}catch(At){mi(g,g.return,At)}}function dK(p){var g=p.updateQueue;if(g!==null){var S=p.stateNode;try{tG(g,S)}catch(I){mi(p,p.return,I)}}}function fK(p,g,S){S.props=q0(p.type,p.memoizedProps),S.state=p.memoizedState;try{S.componentWillUnmount()}catch(I){mi(p,g,I)}}function aE(p,g){try{var S=p.ref;if(S!==null){switch(p.tag){case 26:case 27:case 5:var I=p.stateNode;break;case 30:I=p.stateNode;break;default:I=p.stateNode}typeof S=="function"?p.refCleanup=S(I):S.current=I}}catch(j){mi(p,g,j)}}function Ld(p,g){var S=p.ref,I=p.refCleanup;if(S!==null)if(typeof I=="function")try{I()}catch(j){mi(p,g,j)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(j){mi(p,g,j)}else S.current=null}function hK(p){var g=p.type,S=p.memoizedProps,I=p.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":S.autoFocus&&I.focus();break e;case"img":S.src?I.src=S.src:S.srcSet&&(I.srcset=S.srcSet)}}catch(j){mi(p,p.return,j)}}function BL(p,g,S){try{var I=p.stateNode;A3e(I,p.type,S,g),I[et]=g}catch(j){mi(p,p.return,j)}}function pK(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&xm(p.type)||p.tag===4}function jL(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||pK(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&xm(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function $L(p,g,S){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(p,g):(g=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,g.appendChild(p),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=il));else if(I!==4&&(I===27&&xm(p.type)&&(S=p.stateNode,g=null),p=p.child,p!==null))for($L(p,g,S),p=p.sibling;p!==null;)$L(p,g,S),p=p.sibling}function v3(p,g,S){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?S.insertBefore(p,g):S.appendChild(p);else if(I!==4&&(I===27&&xm(p.type)&&(S=p.stateNode),p=p.child,p!==null))for(v3(p,g,S),p=p.sibling;p!==null;)v3(p,g,S),p=p.sibling}function mK(p){var g=p.stateNode,S=p.memoizedProps;try{for(var I=p.type,j=g.attributes;j.length;)g.removeAttributeNode(j[0]);Fo(g,I,S),g[qt]=p,g[et]=S}catch(V){mi(p,p.return,V)}}var ph=!1,Ms=!1,zL=!1,gK=typeof WeakSet=="function"?WeakSet:Set,lo=null;function r3e(p,g){if(p=p.containerInfo,lD=z3,p=_q(p),DM(p)){if("selectionStart"in p)var S={start:p.selectionStart,end:p.selectionEnd};else e:{S=(S=p.ownerDocument)&&S.defaultView||window;var I=S.getSelection&&S.getSelection();if(I&&I.rangeCount!==0){S=I.anchorNode;var j=I.anchorOffset,V=I.focusNode;I=I.focusOffset;try{S.nodeType,V.nodeType}catch{S=null;break e}var ge=0,Le=-1,Ke=-1,mt=0,At=0,_t=p,yt=null;t:for(;;){for(var St;_t!==S||j!==0&&_t.nodeType!==3||(Le=ge+j),_t!==V||I!==0&&_t.nodeType!==3||(Ke=ge+I),_t.nodeType===3&&(ge+=_t.nodeValue.length),(St=_t.firstChild)!==null;)yt=_t,_t=St;for(;;){if(_t===p)break t;if(yt===S&&++mt===j&&(Le=ge),yt===V&&++At===I&&(Ke=ge),(St=_t.nextSibling)!==null)break;_t=yt,yt=_t.parentNode}_t=St}S=Le===-1||Ke===-1?null:{start:Le,end:Ke}}else S=null}S=S||{start:0,end:0}}else S=null;for(cD={focusedElem:p,selectionRange:S},z3=!1,lo=g;lo!==null;)if(g=lo,p=g.child,(g.subtreeFlags&1028)!==0&&p!==null)p.return=g,lo=p;else for(;lo!==null;){switch(g=lo,V=g.alternate,p=g.flags,g.tag){case 0:if((p&4)!==0&&(p=g.updateQueue,p=p!==null?p.events:null,p!==null))for(S=0;S<p.length;S++)j=p[S],j.ref.impl=j.nextImpl;break;case 11:case 15:break;case 1:if((p&1024)!==0&&V!==null){p=void 0,S=g,j=V.memoizedProps,V=V.memoizedState,I=S.stateNode;try{var on=q0(S.type,j);p=I.getSnapshotBeforeUpdate(on,V),I.__reactInternalSnapshotBeforeUpdate=p}catch(Mn){mi(S,S.return,Mn)}}break;case 3:if((p&1024)!==0){if(p=g.stateNode.containerInfo,S=p.nodeType,S===9)fD(p);else if(S===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":fD(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=g.sibling,p!==null){p.return=g.return,lo=p;break}lo=g.return}}function yK(p,g,S){var I=S.flags;switch(S.tag){case 0:case 11:case 15:gh(p,S),I&4&&oE(5,S);break;case 1:if(gh(p,S),I&4)if(p=S.stateNode,g===null)try{p.componentDidMount()}catch(ge){mi(S,S.return,ge)}else{var j=q0(S.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(j,g,p.__reactInternalSnapshotBeforeUpdate)}catch(ge){mi(S,S.return,ge)}}I&64&&dK(S),I&512&&aE(S,S.return);break;case 3:if(gh(p,S),I&64&&(p=S.updateQueue,p!==null)){if(g=null,S.child!==null)switch(S.child.tag){case 27:case 5:g=S.child.stateNode;break;case 1:g=S.child.stateNode}try{tG(p,g)}catch(ge){mi(S,S.return,ge)}}break;case 27:g===null&&I&4&&mK(S);case 26:case 5:gh(p,S),g===null&&I&4&&hK(S),I&512&&aE(S,S.return);break;case 12:gh(p,S);break;case 31:gh(p,S),I&4&&vK(p,S);break;case 13:gh(p,S),I&4&&xK(p,S),I&64&&(p=S.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(S=f3e.bind(null,S),M3e(p,S))));break;case 22:if(I=S.memoizedState!==null||ph,!I){g=g!==null&&g.memoizedState!==null||Ms,j=ph;var V=Ms;ph=I,(Ms=g)&&!V?yh(p,S,(S.subtreeFlags&8772)!==0):gh(p,S),ph=j,Ms=V}break;case 30:break;default:gh(p,S)}}function bK(p){var g=p.alternate;g!==null&&(p.alternate=null,bK(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&Hn(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Gi=null,ol=!1;function mh(p,g,S){for(S=S.child;S!==null;)wK(p,g,S),S=S.sibling}function wK(p,g,S){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(Ee,S)}catch{}switch(S.tag){case 26:Ms||Ld(S,g),mh(p,g,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:Ms||Ld(S,g);var I=Gi,j=ol;xm(S.type)&&(Gi=S.stateNode,ol=!1),mh(p,g,S),gE(S.stateNode),Gi=I,ol=j;break;case 5:Ms||Ld(S,g);case 6:if(I=Gi,j=ol,Gi=null,mh(p,g,S),Gi=I,ol=j,Gi!==null)if(ol)try{(Gi.nodeType===9?Gi.body:Gi.nodeName==="HTML"?Gi.ownerDocument.body:Gi).removeChild(S.stateNode)}catch(V){mi(S,g,V)}else try{Gi.removeChild(S.stateNode)}catch(V){mi(S,g,V)}break;case 18:Gi!==null&&(ol?(p=Gi,dX(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,S.stateNode),Jw(p)):dX(Gi,S.stateNode));break;case 4:I=Gi,j=ol,Gi=S.stateNode.containerInfo,ol=!0,mh(p,g,S),Gi=I,ol=j;break;case 0:case 11:case 14:case 15:pm(2,S,g),Ms||pm(4,S,g),mh(p,g,S);break;case 1:Ms||(Ld(S,g),I=S.stateNode,typeof I.componentWillUnmount=="function"&&fK(S,g,I)),mh(p,g,S);break;case 21:mh(p,g,S);break;case 22:Ms=(I=Ms)||S.memoizedState!==null,mh(p,g,S),Ms=I;break;default:mh(p,g,S)}}function vK(p,g){if(g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{Jw(p)}catch(S){mi(g,g.return,S)}}}function xK(p,g){if(g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Jw(p)}catch(S){mi(g,g.return,S)}}function i3e(p){switch(p.tag){case 31:case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new gK),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new gK),g;default:throw Error(r(435,p.tag))}}function x3(p,g){var S=i3e(p);g.forEach(function(I){if(!S.has(I)){S.add(I);var j=h3e.bind(null,p,I);I.then(j,j)}})}function al(p,g){var S=g.deletions;if(S!==null)for(var I=0;I<S.length;I++){var j=S[I],V=p,ge=g,Le=ge;e:for(;Le!==null;){switch(Le.tag){case 27:if(xm(Le.type)){Gi=Le.stateNode,ol=!1;break e}break;case 5:Gi=Le.stateNode,ol=!1;break e;case 3:case 4:Gi=Le.stateNode.containerInfo,ol=!0;break e}Le=Le.return}if(Gi===null)throw Error(r(160));wK(V,ge,j),Gi=null,ol=!1,V=j.alternate,V!==null&&(V.return=null),j.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)EK(g,p),g=g.sibling}var Tu=null;function EK(p,g){var S=p.alternate,I=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:al(g,p),ll(p),I&4&&(pm(3,p,p.return),oE(3,p),pm(5,p,p.return));break;case 1:al(g,p),ll(p),I&512&&(Ms||S===null||Ld(S,S.return)),I&64&&ph&&(p=p.updateQueue,p!==null&&(I=p.callbacks,I!==null&&(S=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=S===null?I:S.concat(I))));break;case 26:var j=Tu;if(al(g,p),ll(p),I&512&&(Ms||S===null||Ld(S,S.return)),I&4){var V=S!==null?S.memoizedState:null;if(I=p.memoizedState,S===null)if(I===null)if(p.stateNode===null){e:{I=p.type,S=p.memoizedProps,j=j.ownerDocument||j;t:switch(I){case"title":V=j.getElementsByTagName("title")[0],(!V||V[$t]||V[qt]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=j.createElement(I),j.head.insertBefore(V,j.querySelector("head > title"))),Fo(V,I,S),V[qt]=p,Rn(V),I=V;break e;case"link":var ge=EX("link","href",j).get(I+(S.href||""));if(ge){for(var Le=0;Le<ge.length;Le++)if(V=ge[Le],V.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&V.getAttribute("rel")===(S.rel==null?null:S.rel)&&V.getAttribute("title")===(S.title==null?null:S.title)&&V.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){ge.splice(Le,1);break t}}V=j.createElement(I),Fo(V,I,S),j.head.appendChild(V);break;case"meta":if(ge=EX("meta","content",j).get(I+(S.content||""))){for(Le=0;Le<ge.length;Le++)if(V=ge[Le],V.getAttribute("content")===(S.content==null?null:""+S.content)&&V.getAttribute("name")===(S.name==null?null:S.name)&&V.getAttribute("property")===(S.property==null?null:S.property)&&V.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&V.getAttribute("charset")===(S.charSet==null?null:S.charSet)){ge.splice(Le,1);break t}}V=j.createElement(I),Fo(V,I,S),j.head.appendChild(V);break;default:throw Error(r(468,I))}V[qt]=p,Rn(V),I=V}p.stateNode=I}else SX(j,p.type,p.stateNode);else p.stateNode=xX(j,I,p.memoizedProps);else V!==I?(V===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):V.count--,I===null?SX(j,p.type,p.stateNode):xX(j,I,p.memoizedProps)):I===null&&p.stateNode!==null&&BL(p,p.memoizedProps,S.memoizedProps)}break;case 27:al(g,p),ll(p),I&512&&(Ms||S===null||Ld(S,S.return)),S!==null&&I&4&&BL(p,p.memoizedProps,S.memoizedProps);break;case 5:if(al(g,p),ll(p),I&512&&(Ms||S===null||Ld(S,S.return)),p.flags&32){j=p.stateNode;try{ao(j,"")}catch(on){mi(p,p.return,on)}}I&4&&p.stateNode!=null&&(j=p.memoizedProps,BL(p,j,S!==null?S.memoizedProps:j)),I&1024&&(zL=!0);break;case 6:if(al(g,p),ll(p),I&4){if(p.stateNode===null)throw Error(r(162));I=p.memoizedProps,S=p.stateNode;try{S.nodeValue=I}catch(on){mi(p,p.return,on)}}break;case 3:if(F3=null,j=Tu,Tu=O3(g.containerInfo),al(g,p),Tu=j,ll(p),I&4&&S!==null&&S.memoizedState.isDehydrated)try{Jw(g.containerInfo)}catch(on){mi(p,p.return,on)}zL&&(zL=!1,SK(p));break;case 4:I=Tu,Tu=O3(p.stateNode.containerInfo),al(g,p),ll(p),Tu=I;break;case 12:al(g,p),ll(p);break;case 31:al(g,p),ll(p),I&4&&(I=p.updateQueue,I!==null&&(p.updateQueue=null,x3(p,I)));break;case 13:al(g,p),ll(p),p.child.flags&8192&&p.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(S3=Re()),I&4&&(I=p.updateQueue,I!==null&&(p.updateQueue=null,x3(p,I)));break;case 22:j=p.memoizedState!==null;var Ke=S!==null&&S.memoizedState!==null,mt=ph,At=Ms;if(ph=mt||j,Ms=At||Ke,al(g,p),Ms=At,ph=mt,ll(p),I&8192)e:for(g=p.stateNode,g._visibility=j?g._visibility&-2:g._visibility|1,j&&(S===null||Ke||ph||Ms||G0(p)),S=null,g=p;;){if(g.tag===5||g.tag===26){if(S===null){Ke=S=g;try{if(V=Ke.stateNode,j)ge=V.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none";else{Le=Ke.stateNode;var _t=Ke.memoizedProps.style,yt=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;Le.style.display=yt==null||typeof yt=="boolean"?"":(""+yt).trim()}}catch(on){mi(Ke,Ke.return,on)}}}else if(g.tag===6){if(S===null){Ke=g;try{Ke.stateNode.nodeValue=j?"":Ke.memoizedProps}catch(on){mi(Ke,Ke.return,on)}}}else if(g.tag===18){if(S===null){Ke=g;try{var St=Ke.stateNode;j?fX(St,!0):fX(Ke.stateNode,!1)}catch(on){mi(Ke,Ke.return,on)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;S===g&&(S=null),g=g.return}S===g&&(S=null),g.sibling.return=g.return,g=g.sibling}I&4&&(I=p.updateQueue,I!==null&&(S=I.retryQueue,S!==null&&(I.retryQueue=null,x3(p,S))));break;case 19:al(g,p),ll(p),I&4&&(I=p.updateQueue,I!==null&&(p.updateQueue=null,x3(p,I)));break;case 30:break;case 21:break;default:al(g,p),ll(p)}}function ll(p){var g=p.flags;if(g&2){try{for(var S,I=p.return;I!==null;){if(pK(I)){S=I;break}I=I.return}if(S==null)throw Error(r(160));switch(S.tag){case 27:var j=S.stateNode,V=jL(p);v3(p,V,j);break;case 5:var ge=S.stateNode;S.flags&32&&(ao(ge,""),S.flags&=-33);var Le=jL(p);v3(p,Le,ge);break;case 3:case 4:var Ke=S.stateNode.containerInfo,mt=jL(p);$L(p,mt,Ke);break;default:throw Error(r(161))}}catch(At){mi(p,p.return,At)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function SK(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;SK(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),p=p.sibling}}function gh(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)yK(p,g.alternate,g),g=g.sibling}function G0(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:pm(4,g,g.return),G0(g);break;case 1:Ld(g,g.return);var S=g.stateNode;typeof S.componentWillUnmount=="function"&&fK(g,g.return,S),G0(g);break;case 27:gE(g.stateNode);case 26:case 5:Ld(g,g.return),G0(g);break;case 22:g.memoizedState===null&&G0(g);break;case 30:G0(g);break;default:G0(g)}p=p.sibling}}function yh(p,g,S){for(S=S&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var I=g.alternate,j=p,V=g,ge=V.flags;switch(V.tag){case 0:case 11:case 15:yh(j,V,S),oE(4,V);break;case 1:if(yh(j,V,S),I=V,j=I.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(mt){mi(I,I.return,mt)}if(I=V,j=I.updateQueue,j!==null){var Le=I.stateNode;try{var Ke=j.shared.hiddenCallbacks;if(Ke!==null)for(j.shared.hiddenCallbacks=null,j=0;j<Ke.length;j++)eG(Ke[j],Le)}catch(mt){mi(I,I.return,mt)}}S&&ge&64&&dK(V),aE(V,V.return);break;case 27:mK(V);case 26:case 5:yh(j,V,S),S&&I===null&&ge&4&&hK(V),aE(V,V.return);break;case 12:yh(j,V,S);break;case 31:yh(j,V,S),S&&ge&4&&vK(j,V);break;case 13:yh(j,V,S),S&&ge&4&&xK(j,V);break;case 22:V.memoizedState===null&&yh(j,V,S),aE(V,V.return);break;case 30:break;default:yh(j,V,S)}g=g.sibling}}function HL(p,g){var S=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==S&&(p!=null&&p.refCount++,S!=null&&G2(S))}function VL(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&G2(p))}function ku(p,g,S,I){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)AK(p,g,S,I),g=g.sibling}function AK(p,g,S,I){var j=g.flags;switch(g.tag){case 0:case 11:case 15:ku(p,g,S,I),j&2048&&oE(9,g);break;case 1:ku(p,g,S,I);break;case 3:ku(p,g,S,I),j&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&G2(p)));break;case 12:if(j&2048){ku(p,g,S,I),p=g.stateNode;try{var V=g.memoizedProps,ge=V.id,Le=V.onPostCommit;typeof Le=="function"&&Le(ge,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ke){mi(g,g.return,Ke)}}else ku(p,g,S,I);break;case 31:ku(p,g,S,I);break;case 13:ku(p,g,S,I);break;case 23:break;case 22:V=g.stateNode,ge=g.alternate,g.memoizedState!==null?V._visibility&2?ku(p,g,S,I):lE(p,g):V._visibility&2?ku(p,g,S,I):(V._visibility|=2,zw(p,g,S,I,(g.subtreeFlags&10256)!==0||!1)),j&2048&&HL(ge,g);break;case 24:ku(p,g,S,I),j&2048&&VL(g.alternate,g);break;default:ku(p,g,S,I)}}function zw(p,g,S,I,j){for(j=j&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var V=p,ge=g,Le=S,Ke=I,mt=ge.flags;switch(ge.tag){case 0:case 11:case 15:zw(V,ge,Le,Ke,j),oE(8,ge);break;case 23:break;case 22:var At=ge.stateNode;ge.memoizedState!==null?At._visibility&2?zw(V,ge,Le,Ke,j):lE(V,ge):(At._visibility|=2,zw(V,ge,Le,Ke,j)),j&&mt&2048&&HL(ge.alternate,ge);break;case 24:zw(V,ge,Le,Ke,j),j&&mt&2048&&VL(ge.alternate,ge);break;default:zw(V,ge,Le,Ke,j)}g=g.sibling}}function lE(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var S=p,I=g,j=I.flags;switch(I.tag){case 22:lE(S,I),j&2048&&HL(I.alternate,I);break;case 24:lE(S,I),j&2048&&VL(I.alternate,I);break;default:lE(S,I)}g=g.sibling}}var cE=8192;function Hw(p,g,S){if(p.subtreeFlags&cE)for(p=p.child;p!==null;)TK(p,g,S),p=p.sibling}function TK(p,g,S){switch(p.tag){case 26:Hw(p,g,S),p.flags&cE&&p.memoizedState!==null&&U3e(S,Tu,p.memoizedState,p.memoizedProps);break;case 5:Hw(p,g,S);break;case 3:case 4:var I=Tu;Tu=O3(p.stateNode.containerInfo),Hw(p,g,S),Tu=I;break;case 22:p.memoizedState===null&&(I=p.alternate,I!==null&&I.memoizedState!==null?(I=cE,cE=16777216,Hw(p,g,S),cE=I):Hw(p,g,S));break;default:Hw(p,g,S)}}function kK(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function uE(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var I=g[S];lo=I,_K(I,p)}kK(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)CK(p),p=p.sibling}function CK(p){switch(p.tag){case 0:case 11:case 15:uE(p),p.flags&2048&&pm(9,p,p.return);break;case 3:uE(p);break;case 12:uE(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&2&&(p.return===null||p.return.tag!==13)?(g._visibility&=-3,E3(p)):uE(p);break;default:uE(p)}}function E3(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var I=g[S];lo=I,_K(I,p)}kK(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:pm(8,g,g.return),E3(g);break;case 22:S=g.stateNode,S._visibility&2&&(S._visibility&=-3,E3(g));break;default:E3(g)}p=p.sibling}}function _K(p,g){for(;lo!==null;){var S=lo;switch(S.tag){case 0:case 11:case 15:pm(8,S,g);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var I=S.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:G2(S.memoizedState.cache)}if(I=S.child,I!==null)I.return=S,lo=I;else e:for(S=p;lo!==null;){I=lo;var j=I.sibling,V=I.return;if(bK(I),I===S){lo=null;break e}if(j!==null){j.return=V,lo=j;break e}lo=V}}}var s3e={getCacheForType:function(p){var g=Oo(Ns),S=g.data.get(p);return S===void 0&&(S=p(),g.data.set(p,S)),S},cacheSignal:function(){return Oo(Ns).controller.signal}},o3e=typeof WeakMap=="function"?WeakMap:Map,Gr=0,Ci=null,fr=null,br=0,pi=0,Wl=null,mm=!1,Vw=!1,UL=!1,bh=0,cs=0,gm=0,K0=0,WL=0,ql=0,Uw=0,dE=null,cl=null,qL=!1,S3=0,NK=0,A3=1/0,T3=null,ym=null,Ys=0,bm=null,Ww=null,wh=0,GL=0,KL=null,IK=null,fE=0,XL=null;function Gl(){return(Gr&2)!==0&&br!==0?br&-br:U.T!==null?tD():Bt()}function RK(){if(ql===0)if((br&536870912)===0||kr){var p=nt;nt<<=1,(nt&3932160)===0&&(nt=262144),ql=p}else ql=536870912;return p=Vl.current,p!==null&&(p.flags|=32),ql}function ul(p,g,S){(p===Ci&&(pi===2||pi===9)||p.cancelPendingCommit!==null)&&(qw(p,0),wm(p,br,ql,!1)),le(p,S),((Gr&2)===0||p!==Ci)&&(p===Ci&&((Gr&2)===0&&(K0|=S),cs===4&&wm(p,br,ql,!1)),Dd(p))}function MK(p,g,S){if((Gr&6)!==0)throw Error(r(327));var I=!S&&(g&127)===0&&(g&p.expiredLanes)===0||tn(p,g),j=I?c3e(p,g):ZL(p,g,!0),V=I;do{if(j===0){Vw&&!I&&wm(p,g,0,!1);break}else{if(S=p.current.alternate,V&&!a3e(S)){j=ZL(p,g,!1),V=!1;continue}if(j===2){if(V=g,p.errorRecoveryDisabledLanes&V)var ge=0;else ge=p.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){g=ge;e:{var Le=p;j=dE;var Ke=Le.current.memoizedState.isDehydrated;if(Ke&&(qw(Le,ge).flags|=256),ge=ZL(Le,ge,!1),ge!==2){if(UL&&!Ke){Le.errorRecoveryDisabledLanes|=V,K0|=V,j=4;break e}V=cl,cl=j,V!==null&&(cl===null?cl=V:cl.push.apply(cl,V))}j=ge}if(V=!1,j!==2)continue}}if(j===1){qw(p,0),wm(p,g,0,!0);break}e:{switch(I=p,V=j,V){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:wm(I,g,ql,!mm);break e;case 2:cl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(j=S3+300-Re(),10<j)){if(wm(I,g,ql,!mm),Ft(I,0,!0)!==0)break e;wh=g,I.timeoutHandle=cX(LK.bind(null,I,S,cl,T3,qL,g,ql,K0,Uw,mm,V,"Throttled",-0,0),j);break e}LK(I,S,cl,T3,qL,g,ql,K0,Uw,mm,V,null,-0,0)}}break}while(!0);Dd(p)}function LK(p,g,S,I,j,V,ge,Le,Ke,mt,At,_t,yt,St){if(p.timeoutHandle=-1,_t=g.subtreeFlags,_t&8192||(_t&16785408)===16785408){_t={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:il},TK(g,V,_t);var on=(V&62914560)===V?S3-Re():(V&4194048)===V?NK-Re():0;if(on=W3e(_t,on),on!==null){wh=V,p.cancelPendingCommit=on(zK.bind(null,p,g,V,S,I,j,ge,Le,Ke,At,_t,null,yt,St)),wm(p,V,ge,!mt);return}}zK(p,g,V,S,I,j,ge,Le,Ke)}function a3e(p){for(var g=p;;){var S=g.tag;if((S===0||S===11||S===15)&&g.flags&16384&&(S=g.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var I=0;I<S.length;I++){var j=S[I],V=j.getSnapshot;j=j.value;try{if(!zl(V(),j))return!1}catch{return!1}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function wm(p,g,S,I){g&=~WL,g&=~K0,p.suspendedLanes|=g,p.pingedLanes&=~g,I&&(p.warmLanes|=g),I=p.expirationTimes;for(var j=g;0<j;){var V=31-Ie(j),ge=1<<V;I[V]=-1,j&=~ge}S!==0&&ve(p,S,g)}function k3(){return(Gr&6)===0?(hE(0),!1):!0}function YL(){if(fr!==null){if(pi===0)var p=fr.return;else p=fr,lh=j0=null,fL(p),Pw=null,X2=0,p=fr;for(;p!==null;)uK(p.alternate,p),p=p.return;fr=null}}function qw(p,g){var S=p.timeoutHandle;S!==-1&&(p.timeoutHandle=-1,C3e(S)),S=p.cancelPendingCommit,S!==null&&(p.cancelPendingCommit=null,S()),wh=0,YL(),Ci=p,fr=S=oh(p.current,null),br=g,pi=0,Wl=null,mm=!1,Vw=tn(p,g),UL=!1,Uw=ql=WL=K0=gm=cs=0,cl=dE=null,qL=!1,(g&8)!==0&&(g|=g&32);var I=p.entangledLanes;if(I!==0)for(p=p.entanglements,I&=g;0<I;){var j=31-Ie(I),V=1<<j;g|=p[j],I&=~V}return bh=g,GC(),S}function DK(p,g){rr=null,U.H=rE,g===Ow||g===t3?(g=Yq(),pi=3):g===eL?(g=Yq(),pi=4):pi=g===_L?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Wl=g,fr===null&&(cs=1,m3(p,Cc(g,p.current)))}function OK(){var p=Vl.current;return p===null?!0:(br&4194048)===br?Rc===null:(br&62914560)===br||(br&536870912)!==0?p===Rc:!1}function PK(){var p=U.H;return U.H=rE,p===null?rE:p}function FK(){var p=U.A;return U.A=s3e,p}function C3(){cs=4,mm||(br&4194048)!==br&&Vl.current!==null||(Vw=!0),(gm&134217727)===0&&(K0&134217727)===0||Ci===null||wm(Ci,br,ql,!1)}function ZL(p,g,S){var I=Gr;Gr|=2;var j=PK(),V=FK();(Ci!==p||br!==g)&&(T3=null,qw(p,g)),g=!1;var ge=cs;e:do try{if(pi!==0&&fr!==null){var Le=fr,Ke=Wl;switch(pi){case 8:YL(),ge=6;break e;case 3:case 2:case 9:case 6:Vl.current===null&&(g=!0);var mt=pi;if(pi=0,Wl=null,Gw(p,Le,Ke,mt),S&&Vw){ge=0;break e}break;default:mt=pi,pi=0,Wl=null,Gw(p,Le,Ke,mt)}}l3e(),ge=cs;break}catch(At){DK(p,At)}while(!0);return g&&p.shellSuspendCounter++,lh=j0=null,Gr=I,U.H=j,U.A=V,fr===null&&(Ci=null,br=0,GC()),ge}function l3e(){for(;fr!==null;)BK(fr)}function c3e(p,g){var S=Gr;Gr|=2;var I=PK(),j=FK();Ci!==p||br!==g?(T3=null,A3=Re()+500,qw(p,g)):Vw=tn(p,g);e:do try{if(pi!==0&&fr!==null){g=fr;var V=Wl;t:switch(pi){case 1:pi=0,Wl=null,Gw(p,g,V,1);break;case 2:case 9:if(Kq(V)){pi=0,Wl=null,jK(g);break}g=function(){pi!==2&&pi!==9||Ci!==p||(pi=7),Dd(p)},V.then(g,g);break e;case 3:pi=7;break e;case 4:pi=5;break e;case 7:Kq(V)?(pi=0,Wl=null,jK(g)):(pi=0,Wl=null,Gw(p,g,V,7));break;case 5:var ge=null;switch(fr.tag){case 26:ge=fr.memoizedState;case 5:case 27:var Le=fr;if(ge?AX(ge):Le.stateNode.complete){pi=0,Wl=null;var Ke=Le.sibling;if(Ke!==null)fr=Ke;else{var mt=Le.return;mt!==null?(fr=mt,_3(mt)):fr=null}break t}}pi=0,Wl=null,Gw(p,g,V,5);break;case 6:pi=0,Wl=null,Gw(p,g,V,6);break;case 8:YL(),cs=6;break e;default:throw Error(r(462))}}u3e();break}catch(At){DK(p,At)}while(!0);return lh=j0=null,U.H=I,U.A=j,Gr=S,fr!==null?0:(Ci=null,br=0,GC(),cs)}function u3e(){for(;fr!==null&&!we();)BK(fr)}function BK(p){var g=lK(p.alternate,p,bh);p.memoizedProps=p.pendingProps,g===null?_3(p):fr=g}function jK(p){var g=p,S=g.alternate;switch(g.tag){case 15:case 0:g=nK(S,g,g.pendingProps,g.type,void 0,br);break;case 11:g=nK(S,g,g.pendingProps,g.type.render,g.ref,br);break;case 5:fL(g);default:uK(S,g),g=fr=Fq(g,bh),g=lK(S,g,bh)}p.memoizedProps=p.pendingProps,g===null?_3(p):fr=g}function Gw(p,g,S,I){lh=j0=null,fL(g),Pw=null,X2=0;var j=g.return;try{if(JCe(p,j,g,S,br)){cs=1,m3(p,Cc(S,p.current)),fr=null;return}}catch(V){if(j!==null)throw fr=j,V;cs=1,m3(p,Cc(S,p.current)),fr=null;return}g.flags&32768?(kr||I===1?p=!0:Vw||(br&536870912)!==0?p=!1:(mm=p=!0,(I===2||I===9||I===3||I===6)&&(I=Vl.current,I!==null&&I.tag===13&&(I.flags|=16384))),$K(g,p)):_3(g)}function _3(p){var g=p;do{if((g.flags&32768)!==0){$K(g,mm);return}p=g.return;var S=t3e(g.alternate,g,bh);if(S!==null){fr=S;return}if(g=g.sibling,g!==null){fr=g;return}fr=g=p}while(g!==null);cs===0&&(cs=5)}function $K(p,g){do{var S=n3e(p.alternate,p);if(S!==null){S.flags&=32767,fr=S;return}if(S=p.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!g&&(p=p.sibling,p!==null)){fr=p;return}fr=p=S}while(p!==null);cs=6,fr=null}function zK(p,g,S,I,j,V,ge,Le,Ke){p.cancelPendingCommit=null;do N3();while(Ys!==0);if((Gr&6)!==0)throw Error(r(327));if(g!==null){if(g===p.current)throw Error(r(177));if(V=g.lanes|g.childLanes,V|=jM,fe(p,S,V,ge,Le,Ke),p===Ci&&(fr=Ci=null,br=0),Ww=g,bm=p,wh=S,GL=V,KL=j,IK=I,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,p3e(Fe,function(){return qK(),null})):(p.callbackNode=null,p.callbackPriority=0),I=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||I){I=U.T,U.T=null,j=W.p,W.p=2,ge=Gr,Gr|=4;try{r3e(p,g,S)}finally{Gr=ge,W.p=j,U.T=I}}Ys=1,HK(),VK(),UK()}}function HK(){if(Ys===1){Ys=0;var p=bm,g=Ww,S=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||S){S=U.T,U.T=null;var I=W.p;W.p=2;var j=Gr;Gr|=4;try{EK(g,p);var V=cD,ge=_q(p.containerInfo),Le=V.focusedElem,Ke=V.selectionRange;if(ge!==Le&&Le&&Le.ownerDocument&&Cq(Le.ownerDocument.documentElement,Le)){if(Ke!==null&&DM(Le)){var mt=Ke.start,At=Ke.end;if(At===void 0&&(At=mt),"selectionStart"in Le)Le.selectionStart=mt,Le.selectionEnd=Math.min(At,Le.value.length);else{var _t=Le.ownerDocument||document,yt=_t&&_t.defaultView||window;if(yt.getSelection){var St=yt.getSelection(),on=Le.textContent.length,Mn=Math.min(Ke.start,on),wi=Ke.end===void 0?Mn:Math.min(Ke.end,on);!St.extend&&Mn>wi&&(ge=wi,wi=Mn,Mn=ge);var ot=kq(Le,Mn),Qe=kq(Le,wi);if(ot&&Qe&&(St.rangeCount!==1||St.anchorNode!==ot.node||St.anchorOffset!==ot.offset||St.focusNode!==Qe.node||St.focusOffset!==Qe.offset)){var ht=_t.createRange();ht.setStart(ot.node,ot.offset),St.removeAllRanges(),Mn>wi?(St.addRange(ht),St.extend(Qe.node,Qe.offset)):(ht.setEnd(Qe.node,Qe.offset),St.addRange(ht))}}}}for(_t=[],St=Le;St=St.parentNode;)St.nodeType===1&&_t.push({element:St,left:St.scrollLeft,top:St.scrollTop});for(typeof Le.focus=="function"&&Le.focus(),Le=0;Le<_t.length;Le++){var Tt=_t[Le];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}z3=!!lD,cD=lD=null}finally{Gr=j,W.p=I,U.T=S}}p.current=g,Ys=2}}function VK(){if(Ys===2){Ys=0;var p=bm,g=Ww,S=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||S){S=U.T,U.T=null;var I=W.p;W.p=2;var j=Gr;Gr|=4;try{yK(p,g.alternate,g)}finally{Gr=j,W.p=I,U.T=S}}Ys=3}}function UK(){if(Ys===4||Ys===3){Ys=0,Ae();var p=bm,g=Ww,S=wh,I=IK;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ys=5:(Ys=0,Ww=bm=null,WK(p,p.pendingLanes));var j=p.pendingLanes;if(j===0&&(ym=null),Lt(S),g=g.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(Ee,g,void 0,(g.current.flags&128)===128)}catch{}if(I!==null){g=U.T,j=W.p,W.p=2,U.T=null;try{for(var V=p.onRecoverableError,ge=0;ge<I.length;ge++){var Le=I[ge];V(Le.value,{componentStack:Le.stack})}}finally{U.T=g,W.p=j}}(wh&3)!==0&&N3(),Dd(p),j=p.pendingLanes,(S&261930)!==0&&(j&42)!==0?p===XL?fE++:(fE=0,XL=p):fE=0,hE(0)}}function WK(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,G2(g)))}function N3(){return HK(),VK(),UK(),qK()}function qK(){if(Ys!==5)return!1;var p=bm,g=GL;GL=0;var S=Lt(wh),I=U.T,j=W.p;try{W.p=32>S?32:S,U.T=null,S=KL,KL=null;var V=bm,ge=wh;if(Ys=0,Ww=bm=null,wh=0,(Gr&6)!==0)throw Error(r(331));var Le=Gr;if(Gr|=4,CK(V.current),AK(V,V.current,ge,S),Gr=Le,hE(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(Ee,V)}catch{}return!0}finally{W.p=j,U.T=I,WK(p,g)}}function GK(p,g,S){g=Cc(S,g),g=CL(p.stateNode,g,2),p=dm(p,g,2),p!==null&&(le(p,2),Dd(p))}function mi(p,g,S){if(p.tag===3)GK(p,p,S);else for(;g!==null;){if(g.tag===3){GK(g,p,S);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(ym===null||!ym.has(I))){p=Cc(S,p),S=KG(2),I=dm(g,S,2),I!==null&&(XG(S,I,g,p),le(I,2),Dd(I));break}}g=g.return}}function JL(p,g,S){var I=p.pingCache;if(I===null){I=p.pingCache=new o3e;var j=new Set;I.set(g,j)}else j=I.get(g),j===void 0&&(j=new Set,I.set(g,j));j.has(S)||(UL=!0,j.add(S),p=d3e.bind(null,p,g,S),g.then(p,p))}function d3e(p,g,S){var I=p.pingCache;I!==null&&I.delete(g),p.pingedLanes|=p.suspendedLanes&S,p.warmLanes&=~S,Ci===p&&(br&S)===S&&(cs===4||cs===3&&(br&62914560)===br&&300>Re()-S3?(Gr&2)===0&&qw(p,0):WL|=S,Uw===br&&(Uw=0)),Dd(p)}function KK(p,g){g===0&&(g=ri()),p=P0(p,g),p!==null&&(le(p,g),Dd(p))}function f3e(p){var g=p.memoizedState,S=0;g!==null&&(S=g.retryLane),KK(p,S)}function h3e(p,g){var S=0;switch(p.tag){case 31:case 13:var I=p.stateNode,j=p.memoizedState;j!==null&&(S=j.retryLane);break;case 19:I=p.stateNode;break;case 22:I=p.stateNode._retryCache;break;default:throw Error(r(314))}I!==null&&I.delete(g),KK(p,S)}function p3e(p,g){return ye(p,g)}var I3=null,Kw=null,QL=!1,R3=!1,eD=!1,vm=0;function Dd(p){p!==Kw&&p.next===null&&(Kw===null?I3=Kw=p:Kw=Kw.next=p),R3=!0,QL||(QL=!0,g3e())}function hE(p,g){if(!eD&&R3){eD=!0;do for(var S=!1,I=I3;I!==null;){if(p!==0){var j=I.pendingLanes;if(j===0)var V=0;else{var ge=I.suspendedLanes,Le=I.pingedLanes;V=(1<<31-Ie(42|p)+1)-1,V&=j&~(ge&~Le),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(S=!0,JK(I,V))}else V=br,V=Ft(I,I===Ci?V:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(V&3)===0||tn(I,V)||(S=!0,JK(I,V));I=I.next}while(S);eD=!1}}function m3e(){XK()}function XK(){R3=QL=!1;var p=0;vm!==0&&k3e()&&(p=vm);for(var g=Re(),S=null,I=I3;I!==null;){var j=I.next,V=YK(I,g);V===0?(I.next=null,S===null?I3=j:S.next=j,j===null&&(Kw=S)):(S=I,(p!==0||(V&3)!==0)&&(R3=!0)),I=j}Ys!==0&&Ys!==5||hE(p),vm!==0&&(vm=0)}function YK(p,g){for(var S=p.suspendedLanes,I=p.pingedLanes,j=p.expirationTimes,V=p.pendingLanes&-62914561;0<V;){var ge=31-Ie(V),Le=1<<ge,Ke=j[ge];Ke===-1?((Le&S)===0||(Le&I)!==0)&&(j[ge]=Zt(Le,g)):Ke<=g&&(p.expiredLanes|=Le),V&=~Le}if(g=Ci,S=br,S=Ft(p,p===g?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),I=p.callbackNode,S===0||p===g&&(pi===2||pi===9)||p.cancelPendingCommit!==null)return I!==null&&I!==null&&ke(I),p.callbackNode=null,p.callbackPriority=0;if((S&3)===0||tn(p,S)){if(g=S&-S,g===p.callbackPriority)return g;switch(I!==null&&ke(I),Lt(S)){case 2:case 8:S=Oe;break;case 32:S=Fe;break;case 268435456:S=he;break;default:S=Fe}return I=ZK.bind(null,p),S=ye(S,I),p.callbackPriority=g,p.callbackNode=S,g}return I!==null&&I!==null&&ke(I),p.callbackPriority=2,p.callbackNode=null,2}function ZK(p,g){if(Ys!==0&&Ys!==5)return p.callbackNode=null,p.callbackPriority=0,null;var S=p.callbackNode;if(N3()&&p.callbackNode!==S)return null;var I=br;return I=Ft(p,p===Ci?I:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),I===0?null:(MK(p,I,g),YK(p,Re()),p.callbackNode!=null&&p.callbackNode===S?ZK.bind(null,p):null)}function JK(p,g){if(N3())return null;MK(p,g,!0)}function g3e(){_3e(function(){(Gr&6)!==0?ye(Ce,m3e):XK()})}function tD(){if(vm===0){var p=Lw;p===0&&(p=We,We<<=1,(We&261888)===0&&(We=256)),vm=p}return vm}function QK(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:nh(""+p)}function eX(p,g){var S=g.ownerDocument.createElement("input");return S.name=g.name,S.value=g.value,p.id&&S.setAttribute("form",p.id),g.parentNode.insertBefore(S,g),p=new FormData(p),S.parentNode.removeChild(S),p}function y3e(p,g,S,I,j){if(g==="submit"&&S&&S.stateNode===j){var V=QK((j[et]||null).action),ge=I.submitter;ge&&(g=(g=ge[et]||null)?QK(g.formAction):ge.getAttribute("formAction"),g!==null&&(V=g,ge=null));var Le=new Cd("action","action",null,I,j);p.push({event:Le,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(vm!==0){var Ke=ge?eX(j,ge):new FormData(j);xL(S,{pending:!0,data:Ke,method:j.method,action:V},null,Ke)}}else typeof V=="function"&&(Le.preventDefault(),Ke=ge?eX(j,ge):new FormData(j),xL(S,{pending:!0,data:Ke,method:j.method,action:V},V,Ke))},currentTarget:j}]})}}for(var nD=0;nD<BM.length;nD++){var rD=BM[nD],b3e=rD.toLowerCase(),w3e=rD[0].toUpperCase()+rD.slice(1);Au(b3e,"on"+w3e)}Au(Rq,"onAnimationEnd"),Au(Mq,"onAnimationIteration"),Au(Lq,"onAnimationStart"),Au("dblclick","onDoubleClick"),Au("focusin","onFocus"),Au("focusout","onBlur"),Au(OCe,"onTransitionRun"),Au(PCe,"onTransitionStart"),Au(FCe,"onTransitionCancel"),Au(Dq,"onTransitionEnd"),gt("onMouseEnter",["mouseout","mouseover"]),gt("onMouseLeave",["mouseout","mouseover"]),gt("onPointerEnter",["pointerout","pointerover"]),gt("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v3e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pE));function tX(p,g){g=(g&4)!==0;for(var S=0;S<p.length;S++){var I=p[S],j=I.event;I=I.listeners;e:{var V=void 0;if(g)for(var ge=I.length-1;0<=ge;ge--){var Le=I[ge],Ke=Le.instance,mt=Le.currentTarget;if(Le=Le.listener,Ke!==V&&j.isPropagationStopped())break e;V=Le,j.currentTarget=mt;try{V(j)}catch(At){qC(At)}j.currentTarget=null,V=Ke}else for(ge=0;ge<I.length;ge++){if(Le=I[ge],Ke=Le.instance,mt=Le.currentTarget,Le=Le.listener,Ke!==V&&j.isPropagationStopped())break e;V=Le,j.currentTarget=mt;try{V(j)}catch(At){qC(At)}j.currentTarget=null,V=Ke}}}}function hr(p,g){var S=g[Ue];S===void 0&&(S=g[Ue]=new Set);var I=p+"__bubble";S.has(I)||(nX(g,p,2,!1),S.add(I))}function iD(p,g,S){var I=0;g&&(I|=4),nX(S,p,I,g)}var M3="_reactListening"+Math.random().toString(36).slice(2);function sD(p){if(!p[M3]){p[M3]=!0,lt.forEach(function(S){S!=="selectionchange"&&(v3e.has(S)||iD(S,!1,p),iD(S,!0,p))});var g=p.nodeType===9?p:p.ownerDocument;g===null||g[M3]||(g[M3]=!0,iD("selectionchange",!1,g))}}function nX(p,g,S,I){switch(RX(g)){case 2:var j=K3e;break;case 8:j=X3e;break;default:j=vD}S=j.bind(null,g,S,p),j=void 0,!ta||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(j=!0),I?j!==void 0?p.addEventListener(g,S,{capture:!0,passive:j}):p.addEventListener(g,S,!0):j!==void 0?p.addEventListener(g,S,{passive:j}):p.addEventListener(g,S,!1)}function oD(p,g,S,I,j){var V=I;if((g&1)===0&&(g&2)===0&&I!==null)e:for(;;){if(I===null)return;var ge=I.tag;if(ge===3||ge===4){var Le=I.stateNode.containerInfo;if(Le===j)break;if(ge===4)for(ge=I.return;ge!==null;){var Ke=ge.tag;if((Ke===3||Ke===4)&&ge.stateNode.containerInfo===j)return;ge=ge.return}for(;Le!==null;){if(ge=dn(Le),ge===null)return;if(Ke=ge.tag,Ke===5||Ke===6||Ke===26||Ke===27){I=V=ge;continue e}Le=Le.parentNode}}I=I.return}wu(function(){var mt=V,At=Ia(S),_t=[];e:{var yt=Oq.get(p);if(yt!==void 0){var St=Cd,on=p;switch(p){case"keypress":if(Ma(S)===0)break e;case"keydown":case"keyup":St=VC;break;case"focusin":on="focus",St=M0;break;case"focusout":on="blur",St=M0;break;case"beforeblur":case"afterblur":St=M0;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=j2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=DC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=ue;break;case Rq:case Mq:case Lq:St=PC;break;case Dq:St=Be;break;case"scroll":case"scrollend":St=B2;break;case"wheel":St=xt;break;case"copy":case"cut":case"paste":St=FC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=sh;break;case"toggle":case"beforetoggle":St=nr}var Mn=(g&4)!==0,wi=!Mn&&(p==="scroll"||p==="scrollend"),ot=Mn?yt!==null?yt+"Capture":null:yt;Mn=[];for(var Qe=mt,ht;Qe!==null;){var Tt=Qe;if(ht=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||ht===null||ot===null||(Tt=sl(Qe,ot),Tt!=null&&Mn.push(mE(Qe,Tt,ht))),wi)break;Qe=Qe.return}0<Mn.length&&(yt=new St(yt,on,null,S,At),_t.push({event:yt,listeners:Mn}))}}if((g&7)===0){e:{if(yt=p==="mouseover"||p==="pointerover",St=p==="mouseout"||p==="pointerout",yt&&S!==tm&&(on=S.relatedTarget||S.fromElement)&&(dn(on)||on[Ze]))break e;if((St||yt)&&(yt=At.window===At?At:(yt=At.ownerDocument)?yt.defaultView||yt.parentWindow:window,St?(on=S.relatedTarget||S.toElement,St=mt,on=on?dn(on):null,on!==null&&(wi=s(on),Mn=on.tag,on!==wi||Mn!==5&&Mn!==27&&Mn!==6)&&(on=null)):(St=null,on=mt),St!==on)){if(Mn=j2,Tt="onMouseLeave",ot="onMouseEnter",Qe="mouse",(p==="pointerout"||p==="pointerover")&&(Mn=sh,Tt="onPointerLeave",ot="onPointerEnter",Qe="pointer"),wi=St==null?yt:sn(St),ht=on==null?yt:sn(on),yt=new Mn(Tt,Qe+"leave",St,S,At),yt.target=wi,yt.relatedTarget=ht,Tt=null,dn(At)===mt&&(Mn=new Mn(ot,Qe+"enter",on,S,At),Mn.target=ht,Mn.relatedTarget=wi,Tt=Mn),wi=Tt,St&&on)t:{for(Mn=x3e,ot=St,Qe=on,ht=0,Tt=ot;Tt;Tt=Mn(Tt))ht++;Tt=0;for(var vn=Qe;vn;vn=Mn(vn))Tt++;for(;0<ht-Tt;)ot=Mn(ot),ht--;for(;0<Tt-ht;)Qe=Mn(Qe),Tt--;for(;ht--;){if(ot===Qe||Qe!==null&&ot===Qe.alternate){Mn=ot;break t}ot=Mn(ot),Qe=Mn(Qe)}Mn=null}else Mn=null;St!==null&&rX(_t,yt,St,Mn,!1),on!==null&&wi!==null&&rX(_t,wi,on,Mn,!0)}}e:{if(yt=mt?sn(mt):window,St=yt.nodeName&&yt.nodeName.toLowerCase(),St==="select"||St==="input"&&yt.type==="file")var Fr=vq;else if(bq(yt))if(xq)Fr=MCe;else{Fr=ICe;var un=NCe}else St=yt.nodeName,!St||St.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?mt&&yu(mt.elementType)&&(Fr=vq):Fr=RCe;if(Fr&&(Fr=Fr(p,mt))){wq(_t,Fr,S,At);break e}un&&un(p,yt,mt),p==="focusout"&&mt&&yt.type==="number"&&mt.memoizedProps.value!=null&&_s(yt,"number",yt.value)}switch(un=mt?sn(mt):window,p){case"focusin":(bq(un)||un.contentEditable==="true")&&(Tw=un,OM=mt,U2=null);break;case"focusout":U2=OM=Tw=null;break;case"mousedown":PM=!0;break;case"contextmenu":case"mouseup":case"dragend":PM=!1,Nq(_t,S,At);break;case"selectionchange":if(DCe)break;case"keydown":case"keyup":Nq(_t,S,At)}var ir;if(qr)e:{switch(p){case"compositionstart":var wr="onCompositionStart";break e;case"compositionend":wr="onCompositionEnd";break e;case"compositionupdate":wr="onCompositionUpdate";break e}wr=void 0}else Aw?L0(p,S)&&(wr="onCompositionEnd"):p==="keydown"&&S.keyCode===229&&(wr="onCompositionStart");wr&&(Id&&S.locale!=="ko"&&(Aw||wr!=="onCompositionStart"?wr==="onCompositionEnd"&&Aw&&(ir=kd()):(na=At,I0="value"in na?na.value:na.textContent,Aw=!0)),un=L3(mt,wr),0<un.length&&(wr=new Nd(wr,p,null,S,At),_t.push({event:wr,listeners:un}),ir?wr.data=ir:(ir=Sw(S),ir!==null&&(wr.data=ir)))),(ir=Tc?TCe(p,S):kCe(p,S))&&(wr=L3(mt,"onBeforeInput"),0<wr.length&&(un=new Nd("onBeforeInput","beforeinput",null,S,At),_t.push({event:un,listeners:wr}),un.data=ir)),y3e(_t,p,mt,S,At)}tX(_t,g)})}function mE(p,g,S){return{instance:p,listener:g,currentTarget:S}}function L3(p,g){for(var S=g+"Capture",I=[];p!==null;){var j=p,V=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||V===null||(j=sl(p,S),j!=null&&I.unshift(mE(p,j,V)),j=sl(p,g),j!=null&&I.push(mE(p,j,V))),p.tag===3)return I;p=p.return}return[]}function x3e(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function rX(p,g,S,I,j){for(var V=g._reactName,ge=[];S!==null&&S!==I;){var Le=S,Ke=Le.alternate,mt=Le.stateNode;if(Le=Le.tag,Ke!==null&&Ke===I)break;Le!==5&&Le!==26&&Le!==27||mt===null||(Ke=mt,j?(mt=sl(S,V),mt!=null&&ge.unshift(mE(S,mt,Ke))):j||(mt=sl(S,V),mt!=null&&ge.push(mE(S,mt,Ke)))),S=S.return}ge.length!==0&&p.push({event:g,listeners:ge})}var E3e=/\r\n?/g,S3e=/\u0000|\uFFFD/g;function iX(p){return(typeof p=="string"?p:""+p).replace(E3e,`
`).replace(S3e,"")}function sX(p,g){return g=iX(g),iX(p)===g}function bi(p,g,S,I,j,V){switch(S){case"children":typeof I=="string"?g==="body"||g==="textarea"&&I===""||ao(p,I):(typeof I=="number"||typeof I=="bigint")&&g!=="body"&&ao(p,""+I);break;case"className":zt(p,"class",I);break;case"tabIndex":zt(p,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(p,S,I);break;case"style":Ad(p,I,V);break;case"data":if(g!=="object"){zt(p,"data",I);break}case"src":case"href":if(I===""&&(g!=="a"||S!=="href")){p.removeAttribute(S);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){p.removeAttribute(S);break}I=nh(""+I),p.setAttribute(S,I);break;case"action":case"formAction":if(typeof I=="function"){p.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(S==="formAction"?(g!=="input"&&bi(p,g,"name",j.name,j,null),bi(p,g,"formEncType",j.formEncType,j,null),bi(p,g,"formMethod",j.formMethod,j,null),bi(p,g,"formTarget",j.formTarget,j,null)):(bi(p,g,"encType",j.encType,j,null),bi(p,g,"method",j.method,j,null),bi(p,g,"target",j.target,j,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){p.removeAttribute(S);break}I=nh(""+I),p.setAttribute(S,I);break;case"onClick":I!=null&&(p.onclick=il);break;case"onScroll":I!=null&&hr("scroll",p);break;case"onScrollEnd":I!=null&&hr("scrollend",p);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(S=I.__html,S!=null){if(j.children!=null)throw Error(r(60));p.innerHTML=S}}break;case"multiple":p.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":p.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){p.removeAttribute("xlink:href");break}S=nh(""+I),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?p.setAttribute(S,""+I):p.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?p.setAttribute(S,""):p.removeAttribute(S);break;case"capture":case"download":I===!0?p.setAttribute(S,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?p.setAttribute(S,I):p.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?p.setAttribute(S,I):p.removeAttribute(S);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?p.removeAttribute(S):p.setAttribute(S,I);break;case"popover":hr("beforetoggle",p),hr("toggle",p),zn(p,"popover",I);break;case"xlinkActuate":pn(p,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":pn(p,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":pn(p,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":pn(p,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":pn(p,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":pn(p,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":pn(p,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":pn(p,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":pn(p,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":zn(p,"is",I);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=th.get(S)||S,zn(p,S,I))}}function aD(p,g,S,I,j,V){switch(S){case"style":Ad(p,I,V);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(S=I.__html,S!=null){if(j.children!=null)throw Error(r(60));p.innerHTML=S}}break;case"children":typeof I=="string"?ao(p,I):(typeof I=="number"||typeof I=="bigint")&&ao(p,""+I);break;case"onScroll":I!=null&&hr("scroll",p);break;case"onScrollEnd":I!=null&&hr("scrollend",p);break;case"onClick":I!=null&&(p.onclick=il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(j=S.endsWith("Capture"),g=S.slice(2,j?S.length-7:void 0),V=p[et]||null,V=V!=null?V[S]:null,typeof V=="function"&&p.removeEventListener(g,V,j),typeof I=="function")){typeof V!="function"&&V!==null&&(S in p?p[S]=null:p.hasAttribute(S)&&p.removeAttribute(S)),p.addEventListener(g,I,j);break e}S in p?p[S]=I:I===!0?p.setAttribute(S,""):zn(p,S,I)}}}function Fo(p,g,S){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hr("error",p),hr("load",p);var I=!1,j=!1,V;for(V in S)if(S.hasOwnProperty(V)){var ge=S[V];if(ge!=null)switch(V){case"src":I=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:bi(p,g,V,ge,S,null)}}j&&bi(p,g,"srcSet",S.srcSet,S,null),I&&bi(p,g,"src",S.src,S,null);return;case"input":hr("invalid",p);var Le=V=ge=j=null,Ke=null,mt=null;for(I in S)if(S.hasOwnProperty(I)){var At=S[I];if(At!=null)switch(I){case"name":j=At;break;case"type":ge=At;break;case"checked":Ke=At;break;case"defaultChecked":mt=At;break;case"value":V=At;break;case"defaultValue":Le=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,g));break;default:bi(p,g,I,At,S,null)}}ii(p,V,Le,Ke,mt,ge,j,!1);return;case"select":hr("invalid",p),I=ge=V=null;for(j in S)if(S.hasOwnProperty(j)&&(Le=S[j],Le!=null))switch(j){case"value":V=Le;break;case"defaultValue":ge=Le;break;case"multiple":I=Le;default:bi(p,g,j,Le,S,null)}g=V,S=ge,p.multiple=!!I,g!=null?si(p,!!I,g,!1):S!=null&&si(p,!!I,S,!0);return;case"textarea":hr("invalid",p),V=j=I=null;for(ge in S)if(S.hasOwnProperty(ge)&&(Le=S[ge],Le!=null))switch(ge){case"value":I=Le;break;case"defaultValue":j=Le;break;case"children":V=Le;break;case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(91));break;default:bi(p,g,ge,Le,S,null)}rl(p,I,j,V);return;case"option":for(Ke in S)if(S.hasOwnProperty(Ke)&&(I=S[Ke],I!=null))switch(Ke){case"selected":p.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:bi(p,g,Ke,I,S,null)}return;case"dialog":hr("beforetoggle",p),hr("toggle",p),hr("cancel",p),hr("close",p);break;case"iframe":case"object":hr("load",p);break;case"video":case"audio":for(I=0;I<pE.length;I++)hr(pE[I],p);break;case"image":hr("error",p),hr("load",p);break;case"details":hr("toggle",p);break;case"embed":case"source":case"link":hr("error",p),hr("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in S)if(S.hasOwnProperty(mt)&&(I=S[mt],I!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:bi(p,g,mt,I,S,null)}return;default:if(yu(g)){for(At in S)S.hasOwnProperty(At)&&(I=S[At],I!==void 0&&aD(p,g,At,I,S,void 0));return}}for(Le in S)S.hasOwnProperty(Le)&&(I=S[Le],I!=null&&bi(p,g,Le,I,S,null))}function A3e(p,g,S,I){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,V=null,ge=null,Le=null,Ke=null,mt=null,At=null;for(St in S){var _t=S[St];if(S.hasOwnProperty(St)&&_t!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":Ke=_t;default:I.hasOwnProperty(St)||bi(p,g,St,null,I,_t)}}for(var yt in I){var St=I[yt];if(_t=S[yt],I.hasOwnProperty(yt)&&(St!=null||_t!=null))switch(yt){case"type":V=St;break;case"name":j=St;break;case"checked":mt=St;break;case"defaultChecked":At=St;break;case"value":ge=St;break;case"defaultValue":Le=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,g));break;default:St!==_t&&bi(p,g,yt,St,I,_t)}}ki(p,ge,Le,Ke,mt,At,V,j);return;case"select":St=ge=Le=yt=null;for(V in S)if(Ke=S[V],S.hasOwnProperty(V)&&Ke!=null)switch(V){case"value":break;case"multiple":St=Ke;default:I.hasOwnProperty(V)||bi(p,g,V,null,I,Ke)}for(j in I)if(V=I[j],Ke=S[j],I.hasOwnProperty(j)&&(V!=null||Ke!=null))switch(j){case"value":yt=V;break;case"defaultValue":Le=V;break;case"multiple":ge=V;default:V!==Ke&&bi(p,g,j,V,I,Ke)}g=Le,S=ge,I=St,yt!=null?si(p,!!S,yt,!1):!!I!=!!S&&(g!=null?si(p,!!S,g,!0):si(p,!!S,S?[]:"",!1));return;case"textarea":St=yt=null;for(Le in S)if(j=S[Le],S.hasOwnProperty(Le)&&j!=null&&!I.hasOwnProperty(Le))switch(Le){case"value":break;case"children":break;default:bi(p,g,Le,null,I,j)}for(ge in I)if(j=I[ge],V=S[ge],I.hasOwnProperty(ge)&&(j!=null||V!=null))switch(ge){case"value":yt=j;break;case"defaultValue":St=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:j!==V&&bi(p,g,ge,j,I,V)}gu(p,yt,St);return;case"option":for(var on in S)if(yt=S[on],S.hasOwnProperty(on)&&yt!=null&&!I.hasOwnProperty(on))switch(on){case"selected":p.selected=!1;break;default:bi(p,g,on,null,I,yt)}for(Ke in I)if(yt=I[Ke],St=S[Ke],I.hasOwnProperty(Ke)&&yt!==St&&(yt!=null||St!=null))switch(Ke){case"selected":p.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:bi(p,g,Ke,yt,I,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mn in S)yt=S[Mn],S.hasOwnProperty(Mn)&&yt!=null&&!I.hasOwnProperty(Mn)&&bi(p,g,Mn,null,I,yt);for(mt in I)if(yt=I[mt],St=S[mt],I.hasOwnProperty(mt)&&yt!==St&&(yt!=null||St!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,g));break;default:bi(p,g,mt,yt,I,St)}return;default:if(yu(g)){for(var wi in S)yt=S[wi],S.hasOwnProperty(wi)&&yt!==void 0&&!I.hasOwnProperty(wi)&&aD(p,g,wi,void 0,I,yt);for(At in I)yt=I[At],St=S[At],!I.hasOwnProperty(At)||yt===St||yt===void 0&&St===void 0||aD(p,g,At,yt,I,St);return}}for(var ot in S)yt=S[ot],S.hasOwnProperty(ot)&&yt!=null&&!I.hasOwnProperty(ot)&&bi(p,g,ot,null,I,yt);for(_t in I)yt=I[_t],St=S[_t],!I.hasOwnProperty(_t)||yt===St||yt==null&&St==null||bi(p,g,_t,yt,I,St)}function oX(p){switch(p){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T3e(){if(typeof performance.getEntriesByType=="function"){for(var p=0,g=0,S=performance.getEntriesByType("resource"),I=0;I<S.length;I++){var j=S[I],V=j.transferSize,ge=j.initiatorType,Le=j.duration;if(V&&Le&&oX(ge)){for(ge=0,Le=j.responseEnd,I+=1;I<S.length;I++){var Ke=S[I],mt=Ke.startTime;if(mt>Le)break;var At=Ke.transferSize,_t=Ke.initiatorType;At&&oX(_t)&&(Ke=Ke.responseEnd,ge+=At*(Ke<Le?1:(Le-mt)/(Ke-mt)))}if(--I,g+=8*(V+ge)/(j.duration/1e3),p++,10<p)break}}if(0<p)return g/p/1e6}return navigator.connection&&(p=navigator.connection.downlink,typeof p=="number")?p:5}var lD=null,cD=null;function D3(p){return p.nodeType===9?p:p.ownerDocument}function aX(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lX(p,g){if(p===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&g==="foreignObject"?0:p}function uD(p,g){return p==="textarea"||p==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var dD=null;function k3e(){var p=window.event;return p&&p.type==="popstate"?p===dD?!1:(dD=p,!0):(dD=null,!1)}var cX=typeof setTimeout=="function"?setTimeout:void 0,C3e=typeof clearTimeout=="function"?clearTimeout:void 0,uX=typeof Promise=="function"?Promise:void 0,_3e=typeof queueMicrotask=="function"?queueMicrotask:typeof uX<"u"?function(p){return uX.resolve(null).then(p).catch(N3e)}:cX;function N3e(p){setTimeout(function(){throw p})}function xm(p){return p==="head"}function dX(p,g){var S=g,I=0;do{var j=S.nextSibling;if(p.removeChild(S),j&&j.nodeType===8)if(S=j.data,S==="/$"||S==="/&"){if(I===0){p.removeChild(j),Jw(g);return}I--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")I++;else if(S==="html")gE(p.ownerDocument.documentElement);else if(S==="head"){S=p.ownerDocument.head,gE(S);for(var V=S.firstChild;V;){var ge=V.nextSibling,Le=V.nodeName;V[$t]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&V.rel.toLowerCase()==="stylesheet"||S.removeChild(V),V=ge}}else S==="body"&&gE(p.ownerDocument.body);S=j}while(S);Jw(g)}function fX(p,g){var S=p;p=0;do{var I=S.nextSibling;if(S.nodeType===1?g?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(g?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),I&&I.nodeType===8)if(S=I.data,S==="/$"){if(p===0)break;p--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||p++;S=I}while(S)}function fD(p){var g=p.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var S=g;switch(g=g.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":fD(S),Hn(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}p.removeChild(S)}}function I3e(p,g,S,I){for(;p.nodeType===1;){var j=S;if(p.nodeName.toLowerCase()!==g.toLowerCase()){if(!I&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(I){if(!p[$t])switch(g){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(V=p.getAttribute("rel"),V==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(V!==j.rel||p.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||p.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||p.getAttribute("title")!==(j.title==null?null:j.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(V=p.getAttribute("src"),(V!==(j.src==null?null:j.src)||p.getAttribute("type")!==(j.type==null?null:j.type)||p.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&V&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(g==="input"&&p.type==="hidden"){var V=j.name==null?null:""+j.name;if(j.type==="hidden"&&p.getAttribute("name")===V)return p}else return p;if(p=Mc(p.nextSibling),p===null)break}return null}function R3e(p,g,S){if(g==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!S||(p=Mc(p.nextSibling),p===null))return null;return p}function hX(p,g){for(;p.nodeType!==8;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!g||(p=Mc(p.nextSibling),p===null))return null;return p}function hD(p){return p.data==="$?"||p.data==="$~"}function pD(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState!=="loading"}function M3e(p,g){var S=p.ownerDocument;if(p.data==="$~")p._reactRetry=g;else if(p.data!=="$?"||S.readyState!=="loading")g();else{var I=function(){g(),S.removeEventListener("DOMContentLoaded",I)};S.addEventListener("DOMContentLoaded",I),p._reactRetry=I}}function Mc(p){for(;p!=null;p=p.nextSibling){var g=p.nodeType;if(g===1||g===3)break;if(g===8){if(g=p.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return p}var mD=null;function pX(p){p=p.nextSibling;for(var g=0;p;){if(p.nodeType===8){var S=p.data;if(S==="/$"||S==="/&"){if(g===0)return Mc(p.nextSibling);g--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||g++}p=p.nextSibling}return null}function mX(p){p=p.previousSibling;for(var g=0;p;){if(p.nodeType===8){var S=p.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(g===0)return p;g--}else S!=="/$"&&S!=="/&"||g++}p=p.previousSibling}return null}function gX(p,g,S){switch(g=D3(S),p){case"html":if(p=g.documentElement,!p)throw Error(r(452));return p;case"head":if(p=g.head,!p)throw Error(r(453));return p;case"body":if(p=g.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function gE(p){for(var g=p.attributes;g.length;)p.removeAttributeNode(g[0]);Hn(p)}var Lc=new Map,yX=new Set;function O3(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var vh=W.d;W.d={f:L3e,r:D3e,D:O3e,C:P3e,L:F3e,m:B3e,X:$3e,S:j3e,M:z3e};function L3e(){var p=vh.f(),g=k3();return p||g}function D3e(p){var g=bn(p);g!==null&&g.tag===5&&g.type==="form"?DG(g):vh.r(p)}var Xw=typeof document>"u"?null:document;function bX(p,g,S){var I=Xw;if(I&&typeof g=="string"&&g){var j=ur(g);j='link[rel="'+p+'"][href="'+j+'"]',typeof S=="string"&&(j+='[crossorigin="'+S+'"]'),yX.has(j)||(yX.add(j),p={rel:p,crossOrigin:S,href:g},I.querySelector(j)===null&&(g=I.createElement("link"),Fo(g,"link",p),Rn(g),I.head.appendChild(g)))}}function O3e(p){vh.D(p),bX("dns-prefetch",p,null)}function P3e(p,g){vh.C(p,g),bX("preconnect",p,g)}function F3e(p,g,S){vh.L(p,g,S);var I=Xw;if(I&&p&&g){var j='link[rel="preload"][as="'+ur(g)+'"]';g==="image"&&S&&S.imageSrcSet?(j+='[imagesrcset="'+ur(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(j+='[imagesizes="'+ur(S.imageSizes)+'"]')):j+='[href="'+ur(p)+'"]';var V=j;switch(g){case"style":V=Yw(p);break;case"script":V=Zw(p)}Lc.has(V)||(p=d({rel:"preload",href:g==="image"&&S&&S.imageSrcSet?void 0:p,as:g},S),Lc.set(V,p),I.querySelector(j)!==null||g==="style"&&I.querySelector(yE(V))||g==="script"&&I.querySelector(bE(V))||(g=I.createElement("link"),Fo(g,"link",p),Rn(g),I.head.appendChild(g)))}}function B3e(p,g){vh.m(p,g);var S=Xw;if(S&&p){var I=g&&typeof g.as=="string"?g.as:"script",j='link[rel="modulepreload"][as="'+ur(I)+'"][href="'+ur(p)+'"]',V=j;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=Zw(p)}if(!Lc.has(V)&&(p=d({rel:"modulepreload",href:p},g),Lc.set(V,p),S.querySelector(j)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(bE(V)))return}I=S.createElement("link"),Fo(I,"link",p),Rn(I),S.head.appendChild(I)}}}function j3e(p,g,S){vh.S(p,g,S);var I=Xw;if(I&&p){var j=Jn(I).hoistableStyles,V=Yw(p);g=g||"default";var ge=j.get(V);if(!ge){var Le={loading:0,preload:null};if(ge=I.querySelector(yE(V)))Le.loading=5;else{p=d({rel:"stylesheet",href:p,"data-precedence":g},S),(S=Lc.get(V))&&gD(p,S);var Ke=ge=I.createElement("link");Rn(Ke),Fo(Ke,"link",p),Ke._p=new Promise(function(mt,At){Ke.onload=mt,Ke.onerror=At}),Ke.addEventListener("load",function(){Le.loading|=1}),Ke.addEventListener("error",function(){Le.loading|=2}),Le.loading|=4,P3(ge,g,I)}ge={type:"stylesheet",instance:ge,count:1,state:Le},j.set(V,ge)}}}function $3e(p,g){vh.X(p,g);var S=Xw;if(S&&p){var I=Jn(S).hoistableScripts,j=Zw(p),V=I.get(j);V||(V=S.querySelector(bE(j)),V||(p=d({src:p,async:!0},g),(g=Lc.get(j))&&yD(p,g),V=S.createElement("script"),Rn(V),Fo(V,"link",p),S.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},I.set(j,V))}}function z3e(p,g){vh.M(p,g);var S=Xw;if(S&&p){var I=Jn(S).hoistableScripts,j=Zw(p),V=I.get(j);V||(V=S.querySelector(bE(j)),V||(p=d({src:p,async:!0,type:"module"},g),(g=Lc.get(j))&&yD(p,g),V=S.createElement("script"),Rn(V),Fo(V,"link",p),S.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},I.set(j,V))}}function wX(p,g,S,I){var j=(j=G.current)?O3(j):null;if(!j)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(g=Yw(S.href),S=Jn(j).hoistableStyles,I=S.get(g),I||(I={type:"style",instance:null,count:0,state:null},S.set(g,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){p=Yw(S.href);var V=Jn(j).hoistableStyles,ge=V.get(p);if(ge||(j=j.ownerDocument||j,ge={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(p,ge),(V=j.querySelector(yE(p)))&&!V._p&&(ge.instance=V,ge.state.loading=5),Lc.has(p)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},Lc.set(p,S),V||H3e(j,p,S,ge.state))),g&&I===null)throw Error(r(528,""));return ge}if(g&&I!==null)throw Error(r(529,""));return null;case"script":return g=S.async,S=S.src,typeof S=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Zw(S),S=Jn(j).hoistableScripts,I=S.get(g),I||(I={type:"script",instance:null,count:0,state:null},S.set(g,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function Yw(p){return'href="'+ur(p)+'"'}function yE(p){return'link[rel="stylesheet"]['+p+"]"}function vX(p){return d({},p,{"data-precedence":p.precedence,precedence:null})}function H3e(p,g,S,I){p.querySelector('link[rel="preload"][as="style"]['+g+"]")?I.loading=1:(g=p.createElement("link"),I.preload=g,g.addEventListener("load",function(){return I.loading|=1}),g.addEventListener("error",function(){return I.loading|=2}),Fo(g,"link",S),Rn(g),p.head.appendChild(g))}function Zw(p){return'[src="'+ur(p)+'"]'}function bE(p){return"script[async]"+p}function xX(p,g,S){if(g.count++,g.instance===null)switch(g.type){case"style":var I=p.querySelector('style[data-href~="'+ur(S.href)+'"]');if(I)return g.instance=I,Rn(I),I;var j=d({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return I=(p.ownerDocument||p).createElement("style"),Rn(I),Fo(I,"style",j),P3(I,S.precedence,p),g.instance=I;case"stylesheet":j=Yw(S.href);var V=p.querySelector(yE(j));if(V)return g.state.loading|=4,g.instance=V,Rn(V),V;I=vX(S),(j=Lc.get(j))&&gD(I,j),V=(p.ownerDocument||p).createElement("link"),Rn(V);var ge=V;return ge._p=new Promise(function(Le,Ke){ge.onload=Le,ge.onerror=Ke}),Fo(V,"link",I),g.state.loading|=4,P3(V,S.precedence,p),g.instance=V;case"script":return V=Zw(S.src),(j=p.querySelector(bE(V)))?(g.instance=j,Rn(j),j):(I=S,(j=Lc.get(V))&&(I=d({},S),yD(I,j)),p=p.ownerDocument||p,j=p.createElement("script"),Rn(j),Fo(j,"link",I),p.head.appendChild(j),g.instance=j);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(I=g.instance,g.state.loading|=4,P3(I,S.precedence,p));return g.instance}function P3(p,g,S){for(var I=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=I.length?I[I.length-1]:null,V=j,ge=0;ge<I.length;ge++){var Le=I[ge];if(Le.dataset.precedence===g)V=Le;else if(V!==j)break}V?V.parentNode.insertBefore(p,V.nextSibling):(g=S.nodeType===9?S.head:S,g.insertBefore(p,g.firstChild))}function gD(p,g){p.crossOrigin==null&&(p.crossOrigin=g.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=g.referrerPolicy),p.title==null&&(p.title=g.title)}function yD(p,g){p.crossOrigin==null&&(p.crossOrigin=g.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=g.referrerPolicy),p.integrity==null&&(p.integrity=g.integrity)}var F3=null;function EX(p,g,S){if(F3===null){var I=new Map,j=F3=new Map;j.set(S,I)}else j=F3,I=j.get(S),I||(I=new Map,j.set(S,I));if(I.has(p))return I;for(I.set(p,null),S=S.getElementsByTagName(p),j=0;j<S.length;j++){var V=S[j];if(!(V[$t]||V[qt]||p==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var ge=V.getAttribute(g)||"";ge=p+ge;var Le=I.get(ge);Le?Le.push(V):I.set(ge,[V])}}return I}function SX(p,g,S){p=p.ownerDocument||p,p.head.insertBefore(S,g==="title"?p.querySelector("head > title"):null)}function V3e(p,g,S){if(S===1||g.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return p=g.disabled,typeof g.precedence=="string"&&p==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function AX(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}function U3e(p,g,S,I){if(S.type==="stylesheet"&&(typeof I.media!="string"||matchMedia(I.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var j=Yw(I.href),V=g.querySelector(yE(j));if(V){g=V._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(p.count++,p=B3.bind(p),g.then(p,p)),S.state.loading|=4,S.instance=V,Rn(V);return}V=g.ownerDocument||g,I=vX(I),(j=Lc.get(j))&&gD(I,j),V=V.createElement("link"),Rn(V);var ge=V;ge._p=new Promise(function(Le,Ke){ge.onload=Le,ge.onerror=Ke}),Fo(V,"link",I),S.instance=V}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(S,g),(g=S.state.preload)&&(S.state.loading&3)===0&&(p.count++,S=B3.bind(p),g.addEventListener("load",S),g.addEventListener("error",S))}}var bD=0;function W3e(p,g){return p.stylesheets&&p.count===0&&$3(p,p.stylesheets),0<p.count||0<p.imgCount?function(S){var I=setTimeout(function(){if(p.stylesheets&&$3(p,p.stylesheets),p.unsuspend){var V=p.unsuspend;p.unsuspend=null,V()}},6e4+g);0<p.imgBytes&&bD===0&&(bD=62500*T3e());var j=setTimeout(function(){if(p.waitingForImages=!1,p.count===0&&(p.stylesheets&&$3(p,p.stylesheets),p.unsuspend)){var V=p.unsuspend;p.unsuspend=null,V()}},(p.imgBytes>bD?50:800)+g);return p.unsuspend=S,function(){p.unsuspend=null,clearTimeout(I),clearTimeout(j)}}:null}function B3(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$3(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var j3=null;function $3(p,g){p.stylesheets=null,p.unsuspend!==null&&(p.count++,j3=new Map,g.forEach(q3e,p),j3=null,B3.call(p))}function q3e(p,g){if(!(g.state.loading&4)){var S=j3.get(p);if(S)var I=S.get(null);else{S=new Map,j3.set(p,S);for(var j=p.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<j.length;V++){var ge=j[V];(ge.nodeName==="LINK"||ge.getAttribute("media")!=="not all")&&(S.set(ge.dataset.precedence,ge),I=ge)}I&&S.set(null,I)}j=g.instance,ge=j.getAttribute("data-precedence"),V=S.get(ge)||I,V===I&&S.set(null,j),S.set(ge,j),this.count++,I=B3.bind(this),j.addEventListener("load",I),j.addEventListener("error",I),V?V.parentNode.insertBefore(j,V.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(j,p.firstChild)),g.state.loading|=4}}var wE={$$typeof:A,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function G3e(p,g,S,I,j,V,ge,Le,Ke){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=I,this.onUncaughtError=j,this.onCaughtError=V,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ke,this.incompleteTransitions=new Map}function TX(p,g,S,I,j,V,ge,Le,Ke,mt,At,_t){return p=new G3e(p,g,S,ge,Ke,mt,At,_t,Le),g=1,V===!0&&(g|=24),V=Hl(3,null,null,g),p.current=V,V.stateNode=p,g=ZM(),g.refCount++,p.pooledCache=g,g.refCount++,V.memoizedState={element:I,isDehydrated:S,cache:g},tL(V),p}function kX(p){return p?(p=_w,p):_w}function CX(p,g,S,I,j,V){j=kX(j),I.context===null?I.context=j:I.pendingContext=j,I=um(g),I.payload={element:S},V=V===void 0?null:V,V!==null&&(I.callback=V),S=dm(p,I,g),S!==null&&(ul(S,p,g),Z2(S,p,g))}function _X(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var S=p.retryLane;p.retryLane=S!==0&&S<g?S:g}}function wD(p,g){_X(p,g),(p=p.alternate)&&_X(p,g)}function NX(p){if(p.tag===13||p.tag===31){var g=P0(p,67108864);g!==null&&ul(g,p,67108864),wD(p,67108864)}}function IX(p){if(p.tag===13||p.tag===31){var g=Gl();g=it(g);var S=P0(p,g);S!==null&&ul(S,p,g),wD(p,g)}}var z3=!0;function K3e(p,g,S,I){var j=U.T;U.T=null;var V=W.p;try{W.p=2,vD(p,g,S,I)}finally{W.p=V,U.T=j}}function X3e(p,g,S,I){var j=U.T;U.T=null;var V=W.p;try{W.p=8,vD(p,g,S,I)}finally{W.p=V,U.T=j}}function vD(p,g,S,I){if(z3){var j=xD(I);if(j===null)oD(p,g,I,H3,S),MX(p,I);else if(Z3e(j,p,g,S,I))I.stopPropagation();else if(MX(p,I),g&4&&-1<Y3e.indexOf(p)){for(;j!==null;){var V=bn(j);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var ge=ct(V.pendingLanes);if(ge!==0){var Le=V;for(Le.pendingLanes|=2,Le.entangledLanes|=2;ge;){var Ke=1<<31-Ie(ge);Le.entanglements[1]|=Ke,ge&=~Ke}Dd(V),(Gr&6)===0&&(A3=Re()+500,hE(0))}}break;case 31:case 13:Le=P0(V,2),Le!==null&&ul(Le,V,2),k3(),wD(V,2)}if(V=xD(I),V===null&&oD(p,g,I,H3,S),V===j)break;j=V}j!==null&&I.stopPropagation()}else oD(p,g,I,null,S)}}function xD(p){return p=Ia(p),ED(p)}var H3=null;function ED(p){if(H3=null,p=dn(p),p!==null){var g=s(p);if(g===null)p=null;else{var S=g.tag;if(S===13){if(p=o(g),p!==null)return p;p=null}else if(S===31){if(p=a(g),p!==null)return p;p=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;p=null}else g!==p&&(p=null)}}return H3=p,null}function RX(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ce:return 2;case Oe:return 8;case Fe:case $e:return 32;case he:return 268435456;default:return 32}default:return 32}}var SD=!1,Em=null,Sm=null,Am=null,vE=new Map,xE=new Map,Tm=[],Y3e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MX(p,g){switch(p){case"focusin":case"focusout":Em=null;break;case"dragenter":case"dragleave":Sm=null;break;case"mouseover":case"mouseout":Am=null;break;case"pointerover":case"pointerout":vE.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":xE.delete(g.pointerId)}}function EE(p,g,S,I,j,V){return p===null||p.nativeEvent!==V?(p={blockedOn:g,domEventName:S,eventSystemFlags:I,nativeEvent:V,targetContainers:[j]},g!==null&&(g=bn(g),g!==null&&NX(g)),p):(p.eventSystemFlags|=I,g=p.targetContainers,j!==null&&g.indexOf(j)===-1&&g.push(j),p)}function Z3e(p,g,S,I,j){switch(g){case"focusin":return Em=EE(Em,p,g,S,I,j),!0;case"dragenter":return Sm=EE(Sm,p,g,S,I,j),!0;case"mouseover":return Am=EE(Am,p,g,S,I,j),!0;case"pointerover":var V=j.pointerId;return vE.set(V,EE(vE.get(V)||null,p,g,S,I,j)),!0;case"gotpointercapture":return V=j.pointerId,xE.set(V,EE(xE.get(V)||null,p,g,S,I,j)),!0}return!1}function LX(p){var g=dn(p.target);if(g!==null){var S=s(g);if(S!==null){if(g=S.tag,g===13){if(g=o(S),g!==null){p.blockedOn=g,Wt(p.priority,function(){IX(S)});return}}else if(g===31){if(g=a(S),g!==null){p.blockedOn=g,Wt(p.priority,function(){IX(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){p.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}p.blockedOn=null}function V3(p){if(p.blockedOn!==null)return!1;for(var g=p.targetContainers;0<g.length;){var S=xD(p.nativeEvent);if(S===null){S=p.nativeEvent;var I=new S.constructor(S.type,S);tm=I,S.target.dispatchEvent(I),tm=null}else return g=bn(S),g!==null&&NX(g),p.blockedOn=S,!1;g.shift()}return!0}function DX(p,g,S){V3(p)&&S.delete(g)}function J3e(){SD=!1,Em!==null&&V3(Em)&&(Em=null),Sm!==null&&V3(Sm)&&(Sm=null),Am!==null&&V3(Am)&&(Am=null),vE.forEach(DX),xE.forEach(DX)}function U3(p,g){p.blockedOn===g&&(p.blockedOn=null,SD||(SD=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,J3e)))}var W3=null;function OX(p){W3!==p&&(W3=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){W3===p&&(W3=null);for(var g=0;g<p.length;g+=3){var S=p[g],I=p[g+1],j=p[g+2];if(typeof I!="function"){if(ED(I||S)===null)continue;break}var V=bn(S);V!==null&&(p.splice(g,3),g-=3,xL(V,{pending:!0,data:j,method:S.method,action:I},I,j))}}))}function Jw(p){function g(Ke){return U3(Ke,p)}Em!==null&&U3(Em,p),Sm!==null&&U3(Sm,p),Am!==null&&U3(Am,p),vE.forEach(g),xE.forEach(g);for(var S=0;S<Tm.length;S++){var I=Tm[S];I.blockedOn===p&&(I.blockedOn=null)}for(;0<Tm.length&&(S=Tm[0],S.blockedOn===null);)LX(S),S.blockedOn===null&&Tm.shift();if(S=(p.ownerDocument||p).$$reactFormReplay,S!=null)for(I=0;I<S.length;I+=3){var j=S[I],V=S[I+1],ge=j[et]||null;if(typeof V=="function")ge||OX(S);else if(ge){var Le=null;if(V&&V.hasAttribute("formAction")){if(j=V,ge=V[et]||null)Le=ge.formAction;else if(ED(j)!==null)continue}else Le=ge.action;typeof Le=="function"?S[I+1]=Le:(S.splice(I,3),I-=3),OX(S)}}}function PX(){function p(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(ge){return j=ge})},focusReset:"manual",scroll:"manual"})}function g(){j!==null&&(j(),j=null),I||setTimeout(S,20)}function S(){if(!I&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var I=!1,j=null;return navigation.addEventListener("navigate",p),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(S,100),function(){I=!0,navigation.removeEventListener("navigate",p),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),j!==null&&(j(),j=null)}}}function AD(p){this._internalRoot=p}q3.prototype.render=AD.prototype.render=function(p){var g=this._internalRoot;if(g===null)throw Error(r(409));var S=g.current,I=Gl();CX(S,I,p,g,null,null)},q3.prototype.unmount=AD.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var g=p.containerInfo;CX(p.current,2,null,p,null,null),k3(),g[Ze]=null}};function q3(p){this._internalRoot=p}q3.prototype.unstable_scheduleHydration=function(p){if(p){var g=Bt();p={blockedOn:null,target:p,priority:g};for(var S=0;S<Tm.length&&g!==0&&g<Tm[S].priority;S++);Tm.splice(S,0,p),S===0&&LX(p)}};var FX=e.version;if(FX!=="19.2.0")throw Error(r(527,FX,"19.2.0"));W.findDOMNode=function(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=c(g),p=p!==null?u(p):null,p=p===null?null:p.stateNode,p};var Q3e={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G3.isDisabled&&G3.supportsFiber)try{Ee=G3.inject(Q3e),Se=G3}catch{}}return AE.createRoot=function(p,g){if(!i(p))throw Error(r(299));var S=!1,I="",j=UG,V=WG,ge=qG;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&(V=g.onCaughtError),g.onRecoverableError!==void 0&&(ge=g.onRecoverableError)),g=TX(p,1,!1,null,null,S,I,null,j,V,ge,PX),p[Ze]=g.current,sD(p),new AD(g)},AE.hydrateRoot=function(p,g,S){if(!i(p))throw Error(r(299));var I=!1,j="",V=UG,ge=WG,Le=qG,Ke=null;return S!=null&&(S.unstable_strictMode===!0&&(I=!0),S.identifierPrefix!==void 0&&(j=S.identifierPrefix),S.onUncaughtError!==void 0&&(V=S.onUncaughtError),S.onCaughtError!==void 0&&(ge=S.onCaughtError),S.onRecoverableError!==void 0&&(Le=S.onRecoverableError),S.formState!==void 0&&(Ke=S.formState)),g=TX(p,1,!0,g,S??null,I,j,Ke,V,ge,Le,PX),g.context=kX(null),S=g.current,I=Gl(),I=it(I),j=um(I),j.callback=null,dm(S,j,I),S=I,g.current.lanes=S,le(g,S),Dd(g),p[Ze]=g.current,sD(p),new q3(g)},AE.version="19.2.0",AE}var KX;function d5e(){if(KX)return _D.exports;KX=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_D.exports=u5e(),_D.exports}var f5e=d5e();const h5e=Ole(f5e);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var XX="popstate";function p5e(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ew(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$P("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:NA(s))}function r(i,s){yc(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return g5e(e,n,r,t)}function rs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m5e(){return Math.random().toString(36).substring(2,10)}function YX(t,e){return{usr:t.state,key:t.key,idx:e}}function $P(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ew(e):e,state:n,key:e&&e.key||r||m5e()}}function NA({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ew(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function g5e(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let w=u(),b=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:b})}function f(w,b){a="PUSH";let E=$P(y.location,w,b);n&&n(E,w),c=u()+1;let A=YX(E,c),x=y.createHref(E);try{o.pushState(A,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(x)}s&&l&&l({action:a,location:y.location,delta:1})}function h(w,b){a="REPLACE";let E=$P(y.location,w,b);n&&n(E,w),c=u();let A=YX(E,c),x=y.createHref(E);o.replaceState(A,"",x),s&&l&&l({action:a,location:y.location,delta:0})}function m(w){return y5e(w)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(XX,d),l=w,()=>{i.removeEventListener(XX,d),l=null}},createHref(w){return e(i,w)},createURL:m,encodeLocation(w){let b=m(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:h,go(w){return o.go(w)}};return y}function y5e(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rs(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:NA(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ple(t,e,n="/"){return b5e(t,e,n,!1)}function b5e(t,e,n,r){let i=typeof e=="string"?ew(e):e,s=Ip(i.pathname||"/",n);if(s==null)return null;let o=Fle(t);w5e(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=I5e(s);a=_5e(o[l],c,r)}return a}function Fle(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;rs(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let d=vp([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(rs(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Fle(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:k5e(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of Ble(o.path))s(o,a,!0,c)}),e}function Ble(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ble(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function w5e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C5e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var v5e=/^:[\w-]+$/,x5e=3,E5e=2,S5e=1,A5e=10,T5e=-2,ZX=t=>t==="*";function k5e(t,e){let n=t.split("/"),r=n.length;return n.some(ZX)&&(r+=T5e),e&&(r+=E5e),n.filter(i=>!ZX(i)).reduce((i,s)=>i+(v5e.test(s)?x5e:s===""?S5e:A5e),r)}function C5e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _5e(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=eN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=eN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:vp([s,d.pathname]),pathnameBase:O5e(vp([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=vp([s,d.pathnameBase]))}return o}function eN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N5e(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function N5e(t,e=!1,n=!0){yc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function I5e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yc(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ip(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var R5e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M5e=t=>R5e.test(t);function L5e(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ew(t):t,s;if(n)if(M5e(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),yc(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=JX(n.substring(1),"/"):s=JX(n,e)}else s=e;return{pathname:s,search:P5e(r),hash:F5e(i)}}function JX(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function MD(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D5e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jle(t){let e=D5e(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function $le(t,e,n,r=!1){let i;typeof t=="string"?i=ew(t):(i={...t},rs(!i.pathname||!i.pathname.includes("?"),MD("?","pathname","search",i)),rs(!i.pathname||!i.pathname.includes("#"),MD("#","pathname","hash",i)),rs(!i.search||!i.search.includes("#"),MD("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=L5e(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var vp=t=>t.join("/").replace(/\/\/+/g,"/"),O5e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),P5e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F5e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function B5e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zle=["POST","PUT","PATCH","DELETE"];new Set(zle);var j5e=["GET",...zle];new Set(j5e);var a2=De.createContext(null);a2.displayName="DataRouter";var v4=De.createContext(null);v4.displayName="DataRouterState";De.createContext(!1);var Hle=De.createContext({isTransitioning:!1});Hle.displayName="ViewTransition";var $5e=De.createContext(new Map);$5e.displayName="Fetchers";var z5e=De.createContext(null);z5e.displayName="Await";var Wf=De.createContext(null);Wf.displayName="Navigation";var Ek=De.createContext(null);Ek.displayName="Location";var qf=De.createContext({outlet:null,matches:[],isDataRoute:!1});qf.displayName="Route";var k$=De.createContext(null);k$.displayName="RouteError";function H5e(t,{relative:e}={}){rs(Sk(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=De.useContext(Wf),{hash:i,pathname:s,search:o}=Ak(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:vp([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Sk(){return De.useContext(Ek)!=null}function Up(){return rs(Sk(),"useLocation() may be used only in the context of a <Router> component."),De.useContext(Ek).location}var Vle="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ule(t){De.useContext(Wf).static||De.useLayoutEffect(t)}function fu(){let{isDataRoute:t}=De.useContext(qf);return t?n_e():V5e()}function V5e(){rs(Sk(),"useNavigate() may be used only in the context of a <Router> component.");let t=De.useContext(a2),{basename:e,navigator:n}=De.useContext(Wf),{matches:r}=De.useContext(qf),{pathname:i}=Up(),s=JSON.stringify(jle(r)),o=De.useRef(!1);return Ule(()=>{o.current=!0}),De.useCallback((l,c={})=>{if(yc(o.current,Vle),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=$le(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:vp([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}De.createContext(null);function U5e(){let{matches:t}=De.useContext(qf),e=t[t.length-1];return e?e.params:{}}function Ak(t,{relative:e}={}){let{matches:n}=De.useContext(qf),{pathname:r}=Up(),i=JSON.stringify(jle(n));return De.useMemo(()=>$le(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function W5e(t,e){return Wle(t,e)}function Wle(t,e,n,r,i){var E;rs(Sk(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=De.useContext(Wf),{matches:o}=De.useContext(qf),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let A=d&&d.path||"";qle(c,!d||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let f=Up(),h;if(e){let A=typeof e=="string"?ew(e):e;rs(u==="/"||((E=A.pathname)==null?void 0:E.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${A.pathname}" was given in the \`location\` prop.`),h=A}else h=f;let m=h.pathname||"/",y=m;if(u!=="/"){let A=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=Ple(t,{pathname:y});yc(d||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),yc(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Y5e(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:vp([u,s.encodeLocation?s.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:vp([u,s.encodeLocation?s.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),o,n,r,i);return e&&b?De.createElement(Ek.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function q5e(){let t=t_e(),e=B5e(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=De.createElement(De.Fragment,null,De.createElement("p",null," Hey developer "),De.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",De.createElement("code",{style:s},"ErrorBoundary")," or"," ",De.createElement("code",{style:s},"errorElement")," prop on your route.")),De.createElement(De.Fragment,null,De.createElement("h2",null,"Unexpected Application Error!"),De.createElement("h3",{style:{fontStyle:"italic"}},e),n?De.createElement("pre",{style:i},n):null,o)}var G5e=De.createElement(q5e,null),K5e=class extends De.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?De.createElement(qf.Provider,{value:this.props.routeContext},De.createElement(k$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function X5e({routeContext:t,match:e,children:n}){let r=De.useContext(a2);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),De.createElement(qf.Provider,{value:t},n)}function Y5e(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);rs(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(u,d)=>{var f,h;r(u,{location:n.location,params:((h=(f=n.matches)==null?void 0:f[0])==null?void 0:h.params)??{},errorInfo:d})}:void 0;return s.reduceRight((u,d,f)=>{let h,m=!1,y=null,w=null;n&&(h=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||G5e,a&&(l<0&&f===0?(qle("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):l===f&&(m=!0,w=d.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,f+1)),E=()=>{let A;return h?A=y:m?A=w:d.route.Component?A=De.createElement(d.route.Component,null):d.route.element?A=d.route.element:A=u,De.createElement(X5e,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:A})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?De.createElement(K5e,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:c}):E()},null)}function C$(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z5e(t){let e=De.useContext(a2);return rs(e,C$(t)),e}function J5e(t){let e=De.useContext(v4);return rs(e,C$(t)),e}function Q5e(t){let e=De.useContext(qf);return rs(e,C$(t)),e}function _$(t){let e=Q5e(t),n=e.matches[e.matches.length-1];return rs(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function e_e(){return _$("useRouteId")}function t_e(){var r;let t=De.useContext(k$),e=J5e("useRouteError"),n=_$("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function n_e(){let{router:t}=Z5e("useNavigate"),e=_$("useNavigate"),n=De.useRef(!1);return Ule(()=>{n.current=!0}),De.useCallback(async(i,s={})=>{yc(n.current,Vle),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var QX={};function qle(t,e,n){!e&&!QX[t]&&(QX[t]=!0,yc(!1,n))}De.memo(r_e);function r_e({routes:t,future:e,state:n,unstable_onError:r}){return Wle(t,void 0,n,r,e)}function Vd(t){rs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i_e({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){rs(!Sk(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=De.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=ew(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,h=De.useMemo(()=>{let m=Ip(l,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:f},navigationType:r}},[o,l,c,u,d,f,r]);return yc(h!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:De.createElement(Wf.Provider,{value:a},De.createElement(Ek.Provider,{children:e,value:h}))}function s_e({children:t,location:e}){return W5e(zP(t),e)}function zP(t,e=[]){let n=[];return De.Children.forEach(t,(r,i)=>{if(!De.isValidElement(r))return;let s=[...e,i];if(r.type===De.Fragment){n.push.apply(n,zP(r.props.children,s));return}rs(r.type===Vd,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rs(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zP(r.props.children,s)),n.push(o)}),n}var S_="get",A_="application/x-www-form-urlencoded";function x4(t){return t!=null&&typeof t.tagName=="string"}function o_e(t){return x4(t)&&t.tagName.toLowerCase()==="button"}function a_e(t){return x4(t)&&t.tagName.toLowerCase()==="form"}function l_e(t){return x4(t)&&t.tagName.toLowerCase()==="input"}function c_e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u_e(t,e){return t.button===0&&(!e||e==="_self")&&!c_e(t)}function HP(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function d_e(t,e){let n=HP(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var K3=null;function f_e(){if(K3===null)try{new FormData(document.createElement("form"),0),K3=!1}catch{K3=!0}return K3}var h_e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function LD(t){return t!=null&&!h_e.has(t)?(yc(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${A_}"`),null):t}function p_e(t,e){let n,r,i,s,o;if(a_e(t)){let a=t.getAttribute("action");r=a?Ip(a,e):null,n=t.getAttribute("method")||S_,i=LD(t.getAttribute("enctype"))||A_,s=new FormData(t)}else if(o_e(t)||l_e(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ip(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||S_,i=LD(t.getAttribute("formenctype"))||LD(a.getAttribute("enctype"))||A_,s=new FormData(a,t),!f_e()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(x4(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=S_,r=null,i=A_,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N$(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function m_e(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ip(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function g_e(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y_e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function b_e(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await g_e(s,n);return o.links?o.links():[]}return[]}));return E_e(r.flat(1).filter(y_e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function eY(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function w_e(t,e,{includeHydrateFallback:n}={}){return v_e(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function v_e(t){return[...new Set(t)]}function x_e(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function E_e(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(x_e(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Gle(){let t=De.useContext(a2);return N$(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function S_e(){let t=De.useContext(v4);return N$(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var I$=De.createContext(void 0);I$.displayName="FrameworkContext";function Kle(){let t=De.useContext(I$);return N$(t,"You must render this element inside a <HydratedRouter> element"),t}function A_e(t,e){let n=De.useContext(I$),[r,i]=De.useState(!1),[s,o]=De.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=De.useRef(null);De.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=b=>{b.forEach(E=>{o(E.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[t]),De.useEffect(()=>{if(r){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[r]);let h=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:TE(a,h),onBlur:TE(l,m),onMouseEnter:TE(c,h),onMouseLeave:TE(u,m),onTouchStart:TE(d,h)}]:[!1,f,{}]}function TE(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function T_e({page:t,...e}){let{router:n}=Gle(),r=De.useMemo(()=>Ple(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?De.createElement(C_e,{page:t,matches:r,...e}):null}function k_e(t){let{manifest:e,routeModules:n}=Kle(),[r,i]=De.useState([]);return De.useEffect(()=>{let s=!1;return b_e(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function C_e({page:t,matches:e,...n}){let r=Up(),{manifest:i,routeModules:s}=Kle(),{basename:o}=Gle(),{loaderData:a,matches:l}=S_e(),c=De.useMemo(()=>eY(t,e,l,i,r,"data"),[t,e,l,i,r]),u=De.useMemo(()=>eY(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=De.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let m=new Set,y=!1;if(e.forEach(b=>{var A;let E=i.routes[b.route.id];!E||!E.hasLoader||(!c.some(x=>x.route.id===b.route.id)&&b.route.id in a&&((A=s[b.route.id])!=null&&A.shouldRevalidate)||E.hasClientLoader?y=!0:m.add(b.route.id))}),m.size===0)return[];let w=m_e(t,o,"data");return y&&m.size>0&&w.searchParams.set("_routes",e.filter(b=>m.has(b.route.id)).map(b=>b.route.id).join(",")),[w.pathname+w.search]},[o,a,r,i,c,e,t,s]),f=De.useMemo(()=>w_e(u,i),[u,i]),h=k_e(u);return De.createElement(De.Fragment,null,d.map(m=>De.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),f.map(m=>De.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),h.map(({key:m,link:y})=>De.createElement("link",{key:m,nonce:n.nonce,...y})))}function __e(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Xle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xle&&(window.__reactRouterVersion="7.9.6")}catch{}function N_e({basename:t,children:e,window:n}){let r=De.useRef();r.current==null&&(r.current=p5e({window:n,v5Compat:!0}));let i=r.current,[s,o]=De.useState({action:i.action,location:i.location}),a=De.useCallback(l=>{De.startTransition(()=>o(l))},[o]);return De.useLayoutEffect(()=>i.listen(a),[i,a]),De.createElement(i_e,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Yle=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zle=De.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},h){let{basename:m}=De.useContext(Wf),y=typeof c=="string"&&Yle.test(c),w,b=!1;if(typeof c=="string"&&y&&(w=c,Xle))try{let N=new URL(window.location.href),L=c.startsWith("//")?new URL(N.protocol+c):new URL(c),M=Ip(L.pathname,m);L.origin===N.origin&&M!=null?c=M+L.search+L.hash:b=!0}catch{yc(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=H5e(c,{relative:i}),[A,x,T]=A_e(r,f),R=L_e(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function k(N){e&&e(N),N.defaultPrevented||R(N)}let _=De.createElement("a",{...f,...T,href:w||E,onClick:b||s?e:k,ref:__e(h,x),target:l,"data-discover":!y&&n==="render"?"true":void 0});return A&&!y?De.createElement(De.Fragment,null,_,De.createElement(T_e,{page:E})):_});Zle.displayName="Link";var I_e=De.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let d=Ak(o,{relative:c.relative}),f=Up(),h=De.useContext(v4),{navigator:m,basename:y}=De.useContext(Wf),w=h!=null&&B_e(d)&&a===!0,b=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,E=f.pathname,A=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(E=E.toLowerCase(),A=A?A.toLowerCase():null,b=b.toLowerCase()),A&&y&&(A=Ip(A,y)||A);const x=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let T=E===b||!i&&E.startsWith(b)&&E.charAt(x)==="/",R=A!=null&&(A===b||!i&&A.startsWith(b)&&A.charAt(b.length)==="/"),k={isActive:T,isPending:R,isTransitioning:w},_=T?e:void 0,N;typeof r=="function"?N=r(k):N=[r,T?"active":null,R?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(k):s;return De.createElement(Zle,{...c,"aria-current":_,className:N,ref:u,style:L,to:o,viewTransition:a},typeof l=="function"?l(k):l)});I_e.displayName="NavLink";var R_e=De.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=S_,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},h)=>{let m=P_e(),y=F_e(a,{relative:c}),w=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&Yle.test(a),E=A=>{if(l&&l(A),A.defaultPrevented)return;A.preventDefault();let x=A.nativeEvent.submitter,T=(x==null?void 0:x.getAttribute("formmethod"))||o;m(x||A.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return De.createElement("form",{ref:h,method:w,action:y,onSubmit:r?l:E,...f,"data-discover":!b&&t==="render"?"true":void 0})});R_e.displayName="Form";function M_e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jle(t){let e=De.useContext(a2);return rs(e,M_e(t)),e}function L_e(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=fu(),l=Up(),c=Ak(t,{relative:s});return De.useCallback(u=>{if(u_e(u,e)){u.preventDefault();let d=n!==void 0?n:NA(l)===NA(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}function Qle(t){yc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=De.useRef(HP(t)),n=De.useRef(!1),r=Up(),i=De.useMemo(()=>d_e(r.search,n.current?null:e.current),[r.search]),s=fu(),o=De.useCallback((a,l)=>{const c=HP(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var D_e=0,O_e=()=>`__${String(++D_e)}__`;function P_e(){let{router:t}=Jle("useSubmit"),{basename:e}=De.useContext(Wf),n=e_e();return De.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=p_e(r,e);if(i.navigate===!1){let u=i.fetcherKey||O_e();await t.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function F_e(t,{relative:e}={}){let{basename:n}=De.useContext(Wf),r=De.useContext(qf);rs(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ak(t||".",{relative:e})},o=Up();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:vp([n,s.pathname])),NA(s)}function B_e(t,{relative:e}={}){let n=De.useContext(Hle);rs(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Jle("useViewTransitionState"),i=Ak(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ip(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ip(n.nextLocation.pathname,r)||n.nextLocation.pathname;return eN(i.pathname,o)!=null||eN(i.pathname,s)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$_e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),tY=t=>{const e=$_e(t);return e.charAt(0).toUpperCase()+e.slice(1)},ece=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),z_e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H_e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_e=De.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>De.createElement("svg",{ref:l,...H_e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ece("lucide",i),...!s&&!z_e(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>De.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(t,e)=>{const n=De.forwardRef(({className:r,...i},s)=>De.createElement(V_e,{ref:s,iconNode:e,className:ece(`lucide-${j_e(tY(t))}`,`lucide-${t}`,r),...i}));return n.displayName=tY(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],R$=rn("arrow-left",U_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],tN=rn("arrow-right",W_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_e=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],nY=rn("baby",q_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_e=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],K_e=rn("banknote",G_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],rY=rn("bell",X_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Z_e=rn("book-open",Y_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],nN=rn("briefcase",J_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_e=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],FS=rn("building-2",Q_e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Eb=rn("calendar",e6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6e=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],n6e=rn("camera",t6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6e=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],i6e=rn("chart-pie",r6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],BS=rn("check",s6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],a6e=rn("chevron-down",o6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hu=rn("chevron-right",l6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nl=rn("circle-alert",c6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sc=rn("circle-check-big",u6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fm=rn("circle-check",d6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],h6e=rn("circle-user",f6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],tce=rn("circle-x",p6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],T_=rn("clock",m6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6e=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],E4=rn("cloud-upload",g6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],iY=rn("database",y6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hc=rn("download",b6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],VP=rn("eye-off",w6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],IA=rn("eye",v6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],nce=rn("file-spreadsheet",x6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sr=rn("file-text",E6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],M$=rn("file",S6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6e=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],sY=rn("flask-conical",A6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],k6e=rn("folder-open",T6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],oY=rn("folder",C6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],N6e=rn("funnel",_6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],L$=rn("graduation-cap",I6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],DD=rn("image",R6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6e=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],L6e=rn("landmark",M6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],rce=rn("layout-grid",D6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6e=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],aY=rn("list",O6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vu=rn("loader-circle",P6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sb=rn("lock",F6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],j6e=rn("log-out",B6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ice=rn("mail",$6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],H6e=rn("map-pin",z6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],S4=rn("maximize-2",V6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Xy=rn("message-circle",U6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],RA=rn("message-square",W6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Uo=rn("pen-line",q6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],sce=rn("phone",G6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rx=rn("plus",K6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],lY=rn("refresh-ccw",X6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],oce=rn("rotate-ccw",Y6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],l2=rn("save",Z6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],ace=rn("school",J6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tw=rn("search",Q6e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ix=rn("send",eNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nNe=rn("settings",tNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rNe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hv=rn("shield-check",rNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],OD=rn("square-check-big",iNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sNe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sx=rn("square-pen",sNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oNe=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],aNe=rn("stethoscope",oNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lNe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xo=rn("trash-2",lNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cNe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uNe=rn("triangle-alert",cNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dNe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],So=rn("upload",dNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fNe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hp=rn("user",fNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vv=rn("users",hNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pNe=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],UP=rn("utensils",pNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mNe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hs=rn("x",mNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gNe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],A4=rn("zoom-in",gNe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yNe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],T4=rn("zoom-out",yNe),bNe=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:Hv,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],lce="TRC D LIU TRNG MU GIO VNG ANH",wNe="modulepreload",vNe=function(t){return"/"+t},cY={},ju=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=vNe(c),c in cY)return;cY[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":wNe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},xNe=()=>{};var uY={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cce=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ENe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cce(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ENe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new SNe;const f=s<<2|a>>4;if(r.push(f),c!==64){const h=a<<4&240|c>>2;if(r.push(h),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SNe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ANe=function(t){const e=cce(t);return uce.encodeByteArray(e,!0)},rN=function(t){return ANe(t).replace(/\./g,"")},dce=function(t){try{return uce.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kNe=()=>TNe().__FIREBASE_DEFAULTS__,CNe=()=>{if(typeof process>"u"||typeof uY>"u")return;const t=uY.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_Ne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dce(t[1]);return e&&JSON.parse(e)},k4=()=>{try{return xNe()||kNe()||CNe()||_Ne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fce=t=>{var e,n;return(n=(e=k4())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},D$=t=>{const e=fce(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hce=()=>{var t;return(t=k4())==null?void 0:t.config},pce=t=>{var e;return(e=k4())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C4(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rN(JSON.stringify(n)),rN(JSON.stringify(o)),""].join(".")}const jS={};function INe(){const t={prod:[],emulator:[]};for(const e of Object.keys(jS))jS[e]?t.emulator.push(e):t.prod.push(e);return t}function RNe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dY=!1;function _4(t,e){if(typeof window>"u"||typeof document>"u"||!Gf(window.location.host)||jS[t]===e||jS[t]||dY)return;jS[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=INe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{dY=!0,o()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=RNe(r),h=n("text"),m=document.getElementById(h)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const A=f.element;a(A),u(w,y);const x=c();l(E,b),A.append(E,m,w,x),document.body.appendChild(A)}s?(m.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MNe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ca())}function LNe(){var e;const t=(e=k4())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DNe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ONe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PNe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FNe(){const t=Ca();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BNe(){return!LNe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jNe(){try{return typeof indexedDB=="object"}catch{return!1}}function $Ne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zNe="FirebaseError";class yd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zNe,Object.setPrototypeOf(this,yd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tk.prototype.create)}}class Tk{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HNe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yd(i,a,r)}}function HNe(t,e){return t.replace(VNe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VNe=/\{\$([^}]+)}/g;function UNe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fY(s)&&fY(o)){if(!Gg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fY(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KE(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function XE(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WNe(t,e){const n=new qNe(t,e);return n.subscribe.bind(n)}class qNe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GNe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=PD),i.error===void 0&&(i.error=PD),i.complete===void 0&&(i.complete=PD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GNe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function PD(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return t&&t._delegate?t._delegate:t}class Rp{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NNe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YNe(e))try{this.getOrInitializeService({instanceIdentifier:ny})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ny){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ny){return this.instances.has(e)}getOptions(e=ny){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XNe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ny){return this.component?this.component.multipleInstances?e:ny:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XNe(t){return t===ny?void 0:t}function YNe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZNe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KNe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vr||(vr={}));const JNe={debug:vr.DEBUG,verbose:vr.VERBOSE,info:vr.INFO,warn:vr.WARN,error:vr.ERROR,silent:vr.SILENT},QNe=vr.INFO,eIe={[vr.DEBUG]:"log",[vr.VERBOSE]:"log",[vr.INFO]:"info",[vr.WARN]:"warn",[vr.ERROR]:"error"},tIe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eIe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O${constructor(e){this.name=e,this._logLevel=QNe,this._logHandler=tIe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JNe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vr.DEBUG,...e),this._logHandler(this,vr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vr.VERBOSE,...e),this._logHandler(this,vr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vr.INFO,...e),this._logHandler(this,vr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vr.WARN,...e),this._logHandler(this,vr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vr.ERROR,...e),this._logHandler(this,vr.ERROR,...e)}}const nIe=(t,e)=>e.some(n=>t instanceof n);let hY,pY;function rIe(){return hY||(hY=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iIe(){return pY||(pY=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gce=new WeakMap,WP=new WeakMap,yce=new WeakMap,FD=new WeakMap,P$=new WeakMap;function sIe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Lg(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gce.set(n,t)}).catch(()=>{}),P$.set(e,t),e}function oIe(t){if(WP.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});WP.set(t,e)}let qP={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return WP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yce.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aIe(t){qP=t(qP)}function lIe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(BD(this),e,...n);return yce.set(r,e.sort?e.sort():[e]),Lg(r)}:iIe().includes(t)?function(...e){return t.apply(BD(this),e),Lg(gce.get(this))}:function(...e){return Lg(t.apply(BD(this),e))}}function cIe(t){return typeof t=="function"?lIe(t):(t instanceof IDBTransaction&&oIe(t),nIe(t,rIe())?new Proxy(t,qP):t)}function Lg(t){if(t instanceof IDBRequest)return sIe(t);if(FD.has(t))return FD.get(t);const e=cIe(t);return e!==t&&(FD.set(t,e),P$.set(e,t)),e}const BD=t=>P$.get(t);function uIe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Lg(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Lg(o.result),l.oldVersion,l.newVersion,Lg(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dIe=["get","getKey","getAll","getAllKeys","count"],fIe=["put","add","delete","clear"],jD=new Map;function mY(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jD.get(e))return jD.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fIe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dIe.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return jD.set(e,s),s}aIe(t=>({...t,get:(e,n,r)=>mY(e,n)||t.get(e,n,r),has:(e,n)=>!!mY(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hIe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pIe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pIe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const GP="@firebase/app",gY="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new O$("@firebase/app"),mIe="@firebase/app-compat",gIe="@firebase/analytics-compat",yIe="@firebase/analytics",bIe="@firebase/app-check-compat",wIe="@firebase/app-check",vIe="@firebase/auth",xIe="@firebase/auth-compat",EIe="@firebase/database",SIe="@firebase/data-connect",AIe="@firebase/database-compat",TIe="@firebase/functions",kIe="@firebase/functions-compat",CIe="@firebase/installations",_Ie="@firebase/installations-compat",NIe="@firebase/messaging",IIe="@firebase/messaging-compat",RIe="@firebase/performance",MIe="@firebase/performance-compat",LIe="@firebase/remote-config",DIe="@firebase/remote-config-compat",OIe="@firebase/storage",PIe="@firebase/storage-compat",FIe="@firebase/firestore",BIe="@firebase/ai",jIe="@firebase/firestore-compat",$Ie="firebase",zIe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="[DEFAULT]",HIe={[GP]:"fire-core",[mIe]:"fire-core-compat",[yIe]:"fire-analytics",[gIe]:"fire-analytics-compat",[wIe]:"fire-app-check",[bIe]:"fire-app-check-compat",[vIe]:"fire-auth",[xIe]:"fire-auth-compat",[EIe]:"fire-rtdb",[SIe]:"fire-data-connect",[AIe]:"fire-rtdb-compat",[TIe]:"fire-fn",[kIe]:"fire-fn-compat",[CIe]:"fire-iid",[_Ie]:"fire-iid-compat",[NIe]:"fire-fcm",[IIe]:"fire-fcm-compat",[RIe]:"fire-perf",[MIe]:"fire-perf-compat",[LIe]:"fire-rc",[DIe]:"fire-rc-compat",[OIe]:"fire-gcs",[PIe]:"fire-gcs-compat",[FIe]:"fire-fst",[jIe]:"fire-fst-compat",[BIe]:"fire-vertex","fire-js":"fire-js",[$Ie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Map,XP=new Map,YP=new Map;function yY(t,e){try{t.container.addComponent(e)}catch(n){Mp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kg(t){const e=t.name;if(YP.has(e))return Mp.debug(`There were multiple attempts to register component ${e}.`),!1;YP.set(e,t);for(const n of ox.values())yY(n,t);for(const n of XP.values())yY(n,t);return!0}function Ck(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kl(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VIe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dg=new Tk("app","Firebase",VIe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UIe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=zIe;function F$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:KP,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Dg.create("bad-app-name",{appName:String(i)});if(n||(n=hce()),!n)throw Dg.create("no-options");const s=ox.get(i);if(s){if(Gg(n,s.options)&&Gg(r,s.config))return s;throw Dg.create("duplicate-app",{appName:i})}const o=new ZNe(i);for(const l of YP.values())o.addComponent(l);const a=new UIe(n,r,o);return ox.set(i,a),a}function N4(t=KP){const e=ox.get(t);if(!e&&t===KP&&hce())return F$();if(!e)throw Dg.create("no-app",{appName:t});return e}async function WIe(t){let e=!1;const n=t.name;ox.has(n)?(e=!0,ox.delete(n)):XP.has(n)&&t.decRefCount()<=0&&(XP.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Jc(t,e,n){let r=HIe[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mp.warn(o.join(" "));return}Kg(new Rp(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qIe="firebase-heartbeat-database",GIe=1,MA="firebase-heartbeat-store";let $D=null;function bce(){return $D||($D=uIe(qIe,GIe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(MA)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dg.create("idb-open",{originalErrorMessage:t.message})})),$D}async function KIe(t){try{const n=(await bce()).transaction(MA),r=await n.objectStore(MA).get(wce(t));return await n.done,r}catch(e){if(e instanceof yd)Mp.warn(e.message);else{const n=Dg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mp.warn(n.message)}}}async function bY(t,e){try{const r=(await bce()).transaction(MA,"readwrite");await r.objectStore(MA).put(e,wce(t)),await r.done}catch(n){if(n instanceof yd)Mp.warn(n.message);else{const r=Dg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mp.warn(r.message)}}}function wce(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XIe=1024,YIe=30;class ZIe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QIe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wY();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>YIe){const o=e4e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mp.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wY(),{heartbeatsToSend:r,unsentEntries:i}=JIe(this._heartbeatsCache.heartbeats),s=rN(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mp.warn(n),""}}}function wY(){return new Date().toISOString().substring(0,10)}function JIe(t,e=XIe){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vY(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vY(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QIe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jNe()?$Ne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KIe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bY(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bY(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vY(t){return rN(JSON.stringify({version:2,heartbeats:t})).length}function e4e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4e(t){Kg(new Rp("platform-logger",e=>new hIe(e),"PRIVATE")),Kg(new Rp("heartbeat",e=>new ZIe(e),"PRIVATE")),Jc(GP,gY,t),Jc(GP,gY,"esm2020"),Jc("fire-js","")}t4e("");var n4e="firebase",r4e="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jc(n4e,r4e,"app");var xY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Og,vce;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,_){function N(){}N.prototype=_.prototype,k.F=_.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(L,M,C){for(var D=Array(arguments.length-2),O=2;O<arguments.length;O++)D[O-2]=arguments[O];return _.prototype[M].apply(L,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,_,N){N||(N=0);const L=Array(16);if(typeof _=="string")for(var M=0;M<16;++M)L[M]=_.charCodeAt(N++)|_.charCodeAt(N++)<<8|_.charCodeAt(N++)<<16|_.charCodeAt(N++)<<24;else for(M=0;M<16;++M)L[M]=_[N++]|_[N++]<<8|_[N++]<<16|_[N++]<<24;_=k.g[0],N=k.g[1],M=k.g[2];let C=k.g[3],D;D=_+(C^N&(M^C))+L[0]+3614090360&4294967295,_=N+(D<<7&4294967295|D>>>25),D=C+(M^_&(N^M))+L[1]+3905402710&4294967295,C=_+(D<<12&4294967295|D>>>20),D=M+(N^C&(_^N))+L[2]+606105819&4294967295,M=C+(D<<17&4294967295|D>>>15),D=N+(_^M&(C^_))+L[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=_+(C^N&(M^C))+L[4]+4118548399&4294967295,_=N+(D<<7&4294967295|D>>>25),D=C+(M^_&(N^M))+L[5]+1200080426&4294967295,C=_+(D<<12&4294967295|D>>>20),D=M+(N^C&(_^N))+L[6]+2821735955&4294967295,M=C+(D<<17&4294967295|D>>>15),D=N+(_^M&(C^_))+L[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=_+(C^N&(M^C))+L[8]+1770035416&4294967295,_=N+(D<<7&4294967295|D>>>25),D=C+(M^_&(N^M))+L[9]+2336552879&4294967295,C=_+(D<<12&4294967295|D>>>20),D=M+(N^C&(_^N))+L[10]+4294925233&4294967295,M=C+(D<<17&4294967295|D>>>15),D=N+(_^M&(C^_))+L[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=_+(C^N&(M^C))+L[12]+1804603682&4294967295,_=N+(D<<7&4294967295|D>>>25),D=C+(M^_&(N^M))+L[13]+4254626195&4294967295,C=_+(D<<12&4294967295|D>>>20),D=M+(N^C&(_^N))+L[14]+2792965006&4294967295,M=C+(D<<17&4294967295|D>>>15),D=N+(_^M&(C^_))+L[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=_+(M^C&(N^M))+L[1]+4129170786&4294967295,_=N+(D<<5&4294967295|D>>>27),D=C+(N^M&(_^N))+L[6]+3225465664&4294967295,C=_+(D<<9&4294967295|D>>>23),D=M+(_^N&(C^_))+L[11]+643717713&4294967295,M=C+(D<<14&4294967295|D>>>18),D=N+(C^_&(M^C))+L[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=_+(M^C&(N^M))+L[5]+3593408605&4294967295,_=N+(D<<5&4294967295|D>>>27),D=C+(N^M&(_^N))+L[10]+38016083&4294967295,C=_+(D<<9&4294967295|D>>>23),D=M+(_^N&(C^_))+L[15]+3634488961&4294967295,M=C+(D<<14&4294967295|D>>>18),D=N+(C^_&(M^C))+L[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=_+(M^C&(N^M))+L[9]+568446438&4294967295,_=N+(D<<5&4294967295|D>>>27),D=C+(N^M&(_^N))+L[14]+3275163606&4294967295,C=_+(D<<9&4294967295|D>>>23),D=M+(_^N&(C^_))+L[3]+4107603335&4294967295,M=C+(D<<14&4294967295|D>>>18),D=N+(C^_&(M^C))+L[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=_+(M^C&(N^M))+L[13]+2850285829&4294967295,_=N+(D<<5&4294967295|D>>>27),D=C+(N^M&(_^N))+L[2]+4243563512&4294967295,C=_+(D<<9&4294967295|D>>>23),D=M+(_^N&(C^_))+L[7]+1735328473&4294967295,M=C+(D<<14&4294967295|D>>>18),D=N+(C^_&(M^C))+L[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=_+(N^M^C)+L[5]+4294588738&4294967295,_=N+(D<<4&4294967295|D>>>28),D=C+(_^N^M)+L[8]+2272392833&4294967295,C=_+(D<<11&4294967295|D>>>21),D=M+(C^_^N)+L[11]+1839030562&4294967295,M=C+(D<<16&4294967295|D>>>16),D=N+(M^C^_)+L[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=_+(N^M^C)+L[1]+2763975236&4294967295,_=N+(D<<4&4294967295|D>>>28),D=C+(_^N^M)+L[4]+1272893353&4294967295,C=_+(D<<11&4294967295|D>>>21),D=M+(C^_^N)+L[7]+4139469664&4294967295,M=C+(D<<16&4294967295|D>>>16),D=N+(M^C^_)+L[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=_+(N^M^C)+L[13]+681279174&4294967295,_=N+(D<<4&4294967295|D>>>28),D=C+(_^N^M)+L[0]+3936430074&4294967295,C=_+(D<<11&4294967295|D>>>21),D=M+(C^_^N)+L[3]+3572445317&4294967295,M=C+(D<<16&4294967295|D>>>16),D=N+(M^C^_)+L[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=_+(N^M^C)+L[9]+3654602809&4294967295,_=N+(D<<4&4294967295|D>>>28),D=C+(_^N^M)+L[12]+3873151461&4294967295,C=_+(D<<11&4294967295|D>>>21),D=M+(C^_^N)+L[15]+530742520&4294967295,M=C+(D<<16&4294967295|D>>>16),D=N+(M^C^_)+L[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=_+(M^(N|~C))+L[0]+4096336452&4294967295,_=N+(D<<6&4294967295|D>>>26),D=C+(N^(_|~M))+L[7]+1126891415&4294967295,C=_+(D<<10&4294967295|D>>>22),D=M+(_^(C|~N))+L[14]+2878612391&4294967295,M=C+(D<<15&4294967295|D>>>17),D=N+(C^(M|~_))+L[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=_+(M^(N|~C))+L[12]+1700485571&4294967295,_=N+(D<<6&4294967295|D>>>26),D=C+(N^(_|~M))+L[3]+2399980690&4294967295,C=_+(D<<10&4294967295|D>>>22),D=M+(_^(C|~N))+L[10]+4293915773&4294967295,M=C+(D<<15&4294967295|D>>>17),D=N+(C^(M|~_))+L[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=_+(M^(N|~C))+L[8]+1873313359&4294967295,_=N+(D<<6&4294967295|D>>>26),D=C+(N^(_|~M))+L[15]+4264355552&4294967295,C=_+(D<<10&4294967295|D>>>22),D=M+(_^(C|~N))+L[6]+2734768916&4294967295,M=C+(D<<15&4294967295|D>>>17),D=N+(C^(M|~_))+L[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=_+(M^(N|~C))+L[4]+4149444226&4294967295,_=N+(D<<6&4294967295|D>>>26),D=C+(N^(_|~M))+L[11]+3174756917&4294967295,C=_+(D<<10&4294967295|D>>>22),D=M+(_^(C|~N))+L[2]+718787259&4294967295,M=C+(D<<15&4294967295|D>>>17),D=N+(C^(M|~_))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+_&4294967295,k.g[1]=k.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+C&4294967295}r.prototype.v=function(k,_){_===void 0&&(_=k.length);const N=_-this.blockSize,L=this.C;let M=this.h,C=0;for(;C<_;){if(M==0)for(;C<=N;)i(this,k,C),C+=this.blockSize;if(typeof k=="string"){for(;C<_;)if(L[M++]=k.charCodeAt(C++),M==this.blockSize){i(this,L),M=0;break}}else for(;C<_;)if(L[M++]=k[C++],M==this.blockSize){i(this,L),M=0;break}}this.h=M,this.o+=_},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var _=1;_<k.length-8;++_)k[_]=0;_=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=_&255,_/=256;for(this.v(k),k=Array(16),_=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)k[_++]=this.g[N]>>>L&255;return k};function s(k,_){var N=a;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=_(k)}function o(k,_){this.h=_;const N=[];let L=!0;for(let M=k.length-1;M>=0;M--){const C=k[M]|0;L&&C==_||(N[M]=C,L=!1)}this.g=N}var a={};function l(k){return-128<=k&&k<128?s(k,function(_){return new o([_|0],_<0?-1:0)}):new o([k|0],k<0?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return d;if(k<0)return w(c(-k));const _=[];let N=1;for(let L=0;k>=N;L++)_[L]=k/N|0,N*=4294967296;return new o(_,0)}function u(k,_){if(k.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(k.charAt(0)=="-")return w(u(k.substring(1),_));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=c(Math.pow(_,8));let L=d;for(let C=0;C<k.length;C+=8){var M=Math.min(8,k.length-C);const D=parseInt(k.substring(C,C+M),_);M<8?(M=c(Math.pow(_,M)),L=L.j(M).add(c(D))):(L=L.j(N),L=L.add(c(D)))}return L}var d=l(0),f=l(1),h=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();let k=0,_=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);k+=(L>=0?L:4294967296+L)*_,_*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(m(this))return"0";if(y(this))return"-"+w(this).toString(k);const _=c(Math.pow(k,6));var N=this;let L="";for(;;){const M=x(N,_).g;N=b(N,M.j(_));let C=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=M,m(N))return C+L;for(;C.length<6;)C="0"+C;L=C+L}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function m(k){if(k.h!=0)return!1;for(let _=0;_<k.g.length;_++)if(k.g[_]!=0)return!1;return!0}function y(k){return k.h==-1}t.l=function(k){return k=b(this,k),y(k)?-1:m(k)?0:1};function w(k){const _=k.g.length,N=[];for(let L=0;L<_;L++)N[L]=~k.g[L];return new o(N,~k.h).add(f)}t.abs=function(){return y(this)?w(this):this},t.add=function(k){const _=Math.max(this.g.length,k.g.length),N=[];let L=0;for(let M=0;M<=_;M++){let C=L+(this.i(M)&65535)+(k.i(M)&65535),D=(C>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);L=D>>>16,C&=65535,D&=65535,N[M]=D<<16|C}return new o(N,N[N.length-1]&-2147483648?-1:0)};function b(k,_){return k.add(w(_))}t.j=function(k){if(m(this)||m(k))return d;if(y(this))return y(k)?w(this).j(w(k)):w(w(this).j(k));if(y(k))return w(this.j(w(k)));if(this.l(h)<0&&k.l(h)<0)return c(this.m()*k.m());const _=this.g.length+k.g.length,N=[];for(var L=0;L<2*_;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let M=0;M<k.g.length;M++){const C=this.i(L)>>>16,D=this.i(L)&65535,O=k.i(M)>>>16,$=k.i(M)&65535;N[2*L+2*M]+=D*$,E(N,2*L+2*M),N[2*L+2*M+1]+=C*$,E(N,2*L+2*M+1),N[2*L+2*M+1]+=D*O,E(N,2*L+2*M+1),N[2*L+2*M+2]+=C*O,E(N,2*L+2*M+2)}for(k=0;k<_;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=_;k<2*_;k++)N[k]=0;return new o(N,0)};function E(k,_){for(;(k[_]&65535)!=k[_];)k[_+1]+=k[_]>>>16,k[_]&=65535,_++}function A(k,_){this.g=k,this.h=_}function x(k,_){if(m(_))throw Error("division by zero");if(m(k))return new A(d,d);if(y(k))return _=x(w(k),_),new A(w(_.g),w(_.h));if(y(_))return _=x(k,w(_)),new A(w(_.g),_.h);if(k.g.length>30){if(y(k)||y(_))throw Error("slowDivide_ only works with positive integers.");for(var N=f,L=_;L.l(k)<=0;)N=T(N),L=T(L);var M=R(N,1),C=R(L,1);for(L=R(L,2),N=R(N,2);!m(L);){var D=C.add(L);D.l(k)<=0&&(M=M.add(N),C=D),L=R(L,1),N=R(N,1)}return _=b(k,M.j(_)),new A(M,_)}for(M=d;k.l(_)>=0;){for(N=Math.max(1,Math.floor(k.m()/_.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),C=c(N),D=C.j(_);y(D)||D.l(k)>0;)N-=L,C=c(N),D=C.j(_);m(C)&&(C=f),M=M.add(C),k=b(k,D)}return new A(M,k)}t.B=function(k){return x(this,k).h},t.and=function(k){const _=Math.max(this.g.length,k.g.length),N=[];for(let L=0;L<_;L++)N[L]=this.i(L)&k.i(L);return new o(N,this.h&k.h)},t.or=function(k){const _=Math.max(this.g.length,k.g.length),N=[];for(let L=0;L<_;L++)N[L]=this.i(L)|k.i(L);return new o(N,this.h|k.h)},t.xor=function(k){const _=Math.max(this.g.length,k.g.length),N=[];for(let L=0;L<_;L++)N[L]=this.i(L)^k.i(L);return new o(N,this.h^k.h)};function T(k){const _=k.g.length+1,N=[];for(let L=0;L<_;L++)N[L]=k.i(L)<<1|k.i(L-1)>>>31;return new o(N,k.h)}function R(k,_){const N=_>>5;_%=32;const L=k.g.length-N,M=[];for(let C=0;C<L;C++)M[C]=_>0?k.i(C+N)>>>_|k.i(C+N+1)<<32-_:k.i(C+N);return new o(M,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,vce=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Og=o}).apply(typeof xY<"u"?xY:typeof self<"u"?self:typeof window<"u"?window:{});var X3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xce,YE,Ece,k_,ZP,Sce,Ace,Tce;(function(){var t,e=Object.defineProperty;function n(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof X3=="object"&&X3];for(var ue=0;ue<P.length;++ue){var xe=P[ue];if(xe&&xe.Math==Math)return xe}throw Error("Cannot find global object")}var r=n(this);function i(P,ue){if(ue)e:{var xe=r;P=P.split(".");for(var Be=0;Be<P.length-1;Be++){var dt=P[Be];if(!(dt in xe))break e;xe=xe[dt]}P=P[P.length-1],Be=xe[P],ue=ue(Be),ue!=Be&&ue!=null&&e(xe,P,{configurable:!0,writable:!0,value:ue})}}i("Symbol.dispose",function(P){return P||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(P){return P||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(P){return P||function(ue){var xe=[],Be;for(Be in ue)Object.prototype.hasOwnProperty.call(ue,Be)&&xe.push([Be,ue[Be]]);return xe}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(P){var ue=typeof P;return ue=="object"&&P!=null||ue=="function"}function l(P,ue,xe){return P.call.apply(P.bind,arguments)}function c(P,ue,xe){return c=l,c.apply(null,arguments)}function u(P,ue){var xe=Array.prototype.slice.call(arguments,1);return function(){var Be=xe.slice();return Be.push.apply(Be,arguments),P.apply(this,Be)}}function d(P,ue){function xe(){}xe.prototype=ue.prototype,P.Z=ue.prototype,P.prototype=new xe,P.prototype.constructor=P,P.Ob=function(Be,dt,xt){for(var Ht=Array(arguments.length-2),nr=2;nr<arguments.length;nr++)Ht[nr-2]=arguments[nr];return ue.prototype[dt].apply(Be,Ht)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?P=>P&&AsyncContext.Snapshot.wrap(P):P=>P;function h(P){const ue=P.length;if(ue>0){const xe=Array(ue);for(let Be=0;Be<ue;Be++)xe[Be]=P[Be];return xe}return[]}function m(P,ue){for(let Be=1;Be<arguments.length;Be++){const dt=arguments[Be];var xe=typeof dt;if(xe=xe!="object"?xe:dt?Array.isArray(dt)?"array":xe:"null",xe=="array"||xe=="object"&&typeof dt.length=="number"){xe=P.length||0;const xt=dt.length||0;P.length=xe+xt;for(let Ht=0;Ht<xt;Ht++)P[xe+Ht]=dt[Ht]}else P.push(dt)}}class y{constructor(ue,xe){this.i=ue,this.j=xe,this.h=0,this.g=null}get(){let ue;return this.h>0?(this.h--,ue=this.g,this.g=ue.next,ue.next=null):ue=this.i(),ue}}function w(P){o.setTimeout(()=>{throw P},0)}function b(){var P=k;let ue=null;return P.g&&(ue=P.g,P.g=P.g.next,P.g||(P.h=null),ue.next=null),ue}class E{constructor(){this.h=this.g=null}add(ue,xe){const Be=A.get();Be.set(ue,xe),this.h?this.h.next=Be:this.g=Be,this.h=Be}}var A=new y(()=>new x,P=>P.reset());class x{constructor(){this.next=this.g=this.h=null}set(ue,xe){this.h=ue,this.g=xe,this.next=null}reset(){this.next=this.g=this.h=null}}let T,R=!1,k=new E,_=()=>{const P=Promise.resolve(void 0);T=()=>{P.then(N)}};function N(){for(var P;P=b();){try{P.h.call(P.g)}catch(xe){w(xe)}var ue=A;ue.j(P),ue.h<100&&(ue.h++,P.next=ue.g,ue.g=P)}R=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(P,ue){this.type=P,this.g=this.target=ue,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var P=!1,ue=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const xe=()=>{};o.addEventListener("test",xe,ue),o.removeEventListener("test",xe,ue)}catch{}return P})();function D(P){return/^[\s\xa0]*$/.test(P)}function O(P,ue){M.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P&&this.init(P,ue)}d(O,M),O.prototype.init=function(P,ue){const xe=this.type=P.type,Be=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;this.target=P.target||P.srcElement,this.g=ue,ue=P.relatedTarget,ue||(xe=="mouseover"?ue=P.fromElement:xe=="mouseout"&&(ue=P.toElement)),this.relatedTarget=ue,Be?(this.clientX=Be.clientX!==void 0?Be.clientX:Be.pageX,this.clientY=Be.clientY!==void 0?Be.clientY:Be.pageY,this.screenX=Be.screenX||0,this.screenY=Be.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=P.pointerType,this.state=P.state,this.i=P,P.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),U=0;function W(P,ue,xe,Be,dt){this.listener=P,this.proxy=null,this.src=ue,this.type=xe,this.capture=!!Be,this.ha=dt,this.key=++U,this.da=this.fa=!1}function ce(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function se(P,ue,xe){for(const Be in P)ue.call(xe,P[Be],Be,P)}function Q(P,ue){for(const xe in P)ue.call(void 0,P[xe],xe,P)}function J(P){const ue={};for(const xe in P)ue[xe]=P[xe];return ue}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(P,ue){let xe,Be;for(let dt=1;dt<arguments.length;dt++){Be=arguments[dt];for(xe in Be)P[xe]=Be[xe];for(let xt=0;xt<K.length;xt++)xe=K[xt],Object.prototype.hasOwnProperty.call(Be,xe)&&(P[xe]=Be[xe])}}function X(P){this.src=P,this.g={},this.h=0}X.prototype.add=function(P,ue,xe,Be,dt){const xt=P.toString();P=this.g[xt],P||(P=this.g[xt]=[],this.h++);const Ht=G(P,ue,Be,dt);return Ht>-1?(ue=P[Ht],xe||(ue.fa=!1)):(ue=new W(ue,this.src,xt,!!Be,dt),ue.fa=xe,P.push(ue)),ue};function me(P,ue){const xe=ue.type;if(xe in P.g){var Be=P.g[xe],dt=Array.prototype.indexOf.call(Be,ue,void 0),xt;(xt=dt>=0)&&Array.prototype.splice.call(Be,dt,1),xt&&(ce(ue),P.g[xe].length==0&&(delete P.g[xe],P.h--))}}function G(P,ue,xe,Be){for(let dt=0;dt<P.length;++dt){const xt=P[dt];if(!xt.da&&xt.listener==ue&&xt.capture==!!xe&&xt.ha==Be)return dt}return-1}var B="closure_lm_"+(Math.random()*1e6|0),z={};function de(P,ue,xe,Be,dt){if(Array.isArray(ue)){for(let xt=0;xt<ue.length;xt++)de(P,ue[xt],xe,Be,dt);return null}return xe=oe(xe),P&&P[$]?P.J(ue,xe,a(Be)?!!Be.capture:!1,dt):Y(P,ue,xe,!1,Be,dt)}function Y(P,ue,xe,Be,dt,xt){if(!ue)throw Error("Invalid event type");const Ht=a(dt)?!!dt.capture:!!dt;let nr=Te(P);if(nr||(P[B]=nr=new X(P)),xe=nr.add(ue,xe,Be,Ht,xt),xe.proxy)return xe;if(Be=ee(),xe.proxy=Be,Be.src=P,Be.listener=xe,P.addEventListener)C||(dt=Ht),dt===void 0&&(dt=!1),P.addEventListener(ue.toString(),Be,dt);else if(P.attachEvent)P.attachEvent(H(ue.toString()),Be);else if(P.addListener&&P.removeListener)P.addListener(Be);else throw Error("addEventListener and attachEvent are unavailable.");return xe}function ee(){function P(xe){return ue.call(P.src,P.listener,xe)}const ue=be;return P}function ae(P,ue,xe,Be,dt){if(Array.isArray(ue))for(var xt=0;xt<ue.length;xt++)ae(P,ue[xt],xe,Be,dt);else Be=a(Be)?!!Be.capture:!!Be,xe=oe(xe),P&&P[$]?(P=P.i,xt=String(ue).toString(),xt in P.g&&(ue=P.g[xt],xe=G(ue,xe,Be,dt),xe>-1&&(ce(ue[xe]),Array.prototype.splice.call(ue,xe,1),ue.length==0&&(delete P.g[xt],P.h--)))):P&&(P=Te(P))&&(ue=P.g[ue.toString()],P=-1,ue&&(P=G(ue,xe,Be,dt)),(xe=P>-1?ue[P]:null)&&ie(xe))}function ie(P){if(typeof P!="number"&&P&&!P.da){var ue=P.src;if(ue&&ue[$])me(ue.i,P);else{var xe=P.type,Be=P.proxy;ue.removeEventListener?ue.removeEventListener(xe,Be,P.capture):ue.detachEvent?ue.detachEvent(H(xe),Be):ue.addListener&&ue.removeListener&&ue.removeListener(Be),(xe=Te(ue))?(me(xe,P),xe.h==0&&(xe.src=null,ue[B]=null)):ce(P)}}}function H(P){return P in z?z[P]:z[P]="on"+P}function be(P,ue){if(P.da)P=!0;else{ue=new O(ue,this);const xe=P.listener,Be=P.ha||P.src;P.fa&&ie(P),P=xe.call(Be,ue)}return P}function Te(P){return P=P[B],P instanceof X?P:null}var Z="__closure_events_fn_"+(Math.random()*1e9>>>0);function oe(P){return typeof P=="function"?P:(P[Z]||(P[Z]=function(ue){return P.handleEvent(ue)}),P[Z])}function te(){L.call(this),this.i=new X(this),this.M=this,this.G=null}d(te,L),te.prototype[$]=!0,te.prototype.removeEventListener=function(P,ue,xe,Be){ae(this,P,ue,xe,Be)};function ye(P,ue){var xe,Be=P.G;if(Be)for(xe=[];Be;Be=Be.G)xe.push(Be);if(P=P.M,Be=ue.type||ue,typeof ue=="string")ue=new M(ue,P);else if(ue instanceof M)ue.target=ue.target||P;else{var dt=ue;ue=new M(Be,P),re(ue,dt)}dt=!0;let xt,Ht;if(xe)for(Ht=xe.length-1;Ht>=0;Ht--)xt=ue.g=xe[Ht],dt=ke(xt,Be,!0,ue)&&dt;if(xt=ue.g=P,dt=ke(xt,Be,!0,ue)&&dt,dt=ke(xt,Be,!1,ue)&&dt,xe)for(Ht=0;Ht<xe.length;Ht++)xt=ue.g=xe[Ht],dt=ke(xt,Be,!1,ue)&&dt}te.prototype.N=function(){if(te.Z.N.call(this),this.i){var P=this.i;for(const ue in P.g){const xe=P.g[ue];for(let Be=0;Be<xe.length;Be++)ce(xe[Be]);delete P.g[ue],P.h--}}this.G=null},te.prototype.J=function(P,ue,xe,Be){return this.i.add(String(P),ue,!1,xe,Be)},te.prototype.K=function(P,ue,xe,Be){return this.i.add(String(P),ue,!0,xe,Be)};function ke(P,ue,xe,Be){if(ue=P.i.g[String(ue)],!ue)return!0;ue=ue.concat();let dt=!0;for(let xt=0;xt<ue.length;++xt){const Ht=ue[xt];if(Ht&&!Ht.da&&Ht.capture==xe){const nr=Ht.listener,ys=Ht.ha||Ht.src;Ht.fa&&me(P.i,Ht),dt=nr.call(ys,Be)!==!1&&dt}}return dt&&!Be.defaultPrevented}function we(P,ue){if(typeof P!="function")if(P&&typeof P.handleEvent=="function")P=c(P.handleEvent,P);else throw Error("Invalid listener argument");return Number(ue)>2147483647?-1:o.setTimeout(P,ue||0)}function Ae(P){P.g=we(()=>{P.g=null,P.i&&(P.i=!1,Ae(P))},P.l);const ue=P.h;P.h=null,P.m.apply(null,ue)}class Re extends L{constructor(ue,xe){super(),this.m=ue,this.l=xe,this.h=null,this.i=!1,this.g=null}j(ue){this.h=arguments,this.g?this.i=!0:Ae(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(P){L.call(this),this.h=P,this.g={}}d(Pe,L);var Ce=[];function Oe(P){se(P.g,function(ue,xe){this.g.hasOwnProperty(xe)&&ie(ue)},P),P.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),Oe(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fe=o.JSON.stringify,$e=o.JSON.parse,he=class{stringify(P){return o.JSON.stringify(P,void 0)}parse(P){return o.JSON.parse(P,void 0)}};function q(){}function ne(){}var Ee={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){M.call(this,"d")}d(Se,M);function ze(){M.call(this,"c")}d(ze,M);var Ie={},qe=null;function Ye(){return qe=qe||new te}Ie.Ia="serverreachability";function ft(P){M.call(this,Ie.Ia,P)}d(ft,M);function We(P){const ue=Ye();ye(ue,new ft(ue))}Ie.STAT_EVENT="statevent";function nt(P,ue){M.call(this,Ie.STAT_EVENT,P),this.stat=ue}d(nt,M);function bt(P){const ue=Ye();ye(ue,new nt(ue,P))}Ie.Ja="timingevent";function ct(P,ue){M.call(this,Ie.Ja,P),this.size=ue}d(ct,M);function Ft(P,ue){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){P()},ue)}function tn(){this.g=!0}tn.prototype.ua=function(){this.g=!1};function Zt(P,ue,xe,Be,dt,xt){P.info(function(){if(P.g)if(xt){var Ht="",nr=xt.split("&");for(let qr=0;qr<nr.length;qr++){var ys=nr[qr].split("=");if(ys.length>1){const qi=ys[0];ys=ys[1];const Tc=qi.split("_");Ht=Tc.length>=2&&Tc[1]=="type"?Ht+(qi+"="+ys+"&"):Ht+(qi+"=redacted&")}}}else Ht=null;else Ht=xt;return"XMLHTTP REQ ("+Be+") [attempt "+dt+"]: "+ue+`
`+xe+`
`+Ht})}function ri(P,ue,xe,Be,dt,xt,Ht){P.info(function(){return"XMLHTTP RESP ("+Be+") [ attempt "+dt+"]: "+ue+`
`+xe+`
`+xt+" "+Ht})}function Ne(P,ue,xe,Be){P.info(function(){return"XMLHTTP TEXT ("+ue+"): "+fe(P,xe)+(Be?" "+Be:"")})}function le(P,ue){P.info(function(){return"TIMEOUT: "+ue})}tn.prototype.info=function(){};function fe(P,ue){if(!P.g)return ue;if(!ue)return null;try{const xt=JSON.parse(ue);if(xt){for(P=0;P<xt.length;P++)if(Array.isArray(xt[P])){var xe=xt[P];if(!(xe.length<2)){var Be=xe[1];if(Array.isArray(Be)&&!(Be.length<1)){var dt=Be[0];if(dt!="noop"&&dt!="stop"&&dt!="close")for(let Ht=1;Ht<Be.length;Ht++)Be[Ht]=""}}}}return Fe(xt)}catch{return ue}}var ve={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xe;function it(){}d(it,q),it.prototype.g=function(){return new XMLHttpRequest},Xe=new it;function Lt(P){return encodeURIComponent(String(P))}function Bt(P){var ue=1;P=P.split(":");const xe=[];for(;ue>0&&P.length;)xe.push(P.shift()),ue--;return P.length&&xe.push(P.join(":")),xe}function Wt(P,ue,xe,Be){this.j=P,this.i=ue,this.l=xe,this.S=Be||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jt}function Jt(){this.i=null,this.g="",this.h=!1}var qt={},et={};function Ze(P,ue,xe){P.M=1,P.A=Wr(pn(ue)),P.u=xe,P.R=!0,Ue(P,null)}function Ue(P,ue){P.F=Date.now(),$t(P),P.B=pn(P.A);var xe=P.B,Be=P.S;Array.isArray(Be)||(Be=[String(Be)]),yu(xe.i,"t",Be),P.C=0,xe=P.j.L,P.h=new Jt,P.g=zC(P.j,xe?ue:null,!P.u),P.P>0&&(P.O=new Re(c(P.Y,P,P.g),P.P)),ue=P.V,xe=P.g,Be=P.ba;var dt="readystatechange";Array.isArray(dt)||(dt&&(Ce[0]=dt.toString()),dt=Ce);for(let xt=0;xt<dt.length;xt++){const Ht=de(xe,dt[xt],Be||ue.handleEvent,!1,ue.h||ue);if(!Ht)break;ue.g[Ht.key]=Ht}ue=P.J?J(P.J):{},P.u?(P.v||(P.v="POST"),ue["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.B,P.v,P.u,ue)):(P.v="GET",P.g.ea(P.B,P.v,null,ue)),We(),Zt(P.i,P.v,P.B,P.l,P.S,P.u)}Wt.prototype.ba=function(P){P=P.target;const ue=this.O;ue&&xu(P)==3?ue.j():this.Y(P)},Wt.prototype.Y=function(P){try{if(P==this.g)e:{const nr=xu(this.g),ys=this.g.ya(),qr=this.g.ca();if(!(nr<3)&&(nr!=3||this.g&&(this.h.h||this.g.la()||Lo(this.g)))){this.K||nr!=4||ys==7||(ys==8||qr<=0?We(3):We(2)),dn(this);var ue=this.g.ca();this.X=ue;var xe=at(this);if(this.o=ue==200,ri(this.i,this.v,this.B,this.l,this.S,nr,ue),this.o){if(this.U&&!this.L){t:{if(this.g){var Be,dt=this.g;if((Be=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Be)){var xt=Be;break t}}xt=null}if(P=xt)Ne(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jn(this,P);else{this.o=!1,this.m=3,bt(12),sn(this),bn(this);break e}}if(this.R){P=!0;let qi;for(;!this.K&&this.C<xe.length;)if(qi=Dt(this,xe),qi==et){nr==4&&(this.m=4,bt(14),P=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(qi==qt){this.m=4,bt(15),Ne(this.i,this.l,xe,"[Invalid Chunk]"),P=!1;break}else Ne(this.i,this.l,qi,null),Jn(this,qi);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nr!=4||xe.length!=0||this.h.h||(this.m=1,bt(16),P=!1),this.o=this.o&&P,!P)Ne(this.i,this.l,xe,"[Invalid Chunked Response]"),sn(this),bn(this);else if(xe.length>0&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.aa&&!Ht.P&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),$2(Ht),Ht.P=!0,bt(11))}}else Ne(this.i,this.l,xe,null),Jn(this,xe);nr==4&&sn(this),this.o&&!this.K&&(nr==4?FC(this.j,this):(this.o=!1,$t(this)))}else ih(this.g),ue==400&&xe.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),sn(this),bn(this)}}}catch{}finally{}};function at(P){if(!vt(P))return P.g.la();const ue=Lo(P.g);if(ue==="")return"";let xe="";const Be=ue.length,dt=xu(P.g)==4;if(!P.h.i){if(typeof TextDecoder>"u")return sn(P),bn(P),"";P.h.i=new o.TextDecoder}for(let xt=0;xt<Be;xt++)P.h.h=!0,xe+=P.h.i.decode(ue[xt],{stream:!(dt&&xt==Be-1)});return ue.length=0,P.h.g+=xe,P.C=0,P.h.g}function vt(P){return P.g?P.v=="GET"&&P.M!=2&&P.j.Aa:!1}function Dt(P,ue){var xe=P.C,Be=ue.indexOf(`
`,xe);return Be==-1?et:(xe=Number(ue.substring(xe,Be)),isNaN(xe)?qt:(Be+=1,Be+xe>ue.length?et:(ue=ue.slice(Be,Be+xe),P.C=Be+xe,ue)))}Wt.prototype.cancel=function(){this.K=!0,sn(this)};function $t(P){P.T=Date.now()+P.H,Hn(P,P.H)}function Hn(P,ue){if(P.D!=null)throw Error("WatchDog timer not null");P.D=Ft(c(P.aa,P),ue)}function dn(P){P.D&&(o.clearTimeout(P.D),P.D=null)}Wt.prototype.aa=function(){this.D=null;const P=Date.now();P-this.T>=0?(le(this.i,this.B),this.M!=2&&(We(),bt(17)),sn(this),this.m=2,bn(this)):Hn(this,this.T-P)};function bn(P){P.j.I==0||P.K||FC(P.j,P)}function sn(P){dn(P);var ue=P.O;ue&&typeof ue.dispose=="function"&&ue.dispose(),P.O=null,Oe(P.V),P.g&&(ue=P.g,P.g=null,ue.abort(),ue.dispose())}function Jn(P,ue){try{var xe=P.j;if(xe.I!=0&&(xe.g==P||gt(xe.h,P))){if(!P.L&&gt(xe.h,P)&&xe.I==3){try{var Be=xe.Ba.g.parse(ue)}catch{Be=null}if(Array.isArray(Be)&&Be.length==3){var dt=Be;if(dt[0]==0){e:if(!xe.v){if(xe.g)if(xe.g.F+3e3<P.F)Ew(xe),rm(xe);else break e;M0(xe),bt(18)}}else xe.xa=dt[1],0<xe.xa-xe.K&&dt[2]<37500&&xe.F&&xe.A==0&&!xe.C&&(xe.C=Ft(c(xe.Va,xe),6e3));cn(xe.h)<=1&&xe.ta&&(xe.ta=void 0)}else Nd(xe,11)}else if((P.L||xe.g==P)&&Ew(xe),!D(ue))for(dt=xe.Ba.g.parse(ue),ue=0;ue<dt.length;ue++){let qr=dt[ue];const qi=qr[0];if(!(qi<=xe.K))if(xe.K=qi,qr=qr[1],xe.I==2)if(qr[0]=="c"){xe.M=qr[1],xe.ba=qr[2];const Tc=qr[3];Tc!=null&&(xe.ka=Tc,xe.j.info("VER="+xe.ka));const Id=qr[4];Id!=null&&(xe.za=Id,xe.j.info("SVER="+xe.za));const Eu=qr[5];Eu!=null&&typeof Eu=="number"&&Eu>0&&(Be=1.5*Eu,xe.O=Be,xe.j.info("backChannelRequestTimeoutMs_="+Be)),Be=xe;const Su=P.g;if(Su){const L0=Su.g?Su.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L0){var xt=Be.h;xt.g||L0.indexOf("spdy")==-1&&L0.indexOf("quic")==-1&&L0.indexOf("h2")==-1||(xt.j=xt.l,xt.g=new Set,xt.h&&(Vn(xt,xt.h),xt.h=null))}if(Be.G){const Sw=Su.g?Su.g.getResponseHeader("X-HTTP-Session-Id"):null;Sw&&(Be.wa=Sw,On(Be.J,Be.G,Sw))}}xe.I=3,xe.l&&xe.l.ra(),xe.aa&&(xe.T=Date.now()-P.F,xe.j.info("Handshake RTT: "+xe.T+"ms")),Be=xe;var Ht=P;if(Be.na=$C(Be,Be.L?Be.ba:null,Be.W),Ht.L){yr(Be.h,Ht);var nr=Ht,ys=Be.O;ys&&(nr.H=ys),nr.D&&(dn(nr),$t(nr)),Be.g=Ht}else OC(Be);xe.i.length>0&&_d(xe)}else qr[0]!="stop"&&qr[0]!="close"||Nd(xe,7);else xe.I==3&&(qr[0]=="stop"||qr[0]=="close"?qr[0]=="stop"?Nd(xe,7):B2(xe):qr[0]!="noop"&&xe.l&&xe.l.qa(qr),xe.A=0)}}We(4)}catch{}}var Rn=class{constructor(P,ue){this.g=P,this.map=ue}};function lt(P){this.l=P||10,o.PerformanceNavigationTiming?(P=o.performance.getEntriesByType("navigation"),P=P.length>0&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jt(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function cn(P){return P.h?1:P.g?P.g.size:0}function gt(P,ue){return P.h?P.h==ue:P.g?P.g.has(ue):!1}function Vn(P,ue){P.g?P.g.add(ue):P.h=ue}function yr(P,ue){P.h&&P.h==ue?P.h=null:P.g&&P.g.has(ue)&&P.g.delete(ue)}lt.prototype.cancel=function(){if(this.i=Xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function Xn(P){if(P.h!=null)return P.i.concat(P.h.G);if(P.g!=null&&P.g.size!==0){let ue=P.i;for(const xe of P.g.values())ue=ue.concat(xe.G);return ue}return h(P.i)}var Un=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zn(P,ue){if(P){P=P.split("&");for(let xe=0;xe<P.length;xe++){const Be=P[xe].indexOf("=");let dt,xt=null;Be>=0?(dt=P[xe].substring(0,Be),xt=P[xe].substring(Be+1)):dt=P[xe],ue(dt,xt?decodeURIComponent(xt.replace(/\+/g," ")):"")}}}function zt(P){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let ue;P instanceof zt?(this.l=P.l,Nn(this,P.j),this.o=P.o,this.g=P.g,Pr(this,P.u),this.h=P.h,gs(this,th(P.i)),this.m=P.m):P&&(ue=String(P).match(Un))?(this.l=!1,Nn(this,ue[1]||"",!0),this.o=mn(ue[2]||""),this.g=mn(ue[3]||"",!0),Pr(this,ue[4]),this.h=mn(ue[5]||"",!0),gs(this,ue[6]||"",!0),this.m=mn(ue[7]||"")):(this.l=!1,this.i=new rl(null,this.l))}zt.prototype.toString=function(){const P=[];var ue=this.j;ue&&P.push(Wi(ue,ki,!0),":");var xe=this.g;return(xe||ue=="file")&&(P.push("//"),(ue=this.o)&&P.push(Wi(ue,ki,!0),"@"),P.push(Lt(xe).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),xe=this.u,xe!=null&&P.push(":",String(xe))),(xe=this.h)&&(this.g&&xe.charAt(0)!="/"&&P.push("/"),P.push(Wi(xe,xe.charAt(0)=="/"?_s:ii,!0))),(xe=this.i.toString())&&P.push("?",xe),(xe=this.m)&&P.push("#",Wi(xe,gu)),P.join("")},zt.prototype.resolve=function(P){const ue=pn(this);let xe=!!P.j;xe?Nn(ue,P.j):xe=!!P.o,xe?ue.o=P.o:xe=!!P.g,xe?ue.g=P.g:xe=P.u!=null;var Be=P.h;if(xe)Pr(ue,P.u);else if(xe=!!P.h){if(Be.charAt(0)!="/")if(this.g&&!this.h)Be="/"+Be;else{var dt=ue.h.lastIndexOf("/");dt!=-1&&(Be=ue.h.slice(0,dt+1)+Be)}if(dt=Be,dt==".."||dt==".")Be="";else if(dt.indexOf("./")!=-1||dt.indexOf("/.")!=-1){Be=dt.lastIndexOf("/",0)==0,dt=dt.split("/");const xt=[];for(let Ht=0;Ht<dt.length;){const nr=dt[Ht++];nr=="."?Be&&Ht==dt.length&&xt.push(""):nr==".."?((xt.length>1||xt.length==1&&xt[0]!="")&&xt.pop(),Be&&Ht==dt.length&&xt.push("")):(xt.push(nr),Be=!0)}Be=xt.join("/")}else Be=dt}return xe?ue.h=Be:xe=P.i.toString()!=="",xe?gs(ue,th(P.i)):xe=!!P.m,xe&&(ue.m=P.m),ue};function pn(P){return new zt(P)}function Nn(P,ue,xe){P.j=xe?mn(ue,!0):ue,P.j&&(P.j=P.j.replace(/:$/,""))}function Pr(P,ue){if(ue){if(ue=Number(ue),isNaN(ue)||ue<0)throw Error("Bad port number "+ue);P.u=ue}else P.u=null}function gs(P,ue,xe){ue instanceof rl?(P.i=ue,nh(P.i,P.l)):(xe||(ue=Wi(ue,si)),P.i=new rl(ue,P.l))}function On(P,ue,xe){P.i.set(ue,xe)}function Wr(P){return On(P,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),P}function mn(P,ue){return P?ue?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function Wi(P,ue,xe){return typeof P=="string"?(P=encodeURI(P).replace(ue,ur),xe&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function ur(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var ki=/[#\/\?@]/g,ii=/[#\?:]/g,_s=/[#\?]/g,si=/[#\?@]/g,gu=/#/g;function rl(P,ue){this.h=this.g=null,this.i=P||null,this.j=!!ue}function ao(P){P.g||(P.g=new Map,P.h=0,P.i&&zn(P.i,function(ue,xe){P.add(decodeURIComponent(ue.replace(/\+/g," ")),xe)}))}t=rl.prototype,t.add=function(P,ue){ao(this),this.i=null,P=jl(this,P);let xe=this.g.get(P);return xe||this.g.set(P,xe=[]),xe.push(ue),this.h+=1,this};function eh(P,ue){ao(P),ue=jl(P,ue),P.g.has(ue)&&(P.i=null,P.h-=P.g.get(ue).length,P.g.delete(ue))}function Sd(P,ue){return ao(P),ue=jl(P,ue),P.g.has(ue)}t.forEach=function(P,ue){ao(this),this.g.forEach(function(xe,Be){xe.forEach(function(dt){P.call(ue,dt,Be,this)},this)},this)};function Ad(P,ue){ao(P);let xe=[];if(typeof ue=="string")Sd(P,ue)&&(xe=xe.concat(P.g.get(jl(P,ue))));else for(P=Array.from(P.g.values()),ue=0;ue<P.length;ue++)xe=xe.concat(P[ue]);return xe}t.set=function(P,ue){return ao(this),this.i=null,P=jl(this,P),Sd(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[ue]),this.h+=1,this},t.get=function(P,ue){return P?(P=Ad(this,P),P.length>0?String(P[0]):ue):ue};function yu(P,ue,xe){eh(P,ue),xe.length>0&&(P.i=null,P.g.set(jl(P,ue),h(xe)),P.h+=xe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],ue=Array.from(this.g.keys());for(let Be=0;Be<ue.length;Be++){var xe=ue[Be];const dt=Lt(xe);xe=Ad(this,xe);for(let xt=0;xt<xe.length;xt++){let Ht=dt;xe[xt]!==""&&(Ht+="="+Lt(xe[xt])),P.push(Ht)}}return this.i=P.join("&")};function th(P){const ue=new rl;return ue.i=P.i,P.g&&(ue.g=new Map(P.g),ue.h=P.h),ue}function jl(P,ue){return ue=String(ue),P.j&&(ue=ue.toLowerCase()),ue}function nh(P,ue){ue&&!P.j&&(ao(P),P.i=null,P.g.forEach(function(xe,Be){const dt=Be.toLowerCase();Be!=dt&&(eh(this,Be),yu(this,dt,xe))},P)),P.j=ue}function il(P,ue){const xe=new tn;if(o.Image){const Be=new Image;Be.onload=u(Ia,xe,"TestLoadImage: loaded",!0,ue,Be),Be.onerror=u(Ia,xe,"TestLoadImage: error",!1,ue,Be),Be.onabort=u(Ia,xe,"TestLoadImage: abort",!1,ue,Be),Be.ontimeout=u(Ia,xe,"TestLoadImage: timeout",!1,ue,Be),o.setTimeout(function(){Be.ontimeout&&Be.ontimeout()},1e4),Be.src=P}else ue(!1)}function tm(P,ue){const xe=new tn,Be=new AbortController,dt=setTimeout(()=>{Be.abort(),Ia(xe,"TestPingServer: timeout",!1,ue)},1e4);fetch(P,{signal:Be.signal}).then(xt=>{clearTimeout(dt),xt.ok?Ia(xe,"TestPingServer: ok",!0,ue):Ia(xe,"TestPingServer: server error",!1,ue)}).catch(()=>{clearTimeout(dt),Ia(xe,"TestPingServer: error",!1,ue)})}function Ia(P,ue,xe,Be,dt){try{dt&&(dt.onload=null,dt.onerror=null,dt.onabort=null,dt.ontimeout=null),Be(xe)}catch{}}function bu(){this.g=new he}function $l(P){this.i=P.Sb||null,this.h=P.ab||!1}d($l,q),$l.prototype.g=function(){return new Td(this.i,this.h)};function Td(P,ue){te.call(this),this.H=P,this.o=ue,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Td,te),t=Td.prototype,t.open=function(P,ue){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=P,this.D=ue,this.readyState=1,sl(this)},t.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const ue={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};P&&(ue.body=P),(this.H||o).fetch(new Request(this.D,ue)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wu(this)),this.readyState=0},t.Pa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rh(this)}else P.text().then(this.Oa.bind(this),this.ga.bind(this))};function rh(P){P.j.read().then(P.Ma.bind(P)).catch(P.ga.bind(P))}t.Ma=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var ue=P.value?P.value:new Uint8Array(0);(ue=this.B.decode(ue,{stream:!P.done}))&&(this.response=this.responseText+=ue)}P.done?wu(this):sl(this),this.readyState==3&&rh(this)}},t.Oa=function(P){this.g&&(this.response=this.responseText=P,wu(this))},t.Na=function(P){this.g&&(this.response=P,wu(this))},t.ga=function(){this.g&&wu(this)};function wu(P){P.readyState=4,P.l=null,P.j=null,P.B=null,sl(P)}t.setRequestHeader=function(P,ue){this.A.append(P,ue)},t.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],ue=this.h.entries();for(var xe=ue.next();!xe.done;)xe=xe.value,P.push(xe[0]+": "+xe[1]),xe=ue.next();return P.join(`\r
`)};function sl(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(Td.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function Ra(P){let ue="";return se(P,function(xe,Be){ue+=Be,ue+=":",ue+=xe,ue+=`\r
`}),ue}function ta(P,ue,xe){e:{for(Be in xe){var Be=!1;break e}Be=!0}Be||(xe=Ra(xe),typeof P=="string"?xe!=null&&Lt(xe):On(P,ue,xe))}function dr(P){te.call(this),this.headers=new Map,this.L=P||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(dr,te);var na=/^https?$/i,I0=["POST","PUT"];t=dr.prototype,t.Fa=function(P){this.H=P},t.ea=function(P,ue,xe,Be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);ue=ue?ue.toUpperCase():"GET",this.D=P,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xe.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(ue,String(P),!0),this.B=!1}catch(xt){vu(this,xt);return}if(P=xe||"",xe=new Map(this.headers),Be)if(Object.getPrototypeOf(Be)===Object.prototype)for(var dt in Be)xe.set(dt,Be[dt]);else if(typeof Be.keys=="function"&&typeof Be.get=="function")for(const xt of Be.keys())xe.set(xt,Be.get(xt));else throw Error("Unknown input type for opt_headers: "+String(Be));Be=Array.from(xe.keys()).find(xt=>xt.toLowerCase()=="content-type"),dt=o.FormData&&P instanceof o.FormData,!(Array.prototype.indexOf.call(I0,ue,void 0)>=0)||Be||dt||xe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xt,Ht]of xe)this.g.setRequestHeader(xt,Ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(P),this.v=!1}catch(xt){vu(this,xt)}};function vu(P,ue){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=ue,P.o=5,kd(P),Xs(P)}function kd(P){P.A||(P.A=!0,ye(P,"complete"),ye(P,"error"))}t.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=P||7,ye(this,"complete"),ye(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),dr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ma(this):this.Xa())},t.Xa=function(){Ma(this)};function Ma(P){if(P.h&&typeof s<"u"){if(P.v&&xu(P)==4)setTimeout(P.Ca.bind(P),0);else if(ye(P,"readystatechange"),xu(P)==4){P.h=!1;try{const xt=P.ca();e:switch(xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ue=!0;break e;default:ue=!1}var xe;if(!(xe=ue)){var Be;if(Be=xt===0){let Ht=String(P.D).match(Un)[1]||null;!Ht&&o.self&&o.self.location&&(Ht=o.self.location.protocol.slice(0,-1)),Be=!na.test(Ht?Ht.toLowerCase():"")}xe=Be}if(xe)ye(P,"complete"),ye(P,"success");else{P.o=6;try{var dt=xu(P)>2?P.g.statusText:""}catch{dt=""}P.l=dt+" ["+P.ca()+"]",kd(P)}}finally{Xs(P)}}}}function Xs(P,ue){if(P.g){P.m&&(clearTimeout(P.m),P.m=null);const xe=P.g;P.g=null,ue||ye(P,"ready");try{xe.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xu(P){return P.g?P.g.readyState:0}t.ca=function(){try{return xu(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(P){if(this.g){var ue=this.g.responseText;return P&&ue.indexOf(P)==0&&(ue=ue.substring(P.length)),$e(ue)}};function Lo(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.F){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function ih(P){const ue={};P=(P.g&&xu(P)>=2&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let Be=0;Be<P.length;Be++){if(D(P[Be]))continue;var xe=Bt(P[Be]);const dt=xe[0];if(xe=xe[1],typeof xe!="string")continue;xe=xe.trim();const xt=ue[dt]||[];ue[dt]=xt,xt.push(xe)}Q(ue,function(Be){return Be.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cd(P,ue,xe){return xe&&xe.internalChannelParams&&xe.internalChannelParams[P]||ue}function nm(P){this.za=0,this.i=[],this.j=new tn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cd("failFast",!1,P),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cd("baseRetryDelayMs",5e3,P),this.Za=Cd("retryDelaySeedMs",1e4,P),this.Ta=Cd("forwardChannelMaxRetries",2,P),this.va=Cd("forwardChannelRequestTimeoutMs",2e4,P),this.ma=P&&P.xmlHttpFactory||void 0,this.Ua=P&&P.Rb||void 0,this.Aa=P&&P.useFetchStreams||!1,this.O=void 0,this.L=P&&P.supportsCrossDomainXhr||!1,this.M="",this.h=new lt(P&&P.concurrentRequestLimit),this.Ba=new bu,this.S=P&&P.fastHandshake||!1,this.R=P&&P.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=P&&P.Pb||!1,P&&P.ua&&this.j.ua(),P&&P.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&P&&P.detectBufferingProxy||!1,this.ia=void 0,P&&P.longPollingTimeout&&P.longPollingTimeout>0&&(this.ia=P.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nm.prototype,t.ka=8,t.I=1,t.connect=function(P,ue,xe,Be){bt(0),this.W=P,this.H=ue||{},xe&&Be!==void 0&&(this.H.OSID=xe,this.H.OAID=Be),this.F=this.X,this.J=$C(this,null,this.W),_d(this)};function B2(P){if(vw(P),P.I==3){var ue=P.V++,xe=pn(P.J);if(On(xe,"SID",P.M),On(xe,"RID",ue),On(xe,"TYPE","terminate"),R0(P,xe),ue=new Wt(P,P.j,ue),ue.M=2,ue.A=Wr(pn(xe)),xe=!1,o.navigator&&o.navigator.sendBeacon)try{xe=o.navigator.sendBeacon(ue.A.toString(),"")}catch{}!xe&&o.Image&&(new Image().src=ue.A,xe=!0),xe||(ue.g=zC(ue.j,null),ue.g.ea(ue.A)),ue.F=Date.now(),$t(ue)}jC(P)}function rm(P){P.g&&($2(P),P.g.cancel(),P.g=null)}function vw(P){rm(P),P.v&&(o.clearTimeout(P.v),P.v=null),Ew(P),P.h.cancel(),P.m&&(typeof P.m=="number"&&o.clearTimeout(P.m),P.m=null)}function _d(P){if(!jt(P.h)&&!P.m){P.m=!0;var ue=P.Ea;T||_(),R||(T(),R=!0),k.add(ue,P),P.D=0}}function xw(P,ue){return cn(P.h)>=P.h.j-(P.m?1:0)?!1:P.m?(P.i=ue.G.concat(P.i),!0):P.I==1||P.I==2||P.D>=(P.Sa?0:P.Ta)?!1:(P.m=Ft(c(P.Ea,P,ue),BC(P,P.D)),P.D++,!0)}t.Ea=function(P){if(this.m)if(this.m=null,this.I==1){if(!P){this.V=Math.floor(Math.random()*1e5),P=this.V++;const dt=new Wt(this,this.j,P);let xt=this.o;if(this.U&&(xt?(xt=J(xt),re(xt,this.U)):xt=this.U),this.u!==null||this.R||(dt.J=xt,xt=null),this.S)e:{for(var ue=0,xe=0;xe<this.i.length;xe++){t:{var Be=this.i[xe];if("__data__"in Be.map&&(Be=Be.map.__data__,typeof Be=="string")){Be=Be.length;break t}Be=void 0}if(Be===void 0)break;if(ue+=Be,ue>4096){ue=xe;break e}if(ue===4096||xe===this.i.length-1){ue=xe+1;break e}}ue=1e3}else ue=1e3;ue=DC(this,dt,ue),xe=pn(this.J),On(xe,"RID",P),On(xe,"CVER",22),this.G&&On(xe,"X-HTTP-Session-Id",this.G),R0(this,xe),xt&&(this.R?ue="headers="+Lt(Ra(xt))+"&"+ue:this.u&&ta(xe,this.u,xt)),Vn(this.h,dt),this.Ra&&On(xe,"TYPE","init"),this.S?(On(xe,"$req",ue),On(xe,"SID","null"),dt.U=!0,Ze(dt,xe,null)):Ze(dt,xe,ue),this.I=2}}else this.I==3&&(P?j2(this,P):this.i.length==0||jt(this.h)||j2(this))};function j2(P,ue){var xe;ue?xe=ue.l:xe=P.V++;const Be=pn(P.J);On(Be,"SID",P.M),On(Be,"RID",xe),On(Be,"AID",P.K),R0(P,Be),P.u&&P.o&&ta(Be,P.u,P.o),xe=new Wt(P,P.j,xe,P.D+1),P.u===null&&(xe.J=P.o),ue&&(P.i=ue.G.concat(P.i)),ue=DC(P,xe,1e3),xe.H=Math.round(P.va*.5)+Math.round(P.va*.5*Math.random()),Vn(P.h,xe),Ze(xe,Be,ue)}function R0(P,ue){P.H&&se(P.H,function(xe,Be){On(ue,Be,xe)}),P.l&&se({},function(xe,Be){On(ue,Be,xe)})}function DC(P,ue,xe){xe=Math.min(P.i.length,xe);const Be=P.l?c(P.l.Ka,P.l,P):null;e:{var dt=P.i;let nr=-1;for(;;){const ys=["count="+xe];nr==-1?xe>0?(nr=dt[0].g,ys.push("ofs="+nr)):nr=0:ys.push("ofs="+nr);let qr=!0;for(let qi=0;qi<xe;qi++){var xt=dt[qi].g;const Tc=dt[qi].map;if(xt-=nr,xt<0)nr=Math.max(0,dt[qi].g-100),qr=!1;else try{xt="req"+xt+"_"||"";try{var Ht=Tc instanceof Map?Tc:Object.entries(Tc);for(const[Id,Eu]of Ht){let Su=Eu;a(Eu)&&(Su=Fe(Eu)),ys.push(xt+Id+"="+encodeURIComponent(Su))}}catch(Id){throw ys.push(xt+"type="+encodeURIComponent("_badmap")),Id}}catch{Be&&Be(Tc)}}if(qr){Ht=ys.join("&");break e}}Ht=void 0}return P=P.i.splice(0,xe),ue.G=P,Ht}function OC(P){if(!P.g&&!P.v){P.Y=1;var ue=P.Da;T||_(),R||(T(),R=!0),k.add(ue,P),P.A=0}}function M0(P){return P.g||P.v||P.A>=3?!1:(P.Y++,P.v=Ft(c(P.Da,P),BC(P,P.A)),P.A++,!0)}t.Da=function(){if(this.v=null,PC(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var P=4*this.T;this.j.info("BP detection timer enabled: "+P),this.B=Ft(c(this.Wa,this),P)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),rm(this),PC(this))};function $2(P){P.B!=null&&(o.clearTimeout(P.B),P.B=null)}function PC(P){P.g=new Wt(P,P.j,"rpc",P.Y),P.u===null&&(P.g.J=P.o),P.g.P=0;var ue=pn(P.na);On(ue,"RID","rpc"),On(ue,"SID",P.M),On(ue,"AID",P.K),On(ue,"CI",P.F?"0":"1"),!P.F&&P.ia&&On(ue,"TO",P.ia),On(ue,"TYPE","xmlhttp"),R0(P,ue),P.u&&P.o&&ta(ue,P.u,P.o),P.O&&(P.g.H=P.O);var xe=P.g;P=P.ba,xe.M=1,xe.A=Wr(pn(ue)),xe.u=null,xe.R=!0,Ue(xe,P)}t.Va=function(){this.C!=null&&(this.C=null,rm(this),M0(this),bt(19))};function Ew(P){P.C!=null&&(o.clearTimeout(P.C),P.C=null)}function FC(P,ue){var xe=null;if(P.g==ue){Ew(P),$2(P),P.g=null;var Be=2}else if(gt(P.h,ue))xe=ue.G,yr(P.h,ue),Be=1;else return;if(P.I!=0){if(ue.o)if(Be==1){xe=ue.u?ue.u.length:0,ue=Date.now()-ue.F;var dt=P.D;Be=Ye(),ye(Be,new ct(Be,xe)),_d(P)}else OC(P);else if(dt=ue.m,dt==3||dt==0&&ue.X>0||!(Be==1&&xw(P,ue)||Be==2&&M0(P)))switch(xe&&xe.length>0&&(ue=P.h,ue.i=ue.i.concat(xe)),dt){case 1:Nd(P,5);break;case 4:Nd(P,10);break;case 3:Nd(P,6);break;default:Nd(P,2)}}}function BC(P,ue){let xe=P.Qa+Math.floor(Math.random()*P.Za);return P.isActive()||(xe*=2),xe*ue}function Nd(P,ue){if(P.j.info("Error code "+ue),ue==2){var xe=c(P.bb,P),Be=P.Ua;const dt=!Be;Be=new zt(Be||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Nn(Be,"https"),Wr(Be),dt?il(Be.toString(),xe):tm(Be.toString(),xe)}else bt(2);P.I=0,P.l&&P.l.pa(ue),jC(P),vw(P)}t.bb=function(P){P?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function jC(P){if(P.I=0,P.ja=[],P.l){const ue=Xn(P.h);(ue.length!=0||P.i.length!=0)&&(m(P.ja,ue),m(P.ja,P.i),P.h.i.length=0,h(P.i),P.i.length=0),P.l.oa()}}function $C(P,ue,xe){var Be=xe instanceof zt?pn(xe):new zt(xe);if(Be.g!="")ue&&(Be.g=ue+"."+Be.g),Pr(Be,Be.u);else{var dt=o.location;Be=dt.protocol,ue=ue?ue+"."+dt.hostname:dt.hostname,dt=+dt.port;const xt=new zt(null);Be&&Nn(xt,Be),ue&&(xt.g=ue),dt&&Pr(xt,dt),xe&&(xt.h=xe),Be=xt}return xe=P.G,ue=P.wa,xe&&ue&&On(Be,xe,ue),On(Be,"VER",P.ka),R0(P,Be),Be}function zC(P,ue,xe){if(ue&&!P.L)throw Error("Can't create secondary domain capable XhrIo object.");return ue=P.Aa&&!P.ma?new dr(new $l({ab:xe})):new dr(P.ma),ue.Fa(P.L),ue}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function HC(){}t=HC.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function im(){}im.prototype.g=function(P,ue){return new La(P,ue)};function La(P,ue){te.call(this),this.g=new nm(ue),this.l=P,this.h=ue&&ue.messageUrlParams||null,P=ue&&ue.messageHeaders||null,ue&&ue.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=ue&&ue.initMessageHeaders||null,ue&&ue.messageContentType&&(P?P["X-WebChannel-Content-Type"]=ue.messageContentType:P={"X-WebChannel-Content-Type":ue.messageContentType}),ue&&ue.sa&&(P?P["X-WebChannel-Client-Profile"]=ue.sa:P={"X-WebChannel-Client-Profile":ue.sa}),this.g.U=P,(P=ue&&ue.Qb)&&!D(P)&&(this.g.u=P),this.A=ue&&ue.supportsCrossDomainXhr||!1,this.v=ue&&ue.sendRawJson||!1,(ue=ue&&ue.httpSessionIdParam)&&!D(ue)&&(this.g.G=ue,P=this.h,P!==null&&ue in P&&(P=this.h,ue in P&&delete P[ue])),this.j=new sh(this)}d(La,te),La.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},La.prototype.close=function(){B2(this.g)},La.prototype.o=function(P){var ue=this.g;if(typeof P=="string"){var xe={};xe.__data__=P,P=xe}else this.v&&(xe={},xe.__data__=Fe(P),P=xe);ue.i.push(new Rn(ue.Ya++,P)),ue.I==3&&_d(ue)},La.prototype.N=function(){this.g.l=null,delete this.j,B2(this.g),delete this.g,La.Z.N.call(this)};function VC(P){Se.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var ue=P.__sm__;if(ue){e:{for(const xe in ue){P=xe;break e}P=void 0}(this.i=P)&&(P=this.i,ue=ue!==null&&P in ue?ue[P]:void 0),this.data=ue}else this.data=P}d(VC,Se);function UC(){ze.call(this),this.status=1}d(UC,ze);function sh(P){this.g=P}d(sh,HC),sh.prototype.ra=function(){ye(this.g,"a")},sh.prototype.qa=function(P){ye(this.g,new VC(P))},sh.prototype.pa=function(P){ye(this.g,new UC)},sh.prototype.oa=function(){ye(this.g,"b")},im.prototype.createWebChannel=im.prototype.g,La.prototype.send=La.prototype.o,La.prototype.open=La.prototype.m,La.prototype.close=La.prototype.close,Tce=function(){return new im},Ace=function(){return Ye()},Sce=Ie,ZP={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,k_=ve,He.COMPLETE="complete",Ece=He,ne.EventType=Ee,Ee.OPEN="a",Ee.CLOSE="b",Ee.ERROR="c",Ee.MESSAGE="d",te.prototype.listen=te.prototype.J,YE=ne,dr.prototype.listenOnce=dr.prototype.K,dr.prototype.getLastError=dr.prototype.Ha,dr.prototype.getLastErrorCode=dr.prototype.ya,dr.prototype.getStatus=dr.prototype.ca,dr.prototype.getResponseJson=dr.prototype.La,dr.prototype.getResponseText=dr.prototype.la,dr.prototype.send=dr.prototype.ea,dr.prototype.setWithCredentials=dr.prototype.Fa,xce=dr}).apply(typeof X3<"u"?X3:typeof self<"u"?self:typeof window<"u"?window:{});const EY="@firebase/firestore",SY="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ma.UNAUTHENTICATED=new ma(null),ma.GOOGLE_CREDENTIALS=new ma("google-credentials-uid"),ma.FIRST_PARTY=new ma("first-party-uid"),ma.MOCK_USER=new ma("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c2="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new O$("@firebase/firestore");function xv(){return Ab.logLevel}function nn(t,...e){if(Ab.logLevel<=vr.DEBUG){const n=e.map(B$);Ab.debug(`Firestore (${c2}): ${t}`,...n)}}function Lp(t,...e){if(Ab.logLevel<=vr.ERROR){const n=e.map(B$);Ab.error(`Firestore (${c2}): ${t}`,...n)}}function ax(t,...e){if(Ab.logLevel<=vr.WARN){const n=e.map(B$);Ab.warn(`Firestore (${c2}): ${t}`,...n)}}function B$(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kce(t,r,n)}function kce(t,e,n){let r=`FIRESTORE (${c2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Lp(r),new Error(r)}function ui(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||kce(e,i,r)}function Zn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends yd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cce{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i4e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ma.UNAUTHENTICATED)))}shutdown(){}}class s4e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class o4e{constructor(e){this.t=e,this.currentUser=ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ui(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new xp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xp,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xp)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ui(typeof r.accessToken=="string",31837,{l:r}),new Cce(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ui(e===null||typeof e=="string",2055,{h:e}),new ma(e)}}class a4e{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ma.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l4e{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a4e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ma.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AY{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c4e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ui(this.o===void 0,3512);const r=s=>{s.error!=null&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,nn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AY(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ui(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AY(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=u4e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function xr(t,e){return t<e?-1:t>e?1:0}function JP(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return zD(i)===zD(s)?xr(i,s):zD(i)?1:-1}return xr(t.length,e.length)}const d4e=55296,f4e=57343;function zD(t){const e=t.charCodeAt(0);return e>=d4e&&e<=f4e}function lx(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY="__name__";class Zd{constructor(e,n,r){n===void 0?n=0:n>e.length&&$n(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$n(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zd?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Zd.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return xr(e.length,n.length)}static compareSegments(e,n){const r=Zd.isNumericId(e),i=Zd.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zd.extractNumericId(e).compare(Zd.extractNumericId(n)):JP(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Og.fromString(e.substring(4,e.length-2))}}class Di extends Zd{construct(e,n,r){return new Di(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Yt(kt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Di(n)}static emptyPath(){return new Di([])}}const h4e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yo extends Zd{construct(e,n,r){return new Yo(e,n,r)}static isValidIdentifier(e){return h4e.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TY}static keyField(){return new Yo([TY])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Yt(kt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Yt(kt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Yt(kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Yt(kt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yo(n)}static emptyPath(){return new Yo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.path=e}static fromPath(e){return new En(Di.fromString(e))}static fromName(e){return new En(Di.fromString(e).popFirst(5))}static empty(){return new En(Di.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Di.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Di.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new En(new Di(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ce(t,e,n){if(!n)throw new Yt(kt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p4e(t,e,n,r){if(e===!0&&r===!0)throw new Yt(kt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kY(t){if(!En.isDocumentKey(t))throw new Yt(kt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CY(t){if(En.isDocumentKey(t))throw new Yt(kt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nce(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function I4(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$n(12329,{type:typeof t})}function Ka(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Yt(kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=I4(t);throw new Yt(kt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t,e){const n={typeString:t};return e&&(n.value=e),n}function _k(t,e){if(!Nce(t))throw new Yt(kt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Yt(kt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=-62135596800,NY=1e6;class zi{static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*NY);return new zi(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Yt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Yt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_Y)throw new Yt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Yt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NY}_compareTo(e){return this.seconds===e.seconds?xr(this.nanoseconds,e.nanoseconds):xr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_k(e,zi._jsonSchema))return new zi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_Y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zi._jsonSchemaVersion="firestore/timestamp/1.0",zi._jsonSchema={type:Vs("string",zi._jsonSchemaVersion),seconds:Vs("number"),nanoseconds:Vs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{static fromTimestamp(e){return new Kn(e)}static min(){return new Kn(new zi(0,0))}static max(){return new Kn(new zi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=-1;function m4e(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Kn.fromTimestamp(r===1e9?new zi(n+1,0):new zi(n,r));return new Xg(i,En.empty(),e)}function g4e(t){return new Xg(t.readTime,t.key,LA)}class Xg{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xg(Kn.min(),En.empty(),LA)}static max(){return new Xg(Kn.max(),En.empty(),LA)}}function y4e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=En.comparator(t.documentKey,e.documentKey),n!==0?n:xr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w4e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t){if(t.code!==kt.FAILED_PRECONDITION||t.message!==b4e)throw t;nn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$n(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new It(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof It?n:It.resolve(n)}catch(n){return It.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):It.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):It.reject(n)}static resolve(e){return new It(((n,r)=>{n(e)}))}static reject(e){return new It(((n,r)=>{r(e)}))}static waitFor(e){return new It(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=It.resolve(!1);for(const r of e)n=n.next((i=>i?It.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new It(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===s&&r(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new It(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function v4e(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function d2(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}R4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=-1;function M4(t){return t==null}function iN(t){return t===0&&1/t==-1/0}function x4e(t){return typeof t=="number"&&Number.isInteger(t)&&!iN(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ice="";function E4e(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IY(e)),e=S4e(t.get(n),e);return IY(e)}function S4e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Ice:n+="";break;default:n+=s}}return n}function IY(t){return t+Ice+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function y0(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rce(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.comparator=e,this.root=n||Wo.EMPTY}insert(e,n){return new is(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wo.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Y3(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Y3(this.root,e,this.comparator,!1)}getReverseIterator(){return new Y3(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Y3(this.root,e,this.comparator,!0)}}class Y3{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wo{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Wo.RED,this.left=i??Wo.EMPTY,this.right=s??Wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Wo(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $n(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $n(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $n(27949);return e+(this.isRed()?0:1)}}Wo.EMPTY=null,Wo.RED=!0,Wo.BLACK=!1;Wo.EMPTY=new class{constructor(){this.size=0}get key(){throw $n(57766)}get value(){throw $n(16141)}get color(){throw $n(16727)}get left(){throw $n(29726)}get right(){throw $n(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Wo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MY(this.data.getIterator())}getIteratorFrom(e){return new MY(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new oo(this.comparator);return n.data=e,n}}class MY{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.fields=e,e.sort(Yo.comparator)}static empty(){return new oc([])}unionWith(e){let n=new oo(Yo.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new oc(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lx(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mce extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mce("Invalid base64 string: "+s):s}})(e);return new Qo(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new Qo(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qo.EMPTY_BYTE_STRING=new Qo("");const A4e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yg(t){if(ui(!!t,39018),typeof t=="string"){let e=0;const n=A4e.exec(t);if(ui(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Es(t.seconds),nanos:Es(t.nanos)}}function Es(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zg(t){return typeof t=="string"?Qo.fromBase64String(t):Qo.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lce="server_timestamp",Dce="__type__",Oce="__previous_value__",Pce="__local_write_time__";function z$(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Dce])==null?void 0:r.stringValue)===Lce}function L4(t){const e=t.mapValue.fields[Oce];return z$(e)?L4(e):e}function DA(t){const e=Yg(t.mapValue.fields[Pce].timestampValue);return new zi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4e{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const sN="(default)";class OA{constructor(e,n){this.projectId=e,this.database=n||sN}static empty(){return new OA("","")}get isDefaultDatabase(){return this.database===sN}isEqual(e){return e instanceof OA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fce="__type__",k4e="__max__",Z3={mapValue:{}},Bce="__vector__",oN="value";function Jg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?z$(t)?4:_4e(t)?9007199254740991:C4e(t)?10:11:$n(28295,{value:t})}function Lf(t,e){if(t===e)return!0;const n=Jg(t);if(n!==Jg(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return DA(t).isEqual(DA(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yg(i.timestampValue),a=Yg(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Zg(i.bytesValue).isEqual(Zg(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Es(i.geoPointValue.latitude)===Es(s.geoPointValue.latitude)&&Es(i.geoPointValue.longitude)===Es(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Es(i.integerValue)===Es(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Es(i.doubleValue),a=Es(s.doubleValue);return o===a?iN(o)===iN(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return lx(t.arrayValue.values||[],e.arrayValue.values||[],Lf);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RY(o)!==RY(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Lf(o[l],a[l])))return!1;return!0})(t,e);default:return $n(52216,{left:t})}}function PA(t,e){return(t.values||[]).find((n=>Lf(n,e)))!==void 0}function cx(t,e){if(t===e)return 0;const n=Jg(t),r=Jg(e);if(n!==r)return xr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xr(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=Es(s.integerValue||s.doubleValue),l=Es(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return LY(t.timestampValue,e.timestampValue);case 4:return LY(DA(t),DA(e));case 5:return JP(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=Zg(s),l=Zg(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=xr(a[c],l[c]);if(u!==0)return u}return xr(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=xr(Es(s.latitude),Es(o.latitude));return a!==0?a:xr(Es(s.longitude),Es(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return DY(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var f,h,m,y;const a=s.fields||{},l=o.fields||{},c=(f=a[oN])==null?void 0:f.arrayValue,u=(h=l[oN])==null?void 0:h.arrayValue,d=xr(((m=c==null?void 0:c.values)==null?void 0:m.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return d!==0?d:DY(c,u)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Z3.mapValue&&o===Z3.mapValue)return 0;if(s===Z3.mapValue)return 1;if(o===Z3.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=JP(l[d],u[d]);if(f!==0)return f;const h=cx(a[l[d]],c[u[d]]);if(h!==0)return h}return xr(l.length,u.length)})(t.mapValue,e.mapValue);default:throw $n(23264,{he:n})}}function LY(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xr(t,e);const n=Yg(t),r=Yg(e),i=xr(n.seconds,r.seconds);return i!==0?i:xr(n.nanos,r.nanos)}function DY(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=cx(n[i],r[i]);if(s)return s}return xr(n.length,r.length)}function ux(t){return QP(t)}function QP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Yg(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Zg(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return En.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=QP(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${QP(n.fields[o])}`;return i+"}"})(t.mapValue):$n(61005,{value:t})}function C_(t){switch(Jg(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=L4(t);return e?16+C_(e):16;case 5:return 2*t.stringValue.length;case 6:return Zg(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+C_(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return y0(r.fields,((s,o)=>{i+=s.length+C_(o)})),i})(t.mapValue);default:throw $n(13486,{value:t})}}function OY(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function e7(t){return!!t&&"integerValue"in t}function H$(t){return!!t&&"arrayValue"in t}function PY(t){return!!t&&"nullValue"in t}function FY(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __(t){return!!t&&"mapValue"in t}function C4e(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Fce])==null?void 0:r.stringValue)===Bce}function $S(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return y0(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=$S(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$S(t.arrayValue.values[n]);return e}return{...t}}function _4e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===k4e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.value=e}static empty(){return new Cl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!__(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$S(n)}setAll(e){let n=Yo.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=$S(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());__(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lf(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];__(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){y0(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Cl($S(this.value))}}function jce(t){const e=[];return y0(t.fields,((n,r)=>{const i=new Yo([n]);if(__(r)){const s=jce(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new oc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ya(e,0,Kn.min(),Kn.min(),Kn.min(),Cl.empty(),0)}static newFoundDocument(e,n,r,i){return new ya(e,1,n,Kn.min(),r,i,0)}static newNoDocument(e,n){return new ya(e,2,n,Kn.min(),Kn.min(),Cl.empty(),0)}static newUnknownDocument(e,n){return new ya(e,3,n,Kn.min(),Kn.min(),Cl.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Kn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ya&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ya(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.position=e,this.inclusive=n}}function BY(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=En.comparator(En.fromName(o.referenceValue),n.key):r=cx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jY(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lf(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n="asc"){this.field=e,this.dir=n}}function N4e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ce{}class zs extends $ce{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new R4e(e,n,r):n==="array-contains"?new D4e(e,r):n==="in"?new O4e(e,r):n==="not-in"?new P4e(e,r):n==="array-contains-any"?new F4e(e,r):new zs(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new M4e(e,r):new L4e(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cx(n,this.value)):n!==null&&Jg(this.value)===Jg(n)&&this.matchesComparison(cx(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $n(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class td extends $ce{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new td(e,n)}matches(e){return zce(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zce(t){return t.op==="and"}function Hce(t){return I4e(t)&&zce(t)}function I4e(t){for(const e of t.filters)if(e instanceof td)return!1;return!0}function t7(t){if(t instanceof zs)return t.field.canonicalString()+t.op.toString()+ux(t.value);if(Hce(t))return t.filters.map((e=>t7(e))).join(",");{const e=t.filters.map((n=>t7(n))).join(",");return`${t.op}(${e})`}}function Vce(t,e){return t instanceof zs?(function(r,i){return i instanceof zs&&r.op===i.op&&r.field.isEqual(i.field)&&Lf(r.value,i.value)})(t,e):t instanceof td?(function(r,i){return i instanceof td&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&Vce(o,i.filters[a])),!0):!1})(t,e):void $n(19439)}function Uce(t){return t instanceof zs?(function(n){return`${n.field.canonicalString()} ${n.op} ${ux(n.value)}`})(t):t instanceof td?(function(n){return n.op.toString()+" {"+n.getFilters().map(Uce).join(" ,")+"}"})(t):"Filter"}class R4e extends zs{constructor(e,n,r){super(e,n,r),this.key=En.fromName(r.referenceValue)}matches(e){const n=En.comparator(e.key,this.key);return this.matchesComparison(n)}}class M4e extends zs{constructor(e,n){super(e,"in",n),this.keys=Wce("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class L4e extends zs{constructor(e,n){super(e,"not-in",n),this.keys=Wce("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Wce(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>En.fromName(r.referenceValue)))}class D4e extends zs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return H$(n)&&PA(n.arrayValue,this.value)}}class O4e extends zs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&PA(this.value.arrayValue,n)}}class P4e extends zs{constructor(e,n){super(e,"not-in",n)}matches(e){if(PA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!PA(this.value.arrayValue,n)}}class F4e extends zs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!H$(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>PA(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4e{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function $Y(t,e=null,n=[],r=[],i=null,s=null,o=null){return new B4e(t,e,n,r,i,s,o)}function V$(t){const e=Zn(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>t7(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),M4(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ux(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ux(r))).join(",")),e.Te=n}return e.Te}function U$(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N4e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vce(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jY(t.startAt,e.startAt)&&jY(t.endAt,e.endAt)}function n7(t){return En.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function j4e(t,e,n,r,i,s,o,a){return new f2(t,e,n,r,i,s,o,a)}function D4(t){return new f2(t)}function zY(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qce(t){return t.collectionGroup!==null}function zS(t){const e=Zn(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new oo(Yo.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new FA(s,r))})),n.has(Yo.keyField().canonicalString())||e.Ie.push(new FA(Yo.keyField(),r))}return e.Ie}function wf(t){const e=Zn(t);return e.Ee||(e.Ee=$4e(e,zS(t))),e.Ee}function $4e(t,e){if(t.limitType==="F")return $Y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new FA(i.field,s)}));const n=t.endAt?new aN(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new aN(t.startAt.position,t.startAt.inclusive):null;return $Y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r7(t,e){const n=t.filters.concat([e]);return new f2(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function i7(t,e,n){return new f2(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function O4(t,e){return U$(wf(t),wf(e))&&t.limitType===e.limitType}function Gce(t){return`${V$(wf(t))}|lt:${t.limitType}`}function Ev(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Uce(i))).join(", ")}]`),M4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ux(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ux(i))).join(",")),`Target(${r})`})(wf(t))}; limitType=${t.limitType})`}function P4(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):En.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of zS(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const c=BY(o,a,l);return o.inclusive?c<=0:c<0})(r.startAt,zS(r),i)||r.endAt&&!(function(o,a,l){const c=BY(o,a,l);return o.inclusive?c>=0:c>0})(r.endAt,zS(r),i))})(t,e)}function z4e(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kce(t){return(e,n)=>{let r=!1;for(const i of zS(t)){const s=H4e(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function H4e(t,e,n){const r=t.field.isKeyField()?En.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?cx(l,c):$n(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $n(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){y0(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Rce(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4e=new is(En.comparator);function Dp(){return V4e}const Xce=new is(En.comparator);function ZE(...t){let e=Xce;for(const n of t)e=e.insert(n.key,n);return e}function Yce(t){let e=Xce;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function by(){return HS()}function Zce(){return HS()}function HS(){return new rw((t=>t.toString()),((t,e)=>t.isEqual(e)))}const U4e=new is(En.comparator),W4e=new oo(En.comparator);function Sr(...t){let e=W4e;for(const n of t)e=e.add(n);return e}const q4e=new oo(xr);function G4e(){return q4e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iN(e)?"-0":e}}function Jce(t){return{integerValue:""+t}}function K4e(t,e){return x4e(e)?Jce(e):W$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._=void 0}}function X4e(t,e,n){return t instanceof BA?(function(i,s){const o={fields:{[Dce]:{stringValue:Lce},[Pce]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&z$(s)&&(s=L4(s)),s&&(o.fields[Oce]=s),{mapValue:o}})(n,e):t instanceof dx?eue(t,e):t instanceof jA?tue(t,e):(function(i,s){const o=Qce(i,s),a=HY(o)+HY(i.Ae);return e7(o)&&e7(i.Ae)?Jce(a):W$(i.serializer,a)})(t,e)}function Y4e(t,e,n){return t instanceof dx?eue(t,e):t instanceof jA?tue(t,e):n}function Qce(t,e){return t instanceof lN?(function(r){return e7(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class BA extends F4{}class dx extends F4{constructor(e){super(),this.elements=e}}function eue(t,e){const n=nue(e);for(const r of t.elements)n.some((i=>Lf(i,r)))||n.push(r);return{arrayValue:{values:n}}}class jA extends F4{constructor(e){super(),this.elements=e}}function tue(t,e){let n=nue(e);for(const r of t.elements)n=n.filter((i=>!Lf(i,r)));return{arrayValue:{values:n}}}class lN extends F4{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function HY(t){return Es(t.integerValue||t.doubleValue)}function nue(t){return H$(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rue{constructor(e,n){this.field=e,this.transform=n}}function Z4e(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof dx&&i instanceof dx||r instanceof jA&&i instanceof jA?lx(r.elements,i.elements,Lf):r instanceof lN&&i instanceof lN?Lf(r.Ae,i.Ae):r instanceof BA&&i instanceof BA})(t.transform,e.transform)}class J4e{constructor(e,n){this.version=e,this.transformResults=n}}class Xa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xa}static exists(e){return new Xa(void 0,e)}static updateTime(e){return new Xa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class B4{}function iue(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new j4(t.key,Xa.none()):new Nk(t.key,t.data,Xa.none());{const n=t.data,r=Cl.empty();let i=new oo(Yo.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new b0(t.key,r,new oc(i.toArray()),Xa.none())}}function Q4e(t,e,n){t instanceof Nk?(function(i,s,o){const a=i.value.clone(),l=UY(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof b0?(function(i,s,o){if(!N_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=UY(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(sue(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function VS(t,e,n,r){return t instanceof Nk?(function(s,o,a,l){if(!N_(s.precondition,o))return a;const c=s.value.clone(),u=WY(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof b0?(function(s,o,a,l){if(!N_(s.precondition,o))return a;const c=WY(s.fieldTransforms,l,o),u=o.data;return u.setAll(sue(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(s,o,a){return N_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function eRe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Qce(r.transform,i||null);s!=null&&(n===null&&(n=Cl.empty()),n.set(r.field,s))}return n||null}function VY(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lx(r,i,((s,o)=>Z4e(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nk extends B4{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class b0 extends B4{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sue(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function UY(t,e,n){const r=new Map;ui(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Y4e(o,a,n[i]))}return r}function WY(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,X4e(s,o,e))}return r}class j4 extends B4{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tRe extends B4{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nRe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Q4e(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=VS(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=VS(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Zce();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=iue(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Kn.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Sr())}isEqual(e){return this.batchId===e.batchId&&lx(this.mutations,e.mutations,((n,r)=>VY(n,r)))&&lx(this.baseMutations,e.baseMutations,((n,r)=>VY(n,r)))}}class q${constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ui(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return U4e})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new q$(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rRe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iRe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ds,Nr;function sRe(t){switch(t){case kt.OK:return $n(64938);case kt.CANCELLED:case kt.UNKNOWN:case kt.DEADLINE_EXCEEDED:case kt.RESOURCE_EXHAUSTED:case kt.INTERNAL:case kt.UNAVAILABLE:case kt.UNAUTHENTICATED:return!1;case kt.INVALID_ARGUMENT:case kt.NOT_FOUND:case kt.ALREADY_EXISTS:case kt.PERMISSION_DENIED:case kt.FAILED_PRECONDITION:case kt.ABORTED:case kt.OUT_OF_RANGE:case kt.UNIMPLEMENTED:case kt.DATA_LOSS:return!0;default:return $n(15467,{code:t})}}function oue(t){if(t===void 0)return Lp("GRPC error has no .code"),kt.UNKNOWN;switch(t){case Ds.OK:return kt.OK;case Ds.CANCELLED:return kt.CANCELLED;case Ds.UNKNOWN:return kt.UNKNOWN;case Ds.DEADLINE_EXCEEDED:return kt.DEADLINE_EXCEEDED;case Ds.RESOURCE_EXHAUSTED:return kt.RESOURCE_EXHAUSTED;case Ds.INTERNAL:return kt.INTERNAL;case Ds.UNAVAILABLE:return kt.UNAVAILABLE;case Ds.UNAUTHENTICATED:return kt.UNAUTHENTICATED;case Ds.INVALID_ARGUMENT:return kt.INVALID_ARGUMENT;case Ds.NOT_FOUND:return kt.NOT_FOUND;case Ds.ALREADY_EXISTS:return kt.ALREADY_EXISTS;case Ds.PERMISSION_DENIED:return kt.PERMISSION_DENIED;case Ds.FAILED_PRECONDITION:return kt.FAILED_PRECONDITION;case Ds.ABORTED:return kt.ABORTED;case Ds.OUT_OF_RANGE:return kt.OUT_OF_RANGE;case Ds.UNIMPLEMENTED:return kt.UNIMPLEMENTED;case Ds.DATA_LOSS:return kt.DATA_LOSS;default:return $n(39323,{code:t})}}(Nr=Ds||(Ds={}))[Nr.OK=0]="OK",Nr[Nr.CANCELLED=1]="CANCELLED",Nr[Nr.UNKNOWN=2]="UNKNOWN",Nr[Nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nr[Nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nr[Nr.NOT_FOUND=5]="NOT_FOUND",Nr[Nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nr[Nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nr[Nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nr[Nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nr[Nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nr[Nr.ABORTED=10]="ABORTED",Nr[Nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nr[Nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nr[Nr.INTERNAL=13]="INTERNAL",Nr[Nr.UNAVAILABLE=14]="UNAVAILABLE",Nr[Nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oRe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aRe=new Og([4294967295,4294967295],0);function qY(t){const e=oRe().encode(t),n=new vce;return n.update(e),new Uint8Array(n.digest())}function GY(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Og([n,r],0),new Og([i,s],0)]}class G${constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new JE(`Invalid padding: ${n}`);if(r<0)throw new JE(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new JE(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new JE(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Og.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Og.fromNumber(r)));return i.compare(aRe)===1&&(i=new Og([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qY(e),[r,i]=GY(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new G$(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=qY(e),[r,i]=GY(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class JE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ik.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $4(Kn.min(),i,new is(xr),Dp(),Sr())}}class Ik{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ik(r,n,Sr(),Sr(),Sr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class aue{constructor(e,n){this.targetId=e,this.Ce=n}}class lue{constructor(e,n,r=Qo.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class KY{constructor(){this.ve=0,this.Fe=XY(),this.Me=Qo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sr(),n=Sr(),r=Sr();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$n(38017,{changeType:s})}})),new Ik(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=XY()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ui(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lRe{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dp(),this.Je=J3(),this.He=J3(),this.Ye=new is(xr)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$n(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(n7(s))if(r===0){const o=new En(s.path);this.et(n,o,ya.newNoDocument(o,Kn.min()))}else ui(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zg(r).toUint8Array()}catch(l){if(l instanceof Mce)return ax("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new G$(o,i,s)}catch(l){return ax(l instanceof JE?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&n7(a.target)){const l=new En(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ya.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=Sr();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new $4(e,n,this.Ye,this.je,r);return this.je=Dp(),this.Je=J3(),this.He=J3(),this.Ye=new is(xr),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new KY,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new oo(xr),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new oo(xr),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||nn("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KY),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function J3(){return new is(En.comparator)}function XY(){return new is(En.comparator)}const cRe={asc:"ASCENDING",desc:"DESCENDING"},uRe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dRe={and:"AND",or:"OR"};class fRe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function s7(t,e){return t.useProto3Json||M4(e)?e:{value:e}}function cN(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cue(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hRe(t,e){return cN(t,e.toTimestamp())}function vf(t){return ui(!!t,49232),Kn.fromTimestamp((function(n){const r=Yg(n);return new zi(r.seconds,r.nanos)})(t))}function K$(t,e){return o7(t,e).canonicalString()}function o7(t,e){const n=(function(i){return new Di(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function uue(t){const e=Di.fromString(t);return ui(mue(e),10190,{key:e.toString()}),e}function a7(t,e){return K$(t.databaseId,e.path)}function HD(t,e){const n=uue(e);if(n.get(1)!==t.databaseId.projectId)throw new Yt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Yt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new En(fue(n))}function due(t,e){return K$(t.databaseId,e)}function pRe(t){const e=uue(t);return e.length===4?Di.emptyPath():fue(e)}function l7(t){return new Di(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fue(t){return ui(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function YY(t,e,n){return{name:a7(t,e),fields:n.value.mapValue.fields}}function mRe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$n(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,u){return c.useProto3Json?(ui(u===void 0||typeof u=="string",58123),Qo.fromBase64String(u||"")):(ui(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Qo.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const u=c.code===void 0?kt.UNKNOWN:oue(c.code);return new Yt(u,c.message||"")})(o);n=new lue(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=HD(t,r.document.name),s=vf(r.document.updateTime),o=r.document.createTime?vf(r.document.createTime):Kn.min(),a=new Cl({mapValue:{fields:r.document.fields}}),l=ya.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new I_(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=HD(t,r.document),s=r.readTime?vf(r.readTime):Kn.min(),o=ya.newNoDocument(i,s),a=r.removedTargetIds||[];n=new I_([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=HD(t,r.document),s=r.removedTargetIds||[];n=new I_([],s,i,null)}else{if(!("filter"in e))return $n(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iRe(i,s),a=r.targetId;n=new aue(a,o)}}return n}function gRe(t,e){let n;if(e instanceof Nk)n={update:YY(t,e.key,e.value)};else if(e instanceof j4)n={delete:a7(t,e.key)};else if(e instanceof b0)n={update:YY(t,e.key,e.data),updateMask:TRe(e.fieldMask)};else{if(!(e instanceof tRe))return $n(16599,{Vt:e.type});n={verify:a7(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof BA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dx)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lN)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw $n(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:hRe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$n(27497)})(t,e.precondition)),n}function yRe(t,e){return t&&t.length>0?(ui(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?vf(i.updateTime):vf(s);return o.isEqual(Kn.min())&&(o=vf(s)),new J4e(o,i.transformResults||[])})(n,e)))):[]}function bRe(t,e){return{documents:[due(t,e.path)]}}function wRe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=due(t,i);const s=(function(c){if(c.length!==0)return pue(td.create(c,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(c){if(c.length!==0)return c.map((u=>(function(f){return{field:Sv(f.field),direction:ERe(f.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=s7(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function vRe(t){let e=pRe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ui(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=(function(d){const f=hue(d);return f instanceof td&&Hce(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(m){return new FA(Av(m.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(m.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,M4(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,h=d.values||[];return new aN(h,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(d){const f=!d.before,h=d.values||[];return new aN(h,f)})(n.endAt)),j4e(e,i,o,s,a,"F",l,c)}function xRe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $n(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hue(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Av(n.unaryFilter.field);return zs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Av(n.unaryFilter.field);return zs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Av(n.unaryFilter.field);return zs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Av(n.unaryFilter.field);return zs.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $n(61313);default:return $n(60726)}})(t):t.fieldFilter!==void 0?(function(n){return zs.create(Av(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $n(58110);default:return $n(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return td.create(n.compositeFilter.filters.map((r=>hue(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $n(1026)}})(n.compositeFilter.op))})(t):$n(30097,{filter:t})}function ERe(t){return cRe[t]}function SRe(t){return uRe[t]}function ARe(t){return dRe[t]}function Sv(t){return{fieldPath:t.canonicalString()}}function Av(t){return Yo.fromServerFormat(t.fieldPath)}function pue(t){return t instanceof zs?(function(n){if(n.op==="=="){if(FY(n.value))return{unaryFilter:{field:Sv(n.field),op:"IS_NAN"}};if(PY(n.value))return{unaryFilter:{field:Sv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FY(n.value))return{unaryFilter:{field:Sv(n.field),op:"IS_NOT_NAN"}};if(PY(n.value))return{unaryFilter:{field:Sv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sv(n.field),op:SRe(n.op),value:n.value}}})(t):t instanceof td?(function(n){const r=n.getFilters().map((i=>pue(i)));return r.length===1?r[0]:{compositeFilter:{op:ARe(n.op),filters:r}}})(t):$n(54877,{filter:t})}function TRe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function mue(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,i,s=Kn.min(),o=Kn.min(),a=Qo.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kRe{constructor(e){this.yt=e}}function CRe(t){const e=vRe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?i7(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Re{constructor(){this.Cn=new NRe}addToCollectionParentIndex(e,n){return this.Cn.add(n),It.resolve()}getCollectionParents(e,n){return It.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return It.resolve()}deleteFieldIndex(e,n){return It.resolve()}deleteAllFieldIndexes(e){return It.resolve()}createTargetIndexes(e,n){return It.resolve()}getDocumentsMatchingTarget(e,n){return It.resolve(null)}getIndexType(e,n){return It.resolve(0)}getFieldIndexes(e,n){return It.resolve([])}getNextCollectionGroupToUpdate(e){return It.resolve(null)}getMinOffset(e,n){return It.resolve(Xg.min())}getMinOffsetFromCollectionGroup(e,n){return It.resolve(Xg.min())}updateCollectionGroup(e,n,r){return It.resolve()}updateIndexEntries(e,n){return It.resolve()}}class NRe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new oo(Di.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new oo(Di.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gue=41943040;class Al{static withCacheSize(e){return new Al(e,Al.DEFAULT_COLLECTION_PERCENTILE,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al.DEFAULT_COLLECTION_PERCENTILE=10,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Al.DEFAULT=new Al(gue,Al.DEFAULT_COLLECTION_PERCENTILE,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Al.DISABLED=new Al(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fx(0)}static cr(){return new fx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY="LruGarbageCollector",IRe=1048576;function QY([t,e],[n,r]){const i=xr(t,n);return i===0?xr(e,r):i}class RRe{constructor(e){this.Ir=e,this.buffer=new oo(QY),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QY(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MRe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){nn(JY,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){d2(n)?nn(JY,"Ignoring IndexedDB error during garbage collection: ",n):await u2(n)}await this.Vr(3e5)}))}}class LRe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return It.resolve(R4.ce);const r=new RRe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),It.resolve(ZY)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZY):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(c=Date.now(),xv()<=vr.DEBUG&&nn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),It.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function DRe(t,e){return new LRe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ORe{constructor(){this.changes=new rw((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ya.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?It.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PRe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FRe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&VS(r.mutation,i,oc.empty(),zi.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Sr()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Sr()){const i=by();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=ZE();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=by();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Sr())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=Dp();const o=HS(),a=(function(){return HS()})();return n.forEach(((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof b0)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),VS(u.mutation,c,u.mutation.getFieldMask(),zi.now())):o.set(c.key,oc.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>a.set(c,new PRe(u,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=HS();let i=new is(((o,a)=>o-a)),s=Sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||oc.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Sr()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Zce();u.forEach((f=>{if(!s.has(f)){const h=iue(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return It.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return En.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qce(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):It.resolve(by());let a=LA,l=s;return o.next((c=>It.forEach(c,((u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?It.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,Sr()))).next((u=>({batchId:a,changes:Yce(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new En(n)).next((r=>{let i=ZE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ZE();return this.indexManager.getCollectionParents(e,s).next((a=>It.forEach(a,(l=>{const c=(function(d,f){return new f2(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((u=>{u.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ya.newInvalidDocument(u)))}));let a=ZE();return o.forEach(((l,c)=>{const u=s.get(l);u!==void 0&&VS(u.mutation,c,oc.empty(),zi.now()),P4(n,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BRe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return It.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:vf(i.createTime)}})(n)),It.resolve()}getNamedQuery(e,n){return It.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:CRe(i.bundledQuery),readTime:vf(i.readTime)}})(n)),It.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jRe{constructor(){this.overlays=new is(En.comparator),this.qr=new Map}getOverlay(e,n){return It.resolve(this.overlays.get(n))}getOverlays(e,n){const r=by();return It.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),It.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),It.resolve()}getOverlaysForCollection(e,n,r){const i=by(),s=n.length+1,o=new En(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return It.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new is(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=by(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=by(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return It.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rRe(n,r));let s=this.qr.get(n);s===void 0&&(s=Sr(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Re{constructor(){this.sessionToken=Qo.EMPTY_BYTE_STRING}getSessionToken(e){return It.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,It.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(){this.Qr=new oo(yo.$r),this.Ur=new oo(yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new yo(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new yo(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new En(new Di([])),r=new yo(n,e),i=new yo(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new En(new Di([])),r=new yo(n,e),i=new yo(n,e+1);let s=Sr();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new yo(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return En.comparator(e.key,n.key)||xr(e.Yr,n.Yr)}static Kr(e,n){return xr(e.Yr,n.Yr)||En.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zRe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new oo(yo.$r)}checkEmpty(e){return It.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nRe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new yo(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return It.resolve(o)}lookupMutationBatch(e,n){return It.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return It.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return It.resolve(this.mutationQueue.length===0?$$:this.tr-1)}getAllMutationBatches(e){return It.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yo(n,0),i=new yo(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),It.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new oo(xr);return n.forEach((i=>{const s=new yo(i,0),o=new yo(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),It.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;En.isDocumentKey(s)||(s=s.child(""));const o=new yo(new En(s),0);let a=new oo(xr);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),It.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ui(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return It.forEach(n.mutations,(i=>{const s=new yo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new yo(n,0),i=this.Zr.firstAfterOrEqual(r);return It.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,It.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HRe{constructor(e){this.ri=e,this.docs=(function(){return new is(En.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return It.resolve(r?r.document.mutableCopy():ya.newInvalidDocument(n))}getEntries(e,n){let r=Dp();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ya.newInvalidDocument(i))})),It.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Dp();const o=n.path,a=new En(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y4e(g4e(u),r)<=0||(i.has(u.key)||P4(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return It.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$n(9500)}ii(e,n){return It.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new VRe(this)}getSize(e){return It.resolve(this.size)}}class VRe extends ORe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),It.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class URe{constructor(e){this.persistence=e,this.si=new rw((n=>V$(n)),U$),this.lastRemoteSnapshotVersion=Kn.min(),this.highestTargetId=0,this.oi=0,this._i=new X$,this.targetCount=0,this.ai=fx.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),It.resolve()}getLastRemoteSnapshotVersion(e){return It.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return It.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),It.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),It.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fx(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,It.resolve()}updateTargetData(e,n){return this.Pr(n),It.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,It.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),It.waitFor(s).next((()=>i))}getTargetCount(e){return It.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return It.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),It.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),It.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),It.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return It.resolve(r)}containsKey(e,n){return It.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e,n){this.ui={},this.overlays={},this.ci=new R4(0),this.li=!1,this.li=!0,this.hi=new $Re,this.referenceDelegate=e(this),this.Pi=new URe(this),this.indexManager=new _Re,this.remoteDocumentCache=(function(i){return new HRe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new kRe(n),this.Ii=new BRe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jRe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new zRe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){nn("MemoryPersistence","Starting transaction:",e);const i=new WRe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return It.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class WRe extends w4e{constructor(e){super(),this.currentSequenceNumber=e}}class Y${constructor(e){this.persistence=e,this.Ri=new X$,this.Vi=null}static mi(e){return new Y$(e)}get fi(){if(this.Vi)return this.Vi;throw $n(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),It.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),It.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),It.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return It.forEach(this.fi,(r=>{const i=En.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,Kn.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return It.or([()=>It.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class uN{constructor(e,n){this.persistence=e,this.pi=new rw((r=>E4e(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=DRe(this,n)}static mi(e,n){return new uN(e,n)}Ei(){}di(e){return It.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return It.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?It.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,Kn.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),It.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),It.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),It.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),It.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=C_(e.data.value)),n}br(e,n,r){return It.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return It.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Sr(),i=Sr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Z$(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qRe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GRe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BNe()?8:v4e(Ca())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new qRe;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(xv()<=vr.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",Ev(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),It.resolve()):(xv()<=vr.DEBUG&&nn("QueryEngine","Query:",Ev(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(xv()<=vr.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",Ev(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wf(n))):It.resolve())}ys(e,n){if(zY(n))return It.resolve(null);let r=wf(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=i7(n,null,"F"),r=wf(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=Sr(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,i7(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,i){return zY(n)||i.isEqual(Kn.min())?It.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?It.resolve(null):(xv()<=vr.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ev(n)),this.vs(e,o,n,m4e(i,LA)).next((a=>a)))}))}Ds(e,n){let r=new oo(Kce(e));return n.forEach(((i,s)=>{P4(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return xv()<=vr.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",Ev(n)),this.ps.getDocumentsMatchingQuery(e,n,Xg.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$="LocalStore",KRe=3e8;class XRe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new is(xr),this.xs=new rw((s=>V$(s)),U$),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FRe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YRe(t,e,n,r){return new XRe(t,e,n,r)}async function bue(t,e){const n=Zn(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=Sr();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function ZRe(t,e){const n=Zn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,u){const d=c.batch,f=d.keys();let h=It.resolve();return f.forEach((m=>{h=h.next((()=>u.getEntry(l,m))).next((y=>{const w=c.docVersions.get(m);ui(w!==null,48541),y.version.compareTo(w)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))}))})),h.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Sr();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function wue(t){const e=Zn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function JRe(t,e){const n=Zn(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d))));let h=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(Qo.EMPTY_BYTE_STRING,Kn.min()).withLastLimboFreeSnapshotVersion(Kn.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,r)),i=i.insert(d,h),(function(y,w,b){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=KRe?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(f,h,u)&&a.push(n.Pi.updateTargetData(s,h))}));let l=Dp(),c=Sr();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))})),a.push(QRe(s,o,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(Kn.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next((d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(u)}return It.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function QRe(t,e,n){let r=Sr(),i=Sr();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=Dp();return n.forEach(((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Kn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):nn(J$,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function eMe(t,e){const n=Zn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$$),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function tMe(t,e){const n=Zn(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,It.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new vg(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function c7(t,e,n){const r=Zn(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!d2(o))throw o;nn(J$,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function eZ(t,e,n){const r=Zn(t);let i=Kn.min(),s=Sr();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,u){const d=Zn(l),f=d.xs.get(u);return f!==void 0?It.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,u)})(r,o,wf(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Kn.min(),n?s:Sr()))).next((a=>(nMe(r,z4e(e),a),{documents:a,Qs:s})))))}function nMe(t,e,n){let r=t.Os.get(e)||Kn.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class tZ{constructor(){this.activeTargetIds=G4e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rMe{constructor(){this.Mo=new tZ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tZ,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iMe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ="ConnectivityMonitor";class rZ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nn(nZ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){nn(nZ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q3=null;function u7(){return Q3===null?Q3=(function(){return 268435456+Math.round(2147483648*Math.random())})():Q3++,"0x"+Q3.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="RestConnection",sMe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oMe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===sN?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=u7(),a=this.zo(e,n.toUriEncodedString());nn(VD,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=Gf(c);return this.Jo(e,a,l,r,u).then((d=>(nn(VD,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw ax(VD,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+c2})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=sMe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="WebChannelConnection";class lMe extends oMe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=u7();return new Promise(((a,l)=>{const c=new xce;c.setWithCredentials(!0),c.listenOnce(Ece.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case k_.NO_ERROR:const d=c.getResponseJson();nn(ia,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case k_.TIMEOUT:nn(ia,`RPC '${e}' ${o} timed out`),l(new Yt(kt.DEADLINE_EXCEEDED,"Request time out"));break;case k_.HTTP_ERROR:const f=c.getStatus();if(nn(ia,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const y=(function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(kt).indexOf(E)>=0?E:kt.UNKNOWN})(m.status);l(new Yt(y,m.message))}else l(new Yt(kt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Yt(kt.UNAVAILABLE,"Connection failed."));break;default:$n(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{nn(ia,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(i);nn(ia,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const i=u7(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Tce(),a=Ace(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");nn(ia,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let f=!1,h=!1;const m=new aMe({Yo:w=>{h?nn(ia,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(nn(ia,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),nn(ia,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},Zo:()=>d.close()}),y=(w,b,E)=>{w.listen(b,(A=>{try{E(A)}catch(x){setTimeout((()=>{throw x}),0)}}))};return y(d,YE.EventType.OPEN,(()=>{h||(nn(ia,`RPC '${e}' stream ${i} transport opened.`),m.o_())})),y(d,YE.EventType.CLOSE,(()=>{h||(h=!0,nn(ia,`RPC '${e}' stream ${i} transport closed`),m.a_(),this.E_(d))})),y(d,YE.EventType.ERROR,(w=>{h||(h=!0,ax(ia,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),m.a_(new Yt(kt.UNAVAILABLE,"The operation could not be completed")))})),y(d,YE.EventType.MESSAGE,(w=>{var b;if(!h){const E=w.data[0];ui(!!E,16349);const A=E,x=(A==null?void 0:A.error)||((b=A[0])==null?void 0:b.error);if(x){nn(ia,`RPC '${e}' stream ${i} received error:`,x);const T=x.status;let R=(function(N){const L=Ds[N];if(L!==void 0)return oue(L)})(T),k=x.message;R===void 0&&(R=kt.INTERNAL,k="Unknown error status: "+T+" with message "+x.message),h=!0,m.a_(new Yt(R,k)),d.close()}else nn(ia,`RPC '${e}' stream ${i} received:`,E),m.u_(E)}})),y(a,Sce.STAT_EVENT,(w=>{w.stat===ZP.PROXY?nn(ia,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===ZP.NOPROXY&&nn(ia,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{m.__()}),0),m}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function UD(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){return new fRe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&nn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ="PersistentStream";class xue{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vue(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===kt.RESOURCE_EXHAUSTED?(Lp(n.toString()),Lp("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===kt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Yt(kt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return nn(iZ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(nn(iZ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cMe extends xue{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mRe(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Kn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Kn.min():o.readTime?vf(o.readTime):Kn.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=l7(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=n7(l)?{documents:bRe(s,l)}:{query:wRe(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cue(s,o.resumeToken);const c=s7(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Kn.min())>0){a.readTime=cN(s,o.snapshotVersion.toTimestamp());const c=s7(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=xRe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=l7(this.serializer),n.removeTarget=e,this.q_(n)}}class uMe extends xue{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ui(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ui(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ui(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yRe(e.writeResults,e.commitTime),r=vf(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=l7(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>gRe(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMe{}class fMe extends dMe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Yt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,o7(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Yt(kt.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,o7(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Yt(kt.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hMe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lp(n),this.aa=!1):nn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="RemoteStore";class pMe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{iw(this)&&(nn(Tb,"Restarting streams for network reachability change."),await(async function(l){const c=Zn(l);c.Ea.add(4),await Rk(c),c.Ra.set("Unknown"),c.Ea.delete(4),await H4(c)})(this))}))})),this.Ra=new hMe(r,i)}}async function H4(t){if(iw(t))for(const e of t.da)await e(!0)}async function Rk(t){for(const e of t.da)await e(!1)}function Eue(t,e){const n=Zn(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nz(n)?tz(n):h2(n).O_()&&ez(n,e))}function Q$(t,e){const n=Zn(t),r=h2(n);n.Ia.delete(e),r.O_()&&Sue(n,e),n.Ia.size===0&&(r.O_()?r.L_():iw(n)&&n.Ra.set("Unknown"))}function ez(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Kn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}h2(t).Y_(e)}function Sue(t,e){t.Va.Ue(e),h2(t).Z_(e)}function tz(t){t.Va=new lRe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),h2(t).start(),t.Ra.ua()}function nz(t){return iw(t)&&!h2(t).x_()&&t.Ia.size>0}function iw(t){return Zn(t).Ea.size===0}function Aue(t){t.Va=void 0}async function mMe(t){t.Ra.set("Online")}async function gMe(t){t.Ia.forEach(((e,n)=>{ez(t,e)}))}async function yMe(t,e){Aue(t),nz(t)?(t.Ra.ha(e),tz(t)):t.Ra.set("Unknown")}async function bMe(t,e,n){if(t.Ra.set("Online"),e instanceof lue&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){nn(Tb,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dN(t,r)}else if(e instanceof I_?t.Va.Ze(e):e instanceof aue?t.Va.st(e):t.Va.tt(e),!n.isEqual(Kn.min()))try{const r=await wue(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Qo.EMPTY_BYTE_STRING,u.snapshotVersion)),Sue(s,l);const d=new vg(u.target,l,c,u.sequenceNumber);ez(s,d)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){nn(Tb,"Failed to raise snapshot:",r),await dN(t,r)}}async function dN(t,e,n){if(!d2(e))throw e;t.Ea.add(1),await Rk(t),t.Ra.set("Offline"),n||(n=()=>wue(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nn(Tb,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await H4(t)}))}function Tue(t,e){return e().catch((n=>dN(t,n,e)))}async function V4(t){const e=Zn(t),n=Qg(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$$;for(;wMe(e);)try{const i=await eMe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,vMe(e,i)}catch(i){await dN(e,i)}kue(e)&&Cue(e)}function wMe(t){return iw(t)&&t.Ta.length<10}function vMe(t,e){t.Ta.push(e);const n=Qg(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kue(t){return iw(t)&&!Qg(t).x_()&&t.Ta.length>0}function Cue(t){Qg(t).start()}async function xMe(t){Qg(t).ra()}async function EMe(t){const e=Qg(t);for(const n of t.Ta)e.ea(n.mutations)}async function SMe(t,e,n){const r=t.Ta.shift(),i=q$.from(r,e,n);await Tue(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await V4(t)}async function AMe(t,e){e&&Qg(t).X_&&await(async function(r,i){if((function(o){return sRe(o)&&o!==kt.ABORTED})(i.code)){const s=r.Ta.shift();Qg(r).B_(),await Tue(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await V4(r)}})(t,e),kue(t)&&Cue(t)}async function sZ(t,e){const n=Zn(t);n.asyncQueue.verifyOperationInProgress(),nn(Tb,"RemoteStore received new credentials");const r=iw(n);n.Ea.add(3),await Rk(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await H4(n)}async function TMe(t,e){const n=Zn(t);e?(n.Ea.delete(2),await H4(n)):e||(n.Ea.add(2),await Rk(n),n.Ra.set("Unknown"))}function h2(t){return t.ma||(t.ma=(function(n,r,i){const s=Zn(n);return s.sa(),new cMe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:mMe.bind(null,t),t_:gMe.bind(null,t),r_:yMe.bind(null,t),H_:bMe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),nz(t)?tz(t):t.Ra.set("Unknown")):(await t.ma.stop(),Aue(t))}))),t.ma}function Qg(t){return t.fa||(t.fa=(function(n,r,i){const s=Zn(n);return s.sa(),new uMe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xMe.bind(null,t),r_:AMe.bind(null,t),ta:EMe.bind(null,t),na:SMe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await V4(t)):(await t.fa.stop(),t.Ta.length>0&&(nn(Tb,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rz(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Yt(kt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iz(t,e){if(Lp("AsyncQueue",`${e}: ${t}`),d2(t))return new Yt(kt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{static emptySet(e){return new i1(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||En.comparator(n.key,r.key):(n,r)=>En.comparator(n.key,r.key),this.keyedMap=ZE(),this.sortedSet=new is(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof i1)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new i1;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(){this.ga=new is(En.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$n(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class hx{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new hx(e,n,i1.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&O4(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kMe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class CMe{constructor(){this.queries=aZ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Zn(n),s=i.queries;i.queries=aZ(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new Yt(kt.ABORTED,"Firestore shutting down"))}}function aZ(){return new rw((t=>Gce(t)),O4)}async function sz(t,e){const n=Zn(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new kMe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=iz(o,`Initialization of query '${Ev(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&az(n)}async function oz(t,e){const n=Zn(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _Me(t,e){const n=Zn(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&az(n)}function NMe(t,e,n){const r=Zn(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function az(t){t.Ca.forEach((e=>{e.next()}))}var d7,lZ;(lZ=d7||(d7={})).Ma="default",lZ.Cache="cache";class lz{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hx(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=hx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==d7.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e){this.key=e}}class Nue{constructor(e){this.key=e}}class IMe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sr(),this.mutatedKeys=Sr(),this.eu=Kce(e),this.tu=new i1(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new oZ,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,d)=>{const f=i.get(u),h=P4(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),y=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let w=!1;f&&h?f.data.isEqual(h.data)?m!==y&&(r.track({type:3,doc:h}),w=!0):this.su(f,h)||(r.track({type:2,doc:h}),w=!0,(l&&this.eu(h,l)>0||c&&this.eu(h,c)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),w=!0):f&&!h&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(h?(o=o.add(h),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,d)=>(function(h,m){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $n(20277,{Rt:w})}};return y(h)-y(m)})(u.type,d.type)||this.eu(u.doc,d.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new hx(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oZ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sr(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Nue(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new _ue(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Sr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return hx.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cz="SyncEngine";class RMe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MMe{constructor(e){this.key=e,this.hu=!1}}class LMe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rw((a=>Gce(a)),O4),this.Iu=new Map,this.Eu=new Set,this.du=new is(En.comparator),this.Au=new Map,this.Ru=new X$,this.Vu={},this.mu=new Map,this.fu=fx.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DMe(t,e,n=!0){const r=Oue(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Iue(r,e,n,!0),i}async function OMe(t,e){const n=Oue(t);await Iue(n,e,!0,!1)}async function Iue(t,e,n,r){const i=await tMe(t.localStore,wf(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await PMe(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Eue(t.remoteStore,i),a}async function PMe(t,e,n,r,i){t.pu=(d,f,h)=>(async function(y,w,b,E){let A=w.view.ru(b);A.Cs&&(A=await eZ(y.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,A))));const x=E&&E.targetChanges.get(w.targetId),T=E&&E.targetMismatches.get(w.targetId)!=null,R=w.view.applyChanges(A,y.isPrimaryClient,x,T);return uZ(y,w.targetId,R.au),R.snapshot})(t,d,f,h);const s=await eZ(t.localStore,e,!0),o=new IMe(e,s.Qs),a=o.ru(s.documents),l=Ik.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);uZ(t,n,c.au);const u=new RMe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function FMe(t,e,n){const r=Zn(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!O4(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await c7(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Q$(r.remoteStore,i.targetId),f7(r,i.targetId)})).catch(u2)):(f7(r,i.targetId),await c7(r.localStore,i.targetId,!0))}async function BMe(t,e){const n=Zn(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Q$(n.remoteStore,r.targetId))}async function jMe(t,e,n){const r=qMe(t);try{const i=await(function(o,a){const l=Zn(o),c=zi.now(),u=a.reduce(((h,m)=>h.add(m.key)),Sr());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(h=>{let m=Dp(),y=Sr();return l.Ns.getEntries(h,u).next((w=>{m=w,m.forEach(((b,E)=>{E.isValidDocument()||(y=y.add(b))}))})).next((()=>l.localDocuments.getOverlayedDocuments(h,m))).next((w=>{d=w;const b=[];for(const E of a){const A=eRe(E,d.get(E.key).overlayedDocument);A!=null&&b.push(new b0(E.key,A,jce(A.value.mapValue),Xa.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,b,a)})).next((w=>{f=w;const b=w.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(h,w.batchId,b)}))})).then((()=>({batchId:f.batchId,changes:Yce(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new is(xr)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(r,i.batchId,n),await Mk(r,i.changes),await V4(r.remoteStore)}catch(i){const s=iz(i,"Failed to persist write");n.reject(s)}}async function Rue(t,e){const n=Zn(t);try{const r=await JRe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(ui(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ui(o.hu,14607):i.removedDocuments.size>0&&(ui(o.hu,42227),o.hu=!1))})),await Mk(n,r,e)}catch(r){await u2(r)}}function cZ(t,e,n){const r=Zn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Zn(o);l.onlineState=a;let c=!1;l.queries.forEach(((u,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)})),c&&az(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $Me(t,e,n){const r=Zn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new is(En.comparator);o=o.insert(s,ya.newNoDocument(s,Kn.min()));const a=Sr().add(s),l=new $4(Kn.min(),new Map,new is(xr),o,a);await Rue(r,l),r.du=r.du.remove(s),r.Au.delete(e),uz(r)}else await c7(r.localStore,e,!1).then((()=>f7(r,e,n))).catch(u2)}async function zMe(t,e){const n=Zn(t),r=e.batch.batchId;try{const i=await ZRe(n.localStore,e);Lue(n,r,null),Mue(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mk(n,i)}catch(i){await u2(i)}}async function HMe(t,e,n){const r=Zn(t);try{const i=await(function(o,a){const l=Zn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next((d=>(ui(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);Lue(r,e,n),Mue(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mk(r,i)}catch(i){await u2(i)}}function Mue(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Lue(t,e,n){const r=Zn(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function f7(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Due(t,r)}))}function Due(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Q$(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uz(t))}function uZ(t,e,n){for(const r of n)r instanceof _ue?(t.Ru.addReference(r.key,e),VMe(t,r)):r instanceof Nue?(nn(cz,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Due(t,r.key)):$n(19791,{wu:r})}function VMe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(nn(cz,"New document in limbo: "+n),t.Eu.add(r),uz(t))}function uz(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new En(Di.fromString(e)),r=t.fu.next();t.Au.set(r,new MMe(n)),t.du=t.du.insert(n,r),Eue(t.remoteStore,new vg(wf(D4(n.path)),r,"TargetPurposeLimboResolution",R4.ce))}}async function Mk(t,e,n){const r=Zn(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Z$.As(l.targetId,c);s.push(d)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,c){const u=Zn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>It.forEach(c,(f=>It.forEach(f.Es,(h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h))).next((()=>It.forEach(f.ds,(h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))))))}catch(d){if(!d2(d))throw d;nn(J$,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ms.get(f),m=h.snapshotVersion,y=h.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(f,y)}}})(r.localStore,s))}async function UMe(t,e){const n=Zn(t);if(!n.currentUser.isEqual(e)){nn(cz,"User change. New user:",e.toKey());const r=await bue(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new Yt(kt.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mk(n,r.Ls)}}function WMe(t,e){const n=Zn(t),r=n.Au.get(e);if(r&&r.hu)return Sr().add(r.key);{let i=Sr();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Oue(t){const e=Zn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rue.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WMe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$Me.bind(null,e),e.Pu.H_=_Me.bind(null,e.eventManager),e.Pu.yu=NMe.bind(null,e.eventManager),e}function qMe(t){const e=Zn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zMe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HMe.bind(null,e),e}class fN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=z4(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YRe(this.persistence,new GRe,e.initialUser,this.serializer)}Cu(e){return new yue(Y$.mi,this.serializer)}Du(e){return new rMe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fN.provider={build:()=>new fN};class GMe extends fN{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ui(this.persistence.referenceDelegate instanceof uN,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MRe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Al.withCacheSize(this.cacheSizeBytes):Al.DEFAULT;return new yue((r=>uN.mi(r,n)),this.serializer)}}class h7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cZ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UMe.bind(null,this.syncEngine),await TMe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new CMe})()}createDatastore(e){const n=z4(e.databaseInfo.databaseId),r=(function(s){return new lMe(s)})(e.databaseInfo);return(function(s,o,a,l){return new fMe(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new pMe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>cZ(this.syncEngine,n,0)),(function(){return rZ.v()?new rZ:new iMe})())}createSyncEngine(e,n){return(function(i,s,o,a,l,c,u){const d=new LMe(i,s,o,a,l,c);return u&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=Zn(i);nn(Tb,"RemoteStore shutting down."),s.Ea.add(5),await Rk(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}h7.provider={build:()=>new h7};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lp("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="FirestoreClient";class KMe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ma.UNAUTHENTICATED,this.clientId=j$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{nn(e0,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(nn(e0,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=iz(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function WD(t,e){t.asyncQueue.verifyOperationInProgress(),nn(e0,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await bue(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function dZ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XMe(t);nn(e0,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>sZ(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>sZ(e.remoteStore,i))),t._onlineComponents=e}async function XMe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nn(e0,"Using user provided OfflineComponentProvider");try{await WD(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===kt.FAILED_PRECONDITION||i.code===kt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ax("Error using user provided cache. Falling back to memory cache: "+n),await WD(t,new fN)}}else nn(e0,"Using default OfflineComponentProvider"),await WD(t,new GMe(void 0));return t._offlineComponents}async function Pue(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nn(e0,"Using user provided OnlineComponentProvider"),await dZ(t,t._uninitializedComponentsProvider._online)):(nn(e0,"Using default OnlineComponentProvider"),await dZ(t,new h7))),t._onlineComponents}function YMe(t){return Pue(t).then((e=>e.syncEngine))}async function hN(t){const e=await Pue(t),n=e.eventManager;return n.onListen=DMe.bind(null,e.syncEngine),n.onUnlisten=FMe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OMe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BMe.bind(null,e.syncEngine),n}function ZMe(t,e,n={}){const r=new xp;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new dz({next:f=>{u.Nu(),o.enqueueAndForget((()=>oz(s,d)));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Yt(kt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Yt(kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new lz(D4(a.path),u,{includeMetadataChanges:!0,qa:!0});return sz(s,d)})(await hN(t),t.asyncQueue,e,n,r))),r.promise}function JMe(t,e,n={}){const r=new xp;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new dz({next:f=>{u.Nu(),o.enqueueAndForget((()=>oz(s,d))),f.fromCache&&l.source==="server"?c.reject(new Yt(kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new lz(a,u,{includeMetadataChanges:!0,qa:!0});return sz(s,d)})(await hN(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fue(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fZ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bue="firestore.googleapis.com",hZ=!0;class pZ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Yt(kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bue,this.ssl=hZ}else this.host=e.host,this.ssl=e.ssl??hZ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gue;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IRe)throw new Yt(kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p4e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fue(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Yt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Yt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Yt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U4{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pZ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Yt(kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Yt(kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pZ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new i4e;switch(r.type){case"firstParty":return new l4e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Yt(kt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fZ.get(n);r&&(nn("ComponentProvider","Removing Datastore"),fZ.delete(n),r.terminate())})(this),Promise.resolve()}}function QMe(t,e,n,r={}){var c;t=Ka(t,U4);const i=Gf(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(C4(`https://${a}`),_4("Firestore",!0)),s.host!==Bue&&s.host!==a&&ax("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Gg(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=ma.MOCK_USER;else{u=mce(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Yt(kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ma(f)}t._authCredentials=new s4e(new Cce(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new w0(this.firestore,e,this._query)}}class fs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}toJSON(){return{type:fs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_k(n,fs._jsonSchema))return new fs(e,r||null,new En(Di.fromString(n.referencePath)))}}fs._jsonSchemaVersion="firestore/documentReference/1.0",fs._jsonSchema={type:Vs("string",fs._jsonSchemaVersion),referencePath:Vs("string")};class Pg extends w0{constructor(e,n,r){super(e,n,D4(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new En(e))}withConverter(e){return new Pg(this.firestore,e,this._path)}}function Ai(t,e,...n){if(t=ti(t),_ce("collection","path",e),t instanceof U4){const r=Di.fromString(e,...n);return CY(r),new Pg(t,null,r)}{if(!(t instanceof fs||t instanceof Pg))throw new Yt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Di.fromString(e,...n));return CY(r),new Pg(t.firestore,null,r)}}function Bn(t,e,...n){if(t=ti(t),arguments.length===1&&(e=j$.newId()),_ce("doc","path",e),t instanceof U4){const r=Di.fromString(e,...n);return kY(r),new fs(t,null,new En(r))}{if(!(t instanceof fs||t instanceof Pg))throw new Yt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Di.fromString(e,...n));return kY(r),new fs(t.firestore,t instanceof Pg?t.converter:null,new En(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mZ="AsyncQueue";class gZ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vue(this,"async_queue_retry"),this._c=()=>{const r=UD();r&&nn(mZ,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=UD();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=UD();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new xp;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!d2(e))throw e;nn(mZ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Lp("INTERNAL UNHANDLED ERROR: ",yZ(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rz.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&$n(47125,{Pc:yZ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yZ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class Df extends U4{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gZ,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gZ(e),this._firestoreClient=void 0,await e}}}function eLe(t,e){const n=typeof t=="object"?t:N4(),r=typeof t=="string"?t:sN,i=Ck(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=D$("firestore");s&&QMe(i,...s)}return i}function Lk(t){if(t._terminated)throw new Yt(kt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tLe(t),t._firestoreClient}function tLe(t){var r,i,s;const e=t._freezeSettings(),n=(function(a,l,c,u){return new T4e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Fue(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new KMe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hc(Qo.fromBase64String(e))}catch(n){throw new Yt(kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hc(Qo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_k(e,Hc._jsonSchema))return Hc.fromBase64String(e.bytes)}}Hc._jsonSchemaVersion="firestore/bytes/1.0",Hc._jsonSchema={type:Vs("string",Hc._jsonSchemaVersion),bytes:Vs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Yt(kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Yt(kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Yt(kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xr(this._lat,e._lat)||xr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xf._jsonSchemaVersion}}static fromJSON(e){if(_k(e,xf._jsonSchema))return new xf(e.latitude,e.longitude)}}xf._jsonSchemaVersion="firestore/geoPoint/1.0",xf._jsonSchema={type:Vs("string",xf._jsonSchemaVersion),latitude:Vs("number"),longitude:Vs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ef._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_k(e,Ef._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ef(e.vectorValues);throw new Yt(kt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ef._jsonSchemaVersion="firestore/vectorValue/1.0",Ef._jsonSchema={type:Vs("string",Ef._jsonSchemaVersion),vectorValues:Vs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nLe=/^__.*__$/;class rLe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new b0(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nk(e,this.data,n,this.fieldTransforms)}}class jue{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new b0(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $ue(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $n(40011,{Ac:t})}}class W4{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new W4({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pN(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($ue(this.Ac)&&nLe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iLe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||z4(e)}Cc(e,n,r,i=!1){return new W4({Ac:e,methodName:n,Dc:r,path:Yo.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pk(t){const e=t._freezeSettings(),n=z4(t._databaseId);return new iLe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fz(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);mz("Data must be an object, but it was:",o,r);const a=Vue(r,o);let l,c;if(s.merge)l=new oc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=p7(e,d,n);if(!o.contains(f))throw new Yt(kt.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Wue(u,f)||u.push(f)}l=new oc(u),c=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,c=o.fieldTransforms;return new rLe(new Cl(a),l,c)}class Fk extends Ok{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fk}}function sLe(t,e,n){return new W4({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hz extends Ok{_toFieldTransform(e){return new rue(e.path,new BA)}isEqual(e){return e instanceof hz}}class pz extends Ok{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=sLe(this,e,!0),r=this.vc.map((s=>p2(s,n))),i=new dx(r);return new rue(e.path,i)}isEqual(e){return e instanceof pz&&Gg(this.vc,e.vc)}}function zue(t,e,n,r){const i=t.Cc(1,e,n);mz("Data must be an object, but it was:",i,r);const s=[],o=Cl.empty();y0(r,((l,c)=>{const u=gz(e,l,n);c=ti(c);const d=i.yc(u);if(c instanceof Fk)s.push(u);else{const f=p2(c,d);f!=null&&(s.push(u),o.set(u,f))}}));const a=new oc(s);return new jue(o,a,i.fieldTransforms)}function Hue(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[p7(e,r,n)],l=[i];if(s.length%2!=0)throw new Yt(kt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(p7(e,s[f])),l.push(s[f+1]);const c=[],u=Cl.empty();for(let f=a.length-1;f>=0;--f)if(!Wue(c,a[f])){const h=a[f];let m=l[f];m=ti(m);const y=o.yc(h);if(m instanceof Fk)c.push(h);else{const w=p2(m,y);w!=null&&(c.push(h),u.set(h,w))}}const d=new oc(c);return new jue(u,d,o.fieldTransforms)}function oLe(t,e,n,r=!1){return p2(n,t.Cc(r?4:3,e))}function p2(t,e){if(Uue(t=ti(t)))return mz("Unsupported field value:",e,t),Vue(t,e);if(t instanceof Ok)return(function(r,i){if(!$ue(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=p2(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K4e(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zi.fromDate(r);return{timestampValue:cN(i.serializer,s)}}if(r instanceof zi){const s=new zi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cN(i.serializer,s)}}if(r instanceof xf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hc)return{bytesValue:cue(i.serializer,r._byteString)};if(r instanceof fs){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:K$(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ef)return(function(o,a){return{mapValue:{fields:{[Fce]:{stringValue:Bce},[oN]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return W$(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${I4(r)}`)})(t,e)}function Vue(t,e){const n={};return Rce(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):y0(t,((r,i)=>{const s=p2(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function Uue(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zi||t instanceof xf||t instanceof Hc||t instanceof fs||t instanceof Ok||t instanceof Ef)}function mz(t,e,n){if(!Uue(n)||!Nce(n)){const r=I4(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function p7(t,e,n){if((e=ti(e))instanceof Dk)return e._internalPath;if(typeof e=="string")return gz(t,e);throw pN("Field path arguments must be of type string or ",t,!1,void 0,n)}const aLe=new RegExp("[~\\*/\\[\\]]");function gz(t,e,n){if(e.search(aLe)>=0)throw pN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dk(...e.split("."))._internalPath}catch{throw pN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pN(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Yt(kt.INVALID_ARGUMENT,a+t+l)}function Wue(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class que{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lLe extends que{data(){return super.data()}}function q4(t,e){return typeof e=="string"?gz(t,e):e instanceof Dk?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gue(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Yt(kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yz{}class Kue extends yz{}function No(t,e,...n){let r=[];e instanceof yz&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((l=>l instanceof bz)).length,a=s.filter((l=>l instanceof G4)).length;if(o>1||o>0&&a>0)throw new Yt(kt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class G4 extends Kue{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new G4(e,n,r)}_apply(e){const n=this._parse(e);return Xue(e._query,n),new w0(e.firestore,e.converter,r7(e._query,n))}_parse(e){const n=Pk(e.firestore);return(function(s,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Yt(kt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){vZ(d,u);const m=[];for(const y of d)m.push(wZ(l,s,y));f={arrayValue:{values:m}}}else f=wZ(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||vZ(d,u),f=oLe(a,o,d,u==="in"||u==="not-in");return zs.create(c,u,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function au(t,e,n){const r=e,i=q4("where",t);return G4._create(i,r,n)}class bz extends yz{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bz(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:td.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Xue(o,l),o=r7(o,l)})(e._query,n),new w0(e.firestore,e.converter,r7(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wz extends Kue{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wz(e,n)}_apply(e){const n=(function(i,s,o){if(i.startAt!==null)throw new Yt(kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Yt(kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new FA(s,o)})(e._query,this._field,this._direction);return new w0(e.firestore,e.converter,(function(i,s){const o=i.explicitOrderBy.concat([s]);return new f2(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function m2(t,e="asc"){const n=e,r=q4("orderBy",t);return wz._create(r,n)}function wZ(t,e,n){if(typeof(n=ti(n))=="string"){if(n==="")throw new Yt(kt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qce(e)&&n.indexOf("/")!==-1)throw new Yt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Di.fromString(n));if(!En.isDocumentKey(r))throw new Yt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OY(t,new En(r))}if(n instanceof fs)return OY(t,n._key);throw new Yt(kt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${I4(n)}.`)}function vZ(t,e){if(!Array.isArray(t)||t.length===0)throw new Yt(kt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xue(t,e){const n=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Yt(kt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Yt(kt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cLe{convertValue(e,n="none"){switch(Jg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $n(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return y0(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[oN].arrayValue)==null?void 0:i.values)==null?void 0:s.map((o=>Es(o.doubleValue)));return new Ef(n)}convertGeoPoint(e){return new xf(Es(e.latitude),Es(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=L4(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(DA(e));default:return null}}convertTimestamp(e){const n=Yg(e);return new zi(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Di.fromString(e);ui(mue(r),9688,{name:e});const i=new OA(r.get(1),r.get(3)),s=new En(r.popFirst(5));return i.isEqual(n)||Lp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class QE{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yy extends que{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new R_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(kt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Yy._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Yy._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yy._jsonSchema={type:Vs("string",Yy._jsonSchemaVersion),bundleSource:Vs("string","DocumentSnapshot"),bundleName:Vs("string"),bundle:Vs("string")};class R_ extends Yy{data(e={}){return super.data(e)}}class Zy{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new QE(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new R_(this._firestore,this._userDataWriter,r.key,r,new QE(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Yt(kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new R_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new QE(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new R_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new QE(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:uLe(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(kt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=j$.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uLe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $n(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){t=Ka(t,fs);const e=Ka(t.firestore,Df);return ZMe(Lk(e),t._key).then((n=>Yue(e,t,n)))}Zy._jsonSchemaVersion="firestore/querySnapshot/1.0",Zy._jsonSchema={type:Vs("string",Zy._jsonSchemaVersion),bundleSource:Vs("string","QuerySnapshot"),bundleName:Vs("string"),bundle:Vs("string")};class xz extends cLe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}function Xu(t){t=Ka(t,w0);const e=Ka(t.firestore,Df),n=Lk(e),r=new xz(e);return Gue(t._query),JMe(n,t._query).then((i=>new Zy(e,r,t,i)))}function M_(t,e,n){t=Ka(t,fs);const r=Ka(t.firestore,Df),i=vz(t.converter,e,n);return Bk(r,[fz(Pk(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xa.none())])}function Qi(t,e,n,...r){t=Ka(t,fs);const i=Ka(t.firestore,Df),s=Pk(i);let o;return o=typeof(e=ti(e))=="string"||e instanceof Dk?Hue(s,"updateDoc",t._key,e,n,r):zue(s,"updateDoc",t._key,e),Bk(i,[o.toMutation(t._key,Xa.exists(!0))])}function sw(t){return Bk(Ka(t.firestore,Df),[new j4(t._key,Xa.none())])}function ow(t,e){const n=Ka(t.firestore,Df),r=Bn(t),i=vz(t.converter,e);return Bk(n,[fz(Pk(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xa.exists(!1))]).then((()=>r))}function Of(t,...e){var l,c,u;t=ti(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bZ(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bZ(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(c=d.error)==null?void 0:c.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof fs)o=Ka(t.firestore,Df),a=D4(t._key.path),s={next:d=>{e[r]&&e[r](Yue(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Ka(t,w0);o=Ka(d.firestore,Df),a=d._query;const f=new xz(o);s={next:h=>{e[r]&&e[r](new Zy(o,f,d,h))},error:e[r+1],complete:e[r+2]},Gue(t._query)}return(function(f,h,m,y){const w=new dz(y),b=new lz(h,w,m);return f.asyncQueue.enqueueAndForget((async()=>sz(await hN(f),b))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>oz(await hN(f),b)))}})(Lk(o),a,i,s)}function Bk(t,e){return(function(r,i){const s=new xp;return r.asyncQueue.enqueueAndForget((async()=>jMe(await YMe(r),i,s))),s.promise})(Lk(t),e)}function Yue(t,e,n){const r=n.docs.get(e._key),i=new xz(t);return new Yy(t,i,e._key,r,new QE(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dLe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pk(e)}set(e,n,r){this._verifyNotCommitted();const i=qD(e,this._firestore),s=vz(i.converter,n,r),o=fz(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Xa.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qD(e,this._firestore);let o;return o=typeof(n=ti(n))=="string"||n instanceof Dk?Hue(this._dataReader,"WriteBatch.update",s._key,n,r,i):zue(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Xa.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qD(e,this._firestore);return this._mutations=this._mutations.concat(new j4(n._key,Xa.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yt(kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qD(t,e){if((t=ti(t)).firestore!==e)throw new Yt(kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(){return new Fk("deleteField")}function fLe(){return new hz("serverTimestamp")}function px(...t){return new pz("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){return Lk(t=Ka(t,Df)),new dLe(t,(e=>Bk(t,e)))}(function(e,n=!0){(function(i){c2=i})(nw),Kg(new Rp("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Df(new o4e(r.getProvider("auth-internal")),new c4e(o,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Yt(kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new OA(c.options.projectId,u)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),Jc(EY,SY,e),Jc(EY,SY,"esm2020")})();function Zue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jue=Zue,Que=new Tk("auth","Firebase",Zue());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new O$("@firebase/auth");function hLe(t,...e){mN.logLevel<=vr.WARN&&mN.warn(`Auth (${nw}): ${t}`,...e)}function L_(t,...e){mN.logLevel<=vr.ERROR&&mN.error(`Auth (${nw}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,...e){throw Ez(t,...e)}function Sf(t,...e){return Ez(t,...e)}function ede(t,e,n){const r={...Jue(),[e]:n};return new Tk("auth","Firebase",r).create(e,{appName:t.name})}function Ep(t){return ede(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ez(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Que.create(t,...e)}function jn(t,e,...n){if(!t)throw Ez(e,...n)}function pp(t){const e="INTERNAL ASSERTION FAILED: "+t;throw L_(e),new Error(e)}function Op(t,e){t||pp(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pLe(){return xZ()==="http:"||xZ()==="https:"}function xZ(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mLe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pLe()||ONe()||"connection"in navigator)?navigator.onLine:!0}function gLe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.shortDelay=e,this.longDelay=n,Op(n>e,"Short delay should be less than long delay!"),this.isMobile=MNe()||PNe()}get(){return mLe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(t,e){Op(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yLe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bLe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wLe=new jk(3e4,6e4);function v0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wp(t,e,n,r,i={}){return nde(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=kk({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return DNe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Gf(t.emulatorConfig.host)&&(c.credentials="include"),tde.fetch()(await rde(t,t.config.apiHost,n,a),c)})}async function nde(t,e,n){t._canInitEmulator=!1;const r={...yLe,...e};try{const i=new xLe(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw e5(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw e5(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw e5(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw e5(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ede(t,u,c);nd(t,u)}}catch(i){if(i instanceof yd)throw i;nd(t,"network-request-failed",{message:String(i)})}}async function $k(t,e,n,r,i={}){const s=await Wp(t,e,n,r,i);return"mfaPendingCredential"in s&&nd(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function rde(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Sz(t.config,i):`${t.config.apiScheme}://${i}`;return bLe.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function vLe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xLe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sf(this.auth,"network-request-failed")),wLe.get())})}}function e5(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sf(t,e,r);return i.customData._tokenResponse=n,i}function EZ(t){return t!==void 0&&t.enterprise!==void 0}class ELe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vLe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SLe(t,e){return Wp(t,"GET","/v2/recaptchaConfig",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ALe(t,e){return Wp(t,"POST","/v1/accounts:delete",e)}async function gN(t,e){return Wp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ide(t,e=!1){const n=ti(t),r=await n.getIdToken(e),i=Az(r);jn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:US(KD(i.auth_time)),issuedAtTime:US(KD(i.iat)),expirationTime:US(KD(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function KD(t){return Number(t)*1e3}function Az(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return L_("JWT malformed, contained fewer than 3 sections"),null;try{const i=dce(n);return i?JSON.parse(i):(L_("Failed to decode base64 JWT payload"),null)}catch(i){return L_("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function SZ(t){const e=Az(t);return jn(e,"internal-error"),jn(typeof e.exp<"u","internal-error"),jn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yd&&TLe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TLe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kLe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=US(this.lastLoginAt),this.creationTime=US(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t){var d;const e=t.auth,n=await t.getIdToken(),r=await mx(t,gN(e,{idToken:n}));jn(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?ode(i.providerUserInfo):[],o=CLe(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new y7(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function sde(t){const e=ti(t);await yN(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CLe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ode(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Le(t,e){const n=await nde(t,{},async()=>{const r=kk({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await rde(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Gf(t.emulatorConfig.host)&&(l.credentials="include"),tde.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NLe(t,e){return Wp(t,"POST","/v2/accounts:revokeToken",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jn(e.idToken,"internal-error"),jn(typeof e.idToken<"u","internal-error"),jn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){jn(e.length!==0,"internal-error");const n=SZ(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(jn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _Le(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new s1;return r&&(jn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(jn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(jn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new s1,this.toJSON())}_performRefresh(){return pp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){jn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Uu{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new kLe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new y7(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await mx(this,this.stsTokenManager.getToken(this.auth,e));return jn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ide(this,e)}reload(){return sde(this)}_assign(e){this!==e&&(jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Uu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yN(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kl(this.auth.app))return Promise.reject(Ep(this.auth));const e=await this.getIdToken();return await mx(this,ALe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:m,stsTokenManager:y}=n;jn(d&&y,e,"internal-error");const w=s1.fromJSON(this.name,y);jn(typeof d=="string",e,"internal-error"),Cm(r,e.name),Cm(i,e.name),jn(typeof f=="boolean",e,"internal-error"),jn(typeof h=="boolean",e,"internal-error"),Cm(s,e.name),Cm(o,e.name),Cm(a,e.name),Cm(l,e.name),Cm(c,e.name),Cm(u,e.name);const b=new Uu({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:w,createdAt:c,lastLoginAt:u});return m&&Array.isArray(m)&&(b.providerData=m.map(E=>({...E}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new s1;i.updateFromServerResponse(n);const s=new Uu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yN(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];jn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ode(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new s1;a.updateFromIdToken(r);const l=new Uu({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new y7(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AZ=new Map;function mp(t){Op(t instanceof Function,"Expected a class definition");let e=AZ.get(t);return e?(Op(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AZ.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ade.type="NONE";const b7=ade;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t,e,n){return`firebase:${t}:${e}:${n}`}class o1{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=D_(this.userKey,i.apiKey,s),this.fullPersistenceKey=D_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gN(this.auth,{idToken:e}).catch(()=>{});return n?Uu._fromGetAccountInfoResponse(this.auth,n,e):null}return Uu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new o1(mp(b7),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||mp(b7);const o=D_(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await gN(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Uu._fromGetAccountInfoResponse(e,f,u)}else d=Uu._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new o1(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new o1(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dde(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lde(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hde(e))return"Blackberry";if(pde(e))return"Webos";if(cde(e))return"Safari";if((e.includes("chrome/")||ude(e))&&!e.includes("edge/"))return"Chrome";if(fde(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lde(t=Ca()){return/firefox\//i.test(t)}function cde(t=Ca()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ude(t=Ca()){return/crios\//i.test(t)}function dde(t=Ca()){return/iemobile/i.test(t)}function fde(t=Ca()){return/android/i.test(t)}function hde(t=Ca()){return/blackberry/i.test(t)}function pde(t=Ca()){return/webos/i.test(t)}function Tz(t=Ca()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ILe(t=Ca()){var e;return Tz(t)&&!!((e=window.navigator)!=null&&e.standalone)}function RLe(){return FNe()&&document.documentMode===10}function mde(t=Ca()){return Tz(t)||fde(t)||pde(t)||hde(t)||/windows phone/i.test(t)||dde(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gde(t,e=[]){let n;switch(t){case"Browser":n=TZ(Ca());break;case"Worker":n=`${TZ(Ca())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MLe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LLe(t,e={}){return Wp(t,"GET","/v2/passwordPolicy",v0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DLe=6;class OLe{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DLe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PLe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kZ(this),this.idTokenSubscription=new kZ(this),this.beforeStateQueue=new MLe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Que,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mp(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await o1.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gN(this,{idToken:e}),r=await Uu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(kl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yN(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gLe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kl(this.app))return Promise.reject(Ep(this));const n=e?ti(e):null;return n&&jn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&jn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kl(this.app)?Promise.reject(Ep(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kl(this.app)?Promise.reject(Ep(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mp(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LLe(this),n=new OLe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tk("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NLe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mp(e)||this._popupRedirectResolver;jn(n,this,"argument-error"),this.redirectPersistenceManager=await o1.create(this,[mp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gde(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(kl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hLe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function aw(t){return ti(t)}class kZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=WNe(n=>this.observer=n)}get next(){return jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FLe(t){K4=t}function yde(t){return K4.loadJS(t)}function BLe(){return K4.recaptchaEnterpriseScript}function jLe(){return K4.gapiScript}function $Le(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zLe{constructor(){this.enterprise=new HLe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HLe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VLe="recaptcha-enterprise",bde="NO_RECAPTCHA";class ULe{constructor(e){this.type=VLe,this.auth=aw(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{SLe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ELe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;EZ(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(bde)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zLe().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&EZ(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BLe();l.length!==0&&(l+=a),yde(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function CZ(t,e,n,r=!1,i=!1){const s=new ULe(t);let o;if(i)o=bde;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function w7(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await CZ(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await CZ(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wde(t,e){const n=Ck(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Gg(s,e??{}))return i;nd(i,"already-initialized")}return n.initialize({options:e})}function WLe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mp);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vde(t,e,n){const r=aw(t);jn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=xde(e),{host:o,port:a}=qLe(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){jn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),jn(Gg(c,r.config.emulator)&&Gg(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Gf(o)?(C4(`${s}//${o}${l}`),_4("Auth",!0)):GLe()}function xde(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qLe(t){const e=xde(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:_Z(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:_Z(o)}}}function _Z(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GLe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pp("not implemented")}_getIdTokenResponse(e){return pp("not implemented")}_linkToIdToken(e,n){return pp("not implemented")}_getReauthenticationResolver(e){return pp("not implemented")}}async function KLe(t,e){return Wp(t,"POST","/v1/accounts:update",e)}async function XLe(t,e){return Wp(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YLe(t,e){return $k(t,"POST","/v1/accounts:signInWithPassword",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZLe(t,e){return $k(t,"POST","/v1/accounts:signInWithEmailLink",v0(t,e))}async function JLe(t,e){return $k(t,"POST","/v1/accounts:signInWithEmailLink",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx extends X4{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gx(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gx(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w7(e,n,"signInWithPassword",YLe);case"emailLink":return ZLe(e,{email:this._email,oobCode:this._password});default:nd(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w7(e,r,"signUpPassword",XLe);case"emailLink":return JLe(e,{idToken:n,email:this._email,oobCode:this._password});default:nd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(t,e){return $k(t,"POST","/v1/accounts:signInWithIdp",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QLe="http://localhost";class t0 extends X4{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new t0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new t0(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return a1(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,a1(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,a1(e,n)}buildRequest(){const e={requestUri:QLe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kk(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eDe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tDe(t){const e=KE(XE(t)).link,n=e?KE(XE(e)).deep_link_id:null,r=KE(XE(t)).deep_link_id;return(r?KE(XE(r)).link:null)||r||n||e||t}class Y4{constructor(e){const n=KE(XE(e)),r=n.apiKey??null,i=n.oobCode??null,s=eDe(n.mode??null);jn(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tDe(e);try{return new Y4(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.providerId=x0.PROVIDER_ID}static credential(e,n){return gx._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Y4.parseLink(n);return jn(r,"argument-error"),gx._fromEmailAndCode(e,r.code,r.tenantId)}}x0.PROVIDER_ID="password";x0.EMAIL_PASSWORD_SIGN_IN_METHOD="password";x0.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ede{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Ede{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends zk{constructor(){super("facebook.com")}static credential(e){return t0._fromParams({providerId:sp.PROVIDER_ID,signInMethod:sp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sp.credentialFromTaggedObject(e)}static credentialFromError(e){return sp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sp.credential(e.oauthAccessToken)}catch{return null}}}sp.FACEBOOK_SIGN_IN_METHOD="facebook.com";sp.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends zk{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return t0._fromParams({providerId:op.PROVIDER_ID,signInMethod:op.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return op.credentialFromTaggedObject(e)}static credentialFromError(e){return op.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return op.credential(n,r)}catch{return null}}}op.GOOGLE_SIGN_IN_METHOD="google.com";op.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends zk{constructor(){super("github.com")}static credential(e){return t0._fromParams({providerId:ap.PROVIDER_ID,signInMethod:ap.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ap.credentialFromTaggedObject(e)}static credentialFromError(e){return ap.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ap.credential(e.oauthAccessToken)}catch{return null}}}ap.GITHUB_SIGN_IN_METHOD="github.com";ap.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends zk{constructor(){super("twitter.com")}static credential(e,n){return t0._fromParams({providerId:lp.PROVIDER_ID,signInMethod:lp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lp.credentialFromTaggedObject(e)}static credentialFromError(e){return lp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lp.credential(n,r)}catch{return null}}}lp.TWITTER_SIGN_IN_METHOD="twitter.com";lp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nDe(t,e){return $k(t,"POST","/v1/accounts:signUp",v0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Uu._fromIdTokenResponse(e,r,i),o=NZ(r);return new kb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=NZ(r);return new kb({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function NZ(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN extends yd{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bN.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bN(e,n,r,i)}}function Sde(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bN._fromErrorAndOperation(t,s,e,r):s})}async function rDe(t,e,n=!1){const r=await mx(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kb._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ade(t,e,n=!1){const{auth:r}=t;if(kl(r.app))return Promise.reject(Ep(r));const i="reauthenticate";try{const s=await mx(t,Sde(r,i,e,t),n);jn(s.idToken,r,"internal-error");const o=Az(s.idToken);jn(o,r,"internal-error");const{sub:a}=o;return jn(t.uid===a,r,"user-mismatch"),kb._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nd(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tde(t,e,n=!1){if(kl(t.app))return Promise.reject(Ep(t));const r="signIn",i=await Sde(t,r,e),s=await kb._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function kde(t,e){return Tde(aw(t),e)}async function Cde(t,e){return Ade(ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _de(t){const e=aw(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nde(t,e,n){if(kl(t.app))return Promise.reject(Ep(t));const r=aw(t),o=await w7(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nDe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_de(t),l}),a=await kb._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Ide(t,e,n){return kl(t.app)?Promise.reject(Ep(t)):kde(ti(t),x0.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_de(t),r})}function Rde(t,e){return iDe(ti(t),null,e)}async function iDe(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await mx(t,KLe(r,s));await t._updateTokensIfNecessary(o,!0)}function Mde(t,e,n,r){return ti(t).onIdTokenChanged(e,n,r)}function Lde(t,e,n){return ti(t).beforeAuthStateChanged(e,n)}function Dde(t,e,n,r){return ti(t).onAuthStateChanged(e,n,r)}function Ode(t){return ti(t).signOut()}const wN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pde{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wN,"1"),this.storage.removeItem(wN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sDe=1e3,oDe=10;class Fde extends Pde{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mde(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);RLe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oDe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sDe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fde.type="LOCAL";const Bde=Fde;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde extends Pde{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jde.type="SESSION";const kz=jde;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aDe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Z4(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await aDe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Z4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lDe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Cz("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(){return window}function cDe(t){Af().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $de(){return typeof Af().WorkerGlobalScope<"u"&&typeof Af().importScripts=="function"}async function uDe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dDe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fDe(){return $de()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zde="firebaseLocalStorageDb",hDe=1,vN="firebaseLocalStorage",Hde="fbase_key";class Hk{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function J4(t,e){return t.transaction([vN],e?"readwrite":"readonly").objectStore(vN)}function pDe(){const t=indexedDB.deleteDatabase(zde);return new Hk(t).toPromise()}function v7(){const t=indexedDB.open(zde,hDe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vN,{keyPath:Hde})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vN)?e(r):(r.close(),await pDe(),e(await v7()))})})}async function IZ(t,e,n){const r=J4(t,!0).put({[Hde]:e,value:n});return new Hk(r).toPromise()}async function mDe(t,e){const n=J4(t,!1).get(e),r=await new Hk(n).toPromise();return r===void 0?null:r.value}function RZ(t,e){const n=J4(t,!0).delete(e);return new Hk(n).toPromise()}const gDe=800,yDe=3;class Vde{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v7(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yDe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $de()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Z4._getInstance(fDe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await uDe(),!this.activeServiceWorker)return;this.sender=new lDe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dDe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v7();return await IZ(e,wN,"1"),await RZ(e,wN),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IZ(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mDe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RZ(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=J4(i,!1).getAll();return new Hk(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gDe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vde.type="LOCAL";const Ude=Vde;new jk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bDe(t,e){return e?mp(e):(jn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z extends X4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return a1(e,this._buildIdpRequest())}_linkToIdToken(e,n){return a1(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return a1(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wDe(t){return Tde(t.auth,new _z(t),t.bypassAuthState)}function vDe(t){const{auth:e,user:n}=t;return jn(n,e,"internal-error"),Ade(n,new _z(t),t.bypassAuthState)}async function xDe(t){const{auth:e,user:n}=t;return jn(n,e,"internal-error"),rDe(n,new _z(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wDe;case"linkViaPopup":case"linkViaRedirect":return xDe;case"reauthViaPopup":case"reauthViaRedirect":return vDe;default:nd(this.auth,"internal-error")}}resolve(e){Op(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Op(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EDe=new jk(2e3,1e4);class Vv extends Wde{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vv.currentPopupAction&&Vv.currentPopupAction.cancel(),Vv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jn(e,this.auth,"internal-error"),e}async onExecution(){Op(this.filter.length===1,"Popup operations only handle one event");const e=Cz();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Sf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EDe.get())};e()}}Vv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDe="pendingRedirect",O_=new Map;class ADe extends Wde{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=O_.get(this.auth._key());if(!e){try{const r=await TDe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}O_.set(this.auth._key(),e)}return this.bypassAuthState||O_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TDe(t,e){const n=_De(e),r=CDe(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kDe(t,e){O_.set(t._key(),e)}function CDe(t){return mp(t._redirectPersistence)}function _De(t){return D_(SDe,t.config.apiKey,t.name)}async function NDe(t,e,n=!1){if(kl(t.app))return Promise.reject(Ep(t));const r=aw(t),i=bDe(r,e),o=await new ADe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDe=600*1e3;class RDe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MDe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qde(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sf(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IDe&&this.cachedEventUids.clear(),this.cachedEventUids.has(MZ(e))}saveEventToCache(e){this.cachedEventUids.add(MZ(e)),this.lastProcessedEventTime=Date.now()}}function MZ(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qde({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MDe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qde(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LDe(t,e={}){return Wp(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DDe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ODe=/^https?/;async function PDe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LDe(t);for(const n of e)try{if(FDe(n))return}catch{}nd(t,"unauthorized-domain")}function FDe(t){const e=g7(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ODe.test(n))return!1;if(DDe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BDe=new jk(3e4,6e4);function LZ(){const t=Af().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jDe(t){return new Promise((e,n)=>{var i,s,o;function r(){LZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LZ(),n(Sf(t,"network-request-failed"))},timeout:BDe.get()})}if((s=(i=Af().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Af().gapi)!=null&&o.load)r();else{const a=$Le("iframefcb");return Af()[a]=()=>{gapi.load?r():n(Sf(t,"network-request-failed"))},yde(`${jLe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw P_=null,e})}let P_=null;function $De(t){return P_=P_||jDe(t),P_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zDe=new jk(5e3,15e3),HDe="__/auth/iframe",VDe="emulator/auth/iframe",UDe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WDe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qDe(t){const e=t.config;jn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sz(e,VDe):`https://${t.config.authDomain}/${HDe}`,r={apiKey:e.apiKey,appName:t.name,v:nw},i=WDe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kk(r).slice(1)}`}async function GDe(t){const e=await $De(t),n=Af().gapi;return jn(n,t,"internal-error"),e.open({where:document.body,url:qDe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UDe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sf(t,"network-request-failed"),a=Af().setTimeout(()=>{s(o)},zDe.get());function l(){Af().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KDe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XDe=500,YDe=600,ZDe="_blank",JDe="http://localhost";class DZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QDe(t,e,n,r=XDe,i=YDe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...KDe,width:r.toString(),height:i.toString(),top:s,left:o},c=Ca().toLowerCase();n&&(a=ude(c)?ZDe:n),lde(c)&&(e=e||JDe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,m])=>`${f}${h}=${m},`,"");if(ILe(c)&&a!=="_self")return e8e(e||"",a),new DZ(null);const d=window.open(e||"",a,u);jn(d,t,"popup-blocked");try{d.focus()}catch{}return new DZ(d)}function e8e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8e="__/auth/handler",n8e="emulator/auth/handler",r8e=encodeURIComponent("fac");async function OZ(t,e,n,r,i,s){jn(t.config.authDomain,t,"auth-domain-config-required"),jn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:nw,eventId:i};if(e instanceof Ede){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UNe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof zk){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${r8e}=${encodeURIComponent(l)}`:"";return`${i8e(t)}?${kk(a).slice(1)}${c}`}function i8e({config:t}){return t.emulator?Sz(t,n8e):`https://${t.authDomain}/${t8e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="webStorageSupport";class s8e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kz,this._completeRedirectFn=NDe,this._overrideRedirectResult=kDe}async _openPopup(e,n,r,i){var o;Op((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await OZ(e,n,r,g7(),i);return QDe(e,s,Cz())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await OZ(e,n,r,g7(),i);return cDe(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Op(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GDe(e),r=new RDe(e);return n.register("authEvent",i=>(jn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(XD,{type:XD},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[XD];s!==void 0&&n(!!s),nd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PDe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mde()||cde()||Tz()}}const Gde=s8e;var PZ="@firebase/auth",FZ="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l8e(t){Kg(new Rp("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;jn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gde(t)},c=new PLe(r,i,s,l);return WLe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kg(new Rp("auth-internal",e=>{const n=aw(e.getProvider("auth").getImmediate());return(r=>new o8e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jc(PZ,FZ,a8e(t)),Jc(PZ,FZ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8e=300,u8e=pce("authIdTokenMaxAge")||c8e;let BZ=null;const d8e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u8e)return;const i=n==null?void 0:n.token;BZ!==i&&(BZ=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $A(t=N4()){const e=Ck(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wde(t,{popupRedirectResolver:Gde,persistence:[Ude,Bde,kz]}),r=pce("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=d8e(s.toString());Lde(n,o,()=>o(n.currentUser)),Mde(n,a=>o(a))}}const i=fce("auth");return i&&vde(n,`http://${i}`),n}function f8e(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}FLe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",f8e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l8e("Browser");const h8e=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Y4,AuthCredential:X4,EmailAuthCredential:gx,EmailAuthProvider:x0,FacebookAuthProvider:sp,GithubAuthProvider:ap,GoogleAuthProvider:op,OAuthCredential:t0,TwitterAuthProvider:lp,beforeAuthStateChanged:Lde,browserLocalPersistence:Bde,browserPopupRedirectResolver:Gde,browserSessionPersistence:kz,connectAuthEmulator:vde,createUserWithEmailAndPassword:Nde,getAuth:$A,getIdTokenResult:ide,inMemoryPersistence:b7,indexedDBLocalPersistence:Ude,initializeAuth:wde,onAuthStateChanged:Dde,onIdTokenChanged:Mde,prodErrorMap:Jue,reauthenticateWithCredential:Cde,reload:sde,signInWithCredential:kde,signInWithEmailAndPassword:Ide,signOut:Ode,updatePassword:Rde},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8e="type.googleapis.com/google.protobuf.Int64Value",m8e="type.googleapis.com/google.protobuf.UInt64Value";function Kde(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function xN(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>xN(e));if(typeof t=="function"||typeof t=="object")return Kde(t,e=>xN(e));throw new Error("Data cannot be encoded in JSON: "+t)}function yx(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case p8e:case m8e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>yx(e)):typeof t=="function"||typeof t=="object"?Kde(t,e=>yx(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jZ={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wa extends yd{constructor(e,n,r){super(`${Nz}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Wa.prototype)}}function g8e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function EN(t,e){let n=g8e(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!jZ[o])return new Wa("internal","internal");n=jZ[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=yx(i))}}catch{}return n==="ok"?null:new Wa(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kl(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="us-central1",b8e=/^data: (.*?)(?:\n|$)/;function w8e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Wa("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class v8e{constructor(e,n,r,i,s=x7,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new y8e(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=x7}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function x8e(t,e,n){const r=Gf(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(C4(t.emulatorOrigin+"/backends"),_4("Functions",!0))}function E8e(t,e,n){const r=i=>A8e(t,e,i,n||{});return r.stream=(i,s)=>k8e(t,e,i,s),r}function Xde(t){return t.emulatorOrigin&&Gf(t.emulatorOrigin)?"include":void 0}async function S8e(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:Xde(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function Yde(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function A8e(t,e,n,r){const i=t._url(e);return T8e(t,i,n,r)}async function T8e(t,e,n,r){n=xN(n);const i={data:n},s=await Yde(t,r),o=r.timeout||7e4,a=w8e(o),l=await Promise.race([S8e(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Wa("cancelled","Firebase Functions instance was deleted.");const c=EN(l.status,l.json);if(c)throw c;if(!l.json)throw new Wa("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new Wa("internal","Response is missing data field.");return{data:yx(u)}}function k8e(t,e,n,r){const i=t._url(e);return C8e(t,i,n,r||{})}async function C8e(t,e,n,r){var f;n=xN(n);const i={data:n},s=await Yde(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:Xde(t)})}catch(h){if(h instanceof Error&&h.name==="AbortError"){const y=new Wa("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const m=EN(0,null);return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}let a,l;const c=new Promise((h,m)=>{a=h,l=m});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const h=new Wa("cancelled","Request was cancelled.");l(h)});const u=o.body.getReader(),d=_8e(u,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const h=d.getReader();return{async next(){const{value:m,done:y}=await h.read();return{value:m,done:y}},async return(){return await h.cancel(),{done:!0,value:void 0}}}}},data:c}}function _8e(t,e,n,r){const i=(o,a)=>{const l=o.match(b8e);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){e(yx(u.result));return}if("message"in u){a.enqueue(yx(u.message));return}if("error"in u){const d=EN(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof Wa){a.error(u),n(u);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Wa("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Wa("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=s.decode(c,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),o);return l()}catch(c){const u=c instanceof Wa?c:EN(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const $Z="@firebase/functions",zZ="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8e="auth-internal",I8e="app-check-internal",R8e="messaging-internal";function M8e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(N8e),o=n.getProvider(R8e),a=n.getProvider(I8e);return new v8e(i,s,o,a,r)};Kg(new Rp(Nz,e,"PUBLIC").setMultipleInstances(!0)),Jc($Z,zZ,t),Jc($Z,zZ,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zde(t=N4(),e=x7){const r=Ck(ti(t),Nz).getImmediate({identifier:e}),i=D$("functions");return i&&Jde(r,...i),r}function Jde(t,e,n){x8e(ti(t),e,n)}function L8e(t,e,n){return E8e(ti(t),e,n)}M8e();const Qde=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:Wa,connectFunctionsEmulator:Jde,getFunctions:Zde,httpsCallable:L8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const efe="firebasestorage.googleapis.com",tfe="storageBucket",D8e=120*1e3,O8e=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends yd{constructor(e,n,r=0){super(YD(e),`Firebase Storage: ${n} (${YD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ms.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ps;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ps||(ps={}));function YD(t){return"storage/"+t}function Iz(){const t="An unknown error occurred, please check the error payload for server response.";return new ms(ps.UNKNOWN,t)}function P8e(t){return new ms(ps.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function F8e(t){return new ms(ps.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function B8e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ms(ps.UNAUTHENTICATED,t)}function j8e(){return new ms(ps.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $8e(t){return new ms(ps.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function z8e(){return new ms(ps.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H8e(){return new ms(ps.CANCELED,"User canceled the upload/download.")}function V8e(t){return new ms(ps.INVALID_URL,"Invalid URL '"+t+"'.")}function U8e(t){return new ms(ps.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function W8e(){return new ms(ps.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tfe+"' property when initializing the app?")}function q8e(){return new ms(ps.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function G8e(){return new ms(ps.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function K8e(t){return new ms(ps.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function E7(t){return new ms(ps.INVALID_ARGUMENT,t)}function nfe(){return new ms(ps.APP_DELETED,"The Firebase app was deleted.")}function X8e(t){return new ms(ps.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function WS(t,e){return new ms(ps.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function kE(t){throw new ms(ps.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ac.makeFromUrl(e,n)}catch{return new ac(e,"")}if(r.path==="")return r;throw U8e(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},y=n===efe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${w}`,"i"),A=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<A.length;x++){const T=A[x],R=T.regex.exec(e);if(R){const k=R[T.indices.bucket];let _=R[T.indices.path];_||(_=""),r=new ac(k,_),T.postModify(r);break}}if(r==null)throw V8e(e);return r}}class Y8e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8e(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,t(h,l())},w)}function f(){s&&clearTimeout(s)}function h(w,...b){if(c){f();return}if(w){f(),u.call(null,w,...b);return}if(l()||o){f(),u.call(null,w,...b);return}r<64&&(r*=2);let A;a===1?(a=2,A=0):A=(r+Math.random())*1e3,d(A)}let m=!1;function y(w){m||(m=!0,f(),!c&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function J8e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8e(t){return t!==void 0}function eOe(t){return typeof t=="object"&&!Array.isArray(t)}function Rz(t){return typeof t=="string"||t instanceof String}function HZ(t){return Mz()&&t instanceof Blob}function Mz(){return typeof Blob<"u"}function VZ(t,e,n,r){if(r<e)throw E7(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw E7(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function rfe(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Jy;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jy||(Jy={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tOe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nOe{constructor(e,n,r,i,s,o,a,l,c,u,d,f=!0,h=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new t5(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Jy.NO_ERROR,l=s.getStatus();if(!a||tOe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Jy.ABORT;r(!1,new t5(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new t5(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Q8e(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Iz();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?nfe():H8e();o(l)}else{const l=z8e();o(l)}};this.canceled_?n(!1,new t5(!1,null,!0)):this.backoffId_=Z8e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&J8e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class t5{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function rOe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function iOe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sOe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function oOe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aOe(t,e,n,r,i,s,o=!0,a=!1){const l=rfe(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return sOe(u,e),rOe(u,n),iOe(u,s),oOe(u,r),new nOe(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lOe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cOe(...t){const e=lOe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Mz())return new Blob(t);throw new ms(ps.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uOe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dOe(t){if(typeof atob>"u")throw K8e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ZD{constructor(e,n){this.data=e,this.contentType=n||null}}function fOe(t,e){switch(t){case pf.RAW:return new ZD(ife(e));case pf.BASE64:case pf.BASE64URL:return new ZD(sfe(t,e));case pf.DATA_URL:return new ZD(pOe(e),mOe(e))}throw Iz()}function ife(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function hOe(t){let e;try{e=decodeURIComponent(t)}catch{throw WS(pf.DATA_URL,"Malformed data URL.")}return ife(e)}function sfe(t,e){switch(t){case pf.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw WS(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pf.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw WS(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dOe(e)}catch(i){throw i.message.includes("polyfill")?i:WS(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ofe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw WS(pf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=gOe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function pOe(t){const e=new ofe(t);return e.base64?sfe(pf.BASE64,e.rest):hOe(e.rest)}function mOe(t){return new ofe(t).contentType}function gOe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){let r=0,i="";HZ(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(HZ(this.data_)){const r=this.data_,i=uOe(r,e,n);return i===null?null:new Wm(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Wm(r,!0)}}static getBlob(...e){if(Mz()){const n=e.map(r=>r instanceof Wm?r.data_:r);return new Wm(cOe.apply(null,n))}else{const n=e.map(o=>Rz(o)?fOe(pf.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Wm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function afe(t){let e;try{e=JSON.parse(t)}catch{return null}return eOe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yOe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bOe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function lfe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wOe(t,e){return e}let Oa=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||wOe}},n5=null;function vOe(t){return!Rz(t)||t.length<2?t:lfe(t)}function cfe(){if(n5)return n5;const t=[];t.push(new Oa("bucket")),t.push(new Oa("generation")),t.push(new Oa("metageneration")),t.push(new Oa("name","fullPath",!0));function e(s,o){return vOe(o)}const n=new Oa("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Oa("size");return i.xform=r,t.push(i),t.push(new Oa("timeCreated")),t.push(new Oa("updated")),t.push(new Oa("md5Hash",null,!0)),t.push(new Oa("cacheControl",null,!0)),t.push(new Oa("contentDisposition",null,!0)),t.push(new Oa("contentEncoding",null,!0)),t.push(new Oa("contentLanguage",null,!0)),t.push(new Oa("contentType",null,!0)),t.push(new Oa("metadata","customMetadata",!0)),n5=t,n5}function xOe(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ac(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function EOe(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return xOe(r,t),r}function ufe(t,e,n){const r=afe(e);return r===null?null:EOe(t,r,n)}function SOe(t,e,n,r){const i=afe(e);if(i===null||!Rz(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),h=Q4(f,n,r),m=rfe({alt:"media",token:c});return h+m})[0]}function AOe(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Lz{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dfe(t){if(!t)throw Iz()}function TOe(t,e){function n(r,i){const s=ufe(t,i,e);return dfe(s!==null),s}return n}function kOe(t,e){function n(r,i){const s=ufe(t,i,e);return dfe(s!==null),SOe(s,i,t.host,t._protocol)}return n}function ffe(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=j8e():i=B8e():n.getStatus()===402?i=F8e(t.bucket):n.getStatus()===403?i=$8e(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function hfe(t){const e=ffe(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=P8e(t.path)),s.serverResponse=i.serverResponse,s}return n}function COe(t,e,n){const r=e.fullServerUrl(),i=Q4(r,t.host,t._protocol)+"?alt=media",s="GET",o=t.maxOperationRetryTime,a=new Lz(i,s,(l,c)=>c,o);return a.errorHandler=hfe(e),a}function _Oe(t,e,n){const r=e.fullServerUrl(),i=Q4(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Lz(i,s,kOe(t,n),o);return a.errorHandler=hfe(e),a}function NOe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IOe(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=NOe(null,e)),r}function ROe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let x=0;x<2;x++)A=A+Math.random().toString().slice(2);return A}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=IOe(e,r,i),u=AOe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Wm.getBlob(d,r,f);if(h===null)throw q8e();const m={name:c.fullPath},y=Q4(s,t.host,t._protocol),w="POST",b=t.maxUploadRetryTime,E=new Lz(y,w,TOe(t,n),b);return E.urlParams=m,E.headers=o,E.body=h.uploadData(),E.errorHandler=ffe(e),E}class pfe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jy.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jy.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jy.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw kE("cannot .send() more than once");if(Gf(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MOe extends pfe{initXhr(){this.xhr_.responseType="text"}}function mfe(){return new MOe}class LOe extends pfe{initXhr(){this.xhr_.responseType="blob"}}function DOe(){return new LOe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this._service=e,n instanceof ac?this._location=n:this._location=ac.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Cb(e,n)}get root(){const e=new ac(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lfe(this._location.path)}get storage(){return this._service}get parent(){const e=yOe(this._location.path);if(e===null)return null;const n=new ac(this._location.bucket,e);return new Cb(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X8e(e)}}function OOe(t,e){t._throwIfRoot("getBlob");const n=COe(t.storage,t._location);return t.storage.makeRequestWithTokens(n,DOe).then(r=>r)}function POe(t,e,n){t._throwIfRoot("uploadBytes");const r=ROe(t.storage,t._location,cfe(),new Wm(e,!0),n);return t.storage.makeRequestWithTokens(r,mfe).then(i=>({metadata:i,ref:t}))}function FOe(t){t._throwIfRoot("getDownloadURL");const e=_Oe(t.storage,t._location,cfe());return t.storage.makeRequestWithTokens(e,mfe).then(n=>{if(n===null)throw G8e();return n})}function BOe(t,e){const n=bOe(t._location.path,e),r=new ac(t._location.bucket,n);return new Cb(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jOe(t){return/^[A-Za-z]+:\/\//.test(t)}function $Oe(t,e){return new Cb(t,e)}function gfe(t,e){if(t instanceof Dz){const n=t;if(n._bucket==null)throw W8e();const r=new Cb(n,n._bucket);return e!=null?gfe(r,e):r}else return e!==void 0?BOe(t,e):t}function zOe(t,e){if(e&&jOe(e)){if(t instanceof Dz)return $Oe(t,e);throw E7("To use ref(service, url), the first argument must be a Storage instance.")}else return gfe(t,e)}function UZ(t,e){const n=e==null?void 0:e[tfe];return n==null?null:ac.makeFromBucketSpec(n,t)}function HOe(t,e,n,r={}){t.host=`${e}:${n}`;const i=Gf(e);i&&(C4(`https://${t.host}/b`),_4("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:mce(s,t.app.options.projectId))}class Dz{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=efe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=D8e,this._maxUploadRetryTime=O8e,this._requests=new Set,i!=null?this._bucket=ac.makeFromBucketSpec(i,this._host):this._bucket=UZ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ac.makeFromBucketSpec(this._url,e):this._bucket=UZ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VZ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VZ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cb(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Y8e(nfe());{const o=aOe(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const WZ="@firebase/storage",qZ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yfe="storage";function Qc(t,e,n){return t=ti(t),POe(t,e,n)}function eu(t){return t=ti(t),FOe(t)}function Rl(t,e){return t=ti(t),zOe(t,e)}function VOe(t=N4(),e){t=ti(t);const r=Ck(t,yfe).getImmediate({identifier:e}),i=D$("storage");return i&&UOe(r,...i),r}function UOe(t,e,n,r={}){HOe(t,e,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WOe(t,e){return t=ti(t),OOe(t)}function qOe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Dz(n,r,i,e,nw)}function GOe(){Kg(new Rp(yfe,qOe,"PUBLIC").setMultipleInstances(!0)),Jc(WZ,qZ,""),Jc(WZ,qZ,"esm2020")}GOe();const Oz={apiKey:"AIzaSyAfqqFbf2AVCOOm8Trm57qTSpWoAk-Jbx4",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},eR=F$(Oz),Kt=eLe(eR),F_=$A(eR),KOe=Zde(eR),Ya=VOe(eR),bfe=Object.freeze(Object.defineProperty({__proto__:null,auth:F_,db:Kt,firebaseConfig:Oz,functions:KOe,storage:Ya},Symbol.toStringTag,{value:"Module"})),wfe=De.createContext(void 0),XOe=({children:t})=>{const[e,n]=De.useState(null),[r,i]=De.useState(!0);De.useEffect(()=>{const a=Dde(F_,async l=>{if(l)try{const c=Bn(Kt,"users",l.uid),u=await Ku(c);if(u.exists())n({id:u.id,...u.data()});else if(l.email){const d=No(Ai(Kt,"users"),au("email","==",l.email)),f=await Xu(d);if(f.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),n(null);else{const h=f.docs[0].data();n({id:f.docs[0].id,...h})}}else n(null)}catch(c){console.error("Error fetching user data:",c),n(null)}else n(null);i(!1)});return()=>a()},[]);const s=async(a,l)=>{try{if(!l)throw new Error("Password is required for Firebase Auth");let c=a;if(!a.includes("@"))try{const{httpsCallable:u}=await ju(async()=>{const{httpsCallable:y}=await Promise.resolve().then(()=>Qde);return{httpsCallable:y}},[]),{functions:d}=await ju(async()=>{const{functions:y}=await Promise.resolve().then(()=>bfe);return{functions:y}},void 0);c=(await u(d,"getEmailByUsername")({username:a})).data.email}catch(u){console.error("Username lookup failed:",u);const d=No(Ai(Kt,"users"),au("username","==",a)),f=await Xu(d);if(f.empty)return console.error("Username not found"),!1;const h=f.docs[0].data();h.email&&(c=h.email)}return await Ide(F_,c,l),!0}catch(c){return console.error("Login failed:",c),!1}},o=async()=>{try{await Ode(F_),n(null)}catch(a){console.error("Logout failed:",a)}};return v.jsx(wfe.Provider,{value:{user:e,login:s,logout:o,isAuthenticated:!!e,loading:r},children:!r&&t})},Bl=()=>{const t=De.useContext(wfe);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},vfe=De.createContext(void 0),YOe=({toasts:t,removeToast:e})=>v.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:t.map(n=>v.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[v.jsxs("div",{className:"p-4 flex items-start gap-3",children:[v.jsx("div",{className:"flex-shrink-0 mt-0.5",children:v.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:v.jsx(BS,{className:"h-4 w-4 text-green-600"})})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"text-sm font-bold text-gray-900",children:n.message}),n.subMessage&&v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.subMessage})]}),v.jsx("button",{onClick:()=>e(n.id),className:"text-gray-400 hover:text-gray-600",children:v.jsx(hs,{className:"h-4 w-4"})})]}),v.jsx("div",{className:"h-1 w-full bg-gray-100",children:v.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),v.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},n.id))}),ZOe=t=>{const e=new Date(t),r=Math.floor((new Date().getTime()-e.getTime())/1e3);return r<60?"Va xong":r<3600?`${Math.floor(r/60)} pht trc`:r<86400?`${Math.floor(r/3600)} gi trc`:`${Math.floor(r/86400)} ngy trc`},JOe=({children:t})=>{const{user:e}=Bl(),[n,r]=De.useState([]),[i,s]=De.useState([]);De.useEffect(()=>{const f=setTimeout(()=>{o("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(f)},[]),De.useEffect(()=>{if(!e){s([]);return}const f=No(Ai(Kt,"notifications"),au("receivers","array-contains",e.id),m2("createdAt","desc")),h=Of(f,m=>{const y=m.docs.map(w=>{var E;const b=w.data();return{id:w.id,type:b.type,user:b.senderName,avatar:b.senderAvatar,content:b.message.replace(b.senderName,"").trim(),time:ZOe(b.createdAt),isRead:b.isRead,fileType:(E=b.metadata)==null?void 0:E.fileType,targetPath:b.targetPath}});s(y)});return()=>h()},[e]);const o=(f,h="",m="success")=>{const y=Date.now().toString();r(w=>[...w,{id:y,message:f,subMessage:h,type:m}]),setTimeout(()=>{r(w=>w.filter(b=>b.id!==y))},3e3)},a=f=>{r(h=>h.filter(m=>m.id!==f))},l=async f=>{s(h=>h.map(m=>m.id===f?{...m,isRead:!0}:m));try{const h=Bn(Kt,"notifications",f);await Qi(h,{isRead:!0})}catch(h){console.error("Error marking notification as read:",h)}},c=async()=>{s(h=>h.map(m=>({...m,isRead:!0}))),i.filter(h=>!h.isRead).map(h=>h.id).forEach(async h=>{try{await Qi(Bn(Kt,"notifications",h),{isRead:!0})}catch(m){console.error(m)}})},u=f=>{s(h=>h.filter(m=>m.id!==f))},d=i.filter(f=>!f.isRead).length;return v.jsxs(vfe.Provider,{value:{addToast:o,notifications:i,markAsRead:l,markAllAsRead:c,removeNotification:u,unreadCount:d},children:[t,v.jsx(YOe,{toasts:n,removeToast:a})]})},bd=()=>{const t=De.useContext(vfe);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},QOe=({isOpen:t,onClose:e})=>{const[n,r]=De.useState(""),[i,s]=De.useState(""),[o,a]=De.useState(""),[l,c]=De.useState(!1),[u,d]=De.useState(!1),[f,h]=De.useState(!1),{addToast:m}=bd();if(!t)return null;const y=async w=>{if(w.preventDefault(),i!==o){m("Mt khu mi khng khp!","error");return}if(i.length<6){m("Mt khu mi phi c t nht 6 k t.","error");return}h(!0);try{const E=$A().currentUser;if(E&&E.email){const A=x0.credential(E.email,n);await Cde(E,A),await Rde(E,i),m("i mt khu thnh cng!","success"),e(),r(""),s(""),a("")}else m("Khng tm thy thng tin ngi dng.","error")}catch(b){console.error("Error changing password:",b),b.code==="auth/wrong-password"?m("Mt khu hin ti khng ng.","error"):b.code==="auth/too-many-requests"?m("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):m(`Li: ${b.message}`,"error")}finally{h(!1)}};return v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[v.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[v.jsx(Sb,{className:"h-5 w-5"}),"i mt khu"]}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsx("div",{className:"p-6",children:v.jsxs("form",{onSubmit:y,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:l?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:n,onChange:w=>r(w.target.value),placeholder:"Nhp mt khu hin ti..."}),v.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:l?v.jsx(VP,{className:"h-4 w-4"}):v.jsx(IA,{className:"h-4 w-4"})})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:u?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:i,onChange:w=>s(w.target.value),placeholder:"Nhp mt khu mi..."}),v.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:u?v.jsx(VP,{className:"h-4 w-4"}):v.jsx(IA,{className:"h-4 w-4"})})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),v.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:w=>a(w.target.value),placeholder:"Nhp li mt khu mi..."})]}),v.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsx("button",{type:"submit",disabled:f,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):v.jsxs(v.Fragment,{children:[v.jsx(l2,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},e9e=({isOpen:t,onClose:e})=>{const{user:n}=Bl(),{addToast:r}=bd(),[i,s]=De.useState(""),[o,a]=De.useState(""),[l,c]=De.useState(""),[u,d]=De.useState(""),[f,h]=De.useState(""),[m,y]=De.useState(!1),[w,b]=De.useState(!1),[E,A]=De.useState(!1),x=De.useRef(null),T=De.useRef(null);if(De.useEffect(()=>{n&&t&&(s(n.fullName||""),a(n.phone||""),c(n.address||""),d(n.avatar||""),h(n.signatureUrl||""))},[n,t]),!t)return null;const R=async C=>{var O;const D=(O=C.target.files)==null?void 0:O[0];if(!(!D||!n)){if(!D.type.startsWith("image/")){r("Vui lng chn file nh!","","error");return}if(D.size>2*1024*1024){r("Kch thc nh ti a l 2MB!","","error");return}b(!0);try{const $=Rl(Ya,`avatars/${n.id}/${Date.now()}_${D.name}`);await Qc($,D);const U=await eu($);d(U),r("Ti nh i din thnh cng!","","success")}catch($){console.error("Error uploading avatar:",$),r("Li khi ti nh i din!","","error")}finally{b(!1)}}},k=async C=>{var O;const D=(O=C.target.files)==null?void 0:O[0];if(!(!D||!n)){if(D.type!=="image/png"){r("Vui lng chn file PNG cho ch k ( c nn trong sut)!","","error");return}if(D.size>1*1024*1024){r("Kch thc ch k ti a l 1MB!","","error");return}A(!0);try{const $=Rl(Ya,`signatures/${n.id}/signature.png`);await Qc($,D,{contentType:"image/png"});const U=await eu($);h(U),r("Ti ch k thnh cng!","","success")}catch($){console.error("Error uploading signature:",$),r("Li khi ti ch k!","","error")}finally{A(!1)}}},_=()=>{h(""),r(" xa ch k!","","success")},N=async C=>{if(C.preventDefault(),!!n){if(!i.trim()){r("H v tn khng c  trng!","","error");return}y(!0);try{const D=Bn(Kt,"users",n.id);await Qi(D,{fullName:i.trim(),phone:o.trim(),address:l.trim(),avatar:u,signatureUrl:f}),r("Cp nht thng tin thnh cng!","","success"),e(),window.location.reload()}catch(D){console.error("Error updating profile:",D),r("Li khi cp nht thng tin!","","error")}finally{y(!1)}}},L=C=>C?C.charAt(0).toUpperCase():"U",M=C=>{switch(C){case"admin":return"bg-red-100 text-red-700 border-red-200";case"head_teacher":return"bg-blue-100 text-blue-700 border-blue-200";case"office_head":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"teacher":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"staff":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[v.jsx(hp,{className:"h-5 w-5"}),"Thng tin ti khon"]}),v.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsx("div",{className:"p-6 overflow-y-auto",children:v.jsxs("form",{onSubmit:N,className:"space-y-6",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsxs("div",{className:"relative group",children:[u?v.jsx("img",{src:u,alt:i,className:"h-24 w-24 rounded-full object-cover border-4 border-blue-100 shadow-lg"}):v.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold border-4 border-blue-100 shadow-lg",children:L(i)}),v.jsx("button",{type:"button",onClick:()=>{var C;return(C=x.current)==null?void 0:C.click()},disabled:w,className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:w?v.jsx(Vu,{className:"h-6 w-6 text-white animate-spin"}):v.jsx(n6e,{className:"h-6 w-6 text-white"})}),v.jsx("input",{type:"file",ref:x,onChange:R,accept:"image/*",className:"hidden"})]}),v.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${M(n==null?void 0:n.role)}`,children:n==null?void 0:n.roleLabel})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[v.jsx(ice,{className:"h-4 w-4 text-gray-400"}),v.jsx("span",{className:"truncate",children:n==null?void 0:n.email})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tn ng nhp"}),v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[v.jsx(hp,{className:"h-4 w-4 text-gray-400"}),v.jsx("span",{children:n==null?void 0:n.username})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nhm"}),v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[v.jsx(nN,{className:"h-4 w-4 text-gray-400"}),v.jsx("span",{children:(n==null?void 0:n.group)||"Cha cp nht"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Trng thi"}),v.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${(n==null?void 0:n.status)==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(n==null?void 0:n.status)==="active"?"Hot ng":"Khng hot ng"})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(hp,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),v.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:i,onChange:C=>s(C.target.value),placeholder:"Nhp h v tn..."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S in thoi"}),v.jsxs("div",{className:"relative",children:[v.jsx(sce,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),v.jsx("input",{type:"tel",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:C=>a(C.target.value),placeholder:"Nhp s in thoi..."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"a ch"}),v.jsxs("div",{className:"relative",children:[v.jsx(H6e,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),v.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:l,onChange:C=>c(C.target.value),placeholder:"Nhp a ch..."})]})]})]}),v.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[v.jsx(Uo,{className:"h-5 w-5 text-indigo-600"}),v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ch k in t"})]}),v.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Ti ln nh ch k nh dng PNG vi nn trong sut. Ch k s c s dng khi chn vo ti liu Word."}),f?v.jsx("div",{className:"mb-3",children:v.jsxs("div",{className:"relative inline-block rounded-lg border-2 border-dashed border-indigo-200 p-2",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:[v.jsx("img",{src:f,alt:"Ch k",className:"max-h-20 max-w-full object-contain"}),v.jsx("button",{type:"button",onClick:_,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",title:"Xa ch k",children:v.jsx(Xo,{className:"h-3 w-3"})})]})}):v.jsx("div",{className:"mb-3 flex items-center justify-center h-20 rounded-lg border-2 border-dashed border-indigo-200",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:v.jsx("span",{className:"text-sm text-gray-400",children:"Cha c ch k"})}),v.jsx("button",{type:"button",onClick:()=>{var C;return(C=T.current)==null?void 0:C.click()},disabled:E,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-700 bg-white border border-indigo-300 rounded-lg hover:bg-indigo-50 transition-colors disabled:opacity-50",children:E?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"})," ang ti..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Uo,{className:"h-4 w-4"})," ",f?"Thay i ch k":"Ti ln ch k"]})}),v.jsx("input",{type:"file",ref:T,onChange:k,accept:"image/png",className:"hidden"})]}),v.jsxs("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-100",children:[v.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-300 transition-all",children:"Hy b"}),v.jsx("button",{type:"submit",disabled:m,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"})," ang lu..."]}):v.jsxs(v.Fragment,{children:[v.jsx(l2,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},t9e=()=>{const t=Up(),e=fu(),{user:n,logout:r}=Bl(),{notifications:i,unreadCount:s,markAllAsRead:o,markAsRead:a,removeNotification:l}=bd(),[c,u]=De.useState(!1),[d,f]=De.useState(!1),[h,m]=De.useState(!1),[y,w]=De.useState(!1),[b,E]=De.useState(""),[A,x]=De.useState(""),T=De.useRef(null),R=De.useRef(null);if(De.useEffect(()=>{const M=C=>{T.current&&!T.current.contains(C.target)&&u(!1),R.current&&!R.current.contains(C.target)&&f(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]),De.useEffect(()=>{(async()=>{try{const C=Bn(Kt,"app_settings","system_logo"),D=await Ku(C);D.exists()&&D.data().imageUrl&&E(D.data().imageUrl);const O=Bn(Kt,"app_settings","certification_logo"),$=await Ku(O);$.exists()&&$.data().imageUrl&&x($.data().imageUrl)}catch(C){console.error("Error fetching logo:",C)}})()},[]),t.pathname==="/login")return null;const k=async()=>{await r(),e("/login")},_=M=>M?M.charAt(0).toUpperCase():"U",N=M=>{switch(M){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},L=M=>{switch(M){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return v.jsxs("header",{className:`sticky top-0 z-50 w-full ${L(n==null?void 0:n.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between items-center h-20",children:[v.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[v.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:b?v.jsx("img",{src:b,alt:"Logo",className:"h-8 w-8 object-contain"}):v.jsx(L$,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:lce}),v.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),A&&v.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:v.jsx("img",{src:A,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),v.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[v.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[v.jsx(tw,{className:"h-5 w-5 text-white/70"}),v.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),v.jsxs("div",{className:"relative",ref:R,children:[v.jsxs("button",{onClick:()=>f(!d),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${s>0?"animate-wiggle":""}`,children:[v.jsx(rY,{className:`h-6 w-6 ${d?"text-white":""} group-hover:scale-110 transition-transform`}),s>0&&v.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:s})]}),d&&v.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[v.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),s>0&&v.jsxs("button",{onClick:o,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[v.jsx(BS,{className:"h-3 w-3"})," nh du  c"]})]}),v.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[i.map(M=>v.jsxs("div",{onClick:()=>{if(a(M.id),l(M.id),M.targetPath){const C=M.targetPath.includes("?")?"&":"?";e(`${M.targetPath}${C}highlight=true`),f(!1)}},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${M.isRead?"bg-white":"bg-blue-50/40"}`,children:[v.jsxs("div",{className:"flex-shrink-0 pt-1",children:[M.avatar?v.jsx("img",{src:M.avatar,alt:M.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):v.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${M.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:_(M.user)}),v.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[M.type==="upload"&&v.jsx(sr,{className:"h-3 w-3 text-emerald-500"}),M.type==="comment"&&v.jsx(Xy,{className:"h-3 w-3 text-blue-500"})]})]}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[v.jsx("span",{className:"font-bold",children:M.user})," ",M.content]}),v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("span",{className:"text-xs text-gray-400 font-medium",children:M.time}),M.fileType&&v.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:M.fileType}),!M.isRead&&v.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},M.id)),i.length===0&&v.jsxs("div",{className:"p-8 text-center text-gray-400",children:[v.jsx(rY,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),v.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),v.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:v.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),v.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:T,children:[v.jsxs("button",{onClick:()=>u(!c),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${c?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[v.jsxs("div",{className:"relative",children:[n!=null&&n.avatar?v.jsx("img",{src:n.avatar,alt:n.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):v.jsx("div",{className:`h-9 w-9 rounded-full ${N(n==null?void 0:n.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:n?_(n.fullName):v.jsx(h6e,{className:"h-6 w-6"})}),v.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),n?v.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[v.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:n.fullName}),v.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:n.roleLabel})]}):v.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:v.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),v.jsx(a6e,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${c?"rotate-180":""}`})]}),c&&v.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[v.jsx("p",{className:"text-sm font-bold text-gray-900",children:(n==null?void 0:n.fullName)||"Khch"}),v.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.roleLabel})]}),v.jsxs("div",{className:"p-1.5",children:[v.jsxs("button",{onClick:()=>{u(!1),w(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[v.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:v.jsx(hp,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),v.jsxs("button",{onClick:()=>{u(!1),m(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[v.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:v.jsx(nNe,{className:"h-4 w-4"})}),"i mt khu"]})]}),v.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),v.jsx("div",{className:"p-1.5",children:v.jsxs("button",{onClick:k,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[v.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:v.jsx(j6e,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),v.jsx(QOe,{isOpen:h,onClose:()=>m(!1)}),v.jsx(e9e,{isOpen:y,onClose:()=>w(!1)})]})},n9e=({data:t,onClick:e})=>{const{id:n,title:r,description:i,icon:s,colorClass:o,bgClass:a,hoverClass:l,stats:c}=t;return v.jsxs("div",{onClick:()=>e(n),className:`
        group relative overflow-hidden rounded-2xl border border-gray-100 bg-white p-8 shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-2 hover:shadow-xl
        ${l}
      `,children:[v.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${a} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:`mb-6 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${a} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:v.jsx(s,{className:`h-8 w-8 ${o}`})}),v.jsx("h3",{className:"mb-3 text-2xl font-bold text-gray-800 group-hover:text-gray-900 tracking-tight",children:r}),v.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:i})]}),v.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[c&&v.jsx("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all",children:c}),v.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${o} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",v.jsx(tN,{className:"h-4 w-4"})]})]})]})]})},r9e=()=>{var o;const t=fu(),{user:e,isAuthenticated:n}=Bl(),[r,i]=cf.useState([]);if(De.useEffect(()=>{const a=No(Ai(Kt,"classes")),l=Of(a,async c=>{const u=c.docs.map(w=>({id:w.id,...w.data()})),d=No(Ai(Kt,"users"),au("role","in",["teacher","head_teacher"])),h=(await Xu(d)).docs.map(w=>w.data()),m=w=>w.toLowerCase().trim().replace(/\s+/g," "),y=u.map(w=>{const b=new Set,E=m(w.id),A=m(w.name);h.forEach(T=>{if(!T.accessScope)return;const R=m(T.accessScope);(R===E||R===A||A.includes(R)||R.includes(A))&&b.add(T.fullName)});const x=Array.from(b);return{...w,teachers:x.length>0?x:["Cha phn cng"],teacher:x.length>0?x.join(", "):"Cha phn cng"}});y.sort((w,b)=>w.name.localeCompare(b.name)),i(y)});return()=>l()},[]),De.useEffect(()=>{n||t("/login")},[n,t]),!e)return null;const s=a=>{var l;if(a==="van-ban-chi-dao")t("/van-ban-chi-dao");else if(a==="van-ban-truong")t("/van-ban-truong");else if(a==="quan-tri-he-thong")t("/quan-tri-he-thong");else if(a==="to-van-phong-ke-hoach")t("/to-van-phong-ke-hoach");else if(a==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}t("/to-van-phong-thuc-don")}else if(a==="to-chuyen-mon-ke-hoach")t("/to-chuyen-mon-ke-hoach");else if(a.startsWith("class-")){const c=a.replace("class-","");if(e.role==="teacher"){const u=r.find(f=>f.id===c),d=(l=e.accessScope)==null?void 0:l.toLowerCase().trim();if(u&&d!==c.toLowerCase()&&d!==u.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}t(`/class/${c}`)}else console.log(`Navigating to category: ${a}`),alert(`ang truy cp vo phn h: ${a} (ang pht trin)`)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[v.jsx("div",{className:"bg-white border-b border-gray-200 pt-8 pb-8 mb-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx(rce,{className:"h-5 w-5 text-yellow-500"}),v.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),v.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["Xin cho c: ",e.fullName]}),v.jsxs("p",{className:"text-gray-500 mt-1",children:["Vai tr: ",v.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",v.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 xl:gap-8",children:[v.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col",children:[v.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),v.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[v.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:v.jsx(k6e,{className:"h-7 w-7"})}),v.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors",children:"QUN L VN BN CHUNG"}),v.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),v.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 mt-2",children:[v.jsxs("div",{onClick:()=>t("/van-ban-chi-dao"),className:"bg-white p-6 cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:v.jsx(L6e,{className:"h-6 w-6"})}),v.jsx(tN,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),v.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-blue-700",children:"Vn bn Cp trn"}),v.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"S/B GD"}),v.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"UBND"})]})]}),v.jsxs("div",{onClick:()=>t("/van-ban-truong"),className:"bg-white p-6 cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:v.jsx(ace,{className:"h-6 w-6"})}),v.jsx(tN,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),v.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-emerald-700",children:"Vn bn Ni b"}),v.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"K hoch"}),v.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Quyt nh"}),v.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&v.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col",children:[v.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),v.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[v.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:v.jsx(nN,{className:"h-7 w-7"})}),v.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors",children:"T VN PHNG"}),v.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),v.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row border-t border-indigo-50 mt-4",children:[v.jsxs("div",{onClick:()=>s("to-van-phong-ke-hoach"),className:"flex-1 p-6 cursor-pointer hover:bg-indigo-50/60 transition-colors border-b sm:border-b-0 sm:border-r border-indigo-50 group/item",children:[v.jsx("div",{className:"flex items-start justify-between mb-3",children:v.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg shadow-sm",children:v.jsx(sr,{className:"h-5 w-5"})})}),v.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-indigo-700",children:"K HOCH & BO CO"}),v.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"K hoch ti chnh, Y t, Hot ng chung"})]}),v.jsxs("div",{onClick:()=>s("to-van-phong-thuc-don"),className:"flex-1 p-6 cursor-pointer hover:bg-purple-50/60 transition-colors group/item",children:[v.jsx("div",{className:"flex items-start justify-between mb-3",children:v.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:v.jsx(UP,{className:"h-5 w-5"})})}),v.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-purple-700",children:"THC N & BN TR"}),v.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&v.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col",children:[v.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),v.jsxs("div",{className:"p-8 pb-2 relative z-10",children:[v.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:v.jsx(L$,{className:"h-8 w-8"})}),v.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors",children:"T CHUYN MN"}),v.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),v.jsx("div",{className:"px-6 pb-4 relative z-10",children:v.jsxs("div",{onClick:()=>s("to-chuyen-mon-ke-hoach"),className:"flex items-center justify-between p-3 rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-white rounded-lg text-amber-600 shadow-sm",children:v.jsx(Z_e,{className:"h-5 w-5"})}),v.jsx("div",{children:v.jsx("h4",{className:"text-sm font-bold text-gray-800 group-hover/plan:text-amber-700",children:"K hoch T & Bin bn"})})]}),v.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),v.jsxs("div",{className:"flex-1 bg-gray-50/50 border-t border-amber-100 p-6 pt-4",children:[v.jsx("div",{className:"mb-4",children:v.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-3",children:"LP HC CA TI"})}),v.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.map(a=>{var l;if(e.role==="teacher"){const c=(l=e.accessScope)==null?void 0:l.toLowerCase().trim(),u=a.id.toLowerCase(),d=a.name.toLowerCase();if(c!==u&&c!==d)return null}return v.jsxs("button",{onClick:()=>s(`class-${a.id}`),className:"relative group/btn flex flex-col items-center justify-center py-2 px-1 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all",children:[v.jsx("span",{className:"text-xs font-bold text-gray-700 group-hover/btn:text-amber-800",children:a.name}),a.newFiles>0&&v.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},a.id)})})]})]}),(e.role==="admin"||e.role==="vice_principal"&&((o=e.permissions)==null?void 0:o.includes("access_system_admin")))&&bNe.map(a=>v.jsx(n9e,{data:a,onClick:s},a.id))]})})]})},i9e=t=>{try{const e=new URL(t),n=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(i=>n.endsWith(i))}catch{const n=t.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(i=>n.endsWith(i))}},g2=t=>!t||t==="#"?"#":t.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":i9e(t)?`https://docs.google.com/viewer?url=${encodeURIComponent(t)}&embedded=true`:t,JD=({children:t,colorClass:e})=>v.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:t}),s9e=()=>{var me;const t=fu(),{addToast:e}=bd(),[n,r]=De.useState([]),[i,s]=De.useState(""),[o,a]=De.useState("Tt c"),{user:l}=Bl(),c=(me=l==null?void 0:l.permissions)==null?void 0:me.includes("manage_documents"),[u,d]=De.useState(null),[f,h]=De.useState(!1),[m,y]=De.useState(!1),[w,b]=De.useState(!1),[E,A]=De.useState(!1),[x,T]=De.useState(null),[R,k]=De.useState(1),[_,N]=De.useState({}),[L,M]=De.useState(null),[C,D]=De.useState("");cf.useEffect(()=>{const G=No(Ai(Kt,"directive_documents"),m2("ngayBanHanh","desc")),B=Of(G,z=>{const de=[];z.forEach(Y=>{de.push({id:Y.id,...Y.data()})}),r(de)});return()=>B()},[]);const O=De.useMemo(()=>n.filter(G=>{const B=G.trichYeu.toLowerCase().includes(i.toLowerCase())||G.soKyHieu.toLowerCase().includes(i.toLowerCase()),z=o==="Tt c"||G.coQuanBanHanh===o;return B&&z}),[n,i,o]),$=G=>{T(G),A(!0)},U=async()=>{if(x){try{await sw(Bn(Kt,"directive_documents",x.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(G){console.error("Error deleting document:",G),e("Li xa ti liu","Khng th xa ti liu ny.","error")}A(!1),T(null)}},W=G=>{d(G),k(1),h(!0)},ce=()=>{N({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),M(null),D(""),b(!1),y(!0)},se=G=>{N({...G}),b(!0),M(null),D(G.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),y(!0)},Q=G=>{if(G.target.files&&G.target.files[0]){const B=G.target.files[0];M(B),D(B.name)}},J=G=>{G.fileDinhKemUrl&&G.fileDinhKemUrl!=="#"?window.open(G.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},K=()=>{M(null),D("")},re=async G=>{if(G.preventDefault(),!(!_.trichYeu||!_.soKyHieu))try{let B=_.fileDinhKemUrl||"#";if(L){const z=Rl(Ya,`directive_documents/${Date.now()}_${L.name}`),de=await Qc(z,L);B=await eu(de.ref)}else!C&&!_.fileDinhKemUrl&&(B="#");w&&_.id?(await Qi(Bn(Kt,"directive_documents",_.id),{..._,fileDinhKemUrl:B}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await ow(Ai(Kt,"directive_documents"),{..._,fileDinhKemUrl:B,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),y(!1)}catch(B){console.error("Error saving document:",B),e("Li lu d liu","Khng th lu vn bn ny.","error")}},X=G=>{switch(G){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[v.jsx("div",{className:"bg-white border-b border-gray-200",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("button",{onClick:()=>t("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[v.jsx(R$,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),v.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:v.jsx(sr,{className:"h-6 w-6 text-blue-600"})}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CH O"})]})]}),c&&v.jsxs("button",{onClick:ce,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[v.jsx(rx,{className:"h-5 w-5"}),v.jsx("span",{children:"Thm vn bn mi"})]})]}),v.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[v.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(G=>v.jsx("button",{onClick:()=>a(G),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${o===G?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:G},G))}),v.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:v.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(tw,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),v.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:i,onChange:G=>s(G.target.value)})]})})]})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),v.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),v.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length>0?O.map(G=>v.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>W(G),children:[v.jsx("td",{className:"px-6 py-4",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:v.jsx(sr,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:G.trichYeu}),G.tomTatNoiDung&&v.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:G.tomTatNoiDung})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:G.soKyHieu}),v.jsx(JD,{colorClass:"bg-yellow-100 text-yellow-800",children:G.loaiVanBan})]}),v.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(FS,{className:"h-3 w-3"}),v.jsx("span",{className:X(G.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:G.coQuanBanHanh})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Eb,{className:"h-3 w-3"}),new Date(G.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:v.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:B=>B.stopPropagation(),children:[v.jsx("button",{onClick:()=>W(G),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:v.jsx(IA,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>J(G),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-4 w-4"})}),c&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>se(G),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:v.jsx(sx,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>$(G),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:v.jsx(Xo,{className:"h-4 w-4"})})]})]})})]},G.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(sr,{className:"h-12 w-12 text-gray-300 mb-3"}),v.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),v.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[v.jsxs("span",{children:["Hin th ",O.length," vn bn"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),v.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),E&&x&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',x.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),f&&u&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[v.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[v.jsx(sr,{className:"h-5 w-5"})," Chi tit vn bn"]}),v.jsx("button",{onClick:()=>h(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:v.jsx(hs,{className:"h-6 w-6"})})]}),"   ",v.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[v.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[v.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:u.trichYeu}),v.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[v.jsx(JD,{colorClass:"bg-blue-100 text-blue-800",children:u.coQuanBanHanh}),v.jsx(JD,{colorClass:"bg-yellow-100 text-yellow-800",children:u.loaiVanBan}),v.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[v.jsx(Eb,{className:"h-3 w-3"})," ",new Date(u.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),v.jsxs("div",{className:"space-y-4 mb-8",children:[v.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),v.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:u.soKyHieu})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),v.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(u.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),v.jsxs("div",{children:[v.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[v.jsx(FS,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),v.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:u.coQuanBanHanh})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),v.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:u.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),v.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[v.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),v.jsxs("button",{onClick:()=>J(u),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[v.jsx(hc,{className:"h-4 w-4"})," Ti v my"]})]})]}),v.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[v.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[v.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),v.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[v.jsx("button",{onClick:()=>k(G=>Math.max(.5,G-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:v.jsx(T4,{className:"h-4 w-4"})}),v.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(R*100),"%"]}),v.jsx("button",{onClick:()=>k(G=>Math.min(2,G+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:v.jsx(A4,{className:"h-4 w-4"})}),v.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),v.jsx("button",{onClick:()=>k(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:v.jsx(oce,{className:"h-4 w-4"})})]})]}),v.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:v.jsx("div",{className:"absolute inset-0 w-full h-full",children:u.fileDinhKemUrl&&u.fileDinhKemUrl!=="#"?v.jsx("iframe",{src:g2(u.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),m&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[w?v.jsx(sx,{className:"h-5 w-5"}):v.jsx(rx,{className:"h-5 w-5"}),w?"Cp nht vn bn":"Thm vn bn mi"]}),v.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsx("div",{className:"p-6 overflow-y-auto",children:v.jsxs("form",{id:"documentForm",onSubmit:re,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:_.trichYeu||"",onChange:G=>N({..._,trichYeu:G.target.value})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:_.soKyHieu||"",onChange:G=>N({..._,soKyHieu:G.target.value})})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:_.ngayBanHanh||"",onChange:G=>N({..._,ngayBanHanh:G.target.value})})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:_.coQuanBanHanh||"B GD&T",onChange:G=>N({..._,coQuanBanHanh:G.target.value}),children:[v.jsx("option",{value:"B GD&T",children:"B GD&T"}),v.jsx("option",{value:"S GD&T",children:"S GD&T"}),v.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),v.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),v.jsx("option",{value:"Khc",children:"Khc"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:_.loaiVanBan||"Cng vn",onChange:G=>N({..._,loaiVanBan:G.target.value}),children:[v.jsx("option",{value:"Cng vn",children:"Cng vn"}),v.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),v.jsx("option",{value:"Thng bo",children:"Thng bo"}),v.jsx("option",{value:"K hoch",children:"K hoch"}),v.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),v.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),v.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:_.tomTatNoiDung||"",onChange:G=>N({..._,tomTatNoiDung:G.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),C?v.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:v.jsx(sr,{className:"h-6 w-6"})}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("p",{className:"text-sm font-medium text-gray-900",children:C}),v.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[v.jsx(sc,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),v.jsx("button",{type:"button",onClick:K,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:v.jsx(hs,{className:"h-5 w-5"})})]}):v.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[v.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q}),v.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),v.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[v.jsx(So,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),v.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[v.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:v.jsx("span",{children:"Ti file ln"})}),v.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),v.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[v.jsx(l2,{className:"h-4 w-4"})," ",w?"Lu thay i":"To mi"]})]})]})})]})},GZ=({children:t,colorClass:e})=>v.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:t}),o9e=()=>{var me;const t=fu(),{addToast:e}=bd(),[n,r]=De.useState([]),[i,s]=De.useState(""),[o,a]=De.useState("Tt c"),{user:l}=Bl(),c=(me=l==null?void 0:l.permissions)==null?void 0:me.includes("manage_documents"),[u,d]=De.useState(null),[f,h]=De.useState(!1),[m,y]=De.useState(!1),[w,b]=De.useState(!1),[E,A]=De.useState(!1),[x,T]=De.useState(null),[R,k]=De.useState(1),[_,N]=De.useState({}),[L,M]=De.useState(null),[C,D]=De.useState("");cf.useEffect(()=>{const G=No(Ai(Kt,"school_documents"),m2("ngayBanHanh","desc")),B=Of(G,z=>{const de=[];z.forEach(Y=>{de.push({id:Y.id,...Y.data()})}),r(de)});return()=>B()},[]);const O=De.useMemo(()=>n.filter(G=>{const B=G.trichYeu.toLowerCase().includes(i.toLowerCase())||G.soKyHieu.toLowerCase().includes(i.toLowerCase()),z=o==="Tt c"||G.loaiVanBan===o;return B&&z}),[n,i,o]),$=G=>{T(G),A(!0)},U=async()=>{if(x){try{await sw(Bn(Kt,"school_documents",x.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(G){console.error("Error deleting document:",G),e("Li xa ti liu","Khng th xa ti liu ny.","error")}A(!1),T(null)}},W=G=>{d(G),k(1),h(!0)},ce=()=>{N({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),M(null),D(""),b(!1),y(!0)},se=G=>{N({...G}),b(!0),M(null),D(G.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),y(!0)},Q=G=>{if(G.target.files&&G.target.files[0]){const B=G.target.files[0];M(B),D(B.name)}},J=G=>{G.fileDinhKemUrl&&G.fileDinhKemUrl!=="#"?window.open(G.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},K=()=>{M(null),D("")},re=async G=>{if(G.preventDefault(),!(!_.trichYeu||!_.soKyHieu))try{let B=_.fileDinhKemUrl||"#";if(L){const z=Rl(Ya,`school_documents/${Date.now()}_${L.name}`),de=await Qc(z,L);B=await eu(de.ref)}else!C&&!_.fileDinhKemUrl&&(B="#");w&&_.id?(await Qi(Bn(Kt,"school_documents",_.id),{..._,fileDinhKemUrl:B}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await ow(Ai(Kt,"school_documents"),{..._,fileDinhKemUrl:B,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),y(!1)}catch(B){console.error("Error saving document:",B),e("Li lu d liu","Khng th lu vn bn ny.","error")}},X=G=>{switch(G){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[v.jsx("div",{className:"bg-white border-b border-gray-200",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("button",{onClick:()=>t("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[v.jsx(R$,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),v.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:v.jsx(FS,{className:"h-6 w-6 text-emerald-600"})}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CA TRNG"})]})]}),c&&v.jsxs("button",{onClick:ce,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[v.jsx(rx,{className:"h-5 w-5"}),v.jsx("span",{children:"Thm vn bn mi"})]})]}),v.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[v.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(G=>v.jsx("button",{onClick:()=>a(G),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${o===G?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:G},G))}),v.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:v.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(tw,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),v.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:i,onChange:G=>s(G.target.value)})]})})]})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),v.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),v.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length>0?O.map(G=>v.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>W(G),children:[v.jsx("td",{className:"px-6 py-4",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:v.jsx(sr,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:G.trichYeu}),G.tomTatNoiDung&&v.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:G.tomTatNoiDung})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:G.soKyHieu}),v.jsx(GZ,{colorClass:X(G.loaiVanBan),children:G.loaiVanBan})]}),v.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(FS,{className:"h-3 w-3"}),v.jsx("span",{children:G.coQuanBanHanh})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Eb,{className:"h-3 w-3"}),new Date(G.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:v.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:B=>B.stopPropagation(),children:[v.jsx("button",{onClick:()=>W(G),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:v.jsx(IA,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>J(G),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-4 w-4"})}),c&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>se(G),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:v.jsx(sx,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>$(G),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:v.jsx(Xo,{className:"h-4 w-4"})})]})]})})]},G.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(sr,{className:"h-12 w-12 text-gray-300 mb-3"}),v.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),v.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[v.jsxs("span",{children:["Hin th ",O.length," vn bn"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),v.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),E&&x&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',x.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),f&&u&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[v.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[v.jsx(sr,{className:"h-5 w-5"})," Chi tit vn bn"]}),v.jsx("button",{onClick:()=>h(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[v.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[v.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:u.trichYeu}),v.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[v.jsx(GZ,{colorClass:X(u.loaiVanBan),children:u.loaiVanBan}),v.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[v.jsx(Eb,{className:"h-3 w-3"})," ",new Date(u.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),v.jsxs("div",{className:"space-y-4 mb-8",children:[v.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),v.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:u.soKyHieu})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),v.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(u.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),v.jsxs("div",{children:[v.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[v.jsx(FS,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),v.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:u.coQuanBanHanh})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),v.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:u.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),v.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[v.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),v.jsxs("button",{onClick:()=>J(u),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[v.jsx(hc,{className:"h-4 w-4"})," Ti v my"]})]})]}),v.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[v.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[v.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),v.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[v.jsx("button",{onClick:()=>k(G=>Math.max(.5,G-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:v.jsx(T4,{className:"h-4 w-4"})}),v.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(R*100),"%"]}),v.jsx("button",{onClick:()=>k(G=>Math.min(2,G+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:v.jsx(A4,{className:"h-4 w-4"})}),v.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),v.jsx("button",{onClick:()=>k(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:v.jsx(oce,{className:"h-4 w-4"})})]})]}),v.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:v.jsx("div",{className:"absolute inset-0 w-full h-full",children:u.fileDinhKemUrl&&u.fileDinhKemUrl!=="#"?v.jsx("iframe",{src:g2(u.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),m&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[w?v.jsx(sx,{className:"h-5 w-5"}):v.jsx(rx,{className:"h-5 w-5"}),w?"Cp nht vn bn":"Thm vn bn mi"]}),v.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsx("div",{className:"p-6 overflow-y-auto",children:v.jsxs("form",{id:"documentForm",onSubmit:re,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:_.trichYeu||"",onChange:G=>N({..._,trichYeu:G.target.value})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:_.soKyHieu||"",onChange:G=>N({..._,soKyHieu:G.target.value})})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:_.ngayBanHanh||"",onChange:G=>N({..._,ngayBanHanh:G.target.value})})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:_.coQuanBanHanh||"Ban Gim Hiu",onChange:G=>N({..._,coQuanBanHanh:G.target.value}),children:[v.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),v.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),v.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),v.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),v.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),v.jsx("option",{value:"Khc",children:"Khc"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:_.loaiVanBan||"K hoch",onChange:G=>N({..._,loaiVanBan:G.target.value}),children:[v.jsx("option",{value:"K hoch",children:"K hoch"}),v.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),v.jsx("option",{value:"Thng bo",children:"Thng bo"}),v.jsx("option",{value:"Bo co",children:"Bo co"}),v.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),v.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:_.tomTatNoiDung||"",onChange:G=>N({..._,tomTatNoiDung:G.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),C?v.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:v.jsx(sr,{className:"h-6 w-6"})}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("p",{className:"text-sm font-medium text-gray-900",children:C}),v.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[v.jsx(sc,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),v.jsx("button",{type:"button",onClick:K,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:v.jsx(hs,{className:"h-5 w-5"})})]}):v.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[v.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q}),v.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),v.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[v.jsx(So,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),v.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[v.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:v.jsx("span",{children:"Ti file ln"})}),v.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),v.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[v.jsx(l2,{className:"h-4 w-4"})," ",w?"Lu thay i":"To mi"]})]})]})})]})},a9e=()=>{const{user:t}=Bl(),{addToast:e}=bd(),[n,r]=De.useState(""),[i,s]=De.useState(""),[o,a]=De.useState(null),[l,c]=De.useState(!1),[u,d]=De.useState(""),[f,h]=De.useState(""),[m,y]=De.useState(null),[w,b]=De.useState(!1),[E,A]=De.useState("/login-background.jpg"),[x,T]=De.useState(""),[R,k]=De.useState(null),[_,N]=De.useState(!1),[L,M]=De.useState(!0),[C,D]=De.useState(!1),[O,$]=De.useState(null),[U,W]=De.useState(!1),[ce,se]=De.useState(null),Q=async()=>{if(t){D(!0),$(null);try{let ee=0,ae=0;const ie=await Xu(Ai(Kt,"plans")),H=GD(Kt);ie.forEach(Z=>{const oe=Z.data();if(!oe.approval||!oe.approval.status){const te=Bn(Kt,"plans",Z.id);H.update(te,{approval:{status:"pending"},uploaderRole:oe.uploaderRole||"teacher"}),ee++}}),ee>0&&await H.commit();const be=await Xu(Ai(Kt,"class_files")),Te=GD(Kt);be.forEach(Z=>{const oe=Z.data();if(!oe.approval||!oe.approval.status){const te=Bn(Kt,"class_files",Z.id);Te.update(te,{approval:{status:"pending"},uploaderRole:oe.uploaderRole||"teacher"}),ae++}}),ae>0&&await Te.commit(),$({plans:ee,classFiles:ae}),ee>0||ae>0?e("Migration hon thnh!",` cp nht ${ee} k hoch v ${ae} h s lp.`,"success"):e("Khng c g  cp nht","Tt c ti liu  c trng thi duyt.","success")}catch(ee){console.error("Migration error:",ee),e("Li Migration","Khng th cp nht d liu. Xem console  bit chi tit.","error")}finally{D(!1)}}},J=async()=>{if(!(!t||!window.confirm("Bn c chc mun xa tt c thng bo c c ng dn sai (/professional-group-plans)?"))){W(!0),se(null);try{let ee=0;const ae=await Xu(Ai(Kt,"notifications")),ie=[];if(ae.forEach(H=>{const be=H.data();be.targetPath&&be.targetPath.includes("/professional-group-plans")&&ie.push(H.id)}),ie.length>0){for(let be=0;be<ie.length;be+=450){const Te=ie.slice(be,be+450),Z=GD(Kt);Te.forEach(oe=>{Z.delete(Bn(Kt,"notifications",oe))}),await Z.commit(),ee+=Te.length,console.log(`Deleted chunk: ${ee}/${ie.length}`)}e("Dn dp hon tt!",` xa ${ee} thng bo c sai ng dn.`,"success")}else e("Khng c thng bo li","Tt c thng bo hin ti u hp l.","success");se(ee)}catch(ee){console.error("Cleanup error details:",ee);const ae=ee.code==="permission-denied"?"Li dn dp: Quyn truy cp b t chi. Vui lng kim tra li quyn Admin.":`Li dn dp: ${ee.message||"Khng th xa d liu c."}`;e("Li",ae,"error")}finally{W(!1)}}};De.useEffect(()=>{(async()=>{try{const ae=Bn(Kt,"app_settings","login_background"),ie=await Ku(ae);ie.exists()&&ie.data().imageUrl&&A(ie.data().imageUrl);const H=Bn(Kt,"app_settings","system_logo"),be=await Ku(H);be.exists()&&be.data().imageUrl&&r(be.data().imageUrl);const Te=Bn(Kt,"app_settings","certification_logo"),Z=await Ku(Te);Z.exists()&&Z.data().imageUrl&&d(Z.data().imageUrl)}catch(ae){console.error("Error fetching settings:",ae)}finally{M(!1)}})()},[]);const K=ee=>{if(ee.target.files&&ee.target.files[0]){const ae=ee.target.files[0];if(!ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(ae.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}a(ae),s(URL.createObjectURL(ae))}},re=async()=>{if(!(!o||!t)){c(!0);try{const ee=Date.now(),ae=Rl(Ya,`app_settings/system-logo-${ee}.png`);await Qc(ae,o);const ie=await eu(ae);await M_(Bn(Kt,"app_settings","system_logo"),{imageUrl:ie,updatedAt:new Date().toISOString(),updatedBy:t.id,updatedByName:t.fullName}),r(ie),s(""),a(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(ee){console.error("Error uploading logo:",ee),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{c(!1)}}},X=()=>{s(""),a(null)},me=ee=>{if(ee.target.files&&ee.target.files[0]){const ae=ee.target.files[0];if(!ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(ae.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}y(ae),h(URL.createObjectURL(ae))}},G=async()=>{if(!(!m||!t)){b(!0);try{const ee=Date.now(),ae=Rl(Ya,`app_settings/cert-logo-${ee}.png`);await Qc(ae,m);const ie=await eu(ae);await M_(Bn(Kt,"app_settings","certification_logo"),{imageUrl:ie,updatedAt:new Date().toISOString(),updatedBy:t.id,updatedByName:t.fullName}),d(ie),h(""),y(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(ee){console.error("Error uploading cert logo:",ee),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{b(!1)}}},B=()=>{h(""),y(null)},z=ee=>{if(ee.target.files&&ee.target.files[0]){const ae=ee.target.files[0];if(!ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(ae.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}k(ae),T(URL.createObjectURL(ae))}},de=async()=>{if(!(!R||!t)){N(!0);try{const ee=Date.now(),ae=Rl(Ya,`app_settings/login-background-${ee}.jpg`);await Qc(ae,R);const ie=await eu(ae);await M_(Bn(Kt,"app_settings","login_background"),{imageUrl:ie,updatedAt:new Date().toISOString(),updatedBy:t.id,updatedByName:t.fullName}),A(ie),T(""),k(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(ee){console.error("Error uploading:",ee),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{N(!1)}}},Y=()=>{T(""),k(null)};return L?v.jsx("div",{className:"flex items-center justify-center py-12",children:v.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"p-3 bg-amber-600 rounded-lg",children:v.jsx(iY,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Migration: Thm Trng Thi Duyt"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Cp nht cc ti liu c (K hoch T CM v H s Lp) vi trng thi "Ch duyt"  kch hot chc nng ph duyt mi.',v.jsx("br",{}),v.jsx("span",{className:"text-amber-700 font-medium font-sans",children:"Lu : Ch cn chy mt ln. Cc ti liu  c trng thi s khng b nh hng."})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{onClick:Q,disabled:C,className:"flex items-center gap-2 px-6 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:C?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"}),"ang x l..."]}):v.jsxs(v.Fragment,{children:[v.jsx(iY,{className:"h-4 w-4"}),"Chy Migration"]})}),O&&v.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:["  cp nht: ",v.jsx("span",{className:"font-bold",children:O.plans})," k hoch, ",v.jsx("span",{className:"font-bold",children:O.classFiles})," h s lp"]})]})]})]})}),v.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl p-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"p-3 bg-red-600 rounded-lg",children:v.jsx(lY,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Dn dp: Thng bo li ng dn"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Khc phc vn  "Trang trng" khi nhn vo thng bo c.',v.jsx("br",{}),v.jsx("span",{className:"text-red-700 font-medium font-sans",children:"Dn sch cc thng bo cha ng dn c (/professional-group-plans)."})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{onClick:J,disabled:U,className:"flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:U?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"}),"ang dn dp..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Xo,{className:"h-4 w-4"}),"Dn dp thng bo li"]})}),ce!==null&&v.jsxs("div",{className:"text-sm text-red-700 bg-red-100 px-3 py-1.5 rounded-lg border border-red-200",children:["  xa: ",v.jsx("span",{className:"font-bold",children:ce})," thng bo li"]})]})]})]})})]}),v.jsx("hr",{className:"border-gray-200"}),v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:v.jsx(DD,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(BS,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),v.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:n?v.jsx("img",{src:n,alt:"Current Logo",className:"h-32 w-32 object-contain"}):v.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(So,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),v.jsxs("div",{className:"p-6",children:[v.jsx("div",{className:"mb-4",children:v.jsx("input",{type:"file",accept:"image/*",onChange:K,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),i&&v.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:v.jsx("img",{src:i,alt:"Preview",className:"h-24 w-24 object-contain"})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:re,disabled:!o||l,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:l?"ang ti...":"Lu Logo"}),i&&v.jsx("button",{onClick:X,disabled:l,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),v.jsx("hr",{className:"border-gray-200"}),v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:v.jsx(DD,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(BS,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),v.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:u?v.jsx("img",{src:u,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):v.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(So,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),v.jsxs("div",{className:"p-6",children:[v.jsx("div",{className:"mb-4",children:v.jsx("input",{type:"file",accept:"image/*",onChange:me,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),f&&v.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:v.jsx("img",{src:f,alt:"Preview",className:"h-24 w-24 object-contain"})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:G,disabled:!m||w,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:w?"ang ti...":"Lu Logo"}),f&&v.jsx("button",{onClick:B,disabled:w,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),v.jsx("hr",{className:"border-gray-200"}),v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:v.jsx(DD,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(BS,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),v.jsx("div",{className:"p-6",children:v.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:v.jsx("img",{src:E,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),v.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:v.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[v.jsx(So,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),v.jsx("input",{type:"file",accept:"image/*",onChange:z,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),v.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[v.jsx(Nl,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),x&&v.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[v.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),v.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:v.jsx("img",{src:x,alt:"Preview",className:"w-full h-64 object-contain"})})]}),v.jsxs("div",{className:"mt-6 flex gap-3",children:[v.jsx("button",{onClick:de,disabled:!R||_,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:_?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):v.jsxs(v.Fragment,{children:[v.jsx(So,{className:"h-4 w-4"}),"Lu v p dng"]})}),x&&v.jsxs("button",{onClick:Y,disabled:_,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[v.jsx(lY,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),v.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:v.jsxs("div",{className:"flex gap-3",children:[v.jsx(Nl,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),v.jsxs("div",{className:"text-sm text-amber-800",children:[v.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),v.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[v.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),v.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),v.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),v.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},l9e=()=>{var K,re,X,me,G;const t=fu(),{user:e}=Bl(),{addToast:n}=bd(),[r,i]=De.useState("users"),[s,o]=cf.useState([]),[a,l]=cf.useState({}),[c,u]=cf.useState({});cf.useEffect(()=>{var B;e&&(e.role==="admin"||(B=e.permissions)!=null&&B.includes("access_system_admin")||(n("Bn khng c quyn truy cp khu vc ny.","error"),t("/")))},[e,t,n]);const[d,f]=De.useState([]),[h,m]=De.useState(""),[y,w]=De.useState("Tt c"),[b,E]=De.useState(!1),[A,x]=De.useState(!1),[T,R]=De.useState(!1),[k,_]=De.useState({}),[N,L]=De.useState(""),[M,C]=De.useState(!1);cf.useEffect(()=>{const B=No(Ai(Kt,"classes")),z=Of(B,de=>{const Y=de.docs.map(ie=>({id:ie.id,...ie.data()}));Y.sort((ie,H)=>ie.name.localeCompare(H.name)),o(Y);const ee={},ae={};Y.forEach(ie=>{ee[ie.name]=ie.id,ae[ie.id]=ie.name}),l(ee),u(ae)});return()=>z()},[]),cf.useEffect(()=>{const B=No(Ai(Kt,"users")),z=Of(B,de=>{const Y=[];de.forEach(ee=>{Y.push({id:ee.id,...ee.data()})}),f(Y)});return()=>z()},[]);const D=De.useMemo(()=>d.filter(B=>{const z=B.fullName.toLowerCase().includes(h.toLowerCase())||B.username.toLowerCase().includes(h.toLowerCase())||B.email.toLowerCase().includes(h.toLowerCase()),de=y==="Tt c"||B.group===y;return z&&de}),[d,h,y]),O=async B=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await sw(Bn(Kt,"users",B))}catch(z){console.error("Error deleting user:",z),n("Khng th xa ngi dng. Vui lng th li.","error")}},$=()=>{_({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:s.length>0?s[0].id:"choi",permissions:[]}),L(""),x(!1),R(!1),E(!0)},U=B=>{_({...B}),x(!0),R(!1),L(""),E(!0)},W=B=>{const z=B.target.value;let de="",Y=k.group,ee="teacher";z==="Hiu Trng"?(de="Ton h thng",Y="Ban Gim Hiu",ee="admin"):z==="Ph Hiu Trng"?(de="Ton trng",Y="Ban Gim Hiu",ee="vice_principal"):z==="T trng chuyn mn"?(de="Ton b T chuyn mn",Y="T Chuyn Mn",ee="head_teacher"):z==="T ph chuyn mn"?(de="Ton b T chuyn mn",Y="T Chuyn Mn",ee="vice_head_teacher"):z==="Gio vin"?(de=s.length>0?s[0].id:"choi",Y="T Chuyn Mn",ee="teacher"):z==="T trng t vn phng"?(de="Ton b T Vn phng",Y="T Vn Phng",ee="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(z)&&(de="Khng gian T Vn phng",Y="T Vn Phng",ee="staff"),_({...k,role:ee,roleLabel:z,accessScope:de,group:Y,permissions:k.permissions||[]})},ce=async B=>{if(B.preventDefault(),!(!k.username||!k.fullName||!k.email)){C(!0);try{if(A&&k.id){const z=Object.fromEntries(Object.entries(k).filter(([de,Y])=>Y!==void 0));if(await Qi(Bn(Kt,"users",k.id),z),T&&N)if(e&&k.id===e.id){const{updatePassword:de}=await ju(async()=>{const{updatePassword:ee}=await Promise.resolve().then(()=>h8e);return{updatePassword:ee}},void 0),Y=$A();Y.currentUser&&(await de(Y.currentUser,N),n(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:de}=await ju(async()=>{const{httpsCallable:ae}=await Promise.resolve().then(()=>Qde);return{httpsCallable:ae}},void 0),{functions:Y}=await ju(async()=>{const{functions:ae}=await Promise.resolve().then(()=>bfe);return{functions:ae}},void 0),ee=de(Y,"adminResetPassword");n("ang gi yu cu i mt khu...","info"),await ee({targetUserId:k.id,newPassword:N}),n(` i mt khu cho user ${k.username} thnh cng!`,"success")}catch(de){console.error("Error calling adminResetPassword:",de),n(`Li i mt khu: ${de.message}`,"error")}else n("Cp nht thng tin h s thnh cng!","success")}else{let z="";try{const de=F$(Oz,"SecondaryApp"),Y=$A(de);z=(await Nde(Y,k.email,N)).user.uid,await WIe(de)}catch(de){console.error("Auth creation error:",de),de.code==="auth/email-already-in-use"?n("Email ny  c s dng bi ti khon khc.","error"):n(`Li to ti khon Auth: ${de.message}`,"error"),C(!1);return}await M_(Bn(Kt,"users",z),{...k,id:z,createdAt:new Date().toISOString()}),n(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}E(!1)}catch(z){console.error("Error saving user:",z),n("Li khi lu d liu.","error")}finally{C(!1)}}},se=async B=>{const z=d.find(de=>de.id===B);if(z)try{const de=z.status==="active"?"inactive":"active";await Qi(Bn(Kt,"users",B),{status:de}),n(` ${de==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(de){console.error("Error updating status:",de),n("Khng th cp nht trng thi.","error")}},Q=B=>B.includes("Hiu Trng")||B.includes("Admin")?"bg-red-100 text-red-700 border-red-200":B.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":B.includes("T trng")||B.includes("T ph")||B.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",J=()=>{const B=k.role||"";return B==="admin"?v.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[v.jsx(Hv,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),v.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[v.jsx(Nl,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):B==="vice_principal"?v.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[v.jsx(Hv,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),v.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[v.jsx(Nl,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):B==="head_teacher"?v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[v.jsx(vv,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),v.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:k.accessScope||"",onChange:z=>_({...k,accessScope:z.target.value}),children:[v.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),s.map(z=>v.jsx("option",{value:z.id,children:z.name},z.id))]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[v.jsx(sc,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):B==="vice_head_teacher"?v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[v.jsx(vv,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),v.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:k.accessScope||"",onChange:z=>_({...k,accessScope:z.target.value}),children:[v.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),s.map(z=>v.jsx("option",{value:z.id,children:z.name},z.id))]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[v.jsx(sc,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):B==="teacher"?v.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[v.jsx(ace,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),v.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:k.accessScope||"",onChange:z=>_({...k,accessScope:z.target.value}),children:s.map(z=>v.jsx("option",{value:z.id,children:z.name},z.id))})]}),v.jsxs("div",{className:"mt-2",children:[v.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),v.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):B==="office_head"?v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[v.jsx(vv,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),v.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[v.jsx(sc,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):v.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[v.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[v.jsx(nN,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),v.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),v.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(OD,{className:"h-4 w-4 text-purple-600"}),v.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(OD,{className:"h-4 w-4 text-purple-600"}),v.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return v.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[v.jsx("div",{className:"bg-white border-b border-gray-200",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[v.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("button",{onClick:()=>t("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[v.jsx(R$,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),v.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:v.jsx(Hv,{className:"h-6 w-6 text-slate-700"})}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),v.jsx("div",{className:"mt-6 border-b border-gray-200",children:v.jsxs("div",{className:"flex gap-1",children:[v.jsxs("button",{onClick:()=>i("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${r==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsx(vv,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),v.jsxs("button",{onClick:()=>i("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${r==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsx(Hv,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),r==="users"&&v.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[v.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(B=>v.jsx("button",{onClick:()=>w(B),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${y===B?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:B},B))}),v.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[v.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(tw,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),v.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:h,onChange:B=>m(B.target.value)})]}),v.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[v.jsx(rx,{className:"h-5 w-5"}),v.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r==="users"?v.jsx(v.Fragment,{children:v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),v.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),v.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),v.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),v.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.length>0?D.map(B=>v.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:v.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:v.jsx(hp,{className:"h-6 w-6"})})}),v.jsxs("div",{className:"ml-4",children:[v.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.fullName}),v.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(hp,{className:"h-3 w-3"})," ",B.username]}),v.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(ice,{className:"h-3 w-3"})," ",B.email]})]})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[v.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${Q(B.roleLabel)}`,children:B.roleLabel}),v.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[v.jsx(vv,{className:"h-3 w-3"})," ",B.group]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[v.jsx(nN,{className:"h-4 w-4 text-gray-400"}),c[B.accessScope]||B.accessScope]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:v.jsx("button",{onClick:()=>se(B.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${B.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:B.status==="active"?v.jsxs(v.Fragment,{children:[v.jsx(sc,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):v.jsxs(v.Fragment,{children:[v.jsx(tce,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:v.jsxs("div",{className:"flex justify-center items-center gap-2",children:[v.jsx("button",{onClick:()=>U(B),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:v.jsx(sx,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>O(B.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:v.jsx(Xo,{className:"h-4 w-4"})})]})})]},B.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(hp,{className:"h-12 w-12 text-gray-300 mb-3"}),v.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),v.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),v.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:v.jsxs("span",{children:["Tng s ",D.length," ngi dng"]})})]})}):v.jsx(a9e,{})}),b&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[A?v.jsx(sx,{className:"h-5 w-5"}):v.jsx(rx,{className:"h-5 w-5"}),A?"Cp nht thng tin":"To ti khon mi"]}),v.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsx("div",{className:"p-6 overflow-y-auto",children:v.jsxs("form",{id:"userForm",onSubmit:ce,className:"space-y-6",children:[v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[v.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[v.jsx(hp,{className:"h-4 w-4"})," Thng tin ti khon"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",required:!0,disabled:A,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${A?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:k.username||"",onChange:B=>_({...k,username:B.target.value})})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:k.email||"",onChange:B=>_({...k,email:B.target.value})})]})]}),A?v.jsxs("div",{className:"mt-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),v.jsx("button",{type:"button",onClick:()=>R(!T),className:"text-xs text-blue-600 hover:underline font-medium",children:T?"Hy i mt khu":"Reset mt khu"})]}),T&&v.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[v.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:N,onChange:B=>L(B.target.value)}),v.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):v.jsxs("div",{className:"mt-4",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",required:!A,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:N,onChange:B=>L(B.target.value)}),v.jsx(Sb,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:k.fullName||"",onChange:B=>_({...k,fullName:B.target.value})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:k.group||"T Chuyn Mn",onChange:B=>_({...k,group:B.target.value}),children:[v.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),v.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),v.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),v.jsx("option",{value:"Khc",children:"Khc"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:k.roleLabel||"Gio vin",onChange:W,children:[v.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),v.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),v.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),v.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),v.jsx("option",{value:"Gio vin",children:"Gio vin"}),v.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),v.jsx("option",{value:"K ton",children:"K ton"}),v.jsx("option",{value:"Vn th",children:"Vn th"}),v.jsx("option",{value:"Y t",children:"Y t"}),v.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),J(),v.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[v.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[v.jsx(OD,{className:"h-4 w-4"})," Quyn hn b sung"]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("div",{className:"relative flex items-center",children:v.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((K=k.permissions)==null?void 0:K.includes("manage_documents"))||!1,onChange:B=>{const z=k.permissions||[];B.target.checked?_({...k,permissions:[...z,"manage_documents"]}):_({...k,permissions:z.filter(de=>de!=="manage_documents")})}})}),v.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),v.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("div",{className:"relative flex items-center",children:v.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((re=k.permissions)==null?void 0:re.includes("manage_office_docs"))||!1,onChange:B=>{const z=k.permissions||[];B.target.checked?_({...k,permissions:[...z,"manage_office_docs"]}):_({...k,permissions:z.filter(de=>de!=="manage_office_docs")})}})}),v.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),v.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("div",{className:"relative flex items-center",children:v.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((X=k.permissions)==null?void 0:X.includes("manage_boarding_docs"))||!1,onChange:B=>{const z=k.permissions||[];B.target.checked?_({...k,permissions:[...z,"manage_boarding_docs"]}):_({...k,permissions:z.filter(de=>de!=="manage_boarding_docs")})}})}),v.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),v.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("div",{className:"relative flex items-center",children:v.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((me=k.permissions)==null?void 0:me.includes("manage_plans"))||!1,onChange:B=>{const z=k.permissions||[];B.target.checked?_({...k,permissions:[...z,"manage_plans"]}):_({...k,permissions:z.filter(de=>de!=="manage_plans")})}})}),v.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),v.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("div",{className:"relative flex items-center",children:v.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((G=k.permissions)==null?void 0:G.includes("access_system_admin"))||!1,onChange:B=>{const z=k.permissions||[];B.target.checked?_({...k,permissions:[...z,"access_system_admin"]}):_({...k,permissions:z.filter(de=>de!=="access_system_admin")})}})}),v.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),v.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsx("button",{type:"submit",form:"userForm",disabled:M,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:M?v.jsxs(v.Fragment,{children:[v.jsx(Vu,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):v.jsxs(v.Fragment,{children:[v.jsx(l2,{className:"h-4 w-4"})," ",A?"Lu thay i":"To ti khon"]})})]})]})})]})},c9e={admin:"Ban Gim Hiu",vice_principal:"Ph Hiu Trng",head_teacher:"T Trng Chuyn Mn",vice_head_teacher:"T Ph Chuyn Mn",teacher:"Gio Vin",staff:"Nhn Vin",office_head:"T Trng Vn Phng"},u9e=async()=>{const t=No(Ai(Kt,"users"),au("role","==","admin"));return(await Xu(t)).docs.map(n=>n.id)},d9e=async()=>{const t=No(Ai(Kt,"users"),au("role","==","head_teacher"));return(await Xu(t)).docs.map(n=>n.id)},f9e=async t=>{const e=No(Ai(Kt,"users"),au("role","==","teacher"),au("group","==",t));return(await Xu(e)).docs.map(r=>r.id)},h9e=async t=>{const e=No(Ai(Kt,"users"),au("role","==","teacher"),au("accessScope","==",t));return(await Xu(e)).docs.map(r=>r.id)},Vc=async(t,e,n)=>{var r,i,s,o;try{let a=[];const l=await u9e();if(n.type==="office"){if(t==="upload"&&e.role==="staff"&&(a=[...l]),t==="comment"){const d=(r=n.extraInfo)==null?void 0:r.uploaderId;d&&a.push(d),a=[...a,...l]}}else if(n.type==="class"){const d=(i=n.extraInfo)==null?void 0:i.classId;if(t==="upload"&&e.role==="teacher"){const f=await d9e();a=[...l,...f]}else t==="comment"&&((s=n.extraInfo)!=null&&s.uploaderId?a=[n.extraInfo.uploaderId]:(e.role==="admin"||e.role==="head_teacher"||e.role==="vice_head_teacher")&&d&&(a=[...await h9e(d)]))}else if(n.type==="group")if(t==="upload"&&e.role==="head_teacher")if(e.group){const d=await f9e(e.group);a=[...l,...d]}else a=[...l];else(t==="comment"||t==="system")&&(o=n.extraInfo)!=null&&o.uploaderId&&a.push(n.extraInfo.uploaderId);else n.type==="boarding"&&e.role==="staff"&&(a=[...l]);if(a=a.filter(d=>d!==e.id),a=[...new Set(a)],a.length===0){console.log("No receivers for this notification. Skipping.");return}let c=e.fullName||e.name;(!c||c===e.role||c==="head_teacher"||c==="vice_head_teacher")&&(c=c9e[e.role]||e.role);const u={senderId:e.id,senderName:c,senderAvatar:e.avatar||"",targetPath:n.targetPath,message:`${t==="upload"?" ti ln":" gp  vo"} ${n.name||"ti liu"}`,type:t,isRead:!1,createdAt:new Date().toISOString(),receivers:a,metadata:{fileName:n.name}};await ow(Ai(Kt,"notifications"),u),console.log(`Notification sent to ${a.length} users.`)}catch(a){console.error("Error creating notification:",a)}},p9e=t=>{switch(t){case"excel":return v.jsx(nce,{className:"h-6 w-6 text-green-600"});case"word":return v.jsx(sr,{className:"h-6 w-6 text-blue-600"});case"pdf":return v.jsx(M$,{className:"h-6 w-6 text-red-600"});default:return v.jsx(sr,{className:"h-6 w-6 text-gray-500"})}},m9e=()=>{var me,G;const t=fu(),{user:e}=Bl(),{addToast:n}=bd(),[r,i]=De.useState([]),[s,o]=De.useState("all"),[a,l]=De.useState(""),[c,u]=De.useState(null),[d,f]=De.useState(!1),[h,m]=De.useState(""),[y,w]=De.useState(!1),b=De.useRef(null),[E,A]=De.useState(!1),[x,T]=De.useState(null),[R,k]=De.useState({name:"",category:"general",note:""}),[_,N]=De.useState(!1),[L,M]=De.useState(null),C=e,D=De.useMemo(()=>c?r.find(B=>B.id===c.id)||c:null,[r,c]);De.useEffect(()=>{const B=No(Ai(Kt,"office_docs"),m2("uploadDate","desc")),z=Of(B,de=>{const Y=[];de.forEach(ee=>{const ae=ee.data();Y.push({id:ee.id,...ae,comments:ae.comments||[]})}),i(Y)});return()=>z()},[]);const O=r.filter(B=>{const z=s==="all"||B.category===s,de=B.name.toLowerCase().includes(a.toLowerCase())||B.uploader.name.toLowerCase().includes(a.toLowerCase());return z&&de});De.useEffect(()=>{var B;d&&((B=b.current)==null||B.scrollIntoView({behavior:"smooth"}))},[D==null?void 0:D.comments,d]);const $=B=>{u(B),f(!0)},U=(B,z)=>{z.stopPropagation(),M(B),N(!0)},W=async()=>{if(L)try{await sw(Bn(Kt,"office_docs",L.id)),n(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),N(!1),M(null),(c==null?void 0:c.id)===L.id&&(f(!1),u(null))}catch(B){console.error("Error deleting document: ",B),n("Li","Khng th xa h s.","error")}},ce=async B=>{if(B.preventDefault(),!h.trim()||!D||!C)return;const z={id:Date.now().toString(),userId:C.id,userName:C.fullName,userRole:C.role,content:h,timestamp:new Date().toISOString()};try{const de=Bn(Kt,"office_docs",D.id);await Qi(de,{comments:px(z)}),m(""),n(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),C&&await Vc("comment",C,{type:"office",name:D.name,targetPath:"/office-documents",extraInfo:{uploaderId:D.uploader.id}})}catch(de){console.error("Error adding comment: ",de),n("Li","Khng th gi bnh lun.","error")}},se=B=>{switch(B){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},Q=()=>{k({name:"",category:s==="all"?"general":s,note:""}),T(null),A(!0)},J=B=>{if(B.preventDefault(),B.dataTransfer.files&&B.dataTransfer.files[0]){const z=B.dataTransfer.files[0];T(z),R.name||k(de=>({...de,name:z.name.split(".")[0]}))}},K=B=>{if(B.target.files&&B.target.files[0]){const z=B.target.files[0];T(z),R.name||k(de=>({...de,name:z.name.split(".")[0]}))}},re=async()=>{if(x)try{let B="#";const z=Rl(Ya,`office_docs/${Date.now()}_${x.name}`);await Qc(z,x),B=await eu(z);const de={...R,uploader:{id:(C==null?void 0:C.id)||"unknown",name:(C==null?void 0:C.fullName)||"n danh",avatar:(C==null?void 0:C.avatar)||"",role:(C==null?void 0:C.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),comments:[],type:x.name.split(".").pop()||"file",fileType:x.name.split(".").pop()||"file",fileUrl:B};await ow(Ai(Kt,"office_docs"),de),n("Ti ln thnh cng!",` lu h s: ${R.name}`,"success"),A(!1)}catch(B){console.error("Error adding document: ",B),n("Li","Khng th ti ln h s.","error")}},X=(B=!1)=>{if(!D)return null;const z=D.fileUrl;if(z&&z!=="#"){const de=g2(z);return de==="EXCEL_NO_PREVIEW"?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[v.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:v.jsx(sr,{className:"h-16 w-16 text-green-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),v.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),v.jsxs("a",{href:z,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[v.jsx(hc,{className:"h-5 w-5"}),"Ti xung file"]})]}):v.jsx("div",{className:"w-full h-full",children:v.jsx("iframe",{src:de,className:"w-full h-full border-0",title:"Document Preview"})})}else return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return v.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[v.jsx("div",{className:"bg-white border-b border-teal-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:v.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[v.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>t("/"),children:"Dashboard"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{children:"T Vn phng"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("span",{className:"p-2 bg-teal-100 rounded-lg text-teal-700",children:v.jsx(sr,{className:"h-6 w-6"})}),"Kho K hoch & Bo co"]}),(((me=e==null?void 0:e.permissions)==null?void 0:me.includes("manage_documents"))||((G=e==null?void 0:e.permissions)==null?void 0:G.includes("manage_office_docs")))&&v.jsxs("button",{onClick:Q,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-md transition-colors font-medium",children:[v.jsx(So,{className:"h-4 w-4"}),v.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),v.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[v.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),v.jsxs("nav",{className:"space-y-1",children:[v.jsxs("button",{onClick:()=>o("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${s==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${s==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),v.jsxs("button",{onClick:()=>o("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${s==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(K_e,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),v.jsxs("button",{onClick:()=>o("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${s==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(aNe,{className:"h-4 w-4"}),"Y t & Bn tr"]}),v.jsxs("button",{onClick:()=>o("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${s==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(sr,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),v.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[v.jsxs("div",{className:"mb-6 flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 max-w-md shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:[v.jsx(tw,{className:"h-5 w-5 text-gray-400"}),v.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:a,onChange:B=>l(B.target.value)})]}),v.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),v.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),v.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(B=>v.jsxs("tr",{onClick:()=>$(B),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:p9e(B.type)}),v.jsxs("div",{className:"ml-4",children:[v.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:B.name}),v.jsx("div",{className:"text-xs text-gray-500",children:se(B.category)})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:B.uploader.name.charAt(0)}),v.jsxs("div",{className:"ml-3",children:[v.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.uploader.name}),v.jsx("div",{className:"text-xs text-gray-500",children:B.uploader.role})]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.uploadDate).toLocaleDateString("vi-VN")}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(B.comments||[]).length>0?v.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[v.jsx(RA,{className:"w-3 h-3 mr-1"}),(B.comments||[]).length," Gp  mi"]}):v.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:v.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:z=>z.stopPropagation(),children:[v.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:v.jsx(hc,{className:"h-4 w-4"})}),v.jsx("button",{onClick:z=>U(B,z),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:v.jsx(Xo,{className:"h-4 w-4"})})]})})]},B.id))})]})})]})]}),_&&L&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',L.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:W,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),d&&D&&v.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[v.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>f(!1)}),v.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:se(D.category)}),v.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:D.name})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>f(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:v.jsx(hs,{className:"h-5 w-5"})})]})]}),v.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[v.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[v.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:v.jsx("button",{onClick:()=>w(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:v.jsx(S4,{className:"h-4 w-4"})})}),v.jsx("div",{className:"flex-1 w-full h-full",children:X(!1)})]}),v.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:D.uploader.name})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(D.uploadDate).toLocaleDateString("vi-VN")})]})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[v.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[v.jsx(RA,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),v.jsxs("div",{className:"space-y-4 mb-4",children:[(D.comments||[]).length>0?(D.comments||[]).map(B=>v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:B.userName.charAt(0)}),v.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[v.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[v.jsx("span",{className:"text-xs font-bold text-gray-900",children:B.userName}),v.jsx("span",{className:"text-[10px] text-gray-500",children:B.userRole})]}),v.jsx("p",{className:"text-sm text-gray-800",children:B.content})]})]},B.id)):v.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),v.jsx("div",{ref:b})]})]}),v.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:v.jsxs("form",{onSubmit:ce,className:"relative",children:[v.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:h,onChange:B=>m(B.target.value)}),v.jsx("button",{type:"submit",disabled:!h.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:v.jsx(ix,{className:"h-4 w-4"})})]})})]})]})]})]}),E&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[v.jsx(So,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),v.jsx("button",{onClick:()=>A(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsxs("div",{className:"p-6 space-y-5",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:R.name,onChange:B=>k({...R,name:B.target.value})})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:R.category,onChange:B=>k({...R,category:B.target.value}),children:[v.jsx("option",{value:"general",children:"Hnh chnh chung"}),v.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),v.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),v.jsxs("div",{onDrop:J,onDragOver:B=>B.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${x?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[v.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:K}),x?v.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[v.jsx(sc,{className:"h-10 w-10 text-teal-600 mb-2"}),v.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:x.name}),v.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(x.size/1024).toFixed(0)," KB -  sn sng"]})]}):v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${R.category==="finance"?"bg-green-100 text-green-600":R.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:v.jsx(E4,{className:"h-8 w-8"})}),v.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",v.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),v.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:R.note,onChange:B=>k({...R,note:B.target.value})})]})]}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{onClick:re,disabled:!x,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx(So,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},g9e=({type:t})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(t){case"excel":return v.jsx(nce,{className:`${e} text-green-600`});case"pdf":return v.jsx(M$,{className:`${e} text-red-500`});case"word":return v.jsx(sr,{className:`${e} text-blue-600`});default:return v.jsx(sr,{className:`${e} text-gray-400`})}},y9e=()=>{const t=fu(),{user:e}=Bl(),{addToast:n}=bd(),[r,i]=De.useState([]),[s,o]=De.useState("menu"),[a,l]=De.useState(""),[c,u]=De.useState(null),[d,f]=De.useState(!1),[h,m]=De.useState(""),y=De.useRef(null),[w,b]=De.useState(!1),[E,A]=De.useState(null),[x,T]=De.useState({type:"menu",startDate:"",endDate:"",name:""}),[R,k]=De.useState(!1),[_,N]=De.useState(null),[L,M]=De.useState(!1),C=e;De.useEffect(()=>{const X=No(Ai(Kt,"boarding_docs"),m2("uploadDate","desc")),me=Of(X,G=>{const B=[];G.forEach(z=>{B.push({id:z.id,...z.data()})}),i(B)});return()=>me()},[]);const D=r.filter(X=>{const me=X.category===s,G=X.name.toLowerCase().includes(a.toLowerCase());return me&&G});De.useEffect(()=>{var X;d&&((X=y.current)==null||X.scrollIntoView({behavior:"smooth"}))},[c==null?void 0:c.comments,d]),De.useEffect(()=>{if(x.type==="menu"&&x.startDate&&x.endDate){const X=new Date(x.startDate);new Date(x.endDate);const me=new Date(X.getFullYear(),0,1),G=Math.floor((X.getTime()-me.getTime())/(1440*60*1e3)),B=Math.ceil((X.getDay()+1+G)/7);T(z=>({...z,name:`Thc n Tun ${B} - Thng ${X.getMonth()+1}`}))}},[x.startDate,x.endDate,x.type]);const O=X=>{u(X),f(!0)},$=(X,me)=>{me&&me.stopPropagation(),N(X),k(!0)},U=async()=>{if(_)try{await sw(Bn(Kt,"boarding_docs",_.id)),n(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),k(!1),N(null),(c==null?void 0:c.id)===_.id&&(f(!1),u(null))}catch(X){console.error("Error deleting document: ",X),n("Li","Khng th xa h s.","error")}},W=async X=>{if(X.preventDefault(),!h.trim()||!c||!C)return;const me={id:Date.now().toString(),userId:C.id,userName:C.fullName,userRole:C.role,content:h,timestamp:new Date().toISOString()};try{const G=Bn(Kt,"boarding_docs",c.id);await Qi(G,{comments:px(me)});const B={...c,comments:[...c.comments,me]};u(B),m(""),n(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await Vc("comment",C,{type:"boarding",name:c.name,targetPath:"/boarding-menu"})}catch(G){console.error("Error adding comment: ",G),n("Li","Khng th gi bnh lun.","error")}},ce=X=>{switch(X){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},se=()=>{T({type:s==="menu"?"menu":s==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),A(null),b(!0)},Q=X=>{if(X.preventDefault(),X.dataTransfer.files&&X.dataTransfer.files[0]){const me=X.dataTransfer.files[0];A(me),!x.name&&x.type!=="menu"&&T(G=>({...G,name:me.name.split(".")[0]}))}},J=X=>{if(X.target.files&&X.target.files[0]){const me=X.target.files[0];A(me),!x.name&&x.type!=="menu"&&T(G=>({...G,name:me.name.split(".")[0]}))}},K=async()=>{if(E)try{const X=Rl(Ya,`boarding_docs/${Date.now()}_${E.name}`),me=await Qc(X,E),G=await eu(me.ref),B={...x,uploader:{id:(C==null?void 0:C.id)||"unknown",name:(C==null?void 0:C.fullName)||"n danh",avatar:(C==null?void 0:C.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:E.name.split(".").pop()||"file",category:s,fileUrl:G};await ow(Ai(Kt,"boarding_docs"),B),n("Ti ln thnh cng!",` lu h s: ${x.name}`,"success"),b(!1),C&&await Vc("upload",C,{type:"boarding",name:x.name,targetPath:"/boarding-menu"})}catch(X){console.error("Error adding document: ",X),n("Li","Khng th ti ln h s.","error")}},re=(X=!1)=>{if(!c)return null;if(c.fileUrl&&c.fileUrl!=="#"){const me=g2(c.fileUrl);return me==="EXCEL_NO_PREVIEW"?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[v.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:v.jsx(sr,{className:"h-16 w-16 text-green-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),v.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),v.jsxs("a",{href:c.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[v.jsx(hc,{className:"h-5 w-5"}),"Ti xung file"]})]}):v.jsx("div",{className:"w-full h-full",children:v.jsx("iframe",{src:me,className:"w-full h-full border-0",title:"Document Preview"})})}else return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return v.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[v.jsx("div",{className:"bg-white border-b border-emerald-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:v.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[v.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>t("/"),children:"Dashboard"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{children:"T Vn phng"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("span",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-700",children:v.jsx(UP,{className:"h-6 w-6"})}),"Qun l Bn tr & Dinh dng"]}),v.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[v.jsx(Sb,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),v.jsxs("button",{onClick:se,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5",children:[v.jsx(So,{className:"h-4 w-4"}),v.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),v.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[v.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),v.jsxs("nav",{className:"space-y-2",children:[v.jsxs("button",{onClick:()=>o("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${s==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(UP,{className:"h-4 w-4"}),"Thc n Tun"]}),v.jsxs("button",{onClick:()=>o("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${s==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(Hv,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),v.jsxs("button",{onClick:()=>o("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${s==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[v.jsx(i6e,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),v.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-800",children:ce(s)}),v.jsxs("div",{className:"relative",children:[v.jsx(tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),v.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:a,onChange:X=>l(X.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64 bg-white shadow-sm"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[D.map(X=>v.jsxs("div",{onClick:()=>O(X),className:"group bg-white rounded-2xl border border-gray-100 p-6 shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),v.jsx(g9e,{type:X.type}),v.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:X.name}),v.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["ng bi ",v.jsx("span",{className:"font-medium text-gray-700",children:X.uploader.name})]}),v.jsxs("div",{className:"w-full pt-4 border-t border-gray-50 flex items-center justify-between mt-auto relative z-10",children:[v.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[v.jsx(Eb,{className:"h-3 w-3"}),new Date(X.uploadDate).toLocaleDateString("vi-VN")]}),v.jsxs("div",{className:"flex items-center gap-1",children:[X.comments.length>0&&v.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded-full mr-1",children:[v.jsx(Xy,{className:"h-3 w-3"}),X.comments.length]}),v.jsx("button",{onClick:me=>$(X,me),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:v.jsx(Xo,{className:"h-4 w-4"})})]})]})]},X.id)),D.length===0&&v.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[v.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:v.jsx(sr,{className:"h-8 w-8 text-gray-300"})}),v.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),R&&_&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',_.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),d&&c&&v.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[v.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>f(!1)}),v.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:v.jsx(sr,{className:"h-5 w-5 text-emerald-600"})}),v.jsxs("div",{children:[v.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),v.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:c.name})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:()=>{c.fileUrl&&c.fileUrl!=="#"?window.open(c.fileUrl,"_blank"):n("Khng c file","Ti liu ny khng c file nh km.","warning")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>f(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]})]}),v.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[v.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[v.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:v.jsx("button",{onClick:()=>M(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:v.jsx(S4,{className:"h-4 w-4"})})}),v.jsx("div",{className:"flex-1 w-full h-full",children:re(!1)})]}),v.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:c.uploader.name})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(c.uploadDate).toLocaleDateString("vi-VN")})]}),c.category==="menu"&&c.startDate&&c.endDate&&v.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[v.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),v.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[v.jsx(Eb,{className:"h-3 w-3"}),v.jsx("span",{children:new Date(c.startDate).toLocaleDateString("vi-VN")}),v.jsx("span",{children:""}),v.jsx("span",{children:new Date(c.endDate).toLocaleDateString("vi-VN")})]})]})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[v.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[v.jsx(Xy,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),v.jsxs("div",{className:"space-y-4",children:[c.comments&&c.comments.length>0?c.comments.map(X=>v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:X.userName.charAt(0)}),v.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[v.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[v.jsx("span",{className:"text-xs font-bold text-gray-900",children:X.userName}),v.jsx("span",{className:"text-[10px] text-gray-500",children:X.userRole})]}),v.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:X.content}),v.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(X.timestamp).toLocaleString("vi-VN")})]})]},X.id)):v.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[v.jsx(Xy,{className:"h-10 w-10 mb-2 opacity-50"}),v.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),v.jsx("div",{ref:y})]})]}),v.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[v.jsxs("form",{onSubmit:W,className:"relative",children:[v.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:h,onChange:X=>m(X.target.value)}),v.jsx("button",{type:"submit",disabled:!h.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:v.jsx(ix,{className:"h-4 w-4"})})]}),v.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[v.jsx(Sb,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]}),L&&c&&v.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[v.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:v.jsx(sr,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:c.name}),v.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:v.jsx(T4,{className:"h-5 w-5"})}),v.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:v.jsx(A4,{className:"h-5 w-5"})}),v.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),v.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]})]}),v.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:re(!0)})]}),w&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[v.jsx(So,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),v.jsx("button",{onClick:()=>b(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsxs("div",{className:"p-6 space-y-5",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(X=>v.jsx("button",{onClick:()=>T(me=>({...me,type:X.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${x.type===X.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:X.label},X.id))})]}),x.type==="menu"&&v.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),v.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:x.startDate,onChange:X=>T({...x,startDate:X.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),v.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:x.endDate,onChange:X=>T({...x,endDate:X.target.value})})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:x.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:x.name,onChange:X=>T({...x,name:X.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),v.jsxs("div",{onDrop:Q,onDragOver:X=>X.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${E?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[v.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:J}),E?v.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[v.jsx(sc,{className:"h-10 w-10 text-emerald-600 mb-2"}),v.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:E.name}),v.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(E.size/1024).toFixed(0)," KB -  sn sng"]})]}):v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:v.jsx(E4,{className:"h-8 w-8"})}),v.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",v.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{onClick:K,disabled:!E,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx(So,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})};function b9e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xfe={exports:{}},Cs=xfe.exports={},Jd,Qd;function S7(){throw new Error("setTimeout has not been defined")}function A7(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Jd=setTimeout:Jd=S7}catch{Jd=S7}try{typeof clearTimeout=="function"?Qd=clearTimeout:Qd=A7}catch{Qd=A7}})();function Efe(t){if(Jd===setTimeout)return setTimeout(t,0);if((Jd===S7||!Jd)&&setTimeout)return Jd=setTimeout,setTimeout(t,0);try{return Jd(t,0)}catch{try{return Jd.call(null,t,0)}catch{return Jd.call(this,t,0)}}}function w9e(t){if(Qd===clearTimeout)return clearTimeout(t);if((Qd===A7||!Qd)&&clearTimeout)return Qd=clearTimeout,clearTimeout(t);try{return Qd(t)}catch{try{return Qd.call(null,t)}catch{return Qd.call(this,t)}}}var gp=[],l1=!1,wy,B_=-1;function v9e(){!l1||!wy||(l1=!1,wy.length?gp=wy.concat(gp):B_=-1,gp.length&&Sfe())}function Sfe(){if(!l1){var t=Efe(v9e);l1=!0;for(var e=gp.length;e;){for(wy=gp,gp=[];++B_<e;)wy&&wy[B_].run();B_=-1,e=gp.length}wy=null,l1=!1,w9e(t)}}Cs.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];gp.push(new Afe(t,e)),gp.length===1&&!l1&&Efe(Sfe)};function Afe(t,e){this.fun=t,this.array=e}Afe.prototype.run=function(){this.fun.apply(null,this.array)};Cs.title="browser";Cs.browser=!0;Cs.env={};Cs.argv=[];Cs.version="";Cs.versions={};function qp(){}Cs.on=qp;Cs.addListener=qp;Cs.once=qp;Cs.off=qp;Cs.removeListener=qp;Cs.removeAllListeners=qp;Cs.emit=qp;Cs.prependListener=qp;Cs.prependOnceListener=qp;Cs.listeners=function(t){return[]};Cs.binding=function(t){throw new Error("process.binding is not supported")};Cs.cwd=function(){return"/"};Cs.chdir=function(t){throw new Error("process.chdir is not supported")};Cs.umask=function(){return 0};var x9e=xfe.exports;const _e=b9e(x9e),lc=globalThis||void 0||self;function Gp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ai=_e.env.NODE_ENV!=="production"?Object.freeze({}):{},c1=_e.env.NODE_ENV!=="production"?Object.freeze([]):[],Hs=()=>{},Tfe=()=>!1,Vk=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),SN=t=>t.startsWith("onUpdate:"),ss=Object.assign,Pz=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},E9e=Object.prototype.hasOwnProperty,Rr=(t,e)=>E9e.call(t,e),wn=Array.isArray,Qy=t=>tR(t)==="[object Map]",kfe=t=>tR(t)==="[object Set]",Cn=t=>typeof t=="function",Mi=t=>typeof t=="string",Kp=t=>typeof t=="symbol",Or=t=>t!==null&&typeof t=="object",Fz=t=>(Or(t)||Cn(t))&&Cn(t.then)&&Cn(t.catch),Cfe=Object.prototype.toString,tR=t=>Cfe.call(t),Bz=t=>tR(t).slice(8,-1),_fe=t=>tR(t)==="[object Object]",nR=t=>Mi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qS=Gp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),S9e=Gp("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),rR=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},A9e=/-\w/g,Za=rR(t=>t.replace(A9e,e=>e.slice(1).toUpperCase())),T9e=/\B([A-Z])/g,Pp=rR(t=>t.replace(T9e,"-$1").toLowerCase()),_b=rR(t=>t.charAt(0).toUpperCase()+t.slice(1)),ry=rR(t=>t?`on${_b(t)}`:""),Fg=(t,e)=>!Object.is(t,e),Tv=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},AN=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},jz=t=>{const e=parseFloat(t);return isNaN(e)?t:e},k9e=t=>{const e=Mi(t)?Number(t):NaN;return isNaN(e)?t:e};let KZ;const Uk=()=>KZ||(KZ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof lc<"u"?lc:{});function Gn(t){if(wn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Mi(r)?I9e(r):Gn(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Mi(t)||Or(t))return t}const C9e=/;(?![^(]*\))/g,_9e=/:([^]+)/,N9e=/\/\*[^]*?\*\//g;function I9e(t){const e={};return t.replace(N9e,"").split(C9e).forEach(n=>{if(n){const r=n.split(_9e);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qr(t){let e="";if(Mi(t))e=t;else if(wn(t))for(let n=0;n<t.length;n++){const r=Qr(t[n]);r&&(e+=r+" ")}else if(Or(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function R9e(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Mi(e)&&(t.class=Qr(e)),n&&(t.style=Gn(n)),t}const M9e="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",L9e="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",D9e="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",O9e=Gp(M9e),P9e=Gp(L9e),F9e=Gp(D9e),B9e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",j9e=Gp(B9e);function Nfe(t){return!!t||t===""}const Ife=t=>!!(t&&t.__v_isRef===!0),ci=t=>Mi(t)?t:t==null?"":wn(t)||Or(t)&&(t.toString===Cfe||!Cn(t.toString))?Ife(t)?ci(t.value):JSON.stringify(t,Rfe,2):String(t),Rfe=(t,e)=>Ife(e)?Rfe(t,e.value):Qy(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[QD(r,s)+" =>"]=i,n),{})}:kfe(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>QD(n))}:Kp(e)?QD(e):Or(e)&&!wn(e)&&!_fe(e)?String(e):e,QD=(t,e="")=>{var n;return Kp(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};function $9e(t){return t==null?"initial":typeof t=="string"?t===""?" ":t:((typeof t!="number"||!Number.isFinite(t))&&_e.env.NODE_ENV!=="production"&&console.warn("[Vue warn] Invalid value used for CSS binding. Expected a string or a finite number but received:",t),String(t))}function bc(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let da;class Mfe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=da,!e&&da&&(this.index=(da.scopes||(da.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=da;try{return da=this,e()}finally{da=n}}else _e.env.NODE_ENV!=="production"&&bc("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=da,da=this)}off(){this._on>0&&--this._on===0&&(da=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Lfe(t){return new Mfe(t)}function Dfe(){return da}function z9e(t,e=!1){da?da.cleanups.push(t):_e.env.NODE_ENV!=="production"&&!e&&bc("onScopeDispose() is called when there is no active effect scope to be associated with.")}let oi;const e8=new WeakSet;class Ofe{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,da&&da.active&&da.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,e8.has(this)&&(e8.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ffe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,XZ(this),Bfe(this);const e=oi,n=Yu;oi=this,Yu=!0;try{return this.fn()}finally{_e.env.NODE_ENV!=="production"&&oi!==this&&bc("Active effect was not restored correctly - this is likely a Vue internal bug."),jfe(this),oi=e,Yu=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Hz(e);this.deps=this.depsTail=void 0,XZ(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?e8.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){T7(this)&&this.run()}get dirty(){return T7(this)}}let Pfe=0,GS,KS;function Ffe(t,e=!1){if(t.flags|=8,e){t.next=KS,KS=t;return}t.next=GS,GS=t}function $z(){Pfe++}function zz(){if(--Pfe>0)return;if(KS){let e=KS;for(KS=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;GS;){let e=GS;for(GS=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Bfe(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jfe(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Hz(r),H9e(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function T7(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($fe(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function $fe(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zA)||(t.globalVersion=zA,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!T7(t))))return;t.flags|=2;const e=t.dep,n=oi,r=Yu;oi=t,Yu=!0;try{Bfe(t);const i=t.fn(t._value);(e.version===0||Fg(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{oi=n,Yu=r,jfe(t),t.flags&=-3}}function Hz(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),_e.env.NODE_ENV!=="production"&&n.subsHead===t&&(n.subsHead=i),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Hz(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function H9e(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Yu=!0;const zfe=[];function rd(){zfe.push(Yu),Yu=!1}function id(){const t=zfe.pop();Yu=t===void 0?!0:t}function XZ(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=oi;oi=void 0;try{e()}finally{oi=n}}}let zA=0,V9e=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Vz{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0,_e.env.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(e){if(!oi||!Yu||oi===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==oi)n=this.activeLink=new V9e(oi,this),oi.deps?(n.prevDep=oi.depsTail,oi.depsTail.nextDep=n,oi.depsTail=n):oi.deps=oi.depsTail=n,Hfe(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=oi.depsTail,n.nextDep=void 0,oi.depsTail.nextDep=n,oi.depsTail=n,oi.deps===n&&(oi.deps=r)}return _e.env.NODE_ENV!=="production"&&oi.onTrack&&oi.onTrack(ss({effect:oi},e)),n}trigger(e){this.version++,zA++,this.notify(e)}notify(e){$z();try{if(_e.env.NODE_ENV!=="production")for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(ss({effect:n.sub},e));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{zz()}}}function Hfe(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Hfe(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),_e.env.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}}const TN=new WeakMap,eb=Symbol(_e.env.NODE_ENV!=="production"?"Object iterate":""),k7=Symbol(_e.env.NODE_ENV!=="production"?"Map keys iterate":""),HA=Symbol(_e.env.NODE_ENV!=="production"?"Array iterate":"");function so(t,e,n){if(Yu&&oi){let r=TN.get(t);r||TN.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Vz),i.map=r,i.key=n),_e.env.NODE_ENV!=="production"?i.track({target:t,type:e,key:n}):i.track()}}function ff(t,e,n,r,i,s){const o=TN.get(t);if(!o){zA++;return}const a=l=>{l&&(_e.env.NODE_ENV!=="production"?l.trigger({target:t,type:e,key:n,newValue:r,oldValue:i,oldTarget:s}):l.trigger())};if($z(),e==="clear")o.forEach(a);else{const l=wn(t),c=l&&nR(n);if(l&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===HA||!Kp(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(HA)),e){case"add":l?c&&a(o.get("length")):(a(o.get(eb)),Qy(t)&&a(o.get(k7)));break;case"delete":l||(a(o.get(eb)),Qy(t)&&a(o.get(k7)));break;case"set":Qy(t)&&a(o.get(eb));break}}zz()}function U9e(t,e){const n=TN.get(t);return n&&n.get(e)}function Qw(t){const e=Pn(t);return e===t?e:(so(e,"iterate",HA),Ta(t)?e:e.map(od))}function iR(t){return so(t=Pn(t),"iterate",HA),t}function Bm(t,e){return sd(t)?tu(t)?wx(od(e)):wx(e):od(e)}const W9e={__proto__:null,[Symbol.iterator](){return t8(this,Symbol.iterator,t=>Bm(this,t))},concat(...t){return Qw(this).concat(...t.map(e=>wn(e)?Qw(e):e))},entries(){return t8(this,"entries",t=>(t[1]=Bm(this,t[1]),t))},every(t,e){return xh(this,"every",t,e,void 0,arguments)},filter(t,e){return xh(this,"filter",t,e,n=>n.map(r=>Bm(this,r)),arguments)},find(t,e){return xh(this,"find",t,e,n=>Bm(this,n),arguments)},findIndex(t,e){return xh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xh(this,"findLast",t,e,n=>Bm(this,n),arguments)},findLastIndex(t,e){return xh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xh(this,"forEach",t,e,void 0,arguments)},includes(...t){return n8(this,"includes",t)},indexOf(...t){return n8(this,"indexOf",t)},join(t){return Qw(this).join(t)},lastIndexOf(...t){return n8(this,"lastIndexOf",t)},map(t,e){return xh(this,"map",t,e,void 0,arguments)},pop(){return CE(this,"pop")},push(...t){return CE(this,"push",t)},reduce(t,...e){return YZ(this,"reduce",t,e)},reduceRight(t,...e){return YZ(this,"reduceRight",t,e)},shift(){return CE(this,"shift")},some(t,e){return xh(this,"some",t,e,void 0,arguments)},splice(...t){return CE(this,"splice",t)},toReversed(){return Qw(this).toReversed()},toSorted(t){return Qw(this).toSorted(t)},toSpliced(...t){return Qw(this).toSpliced(...t)},unshift(...t){return CE(this,"unshift",t)},values(){return t8(this,"values",t=>Bm(this,t))}};function t8(t,e,n){const r=iR(t),i=r[e]();return r!==t&&!Ta(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const q9e=Array.prototype;function xh(t,e,n,r,i,s){const o=iR(t),a=o!==t&&!Ta(t),l=o[e];if(l!==q9e[e]){const d=l.apply(t,s);return a?od(d):d}let c=n;o!==t&&(a?c=function(d,f){return n.call(this,Bm(t,d),f,t)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&i?i(u):u}function YZ(t,e,n,r){const i=iR(t);let s=n;return i!==t&&(Ta(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Bm(t,a),l,t)}),i[e](s,...r)}function n8(t,e,n){const r=Pn(t);so(r,"iterate",HA);const i=r[e](...n);return(i===-1||i===!1)&&bx(n[0])?(n[0]=Pn(n[0]),r[e](...n)):i}function CE(t,e,n=[]){rd(),$z();const r=Pn(t)[e].apply(t,n);return zz(),id(),r}const G9e=Gp("__proto__,__v_isRef,__isVue"),Vfe=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Kp));function K9e(t){Kp(t)||(t=String(t));const e=Pn(this);return so(e,"has",t),e.hasOwnProperty(t)}class Ufe{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Yfe:Xfe:s?Kfe:Gfe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=wn(e);if(!i){let l;if(o&&(l=W9e[n]))return l;if(n==="hasOwnProperty")return K9e}const a=Reflect.get(e,n,di(e)?e:r);if((Kp(n)?Vfe.has(n):G9e(n))||(i||so(e,"get",n),s))return a;if(di(a)){const l=o&&nR(n)?a:a.value;return i&&Or(l)?Nb(l):l}return Or(a)?i?Nb(a):Oi(a):a}}class Wfe extends Ufe{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=wn(e)&&nR(n);if(!this._isShallow){const c=sd(s);if(!Ta(r)&&!sd(r)&&(s=Pn(s),r=Pn(r)),!o&&di(s)&&!di(r))return c?(_e.env.NODE_ENV!=="production"&&bc(`Set operation on key "${String(n)}" failed: target is readonly.`,e[n]),!0):(s.value=r,!0)}const a=o?Number(n)<e.length:Rr(e,n),l=Reflect.set(e,n,r,di(e)?e:i);return e===Pn(i)&&(a?Fg(r,s)&&ff(e,"set",n,r,s):ff(e,"add",n,r)),l}deleteProperty(e,n){const r=Rr(e,n),i=e[n],s=Reflect.deleteProperty(e,n);return s&&r&&ff(e,"delete",n,void 0,i),s}has(e,n){const r=Reflect.has(e,n);return(!Kp(n)||!Vfe.has(n))&&so(e,"has",n),r}ownKeys(e){return so(e,"iterate",wn(e)?"length":eb),Reflect.ownKeys(e)}}class qfe extends Ufe{constructor(e=!1){super(!0,e)}set(e,n){return _e.env.NODE_ENV!=="production"&&bc(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0}deleteProperty(e,n){return _e.env.NODE_ENV!=="production"&&bc(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}}const X9e=new Wfe,Y9e=new qfe,Z9e=new Wfe(!0),J9e=new qfe(!0),C7=t=>t,r5=t=>Reflect.getPrototypeOf(t);function Q9e(t,e,n){return function(...r){const i=this.__v_raw,s=Pn(i),o=Qy(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?C7:e?wx:od;return!e&&so(s,"iterate",l?k7:eb),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function i5(t){return function(...e){if(_e.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:"";bc(`${_b(t)} operation ${n}failed: target is readonly.`,Pn(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function ePe(t,e){const n={get(i){const s=this.__v_raw,o=Pn(s),a=Pn(i);t||(Fg(i,a)&&so(o,"get",i),so(o,"get",a));const{has:l}=r5(o),c=e?C7:t?wx:od;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&so(Pn(i),"iterate",eb),i.size},has(i){const s=this.__v_raw,o=Pn(s),a=Pn(i);return t||(Fg(i,a)&&so(o,"has",i),so(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Pn(a),c=e?C7:t?wx:od;return!t&&so(l,"iterate",eb),a.forEach((u,d)=>i.call(s,c(u),c(d),o))}};return ss(n,t?{add:i5("add"),set:i5("set"),delete:i5("delete"),clear:i5("clear")}:{add(i){!e&&!Ta(i)&&!sd(i)&&(i=Pn(i));const s=Pn(this);return r5(s).has.call(s,i)||(s.add(i),ff(s,"add",i,i)),this},set(i,s){!e&&!Ta(s)&&!sd(s)&&(s=Pn(s));const o=Pn(this),{has:a,get:l}=r5(o);let c=a.call(o,i);c?_e.env.NODE_ENV!=="production"&&ZZ(o,a,i):(i=Pn(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,s),c?Fg(s,u)&&ff(o,"set",i,s,u):ff(o,"add",i,s),this},delete(i){const s=Pn(this),{has:o,get:a}=r5(s);let l=o.call(s,i);l?_e.env.NODE_ENV!=="production"&&ZZ(s,o,i):(i=Pn(i),l=o.call(s,i));const c=a?a.call(s,i):void 0,u=s.delete(i);return l&&ff(s,"delete",i,void 0,c),u},clear(){const i=Pn(this),s=i.size!==0,o=_e.env.NODE_ENV!=="production"?Qy(i)?new Map(i):new Set(i):void 0,a=i.clear();return s&&ff(i,"clear",void 0,void 0,o),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Q9e(i,t,e)}),n}function sR(t,e){const n=ePe(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Rr(n,i)&&i in r?n:r,i,s)}const tPe={get:sR(!1,!1)},nPe={get:sR(!1,!0)},rPe={get:sR(!0,!1)},iPe={get:sR(!0,!0)};function ZZ(t,e,n){const r=Pn(n);if(r!==n&&e.call(t,r)){const i=Bz(t);bc(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Gfe=new WeakMap,Kfe=new WeakMap,Xfe=new WeakMap,Yfe=new WeakMap;function sPe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oPe(t){return t.__v_skip||!Object.isExtensible(t)?0:sPe(Bz(t))}function Oi(t){return sd(t)?t:oR(t,!1,X9e,tPe,Gfe)}function aPe(t){return oR(t,!1,Z9e,nPe,Kfe)}function Nb(t){return oR(t,!0,Y9e,rPe,Xfe)}function mf(t){return oR(t,!0,J9e,iPe,Yfe)}function oR(t,e,n,r,i){if(!Or(t))return _e.env.NODE_ENV!=="production"&&bc(`value cannot be made ${e?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=oPe(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function tu(t){return sd(t)?tu(t.__v_raw):!!(t&&t.__v_isReactive)}function sd(t){return!!(t&&t.__v_isReadonly)}function Ta(t){return!!(t&&t.__v_isShallow)}function bx(t){return t?!!t.__v_raw:!1}function Pn(t){const e=t&&t.__v_raw;return e?Pn(e):t}function $s(t){return!Rr(t,"__v_skip")&&Object.isExtensible(t)&&AN(t,"__v_skip",!0),t}const od=t=>Or(t)?Oi(t):t,wx=t=>Or(t)?Nb(t):t;function di(t){return t?t.__v_isRef===!0:!1}function Ve(t){return Zfe(t,!1)}function qm(t){return Zfe(t,!0)}function Zfe(t,e){return di(t)?t:new lPe(t,e)}class lPe{constructor(e,n){this.dep=new Vz,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Pn(e),this._value=n?e:od(e),this.__v_isShallow=n}get value(){return _e.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Ta(e)||sd(e);e=r?e:Pn(e),Fg(e,n)&&(this._rawValue=e,this._value=r?e:od(e),_e.env.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:n}):this.dep.trigger())}}function Ct(t){return di(t)?t.value:t}const cPe={get:(t,e,n)=>e==="__v_raw"?t:Ct(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return di(i)&&!di(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Jfe(t){return tu(t)?t:new Proxy(t,cPe)}function JZ(t){_e.env.NODE_ENV!=="production"&&!bx(t)&&bc("toRefs() expects a reactive object but received a plain one.");const e=wn(t)?new Array(t.length):{};for(const n in t)e[n]=Qfe(t,n);return e}class uPe{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Pn(e);let i=!0,s=e;if(!wn(e)||!nR(String(n)))do i=!bx(s)||Ta(s);while(i&&(s=s.__v_raw));this._shallow=i}get value(){let e=this._object[this._key];return this._shallow&&(e=Ct(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&di(this._raw[this._key])){const n=this._object[this._key];if(di(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return U9e(this._raw,this._key)}}class dPe{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $i(t,e,n){return di(t)?t:Cn(t)?new dPe(t):Or(t)&&arguments.length>1?Qfe(t,e,n):Ve(t)}function Qfe(t,e,n){return new uPe(t,e,n)}class fPe{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Vz(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zA-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&oi!==this)return Ffe(this,!0),!0;_e.env.NODE_ENV}get value(){const e=_e.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track();return $fe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):_e.env.NODE_ENV!=="production"&&bc("Write operation failed: computed value is readonly")}}function hPe(t,e,n=!1){let r,i;Cn(t)?r=t:(r=t.get,i=t.set);const s=new fPe(r,i,n);return _e.env.NODE_ENV,s}const s5={},kN=new WeakMap;let iy;function pPe(t,e=!1,n=iy){if(n){let r=kN.get(n);r||kN.set(n,r=[]),r.push(t)}else _e.env.NODE_ENV!=="production"&&!e&&bc("onWatcherCleanup() was called when there was no active watcher to associate with.")}function mPe(t,e,n=ai){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=T=>{(n.onWarn||bc)("Invalid watch source: ",T,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},u=T=>i?T:Ta(T)||i===!1||i===0?cp(T,1):cp(T);let d,f,h,m,y=!1,w=!1;if(di(t)?(f=()=>t.value,y=Ta(t)):tu(t)?(f=()=>u(t),y=!0):wn(t)?(w=!0,y=t.some(T=>tu(T)||Ta(T)),f=()=>t.map(T=>{if(di(T))return T.value;if(tu(T))return u(T);if(Cn(T))return l?l(T,2):T();_e.env.NODE_ENV!=="production"&&c(T)})):Cn(t)?e?f=l?()=>l(t,2):t:f=()=>{if(h){rd();try{h()}finally{id()}}const T=iy;iy=d;try{return l?l(t,3,[m]):t(m)}finally{iy=T}}:(f=Hs,_e.env.NODE_ENV!=="production"&&c(t)),e&&i){const T=f,R=i===!0?1/0:i;f=()=>cp(T(),R)}const b=Dfe(),E=()=>{d.stop(),b&&b.active&&Pz(b.effects,d)};if(s&&e){const T=e;e=(...R)=>{T(...R),E()}}let A=w?new Array(t.length).fill(s5):s5;const x=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(e){const R=d.run();if(i||y||(w?R.some((k,_)=>Fg(k,A[_])):Fg(R,A))){h&&h();const k=iy;iy=d;try{const _=[R,A===s5?void 0:w&&A[0]===s5?[]:A,m];A=R,l?l(e,3,_):e(..._)}finally{iy=k}}}else d.run()};return a&&a(x),d=new Ofe(f),d.scheduler=o?()=>o(x,!1):x,m=T=>pPe(T,!1,d),h=d.onStop=()=>{const T=kN.get(d);if(T){if(l)l(T,4);else for(const R of T)R();kN.delete(d)}},_e.env.NODE_ENV!=="production"&&(d.onTrack=n.onTrack,d.onTrigger=n.onTrigger),e?r?x(!0):A=d.run():o?o(x.bind(null,!0),!0):d.run(),E.pause=d.pause.bind(d),E.resume=d.resume.bind(d),E.stop=E,E}function cp(t,e=1/0,n){if(e<=0||!Or(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,di(t))cp(t.value,e,n);else if(wn(t))for(let r=0;r<t.length;r++)cp(t[r],e,n);else if(kfe(t)||Qy(t))t.forEach(r=>{cp(r,e,n)});else if(_fe(t)){for(const r in t)cp(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&cp(t[r],e,n)}return t}const tb=[];function j_(t){tb.push(t)}function $_(){tb.pop()}let r8=!1;function Ot(t,...e){if(r8)return;r8=!0,rd();const n=tb.length?tb[tb.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=gPe();if(r)y2(r,n,11,[t+e.map(s=>{var o,a;return(a=(o=s.toString)==null?void 0:o.call(s))!=null?a:JSON.stringify(s)}).join(""),n&&n.proxy,i.map(({vnode:s})=>`at <${Xk(n,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${t}`,...e];i.length&&s.push(`
`,...yPe(i)),console.warn(...s)}id(),r8=!1}function gPe(){let t=tb[tb.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function yPe(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...bPe(n))}),e}function bPe({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,i=` at <${Xk(t.component,t.type,r)}`,s=">"+n;return t.props?[i,...wPe(t.props),s]:[i+s]}function wPe(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...ehe(r,t[r]))}),n.length>3&&e.push(" ..."),e}function ehe(t,e,n){return Mi(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:di(e)?(e=ehe(t,Pn(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):Cn(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Pn(e),n?e:[`${t}=`,e])}function vPe(t,e){_e.env.NODE_ENV!=="production"&&t!==void 0&&(typeof t!="number"?Ot(`${e} is not a valid number - got ${JSON.stringify(t)}.`):isNaN(t)&&Ot(`${e} is NaN - the duration expression might be incorrect.`))}const Uz={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function y2(t,e,n,r){try{return r?t(...r):t()}catch(i){b2(i,e,n)}}function ad(t,e,n,r){if(Cn(t)){const i=y2(t,e,n,r);return i&&Fz(i)&&i.catch(s=>{b2(s,e,n)}),i}if(wn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ad(t[s],e,n,r));return i}else _e.env.NODE_ENV!=="production"&&Ot(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof t}`)}function b2(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ai;if(e){let a=e.parent;const l=e.proxy,c=_e.env.NODE_ENV!=="production"?Uz[n]:`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(s){rd(),y2(s,null,10,[t,l,c]),id();return}}xPe(t,n,i,r,o)}function xPe(t,e,n,r=!0,i=!1){if(_e.env.NODE_ENV!=="production"){const s=Uz[e];if(n&&j_(n),Ot(`Unhandled error${s?` during execution of ${s}`:""}`),n&&$_(),r)throw t;console.error(t)}else{if(i)throw t;console.error(t)}}const Va=[];let Xd=-1;const u1=[];let jm=null,kv=0;const the=Promise.resolve();let CN=null;const EPe=100;function gi(t){const e=CN||the;return t?e.then(this?t.bind(this):t):e}function SPe(t){let e=Xd+1,n=Va.length;for(;e<n;){const r=e+n>>>1,i=Va[r],s=VA(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function aR(t){if(!(t.flags&1)){const e=VA(t),n=Va[Va.length-1];!n||!(t.flags&2)&&e>=VA(n)?Va.push(t):Va.splice(SPe(e),0,t),t.flags|=1,nhe()}}function nhe(){CN||(CN=the.then(ihe))}function Wz(t){wn(t)?u1.push(...t):jm&&t.id===-1?jm.splice(kv+1,0,t):t.flags&1||(u1.push(t),t.flags|=1),nhe()}function QZ(t,e,n=Xd+1){for(_e.env.NODE_ENV!=="production"&&(e=e||new Map);n<Va.length;n++){const r=Va[n];if(r&&r.flags&2){if(t&&r.id!==t.uid||_e.env.NODE_ENV!=="production"&&qz(e,r))continue;Va.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function rhe(t){if(u1.length){const e=[...new Set(u1)].sort((n,r)=>VA(n)-VA(r));if(u1.length=0,jm){jm.push(...e);return}for(jm=e,_e.env.NODE_ENV!=="production"&&(t=t||new Map),kv=0;kv<jm.length;kv++){const n=jm[kv];_e.env.NODE_ENV!=="production"&&qz(t,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}jm=null,kv=0}}const VA=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ihe(t){_e.env.NODE_ENV!=="production"&&(t=t||new Map);const e=_e.env.NODE_ENV!=="production"?n=>qz(t,n):Hs;try{for(Xd=0;Xd<Va.length;Xd++){const n=Va[Xd];if(n&&!(n.flags&8)){if(_e.env.NODE_ENV!=="production"&&e(n))continue;n.flags&4&&(n.flags&=-2),y2(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;Xd<Va.length;Xd++){const n=Va[Xd];n&&(n.flags&=-2)}Xd=-1,Va.length=0,rhe(t),CN=null,(Va.length||u1.length)&&ihe(t)}}function qz(t,e){const n=t.get(e)||0;if(n>EPe){const r=e.i,i=r&&dR(r.type);return b2(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return t.set(e,n+1),!1}let Wu=!1;const z_=new Map;_e.env.NODE_ENV!=="production"&&(Uk().__VUE_HMR_RUNTIME__={createRecord:i8(she),rerender:i8(kPe),reload:i8(CPe)});const Ib=new Map;function APe(t){const e=t.type.__hmrId;let n=Ib.get(e);n||(she(e,t.type),n=Ib.get(e)),n.instances.add(t)}function TPe(t){Ib.get(t.type.__hmrId).instances.delete(t)}function she(t,e){return Ib.has(t)?!1:(Ib.set(t,{initialDef:_N(e),instances:new Set}),!0)}function _N(t){return Qhe(t)?t.__vccOpts:t}function kPe(t,e){const n=Ib.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(r=>{e&&(r.render=e,_N(r.type).render=e),r.renderCache=[],Wu=!0,r.job.flags&8||r.update(),Wu=!1}))}function CPe(t,e){const n=Ib.get(t);if(!n)return;e=_N(e),eJ(n.initialDef,e);const r=[...n.instances];for(let i=0;i<r.length;i++){const s=r[i],o=_N(s.type);let a=z_.get(o);a||(o!==n.initialDef&&eJ(o,e),z_.set(o,a=new Set)),a.add(s),s.appContext.propsCache.delete(s.type),s.appContext.emitsCache.delete(s.type),s.appContext.optionsCache.delete(s.type),s.ceReload?(a.add(s),s.ceReload(e.styles),a.delete(s)):s.parent?aR(()=>{s.job.flags&8||(Wu=!0,s.parent.update(),Wu=!1,a.delete(s))}):s.appContext.reload?s.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),s.root.ce&&s!==s.root&&s.root.ce._removeChildStyle(o)}Wz(()=>{z_.clear()})}function eJ(t,e){ss(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function i8(t){return(e,n)=>{try{return t(e,n)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let $u,eS=[],_7=!1;function Wk(t,...e){$u?$u.emit(t,...e):_7||eS.push({event:t,args:e})}function Gz(t,e){var n,r;$u=t,$u?($u.enabled=!0,eS.forEach(({event:i,args:s})=>$u.emit(i,...s)),eS=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Gz(s,e)}),setTimeout(()=>{$u||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,_7=!0,eS=[])},3e3)):(_7=!0,eS=[])}function _Pe(t,e){Wk("app:init",t,e,{Fragment:xn,Text:lw,Comment:Ki,Static:ZS})}function NPe(t){Wk("app:unmount",t)}const IPe=Kz("component:added"),ohe=Kz("component:updated"),RPe=Kz("component:removed"),MPe=t=>{$u&&typeof $u.cleanupBuffer=="function"&&!$u.cleanupBuffer(t)&&RPe(t)};function Kz(t){return e=>{Wk(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const LPe=ahe("perf:start"),DPe=ahe("perf:end");function ahe(t){return(e,n,r)=>{Wk(t,e.appContext.app,e.uid,e,n,r)}}function OPe(t,e,n){Wk("component:emit",t.appContext.app,t,e,n)}let Us=null,lhe=null;function NN(t){const e=Us;return Us=t,lhe=t&&t.type.__scopeId||null,e}function Uc(t,e=Us,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&DN(-1);const s=NN(e);let o;try{o=t(...i)}finally{NN(s),r._d&&DN(1)}return _e.env.NODE_ENV!=="production"&&ohe(e),o};return r._n=!0,r._c=!0,r._d=!0,r}function che(t){S9e(t)&&Ot("Do not use built-in directive ids as custom directive id: "+t)}function wc(t,e){if(Us===null)return _e.env.NODE_ENV!=="production"&&Ot("withDirectives can only be used inside render functions."),t;const n=uR(Us),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ai]=e[i];s&&(Cn(s)&&(s={mounted:s,updated:s}),s.deep&&cp(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function X0(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(rd(),ad(l,n,8,[t.el,a,t,e]),id())}}const uhe=Symbol("_vte"),dhe=t=>t.__isTeleport,nb=t=>t&&(t.disabled||t.disabled===""),tJ=t=>t&&(t.defer||t.defer===""),nJ=t=>typeof SVGElement<"u"&&t instanceof SVGElement,rJ=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,N7=(t,e)=>{const n=t&&t.to;if(Mi(n))if(e){const r=e(n);return _e.env.NODE_ENV!=="production"&&!r&&!nb(t)&&Ot(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),r}else return _e.env.NODE_ENV!=="production"&&Ot("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return _e.env.NODE_ENV!=="production"&&!n&&!nb(t)&&Ot(`Invalid Teleport target: ${n}`),n},fhe={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:y,createComment:w}}=c,b=nb(e.props);let{shapeFlag:E,children:A,dynamicChildren:x}=e;if(_e.env.NODE_ENV!=="production"&&Wu&&(l=!1,x=null),t==null){const T=e.el=_e.env.NODE_ENV!=="production"?w("teleport start"):y(""),R=e.anchor=_e.env.NODE_ENV!=="production"?w("teleport end"):y("");h(T,n,r),h(R,n,r);const k=(N,L)=>{E&16&&u(A,N,L,i,s,o,a,l)},_=()=>{const N=e.target=N7(e.props,m),L=hhe(N,e,y,h);N?(o!=="svg"&&nJ(N)?o="svg":o!=="mathml"&&rJ(N)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(N),b||(k(N,L),H_(e,!1))):_e.env.NODE_ENV!=="production"&&!b&&Ot("Invalid Teleport target on mount:",N,`(${typeof N})`)};b&&(k(n,R),H_(e,!0)),tJ(e.props)?(e.el.__isMounted=!1,Ha(()=>{_(),delete e.el.__isMounted},s)):_()}else{if(tJ(e.props)&&t.el.__isMounted===!1){Ha(()=>{fhe.process(t,e,n,r,i,s,o,a,l,c)},s);return}e.el=t.el,e.targetStart=t.targetStart;const T=e.anchor=t.anchor,R=e.target=t.target,k=e.targetAnchor=t.targetAnchor,_=nb(t.props),N=_?n:R,L=_?T:k;if(o==="svg"||nJ(R)?o="svg":(o==="mathml"||rJ(R))&&(o="mathml"),x?(f(t.dynamicChildren,x,N,i,s,o,a),YS(t,e,_e.env.NODE_ENV==="production")):l||d(t,e,N,L,i,s,o,a,!1),b)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):o5(e,n,T,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const M=e.target=N7(e.props,m);M?o5(e,M,null,c,0):_e.env.NODE_ENV!=="production"&&Ot("Invalid Teleport target on update:",R,`(${typeof R})`)}else _&&o5(e,R,k,c,1);H_(e,b)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(i(c),i(u)),s&&i(l),o&16){const h=s||!nb(f);for(let m=0;m<a.length;m++){const y=a[m];r(y,e,n,h,!!y.dynamicChildren)}}},move:o5,hydrate:PPe};function o5(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=s===2;if(d&&r(o,e,n),(!d||nb(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],e,n,2);d&&r(a,e,n)}function PPe(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){function f(y,w,b,E){w.anchor=d(o(y),w,a(y),n,r,i,s),w.targetStart=b,w.targetAnchor=E}const h=e.target=N7(e.props,l),m=nb(e.props);if(h){const y=h._lpa||h.firstChild;if(e.shapeFlag&16)if(m)f(t,e,y,y&&o(y));else{e.anchor=o(t);let w=y;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")e.targetStart=w;else if(w.data==="teleport anchor"){e.targetAnchor=w,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}w=o(w)}e.targetAnchor||hhe(h,e,u,c),d(y&&o(y),e,h,n,r,i,s)}H_(e,m)}else m&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Xz=fhe;function H_(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function hhe(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[uhe]=s,t&&(r(i,t),r(s,t)),s}const Oh=Symbol("_leaveCb"),a5=Symbol("_enterCb");function phe(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ur(()=>{t.isMounted=!0}),as(()=>{t.isUnmounting=!0}),t}const Dc=[Function,Array],mhe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dc,onEnter:Dc,onAfterEnter:Dc,onEnterCancelled:Dc,onBeforeLeave:Dc,onLeave:Dc,onAfterLeave:Dc,onLeaveCancelled:Dc,onBeforeAppear:Dc,onAppear:Dc,onAfterAppear:Dc,onAppearCancelled:Dc},ghe=t=>{const e=t.subTree;return e.component?ghe(e.component):e},FPe={name:"BaseTransition",props:mhe,setup(t,{slots:e}){const n=Io(),r=phe();return()=>{const i=e.default&&Yz(e.default(),!0);if(!i||!i.length)return;const s=yhe(i),o=Pn(t),{mode:a}=o;if(_e.env.NODE_ENV!=="production"&&a&&a!=="in-out"&&a!=="out-in"&&a!=="default"&&Ot(`invalid <transition> mode: ${a}`),r.isLeaving)return s8(s);const l=iJ(s);if(!l)return s8(s);let c=UA(l,o,r,n,d=>c=d);l.type!==Ki&&Rb(l,c);let u=n.subTree&&iJ(n.subTree);if(u&&u.type!==Ki&&!py(u,l)&&ghe(n).type!==Ki){let d=UA(u,o,r,n);if(Rb(u,d),a==="out-in"&&l.type!==Ki)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},s8(s);a==="in-out"&&l.type!==Ki?d.delayLeave=(f,h,m)=>{const y=bhe(r,u);y[String(u.key)]=u,f[Oh]=()=>{h(),f[Oh]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function yhe(t){let e=t[0];if(t.length>1){let n=!1;for(const r of t)if(r.type!==Ki){if(_e.env.NODE_ENV!=="production"&&n){Ot("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(e=r,n=!0,_e.env.NODE_ENV==="production")break}}return e}const BPe=FPe;function bhe(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function UA(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:w,onAppear:b,onAfterAppear:E,onAppearCancelled:A}=e,x=String(t.key),T=bhe(n,t),R=(N,L)=>{N&&ad(N,r,9,L)},k=(N,L)=>{const M=L[1];R(N,L),wn(N)?N.every(C=>C.length<=1)&&M():N.length<=1&&M()},_={mode:o,persisted:a,beforeEnter(N){let L=l;if(!n.isMounted)if(s)L=w||l;else return;N[Oh]&&N[Oh](!0);const M=T[x];M&&py(t,M)&&M.el[Oh]&&M.el[Oh](),R(L,[N])},enter(N){let L=c,M=u,C=d;if(!n.isMounted)if(s)L=b||c,M=E||u,C=A||d;else return;let D=!1;const O=N[a5]=$=>{D||(D=!0,$?R(C,[N]):R(M,[N]),_.delayedLeave&&_.delayedLeave(),N[a5]=void 0)};L?k(L,[N,O]):O()},leave(N,L){const M=String(t.key);if(N[a5]&&N[a5](!0),n.isUnmounting)return L();R(f,[N]);let C=!1;const D=N[Oh]=O=>{C||(C=!0,L(),O?R(y,[N]):R(m,[N]),N[Oh]=void 0,T[M]===t&&delete T[M])};T[M]=t,h?k(h,[N,D]):D()},clone(N){const L=UA(N,e,n,r,i);return i&&i(L),L}};return _}function s8(t){if(w2(t))return t=ld(t),t.children=null,t}function iJ(t){if(!w2(t))return dhe(t.type)&&t.children?yhe(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Cn(n.default))return n.default()}}function Rb(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Rb(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Yz(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===xn?(o.patchFlag&128&&i++,r=r.concat(Yz(o.children,e,a))):(e||o.type!==Ki)&&r.push(a!=null?ld(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function _r(t,e){return Cn(t)?ss({name:t.name},e,{setup:t}):t}function Zz(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const sJ=new WeakSet,IN=new WeakMap;function XS(t,e,n,r,i=!1){if(wn(t)){t.forEach((y,w)=>XS(y,e&&(wn(e)?e[w]:e),n,r,i));return}if(d1(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&XS(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?uR(r.component):r.el,o=i?null:s,{i:a,r:l}=t;if(_e.env.NODE_ENV!=="production"&&!a){Ot("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const c=e&&e.r,u=a.refs===ai?a.refs={}:a.refs,d=a.setupState,f=Pn(d),h=d===ai?Tfe:y=>_e.env.NODE_ENV!=="production"&&(Rr(f,y)&&!di(f[y])&&Ot(`Template ref "${y}" used on a non-ref value. It will not work in the production build.`),sJ.has(f[y]))?!1:Rr(f,y),m=y=>_e.env.NODE_ENV==="production"||!sJ.has(y);if(c!=null&&c!==l){if(oJ(e),Mi(c))u[c]=null,h(c)&&(d[c]=null);else if(di(c)){m(c)&&(c.value=null);const y=e;y.k&&(u[y.k]=null)}}if(Cn(l))y2(l,a,12,[o,u]);else{const y=Mi(l),w=di(l);if(y||w){const b=()=>{if(t.f){const E=y?h(l)?d[l]:u[l]:m(l)||!t.k?l.value:u[t.k];if(i)wn(E)&&Pz(E,s);else if(wn(E))E.includes(s)||E.push(s);else if(y)u[l]=[s],h(l)&&(d[l]=u[l]);else{const A=[s];m(l)&&(l.value=A),t.k&&(u[t.k]=A)}}else y?(u[l]=o,h(l)&&(d[l]=o)):w?(m(l)&&(l.value=o),t.k&&(u[t.k]=o)):_e.env.NODE_ENV!=="production"&&Ot("Invalid template ref type:",l,`(${typeof l})`)};if(o){const E=()=>{b(),IN.delete(t)};E.id=-1,IN.set(t,E),Ha(E,n)}else oJ(t),b()}else _e.env.NODE_ENV!=="production"&&Ot("Invalid template ref type:",l,`(${typeof l})`)}}function oJ(t){const e=IN.get(t);e&&(e.flags|=8,IN.delete(t))}const aJ=t=>t.nodeType===8;Uk().requestIdleCallback;Uk().cancelIdleCallback;function jPe(t,e){if(aJ(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(aJ(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const d1=t=>!!t.type.__asyncLoader;function $Pe(t){Cn(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let m;return c||(m=c=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((w,b)=>{l(y,()=>w(f()),()=>b(y),d+1)});throw y}).then(y=>{if(m!==c&&c)return c;if(_e.env.NODE_ENV!=="production"&&!y&&Ot("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),_e.env.NODE_ENV!=="production"&&y&&!Or(y)&&!Cn(y))throw new Error(`Invalid async component load result: ${y}`);return u=y,y}))};return _r({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(m,y,w){let b=!1;(y.bu||(y.bu=[])).push(()=>b=!0);const E=()=>{if(b){_e.env.NODE_ENV!=="production"&&Ot(`Skipping lazy hydration for component '${dR(u)||u.__file}': it was updated before lazy hydration performed.`);return}w()},A=s?()=>{const x=s(E,T=>jPe(m,T));x&&(y.bum||(y.bum=[])).push(x)}:E;u?A():h().then(()=>!y.isUnmounted&&A())},get __asyncResolved(){return u},setup(){const m=As;if(Zz(m),u)return()=>l5(u,m);const y=A=>{c=null,b2(A,m,13,!r)};if(a&&m.suspense||vx)return h().then(A=>()=>l5(A,m)).catch(A=>(y(A),()=>r?Fn(r,{error:A}):null));const w=Ve(!1),b=Ve(),E=Ve(!!i);return i&&setTimeout(()=>{E.value=!1},i),o!=null&&setTimeout(()=>{if(!w.value&&!b.value){const A=new Error(`Async component timed out after ${o}ms.`);y(A),b.value=A}},o),h().then(()=>{w.value=!0,m.parent&&w2(m.parent.vnode)&&m.parent.update()}).catch(A=>{y(A),b.value=A}),()=>{if(w.value&&u)return l5(u,m);if(b.value&&r)return Fn(r,{error:b.value});if(n&&!E.value)return l5(n,m)}}})}function l5(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Fn(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const w2=t=>t.type.__isKeepAlive;function whe(t,e){vhe(t,"a",e)}function Jz(t,e){vhe(t,"da",e)}function vhe(t,e,n=As){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(lR(e,r,n),n){let i=n.parent;for(;i&&i.parent;)w2(i.parent.vnode)&&zPe(r,e,n,i),i=i.parent}}function zPe(t,e,n,r){const i=lR(e,t,r,!0);Gk(()=>{Pz(r[e],i)},n)}function lR(t,e,n=As,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{rd();const a=Kk(n),l=ad(e,n,t,o);return a(),id(),l});return r?i.unshift(s):i.push(s),s}else if(_e.env.NODE_ENV!=="production"){const i=ry(Uz[t].replace(/ hook$/,""));Ot(`${i} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Xp=t=>(e,n=As)=>{(!vx||t==="sp")&&lR(t,(...r)=>e(...r),n)},qk=Xp("bm"),Ur=Xp("m"),xhe=Xp("bu"),Ehe=Xp("u"),as=Xp("bum"),Gk=Xp("um"),HPe=Xp("sp"),VPe=Xp("rtg"),UPe=Xp("rtc");function WPe(t,e=As){lR("ec",t,e)}const I7="components",qPe="directives",She=Symbol.for("v-ndc");function Ahe(t){return Mi(t)?khe(I7,t,!1)||t:t||She}function The(t){return khe(qPe,t)}function khe(t,e,n=!0,r=!1){const i=Us||As;if(i){const s=i.type;if(t===I7){const a=dR(s,!1);if(a&&(a===e||a===Za(e)||a===_b(Za(e))))return s}const o=lJ(i[t]||s[t],e)||lJ(i.appContext[t],e);if(!o&&r)return s;if(_e.env.NODE_ENV!=="production"&&n&&!o){const a=t===I7?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";Ot(`Failed to resolve ${t.slice(0,-1)}: ${e}${a}`)}return o}else _e.env.NODE_ENV!=="production"&&Ot(`resolve${_b(t.slice(0,-1))} can only be used in render() or setup().`)}function lJ(t,e){return t&&(t[e]||t[Za(e)]||t[_b(Za(e))])}function Ui(t,e,n,r){let i;const s=n,o=wn(t);if(o||Mi(t)){const a=o&&tu(t);let l=!1,c=!1;a&&(l=!Ta(t),c=sd(t),t=iR(t)),i=new Array(t.length);for(let u=0,d=t.length;u<d;u++)i[u]=e(l?c?wx(od(t[u])):od(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){_e.env.NODE_ENV!=="production"&&!Number.isInteger(t)&&Ot(`The v-for range expect an integer value but got ${t}.`),i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(Or(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(t[u],u,l,s)}}else i=[];return i}function Che(t,e,n={},r,i){if(Us.ce||Us.parent&&d1(Us.parent)&&Us.parent.ce){const c=Object.keys(n).length>0;return rt(),$r(xn,null,[Fn("slot",n,r)],c?-2:64)}let s=t[e];_e.env.NODE_ENV!=="production"&&s&&s.length>1&&(Ot("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),s=()=>[]),s&&s._c&&(s._d=!1),rt();const o=s&&_he(s(n)),a=n.key||o&&o.key,l=$r(xn,{key:(a&&!Kp(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function _he(t){return t.some(e=>r0(e)?!(e.type===Ki||e.type===xn&&!_he(e.children)):!0)?t:null}const R7=t=>t?Zhe(t)?uR(t):R7(t.parent):null,rb=ss(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>_e.env.NODE_ENV!=="production"?mf(t.props):t.props,$attrs:t=>_e.env.NODE_ENV!=="production"?mf(t.attrs):t.attrs,$slots:t=>_e.env.NODE_ENV!=="production"?mf(t.slots):t.slots,$refs:t=>_e.env.NODE_ENV!=="production"?mf(t.refs):t.refs,$parent:t=>R7(t.parent),$root:t=>R7(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Rhe(t),$forceUpdate:t=>t.f||(t.f=()=>{aR(t.update)}),$nextTick:t=>t.n||(t.n=gi.bind(t.proxy)),$watch:t=>a7e.bind(t)}),Qz=t=>t==="_"||t==="$",o8=(t,e)=>t!==ai&&!t.__isScriptSetup&&Rr(t,e),Nhe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(_e.env.NODE_ENV!=="production"&&e==="__isVue")return!0;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(o8(r,e))return o[e]=1,r[e];if(i!==ai&&Rr(i,e))return o[e]=2,i[e];if(Rr(s,e))return o[e]=3,s[e];if(n!==ai&&Rr(n,e))return o[e]=4,n[e];M7&&(o[e]=0)}}const c=rb[e];let u,d;if(c)return e==="$attrs"?(so(t.attrs,"get",""),_e.env.NODE_ENV!=="production"&&MN()):_e.env.NODE_ENV!=="production"&&e==="$slots"&&so(t,"get",e),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(n!==ai&&Rr(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Rr(d,e))return d[e];_e.env.NODE_ENV!=="production"&&Us&&(!Mi(e)||e.indexOf("__v")!==0)&&(i!==ai&&Qz(e[0])&&Rr(i,e)?Ot(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Us&&Ot(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return o8(i,e)?(i[e]=n,!0):_e.env.NODE_ENV!=="production"&&i.__isScriptSetup&&Rr(i,e)?(Ot(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):r!==ai&&Rr(r,e)?(r[e]=n,!0):Rr(t.props,e)?(_e.env.NODE_ENV!=="production"&&Ot(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(_e.env.NODE_ENV!=="production"&&Ot(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(_e.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(s,e,{enumerable:!0,configurable:!0,value:n}):s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==ai&&a[0]!=="$"&&Rr(t,a)||o8(e,a)||Rr(s,a)||Rr(r,a)||Rr(rb,a)||Rr(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Rr(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};_e.env.NODE_ENV!=="production"&&(Nhe.ownKeys=t=>(Ot("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));function GPe(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(rb).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>rb[n](t),set:Hs})}),e}function KPe(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(r=>{Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>t.props[r],set:Hs})})}function XPe(t){const{ctx:e,setupState:n}=t;Object.keys(Pn(n)).forEach(r=>{if(!n.__isScriptSetup){if(Qz(r[0])){Ot(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n[r],set:Hs})}})}function cJ(t){return wn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function YPe(){const t=Object.create(null);return(e,n)=>{t[n]?Ot(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let M7=!0;function ZPe(t){const e=Rhe(t),n=t.proxy,r=t.ctx;M7=!1,e.beforeCreate&&uJ(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:w,beforeDestroy:b,beforeUnmount:E,destroyed:A,unmounted:x,render:T,renderTracked:R,renderTriggered:k,errorCaptured:_,serverPrefetch:N,expose:L,inheritAttrs:M,components:C,directives:D,filters:O}=e,$=_e.env.NODE_ENV!=="production"?YPe():null;if(_e.env.NODE_ENV!=="production"){const[W]=t.propsOptions;if(W)for(const ce in W)$("Props",ce)}if(c&&JPe(c,r,$),o)for(const W in o){const ce=o[W];Cn(ce)?(_e.env.NODE_ENV!=="production"?Object.defineProperty(r,W,{value:ce.bind(n),configurable:!0,enumerable:!0,writable:!0}):r[W]=ce.bind(n),_e.env.NODE_ENV!=="production"&&$("Methods",W)):_e.env.NODE_ENV!=="production"&&Ot(`Method "${W}" has type "${typeof ce}" in the component definition. Did you reference the function correctly?`)}if(i){_e.env.NODE_ENV!=="production"&&!Cn(i)&&Ot("The data option must be a function. Plain object usage is no longer supported.");const W=i.call(n,n);if(_e.env.NODE_ENV!=="production"&&Fz(W)&&Ot("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Or(W))_e.env.NODE_ENV!=="production"&&Ot("data() should return an object.");else if(t.data=Oi(W),_e.env.NODE_ENV!=="production")for(const ce in W)$("Data",ce),Qz(ce[0])||Object.defineProperty(r,ce,{configurable:!0,enumerable:!0,get:()=>W[ce],set:Hs})}if(M7=!0,s)for(const W in s){const ce=s[W],se=Cn(ce)?ce.bind(n,n):Cn(ce.get)?ce.get.bind(n,n):Hs;_e.env.NODE_ENV!=="production"&&se===Hs&&Ot(`Computed property "${W}" has no getter.`);const Q=!Cn(ce)&&Cn(ce.set)?ce.set.bind(n):_e.env.NODE_ENV!=="production"?()=>{Ot(`Write operation failed: computed property "${W}" is readonly.`)}:Hs,J=pt({get:se,set:Q});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>J.value,set:K=>J.value=K}),_e.env.NODE_ENV!=="production"&&$("Computed",W)}if(a)for(const W in a)Ihe(a[W],r,n,W);if(l){const W=Cn(l)?l.call(n):l;Reflect.ownKeys(W).forEach(ce=>{va(ce,W[ce])})}u&&uJ(u,t,"c");function U(W,ce){wn(ce)?ce.forEach(se=>W(se.bind(n))):ce&&W(ce.bind(n))}if(U(qk,d),U(Ur,f),U(xhe,h),U(Ehe,m),U(whe,y),U(Jz,w),U(WPe,_),U(UPe,R),U(VPe,k),U(as,E),U(Gk,x),U(HPe,N),wn(L))if(L.length){const W=t.exposed||(t.exposed={});L.forEach(ce=>{Object.defineProperty(W,ce,{get:()=>n[ce],set:se=>n[ce]=se,enumerable:!0})})}else t.exposed||(t.exposed={});T&&t.render===Hs&&(t.render=T),M!=null&&(t.inheritAttrs=M),C&&(t.components=C),D&&(t.directives=D),N&&Zz(t)}function JPe(t,e,n=Hs){wn(t)&&(t=L7(t));for(const r in t){const i=t[r];let s;Or(i)?"default"in i?s=zr(i.from||r,i.default,!0):s=zr(i.from||r):s=zr(i),di(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s,_e.env.NODE_ENV!=="production"&&n("Inject",r)}}function uJ(t,e,n){ad(wn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ihe(t,e,n,r){let i=r.includes(".")?Lhe(n,r):()=>n[r];if(Mi(t)){const s=e[t];Cn(s)?gr(i,s):_e.env.NODE_ENV!=="production"&&Ot(`Invalid watch handler specified by key "${t}"`,s)}else if(Cn(t))gr(i,t.bind(n));else if(Or(t))if(wn(t))t.forEach(s=>Ihe(s,e,n,r));else{const s=Cn(t.handler)?t.handler.bind(n):e[t.handler];Cn(s)?gr(i,s,t):_e.env.NODE_ENV!=="production"&&Ot(`Invalid watch handler specified by key "${t.handler}"`,s)}else _e.env.NODE_ENV!=="production"&&Ot(`Invalid watch option: "${r}"`,t)}function Rhe(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>RN(l,c,o,!0)),RN(l,e,o)),Or(e)&&s.set(e,l),l}function RN(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&RN(t,s,n,!0),i&&i.forEach(o=>RN(t,o,n,!0));for(const o in e)if(r&&o==="expose")_e.env.NODE_ENV!=="production"&&Ot('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=QPe[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const QPe={data:dJ,props:fJ,emits:fJ,methods:tS,computed:tS,beforeCreate:Pa,created:Pa,beforeMount:Pa,mounted:Pa,beforeUpdate:Pa,updated:Pa,beforeDestroy:Pa,beforeUnmount:Pa,destroyed:Pa,unmounted:Pa,activated:Pa,deactivated:Pa,errorCaptured:Pa,serverPrefetch:Pa,components:tS,directives:tS,watch:t7e,provide:dJ,inject:e7e};function dJ(t,e){return e?t?function(){return ss(Cn(t)?t.call(this,this):t,Cn(e)?e.call(this,this):e)}:e:t}function e7e(t,e){return tS(L7(t),L7(e))}function L7(t){if(wn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pa(t,e){return t?[...new Set([].concat(t,e))]:e}function tS(t,e){return t?ss(Object.create(null),t,e):e}function fJ(t,e){return t?wn(t)&&wn(e)?[...new Set([...t,...e])]:ss(Object.create(null),cJ(t),cJ(e??{})):e}function t7e(t,e){if(!t)return e;if(!e)return t;const n=ss(Object.create(null),t);for(const r in e)n[r]=Pa(t[r],e[r]);return n}function Mhe(){return{app:null,config:{isNativeTag:Tfe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let n7e=0;function r7e(t,e){return function(r,i=null){Cn(r)||(r=ss({},r)),i!=null&&!Or(i)&&(_e.env.NODE_ENV!=="production"&&Ot("root props passed to app.mount() must be an object."),i=null);const s=Mhe(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:n7e++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:SJ,get config(){return s.config},set config(u){_e.env.NODE_ENV!=="production"&&Ot("app.config cannot be replaced. Modify individual options instead.")},use(u,...d){return o.has(u)?_e.env.NODE_ENV!=="production"&&Ot("Plugin has already been applied to target app."):u&&Cn(u.install)?(o.add(u),u.install(c,...d)):Cn(u)?(o.add(u),u(c,...d)):_e.env.NODE_ENV!=="production"&&Ot('A plugin must either be a function or an object with an "install" function.'),c},mixin(u){return s.mixins.includes(u)?_e.env.NODE_ENV!=="production"&&Ot("Mixin has already been applied to target app"+(u.name?`: ${u.name}`:"")):s.mixins.push(u),c},component(u,d){return _e.env.NODE_ENV!=="production"&&B7(u,s.config),d?(_e.env.NODE_ENV!=="production"&&s.components[u]&&Ot(`Component "${u}" has already been registered in target app.`),s.components[u]=d,c):s.components[u]},directive(u,d){return _e.env.NODE_ENV!=="production"&&che(u),d?(_e.env.NODE_ENV!=="production"&&s.directives[u]&&Ot(`Directive "${u}" has already been registered in target app.`),s.directives[u]=d,c):s.directives[u]},mount(u,d,f){if(l)_e.env.NODE_ENV!=="production"&&Ot("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{_e.env.NODE_ENV!=="production"&&u.__vue_app__&&Ot("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const h=c._ceVNode||Fn(r,i);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),_e.env.NODE_ENV!=="production"&&(s.reload=()=>{const m=ld(h);m.el=null,t(m,u,f)}),t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,_e.env.NODE_ENV!=="production"&&(c._instance=h.component,_Pe(c,SJ)),uR(h.component)}},onUnmount(u){_e.env.NODE_ENV!=="production"&&typeof u!="function"&&Ot(`Expected function as first argument to app.onUnmount(), but got ${typeof u}`),a.push(u)},unmount(){l?(ad(a,c._instance,16),t(null,c._container),_e.env.NODE_ENV!=="production"&&(c._instance=null,NPe(c)),delete c._container.__vue_app__):_e.env.NODE_ENV!=="production"&&Ot("Cannot unmount an app that is not mounted.")},provide(u,d){return _e.env.NODE_ENV!=="production"&&u in s.provides&&(Rr(s.provides,u)?Ot(`App already provides property with key "${String(u)}". It will be overwritten with the new value.`):Ot(`App already provides property with key "${String(u)}" inherited from its parent element. It will be overwritten with the new value.`)),s.provides[u]=d,c},runWithContext(u){const d=ib;ib=c;try{return u()}finally{ib=d}}};return c}}let ib=null;function va(t,e){if(_e.env.NODE_ENV!=="production"&&(!As||As.isMounted)&&Ot("provide() can only be used inside setup()."),As){let n=As.provides;const r=As.parent&&As.parent.provides;r===n&&(n=As.provides=Object.create(r)),n[t]=e}}function zr(t,e,n=!1){const r=Io();if(r||ib){let i=ib?ib._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Cn(e)?e.call(r&&r.proxy):e;_e.env.NODE_ENV!=="production"&&Ot(`injection "${String(t)}" not found.`)}else _e.env.NODE_ENV!=="production"&&Ot("inject() can only be used inside setup() or functional components.")}function i7e(){return!!(Io()||ib)}const s7e=Symbol.for("v-scx"),o7e=()=>{{const t=zr(s7e);return t||_e.env.NODE_ENV!=="production"&&Ot("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function n0(t,e){return eH(t,null,e)}function gr(t,e,n){return _e.env.NODE_ENV!=="production"&&!Cn(e)&&Ot("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),eH(t,e,n)}function eH(t,e,n=ai){const{immediate:r,deep:i,flush:s,once:o}=n;_e.env.NODE_ENV!=="production"&&!e&&(r!==void 0&&Ot('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),i!==void 0&&Ot('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&Ot('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const a=ss({},n);_e.env.NODE_ENV!=="production"&&(a.onWarn=Ot);const l=e&&r||!e&&s!=="post";let c;if(vx){if(s==="sync"){const h=o7e();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Hs,h.resume=Hs,h.pause=Hs,h}}const u=As;a.call=(h,m,y)=>ad(h,u,m,y);let d=!1;s==="post"?a.scheduler=h=>{Ha(h,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():aR(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=mPe(t,e,a);return vx&&(c?c.push(f):l&&f()),f}function a7e(t,e,n){const r=this.proxy,i=Mi(t)?t.includes(".")?Lhe(r,t):()=>r[t]:t.bind(r,r);let s;Cn(e)?s=e:(s=e.handler,n=e);const o=Kk(this),a=eH(i,s.bind(r),n);return o(),a}function Lhe(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const l7e=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Za(e)}Modifiers`]||t[`${Pp(e)}Modifiers`];function c7e(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ai;if(_e.env.NODE_ENV!=="production"){const{emitsOptions:u,propsOptions:[d]}=t;if(u)if(!(e in u))(!d||!(ry(Za(e))in d))&&Ot(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${ry(Za(e))}" prop.`);else{const f=u[e];Cn(f)&&(f(...n)||Ot(`Invalid event arguments: event validation failed for event "${e}".`))}}let i=n;const s=e.startsWith("update:"),o=s&&l7e(r,e.slice(7));if(o&&(o.trim&&(i=n.map(u=>Mi(u)?u.trim():u)),o.number&&(i=n.map(jz))),_e.env.NODE_ENV!=="production"&&OPe(t,e,i),_e.env.NODE_ENV!=="production"){const u=e.toLowerCase();u!==e&&r[ry(u)]&&Ot(`Event "${u}" is emitted in component ${Xk(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Pp(e)}" instead of "${e}".`)}let a,l=r[a=ry(e)]||r[a=ry(Za(e))];!l&&s&&(l=r[a=ry(Pp(e))]),l&&ad(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ad(c,t,6,i)}}const u7e=new WeakMap;function Dhe(t,e,n=!1){const r=n?u7e:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Cn(t)){const l=c=>{const u=Dhe(c,e,!0);u&&(a=!0,ss(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Or(t)&&r.set(t,null),null):(wn(s)?s.forEach(l=>o[l]=null):ss(o,s),Or(t)&&r.set(t,o),o)}function cR(t,e){return!t||!Vk(e)?!1:(e=e.slice(2).replace(/Once$/,""),Rr(t,e[0].toLowerCase()+e.slice(1))||Rr(t,Pp(e))||Rr(t,e))}let D7=!1;function MN(){D7=!0}function hJ(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,w=NN(t);let b,E;_e.env.NODE_ENV!=="production"&&(D7=!1);try{if(n.shapeFlag&4){const T=i||r,R=_e.env.NODE_ENV!=="production"&&h.__isScriptSetup?new Proxy(T,{get(k,_,N){return Ot(`Property '${String(_)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(k,_,N)}}):T;b=Pu(c.call(R,T,u,_e.env.NODE_ENV!=="production"?mf(d):d,h,f,m)),E=a}else{const T=e;_e.env.NODE_ENV!=="production"&&a===d&&MN(),b=Pu(T.length>1?T(_e.env.NODE_ENV!=="production"?mf(d):d,_e.env.NODE_ENV!=="production"?{get attrs(){return MN(),mf(a)},slots:o,emit:l}:{attrs:a,slots:o,emit:l}):T(_e.env.NODE_ENV!=="production"?mf(d):d,null)),E=e.props?a:d7e(a)}}catch(T){JS.length=0,b2(T,t,1),b=Fn(Ki)}let A=b,x;if(_e.env.NODE_ENV!=="production"&&b.patchFlag>0&&b.patchFlag&2048&&([A,x]=Ohe(b)),E&&y!==!1){const T=Object.keys(E),{shapeFlag:R}=A;if(T.length){if(R&7)s&&T.some(SN)&&(E=f7e(E,s)),A=ld(A,E,!1,!0);else if(_e.env.NODE_ENV!=="production"&&!D7&&A.type!==Ki){const k=Object.keys(a),_=[],N=[];for(let L=0,M=k.length;L<M;L++){const C=k[L];Vk(C)?SN(C)||_.push(C[2].toLowerCase()+C.slice(3)):N.push(C)}N.length&&Ot(`Extraneous non-props attributes (${N.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),_.length&&Ot(`Extraneous non-emits event listeners (${_.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(_e.env.NODE_ENV!=="production"&&!pJ(A)&&Ot("Runtime directive used on component with non-element root node. The directives will not function as intended."),A=ld(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(_e.env.NODE_ENV!=="production"&&!pJ(A)&&Ot("Component inside <Transition> renders non-element root node that cannot be animated."),Rb(A,n.transition)),_e.env.NODE_ENV!=="production"&&x?x(A):b=A,NN(w),b}const Ohe=t=>{const e=t.children,n=t.dynamicChildren,r=tH(e,!1);if(r){if(_e.env.NODE_ENV!=="production"&&r.patchFlag>0&&r.patchFlag&2048)return Ohe(r)}else return[t,void 0];const i=e.indexOf(r),s=n?n.indexOf(r):-1,o=a=>{e[i]=a,n&&(s>-1?n[s]=a:a.patchFlag>0&&(t.dynamicChildren=[...n,a]))};return[Pu(r),o]};function tH(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(r0(i)){if(i.type!==Ki||i.children==="v-if"){if(n)return;if(n=i,_e.env.NODE_ENV!=="production"&&e&&n.patchFlag>0&&n.patchFlag&2048)return tH(n.children)}}else return}return n}const d7e=t=>{let e;for(const n in t)(n==="class"||n==="style"||Vk(n))&&((e||(e={}))[n]=t[n]);return e},f7e=(t,e)=>{const n={};for(const r in t)(!SN(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n},pJ=t=>t.shapeFlag&7||t.type===Ki;function h7e(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(_e.env.NODE_ENV!=="production"&&(i||a)&&Wu||e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?mJ(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!cR(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?mJ(r,o,c):!0:!!o;return!1}function mJ(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!cR(n,s))return!0}return!1}function p7e({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Phe={},Fhe=()=>Object.create(Phe),Bhe=t=>Object.getPrototypeOf(t)===Phe;function m7e(t,e,n,r=!1){const i={},s=Fhe();t.propsDefaults=Object.create(null),jhe(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);_e.env.NODE_ENV!=="production"&&zhe(e||{},i,t),n?t.props=r?i:aPe(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function g7e(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function y7e(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Pn(i),[l]=t.propsOptions;let c=!1;if(!(_e.env.NODE_ENV!=="production"&&g7e(t))&&(r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(cR(t.emitsOptions,f))continue;const h=e[f];if(l)if(Rr(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const m=Za(f);i[m]=O7(l,a,m,h,t,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{jhe(t,e,i,s)&&(c=!0);let u;for(const d in a)(!e||!Rr(e,d)&&((u=Pp(d))===d||!Rr(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=O7(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Rr(e,d))&&(delete s[d],c=!0)}c&&ff(t.attrs,"set",""),_e.env.NODE_ENV!=="production"&&zhe(e||{},i,t)}function jhe(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(qS(l))continue;const c=e[l];let u;i&&Rr(i,u=Za(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:cR(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Pn(n),c=a||ai;for(let u=0;u<s.length;u++){const d=s[u];n[d]=O7(i,l,d,c[d],t,!Rr(c,d))}}return o}function O7(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Rr(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Cn(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Kk(i);r=c[n]=l.call(null,e),u()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Pp(n))&&(r=!0))}return r}const b7e=new WeakMap;function $he(t,e,n=!1){const r=n?b7e:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Cn(t)){const u=d=>{l=!0;const[f,h]=$he(d,e,!0);ss(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return Or(t)&&r.set(t,c1),c1;if(wn(s))for(let u=0;u<s.length;u++){_e.env.NODE_ENV!=="production"&&!Mi(s[u])&&Ot("props must be strings when using array syntax.",s[u]);const d=Za(s[u]);gJ(d)&&(o[d]=ai)}else if(s){_e.env.NODE_ENV!=="production"&&!Or(s)&&Ot("invalid props options",s);for(const u in s){const d=Za(u);if(gJ(d)){const f=s[u],h=o[d]=wn(f)||Cn(f)?{type:f}:ss({},f),m=h.type;let y=!1,w=!0;if(wn(m))for(let b=0;b<m.length;++b){const E=m[b],A=Cn(E)&&E.name;if(A==="Boolean"){y=!0;break}else A==="String"&&(w=!1)}else y=Cn(m)&&m.name==="Boolean";h[0]=y,h[1]=w,(y||Rr(h,"default"))&&a.push(d)}}}const c=[o,a];return Or(t)&&r.set(t,c),c}function gJ(t){return t[0]!=="$"&&!qS(t)?!0:(_e.env.NODE_ENV!=="production"&&Ot(`Invalid prop name: "${t}" is a reserved property.`),!1)}function w7e(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function zhe(t,e,n){const r=Pn(e),i=n.propsOptions[0],s=Object.keys(t).map(o=>Za(o));for(const o in i){let a=i[o];a!=null&&v7e(o,r[o],a,_e.env.NODE_ENV!=="production"?mf(r):r,!s.includes(o))}}function v7e(t,e,n,r,i){const{type:s,required:o,validator:a,skipCheck:l}=n;if(o&&i){Ot('Missing required prop: "'+t+'"');return}if(!(e==null&&!o)){if(s!=null&&s!==!0&&!l){let c=!1;const u=wn(s)?s:[s],d=[];for(let f=0;f<u.length&&!c;f++){const{valid:h,expectedType:m}=E7e(e,u[f]);d.push(m||""),c=h}if(!c){Ot(S7e(t,e,d));return}}a&&!a(e,r)&&Ot('Invalid prop: custom validator check failed for prop "'+t+'".')}}const x7e=Gp("String,Number,Boolean,Function,Symbol,BigInt");function E7e(t,e){let n;const r=w7e(e);if(r==="null")n=t===null;else if(x7e(r)){const i=typeof t;n=i===r.toLowerCase(),!n&&i==="object"&&(n=t instanceof e)}else r==="Object"?n=Or(t):r==="Array"?n=wn(t):n=t instanceof e;return{valid:n,expectedType:r}}function S7e(t,e,n){if(n.length===0)return`Prop type [] for prop "${t}" won't match anything. Did you mean to use type Array instead?`;let r=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(_b).join(" | ")}`;const i=n[0],s=Bz(e),o=yJ(e,i),a=yJ(e,s);return n.length===1&&bJ(i)&&!A7e(i,s)&&(r+=` with value ${o}`),r+=`, got ${s} `,bJ(s)&&(r+=`with value ${a}.`),r}function yJ(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function bJ(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function A7e(...t){return t.some(e=>e.toLowerCase()==="boolean")}const nH=t=>t==="_"||t==="_ctx"||t==="$stable",rH=t=>wn(t)?t.map(Pu):[Pu(t)],T7e=(t,e,n)=>{if(e._n)return e;const r=Uc((...i)=>(_e.env.NODE_ENV!=="production"&&As&&!(n===null&&Us)&&!(n&&n.root!==As.root)&&Ot(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),rH(e(...i))),n);return r._c=!1,r},Hhe=(t,e,n)=>{const r=t._ctx;for(const i in t){if(nH(i))continue;const s=t[i];if(Cn(s))e[i]=T7e(i,s,r);else if(s!=null){_e.env.NODE_ENV!=="production"&&Ot(`Non-function value encountered for slot "${i}". Prefer function slots for better performance.`);const o=rH(s);e[i]=()=>o}}},Vhe=(t,e)=>{_e.env.NODE_ENV!=="production"&&!w2(t.vnode)&&Ot("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=rH(e);t.slots.default=()=>n},P7=(t,e,n)=>{for(const r in e)(n||!nH(r))&&(t[r]=e[r])},k7e=(t,e,n)=>{const r=t.slots=Fhe();if(t.vnode.shapeFlag&32){const i=e._;i?(P7(r,e,n),n&&AN(r,"_",i,!0)):Hhe(e,r)}else e&&Vhe(t,e)},C7e=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ai;if(r.shapeFlag&32){const a=e._;a?_e.env.NODE_ENV!=="production"&&Wu?(P7(i,e,n),ff(t,"set","$slots")):n&&a===1?s=!1:P7(i,e,n):(s=!e.$stable,Hhe(e,i)),o=e}else e&&(Vhe(t,e),o={default:1});if(s)for(const a in i)!nH(a)&&o[a]==null&&delete i[a]};let _E,Ph;function ev(t,e){t.appContext.config.performance&&LN()&&Ph.mark(`vue-${e}-${t.uid}`),_e.env.NODE_ENV!=="production"&&LPe(t,e,LN()?Ph.now():Date.now())}function tv(t,e){if(t.appContext.config.performance&&LN()){const n=`vue-${e}-${t.uid}`,r=n+":end",i=`<${Xk(t,t.type)}> ${e}`;Ph.mark(r),Ph.measure(i,n,r),Ph.clearMeasures(i),Ph.clearMarks(n),Ph.clearMarks(r)}_e.env.NODE_ENV!=="production"&&DPe(t,e,LN()?Ph.now():Date.now())}function LN(){return _E!==void 0||(typeof window<"u"&&window.performance?(_E=!0,Ph=window.performance):_E=!1),_E}function _7e(){const t=[];if(_e.env.NODE_ENV!=="production"&&t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const Ha=L7e;function N7e(t){return I7e(t)}function I7e(t,e){_7e();const n=Uk();n.__VUE__=!0,_e.env.NODE_ENV!=="production"&&Gz(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Hs,insertStaticContent:m}=t,y=(ie,H,be,Te=null,Z=null,oe=null,te=void 0,ye=null,ke=_e.env.NODE_ENV!=="production"&&Wu?!1:!!H.dynamicChildren)=>{if(ie===H)return;ie&&!py(ie,H)&&(Te=z(ie),re(ie,Z,oe,!0),ie=null),H.patchFlag===-2&&(ke=!1,H.dynamicChildren=null);const{type:we,ref:Ae,shapeFlag:Re}=H;switch(we){case lw:w(ie,H,be,Te);break;case Ki:b(ie,H,be,Te);break;case ZS:ie==null?E(H,be,Te,te):_e.env.NODE_ENV!=="production"&&A(ie,H,be,te);break;case xn:D(ie,H,be,Te,Z,oe,te,ye,ke);break;default:Re&1?R(ie,H,be,Te,Z,oe,te,ye,ke):Re&6?O(ie,H,be,Te,Z,oe,te,ye,ke):Re&64||Re&128?we.process(ie,H,be,Te,Z,oe,te,ye,ke,ee):_e.env.NODE_ENV!=="production"&&Ot("Invalid VNode type:",we,`(${typeof we})`)}Ae!=null&&Z?XS(Ae,ie&&ie.ref,oe,H||ie,!H):Ae==null&&ie&&ie.ref!=null&&XS(ie.ref,null,oe,ie,!0)},w=(ie,H,be,Te)=>{if(ie==null)r(H.el=a(H.children),be,Te);else{const Z=H.el=ie.el;H.children!==ie.children&&c(Z,H.children)}},b=(ie,H,be,Te)=>{ie==null?r(H.el=l(H.children||""),be,Te):H.el=ie.el},E=(ie,H,be,Te)=>{[ie.el,ie.anchor]=m(ie.children,H,be,Te,ie.el,ie.anchor)},A=(ie,H,be,Te)=>{if(H.children!==ie.children){const Z=f(ie.anchor);T(ie),[H.el,H.anchor]=m(H.children,be,Z,Te)}else H.el=ie.el,H.anchor=ie.anchor},x=({el:ie,anchor:H},be,Te)=>{let Z;for(;ie&&ie!==H;)Z=f(ie),r(ie,be,Te),ie=Z;r(H,be,Te)},T=({el:ie,anchor:H})=>{let be;for(;ie&&ie!==H;)be=f(ie),i(ie),ie=be;i(H)},R=(ie,H,be,Te,Z,oe,te,ye,ke)=>{if(H.type==="svg"?te="svg":H.type==="math"&&(te="mathml"),ie==null)k(H,be,Te,Z,oe,te,ye,ke);else{const we=ie.el&&ie.el._isVueCE?ie.el:null;try{we&&we._beginPatch(),L(ie,H,Z,oe,te,ye,ke)}finally{we&&we._endPatch()}}},k=(ie,H,be,Te,Z,oe,te,ye)=>{let ke,we;const{props:Ae,shapeFlag:Re,transition:Pe,dirs:Ce}=ie;if(ke=ie.el=o(ie.type,oe,Ae&&Ae.is,Ae),Re&8?u(ke,ie.children):Re&16&&N(ie.children,ke,null,Te,Z,a8(ie,oe),te,ye),Ce&&X0(ie,null,Te,"created"),_(ke,ie,ie.scopeId,te,Te),Ae){for(const Fe in Ae)Fe!=="value"&&!qS(Fe)&&s(ke,Fe,null,Ae[Fe],oe,Te);"value"in Ae&&s(ke,"value",null,Ae.value,oe),(we=Ae.onVnodeBeforeMount)&&Od(we,Te,ie)}_e.env.NODE_ENV!=="production"&&(AN(ke,"__vnode",ie,!0),AN(ke,"__vueParentComponent",Te,!0)),Ce&&X0(ie,null,Te,"beforeMount");const Oe=R7e(Z,Pe);Oe&&Pe.beforeEnter(ke),r(ke,H,be),((we=Ae&&Ae.onVnodeMounted)||Oe||Ce)&&Ha(()=>{we&&Od(we,Te,ie),Oe&&Pe.enter(ke),Ce&&X0(ie,null,Te,"mounted")},Z)},_=(ie,H,be,Te,Z)=>{if(be&&h(ie,be),Te)for(let oe=0;oe<Te.length;oe++)h(ie,Te[oe]);if(Z){let oe=Z.subTree;if(_e.env.NODE_ENV!=="production"&&oe.patchFlag>0&&oe.patchFlag&2048&&(oe=tH(oe.children)||oe),H===oe||Whe(oe.type)&&(oe.ssContent===H||oe.ssFallback===H)){const te=Z.vnode;_(ie,te,te.scopeId,te.slotScopeIds,Z.parent)}}},N=(ie,H,be,Te,Z,oe,te,ye,ke=0)=>{for(let we=ke;we<ie.length;we++){const Ae=ie[we]=ye?$m(ie[we]):Pu(ie[we]);y(null,Ae,H,be,Te,Z,oe,te,ye)}},L=(ie,H,be,Te,Z,oe,te)=>{const ye=H.el=ie.el;_e.env.NODE_ENV!=="production"&&(ye.__vnode=H);let{patchFlag:ke,dynamicChildren:we,dirs:Ae}=H;ke|=ie.patchFlag&16;const Re=ie.props||ai,Pe=H.props||ai;let Ce;if(be&&Y0(be,!1),(Ce=Pe.onVnodeBeforeUpdate)&&Od(Ce,be,H,ie),Ae&&X0(H,ie,be,"beforeUpdate"),be&&Y0(be,!0),_e.env.NODE_ENV!=="production"&&Wu&&(ke=0,te=!1,we=null),(Re.innerHTML&&Pe.innerHTML==null||Re.textContent&&Pe.textContent==null)&&u(ye,""),we?(M(ie.dynamicChildren,we,ye,be,Te,a8(H,Z),oe),_e.env.NODE_ENV!=="production"&&YS(ie,H)):te||se(ie,H,ye,null,be,Te,a8(H,Z),oe,!1),ke>0){if(ke&16)C(ye,Re,Pe,be,Z);else if(ke&2&&Re.class!==Pe.class&&s(ye,"class",null,Pe.class,Z),ke&4&&s(ye,"style",Re.style,Pe.style,Z),ke&8){const Oe=H.dynamicProps;for(let Fe=0;Fe<Oe.length;Fe++){const $e=Oe[Fe],he=Re[$e],q=Pe[$e];(q!==he||$e==="value")&&s(ye,$e,he,q,Z,be)}}ke&1&&ie.children!==H.children&&u(ye,H.children)}else!te&&we==null&&C(ye,Re,Pe,be,Z);((Ce=Pe.onVnodeUpdated)||Ae)&&Ha(()=>{Ce&&Od(Ce,be,H,ie),Ae&&X0(H,ie,be,"updated")},Te)},M=(ie,H,be,Te,Z,oe,te)=>{for(let ye=0;ye<H.length;ye++){const ke=ie[ye],we=H[ye],Ae=ke.el&&(ke.type===xn||!py(ke,we)||ke.shapeFlag&198)?d(ke.el):be;y(ke,we,Ae,null,Te,Z,oe,te,!0)}},C=(ie,H,be,Te,Z)=>{if(H!==be){if(H!==ai)for(const oe in H)!qS(oe)&&!(oe in be)&&s(ie,oe,H[oe],null,Z,Te);for(const oe in be){if(qS(oe))continue;const te=be[oe],ye=H[oe];te!==ye&&oe!=="value"&&s(ie,oe,ye,te,Z,Te)}"value"in be&&s(ie,"value",H.value,be.value,Z)}},D=(ie,H,be,Te,Z,oe,te,ye,ke)=>{const we=H.el=ie?ie.el:a(""),Ae=H.anchor=ie?ie.anchor:a("");let{patchFlag:Re,dynamicChildren:Pe,slotScopeIds:Ce}=H;_e.env.NODE_ENV!=="production"&&(Wu||Re&2048)&&(Re=0,ke=!1,Pe=null),Ce&&(ye=ye?ye.concat(Ce):Ce),ie==null?(r(we,be,Te),r(Ae,be,Te),N(H.children||[],be,Ae,Z,oe,te,ye,ke)):Re>0&&Re&64&&Pe&&ie.dynamicChildren?(M(ie.dynamicChildren,Pe,be,Z,oe,te,ye),_e.env.NODE_ENV!=="production"?YS(ie,H):(H.key!=null||Z&&H===Z.subTree)&&YS(ie,H,!0)):se(ie,H,be,Ae,Z,oe,te,ye,ke)},O=(ie,H,be,Te,Z,oe,te,ye,ke)=>{H.slotScopeIds=ye,ie==null?H.shapeFlag&512?Z.ctx.activate(H,be,Te,te,ke):$(H,be,Te,Z,oe,te,ke):U(ie,H,ke)},$=(ie,H,be,Te,Z,oe,te)=>{const ye=ie.component=B7e(ie,Te,Z);if(_e.env.NODE_ENV!=="production"&&ye.type.__hmrId&&APe(ye),_e.env.NODE_ENV!=="production"&&(j_(ie),ev(ye,"mount")),w2(ie)&&(ye.ctx.renderer=ee),_e.env.NODE_ENV!=="production"&&ev(ye,"init"),$7e(ye,!1,te),_e.env.NODE_ENV!=="production"&&tv(ye,"init"),_e.env.NODE_ENV!=="production"&&Wu&&(ie.el=null),ye.asyncDep){if(Z&&Z.registerDep(ye,W,te),!ie.el){const ke=ye.subTree=Fn(Ki);b(null,ke,H,be),ie.placeholder=ke.el}}else W(ye,ie,H,be,Z,oe,te);_e.env.NODE_ENV!=="production"&&($_(),tv(ye,"mount"))},U=(ie,H,be)=>{const Te=H.component=ie.component;if(h7e(ie,H,be))if(Te.asyncDep&&!Te.asyncResolved){_e.env.NODE_ENV!=="production"&&j_(H),ce(Te,H,be),_e.env.NODE_ENV!=="production"&&$_();return}else Te.next=H,Te.update();else H.el=ie.el,Te.vnode=H},W=(ie,H,be,Te,Z,oe,te)=>{const ye=()=>{if(ie.isMounted){let{next:Re,bu:Pe,u:Ce,parent:Oe,vnode:Fe}=ie;{const Ee=Uhe(ie);if(Ee){Re&&(Re.el=Fe.el,ce(ie,Re,te)),Ee.asyncDep.then(()=>{ie.isUnmounted||ye()});return}}let $e=Re,he;_e.env.NODE_ENV!=="production"&&j_(Re||ie.vnode),Y0(ie,!1),Re?(Re.el=Fe.el,ce(ie,Re,te)):Re=Fe,Pe&&Tv(Pe),(he=Re.props&&Re.props.onVnodeBeforeUpdate)&&Od(he,Oe,Re,Fe),Y0(ie,!0),_e.env.NODE_ENV!=="production"&&ev(ie,"render");const q=hJ(ie);_e.env.NODE_ENV!=="production"&&tv(ie,"render");const ne=ie.subTree;ie.subTree=q,_e.env.NODE_ENV!=="production"&&ev(ie,"patch"),y(ne,q,d(ne.el),z(ne),ie,Z,oe),_e.env.NODE_ENV!=="production"&&tv(ie,"patch"),Re.el=q.el,$e===null&&p7e(ie,q.el),Ce&&Ha(Ce,Z),(he=Re.props&&Re.props.onVnodeUpdated)&&Ha(()=>Od(he,Oe,Re,Fe),Z),_e.env.NODE_ENV!=="production"&&ohe(ie),_e.env.NODE_ENV!=="production"&&$_()}else{let Re;const{el:Pe,props:Ce}=H,{bm:Oe,m:Fe,parent:$e,root:he,type:q}=ie,ne=d1(H);Y0(ie,!1),Oe&&Tv(Oe),!ne&&(Re=Ce&&Ce.onVnodeBeforeMount)&&Od(Re,$e,H),Y0(ie,!0);{he.ce&&he.ce._def.shadowRoot!==!1&&he.ce._injectChildStyle(q),_e.env.NODE_ENV!=="production"&&ev(ie,"render");const Ee=ie.subTree=hJ(ie);_e.env.NODE_ENV!=="production"&&tv(ie,"render"),_e.env.NODE_ENV!=="production"&&ev(ie,"patch"),y(null,Ee,be,Te,ie,Z,oe),_e.env.NODE_ENV!=="production"&&tv(ie,"patch"),H.el=Ee.el}if(Fe&&Ha(Fe,Z),!ne&&(Re=Ce&&Ce.onVnodeMounted)){const Ee=H;Ha(()=>Od(Re,$e,Ee),Z)}(H.shapeFlag&256||$e&&d1($e.vnode)&&$e.vnode.shapeFlag&256)&&ie.a&&Ha(ie.a,Z),ie.isMounted=!0,_e.env.NODE_ENV!=="production"&&IPe(ie),H=be=Te=null}};ie.scope.on();const ke=ie.effect=new Ofe(ye);ie.scope.off();const we=ie.update=ke.run.bind(ke),Ae=ie.job=ke.runIfDirty.bind(ke);Ae.i=ie,Ae.id=ie.uid,ke.scheduler=()=>aR(Ae),Y0(ie,!0),_e.env.NODE_ENV!=="production"&&(ke.onTrack=ie.rtc?Re=>Tv(ie.rtc,Re):void 0,ke.onTrigger=ie.rtg?Re=>Tv(ie.rtg,Re):void 0),we()},ce=(ie,H,be)=>{H.component=ie;const Te=ie.vnode.props;ie.vnode=H,ie.next=null,y7e(ie,H.props,Te,be),C7e(ie,H.children,be),rd(),QZ(ie),id()},se=(ie,H,be,Te,Z,oe,te,ye,ke=!1)=>{const we=ie&&ie.children,Ae=ie?ie.shapeFlag:0,Re=H.children,{patchFlag:Pe,shapeFlag:Ce}=H;if(Pe>0){if(Pe&128){J(we,Re,be,Te,Z,oe,te,ye,ke);return}else if(Pe&256){Q(we,Re,be,Te,Z,oe,te,ye,ke);return}}Ce&8?(Ae&16&&B(we,Z,oe),Re!==we&&u(be,Re)):Ae&16?Ce&16?J(we,Re,be,Te,Z,oe,te,ye,ke):B(we,Z,oe,!0):(Ae&8&&u(be,""),Ce&16&&N(Re,be,Te,Z,oe,te,ye,ke))},Q=(ie,H,be,Te,Z,oe,te,ye,ke)=>{ie=ie||c1,H=H||c1;const we=ie.length,Ae=H.length,Re=Math.min(we,Ae);let Pe;for(Pe=0;Pe<Re;Pe++){const Ce=H[Pe]=ke?$m(H[Pe]):Pu(H[Pe]);y(ie[Pe],Ce,be,null,Z,oe,te,ye,ke)}we>Ae?B(ie,Z,oe,!0,!1,Re):N(H,be,Te,Z,oe,te,ye,ke,Re)},J=(ie,H,be,Te,Z,oe,te,ye,ke)=>{let we=0;const Ae=H.length;let Re=ie.length-1,Pe=Ae-1;for(;we<=Re&&we<=Pe;){const Ce=ie[we],Oe=H[we]=ke?$m(H[we]):Pu(H[we]);if(py(Ce,Oe))y(Ce,Oe,be,null,Z,oe,te,ye,ke);else break;we++}for(;we<=Re&&we<=Pe;){const Ce=ie[Re],Oe=H[Pe]=ke?$m(H[Pe]):Pu(H[Pe]);if(py(Ce,Oe))y(Ce,Oe,be,null,Z,oe,te,ye,ke);else break;Re--,Pe--}if(we>Re){if(we<=Pe){const Ce=Pe+1,Oe=Ce<Ae?H[Ce].el:Te;for(;we<=Pe;)y(null,H[we]=ke?$m(H[we]):Pu(H[we]),be,Oe,Z,oe,te,ye,ke),we++}}else if(we>Pe)for(;we<=Re;)re(ie[we],Z,oe,!0),we++;else{const Ce=we,Oe=we,Fe=new Map;for(we=Oe;we<=Pe;we++){const Ie=H[we]=ke?$m(H[we]):Pu(H[we]);Ie.key!=null&&(_e.env.NODE_ENV!=="production"&&Fe.has(Ie.key)&&Ot("Duplicate keys found during update:",JSON.stringify(Ie.key),"Make sure keys are unique."),Fe.set(Ie.key,we))}let $e,he=0;const q=Pe-Oe+1;let ne=!1,Ee=0;const Se=new Array(q);for(we=0;we<q;we++)Se[we]=0;for(we=Ce;we<=Re;we++){const Ie=ie[we];if(he>=q){re(Ie,Z,oe,!0);continue}let qe;if(Ie.key!=null)qe=Fe.get(Ie.key);else for($e=Oe;$e<=Pe;$e++)if(Se[$e-Oe]===0&&py(Ie,H[$e])){qe=$e;break}qe===void 0?re(Ie,Z,oe,!0):(Se[qe-Oe]=we+1,qe>=Ee?Ee=qe:ne=!0,y(Ie,H[qe],be,null,Z,oe,te,ye,ke),he++)}const ze=ne?M7e(Se):c1;for($e=ze.length-1,we=q-1;we>=0;we--){const Ie=Oe+we,qe=H[Ie],Ye=H[Ie+1],ft=Ie+1<Ae?Ye.el||Ye.placeholder:Te;Se[we]===0?y(null,qe,be,ft,Z,oe,te,ye,ke):ne&&($e<0||we!==ze[$e]?K(qe,be,ft,2):$e--)}}},K=(ie,H,be,Te,Z=null)=>{const{el:oe,type:te,transition:ye,children:ke,shapeFlag:we}=ie;if(we&6){K(ie.component.subTree,H,be,Te);return}if(we&128){ie.suspense.move(H,be,Te);return}if(we&64){te.move(ie,H,be,ee);return}if(te===xn){r(oe,H,be);for(let Re=0;Re<ke.length;Re++)K(ke[Re],H,be,Te);r(ie.anchor,H,be);return}if(te===ZS){x(ie,H,be);return}if(Te!==2&&we&1&&ye)if(Te===0)ye.beforeEnter(oe),r(oe,H,be),Ha(()=>ye.enter(oe),Z);else{const{leave:Re,delayLeave:Pe,afterLeave:Ce}=ye,Oe=()=>{ie.ctx.isUnmounted?i(oe):r(oe,H,be)},Fe=()=>{oe._isLeaving&&oe[Oh](!0),Re(oe,()=>{Oe(),Ce&&Ce()})};Pe?Pe(oe,Oe,Fe):Fe()}else r(oe,H,be)},re=(ie,H,be,Te=!1,Z=!1)=>{const{type:oe,props:te,ref:ye,children:ke,dynamicChildren:we,shapeFlag:Ae,patchFlag:Re,dirs:Pe,cacheIndex:Ce}=ie;if(Re===-2&&(Z=!1),ye!=null&&(rd(),XS(ye,null,be,ie,!0),id()),Ce!=null&&(H.renderCache[Ce]=void 0),Ae&256){H.ctx.deactivate(ie);return}const Oe=Ae&1&&Pe,Fe=!d1(ie);let $e;if(Fe&&($e=te&&te.onVnodeBeforeUnmount)&&Od($e,H,ie),Ae&6)G(ie.component,be,Te);else{if(Ae&128){ie.suspense.unmount(be,Te);return}Oe&&X0(ie,null,H,"beforeUnmount"),Ae&64?ie.type.remove(ie,H,be,ee,Te):we&&!we.hasOnce&&(oe!==xn||Re>0&&Re&64)?B(we,H,be,!1,!0):(oe===xn&&Re&384||!Z&&Ae&16)&&B(ke,H,be),Te&&X(ie)}(Fe&&($e=te&&te.onVnodeUnmounted)||Oe)&&Ha(()=>{$e&&Od($e,H,ie),Oe&&X0(ie,null,H,"unmounted")},be)},X=ie=>{const{type:H,el:be,anchor:Te,transition:Z}=ie;if(H===xn){_e.env.NODE_ENV!=="production"&&ie.patchFlag>0&&ie.patchFlag&2048&&Z&&!Z.persisted?ie.children.forEach(te=>{te.type===Ki?i(te.el):X(te)}):me(be,Te);return}if(H===ZS){T(ie);return}const oe=()=>{i(be),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(ie.shapeFlag&1&&Z&&!Z.persisted){const{leave:te,delayLeave:ye}=Z,ke=()=>te(be,oe);ye?ye(ie.el,oe,ke):ke()}else oe()},me=(ie,H)=>{let be;for(;ie!==H;)be=f(ie),i(ie),ie=be;i(H)},G=(ie,H,be)=>{_e.env.NODE_ENV!=="production"&&ie.type.__hmrId&&TPe(ie);const{bum:Te,scope:Z,job:oe,subTree:te,um:ye,m:ke,a:we}=ie;wJ(ke),wJ(we),Te&&Tv(Te),Z.stop(),oe&&(oe.flags|=8,re(te,ie,H,be)),ye&&Ha(ye,H),Ha(()=>{ie.isUnmounted=!0},H),_e.env.NODE_ENV!=="production"&&MPe(ie)},B=(ie,H,be,Te=!1,Z=!1,oe=0)=>{for(let te=oe;te<ie.length;te++)re(ie[te],H,be,Te,Z)},z=ie=>{if(ie.shapeFlag&6)return z(ie.component.subTree);if(ie.shapeFlag&128)return ie.suspense.next();const H=f(ie.anchor||ie.el),be=H&&H[uhe];return be?f(be):H};let de=!1;const Y=(ie,H,be)=>{ie==null?H._vnode&&re(H._vnode,null,null,!0):y(H._vnode||null,ie,H,null,null,null,be),H._vnode=ie,de||(de=!0,QZ(),rhe(),de=!1)},ee={p:y,um:re,m:K,r:X,mt:$,mc:N,pc:se,pbc:M,n:z,o:t};return{render:Y,hydrate:void 0,createApp:r7e(Y)}}function a8({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Y0({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function R7e(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function YS(t,e,n=!1){const r=t.children,i=e.children;if(wn(r)&&wn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$m(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&YS(o,a)),a.type===lw&&a.patchFlag!==-1&&(a.el=o.el),a.type===Ki&&!a.el&&(a.el=o.el),_e.env.NODE_ENV!=="production"&&a.el&&(a.el.__vnode=a)}}function M7e(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function Uhe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Uhe(e)}function wJ(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Whe=t=>t.__isSuspense;function L7e(t,e){e&&e.pendingBranch?wn(t)?e.effects.push(...t):e.effects.push(t):Wz(t)}const xn=Symbol.for("v-fgt"),lw=Symbol.for("v-txt"),Ki=Symbol.for("v-cmt"),ZS=Symbol.for("v-stc"),JS=[];let cc=null;function rt(t=!1){JS.push(cc=t?null:[])}function D7e(){JS.pop(),cc=JS[JS.length-1]||null}let WA=1;function DN(t,e=!1){WA+=t,t<0&&cc&&e&&(cc.hasOnce=!0)}function qhe(t){return t.dynamicChildren=WA>0?cc||c1:null,D7e(),WA>0&&cc&&cc.push(t),t}function wt(t,e,n,r,i,s){return qhe(Pt(t,e,n,r,i,s,!0))}function $r(t,e,n,r,i){return qhe(Fn(t,e,n,r,i,!0))}function r0(t){return t?t.__v_isVNode===!0:!1}function py(t,e){if(_e.env.NODE_ENV!=="production"&&e.shapeFlag&6&&t.component){const n=z_.get(e.type);if(n&&n.has(t.component))return t.shapeFlag&=-257,e.shapeFlag&=-513,!1}return t.type===e.type&&t.key===e.key}const O7e=(...t)=>Khe(...t),Ghe=({key:t})=>t??null,V_=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Mi(t)||di(t)||Cn(t)?{i:Us,r:t,k:e,f:!!n}:t:null);function Pt(t,e=null,n=null,r=0,i=null,s=t===xn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ghe(e),ref:e&&V_(e),scopeId:lhe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Us};return a?(iH(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Mi(n)?8:16),_e.env.NODE_ENV!=="production"&&l.key!==l.key&&Ot("VNode created with invalid key (NaN). VNode type:",l.type),WA>0&&!o&&cc&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&cc.push(l),l}const Fn=_e.env.NODE_ENV!=="production"?O7e:Khe;function Khe(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===She)&&(_e.env.NODE_ENV!=="production"&&!t&&Ot(`Invalid vnode type when creating vnode: ${t}.`),t=Ki),r0(t)){const a=ld(t,e,!0);return n&&iH(a,n),WA>0&&!s&&cc&&(a.shapeFlag&6?cc[cc.indexOf(t)]=a:cc.push(a)),a.patchFlag=-2,a}if(Qhe(t)&&(t=t.__vccOpts),e){e=Xhe(e);let{class:a,style:l}=e;a&&!Mi(a)&&(e.class=Qr(a)),Or(l)&&(bx(l)&&!wn(l)&&(l=ss({},l)),e.style=Gn(l))}const o=Mi(t)?1:Whe(t)?128:dhe(t)?64:Or(t)?4:Cn(t)?2:0;return _e.env.NODE_ENV!=="production"&&o&4&&bx(t)&&(t=Pn(t),Ot("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Pt(t,e,n,r,i,o,s,!0)}function Xhe(t){return t?bx(t)||Bhe(t)?ss({},t):t:null}function ld(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?cw(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ghe(c),ref:e&&e.ref?n&&s?wn(s)?s.concat(V_(e)):[s,V_(e)]:V_(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:_e.env.NODE_ENV!=="production"&&o===-1&&wn(a)?a.map(Yhe):a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ld(t.ssContent),ssFallback:t.ssFallback&&ld(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Rb(u,l.clone(u)),u}function Yhe(t){const e=ld(t);return wn(t.children)&&(e.children=t.children.map(Yhe)),e}function Fp(t=" ",e=0){return Fn(lw,null,t,e)}function Xt(t="",e=!1){return e?(rt(),$r(Ki,null,t)):Fn(Ki,null,t)}function Pu(t){return t==null||typeof t=="boolean"?Fn(Ki):wn(t)?Fn(xn,null,t.slice()):r0(t)?$m(t):Fn(lw,null,String(t))}function $m(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ld(t)}function iH(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(wn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),iH(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Bhe(e)?e._ctx=Us:i===3&&Us&&(Us.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Cn(e)?(e={default:e,_ctx:Us},n=32):(e=String(e),r&64?(n=16,e=[Fp(e)]):n=8);t.children=e,t.shapeFlag|=n}function cw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Qr([e.class,r.class]));else if(i==="style")e.style=Gn([e.style,r.style]);else if(Vk(i)){const s=e[i],o=r[i];o&&s!==o&&!(wn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Od(t,e,n,r=null){ad(t,e,7,[n,r])}const P7e=Mhe();let F7e=0;function B7e(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||P7e,s={uid:F7e++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mfe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$he(r,i),emitsOptions:Dhe(r,i),emit:null,emitted:null,propsDefaults:ai,inheritAttrs:r.inheritAttrs,ctx:ai,data:ai,props:ai,attrs:ai,slots:ai,refs:ai,setupState:ai,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return _e.env.NODE_ENV!=="production"?s.ctx=GPe(s):s.ctx={_:s},s.root=e?e.root:s,s.emit=c7e.bind(null,s),t.ce&&t.ce(s),s}let As=null;const Io=()=>As||Us;let ON,F7;{const t=Uk(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ON=e("__VUE_INSTANCE_SETTERS__",n=>As=n),F7=e("__VUE_SSR_SETTERS__",n=>vx=n)}const Kk=t=>{const e=As;return ON(t),t.scope.on(),()=>{t.scope.off(),ON(e)}},vJ=()=>{As&&As.scope.off(),ON(null)},j7e=Gp("slot,component");function B7(t,{isNativeTag:e}){(j7e(t)||e(t))&&Ot("Do not use built-in or reserved HTML elements as component id: "+t)}function Zhe(t){return t.vnode.shapeFlag&4}let vx=!1;function $7e(t,e=!1,n=!1){e&&F7(e);const{props:r,children:i}=t.vnode,s=Zhe(t);m7e(t,r,s,e),k7e(t,i,n||e);const o=s?z7e(t,e):void 0;return e&&F7(!1),o}function z7e(t,e){const n=t.type;if(_e.env.NODE_ENV!=="production"){if(n.name&&B7(n.name,t.appContext.config),n.components){const i=Object.keys(n.components);for(let s=0;s<i.length;s++)B7(i[s],t.appContext.config)}if(n.directives){const i=Object.keys(n.directives);for(let s=0;s<i.length;s++)che(i[s])}n.compilerOptions&&H7e()&&Ot('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Nhe),_e.env.NODE_ENV!=="production"&&KPe(t);const{setup:r}=n;if(r){rd();const i=t.setupContext=r.length>1?U7e(t):null,s=Kk(t),o=y2(r,t,0,[_e.env.NODE_ENV!=="production"?mf(t.props):t.props,i]),a=Fz(o);if(id(),s(),(a||t.sp)&&!d1(t)&&Zz(t),a){if(o.then(vJ,vJ),e)return o.then(l=>{xJ(t,l,e)}).catch(l=>{b2(l,t,0)});if(t.asyncDep=o,_e.env.NODE_ENV!=="production"&&!t.suspense){const l=Xk(t,n);Ot(`Component <${l}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else xJ(t,o,e)}else Jhe(t,e)}function xJ(t,e,n){Cn(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Or(e)?(_e.env.NODE_ENV!=="production"&&r0(e)&&Ot("setup() should not return VNodes directly - return a render function instead."),_e.env.NODE_ENV!=="production"&&(t.devtoolsRawSetupState=e),t.setupState=Jfe(e),_e.env.NODE_ENV!=="production"&&XPe(t)):_e.env.NODE_ENV!=="production"&&e!==void 0&&Ot(`setup() should return an object. Received: ${e===null?"null":typeof e}`),Jhe(t,n)}const H7e=()=>!0;function Jhe(t,e,n){const r=t.type;t.render||(t.render=r.render||Hs);{const i=Kk(t);rd();try{ZPe(t)}finally{id(),i()}}_e.env.NODE_ENV!=="production"&&!r.render&&t.render===Hs&&!e&&(r.template?Ot('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):Ot("Component is missing template or render function: ",r))}const EJ=_e.env.NODE_ENV!=="production"?{get(t,e){return MN(),so(t,"get",""),t[e]},set(){return Ot("setupContext.attrs is readonly."),!1},deleteProperty(){return Ot("setupContext.attrs is readonly."),!1}}:{get(t,e){return so(t,"get",""),t[e]}};function V7e(t){return new Proxy(t.slots,{get(e,n){return so(t,"get","$slots"),e[n]}})}function U7e(t){const e=n=>{if(_e.env.NODE_ENV!=="production"&&(t.exposed&&Ot("expose() should be called only once per setup()."),n!=null)){let r=typeof n;r==="object"&&(wn(n)?r="array":di(n)&&(r="ref")),r!=="object"&&Ot(`expose() should be passed a plain object, received ${r}.`)}t.exposed=n||{}};if(_e.env.NODE_ENV!=="production"){let n,r;return Object.freeze({get attrs(){return n||(n=new Proxy(t.attrs,EJ))},get slots(){return r||(r=V7e(t))},get emit(){return(i,...s)=>t.emit(i,...s)},expose:e})}else return{attrs:new Proxy(t.attrs,EJ),slots:t.slots,emit:t.emit,expose:e}}function uR(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Jfe($s(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in rb)return rb[n](t)},has(e,n){return n in e||n in rb}})):t.proxy}const W7e=/(?:^|[-_])\w/g,q7e=t=>t.replace(W7e,e=>e.toUpperCase()).replace(/[-_]/g,"");function dR(t,e=!0){return Cn(t)?t.displayName||t.name:t.name||e&&t.__name}function Xk(t,e,n=!1){let r=dR(e);if(!r&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&t){const i=s=>{for(const o in s)if(s[o]===e)return o};r=i(t.components)||t.parent&&i(t.parent.type.components)||i(t.appContext.components)}return r?q7e(r):n?"App":"Anonymous"}function Qhe(t){return Cn(t)&&"__vccOpts"in t}const pt=(t,e)=>{const n=hPe(t,e,vx);if(_e.env.NODE_ENV!=="production"){const r=Io();r&&r.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function ut(t,e,n){try{DN(-1);const r=arguments.length;return r===2?Or(e)&&!wn(e)?r0(e)?Fn(t,null,[e]):Fn(t,e):Fn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&r0(n)&&(n=[n]),Fn(t,e,n))}finally{DN(1)}}function G7e(){if(_e.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#1677ff"},n={style:"color:#f5222d"},r={style:"color:#eb2f96"},i={__vue_custom_formatter:!0,header(d){if(!Or(d))return null;if(d.__isVue)return["div",t,"VueInstance"];if(di(d)){rd();const f=d.value;return id(),["div",{},["span",t,u(d)],"<",a(f),">"]}else{if(tu(d))return["div",{},["span",t,Ta(d)?"ShallowReactive":"Reactive"],"<",a(d),`>${sd(d)?" (readonly)":""}`];if(sd(d))return["div",{},["span",t,Ta(d)?"ShallowReadonly":"Readonly"],"<",a(d),">"]}return null},hasBody(d){return d&&d.__isVue},body(d){if(d&&d.__isVue)return["div",{},...s(d.$)]}};function s(d){const f=[];d.type.props&&d.props&&f.push(o("props",Pn(d.props))),d.setupState!==ai&&f.push(o("setup",d.setupState)),d.data!==ai&&f.push(o("data",Pn(d.data)));const h=l(d,"computed");h&&f.push(o("computed",h));const m=l(d,"inject");return m&&f.push(o("injected",m)),f.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:d}]]),f}function o(d,f){return f=ss({},f),Object.keys(f).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},d],["div",{style:"padding-left:1.25em"},...Object.keys(f).map(h=>["div",{},["span",r,h+": "],a(f[h],!1)])]]:["span",{}]}function a(d,f=!0){return typeof d=="number"?["span",e,d]:typeof d=="string"?["span",n,JSON.stringify(d)]:typeof d=="boolean"?["span",r,d]:Or(d)?["object",{object:f?Pn(d):d}]:["span",n,String(d)]}function l(d,f){const h=d.type;if(Cn(h))return;const m={};for(const y in d.ctx)c(h,y,f)&&(m[y]=d.ctx[y]);return m}function c(d,f,h){const m=d[h];if(wn(m)&&m.includes(f)||Or(m)&&f in m||d.extends&&c(d.extends,f,h)||d.mixins&&d.mixins.some(y=>c(y,f,h)))return!0}function u(d){return Ta(d)?"ShallowRef":d.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}const SJ="3.5.25",Zu=_e.env.NODE_ENV!=="production"?Ot:Hs;_e.env.NODE_ENV;_e.env.NODE_ENV;let j7;const AJ=typeof window<"u"&&window.trustedTypes;if(AJ)try{j7=AJ.createPolicy("vue",{createHTML:t=>t})}catch(t){_e.env.NODE_ENV!=="production"&&Zu(`Error creating trusted types policy: ${t}`)}const epe=j7?t=>j7.createHTML(t):t=>t,K7e="http://www.w3.org/2000/svg",X7e="http://www.w3.org/1998/Math/MathML",Ih=typeof document<"u"?document:null,TJ=Ih&&Ih.createElement("template"),Y7e={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Ih.createElementNS(K7e,t):e==="mathml"?Ih.createElementNS(X7e,t):n?Ih.createElement(t,{is:n}):Ih.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Ih.createTextNode(t),createComment:t=>Ih.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ih.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{TJ.innerHTML=epe(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=TJ.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_m="transition",NE="animation",xx=Symbol("_vtc"),tpe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},npe=ss({},mhe,tpe),Z7e=t=>(t.displayName="Transition",t.props=npe,t),Ex=Z7e((t,{slots:e})=>ut(BPe,rpe(t),e)),Z0=(t,e=[])=>{wn(t)?t.forEach(n=>n(...e)):t&&t(...e)},kJ=t=>t?wn(t)?t.some(e=>e.length>1):t.length>1:!1;function rpe(t){const e={};for(const C in t)C in tpe||(e[C]=t[C]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,m=J7e(i),y=m&&m[0],w=m&&m[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:A,onLeave:x,onLeaveCancelled:T,onBeforeAppear:R=b,onAppear:k=E,onAppearCancelled:_=A}=e,N=(C,D,O,$)=>{C._enterCancelled=$,Dm(C,D?u:a),Dm(C,D?c:o),O&&O()},L=(C,D)=>{C._isLeaving=!1,Dm(C,d),Dm(C,h),Dm(C,f),D&&D()},M=C=>(D,O)=>{const $=C?k:E,U=()=>N(D,C,O);Z0($,[D,U]),CJ(()=>{Dm(D,C?l:s),Ud(D,C?u:a),kJ($)||_J(D,r,y,U)})};return ss(e,{onBeforeEnter(C){Z0(b,[C]),Ud(C,s),Ud(C,o)},onBeforeAppear(C){Z0(R,[C]),Ud(C,l),Ud(C,c)},onEnter:M(!1),onAppear:M(!0),onLeave(C,D){C._isLeaving=!0;const O=()=>L(C,D);Ud(C,d),C._enterCancelled?(Ud(C,f),$7(C)):($7(C),Ud(C,f)),CJ(()=>{C._isLeaving&&(Dm(C,d),Ud(C,h),kJ(x)||_J(C,r,w,O))}),Z0(x,[C,O])},onEnterCancelled(C){N(C,!1,void 0,!0),Z0(A,[C])},onAppearCancelled(C){N(C,!0,void 0,!0),Z0(_,[C])},onLeaveCancelled(C){L(C),Z0(T,[C])}})}function J7e(t){if(t==null)return null;if(Or(t))return[l8(t.enter),l8(t.leave)];{const e=l8(t);return[e,e]}}function l8(t){const e=k9e(t);return _e.env.NODE_ENV!=="production"&&vPe(e,"<transition> explicit duration"),e}function Ud(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[xx]||(t[xx]=new Set)).add(e)}function Dm(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[xx];n&&(n.delete(e),n.size||(t[xx]=void 0))}function CJ(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Q7e=0;function _J(t,e,n,r){const i=t._endId=++Q7e,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=ipe(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),s()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function ipe(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),i=r(`${_m}Delay`),s=r(`${_m}Duration`),o=NJ(i,s),a=r(`${NE}Delay`),l=r(`${NE}Duration`),c=NJ(a,l);let u=null,d=0,f=0;e===_m?o>0&&(u=_m,d=o,f=s.length):e===NE?c>0&&(u=NE,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?_m:NE:null,f=u?u===_m?s.length:l.length:0);const h=u===_m&&/\b(?:transform|all)(?:,|$)/.test(r(`${_m}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function NJ(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>IJ(n)+IJ(t[r])))}function IJ(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function $7(t){return(t?t.ownerDocument:document).body.offsetHeight}function eFe(t,e,n){const r=t[xx];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const PN=Symbol("_vod"),spe=Symbol("_vsh"),tFe={name:"show",beforeMount(t,{value:e},{transition:n}){t[PN]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):IE(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),IE(t,!0),r.enter(t)):r.leave(t,()=>{IE(t,!1)}):IE(t,e))},beforeUnmount(t,{value:e}){IE(t,e)}};function IE(t,e){t.style.display=e?t[PN]:"none",t[spe]=!e}const ope=Symbol(_e.env.NODE_ENV!=="production"?"CSS_VAR_TEXT":"");function nFe(t){const e=Io();if(!e){_e.env.NODE_ENV!=="production"&&Zu("useCssVars is called without current active component instance.");return}const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>FN(s,i))};_e.env.NODE_ENV!=="production"&&(e.getCssVars=()=>t(e.proxy));const r=()=>{const i=t(e.proxy);e.ce?FN(e.ce,i):z7(e.subTree,i),n(i)};xhe(()=>{Wz(r)}),Ur(()=>{gr(r,Hs,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Gk(()=>i.disconnect())})}function z7(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{z7(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)FN(t.el,e);else if(t.type===xn)t.children.forEach(n=>z7(n,e));else if(t.type===ZS){let{el:n,anchor:r}=t;for(;n&&(FN(n,e),n!==r);)n=n.nextSibling}}function FN(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e){const s=$9e(e[i]);n.setProperty(`--${i}`,s),r+=`--${i}: ${s};`}n[ope]=r}}const rFe=/(?:^|;)\s*display\s*:/;function iFe(t,e,n){const r=t.style,i=Mi(n);let s=!1;if(n&&!i){if(e)if(Mi(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&U_(r,a,"")}else for(const o in e)n[o]==null&&U_(r,o,"");for(const o in n)o==="display"&&(s=!0),U_(r,o,n[o])}else if(i){if(e!==n){const o=r[ope];o&&(n+=";"+o),r.cssText=n,s=rFe.test(n)}}else e&&t.removeAttribute("style");PN in t&&(t[PN]=s?r.display:"",t[spe]&&(r.display="none"))}const sFe=/[^\\];\s*$/,RJ=/\s*!important$/;function U_(t,e,n){if(wn(n))n.forEach(r=>U_(t,e,r));else if(n==null&&(n=""),_e.env.NODE_ENV!=="production"&&sFe.test(n)&&Zu(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const r=oFe(t,e);RJ.test(n)?t.setProperty(Pp(r),n.replace(RJ,""),"important"):t[r]=n}}const MJ=["Webkit","Moz","ms"],c8={};function oFe(t,e){const n=c8[e];if(n)return n;let r=Za(e);if(r!=="filter"&&r in t)return c8[e]=r;r=_b(r);for(let i=0;i<MJ.length;i++){const s=MJ[i]+r;if(s in t)return c8[e]=s}return e}const LJ="http://www.w3.org/1999/xlink";function DJ(t,e,n,r,i,s=j9e(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(LJ,e.slice(6,e.length)):t.setAttributeNS(LJ,e,n):n==null||s&&!Nfe(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Kp(n)?String(n):n)}function OJ(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?epe(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Nfe(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch(a){_e.env.NODE_ENV!=="production"&&!o&&Zu(`Failed setting prop "${e}" on <${s.toLowerCase()}>: value ${n} is invalid.`,a)}o&&t.removeAttribute(i||e)}function Cv(t,e,n,r){t.addEventListener(e,n,r)}function aFe(t,e,n,r){t.removeEventListener(e,n,r)}const PJ=Symbol("_vei");function lFe(t,e,n,r,i=null){const s=t[PJ]||(t[PJ]={}),o=s[e];if(r&&o)o.value=_e.env.NODE_ENV!=="production"?BJ(r,e):r;else{const[a,l]=cFe(e);if(r){const c=s[e]=fFe(_e.env.NODE_ENV!=="production"?BJ(r,e):r,i);Cv(t,a,c,l)}else o&&(aFe(t,a,o,l),s[e]=void 0)}}const FJ=/(?:Once|Passive|Capture)$/;function cFe(t){let e;if(FJ.test(t)){e={};let r;for(;r=t.match(FJ);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pp(t.slice(2)),e]}let u8=0;const uFe=Promise.resolve(),dFe=()=>u8||(uFe.then(()=>u8=0),u8=Date.now());function fFe(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ad(hFe(r,n.value),e,5,[r])};return n.value=t,n.attached=dFe(),n}function BJ(t,e){return Cn(t)||wn(t)?t:(Zu(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof t}.`),Hs)}function hFe(t,e){if(wn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const jJ=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pFe=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?eFe(t,r,o):e==="style"?iFe(t,n,r):Vk(e)?SN(e)||lFe(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mFe(t,e,r,o))?(OJ(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&DJ(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Mi(r))?OJ(t,Za(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),DJ(t,e,r,o))};function mFe(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&jJ(e)&&Cn(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return jJ(e)&&Mi(n)?!1:e in t}const ape=new WeakMap,lpe=new WeakMap,BN=Symbol("_moveCb"),$J=Symbol("_enterCb"),gFe=t=>(delete t.props.mode,t),yFe=gFe({name:"TransitionGroup",props:ss({},npe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Io(),r=phe();let i,s;return Ehe(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!EFe(i[0].el,n.vnode.el,o)){i=[];return}i.forEach(wFe),i.forEach(vFe);const a=i.filter(xFe);$7(n.vnode.el),a.forEach(l=>{const c=l.el,u=c.style;Ud(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[BN]=f=>{f&&f.target!==c||(!f||f.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",d),c[BN]=null,Dm(c,o))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const o=Pn(t),a=rpe(o);let l=o.tag||xn;if(i=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(i.push(u),Rb(u,UA(u,a,r,n)),ape.set(u,{left:u.el.offsetLeft,top:u.el.offsetTop}))}s=e.default?Yz(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null?Rb(u,UA(u,a,r,n)):_e.env.NODE_ENV!=="production"&&u.type!==lw&&Zu("<TransitionGroup> children must be keyed.")}return Fn(l,null,s)}}}),bFe=yFe;function wFe(t){const e=t.el;e[BN]&&e[BN](),e[$J]&&e[$J]()}function vFe(t){lpe.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function xFe(t){const e=ape.get(t),n=lpe.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function EFe(t,e,n){const r=t.cloneNode(),i=t[xx];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=ipe(r);return s.removeChild(r),o}const zJ=t=>{const e=t.props["onUpdate:modelValue"]||!1;return wn(e)?n=>Tv(e,n):e};function SFe(t){t.target.composing=!0}function HJ(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const d8=Symbol("_assign");function VJ(t,e,n){return e&&(t=t.trim()),n&&(t=jz(t)),t}const Mb={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[d8]=zJ(i);const s=r||i.props&&i.props.type==="number";Cv(t,e?"change":"input",o=>{o.target.composing||t[d8](VJ(t.value,n,s))}),(n||s)&&Cv(t,"change",()=>{t.value=VJ(t.value,n,s)}),e||(Cv(t,"compositionstart",SFe),Cv(t,"compositionend",HJ),Cv(t,"change",HJ))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[d8]=zJ(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?jz(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},AFe=["ctrl","shift","alt","meta"],TFe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>AFe.some(n=>t[`${n}Key`]&&!e.includes(n))},mr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=TFe[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},kFe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},f1=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const s=Pp(i.key);if(e.some(o=>o===s||kFe[o]===s))return t(i)}))},CFe=ss({patchProp:pFe},Y7e);let UJ;function _Fe(){return UJ||(UJ=N7e(CFe))}const fR=((...t)=>{const e=_Fe().createApp(...t);_e.env.NODE_ENV!=="production"&&(IFe(e),RFe(e));const{mount:n}=e;return e.mount=r=>{const i=MFe(r);if(!i)return;const s=e._component;!Cn(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,NFe(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function NFe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function IFe(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>O9e(e)||P9e(e)||F9e(e),writable:!1})}function RFe(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){Zu("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,r='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(t.config,"compilerOptions",{get(){return Zu(r),n},set(){Zu(r)}})}}function MFe(t){if(Mi(t)){const e=document.querySelector(t);return _e.env.NODE_ENV!=="production"&&!e&&Zu(`Failed to mount app: mount target selector "${t}" returned null.`),e}return _e.env.NODE_ENV!=="production"&&window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&Zu('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function LFe(){G7e()}_e.env.NODE_ENV!=="production"&&LFe();var cpe={},hR={};hR.byteLength=PFe;hR.toByteArray=BFe;hR.fromByteArray=zFe;var hf=[],Fc=[],DFe=typeof Uint8Array<"u"?Uint8Array:Array,f8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nv=0,OFe=f8.length;nv<OFe;++nv)hf[nv]=f8[nv],Fc[f8.charCodeAt(nv)]=nv;Fc[45]=62;Fc[95]=63;function upe(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function PFe(t){var e=upe(t),n=e[0],r=e[1];return(n+r)*3/4-r}function FFe(t,e,n){return(e+n)*3/4-n}function BFe(t){var e,n=upe(t),r=n[0],i=n[1],s=new DFe(FFe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Fc[t.charCodeAt(l)]<<18|Fc[t.charCodeAt(l+1)]<<12|Fc[t.charCodeAt(l+2)]<<6|Fc[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Fc[t.charCodeAt(l)]<<2|Fc[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Fc[t.charCodeAt(l)]<<10|Fc[t.charCodeAt(l+1)]<<4|Fc[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function jFe(t){return hf[t>>18&63]+hf[t>>12&63]+hf[t>>6&63]+hf[t&63]}function $Fe(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(jFe(r));return i.join("")}function zFe(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push($Fe(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(hf[e>>2]+hf[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(hf[e>>10]+hf[e>>4&63]+hf[e<<2&63]+"=")),i.join("")}var sH={};sH.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+t[e+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=f,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(h?-1:1)*o*Math.pow(2,s-r)};sH.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=a&255,h+=m,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+h]=o&255,h+=m,o/=256,c-=8);t[n+h-m]|=y*128};(function(t){const e=hR,n=sH,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=T,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const he=new s(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,s.prototype),Object.setPrototypeOf(he,q),he.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(he){if(he>i)throw new RangeError('The value "'+he+'" is invalid for option "size"');const q=new s(he);return Object.setPrototypeOf(q,u.prototype),q}function u(he,q,ne){if(typeof he=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(he)}return d(he,q,ne)}u.poolSize=8192;function d(he,q,ne){if(typeof he=="string")return y(he,q);if(o.isView(he))return b(he);if(he==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he);if(Pe(he,o)||he&&Pe(he.buffer,o)||typeof a<"u"&&(Pe(he,a)||he&&Pe(he.buffer,a)))return E(he,q,ne);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=he.valueOf&&he.valueOf();if(Ee!=null&&Ee!==he)return u.from(Ee,q,ne);const Se=A(he);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return u.from(he[Symbol.toPrimitive]("string"),q,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he)}u.from=function(he,q,ne){return d(he,q,ne)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function f(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function h(he,q,ne){return f(he),he<=0?c(he):q!==void 0?typeof ne=="string"?c(he).fill(q,ne):c(he).fill(q):c(he)}u.alloc=function(he,q,ne){return h(he,q,ne)};function m(he){return f(he),c(he<0?0:x(he)|0)}u.allocUnsafe=function(he){return m(he)},u.allocUnsafeSlow=function(he){return m(he)};function y(he,q){if((typeof q!="string"||q==="")&&(q="utf8"),!u.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const ne=R(he,q)|0;let Ee=c(ne);const Se=Ee.write(he,q);return Se!==ne&&(Ee=Ee.slice(0,Se)),Ee}function w(he){const q=he.length<0?0:x(he.length)|0,ne=c(q);for(let Ee=0;Ee<q;Ee+=1)ne[Ee]=he[Ee]&255;return ne}function b(he){if(Pe(he,s)){const q=new s(he);return E(q.buffer,q.byteOffset,q.byteLength)}return w(he)}function E(he,q,ne){if(q<0||he.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<q+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return q===void 0&&ne===void 0?Ee=new s(he):ne===void 0?Ee=new s(he,q):Ee=new s(he,q,ne),Object.setPrototypeOf(Ee,u.prototype),Ee}function A(he){if(u.isBuffer(he)){const q=x(he.length)|0,ne=c(q);return ne.length===0||he.copy(ne,0,0,q),ne}if(he.length!==void 0)return typeof he.length!="number"||Ce(he.length)?c(0):w(he);if(he.type==="Buffer"&&Array.isArray(he.data))return w(he.data)}function x(he){if(he>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return he|0}function T(he){return+he!=he&&(he=0),u.alloc(+he)}u.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==u.prototype},u.compare=function(q,ne){if(Pe(q,s)&&(q=u.from(q,q.offset,q.byteLength)),Pe(ne,s)&&(ne=u.from(ne,ne.offset,ne.byteLength)),!u.isBuffer(q)||!u.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===ne)return 0;let Ee=q.length,Se=ne.length;for(let ze=0,Ie=Math.min(Ee,Se);ze<Ie;++ze)if(q[ze]!==ne[ze]){Ee=q[ze],Se=ne[ze];break}return Ee<Se?-1:Se<Ee?1:0},u.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(q,ne){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return u.alloc(0);let Ee;if(ne===void 0)for(ne=0,Ee=0;Ee<q.length;++Ee)ne+=q[Ee].length;const Se=u.allocUnsafe(ne);let ze=0;for(Ee=0;Ee<q.length;++Ee){let Ie=q[Ee];if(Pe(Ie,s))ze+Ie.length>Se.length?(u.isBuffer(Ie)||(Ie=u.from(Ie)),Ie.copy(Se,ze)):s.prototype.set.call(Se,Ie,ze);else if(u.isBuffer(Ie))Ie.copy(Se,ze);else throw new TypeError('"list" argument must be an Array of Buffers');ze+=Ie.length}return Se};function R(he,q){if(u.isBuffer(he))return he.length;if(o.isView(he)||Pe(he,o))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof he);const ne=he.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&ne===0)return 0;let Se=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return ye(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne*2;case"hex":return ne>>>1;case"base64":return Ae(he).length;default:if(Se)return Ee?-1:ye(he).length;q=(""+q).toLowerCase(),Se=!0}}u.byteLength=R;function k(he,q,ne){let Ee=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0,q>>>=0,ne<=q))return"";for(he||(he="utf8");;)switch(he){case"hex":return K(this,q,ne);case"utf8":case"utf-8":return W(this,q,ne);case"ascii":return Q(this,q,ne);case"latin1":case"binary":return J(this,q,ne);case"base64":return U(this,q,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,q,ne);default:if(Ee)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Ee=!0}}u.prototype._isBuffer=!0;function _(he,q,ne){const Ee=he[q];he[q]=he[ne],he[ne]=Ee}u.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ne=0;ne<q;ne+=2)_(this,ne,ne+1);return this},u.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ne=0;ne<q;ne+=4)_(this,ne,ne+3),_(this,ne+1,ne+2);return this},u.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ne=0;ne<q;ne+=8)_(this,ne,ne+7),_(this,ne+1,ne+6),_(this,ne+2,ne+5),_(this,ne+3,ne+4);return this},u.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?W(this,0,q):k.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(q){if(!u.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:u.compare(this,q)===0},u.prototype.inspect=function(){let q="";const ne=t.INSPECT_MAX_BYTES;return q=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(q+=" ... "),"<Buffer "+q+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(q,ne,Ee,Se,ze){if(Pe(q,s)&&(q=u.from(q,q.offset,q.byteLength)),!u.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(ne===void 0&&(ne=0),Ee===void 0&&(Ee=q?q.length:0),Se===void 0&&(Se=0),ze===void 0&&(ze=this.length),ne<0||Ee>q.length||Se<0||ze>this.length)throw new RangeError("out of range index");if(Se>=ze&&ne>=Ee)return 0;if(Se>=ze)return-1;if(ne>=Ee)return 1;if(ne>>>=0,Ee>>>=0,Se>>>=0,ze>>>=0,this===q)return 0;let Ie=ze-Se,qe=Ee-ne;const Ye=Math.min(Ie,qe),ft=this.slice(Se,ze),We=q.slice(ne,Ee);for(let nt=0;nt<Ye;++nt)if(ft[nt]!==We[nt]){Ie=ft[nt],qe=We[nt];break}return Ie<qe?-1:qe<Ie?1:0};function N(he,q,ne,Ee,Se){if(he.length===0)return-1;if(typeof ne=="string"?(Ee=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ne=+ne,Ce(ne)&&(ne=Se?0:he.length-1),ne<0&&(ne=he.length+ne),ne>=he.length){if(Se)return-1;ne=he.length-1}else if(ne<0)if(Se)ne=0;else return-1;if(typeof q=="string"&&(q=u.from(q,Ee)),u.isBuffer(q))return q.length===0?-1:L(he,q,ne,Ee,Se);if(typeof q=="number")return q=q&255,typeof s.prototype.indexOf=="function"?Se?s.prototype.indexOf.call(he,q,ne):s.prototype.lastIndexOf.call(he,q,ne):L(he,[q],ne,Ee,Se);throw new TypeError("val must be string, number or Buffer")}function L(he,q,ne,Ee,Se){let ze=1,Ie=he.length,qe=q.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(he.length<2||q.length<2)return-1;ze=2,Ie/=2,qe/=2,ne/=2}function Ye(We,nt){return ze===1?We[nt]:We.readUInt16BE(nt*ze)}let ft;if(Se){let We=-1;for(ft=ne;ft<Ie;ft++)if(Ye(he,ft)===Ye(q,We===-1?0:ft-We)){if(We===-1&&(We=ft),ft-We+1===qe)return We*ze}else We!==-1&&(ft-=ft-We),We=-1}else for(ne+qe>Ie&&(ne=Ie-qe),ft=ne;ft>=0;ft--){let We=!0;for(let nt=0;nt<qe;nt++)if(Ye(he,ft+nt)!==Ye(q,nt)){We=!1;break}if(We)return ft}return-1}u.prototype.includes=function(q,ne,Ee){return this.indexOf(q,ne,Ee)!==-1},u.prototype.indexOf=function(q,ne,Ee){return N(this,q,ne,Ee,!0)},u.prototype.lastIndexOf=function(q,ne,Ee){return N(this,q,ne,Ee,!1)};function M(he,q,ne,Ee){ne=Number(ne)||0;const Se=he.length-ne;Ee?(Ee=Number(Ee),Ee>Se&&(Ee=Se)):Ee=Se;const ze=q.length;Ee>ze/2&&(Ee=ze/2);let Ie;for(Ie=0;Ie<Ee;++Ie){const qe=parseInt(q.substr(Ie*2,2),16);if(Ce(qe))return Ie;he[ne+Ie]=qe}return Ie}function C(he,q,ne,Ee){return Re(ye(q,he.length-ne),he,ne,Ee)}function D(he,q,ne,Ee){return Re(ke(q),he,ne,Ee)}function O(he,q,ne,Ee){return Re(Ae(q),he,ne,Ee)}function $(he,q,ne,Ee){return Re(we(q,he.length-ne),he,ne,Ee)}u.prototype.write=function(q,ne,Ee,Se){if(ne===void 0)Se="utf8",Ee=this.length,ne=0;else if(Ee===void 0&&typeof ne=="string")Se=ne,Ee=this.length,ne=0;else if(isFinite(ne))ne=ne>>>0,isFinite(Ee)?(Ee=Ee>>>0,Se===void 0&&(Se="utf8")):(Se=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ze=this.length-ne;if((Ee===void 0||Ee>ze)&&(Ee=ze),q.length>0&&(Ee<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let Ie=!1;for(;;)switch(Se){case"hex":return M(this,q,ne,Ee);case"utf8":case"utf-8":return C(this,q,ne,Ee);case"ascii":case"latin1":case"binary":return D(this,q,ne,Ee);case"base64":return O(this,q,ne,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,q,ne,Ee);default:if(Ie)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Ie=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(he,q,ne){return q===0&&ne===he.length?e.fromByteArray(he):e.fromByteArray(he.slice(q,ne))}function W(he,q,ne){ne=Math.min(he.length,ne);const Ee=[];let Se=q;for(;Se<ne;){const ze=he[Se];let Ie=null,qe=ze>239?4:ze>223?3:ze>191?2:1;if(Se+qe<=ne){let Ye,ft,We,nt;switch(qe){case 1:ze<128&&(Ie=ze);break;case 2:Ye=he[Se+1],(Ye&192)===128&&(nt=(ze&31)<<6|Ye&63,nt>127&&(Ie=nt));break;case 3:Ye=he[Se+1],ft=he[Se+2],(Ye&192)===128&&(ft&192)===128&&(nt=(ze&15)<<12|(Ye&63)<<6|ft&63,nt>2047&&(nt<55296||nt>57343)&&(Ie=nt));break;case 4:Ye=he[Se+1],ft=he[Se+2],We=he[Se+3],(Ye&192)===128&&(ft&192)===128&&(We&192)===128&&(nt=(ze&15)<<18|(Ye&63)<<12|(ft&63)<<6|We&63,nt>65535&&nt<1114112&&(Ie=nt))}}Ie===null?(Ie=65533,qe=1):Ie>65535&&(Ie-=65536,Ee.push(Ie>>>10&1023|55296),Ie=56320|Ie&1023),Ee.push(Ie),Se+=qe}return se(Ee)}const ce=4096;function se(he){const q=he.length;if(q<=ce)return String.fromCharCode.apply(String,he);let ne="",Ee=0;for(;Ee<q;)ne+=String.fromCharCode.apply(String,he.slice(Ee,Ee+=ce));return ne}function Q(he,q,ne){let Ee="";ne=Math.min(he.length,ne);for(let Se=q;Se<ne;++Se)Ee+=String.fromCharCode(he[Se]&127);return Ee}function J(he,q,ne){let Ee="";ne=Math.min(he.length,ne);for(let Se=q;Se<ne;++Se)Ee+=String.fromCharCode(he[Se]);return Ee}function K(he,q,ne){const Ee=he.length;(!q||q<0)&&(q=0),(!ne||ne<0||ne>Ee)&&(ne=Ee);let Se="";for(let ze=q;ze<ne;++ze)Se+=Oe[he[ze]];return Se}function re(he,q,ne){const Ee=he.slice(q,ne);let Se="";for(let ze=0;ze<Ee.length-1;ze+=2)Se+=String.fromCharCode(Ee[ze]+Ee[ze+1]*256);return Se}u.prototype.slice=function(q,ne){const Ee=this.length;q=~~q,ne=ne===void 0?Ee:~~ne,q<0?(q+=Ee,q<0&&(q=0)):q>Ee&&(q=Ee),ne<0?(ne+=Ee,ne<0&&(ne=0)):ne>Ee&&(ne=Ee),ne<q&&(ne=q);const Se=this.subarray(q,ne);return Object.setPrototypeOf(Se,u.prototype),Se};function X(he,q,ne){if(he%1!==0||he<0)throw new RangeError("offset is not uint");if(he+q>ne)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(q,ne,Ee){q=q>>>0,ne=ne>>>0,Ee||X(q,ne,this.length);let Se=this[q],ze=1,Ie=0;for(;++Ie<ne&&(ze*=256);)Se+=this[q+Ie]*ze;return Se},u.prototype.readUintBE=u.prototype.readUIntBE=function(q,ne,Ee){q=q>>>0,ne=ne>>>0,Ee||X(q,ne,this.length);let Se=this[q+--ne],ze=1;for(;ne>0&&(ze*=256);)Se+=this[q+--ne]*ze;return Se},u.prototype.readUint8=u.prototype.readUInt8=function(q,ne){return q=q>>>0,ne||X(q,1,this.length),this[q]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(q,ne){return q=q>>>0,ne||X(q,2,this.length),this[q]|this[q+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(q,ne){return q=q>>>0,ne||X(q,2,this.length),this[q]<<8|this[q+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},u.prototype.readBigUInt64LE=Fe(function(q){q=q>>>0,Te(q,"offset");const ne=this[q],Ee=this[q+7];(ne===void 0||Ee===void 0)&&Z(q,this.length-8);const Se=ne+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,ze=this[++q]+this[++q]*2**8+this[++q]*2**16+Ee*2**24;return BigInt(Se)+(BigInt(ze)<<BigInt(32))}),u.prototype.readBigUInt64BE=Fe(function(q){q=q>>>0,Te(q,"offset");const ne=this[q],Ee=this[q+7];(ne===void 0||Ee===void 0)&&Z(q,this.length-8);const Se=ne*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],ze=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+Ee;return(BigInt(Se)<<BigInt(32))+BigInt(ze)}),u.prototype.readIntLE=function(q,ne,Ee){q=q>>>0,ne=ne>>>0,Ee||X(q,ne,this.length);let Se=this[q],ze=1,Ie=0;for(;++Ie<ne&&(ze*=256);)Se+=this[q+Ie]*ze;return ze*=128,Se>=ze&&(Se-=Math.pow(2,8*ne)),Se},u.prototype.readIntBE=function(q,ne,Ee){q=q>>>0,ne=ne>>>0,Ee||X(q,ne,this.length);let Se=ne,ze=1,Ie=this[q+--Se];for(;Se>0&&(ze*=256);)Ie+=this[q+--Se]*ze;return ze*=128,Ie>=ze&&(Ie-=Math.pow(2,8*ne)),Ie},u.prototype.readInt8=function(q,ne){return q=q>>>0,ne||X(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},u.prototype.readInt16LE=function(q,ne){q=q>>>0,ne||X(q,2,this.length);const Ee=this[q]|this[q+1]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt16BE=function(q,ne){q=q>>>0,ne||X(q,2,this.length);const Ee=this[q+1]|this[q]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt32LE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},u.prototype.readInt32BE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},u.prototype.readBigInt64LE=Fe(function(q){q=q>>>0,Te(q,"offset");const ne=this[q],Ee=this[q+7];(ne===void 0||Ee===void 0)&&Z(q,this.length-8);const Se=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(Ee<<24);return(BigInt(Se)<<BigInt(32))+BigInt(ne+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),u.prototype.readBigInt64BE=Fe(function(q){q=q>>>0,Te(q,"offset");const ne=this[q],Ee=this[q+7];(ne===void 0||Ee===void 0)&&Z(q,this.length-8);const Se=(ne<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(Se)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+Ee)}),u.prototype.readFloatLE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),n.read(this,q,!0,23,4)},u.prototype.readFloatBE=function(q,ne){return q=q>>>0,ne||X(q,4,this.length),n.read(this,q,!1,23,4)},u.prototype.readDoubleLE=function(q,ne){return q=q>>>0,ne||X(q,8,this.length),n.read(this,q,!0,52,8)},u.prototype.readDoubleBE=function(q,ne){return q=q>>>0,ne||X(q,8,this.length),n.read(this,q,!1,52,8)};function me(he,q,ne,Ee,Se,ze){if(!u.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>Se||q<ze)throw new RangeError('"value" argument is out of bounds');if(ne+Ee>he.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(q,ne,Ee,Se){if(q=+q,ne=ne>>>0,Ee=Ee>>>0,!Se){const qe=Math.pow(2,8*Ee)-1;me(this,q,ne,Ee,qe,0)}let ze=1,Ie=0;for(this[ne]=q&255;++Ie<Ee&&(ze*=256);)this[ne+Ie]=q/ze&255;return ne+Ee},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(q,ne,Ee,Se){if(q=+q,ne=ne>>>0,Ee=Ee>>>0,!Se){const qe=Math.pow(2,8*Ee)-1;me(this,q,ne,Ee,qe,0)}let ze=Ee-1,Ie=1;for(this[ne+ze]=q&255;--ze>=0&&(Ie*=256);)this[ne+ze]=q/Ie&255;return ne+Ee},u.prototype.writeUint8=u.prototype.writeUInt8=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,1,255,0),this[ne]=q&255,ne+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,2,65535,0),this[ne]=q&255,this[ne+1]=q>>>8,ne+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,2,65535,0),this[ne]=q>>>8,this[ne+1]=q&255,ne+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,4,4294967295,0),this[ne+3]=q>>>24,this[ne+2]=q>>>16,this[ne+1]=q>>>8,this[ne]=q&255,ne+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,4,4294967295,0),this[ne]=q>>>24,this[ne+1]=q>>>16,this[ne+2]=q>>>8,this[ne+3]=q&255,ne+4};function G(he,q,ne,Ee,Se){be(q,Ee,Se,he,ne,7);let ze=Number(q&BigInt(4294967295));he[ne++]=ze,ze=ze>>8,he[ne++]=ze,ze=ze>>8,he[ne++]=ze,ze=ze>>8,he[ne++]=ze;let Ie=Number(q>>BigInt(32)&BigInt(4294967295));return he[ne++]=Ie,Ie=Ie>>8,he[ne++]=Ie,Ie=Ie>>8,he[ne++]=Ie,Ie=Ie>>8,he[ne++]=Ie,ne}function B(he,q,ne,Ee,Se){be(q,Ee,Se,he,ne,7);let ze=Number(q&BigInt(4294967295));he[ne+7]=ze,ze=ze>>8,he[ne+6]=ze,ze=ze>>8,he[ne+5]=ze,ze=ze>>8,he[ne+4]=ze;let Ie=Number(q>>BigInt(32)&BigInt(4294967295));return he[ne+3]=Ie,Ie=Ie>>8,he[ne+2]=Ie,Ie=Ie>>8,he[ne+1]=Ie,Ie=Ie>>8,he[ne]=Ie,ne+8}u.prototype.writeBigUInt64LE=Fe(function(q,ne=0){return G(this,q,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Fe(function(q,ne=0){return B(this,q,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(q,ne,Ee,Se){if(q=+q,ne=ne>>>0,!Se){const Ye=Math.pow(2,8*Ee-1);me(this,q,ne,Ee,Ye-1,-Ye)}let ze=0,Ie=1,qe=0;for(this[ne]=q&255;++ze<Ee&&(Ie*=256);)q<0&&qe===0&&this[ne+ze-1]!==0&&(qe=1),this[ne+ze]=(q/Ie>>0)-qe&255;return ne+Ee},u.prototype.writeIntBE=function(q,ne,Ee,Se){if(q=+q,ne=ne>>>0,!Se){const Ye=Math.pow(2,8*Ee-1);me(this,q,ne,Ee,Ye-1,-Ye)}let ze=Ee-1,Ie=1,qe=0;for(this[ne+ze]=q&255;--ze>=0&&(Ie*=256);)q<0&&qe===0&&this[ne+ze+1]!==0&&(qe=1),this[ne+ze]=(q/Ie>>0)-qe&255;return ne+Ee},u.prototype.writeInt8=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,1,127,-128),q<0&&(q=255+q+1),this[ne]=q&255,ne+1},u.prototype.writeInt16LE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,2,32767,-32768),this[ne]=q&255,this[ne+1]=q>>>8,ne+2},u.prototype.writeInt16BE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,2,32767,-32768),this[ne]=q>>>8,this[ne+1]=q&255,ne+2},u.prototype.writeInt32LE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,4,2147483647,-2147483648),this[ne]=q&255,this[ne+1]=q>>>8,this[ne+2]=q>>>16,this[ne+3]=q>>>24,ne+4},u.prototype.writeInt32BE=function(q,ne,Ee){return q=+q,ne=ne>>>0,Ee||me(this,q,ne,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[ne]=q>>>24,this[ne+1]=q>>>16,this[ne+2]=q>>>8,this[ne+3]=q&255,ne+4},u.prototype.writeBigInt64LE=Fe(function(q,ne=0){return G(this,q,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Fe(function(q,ne=0){return B(this,q,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function z(he,q,ne,Ee,Se,ze){if(ne+Ee>he.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function de(he,q,ne,Ee,Se){return q=+q,ne=ne>>>0,Se||z(he,q,ne,4),n.write(he,q,ne,Ee,23,4),ne+4}u.prototype.writeFloatLE=function(q,ne,Ee){return de(this,q,ne,!0,Ee)},u.prototype.writeFloatBE=function(q,ne,Ee){return de(this,q,ne,!1,Ee)};function Y(he,q,ne,Ee,Se){return q=+q,ne=ne>>>0,Se||z(he,q,ne,8),n.write(he,q,ne,Ee,52,8),ne+8}u.prototype.writeDoubleLE=function(q,ne,Ee){return Y(this,q,ne,!0,Ee)},u.prototype.writeDoubleBE=function(q,ne,Ee){return Y(this,q,ne,!1,Ee)},u.prototype.copy=function(q,ne,Ee,Se){if(!u.isBuffer(q))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Se&&Se!==0&&(Se=this.length),ne>=q.length&&(ne=q.length),ne||(ne=0),Se>0&&Se<Ee&&(Se=Ee),Se===Ee||q.length===0||this.length===0)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),q.length-ne<Se-Ee&&(Se=q.length-ne+Ee);const ze=Se-Ee;return this===q&&typeof s.prototype.copyWithin=="function"?this.copyWithin(ne,Ee,Se):s.prototype.set.call(q,this.subarray(Ee,Se),ne),ze},u.prototype.fill=function(q,ne,Ee,Se){if(typeof q=="string"){if(typeof ne=="string"?(Se=ne,ne=0,Ee=this.length):typeof Ee=="string"&&(Se=Ee,Ee=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!u.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(q.length===1){const Ie=q.charCodeAt(0);(Se==="utf8"&&Ie<128||Se==="latin1")&&(q=Ie)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(ne<0||this.length<ne||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=ne)return this;ne=ne>>>0,Ee=Ee===void 0?this.length:Ee>>>0,q||(q=0);let ze;if(typeof q=="number")for(ze=ne;ze<Ee;++ze)this[ze]=q;else{const Ie=u.isBuffer(q)?q:u.from(q,Se),qe=Ie.length;if(qe===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(ze=0;ze<Ee-ne;++ze)this[ze+ne]=Ie[ze%qe]}return this};const ee={};function ae(he,q,ne){ee[he]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${he}]`,this.stack,delete this.name}get code(){return he}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${he}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?`${he} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(he,q){return`The "${he}" argument must be of type number. Received type ${typeof q}`},TypeError),ae("ERR_OUT_OF_RANGE",function(he,q,ne){let Ee=`The value of "${he}" is out of range.`,Se=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?Se=ie(String(ne)):typeof ne=="bigint"&&(Se=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(Se=ie(Se)),Se+="n"),Ee+=` It must be ${q}. Received ${Se}`,Ee},RangeError);function ie(he){let q="",ne=he.length;const Ee=he[0]==="-"?1:0;for(;ne>=Ee+4;ne-=3)q=`_${he.slice(ne-3,ne)}${q}`;return`${he.slice(0,ne)}${q}`}function H(he,q,ne){Te(q,"offset"),(he[q]===void 0||he[q+ne]===void 0)&&Z(q,he.length-(ne+1))}function be(he,q,ne,Ee,Se,ze){if(he>ne||he<q){const Ie=typeof q=="bigint"?"n":"";let qe;throw q===0||q===BigInt(0)?qe=`>= 0${Ie} and < 2${Ie} ** ${(ze+1)*8}${Ie}`:qe=`>= -(2${Ie} ** ${(ze+1)*8-1}${Ie}) and < 2 ** ${(ze+1)*8-1}${Ie}`,new ee.ERR_OUT_OF_RANGE("value",qe,he)}H(Ee,Se,ze)}function Te(he,q){if(typeof he!="number")throw new ee.ERR_INVALID_ARG_TYPE(q,"number",he)}function Z(he,q,ne){throw Math.floor(he)!==he?(Te(he,ne),new ee.ERR_OUT_OF_RANGE("offset","an integer",he)):q<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,he)}const oe=/[^+/0-9A-Za-z-_]/g;function te(he){if(he=he.split("=")[0],he=he.trim().replace(oe,""),he.length<2)return"";for(;he.length%4!==0;)he=he+"=";return he}function ye(he,q){q=q||1/0;let ne;const Ee=he.length;let Se=null;const ze=[];for(let Ie=0;Ie<Ee;++Ie){if(ne=he.charCodeAt(Ie),ne>55295&&ne<57344){if(!Se){if(ne>56319){(q-=3)>-1&&ze.push(239,191,189);continue}else if(Ie+1===Ee){(q-=3)>-1&&ze.push(239,191,189);continue}Se=ne;continue}if(ne<56320){(q-=3)>-1&&ze.push(239,191,189),Se=ne;continue}ne=(Se-55296<<10|ne-56320)+65536}else Se&&(q-=3)>-1&&ze.push(239,191,189);if(Se=null,ne<128){if((q-=1)<0)break;ze.push(ne)}else if(ne<2048){if((q-=2)<0)break;ze.push(ne>>6|192,ne&63|128)}else if(ne<65536){if((q-=3)<0)break;ze.push(ne>>12|224,ne>>6&63|128,ne&63|128)}else if(ne<1114112){if((q-=4)<0)break;ze.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,ne&63|128)}else throw new Error("Invalid code point")}return ze}function ke(he){const q=[];for(let ne=0;ne<he.length;++ne)q.push(he.charCodeAt(ne)&255);return q}function we(he,q){let ne,Ee,Se;const ze=[];for(let Ie=0;Ie<he.length&&!((q-=2)<0);++Ie)ne=he.charCodeAt(Ie),Ee=ne>>8,Se=ne%256,ze.push(Se),ze.push(Ee);return ze}function Ae(he){return e.toByteArray(te(he))}function Re(he,q,ne,Ee){let Se;for(Se=0;Se<Ee&&!(Se+ne>=q.length||Se>=he.length);++Se)q[Se+ne]=he[Se];return Se}function Pe(he,q){return he instanceof q||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===q.name}function Ce(he){return he!==he}const Oe=(function(){const he="0123456789abcdef",q=new Array(256);for(let ne=0;ne<16;++ne){const Ee=ne*16;for(let Se=0;Se<16;++Se)q[Ee+Se]=he[ne]+he[Se]}return q})();function Fe(he){return typeof BigInt>"u"?$e:he}function $e(){throw new Error("BigInt not supported")}})(cpe);const ar=cpe.Buffer;var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c5(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var h8={exports:{}},WJ;function HFe(){return WJ||(WJ=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var d=typeof c5=="function"&&c5;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[c]={exports:{}};r[c][0].call(h.exports,function(m){var y=r[c][1][m];return o(y||m)},h,h.exports,n,r,i,s)}return i[c].exports}for(var a=typeof c5=="function"&&c5,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,f,h,m,y,w=[],b=0,E=l.length,A=E,x=s.getTypeOf(l)!=="string";b<l.length;)A=E-b,d=x?(c=l[b++],u=b<E?l[b++]:0,b<E?l[b++]:0):(c=l.charCodeAt(b++),u=b<E?l.charCodeAt(b++):0,b<E?l.charCodeAt(b++):0),f=c>>2,h=(3&c)<<4|u>>4,m=1<A?(15&u)<<2|d>>6:64,y=2<A?63&d:64,w.push(a.charAt(f)+a.charAt(h)+a.charAt(m)+a.charAt(y));return w.join("")},i.decode=function(l){var c,u,d,f,h,m,y=0,w=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var E,A=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&A--,l.charAt(l.length-2)===a.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|A):new Array(0|A);y<l.length;)c=a.indexOf(l.charAt(y++))<<2|(f=a.indexOf(l.charAt(y++)))>>4,u=(15&f)<<4|(h=a.indexOf(l.charAt(y++)))>>2,d=(3&h)<<6|(m=a.indexOf(l.charAt(y++))),E[w++]=c,h!==64&&(E[w++]=u),m!==64&&(E[w++]=d);return E}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,f,h,m){this.compressedSize=u,this.uncompressedSize=d,this.crc32=f,this.compression=h,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,f){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l})();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?(function(c,u,d,f){var h=o,m=f+d;c^=-1;for(var y=f;y<m;y++)c=c>>>8^h[255&(c^u[y])];return-1^c})(0|l,a,a.length,0):(function(c,u,d,f){var h=o,m=f+d;c^=-1;for(var y=f;y<m;y++)c=c>>>8^h[255&(c^u.charCodeAt(y))];return-1^c})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,f){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(h,m){var y,w="";for(y=0;y<m;y++)w+=String.fromCharCode(255&h),h>>>=8;return w}function o(h,m,y,w,b,E){var A,x,T=h.file,R=h.compression,k=E!==c.utf8encode,_=a.transformTo("string",E(T.name)),N=a.transformTo("string",c.utf8encode(T.name)),L=T.comment,M=a.transformTo("string",E(L)),C=a.transformTo("string",c.utf8encode(L)),D=N.length!==T.name.length,O=C.length!==L.length,$="",U="",W="",ce=T.dir,se=T.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};m&&!y||(Q.crc32=h.crc32,Q.compressedSize=h.compressedSize,Q.uncompressedSize=h.uncompressedSize);var J=0;m&&(J|=8),k||!D&&!O||(J|=2048);var K=0,re=0;ce&&(K|=16),b==="UNIX"?(re=798,K|=(function(me,G){var B=me;return me||(B=G?16893:33204),(65535&B)<<16})(T.unixPermissions,ce)):(re=20,K|=(function(me){return 63&(me||0)})(T.dosPermissions)),A=se.getUTCHours(),A<<=6,A|=se.getUTCMinutes(),A<<=5,A|=se.getUTCSeconds()/2,x=se.getUTCFullYear()-1980,x<<=4,x|=se.getUTCMonth()+1,x<<=5,x|=se.getUTCDate(),D&&(U=s(1,1)+s(u(_),4)+N,$+="up"+s(U.length,2)+U),O&&(W=s(1,1)+s(u(M),4)+C,$+="uc"+s(W.length,2)+W);var X="";return X+=`
\0`,X+=s(J,2),X+=R.magic,X+=s(A,2),X+=s(x,2),X+=s(Q.crc32,4),X+=s(Q.compressedSize,4),X+=s(Q.uncompressedSize,4),X+=s(_.length,2),X+=s($.length,2),{fileRecord:d.LOCAL_FILE_HEADER+X+_+$,dirRecord:d.CENTRAL_FILE_HEADER+s(re,2)+X+s(M.length,2)+"\0\0\0\0"+s(K,4)+s(w,4)+_+$+M}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function f(h,m,y,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=w,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(f,l),f.prototype.push=function(h){var m=h.meta.percent||0,y=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-w-1))/y:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var m=this.streamFiles&&!h.file.dir;if(m){var y=o(h,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var m=this.streamFiles&&!h.file.dir,y=o(h,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),m)this.push({data:(function(w){return d.DATA_DESCRIPTOR+s(w.crc32,4)+s(w.compressedSize,4)+s(w.uncompressedSize,4)})(h),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y=this.bytesWritten-h,w=(function(b,E,A,x,T){var R=a.transformTo("string",T(x));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(E,4)+s(A,4)+s(R.length,2)+R})(this.dirRecords.length,y,h,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var m=this;return h.on("data",function(y){m.processChunk(y)}),h.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),h.on("error",function(y){m.error(y)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var m=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var y=0;y<m.length;y++)try{m[y].error(h)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,m=0;m<h.length;m++)h[m].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(f,h){d++;var m=(function(E,A){var x=E||A,T=s[x];if(!T)throw new Error(x+" is not a valid compression method !");return T})(h.options.compression,l.compression),y=h.options.compressionOptions||l.compressionOptions||{},w=h.dir,b=h.date;h._compressWorker(m,y).withStreamInfo("file",{name:f,dir:w,date:b,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(f){u.error(f)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(f){return new o.Promise(function(h,m){var y=f.decompressed.getContentWorker().pipe(new c);y.on("error",function(w){m(w)}).on("end",function(){y.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(f,h){var m=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(y){var w=new l(h);return w.load(y),w}).then(function(y){var w=[o.Promise.resolve(y)],b=y.files;if(h.checkCRC32)for(var E=0;E<b.length;E++)w.push(d(b[E]));return o.Promise.all(w)}).then(function(y){for(var w=y.shift(),b=w.files,E=0;E<b.length;E++){var A=b[E],x=A.fileNameStr,T=s.resolve(A.fileNameStr);m.file(T,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:h.createFolders}),A.dir||(m.file(T).unsafeOriginalName=x)}return w.zipComment.length&&(m.comment=w.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(d,f){u.push(d)||u._helper.pause(),c&&c(f)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof ar<"u",newBufferFrom:function(s,o){if(ar.from&&ar.from!==Uint8Array.from)return ar.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new ar(s,o)},allocBuffer:function(s){if(ar.alloc)return ar.alloc(s);var o=new ar(s);return o.fill(0),o},isBuffer:function(s){return ar.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(T,R,k){var _,N=a.getTypeOf(R),L=a.extend(k||{},u);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(T=b(T)),L.createFolders&&(_=w(T))&&E.call(this,_,!0);var M=N==="string"&&L.binary===!1&&L.base64===!1;k&&k.binary!==void 0||(L.binary=!M),(R instanceof d&&R.uncompressedSize===0||L.dir||!R||R.length===0)&&(L.base64=!1,L.binary=!0,R="",L.compression="STORE",N="string");var C=null;C=R instanceof d||R instanceof l?R:m.isNode&&m.isStream(R)?new y(T,R):a.prepareContent(T,R,L.binary,L.optimizedBinaryString,L.base64);var D=new f(T,C,L);this.files[T]=D}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),m=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),w=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var R=T.lastIndexOf("/");return 0<R?T.substring(0,R):""},b=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},E=function(T,R){return R=R!==void 0?R:u.createFolders,T=b(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:R}),this.files[T]};function A(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var R,k,_;for(R in this.files)_=this.files[R],(k=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&T(k,_)},filter:function(T){var R=[];return this.forEach(function(k,_){T(k,_)&&R.push(_)}),R},file:function(T,R,k){if(arguments.length!==1)return T=this.root+T,s.call(this,T,R,k),this;if(A(T)){var _=T;return this.filter(function(L,M){return!M.dir&&_.test(L)})}var N=this.files[this.root+T];return N&&!N.dir?N:null},folder:function(T){if(!T)return this;if(A(T))return this.filter(function(N,L){return L.dir&&T.test(N)});var R=this.root+T,k=E.call(this,R),_=this.clone();return _.root=k.name,_},remove:function(T){T=this.root+T;var R=this.files[T];if(R||(T.slice(-1)!=="/"&&(T+="/"),R=this.files[T]),R&&!R.dir)delete this.files[T];else for(var k=this.filter(function(N,L){return L.name.slice(0,T.length)===T}),_=0;_<k.length;_++)delete this.files[k[_].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var R,k={};try{if((k=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var _=k.comment||this.comment||"";R=h.generateWorker(this,k,_)}catch(N){(R=new l("error")).error(N)}return new c(R,k.type||"string",k.mimeType)},generateAsync:function(T,R){return this.generateInternalStream(T).accumulate(R)},generateNodeStream:function(T,R){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(R)}};r.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===c&&this.data[f+2]===u&&this.data[f+3]===d)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),f=this.readData(4);return l===f[0]&&c===f[1]&&u===f[2]&&d===f[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var f=s.getTypeOf(d);return s.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new c(d):o.uint8array?new u(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(m,y){return new u.Promise(function(w,b){var E=[],A=m._internalType,x=m._outputType,T=m._mimeType;m.on("data",function(R,k){E.push(R),y&&y(k)}).on("error",function(R){E=[],b(R)}).on("end",function(){try{var R=(function(k,_,N){switch(k){case"blob":return s.newBlob(s.transformTo("arraybuffer",_),N);case"base64":return l.encode(_);default:return s.transformTo(k,_)}})(x,(function(k,_){var N,L=0,M=null,C=0;for(N=0;N<_.length;N++)C+=_[N].length;switch(k){case"string":return _.join("");case"array":return Array.prototype.concat.apply([],_);case"uint8array":for(M=new Uint8Array(C),N=0;N<_.length;N++)M.set(_[N],L),L+=_[N].length;return M;case"nodebuffer":return ar.concat(_);default:throw new Error("concat : unsupported type '"+k+"'")}})(A,E),T);w(R)}catch(k){b(k)}E=[]}).resume()})}function h(m,y,w){var b=y;switch(y){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=y,this._mimeType=w,s.checkSupport(b),this._worker=m.pipe(new o(b)),m.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}h.prototype={accumulate:function(m){return f(this,m)},on:function(m,y){var w=this;return m==="data"?this._worker.on(m,function(b){y.call(w,b.data,b.meta)}):this._worker.on(m,function(){s.delay(y,arguments,w)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},m)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof ar<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):(function(m){var y,w,b,E,A,x=m.length,T=0;for(E=0;E<x;E++)(64512&(w=m.charCodeAt(E)))==55296&&E+1<x&&(64512&(b=m.charCodeAt(E+1)))==56320&&(w=65536+(w-55296<<10)+(b-56320),E++),T+=w<128?1:w<2048?2:w<65536?3:4;for(y=o.uint8array?new Uint8Array(T):new Array(T),E=A=0;A<T;E++)(64512&(w=m.charCodeAt(E)))==55296&&E+1<x&&(64512&(b=m.charCodeAt(E+1)))==56320&&(w=65536+(w-55296<<10)+(b-56320),E++),w<128?y[A++]=w:(w<2048?y[A++]=192|w>>>6:(w<65536?y[A++]=224|w>>>12:(y[A++]=240|w>>>18,y[A++]=128|w>>>12&63),y[A++]=128|w>>>6&63),y[A++]=128|63&w);return y})(h)},i.utf8decode=function(h){return o.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):(function(m){var y,w,b,E,A=m.length,x=new Array(2*A);for(y=w=0;y<A;)if((b=m[y++])<128)x[w++]=b;else if(4<(E=c[b]))x[w++]=65533,y+=E-1;else{for(b&=E===2?31:E===3?15:7;1<E&&y<A;)b=b<<6|63&m[y++],E--;1<E?x[w++]=65533:b<65536?x[w++]=b:(b-=65536,x[w++]=55296|b>>10&1023,x[w++]=56320|1023&b)}return x.length!==w&&(x.subarray?x=x.subarray(0,w):x.length=w),s.applyFromCharCode(x)})(h=s.transformTo(o.uint8array?"uint8array":"array",h))},s.inherits(d,l),d.prototype.processChunk=function(h){var m=s.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=m;(m=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),m.set(y,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var w=(function(E,A){var x;for((A=A||E.length)>E.length&&(A=E.length),x=A-1;0<=x&&(192&E[x])==128;)x--;return x<0||x===0?A:x+c[E[x]]>A?x:A})(m),b=m;w!==m.length&&(o.uint8array?(b=m.subarray(0,w),this.leftOver=m.subarray(w,m.length)):(b=m.slice(0,w),this.leftOver=m.slice(w,m.length))),this.push({data:i.utf8decode(b),meta:h.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(f,l),f.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(y){return y}function u(y,w){for(var b=0;b<y.length;++b)w[b]=255&y.charCodeAt(b);return w}n("setimmediate"),i.newBlob=function(y,w){i.checkSupport("blob");try{return new Blob([y],{type:w})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(y),b.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(y,w,b){var E=[],A=0,x=y.length;if(x<=b)return String.fromCharCode.apply(null,y);for(;A<x;)w==="array"||w==="nodebuffer"?E.push(String.fromCharCode.apply(null,y.slice(A,Math.min(A+b,x)))):E.push(String.fromCharCode.apply(null,y.subarray(A,Math.min(A+b,x)))),A+=b;return E.join("")},stringifyByChar:function(y){for(var w="",b=0;b<y.length;b++)w+=String.fromCharCode(y[b]);return w},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function f(y){var w=65536,b=i.getTypeOf(y),E=!0;if(b==="uint8array"?E=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(E=d.applyCanBeUsed.nodebuffer),E)for(;1<w;)try{return d.stringifyByChunk(y,b,w)}catch{w=Math.floor(w/2)}return d.stringifyByChar(y)}function h(y,w){for(var b=0;b<y.length;b++)w[b]=y[b];return w}i.applyFromCharCode=f;var m={};m.string={string:c,array:function(y){return u(y,new Array(y.length))},arraybuffer:function(y){return m.string.uint8array(y).buffer},uint8array:function(y){return u(y,new Uint8Array(y.length))},nodebuffer:function(y){return u(y,a.allocBuffer(y.length))}},m.array={string:f,array:c,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(y)}},m.arraybuffer={string:function(y){return f(new Uint8Array(y))},array:function(y){return h(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:c,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(new Uint8Array(y))}},m.uint8array={string:f,array:function(y){return h(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:c,nodebuffer:function(y){return a.newBufferFrom(y)}},m.nodebuffer={string:f,array:function(y){return h(y,new Array(y.length))},arraybuffer:function(y){return m.nodebuffer.uint8array(y).buffer},uint8array:function(y){return h(y,new Uint8Array(y.length))},nodebuffer:c},i.transformTo=function(y,w){if(w=w||"",!y)return w;i.checkSupport(y);var b=i.getTypeOf(w);return m[b][y](w)},i.resolve=function(y){for(var w=y.split("/"),b=[],E=0;E<w.length;E++){var A=w[E];A==="."||A===""&&E!==0&&E!==w.length-1||(A===".."?b.pop():b.push(A))}return b.join("/")},i.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(y)?"nodebuffer":s.uint8array&&y instanceof Uint8Array?"uint8array":s.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(y){if(!s[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(y){var w,b,E="";for(b=0;b<(y||"").length;b++)E+="\\x"+((w=y.charCodeAt(b))<16?"0":"")+w.toString(16).toUpperCase();return E},i.delay=function(y,w,b){setImmediate(function(){y.apply(b||null,w||[])})},i.inherits=function(y,w){function b(){}b.prototype=w.prototype,y.prototype=new b},i.extend=function(){var y,w,b={};for(y=0;y<arguments.length;y++)for(w in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],w)&&b[w]===void 0&&(b[w]=arguments[y][w]);return b},i.prepareContent=function(y,w,b,E,A){return l.Promise.resolve(w).then(function(x){return s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,R){var k=new FileReader;k.onload=function(_){T(_.target.result)},k.onerror=function(_){R(_.target.error)},k.readAsArrayBuffer(x)}):x}).then(function(x){var T=i.getTypeOf(x);return T?(T==="arraybuffer"?x=i.transformTo("uint8array",x):T==="string"&&(A?x=o.decode(x):b&&E!==!0&&(x=(function(R){return u(R,s.uint8array?new Uint8Array(R.length):new Array(R.length))})(x))),x):l.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(d)+")")}},isSignature:function(d,f){var h=this.reader.index;this.reader.setIndex(d);var m=this.reader.readString(4)===f;return this.reader.setIndex(h),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",h=o.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,h,m=this.zip64EndOfCentralSize-44;0<m;)d=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var m=f-h;if(0<m)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function f(h,m){this.options=h,this.loadOptions=m}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var m,y;if(h.skip(22),this.fileNameLength=h.readInt(2),y=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(w){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===w)return u[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,m,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var m=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(m),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var m,y,w,b=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<b;)m=h.readInt(2),y=h.readInt(2),w=h.readData(y),this.extraFields[m]={id:m,length:y,value:w};h.setIndex(b)},handleUTF8:function(){var h=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var y=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var b=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var m=s(h.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var m=s(h.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(h.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(m,y,w){this.name=m,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=y,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(m){var y=null,w="string";try{if(!m)throw new Error("No output type specified.");var b=(w=m.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),y=this._decompressWorker();var E=!this._dataBinary;E&&!b&&(y=y.pipe(new l.Utf8EncodeWorker)),!E&&b&&(y=y.pipe(new l.Utf8DecodeWorker))}catch(A){(y=new u("error")).error(A)}return new o(y,w,"")},async:function(m,y){return this.internalStream(m).accumulate(y)},nodeStream:function(m,y){return this.internalStream(m||"nodebuffer").toNodejsStream(y)},_compressWorker:function(m,y){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(w,m,y)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<d.length;h++)s.prototype[d[h]]=f;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(m),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var y=s.document.createElement("script");y.onreadystatechange=function(){m(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:function(){setTimeout(m,0)};else{var f=new s.MessageChannel;f.port1.onmessage=m,o=function(){f.port2.postMessage(0)}}var h=[];function m(){var y,w;a=!0;for(var b=h.length;b;){for(w=h,h=[],y=-1;++y<b;)w[y]();b=h.length}a=!1}r.exports=function(y){h.push(y)!==1||a||o()}}).call(this,typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,b!==o&&y(this,b)}function f(b,E,A){this.promise=b,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function h(b,E,A){s(function(){var x;try{x=E(A)}catch(T){return a.reject(b,T)}x===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,x)})}function m(b){var E=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof E=="function")return function(){E.apply(b,arguments)}}function y(b,E){var A=!1;function x(k){A||(A=!0,a.reject(b,k))}function T(k){A||(A=!0,a.resolve(b,k))}var R=w(function(){E(T,x)});R.status==="error"&&x(R.value)}function w(b,E){var A={};try{A.value=b(E),A.status="success"}catch(x){A.status="error",A.value=x}return A}(r.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var E=this.constructor;return this.then(function(A){return E.resolve(b()).then(function(){return A})},function(A){return E.resolve(b()).then(function(){throw A})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,E){if(typeof b!="function"&&this.state===c||typeof E!="function"&&this.state===l)return this;var A=new this.constructor(o);return this.state!==u?h(A,this.state===c?b:E,this.outcome):this.queue.push(new f(A,b,E)),A},f.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},f.prototype.otherCallFulfilled=function(b){h(this.promise,this.onFulfilled,b)},f.prototype.callRejected=function(b){a.reject(this.promise,b)},f.prototype.otherCallRejected=function(b){h(this.promise,this.onRejected,b)},a.resolve=function(b,E){var A=w(m,E);if(A.status==="error")return a.reject(b,A.value);var x=A.value;if(x)y(b,x);else{b.state=c,b.outcome=E;for(var T=-1,R=b.queue.length;++T<R;)b.queue[T].callFulfilled(E)}return b},a.reject=function(b,E){b.state=l,b.outcome=E;for(var A=-1,x=b.queue.length;++A<x;)b.queue[A].callRejected(E);return b},d.resolve=function(b){return b instanceof this?b:a.resolve(new this(o),b)},d.reject=function(b){var E=new this(o);return a.reject(E,b)},d.all=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=b.length,x=!1;if(!A)return this.resolve([]);for(var T=new Array(A),R=0,k=-1,_=new this(o);++k<A;)N(b[k],k);return _;function N(L,M){E.resolve(L).then(function(C){T[M]=C,++R!==A||x||(x=!0,a.resolve(_,T))},function(C){x||(x=!0,a.reject(_,C))})}},d.race=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=b.length,x=!1;if(!A)return this.resolve([]);for(var T=-1,R=new this(o);++T<A;)k=b[T],E.resolve(k).then(function(_){x||(x=!0,a.resolve(R,_))},function(_){x||(x=!0,a.reject(R,_))});var k;return R}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,f=-1,h=0,m=8;function y(b){if(!(this instanceof y))return new y(b);this.options=o.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},b||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(A!==d)throw new Error(l[A]);if(E.header&&s.deflateSetHeader(this.strm,E.header),E.dictionary){var x;if(x=typeof E.dictionary=="string"?a.string2buf(E.dictionary):u.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(A=s.deflateSetDictionary(this.strm,x))!==d)throw new Error(l[A]);this._dict_set=!0}}function w(b,E){var A=new y(E);if(A.push(b,!0),A.err)throw A.msg||l[A.err];return A.result}y.prototype.push=function(b,E){var A,x,T=this.strm,R=this.options.chunkSize;if(this.ended)return!1;x=E===~~E?E:E===!0?4:0,typeof b=="string"?T.input=a.string2buf(b):u.call(b)==="[object ArrayBuffer]"?T.input=new Uint8Array(b):T.input=b,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(R),T.next_out=0,T.avail_out=R),(A=s.deflate(T,x))!==1&&A!==d)return this.onEnd(A),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&A!==1);return x===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===d):x!==2||(this.onEnd(d),!(T.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Deflate=y,i.deflate=w,i.deflateRaw=function(b,E){return(E=E||{}).raw=!0,w(b,E)},i.gzip=function(b,E){return(E=E||{}).gzip=!0,w(b,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),f=Object.prototype.toString;function h(y){if(!(this instanceof h))return new h(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||y&&y.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,w.windowBits);if(b!==l.Z_OK)throw new Error(c[b]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function m(y,w){var b=new h(w);if(b.push(y,!0),b.err)throw b.msg||c[b.err];return b.result}h.prototype.push=function(y,w){var b,E,A,x,T,R,k=this.strm,_=this.options.chunkSize,N=this.options.dictionary,L=!1;if(this.ended)return!1;E=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof y=="string"?k.input=a.binstring2buf(y):f.call(y)==="[object ArrayBuffer]"?k.input=new Uint8Array(y):k.input=y,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(_),k.next_out=0,k.avail_out=_),(b=s.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(R=typeof N=="string"?a.string2buf(N):f.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,b=s.inflateSetDictionary(this.strm,R)),b===l.Z_BUF_ERROR&&L===!0&&(b=l.Z_OK,L=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&b!==l.Z_STREAM_END&&(k.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=a.utf8border(k.output,k.next_out),x=k.next_out-A,T=a.buf2string(k.output,A),k.next_out=x,k.avail_out=_-x,x&&o.arraySet(k.output,k.output,A,x,0),this.onData(T)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(L=!0)}while((0<k.avail_in||k.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},h.prototype.onData=function(y){this.chunks.push(y)},h.prototype.onEnd=function(y){y===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Inflate=h,i.inflate=m,i.inflateRaw=function(y,w){return(w=w||{}).raw=!0,m(y,w)},i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,f){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),f);else for(var h=0;h<d;h++)l[f+h]=c[u+h]},flattenChunks:function(l){var c,u,d,f,h,m;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(m=new Uint8Array(d),c=f=0,u=l.length;c<u;c++)h=l[c],m.set(h,f),f+=h.length;return m}},a={arraySet:function(l,c,u,d,f){for(var h=0;h<d;h++)l[f+h]=c[u+h]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,f){if(f<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,f));for(var h="",m=0;m<f;m++)h+=String.fromCharCode(d[m]);return h}l[254]=l[254]=1,i.string2buf=function(d){var f,h,m,y,w,b=d.length,E=0;for(y=0;y<b;y++)(64512&(h=d.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=d.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),y++),E+=h<128?1:h<2048?2:h<65536?3:4;for(f=new s.Buf8(E),y=w=0;w<E;y++)(64512&(h=d.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=d.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),y++),h<128?f[w++]=h:(h<2048?f[w++]=192|h>>>6:(h<65536?f[w++]=224|h>>>12:(f[w++]=240|h>>>18,f[w++]=128|h>>>12&63),f[w++]=128|h>>>6&63),f[w++]=128|63&h);return f},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var f=new s.Buf8(d.length),h=0,m=f.length;h<m;h++)f[h]=d.charCodeAt(h);return f},i.buf2string=function(d,f){var h,m,y,w,b=f||d.length,E=new Array(2*b);for(h=m=0;h<b;)if((y=d[h++])<128)E[m++]=y;else if(4<(w=l[y]))E[m++]=65533,h+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&h<b;)y=y<<6|63&d[h++],w--;1<w?E[m++]=65533:y<65536?E[m++]=y:(y-=65536,E[m++]=55296|y>>10&1023,E[m++]=56320|1023&y)}return u(E,m)},i.utf8border=function(d,f){var h;for((f=f||d.length)>d.length&&(f=d.length),h=f-1;0<=h&&(192&d[h])==128;)h--;return h<0||h===0?f:h+l[d[h]]>f?h:f}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();r.exports=function(o,a,l,c){var u=s,d=c+l;o^=-1;for(var f=c;f<d;f++)o=o>>>8^u[255&(o^a[f])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,f=4,h=0,m=-2,y=-1,w=4,b=2,E=8,A=9,x=286,T=30,R=19,k=2*x+1,_=15,N=3,L=258,M=L+N+1,C=42,D=113,O=1,$=2,U=3,W=4;function ce(H,be){return H.msg=u[be],be}function se(H){return(H<<1)-(4<H?9:0)}function Q(H){for(var be=H.length;0<=--be;)H[be]=0}function J(H){var be=H.state,Te=be.pending;Te>H.avail_out&&(Te=H.avail_out),Te!==0&&(o.arraySet(H.output,be.pending_buf,be.pending_out,Te,H.next_out),H.next_out+=Te,be.pending_out+=Te,H.total_out+=Te,H.avail_out-=Te,be.pending-=Te,be.pending===0&&(be.pending_out=0))}function K(H,be){a._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,be),H.block_start=H.strstart,J(H.strm)}function re(H,be){H.pending_buf[H.pending++]=be}function X(H,be){H.pending_buf[H.pending++]=be>>>8&255,H.pending_buf[H.pending++]=255&be}function me(H,be){var Te,Z,oe=H.max_chain_length,te=H.strstart,ye=H.prev_length,ke=H.nice_match,we=H.strstart>H.w_size-M?H.strstart-(H.w_size-M):0,Ae=H.window,Re=H.w_mask,Pe=H.prev,Ce=H.strstart+L,Oe=Ae[te+ye-1],Fe=Ae[te+ye];H.prev_length>=H.good_match&&(oe>>=2),ke>H.lookahead&&(ke=H.lookahead);do if(Ae[(Te=be)+ye]===Fe&&Ae[Te+ye-1]===Oe&&Ae[Te]===Ae[te]&&Ae[++Te]===Ae[te+1]){te+=2,Te++;do;while(Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&Ae[++te]===Ae[++Te]&&te<Ce);if(Z=L-(Ce-te),te=Ce-L,ye<Z){if(H.match_start=be,ke<=(ye=Z))break;Oe=Ae[te+ye-1],Fe=Ae[te+ye]}}while((be=Pe[be&Re])>we&&--oe!=0);return ye<=H.lookahead?ye:H.lookahead}function G(H){var be,Te,Z,oe,te,ye,ke,we,Ae,Re,Pe=H.w_size;do{if(oe=H.window_size-H.lookahead-H.strstart,H.strstart>=Pe+(Pe-M)){for(o.arraySet(H.window,H.window,Pe,Pe,0),H.match_start-=Pe,H.strstart-=Pe,H.block_start-=Pe,be=Te=H.hash_size;Z=H.head[--be],H.head[be]=Pe<=Z?Z-Pe:0,--Te;);for(be=Te=Pe;Z=H.prev[--be],H.prev[be]=Pe<=Z?Z-Pe:0,--Te;);oe+=Pe}if(H.strm.avail_in===0)break;if(ye=H.strm,ke=H.window,we=H.strstart+H.lookahead,Ae=oe,Re=void 0,Re=ye.avail_in,Ae<Re&&(Re=Ae),Te=Re===0?0:(ye.avail_in-=Re,o.arraySet(ke,ye.input,ye.next_in,Re,we),ye.state.wrap===1?ye.adler=l(ye.adler,ke,Re,we):ye.state.wrap===2&&(ye.adler=c(ye.adler,ke,Re,we)),ye.next_in+=Re,ye.total_in+=Re,Re),H.lookahead+=Te,H.lookahead+H.insert>=N)for(te=H.strstart-H.insert,H.ins_h=H.window[te],H.ins_h=(H.ins_h<<H.hash_shift^H.window[te+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[te+N-1])&H.hash_mask,H.prev[te&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=te,te++,H.insert--,!(H.lookahead+H.insert<N)););}while(H.lookahead<M&&H.strm.avail_in!==0)}function B(H,be){for(var Te,Z;;){if(H.lookahead<M){if(G(H),H.lookahead<M&&be===d)return O;if(H.lookahead===0)break}if(Te=0,H.lookahead>=N&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+N-1])&H.hash_mask,Te=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),Te!==0&&H.strstart-Te<=H.w_size-M&&(H.match_length=me(H,Te)),H.match_length>=N)if(Z=a._tr_tally(H,H.strstart-H.match_start,H.match_length-N),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=N){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+N-1])&H.hash_mask,Te=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else Z=a._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(Z&&(K(H,!1),H.strm.avail_out===0))return O}return H.insert=H.strstart<N-1?H.strstart:N-1,be===f?(K(H,!0),H.strm.avail_out===0?U:W):H.last_lit&&(K(H,!1),H.strm.avail_out===0)?O:$}function z(H,be){for(var Te,Z,oe;;){if(H.lookahead<M){if(G(H),H.lookahead<M&&be===d)return O;if(H.lookahead===0)break}if(Te=0,H.lookahead>=N&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+N-1])&H.hash_mask,Te=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=N-1,Te!==0&&H.prev_length<H.max_lazy_match&&H.strstart-Te<=H.w_size-M&&(H.match_length=me(H,Te),H.match_length<=5&&(H.strategy===1||H.match_length===N&&4096<H.strstart-H.match_start)&&(H.match_length=N-1)),H.prev_length>=N&&H.match_length<=H.prev_length){for(oe=H.strstart+H.lookahead-N,Z=a._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-N),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=oe&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+N-1])&H.hash_mask,Te=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=N-1,H.strstart++,Z&&(K(H,!1),H.strm.avail_out===0))return O}else if(H.match_available){if((Z=a._tr_tally(H,0,H.window[H.strstart-1]))&&K(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return O}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(Z=a._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<N-1?H.strstart:N-1,be===f?(K(H,!0),H.strm.avail_out===0?U:W):H.last_lit&&(K(H,!1),H.strm.avail_out===0)?O:$}function de(H,be,Te,Z,oe){this.good_length=H,this.max_lazy=be,this.nice_length=Te,this.max_chain=Z,this.func=oe}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(_+1),this.heap=new o.Buf16(2*x+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*x+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ee(H){var be;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=b,(be=H.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?C:D,H.adler=be.wrap===2?0:1,be.last_flush=d,a._tr_init(be),h):ce(H,m)}function ae(H){var be=ee(H);return be===h&&(function(Te){Te.window_size=2*Te.w_size,Q(Te.head),Te.max_lazy_match=s[Te.level].max_lazy,Te.good_match=s[Te.level].good_length,Te.nice_match=s[Te.level].nice_length,Te.max_chain_length=s[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=N-1,Te.match_available=0,Te.ins_h=0})(H.state),be}function ie(H,be,Te,Z,oe,te){if(!H)return m;var ye=1;if(be===y&&(be=6),Z<0?(ye=0,Z=-Z):15<Z&&(ye=2,Z-=16),oe<1||A<oe||Te!==E||Z<8||15<Z||be<0||9<be||te<0||w<te)return ce(H,m);Z===8&&(Z=9);var ke=new Y;return(H.state=ke).strm=H,ke.wrap=ye,ke.gzhead=null,ke.w_bits=Z,ke.w_size=1<<ke.w_bits,ke.w_mask=ke.w_size-1,ke.hash_bits=oe+7,ke.hash_size=1<<ke.hash_bits,ke.hash_mask=ke.hash_size-1,ke.hash_shift=~~((ke.hash_bits+N-1)/N),ke.window=new o.Buf8(2*ke.w_size),ke.head=new o.Buf16(ke.hash_size),ke.prev=new o.Buf16(ke.w_size),ke.lit_bufsize=1<<oe+6,ke.pending_buf_size=4*ke.lit_bufsize,ke.pending_buf=new o.Buf8(ke.pending_buf_size),ke.d_buf=1*ke.lit_bufsize,ke.l_buf=3*ke.lit_bufsize,ke.level=be,ke.strategy=te,ke.method=Te,ae(H)}s=[new de(0,0,0,0,function(H,be){var Te=65535;for(Te>H.pending_buf_size-5&&(Te=H.pending_buf_size-5);;){if(H.lookahead<=1){if(G(H),H.lookahead===0&&be===d)return O;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var Z=H.block_start+Te;if((H.strstart===0||H.strstart>=Z)&&(H.lookahead=H.strstart-Z,H.strstart=Z,K(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-M&&(K(H,!1),H.strm.avail_out===0))return O}return H.insert=0,be===f?(K(H,!0),H.strm.avail_out===0?U:W):(H.strstart>H.block_start&&(K(H,!1),H.strm.avail_out),O)}),new de(4,4,8,4,B),new de(4,5,16,8,B),new de(4,6,32,32,B),new de(4,4,16,16,z),new de(8,16,32,32,z),new de(8,16,128,128,z),new de(8,32,128,256,z),new de(32,128,258,1024,z),new de(32,258,258,4096,z)],i.deflateInit=function(H,be){return ie(H,be,E,15,8,0)},i.deflateInit2=ie,i.deflateReset=ae,i.deflateResetKeep=ee,i.deflateSetHeader=function(H,be){return H&&H.state?H.state.wrap!==2?m:(H.state.gzhead=be,h):m},i.deflate=function(H,be){var Te,Z,oe,te;if(!H||!H.state||5<be||be<0)return H?ce(H,m):m;if(Z=H.state,!H.output||!H.input&&H.avail_in!==0||Z.status===666&&be!==f)return ce(H,H.avail_out===0?-5:m);if(Z.strm=H,Te=Z.last_flush,Z.last_flush=be,Z.status===C)if(Z.wrap===2)H.adler=0,re(Z,31),re(Z,139),re(Z,8),Z.gzhead?(re(Z,(Z.gzhead.text?1:0)+(Z.gzhead.hcrc?2:0)+(Z.gzhead.extra?4:0)+(Z.gzhead.name?8:0)+(Z.gzhead.comment?16:0)),re(Z,255&Z.gzhead.time),re(Z,Z.gzhead.time>>8&255),re(Z,Z.gzhead.time>>16&255),re(Z,Z.gzhead.time>>24&255),re(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),re(Z,255&Z.gzhead.os),Z.gzhead.extra&&Z.gzhead.extra.length&&(re(Z,255&Z.gzhead.extra.length),re(Z,Z.gzhead.extra.length>>8&255)),Z.gzhead.hcrc&&(H.adler=c(H.adler,Z.pending_buf,Z.pending,0)),Z.gzindex=0,Z.status=69):(re(Z,0),re(Z,0),re(Z,0),re(Z,0),re(Z,0),re(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),re(Z,3),Z.status=D);else{var ye=E+(Z.w_bits-8<<4)<<8;ye|=(2<=Z.strategy||Z.level<2?0:Z.level<6?1:Z.level===6?2:3)<<6,Z.strstart!==0&&(ye|=32),ye+=31-ye%31,Z.status=D,X(Z,ye),Z.strstart!==0&&(X(Z,H.adler>>>16),X(Z,65535&H.adler)),H.adler=1}if(Z.status===69)if(Z.gzhead.extra){for(oe=Z.pending;Z.gzindex<(65535&Z.gzhead.extra.length)&&(Z.pending!==Z.pending_buf_size||(Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),J(H),oe=Z.pending,Z.pending!==Z.pending_buf_size));)re(Z,255&Z.gzhead.extra[Z.gzindex]),Z.gzindex++;Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),Z.gzindex===Z.gzhead.extra.length&&(Z.gzindex=0,Z.status=73)}else Z.status=73;if(Z.status===73)if(Z.gzhead.name){oe=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),J(H),oe=Z.pending,Z.pending===Z.pending_buf_size)){te=1;break}te=Z.gzindex<Z.gzhead.name.length?255&Z.gzhead.name.charCodeAt(Z.gzindex++):0,re(Z,te)}while(te!==0);Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),te===0&&(Z.gzindex=0,Z.status=91)}else Z.status=91;if(Z.status===91)if(Z.gzhead.comment){oe=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),J(H),oe=Z.pending,Z.pending===Z.pending_buf_size)){te=1;break}te=Z.gzindex<Z.gzhead.comment.length?255&Z.gzhead.comment.charCodeAt(Z.gzindex++):0,re(Z,te)}while(te!==0);Z.gzhead.hcrc&&Z.pending>oe&&(H.adler=c(H.adler,Z.pending_buf,Z.pending-oe,oe)),te===0&&(Z.status=103)}else Z.status=103;if(Z.status===103&&(Z.gzhead.hcrc?(Z.pending+2>Z.pending_buf_size&&J(H),Z.pending+2<=Z.pending_buf_size&&(re(Z,255&H.adler),re(Z,H.adler>>8&255),H.adler=0,Z.status=D)):Z.status=D),Z.pending!==0){if(J(H),H.avail_out===0)return Z.last_flush=-1,h}else if(H.avail_in===0&&se(be)<=se(Te)&&be!==f)return ce(H,-5);if(Z.status===666&&H.avail_in!==0)return ce(H,-5);if(H.avail_in!==0||Z.lookahead!==0||be!==d&&Z.status!==666){var ke=Z.strategy===2?(function(we,Ae){for(var Re;;){if(we.lookahead===0&&(G(we),we.lookahead===0)){if(Ae===d)return O;break}if(we.match_length=0,Re=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Re&&(K(we,!1),we.strm.avail_out===0))return O}return we.insert=0,Ae===f?(K(we,!0),we.strm.avail_out===0?U:W):we.last_lit&&(K(we,!1),we.strm.avail_out===0)?O:$})(Z,be):Z.strategy===3?(function(we,Ae){for(var Re,Pe,Ce,Oe,Fe=we.window;;){if(we.lookahead<=L){if(G(we),we.lookahead<=L&&Ae===d)return O;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=N&&0<we.strstart&&(Pe=Fe[Ce=we.strstart-1])===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]){Oe=we.strstart+L;do;while(Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Pe===Fe[++Ce]&&Ce<Oe);we.match_length=L-(Oe-Ce),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=N?(Re=a._tr_tally(we,1,we.match_length-N),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Re=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Re&&(K(we,!1),we.strm.avail_out===0))return O}return we.insert=0,Ae===f?(K(we,!0),we.strm.avail_out===0?U:W):we.last_lit&&(K(we,!1),we.strm.avail_out===0)?O:$})(Z,be):s[Z.level].func(Z,be);if(ke!==U&&ke!==W||(Z.status=666),ke===O||ke===U)return H.avail_out===0&&(Z.last_flush=-1),h;if(ke===$&&(be===1?a._tr_align(Z):be!==5&&(a._tr_stored_block(Z,0,0,!1),be===3&&(Q(Z.head),Z.lookahead===0&&(Z.strstart=0,Z.block_start=0,Z.insert=0))),J(H),H.avail_out===0))return Z.last_flush=-1,h}return be!==f?h:Z.wrap<=0?1:(Z.wrap===2?(re(Z,255&H.adler),re(Z,H.adler>>8&255),re(Z,H.adler>>16&255),re(Z,H.adler>>24&255),re(Z,255&H.total_in),re(Z,H.total_in>>8&255),re(Z,H.total_in>>16&255),re(Z,H.total_in>>24&255)):(X(Z,H.adler>>>16),X(Z,65535&H.adler)),J(H),0<Z.wrap&&(Z.wrap=-Z.wrap),Z.pending!==0?h:1)},i.deflateEnd=function(H){var be;return H&&H.state?(be=H.state.status)!==C&&be!==69&&be!==73&&be!==91&&be!==103&&be!==D&&be!==666?ce(H,m):(H.state=null,be===D?ce(H,-3):h):m},i.deflateSetDictionary=function(H,be){var Te,Z,oe,te,ye,ke,we,Ae,Re=be.length;if(!H||!H.state||(te=(Te=H.state).wrap)===2||te===1&&Te.status!==C||Te.lookahead)return m;for(te===1&&(H.adler=l(H.adler,be,Re,0)),Te.wrap=0,Re>=Te.w_size&&(te===0&&(Q(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),Ae=new o.Buf8(Te.w_size),o.arraySet(Ae,be,Re-Te.w_size,Te.w_size,0),be=Ae,Re=Te.w_size),ye=H.avail_in,ke=H.next_in,we=H.input,H.avail_in=Re,H.next_in=0,H.input=be,G(Te);Te.lookahead>=N;){for(Z=Te.strstart,oe=Te.lookahead-(N-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[Z+N-1])&Te.hash_mask,Te.prev[Z&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=Z,Z++,--oe;);Te.strstart=Z,Te.lookahead=N-1,G(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=N-1,Te.match_available=0,H.next_in=ke,H.input=we,H.avail_in=ye,Te.wrap=te,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,d,f,h,m,y,w,b,E,A,x,T,R,k,_,N,L,M,C,D,O,$;a=s.state,l=s.next_in,O=s.input,c=l+(s.avail_in-5),u=s.next_out,$=s.output,d=u-(o-s.avail_out),f=u+(s.avail_out-257),h=a.dmax,m=a.wsize,y=a.whave,w=a.wnext,b=a.window,E=a.hold,A=a.bits,x=a.lencode,T=a.distcode,R=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{A<15&&(E+=O[l++]<<A,A+=8,E+=O[l++]<<A,A+=8),_=x[E&R];t:for(;;){if(E>>>=N=_>>>24,A-=N,(N=_>>>16&255)===0)$[u++]=65535&_;else{if(!(16&N)){if((64&N)==0){_=x[(65535&_)+(E&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}L=65535&_,(N&=15)&&(A<N&&(E+=O[l++]<<A,A+=8),L+=E&(1<<N)-1,E>>>=N,A-=N),A<15&&(E+=O[l++]<<A,A+=8,E+=O[l++]<<A,A+=8),_=T[E&k];n:for(;;){if(E>>>=N=_>>>24,A-=N,!(16&(N=_>>>16&255))){if((64&N)==0){_=T[(65535&_)+(E&(1<<N)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(M=65535&_,A<(N&=15)&&(E+=O[l++]<<A,(A+=8)<N&&(E+=O[l++]<<A,A+=8)),h<(M+=E&(1<<N)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=N,A-=N,(N=u-d)<M){if(y<(N=M-N)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(D=b,(C=0)===w){if(C+=m-N,N<L){for(L-=N;$[u++]=b[C++],--N;);C=u-M,D=$}}else if(w<N){if(C+=m+w-N,(N-=w)<L){for(L-=N;$[u++]=b[C++],--N;);if(C=0,w<L){for(L-=N=w;$[u++]=b[C++],--N;);C=u-M,D=$}}}else if(C+=w-N,N<L){for(L-=N;$[u++]=b[C++],--N;);C=u-M,D=$}for(;2<L;)$[u++]=D[C++],$[u++]=D[C++],$[u++]=D[C++],L-=3;L&&($[u++]=D[C++],1<L&&($[u++]=D[C++]))}else{for(C=u-M;$[u++]=$[C++],$[u++]=$[C++],$[u++]=$[C++],2<(L-=3););L&&($[u++]=$[C++],1<L&&($[u++]=$[C++]))}break}}break}}while(l<c&&u<f);l-=L=A>>3,E&=(1<<(A-=L<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<f?f-u+257:257-(u-f),a.hold=E,a.bits=A}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,f=0,h=-2,m=1,y=852,w=592;function b(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(C){var D;return C&&C.state?(D=C.state,C.total_in=C.total_out=D.total=0,C.msg="",D.wrap&&(C.adler=1&D.wrap),D.mode=m,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new s.Buf32(y),D.distcode=D.distdyn=new s.Buf32(w),D.sane=1,D.back=-1,f):h}function x(C){var D;return C&&C.state?((D=C.state).wsize=0,D.whave=0,D.wnext=0,A(C)):h}function T(C,D){var O,$;return C&&C.state?($=C.state,D<0?(O=0,D=-D):(O=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?h:($.window!==null&&$.wbits!==D&&($.window=null),$.wrap=O,$.wbits=D,x(C))):h}function R(C,D){var O,$;return C?($=new E,(C.state=$).window=null,(O=T(C,D))!==f&&(C.state=null),O):h}var k,_,N=!0;function L(C){if(N){var D;for(k=new s.Buf32(512),_=new s.Buf32(32),D=0;D<144;)C.lens[D++]=8;for(;D<256;)C.lens[D++]=9;for(;D<280;)C.lens[D++]=7;for(;D<288;)C.lens[D++]=8;for(c(u,C.lens,0,288,k,0,C.work,{bits:9}),D=0;D<32;)C.lens[D++]=5;c(d,C.lens,0,32,_,0,C.work,{bits:5}),N=!1}C.lencode=k,C.lenbits=9,C.distcode=_,C.distbits=5}function M(C,D,O,$){var U,W=C.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new s.Buf8(W.wsize)),$>=W.wsize?(s.arraySet(W.window,D,O-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):($<(U=W.wsize-W.wnext)&&(U=$),s.arraySet(W.window,D,O-$,U,W.wnext),($-=U)?(s.arraySet(W.window,D,O-$,$,0),W.wnext=$,W.whave=W.wsize):(W.wnext+=U,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=U))),0}i.inflateReset=x,i.inflateReset2=T,i.inflateResetKeep=A,i.inflateInit=function(C){return R(C,15)},i.inflateInit2=R,i.inflate=function(C,D){var O,$,U,W,ce,se,Q,J,K,re,X,me,G,B,z,de,Y,ee,ae,ie,H,be,Te,Z,oe=0,te=new s.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return h;(O=C.state).mode===12&&(O.mode=13),ce=C.next_out,U=C.output,Q=C.avail_out,W=C.next_in,$=C.input,se=C.avail_in,J=O.hold,K=O.bits,re=se,X=Q,be=f;e:for(;;)switch(O.mode){case m:if(O.wrap===0){O.mode=13;break}for(;K<16;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(2&O.wrap&&J===35615){te[O.check=0]=255&J,te[1]=J>>>8&255,O.check=a(O.check,te,2,0),K=J=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&J)<<8)+(J>>8))%31){C.msg="incorrect header check",O.mode=30;break}if((15&J)!=8){C.msg="unknown compression method",O.mode=30;break}if(K-=4,H=8+(15&(J>>>=4)),O.wbits===0)O.wbits=H;else if(H>O.wbits){C.msg="invalid window size",O.mode=30;break}O.dmax=1<<H,C.adler=O.check=1,O.mode=512&J?10:12,K=J=0;break;case 2:for(;K<16;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(O.flags=J,(255&O.flags)!=8){C.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){C.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=J>>8&1),512&O.flags&&(te[0]=255&J,te[1]=J>>>8&255,O.check=a(O.check,te,2,0)),K=J=0,O.mode=3;case 3:for(;K<32;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.head&&(O.head.time=J),512&O.flags&&(te[0]=255&J,te[1]=J>>>8&255,te[2]=J>>>16&255,te[3]=J>>>24&255,O.check=a(O.check,te,4,0)),K=J=0,O.mode=4;case 4:for(;K<16;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.head&&(O.head.xflags=255&J,O.head.os=J>>8),512&O.flags&&(te[0]=255&J,te[1]=J>>>8&255,O.check=a(O.check,te,2,0)),K=J=0,O.mode=5;case 5:if(1024&O.flags){for(;K<16;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.length=J,O.head&&(O.head.extra_len=J),512&O.flags&&(te[0]=255&J,te[1]=J>>>8&255,O.check=a(O.check,te,2,0)),K=J=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(se<(me=O.length)&&(me=se),me&&(O.head&&(H=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),s.arraySet(O.head.extra,$,W,me,H)),512&O.flags&&(O.check=a(O.check,$,me,W)),se-=me,W+=me,O.length-=me),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(se===0)break e;for(me=0;H=$[W+me++],O.head&&H&&O.length<65536&&(O.head.name+=String.fromCharCode(H)),H&&me<se;);if(512&O.flags&&(O.check=a(O.check,$,me,W)),se-=me,W+=me,H)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(se===0)break e;for(me=0;H=$[W+me++],O.head&&H&&O.length<65536&&(O.head.comment+=String.fromCharCode(H)),H&&me<se;);if(512&O.flags&&(O.check=a(O.check,$,me,W)),se-=me,W+=me,H)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;K<16;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(J!==(65535&O.check)){C.msg="header crc mismatch",O.mode=30;break}K=J=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),C.adler=O.check=0,O.mode=12;break;case 10:for(;K<32;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}C.adler=O.check=b(J),K=J=0,O.mode=11;case 11:if(O.havedict===0)return C.next_out=ce,C.avail_out=Q,C.next_in=W,C.avail_in=se,O.hold=J,O.bits=K,2;C.adler=O.check=1,O.mode=12;case 12:if(D===5||D===6)break e;case 13:if(O.last){J>>>=7&K,K-=7&K,O.mode=27;break}for(;K<3;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}switch(O.last=1&J,K-=1,3&(J>>>=1)){case 0:O.mode=14;break;case 1:if(L(O),O.mode=20,D!==6)break;J>>>=2,K-=2;break e;case 2:O.mode=17;break;case 3:C.msg="invalid block type",O.mode=30}J>>>=2,K-=2;break;case 14:for(J>>>=7&K,K-=7&K;K<32;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if((65535&J)!=(J>>>16^65535)){C.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&J,K=J=0,O.mode=15,D===6)break e;case 15:O.mode=16;case 16:if(me=O.length){if(se<me&&(me=se),Q<me&&(me=Q),me===0)break e;s.arraySet(U,$,W,me,ce),se-=me,W+=me,Q-=me,ce+=me,O.length-=me;break}O.mode=12;break;case 17:for(;K<14;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(O.nlen=257+(31&J),J>>>=5,K-=5,O.ndist=1+(31&J),J>>>=5,K-=5,O.ncode=4+(15&J),J>>>=4,K-=4,286<O.nlen||30<O.ndist){C.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;K<3;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.lens[ye[O.have++]]=7&J,J>>>=3,K-=3}for(;O.have<19;)O.lens[ye[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,Te={bits:O.lenbits},be=c(0,O.lens,0,19,O.lencode,0,O.work,Te),O.lenbits=Te.bits,be){C.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;de=(oe=O.lencode[J&(1<<O.lenbits)-1])>>>16&255,Y=65535&oe,!((z=oe>>>24)<=K);){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(Y<16)J>>>=z,K-=z,O.lens[O.have++]=Y;else{if(Y===16){for(Z=z+2;K<Z;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(J>>>=z,K-=z,O.have===0){C.msg="invalid bit length repeat",O.mode=30;break}H=O.lens[O.have-1],me=3+(3&J),J>>>=2,K-=2}else if(Y===17){for(Z=z+3;K<Z;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}K-=z,H=0,me=3+(7&(J>>>=z)),J>>>=3,K-=3}else{for(Z=z+7;K<Z;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}K-=z,H=0,me=11+(127&(J>>>=z)),J>>>=7,K-=7}if(O.have+me>O.nlen+O.ndist){C.msg="invalid bit length repeat",O.mode=30;break}for(;me--;)O.lens[O.have++]=H}}if(O.mode===30)break;if(O.lens[256]===0){C.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,Te={bits:O.lenbits},be=c(u,O.lens,0,O.nlen,O.lencode,0,O.work,Te),O.lenbits=Te.bits,be){C.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,Te={bits:O.distbits},be=c(d,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,Te),O.distbits=Te.bits,be){C.msg="invalid distances set",O.mode=30;break}if(O.mode=20,D===6)break e;case 20:O.mode=21;case 21:if(6<=se&&258<=Q){C.next_out=ce,C.avail_out=Q,C.next_in=W,C.avail_in=se,O.hold=J,O.bits=K,l(C,X),ce=C.next_out,U=C.output,Q=C.avail_out,W=C.next_in,$=C.input,se=C.avail_in,J=O.hold,K=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;de=(oe=O.lencode[J&(1<<O.lenbits)-1])>>>16&255,Y=65535&oe,!((z=oe>>>24)<=K);){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(de&&(240&de)==0){for(ee=z,ae=de,ie=Y;de=(oe=O.lencode[ie+((J&(1<<ee+ae)-1)>>ee)])>>>16&255,Y=65535&oe,!(ee+(z=oe>>>24)<=K);){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}J>>>=ee,K-=ee,O.back+=ee}if(J>>>=z,K-=z,O.back+=z,O.length=Y,de===0){O.mode=26;break}if(32&de){O.back=-1,O.mode=12;break}if(64&de){C.msg="invalid literal/length code",O.mode=30;break}O.extra=15&de,O.mode=22;case 22:if(O.extra){for(Z=O.extra;K<Z;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.length+=J&(1<<O.extra)-1,J>>>=O.extra,K-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;de=(oe=O.distcode[J&(1<<O.distbits)-1])>>>16&255,Y=65535&oe,!((z=oe>>>24)<=K);){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if((240&de)==0){for(ee=z,ae=de,ie=Y;de=(oe=O.distcode[ie+((J&(1<<ee+ae)-1)>>ee)])>>>16&255,Y=65535&oe,!(ee+(z=oe>>>24)<=K);){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}J>>>=ee,K-=ee,O.back+=ee}if(J>>>=z,K-=z,O.back+=z,64&de){C.msg="invalid distance code",O.mode=30;break}O.offset=Y,O.extra=15&de,O.mode=24;case 24:if(O.extra){for(Z=O.extra;K<Z;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}O.offset+=J&(1<<O.extra)-1,J>>>=O.extra,K-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){C.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(Q===0)break e;if(me=X-Q,O.offset>me){if((me=O.offset-me)>O.whave&&O.sane){C.msg="invalid distance too far back",O.mode=30;break}G=me>O.wnext?(me-=O.wnext,O.wsize-me):O.wnext-me,me>O.length&&(me=O.length),B=O.window}else B=U,G=ce-O.offset,me=O.length;for(Q<me&&(me=Q),Q-=me,O.length-=me;U[ce++]=B[G++],--me;);O.length===0&&(O.mode=21);break;case 26:if(Q===0)break e;U[ce++]=O.length,Q--,O.mode=21;break;case 27:if(O.wrap){for(;K<32;){if(se===0)break e;se--,J|=$[W++]<<K,K+=8}if(X-=Q,C.total_out+=X,O.total+=X,X&&(C.adler=O.check=O.flags?a(O.check,U,X,ce-X):o(O.check,U,X,ce-X)),X=Q,(O.flags?J:b(J))!==O.check){C.msg="incorrect data check",O.mode=30;break}K=J=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;K<32;){if(se===0)break e;se--,J+=$[W++]<<K,K+=8}if(J!==(4294967295&O.total)){C.msg="incorrect length check",O.mode=30;break}K=J=0}O.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return h}return C.next_out=ce,C.avail_out=Q,C.next_in=W,C.avail_in=se,O.hold=J,O.bits=K,(O.wsize||X!==C.avail_out&&O.mode<30&&(O.mode<27||D!==4))&&M(C,C.output,C.next_out,X-C.avail_out)?(O.mode=31,-4):(re-=C.avail_in,X-=C.avail_out,C.total_in+=re,C.total_out+=X,O.total+=X,O.wrap&&X&&(C.adler=O.check=O.flags?a(O.check,U,X,C.next_out-X):o(O.check,U,X,C.next_out-X)),C.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(re==0&&X===0||D===4)&&be===f&&(be=-5),be)},i.inflateEnd=function(C){if(!C||!C.state)return h;var D=C.state;return D.window&&(D.window=null),C.state=null,f},i.inflateGetHeader=function(C,D){var O;return C&&C.state?(2&(O=C.state).wrap)==0?h:((O.head=D).done=!1,f):h},i.inflateSetDictionary=function(C,D){var O,$=D.length;return C&&C.state?(O=C.state).wrap!==0&&O.mode!==11?h:O.mode===11&&o(1,D,$,0)!==O.check?-3:M(C,D,$,$)?(O.mode=31,-4):(O.havedict=1,f):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,f,h,m,y,w,b){var E,A,x,T,R,k,_,N,L,M=b.bits,C=0,D=0,O=0,$=0,U=0,W=0,ce=0,se=0,Q=0,J=0,K=null,re=0,X=new s.Buf16(16),me=new s.Buf16(16),G=null,B=0;for(C=0;C<=15;C++)X[C]=0;for(D=0;D<h;D++)X[d[f+D]]++;for(U=M,$=15;1<=$&&X[$]===0;$--);if($<U&&(U=$),$===0)return m[y++]=20971520,m[y++]=20971520,b.bits=1,0;for(O=1;O<$&&X[O]===0;O++);for(U<O&&(U=O),C=se=1;C<=15;C++)if(se<<=1,(se-=X[C])<0)return-1;if(0<se&&(u===0||$!==1))return-1;for(me[1]=0,C=1;C<15;C++)me[C+1]=me[C]+X[C];for(D=0;D<h;D++)d[f+D]!==0&&(w[me[d[f+D]]++]=D);if(k=u===0?(K=G=w,19):u===1?(K=o,re-=257,G=a,B-=257,256):(K=l,G=c,-1),C=O,R=y,ce=D=J=0,x=-1,T=(Q=1<<(W=U))-1,u===1&&852<Q||u===2&&592<Q)return 1;for(;;){for(_=C-ce,L=w[D]<k?(N=0,w[D]):w[D]>k?(N=G[B+w[D]],K[re+w[D]]):(N=96,0),E=1<<C-ce,O=A=1<<W;m[R+(J>>ce)+(A-=E)]=_<<24|N<<16|L|0,A!==0;);for(E=1<<C-1;J&E;)E>>=1;if(E!==0?(J&=E-1,J+=E):J=0,D++,--X[C]==0){if(C===$)break;C=d[f+w[D]]}if(U<C&&(J&T)!==x){for(ce===0&&(ce=U),R+=O,se=1<<(W=C-ce);W+ce<$&&!((se-=X[W+ce])<=0);)W++,se<<=1;if(Q+=1<<W,u===1&&852<Q||u===2&&592<Q)return 1;m[x=J&T]=U<<24|W<<16|R-y|0}}return J!==0&&(m[R+J]=C-ce<<24|64<<16|0),b.bits=U,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(oe){for(var te=oe.length;0<=--te;)oe[te]=0}var c=0,u=29,d=256,f=d+1+u,h=30,m=19,y=2*f+1,w=15,b=16,E=7,A=256,x=16,T=17,R=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(f+2));l(M);var C=new Array(2*h);l(C);var D=new Array(512);l(D);var O=new Array(256);l(O);var $=new Array(u);l($);var U,W,ce,se=new Array(h);function Q(oe,te,ye,ke,we){this.static_tree=oe,this.extra_bits=te,this.extra_base=ye,this.elems=ke,this.max_length=we,this.has_stree=oe&&oe.length}function J(oe,te){this.dyn_tree=oe,this.max_code=0,this.stat_desc=te}function K(oe){return oe<256?D[oe]:D[256+(oe>>>7)]}function re(oe,te){oe.pending_buf[oe.pending++]=255&te,oe.pending_buf[oe.pending++]=te>>>8&255}function X(oe,te,ye){oe.bi_valid>b-ye?(oe.bi_buf|=te<<oe.bi_valid&65535,re(oe,oe.bi_buf),oe.bi_buf=te>>b-oe.bi_valid,oe.bi_valid+=ye-b):(oe.bi_buf|=te<<oe.bi_valid&65535,oe.bi_valid+=ye)}function me(oe,te,ye){X(oe,ye[2*te],ye[2*te+1])}function G(oe,te){for(var ye=0;ye|=1&oe,oe>>>=1,ye<<=1,0<--te;);return ye>>>1}function B(oe,te,ye){var ke,we,Ae=new Array(w+1),Re=0;for(ke=1;ke<=w;ke++)Ae[ke]=Re=Re+ye[ke-1]<<1;for(we=0;we<=te;we++){var Pe=oe[2*we+1];Pe!==0&&(oe[2*we]=G(Ae[Pe]++,Pe))}}function z(oe){var te;for(te=0;te<f;te++)oe.dyn_ltree[2*te]=0;for(te=0;te<h;te++)oe.dyn_dtree[2*te]=0;for(te=0;te<m;te++)oe.bl_tree[2*te]=0;oe.dyn_ltree[2*A]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function de(oe){8<oe.bi_valid?re(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Y(oe,te,ye,ke){var we=2*te,Ae=2*ye;return oe[we]<oe[Ae]||oe[we]===oe[Ae]&&ke[te]<=ke[ye]}function ee(oe,te,ye){for(var ke=oe.heap[ye],we=ye<<1;we<=oe.heap_len&&(we<oe.heap_len&&Y(te,oe.heap[we+1],oe.heap[we],oe.depth)&&we++,!Y(te,ke,oe.heap[we],oe.depth));)oe.heap[ye]=oe.heap[we],ye=we,we<<=1;oe.heap[ye]=ke}function ae(oe,te,ye){var ke,we,Ae,Re,Pe=0;if(oe.last_lit!==0)for(;ke=oe.pending_buf[oe.d_buf+2*Pe]<<8|oe.pending_buf[oe.d_buf+2*Pe+1],we=oe.pending_buf[oe.l_buf+Pe],Pe++,ke===0?me(oe,we,te):(me(oe,(Ae=O[we])+d+1,te),(Re=k[Ae])!==0&&X(oe,we-=$[Ae],Re),me(oe,Ae=K(--ke),ye),(Re=_[Ae])!==0&&X(oe,ke-=se[Ae],Re)),Pe<oe.last_lit;);me(oe,A,te)}function ie(oe,te){var ye,ke,we,Ae=te.dyn_tree,Re=te.stat_desc.static_tree,Pe=te.stat_desc.has_stree,Ce=te.stat_desc.elems,Oe=-1;for(oe.heap_len=0,oe.heap_max=y,ye=0;ye<Ce;ye++)Ae[2*ye]!==0?(oe.heap[++oe.heap_len]=Oe=ye,oe.depth[ye]=0):Ae[2*ye+1]=0;for(;oe.heap_len<2;)Ae[2*(we=oe.heap[++oe.heap_len]=Oe<2?++Oe:0)]=1,oe.depth[we]=0,oe.opt_len--,Pe&&(oe.static_len-=Re[2*we+1]);for(te.max_code=Oe,ye=oe.heap_len>>1;1<=ye;ye--)ee(oe,Ae,ye);for(we=Ce;ye=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],ee(oe,Ae,1),ke=oe.heap[1],oe.heap[--oe.heap_max]=ye,oe.heap[--oe.heap_max]=ke,Ae[2*we]=Ae[2*ye]+Ae[2*ke],oe.depth[we]=(oe.depth[ye]>=oe.depth[ke]?oe.depth[ye]:oe.depth[ke])+1,Ae[2*ye+1]=Ae[2*ke+1]=we,oe.heap[1]=we++,ee(oe,Ae,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],(function(Fe,$e){var he,q,ne,Ee,Se,ze,Ie=$e.dyn_tree,qe=$e.max_code,Ye=$e.stat_desc.static_tree,ft=$e.stat_desc.has_stree,We=$e.stat_desc.extra_bits,nt=$e.stat_desc.extra_base,bt=$e.stat_desc.max_length,ct=0;for(Ee=0;Ee<=w;Ee++)Fe.bl_count[Ee]=0;for(Ie[2*Fe.heap[Fe.heap_max]+1]=0,he=Fe.heap_max+1;he<y;he++)bt<(Ee=Ie[2*Ie[2*(q=Fe.heap[he])+1]+1]+1)&&(Ee=bt,ct++),Ie[2*q+1]=Ee,qe<q||(Fe.bl_count[Ee]++,Se=0,nt<=q&&(Se=We[q-nt]),ze=Ie[2*q],Fe.opt_len+=ze*(Ee+Se),ft&&(Fe.static_len+=ze*(Ye[2*q+1]+Se)));if(ct!==0){do{for(Ee=bt-1;Fe.bl_count[Ee]===0;)Ee--;Fe.bl_count[Ee]--,Fe.bl_count[Ee+1]+=2,Fe.bl_count[bt]--,ct-=2}while(0<ct);for(Ee=bt;Ee!==0;Ee--)for(q=Fe.bl_count[Ee];q!==0;)qe<(ne=Fe.heap[--he])||(Ie[2*ne+1]!==Ee&&(Fe.opt_len+=(Ee-Ie[2*ne+1])*Ie[2*ne],Ie[2*ne+1]=Ee),q--)}})(oe,te),B(Ae,Oe,oe.bl_count)}function H(oe,te,ye){var ke,we,Ae=-1,Re=te[1],Pe=0,Ce=7,Oe=4;for(Re===0&&(Ce=138,Oe=3),te[2*(ye+1)+1]=65535,ke=0;ke<=ye;ke++)we=Re,Re=te[2*(ke+1)+1],++Pe<Ce&&we===Re||(Pe<Oe?oe.bl_tree[2*we]+=Pe:we!==0?(we!==Ae&&oe.bl_tree[2*we]++,oe.bl_tree[2*x]++):Pe<=10?oe.bl_tree[2*T]++:oe.bl_tree[2*R]++,Ae=we,Oe=(Pe=0)===Re?(Ce=138,3):we===Re?(Ce=6,3):(Ce=7,4))}function be(oe,te,ye){var ke,we,Ae=-1,Re=te[1],Pe=0,Ce=7,Oe=4;for(Re===0&&(Ce=138,Oe=3),ke=0;ke<=ye;ke++)if(we=Re,Re=te[2*(ke+1)+1],!(++Pe<Ce&&we===Re)){if(Pe<Oe)for(;me(oe,we,oe.bl_tree),--Pe!=0;);else we!==0?(we!==Ae&&(me(oe,we,oe.bl_tree),Pe--),me(oe,x,oe.bl_tree),X(oe,Pe-3,2)):Pe<=10?(me(oe,T,oe.bl_tree),X(oe,Pe-3,3)):(me(oe,R,oe.bl_tree),X(oe,Pe-11,7));Ae=we,Oe=(Pe=0)===Re?(Ce=138,3):we===Re?(Ce=6,3):(Ce=7,4)}}l(se);var Te=!1;function Z(oe,te,ye,ke){X(oe,(c<<1)+(ke?1:0),3),(function(we,Ae,Re,Pe){de(we),re(we,Re),re(we,~Re),s.arraySet(we.pending_buf,we.window,Ae,Re,we.pending),we.pending+=Re})(oe,te,ye)}i._tr_init=function(oe){Te||((function(){var te,ye,ke,we,Ae,Re=new Array(w+1);for(we=ke=0;we<u-1;we++)for($[we]=ke,te=0;te<1<<k[we];te++)O[ke++]=we;for(O[ke-1]=we,we=Ae=0;we<16;we++)for(se[we]=Ae,te=0;te<1<<_[we];te++)D[Ae++]=we;for(Ae>>=7;we<h;we++)for(se[we]=Ae<<7,te=0;te<1<<_[we]-7;te++)D[256+Ae++]=we;for(ye=0;ye<=w;ye++)Re[ye]=0;for(te=0;te<=143;)M[2*te+1]=8,te++,Re[8]++;for(;te<=255;)M[2*te+1]=9,te++,Re[9]++;for(;te<=279;)M[2*te+1]=7,te++,Re[7]++;for(;te<=287;)M[2*te+1]=8,te++,Re[8]++;for(B(M,f+1,Re),te=0;te<h;te++)C[2*te+1]=5,C[2*te]=G(te,5);U=new Q(M,k,d+1,f,w),W=new Q(C,_,0,h,w),ce=new Q(new Array(0),N,0,m,E)})(),Te=!0),oe.l_desc=new J(oe.dyn_ltree,U),oe.d_desc=new J(oe.dyn_dtree,W),oe.bl_desc=new J(oe.bl_tree,ce),oe.bi_buf=0,oe.bi_valid=0,z(oe)},i._tr_stored_block=Z,i._tr_flush_block=function(oe,te,ye,ke){var we,Ae,Re=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=(function(Pe){var Ce,Oe=4093624447;for(Ce=0;Ce<=31;Ce++,Oe>>>=1)if(1&Oe&&Pe.dyn_ltree[2*Ce]!==0)return o;if(Pe.dyn_ltree[18]!==0||Pe.dyn_ltree[20]!==0||Pe.dyn_ltree[26]!==0)return a;for(Ce=32;Ce<d;Ce++)if(Pe.dyn_ltree[2*Ce]!==0)return a;return o})(oe)),ie(oe,oe.l_desc),ie(oe,oe.d_desc),Re=(function(Pe){var Ce;for(H(Pe,Pe.dyn_ltree,Pe.l_desc.max_code),H(Pe,Pe.dyn_dtree,Pe.d_desc.max_code),ie(Pe,Pe.bl_desc),Ce=m-1;3<=Ce&&Pe.bl_tree[2*L[Ce]+1]===0;Ce--);return Pe.opt_len+=3*(Ce+1)+5+5+4,Ce})(oe),we=oe.opt_len+3+7>>>3,(Ae=oe.static_len+3+7>>>3)<=we&&(we=Ae)):we=Ae=ye+5,ye+4<=we&&te!==-1?Z(oe,te,ye,ke):oe.strategy===4||Ae===we?(X(oe,2+(ke?1:0),3),ae(oe,M,C)):(X(oe,4+(ke?1:0),3),(function(Pe,Ce,Oe,Fe){var $e;for(X(Pe,Ce-257,5),X(Pe,Oe-1,5),X(Pe,Fe-4,4),$e=0;$e<Fe;$e++)X(Pe,Pe.bl_tree[2*L[$e]+1],3);be(Pe,Pe.dyn_ltree,Ce-1),be(Pe,Pe.dyn_dtree,Oe-1)})(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,Re+1),ae(oe,oe.dyn_ltree,oe.dyn_dtree)),z(oe),ke&&de(oe)},i._tr_tally=function(oe,te,ye){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=te>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&te,oe.pending_buf[oe.l_buf+oe.last_lit]=255&ye,oe.last_lit++,te===0?oe.dyn_ltree[2*ye]++:(oe.matches++,te--,oe.dyn_ltree[2*(O[ye]+d+1)]++,oe.dyn_dtree[2*K(te)]++),oe.last_lit===oe.lit_bufsize-1},i._tr_align=function(oe){X(oe,2,3),me(oe,A,M),(function(te){te.bi_valid===16?(re(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)})(oe)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,d,f=1,h={},m=!1,y=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,l={}.toString.call(o.process)==="[object process]"?function(x){_e.nextTick(function(){E(x)})}:(function(){if(o.postMessage&&!o.importScripts){var x=!0,T=o.onmessage;return o.onmessage=function(){x=!1},o.postMessage("","*"),o.onmessage=T,x}})()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",A,!1):o.attachEvent("onmessage",A),function(x){o.postMessage(d+x,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(x){E(x.data)},function(x){u.port2.postMessage(x)}):y&&"onreadystatechange"in y.createElement("script")?(c=y.documentElement,function(x){var T=y.createElement("script");T.onreadystatechange=function(){E(x),T.onreadystatechange=null,c.removeChild(T),T=null},c.appendChild(T)}):function(x){setTimeout(E,0,x)},w.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var T=new Array(arguments.length-1),R=0;R<T.length;R++)T[R]=arguments[R+1];var k={callback:x,args:T};return h[f]=k,l(f),f++},w.clearImmediate=b}function b(x){delete h[x]}function E(x){if(m)setTimeout(E,0,x);else{var T=h[x];if(T){m=!0;try{(function(R){var k=R.callback,_=R.args;switch(_.length){case 0:k();break;case 1:k(_[0]);break;case 2:k(_[0],_[1]);break;case 3:k(_[0],_[1],_[2]);break;default:k.apply(a,_)}})(T)}finally{b(x),m=!1}}}}function A(x){x.source===o&&typeof x.data=="string"&&x.data.indexOf(d)===0&&E(+x.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(h8)),h8.exports}var p8={},u5={exports:{}},qJ;function aH(){if(qJ)return u5.exports;qJ=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(T,R,k){return Function.prototype.apply.call(T,R,k)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function r(x){console&&console.warn&&console.warn(x)}var i=Number.isNaN||function(T){return T!==T};function s(){s.init.call(this)}u5.exports=s,u5.exports.once=b,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");o=x}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function l(x){return x._maxListeners===void 0?s.defaultMaxListeners:x._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(T){for(var R=[],k=1;k<arguments.length;k++)R.push(arguments[k]);var _=T==="error",N=this._events;if(N!==void 0)_=_&&N.error===void 0;else if(!_)return!1;if(_){var L;if(R.length>0&&(L=R[0]),L instanceof Error)throw L;var M=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw M.context=L,M}var C=N[T];if(C===void 0)return!1;if(typeof C=="function")e(C,this,R);else for(var D=C.length,O=m(C,D),k=0;k<D;++k)e(O[k],this,R);return!0};function c(x,T,R,k){var _,N,L;if(a(R),N=x._events,N===void 0?(N=x._events=Object.create(null),x._eventsCount=0):(N.newListener!==void 0&&(x.emit("newListener",T,R.listener?R.listener:R),N=x._events),L=N[T]),L===void 0)L=N[T]=R,++x._eventsCount;else if(typeof L=="function"?L=N[T]=k?[R,L]:[L,R]:k?L.unshift(R):L.push(R),_=l(x),_>0&&L.length>_&&!L.warned){L.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=x,M.type=T,M.count=L.length,r(M)}return x}s.prototype.addListener=function(T,R){return c(this,T,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(T,R){return c(this,T,R,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(x,T,R){var k={fired:!1,wrapFn:void 0,target:x,type:T,listener:R},_=u.bind(k);return _.listener=R,k.wrapFn=_,_}s.prototype.once=function(T,R){return a(R),this.on(T,d(this,T,R)),this},s.prototype.prependOnceListener=function(T,R){return a(R),this.prependListener(T,d(this,T,R)),this},s.prototype.removeListener=function(T,R){var k,_,N,L,M;if(a(R),_=this._events,_===void 0)return this;if(k=_[T],k===void 0)return this;if(k===R||k.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete _[T],_.removeListener&&this.emit("removeListener",T,k.listener||R));else if(typeof k!="function"){for(N=-1,L=k.length-1;L>=0;L--)if(k[L]===R||k[L].listener===R){M=k[L].listener,N=L;break}if(N<0)return this;N===0?k.shift():y(k,N),k.length===1&&(_[T]=k[0]),_.removeListener!==void 0&&this.emit("removeListener",T,M||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(T){var R,k,_;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[T]),this;if(arguments.length===0){var N=Object.keys(k),L;for(_=0;_<N.length;++_)L=N[_],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=k[T],typeof R=="function")this.removeListener(T,R);else if(R!==void 0)for(_=R.length-1;_>=0;_--)this.removeListener(T,R[_]);return this};function f(x,T,R){var k=x._events;if(k===void 0)return[];var _=k[T];return _===void 0?[]:typeof _=="function"?R?[_.listener||_]:[_]:R?w(_):m(_,_.length)}s.prototype.listeners=function(T){return f(this,T,!0)},s.prototype.rawListeners=function(T){return f(this,T,!1)},s.listenerCount=function(x,T){return typeof x.listenerCount=="function"?x.listenerCount(T):h.call(x,T)},s.prototype.listenerCount=h;function h(x){var T=this._events;if(T!==void 0){var R=T[x];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(x,T){for(var R=new Array(T),k=0;k<T;++k)R[k]=x[k];return R}function y(x,T){for(;T+1<x.length;T++)x[T]=x[T+1];x.pop()}function w(x){for(var T=new Array(x.length),R=0;R<T.length;++R)T[R]=x[R].listener||x[R];return T}function b(x,T){return new Promise(function(R,k){function _(L){x.removeListener(T,N),k(L)}function N(){typeof x.removeListener=="function"&&x.removeListener("error",_),R([].slice.call(arguments))}A(x,T,N,{once:!0}),T!=="error"&&E(x,_,{once:!0})})}function E(x,T,R){typeof x.on=="function"&&A(x,"error",T,R)}function A(x,T,R,k){if(typeof x.on=="function")k.once?x.once(T,R):x.on(T,R);else if(typeof x.addEventListener=="function")x.addEventListener(T,function _(N){k.once&&x.removeEventListener(T,_),R(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return u5.exports}var d5={exports:{}},GJ;function uw(){return GJ||(GJ=1,typeof Object.create=="function"?d5.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:d5.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}),d5.exports}var m8,KJ;function dpe(){return KJ||(KJ=1,m8=aH().EventEmitter),m8}var g8={},XJ;function pR(){return XJ||(XJ=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=u,n.toByteArray=f,n.fromByteArray=y;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(E){var A=E.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=E.indexOf("=");x===-1&&(x=A);var T=x===A?0:4-x%4;return[x,T]}function u(E){var A=c(E),x=A[0],T=A[1];return(x+T)*3/4-T}function d(E,A,x){return(A+x)*3/4-x}function f(E){var A,x=c(E),T=x[0],R=x[1],k=new s(d(E,T,R)),_=0,N=R>0?T-4:T,L;for(L=0;L<N;L+=4)A=i[E.charCodeAt(L)]<<18|i[E.charCodeAt(L+1)]<<12|i[E.charCodeAt(L+2)]<<6|i[E.charCodeAt(L+3)],k[_++]=A>>16&255,k[_++]=A>>8&255,k[_++]=A&255;return R===2&&(A=i[E.charCodeAt(L)]<<2|i[E.charCodeAt(L+1)]>>4,k[_++]=A&255),R===1&&(A=i[E.charCodeAt(L)]<<10|i[E.charCodeAt(L+1)]<<4|i[E.charCodeAt(L+2)]>>2,k[_++]=A>>8&255,k[_++]=A&255),k}function h(E){return r[E>>18&63]+r[E>>12&63]+r[E>>6&63]+r[E&63]}function m(E,A,x){for(var T,R=[],k=A;k<x;k+=3)T=(E[k]<<16&16711680)+(E[k+1]<<8&65280)+(E[k+2]&255),R.push(h(T));return R.join("")}function y(E){for(var A,x=E.length,T=x%3,R=[],k=16383,_=0,N=x-T;_<N;_+=k)R.push(m(E,_,_+k>N?N:_+k));return T===1?(A=E[x-1],R.push(r[A>>2]+r[A<<4&63]+"==")):T===2&&(A=(E[x-2]<<8)+E[x-1],R.push(r[A>>10]+r[A>>4&63]+r[A<<2&63]+"=")),R.join("")}var w={};w.read=function(E,A,x,T,R){var k,_,N=R*8-T-1,L=(1<<N)-1,M=L>>1,C=-7,D=x?R-1:0,O=x?-1:1,$=E[A+D];for(D+=O,k=$&(1<<-C)-1,$>>=-C,C+=N;C>0;k=k*256+E[A+D],D+=O,C-=8);for(_=k&(1<<-C)-1,k>>=-C,C+=T;C>0;_=_*256+E[A+D],D+=O,C-=8);if(k===0)k=1-M;else{if(k===L)return _?NaN:($?-1:1)*(1/0);_=_+Math.pow(2,T),k=k-M}return($?-1:1)*_*Math.pow(2,k-T)},w.write=function(E,A,x,T,R,k){var _,N,L,M=k*8-R-1,C=(1<<M)-1,D=C>>1,O=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=T?0:k-1,U=T?1:-1,W=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(N=isNaN(A)?1:0,_=C):(_=Math.floor(Math.log(A)/Math.LN2),A*(L=Math.pow(2,-_))<1&&(_--,L*=2),_+D>=1?A+=O/L:A+=O*Math.pow(2,1-D),A*L>=2&&(_++,L/=2),_+D>=C?(N=0,_=C):_+D>=1?(N=(A*L-1)*Math.pow(2,R),_=_+D):(N=A*Math.pow(2,D-1)*Math.pow(2,R),_=0));R>=8;E[x+$]=N&255,$+=U,N/=256,R-=8);for(_=_<<R|N,M+=R;M>0;E[x+$]=_&255,$+=U,_/=256,M-=8);E[x+$-U]|=W*128},(function(E){const A=n,x=w,T=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;E.Buffer=C,E.SlowBuffer=re,E.INSPECT_MAX_BYTES=50;const R=2147483647;E.kMaxLength=R;const{Uint8Array:k,ArrayBuffer:_,SharedArrayBuffer:N}=globalThis;C.TYPED_ARRAY_SUPPORT=L(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function L(){try{const Ne=new k(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,k.prototype),Object.setPrototypeOf(Ne,le),Ne.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function M(Ne){if(Ne>R)throw new RangeError('The value "'+Ne+'" is invalid for option "size"');const le=new k(Ne);return Object.setPrototypeOf(le,C.prototype),le}function C(Ne,le,fe){if(typeof Ne=="number"){if(typeof le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(Ne)}return D(Ne,le,fe)}C.poolSize=8192;function D(Ne,le,fe){if(typeof Ne=="string")return W(Ne,le);if(_.isView(Ne))return se(Ne);if(Ne==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ne);if(ct(Ne,_)||Ne&&ct(Ne.buffer,_)||typeof N<"u"&&(ct(Ne,N)||Ne&&ct(Ne.buffer,N)))return Q(Ne,le,fe);if(typeof Ne=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ve=Ne.valueOf&&Ne.valueOf();if(ve!=null&&ve!==Ne)return C.from(ve,le,fe);const He=J(Ne);if(He)return He;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ne[Symbol.toPrimitive]=="function")return C.from(Ne[Symbol.toPrimitive]("string"),le,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ne)}C.from=function(Ne,le,fe){return D(Ne,le,fe)},Object.setPrototypeOf(C.prototype,k.prototype),Object.setPrototypeOf(C,k);function O(Ne){if(typeof Ne!="number")throw new TypeError('"size" argument must be of type number');if(Ne<0)throw new RangeError('The value "'+Ne+'" is invalid for option "size"')}function $(Ne,le,fe){return O(Ne),Ne<=0?M(Ne):le!==void 0?typeof fe=="string"?M(Ne).fill(le,fe):M(Ne).fill(le):M(Ne)}C.alloc=function(Ne,le,fe){return $(Ne,le,fe)};function U(Ne){return O(Ne),M(Ne<0?0:K(Ne)|0)}C.allocUnsafe=function(Ne){return U(Ne)},C.allocUnsafeSlow=function(Ne){return U(Ne)};function W(Ne,le){if((typeof le!="string"||le==="")&&(le="utf8"),!C.isEncoding(le))throw new TypeError("Unknown encoding: "+le);const fe=X(Ne,le)|0;let ve=M(fe);const He=ve.write(Ne,le);return He!==fe&&(ve=ve.slice(0,He)),ve}function ce(Ne){const le=Ne.length<0?0:K(Ne.length)|0,fe=M(le);for(let ve=0;ve<le;ve+=1)fe[ve]=Ne[ve]&255;return fe}function se(Ne){if(ct(Ne,k)){const le=new k(Ne);return Q(le.buffer,le.byteOffset,le.byteLength)}return ce(Ne)}function Q(Ne,le,fe){if(le<0||Ne.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(Ne.byteLength<le+(fe||0))throw new RangeError('"length" is outside of buffer bounds');let ve;return le===void 0&&fe===void 0?ve=new k(Ne):fe===void 0?ve=new k(Ne,le):ve=new k(Ne,le,fe),Object.setPrototypeOf(ve,C.prototype),ve}function J(Ne){if(C.isBuffer(Ne)){const le=K(Ne.length)|0,fe=M(le);return fe.length===0||Ne.copy(fe,0,0,le),fe}if(Ne.length!==void 0)return typeof Ne.length!="number"||Ft(Ne.length)?M(0):ce(Ne);if(Ne.type==="Buffer"&&Array.isArray(Ne.data))return ce(Ne.data)}function K(Ne){if(Ne>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return Ne|0}function re(Ne){return+Ne!=Ne&&(Ne=0),C.alloc(+Ne)}C.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==C.prototype},C.compare=function(le,fe){if(ct(le,k)&&(le=C.from(le,le.offset,le.byteLength)),ct(fe,k)&&(fe=C.from(fe,fe.offset,fe.byteLength)),!C.isBuffer(le)||!C.isBuffer(fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===fe)return 0;let ve=le.length,He=fe.length;for(let Xe=0,it=Math.min(ve,He);Xe<it;++Xe)if(le[Xe]!==fe[Xe]){ve=le[Xe],He=fe[Xe];break}return ve<He?-1:He<ve?1:0},C.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(le,fe){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return C.alloc(0);let ve;if(fe===void 0)for(fe=0,ve=0;ve<le.length;++ve)fe+=le[ve].length;const He=C.allocUnsafe(fe);let Xe=0;for(ve=0;ve<le.length;++ve){let it=le[ve];if(ct(it,k))Xe+it.length>He.length?(C.isBuffer(it)||(it=C.from(it)),it.copy(He,Xe)):k.prototype.set.call(He,it,Xe);else if(C.isBuffer(it))it.copy(He,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=it.length}return He};function X(Ne,le){if(C.isBuffer(Ne))return Ne.length;if(_.isView(Ne)||ct(Ne,_))return Ne.byteLength;if(typeof Ne!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ne);const fe=Ne.length,ve=arguments.length>2&&arguments[2]===!0;if(!ve&&fe===0)return 0;let He=!1;for(;;)switch(le){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return Ye(Ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe*2;case"hex":return fe>>>1;case"base64":return nt(Ne).length;default:if(He)return ve?-1:Ye(Ne).length;le=(""+le).toLowerCase(),He=!0}}C.byteLength=X;function me(Ne,le,fe){let ve=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0,le>>>=0,fe<=le))return"";for(Ne||(Ne="utf8");;)switch(Ne){case"hex":return ye(this,le,fe);case"utf8":case"utf-8":return be(this,le,fe);case"ascii":return oe(this,le,fe);case"latin1":case"binary":return te(this,le,fe);case"base64":return H(this,le,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,le,fe);default:if(ve)throw new TypeError("Unknown encoding: "+Ne);Ne=(Ne+"").toLowerCase(),ve=!0}}C.prototype._isBuffer=!0;function G(Ne,le,fe){const ve=Ne[le];Ne[le]=Ne[fe],Ne[fe]=ve}C.prototype.swap16=function(){const le=this.length;if(le%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let fe=0;fe<le;fe+=2)G(this,fe,fe+1);return this},C.prototype.swap32=function(){const le=this.length;if(le%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let fe=0;fe<le;fe+=4)G(this,fe,fe+3),G(this,fe+1,fe+2);return this},C.prototype.swap64=function(){const le=this.length;if(le%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let fe=0;fe<le;fe+=8)G(this,fe,fe+7),G(this,fe+1,fe+6),G(this,fe+2,fe+5),G(this,fe+3,fe+4);return this},C.prototype.toString=function(){const le=this.length;return le===0?"":arguments.length===0?be(this,0,le):me.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(le){if(!C.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le?!0:C.compare(this,le)===0},C.prototype.inspect=function(){let le="";const fe=E.INSPECT_MAX_BYTES;return le=this.toString("hex",0,fe).replace(/(.{2})/g,"$1 ").trim(),this.length>fe&&(le+=" ... "),"<Buffer "+le+">"},T&&(C.prototype[T]=C.prototype.inspect),C.prototype.compare=function(le,fe,ve,He,Xe){if(ct(le,k)&&(le=C.from(le,le.offset,le.byteLength)),!C.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(fe===void 0&&(fe=0),ve===void 0&&(ve=le?le.length:0),He===void 0&&(He=0),Xe===void 0&&(Xe=this.length),fe<0||ve>le.length||He<0||Xe>this.length)throw new RangeError("out of range index");if(He>=Xe&&fe>=ve)return 0;if(He>=Xe)return-1;if(fe>=ve)return 1;if(fe>>>=0,ve>>>=0,He>>>=0,Xe>>>=0,this===le)return 0;let it=Xe-He,Lt=ve-fe;const Bt=Math.min(it,Lt),Wt=this.slice(He,Xe),Jt=le.slice(fe,ve);for(let qt=0;qt<Bt;++qt)if(Wt[qt]!==Jt[qt]){it=Wt[qt],Lt=Jt[qt];break}return it<Lt?-1:Lt<it?1:0};function B(Ne,le,fe,ve,He){if(Ne.length===0)return-1;if(typeof fe=="string"?(ve=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),fe=+fe,Ft(fe)&&(fe=He?0:Ne.length-1),fe<0&&(fe=Ne.length+fe),fe>=Ne.length){if(He)return-1;fe=Ne.length-1}else if(fe<0)if(He)fe=0;else return-1;if(typeof le=="string"&&(le=C.from(le,ve)),C.isBuffer(le))return le.length===0?-1:z(Ne,le,fe,ve,He);if(typeof le=="number")return le=le&255,typeof k.prototype.indexOf=="function"?He?k.prototype.indexOf.call(Ne,le,fe):k.prototype.lastIndexOf.call(Ne,le,fe):z(Ne,[le],fe,ve,He);throw new TypeError("val must be string, number or Buffer")}function z(Ne,le,fe,ve,He){let Xe=1,it=Ne.length,Lt=le.length;if(ve!==void 0&&(ve=String(ve).toLowerCase(),ve==="ucs2"||ve==="ucs-2"||ve==="utf16le"||ve==="utf-16le")){if(Ne.length<2||le.length<2)return-1;Xe=2,it/=2,Lt/=2,fe/=2}function Bt(Jt,qt){return Xe===1?Jt[qt]:Jt.readUInt16BE(qt*Xe)}let Wt;if(He){let Jt=-1;for(Wt=fe;Wt<it;Wt++)if(Bt(Ne,Wt)===Bt(le,Jt===-1?0:Wt-Jt)){if(Jt===-1&&(Jt=Wt),Wt-Jt+1===Lt)return Jt*Xe}else Jt!==-1&&(Wt-=Wt-Jt),Jt=-1}else for(fe+Lt>it&&(fe=it-Lt),Wt=fe;Wt>=0;Wt--){let Jt=!0;for(let qt=0;qt<Lt;qt++)if(Bt(Ne,Wt+qt)!==Bt(le,qt)){Jt=!1;break}if(Jt)return Wt}return-1}C.prototype.includes=function(le,fe,ve){return this.indexOf(le,fe,ve)!==-1},C.prototype.indexOf=function(le,fe,ve){return B(this,le,fe,ve,!0)},C.prototype.lastIndexOf=function(le,fe,ve){return B(this,le,fe,ve,!1)};function de(Ne,le,fe,ve){fe=Number(fe)||0;const He=Ne.length-fe;ve?(ve=Number(ve),ve>He&&(ve=He)):ve=He;const Xe=le.length;ve>Xe/2&&(ve=Xe/2);let it;for(it=0;it<ve;++it){const Lt=parseInt(le.substr(it*2,2),16);if(Ft(Lt))return it;Ne[fe+it]=Lt}return it}function Y(Ne,le,fe,ve){return bt(Ye(le,Ne.length-fe),Ne,fe,ve)}function ee(Ne,le,fe,ve){return bt(ft(le),Ne,fe,ve)}function ae(Ne,le,fe,ve){return bt(nt(le),Ne,fe,ve)}function ie(Ne,le,fe,ve){return bt(We(le,Ne.length-fe),Ne,fe,ve)}C.prototype.write=function(le,fe,ve,He){if(fe===void 0)He="utf8",ve=this.length,fe=0;else if(ve===void 0&&typeof fe=="string")He=fe,ve=this.length,fe=0;else if(isFinite(fe))fe=fe>>>0,isFinite(ve)?(ve=ve>>>0,He===void 0&&(He="utf8")):(He=ve,ve=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-fe;if((ve===void 0||ve>Xe)&&(ve=Xe),le.length>0&&(ve<0||fe<0)||fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");He||(He="utf8");let it=!1;for(;;)switch(He){case"hex":return de(this,le,fe,ve);case"utf8":case"utf-8":return Y(this,le,fe,ve);case"ascii":case"latin1":case"binary":return ee(this,le,fe,ve);case"base64":return ae(this,le,fe,ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,le,fe,ve);default:if(it)throw new TypeError("Unknown encoding: "+He);He=(""+He).toLowerCase(),it=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(Ne,le,fe){return le===0&&fe===Ne.length?A.fromByteArray(Ne):A.fromByteArray(Ne.slice(le,fe))}function be(Ne,le,fe){fe=Math.min(Ne.length,fe);const ve=[];let He=le;for(;He<fe;){const Xe=Ne[He];let it=null,Lt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(He+Lt<=fe){let Bt,Wt,Jt,qt;switch(Lt){case 1:Xe<128&&(it=Xe);break;case 2:Bt=Ne[He+1],(Bt&192)===128&&(qt=(Xe&31)<<6|Bt&63,qt>127&&(it=qt));break;case 3:Bt=Ne[He+1],Wt=Ne[He+2],(Bt&192)===128&&(Wt&192)===128&&(qt=(Xe&15)<<12|(Bt&63)<<6|Wt&63,qt>2047&&(qt<55296||qt>57343)&&(it=qt));break;case 4:Bt=Ne[He+1],Wt=Ne[He+2],Jt=Ne[He+3],(Bt&192)===128&&(Wt&192)===128&&(Jt&192)===128&&(qt=(Xe&15)<<18|(Bt&63)<<12|(Wt&63)<<6|Jt&63,qt>65535&&qt<1114112&&(it=qt))}}it===null?(it=65533,Lt=1):it>65535&&(it-=65536,ve.push(it>>>10&1023|55296),it=56320|it&1023),ve.push(it),He+=Lt}return Z(ve)}const Te=4096;function Z(Ne){const le=Ne.length;if(le<=Te)return String.fromCharCode.apply(String,Ne);let fe="",ve=0;for(;ve<le;)fe+=String.fromCharCode.apply(String,Ne.slice(ve,ve+=Te));return fe}function oe(Ne,le,fe){let ve="";fe=Math.min(Ne.length,fe);for(let He=le;He<fe;++He)ve+=String.fromCharCode(Ne[He]&127);return ve}function te(Ne,le,fe){let ve="";fe=Math.min(Ne.length,fe);for(let He=le;He<fe;++He)ve+=String.fromCharCode(Ne[He]);return ve}function ye(Ne,le,fe){const ve=Ne.length;(!le||le<0)&&(le=0),(!fe||fe<0||fe>ve)&&(fe=ve);let He="";for(let Xe=le;Xe<fe;++Xe)He+=tn[Ne[Xe]];return He}function ke(Ne,le,fe){const ve=Ne.slice(le,fe);let He="";for(let Xe=0;Xe<ve.length-1;Xe+=2)He+=String.fromCharCode(ve[Xe]+ve[Xe+1]*256);return He}C.prototype.slice=function(le,fe){const ve=this.length;le=~~le,fe=fe===void 0?ve:~~fe,le<0?(le+=ve,le<0&&(le=0)):le>ve&&(le=ve),fe<0?(fe+=ve,fe<0&&(fe=0)):fe>ve&&(fe=ve),fe<le&&(fe=le);const He=this.subarray(le,fe);return Object.setPrototypeOf(He,C.prototype),He};function we(Ne,le,fe){if(Ne%1!==0||Ne<0)throw new RangeError("offset is not uint");if(Ne+le>fe)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(le,fe,ve){le=le>>>0,fe=fe>>>0,ve||we(le,fe,this.length);let He=this[le],Xe=1,it=0;for(;++it<fe&&(Xe*=256);)He+=this[le+it]*Xe;return He},C.prototype.readUintBE=C.prototype.readUIntBE=function(le,fe,ve){le=le>>>0,fe=fe>>>0,ve||we(le,fe,this.length);let He=this[le+--fe],Xe=1;for(;fe>0&&(Xe*=256);)He+=this[le+--fe]*Xe;return He},C.prototype.readUint8=C.prototype.readUInt8=function(le,fe){return le=le>>>0,fe||we(le,1,this.length),this[le]},C.prototype.readUint16LE=C.prototype.readUInt16LE=function(le,fe){return le=le>>>0,fe||we(le,2,this.length),this[le]|this[le+1]<<8},C.prototype.readUint16BE=C.prototype.readUInt16BE=function(le,fe){return le=le>>>0,fe||we(le,2,this.length),this[le]<<8|this[le+1]},C.prototype.readUint32LE=C.prototype.readUInt32LE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+this[le+3]*16777216},C.prototype.readUint32BE=C.prototype.readUInt32BE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),this[le]*16777216+(this[le+1]<<16|this[le+2]<<8|this[le+3])},C.prototype.readBigUInt64LE=Zt(function(le){le=le>>>0,Se(le,"offset");const fe=this[le],ve=this[le+7];(fe===void 0||ve===void 0)&&ze(le,this.length-8);const He=fe+this[++le]*2**8+this[++le]*2**16+this[++le]*2**24,Xe=this[++le]+this[++le]*2**8+this[++le]*2**16+ve*2**24;return BigInt(He)+(BigInt(Xe)<<BigInt(32))}),C.prototype.readBigUInt64BE=Zt(function(le){le=le>>>0,Se(le,"offset");const fe=this[le],ve=this[le+7];(fe===void 0||ve===void 0)&&ze(le,this.length-8);const He=fe*2**24+this[++le]*2**16+this[++le]*2**8+this[++le],Xe=this[++le]*2**24+this[++le]*2**16+this[++le]*2**8+ve;return(BigInt(He)<<BigInt(32))+BigInt(Xe)}),C.prototype.readIntLE=function(le,fe,ve){le=le>>>0,fe=fe>>>0,ve||we(le,fe,this.length);let He=this[le],Xe=1,it=0;for(;++it<fe&&(Xe*=256);)He+=this[le+it]*Xe;return Xe*=128,He>=Xe&&(He-=Math.pow(2,8*fe)),He},C.prototype.readIntBE=function(le,fe,ve){le=le>>>0,fe=fe>>>0,ve||we(le,fe,this.length);let He=fe,Xe=1,it=this[le+--He];for(;He>0&&(Xe*=256);)it+=this[le+--He]*Xe;return Xe*=128,it>=Xe&&(it-=Math.pow(2,8*fe)),it},C.prototype.readInt8=function(le,fe){return le=le>>>0,fe||we(le,1,this.length),this[le]&128?(255-this[le]+1)*-1:this[le]},C.prototype.readInt16LE=function(le,fe){le=le>>>0,fe||we(le,2,this.length);const ve=this[le]|this[le+1]<<8;return ve&32768?ve|4294901760:ve},C.prototype.readInt16BE=function(le,fe){le=le>>>0,fe||we(le,2,this.length);const ve=this[le+1]|this[le]<<8;return ve&32768?ve|4294901760:ve},C.prototype.readInt32LE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},C.prototype.readInt32BE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},C.prototype.readBigInt64LE=Zt(function(le){le=le>>>0,Se(le,"offset");const fe=this[le],ve=this[le+7];(fe===void 0||ve===void 0)&&ze(le,this.length-8);const He=this[le+4]+this[le+5]*2**8+this[le+6]*2**16+(ve<<24);return(BigInt(He)<<BigInt(32))+BigInt(fe+this[++le]*2**8+this[++le]*2**16+this[++le]*2**24)}),C.prototype.readBigInt64BE=Zt(function(le){le=le>>>0,Se(le,"offset");const fe=this[le],ve=this[le+7];(fe===void 0||ve===void 0)&&ze(le,this.length-8);const He=(fe<<24)+this[++le]*2**16+this[++le]*2**8+this[++le];return(BigInt(He)<<BigInt(32))+BigInt(this[++le]*2**24+this[++le]*2**16+this[++le]*2**8+ve)}),C.prototype.readFloatLE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),x.read(this,le,!0,23,4)},C.prototype.readFloatBE=function(le,fe){return le=le>>>0,fe||we(le,4,this.length),x.read(this,le,!1,23,4)},C.prototype.readDoubleLE=function(le,fe){return le=le>>>0,fe||we(le,8,this.length),x.read(this,le,!0,52,8)},C.prototype.readDoubleBE=function(le,fe){return le=le>>>0,fe||we(le,8,this.length),x.read(this,le,!1,52,8)};function Ae(Ne,le,fe,ve,He,Xe){if(!C.isBuffer(Ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>He||le<Xe)throw new RangeError('"value" argument is out of bounds');if(fe+ve>Ne.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(le,fe,ve,He){if(le=+le,fe=fe>>>0,ve=ve>>>0,!He){const Lt=Math.pow(2,8*ve)-1;Ae(this,le,fe,ve,Lt,0)}let Xe=1,it=0;for(this[fe]=le&255;++it<ve&&(Xe*=256);)this[fe+it]=le/Xe&255;return fe+ve},C.prototype.writeUintBE=C.prototype.writeUIntBE=function(le,fe,ve,He){if(le=+le,fe=fe>>>0,ve=ve>>>0,!He){const Lt=Math.pow(2,8*ve)-1;Ae(this,le,fe,ve,Lt,0)}let Xe=ve-1,it=1;for(this[fe+Xe]=le&255;--Xe>=0&&(it*=256);)this[fe+Xe]=le/it&255;return fe+ve},C.prototype.writeUint8=C.prototype.writeUInt8=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,1,255,0),this[fe]=le&255,fe+1},C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,2,65535,0),this[fe]=le&255,this[fe+1]=le>>>8,fe+2},C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,2,65535,0),this[fe]=le>>>8,this[fe+1]=le&255,fe+2},C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,4,4294967295,0),this[fe+3]=le>>>24,this[fe+2]=le>>>16,this[fe+1]=le>>>8,this[fe]=le&255,fe+4},C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,4,4294967295,0),this[fe]=le>>>24,this[fe+1]=le>>>16,this[fe+2]=le>>>8,this[fe+3]=le&255,fe+4};function Re(Ne,le,fe,ve,He){Ee(le,ve,He,Ne,fe,7);let Xe=Number(le&BigInt(4294967295));Ne[fe++]=Xe,Xe=Xe>>8,Ne[fe++]=Xe,Xe=Xe>>8,Ne[fe++]=Xe,Xe=Xe>>8,Ne[fe++]=Xe;let it=Number(le>>BigInt(32)&BigInt(4294967295));return Ne[fe++]=it,it=it>>8,Ne[fe++]=it,it=it>>8,Ne[fe++]=it,it=it>>8,Ne[fe++]=it,fe}function Pe(Ne,le,fe,ve,He){Ee(le,ve,He,Ne,fe,7);let Xe=Number(le&BigInt(4294967295));Ne[fe+7]=Xe,Xe=Xe>>8,Ne[fe+6]=Xe,Xe=Xe>>8,Ne[fe+5]=Xe,Xe=Xe>>8,Ne[fe+4]=Xe;let it=Number(le>>BigInt(32)&BigInt(4294967295));return Ne[fe+3]=it,it=it>>8,Ne[fe+2]=it,it=it>>8,Ne[fe+1]=it,it=it>>8,Ne[fe]=it,fe+8}C.prototype.writeBigUInt64LE=Zt(function(le,fe=0){return Re(this,le,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeBigUInt64BE=Zt(function(le,fe=0){return Pe(this,le,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeIntLE=function(le,fe,ve,He){if(le=+le,fe=fe>>>0,!He){const Bt=Math.pow(2,8*ve-1);Ae(this,le,fe,ve,Bt-1,-Bt)}let Xe=0,it=1,Lt=0;for(this[fe]=le&255;++Xe<ve&&(it*=256);)le<0&&Lt===0&&this[fe+Xe-1]!==0&&(Lt=1),this[fe+Xe]=(le/it>>0)-Lt&255;return fe+ve},C.prototype.writeIntBE=function(le,fe,ve,He){if(le=+le,fe=fe>>>0,!He){const Bt=Math.pow(2,8*ve-1);Ae(this,le,fe,ve,Bt-1,-Bt)}let Xe=ve-1,it=1,Lt=0;for(this[fe+Xe]=le&255;--Xe>=0&&(it*=256);)le<0&&Lt===0&&this[fe+Xe+1]!==0&&(Lt=1),this[fe+Xe]=(le/it>>0)-Lt&255;return fe+ve},C.prototype.writeInt8=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,1,127,-128),le<0&&(le=255+le+1),this[fe]=le&255,fe+1},C.prototype.writeInt16LE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,2,32767,-32768),this[fe]=le&255,this[fe+1]=le>>>8,fe+2},C.prototype.writeInt16BE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,2,32767,-32768),this[fe]=le>>>8,this[fe+1]=le&255,fe+2},C.prototype.writeInt32LE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,4,2147483647,-2147483648),this[fe]=le&255,this[fe+1]=le>>>8,this[fe+2]=le>>>16,this[fe+3]=le>>>24,fe+4},C.prototype.writeInt32BE=function(le,fe,ve){return le=+le,fe=fe>>>0,ve||Ae(this,le,fe,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[fe]=le>>>24,this[fe+1]=le>>>16,this[fe+2]=le>>>8,this[fe+3]=le&255,fe+4},C.prototype.writeBigInt64LE=Zt(function(le,fe=0){return Re(this,le,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),C.prototype.writeBigInt64BE=Zt(function(le,fe=0){return Pe(this,le,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ce(Ne,le,fe,ve,He,Xe){if(fe+ve>Ne.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function Oe(Ne,le,fe,ve,He){return le=+le,fe=fe>>>0,He||Ce(Ne,le,fe,4),x.write(Ne,le,fe,ve,23,4),fe+4}C.prototype.writeFloatLE=function(le,fe,ve){return Oe(this,le,fe,!0,ve)},C.prototype.writeFloatBE=function(le,fe,ve){return Oe(this,le,fe,!1,ve)};function Fe(Ne,le,fe,ve,He){return le=+le,fe=fe>>>0,He||Ce(Ne,le,fe,8),x.write(Ne,le,fe,ve,52,8),fe+8}C.prototype.writeDoubleLE=function(le,fe,ve){return Fe(this,le,fe,!0,ve)},C.prototype.writeDoubleBE=function(le,fe,ve){return Fe(this,le,fe,!1,ve)},C.prototype.copy=function(le,fe,ve,He){if(!C.isBuffer(le))throw new TypeError("argument should be a Buffer");if(ve||(ve=0),!He&&He!==0&&(He=this.length),fe>=le.length&&(fe=le.length),fe||(fe=0),He>0&&He<ve&&(He=ve),He===ve||le.length===0||this.length===0)return 0;if(fe<0)throw new RangeError("targetStart out of bounds");if(ve<0||ve>=this.length)throw new RangeError("Index out of range");if(He<0)throw new RangeError("sourceEnd out of bounds");He>this.length&&(He=this.length),le.length-fe<He-ve&&(He=le.length-fe+ve);const Xe=He-ve;return this===le&&typeof k.prototype.copyWithin=="function"?this.copyWithin(fe,ve,He):k.prototype.set.call(le,this.subarray(ve,He),fe),Xe},C.prototype.fill=function(le,fe,ve,He){if(typeof le=="string"){if(typeof fe=="string"?(He=fe,fe=0,ve=this.length):typeof ve=="string"&&(He=ve,ve=this.length),He!==void 0&&typeof He!="string")throw new TypeError("encoding must be a string");if(typeof He=="string"&&!C.isEncoding(He))throw new TypeError("Unknown encoding: "+He);if(le.length===1){const it=le.charCodeAt(0);(He==="utf8"&&it<128||He==="latin1")&&(le=it)}}else typeof le=="number"?le=le&255:typeof le=="boolean"&&(le=Number(le));if(fe<0||this.length<fe||this.length<ve)throw new RangeError("Out of range index");if(ve<=fe)return this;fe=fe>>>0,ve=ve===void 0?this.length:ve>>>0,le||(le=0);let Xe;if(typeof le=="number")for(Xe=fe;Xe<ve;++Xe)this[Xe]=le;else{const it=C.isBuffer(le)?le:C.from(le,He),Lt=it.length;if(Lt===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(Xe=0;Xe<ve-fe;++Xe)this[Xe+fe]=it[Xe%Lt]}return this};const $e={};function he(Ne,le,fe){$e[Ne]=class extends fe{constructor(){super(),Object.defineProperty(this,"message",{value:le.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ne}]`,this.stack,delete this.name}get code(){return Ne}set code(He){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:He,writable:!0})}toString(){return`${this.name} [${Ne}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(Ne){return Ne?`${Ne} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(Ne,le){return`The "${Ne}" argument must be of type number. Received type ${typeof le}`},TypeError),he("ERR_OUT_OF_RANGE",function(Ne,le,fe){let ve=`The value of "${Ne}" is out of range.`,He=fe;return Number.isInteger(fe)&&Math.abs(fe)>2**32?He=q(String(fe)):typeof fe=="bigint"&&(He=String(fe),(fe>BigInt(2)**BigInt(32)||fe<-(BigInt(2)**BigInt(32)))&&(He=q(He)),He+="n"),ve+=` It must be ${le}. Received ${He}`,ve},RangeError);function q(Ne){let le="",fe=Ne.length;const ve=Ne[0]==="-"?1:0;for(;fe>=ve+4;fe-=3)le=`_${Ne.slice(fe-3,fe)}${le}`;return`${Ne.slice(0,fe)}${le}`}function ne(Ne,le,fe){Se(le,"offset"),(Ne[le]===void 0||Ne[le+fe]===void 0)&&ze(le,Ne.length-(fe+1))}function Ee(Ne,le,fe,ve,He,Xe){if(Ne>fe||Ne<le){const it=typeof le=="bigint"?"n":"";let Lt;throw le===0||le===BigInt(0)?Lt=`>= 0${it} and < 2${it} ** ${(Xe+1)*8}${it}`:Lt=`>= -(2${it} ** ${(Xe+1)*8-1}${it}) and < 2 ** ${(Xe+1)*8-1}${it}`,new $e.ERR_OUT_OF_RANGE("value",Lt,Ne)}ne(ve,He,Xe)}function Se(Ne,le){if(typeof Ne!="number")throw new $e.ERR_INVALID_ARG_TYPE(le,"number",Ne)}function ze(Ne,le,fe){throw Math.floor(Ne)!==Ne?(Se(Ne,fe),new $e.ERR_OUT_OF_RANGE("offset","an integer",Ne)):le<0?new $e.ERR_BUFFER_OUT_OF_BOUNDS:new $e.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${le}`,Ne)}const Ie=/[^+/0-9A-Za-z-_]/g;function qe(Ne){if(Ne=Ne.split("=")[0],Ne=Ne.trim().replace(Ie,""),Ne.length<2)return"";for(;Ne.length%4!==0;)Ne=Ne+"=";return Ne}function Ye(Ne,le){le=le||1/0;let fe;const ve=Ne.length;let He=null;const Xe=[];for(let it=0;it<ve;++it){if(fe=Ne.charCodeAt(it),fe>55295&&fe<57344){if(!He){if(fe>56319){(le-=3)>-1&&Xe.push(239,191,189);continue}else if(it+1===ve){(le-=3)>-1&&Xe.push(239,191,189);continue}He=fe;continue}if(fe<56320){(le-=3)>-1&&Xe.push(239,191,189),He=fe;continue}fe=(He-55296<<10|fe-56320)+65536}else He&&(le-=3)>-1&&Xe.push(239,191,189);if(He=null,fe<128){if((le-=1)<0)break;Xe.push(fe)}else if(fe<2048){if((le-=2)<0)break;Xe.push(fe>>6|192,fe&63|128)}else if(fe<65536){if((le-=3)<0)break;Xe.push(fe>>12|224,fe>>6&63|128,fe&63|128)}else if(fe<1114112){if((le-=4)<0)break;Xe.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,fe&63|128)}else throw new Error("Invalid code point")}return Xe}function ft(Ne){const le=[];for(let fe=0;fe<Ne.length;++fe)le.push(Ne.charCodeAt(fe)&255);return le}function We(Ne,le){let fe,ve,He;const Xe=[];for(let it=0;it<Ne.length&&!((le-=2)<0);++it)fe=Ne.charCodeAt(it),ve=fe>>8,He=fe%256,Xe.push(He),Xe.push(ve);return Xe}function nt(Ne){return A.toByteArray(qe(Ne))}function bt(Ne,le,fe,ve){let He;for(He=0;He<ve&&!(He+fe>=le.length||He>=Ne.length);++He)le[He+fe]=Ne[He];return He}function ct(Ne,le){return Ne instanceof le||Ne!=null&&Ne.constructor!=null&&Ne.constructor.name!=null&&Ne.constructor.name===le.name}function Ft(Ne){return Ne!==Ne}const tn=(function(){const Ne="0123456789abcdef",le=new Array(256);for(let fe=0;fe<16;++fe){const ve=fe*16;for(let He=0;He<16;++He)le[ve+He]=Ne[fe]+Ne[He]}return le})();function Zt(Ne){return typeof BigInt>"u"?ri:Ne}function ri(){throw new Error("BigInt not supported")}})(e);const b=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=b,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(g8)),g8}var y8={},b8={},w8,YJ;function fpe(){return YJ||(YJ=1,w8=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),w8}var v8,ZJ;function mR(){if(ZJ)return v8;ZJ=1;var t=fpe();return v8=function(){return t()&&!!Symbol.toStringTag},v8}var x8,JJ;function hpe(){return JJ||(JJ=1,x8=Object),x8}var E8,QJ;function VFe(){return QJ||(QJ=1,E8=Error),E8}var S8,eQ;function UFe(){return eQ||(eQ=1,S8=EvalError),S8}var A8,tQ;function WFe(){return tQ||(tQ=1,A8=RangeError),A8}var T8,nQ;function qFe(){return nQ||(nQ=1,T8=ReferenceError),T8}var k8,rQ;function ppe(){return rQ||(rQ=1,k8=SyntaxError),k8}var C8,iQ;function Yk(){return iQ||(iQ=1,C8=TypeError),C8}var _8,sQ;function GFe(){return sQ||(sQ=1,_8=URIError),_8}var N8,oQ;function KFe(){return oQ||(oQ=1,N8=Math.abs),N8}var I8,aQ;function XFe(){return aQ||(aQ=1,I8=Math.floor),I8}var R8,lQ;function YFe(){return lQ||(lQ=1,R8=Math.max),R8}var M8,cQ;function ZFe(){return cQ||(cQ=1,M8=Math.min),M8}var L8,uQ;function JFe(){return uQ||(uQ=1,L8=Math.pow),L8}var D8,dQ;function QFe(){return dQ||(dQ=1,D8=Math.round),D8}var O8,fQ;function eBe(){return fQ||(fQ=1,O8=Number.isNaN||function(e){return e!==e}),O8}var P8,hQ;function tBe(){if(hQ)return P8;hQ=1;var t=eBe();return P8=function(n){return t(n)||n===0?n:n<0?-1:1},P8}var F8,pQ;function nBe(){return pQ||(pQ=1,F8=Object.getOwnPropertyDescriptor),F8}var B8,mQ;function v2(){if(mQ)return B8;mQ=1;var t=nBe();if(t)try{t([],"length")}catch{t=null}return B8=t,B8}var j8,gQ;function gR(){if(gQ)return j8;gQ=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return j8=t,j8}var $8,yQ;function rBe(){if(yQ)return $8;yQ=1;var t=typeof Symbol<"u"&&Symbol,e=fpe();return $8=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},$8}var z8,bQ;function mpe(){return bQ||(bQ=1,z8=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),z8}var H8,wQ;function gpe(){if(wQ)return H8;wQ=1;var t=hpe();return H8=t.getPrototypeOf||null,H8}var V8,vQ;function iBe(){if(vQ)return V8;vQ=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,c){for(var u=[],d=0;d<l.length;d+=1)u[d]=l[d];for(var f=0;f<c.length;f+=1)u[f+l.length]=c[f];return u},s=function(l,c){for(var u=[],d=c,f=0;d<l.length;d+=1,f+=1)u[f]=l[d];return u},o=function(a,l){for(var c="",u=0;u<a.length;u+=1)c+=a[u],u+1<a.length&&(c+=l);return c};return V8=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(t+c);for(var u=s(arguments,1),d,f=function(){if(this instanceof d){var b=c.apply(this,i(u,arguments));return Object(b)===b?b:this}return c.apply(l,i(u,arguments))},h=n(0,c.length-u.length),m=[],y=0;y<h;y++)m[y]="$"+y;if(d=Function("binder","return function ("+o(m,",")+"){ return binder.apply(this,arguments); }")(f),c.prototype){var w=function(){};w.prototype=c.prototype,d.prototype=new w,w.prototype=null}return d},V8}var U8,xQ;function Zk(){if(xQ)return U8;xQ=1;var t=iBe();return U8=Function.prototype.bind||t,U8}var W8,EQ;function lH(){return EQ||(EQ=1,W8=Function.prototype.call),W8}var q8,SQ;function cH(){return SQ||(SQ=1,q8=Function.prototype.apply),q8}var G8,AQ;function sBe(){return AQ||(AQ=1,G8=typeof Reflect<"u"&&Reflect&&Reflect.apply),G8}var K8,TQ;function ype(){if(TQ)return K8;TQ=1;var t=Zk(),e=cH(),n=lH(),r=sBe();return K8=r||t.call(n,e),K8}var X8,kQ;function uH(){if(kQ)return X8;kQ=1;var t=Zk(),e=Yk(),n=lH(),r=ype();return X8=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},X8}var Y8,CQ;function oBe(){if(CQ)return Y8;CQ=1;var t=uH(),e=v2(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Y8=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?(function(a){return s(a==null?a:i(a))}):!1,Y8}var Z8,_Q;function dH(){if(_Q)return Z8;_Q=1;var t=mpe(),e=gpe(),n=oBe();return Z8=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,Z8}var J8,NQ;function bpe(){if(NQ)return J8;NQ=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Zk();return J8=n.call(t,e),J8}var Q8,IQ;function wpe(){if(IQ)return Q8;IQ=1;var t,e=hpe(),n=VFe(),r=UFe(),i=WFe(),s=qFe(),o=ppe(),a=Yk(),l=GFe(),c=KFe(),u=XFe(),d=YFe(),f=ZFe(),h=JFe(),m=QFe(),y=tBe(),w=Function,b=function(de){try{return w('"use strict"; return ('+de+").constructor;")()}catch{}},E=v2(),A=gR(),x=function(){throw new a},T=E?(function(){try{return arguments.callee,x}catch{try{return E(arguments,"callee").get}catch{return x}}})():x,R=rBe()(),k=dH(),_=gpe(),N=mpe(),L=cH(),M=lH(),C={},D=typeof Uint8Array>"u"||!k?t:k(Uint8Array),O={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":R&&k?k([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":C,"%AsyncGenerator%":C,"%AsyncGeneratorFunction%":C,"%AsyncIteratorPrototype%":C,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":C,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R&&k?k(k([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!R||!k?t:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!R||!k?t:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R&&k?k(""[Symbol.iterator]()):t,"%Symbol%":R?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":T,"%TypedArray%":D,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":M,"%Function.prototype.apply%":L,"%Object.defineProperty%":A,"%Object.getPrototypeOf%":_,"%Math.abs%":c,"%Math.floor%":u,"%Math.max%":d,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":m,"%Math.sign%":y,"%Reflect.getPrototypeOf%":N};if(k)try{null.error}catch(de){var $=k(k(de));O["%Error.prototype%"]=$}var U=function de(Y){var ee;if(Y==="%AsyncFunction%")ee=b("async function () {}");else if(Y==="%GeneratorFunction%")ee=b("function* () {}");else if(Y==="%AsyncGeneratorFunction%")ee=b("async function* () {}");else if(Y==="%AsyncGenerator%"){var ae=de("%AsyncGeneratorFunction%");ae&&(ee=ae.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var ie=de("%AsyncGenerator%");ie&&k&&(ee=k(ie.prototype))}return O[Y]=ee,ee},W={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ce=Zk(),se=bpe(),Q=ce.call(M,Array.prototype.concat),J=ce.call(L,Array.prototype.splice),K=ce.call(M,String.prototype.replace),re=ce.call(M,String.prototype.slice),X=ce.call(M,RegExp.prototype.exec),me=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,B=function(Y){var ee=re(Y,0,1),ae=re(Y,-1);if(ee==="%"&&ae!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(ae==="%"&&ee!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ie=[];return K(Y,me,function(H,be,Te,Z){ie[ie.length]=Te?K(Z,G,"$1"):be||H}),ie},z=function(Y,ee){var ae=Y,ie;if(se(W,ae)&&(ie=W[ae],ae="%"+ie[0]+"%"),se(O,ae)){var H=O[ae];if(H===C&&(H=U(ae)),typeof H>"u"&&!ee)throw new a("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:ie,name:ae,value:H}}throw new o("intrinsic "+Y+" does not exist!")};return Q8=function(Y,ee){if(typeof Y!="string"||Y.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ee!="boolean")throw new a('"allowMissing" argument must be a boolean');if(X(/^%?[^%]*%?$/,Y)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ae=B(Y),ie=ae.length>0?ae[0]:"",H=z("%"+ie+"%",ee),be=H.name,Te=H.value,Z=!1,oe=H.alias;oe&&(ie=oe[0],J(ae,Q([0,1],oe)));for(var te=1,ye=!0;te<ae.length;te+=1){var ke=ae[te],we=re(ke,0,1),Ae=re(ke,-1);if((we==='"'||we==="'"||we==="`"||Ae==='"'||Ae==="'"||Ae==="`")&&we!==Ae)throw new o("property names with quotes must have matching quotes");if((ke==="constructor"||!ye)&&(Z=!0),ie+="."+ke,be="%"+ie+"%",se(O,be))Te=O[be];else if(Te!=null){if(!(ke in Te)){if(!ee)throw new a("base intrinsic for "+Y+" exists, but the property is not available.");return}if(E&&te+1>=ae.length){var Re=E(Te,ke);ye=!!Re,ye&&"get"in Re&&!("originalValue"in Re.get)?Te=Re.get:Te=Te[ke]}else ye=se(Te,ke),Te=Te[ke];ye&&!Z&&(O[be]=Te)}}return Te},Q8}var eO,RQ;function Jk(){if(RQ)return eO;RQ=1;var t=wpe(),e=uH(),n=e([t("%String.prototype.indexOf%")]);return eO=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},eO}var tO,MQ;function aBe(){if(MQ)return tO;MQ=1;var t=mR()(),e=Jk(),n=e("Object.prototype.toString"),r=function(a){return t&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&"length"in a&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&"callee"in a&&n(a.callee)==="[object Function]"},s=(function(){return r(arguments)})();return r.isLegacyArguments=i,tO=s?r:i,tO}var nO,LQ;function lBe(){if(LQ)return nO;LQ=1;var t=Jk(),e=mR()(),n=bpe(),r=v2(),i;if(e){var s=t("RegExp.prototype.exec"),o={},a=function(){throw o},l={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(l[Symbol.toPrimitive]=a),i=function(f){if(!f||typeof f!="object")return!1;var h=r(f,"lastIndex"),m=h&&n(h,"value");if(!m)return!1;try{s(f,l)}catch(y){return y===o}}}else{var c=t("Object.prototype.toString"),u="[object RegExp]";i=function(f){return!f||typeof f!="object"&&typeof f!="function"?!1:c(f)===u}}return nO=i,nO}var rO,DQ;function cBe(){if(DQ)return rO;DQ=1;var t=Jk(),e=lBe(),n=t("RegExp.prototype.exec"),r=Yk();return rO=function(s){if(!e(s))throw new r("`regex` must be a RegExp");return function(a){return n(s,a)!==null}},rO}var iO,OQ;function uBe(){if(OQ)return iO;OQ=1;const t=(function*(){}).constructor;return iO=()=>t,iO}var sO,PQ;function dBe(){if(PQ)return sO;PQ=1;var t=Jk(),e=cBe(),n=e(/^\s*(?:function)?\*/),r=mR()(),i=dH(),s=t("Object.prototype.toString"),o=t("Function.prototype.toString"),a=uBe();return sO=function(c){if(typeof c!="function")return!1;if(n(o(c)))return!0;if(!r){var u=s(c);return u==="[object GeneratorFunction]"}if(!i)return!1;var d=a();return d&&i(c)===d.prototype},sO}var oO,FQ;function fBe(){if(FQ)return oO;FQ=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(E){E!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(A){try{var x=t.call(A);return i.test(x)}catch{return!1}},o=function(A){try{return s(A)?!1:(t.call(A),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",c="[object Function]",u="[object GeneratorFunction]",d="[object HTMLAllCollection]",f="[object HTML document.all class]",h="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,y=!(0 in[,]),w=function(){return!1};if(typeof document=="object"){var b=document.all;a.call(b)===a.call(document.all)&&(w=function(A){if((y||!A)&&(typeof A>"u"||typeof A=="object"))try{var x=a.call(A);return(x===d||x===f||x===h||x===l)&&A("")==null}catch{}return!1})}return oO=e?function(A){if(w(A))return!0;if(!A||typeof A!="function"&&typeof A!="object")return!1;try{e(A,null,n)}catch(x){if(x!==r)return!1}return!s(A)&&o(A)}:function(A){if(w(A))return!0;if(!A||typeof A!="function"&&typeof A!="object")return!1;if(m)return o(A);if(s(A))return!1;var x=a.call(A);return x!==c&&x!==u&&!/^\[object HTML/.test(x)?!1:o(A)},oO}var aO,BQ;function hBe(){if(BQ)return aO;BQ=1;var t=fBe(),e=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,c,u){for(var d=0,f=l.length;d<f;d++)n.call(l,d)&&(u==null?c(l[d],d,l):c.call(u,l[d],d,l))},i=function(l,c,u){for(var d=0,f=l.length;d<f;d++)u==null?c(l.charAt(d),d,l):c.call(u,l.charAt(d),d,l)},s=function(l,c,u){for(var d in l)n.call(l,d)&&(u==null?c(l[d],d,l):c.call(u,l[d],d,l))};function o(a){return e.call(a)==="[object Array]"}return aO=function(l,c,u){if(!t(c))throw new TypeError("iterator must be a function");var d;arguments.length>=3&&(d=u),o(l)?r(l,c,d):typeof l=="string"?i(l,c,d):s(l,c,d)},aO}var lO,jQ;function pBe(){return jQ||(jQ=1,lO=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),lO}var cO,$Q;function mBe(){if($Q)return cO;$Q=1;var t=pBe(),e=typeof globalThis>"u"?Il:globalThis;return cO=function(){for(var r=[],i=0;i<t.length;i++)typeof e[t[i]]=="function"&&(r[r.length]=t[i]);return r},cO}var uO={exports:{}},dO,zQ;function gBe(){if(zQ)return dO;zQ=1;var t=gR(),e=ppe(),n=Yk(),r=v2();return dO=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,d=arguments.length>6?arguments[6]:!1,f=!!r&&r(s,o);if(t)t(s,o,{configurable:u===null&&f?f.configurable:!u,enumerable:l===null&&f?f.enumerable:!l,value:a,writable:c===null&&f?f.writable:!c});else if(d||!l&&!c&&!u)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},dO}var fO,HQ;function yBe(){if(HQ)return fO;HQ=1;var t=gR(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},fO=e,fO}var hO,VQ;function bBe(){if(VQ)return hO;VQ=1;var t=wpe(),e=gBe(),n=yBe()(),r=v2(),i=Yk(),s=t("%Math.floor%");return hO=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],u=!0,d=!0;if("length"in a&&r){var f=r(a,"length");f&&!f.configurable&&(u=!1),f&&!f.writable&&(d=!1)}return(u||d||!c)&&(n?e(a,"length",l,!0,!0):e(a,"length",l)),a},hO}var pO,UQ;function wBe(){if(UQ)return pO;UQ=1;var t=Zk(),e=cH(),n=ype();return pO=function(){return n(t,e,arguments)},pO}var WQ;function vBe(){return WQ||(WQ=1,(function(t){var e=bBe(),n=gR(),r=uH(),i=wBe();t.exports=function(o){var a=r(arguments),l=o.length-(arguments.length-1);return e(a,1+(l>0?l:0),!0)},n?n(t.exports,"apply",{value:i}):t.exports.apply=i})(uO)),uO.exports}var mO,qQ;function vpe(){if(qQ)return mO;qQ=1;var t=hBe(),e=mBe(),n=vBe(),r=Jk(),i=v2(),s=dH(),o=r("Object.prototype.toString"),a=mR()(),l=typeof globalThis>"u"?Il:globalThis,c=e(),u=r("String.prototype.slice"),d=r("Array.prototype.indexOf",!0)||function(w,b){for(var E=0;E<w.length;E+=1)if(w[E]===b)return E;return-1},f={__proto__:null};a&&i&&s?t(c,function(y){var w=new l[y];if(Symbol.toStringTag in w&&s){var b=s(w),E=i(b,Symbol.toStringTag);if(!E&&b){var A=s(b);E=i(A,Symbol.toStringTag)}f["$"+y]=n(E.get)}}):t(c,function(y){var w=new l[y],b=w.slice||w.set;b&&(f["$"+y]=n(b))});var h=function(w){var b=!1;return t(f,function(E,A){if(!b)try{"$"+E(w)===A&&(b=u(A,1))}catch{}}),b},m=function(w){var b=!1;return t(f,function(E,A){if(!b)try{E(w),b=u(A,1)}catch{}}),b};return mO=function(w){if(!w||typeof w!="object")return!1;if(!a){var b=u(o(w),8,-1);return d(c,b)>-1?b:b!=="Object"?!1:m(w)}return i?h(w):null},mO}var gO,GQ;function xBe(){if(GQ)return gO;GQ=1;var t=vpe();return gO=function(n){return!!t(n)},gO}var KQ;function EBe(){return KQ||(KQ=1,(function(t){var e=aBe(),n=dBe(),r=vpe(),i=xBe();function s(te){return te.call.bind(te)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),c=s(Number.prototype.valueOf),u=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(o)var f=s(BigInt.prototype.valueOf);if(a)var h=s(Symbol.prototype.valueOf);function m(te,ye){if(typeof te!="object")return!1;try{return ye(te),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=i;function y(te){return typeof Promise<"u"&&te instanceof Promise||te!==null&&typeof te=="object"&&typeof te.then=="function"&&typeof te.catch=="function"}t.isPromise=y;function w(te){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(te):i(te)||re(te)}t.isArrayBufferView=w;function b(te){return r(te)==="Uint8Array"}t.isUint8Array=b;function E(te){return r(te)==="Uint8ClampedArray"}t.isUint8ClampedArray=E;function A(te){return r(te)==="Uint16Array"}t.isUint16Array=A;function x(te){return r(te)==="Uint32Array"}t.isUint32Array=x;function T(te){return r(te)==="Int8Array"}t.isInt8Array=T;function R(te){return r(te)==="Int16Array"}t.isInt16Array=R;function k(te){return r(te)==="Int32Array"}t.isInt32Array=k;function _(te){return r(te)==="Float32Array"}t.isFloat32Array=_;function N(te){return r(te)==="Float64Array"}t.isFloat64Array=N;function L(te){return r(te)==="BigInt64Array"}t.isBigInt64Array=L;function M(te){return r(te)==="BigUint64Array"}t.isBigUint64Array=M;function C(te){return l(te)==="[object Map]"}C.working=typeof Map<"u"&&C(new Map);function D(te){return typeof Map>"u"?!1:C.working?C(te):te instanceof Map}t.isMap=D;function O(te){return l(te)==="[object Set]"}O.working=typeof Set<"u"&&O(new Set);function $(te){return typeof Set>"u"?!1:O.working?O(te):te instanceof Set}t.isSet=$;function U(te){return l(te)==="[object WeakMap]"}U.working=typeof WeakMap<"u"&&U(new WeakMap);function W(te){return typeof WeakMap>"u"?!1:U.working?U(te):te instanceof WeakMap}t.isWeakMap=W;function ce(te){return l(te)==="[object WeakSet]"}ce.working=typeof WeakSet<"u"&&ce(new WeakSet);function se(te){return ce(te)}t.isWeakSet=se;function Q(te){return l(te)==="[object ArrayBuffer]"}Q.working=typeof ArrayBuffer<"u"&&Q(new ArrayBuffer);function J(te){return typeof ArrayBuffer>"u"?!1:Q.working?Q(te):te instanceof ArrayBuffer}t.isArrayBuffer=J;function K(te){return l(te)==="[object DataView]"}K.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&K(new DataView(new ArrayBuffer(1),0,1));function re(te){return typeof DataView>"u"?!1:K.working?K(te):te instanceof DataView}t.isDataView=re;var X=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function me(te){return l(te)==="[object SharedArrayBuffer]"}function G(te){return typeof X>"u"?!1:(typeof me.working>"u"&&(me.working=me(new X)),me.working?me(te):te instanceof X)}t.isSharedArrayBuffer=G;function B(te){return l(te)==="[object AsyncFunction]"}t.isAsyncFunction=B;function z(te){return l(te)==="[object Map Iterator]"}t.isMapIterator=z;function de(te){return l(te)==="[object Set Iterator]"}t.isSetIterator=de;function Y(te){return l(te)==="[object Generator]"}t.isGeneratorObject=Y;function ee(te){return l(te)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ee;function ae(te){return m(te,c)}t.isNumberObject=ae;function ie(te){return m(te,u)}t.isStringObject=ie;function H(te){return m(te,d)}t.isBooleanObject=H;function be(te){return o&&m(te,f)}t.isBigIntObject=be;function Te(te){return a&&m(te,h)}t.isSymbolObject=Te;function Z(te){return ae(te)||ie(te)||H(te)||be(te)||Te(te)}t.isBoxedPrimitive=Z;function oe(te){return typeof Uint8Array<"u"&&(J(te)||G(te))}t.isAnyArrayBuffer=oe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(te){Object.defineProperty(t,te,{enumerable:!1,value:function(){throw new Error(te+" is not supported in userland")}})})})(b8)),b8}var yO,XQ;function SBe(){return XQ||(XQ=1,yO=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),yO}var YQ;function xpe(){return YQ||(YQ=1,(function(t){var e=Object.getOwnPropertyDescriptors||function(re){for(var X=Object.keys(re),me={},G=0;G<X.length;G++)me[X[G]]=Object.getOwnPropertyDescriptor(re,X[G]);return me},n=/%[sdj%]/g;t.format=function(K){if(!T(K)){for(var re=[],X=0;X<arguments.length;X++)re.push(o(arguments[X]));return re.join(" ")}for(var X=1,me=arguments,G=me.length,B=String(K).replace(n,function(de){if(de==="%%")return"%";if(X>=G)return de;switch(de){case"%s":return String(me[X++]);case"%d":return Number(me[X++]);case"%j":try{return JSON.stringify(me[X++])}catch{return"[Circular]"}default:return de}}),z=me[X];X<G;z=me[++X])E(z)||!N(z)?B+=" "+z:B+=" "+o(z);return B},t.deprecate=function(K,re){if(typeof _e<"u"&&_e.noDeprecation===!0)return K;if(typeof _e>"u")return function(){return t.deprecate(K,re).apply(this,arguments)};var X=!1;function me(){if(!X){if(_e.throwDeprecation)throw new Error(re);_e.traceDeprecation?console.trace(re):console.error(re),X=!0}return K.apply(this,arguments)}return me};var r={},i=/^$/;if(_e.env.NODE_DEBUG){var s=_e.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}t.debuglog=function(K){if(K=K.toUpperCase(),!r[K])if(i.test(K)){var re=_e.pid;r[K]=function(){var X=t.format.apply(t,arguments);console.error("%s %d: %s",K,re,X)}}else r[K]=function(){};return r[K]};function o(K,re){var X={seen:[],stylize:l};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),b(re)?X.showHidden=re:re&&t._extend(X,re),k(X.showHidden)&&(X.showHidden=!1),k(X.depth)&&(X.depth=2),k(X.colors)&&(X.colors=!1),k(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=a),u(X,K,X.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(K,re){var X=o.styles[re];return X?"\x1B["+o.colors[X][0]+"m"+K+"\x1B["+o.colors[X][1]+"m":K}function l(K,re){return K}function c(K){var re={};return K.forEach(function(X,me){re[X]=!0}),re}function u(K,re,X){if(K.customInspect&&re&&C(re.inspect)&&re.inspect!==t.inspect&&!(re.constructor&&re.constructor.prototype===re)){var me=re.inspect(X,K);return T(me)||(me=u(K,me,X)),me}var G=d(K,re);if(G)return G;var B=Object.keys(re),z=c(B);if(K.showHidden&&(B=Object.getOwnPropertyNames(re)),M(re)&&(B.indexOf("message")>=0||B.indexOf("description")>=0))return f(re);if(B.length===0){if(C(re)){var de=re.name?": "+re.name:"";return K.stylize("[Function"+de+"]","special")}if(_(re))return K.stylize(RegExp.prototype.toString.call(re),"regexp");if(L(re))return K.stylize(Date.prototype.toString.call(re),"date");if(M(re))return f(re)}var Y="",ee=!1,ae=["{","}"];if(w(re)&&(ee=!0,ae=["[","]"]),C(re)){var ie=re.name?": "+re.name:"";Y=" [Function"+ie+"]"}if(_(re)&&(Y=" "+RegExp.prototype.toString.call(re)),L(re)&&(Y=" "+Date.prototype.toUTCString.call(re)),M(re)&&(Y=" "+f(re)),B.length===0&&(!ee||re.length==0))return ae[0]+Y+ae[1];if(X<0)return _(re)?K.stylize(RegExp.prototype.toString.call(re),"regexp"):K.stylize("[Object]","special");K.seen.push(re);var H;return ee?H=h(K,re,X,z,B):H=B.map(function(be){return m(K,re,X,z,be,ee)}),K.seen.pop(),y(H,Y,ae)}function d(K,re){if(k(re))return K.stylize("undefined","undefined");if(T(re)){var X="'"+JSON.stringify(re).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return K.stylize(X,"string")}if(x(re))return K.stylize(""+re,"number");if(b(re))return K.stylize(""+re,"boolean");if(E(re))return K.stylize("null","null")}function f(K){return"["+Error.prototype.toString.call(K)+"]"}function h(K,re,X,me,G){for(var B=[],z=0,de=re.length;z<de;++z)ce(re,String(z))?B.push(m(K,re,X,me,String(z),!0)):B.push("");return G.forEach(function(Y){Y.match(/^\d+$/)||B.push(m(K,re,X,me,Y,!0))}),B}function m(K,re,X,me,G,B){var z,de,Y;if(Y=Object.getOwnPropertyDescriptor(re,G)||{value:re[G]},Y.get?Y.set?de=K.stylize("[Getter/Setter]","special"):de=K.stylize("[Getter]","special"):Y.set&&(de=K.stylize("[Setter]","special")),ce(me,G)||(z="["+G+"]"),de||(K.seen.indexOf(Y.value)<0?(E(X)?de=u(K,Y.value,null):de=u(K,Y.value,X-1),de.indexOf(`
`)>-1&&(B?de=de.split(`
`).map(function(ee){return"  "+ee}).join(`
`).slice(2):de=`
`+de.split(`
`).map(function(ee){return"   "+ee}).join(`
`))):de=K.stylize("[Circular]","special")),k(z)){if(B&&G.match(/^\d+$/))return de;z=JSON.stringify(""+G),z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=K.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=K.stylize(z,"string"))}return z+": "+de}function y(K,re,X){var me=K.reduce(function(G,B){return B.indexOf(`
`)>=0,G+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?X[0]+(re===""?"":re+`
 `)+" "+K.join(`,
  `)+" "+X[1]:X[0]+re+" "+K.join(", ")+" "+X[1]}t.types=EBe();function w(K){return Array.isArray(K)}t.isArray=w;function b(K){return typeof K=="boolean"}t.isBoolean=b;function E(K){return K===null}t.isNull=E;function A(K){return K==null}t.isNullOrUndefined=A;function x(K){return typeof K=="number"}t.isNumber=x;function T(K){return typeof K=="string"}t.isString=T;function R(K){return typeof K=="symbol"}t.isSymbol=R;function k(K){return K===void 0}t.isUndefined=k;function _(K){return N(K)&&O(K)==="[object RegExp]"}t.isRegExp=_,t.types.isRegExp=_;function N(K){return typeof K=="object"&&K!==null}t.isObject=N;function L(K){return N(K)&&O(K)==="[object Date]"}t.isDate=L,t.types.isDate=L;function M(K){return N(K)&&(O(K)==="[object Error]"||K instanceof Error)}t.isError=M,t.types.isNativeError=M;function C(K){return typeof K=="function"}t.isFunction=C;function D(K){return K===null||typeof K=="boolean"||typeof K=="number"||typeof K=="string"||typeof K=="symbol"||typeof K>"u"}t.isPrimitive=D,t.isBuffer=SBe();function O(K){return Object.prototype.toString.call(K)}function $(K){return K<10?"0"+K.toString(10):K.toString(10)}var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function W(){var K=new Date,re=[$(K.getHours()),$(K.getMinutes()),$(K.getSeconds())].join(":");return[K.getDate(),U[K.getMonth()],re].join(" ")}t.log=function(){console.log("%s - %s",W(),t.format.apply(t,arguments))},t.inherits=uw(),t._extend=function(K,re){if(!re||!N(re))return K;for(var X=Object.keys(re),me=X.length;me--;)K[X[me]]=re[X[me]];return K};function ce(K,re){return Object.prototype.hasOwnProperty.call(K,re)}var se=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(re){if(typeof re!="function")throw new TypeError('The "original" argument must be of type Function');if(se&&re[se]){var X=re[se];if(typeof X!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(X,se,{value:X,enumerable:!1,writable:!1,configurable:!0}),X}function X(){for(var me,G,B=new Promise(function(Y,ee){me=Y,G=ee}),z=[],de=0;de<arguments.length;de++)z.push(arguments[de]);z.push(function(Y,ee){Y?G(Y):me(ee)});try{re.apply(this,z)}catch(Y){G(Y)}return B}return Object.setPrototypeOf(X,Object.getPrototypeOf(re)),se&&Object.defineProperty(X,se,{value:X,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(X,e(re))},t.promisify.custom=se;function Q(K,re){if(!K){var X=new Error("Promise was rejected with a falsy value");X.reason=K,K=X}return re(K)}function J(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');function re(){for(var X=[],me=0;me<arguments.length;me++)X.push(arguments[me]);var G=X.pop();if(typeof G!="function")throw new TypeError("The last argument must be of type Function");var B=this,z=function(){return G.apply(B,arguments)};K.apply(this,X).then(function(de){_e.nextTick(z.bind(null,null,de))},function(de){_e.nextTick(Q.bind(null,de,z))})}return Object.setPrototypeOf(re,Object.getPrototypeOf(K)),Object.defineProperties(re,e(K)),re}t.callbackify=J})(y8)),y8}var bO,ZQ;function ABe(){if(ZQ)return bO;ZQ=1;function t(m,y){var w=Object.keys(m);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(m);y&&(b=b.filter(function(E){return Object.getOwnPropertyDescriptor(m,E).enumerable})),w.push.apply(w,b)}return w}function e(m){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?t(Object(w),!0).forEach(function(b){n(m,b,w[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(w)):t(Object(w)).forEach(function(b){Object.defineProperty(m,b,Object.getOwnPropertyDescriptor(w,b))})}return m}function n(m,y,w){return y=o(y),y in m?Object.defineProperty(m,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[y]=w,m}function r(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function i(m,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,o(b.key),b)}}function s(m,y,w){return y&&i(m.prototype,y),Object.defineProperty(m,"prototype",{writable:!1}),m}function o(m){var y=a(m,"string");return typeof y=="symbol"?y:String(y)}function a(m,y){if(typeof m!="object"||m===null)return m;var w=m[Symbol.toPrimitive];if(w!==void 0){var b=w.call(m,y);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}var l=pR(),c=l.Buffer,u=xpe(),d=u.inspect,f=d&&d.custom||"inspect";function h(m,y,w){c.prototype.copy.call(m,y,w)}return bO=(function(){function m(){r(this,m),this.head=null,this.tail=null,this.length=0}return s(m,[{key:"push",value:function(w){var b={data:w,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(w){var b={data:w,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var b=this.head,E=""+b.data;b=b.next;)E+=w+b.data;return E}},{key:"concat",value:function(w){if(this.length===0)return c.alloc(0);for(var b=c.allocUnsafe(w>>>0),E=this.head,A=0;E;)h(E.data,b,A),A+=E.data.length,E=E.next;return b}},{key:"consume",value:function(w,b){var E;return w<this.head.data.length?(E=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?E=this.shift():E=b?this._getString(w):this._getBuffer(w),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var b=this.head,E=1,A=b.data;for(w-=A.length;b=b.next;){var x=b.data,T=w>x.length?x.length:w;if(T===x.length?A+=x:A+=x.slice(0,w),w-=T,w===0){T===x.length?(++E,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=x.slice(T));break}++E}return this.length-=E,A}},{key:"_getBuffer",value:function(w){var b=c.allocUnsafe(w),E=this.head,A=1;for(E.data.copy(b),w-=E.data.length;E=E.next;){var x=E.data,T=w>x.length?x.length:w;if(x.copy(b,b.length-w,0,T),w-=T,w===0){T===x.length?(++A,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=x.slice(T));break}++A}return this.length-=A,b}},{key:f,value:function(w,b){return d(this,e(e({},b),{},{depth:0,customInspect:!1}))}}]),m})(),bO}var wO,JQ;function Epe(){if(JQ)return wO;JQ=1;function t(o,a){var l=this,c=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return c||u?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_e.nextTick(i,this,o)):_e.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(d){!a&&d?l._writableState?l._writableState.errorEmitted?_e.nextTick(n,l):(l._writableState.errorEmitted=!0,_e.nextTick(e,l,d)):_e.nextTick(e,l,d):a?(_e.nextTick(n,l),a(d)):_e.nextTick(n,l)}),this)}function e(o,a){i(o,a),n(o)}function n(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var l=o._readableState,c=o._writableState;l&&l.autoDestroy||c&&c.autoDestroy?o.destroy(a):o.emit("error",a)}return wO={destroy:t,undestroy:r,errorOrDestroy:s},wO}var vO={},QQ;function x2(){if(QQ)return vO;QQ=1;function t(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function n(a,l,c){c||(c=Error);function u(f,h,m){return typeof l=="string"?l:l(f,h,m)}var d=(function(f){t(h,f);function h(m,y,w){return f.call(this,u(m,y,w))||this}return h})(c);d.prototype.name=c.name,d.prototype.code=a,e[a]=d}function r(a,l){if(Array.isArray(a)){var c=a.length;return a=a.map(function(u){return String(u)}),c>2?"one of ".concat(l," ").concat(a.slice(0,c-1).join(", "),", or ")+a[c-1]:c===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,c){return a.substr(0,l.length)===l}function s(a,l,c){return(c===void 0||c>a.length)&&(c=a.length),a.substring(c-l.length,c)===l}function o(a,l,c){return typeof c!="number"&&(c=0),c+l.length>a.length?!1:a.indexOf(l,c)!==-1}return n("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(a,l,c){var u;typeof l=="string"&&i(l,"not ")?(u="must not be",l=l.replace(/^not /,"")):u="must be";var d;if(s(a," argument"))d="The ".concat(a," ").concat(u," ").concat(r(l,"type"));else{var f=o(a,".")?"property":"argument";d='The "'.concat(a,'" ').concat(f," ").concat(u," ").concat(r(l,"type"))}return d+=". Received type ".concat(typeof c),d},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),vO.codes=e,vO}var xO,eee;function Spe(){if(eee)return xO;eee=1;var t=x2().codes.ERR_INVALID_OPT_VALUE;function e(r,i,s){return r.highWaterMark!=null?r.highWaterMark:i?r[s]:null}function n(r,i,s,o){var a=e(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?s:"highWaterMark";throw new t(l,a)}return Math.floor(a)}return r.objectMode?16:16*1024}return xO={getHighWaterMark:n},xO}var EO,tee;function TBe(){if(tee)return EO;tee=1,EO=t;function t(n,r){if(e("noDeprecation"))return n;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return n.apply(this,arguments)}return s}function e(n){try{if(!Il.localStorage)return!1}catch{return!1}var r=Il.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}return EO}var SO,nee;function Ape(){if(nee)return SO;nee=1,SO=_;function t(G){var B=this;this.next=null,this.entry=null,this.finish=function(){me(B,G)}}var e;_.WritableState=R;var n={deprecate:TBe()},r=dpe(),i=pR().Buffer,s=(typeof Il<"u"?Il:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(G){return i.from(G)}function a(G){return i.isBuffer(G)||G instanceof s}var l=Epe(),c=Spe(),u=c.getHighWaterMark,d=x2().codes,f=d.ERR_INVALID_ARG_TYPE,h=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,w=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,E=d.ERR_STREAM_WRITE_AFTER_END,A=d.ERR_UNKNOWN_ENCODING,x=l.errorOrDestroy;uw()(_,r);function T(){}function R(G,B,z){e=e||Sx(),G=G||{},typeof z!="boolean"&&(z=B instanceof e),this.objectMode=!!G.objectMode,z&&(this.objectMode=this.objectMode||!!G.writableObjectMode),this.highWaterMark=u(this,G,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var de=G.decodeStrings===!1;this.decodeStrings=!de,this.defaultEncoding=G.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){U(B,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}R.prototype.getBuffer=function(){for(var B=this.bufferedRequest,z=[];B;)z.push(B),B=B.next;return z},(function(){try{Object.defineProperty(R.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(B){return k.call(this,B)?!0:this!==_?!1:B&&B._writableState instanceof R}})):k=function(B){return B instanceof this};function _(G){e=e||Sx();var B=this instanceof e;if(!B&&!k.call(_,this))return new _(G);this._writableState=new R(G,this,B),this.writable=!0,G&&(typeof G.write=="function"&&(this._write=G.write),typeof G.writev=="function"&&(this._writev=G.writev),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.final=="function"&&(this._final=G.final)),r.call(this)}_.prototype.pipe=function(){x(this,new y)};function N(G,B){var z=new E;x(G,z),_e.nextTick(B,z)}function L(G,B,z,de){var Y;return z===null?Y=new b:typeof z!="string"&&!B.objectMode&&(Y=new f("chunk",["string","Buffer"],z)),Y?(x(G,Y),_e.nextTick(de,Y),!1):!0}_.prototype.write=function(G,B,z){var de=this._writableState,Y=!1,ee=!de.objectMode&&a(G);return ee&&!i.isBuffer(G)&&(G=o(G)),typeof B=="function"&&(z=B,B=null),ee?B="buffer":B||(B=de.defaultEncoding),typeof z!="function"&&(z=T),de.ending?N(this,z):(ee||L(this,de,G,z))&&(de.pendingcb++,Y=C(this,de,ee,G,B,z)),Y},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var G=this._writableState;G.corked&&(G.corked--,!G.writing&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&se(this,G))},_.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new A(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function M(G,B,z){return!G.objectMode&&G.decodeStrings!==!1&&typeof B=="string"&&(B=i.from(B,z)),B}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(G,B,z,de,Y,ee){if(!z){var ae=M(B,de,Y);de!==ae&&(z=!0,Y="buffer",de=ae)}var ie=B.objectMode?1:de.length;B.length+=ie;var H=B.length<B.highWaterMark;if(H||(B.needDrain=!0),B.writing||B.corked){var be=B.lastBufferedRequest;B.lastBufferedRequest={chunk:de,encoding:Y,isBuf:z,callback:ee,next:null},be?be.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else D(G,B,!1,ie,de,Y,ee);return H}function D(G,B,z,de,Y,ee,ae){B.writelen=de,B.writecb=ae,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new w("write")):z?G._writev(Y,B.onwrite):G._write(Y,ee,B.onwrite),B.sync=!1}function O(G,B,z,de,Y){--B.pendingcb,z?(_e.nextTick(Y,de),_e.nextTick(re,G,B),G._writableState.errorEmitted=!0,x(G,de)):(Y(de),G._writableState.errorEmitted=!0,x(G,de),re(G,B))}function $(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}function U(G,B){var z=G._writableState,de=z.sync,Y=z.writecb;if(typeof Y!="function")throw new m;if($(z),B)O(G,z,de,B,Y);else{var ee=Q(z)||G.destroyed;!ee&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&se(G,z),de?_e.nextTick(W,G,z,ee,Y):W(G,z,ee,Y)}}function W(G,B,z,de){z||ce(G,B),B.pendingcb--,de(),re(G,B)}function ce(G,B){B.length===0&&B.needDrain&&(B.needDrain=!1,G.emit("drain"))}function se(G,B){B.bufferProcessing=!0;var z=B.bufferedRequest;if(G._writev&&z&&z.next){var de=B.bufferedRequestCount,Y=new Array(de),ee=B.corkedRequestsFree;ee.entry=z;for(var ae=0,ie=!0;z;)Y[ae]=z,z.isBuf||(ie=!1),z=z.next,ae+=1;Y.allBuffers=ie,D(G,B,!0,B.length,Y,"",ee.finish),B.pendingcb++,B.lastBufferedRequest=null,ee.next?(B.corkedRequestsFree=ee.next,ee.next=null):B.corkedRequestsFree=new t(B),B.bufferedRequestCount=0}else{for(;z;){var H=z.chunk,be=z.encoding,Te=z.callback,Z=B.objectMode?1:H.length;if(D(G,B,!1,Z,H,be,Te),z=z.next,B.bufferedRequestCount--,B.writing)break}z===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=z,B.bufferProcessing=!1}_.prototype._write=function(G,B,z){z(new h("_write()"))},_.prototype._writev=null,_.prototype.end=function(G,B,z){var de=this._writableState;return typeof G=="function"?(z=G,G=null,B=null):typeof B=="function"&&(z=B,B=null),G!=null&&this.write(G,B),de.corked&&(de.corked=1,this.uncork()),de.ending||X(this,de,z),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Q(G){return G.ending&&G.length===0&&G.bufferedRequest===null&&!G.finished&&!G.writing}function J(G,B){G._final(function(z){B.pendingcb--,z&&x(G,z),B.prefinished=!0,G.emit("prefinish"),re(G,B)})}function K(G,B){!B.prefinished&&!B.finalCalled&&(typeof G._final=="function"&&!B.destroyed?(B.pendingcb++,B.finalCalled=!0,_e.nextTick(J,G,B)):(B.prefinished=!0,G.emit("prefinish")))}function re(G,B){var z=Q(B);if(z&&(K(G,B),B.pendingcb===0&&(B.finished=!0,G.emit("finish"),B.autoDestroy))){var de=G._readableState;(!de||de.autoDestroy&&de.endEmitted)&&G.destroy()}return z}function X(G,B,z){B.ending=!0,re(G,B),z&&(B.finished?_e.nextTick(z):G.once("finish",z)),B.ended=!0,G.writable=!1}function me(G,B,z){var de=G.entry;for(G.entry=null;de;){var Y=de.callback;B.pendingcb--,Y(z),de=de.next}B.corkedRequestsFree.next=G}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(G,B){B(G)},SO}var AO,ree;function Sx(){if(ree)return AO;ree=1;var t=Object.keys||function(c){var u=[];for(var d in c)u.push(d);return u};AO=o;var e=Tpe(),n=Ape();uw()(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),n.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||_e.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),AO}var TO={},f5={exports:{}},iee;function kBe(){return iee||(iee=1,(function(t,e){var n=pR(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(f5,f5.exports)),f5.exports}var see;function H7(){if(see)return TO;see=1;var t=kBe().Buffer,e=t.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(b){if(!b)return"utf8";for(var E;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(E)return;b=(""+b).toLowerCase(),E=!0}}function r(b){var E=n(b);if(typeof E!="string"&&(t.isEncoding===e||!e(b)))throw new Error("Unknown encoding: "+b);return E||b}TO.StringDecoder=i;function i(b){this.encoding=r(b);var E;switch(this.encoding){case"utf16le":this.text=d,this.end=f,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=h,this.end=m,E=3;break;default:this.write=y,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(E)}i.prototype.write=function(b){if(b.length===0)return"";var E,A;if(this.lastNeed){if(E=this.fillLast(b),E===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<b.length?E?E+this.text(b,A):this.text(b,A):E||""},i.prototype.end=u,i.prototype.text=c,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function s(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function o(b,E,A){var x=E.length-1;if(x<A)return 0;var T=s(E[x]);return T>=0?(T>0&&(b.lastNeed=T-1),T):--x<A||T===-2?0:(T=s(E[x]),T>=0?(T>0&&(b.lastNeed=T-2),T):--x<A||T===-2?0:(T=s(E[x]),T>=0?(T>0&&(T===2?T=0:b.lastNeed=T-3),T):0))}function a(b,E,A){if((E[0]&192)!==128)return b.lastNeed=0,"";if(b.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return b.lastNeed=1,"";if(b.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return b.lastNeed=2,""}}function l(b){var E=this.lastTotal-this.lastNeed,A=a(this,b);if(A!==void 0)return A;if(this.lastNeed<=b.length)return b.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,E,0,b.length),this.lastNeed-=b.length}function c(b,E){var A=o(this,b,E);if(!this.lastNeed)return b.toString("utf8",E);this.lastTotal=A;var x=b.length-(A-this.lastNeed);return b.copy(this.lastChar,0,x),b.toString("utf8",E,x)}function u(b){var E=b&&b.length?this.write(b):"";return this.lastNeed?E+"":E}function d(b,E){if((b.length-E)%2===0){var A=b.toString("utf16le",E);if(A){var x=A.charCodeAt(A.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",E,b.length-1)}function f(b){var E=b&&b.length?this.write(b):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,A)}return E}function h(b,E){var A=(b.length-E)%3;return A===0?b.toString("base64",E):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",E,b.length-A))}function m(b){var E=b&&b.length?this.write(b):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function y(b){return b.toString(this.encoding)}function w(b){return b&&b.length?this.write(b):""}return TO}var kO,oee;function fH(){if(oee)return kO;oee=1;var t=x2().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];s.apply(this,l)}}}function n(){}function r(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=e(a||n);var l=o.readable||o.readable!==!1&&s.readable,c=o.writable||o.writable!==!1&&s.writable,u=function(){s.writable||f()},d=s._writableState&&s._writableState.finished,f=function(){c=!1,d=!0,l||a.call(s)},h=s._readableState&&s._readableState.endEmitted,m=function(){l=!1,h=!0,c||a.call(s)},y=function(A){a.call(s,A)},w=function(){var A;if(l&&!h)return(!s._readableState||!s._readableState.ended)&&(A=new t),a.call(s,A);if(c&&!d)return(!s._writableState||!s._writableState.ended)&&(A=new t),a.call(s,A)},b=function(){s.req.on("finish",f)};return r(s)?(s.on("complete",f),s.on("abort",w),s.req?b():s.on("request",b)):c&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",m),s.on("finish",f),o.error!==!1&&s.on("error",y),s.on("close",w),function(){s.removeListener("complete",f),s.removeListener("abort",w),s.removeListener("request",b),s.req&&s.req.removeListener("finish",f),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",f),s.removeListener("end",m),s.removeListener("error",y),s.removeListener("close",w)}}return kO=i,kO}var CO,aee;function CBe(){if(aee)return CO;aee=1;var t;function e(A,x,T){return x=n(x),x in A?Object.defineProperty(A,x,{value:T,enumerable:!0,configurable:!0,writable:!0}):A[x]=T,A}function n(A){var x=r(A,"string");return typeof x=="symbol"?x:String(x)}function r(A,x){if(typeof A!="object"||A===null)return A;var T=A[Symbol.toPrimitive];if(T!==void 0){var R=T.call(A,x);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(A)}var i=fH(),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function f(A,x){return{value:A,done:x}}function h(A){var x=A[s];if(x!==null){var T=A[d].read();T!==null&&(A[c]=null,A[s]=null,A[o]=null,x(f(T,!1)))}}function m(A){_e.nextTick(h,A)}function y(A,x){return function(T,R){A.then(function(){if(x[l]){T(f(void 0,!0));return}x[u](T,R)},R)}}var w=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((t={get stream(){return this[d]},next:function(){var x=this,T=this[a];if(T!==null)return Promise.reject(T);if(this[l])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(N,L){_e.nextTick(function(){x[a]?L(x[a]):N(f(void 0,!0))})});var R=this[c],k;if(R)k=new Promise(y(R,this));else{var _=this[d].read();if(_!==null)return Promise.resolve(f(_,!1));k=new Promise(this[u])}return this[c]=k,k}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var x=this;return new Promise(function(T,R){x[d].destroy(null,function(k){if(k){R(k);return}T(f(void 0,!0))})})}),t),w),E=function(x){var T,R=Object.create(b,(T={},e(T,d,{value:x,writable:!0}),e(T,s,{value:null,writable:!0}),e(T,o,{value:null,writable:!0}),e(T,a,{value:null,writable:!0}),e(T,l,{value:x._readableState.endEmitted,writable:!0}),e(T,u,{value:function(_,N){var L=R[d].read();L?(R[c]=null,R[s]=null,R[o]=null,_(f(L,!1))):(R[s]=_,R[o]=N)},writable:!0}),T));return R[c]=null,i(x,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=R[o];_!==null&&(R[c]=null,R[s]=null,R[o]=null,_(k)),R[a]=k;return}var N=R[s];N!==null&&(R[c]=null,R[s]=null,R[o]=null,N(f(void 0,!0))),R[l]=!0}),x.on("readable",m.bind(null,R)),R};return CO=E,CO}var _O,lee;function _Be(){return lee||(lee=1,_O=function(){throw new Error("Readable.from is not available in the browser")}),_O}var NO,cee;function Tpe(){if(cee)return NO;cee=1,NO=N;var t;N.ReadableState=_,aH().EventEmitter;var e=function(ae,ie){return ae.listeners(ie).length},n=dpe(),r=pR().Buffer,i=(typeof Il<"u"?Il:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(ee){return r.from(ee)}function o(ee){return r.isBuffer(ee)||ee instanceof i}var a=xpe(),l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var c=ABe(),u=Epe(),d=Spe(),f=d.getHighWaterMark,h=x2().codes,m=h.ERR_INVALID_ARG_TYPE,y=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,A,x;uw()(N,n);var T=u.errorOrDestroy,R=["error","close","destroy","pause","resume"];function k(ee,ae,ie){if(typeof ee.prependListener=="function")return ee.prependListener(ae,ie);!ee._events||!ee._events[ae]?ee.on(ae,ie):Array.isArray(ee._events[ae])?ee._events[ae].unshift(ie):ee._events[ae]=[ie,ee._events[ae]]}function _(ee,ae,ie){t=t||Sx(),ee=ee||{},typeof ie!="boolean"&&(ie=ae instanceof t),this.objectMode=!!ee.objectMode,ie&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=f(this,ee,"readableHighWaterMark",ie),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(E||(E=H7().StringDecoder),this.decoder=new E(ee.encoding),this.encoding=ee.encoding)}function N(ee){if(t=t||Sx(),!(this instanceof N))return new N(ee);var ae=this instanceof t;this._readableState=new _(ee,this,ae),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),n.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ae){this._readableState&&(this._readableState.destroyed=ae)}}),N.prototype.destroy=u.destroy,N.prototype._undestroy=u.undestroy,N.prototype._destroy=function(ee,ae){ae(ee)},N.prototype.push=function(ee,ae){var ie=this._readableState,H;return ie.objectMode?H=!0:typeof ee=="string"&&(ae=ae||ie.defaultEncoding,ae!==ie.encoding&&(ee=r.from(ee,ae),ae=""),H=!0),L(this,ee,ae,!1,H)},N.prototype.unshift=function(ee){return L(this,ee,null,!0,!1)};function L(ee,ae,ie,H,be){l("readableAddChunk",ae);var Te=ee._readableState;if(ae===null)Te.reading=!1,U(ee,Te);else{var Z;if(be||(Z=C(Te,ae)),Z)T(ee,Z);else if(Te.objectMode||ae&&ae.length>0)if(typeof ae!="string"&&!Te.objectMode&&Object.getPrototypeOf(ae)!==r.prototype&&(ae=s(ae)),H)Te.endEmitted?T(ee,new b):M(ee,Te,ae,!0);else if(Te.ended)T(ee,new y);else{if(Te.destroyed)return!1;Te.reading=!1,Te.decoder&&!ie?(ae=Te.decoder.write(ae),Te.objectMode||ae.length!==0?M(ee,Te,ae,!1):se(ee,Te)):M(ee,Te,ae,!1)}else H||(Te.reading=!1,se(ee,Te))}return!Te.ended&&(Te.length<Te.highWaterMark||Te.length===0)}function M(ee,ae,ie,H){ae.flowing&&ae.length===0&&!ae.sync?(ae.awaitDrain=0,ee.emit("data",ie)):(ae.length+=ae.objectMode?1:ie.length,H?ae.buffer.unshift(ie):ae.buffer.push(ie),ae.needReadable&&W(ee)),se(ee,ae)}function C(ee,ae){var ie;return!o(ae)&&typeof ae!="string"&&ae!==void 0&&!ee.objectMode&&(ie=new m("chunk",["string","Buffer","Uint8Array"],ae)),ie}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(ee){E||(E=H7().StringDecoder);var ae=new E(ee);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,H="";ie!==null;)H+=ae.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),H!==""&&this._readableState.buffer.push(H),this._readableState.length=H.length,this};var D=1073741824;function O(ee){return ee>=D?ee=D:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee}function $(ee,ae){return ee<=0||ae.length===0&&ae.ended?0:ae.objectMode?1:ee!==ee?ae.flowing&&ae.length?ae.buffer.head.data.length:ae.length:(ee>ae.highWaterMark&&(ae.highWaterMark=O(ee)),ee<=ae.length?ee:ae.ended?ae.length:(ae.needReadable=!0,0))}N.prototype.read=function(ee){l("read",ee),ee=parseInt(ee,10);var ae=this._readableState,ie=ee;if(ee!==0&&(ae.emittedReadable=!1),ee===0&&ae.needReadable&&((ae.highWaterMark!==0?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return l("read: emitReadable",ae.length,ae.ended),ae.length===0&&ae.ended?z(this):W(this),null;if(ee=$(ee,ae),ee===0&&ae.ended)return ae.length===0&&z(this),null;var H=ae.needReadable;l("need readable",H),(ae.length===0||ae.length-ee<ae.highWaterMark)&&(H=!0,l("length less than watermark",H)),ae.ended||ae.reading?(H=!1,l("reading or ended",H)):H&&(l("do read"),ae.reading=!0,ae.sync=!0,ae.length===0&&(ae.needReadable=!0),this._read(ae.highWaterMark),ae.sync=!1,ae.reading||(ee=$(ie,ae)));var be;return ee>0?be=B(ee,ae):be=null,be===null?(ae.needReadable=ae.length<=ae.highWaterMark,ee=0):(ae.length-=ee,ae.awaitDrain=0),ae.length===0&&(ae.ended||(ae.needReadable=!0),ie!==ee&&ae.ended&&z(this)),be!==null&&this.emit("data",be),be};function U(ee,ae){if(l("onEofChunk"),!ae.ended){if(ae.decoder){var ie=ae.decoder.end();ie&&ie.length&&(ae.buffer.push(ie),ae.length+=ae.objectMode?1:ie.length)}ae.ended=!0,ae.sync?W(ee):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,ce(ee)))}}function W(ee){var ae=ee._readableState;l("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(l("emitReadable",ae.flowing),ae.emittedReadable=!0,_e.nextTick(ce,ee))}function ce(ee){var ae=ee._readableState;l("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&(ae.length||ae.ended)&&(ee.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,G(ee)}function se(ee,ae){ae.readingMore||(ae.readingMore=!0,_e.nextTick(Q,ee,ae))}function Q(ee,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&ae.length===0);){var ie=ae.length;if(l("maybeReadMore read 0"),ee.read(0),ie===ae.length)break}ae.readingMore=!1}N.prototype._read=function(ee){T(this,new w("_read()"))},N.prototype.pipe=function(ee,ae){var ie=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=ee;break;case 1:H.pipes=[H.pipes,ee];break;default:H.pipes.push(ee);break}H.pipesCount+=1,l("pipe count=%d opts=%j",H.pipesCount,ae);var be=(!ae||ae.end!==!1)&&ee!==_e.stdout&&ee!==_e.stderr,Te=be?oe:Ce;H.endEmitted?_e.nextTick(Te):ie.once("end",Te),ee.on("unpipe",Z);function Z(Oe,Fe){l("onunpipe"),Oe===ie&&Fe&&Fe.hasUnpiped===!1&&(Fe.hasUnpiped=!0,ke())}function oe(){l("onend"),ee.end()}var te=J(ie);ee.on("drain",te);var ye=!1;function ke(){l("cleanup"),ee.removeListener("close",Re),ee.removeListener("finish",Pe),ee.removeListener("drain",te),ee.removeListener("error",Ae),ee.removeListener("unpipe",Z),ie.removeListener("end",oe),ie.removeListener("end",Ce),ie.removeListener("data",we),ye=!0,H.awaitDrain&&(!ee._writableState||ee._writableState.needDrain)&&te()}ie.on("data",we);function we(Oe){l("ondata");var Fe=ee.write(Oe);l("dest.write",Fe),Fe===!1&&((H.pipesCount===1&&H.pipes===ee||H.pipesCount>1&&Y(H.pipes,ee)!==-1)&&!ye&&(l("false write response, pause",H.awaitDrain),H.awaitDrain++),ie.pause())}function Ae(Oe){l("onerror",Oe),Ce(),ee.removeListener("error",Ae),e(ee,"error")===0&&T(ee,Oe)}k(ee,"error",Ae);function Re(){ee.removeListener("finish",Pe),Ce()}ee.once("close",Re);function Pe(){l("onfinish"),ee.removeListener("close",Re),Ce()}ee.once("finish",Pe);function Ce(){l("unpipe"),ie.unpipe(ee)}return ee.emit("pipe",ie),H.flowing||(l("pipe resume"),ie.resume()),ee};function J(ee){return function(){var ie=ee._readableState;l("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&e(ee,"data")&&(ie.flowing=!0,G(ee))}}N.prototype.unpipe=function(ee){var ae=this._readableState,ie={hasUnpiped:!1};if(ae.pipesCount===0)return this;if(ae.pipesCount===1)return ee&&ee!==ae.pipes?this:(ee||(ee=ae.pipes),ae.pipes=null,ae.pipesCount=0,ae.flowing=!1,ee&&ee.emit("unpipe",this,ie),this);if(!ee){var H=ae.pipes,be=ae.pipesCount;ae.pipes=null,ae.pipesCount=0,ae.flowing=!1;for(var Te=0;Te<be;Te++)H[Te].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=Y(ae.pipes,ee);return Z===-1?this:(ae.pipes.splice(Z,1),ae.pipesCount-=1,ae.pipesCount===1&&(ae.pipes=ae.pipes[0]),ee.emit("unpipe",this,ie),this)},N.prototype.on=function(ee,ae){var ie=n.prototype.on.call(this,ee,ae),H=this._readableState;return ee==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):ee==="readable"&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,l("on readable",H.length,H.reading),H.length?W(this):H.reading||_e.nextTick(re,this)),ie},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(ee,ae){var ie=n.prototype.removeListener.call(this,ee,ae);return ee==="readable"&&_e.nextTick(K,this),ie},N.prototype.removeAllListeners=function(ee){var ae=n.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&_e.nextTick(K,this),ae};function K(ee){var ae=ee._readableState;ae.readableListening=ee.listenerCount("readable")>0,ae.resumeScheduled&&!ae.paused?ae.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function re(ee){l("readable nexttick read 0"),ee.read(0)}N.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(l("resume"),ee.flowing=!ee.readableListening,X(this,ee)),ee.paused=!1,this};function X(ee,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,_e.nextTick(me,ee,ae))}function me(ee,ae){l("resume",ae.reading),ae.reading||ee.read(0),ae.resumeScheduled=!1,ee.emit("resume"),G(ee),ae.flowing&&!ae.reading&&ee.read(0)}N.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function G(ee){var ae=ee._readableState;for(l("flow",ae.flowing);ae.flowing&&ee.read()!==null;);}N.prototype.wrap=function(ee){var ae=this,ie=this._readableState,H=!1;ee.on("end",function(){if(l("wrapped end"),ie.decoder&&!ie.ended){var Z=ie.decoder.end();Z&&Z.length&&ae.push(Z)}ae.push(null)}),ee.on("data",function(Z){if(l("wrapped data"),ie.decoder&&(Z=ie.decoder.write(Z)),!(ie.objectMode&&Z==null)&&!(!ie.objectMode&&(!Z||!Z.length))){var oe=ae.push(Z);oe||(H=!0,ee.pause())}});for(var be in ee)this[be]===void 0&&typeof ee[be]=="function"&&(this[be]=(function(oe){return function(){return ee[oe].apply(ee,arguments)}})(be));for(var Te=0;Te<R.length;Te++)ee.on(R[Te],this.emit.bind(this,R[Te]));return this._read=function(Z){l("wrapped _read",Z),H&&(H=!1,ee.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return A===void 0&&(A=CBe()),A(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}}),N._fromList=B,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function B(ee,ae){if(ae.length===0)return null;var ie;return ae.objectMode?ie=ae.buffer.shift():!ee||ee>=ae.length?(ae.decoder?ie=ae.buffer.join(""):ae.buffer.length===1?ie=ae.buffer.first():ie=ae.buffer.concat(ae.length),ae.buffer.clear()):ie=ae.buffer.consume(ee,ae.decoder),ie}function z(ee){var ae=ee._readableState;l("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,_e.nextTick(de,ae,ee))}function de(ee,ae){if(l("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,ae.readable=!1,ae.emit("end"),ee.autoDestroy)){var ie=ae._writableState;(!ie||ie.autoDestroy&&ie.finished)&&ae.destroy()}}typeof Symbol=="function"&&(N.from=function(ee,ae){return x===void 0&&(x=_Be()),x(N,ee,ae)});function Y(ee,ae){for(var ie=0,H=ee.length;ie<H;ie++)if(ee[ie]===ae)return ie;return-1}return NO}var IO,uee;function kpe(){if(uee)return IO;uee=1,IO=a;var t=x2().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,r=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,s=Sx();uw()(a,s);function o(u,d){var f=this._transformState;f.transforming=!1;var h=f.writecb;if(h===null)return this.emit("error",new n);f.writechunk=null,f.writecb=null,d!=null&&this.push(d),h(u);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);s.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function l(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(d,f){c(u,d,f)}):c(this,null,null)}a.prototype.push=function(u,d){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,d)},a.prototype._transform=function(u,d,f){f(new e("_transform()"))},a.prototype._write=function(u,d,f){var h=this._transformState;if(h.writecb=f,h.writechunk=u,h.writeencoding=d,!h.transforming){var m=this._readableState;(h.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},a.prototype._read=function(u){var d=this._transformState;d.writechunk!==null&&!d.transforming?(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform)):d.needTransform=!0},a.prototype._destroy=function(u,d){s.prototype._destroy.call(this,u,function(f){d(f)})};function c(u,d,f){if(d)return u.emit("error",d);if(f!=null&&u.push(f),u._writableState.length)throw new i;if(u._transformState.transforming)throw new r;return u.push(null)}return IO}var RO,dee;function NBe(){if(dee)return RO;dee=1,RO=e;var t=kpe();uw()(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,r,i){i(null,n)},RO}var MO,fee;function IBe(){if(fee)return MO;fee=1;var t;function e(f){var h=!1;return function(){h||(h=!0,f.apply(void 0,arguments))}}var n=x2().codes,r=n.ERR_MISSING_ARGS,i=n.ERR_STREAM_DESTROYED;function s(f){if(f)throw f}function o(f){return f.setHeader&&typeof f.abort=="function"}function a(f,h,m,y){y=e(y);var w=!1;f.on("close",function(){w=!0}),t===void 0&&(t=fH()),t(f,{readable:h,writable:m},function(E){if(E)return y(E);w=!0,y()});var b=!1;return function(E){if(!w&&!b){if(b=!0,o(f))return f.abort();if(typeof f.destroy=="function")return f.destroy();y(E||new i("pipe"))}}}function l(f){f()}function c(f,h){return f.pipe(h)}function u(f){return!f.length||typeof f[f.length-1]!="function"?s:f.pop()}function d(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];var y=u(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new r("streams");var w,b=h.map(function(E,A){var x=A<h.length-1,T=A>0;return a(E,x,T,function(R){w||(w=R),R&&b.forEach(l),!x&&(b.forEach(l),y(w))})});return h.reduce(c)}return MO=d,MO}var LO,hee;function RBe(){if(hee)return LO;hee=1,LO=n;var t=aH().EventEmitter,e=uw();e(n,t),n.Readable=Tpe(),n.Writable=Ape(),n.Duplex=Sx(),n.Transform=kpe(),n.PassThrough=NBe(),n.finished=fH(),n.pipeline=IBe(),n.Stream=n;function n(){t.call(this)}return n.prototype.pipe=function(r,i){var s=this;function o(h){r.writable&&r.write(h)===!1&&s.pause&&s.pause()}s.on("data",o);function a(){s.readable&&s.resume&&s.resume()}r.on("drain",a),!r._isStdio&&(!i||i.end!==!1)&&(s.on("end",c),s.on("close",u));var l=!1;function c(){l||(l=!0,r.end())}function u(){l||(l=!0,typeof r.destroy=="function"&&r.destroy())}function d(h){if(f(),t.listenerCount(this,"error")===0)throw h}s.on("error",d),r.on("error",d);function f(){s.removeListener("data",o),r.removeListener("drain",a),s.removeListener("end",c),s.removeListener("close",u),s.removeListener("error",d),r.removeListener("error",d),s.removeListener("end",f),s.removeListener("close",f),r.removeListener("close",f)}return s.on("end",f),s.on("close",f),r.on("close",f),r.emit("pipe",s),r},LO}var pee;function MBe(){return pee||(pee=1,(function(t){(function(e){e.parser=function(B,z){return new r(B,z)},e.SAXParser=r,e.SAXStream=u,e.createStream=c,e.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(B,z){if(!(this instanceof r))return new r(B,z);var de=this;s(de),de.q=de.c="",de.bufferCheckPosition=e.MAX_BUFFER_LENGTH,de.opt=z||{},de.opt.lowercase=de.opt.lowercase||de.opt.lowercasetags,de.looseCase=de.opt.lowercase?"toLowerCase":"toUpperCase",de.tags=[],de.closed=de.closedRoot=de.sawRoot=!1,de.tag=de.error=null,de.strict=!!B,de.noscript=!!(B||de.opt.noscript),de.state=N.BEGIN,de.strictEntities=de.opt.strictEntities,de.ENTITIES=de.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),de.attribList=[],de.opt.xmlns&&(de.ns=Object.create(y)),de.opt.unquotedAttributeValues===void 0&&(de.opt.unquotedAttributeValues=!B),de.trackPosition=de.opt.position!==!1,de.trackPosition&&(de.position=de.line=de.column=0),M(de,"onready")}Object.create||(Object.create=function(B){function z(){}z.prototype=B;var de=new z;return de}),Object.keys||(Object.keys=function(B){var z=[];for(var de in B)B.hasOwnProperty(de)&&z.push(de);return z});function i(B){for(var z=Math.max(e.MAX_BUFFER_LENGTH,10),de=0,Y=0,ee=n.length;Y<ee;Y++){var ae=B[n[Y]].length;if(ae>z)switch(n[Y]){case"textNode":D(B);break;case"cdata":C(B,"oncdata",B.cdata),B.cdata="";break;case"script":C(B,"onscript",B.script),B.script="";break;default:$(B,"Max buffer length exceeded: "+n[Y])}de=Math.max(de,ae)}var ie=e.MAX_BUFFER_LENGTH-de;B.bufferCheckPosition=ie+B.position}function s(B){for(var z=0,de=n.length;z<de;z++)B[n[z]]=""}function o(B){D(B),B.cdata!==""&&(C(B,"oncdata",B.cdata),B.cdata=""),B.script!==""&&(C(B,"onscript",B.script),B.script="")}r.prototype={end:function(){U(this)},write:G,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=RBe().Stream}catch{a=function(){}}a||(a=function(){});var l=e.EVENTS.filter(function(B){return B!=="error"&&B!=="end"});function c(B,z){return new u(B,z)}function u(B,z){if(!(this instanceof u))return new u(B,z);a.apply(this),this._parser=new r(B,z),this.writable=!0,this.readable=!0;var de=this;this._parser.onend=function(){de.emit("end")},this._parser.onerror=function(Y){de.emit("error",Y),de._parser.error=null},this._decoder=null,l.forEach(function(Y){Object.defineProperty(de,"on"+Y,{get:function(){return de._parser["on"+Y]},set:function(ee){if(!ee)return de.removeAllListeners(Y),de._parser["on"+Y]=ee,ee;de.on(Y,ee)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(a.prototype,{constructor:{value:u}}),u.prototype.write=function(B){if(typeof ar=="function"&&typeof ar.isBuffer=="function"&&ar.isBuffer(B)){if(!this._decoder){var z=H7().StringDecoder;this._decoder=new z("utf8")}B=this._decoder.write(B)}return this._parser.write(B.toString()),this.emit("data",B),!0},u.prototype.end=function(B){return B&&B.length&&this.write(B),this._parser.end(),!0},u.prototype.on=function(B,z){var de=this;return!de._parser["on"+B]&&l.indexOf(B)!==-1&&(de._parser["on"+B]=function(){var Y=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Y.splice(0,0,B),de.emit.apply(de,Y)}),a.prototype.on.call(de,B,z)};var d="[CDATA[",f="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:m},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(B){return B===" "||B===`
`||B==="\r"||B==="	"}function T(B){return B==='"'||B==="'"}function R(B){return B===">"||x(B)}function k(B,z){return B.test(z)}function _(B,z){return!k(B,z)}var N=0;e.STATE={BEGIN:N++,BEGIN_WHITESPACE:N++,TEXT:N++,TEXT_ENTITY:N++,OPEN_WAKA:N++,SGML_DECL:N++,SGML_DECL_QUOTED:N++,DOCTYPE:N++,DOCTYPE_QUOTED:N++,DOCTYPE_DTD:N++,DOCTYPE_DTD_QUOTED:N++,COMMENT_STARTING:N++,COMMENT:N++,COMMENT_ENDING:N++,COMMENT_ENDED:N++,CDATA:N++,CDATA_ENDING:N++,CDATA_ENDING_2:N++,PROC_INST:N++,PROC_INST_BODY:N++,PROC_INST_ENDING:N++,OPEN_TAG:N++,OPEN_TAG_SLASH:N++,ATTRIB:N++,ATTRIB_NAME:N++,ATTRIB_NAME_SAW_WHITE:N++,ATTRIB_VALUE:N++,ATTRIB_VALUE_QUOTED:N++,ATTRIB_VALUE_CLOSED:N++,ATTRIB_VALUE_UNQUOTED:N++,ATTRIB_VALUE_ENTITY_Q:N++,ATTRIB_VALUE_ENTITY_U:N++,CLOSE_TAG:N++,CLOSE_TAG_SAW_WHITE:N++,SCRIPT:N++,SCRIPT_ENDING:N++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(B){var z=e.ENTITIES[B],de=typeof z=="number"?String.fromCharCode(z):z;e.ENTITIES[B]=de});for(var L in e.STATE)e.STATE[e.STATE[L]]=L;N=e.STATE;function M(B,z,de){B[z]&&B[z](de)}function C(B,z,de){B.textNode&&D(B),M(B,z,de)}function D(B){B.textNode=O(B.opt,B.textNode),B.textNode&&M(B,"ontext",B.textNode),B.textNode=""}function O(B,z){return B.trim&&(z=z.trim()),B.normalize&&(z=z.replace(/\s+/g," ")),z}function $(B,z){return D(B),B.trackPosition&&(z+=`
Line: `+B.line+`
Column: `+B.column+`
Char: `+B.c),z=new Error(z),B.error=z,M(B,"onerror",z),B}function U(B){return B.sawRoot&&!B.closedRoot&&W(B,"Unclosed root tag"),B.state!==N.BEGIN&&B.state!==N.BEGIN_WHITESPACE&&B.state!==N.TEXT&&$(B,"Unexpected end"),D(B),B.c="",B.closed=!0,M(B,"onend"),r.call(B,B.strict,B.opt),B}function W(B,z){if(typeof B!="object"||!(B instanceof r))throw new Error("bad call to strictFail");B.strict&&$(B,z)}function ce(B){B.strict||(B.tagName=B.tagName[B.looseCase]());var z=B.tags[B.tags.length-1]||B,de=B.tag={name:B.tagName,attributes:{}};B.opt.xmlns&&(de.ns=z.ns),B.attribList.length=0,C(B,"onopentagstart",de)}function se(B,z){var de=B.indexOf(":"),Y=de<0?["",B]:B.split(":"),ee=Y[0],ae=Y[1];return z&&B==="xmlns"&&(ee="xmlns",ae=""),{prefix:ee,local:ae}}function Q(B){if(B.strict||(B.attribName=B.attribName[B.looseCase]()),B.attribList.indexOf(B.attribName)!==-1||B.tag.attributes.hasOwnProperty(B.attribName)){B.attribName=B.attribValue="";return}if(B.opt.xmlns){var z=se(B.attribName,!0),de=z.prefix,Y=z.local;if(de==="xmlns")if(Y==="xml"&&B.attribValue!==h)W(B,"xml: prefix must be bound to "+h+`
Actual: `+B.attribValue);else if(Y==="xmlns"&&B.attribValue!==m)W(B,"xmlns: prefix must be bound to "+m+`
Actual: `+B.attribValue);else{var ee=B.tag,ae=B.tags[B.tags.length-1]||B;ee.ns===ae.ns&&(ee.ns=Object.create(ae.ns)),ee.ns[Y]=B.attribValue}B.attribList.push([B.attribName,B.attribValue])}else B.tag.attributes[B.attribName]=B.attribValue,C(B,"onattribute",{name:B.attribName,value:B.attribValue});B.attribName=B.attribValue=""}function J(B,z){if(B.opt.xmlns){var de=B.tag,Y=se(B.tagName);de.prefix=Y.prefix,de.local=Y.local,de.uri=de.ns[Y.prefix]||"",de.prefix&&!de.uri&&(W(B,"Unbound namespace prefix: "+JSON.stringify(B.tagName)),de.uri=Y.prefix);var ee=B.tags[B.tags.length-1]||B;de.ns&&ee.ns!==de.ns&&Object.keys(de.ns).forEach(function(we){C(B,"onopennamespace",{prefix:we,uri:de.ns[we]})});for(var ae=0,ie=B.attribList.length;ae<ie;ae++){var H=B.attribList[ae],be=H[0],Te=H[1],Z=se(be,!0),oe=Z.prefix,te=Z.local,ye=oe===""?"":de.ns[oe]||"",ke={name:be,value:Te,prefix:oe,local:te,uri:ye};oe&&oe!=="xmlns"&&!ye&&(W(B,"Unbound namespace prefix: "+JSON.stringify(oe)),ke.uri=oe),B.tag.attributes[be]=ke,C(B,"onattribute",ke)}B.attribList.length=0}B.tag.isSelfClosing=!!z,B.sawRoot=!0,B.tags.push(B.tag),C(B,"onopentag",B.tag),z||(!B.noscript&&B.tagName.toLowerCase()==="script"?B.state=N.SCRIPT:B.state=N.TEXT,B.tag=null,B.tagName=""),B.attribName=B.attribValue="",B.attribList.length=0}function K(B){if(!B.tagName){W(B,"Weird empty close tag."),B.textNode+="</>",B.state=N.TEXT;return}if(B.script){if(B.tagName!=="script"){B.script+="</"+B.tagName+">",B.tagName="",B.state=N.SCRIPT;return}C(B,"onscript",B.script),B.script=""}var z=B.tags.length,de=B.tagName;B.strict||(de=de[B.looseCase]());for(var Y=de;z--;){var ee=B.tags[z];if(ee.name!==Y)W(B,"Unexpected close tag");else break}if(z<0){W(B,"Unmatched closing tag: "+B.tagName),B.textNode+="</"+B.tagName+">",B.state=N.TEXT;return}B.tagName=de;for(var ae=B.tags.length;ae-- >z;){var ie=B.tag=B.tags.pop();B.tagName=B.tag.name,C(B,"onclosetag",B.tagName);var H={};for(var be in ie.ns)H[be]=ie.ns[be];var Te=B.tags[B.tags.length-1]||B;B.opt.xmlns&&ie.ns!==Te.ns&&Object.keys(ie.ns).forEach(function(Z){var oe=ie.ns[Z];C(B,"onclosenamespace",{prefix:Z,uri:oe})})}z===0&&(B.closedRoot=!0),B.tagName=B.attribValue=B.attribName="",B.attribList.length=0,B.state=N.TEXT}function re(B){var z=B.entity,de=z.toLowerCase(),Y,ee="";return B.ENTITIES[z]?B.ENTITIES[z]:B.ENTITIES[de]?B.ENTITIES[de]:(z=de,z.charAt(0)==="#"&&(z.charAt(1)==="x"?(z=z.slice(2),Y=parseInt(z,16),ee=Y.toString(16)):(z=z.slice(1),Y=parseInt(z,10),ee=Y.toString(10))),z=z.replace(/^0+/,""),isNaN(Y)||ee.toLowerCase()!==z||Y<0||Y>1114111?(W(B,"Invalid character entity"),"&"+B.entity+";"):String.fromCodePoint(Y))}function X(B,z){z==="<"?(B.state=N.OPEN_WAKA,B.startTagPosition=B.position):x(z)||(W(B,"Non-whitespace before first tag."),B.textNode=z,B.state=N.TEXT)}function me(B,z){var de="";return z<B.length&&(de=B.charAt(z)),de}function G(B){var z=this;if(this.error)throw this.error;if(z.closed)return $(z,"Cannot write after close. Assign an onready handler.");if(B===null)return U(z);typeof B=="object"&&(B=B.toString());for(var de=0,Y="";Y=me(B,de++),z.c=Y,!!Y;)switch(z.trackPosition&&(z.position++,Y===`
`?(z.line++,z.column=0):z.column++),z.state){case N.BEGIN:if(z.state=N.BEGIN_WHITESPACE,Y==="\uFEFF")continue;X(z,Y);continue;case N.BEGIN_WHITESPACE:X(z,Y);continue;case N.TEXT:if(z.sawRoot&&!z.closedRoot){for(var ae=de-1;Y&&Y!=="<"&&Y!=="&";)Y=me(B,de++),Y&&z.trackPosition&&(z.position++,Y===`
`?(z.line++,z.column=0):z.column++);z.textNode+=B.substring(ae,de-1)}Y==="<"&&!(z.sawRoot&&z.closedRoot&&!z.strict)?(z.state=N.OPEN_WAKA,z.startTagPosition=z.position):(!x(Y)&&(!z.sawRoot||z.closedRoot)&&W(z,"Text data outside of root node."),Y==="&"?z.state=N.TEXT_ENTITY:z.textNode+=Y);continue;case N.SCRIPT:Y==="<"?z.state=N.SCRIPT_ENDING:z.script+=Y;continue;case N.SCRIPT_ENDING:Y==="/"?z.state=N.CLOSE_TAG:(z.script+="<"+Y,z.state=N.SCRIPT);continue;case N.OPEN_WAKA:if(Y==="!")z.state=N.SGML_DECL,z.sgmlDecl="";else if(!x(Y))if(k(w,Y))z.state=N.OPEN_TAG,z.tagName=Y;else if(Y==="/")z.state=N.CLOSE_TAG,z.tagName="";else if(Y==="?")z.state=N.PROC_INST,z.procInstName=z.procInstBody="";else{if(W(z,"Unencoded <"),z.startTagPosition+1<z.position){var ee=z.position-z.startTagPosition;Y=new Array(ee).join(" ")+Y}z.textNode+="<"+Y,z.state=N.TEXT}continue;case N.SGML_DECL:if(z.sgmlDecl+Y==="--"){z.state=N.COMMENT,z.comment="",z.sgmlDecl="";continue}z.doctype&&z.doctype!==!0&&z.sgmlDecl?(z.state=N.DOCTYPE_DTD,z.doctype+="<!"+z.sgmlDecl+Y,z.sgmlDecl=""):(z.sgmlDecl+Y).toUpperCase()===d?(C(z,"onopencdata"),z.state=N.CDATA,z.sgmlDecl="",z.cdata=""):(z.sgmlDecl+Y).toUpperCase()===f?(z.state=N.DOCTYPE,(z.doctype||z.sawRoot)&&W(z,"Inappropriately located doctype declaration"),z.doctype="",z.sgmlDecl=""):Y===">"?(C(z,"onsgmldeclaration",z.sgmlDecl),z.sgmlDecl="",z.state=N.TEXT):(T(Y)&&(z.state=N.SGML_DECL_QUOTED),z.sgmlDecl+=Y);continue;case N.SGML_DECL_QUOTED:Y===z.q&&(z.state=N.SGML_DECL,z.q=""),z.sgmlDecl+=Y;continue;case N.DOCTYPE:Y===">"?(z.state=N.TEXT,C(z,"ondoctype",z.doctype),z.doctype=!0):(z.doctype+=Y,Y==="["?z.state=N.DOCTYPE_DTD:T(Y)&&(z.state=N.DOCTYPE_QUOTED,z.q=Y));continue;case N.DOCTYPE_QUOTED:z.doctype+=Y,Y===z.q&&(z.q="",z.state=N.DOCTYPE);continue;case N.DOCTYPE_DTD:Y==="]"?(z.doctype+=Y,z.state=N.DOCTYPE):Y==="<"?(z.state=N.OPEN_WAKA,z.startTagPosition=z.position):T(Y)?(z.doctype+=Y,z.state=N.DOCTYPE_DTD_QUOTED,z.q=Y):z.doctype+=Y;continue;case N.DOCTYPE_DTD_QUOTED:z.doctype+=Y,Y===z.q&&(z.state=N.DOCTYPE_DTD,z.q="");continue;case N.COMMENT:Y==="-"?z.state=N.COMMENT_ENDING:z.comment+=Y;continue;case N.COMMENT_ENDING:Y==="-"?(z.state=N.COMMENT_ENDED,z.comment=O(z.opt,z.comment),z.comment&&C(z,"oncomment",z.comment),z.comment=""):(z.comment+="-"+Y,z.state=N.COMMENT);continue;case N.COMMENT_ENDED:Y!==">"?(W(z,"Malformed comment"),z.comment+="--"+Y,z.state=N.COMMENT):z.doctype&&z.doctype!==!0?z.state=N.DOCTYPE_DTD:z.state=N.TEXT;continue;case N.CDATA:for(var ae=de-1;Y&&Y!=="]";)Y=me(B,de++),Y&&z.trackPosition&&(z.position++,Y===`
`?(z.line++,z.column=0):z.column++);z.cdata+=B.substring(ae,de-1),Y==="]"&&(z.state=N.CDATA_ENDING);continue;case N.CDATA_ENDING:Y==="]"?z.state=N.CDATA_ENDING_2:(z.cdata+="]"+Y,z.state=N.CDATA);continue;case N.CDATA_ENDING_2:Y===">"?(z.cdata&&C(z,"oncdata",z.cdata),C(z,"onclosecdata"),z.cdata="",z.state=N.TEXT):Y==="]"?z.cdata+="]":(z.cdata+="]]"+Y,z.state=N.CDATA);continue;case N.PROC_INST:Y==="?"?z.state=N.PROC_INST_ENDING:x(Y)?z.state=N.PROC_INST_BODY:z.procInstName+=Y;continue;case N.PROC_INST_BODY:if(!z.procInstBody&&x(Y))continue;Y==="?"?z.state=N.PROC_INST_ENDING:z.procInstBody+=Y;continue;case N.PROC_INST_ENDING:Y===">"?(C(z,"onprocessinginstruction",{name:z.procInstName,body:z.procInstBody}),z.procInstName=z.procInstBody="",z.state=N.TEXT):(z.procInstBody+="?"+Y,z.state=N.PROC_INST_BODY);continue;case N.OPEN_TAG:k(b,Y)?z.tagName+=Y:(ce(z),Y===">"?J(z):Y==="/"?z.state=N.OPEN_TAG_SLASH:(x(Y)||W(z,"Invalid character in tag name"),z.state=N.ATTRIB));continue;case N.OPEN_TAG_SLASH:Y===">"?(J(z,!0),K(z)):(W(z,"Forward-slash in opening tag not followed by >"),z.state=N.ATTRIB);continue;case N.ATTRIB:if(x(Y))continue;Y===">"?J(z):Y==="/"?z.state=N.OPEN_TAG_SLASH:k(w,Y)?(z.attribName=Y,z.attribValue="",z.state=N.ATTRIB_NAME):W(z,"Invalid attribute name");continue;case N.ATTRIB_NAME:Y==="="?z.state=N.ATTRIB_VALUE:Y===">"?(W(z,"Attribute without value"),z.attribValue=z.attribName,Q(z),J(z)):x(Y)?z.state=N.ATTRIB_NAME_SAW_WHITE:k(b,Y)?z.attribName+=Y:W(z,"Invalid attribute name");continue;case N.ATTRIB_NAME_SAW_WHITE:if(Y==="=")z.state=N.ATTRIB_VALUE;else{if(x(Y))continue;W(z,"Attribute without value"),z.tag.attributes[z.attribName]="",z.attribValue="",C(z,"onattribute",{name:z.attribName,value:""}),z.attribName="",Y===">"?J(z):k(w,Y)?(z.attribName=Y,z.state=N.ATTRIB_NAME):(W(z,"Invalid attribute name"),z.state=N.ATTRIB)}continue;case N.ATTRIB_VALUE:if(x(Y))continue;T(Y)?(z.q=Y,z.state=N.ATTRIB_VALUE_QUOTED):(z.opt.unquotedAttributeValues||$(z,"Unquoted attribute value"),z.state=N.ATTRIB_VALUE_UNQUOTED,z.attribValue=Y);continue;case N.ATTRIB_VALUE_QUOTED:if(Y!==z.q){Y==="&"?z.state=N.ATTRIB_VALUE_ENTITY_Q:z.attribValue+=Y;continue}Q(z),z.q="",z.state=N.ATTRIB_VALUE_CLOSED;continue;case N.ATTRIB_VALUE_CLOSED:x(Y)?z.state=N.ATTRIB:Y===">"?J(z):Y==="/"?z.state=N.OPEN_TAG_SLASH:k(w,Y)?(W(z,"No whitespace between attributes"),z.attribName=Y,z.attribValue="",z.state=N.ATTRIB_NAME):W(z,"Invalid attribute name");continue;case N.ATTRIB_VALUE_UNQUOTED:if(!R(Y)){Y==="&"?z.state=N.ATTRIB_VALUE_ENTITY_U:z.attribValue+=Y;continue}Q(z),Y===">"?J(z):z.state=N.ATTRIB;continue;case N.CLOSE_TAG:if(z.tagName)Y===">"?K(z):k(b,Y)?z.tagName+=Y:z.script?(z.script+="</"+z.tagName,z.tagName="",z.state=N.SCRIPT):(x(Y)||W(z,"Invalid tagname in closing tag"),z.state=N.CLOSE_TAG_SAW_WHITE);else{if(x(Y))continue;_(w,Y)?z.script?(z.script+="</"+Y,z.state=N.SCRIPT):W(z,"Invalid tagname in closing tag."):z.tagName=Y}continue;case N.CLOSE_TAG_SAW_WHITE:if(x(Y))continue;Y===">"?K(z):W(z,"Invalid characters in closing tag");continue;case N.TEXT_ENTITY:case N.ATTRIB_VALUE_ENTITY_Q:case N.ATTRIB_VALUE_ENTITY_U:var ie,H;switch(z.state){case N.TEXT_ENTITY:ie=N.TEXT,H="textNode";break;case N.ATTRIB_VALUE_ENTITY_Q:ie=N.ATTRIB_VALUE_QUOTED,H="attribValue";break;case N.ATTRIB_VALUE_ENTITY_U:ie=N.ATTRIB_VALUE_UNQUOTED,H="attribValue";break}if(Y===";"){var be=re(z);z.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(be)?(z.entity="",z.state=ie,z.write(be)):(z[H]+=be,z.entity="",z.state=ie)}else k(z.entity.length?A:E,Y)?z.entity+=Y:(W(z,"Invalid character in entity name"),z[H]+="&"+z.entity+Y,z.entity="",z.state=ie);continue;default:throw new Error(z,"Unknown state: "+z.state)}return z.position>=z.bufferCheckPosition&&i(z),z}String.fromCodePoint||(function(){var B=String.fromCharCode,z=Math.floor,de=function(){var Y=16384,ee=[],ae,ie,H=-1,be=arguments.length;if(!be)return"";for(var Te="";++H<be;){var Z=Number(arguments[H]);if(!isFinite(Z)||Z<0||Z>1114111||z(Z)!==Z)throw RangeError("Invalid code point: "+Z);Z<=65535?ee.push(Z):(Z-=65536,ae=(Z>>10)+55296,ie=Z%1024+56320,ee.push(ae,ie)),(H+1===be||ee.length>Y)&&(Te+=B.apply(null,ee),ee.length=0)}return Te};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:de,configurable:!0,writable:!0}):String.fromCodePoint=de})()})(t)})(p8)),p8}var DO,mee;function hH(){return mee||(mee=1,DO={isArray:function(t){return Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}}),DO}var OO,gee;function pH(){if(gee)return OO;gee=1;var t=hH().isArray;return OO={copyOptions:function(e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r},ensureFlagExists:function(e,n){(!(e in n)||typeof n[e]!="boolean")&&(n[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!t(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,n){(!(e+"Key"in n)||typeof n[e+"Key"]!="string")&&(n[e+"Key"]=n.compact?"_"+e:e)},checkFnExists:function(e,n){return e+"Fn"in n}},OO}var PO,yee;function Cpe(){if(yee)return PO;yee=1;var t=MBe(),e=pH(),n=hH().isArray,r,i;function s(b){return r=e.copyOptions(b),e.ensureFlagExists("ignoreDeclaration",r),e.ensureFlagExists("ignoreInstruction",r),e.ensureFlagExists("ignoreAttributes",r),e.ensureFlagExists("ignoreText",r),e.ensureFlagExists("ignoreComment",r),e.ensureFlagExists("ignoreCdata",r),e.ensureFlagExists("ignoreDoctype",r),e.ensureFlagExists("compact",r),e.ensureFlagExists("alwaysChildren",r),e.ensureFlagExists("addParent",r),e.ensureFlagExists("trim",r),e.ensureFlagExists("nativeType",r),e.ensureFlagExists("nativeTypeAttributes",r),e.ensureFlagExists("sanitize",r),e.ensureFlagExists("instructionHasAttributes",r),e.ensureFlagExists("captureSpacesBetweenElements",r),e.ensureAlwaysArrayExists(r),e.ensureKeyExists("declaration",r),e.ensureKeyExists("instruction",r),e.ensureKeyExists("attributes",r),e.ensureKeyExists("text",r),e.ensureKeyExists("comment",r),e.ensureKeyExists("cdata",r),e.ensureKeyExists("doctype",r),e.ensureKeyExists("type",r),e.ensureKeyExists("name",r),e.ensureKeyExists("elements",r),e.ensureKeyExists("parent",r),e.checkFnExists("doctype",r),e.checkFnExists("instruction",r),e.checkFnExists("cdata",r),e.checkFnExists("comment",r),e.checkFnExists("text",r),e.checkFnExists("instructionName",r),e.checkFnExists("elementName",r),e.checkFnExists("attributeName",r),e.checkFnExists("attributeValue",r),e.checkFnExists("attributes",r),r}function o(b){var E=Number(b);if(!isNaN(E))return E;var A=b.toLowerCase();return A==="true"?!0:A==="false"?!1:b}function a(b,E){var A;if(r.compact){if(!i[r[b+"Key"]]&&(n(r.alwaysArray)?r.alwaysArray.indexOf(r[b+"Key"])!==-1:r.alwaysArray)&&(i[r[b+"Key"]]=[]),i[r[b+"Key"]]&&!n(i[r[b+"Key"]])&&(i[r[b+"Key"]]=[i[r[b+"Key"]]]),b+"Fn"in r&&typeof E=="string"&&(E=r[b+"Fn"](E,i)),b==="instruction"&&("instructionFn"in r||"instructionNameFn"in r)){for(A in E)if(E.hasOwnProperty(A))if("instructionFn"in r)E[A]=r.instructionFn(E[A],A,i);else{var x=E[A];delete E[A],E[r.instructionNameFn(A,x,i)]=x}}n(i[r[b+"Key"]])?i[r[b+"Key"]].push(E):i[r[b+"Key"]]=E}else{i[r.elementsKey]||(i[r.elementsKey]=[]);var T={};if(T[r.typeKey]=b,b==="instruction"){for(A in E)if(E.hasOwnProperty(A))break;T[r.nameKey]="instructionNameFn"in r?r.instructionNameFn(A,E,i):A,r.instructionHasAttributes?(T[r.attributesKey]=E[A][r.attributesKey],"instructionFn"in r&&(T[r.attributesKey]=r.instructionFn(T[r.attributesKey],A,i))):("instructionFn"in r&&(E[A]=r.instructionFn(E[A],A,i)),T[r.instructionKey]=E[A])}else b+"Fn"in r&&(E=r[b+"Fn"](E,i)),T[r[b+"Key"]]=E;r.addParent&&(T[r.parentKey]=i),i[r.elementsKey].push(T)}}function l(b){if("attributesFn"in r&&b&&(b=r.attributesFn(b,i)),(r.trim||"attributeValueFn"in r||"attributeNameFn"in r||r.nativeTypeAttributes)&&b){var E;for(E in b)if(b.hasOwnProperty(E)&&(r.trim&&(b[E]=b[E].trim()),r.nativeTypeAttributes&&(b[E]=o(b[E])),"attributeValueFn"in r&&(b[E]=r.attributeValueFn(b[E],E,i)),"attributeNameFn"in r)){var A=b[E];delete b[E],b[r.attributeNameFn(E,b[E],i)]=A}}return b}function c(b){var E={};if(b.body&&(b.name.toLowerCase()==="xml"||r.instructionHasAttributes)){for(var A=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,x;(x=A.exec(b.body))!==null;)E[x[1]]=x[2]||x[3]||x[4];E=l(E)}if(b.name.toLowerCase()==="xml"){if(r.ignoreDeclaration)return;i[r.declarationKey]={},Object.keys(E).length&&(i[r.declarationKey][r.attributesKey]=E),r.addParent&&(i[r.declarationKey][r.parentKey]=i)}else{if(r.ignoreInstruction)return;r.trim&&(b.body=b.body.trim());var T={};r.instructionHasAttributes&&Object.keys(E).length?(T[b.name]={},T[b.name][r.attributesKey]=E):T[b.name]=b.body,a("instruction",T)}}function u(b,E){var A;if(typeof b=="object"&&(E=b.attributes,b=b.name),E=l(E),"elementNameFn"in r&&(b=r.elementNameFn(b,i)),r.compact){if(A={},!r.ignoreAttributes&&E&&Object.keys(E).length){A[r.attributesKey]={};var x;for(x in E)E.hasOwnProperty(x)&&(A[r.attributesKey][x]=E[x])}!(b in i)&&(n(r.alwaysArray)?r.alwaysArray.indexOf(b)!==-1:r.alwaysArray)&&(i[b]=[]),i[b]&&!n(i[b])&&(i[b]=[i[b]]),n(i[b])?i[b].push(A):i[b]=A}else i[r.elementsKey]||(i[r.elementsKey]=[]),A={},A[r.typeKey]="element",A[r.nameKey]=b,!r.ignoreAttributes&&E&&Object.keys(E).length&&(A[r.attributesKey]=E),r.alwaysChildren&&(A[r.elementsKey]=[]),i[r.elementsKey].push(A);A[r.parentKey]=i,i=A}function d(b){r.ignoreText||!b.trim()&&!r.captureSpacesBetweenElements||(r.trim&&(b=b.trim()),r.nativeType&&(b=o(b)),r.sanitize&&(b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a("text",b))}function f(b){r.ignoreComment||(r.trim&&(b=b.trim()),a("comment",b))}function h(b){var E=i[r.parentKey];r.addParent||delete i[r.parentKey],i=E}function m(b){r.ignoreCdata||(r.trim&&(b=b.trim()),a("cdata",b))}function y(b){r.ignoreDoctype||(b=b.replace(/^ /,""),r.trim&&(b=b.trim()),a("doctype",b))}function w(b){b.note=b}return PO=function(b,E){var A=t.parser(!0,{}),x={};if(i=x,r=s(E),A.opt={strictEntities:!0},A.onopentag=u,A.ontext=d,A.oncomment=f,A.onclosetag=h,A.onerror=w,A.oncdata=m,A.ondoctype=y,A.onprocessinginstruction=c,A.write(b).close(),x[r.elementsKey]){var T=x[r.elementsKey];delete x[r.elementsKey],x[r.elementsKey]=T,delete x.text}return x},PO}var FO,bee;function LBe(){if(bee)return FO;bee=1;var t=pH(),e=Cpe();function n(r){var i=t.copyOptions(r);return t.ensureSpacesExists(i),i}return FO=function(r,i){var s,o,a,l;return s=n(i),o=e(r,s),l="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?a=JSON.stringify(o,function(c,u){return c===l?"_":u},s.spaces):a=JSON.stringify(o,null,s.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},FO}var BO,wee;function _pe(){if(wee)return BO;wee=1;var t=pH(),e=hH().isArray,n,r;function i(A){var x=t.copyOptions(A);return t.ensureFlagExists("ignoreDeclaration",x),t.ensureFlagExists("ignoreInstruction",x),t.ensureFlagExists("ignoreAttributes",x),t.ensureFlagExists("ignoreText",x),t.ensureFlagExists("ignoreComment",x),t.ensureFlagExists("ignoreCdata",x),t.ensureFlagExists("ignoreDoctype",x),t.ensureFlagExists("compact",x),t.ensureFlagExists("indentText",x),t.ensureFlagExists("indentCdata",x),t.ensureFlagExists("indentAttributes",x),t.ensureFlagExists("indentInstruction",x),t.ensureFlagExists("fullTagEmptyElement",x),t.ensureFlagExists("noQuotesForNativeAttributes",x),t.ensureSpacesExists(x),typeof x.spaces=="number"&&(x.spaces=Array(x.spaces+1).join(" ")),t.ensureKeyExists("declaration",x),t.ensureKeyExists("instruction",x),t.ensureKeyExists("attributes",x),t.ensureKeyExists("text",x),t.ensureKeyExists("comment",x),t.ensureKeyExists("cdata",x),t.ensureKeyExists("doctype",x),t.ensureKeyExists("type",x),t.ensureKeyExists("name",x),t.ensureKeyExists("elements",x),t.checkFnExists("doctype",x),t.checkFnExists("instruction",x),t.checkFnExists("cdata",x),t.checkFnExists("comment",x),t.checkFnExists("text",x),t.checkFnExists("instructionName",x),t.checkFnExists("elementName",x),t.checkFnExists("attributeName",x),t.checkFnExists("attributeValue",x),t.checkFnExists("attributes",x),t.checkFnExists("fullTagEmptyElement",x),x}function s(A,x,T){return(!T&&A.spaces?`
`:"")+Array(x+1).join(A.spaces)}function o(A,x,T){if(x.ignoreAttributes)return"";"attributesFn"in x&&(A=x.attributesFn(A,r,n));var R,k,_,N,L=[];for(R in A)A.hasOwnProperty(R)&&A[R]!==null&&A[R]!==void 0&&(N=x.noQuotesForNativeAttributes&&typeof A[R]!="string"?"":'"',k=""+A[R],k=k.replace(/"/g,"&quot;"),_="attributeNameFn"in x?x.attributeNameFn(R,k,r,n):R,L.push(x.spaces&&x.indentAttributes?s(x,T+1,!1):" "),L.push(_+"="+N+("attributeValueFn"in x?x.attributeValueFn(k,R,r,n):k)+N));return A&&Object.keys(A).length&&x.spaces&&x.indentAttributes&&L.push(s(x,T,!1)),L.join("")}function a(A,x,T){return n=A,r="xml",x.ignoreDeclaration?"":"<?xml"+o(A[x.attributesKey],x,T)+"?>"}function l(A,x,T){if(x.ignoreInstruction)return"";var R;for(R in A)if(A.hasOwnProperty(R))break;var k="instructionNameFn"in x?x.instructionNameFn(R,A[R],r,n):R;if(typeof A[R]=="object")return n=A,r=k,"<?"+k+o(A[R][x.attributesKey],x,T)+"?>";var _=A[R]?A[R]:"";return"instructionFn"in x&&(_=x.instructionFn(_,R,r,n)),"<?"+k+(_?" "+_:"")+"?>"}function c(A,x){return x.ignoreComment?"":"<!--"+("commentFn"in x?x.commentFn(A,r,n):A)+"-->"}function u(A,x){return x.ignoreCdata?"":"<![CDATA["+("cdataFn"in x?x.cdataFn(A,r,n):A.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function d(A,x){return x.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in x?x.doctypeFn(A,r,n):A)+">"}function f(A,x){return x.ignoreText?"":(A=""+A,A=A.replace(/&amp;/g,"&"),A=A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in x?x.textFn(A,r,n):A)}function h(A,x){var T;if(A.elements&&A.elements.length)for(T=0;T<A.elements.length;++T)switch(A.elements[T][x.typeKey]){case"text":if(x.indentText)return!0;break;case"cdata":if(x.indentCdata)return!0;break;case"instruction":if(x.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function m(A,x,T){n=A,r=A.name;var R=[],k="elementNameFn"in x?x.elementNameFn(A.name,A):A.name;R.push("<"+k),A[x.attributesKey]&&R.push(o(A[x.attributesKey],x,T));var _=A[x.elementsKey]&&A[x.elementsKey].length||A[x.attributesKey]&&A[x.attributesKey]["xml:space"]==="preserve";return _||("fullTagEmptyElementFn"in x?_=x.fullTagEmptyElementFn(A.name,A):_=x.fullTagEmptyElement),_?(R.push(">"),A[x.elementsKey]&&A[x.elementsKey].length&&(R.push(y(A[x.elementsKey],x,T+1)),n=A,r=A.name),R.push(x.spaces&&h(A,x)?`
`+Array(T+1).join(x.spaces):""),R.push("</"+k+">")):R.push("/>"),R.join("")}function y(A,x,T,R){return A.reduce(function(k,_){var N=s(x,T,R&&!k);switch(_.type){case"element":return k+N+m(_,x,T);case"comment":return k+N+c(_[x.commentKey],x);case"doctype":return k+N+d(_[x.doctypeKey],x);case"cdata":return k+(x.indentCdata?N:"")+u(_[x.cdataKey],x);case"text":return k+(x.indentText?N:"")+f(_[x.textKey],x);case"instruction":var L={};return L[_[x.nameKey]]=_[x.attributesKey]?_:_[x.instructionKey],k+(x.indentInstruction?N:"")+l(L,x,T)}},"")}function w(A,x,T){var R;for(R in A)if(A.hasOwnProperty(R))switch(R){case x.parentKey:case x.attributesKey:break;case x.textKey:if(x.indentText||T)return!0;break;case x.cdataKey:if(x.indentCdata||T)return!0;break;case x.instructionKey:if(x.indentInstruction||T)return!0;break;case x.doctypeKey:case x.commentKey:return!0;default:return!0}return!1}function b(A,x,T,R,k){n=A,r=x;var _="elementNameFn"in T?T.elementNameFn(x,A):x;if(typeof A>"u"||A===null||A==="")return"fullTagEmptyElementFn"in T&&T.fullTagEmptyElementFn(x,A)||T.fullTagEmptyElement?"<"+_+"></"+_+">":"<"+_+"/>";var N=[];if(x){if(N.push("<"+_),typeof A!="object")return N.push(">"+f(A,T)+"</"+_+">"),N.join("");A[T.attributesKey]&&N.push(o(A[T.attributesKey],T,R));var L=w(A,T,!0)||A[T.attributesKey]&&A[T.attributesKey]["xml:space"]==="preserve";if(L||("fullTagEmptyElementFn"in T?L=T.fullTagEmptyElementFn(x,A):L=T.fullTagEmptyElement),L)N.push(">");else return N.push("/>"),N.join("")}return N.push(E(A,T,R+1,!1)),n=A,r=x,x&&N.push((k?s(T,R,!1):"")+"</"+_+">"),N.join("")}function E(A,x,T,R){var k,_,N,L=[];for(_ in A)if(A.hasOwnProperty(_))for(N=e(A[_])?A[_]:[A[_]],k=0;k<N.length;++k){switch(_){case x.declarationKey:L.push(a(N[k],x,T));break;case x.instructionKey:L.push((x.indentInstruction?s(x,T,R):"")+l(N[k],x,T));break;case x.attributesKey:case x.parentKey:break;case x.textKey:L.push((x.indentText?s(x,T,R):"")+f(N[k],x));break;case x.cdataKey:L.push((x.indentCdata?s(x,T,R):"")+u(N[k],x));break;case x.doctypeKey:L.push(s(x,T,R)+d(N[k],x));break;case x.commentKey:L.push(s(x,T,R)+c(N[k],x));break;default:L.push(s(x,T,R)+b(N[k],_,x,T,w(N[k],x)))}R=R&&!L.length}return L.join("")}return BO=function(A,x){x=i(x);var T=[];return n=A,r="_root_",x.compact?T.push(E(A,x,0,!0)):(A[x.declarationKey]&&T.push(a(A[x.declarationKey],x,0)),A[x.elementsKey]&&A[x.elementsKey].length&&T.push(y(A[x.elementsKey],x,0,!T.length))),T.join("")},BO}var jO,vee;function DBe(){if(vee)return jO;vee=1;var t=_pe();return jO=function(e,n){e instanceof ar&&(e=e.toString());var r=null;if(typeof e=="string")try{r=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else r=e;return t(r,n)},jO}var $O,xee;function OBe(){if(xee)return $O;xee=1;var t=Cpe(),e=LBe(),n=_pe(),r=DBe();return $O={xml2js:t,xml2json:e,js2xml:n,json2xml:r},$O}var qA=OBe();const Qk=96;function tc(t){if(t!=null)return typeof t=="string"&&(t=parseFloat(t)),Math.round(Number(t)*1440)}function Os(t){if(t==null)return;const e=Number(t);if(!Number.isNaN(e))return e/1440}function Dr(t){if(t==null)return;const e=Os(t);return h1(e)}function pc(t){const e=PBe(t);return tc(e)}function h1(t){if(t==null)return;const e=t*Qk;return Math.round(e*1e3)/1e3}function PBe(t){return t==null?void 0:Number(t)/Qk}function sb(t){if(t!=null)return t/240}function mH(t){if(t!=null)return t*240}function Bg(t){if(t!=null)return Math.round(t)/2}function In(t){if(t==null)return;typeof t=="string"&&(t=parseFloat(t));const e=t*Qk/914400;return Math.round(e)}function xs(t){if(t!=null)return typeof t=="string"&&(t=parseFloat(t)),Math.round(t*9525)}function Ax(t){return t==null?void 0:parseFloat(t)/8*1.3333}function h5(t){if(t!=null)return t*20}function FBe(t){if(t!=null)return Math.round(t*6)}function yR(t){if(t!=null)return t/20}function gH(t){if(t!=null)return t*20}function yH(t){if(t!=null)return t/6e4}function BBe(t){if(t!=null)return t*6e4}function p5(t){if(t==null)return;const e=t*Qk;return Math.round(e)}function Eee(t){if(t==null)return;const e=Number(t)/Qk;return Math.round(e*1e3)/1e3}function jBe(t){if(!t)return null;const e=[];if(t.elements.forEach(n=>{if(["wp:start","wp:lineTo"].includes(n.name)){const{x:r,y:i}=n.attributes;e.push([Eee(r),Eee(i)])}}),e.length>1){const n=e[0],r=e[e.length-1];n[0]===r[0]&&n[1]===r[1]&&e.pop()}return e}function $Be(t){if(!t||!Array.isArray(t))return null;const e={name:"wp:wrapPolygon",type:"wp:wrapPolygon",attributes:{edited:"0"},elements:[]};if(t.forEach((n,r)=>{const[i,s]=n,o=r===0?"wp:start":"wp:lineTo",a={name:o,type:o,attributes:{x:p5(i),y:p5(s)}};e.elements.push(a)}),t.length>0){const[n,r]=t[0],i={name:"wp:lineTo",type:"wp:lineTo",attributes:{x:p5(n),y:p5(r)}};e.elements.push(i)}return e}const zBe=/^https?:|^blob:|^file:/i,HBe=/^data:/i,VBe=async t=>{if(t==null)return new ArrayBuffer(0);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t)){const o=t;return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}if(typeof Blob<"u"&&t instanceof Blob)return await t.arrayBuffer();if(typeof t!="string")throw new TypeError("Unsupported media input type");const e=t.trim(),n=zBe.test(e),r=HBe.test(e);if(n){if(typeof fetch!="function")throw new Error(`Fetch API is not available to retrieve media: ${e}`);const o=await fetch(e);if(!o.ok)throw new Error(`Fetch failed: ${o.status} ${o.statusText}`);return await o.arrayBuffer()}const i=r?e.split(",",2)[1]:e.replace(/\s/g,"");try{if(typeof globalThis.atob=="function"){const o=globalThis.atob(i),a=new Uint8Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);return a.buffer}}catch(o){console.warn("atob failed, falling back to Buffer:",o)}const s=ar.from(i,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)},UBe=t=>{var e,n;try{const r=qA.xml2js(t,{compact:!1});return(((n=(e=r==null?void 0:r.elements)==null?void 0:e[0])==null?void 0:n.elements)||[]).filter(s=>(s==null?void 0:s.name)==="Default").map(s=>{var o;return(o=s.attributes)==null?void 0:o.Extension}).filter(Boolean)}catch(r){return console.warn("[super-editor] Failed to parse [Content_Types].xml",r),[]}},V7=new Map([["yellow","FFFF00"],["green","00FF00"],["blue","0000FF"],["cyan","00FFFF"],["magenta","FF00FF"],["red","FF0000"],["darkYellow","808000"],["darkGreen","008000"],["darkBlue","000080"],["darkCyan","008080"],["darkMagenta","800080"],["darkGray","808080"],["darkRed","800000"],["lightGray","C0C0C0"],["black","000000"],["white","FFFFFF"]]),bH=t=>{if(!t)return null;let e=t.replace("#","").trim();return e?(e=e.toUpperCase(),e.length===3&&(e=e.split("").map(n=>n+n).join("")),e.length===8&&(e=e.slice(0,6)),e):null},Npe=t=>{const e=V7.get(t);return e?`#${e}`:null},WBe=t=>{if(!t)return null;if(V7.has(t))return t;const e=bH(t);if(!e)return null;for(const[n,r]of V7.entries())if(r===e)return n;return null};function Ipe(t){if(!t||typeof t!="string")return!1;switch(t.length){case 3:return/^[0-9A-F]{3}$/i.test(t);case 6:return/^[0-9A-F]{6}$/i.test(t);case 8:return/^[0-9A-F]{8}$/i.test(t);default:return!1}}const qBe=t=>{const e=Number(t).toString(16);return e.length===1?"0"+e:e},GBe=t=>"#"+t.match(/\d+/g).map(qBe).join(""),KBe=(t,e)=>{const n=new Uint8Array(t),r=e.replace(/[-{}]/g,"");if(r.length!==32){console.error("Invalid GUID");return}const i=new Uint8Array(16);for(let s=0,o=0;s<32;s+=2,o++){const a=r[s]+r[s+1];i[o]=parseInt(a,16)}for(let s=0;s<32;s++){const o=15-s%16;n[s]^=i[o]}return n.buffer};function See(t,e){switch(typeof t=="string"&&t.endsWith("%")&&(e="pct"),t==null&&(t=0),e){case"dxa":case null:case void 0:return`${Dr(t)}px`;case"nil":return"0";case"auto":return null;case"pct":let n;return typeof t=="number"?n=t*.02:t.endsWith("%")?n=parseFloat(t.slice(0,-1)):n=parseFloat(t)*.02,`${n}%`;default:return null}}let m5;const XBe=new Uint8Array(16);function YBe(){if(!m5&&(m5=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m5))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m5(XBe)}const Bo=[];for(let t=0;t<256;++t)Bo.push((t+256).toString(16).slice(1));function ZBe(t,e=0){return Bo[t[e+0]]+Bo[t[e+1]]+Bo[t[e+2]]+Bo[t[e+3]]+"-"+Bo[t[e+4]]+Bo[t[e+5]]+"-"+Bo[t[e+6]]+Bo[t[e+7]]+"-"+Bo[t[e+8]]+Bo[t[e+9]]+"-"+Bo[t[e+10]]+Bo[t[e+11]]+Bo[t[e+12]]+Bo[t[e+13]]+Bo[t[e+14]]+Bo[t[e+15]]}const JBe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Aee={randomUUID:JBe};function Ts(t,e,n){if(Aee.randomUUID&&!t)return Aee.randomUUID();t=t||{};const r=t.random||(t.rng||YBe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZBe(r)}function QBe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const eje=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Rpe(t){if(ar.isBuffer(t))return t;if(typeof t=="number")return ar.alloc(t);if(typeof t=="string")return ar.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function tje(t){const e=Rpe(4);return e.writeInt32BE(t,0),e}function wH(t,e){t=Rpe(t),ar.isBuffer(e)&&(e=e.readUInt32BE(0));let n=~~e^-1;for(var r=0;r<t.length;r++)n=eje[(n^t[r])&255]^n>>>8;return n^-1}function vH(){return tje(wH.apply(null,arguments))}vH.signed=function(){return wH.apply(null,arguments)};vH.unsigned=function(){return wH.apply(null,arguments)>>>0};var nje=vH;const rje=QBe(nje),Mpe=t=>Object.prototype.toString.call(t)==="[object RegExp]";function Tx(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Mpe(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function zo(t){this.content=t}zo.prototype={constructor:zo,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new zo(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new zo(n)},addToStart:function(t,e){return new zo([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new zo(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new zo(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=zo.from(t),t.size?new zo(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=zo.from(t),t.size?new zo(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=zo.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};zo.from=function(t){if(t instanceof zo)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new zo(e)};function Lpe(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Lpe(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Dpe(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=Dpe(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Nt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Nt(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Nt(r,i)}cutByIndex(e,n){return e==n?Nt.empty:e==0&&n==this.content.length?this:new Nt(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Nt(i,s)}addToStart(e){return new Nt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Nt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Lpe(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Dpe(this,e,n,r)}findIndex(e){if(e==0)return g5(0,e);if(e==this.size)return g5(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?g5(n+1,s):g5(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Nt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Nt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Nt.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Nt(n||e,r)}static from(e){if(!e)return Nt.empty;if(e instanceof Nt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Nt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Nt.empty=new Nt([],0);const zO={index:0,offset:0};function g5(t,e){return zO.index=t,zO.offset=e,zO}function jN(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!jN(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!jN(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Si=class U7{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&jN(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return U7.none;if(e instanceof U7)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Si.none=[];class $N extends Error{}class Ut{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Ppe(this.content,e+this.openStart,n);return r&&new Ut(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Ut(Ope(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Ut.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ut(Nt.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Ut(e,r,i)}}Ut.empty=new Ut(Nt.empty,0,0);function Ope(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Ope(s.content,e-i-1,n-i-1)))}function Ppe(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Ppe(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function ije(t,e,n){if(n.openStart>t.depth)throw new $N("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new $N("Inconsistent open depths");return Fpe(t,e,n,0)}function Fpe(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Fpe(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ab(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=sje(n,t);return ab(s,jpe(t,o,a,e,r))}else return ab(s,zN(t,e,r))}function Bpe(t,e){if(!e.type.compatibleContent(t.type))throw new $N("Cannot join "+e.type.name+" onto "+t.type.name)}function W7(t,e,n){let r=t.node(n);return Bpe(r,e.node(n)),r}function ob(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function QS(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ob(t.nodeAfter,r),s++));for(let a=s;a<o;a++)ob(i.child(a),r);e&&e.depth==n&&e.textOffset&&ob(e.nodeBefore,r)}function ab(t,e){return t.type.checkContent(e),t.copy(e)}function jpe(t,e,n,r,i){let s=t.depth>i&&W7(t,e,i+1),o=r.depth>i&&W7(n,r,i+1),a=[];return QS(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(Bpe(s,o),ob(ab(s,jpe(t,e,n,r,i+1)),a)):(s&&ob(ab(s,zN(t,e,i+1)),a),QS(e,n,i,a),o&&ob(ab(o,zN(n,r,i+1)),a)),QS(r,null,i,a),new Nt(a)}function zN(t,e,n){let r=[];if(QS(null,t,n,r),t.depth>n){let i=W7(t,e,n+1);ob(ab(i,zN(t,e,n+1)),r)}return QS(e,null,n,r),new Nt(r)}function sje(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Nt.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class GA{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Si.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new lje(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new GA(n,r,s)}static resolveCached(e,n){let r=Tee.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Tee.set(e,r=new oje);let i=r.elts[r.i]=GA.resolve(e,n);return r.i=(r.i+1)%aje,i}}class oje{constructor(){this.elts=[],this.i=0}}const aje=12,Tee=new WeakMap;class lje{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cje=Object.create(null);let lb=class q7{constructor(e,n,r,i=Si.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Nt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&jN(this.attrs,n||e.defaultAttrs||cje)&&Si.sameSet(this.marks,r||Si.none)}copy(e=null){return e==this.content?this:new q7(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new q7(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ut.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Ut(c,i.depth-o,s.depth-o)}replace(e,n,r){return ije(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return GA.resolveCached(this,e)}resolveNoCache(e){return GA.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),$pe(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Nt.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Si.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Si.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Nt.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};lb.prototype.text=void 0;class HN extends lb{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):$pe(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new HN(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new HN(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function $pe(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Lb{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new uje(e,n);if(r.next==null)return Lb.empty;let i=zpe(r);r.next&&r.err("Unexpected trailing text");let s=yje(gje(i));return bje(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Nt.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Lb.empty=new Lb(!0);class uje{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function zpe(t){let e=[];do e.push(dje(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function dje(t){let e=[];do e.push(fje(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fje(t){let e=mje(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=hje(t,e);else break;return e}function kee(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function hje(t,e){let n=kee(t),r=n;return t.eat(",")&&(t.next!="}"?r=kee(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function pje(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function mje(t){if(t.eat("(")){let e=zpe(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=pje(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gje(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Hpe(t,e){return e-t}function Cee(t,e){let n=[];return r(e),n.sort(Hpe);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function yje(t){let e=Object.create(null);return n(Cee(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Cee(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Lb(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Hpe);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function bje(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Vpe(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Upe(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Wpe(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function qpe(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new vje(t,r,e[r]);return n}let _ee=class Gpe{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=qpe(e,r.attrs),this.defaultAttrs=Vpe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Lb.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Upe(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new lb(this,this.computeAttrs(e),Nt.from(n),Si.setFrom(r))}createChecked(e=null,n,r){return n=Nt.from(n),this.checkContent(n),new lb(this,this.computeAttrs(e),n,Si.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Nt.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Nt.empty,!0);return s?new lb(this,e,n.append(s),Si.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Wpe(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Si.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Gpe(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wje(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}let vje=class{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wje(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}};class bR{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=qpe(e,i.attrs),this.excluded=null;let s=Vpe(this.attrs);this.instance=s?new Si(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Si(this,Upe(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new bR(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Wpe(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let Kpe=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=zo.from(e.nodes),n.marks=zo.from(e.marks||{}),this.nodes=_ee.compile(this.spec.nodes,this),this.marks=bR.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Lb.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Nee(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Nee(this,o.split(" "))}this.nodeFromJSON=i=>lb.fromJSON(this,i),this.markFromJSON=i=>Si.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof _ee){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new HN(r,r.defaultAttrs,e,Si.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function Nee(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function xje(t){return t.tag!=null}function Eje(t){return t.style!=null}let ka=class G7{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(xje(i))this.tags.push(i);else if(Eje(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Ree(this,n,!1);return r.addAll(e,Si.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Ree(this,n,!0);return r.addAll(e,Si.none,n.from,n.to),Ut.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Tje(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Mee(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Mee(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new G7(e,G7.schemaRules(e)))}};const Xpe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Sje={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ype={ol:!0,ul:!0},KA=1,K7=2,eA=4;function Iee(t,e,n){return e!=null?(e?KA:0)|(e==="full"?K7:0):t&&t.whitespace=="pre"?KA|K7:n&~eA}class y5{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Si.none,this.match=s||(o&eA?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Nt.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&KA)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Nt.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Nt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Xpe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ree{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Iee(null,n.preserveWhitespace,0)|(r?eA:0);i?s=new y5(i.type,i.attrs,Si.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new y5(null,null,Si.none,!0,null,o):s=new y5(e.schema.topNodeType,null,Si.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&K7?"full":this.localPreserveWS||(i.options&KA)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Ype.hasOwnProperty(o)&&this.parser.normalizeLists&&Aje(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Sje.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Xpe.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Si.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):Lee(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Iee(e,s,o.options);o.options&eA&&o.content.length==0&&(a|=eA);let l=Si.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Lee(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new y5(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=KA)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Aje(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Ype.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Tje(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Mee(t){let e={};for(let n in t)e[n]=t[n];return e}function Lee(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Kf{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=HO(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=W_(HO(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&W_(HO(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return W_(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Kf(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Dee(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Dee(e.marks)}}function Dee(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function HO(t){return t.document||window.document}const Oee=new WeakMap;function kje(t){let e=Oee.get(t);return e===void 0&&Oee.set(t,e=Cje(t)),e}function Cje(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function W_(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=kje(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=W_(t,f,n,r);if(l.appendChild(h),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const X7={"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16sdtfl":"http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"},_je={elements:[{type:"element",name:"Properties",attributes:{xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},elements:[]}]},Nje={type:"element",name:"w:r",elements:[{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rStyle",attributes:{"w:val":"CommentReference"}}]},{type:"element",name:"w:annotationRef"}]},Pee={Normal:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:default":"1","w:styleId":"Normal"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"Normal"}},{type:"element",name:"w:qFormat"}]},Title:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:styleId":"Title"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"Title"}},{type:"element",name:"w:basedOn",attributes:{"w:val":"Normal"}},{type:"element",name:"w:next",attributes:{"w:val":"Normal"}},{type:"element",name:"w:link",attributes:{"w:val":"TitleChar"}},{type:"element",name:"w:uiPriority",attributes:{"w:val":"10"}},{type:"element",name:"w:qFormat"},{type:"element",name:"w:rsid",attributes:{"w:val":"00B72667"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:spacing",attributes:{"w:after":"80"}},{type:"element",name:"w:contextualSpacing"}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:asciiTheme":"majorHAnsi","w:eastAsiaTheme":"majorEastAsia","w:hAnsiTheme":"majorHAnsi","w:cstheme":"majorBidi"}},{type:"element",name:"w:spacing",attributes:{"w:val":"-10"}},{type:"element",name:"w:kern",attributes:{"w:val":"28"}},{type:"element",name:"w:sz",attributes:{"w:val":"56"}},{type:"element",name:"w:szCs",attributes:{"w:val":"56"}}]}]},Subtitle:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:styleId":"Subtitle"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"Subtitle"}},{type:"element",name:"w:basedOn",attributes:{"w:val":"Normal"}},{type:"element",name:"w:next",attributes:{"w:val":"Normal"}},{type:"element",name:"w:link",attributes:{"w:val":"SubtitleChar"}},{type:"element",name:"w:uiPriority",attributes:{"w:val":"11"}},{type:"element",name:"w:qFormat"},{type:"element",name:"w:rsid",attributes:{"w:val":"00B72667"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:numPr",elements:[{type:"element",name:"w:ilvl",attributes:{"w:val":"1"}}]},{type:"element",name:"w:spacing",attributes:{"w:after":"160"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:asciiTheme":"minorHAnsi","w:eastAsiaTheme":"majorEastAsia","w:hAnsiTheme":"minorHAnsi","w:cstheme":"majorBidi"}},{type:"element",name:"w:color",attributes:{"w:val":"595959","w:themeColor":"text1","w:themeTint":"A6"}},{type:"element",name:"w:spacing",attributes:{"w:val":"15"}},{type:"element",name:"w:sz",attributes:{"w:val":"28"}},{type:"element",name:"w:szCs",attributes:{"w:val":"28"}}]}]},Heading1:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:styleId":"Heading1"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"heading 1"}},{type:"element",name:"w:basedOn",attributes:{"w:val":"Normal"}},{type:"element",name:"w:next",attributes:{"w:val":"Normal"}},{type:"element",name:"w:link",attributes:{"w:val":"Heading1Char"}},{type:"element",name:"w:uiPriority",attributes:{"w:val":"9"}},{type:"element",name:"w:qFormat"},{type:"element",name:"w:rsid",attributes:{"w:val":"00233D7B"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:keepNext"},{type:"element",name:"w:keepLines"},{type:"element",name:"w:spacing",attributes:{"w:before":"360","w:after":"80"}},{type:"element",name:"w:outlineLvl",attributes:{"w:val":"0"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:asciiTheme":"majorHAnsi","w:eastAsiaTheme":"majorEastAsia","w:hAnsiTheme":"majorHAnsi","w:cstheme":"majorBidi"}},{type:"element",name:"w:color",attributes:{"w:val":"0F4761","w:themeColor":"accent1","w:themeShade":"BF"}},{type:"element",name:"w:sz",attributes:{"w:val":"40"}},{type:"element",name:"w:szCs",attributes:{"w:val":"40"}}]}]},Heading2:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:styleId":"Heading2"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"heading 2"}},{type:"element",name:"w:basedOn",attributes:{"w:val":"Normal"}},{type:"element",name:"w:next",attributes:{"w:val":"Normal"}},{type:"element",name:"w:link",attributes:{"w:val":"Heading2Char"}},{type:"element",name:"w:uiPriority",attributes:{"w:val":"9"}},{type:"element",name:"w:semiHidden"},{type:"element",name:"w:unhideWhenUsed"},{type:"element",name:"w:qFormat"},{type:"element",name:"w:rsid",attributes:{"w:val":"00233D7B"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:keepNext"},{type:"element",name:"w:keepLines"},{type:"element",name:"w:spacing",attributes:{"w:before":"160","w:after":"80"}},{type:"element",name:"w:outlineLvl",attributes:{"w:val":"1"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:asciiTheme":"majorHAnsi","w:eastAsiaTheme":"majorEastAsia","w:hAnsiTheme":"majorHAnsi","w:cstheme":"majorBidi"}},{type:"element",name:"w:color",attributes:{"w:val":"0F4761","w:themeColor":"accent1","w:themeShade":"BF"}},{type:"element",name:"w:sz",attributes:{"w:val":"32"}},{type:"element",name:"w:szCs",attributes:{"w:val":"32"}}]}]},Heading3:{type:"element",name:"w:style",attributes:{"w:type":"paragraph","w:styleId":"Heading3"},elements:[{type:"element",name:"w:name",attributes:{"w:val":"heading 3"}},{type:"element",name:"w:basedOn",attributes:{"w:val":"Normal"}},{type:"element",name:"w:next",attributes:{"w:val":"Normal"}},{type:"element",name:"w:link",attributes:{"w:val":"Heading3Char"}},{type:"element",name:"w:uiPriority",attributes:{"w:val":"9"}},{type:"element",name:"w:semiHidden"},{type:"element",name:"w:unhideWhenUsed"},{type:"element",name:"w:qFormat"},{type:"element",name:"w:rsid",attributes:{"w:val":"00233D7B"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:keepNext"},{type:"element",name:"w:keepLines"},{type:"element",name:"w:spacing",attributes:{"w:before":"160","w:after":"80"}},{type:"element",name:"w:outlineLvl",attributes:{"w:val":"2"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:eastAsiaTheme":"majorEastAsia","w:cstheme":"majorBidi"}},{type:"element",name:"w:color",attributes:{"w:val":"0F4761","w:themeColor":"accent1","w:themeShade":"BF"}},{type:"element",name:"w:sz",attributes:{"w:val":"28"}},{type:"element",name:"w:szCs",attributes:{"w:val":"28"}}]}]}},Ije={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"w:comments",attributes:{"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16sdtfl":"http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"},elements:[]}]},Rje={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"w15:commentsEx",attributes:{"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16sdtfl":"http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"},elements:[]}]},Mje={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"w16cex:commentsExtensible",attributes:{"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:cr":"http://schemas.microsoft.com/office/comments/2020/reactions","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16sdtfl":"http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl cr w16du wp14"},elements:[]}]},Lje={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"w16cid:commentsIds",attributes:{"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16sdtfl":"http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"},elements:[]}]},Dje={elements:[{type:"element",name:"Relationships",attributes:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},elements:[{type:"element",name:"Relationship",attributes:{Id:"rId8",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable",Target:"fontTable.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId3",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings",Target:"webSettings.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId7",Type:"http://schemas.microsoft.com/office/2018/08/relationships/commentsExtensible",Target:"commentsExtensible.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings",Target:"settings.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId6",Type:"http://schemas.microsoft.com/office/2016/09/relationships/commentsIds",Target:"commentsIds.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId5",Type:"http://schemas.microsoft.com/office/2011/relationships/commentsExtended",Target:"commentsExtended.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId10",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"}},{type:"element",name:"Relationship",attributes:{Id:"rId4",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",Target:"comments.xml"}}]}]},Oje={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"Types",attributes:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},elements:[{type:"element",name:"Default",attributes:{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}},{type:"element",name:"Default",attributes:{Extension:"xml",ContentType:"application/xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/document.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/settings.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/webSettings.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.webSettings+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/comments.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/commentsExtended.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.commentsExtended+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/commentsIds.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.commentsIds+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/commentsExtensible.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.commentsExtensible+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/fontTable.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/people.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.people+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}},{type:"element",name:"Override",attributes:{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}},{type:"element",name:"Override",attributes:{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}},{type:"element",name:"Override",attributes:{PartName:"/word/numbering.xml",ContentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml"}}]}]},_v={COMMENTS_XML_DEF:Ije,COMMENTS_EXTENDED_XML_DEF:Rje,COMMENTS_EXTENSIBLE_XML_DEF:Mje,COMMENTS_IDS_XML_DEF:Lje,DOCUMENT_RELS_XML_DEF:Dje,CONTENT_TYPES:Oje};function hu(t){const{content:e}=t.node;if(!e)return[];const n=[],r=[];let i=0;for(;i<e.length;){const s=e[i],o=Fee(s);if(o){r.push(s);const l=i+1<e.length?e[i+1]:null;if(Fee(l,o)){i++;continue}else{let u=jp({...t,node:r[0],extraParams:{...t.extraParams||{},hyperlinkGroup:r.slice()}});u instanceof Array?n.push(...u):n.push(u),r.length=0,i++;continue}}let a=jp({...t,node:s});a instanceof Array?n.push(...a):n.push(a),i++}return n.filter(s=>s)}function Fee(t,e=null){var i;if(!t||!t.marks&&!((i=t.attrs)!=null&&i.marksAsAttrs))return null;const r=(t.marks||t.attrs.marksAsAttrs).find(s=>s.type==="link");return r?e?Pje(r.attrs,e.attrs)?r:null:r:null}function Pje(t,e){for(let n of["anchor","docLocation","history","href","rId","target"])if(t[n]!=e[n])return!1;return!0}const Zpe={declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"w:numbering",attributes:{"xmlns:wpc":"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas","xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:oel":"http://schemas.microsoft.com/office/2019/extlst","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16du":"http://schemas.microsoft.com/office/word/2023/wordml/word16du","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape","mc:Ignorable":"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16du wp14"},elements:[{type:"element",name:"w:abstractNum",attributes:{"w:abstractNumId":"0","w15:restartNumberingAfterBreak":"0"},elements:[{type:"element",name:"w:nsid",attributes:{"w:val":"16126B07"}},{type:"element",name:"w:multiLevelType",attributes:{"w:val":"hybridMultilevel"}},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"0","w:tplc":"04090001"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"720","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"1","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"o"}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"1440","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"2","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2160","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"3","w:tplc":"04090001","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2880","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"4","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"o"}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"3600","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"5","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"4320","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"6","w:tplc":"04090001","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5040","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"7","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"o"}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5760","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"8","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"6480","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]}]},{type:"element",name:"w:abstractNum",attributes:{"w:abstractNumId":"1","w15:restartNumberingAfterBreak":"0"},elements:[{type:"element",name:"w:nsid",attributes:{"w:val":"587013BA"}},{type:"element",name:"w:multiLevelType",attributes:{"w:val":"hybridMultilevel"}},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"0","w:tplc":"0409000F"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%1."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"720","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"1","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%2."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"1440","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"2","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%3."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2160","w:hanging":"180"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"3","w:tplc":"0409000F","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%4."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2880","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"4","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%5."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"3600","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"5","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%6."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"4320","w:hanging":"180"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"6","w:tplc":"0409000F","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%7."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5040","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"7","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%8."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5760","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"8","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%9."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"6480","w:hanging":"180"}}]}]}]},{type:"element",name:"w:num",attributes:{"w:numId":"1","w16cid:durableId":"100147962"},elements:[{type:"element",name:"w:abstractNumId",attributes:{"w:val":"0"}}]},{type:"element",name:"w:num",attributes:{"w:numId":"2","w16cid:durableId":"485517411"},elements:[{type:"element",name:"w:abstractNumId",attributes:{"w:val":"1"}}]}]}]},Fje=Object.freeze({NODE:"node",ATTRIBUTE:"attribute"}),p4=class p4{constructor(e,n,r,i,s,o,a,l){Mt(this,"xmlName");Mt(this,"sdNodeOrKeyName");Mt(this,"priority");Mt(this,"encodeFn");Mt(this,"decodeFn");Mt(this,"matchesEncode");Mt(this,"matchesDecode");Mt(this,"attributes");this.xmlName=e,this.sdNodeOrKeyName=n,this.encodeFn=r,this.decodeFn=i,this.attributes=l||[],this.priority=typeof s=="number"?s:0,this.matchesEncode=typeof o=="function"?o:()=>!0,this.matchesDecode=typeof a=="function"?a:()=>!0}encodeAttributes(e){const{nodes:n=[]}=e||{},r=n[0],{attributes:i={}}=r||{},s={};return this.attributes.forEach(({sdName:o,encode:a})=>{if(!a)return;const l=a(i);l!=null&&(s[o]=l)}),s}decodeAttributes(e){const{node:n}=e||{},{attrs:r={}}=n||{},i={};return this.attributes.forEach(({xmlName:s,decode:o})=>{if(!o)return;const a=o(r);a!=null&&(i[s]=a)}),i}decode(e){const n=this.decodeAttributes(e);return this.decodeFn?this.decodeFn.call(this,e,n):void 0}encode(e){const n=this.encodeAttributes(e);return this.encodeFn?this.encodeFn.call(this,e,n):void 0}static from(e){const{xmlName:n,sdNodeOrKeyName:r,encode:i,decode:s,priority:o=0,matchesEncode:a,matchesDecode:l,attributes:c}=e;if(typeof i!="function"||s&&typeof s!="function")throw new TypeError(`${n}: encode/decode must be functions`);const u=new p4(n,r,i,s,o,a,l,c);return Object.freeze(u)}toString(){return`NodeTranslator(${this.xmlName}, priority=${this.priority})`}};Mt(p4,"translatorTypes",Fje);let tt=p4;const Bje=t=>t["w:type"],jje=t=>{const{lineBreakType:e}=t;return e},$je=Object.freeze({xmlName:"w:type",sdName:"lineBreakType",encode:Bje,decode:jje}),zje=t=>t["w:clear"],Hje=t=>{const{clear:e}=t;return e},Vje=Object.freeze({xmlName:"w:clear",sdName:"clear",encode:zje,decode:Hje}),Uje=[$je,Vje],Wje="w:br",qje="lineBreak",Gje=(t,e)=>{const r={type:(e==null?void 0:e.lineBreakType)==="page"?"hardBreak":"lineBreak"};return e&&(r.attrs={...e}),r},Kje=(t,e)=>{const{node:n}=t;if(!n)return;const r={name:"w:br"};return e&&(r.attributes={...e}),n.type==="hardBreak"&&(!r.attributes||!r.attributes["w:type"])&&(r.attributes={...r.attributes,"w:type":"page"}),{name:"w:r",elements:[r]}},Xje={xmlName:Wje,sdNodeOrKeyName:qje,type:tt.translatorTypes.NODE,encode:Gje,decode:Kje,attributes:Uje},VN=tt.from(Xje),Yje=t=>t==null?void 0:t["w:val"],Zje=t=>t==null?void 0:t.highlight,Jje=Object.freeze({xmlName:"w:val",sdName:"highlight",encode:Yje,decode:Zje}),Qje=[Jje],UN="w:highlight",Jpe="highlight",e$e=new Set(["transparent","none","inherit"]),t$e=(t,e={})=>{var s;const{nodes:n}=t,r=n==null?void 0:n[0],i=e.highlight??((s=r==null?void 0:r.attributes)==null?void 0:s["w:val"]);return{type:"attr",xmlName:UN,sdNodeOrKeyName:Jpe,attributes:{"w:val":i??null}}},n$e=t=>{var o,a;const e=((o=t==null?void 0:t.node)==null?void 0:o.attrs)||{},n=((a=e.highlight)==null?void 0:a["w:val"])??e.highlight??e.color??null;if(!n)return;const r=String(n).trim().toLowerCase();if(!r)return;if(e$e.has(r))return{name:UN,attributes:{"w:val":"none"}};const i=WBe(n);if(i)return{name:UN,attributes:{"w:val":i}};const s=bH(n);if(s)return{name:"w:shd",attributes:{"w:color":"auto","w:val":"clear","w:fill":s}}},r$e={xmlName:UN,sdNodeOrKeyName:Jpe,type:tt.translatorTypes.ATTRIBUTE,encode:t$e,decode:n$e,attributes:Qje},xH=tt.from(r$e),i$e=t=>t["w:val"],s$e=t=>{const{tabType:e}=t||{};return e},o$e=Object.freeze({xmlName:"w:val",sdName:"tabType",encode:i$e,decode:s$e}),a$e=t=>t["w:leader"],l$e=t=>{const{leader:e}=t||{};return e},c$e=Object.freeze({xmlName:"w:leader",sdName:"leader",encode:a$e,decode:l$e}),u$e=t=>t["w:pos"]!=null?parseInt(t["w:pos"]):null,d$e=t=>{const{pos:e}=t||{};return e==null?void 0:e.toString()},f$e=Object.freeze({xmlName:"w:pos",sdName:"pos",encode:u$e,decode:d$e}),h$e=[o$e,f$e,c$e],p$e="w:tab",m$e="tab",g$e=(t,e={})=>{const n={type:"tab"};return e&&(n.attrs={...e}),n};function y$e(t,e={}){var a,l;const{node:n}=t||{};if(!n)return;const r={name:"w:tab",elements:[]};if((a=n.attrs)!=null&&a.tab&&(e=this.decodeAttributes({...t,node:{...n,attrs:n.attrs.tab}},e)),r.attributes={...e},(l=t.extraParams)!=null&&l.skipRun)return r;const i={name:"w:r",elements:[r]},{marks:s=[]}=n,o=lC(s);return o.length&&i.elements.unshift(ebe(o)),i}const b$e={xmlName:p$e,sdNodeOrKeyName:m$e,type:tt.translatorTypes.NODE,encode:g$e,decode:y$e,attributes:h$e},wR=tt.from(b$e),Vi=t=>{if(t)try{return JSON.parse(JSON.stringify(t))}catch(e){console.error("Error in carbonCopy",t,e);return}},w$e=t=>{if(!t||!Array.isArray(t))return t;let e=[],n=null;for(let r of t)r.type==="text"?n&&v$e(n,r)?n={...n,text:n.text+=r.text}:(n&&e.push(n),n={...r}):(n&&(e.push(n),n=null),e.push(r));return n&&e.push(n),e},v$e=(t,e)=>{if(!t||!e)return!1;let n=t.marks??[],r=e.marks??[];if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].attrs||(n[i].attrs={}),r[i].attrs||(r[i].attrs={}),n[i].type!==r[i].type||Object.keys(n[i].attrs).length!==Object.keys(r[i].attrs).length||!x$e(n[i].attrs,r[i].attrs))return!1;return!0},x$e=(t={},e={})=>Tx(t,e),ko="trackInsert",Hi="trackDelete",Zo="trackFormat",wd=(t,e)=>({handlerName:t,handler:n=>{const{nodes:r}=n;if(r.length===0||r[0].name!==e.xmlName)return{nodes:[],consumed:0};const i=e.encode(n);return i?{nodes:Array.isArray(i)?i:[i],consumed:1}:{nodes:[],consumed:0}}});function fi(t,e=null,n="w:val",r=null,i=null){return e||(e=t.split(":")[1]),r||(r=s=>s),i||(i=s=>s),{xmlName:t,sdNodeOrKeyName:e,encode:({nodes:s})=>{var o,a;return r((a=(o=s[0])==null?void 0:o.attributes)==null?void 0:a[n])??void 0},decode:({node:s})=>{var a;const o=((a=s.attrs)==null?void 0:a[e])!=null?i(s.attrs[e]):void 0;return o!=null?{name:t,attributes:{[n]:o}}:void 0}}}function Ar(t,e=null){return e||(e=t.split(":")[1]),{xmlName:t,sdNodeOrKeyName:e,encode:({nodes:n})=>{var r;return vc(((r=n[0].attributes)==null?void 0:r["w:val"])??"1")},decode:({node:n})=>{if(n.attrs[e]!=null)return n.attrs[e]?{attributes:{}}:{attributes:{"w:val":"0"}}}}}const dw=(t,e=null)=>fi(t,e,"w:val",Pl,xc);function pu(t,e=null){return e||(e=t.split(":")[1]),{xmlName:t,sdNodeOrKeyName:e,attributes:[fn("w:w","value",Pl,xc),fn("w:type")],encode:(n,r)=>r.value!=null?r:void 0,decode:function({node:n}){const r=this.decodeAttributes({node:{...n,attrs:n.attrs[e]||{}}});return r["w:w"]!=null?{attributes:r}:void 0}}}function Ac(t,e=null){return e||(e=t.split(":")[1]),{xmlName:t,sdNodeOrKeyName:e,attributes:[fn("w:val","val",n=>n==="nil"?"none":n,n=>n==="none"?"nil":n),fn("w:color","color",n=>n==="auto"?"auto":n?`#${n}`:void 0,n=>{if(n)return n.replace("#","")}),fn("w:themeColor"),fn("w:themeTint"),fn("w:themeShade"),fn("w:sz","size",Pl,xc),fn("w:space",null,Pl,xc),fn("w:shadow",null,vc,Bp),fn("w:frame",null,vc,Bp)],encode:(n,r)=>Object.keys(r).length>0?r:void 0,decode:function({node:n},r){const i=this.decodeAttributes({node:{...n,attrs:n.attrs[e]||{}}});return Object.keys(i).length>0?{attributes:i}:void 0}}}const fn=(t,e=null,n=null,r=null)=>(n||(n=i=>i),r||(r=i=>i),e||(e=t.split(":")[1]),{xmlName:t,sdName:e,encode:i=>n(i[t]),decode:i=>r(i[e])}),Ii=(t,e=null)=>fn(t,e,Pl,xc),p1=(t,e=null)=>fn(t,e,vc,Bp);function EH(t,e,n=!1){const r=t.nodes[0];if(!(r!=null&&r.elements)||r.elements.length===0)return n?[]:{};const i=n?[]:{};return r.elements.forEach(s=>{const o=e[s.name];if(o){let a=o.encode({...t,nodes:[s]});a!=null&&(typeof a=="object"&&("attrs"in a?a=a.attrs:"attributes"in a&&(a=a.attributes)),n?i.push({[o.sdNodeOrKeyName]:a}):i[o.sdNodeOrKeyName]=a)}}),i}function E$e(t,e,n){if(!n||typeof n!="object")return[];const r=[];return Object.keys(n).forEach(i=>{const s=e[i];if(s){const o=s.decode({...t,node:{attrs:{[i]:n[i]}}});o!=null&&(o.name=s.xmlName,r.push(o))}}),r}function vd(t,e,n,r={}){const i={},s={};return n.forEach(o=>{i[o.xmlName]=o,s[o.sdNodeOrKeyName]=o}),{xmlName:t,sdNodeOrKeyName:e,type:tt.translatorTypes.NODE,attributes:[],encode:o=>{const{nodes:a}=o,l=a[0],c={...r,...EH({...o,nodes:[l]},i)};return Object.keys(c).length>0?c:void 0},decode:o=>{var u;const a=(u=o.node.attrs)==null?void 0:u[e],l=E$e(o,s,a);return l.length===0?void 0:{name:t,type:"element",attributes:{},elements:l}}}}function Qpe(t,e=null,n,r={}){e||(e=t.split(":")[1]);const i={},s={};return n.forEach(o=>{i[o.xmlName]=o,s[o.sdNodeOrKeyName]=o}),{xmlName:t,sdNodeOrKeyName:e,attributes:[],encode:o=>{const{nodes:a}=o,l=a[0];return EH({...o,nodes:[l]},i,!0)},decode:o=>{var u;const a=((u=o.node.attrs)==null?void 0:u[e])||[];if(!Array.isArray(a)||a.length===0)return;const l=[];return a.forEach(d=>{const f=Object.keys(d)[0],h=s[f];if(h){const m=h.decode({...o,node:{type:f,attrs:{[f]:d[f]}},extraParams:{...o.extraParams,...r}});m!=null&&l.push(m)}}),{name:t,attributes:{},elements:l.flat()}}}}const vc=t=>t!=null?["1","true","on",1,!0].includes(t):void 0,Bp=t=>t!=null?t?"1":"0":void 0,Pl=t=>{if(t==null)return;const e=parseInt(t,10);return isNaN(e)?void 0:e},xc=t=>{const e=Pl(t);return e!=null?String(e):void 0},eme=tt.from(Ar("w:b","bold")),tme=tt.from(Ar("w:bCs","boldCs")),nme=tt.from(Ac("w:bdr","borders")),rme=tt.from(Ar("w:i","italic")),S$e=t=>t==null?void 0:t["w:val"],A$e=t=>t==null?void 0:t.underline,T$e=Object.freeze({xmlName:"w:val",sdName:"underline",encode:S$e,decode:A$e}),k$e=t=>t==null?void 0:t["w:color"],C$e=t=>t==null?void 0:t.color,_$e=Object.freeze({xmlName:"w:color",sdName:"color",encode:k$e,decode:C$e}),N$e=t=>t==null?void 0:t["w:themeColor"],I$e=t=>t==null?void 0:t.themeColor,R$e=Object.freeze({xmlName:"w:themeColor",sdName:"themeColor",encode:N$e,decode:I$e}),M$e=t=>t==null?void 0:t["w:themeTint"],L$e=t=>t==null?void 0:t.themeTint,D$e=Object.freeze({xmlName:"w:themeTint",sdName:"themeTint",encode:M$e,decode:L$e}),O$e=t=>t==null?void 0:t["w:themeShade"],P$e=t=>t==null?void 0:t.themeShade,F$e=Object.freeze({xmlName:"w:themeShade",sdName:"themeShade",encode:O$e,decode:P$e}),B$e=[T$e,_$e,R$e,D$e,F$e],SH="w:u",ime="underline",j$e=(t,e={})=>{const{nodes:n}=t,r=n==null?void 0:n[0],i=(r==null?void 0:r.attributes)||{},s=e.underline??i["w:val"],o=e.color??i["w:color"],a=e.themeColor??i["w:themeColor"],l=e.themeTint??i["w:themeTint"],c=e.themeShade??i["w:themeShade"],u={"w:val":s??null};return o!=null&&(u["w:color"]=o),a!=null&&(u["w:themeColor"]=a),l!=null&&(u["w:themeTint"]=l),c!=null&&(u["w:themeShade"]=c),{type:"attr",xmlName:SH,sdNodeOrKeyName:ime,attributes:u}},$$e=t=>{var l,c,u;const e=((c=(l=t==null?void 0:t.node)==null?void 0:l.attrs)==null?void 0:c.underline)||((u=t==null?void 0:t.node)==null?void 0:u.attrs)||{},n=e.underlineType??e.underline??e["w:val"]??null,r=e.underlineColor??e.color??e["w:color"]??null,i=e.underlineThemeColor??e.themeColor??e["w:themeColor"]??null,s=e.underlineThemeTint??e.themeTint??e["w:themeTint"]??null,o=e.underlineThemeShade??e.themeShade??e["w:themeShade"]??null;if(!n&&!r&&!i&&!s&&!o)return;const a={};if(n&&(a["w:val"]=n),r){const d=bH(r);d&&(a["w:color"]=d)}return i&&(a["w:themeColor"]=i),s&&(a["w:themeTint"]=s),o&&(a["w:themeShade"]=o),{name:SH,attributes:a}},z$e={xmlName:SH,sdNodeOrKeyName:ime,type:tt.translatorTypes.ATTRIBUTE,encode:j$e,decode:$$e,attributes:B$e},AH=tt.from(z$e),sme=tt.from(Ar("w:strike")),ome=tt.from(Ar("w:dstrike")),ame=tt.from({xmlName:"w:color",sdNodeOrKeyName:"color",attributes:[fn("w:val"),fn("w:themeColor"),fn("w:themeTint"),fn("w:themeShade")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.color||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),lme=tt.from({xmlName:"w:rFonts",sdNodeOrKeyName:"fontFamily",attributes:[fn("w:hint"),fn("w:ascii"),fn("w:hAnsi"),fn("w:eastAsia"),fn("w:cs"),fn("w:val"),fn("w:asciiTheme"),fn("w:hAnsiTheme"),fn("w:eastAsiaTheme"),fn("w:cstheme")],encode:(t,e)=>{if(t.inlineDocumentFonts){const n=e.ascii;n&&(t.inlineDocumentFonts.includes(n)||t.inlineDocumentFonts.push(n))}return e},decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.fontFamily||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),cme=tt.from(fi("w:rStyle","styleId")),ume=tt.from(dw("w:sz","fontSize")),dme=tt.from(dw("w:szCs","fontSizeCs")),fme=tt.from({xmlName:"w:caps",sdNodeOrKeyName:"textTransform",encode:({nodes:t})=>{var e;return vc(((e=t[0].attributes)==null?void 0:e["w:val"])??"1")?"uppercase":"none"},decode:({node:t})=>t.attrs.textTransform!=null?{name:"w:caps",attributes:{"w:val":Bp(t.attrs.textTransform==="uppercase")}}:void 0}),eC=tt.from({xmlName:"w:shd",sdNodeOrKeyName:"shading",attributes:["w:color","w:fill","w:themeColor","w:themeFill","w:themeFillShade","w:themeFillTint","w:themeShade","w:themeTint","w:val"].map(t=>fn(t)),encode:(t,e)=>Object.keys(e).length>0?e:void 0,decode:function({node:t},e){const n=this.decodeAttributes({node:{...t,attrs:t.attrs.shading||{}}});return Object.keys(n).length>0?{attributes:n}:void 0}}),hme=tt.from({xmlName:"w:lang",sdNodeOrKeyName:"lang",attributes:[fn("w:val"),fn("w:eastAsia"),fn("w:bidi")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.lang||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),H$e=tt.from(dw("w:spacing","letterSpacing")),pme=tt.from(fi("w:vertAlign")),mme=tt.from(Ar("w:smallCaps")),TH=tt.from(Ar("w:snapToGrid")),gme=tt.from(Ar("w:emboss")),yme=tt.from(Ar("w:imprint")),bme=tt.from(Ar("w:noProof")),wme=tt.from(Ar("w:oMath")),vme=tt.from(Ar("w:outline")),xme=tt.from(Ar("w:shadow")),Eme=tt.from(Ar("w:vanish")),Sme=tt.from(Ar("w:specVanish")),Ame=tt.from(fi("w:effect")),Tme=tt.from(fi("w:em")),kme=tt.from(fi("w:w")),Cme=tt.from(dw("w:kern")),_me=tt.from(dw("w:position")),Nme=tt.from({xmlName:"w:fitText",sdNodeOrKeyName:"fitText",attributes:[Ii("w:val"),Ii("w:id")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.fitText||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),Ime=tt.from({xmlName:"w:eastAsianLayout",sdNodeOrKeyName:"eastAsianLayout",attributes:[Ii("w:id"),p1("w:combine"),fn("w:combineBrackets"),p1("w:vert"),p1("w:vertCompress")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.eastAsianLayout||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),Rme=tt.from(Ar("w:rtl")),Mme=tt.from(Ar("w:cs")),Lme=tt.from(Ar("w:iCs")),Dme=tt.from(Ar("w:webHidden")),V$e=[tme,eme,nme,fme,ame,Mme,ome,Ime,Ame,Tme,gme,Nme,lme,dme,ume,xH,yme,rme,Lme,Cme,hme,H$e,bme,wme,vme,_me,Rme,cme,xme,eC,mme,TH,Sme,sme,AH,Eme,pme,Dme,kme],E0=tt.from(vd("w:rPr","runProperties",V$e)),U$e=new Set(["wps","wpg","wp14","w14","w15","w16","w16cex","w16cid","w16du","w16sdtdh","w16sdtfl","w16se"]),W$e="mc:AlternateContent",q$e=[],G$e=[];function K$e(t){const{nodeListHandler:e}=t,{node:n}=t.extraParams;if(!n||!n.type)return null;const{branch:r,elements:i}=Ome(n);return i?e.handler({...t,nodes:i,path:Z$e(t.path,n,r)}):null}function X$e(t){const{node:e}=t,{drawingContent:n}=e.attrs,r={name:"w:drawing",elements:[...n?[...n.elements||[]]:[]]};return{name:"mc:AlternateContent",elements:[{name:"mc:Choice",attributes:{Requires:"wps"},elements:[r]}]}}const Y$e={xmlName:W$e,sdNodeOrKeyName:q$e,type:tt.translatorTypes.NODE,encode:K$e,decode:X$e,attributes:G$e};function Ome(t){var o;if(!((o=t==null?void 0:t.elements)!=null&&o.length))return{branch:null,elements:null};const e=t.elements.filter(a=>(a==null?void 0:a.name)==="mc:Choice"),n=t.elements.find(a=>(a==null?void 0:a.name)==="mc:Fallback"),i=e.find(a=>{var c,u;const l=((c=a==null?void 0:a.attributes)==null?void 0:c.Requires)||((u=a==null?void 0:a.attributes)==null?void 0:u.requires);return l?l.split(/\s+/).filter(Boolean).some(d=>U$e.has(d)):!1})||n||e[0]||null,s=i==null?void 0:i.elements;return s?{branch:i,elements:Vi(s)}:{branch:i,elements:null}}const fw=tt.from(Y$e);function Z$e(t=[],e,n){const r=[...t];return e&&r.push(e),n&&r.push(n),r}const Pme=tt.from(Ar("w:adjustRightInd")),Fme=tt.from(Ar("w:autoSpaceDE")),Bme=tt.from(Ar("w:autoSpaceDN")),J$e=tt.from(Ar("w:bidi","rightToLeft")),vR=tt.from({xmlName:"w:cnfStyle",sdNodeOrKeyName:"cnfStyle",attributes:["w:evenHBand","w:evenVBand","w:firstColumn","w:firstRow","w:firstRowFirstColumn","w:firstRowLastColumn","w:lastColumn","w:lastRow","w:lastRowFirstColumn","w:lastRowLastColumn","w:oddHBand","w:oddVBand"].map(t=>fn(t,null,vc,Bp)).concat([fn("w:val")]),encode:(t,e)=>Object.keys(e).length>0?e:void 0,decode:function({node:t}){var n;if(!((n=t.attrs)!=null&&n.cnfStyle))return;const e=this.decodeAttributes({node:{...t,attrs:t.attrs.cnfStyle||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),jme=tt.from(Ar("w:contextualSpacing")),kH=tt.from(fi("w:divId")),$me=tt.from({xmlName:"w:framePr",sdNodeOrKeyName:"framePr",attributes:[p1("w:anchorLock"),fn("w:dropCap"),Ii("w:h"),fn("w:hAnchor"),fn("w:hRule"),Ii("w:hSpace"),Ii("w:lines"),fn("w:vAnchor"),Ii("w:vSpace"),Ii("w:w"),fn("w:wrap"),Ii("w:x"),fn("w:xAlign"),Ii("w:y"),fn("w:yAlign")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.framePr||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),zme=tt.from({xmlName:"w:ind",sdNodeOrKeyName:"indent",attributes:[Ii("w:end"),Ii("w:endChars"),Ii("w:firstLine"),Ii("w:firstLineChars"),Ii("w:hanging"),Ii("w:hangingChars"),Ii("w:left"),Ii("w:leftChars"),Ii("w:right"),Ii("w:rightChars"),Ii("w:start"),Ii("w:startChars")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.indent||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),xR=tt.from(fi("w:jc","justification")),Hme=tt.from(Ar("w:keepLines")),Vme=tt.from(Ar("w:keepNext")),Ume=tt.from(Ar("w:kinsoku")),Wme=tt.from(Ar("w:mirrorIndents")),qme=tt.from(dw("w:ilvl")),Gme=t=>{const e=t.find(n=>n.type==="trackFormat");if(e)return{type:"element",name:"w:rPrChange",attributes:{"w:id":e.attrs.id,"w:author":e.attrs.author,"w:authorEmail":e.attrs.authorEmail,"w:date":e.attrs.date},elements:e.attrs.before.map(n=>lC([n])).filter(n=>n!==void 0)}},Q$e="w:ins",eze="trackInsert",tze=[fn("w:id","id"),fn("w:date","date"),fn("w:author","author"),fn("w:authorEmail","authorEmail")],nze=(t,e={})=>{const{nodeListHandler:n,extraParams:r={}}=t,{node:i}=r,s=n.handler({...t,insideTrackChange:!0,nodes:i.elements,path:[...t.path||[],i]});return e.importedAuthor=`${e.author} (imported)`,s.forEach(o=>{var a;o.marks=[],(a=o==null?void 0:o.content)!=null&&a[0]&&(o.content[0].marks===void 0&&(o.content[0].marks=[]),o.content[0].type==="text"&&o.content[0].marks.push({type:"trackInsert",attrs:e}))}),s};function rze(t){const{node:e}=t;if(!e||!e.type)return null;const n=["trackInsert","trackFormat","trackDelete"],r=e.marks,i=r.find(a=>a.type==="trackInsert"),s=Gme(r);e.marks=r.filter(a=>!n.includes(a.type)),s&&e.marks.push(s);const o=jp({...t,node:e});return{name:"w:ins",attributes:{"w:id":i.attrs.id,"w:author":i.attrs.author,"w:authorEmail":i.attrs.authorEmail,"w:date":i.attrs.date},elements:[o]}}const ize={xmlName:Q$e,sdNodeOrKeyName:eze,type:tt.translatorTypes.ATTRIBUTE,encode:nze,decode:rze,attributes:tze},ER=tt.from(ize),Kme=tt.from(dw("w:numId")),sze=[fw,qme,ER,Kme],Xme=tt.from(vd("w:numPr","numberingProperties",sze)),Yme=tt.from(fi("w:outlineLvl","outlineLvl","w:val",Pl,xc)),Zme=tt.from(Ar("w:overflowPunct")),Jme=tt.from(Ac("w:bar")),oze=tt.from(Ac("w:between")),SR=tt.from(Ac("w:bottom")),Qme=tt.from(pu("w:bottom","marginBottom")),AR=tt.from(Ac("w:left")),ege=tt.from(pu("w:left","marginLeft")),TR=tt.from(Ac("w:right")),tge=tt.from(pu("w:right","marginRight")),kR=tt.from(Ac("w:top")),nge=tt.from(pu("w:top","marginTop")),aze=[fw,Jme,oze,SR,AR,TR,kR],rge=tt.from(vd("w:pBdr","borders",aze)),ige=tt.from(fi("w:pStyle","styleId")),sge=tt.from(Ar("w:pageBreakBefore")),oge=tt.from({xmlName:"w:spacing",sdNodeOrKeyName:"spacing",attributes:[Ii("w:after"),p1("w:afterAutospacing"),Ii("w:afterLines"),Ii("w:before"),p1("w:beforeAutospacing"),Ii("w:beforeLines"),Ii("w:line"),fn("w:lineRule")],encode:(t,e)=>e,decode:function({node:t}){const e=this.decodeAttributes({node:{...t,attrs:t.attrs.spacing||{}}});return Object.keys(e).length>0?{attributes:e}:void 0}}),age=tt.from(Ar("w:suppressAutoHyphens")),lge=tt.from(Ar("w:suppressLineNumbers")),cge=tt.from(Ar("w:suppressOverlap")),lze=[fw,wR],uge=tt.from(Qpe("w:tabs","tabStops",lze,{skipRun:!0})),dge=tt.from(fi("w:textAlignment")),CH=tt.from(fi("w:textDirection")),fge=tt.from(fi("w:textboxTightWrap")),hge=tt.from(Ar("w:topLinePunct")),pge=tt.from(Ar("w:widowControl")),mge=tt.from(Ar("w:wordWrap")),cze=[fw,Pme,Fme,Bme,J$e,vR,jme,kH,$me,zme,xR,Hme,Vme,Ume,Wme,Xme,Yme,Zme,rge,ige,sge,eC,TH,oge,age,lge,cge,uge,dge,CH,fge,hge,pge,mge,E0],tC=tt.from(vd("w:pPr","paragraphProperties",cze));function _H({type:t="single",color:e=null,thickness:n=null,approximate:r=!0}={}){const i=[],s=(c,u)=>{u&&i.push(`${c}: ${u}`)},o=String(t||"single").toLowerCase();if(o==="none"||o==="0")return s("text-decoration","none"),i.join("; ");s("text-decoration-line","underline");const a=n||"0.2em",l=n||"0.15em";switch(o){case"single":break;case"double":s("text-decoration-style","double");break;case"thick":s("text-decoration-thickness",l);break;case"dotted":s("text-decoration-style","dotted");break;case"dash":case"dashed":s("text-decoration-style","dashed");break;case"dotdash":case"dotdotdash":case"dashlong":case"dashlongheavy":r&&(s("text-decoration-style","dashed"),o.includes("heavy")&&s("text-decoration-thickness",a));break;case"dottedheavy":s("text-decoration-style","dotted"),s("text-decoration-thickness",a);break;case"dashedheavy":s("text-decoration-style","dashed"),s("text-decoration-thickness",a);break;case"wavy":s("text-decoration-style","wavy");break;case"wavyheavy":s("text-decoration-style","wavy"),s("text-decoration-thickness",a);break;case"wavydouble":r&&(s("text-decoration-style","wavy"),s("text-decoration-thickness",a));break}return e&&s("text-decoration-color",e),i.join("; ")}const uze=["fontSize","bold","italic","strike","underline","letterSpacing"],dze=20;function b5(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}function E2(t,e={}){const{fullOverrideProps:n=[],specialHandling:r={}}=e;if(!t||t.length===0)return{};const i=(s,o)=>{const a={...s};if(b5(s)&&b5(o)){for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=r[l];c&&typeof c=="function"?a[l]=c(a,o):!n.includes(l)&&b5(o[l])&&l in s&&b5(s[l])?a[l]=i(s[l],o[l]):a[l]=o[l]}}return a};return t.reduce((s,o)=>i(s,o??{}),{})}function fze(t){return E2(t,{fullOverrideProps:["fontFamily","color"]})}function hze(t,e,n=uze){if(!e)return t;for(const r of n)e[r]!=null&&(t[r]=e[r]);return t}function VO(t){return typeof t=="number"&&Number.isFinite(t)&&t>0}function pze(t,e,n){return VO(t)?t:e&&VO(e.fontSize)?e.fontSize:n&&VO(n.fontSize)?n.fontSize:dze}function gge(t,e,n){return n?[t,e]:[e,t]}function mze(){return(t,e)=>(t.hanging!=null&&e.firstLine!=null&&delete t.hanging,e.firstLine)}function yge(t){const e=t.map(n=>n.indent!=null?{indent:n.indent}:{});return E2(e,{specialHandling:{firstLine:mze()}})}function bge(t){return{resolveRunProperties:(e,n,r,i=!1,s=!1)=>gze(t,e,n,r,i,s),resolveParagraphProperties:(e,n,r=!1,i=!1,s=null)=>yze(t,e,n,r,i,s),getDefaultProperties:NH,getStyleProperties:kx,resolveStyleChain:vy,getNumberingProperties:(e,n,r,i,s=0)=>CR(t,e,n,r,i,s)}}function gze(t,e,n,r,i=!1,s=!1){const o=r==null?void 0:r.styleId,a=vy(e,o,t.rPr),l=NH(e,t.rPr),{properties:c,isDefault:u}=kx(e,"Normal",t.rPr);let d={};o!=null&&o.startsWith("TOC")||(d=n!=null&&n.styleId?vy(e,n.styleId,t.rPr):{});const f=gge(l,c,u),h=n??{};let m,y=h;if(i){let b={};const E=r==null?void 0:r.numberingProperties,A=E==null?void 0:E.numId;A!=null&&A!==0&&A!=="0"&&(b=CR(t,e,(E==null?void 0:E.ilvl)??0,A,t.rPr));const x=s?h:{};x!=null&&x.underline&&delete x.underline,m=[...f,a,d,x,b],y=x}else m=[...f,a,d,h];const w=fze(m);return hze(w,y),w.fontSize=pze(w.fontSize,l,c),w}function yze(t,e,n,r=!1,i=!1,s=null){var N,L,M,C,D,O,$,U;const o=NH(e,t.pPr),{properties:a,isDefault:l}=kx(e,"Normal",t.pPr),c=n??{};let u=c==null?void 0:c.styleId,d=c!=null&&c.styleId?vy(e,c.styleId,t.pPr):{},f={};const h=((N=c==null?void 0:c.numberingProperties)==null?void 0:N.ilvl)??((L=d==null?void 0:d.numberingProperties)==null?void 0:L.ilvl);let m=((M=c==null?void 0:c.numberingProperties)==null?void 0:M.numId)??((C=d==null?void 0:d.numberingProperties)==null?void 0:C.numId),y=((D=c==null?void 0:c.numberingProperties)==null?void 0:D.numId)!=null;const w=(O=c==null?void 0:c.numberingProperties)==null?void 0:O.numId;(w===0||w==="0")&&(m=null);const E=m!=null&&m!==0&&m!=="0";if(E&&(f=CR(t,e,h??0,m,t.pPr),i&&f.styleId&&(u=f.styleId,d=vy(e,u,t.pPr),c))){c.styleId=u;const ce=c.numberingProperties;(($=d.numberingProperties)==null?void 0:$.ilvl)===(ce==null?void 0:ce.ilvl)&&((U=d.numberingProperties)==null?void 0:U.numId)===(ce==null?void 0:ce.numId)&&(delete c.numberingProperties,y=!1)}const A=s?vy(e,s,t.pPr):{},x=gge(o,a,l),T=[...x,A,f,d,c];let R;E?y?R=[...x,d,f,c]:(d=vy(e,u,t.pPr,!1),R=[...x,f,d,c]):R=[...x,f,d,c];const k=E2(T),_=yge(R);return k.indent=_.indent,r&&!(c!=null&&c.spacing)&&!(d!=null&&d.spacing)&&(k.spacing=void 0),k}function vy(t,e,n,r=!0){let i={},s;e&&e!=="Normal"&&({properties:i,basedOn:s}=kx(t,e,n));let o=[i];const a=new Set;let l=s;for(;r&&l&&!a.has(s);){a.add(s);const c=kx(t,l,n),u=c.properties;l=c.basedOn,u&&Object.keys(u).length&&o.push(u),s=l}return o=o.reverse(),E2(o)}function NH(t,e){var d,f;const n=t==null?void 0:t.docx,r=n==null?void 0:n["word/styles.xml"],i=(f=(d=r==null?void 0:r.elements)==null?void 0:d[0])==null?void 0:f.elements;if(!(i!=null&&i.length))return{};const s=i.find(h=>h.name==="w:docDefaults"),o=e.xmlName,a=s==null?void 0:s.elements,l=a==null?void 0:a.find(h=>h.name===`${o}Default`),c=l==null?void 0:l.elements,u=c==null?void 0:c.find(h=>h.name===o);return u?e.encode({...t,nodes:[u]})||{}:{}}function kx(t,e,n){var m,y,w,b;const r={properties:{},isDefault:!1,basedOn:void 0};if(!e)return r;const i=t==null?void 0:t.docx,s=i==null?void 0:i["word/styles.xml"],o=(y=(m=s==null?void 0:s.elements)==null?void 0:m[0])==null?void 0:y.elements;if(!(o!=null&&o.length))return r;const a=o.find(E=>{var A;return E.name==="w:style"&&((A=E.attributes)==null?void 0:A["w:styleId"])===e}),l=a==null?void 0:a.elements,c=l==null?void 0:l.find(E=>E.name==="w:basedOn"),u=(w=c==null?void 0:c.attributes)==null?void 0:w["w:val"],d=l==null?void 0:l.find(E=>E.name===n.xmlName);if(!d)return{...r,basedOn:u};const f=n.encode({...t,nodes:[d]})||{},h=((b=a==null?void 0:a.attributes)==null?void 0:b["w:default"])==="1";return{properties:f,isDefault:h,basedOn:u}}function CR(t,e,n,r,i,s=0){var L,M,C,D;const o=e==null?void 0:e.numbering;if(!o)return{};const{definitions:a,abstracts:l}=o;if(!a||!l)return{};const c=[],u=a[r];if(!u)return{};const d=u.elements,f=d==null?void 0:d.find(O=>{var $;return O.name==="w:lvlOverride"&&(($=O.attributes)==null?void 0:$["w:ilvl"])==n}),h=f==null?void 0:f.elements,m=h==null?void 0:h.find(O=>O.name===i.xmlName);if(m){const O=i.encode({...e,nodes:[m]})||{};c.push(O)}const y=d==null?void 0:d.find(O=>O.name==="w:abstractNumId"),w=(L=y==null?void 0:y.attributes)==null?void 0:L["w:val"],b=l[w];if(!b)return{};const E=b.elements,A=E==null?void 0:E.find(O=>O.name==="w:numStyleLink"),x=(M=A==null?void 0:A.attributes)==null?void 0:M["w:val"];if(x&&s<1){const{properties:O}=kx(e,x,t.pPr),$=(C=O==null?void 0:O.numberingProperties)==null?void 0:C.numId;if($)return CR(t,e,n,$,i,s+1)}const T=E==null?void 0:E.find(O=>{var $;return O.name==="w:lvl"&&(($=O.attributes)==null?void 0:$["w:ilvl"])==n});if(!T)return{};const R=T.elements,k=R==null?void 0:R.find(O=>O.name===i.xmlName);if(!k)return{};const _=i.encode({...e,nodes:[k]})||{},N=R==null?void 0:R.find(O=>O.name==="w:pStyle");if(N){const O=(D=N.attributes)==null?void 0:D["w:val"];_.styleId=O}return c.push(_),c.reverse(),E2(c)}function IH(t,e,n){var o;if(!t||typeof t!="object")return null;const r=t["w:ascii"]??t.ascii,i=t["w:asciiTheme"]??t.asciiTheme;let s=r;if(e&&i){const a=e["word/theme/theme1.xml"],l=a==null?void 0:a.elements;if(l!=null&&l.length){const c=l[0],u=c==null?void 0:c.elements,d=u==null?void 0:u.find(x=>x.name==="a:themeElements"),f=d==null?void 0:d.elements,h=f==null?void 0:f.find(x=>x.name==="a:fontScheme"),m=h==null?void 0:h.elements,y=i.startsWith("minor")?"minor":"major",w=m==null?void 0:m.find(x=>x.name===`a:${y}Font`),b=w==null?void 0:w.elements,E=b==null?void 0:b.find(x=>x.name==="a:latin");s=((o=E==null?void 0:E.attributes)==null?void 0:o.typeface)||s}}return s?n?n(s,e??void 0):s:null}const wge=bge({pPr:tC,rPr:E0}),vge=()=>Xc.toCssFontFamily,Bee=.65,nC=(t,e,n,r=!1,i=!1)=>wge.resolveRunProperties(t,e,n,r,i);function xge(t,e,n=!1,r=!1,i=null){return wge.resolveParagraphProperties(t,e,n,r,i)}const bze=(t,e=[],n={})=>E2(t,{fullOverrideProps:e,specialHandling:n}),wze=t=>bze(t,["fontFamily","color"]);function RH(t,e){const n=[],r={};let i=null,s=!1;return Object.keys(t).forEach(o=>{const a=t[o];switch(o){case"strike":case"italic":case"bold":n.push({type:o,attrs:{value:a}});break;case"textTransform":r[o]=a;break;case"color":a.val?a.val.toLowerCase()==="auto"?r[o]=a.val:r[o]=`#${a.val.replace("#","").toUpperCase()}`:r[o]=null;break;case"underline":let l=a["w:val"];if(!l)break;let c=a["w:color"];c&&c.toLowerCase()!=="auto"&&!c.startsWith("#")&&(c=`#${c}`),n.push({type:o,attrs:{underlineType:l,underlineColor:c}});break;case"styleId":r[o]=a;break;case"fontSize":const u=Bg(a);r[o]=`${u}pt`;break;case"letterSpacing":const d=yR(a);r[o]=`${d}pt`;break;case"fontFamily":const f=IH(a,e,vge());r[o]=f;const h=typeof a=="object"&&a!==null?a.eastAsia:void 0;if(h){const y=Ege({"w:ascii":h},e);(!f||y!==r.fontFamily)&&(r.eastAsiaFontFamily=y)}break;case"highlight":const m=Sge(a);m&&(s=!0,i=m);break;case"shading":{if(s)break;const y=a.fill,w=a.val;if(y&&String(y).toLowerCase()!=="auto")i=`#${String(y).replace("#","")}`;else if(typeof w=="string"){const b=w.toLowerCase();(b==="clear"||b==="nil"||b==="none")&&(i="transparent")}break}case"vertAlign":{a&&(r.vertAlign=a);break}case"position":{if(a!=null&&Number.isFinite(a)){const y=Bg(a);Number.isFinite(y)&&(r.position=`${y}pt`)}break}}}),Object.keys(r).length&&n.push({type:"textStyle",attrs:r}),i&&n.push({type:"highlight",attrs:{color:i}}),n}function vze(t,e,n){var c,u;if(!t||typeof t!="object")return{};let r={};const{spacing:i,indent:s,borders:o,justification:a}=t,l=n==null?void 0:n.styleId;if(i){const d=(y,w)=>!y||y.beforeAutospacing&&w?0:y.before||0,f=!!((c=t.framePr)!=null&&c.dropCap),h={...i};if(e&&delete h.before,f)h.line=mH(1),h.lineRule="auto",delete h.after;else{const y=d(n==null?void 0:n.spacing,!!(n!=null&&n.numberingProperties));h.after=Math.max(h.after||0,y),t.contextualSpacing&&l!=null&&l===t.styleId&&(h.after-=((u=t.spacing)==null?void 0:u.after)||0),n!=null&&n.contextualSpacing&&l!=null&&l===t.styleId&&(h.after-=y),h.after=Math.max(h.after,0)}const m=Sze(h,!!t.numberingProperties);r={...r,...m}}if(s&&typeof s=="object"&&Object.values(s).some(f=>f!=null&&Number(f)!==0)){const{left:f,right:h,firstLine:m,hanging:y}=s;f!=null&&(r["margin-left"]=`${Dr(f)}px`),h!=null&&(r["margin-right"]=`${Dr(h)}px`),m!=null&&!y&&(r["text-indent"]=`${Dr(m)}px`),m!=null&&y!=null&&(r["text-indent"]=`${Dr(m-y)}px`),m==null&&y!=null&&(r["text-indent"]=`${Dr(-y)}px`)}if(o&&typeof o=="object"){const d=["top","right","bottom","left"],f={single:"solid",dashed:"dashed",dotted:"dotted",double:"double"};d.forEach(h=>{const m=o[h];if(!m)return;if(["nil","none",void 0,null].includes(m.val)){r[`border-${h}`]="none";return}const y=m.size!=null?`${Ax(m.size)}px`:"1px",w=f[m.val]||"solid",b=!m.color||m.color==="auto"?"#000000":`#${m.color}`;r[`border-${h}`]=`${y} ${w} ${b}`,m.space!=null&&h==="bottom"&&(r["padding-bottom"]=`${Ax(m.space)}px`)})}return a&&(a==="both"?r["text-align"]="justify":r["text-align"]=a),r}function xze(t,e){if(!t||typeof t!="object")return{};const n={},r=new Set;let i=!1,s=null,o=!1,a,l;if(Object.keys(t).forEach(c=>{const u=t[c];switch(c){case"bold":{const d=UO(u);d===!0?n["font-weight"]="bold":d===!1&&(n["font-weight"]="normal");break}case"italic":{const d=UO(u);d===!0?n["font-style"]="italic":d===!1&&(n["font-style"]="normal");break}case"strike":{const d=UO(u);d===!0?q_(r,"line-through"):d===!1&&(n["text-decoration"]="none",i=!0);break}case"textTransform":{u!=null&&(n["text-transform"]=u);break}case"color":{const d=u==null?void 0:u.val;if(d==null||d==="")break;String(d).toLowerCase()==="auto"?n.color="auto":n.color=`#${String(d).replace("#","").toUpperCase()}`;break}case"underline":{const d=u==null?void 0:u["w:val"];if(!d)break;let f=u==null?void 0:u["w:color"];f&&typeof f=="string"&&f.toLowerCase()!=="auto"&&!f.startsWith("#")&&(f=`#${f}`);const h=_H({type:d,color:f}),m=Eze(h);Object.entries(m).forEach(([y,w])=>{if(w){if(y==="text-decoration"){n[y]=w,w==="none"&&(i=!0);return}if(y==="text-decoration-line"){q_(r,w);return}n[y]=w}});break}case"fontSize":{if(u==null)break;const d=Bg(u);Number.isFinite(d)&&(n["font-size"]=`${d}pt`);break}case"letterSpacing":{if(u==null)break;const d=yR(u);Number.isFinite(d)&&(n["letter-spacing"]=`${d}pt`);break}case"fontFamily":{if(!u)break;const d=IH(u,e,vge());d&&(n["font-family"]=d);const f=typeof u=="object"&&u!==null?u.eastAsia:void 0;if(f){const h=Ege({"w:ascii":f},e);h&&(!d||h!==d)&&(n["font-family"]=n["font-family"]||h)}break}case"highlight":{const d=Sge(u);d&&(o=!0,s=d);break}case"shading":{if(o)break;const d=u==null?void 0:u.fill,f=u==null?void 0:u.val;if(d&&String(d).toLowerCase()!=="auto")s=`#${String(d).replace("#","")}`;else if(typeof f=="string"){const h=f.toLowerCase();(h==="clear"||h==="nil"||h==="none")&&(s="transparent")}break}case"vertAlign":{if(t.position!=null&&Number.isFinite(t.position))break;if(u==="superscript"||u==="subscript")if(a=u==="superscript"?"super":"sub",t.fontSize!=null&&Number.isFinite(t.fontSize)){const d=Bg(t.fontSize*Bee);Number.isFinite(d)&&(l=`${d}pt`)}else l=`${Bee*100}%`;else u==="baseline"&&(a="baseline");break}case"position":{if(u!=null&&Number.isFinite(u)){const d=Bg(u);Number.isFinite(d)&&(a=`${d}pt`,l=void 0)}break}}}),!i&&r.size){const c=new Set;q_(c,n["text-decoration-line"]),r.forEach(u=>c.add(u)),n["text-decoration-line"]=Array.from(c).join(" ")}return s&&(n["background-color"]=s,"color"in n||(n.color="inherit")),l&&(n["font-size"]=l),a&&(n["vertical-align"]=a),n}function rC(t){const e={};return t&&t.forEach(n=>{const r=n.type.name??n.type;switch(r){case"strike":case"italic":case"bold":e[r]=n.attrs.value!=="0"&&n.attrs.value!==!1;break;case"underline":{const{underlineType:i,underlineColor:s}=n.attrs,o={};i&&(o["w:val"]=i),s&&(o["w:color"]=s.replace("#","")),Object.keys(o).length>0&&(e.underline=o);break}case"highlight":n.attrs.color&&(n.attrs.color.toLowerCase()==="transparent"?e.highlight={"w:val":"none"}:e.highlight={"w:val":n.attrs.color});break;case"textStyle":Object.keys(n.attrs).forEach(i=>{const s=n.attrs[i];switch(i){case"textTransform":s!=null&&(e[i]=s);break;case"color":s!=null&&(e.color={val:s.replace("#","")});break;case"fontSize":{const o=parseFloat(s);isNaN(o)||(e.fontSize=o*2);break}case"letterSpacing":{const o=parseFloat(s);isNaN(o)||(e.letterSpacing=gH(o));break}case"fontFamily":if(s!=null){const o=s.split(",")[0].trim(),a={};["ascii","eastAsia","hAnsi","cs"].forEach(l=>{a[l]=o}),e.fontFamily=a}break;case"vertAlign":s!=null&&(e.vertAlign=s);break;case"position":{if(s!=null){const o=parseFloat(s);isNaN(o)||(e.position=o*2)}break}}});break}}),e}function Ege(t,e){var s,o,a,l,c;const n=t["w:ascii"]??t.ascii,r=t["w:asciiTheme"]??t.asciiTheme;let i=n;if(e&&r){const u=e["word/theme/theme1.xml"];if((s=u==null?void 0:u.elements)!=null&&s.length){const{elements:d}=u,{elements:f}=d[0]||{},h=f==null?void 0:f.find(E=>E.name==="a:themeElements"),m=(o=h==null?void 0:h.elements)==null?void 0:o.find(E=>E.name==="a:fontScheme"),y=r.startsWith("minor")?"minor":"major",w=(a=m==null?void 0:m.elements)==null?void 0:a.find(E=>E.name===`a:${y}Font`),b=(l=w==null?void 0:w.elements)==null?void 0:l.find(E=>E.name==="a:latin");i=((c=b==null?void 0:b.attributes)==null?void 0:c.typeface)||i}}return i?Xc.toCssFontFamily(i,e):null}function Sge(t){const e=t["w:fill"];return e&&e!=="auto"?`#${e}`:(t==null?void 0:t["w:val"])==="none"?"transparent":Ipe(t==null?void 0:t["w:val"])?`#${t["w:val"]}`:Npe(t==null?void 0:t["w:val"])||null}function UO(t){if(t==null)return null;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){const e=t.toLowerCase();if(e==="0"||e==="false"||e==="off")return!1;if(e==="1"||e==="true"||e==="on")return!0}return!!t}function Eze(t){return!t||typeof t!="string"?{}:t.split(";").map(e=>e.trim()).filter(Boolean).reduce((e,n)=>{const r=n.indexOf(":");if(r===-1)return e;const i=n.slice(0,r).trim(),s=n.slice(r+1).trim();return!i||!s||(e[i]=s),e},{})}function q_(t,e){if(e){if(e instanceof Set){e.forEach(n=>q_(t,n));return}String(e).split(/\s+/).map(n=>n.trim()).filter(Boolean).forEach(n=>t.add(n))}}const Sze=(t,e)=>{let{before:n,after:r,line:i,lineRule:s,beforeAutospacing:o,afterAutospacing:a}=t;i=sb(i),i!=null&&i<1&&(i=1),s==="exact"&&i&&(i=String(i)),n=Dr(n),o&&e&&(n=0),r=Dr(r),a&&e&&(r=0);const l={};return n&&(l["margin-top"]=`${n}px`),r&&(l["margin-bottom"]=`${r}px`),i&&(s!=="atLeast"||i>=1)&&(i=Math.max(i,1),l["line-height"]=String(i)),l};function Db(t,e=[],n=null){var s;const r=[],i=new Set;return(s=t==null?void 0:t.elements)==null||s.forEach(o=>{const a=Xc.markTypes.filter(c=>c.name===o.name);a.length||["w:shd","w:rStyle","w:pStyle","w:numPr","w:outlineLvl","w:bdr","w:noProof","w:contextualSpacing","w:keepNext","w:tabs","w:keepLines"].includes(o.name)&&e.push(o.name);let l=a;if(o.name==="w:spacing"){const u=(o.attributes||{})["w:val"];l=a.filter(d=>u?d.type==="letterSpacing":d.type==="lineHeight")}l.forEach(c=>{if(!c||i.has(c.type))return;i.add(c.type);const{attributes:u={}}=o,d={type:c.type},f=["w:b","w:caps","w:strike","w:dstrike"];if(!((u["w:val"]==="0"||u["w:val"]==="none")&&!f.includes(c.name)||["w:u"].includes(c.name)&&!u["w:val"])){if(c.mark&&(d.type=c.mark),c.name==="w:caps"){d.attrs={},u["w:val"]==="0"?d.attrs[c.property]="none":d.attrs[c.property]="uppercase",r.push(d);return}if(Object.keys(u).length){const m=Cze(c.type,u,n);if(m==null)return;d.attrs={},d.attrs[c.property]=m}r.push(d)}})}),kze(r)}function Aze(t,e,n){var a;if(!t)return[];const{attributes:r}=t,i={id:r["w:id"],date:r["w:date"],author:r["w:author"],authorEmail:r["w:authorEmail"]};let s=[];const o=(a=t.elements)==null?void 0:a.find(l=>l.name==="w:rPr");if(o){const l=E0.encode({...n,nodes:[o]});s=RH(l,n==null?void 0:n.docx)}return[{type:Zo,attrs:{...i,before:s,after:[...e]}}]}function Tze(t,e){var o;const n=(o=t.elements)==null?void 0:o.find(a=>a.name==="w:rPrChange");if(!n)return[];const{attributes:r}=n,i={id:r["w:id"],date:r["w:date"],author:r["w:author"],authorEmail:r["w:authorEmail"]},s=Db(n);return[{type:Zo,attrs:{...i,before:s,after:[...e]}}]}function kze(t){const e=t.filter(s=>s.type==="textStyle"),n=t.filter(s=>s.type!=="textStyle"),r={};return e.length&&e.forEach(s=>{const{attrs:o={}}=s;Object.keys(o).forEach(a=>{r[a]=o[a]})}),[...n,{type:"textStyle",attrs:r}]}function Cze(t,e,n){t==="tabs"&&(t="textIndent");const r={color:()=>`#${e["w:val"]}`,fontSize:()=>`${e["w:val"]/2}pt`,textIndent:()=>Nze(e),fontFamily:()=>_ze(e,n),lineHeight:()=>Ize(e),letterSpacing:()=>`${yR(e["w:val"])}pt`,textAlign:()=>e["w:val"],link:()=>e.href,underline:()=>e["w:val"],bold:()=>(e==null?void 0:e["w:val"])||null,italic:()=>(e==null?void 0:e["w:val"])||null,highlight:()=>Rze(e),strike:()=>Mze(e)};if(t in r)return r[t]()}function _ze(t,e){var s,o,a,l,c;const n=t["w:ascii"]??t.ascii,r=t["w:asciiTheme"]??t.asciiTheme;let i=n;if(e&&r){const u=e["word/theme/theme1.xml"];if((s=u==null?void 0:u.elements)!=null&&s.length){const{elements:d}=u,{elements:f}=d[0]||{},h=f==null?void 0:f.find(E=>E.name==="a:themeElements"),m=(o=h==null?void 0:h.elements)==null?void 0:o.find(E=>E.name==="a:fontScheme"),y=r.startsWith("minor")?"minor":"major",w=(a=m==null?void 0:m.elements)==null?void 0:a.find(E=>E.name===`a:${y}Font`),b=(l=w==null?void 0:w.elements)==null?void 0:l.find(E=>E.name==="a:latin");i=((c=b==null?void 0:b.attributes)==null?void 0:c.typeface)||i}}return i?Xc.toCssFontFamily(i,e):null}function Nze(t){let e=t["w:left"];return e?`${Os(e)}in`:null}function Ize(t){const e=t["w:line"],n=t["w:lineRule"];return!e||e==="0"?null:n==="exact"?`${yR(e)}pt`:`${sb(e)}`}function Rze(t){const e=t["w:fill"];return e&&e!=="auto"?`#${e}`:Ipe(t==null?void 0:t["w:val"])?`#${t["w:val"]}`:Npe(t==null?void 0:t["w:val"])||null}function Mze(t){const e=t==null?void 0:t["w:val"];if(e==null)return"1";const n=String(e).trim().toLowerCase();return n==="1"||n==="true"||n==="on"?"1":n==="0"||n==="false"||n==="off"?"0":"1"}function Lze(t){var c,u,d,f,h;const e=[],n=[],{attributes:r={},elements:i=[]}=t,{nodes:s,paragraphProperties:o={},runProperties:a={}}=Dze(i);if(i.find(m=>m.name==="w:r")&&(o.elements=(c=o==null?void 0:o.elements)==null?void 0:c.filter(m=>m.name!=="w:rPr")),a&&((u=a==null?void 0:a.elements)!=null&&u.length)&&e.push(...Db(a,n)),o&&((d=o.elements)!=null&&d.length)){const m=["w:u"],y={...o,elements:(f=o.elements)==null?void 0:f.filter(w=>!m.includes(w.name))};e.push(...Db(y,n))}return e.push(...Tze(a,e)),o&&((h=o.elements)!=null&&h.length)&&(r.paragraphProperties=o),e&&t.name==="w:p"&&e.forEach(m=>{const y=Object.keys(m.attrs??{})[0];if(y){const w=m.attrs[y];r[y]=w}}),{elements:s,attributes:r,marks:e,unknownMarks:n}}function Dze(t){const e=t.find(s=>s.name==="w:pPr"),n=t.find(s=>s.name==="w:rPr"),r=t.find(s=>s.name==="w:sectPr");return{nodes:t.filter(s=>s.name!=="w:pPr"&&s.name!=="w:rPr"&&s.name!=="w:sectPr"),paragraphProperties:e,runProperties:n,sectionProperties:r}}function Oze(t){var i,s,o;const e=t.find(a=>a.name==="w:tbl");if(!e)return;const n=(i=e.elements)==null?void 0:i.find(a=>a.name==="w:tblPr");if(!n)return;const r=(s=n.elements)==null?void 0:s.find(a=>a.name==="w:tblStyle");if(r)return(o=r.attributes)==null?void 0:o["w:val"]}const Pze=t=>{var w,b,E;const{nodes:e,nodeListHandler:n,filename:r}=t,i=Vi(e[0]);let s;const o=(w=i.elements)==null?void 0:w.find(A=>A.name==="w:pPr");let a={};o&&(a=tC.encode({...t,nodes:[o]})||{});const l=(t.path||[]).some(A=>A.name==="w:tc"),c=Oze(t.path||[]),u=xge(t,a,l,!1,c),{elements:d=[],attributes:f={},marks:h=[]}=Lze(i,t.docx),m=[];if(d.length){const A=d.map(R=>(R.marks||(R.marks=[]),R.marks.push(...h),R)),x={...t,nodes:A,extraParams:{...t.extraParams,paragraphProperties:u},path:[...t.path||[],i]},T=n.handler(x);m.push(...T)}s={type:"paragraph",content:m,attrs:{...f},marks:[]},s.type="paragraph",s.attrs.paragraphProperties=a,s.attrs.rsidRDefault=(b=i.attributes)==null?void 0:b["w:rsidRDefault"],s.attrs.filename=r,s&&s.content&&(s={...s,content:w$e(s.content)});const y=(E=o==null?void 0:o.elements)==null?void 0:E.find(A=>A.name==="w:sectPr");return y&&(s.attrs.paragraphProperties.sectPr=y,s.attrs.pageBreakSource="sectPr"),s};function Fze(t){var o,a;const{node:e}=t,{attrs:n={}}=e,r=Vi(n.paragraphProperties||{});let i=tC.decode({node:{...e,attrs:{paragraphProperties:r}}});const s=(a=(o=e.attrs)==null?void 0:o.paragraphProperties)==null?void 0:a.sectPr;return s&&(i||(i={type:"element",name:"w:pPr",elements:[]}),i.elements.push(s)),i}function Bze(t){var o;const e=hu(t),n=e.find(a=>a.name==="htmlAnnotation");if(n)return n.elements;const r=Fze(t);r&&e.unshift(r);let i={};return(o=t.node.attrs)!=null&&o.rsidRDefault&&(i["w:rsidRDefault"]=t.node.attrs.rsidRDefault),{name:"w:p",elements:e,attributes:i}}const jze=t=>t["w:rsidDel"],$ze=t=>t.rsidDel,zze=Object.freeze({xmlName:"w:rsidDel",sdName:"rsidDel",encode:jze,decode:$ze}),Hze=t=>t["w:rsidP"],Vze=t=>t.rsidP,Uze=Object.freeze({xmlName:"w:rsidP",sdName:"rsidP",encode:Hze,decode:Vze}),Wze=t=>t["w:rsidR"],qze=t=>t.rsidR,Gze=Object.freeze({xmlName:"w:rsidR",sdName:"rsidR",encode:Wze,decode:qze}),Kze=t=>t["w:rsidRPr"],Xze=t=>t.rsidRPr,Yze=Object.freeze({xmlName:"w:rsidRPr",sdName:"rsidRPr",encode:Kze,decode:Xze}),Zze=t=>t["w:rsidRDefault"],Jze=t=>t.rsidRDefault,Qze=Object.freeze({xmlName:"w:rsidRDefault",sdName:"rsidRDefault",encode:Zze,decode:Jze}),eHe=t=>t["w14:paraId"],tHe=t=>t.paraId,nHe=Object.freeze({xmlName:"w14:paraId",sdName:"paraId",encode:eHe,decode:tHe}),rHe=t=>t["w14:textId"],iHe=t=>t.textId,sHe=Object.freeze({xmlName:"w14:textId",sdName:"textId",encode:rHe,decode:iHe}),oHe=[nHe,sHe,Gze,Qze,Uze,Yze,zze],aHe="w:p",lHe="paragraph",cHe=(t,e={})=>{const n=Pze(t);if(n)return e&&Object.keys(e).length&&(n.attrs={...n.attrs,...e}),n},uHe=(t,e={})=>{const n=Bze(t);if(n)return e&&Object.keys(e).length&&(n.attributes={...n.attributes||{},...e}),n},dHe={xmlName:aHe,sdNodeOrKeyName:lHe,type:tt.translatorTypes.NODE,encode:cHe,decode:uHe,attributes:oHe},S2=tt.from(dHe),fHe=/[\u1100-\u11FF\u2E80-\u2EFF\u2F00-\u2FDF\u3040-\u30FF\u3100-\u312F\u3130-\u318F\u31A0-\u31BF\u3400-\u4DBF\u4E00-\u9FFF\uA960-\uA97F\uAC00-\uD7AF\uF900-\uFAFF\uFF00-\uFFEF]/u,hHe=t=>fHe.test(t),pHe=(t,e)=>{if(!e)return t;const n=t==null?void 0:t.eastAsiaFontFamily;if(!n)return t;const r={...t};return delete r.eastAsiaFontFamily,typeof e=="string"&&hHe(e)?{...r,fontFamily:n}:r},G_=t=>{if(!t||typeof t!="object")return t;const e={...t};return t.attrs&&typeof t.attrs=="object"&&(e.attrs={...t.attrs},Array.isArray(t.attrs.runProperties)&&(e.attrs.runProperties=t.attrs.runProperties.map(n=>({xmlName:n==null?void 0:n.xmlName,attributes:{...(n==null?void 0:n.attributes)||{}}})))),e},Rh=t=>!t||typeof t!="object"?t:{name:t.name,type:t.type,attributes:t.attributes?{...t.attributes}:void 0,elements:Array.isArray(t.elements)?t.elements.map(e=>Rh(e)):void 0,text:t.text},mHe=(t,e)=>{if(!t||!e)return;Array.isArray(t.elements)||(t.elements=[]);let n=t.elements.find(s=>(s==null?void 0:s.name)==="w:rPr");n||(n={name:"w:rPr",elements:[]},t.elements.unshift(n)),Array.isArray(n.elements)||(n.elements=[]),e.attributes&&(n.attributes={...n.attributes||{},...e.attributes});const r=s=>typeof s=="string"&&s.includes(":");n.elements=n.elements.filter(s=>r(s==null?void 0:s.name));const i=new Set(n.elements.map(s=>s==null?void 0:s.name));(e.elements||[]).forEach(s=>{!r(s==null?void 0:s.name)||i.has(s.name)||(n.elements.push(Rh(s)),i.add(s.name))})},K_=t=>t&&{...t,attrs:t.attrs?{...t.attrs}:void 0},XA=t=>{if(!t||typeof t!="object")return t;const e={...t};return t.marks&&(e.marks=t.marks.map(n=>K_(n))),t.content&&(e.content=t.content.map(n=>XA(n))),t.elements&&(e.elements=t.elements.map(n=>XA(n))),t.attributes&&(e.attributes={...t.attributes}),e},jee=(t=[])=>t.map(e=>XA(e)),gHe=(t={})=>{const e=Array.isArray(t.marks)?t.marks:[],n=e.filter(o=>(o==null?void 0:o.type)===ko||(o==null?void 0:o.type)===Hi);if(!n.length)return{runNode:t,trackingMarksByType:new Map};const r=new Map;n.forEach(o=>{o!=null&&o.type&&r.set(o.type,K_(o))});const i=e.filter(o=>(o==null?void 0:o.type)!==ko&&(o==null?void 0:o.type)!==Hi).map(o=>K_(o)),s=Array.isArray(t.content)?t.content.map(o=>{const a=XA(o),l=Array.isArray(a.marks)?a.marks.slice():[];return n.forEach(c=>{l.push(K_(c))}),a.marks=l,a}):[];return{runNode:{...XA(t),marks:i,content:s},trackingMarksByType:r}},$ee=(t,e)=>{const n=(t==null?void 0:t.attrs)||{},r={};return e.forEach((i,s)=>{n[s]!=null&&(r[i]=n[s])}),r},Age=t=>{!t||typeof t!="object"||(t.name==="w:t"&&(t.name="w:delText"),Array.isArray(t.elements)&&t.elements.forEach(Age))},yHe=(t,e=new Map)=>{if(!Array.isArray(t)||!t.length)return t;const n=t[0];if((n==null?void 0:n.name)==="w:ins"||(n==null?void 0:n.name)==="w:del"||!e.size)return t;if(e.has(ko)){const r=e.get(ko),i=jee(t);return[{name:"w:ins",attributes:$ee(r,new Map([["id","w:id"],["author","w:author"],["authorEmail","w:authorEmail"],["date","w:date"]])),elements:i}]}if(e.has(Hi)){const r=e.get(Hi),i=jee(t);return i.forEach(Age),[{name:"w:del",attributes:$ee(r,new Map([["id","w:id"]])),elements:i}]}return t};function wa(t=8){return Math.floor(Math.random()*2147483648).toString(16).padStart(t,"0").slice(0,t)}function Sp(){return Math.floor(Math.random()*2147483647).toString()}function MH(){return Math.floor(Math.random()*2147483647).toString(16).toUpperCase().padStart(8,"0")}const bHe="w:hyperlink",wHe="link",RE=(t,e)=>({xmlName:t,sdName:e,encode:n=>n[t],decode:n=>n[e]}),vHe=[RE("w:anchor","anchor"),RE("w:docLocation","docLocation"),{xmlName:"w:history",sdName:"history",encode:t=>t["w:history"]==null?null:t["w:history"]==="1"||t["w:history"]==="true",decode:t=>t.history==null?null:t.history?"1":"0"},RE("w:tooltip","tooltip"),RE("r:id","rId"),RE("w:tgtFrame","target")],xHe=(t,e)=>{const{nodes:n,docx:r,nodeListHandler:i}=t,s=n[0];let o=EHe(r,e);const a={type:"link",attrs:{...e,href:o}},l=["sd:pageReference","sd:autoPageNumber","sd:totalPageNumber"],c=s.elements.filter(d=>d.name==="w:r"||l.includes(d.name));return c.forEach(d=>{const h=(Array.isArray(d.marks)?d.marks:[]).filter(m=>(m==null?void 0:m.type)!=="link");d.marks=[...h,a]}),i.handler({...t,nodes:c,path:[...t.path||[],s]})},EHe=(t,e)=>{const r=t["word/_rels/document.xml.rels"].elements.find(l=>l.name==="Relationships"),{elements:i}=r,{rId:s,anchor:o}=e;let a;if(!s&&o)a=`#${o}`;else if(s){const l=i.find(u=>u.attributes.Id===s)||{},{attributes:c={}}=l;a=c.Target}return a};function SHe(t){const{hyperlinkGroup:e=[t.node]}=t.extraParams||{},r=e[0].marks.find(c=>c.type==="link"),i=this.decodeAttributes({...t,node:r});let{href:s,anchor:o}=r.attrs;!i["r:id"]&&!o&&(i["r:id"]=AHe(t,s));let a=[];return e.forEach(c=>{"marks"in c?c.marks=c.marks.filter(d=>d.type!=="link"):c.attrs.marksAsAttrs=c.attrs.marksAsAttrs.filter(d=>d.type!=="link");const u=jp({...t,node:c});u&&(u instanceof Array?a.push(...u):a.push(u))}),{name:"w:hyperlink",type:"element",attributes:{...i},elements:a}}function AHe(t,e){let n=wa();return(!t.relationships||!Array.isArray(t.relationships))&&(t.relationships=[]),t.relationships.push({type:"element",name:"Relationship",attributes:{Id:`rId${n}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Target:e,TargetMode:"External"}}),`rId${n}`}const THe={xmlName:bHe,sdNodeOrKeyName:wHe,type:tt.translatorTypes.NODE,encode:xHe,decode:SHe,attributes:vHe},iC=tt.from(THe),kHe=t=>t["w:rsidR"],CHe=t=>t.rsidR,_He=Object.freeze({xmlName:"w:rsidR",sdName:"rsidR",encode:kHe,decode:CHe}),NHe=t=>t["w:rsidRPr"],IHe=t=>t.rsidRPr,RHe=Object.freeze({xmlName:"w:rsidRPr",sdName:"rsidRPr",encode:NHe,decode:IHe}),MHe=t=>t["w:rsidDel"],LHe=t=>t.rsidDel,DHe=Object.freeze({xmlName:"w:rsidDel",sdName:"rsidDel",encode:MHe,decode:LHe}),OHe=[_He,RHe,DHe],Y7="w:r",Tge="run",WO=(t,e,n,r)=>{const i={type:Tge,content:t,attrs:{...e,runProperties:r}};return n.length&&(i.marks=n.map(s=>G_(s))),i},PHe=(t,e={})=>{var _,N;const{nodes:n=[],nodeListHandler:r}=t||{},i=n[0];if(!i)return;const s=Array.isArray(i.elements)?i.elements:[],o=s.find(L=>(L==null?void 0:L.name)==="w:rPr"),a=o?E0.encode({...t,nodes:[o]}):{},l=((_=t==null?void 0:t.extraParams)==null?void 0:_.paragraphProperties)||{},c=nC(t,a??{},l),u=RH(c,t==null?void 0:t.docx),d=Array.isArray(u)?u:[],f=(N=o==null?void 0:o.elements)==null?void 0:N.find(L=>L.name==="w:rPrChange"),h=Aze(f,d,t)||[];let m=Array.isArray(i.marks)?i.marks.map(L=>G_(L)):[];h!=null&&h.length&&(m=[...m,...h.map(L=>G_(L))]);const y=o?s.filter(L=>L!==o):s,w={...t,nodes:y},b=(r==null?void 0:r.handler(w))||[],A=(Array.isArray(b)?b:[]).map(L=>{if(!L||typeof L!="object")return L;const M=Array.isArray(L.marks)?L.marks:[];let C=[...d,...M,...m].map($=>G_($));const D=new Set;let O;return C=C.filter($=>!$||!$.type?!1:D.has($.type)?($.type==="textStyle"&&(O.attrs={...O.attrs||{},...$.attrs||{}},O.attrs=pHe(O.attrs,L==null?void 0:L.text)),!1):($.type==="textStyle"&&(O=$),D.add($.type),!0)),{...L,marks:C}}).filter(Boolean);if(!A.some(L=>(L==null?void 0:L.type)==="lineBreak"))return WO(A,e,m,a);const T=[];let R=[];const k=()=>{if(!R.length)return;const L=WO(R,e,m,a);L&&T.push(L),R=[]};return A.forEach(L=>{if((L==null?void 0:L.type)==="lineBreak"){k();const M=WO([L],e,m,a);M&&T.push(M)}else R.push(L)}),k(),T},FHe=(t,e={})=>{var w;const{node:n}=t||{};if(!n)return;if((w=n.marks)==null?void 0:w.some(b=>b.type==="link")){const b={...t.extraParams,linkProcessed:!0};return iC.decode({...t,extraParams:b})}const{runNode:i,trackingMarksByType:s}=gHe(n),a=(i.attrs||{}).runProperties||{},l={...t,node:i,extraParams:{...t==null?void 0:t.extraParams,runProperties:a}};l.editor||(l.editor={extensionService:{extensions:[]}});const c=hu(l)||[];let u=E0.decode({...t,node:{attrs:{runProperties:a}}});const d=u?Rh(u):null,f=b=>mHe(b,d),h=b=>{Array.isArray(b.elements)?b.elements=b.elements.filter(E=>(E==null?void 0:E.name)!=="w:rPr"):b.elements=[],d&&b.elements.unshift(Rh(d))},m=[];c.forEach(b=>{if(!b)return;if(b.name==="w:r"){const A=Rh(b);h(A),m.push(A);return}if(b.name==="w:hyperlink"){const A=Rh(b);Array.isArray(A.elements)&&A.elements.forEach(x=>f(x)),m.push(A);return}if(b.name==="w:ins"||b.name==="w:del"){const A=Rh(b);Array.isArray(A.elements)&&A.elements.forEach(x=>{(x==null?void 0:x.name)==="w:r"&&h(x)}),m.push(A);return}if(b.name==="w:commentRangeStart"||b.name==="w:commentRangeEnd"){const A=Rh(b);m.push(A);return}const E={name:Y7,elements:[]};f(E),Array.isArray(E.elements)||(E.elements=[]),E.elements.push(Rh(b)),m.push(E)});const y=yHe(m,s);if(!y.length){const b={name:Y7,elements:[]};f(b),y.push(b)}return e&&Object.keys(e).length&&y.forEach(b=>{b.attributes={...b.attributes||{},...e}}),y.length===1?y[0]:y},BHe={xmlName:Y7,sdNodeOrKeyName:Tge,type:tt.translatorTypes.NODE,encode:PHe,decode:FHe,attributes:OHe},LH=tt.from(BHe),kge=tt.from(pu("w:tcW","cellWidth")),Cge=tt.from(fi("w:gridSpan",null,"w:val",t=>Pl(t)??void 0,t=>xc(t))),_ge=tt.from(fi("w:vMerge",null,"w:val",t=>t||"continue")),DH=tt.from(Ac("w:end")),Nge=tt.from(pu("w:end","marginEnd")),OH=tt.from(Ac("w:insideH")),PH=tt.from(Ac("w:insideV")),FH=tt.from(Ac("w:start")),Ige=tt.from(pu("w:start","marginStart")),Rge=tt.from(Ac("w:tl2br")),Mge=tt.from(Ac("w:tr2bl")),jHe=[kR,FH,AR,SR,DH,TR,OH,PH,Rge,Mge],Lge=tt.from(vd("w:tcBorders","borders",jHe)),Dge=tt.from(fi("w:noWrap",null,"w:val",t=>vc(t??"true"),t=>Bp(t))),$He=[Qme,Nge,ege,tge,Ige,nge],Oge=tt.from(vd("w:tcMar","cellMargins",$He)),Pge=tt.from(fi("w:tcFitText",null,"w:val",t=>vc(t??"true"),t=>Bp(t))),Fge=tt.from(fi("w:vAlign")),Bge=tt.from(fi("w:hideMark",null,"w:val",t=>vc(t??"true"),t=>Bp(t))),jge=tt.from(fi("w:header")),$ge=tt.from(Qpe("w:headers","headers",[jge])),zHe=[vR,kge,Cge,_ge,Lge,eC,Dge,Oge,CH,Pge,Fge,Bge,$ge],BH=tt.from(vd("w:tcPr","tableCellProperties",zHe));function HHe({params:t,node:e,table:n,row:r,rowBorders:i,columnIndex:s,columnWidth:o=null,allColumnWidths:a=[],rowIndex:l=0,totalRows:c=1,totalColumns:u,_referencedStyles:d}){var W,ce,se,Q,J,K,re,X,me;const{nodeListHandler:f}=t,h={},m=d??{fontSize:null,fonts:{},cellMargins:{}},y=e.elements.find(G=>G.name==="w:tcPr"),w=y?BH.encode({...t,nodes:[y]})??{}:{};h.tableCellProperties=w;const b=u??(a.length||1),E=c??(((W=n==null?void 0:n.elements)==null?void 0:W.filter(G=>G.name==="w:tr").length)||1),A=parseInt(w.gridSpan||1,10),x=l===0,T=l===E-1,R=s===0,k=s+A>=b,_={};i&&((((ce=i.top)==null?void 0:ce.val)==="none"||x&&i.top)&&(_.top=i.top),(((se=i.bottom)==null?void 0:se.val)==="none"||T&&i.bottom)&&(_.bottom=i.bottom),(((Q=i.left)==null?void 0:Q.val)==="none"||R&&i.left)&&(_.left=i.left),(((J=i.right)==null?void 0:J.val)==="none"||k&&i.right)&&(_.right=i.right),!T&&i.insideH&&(_.bottom=i.insideH),!k&&i.insideV&&(_.right=i.insideV)),h.borders=_;const N=UHe(w.borders,_);N&&(h.borders=Object.assign(h.borders,N)),A>1&&(h.colspan=A);let L=(K=w.cellWidth)!=null&&K.value?Dr((re=w.cellWidth)==null?void 0:re.value):null;const M=(X=w.cellWidth)==null?void 0:X.type;if(M&&(h.widthType=M),!L&&o&&(L=o),L){h.colwidth=[L],h.widthUnit="px";const G=a,B=a&&a.length>0;if(A>1&&B){let z=[];for(let de=0;de<A;de++){let Y=G[s+de];typeof Y<"u"?z.push(Y):z.push(100)}z.length&&(h.colwidth=[...z])}}const C={color:(me=w.shading)==null?void 0:me.fill};C.color&&(h.background=C);const D=w.vAlign;D&&(h.verticalAlign=D),h.cellMargins=qHe(w.cellMargins,m);const{fontSize:O,fonts:$={}}=m,U=$.ascii;if(O&&(h.fontSize=O),U&&(h.fontFamily=U),w.vMerge==="restart"){const G=n.elements.filter(ae=>ae.name==="w:tr"),B=G.findIndex(ae=>ae===r),z=G.slice(B+1);let Y=r.elements.filter(ae=>ae.name==="w:tc").findIndex(ae=>ae===e),ee=1;for(let ae of z){const ie=ae.elements.findIndex(Te=>Te.name==="w:tc"),H=ae.elements[ie+Y];if(!H)break;const be=WHe(H);if(!be||be==="restart")break;ee++,ae.elements.splice(ie+Y,1)}h.rowspan=ee}return{type:"tableCell",content:VHe(f.handler({...t,nodes:e.elements,path:[...t.path||[],e]}),t.editor),attrs:h}}function VHe(t,e){if(!Array.isArray(t)||t.length===0)return t;const n=[],r=[],i=e==null?void 0:e.schema,s=l=>{if(!l)return l;const c={...l};return Array.isArray(l.content)&&(c.content=[...l.content]),c},o=l=>(Array.isArray(l.content)||(l.content=[]),l.content),a=l=>{var u,d;if(!l||typeof l.type!="string")return!1;if(l.type==="text"||l.type==="bookmarkStart"||l.type==="bookmarkEnd")return!0;const c=(u=i==null?void 0:i.nodes)==null?void 0:u[l.type];if(c){if(typeof c.isInline=="boolean")return c.isInline;if((d=c.spec)!=null&&d.group&&typeof c.spec.group=="string")return c.spec.group.split(" ").includes("inline")}return!1};for(const l of t){if(!l||typeof l.type!="string"){n.push(l);continue}if(!a(l)){const u=s(l);if(r.length){const d=o(u),f=r.splice(0);u.content=[...f,...d]}else Array.isArray(u.content)&&(u.content=[...u.content]);n.push(u);continue}if(l.type==="bookmarkStart"||n.length===0)r.push(l);else{const u=n.length-1,d=n[u];if(!d||typeof d.type!="string"||a(d)){r.push(l);continue}const f=o(d);r.length&&f.push(...r.splice(0)),f.push(l)}}if(r.length){if(n.length){const l=n.length-1,c=n[l];c&&typeof c.type=="string"&&!a(c)&&(o(c).push(...r),r.length=0)}r.length&&(n.push({type:"paragraph",attrs:{},content:[...r]}),r.length=0)}return n}const UHe=(t,e)=>t?["bottom","top","left","right"].reduce((n,r)=>{const i=t[r],s=e[r];if(i&&i.val!=="none"){const o=i.color;let a=i.size;return a&&(a=Ax(a)),n[r]={color:o,size:a,val:i.val},n}if(i&&i.val==="none"){const o=Object.assign({},s||{});return o.val="none",n[r]=o,n}return n},{}):null,WHe=t=>{var r,i;const e=t.elements.find(s=>s.name==="w:tcPr"),n=(r=e==null?void 0:e.elements)==null?void 0:r.find(s=>s.name==="w:vMerge");return n?((i=n.attributes)==null?void 0:i["w:val"])||"continue":null},qHe=(t,e)=>{const{cellMargins:n={}}=e;return["left","right","top","bottom"].reduce((r,i)=>{var l;const s=`margin${i.charAt(0).toUpperCase()+i.slice(1)}`,o=t?(l=t==null?void 0:t[s])==null?void 0:l.value:null,a=n?n[s]:null;return o!=null?r[i]=Dr(o):a==null?r[i]=void 0:typeof a=="object"?r[i]=Dr(a.value):r[i]=Dr(a),r},{})};function GHe(t){const e=hu({...t,tableCell:t.node}),n=KHe(t.node);return e.unshift(n),{name:"w:tc",elements:e}}function KHe(t){var w,b,E,A;const e={...((w=t.attrs)==null?void 0:w.tableCellProperties)||{}},{attrs:n}=t,{colwidth:r=[],cellWidthType:i="dxa",widthUnit:s}=n,o=r.reduce((x,T)=>x+T,0);Dr((b=e.cellWidth)==null?void 0:b.value)!==o&&(e.cellWidth={value:s==="px"?pc(o):tc(o),type:i});const{colspan:l}=n;l>1&&e.gridSpan!==l?e.gridSpan=l:(!l||(e==null?void 0:e.gridSpan)===1)&&delete e.gridSpan;const{background:c={}}=n;c!=null&&c.color&&((E=e.shading)==null?void 0:E.fill)!==(c==null?void 0:c.color)?e.shading={fill:c.color}:!(c!=null&&c.color)&&((A=e==null?void 0:e.shading)!=null&&A.fill)&&delete e.shading;const{cellMargins:u}=n;u&&["left","right","top","bottom"].forEach(x=>{var R,k,_;const T=`margin${x.charAt(0).toUpperCase()+x.slice(1)}`;u[x]!=null?(e.cellMargins||(e.cellMargins={}),Dr((k=(R=e.cellMargins)==null?void 0:R[T])==null?void 0:k.value)!==u[x]&&(e.cellMargins[T]={value:pc(u[x]),type:"dxa"})):(_=e==null?void 0:e.cellMargins)!=null&&_[T]&&delete e.cellMargins[T]});const{verticalAlign:d}=n;d&&d!==e.vAlign?e.vAlign=d:!d&&(e!=null&&e.vAlign)&&delete e.vAlign;const{rowspan:f}=n,h=e.vMerge!=null;f&&f>1?e.vMerge="restart":n.continueMerge?e.vMerge="continue":h||delete e.vMerge;const{borders:m={}}=n;return m&&Object.keys(m).length?["top","bottom","left","right"].forEach(x=>{var T,R;if(m[x]){let k=(T=e.borders)==null?void 0:T[x],_=Ax(k==null?void 0:k.size),N=m[x].color;m[x].color&&N==="#000000"&&(N="auto"),(_!==m[x].size||(k==null?void 0:k.color)!==N||m[x].val!==(k==null?void 0:k.val))&&(e.borders||(e.borders={}),e.borders[x]={size:FBe(m[x].size||0),color:N,space:m[x].space||0,val:m[x].val||"single"})}else(R=e.borders)!=null&&R[x]&&delete e.borders[x]}):e!=null&&e.borders&&delete e.borders,BH.decode({node:{...t,attrs:{...t.attrs,tableCellProperties:e}}})}const XHe="w:tc",YHe="tableCell",ZHe=[];function JHe(t,e){const{node:n,table:r,row:i,rowBorders:s,columnIndex:o,columnWidth:a,columnWidths:l,rowIndex:c,totalRows:u,totalColumns:d,_referencedStyles:f}=t.extraParams,h=HHe({params:t,node:n,table:r,row:i,rowBorders:s,columnIndex:o,columnWidth:a,allColumnWidths:l,rowIndex:c,totalRows:u,totalColumns:d,_referencedStyles:f});return e&&Object.keys(e).length&&(h.attrs={...h.attrs,...e}),h}function QHe(t,e){const n=GHe(t);return e&&Object.keys(e).length&&(n.attributes={...n.attributes||{},...e}),n}const eVe={xmlName:XHe,sdNodeOrKeyName:YHe,type:tt.translatorTypes.NODE,encode:JHe,decode:QHe,attributes:ZHe},jH=tt.from(eVe),tVe=[SR,DH,OH,PH,AR,TR,FH,kR],$H=tt.from(vd("w:tblBorders","borders",tVe)),zge=tt.from({xmlName:"w:cantSplit",sdNodeOrKeyName:"cantSplit",encode:({nodes:t})=>{var e;return["1","true"].includes(((e=t[0].attributes)==null?void 0:e["w:val"])??"1")},decode:({node:t})=>{var e;return(e=t.attrs)!=null&&e.cantSplit?{attributes:{}}:void 0}}),Hge=tt.from(fi("w:gridAfter",null,"w:val",t=>Pl(t)??void 0,t=>xc(t))),Vge=tt.from(fi("w:gridBefore",null,"w:val",t=>Pl(t)??void 0,t=>xc(t))),Uge=tt.from({xmlName:"w:hidden",sdNodeOrKeyName:"hidden",encode:({nodes:t})=>{var e;return vc(((e=t[0].attributes)==null?void 0:e["w:val"])??"1")},decode:({node:t})=>t.attrs.hidden?{attributes:{}}:void 0}),zH=tt.from(pu("w:tblCellSpacing","tableCellSpacing")),Wge=tt.from({xmlName:"w:tblHeader",sdNodeOrKeyName:"repeatHeader",encode:({nodes:t})=>{var e;return vc(((e=t[0].attributes)==null?void 0:e["w:val"])??"1")},decode:({node:t})=>t.attrs.repeatHeader?{attributes:{}}:void 0}),qge=tt.from({xmlName:"w:trHeight",sdNodeOrKeyName:"rowHeight",encode:({nodes:t})=>{const e={},n=t[0].attributes["w:val"];n&&(e.value=parseInt(n,10));const r=t[0].attributes["w:hRule"];return r&&(e.rule=r),Object.keys(e).length>0?e:void 0},decode:({node:t})=>{var n;if(!((n=t.attrs)!=null&&n.rowHeight))return;const e={};return typeof t.attrs.rowHeight.value=="number"&&!isNaN(t.attrs.rowHeight.value)&&(e["w:val"]=String(t.attrs.rowHeight.value)),t.attrs.rowHeight.rule&&(e["w:hRule"]=t.attrs.rowHeight.rule),Object.keys(e).length>0?{attributes:e}:void 0}}),Gge=tt.from(pu("w:wAfter")),Kge=tt.from(pu("w:wBefore")),nVe=[zge,vR,kH,Hge,Vge,Uge,xR,zH,Wge,qge,Gge,Kge],HH=tt.from(vd("w:trPr","tableRowProperties",nVe,{cantSplit:!1,hidden:!1,repeatHeader:!1})),rVe=(t,e)=>{const n=Number.isFinite(t)?t:0,r={val:"none",size:0};return{type:"tableCell",attrs:{colspan:1,rowspan:1,colwidth:[n],__placeholder:e,borders:{top:{...r},right:{...r},bottom:{...r},left:{...r}}},content:[{type:"paragraph",content:[]}]}},iVe=(t,e,n)=>{let r=e;for(;r<n&&t[r]>0;)t[r]-=1,r+=1;return r},sVe=({content:t,pendingRowSpans:e,currentIndex:n,targetIndex:r,totalColumns:i,gridColumnWidths:s,reason:o})=>{let a=n;for(;a<r&&a<i;){if(e[a]>0){e[a]-=1,a+=1;continue}const l=Array.isArray(s)?s[a]??0:0;t.push(rVe(l,o)),a+=1}return a},qO=t=>{var n,r;if(!t)return!1;if((n=t.attrs)!=null&&n.__placeholder)return!0;const e=(r=t.attrs)==null?void 0:r.colwidth;return!!(Array.isArray(e)&&e.length>0&&!e.some(s=>typeof s=="number"&&Number.isFinite(s)&&Math.abs(s)>1))},oVe="w:tr",aVe="tableRow",lVe=["w:rsidDel","w:rsidR","w:rsidRPr","w:rsidTr","w14:paraId","w14:textId"].map(t=>fn(t)),cVe=(t,e)=>{var A,x;const{row:n}=t.extraParams;let r={};const i=n.elements.find(T=>T.name==="w:trPr");i&&(r=HH.encode({...t,nodes:[i]}));const s=r==null?void 0:r.gridBefore,o=typeof s=="number"&&Number.isFinite(s)&&s>0?s:0;e.tableRowProperties=Object.freeze(r),e.rowHeight=Dr((A=r.rowHeight)==null?void 0:A.value),e.cantSplit=r.cantSplit;const a=(x=t.extraParams)==null?void 0:x.rowBorders,l=uVe({params:t,row:n,baseBorders:a}),{columnWidths:c,activeRowSpans:u=[]}=t.extraParams,d=Array.isArray(c)?c.length:0,f=Array.isArray(u)?u.slice():[];for(;f.length<d;)f.push(0);const h=n.elements.filter(T=>T.name==="w:tc"),m=[];let y=0;const w=(T,R)=>{y=sVe({content:m,pendingRowSpans:f,currentIndex:y,targetIndex:T,totalColumns:d,gridColumnWidths:c,reason:R})},b=()=>{y=iVe(f,y,d)};return w(o,"gridBefore"),b(),h==null||h.forEach(T=>{var N,L;b();const R=y,k=(c==null?void 0:c[R])||null,_=jH.encode({...t,path:[...t.path||[],T],extraParams:{...t.extraParams,rowBorders:{...a,...l},node:T,columnIndex:R,columnWidth:k}});if(_){m.push(_);const M=Math.max(1,((N=_.attrs)==null?void 0:N.colspan)||1),C=Math.max(1,((L=_.attrs)==null?void 0:L.rowspan)||1);if(C>1)for(let D=0;D<M;D+=1){const O=R+D;O<f.length&&(f[O]=Math.max(f[O],C-1))}y=R+M}}),b(),w(d,"gridAfter"),{type:"tableRow",content:m,attrs:e}};function uVe({params:t,row:e,baseBorders:n}){var a,l,c,u;const r=(l=(a=e==null?void 0:e.elements)==null?void 0:a.find)==null?void 0:l.call(a,d=>d.name==="w:tblPrEx"),i=(u=(c=r==null?void 0:r.elements)==null?void 0:c.find)==null?void 0:u.call(c,d=>d.name==="w:tblBorders");if(!i)return n;const s=$H.encode({...t,nodes:[i]})||{},o=dVe(s);return Object.keys(o).length?{...n||{},...o}:n}function dVe(t){const e={};return Object.entries(t||{}).forEach(([n,r])=>{const i={},s=r==null?void 0:r.color,o=r==null?void 0:r.size,a=r==null?void 0:r.val;s&&s!=="auto"&&(i.color=s.startsWith("#")?s:`#${s}`),o!=null&&o!=="auto"&&(i.size=Ax(o)),a&&(i.val=a),e[n]=i}),e}const fVe=(t,e)=>{var d,f;const{node:n}=t,r=n.content||[];let i=0;for(;i<r.length&&qO(r[i]);)i+=1;let s=0;for(;s<r.length-i&&qO(r[r.length-1-s]);)s+=1;const o=r.slice(i,r.length-s),l=o.map(h=>{if(h!=null&&h.attrs&&"__placeholder"in h.attrs){const{__placeholder:m,...y}=h.attrs;return{...h,attrs:y}}return h}).filter((h,m)=>!qO(o[m])),c={...t,node:{...n,content:l}},u=hu(c);if((d=n.attrs)!=null&&d.tableRowProperties){const h={...n.attrs.tableRowProperties};i>0&&(h.gridBefore=i),s>0&&(h.gridAfter=s),n.attrs.rowHeight!=null&&Dr((f=n.attrs.tableRowProperties.rowHeight)==null?void 0:f.value)!==n.attrs.rowHeight&&(h.rowHeight={value:String(pc(n.attrs.rowHeight))}),h.cantSplit=n.attrs.cantSplit;const m=HH.decode({...t,node:{...n,attrs:{...n.attrs,tableRowProperties:h}}});m&&u.unshift(m)}return{name:"w:tr",attributes:e||{},elements:u}},hVe={xmlName:oVe,sdNodeOrKeyName:aVe,type:tt.translatorTypes.NODE,encode:cVe,decode:fVe,attributes:lVe},VH=tt.from(hVe);function UH(t){if(typeof t!="string")return{};const e=t.trim();if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function zee(t){var _,N,L,M;const{nodes:e}=t;if(e.length===0||e[0].name!=="w:sdt")return null;const n=e[0],r=n.elements.find(C=>C.name==="w:sdtPr"),i=n.elements.find(C=>C.name==="w:sdtContent"),s=(_=r==null?void 0:r.elements)==null?void 0:_.find(C=>C.name==="w:id"),o=r==null?void 0:r.elements.find(C=>C.name==="w:alias"),a=r==null?void 0:r.elements.find(C=>C.name==="w:tag"),l=a==null?void 0:a.attributes["w:val"],c=(l==null?void 0:l.startsWith("{"))&&(l==null?void 0:l.endsWith("}"));let u={};const d=WN((N=o==null?void 0:o.attributes)==null?void 0:N["w:val"]);if(c){const C=UH(l);u={type:C.fieldTypeShort,fieldId:C.fieldId,displayLabel:C.displayLabel,defaultDisplayLabel:C.defaultDisplayLabel,fieldType:C.fieldType,fieldColor:C.fieldColor,multipleImage:C.fieldMultipleImage,fontFamily:C.fieldFontFamily,fontSize:C.fieldFontSize,textColor:C.fieldTextColor,textHighlight:C.fieldTextHighlight,hash:C.hash}}else u=pVe({sdtPr:r,tag:a,alias:o,sdtId:s});const f=WN(u.displayLabel),h=mVe(i);u.defaultDisplayLabel||(f?u.defaultDisplayLabel=f:d&&(u.defaultDisplayLabel=d));const m=gVe(u,d),y=bVe(m),w=!!((M=(L=t.editor)==null?void 0:L.options)!=null&&M.annotations),b=yVe(h,y),E=!w&&b&&(vVe(h)||!y);b?u.displayLabel=h:!u.displayLabel&&m&&(u.displayLabel=m);const{attrs:A,marks:x}=Xge(i),T={...u,...A,...r&&{sdtPr:r}};if(T.hash||(T.hash=wa(4)),!u.fieldId||!u.type)return null;let k={type:"text",text:E?h:y,attrs:T,marks:x};return w&&(k={type:"fieldAnnotation",attrs:T}),k}const Xge=(t={})=>{var l,c;const n=(l=t.elements)==null?void 0:l.find(u=>u.name==="w:r"),r=(c=n==null?void 0:n.elements)==null?void 0:c.find(u=>u.name==="w:rPr");if(!r)return{};const s=Db(r,[])||[],o=[];s.forEach(u=>{const{type:d}=u;if(d==="textStyle"){const{attrs:f}=u;Object.keys(f).forEach(h=>{o.push({type:h,attrs:f[h]})})}else o.push(u)});const a={};return o==null||o.forEach(u=>{const{type:d}=u;a[d]=u.attrs||!0}),{attrs:a,marks:s}};function pVe({sdtPr:t,tag:e,alias:n,sdtId:r}){var h,m,y,w,b,E,A,x;const i=(h=t==null?void 0:t.elements.find(T=>T.name==="w:fieldTypeShort"))==null?void 0:h.attributes["w:val"],s=(m=t==null?void 0:t.elements.find(T=>T.name==="w:fieldType"))==null?void 0:m.attributes["w:val"],o=(y=t==null?void 0:t.elements.find(T=>T.name==="w:fieldColor"))==null?void 0:y.attributes["w:val"],a=(w=t==null?void 0:t.elements.find(T=>T.name==="w:fieldMultipleImage"))==null?void 0:w.attributes["w:val"],l=(b=t==null?void 0:t.elements.find(T=>T.name==="w:fieldFontFamily"))==null?void 0:b.attributes["w:val"],c=(E=t==null?void 0:t.elements.find(T=>T.name==="w:fieldFontSize"))==null?void 0:E.attributes["w:val"],u=(A=t==null?void 0:t.elements.find(T=>T.name==="w:fieldTextColor"))==null?void 0:A.attributes["w:val"],d=(x=t==null?void 0:t.elements.find(T=>T.name==="w:fieldTextHighlight"))==null?void 0:x.attributes["w:val"];return{type:i,fieldId:e==null?void 0:e.attributes["w:val"],displayLabel:n==null?void 0:n.attributes["w:val"],fieldType:s,fieldColor:o,multipleImage:a==="true",fontFamily:l!=="null"?l:null,fontSize:c!=="null"?c:null,textColor:u!=="null"?u:null,textHighlight:d!=="null"?d:null,sdtId:r==null?void 0:r.attributes["w:val"]}}function mVe(t){var r;if(!((r=t==null?void 0:t.elements)!=null&&r.length))return"";const e=[];return Yge(t.elements,e),e.length&&e[e.length-1]===`
`&&e.pop(),e.join("").replace(/\u00a0/g," ")}function gVe(t,e){const n=m1(t.displayLabel);if(n)return n;const r=m1(t.defaultDisplayLabel);return r||m1(e)}function yVe(t,e){const n=Hee(t);if(!n)return!1;const r=Hee(e);return n!==r}function bVe(t){const e=m1(t);return e?e.startsWith("{{")&&e.endsWith("}}")?e:`{{${e}}}`:""}function Hee(t=""){const e=m1(t);return e?wVe(e).toLowerCase():""}function wVe(t=""){return t.startsWith("{{")&&t.endsWith("}}")?m1(t.slice(2,-2)):t}function vVe(t=""){return/\{\{\s*.+?\s*\}\}/.test(WN(t))}function Yge(t,e){t&&t.forEach(n=>{var s;if(!n)return;if(n.type==="text"){e.push(n.text||"");return}if(n.name==="w:tab"){e.push("	");return}if(n.name==="w:br"){e.push(`
`);return}const r=n.name==="w:p",i=e.length;(s=n.elements)!=null&&s.length&&Yge(n.elements,e),r&&e.length>i&&e.push(`
`)})}function WN(t){return typeof t!="string"?"":t}function m1(t){return WN(t).replace(/\u00a0/g," ").trim()}function xVe(t){var u;const{nodes:e}=t;if(e.length===0||e[0].name!=="w:sdt")return null;const n=e[0],r=n.elements.find(d=>d.name==="w:sdtPr"),i=r==null?void 0:r.elements.find(d=>d.name==="w:docPartObj"),s=i==null?void 0:i.elements.find(d=>d.name==="w:docPartGallery"),o=((u=s==null?void 0:s.attributes)==null?void 0:u["w:val"])??null,a=n==null?void 0:n.elements.find(d=>d.name==="w:sdtContent");return(AVe[o]||SVe)({...t,nodes:[a],extraParams:{...t.extraParams||{},sdtPr:r,docPartGalleryType:o}})}const EVe=t=>{var c,u;const e=t.nodes[0],n=t.nodeListHandler.handler({...t,nodes:e.elements,path:[...t.path||[],e]}),r=CVe(n),i=t.extraParams.sdtPr,s=((u=(c=i.elements)==null?void 0:c.find(d=>d.name==="w:id"))==null?void 0:u.attributes["w:val"])||"",o=i==null?void 0:i.elements.find(d=>d.name==="w:docPartObj"),a=(o==null?void 0:o.elements.some(d=>d.name==="w:docPartUnique"))??!1;return{type:"documentPartObject",content:r,attrs:{id:s,docPartGallery:"Table of Contents",docPartUnique:a,sdtPr:i}}},SVe=t=>{var u,d,f,h,m;const e=t.nodes[0],n=t.nodeListHandler.handler({...t,nodes:e.elements,path:[...t.path||[],e]}),r=t.extraParams.sdtPr,i=t.extraParams.docPartGalleryType,s=((d=(u=r==null?void 0:r.elements)==null?void 0:u.find(y=>y.name==="w:id"))==null?void 0:d.attributes["w:val"])||"",o=r==null?void 0:r.elements.find(y=>y.name==="w:docPartObj"),a=i??((m=(h=(f=o==null?void 0:o.elements)==null?void 0:f.find(y=>y.name==="w:docPartGallery"))==null?void 0:h.attributes)==null?void 0:m["w:val"])??null,l=(o==null?void 0:o.elements.some(y=>y.name==="w:docPartUnique"))??!1;return{type:"documentPartObject",content:n,attrs:{id:s,docPartGallery:a,docPartUnique:l,sdtPr:r}}},AVe={"Table of Contents":EVe},TVe=new Set(["bookmarkStart","bookmarkEnd"]),kVe=t=>({type:"paragraph",content:[t]}),CVe=(t=[])=>{const e=[];return t.forEach(n=>{TVe.has(n==null?void 0:n.type)?e.push(kVe(n)):e.push(n)}),e};function _Ve(t){var E,A,x,T;const{nodes:e,nodeListHandler:n}=t;if(e.length===0||e[0].name!=="w:sdt")return null;const r=e[0],i=r.elements.find(R=>R.name==="w:sdtPr"),s=i==null?void 0:i.elements.find(R=>R.name==="w:tag"),o=UH((E=s==null?void 0:s.attributes)==null?void 0:E["w:val"]),a=i==null?void 0:i.elements.find(R=>R.name==="w:id"),l=((A=a==null?void 0:a.attributes)==null?void 0:A["w:val"])||o.id||null,c=i==null?void 0:i.elements.find(R=>R.name==="w:alias"),u=((x=c==null?void 0:c.attributes)==null?void 0:x["w:val"])||o.title||null,{description:d}=o,f=i==null?void 0:i.elements.find(R=>R.name==="w:lock"),m=((T=f==null?void 0:f.attributes)==null?void 0:T["w:val"])==="sdtContentLocked",y=r.elements.find(R=>R.name==="w:sdtContent");return{type:"documentSection",content:n.handler({...t,nodes:y==null?void 0:y.elements,path:[...t.path||[],r]}),attrs:{id:l,title:u,description:d,isLocked:m,...i&&{sdtPr:i}}}}function NVe(t){var w,b,E,A,x,T,R,k;const{nodes:e,nodeListHandler:n}=t;if(e.length===0||e[0].name!=="w:sdt")return null;const r=e[0],i=r.elements.find(_=>_.name==="w:sdtPr"),s=r.elements.find(_=>_.name==="w:sdtContent"),o=(w=i==null?void 0:i.elements)==null?void 0:w.find(_=>_.name==="w:id"),a=(b=i==null?void 0:i.elements)==null?void 0:b.find(_=>_.name==="w:tag"),l=(E=i==null?void 0:i.elements)==null?void 0:E.find(_=>_.name==="w:alias");if(!s)return null;const c=(A=s.elements)==null?void 0:A.find(_=>_.name==="w:p"),u=(x=s.elements)==null?void 0:x.find(_=>_.name==="w:tbl"),{marks:d}=Xge(s),f=n.handler({...t,nodes:s.elements,path:[...t.path||[],s]});return{type:c||u?"structuredContentBlock":"structuredContent",content:f,marks:d,attrs:{id:((T=o==null?void 0:o.attributes)==null?void 0:T["w:val"])||null,tag:((R=a==null?void 0:a.attributes)==null?void 0:R["w:val"])||null,alias:((k=l==null?void 0:l.attributes)==null?void 0:k["w:val"])||null,sdtPr:i}}}function IVe(t){var o;const e=t.elements.find(a=>a.name==="w:sdtContent"),n=t.elements.find(a=>a.name==="w:sdtPr"),r=n==null?void 0:n.elements.find(a=>a.name==="w:tag"),i=(o=r==null?void 0:r.attributes)==null?void 0:o["w:val"];if(n==null?void 0:n.elements.find(a=>a.name==="w:docPartObj"))return{type:"docPartObj",handler:xVe};if(i)if(i.startsWith("{")&&i.endsWith("}")){const l=UH(i);if(l.type==="documentSection")return{type:"documentSection",handler:_Ve};if(l.fieldId&&l.fieldTypeShort)return{type:"fieldAnnotation",handler:zee}}else{const l=n.elements.find(u=>u.name==="w:fieldTypeShort"),c=l==null?void 0:l.attributes["w:val"];if(i&&c)return{type:"fieldAnnotation",handler:zee}}return e?{type:"structuredContent",handler:NVe}:{type:"unknown",handler:null}}const Zge=65535,Jge=Math.pow(2,16);function RVe(t,e){return t+e*Jge}function Vee(t){return t&Zge}function MVe(t){return(t-(t&Zge))/Jge}const Qge=1,e0e=2,X_=4,t0e=8;class Z7{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&t0e)>0}get deletedBefore(){return(this.delInfo&(Qge|X_))>0}get deletedAfter(){return(this.delInfo&(e0e|X_))>0}get deletedAcross(){return(this.delInfo&X_)>0}}class nc{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&nc.empty)return nc.empty}recover(e){let n=0,r=Vee(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+MVe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let m=e==(n<0?l:d)?null:RVe(a/3,e-l),y=e==l?e0e:e==d?Qge:X_;return(n<0?e!=l:e!=d)&&(y|=t0e),new Z7(h,y,m)}i+=u-c}return r?e+i:new Z7(e+i,0,null)}touches(e,n){let r=0,i=Vee(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new nc(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nc.empty:new nc(e<0?[0,-e,0]:[0,0,e])}}nc.empty=new nc([]);class cd{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new cd(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new cd;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Z7(e,i,null)}}const GO=Object.create(null);class Na{getMap(){return nc.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=GO[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in GO)throw new RangeError("Duplicate use of step JSON ID "+e);return GO[e]=n,n.prototype.jsonID=e,n}}class Ws{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ws(e,null)}static fail(e){return new Ws(null,e)}static fromReplace(e,n,r,i){try{return Ws.ok(e.replace(n,r,i))}catch(s){if(s instanceof $N)return Ws.fail(s.message);throw s}}}function WH(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(WH(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Nt.fromArray(r)}class Kc extends Na{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ut(WH(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ws.fromReplace(e,this.from,this.to,s)}invert(){return new Eo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Kc(n.pos,r.pos,this.mark)}merge(e){return e instanceof Kc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Kc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Kc(n.from,n.to,e.markFromJSON(n.mark))}}Na.jsonID("addMark",Kc);class Eo extends Na{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ut(WH(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Ws.fromReplace(e,this.from,this.to,r)}invert(){return new Kc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Eo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Eo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Eo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Eo(n.from,n.to,e.markFromJSON(n.mark))}}Na.jsonID("removeMark",Eo);class xg extends Na{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ws.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ws.fromReplace(e,this.pos,this.pos+1,new Ut(Nt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new xg(this.pos,n.marks[i]);return new xg(this.pos,this.mark)}}return new Ob(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new xg(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new xg(n.pos,e.markFromJSON(n.mark))}}Na.jsonID("addNodeMark",xg);class Ob extends Na{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ws.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ws.fromReplace(e,this.pos,this.pos+1,new Ut(Nt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new xg(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ob(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ob(n.pos,e.markFromJSON(n.mark))}}Na.jsonID("removeNodeMark",Ob);class xi extends Na{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&J7(e,this.from,this.to)?Ws.fail("Structure replace would overwrite content"):Ws.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nc([this.from,this.to-this.from,this.slice.size])}invert(e){return new xi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new xi(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof xi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ut.empty:new Ut(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new xi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ut.empty:new Ut(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new xi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xi(n.from,n.to,Ut.fromJSON(e,n.slice),!!n.structure)}}Na.jsonID("replace",xi);let ud=class Y_ extends Na{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(J7(e,this.from,this.gapFrom)||J7(e,this.gapTo,this.to)))return Ws.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ws.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ws.fromReplace(e,this.from,this.to,r):Ws.fail("Content does not fit in gap")}getMap(){return new nc([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Y_(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Y_(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Y_(n.from,n.to,n.gapFrom,n.gapTo,Ut.fromJSON(e,n.slice),n.insert,!!n.structure)}};Na.jsonID("replaceAround",ud);function J7(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function LVe(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[y])?o.to=h:i.push(o=new Eo(f,h,d[y])));a&&a.to==f?a.to=h:s.push(a=new Kc(f,h,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function DVe(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof bR){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&d.eq(i[h].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Eo(o.from,o.to,o.style)))}function qH(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new xi(a,u,Ut.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Eo(a,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,m;for(;f=h.exec(c.text);)m||(m=new Ut(Nt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new xi(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(Nt.empty,!0);t.replace(a,a,new Ut(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function OVe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function _R(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!OVe(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function PVe(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Nt.empty,d=0;for(let m=s,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=Nt.from(r.node(m).copy(u)),d++):l--;let f=Nt.empty,h=0;for(let m=s,y=!1;m>n;m--)y||i.after(m+1)<i.end(m)?(y=!0,f=Nt.from(i.node(m).copy(f)),h++):c++;t.step(new ud(l,c,o,a,new Ut(u.append(f),d,h),u.size-d,!0))}function FVe(t,e,n){let r=Nt.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Nt.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new ud(i,s,i,s,new Ut(r,0,0),n.length,!0))}function BVe(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&jVe(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&r0e(t,o,a,s),qH(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new ud(d,f,d+1,f-1,new Ut(Nt.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&n0e(t,o,a,s),!1}})}function n0e(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function r0e(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function jVe(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function $Ve(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ud(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Ut(Nt.from(o),0,0),1,!0))}function Tf(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function zVe(t,e,n=1,r){let i=t.doc.resolve(e),s=Nt.empty,o=Nt.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Nt.from(i.node(a).copy(s));let u=r&&r[c];o=Nt.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new xi(e,e,new Ut(s.append(o),n,n),!0))}function NR(t,e){let n=t.resolve(e),r=n.index();return i0e(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function HVe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function i0e(t,e){return!!(t&&e&&!t.isLeaf&&HVe(t,e))}function s0e(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&i0e(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function VVe(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);r0e(t,u.node(),u.before(),a)}o.inlineContent&&qH(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new xi(c,l.map(e+n,-1),Ut.empty,!0)),r===!0){let u=t.doc.resolve(c);n0e(t,u.node(),u.before(),t.steps.length)}return t}function UVe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function o0e(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function GH(t,e,n=e,r=Ut.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return a0e(i,s,r)?new xi(e,n,r):new WVe(i,s,r).fit()}function a0e(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class WVe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Nt.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Nt.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Ut(s,o,a);return e>-1?new ud(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new xi(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=KO(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Nt.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=KO(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ut(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=KO(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Ut(nS(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ut(nS(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),w=d.matchType(y.type);if(!w)break;c++,(c>1||l==0||y.content.size)&&(d=w,u.push(l0e(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?h:-1)))}let m=c==a.childCount;m||(h=-1),this.placed=rS(this.placed,n,Nt.from(u)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,w=a;y<h;y++){let b=w.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),w=b.content}this.unplaced=m?e==0?Ut.empty:new Ut(nS(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new Ut(nS(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!XO(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=XO(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=XO(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=rS(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=rS(this.placed,this.depth,Nt.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Nt.empty,!0);n.childCount&&(this.placed=rS(this.placed,this.frontier.length,n))}}function nS(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(nS(t.firstChild.content,e-1,n)))}function rS(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(rS(t.lastChild.content,e-1,n)))}function KO(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function l0e(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,l0e(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Nt.empty,!0)))),t.copy(r)}function XO(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!qVe(n,s.content,o)?a:null}function qVe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function GVe(t){return t.spec.defining||t.spec.definingForContent}function KVe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(a0e(i,s,r))return t.step(new xi(e,n,r));let o=u0e(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let m=f.firstChild;if(c.push(m),h==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let h=c[f],m=GVe(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(m||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),m=c[h];if(m)for(let y=0;y<o.length;y++){let w=o[(y+l)%o.length],b=!0;w<0&&(b=!1,w=-w);let E=i.node(w-1),A=i.index(w-1);if(E.canReplaceWith(A,A,m.type,m.marks))return t.replace(i.before(w),b?s.after(w):n,new Ut(c0e(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function c0e(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(c0e(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Nt.empty,!0))}return t}function XVe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=UVe(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Ut(Nt.from(r),0,0))}function YVe(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=u0e(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function u0e(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class g1 extends Na{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ws.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ws.fromReplace(e,this.pos,this.pos+1,new Ut(Nt.from(i),0,n.isLeaf?0:1))}getMap(){return nc.empty}invert(e){return new g1(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new g1(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new g1(n.pos,n.attr,n.value)}}Na.jsonID("attr",g1);class YA extends Na{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ws.ok(r)}getMap(){return nc.empty}invert(e){return new YA(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new YA(n.attr,n.value)}}Na.jsonID("docAttr",YA);let Cx=class extends Error{};Cx=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Cx.prototype=Object.create(Error.prototype);Cx.prototype.constructor=Cx;Cx.prototype.name="TransformError";class d0e{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new cd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Cx(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ut.empty){let i=GH(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Ut(Nt.from(r),0,0))}delete(e,n){return this.replace(e,n,Ut.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return KVe(this,e,n,r),this}replaceRangeWith(e,n,r){return XVe(this,e,n,r),this}deleteRange(e,n){return YVe(this,e,n),this}lift(e,n){return PVe(this,e,n),this}join(e,n=1){return VVe(this,e,n),this}wrap(e,n){return FVe(this,e,n),this}setBlockType(e,n=e,r,i=null){return BVe(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return $Ve(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new g1(e,n,r)),this}setDocAttribute(e,n){return this.step(new YA(e,n)),this}addNodeMark(e,n){return this.step(new xg(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Si)n.isInSet(r.marks)&&this.step(new Ob(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Ob(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return zVe(this,e,n,r),this}addMark(e,n,r){return LVe(this,e,n,r),this}removeMark(e,n,r){return DVe(this,e,n,r),this}clearIncompatible(e,n,r){return qH(this,e,n,r),this}}const YO=Object.create(null);class _n{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new f0e(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ut.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Ut.empty:n),a==0&&qee(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),qee(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Vt(e):Nv(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Nv(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Nv(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ja(e.node(0))}static atStart(e){return Nv(e,e,0,0,1)||new Ja(e)}static atEnd(e){return Nv(e,e,e.content.size,e.childCount,-1)||new Ja(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=YO[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in YO)throw new RangeError("Duplicate use of selection JSON ID "+e);return YO[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Vt.between(this.$anchor,this.$head).getBookmark()}}_n.prototype.visible=!0;class f0e{constructor(e,n){this.$from=e,this.$to=n}}let Uee=!1;function Wee(t){!Uee&&!t.parent.inlineContent&&(Uee=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}let Vt=class iS extends _n{constructor(e,n=e){Wee(e),Wee(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return _n.near(r);let i=e.resolve(n.map(this.anchor));return new iS(i.parent.inlineContent?i:r,r)}replace(e,n=Ut.empty){if(super.replace(e,n),n==Ut.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof iS&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new IR(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new iS(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=_n.findFrom(n,r,!0)||_n.findFrom(n,-r,!0);if(s)n=s.$head;else return _n.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(_n.findFrom(e,-r,!0)||_n.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new iS(e,n)}};_n.jsonID("text",Vt);class IR{constructor(e,n){this.anchor=e,this.head=n}map(e){return new IR(e.map(this.anchor),e.map(this.head))}resolve(e){return Vt.between(e.resolve(this.anchor),e.resolve(this.head))}}class ln extends _n{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?_n.near(s):new ln(s)}content(){return new Ut(Nt.from(this.node),0,0)}eq(e){return e instanceof ln&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new KH(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ln(e.resolve(n.anchor))}static create(e,n){return new ln(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ln.prototype.visible=!1;_n.jsonID("node",ln);class KH{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new IR(r,r):new KH(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ln.isSelectable(r)?new ln(n):_n.near(n)}}class Ja extends _n{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ut.empty){if(n==Ut.empty){e.delete(0,e.doc.content.size);let r=_n.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ja(e)}map(e){return new Ja(e)}eq(e){return e instanceof Ja}getBookmark(){return ZVe}}_n.jsonID("all",Ja);const ZVe={map(){return this},resolve(t){return new Ja(t)}};function Nv(t,e,n,r,i,s=!1){if(e.inlineContent)return Vt.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&ln.isSelectable(a))return ln.create(t,n-(i<0?a.nodeSize:0))}else{let l=Nv(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function qee(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof xi||i instanceof ud))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(_n.near(t.doc.resolve(o),n))}const Gee=1,w5=2,Kee=4;let JVe=class extends d0e{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gee)&~w5,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gee)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=w5,this}ensureMarks(e){return Si.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&w5)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~w5,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Si.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(_n.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Kee,this}get scrolledIntoView(){return(this.updated&Kee)>0}};function Xee(t,e){return!e||!t?t:t.bind(e)}class sS{constructor(e,n,r){this.name=e,this.init=Xee(n.init,r),this.apply=Xee(n.apply,r)}}const QVe=[new sS("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new sS("selection",{init(t,e){return t.selection||_n.atStart(e.doc)},apply(t){return t.selection}}),new sS("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new sS("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ZO{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=QVe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new sS(r.key,r.spec.state,r))})}}class yp{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new yp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new JVe(this)}static create(e){let n=new ZO(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new yp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ZO(this.schema,e.plugins),r=n.fields,i=new yp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ZO(e.schema,e.plugins),s=new yp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=lb.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=_n.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function h0e(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=h0e(i,e,{})),n[r]=i}return n}class Mr{constructor(e){this.spec=e,this.props={},e.props&&h0e(e.props,this,this.props),this.key=e.key?e.key.key:p0e("plugin")}getState(e){return e[this.key]}}const JO=Object.create(null);function p0e(t){return t in JO?t+"$"+ ++JO[t]:(JO[t]=0,t+"$")}class ni{constructor(e="key"){this.key=p0e(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}function qN(t){return{accent1:"#5b9bd5",accent2:"#ed7d31",accent3:"#a5a5a5",accent4:"#ffc000",accent5:"#4472c4",accent6:"#70ad47",dk1:"#000000",lt1:"#ffffff",dk2:"#1f497d",lt2:"#eeece1",text1:"#000000",text2:"#1f497d",background1:"#ffffff",background2:"#eeece1",bg1:"#ffffff",bg2:"#eeece1"}[t]??"#000000"}function Tl(t,e,n){const r=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=parseInt(n)/1e5;let a,l,c;if(e==="shade"||e==="lumMod")a=r*o,l=i*o,c=s*o;else if(e==="tint")a=r+(255-r)*o,l=i+(255-i)*o,c=s+(255-s)*o;else if(e==="lumOff"){const h=255*o;a=r+h,l=i+h,c=s+h}else return t;const u=h=>Math.max(0,Math.min(255,Math.round(h))),d=h=>h.toString(16).padStart(2,"0");return a=u(a),l=u(l),c=u(c),`#${d(a)}${d(l)}${d(c)}`}function m0e(t){var s,o;const e=(s=t==null?void 0:t.elements)==null?void 0:s.find(a=>a.name==="a:ln"),n=(o=e==null?void 0:e.attributes)==null?void 0:o.w;return n?(typeof n=="string"?parseFloat(n):n)*72/914400:1}function g0e(t,e){var l,c,u,d,f,h,m,y,w,b;const n=(l=t==null?void 0:t.elements)==null?void 0:l.find(E=>E.name==="a:ln");if(n){if((c=n.elements)==null?void 0:c.find(x=>x.name==="a:noFill"))return null;const A=(u=n.elements)==null?void 0:u.find(x=>x.name==="a:solidFill");if(A){const x=(d=A.elements)==null?void 0:d.find(R=>R.name==="a:schemeClr");if(x){const R=(f=x.attributes)==null?void 0:f.val;let k=qN(R);return(x.elements||[]).forEach(N=>{N.name==="a:shade"?k=Tl(k,"shade",N.attributes.val):N.name==="a:tint"?k=Tl(k,"tint",N.attributes.val):N.name==="a:lumMod"&&(k=Tl(k,"lumMod",N.attributes.val))}),k}const T=(h=A.elements)==null?void 0:h.find(R=>R.name==="a:srgbClr");if(T)return"#"+((m=T.attributes)==null?void 0:m.val)}}if(!e)return"#000000";const r=(y=e.elements)==null?void 0:y.find(E=>E.name==="a:lnRef");if(!r)return"#000000";const i=(w=r.elements)==null?void 0:w.find(E=>E.name==="a:schemeClr");if(!i)return"#000000";const s=(b=i.attributes)==null?void 0:b.val;let o=qN(s);return(i.elements||[]).forEach(E=>{E.name==="a:shade"?o=Tl(o,"shade",E.attributes.val):E.name==="a:tint"?o=Tl(o,"tint",E.attributes.val):E.name==="a:lumMod"?o=Tl(o,"lumMod",E.attributes.val):E.name==="a:lumOff"&&(o=Tl(o,"lumOff",E.attributes.val))}),o}function y0e(t,e){var f,h,m,y,w,b,E,A,x,T,R,k,_,N;if((f=t==null?void 0:t.elements)==null?void 0:f.find(L=>L.name==="a:noFill"))return null;const r=(h=t==null?void 0:t.elements)==null?void 0:h.find(L=>L.name==="a:solidFill");if(r){const L=(m=r.elements)==null?void 0:m.find(C=>C.name==="a:schemeClr");if(L){const C=(y=L.attributes)==null?void 0:y.val;let D=qN(C),O=null;return(L.elements||[]).forEach(U=>{U.name==="a:shade"?D=Tl(D,"shade",U.attributes.val):U.name==="a:tint"?D=Tl(D,"tint",U.attributes.val):U.name==="a:lumMod"?D=Tl(D,"lumMod",U.attributes.val):U.name==="a:lumOff"?D=Tl(D,"lumOff",U.attributes.val):U.name==="a:alpha"&&(O=parseInt(U.attributes.val)/1e5)}),O!==null&&O<1?{type:"solidWithAlpha",color:D,alpha:O}:D}const M=(w=r.elements)==null?void 0:w.find(C=>C.name==="a:srgbClr");if(M){let C=null;const D=(b=M.elements)==null?void 0:b.find($=>$.name==="a:alpha");D&&(C=parseInt(((E=D.attributes)==null?void 0:E.val)||"100000",10)/1e5);const O="#"+((A=M.attributes)==null?void 0:A.val);return C!==null&&C<1?{type:"solidWithAlpha",color:O,alpha:C}:O}}const i=(x=t==null?void 0:t.elements)==null?void 0:x.find(L=>L.name==="a:gradFill");if(i)return eUe(i);if((T=t==null?void 0:t.elements)==null?void 0:T.find(L=>L.name==="a:blipFill"))return"#cccccc";if(!e)return"#5b9bd5";const o=(R=e.elements)==null?void 0:R.find(L=>L.name==="a:fillRef");if(!o)return"#5b9bd5";if(((k=o.attributes)==null?void 0:k.idx)==="0")return null;const l=(_=o.elements)==null?void 0:_.find(L=>L.name==="a:schemeClr");if(!l)return"#5b9bd5";const c=(N=l.attributes)==null?void 0:N.val;let u=qN(c);return(l.elements||[]).forEach(L=>{L.name==="a:shade"?u=Tl(u,"shade",L.attributes.val):L.name==="a:tint"?u=Tl(u,"tint",L.attributes.val):L.name==="a:lumMod"&&(u=Tl(u,"lumMod",L.attributes.val))}),u}function eUe(t){var s,o,a,l,c,u;const e={type:"gradient",stops:[],angle:0},n=(s=t.elements)==null?void 0:s.find(d=>d.name==="a:gsLst");if(n){const d=((o=n.elements)==null?void 0:o.filter(f=>f.name==="a:gs"))||[];e.stops=d.map(f=>{var b,E,A,x,T;const h=parseInt(((b=f.attributes)==null?void 0:b.pos)||"0",10)/1e5,m=(E=f.elements)==null?void 0:E.find(R=>R.name==="a:srgbClr");let y="#000000",w=1;if(m){y="#"+((A=m.attributes)==null?void 0:A.val);const R=(x=m.elements)==null?void 0:x.find(k=>k.name==="a:alpha");R&&(w=parseInt(((T=R.attributes)==null?void 0:T.val)||"100000",10)/1e5)}return{position:h,color:y,alpha:w}})}const r=(a=t.elements)==null?void 0:a.find(d=>d.name==="a:lin");if(r){const d=parseInt(((l=r.attributes)==null?void 0:l.ang)||"0",10)/6e4;e.angle=d}const i=(c=t.elements)==null?void 0:c.find(d=>d.name==="a:path");return i?(e.gradientType="radial",e.path=((u=i.attributes)==null?void 0:u.path)||"circle"):e.gradientType="linear",e}class tUe{flood(e,n,r,i,s){const o=document.createElementNS("http://www.w3.org/2000/svg","feFlood");n&&o.setAttribute("id",n),o.setAttribute("flood-color",r),o.setAttribute("flood-opacity",i.toString()),e.appendChild(o)}composite(e,n,r,i,s,o,a,l,c){const u=document.createElementNS("http://www.w3.org/2000/svg","feComposite");n&&u.setAttribute("id",n),u.setAttribute("in",r),u.setAttribute("in2",i),e.appendChild(u)}}class nUe{constructor(){this._path=""}move(e,n){this._path+=` M ${e} ${n}`}path(){return this._path.substr(1)}line(e){e.forEach(n=>{this._path+=` L ${n[0]} ${n[1]}`})}curveC(e,n,r,i,s,o){this._path+=` C ${e} ${n}, ${r} ${i}, ${s} ${o}`}close(){this._path+=" Z"}}class b0e{constructor(e){this.filters=new tUe,this._defs=void 0,this._svg=e}svg(e,n,r,i,s,o){const a=document.createElementNS("http://www.w3.org/2000/svg","svg");return a.setAttribute("x",n.toString()),a.setAttribute("y",r.toString()),a.setAttribute("width",i.toString()),a.setAttribute("height",s.toString()),this._appendSettings(o,a),e!=null?e.appendChild(a):this._svg.appendChild(a),a}image(e,n,r,i,s,o,a){const l=document.createElementNS("http://www.w3.org/2000/svg","image");return l.setAttribute("x",n.toString()),l.setAttribute("y",r.toString()),l.setAttribute("width",i.toString()),l.setAttribute("height",s.toString()),l.setAttributeNS("http://www.w3.org/1999/xlink","href",o),this._appendSettings(a,l),e.appendChild(l),l}rect(e,n,r,i,s,o,a,l){const c=document.createElementNS("http://www.w3.org/2000/svg","rect");return c.setAttribute("x",n.toString()),c.setAttribute("y",r.toString()),c.setAttribute("width",i.toString()),c.setAttribute("height",s.toString()),o!==void 0&&(o instanceof Number?c.setAttribute("rx",o.toString()):o instanceof Object&&this._appendSettings(o,c)),a!==void 0&&c.setAttribute("ry",a.toString()),this._appendSettings(l,c),e.appendChild(c),c}line(e,n,r,i,s,o){const a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",n.toString()),a.setAttribute("y1",r.toString()),a.setAttribute("x2",i.toString()),a.setAttribute("y2",s.toString()),this._appendSettings(o,a),e.appendChild(a),a}polygon(e,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return i.setAttribute("points",n.map(s=>s.join(",")).join(" ")),this._appendSettings(r,i),e.appendChild(i),i}polyline(e,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return i.setAttribute("points",n.map(s=>s.join(",")).join(" ")),this._appendSettings(r,i),e.appendChild(i),i}ellipse(e,n,r,i,s,o){const a=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return a.setAttribute("cx",n.toString()),a.setAttribute("cy",r.toString()),a.setAttribute("rx",i.toString()),a.setAttribute("ry",s.toString()),this._appendSettings(o,a),e.appendChild(a),a}path(e,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",n.path()),this._appendSettings(r,i),e.appendChild(i),i}text(e,n,r,i,s){const o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x",n.toString()),o.setAttribute("y",r.toString()),this._appendSettings(s,o);const a=document.createTextNode(i);return o.appendChild(a),e.appendChild(o),o}filter(e,n,r,i,s,o,a){const l=document.createElementNS("http://www.w3.org/2000/svg","filter");return l.setAttribute("x",r.toString()),l.setAttribute("y",i.toString()),l.setAttribute("width",s.toString()),l.setAttribute("height",o.toString()),this._appendSettings(a,l),e.appendChild(l),l}pattern(e,n,r,i,s,o,a){const l=document.createElementNS("http://www.w3.org/2000/svg","pattern");return n&&l.setAttribute("id",n),l.setAttribute("x",r.toString()),l.setAttribute("y",i.toString()),l.setAttribute("width",s.toString()),l.setAttribute("height",o.toString()),this._appendSettings(a,l),e.appendChild(l),l}defs(){if(this._defs===void 0){const e=document.createElementNS("http://www.w3.org/2000/svg","defs");this._svg.appendChild(e),this._defs=e}return this._defs}clipPath(e,n,r,i){const s=document.createElementNS("http://www.w3.org/2000/svg","clipPath");return n&&s.setAttribute("id",n),r===void 0&&(r="userSpaceOnUse"),s.setAttribute("clipPathUnits",r),this._appendSettings(i,s),e.appendChild(s),s}createPath(){return new nUe}_appendSettings(e,n){e!==void 0&&Object.keys(e).forEach(r=>{n.setAttribute(r,e[r])})}}class Cr extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}let w0e=!0;function rUe(t){w0e=t}var xb;let Ge=(xb=class{static log(e){w0e&&console.log(e)}static _makeUniqueId(e){return"EMFJS_"+e+this._uniqueId++}static _writeUint32Val(e,n,r){e[n++]=r&255,e[n++]=r>>>8&255,e[n++]=r>>>16&255,e[n++]=r>>>24&255}static _blobToBinary(e){let n="";const r=e.length;for(let i=0;i<r;i++)n+=String.fromCharCode(e[i]);return n}},xb.GDI={FormatSignature:{ENHMETA_SIGNATURE:1179469088,EPS_SIGNATURE:1179865157},BITMAPINFOHEADER_SIZE:40,BITMAPCOREHEADER_SIZE:12,RecordType:{EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},MetafileEscapes:{NEWFRAME:1,ABORTDOC:2,NEXTBAND:3,SETCOLORTABLE:4,GETCOLORTABLE:5,FLUSHOUT:6,DRAFTMODE:7,QUERYESCSUPPORT:8,SETABORTPROC:9,STARTDOC:10,ENDDOC:11,GETPHYSPAGESIZE:12,GETPRINTINGOFFSET:13,GETSCALINGFACTOR:14,META_ESCAPE_ENHANCED_METAFILE:15,SETPENWIDTH:16,SETCOPYCOUNT:17,SETPAPERSOURCE:18,PASSTHROUGH:19,GETTECHNOLOGY:20,SETLINECAP:21,SETLINEJOIN:22,SETMITERLIMIT:23,BANDINFO:24,DRAWPATTERNRECT:25,GETVECTORPENSIZE:26,GETVECTORBRUSHSIZE:27,ENABLEDUPLEX:28,GETSETPAPERBINS:29,GETSETPRINTORIENT:30,ENUMPAPERBINS:31,SETDIBSCALING:32,EPSPRINTING:33,ENUMPAPERMETRICS:34,GETSETPAPERMETRICS:35,POSTSCRIPT_DATA:37,POSTSCRIPT_IGNORE:38,GETDEVICEUNITS:42,GETEXTENDEDTEXTMETRICS:256,GETPAIRKERNTABLE:258,EXTTEXTOUT:512,GETFACENAME:513,DOWNLOADFACE:514,METAFILE_DRIVER:2049,QUERYDIBSUPPORT:3073,BEGIN_PATH:4096,CLIP_TO_PATH:4097,END_PATH:4098,OPEN_CHANNEL:4110,DOWNLOADHEADER:4111,CLOSE_CHANNEL:4112,POSTSCRIPT_PASSTHROUGH:4115,ENCAPSULATED_POSTSCRIPT:4116,POSTSCRIPT_IDENTIFY:4117,POSTSCRIPT_INJECTION:4118,CHECKJPEGFORMAT:4119,CHECKPNGFORMAT:4120,GET_PS_FEATURESETTING:4121,MXDC_ESCAPE:4122,SPCLPASSTHROUGH2:4568},MapMode:{MM_TEXT:1,MM_LOMETRIC:2,MM_HIMETRIC:3,MM_LOENGLISH:4,MM_HIENGLISH:5,MM_TWIPS:6,MM_ISOTROPIC:7,MM_ANISOTROPIC:8},StretchMode:{BLACKONWHITE:1,WHITEONBLACK:2,COLORONCOLOR:3,HALFTONE:4},MixMode:{TRANSPARENT:1,OPAQUE:2},BrushStyle:{BS_SOLID:0,BS_NULL:1,BS_HATCHED:2,BS_PATTERN:3,BS_INDEXED:4,BS_DIBPATTERN:5,BS_DIBPATTERNPT:6,BS_PATTERN8X8:7,BS_DIBPATTERN8X8:8,BS_MONOPATTERN:9},PenStyle:{PS_COSMETIC:0,PS_ENDCAP_ROUND:0,PS_JOIN_ROUND:0,PS_SOLID:0,PS_DASH:1,PS_DOT:2,PS_DASHDOT:3,PS_DASHDOTDOT:4,PS_NULL:5,PS_INSIDEFRAME:6,PS_USERSTYLE:7,PS_ALTERNATE:8,PS_ENDCAP_SQUARE:256,PS_ENDCAP_FLAT:512,PS_JOIN_BEVEL:4096,PS_JOIN_MITER:8192,PS_GEOMETRIC:65536},PolygonFillMode:{ALTERNATE:1,WINDING:2},BitmapCompression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5},RegionMode:{RGN_AND:1,RGN_OR:2,RGN_XOR:3,RGN_DIFF:4,RGN_COPY:5},StockObject:{WHITE_BRUSH:2147483648,LTGRAY_BRUSH:2147483649,GRAY_BRUSH:2147483650,DKGRAY_BRUSH:2147483651,BLACK_BRUSH:2147483652,NULL_BRUSH:2147483653,WHITE_PEN:2147483654,BLACK_PEN:2147483655,NULL_PEN:2147483656,OEM_FIXED_FONT:2147483658,ANSI_FIXED_FONT:2147483659,ANSI_VAR_FONT:2147483660,SYSTEM_FONT:2147483661,DEVICE_DEFAULT_FONT:2147483662,DEFAULT_PALETTE:2147483663,SYSTEM_FIXED_FONT:2147483664,DEFAULT_GUI_FONT:2147483665,DC_BRUSH:2147483666,DC_PEN:2147483667}},xb._uniqueId=0,xb),iUe=class v0e{constructor(e,n){e instanceof v0e?(this.blob=e.blob,this.data=e.data,this.pos=n||e.pos):(this.blob=e,this.data=new Uint8Array(e),this.pos=n||0)}eof(){return this.pos>=this.data.length}seek(e){if(e<0||e>this.data.length)throw new Cr("Invalid seek position");this.pos=e}skip(e){const n=this.pos+e;if(n>this.data.length)throw new Cr("Unexpected end of file");this.pos=n}readBinary(e){if(this.pos+e>this.data.length)throw new Cr("Unexpected end of file");let r="";for(;e-- >0;)r+=String.fromCharCode(this.data[this.pos++]);return r}readInt8(){if(this.pos+1>this.data.length)throw new Cr("Unexpected end of file");return this.data[this.pos++]}readUint8(){return this.readInt8()>>>0}readInt32(){if(this.pos+4>this.data.length)throw new Cr("Unexpected end of file");let e=this.data[this.pos++];return e|=this.data[this.pos++]<<8,e|=this.data[this.pos++]<<16,e|=this.data[this.pos++]<<24,e}readUint32(){return this.readInt32()>>>0}readUint16(){if(this.pos+2>this.data.length)throw new Cr("Unexpected end of file");let e=this.data[this.pos++];return e|=this.data[this.pos++]<<8,e}readInt16(){let e=this.readUint16();return e>32767&&(e-=65536),e}readString(e){if(this.pos+e>this.data.length)throw new Cr("Unexpected end of file");let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(this.data[this.pos++]>>>0);return n}readNullTermString(e){let n="";if(e>0){e--;for(let r=0;r<e;r++){if(this.pos+r+1>this.data.length)throw new Cr("Unexpected end of file");const i=this.data[this.pos+r]>>>0;if(i===0)break;n+=String.fromCharCode(i)}}return n}readFixedSizeUnicodeString(e){let n="";for(let r=0;r<e;r++){const i=this.readUint16();if(i===0){++r<e&&this.skip((e-r)*2);break}n+=String.fromCharCode(i)}return n}},ME=class x0e{constructor(e,n,r){e!=null?(this.x=e.readInt16(),this.y=e.readInt16()):(this.x=n,this.y=r)}clone(){return new x0e(null,this.x,this.y)}toString(){return"{x: "+this.x+", y: "+this.y+"}"}};class Fh{constructor(e,n,r){e!=null?(this.x=e.readInt32(),this.y=e.readInt32()):(this.x=n,this.y=r)}clone(){return new Fh(null,this.x,this.y)}toString(){return"{x: "+this.x+", y: "+this.y+"}"}}class Fs{constructor(e,n,r,i,s){e!=null?(this.left=e.readInt32(),this.top=e.readInt32(),this.right=e.readInt32(),this.bottom=e.readInt32()):(this.bottom=s,this.right=i,this.top=r,this.left=n)}clone(){return new Fs(null,this.left,this.top,this.right,this.bottom)}toString(){return"{left: "+this.left+", top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+"}"}empty(){return this.left>=this.right||this.top>=this.bottom}intersect(e){return this.empty()||e.empty()||this.left>=e.right||this.top>=e.bottom||this.right<=e.left||this.bottom<=e.top?null:new Fs(null,Math.max(this.left,e.left),Math.max(this.top,e.top),Math.min(this.right,e.right),Math.min(this.bottom,e.bottom))}}class XH{constructor(e,n,r){e!=null?(this.cx=e.readUint32(),this.cy=e.readUint32()):(this.cx=n,this.cy=r)}clone(){return new XH(null,this.cx,this.cy)}toString(){return"{cx: "+this.cx+", cy: "+this.cy+"}"}}let sC=class{constructor(e){this.type=e}clone(){throw new Cr("clone not implemented")}toString(){throw new Cr("toString not implemented")}},E0e=class S0e extends sC{constructor(e,n){if(super("region"),e!=null){if(e.readUint32()!==32)throw new Cr("Invalid region header");e.skip(4);const i=e.readUint32(),s=e.readUint32();if(i*16!==s)throw new Cr("Invalid region data");this.bounds=new Fs(e),this.scans=[];let o;for(let a=0;a<i;a++){const l=new Fs(e);o||o.top!==l.top||o.bottom!==l.bottom?(o=new Yee(l),this.scans.push(o)):o.append(l)}this._updateComplexity()}else if(n!=null){if(this.bounds=n.bounds!=null?n.bounds.clone():null,n.scans!=null){this.scans=[];for(let r=0;r<n.scans.length;r++)this.scans.push(n.scans[r].clone())}else this.scans=null;this.complexity=n.complexity}else this.bounds=null,this.scans=null,this.complexity=0}clone(){return new S0e(null,this)}toString(){return"{complexity: "+["null","simple","complex"][this.complexity]+" bounds: "+(this.bounds!=null?this.bounds.toString():"[none]")+" #scans: "+(this.scans!=null?this.scans.length:"[none]")+"}"}_updateComplexity(){if(this.bounds==null)this.complexity=0,this.scans=null;else if(this.bounds.empty())this.complexity=0,this.scans=null,this.bounds=null;else if(this.scans==null)this.complexity=1;else if(this.complexity=2,this.scans.length===1){const e=this.scans[0];if(e.top===this.bounds.top&&e.bottom===this.bounds.bottom&&e.scanlines.length===1){const n=e.scanlines[0];n.left===this.bounds.left&&n.right===this.bounds.right&&(this.scans=null,this.complexity=1)}}}subtract(e){if(Ge.log("[emf] Region "+this.toString()+" subtract "+e.toString()),this.bounds!=null&&this.bounds.intersect(e)!=null){this.scans==null&&(this.scans=[],this.scans.push(new Yee(new Fs(null,this.bounds.left,this.bounds.top,this.bounds.right,this.bounds.bottom))),this.complexity=2);let r=0;for(;r<this.scans.length;){const s=this.scans[r];if(s.bottom>=e.top){const o=s.clone();s.bottom=e.top-1,o.top=e.top,s.top>=s.bottom?this.scans[r]=o:(Ge.log("[emf] Region split top scan "+r+" for substraction"),this.scans.splice(++r,0,o));break}r++}const i=r;for(;r<this.scans.length;){const s=this.scans[r];if(s.top>e.bottom)break;if(s.bottom>e.bottom){const o=s.clone();s.bottom=e.bottom,o.top=e.bottom+1,s.top>=s.bottom?this.scans[r]=o:(Ge.log("[emf] Region split bottom scan "+r+" for substraction"),this.scans.splice(++r,0,o));break}r++}if(i<this.scans.length){let s=r;for(r=i;r<s;){if(!this.scans[r].subtract(e.left,e.right)){Ge.log("[emf] Region remove now empty scan "+r+" due to subtraction"),this.scans.splice(r,1),s--;continue}r++}}if(this.scans!=null){let s,o,a,l;const c=this.scans.length;for(let u=0;u<c;u++){const d=this.scans[u];u===0&&(o=d.top),u===c-1&&(l=d.bottom);const f=d.scanlines.length;if(f>0){let h=d.scanlines[0];(s==null||h.left<s)&&(s=h.left),h=d.scanlines[f-1],(a==null||h.right>a)&&(a=h.right)}}s!=null&&o!=null&&a!=null&&l!=null?(this.bounds=new Fs(null,s,o,a,l),this._updateComplexity()):(this.bounds=null,this.scans=null,this.complexity=0)}else this._updateComplexity()}Ge.log("[emf] Region subtraction -> "+this.toString())}intersect(e){if(Ge.log("[emf] Region "+this.toString()+" intersect with "+e.toString()),this.bounds!=null)if(this.bounds=this.bounds.intersect(e),this.bounds!=null){if(this.scans!=null){let n=0;for(;n<this.scans.length&&this.scans[n].bottom<this.bounds.top;)n++;for(n>0&&(Ge.log("[emf] Region remove "+n+" scans from top"),this.scans.splice(0,n),this.scans.length>0&&(this.scans[0].top=this.bounds.top)),n=0;n<this.scans.length;){const r=this.scans[n];if(r.top>this.bounds.bottom){Ge.log("[emf] Region remove "+(this.scans.length-n)+" scans from bottom"),this.scans.splice(n,this.scans.length-n);break}if(!r.intersect(this.bounds.left,this.bounds.right)){Ge.log("[emf] Region remove now empty scan "+n+" due to intersection"),this.scans.splice(n,1);continue}n++}this.scans.length>0&&(this.scans[this.scans.length-1].bottom=this.bounds.bottom),this._updateComplexity()}}else this.scans=null,this.complexity=0;Ge.log("[emf] Region intersection -> "+this.toString())}offset(e,n){if(this.bounds!=null&&(this.bounds.left+=e,this.bounds.top+=n,this.bounds.right+=e,this.bounds.bottom+=n),this.scans!=null){const r=this.scans.length;for(let i=0;i<r;i++){const s=this.scans[i];s.top+=n,s.bottom+=n;const o=s.scanlines.length;for(let a=0;a<o;a++){const l=s.scanlines[a];l.left+=e,l.right+=e}}}}};function sUe(t,e,n,r){const i=new E0e(null,null);return i.bounds=new Fs(null,t,e,n,r),i._updateComplexity(),i}let Yee=class A0e{constructor(e,n){if(e!=null)this.top=e.top,this.bottom=e.bottom,this.scanlines=[{left:e.left,right:e.right}];else if(n!=null){this.top=n.top,this.bottom=n.bottom,this.scanlines=[];for(let r=0;r<n.scanlines.length;r++){const i=n.scanlines[r];this.scanlines.push({left:i.left,right:i.right})}}}clone(){return new A0e(null,this)}append(e){this.scanlines.push({left:e.left,right:e.right})}subtract(e,n){let r;for(r=0;r<this.scanlines.length;){const o=this.scanlines[r];if(o.left<=e){if(o.right>=e&&(o.right=e-1,o.left>=o.right)){this.scanlines.splice(r,1);continue}r++}else break}const i=r;let s=0;for(;r<this.scanlines.length;){const o=this.scanlines[r];if(o.right>n){o.left=n,s=r-i,o.left>=o.right&&s++;break}r++}return s>0&&i<this.scanlines.length&&this.scanlines.splice(i,s),this.scanlines.length>0}intersect(e,n){for(let r=0;r<this.scanlines.length;r++){const i=this.scanlines[r];if(i.left>=e||i.right>=e){r>0&&this.scanlines.splice(0,r);break}}if(this.scanlines.length>0){let r=this.scanlines[0];r.left<e&&(r.left=e);for(let i=0;i<this.scanlines.length;i++)if(r=this.scanlines[i],r.left>n){this.scanlines.splice(i,this.scanlines.length-i);break}this.scanlines.length>0&&(r=this.scanlines[this.scanlines.length-1],r.right>n&&(r.right=n))}return this.scanlines.length>0}},oUe=class{constructor(e,n){n&&e.skip(4),this.width=e.readUint16(),this.height=e.readUint16(),this.planes=e.readUint16(),this.bitcount=e.readUint16()}colors(){return this.bitcount<=8?1<<this.bitcount:0}},T0e=class{constructor(e,n){n&&e.skip(4),this.width=e.readInt32(),this.height=e.readInt32(),this.planes=e.readUint16(),this.bitcount=e.readUint16(),this.compression=e.readUint32(),this.sizeimage=e.readUint32(),this.xpelspermeter=e.readInt32(),this.ypelspermeter=e.readInt32(),this.clrused=e.readUint32(),this.clrimportant=e.readUint32()}colors(){return this.clrused!==0?this.clrused<256?this.clrused:256:this.bitcount>8?0:1<<this.bitcount}},aUe=class{constructor(e,n){this._usergb=n;const r=e.readUint32();if(this._infosize=r,r===Ge.GDI.BITMAPCOREHEADER_SIZE)this._header=new oUe(e,!1),this._infosize+=this._header.colors()*(n?3:2);else{this._header=new T0e(e,!1);const i=this._header.compression===Ge.GDI.BitmapCompression.BI_BITFIELDS?3:0;r<=Ge.GDI.BITMAPINFOHEADER_SIZE+i*4&&(this._infosize=Ge.GDI.BITMAPINFOHEADER_SIZE+i*4),this._infosize+=this._header.colors()*(n?4:2)}}getWidth(){return this._header.width}getHeight(){return Math.abs(this._header.height)}infosize(){return this._infosize}header(){return this._header}},Zee=class{constructor(e,n){this._reader=e,this._offset=e.pos,this._location=n,this._info=new aUe(e,!0)}getWidth(){return this._info.getWidth()}getHeight(){return this._info.getHeight()}totalSize(){return this._location.header.size+this._location.data.size}makeBitmapFileHeader(){const e=new ArrayBuffer(14),n=new Uint8Array(e);return n[0]=66,n[1]=77,Ge._writeUint32Val(n,2,this.totalSize()+14),Ge._writeUint32Val(n,10,this._info.infosize()+14),Ge._blobToBinary(n)}base64ref(){const e=this._reader.pos;this._reader.seek(this._offset);let n="image/bmp";const r=this._info.header();let i;if(r instanceof T0e&&r.compression!=null)switch(r.compression){case Ge.GDI.BitmapCompression.BI_JPEG:n="data:image/jpeg";break;case Ge.GDI.BitmapCompression.BI_PNG:n="data:image/png";break;default:i=this.makeBitmapFileHeader();break}else i=this.makeBitmapFileHeader();this._reader.seek(this._location.header.offset),i!=null?i+=this._reader.readBinary(this._location.header.size):i=this._reader.readBinary(this._location.header.size),this._reader.seek(this._location.data.offset),i+=this._reader.readBinary(this._location.data.size);const s="data:"+n+";base64,"+btoa(i);return this._reader.seek(e),s}},dd=class k0e{constructor(e,n,r,i){e!=null?(this.r=e.readUint8(),this.g=e.readUint8(),this.b=e.readUint8(),e.skip(1)):(this.r=n,this.g=r,this.b=i)}clone(){return new k0e(null,this.r,this.g,this.b)}toHex(){return(16777216+(this.r<<16|this.g<<8|this.b)).toString(16).slice(1)}toString(){return"{r: "+this.r+", g: "+this.g+", b: "+this.b+"}"}},lUe=class C0e extends sC{constructor(e,n){if(super("font"),e!=null){this.height=e.readInt32(),this.width=e.readInt32(),this.escapement=e.readInt32(),this.orientation=e.readInt32(),this.weight=e.readInt32(),this.italic=e.readUint8(),this.underline=e.readUint8(),this.strikeout=e.readUint8(),this.charset=e.readUint8(),this.outprecision=e.readUint8(),this.clipprecision=e.readUint8(),this.quality=e.readUint8();const r=e.readUint8();this.pitch=r&15,this.family=r>>6&3;const i=n,s=e.pos;this.facename=e.readFixedSizeUnicodeString(Math.min(i-(e.pos-s),32))}else n!=null?(n=n,this.height=n.height,this.width=n.width,this.escapement=n.escapement,this.orientation=n.orientation,this.weight=n.weight,this.italic=n.italic,this.underline=n.underline,this.strikeout=n.strikeout,this.charset=n.charset,this.outprecision=n.outprecision,this.clipprecision=n.clipprecision,this.quality=n.quality,this.pitch=n.pitch,this.family=n.family,this.facename=n.facename):(this.height=-80,this.width=0,this.escapement=0,this.orientation=0,this.weight=400,this.italic=0,this.underline=0,this.strikeout=0,this.charset=0,this.outprecision=0,this.clipprecision=0,this.quality=0,this.pitch=0,this.family=0,this.facename="Helvetica")}clone(){return new C0e(null,this)}toString(){return JSON.stringify(this)}},ZA=class _0e extends sC{constructor(e,n){if(super("brush"),e!=null){const r=e.pos;switch(this.style=e.readUint32(),this.style){case Ge.GDI.BrushStyle.BS_SOLID:this.color=new dd(e);break;case Ge.GDI.BrushStyle.BS_PATTERN:this.pattern=new Zee(e);break;case Ge.GDI.BrushStyle.BS_DIBPATTERNPT:this.dibpatternpt=new Zee(e);break;case Ge.GDI.BrushStyle.BS_HATCHED:this.color=new dd(e),this.hatchstyle=e.readUint32();break}e.seek(r+12)}else switch(this.style=n.style,this.style){case Ge.GDI.BrushStyle.BS_SOLID:this.color=n.color.clone();break;case Ge.GDI.BrushStyle.BS_PATTERN:this.pattern=n.pattern;break;case Ge.GDI.BrushStyle.BS_DIBPATTERNPT:this.dibpatternpt=n.dibpatternpt;break;case Ge.GDI.BrushStyle.BS_HATCHED:this.color=n.color.clone(),this.hatchstyle=n.hatchstyle;break}}clone(){return new _0e(null,this)}toString(){let e="{style: "+this.style;switch(this.style){case Ge.GDI.BrushStyle.BS_SOLID:e+=", color: "+this.color.toString();break;case Ge.GDI.BrushStyle.BS_HATCHED:e+=", color: "+this.color.toString()+", hatchstyle: "+this.hatchstyle;break}return e+"}"}},JA=class N0e extends sC{constructor(e,n,r,i,s){super("pen"),e!=null?n!=null?(this.style=e.readUint32()&255,this.width=e.readUint32(),this.brush=new ZA(e),this.color=this.brush.color!=null?this.brush.color.clone():new dd(null,0,0,0)):(this.style=e.readUint32()&255,this.width=new Fh(e).x,this.color=new dd(e)):(this.style=n,this.width=r,i!=null&&(this.color=i),s!=null&&(this.brush=s))}clone(){return new N0e(null,this.style,this.width,this.color!=null?this.color.clone():null,this.brush!=null?this.brush.clone():null)}toString(){return"{style: "+this.style+", width: "+this.width+", color: "+(this.color!=null?this.color.toString():"none")+"}"}};class cUe{constructor(e,n){const r=e.pos-8;if(this.size=n,this.bounds=new Fs(e),this.frame=new Fs(e),e.readUint32()!==Ge.GDI.FormatSignature.ENHMETA_SIGNATURE)throw new Cr("Invalid header signature");e.skip(4),e.skip(4),e.skip(4),e.skip(2),e.skip(2);const i=e.readUint32(),s=e.readUint32();this.nPalEntries=e.readUint32(),this.refDevCx=e.readUint32(),this.refDevCy=e.readUint32(),this.refDevCxMm=e.readUint32(),this.refDevCyMm=e.readUint32();let o=n;if(i>0){if(s<88)throw new Cr("Invalid header description offset");if(o=s+i*2,o>n)throw new Cr("Invalid header description length");const a=e.pos;e.seek(r+s),this.description=e.readFixedSizeUnicodeString(i),e.seek(a)}else this.description="";if(o>=100){const a=e.readUint32(),l=e.readUint32();if(e.readUint32()!==0)throw new Cr("OpenGL records are not yet supported");if(l!==0){if(l<100||l<o)throw new Cr("Invalid pixel format offset");if(o=l+a,o>n)throw new Cr("Invalid pixel format size")}o>=108&&(this.displayDevCxUm=e.readUint32(),this.displayDevCyUm=e.readUint32())}}toString(){return"{bounds: "+this.bounds.toString()+", frame: "+this.frame.toString()+", description: "+this.description+"}"}}class uUe{constructor(e,n){this._records=[],this._header=new cUe(e,n);let r=!1,i=n;e:for(;!r;){e.seek(i);const s=e.readUint32(),o=e.readUint32();if(o<8)throw new Cr("Invalid record size");switch(s){case Ge.GDI.RecordType.EMR_EOF:r=!0;break e;case Ge.GDI.RecordType.EMR_SETMAPMODE:{const a=e.readInt32();this._records.push(l=>{l.setMapMode(a)});break}case Ge.GDI.RecordType.EMR_SETWINDOWORGEX:{const a=e.readInt32(),l=e.readInt32();this._records.push(c=>{c.setWindowOrgEx(a,l)});break}case Ge.GDI.RecordType.EMR_SETWINDOWEXTEX:{const a=e.readUint32(),l=e.readUint32();this._records.push(c=>{c.setWindowExtEx(a,l)});break}case Ge.GDI.RecordType.EMR_SETVIEWPORTORGEX:{const a=e.readInt32(),l=e.readInt32();this._records.push(c=>{c.setViewportOrgEx(a,l)});break}case Ge.GDI.RecordType.EMR_SETVIEWPORTEXTEX:{const a=e.readUint32(),l=e.readUint32();this._records.push(c=>{c.setViewportExtEx(a,l)});break}case Ge.GDI.RecordType.EMR_SAVEDC:{this._records.push(a=>{a.saveDC()});break}case Ge.GDI.RecordType.EMR_RESTOREDC:{const a=e.readInt32();this._records.push(l=>{l.restoreDC(a)});break}case Ge.GDI.RecordType.EMR_SETBKMODE:{const a=e.readUint32();this._records.push(l=>{l.setBkMode(a)});break}case Ge.GDI.RecordType.EMR_SETBKCOLOR:{const a=new dd(e);this._records.push(l=>{l.setBkColor(a)});break}case Ge.GDI.RecordType.EMR_CREATEBRUSHINDIRECT:{const a=e.readUint32(),l=new ZA(e);this._records.push(c=>{c.createBrush(a,l)});break}case Ge.GDI.RecordType.EMR_CREATEPEN:{const a=e.readUint32(),l=new JA(e,null);this._records.push(c=>{c.createPen(a,l)});break}case Ge.GDI.RecordType.EMR_EXTCREATEPEN:{const a=e.readUint32(),l=e.readUint32(),c=e.readUint32(),u=e.readUint32(),d=e.readUint32(),f=new JA(e,{header:{off:l,size:c},data:{off:u,size:d}});this._records.push(h=>{h.createPen(a,f)});break}case Ge.GDI.RecordType.EMR_SELECTOBJECT:{const a=e.readUint32();this._records.push(l=>{l.selectObject(a,null)});break}case Ge.GDI.RecordType.EMR_DELETEOBJECT:{const a=e.readUint32();this._records.push(l=>{l.deleteObject(a)});break}case Ge.GDI.RecordType.EMR_RECTANGLE:{const a=new Fs(e);this._records.push(l=>{l.rectangle(a,0,0)});break}case Ge.GDI.RecordType.EMR_ROUNDRECT:{const a=new Fs(e),l=new XH(e);this._records.push(c=>{c.rectangle(a,l.cx,l.cy)});break}case Ge.GDI.RecordType.EMR_LINETO:{const a=e.readInt32(),l=e.readInt32();this._records.push(c=>{c.lineTo(a,l)});break}case Ge.GDI.RecordType.EMR_MOVETOEX:{const a=e.readInt32(),l=e.readInt32();this._records.push(c=>{c.moveToEx(a,l)});break}case Ge.GDI.RecordType.EMR_POLYGON:case Ge.GDI.RecordType.EMR_POLYGON16:{const a=s===Ge.GDI.RecordType.EMR_POLYGON16,l=new Fs(e);let c=e.readUint32();const u=[];for(;c>0;)u.push(a?new ME(e):new Fh(e)),c--;this._records.push(d=>{d.polygon(u,l,!0)});break}case Ge.GDI.RecordType.EMR_POLYPOLYGON:case Ge.GDI.RecordType.EMR_POLYPOLYGON16:{const a=s===Ge.GDI.RecordType.EMR_POLYPOLYGON16,l=new Fs(e),c=e.readUint32();e.skip(4);const u=[];for(let f=0;f<c;f++)u.push(e.readUint32());const d=[];for(let f=0;f<c;f++){const h=u[f],m=[];for(let y=0;y<h;y++)m.push(a?new ME(e):new Fh(e));d.push(m)}this._records.push(f=>{f.polyPolygon(d,l)});break}case Ge.GDI.RecordType.EMR_SETPOLYFILLMODE:{const a=e.readUint32();this._records.push(l=>{l.setPolyFillMode(a)});break}case Ge.GDI.RecordType.EMR_POLYLINE16:case Ge.GDI.RecordType.EMR_POLYLINETO16:{const a=s===Ge.GDI.RecordType.EMR_POLYLINETO16,l=new Fs(e);let c=e.readUint32();const u=[];for(;c>0;)u.push(new ME(e)),c--;this._records.push(d=>{d.polyline(a,u,l)});break}case Ge.GDI.RecordType.EMR_POLYBEZIER:case Ge.GDI.RecordType.EMR_POLYBEZIERTO:{const a=s===Ge.GDI.RecordType.EMR_POLYBEZIERTO,l=new Fs(e);let c=e.readUint32();const u=[];for(;c>0;)u.push(new Fh(e)),c--;this._records.push(d=>{d.polybezier(a,u,l)});break}case Ge.GDI.RecordType.EMR_POLYBEZIER16:{const a=new Fs(e),l=new Fh(e);let c=e.readUint32();const u=[l];for(;c>0;)u.push(new ME(e)),c--;this._records.push(d=>{d.polybezier(!1,u,a)});break}case Ge.GDI.RecordType.EMR_POLYBEZIERTO16:{const a=new Fs(e);let l=e.readUint32();const c=[];for(;l>0;)c.push(new ME(e)),l--;this._records.push(u=>{u.polybezier(!0,c,a)});break}case Ge.GDI.RecordType.EMR_SETTEXTALIGN:{const a=e.readUint32();this._records.push(l=>{l.setTextAlign(a)});break}case Ge.GDI.RecordType.EMR_SETSTRETCHBLTMODE:{const a=e.readUint32();this._records.push(l=>{l.setStretchBltMode(a)});break}case Ge.GDI.RecordType.EMR_SETBRUSHORGEX:{const a=new Fh(e);this._records.push(l=>{l.setBrushOrgEx(a)});break}case Ge.GDI.RecordType.EMR_BEGINPATH:{this._records.push(a=>{a.beginPath()});break}case Ge.GDI.RecordType.EMR_ENDPATH:{this._records.push(a=>{a.endPath()});break}case Ge.GDI.RecordType.EMR_ABORTPATH:{this._records.push(a=>{a.abortPath()});break}case Ge.GDI.RecordType.EMR_CLOSEFIGURE:{this._records.push(a=>{a.closeFigure()});break}case Ge.GDI.RecordType.EMR_FILLPATH:{const a=new Fs(e);this._records.push(l=>{l.fillPath(a)});break}case Ge.GDI.RecordType.EMR_STROKEPATH:{const a=new Fs(e);this._records.push(l=>{l.strokePath(a)});break}case Ge.GDI.RecordType.EMR_SELECTCLIPPATH:{const a=e.readUint32();this._records.push(l=>{l.selectClipPath(a)});break}case Ge.GDI.RecordType.EMR_EXTSELECTCLIPRGN:{e.skip(4);const a=e.readUint32(),l=a!==Ge.GDI.RegionMode.RGN_COPY?new E0e(e):null;this._records.push(c=>{c.selectClipRgn(a,l)});break}case Ge.GDI.RecordType.EMR_OFFSETCLIPRGN:{const a=new Fh(e);this._records.push(l=>{l.offsetClipRgn(a)});break}case Ge.GDI.RecordType.EMR_SETMITERLIMIT:{const a=e.readUint32();this._records.push(l=>{l.setMiterLimit(a)});break}case Ge.GDI.RecordType.EMR_POLYLINE:case Ge.GDI.RecordType.EMR_POLYLINETO:case Ge.GDI.RecordType.EMR_POLYPOLYLINE:case Ge.GDI.RecordType.EMR_SETPIXELV:case Ge.GDI.RecordType.EMR_SETMAPPERFLAGS:case Ge.GDI.RecordType.EMR_SETROP2:case Ge.GDI.RecordType.EMR_SETCOLORADJUSTMENT:case Ge.GDI.RecordType.EMR_SETTEXTCOLOR:case Ge.GDI.RecordType.EMR_SETMETARGN:case Ge.GDI.RecordType.EMR_EXCLUDECLIPRECT:case Ge.GDI.RecordType.EMR_INTERSECTCLIPRECT:case Ge.GDI.RecordType.EMR_SCALEVIEWPORTEXTEX:case Ge.GDI.RecordType.EMR_SCALEWINDOWEXTEX:case Ge.GDI.RecordType.EMR_SETWORLDTRANSFORM:case Ge.GDI.RecordType.EMR_MODIFYWORLDTRANSFORM:case Ge.GDI.RecordType.EMR_ANGLEARC:case Ge.GDI.RecordType.EMR_ELLIPSE:case Ge.GDI.RecordType.EMR_ARC:case Ge.GDI.RecordType.EMR_CHORD:case Ge.GDI.RecordType.EMR_PIE:case Ge.GDI.RecordType.EMR_SELECTPALETTE:case Ge.GDI.RecordType.EMR_CREATEPALETTE:case Ge.GDI.RecordType.EMR_SETPALETTEENTRIES:case Ge.GDI.RecordType.EMR_RESIZEPALETTE:case Ge.GDI.RecordType.EMR_REALIZEPALETTE:case Ge.GDI.RecordType.EMR_EXTFLOODFILL:case Ge.GDI.RecordType.EMR_ARCTO:case Ge.GDI.RecordType.EMR_POLYDRAW:case Ge.GDI.RecordType.EMR_SETARCDIRECTION:case Ge.GDI.RecordType.EMR_STROKEANDFILLPATH:case Ge.GDI.RecordType.EMR_FLATTENPATH:case Ge.GDI.RecordType.EMR_WIDENPATH:case Ge.GDI.RecordType.EMR_COMMENT:case Ge.GDI.RecordType.EMR_FILLRGN:case Ge.GDI.RecordType.EMR_FRAMERGN:case Ge.GDI.RecordType.EMR_INVERTRGN:case Ge.GDI.RecordType.EMR_PAINTRGN:case Ge.GDI.RecordType.EMR_BITBLT:case Ge.GDI.RecordType.EMR_STRETCHBLT:case Ge.GDI.RecordType.EMR_MASKBLT:case Ge.GDI.RecordType.EMR_PLGBLT:case Ge.GDI.RecordType.EMR_SETDIBITSTODEVICE:case Ge.GDI.RecordType.EMR_STRETCHDIBITS:case Ge.GDI.RecordType.EMR_EXTCREATEFONTINDIRECTW:case Ge.GDI.RecordType.EMR_EXTTEXTOUTA:case Ge.GDI.RecordType.EMR_EXTTEXTOUTW:case Ge.GDI.RecordType.EMR_POLYPOLYLINE16:case Ge.GDI.RecordType.EMR_POLYDRAW16:case Ge.GDI.RecordType.EMR_CREATEMONOBRUSH:case Ge.GDI.RecordType.EMR_CREATEDIBPATTERNBRUSHPT:case Ge.GDI.RecordType.EMR_POLYTEXTOUTA:case Ge.GDI.RecordType.EMR_POLYTEXTOUTW:case Ge.GDI.RecordType.EMR_SETICMMODE:case Ge.GDI.RecordType.EMR_CREATECOLORSPACE:case Ge.GDI.RecordType.EMR_SETCOLORSPACE:case Ge.GDI.RecordType.EMR_DELETECOLORSPACE:case Ge.GDI.RecordType.EMR_GLSRECORD:case Ge.GDI.RecordType.EMR_GLSBOUNDEDRECORD:case Ge.GDI.RecordType.EMR_PIXELFORMAT:case Ge.GDI.RecordType.EMR_DRAWESCAPE:case Ge.GDI.RecordType.EMR_EXTESCAPE:case Ge.GDI.RecordType.EMR_SMALLTEXTOUT:case Ge.GDI.RecordType.EMR_FORCEUFIMAPPING:case Ge.GDI.RecordType.EMR_NAMEDESCAPE:case Ge.GDI.RecordType.EMR_COLORCORRECTPALETTE:case Ge.GDI.RecordType.EMR_SETICMPROFILEA:case Ge.GDI.RecordType.EMR_SETICMPROFILEW:case Ge.GDI.RecordType.EMR_ALPHABLEND:case Ge.GDI.RecordType.EMR_SETLAYOUT:case Ge.GDI.RecordType.EMR_TRANSPARENTBLT:case Ge.GDI.RecordType.EMR_GRADIENTFILL:case Ge.GDI.RecordType.EMR_SETLINKEDUFIS:case Ge.GDI.RecordType.EMR_SETTEXTJUSTIFICATION:case Ge.GDI.RecordType.EMR_COLORMATCHTOTARGETW:case Ge.GDI.RecordType.EMR_CREATECOLORSPACEW:default:{let a="UNKNOWN";for(const l in Ge.GDI.RecordType)if(Ge.GDI.RecordType[l]===s){a=l;break}Ge.log("[EMF] "+a+" record (0x"+s.toString(16)+") at offset 0x"+i.toString(16)+" with "+o+" bytes");break}}i+=o}if(!r)throw new Cr("Could not read all records")}play(e){const n=this._records.length;for(let r=0;r<n;r++)this._records[r](e)}}class YH extends sC{constructor(e,n){super("path"),e!=null?this.svgPath=e:this.svgPath=n.svgPath}clone(){return new YH(null,this)}toString(){return"{[path]}"}}function dUe(){const t=(i,s,o)=>new ZA(null,{style:Ge.GDI.BrushStyle.BS_SOLID,color:new dd(null,i,s,o)}),e=(i,s,o)=>new JA(null,Ge.GDI.PenStyle.PS_SOLID,1,new dd(null,i,s,o),null),n={WHITE_BRUSH:t(255,255,255),LTGRAY_BRUSH:t(212,208,200),GRAY_BRUSH:t(128,128,128),DKGRAY_BRUSH:t(64,64,64),BLACK_BRUSH:t(0,0,0),NULL_BRUSH:new ZA(null,{style:Ge.GDI.BrushStyle.BS_NULL}),WHITE_PEN:e(255,255,255),BLACK_PEN:e(0,0,0),NULL_PEN:new JA(null,Ge.GDI.PenStyle.PS_NULL,0,null,null),OEM_FIXED_FONT:null,ANSI_FIXED_FONT:null,ANSI_VAR_FONT:null,SYSTEM_FONT:null,DEVICE_DEFAULT_FONT:null,DEFAULT_PALETTE:null,SYSTEM_FIXED_FONT:null,DEFAULT_GUI_FONT:null},r={};for(const i in n){const o=Ge.GDI.StockObject[i]-2147483648;r[o.toString()]=n[i]}return r}const fUe=dUe();let Jee=class{constructor(e,n){if(e!=null){this._svggroup=e._svggroup,this._svgclipChanged=e._svgclipChanged,this._svgtextbkfilter=e._svgtextbkfilter,this.mapmode=e.mapmode,this.stretchmode=e.stretchmode,this.textalign=e.textalign,this.bkmode=e.bkmode,this.textcolor=e.textcolor.clone(),this.bkcolor=e.bkcolor.clone(),this.polyfillmode=e.polyfillmode,this.miterlimit=e.miterlimit,this.wx=e.wx,this.wy=e.wy,this.ww=e.ww,this.wh=e.wh,this.vx=e.vx,this.vy=e.vy,this.vw=e.vw,this.vh=e.vh,this.x=e.x,this.y=e.y,this.nextbrx=e.nextbrx,this.nextbry=e.nextbry,this.brx=e.brx,this.bry=e.bry,this.clip=e.clip,this.ownclip=!1,this.selected={};for(const r in e.selected)this.selected[r]=e.selected[r]}else{this._svggroup=null,this._svgclipChanged=!1,this._svgtextbkfilter=null,this.mapmode=Ge.GDI.MapMode.MM_ANISOTROPIC,this.stretchmode=Ge.GDI.StretchMode.COLORONCOLOR,this.textalign=0,this.bkmode=Ge.GDI.MixMode.OPAQUE,this.textcolor=new dd(null,0,0,0),this.bkcolor=new dd(null,255,255,255),this.polyfillmode=Ge.GDI.PolygonFillMode.ALTERNATE,this.miterlimit=10,this.wx=0,this.wy=0,this.ww=0,this.wh=0,this.vx=0,this.vy=0,this.vw=0,this.vh=0,this.x=0,this.y=0,this.nextbrx=0,this.nextbry=0,this.brx=0,this.bry=0,this.clip=null,this.ownclip=!1,this.selected={};for(const r in n){const i=n[r];this.selected[r]=i!=null?i.clone():null}}}},hUe=class{constructor(e){this._svg=e,this._svgdefs=null,this._svgPatterns={},this._svgClipPaths={},this._svgPath=null,this.defObjects={brush:new ZA(null,{style:Ge.GDI.BrushStyle.BS_SOLID,color:new dd(null,0,0,0)}),pen:new JA(null,Ge.GDI.PenStyle.PS_SOLID,1,new dd(null,0,0,0),null),font:new lUe(null,null),palette:null,region:null},this.state=new Jee(null,this.defObjects),this.statestack=[this.state],this.objects={}}setMapMode(e){Ge.log("[gdi] setMapMode: mode="+e),this.state.mapmode=e,this.state._svggroup=null}setWindowOrgEx(e,n){Ge.log("[gdi] setWindowOrgEx: x="+e+" y="+n),this.state.wx=e,this.state.wy=n,this.state._svggroup=null}setWindowExtEx(e,n){Ge.log("[gdi] setWindowExtEx: x="+e+" y="+n),this.state.ww=e,this.state.wh=n,this.state._svggroup=null}setViewportOrgEx(e,n){Ge.log("[gdi] setViewportOrgEx: x="+e+" y="+n),this.state.vx=e,this.state.vy=n,this.state._svggroup=null}setViewportExtEx(e,n){Ge.log("[gdi] setViewportExtEx: x="+e+" y="+n),this.state.vw=e,this.state.vh=n,this.state._svggroup=null}setBrushOrgEx(e){Ge.log("[gdi] setBrushOrgEx: x="+e.x+" y="+e.y),this.state.nextbrx=e.x,this.state.nextbry=e.y}saveDC(){Ge.log("[gdi] saveDC");const e=this.state;this.state=new Jee(this.state),this.statestack.push(e),this.state._svggroup=null}restoreDC(e){if(Ge.log("[gdi] restoreDC: saved="+e),this.statestack.length>1)if(e===-1)this.state=this.statestack.pop();else{if(e<-1)throw new Cr("restoreDC: relative restore not implemented");if(e>1)throw new Cr("restoreDC: absolute restore not implemented")}else throw new Cr("No saved contexts");this.state._svggroup=null}setStretchBltMode(e){Ge.log("[gdi] setStretchBltMode: stretchMode="+e)}rectangle(e,n,r){Ge.log("[gdi] rectangle: rect="+e.toString()+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const i=this._todevY(e.bottom),s=this._todevX(e.right),o=this._todevY(e.top),a=this._todevX(e.left);n=this._todevH(n),r=this._todevH(r),Ge.log("[gdi] rectangle: TRANSLATED: bottom="+i+" right="+s+" top="+o+" left="+a+" rh="+r+" rw="+n),this._pushGroup();const l=this._applyOpts(null,!0,!0,!1);this._svg.rect(this.state._svggroup,a,o,s-a,i-o,n/2,r/2,l)}lineTo(e,n){Ge.log("[gdi] lineTo: x="+e+" y="+n+" with pen "+this.state.selected.pen.toString());const r=this._todevX(e),i=this._todevY(n),s=this._todevX(this.state.x),o=this._todevY(this.state.y);this.state.x=e,this.state.y=n,Ge.log("[gdi] lineTo: TRANSLATED: toX="+r+" toY="+i+" fromX="+s+" fromY="+o),this._pushGroup();const a=this._applyOpts(null,!0,!1,!1);this._svg.line(this.state._svggroup,s,o,r,i,a)}moveToEx(e,n){Ge.log("[gdi] moveToEx: x="+e+" y="+n),this.state.x=e,this.state.y=n,this._svgPath!=null&&(this._svgPath.move(this.state.x,this.state.y),Ge.log("[gdi] new path: "+this._svgPath.path()))}polygon(e,n,r){Ge.log("[gdi] polygon: points="+e+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const i=[];for(let o=0;o<e.length;o++){const a=e[o];i.push([this._todevX(a.x),this._todevY(a.y)])}r&&this._pushGroup();const s={"fill-rule":this.state.polyfillmode===Ge.GDI.PolygonFillMode.ALTERNATE?"evenodd":"nonzero"};this._applyOpts(s,!0,!0,!1),this._svg.polygon(this.state._svggroup,i,s)}polyPolygon(e,n){Ge.log("[gdi] polyPolygon: polygons.length="+e.length+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const r=e.length;for(let i=0;i<r;i++)this.polygon(e[i],n,i===0)}polyline(e,n,r){Ge.log("[gdi] polyline: isLineTo="+e.toString()+", points="+n+", bounds="+r.toString()+" with pen "+this.state.selected.pen.toString());const i=[];for(let s=0;s<n.length;s++){const o=n[s];i.push([this._todevX(o.x),this._todevY(o.y)])}if(this._svgPath!=null){if(!e||i.length===0)this._svgPath.move(this._todevX(this.state.x),this._todevY(this.state.y));else{const s=i[0];this._svgPath.move(s[0],s[1])}this._svgPath.line(i),Ge.log("[gdi] new path: "+this._svgPath.path())}else{this._pushGroup();const s=this._applyOpts(null,!0,!1,!1);if(e&&n.length>0){const o=n[0];(o.x!==this.state.x||o.y!==this.state.y)&&i.unshift([this._todevX(this.state.x),this._todevY(this.state.y)])}this._svg.polyline(this.state._svggroup,i,s)}if(n.length>0){const s=n[n.length-1];this.state.x=s.x,this.state.y=s.y}}polybezier(e,n,r){Ge.log("[gdi] polybezier: isPolyBezierTo="+e.toString()+", points="+n+", bounds="+r.toString()+" with pen "+this.state.selected.pen.toString());const i=[];for(let s=0;s<n.length;s++){const o=n[s];i.push({x:this._todevX(o.x),y:this._todevY(o.y)})}if(this._svgPath!=null){if(e&&i.length>0){const s=i[0];this._svgPath.move(s.x,s.y)}else this._svgPath.move(this._todevX(this.state.x),this._todevY(this.state.y));if(i.length<(e?3:4))throw new Cr("Not enough points to draw bezier");for(let s=e?1:0;s+3<=i.length;s+=3){const o=i[s],a=i[s+1],l=i[s+2];this._svgPath.curveC(o.x,o.y,a.x,a.y,l.x,l.y)}Ge.log("[gdi] new path: "+this._svgPath.path())}else throw new Cr("polybezier not implemented (not a path)");if(n.length>0){const s=n[n.length-1];this.state.x=s.x,this.state.y=s.y}}selectClipPath(e){Ge.log("[gdi] selectClipPath: rgnMode=0x"+e.toString(16))}selectClipRgn(e,n){if(Ge.log("[gdi] selectClipRgn: rgnMode=0x"+e.toString(16)),e===Ge.GDI.RegionMode.RGN_COPY)this.state.selected.region=n,this.state.clip=null,this.state.ownclip=!1;else throw n==null?new Cr("No clip region to select"):new Cr("Not implemented: rgnMode=0x"+e.toString(16));this.state._svgclipChanged=!0}offsetClipRgn(e){Ge.log("[gdi] offsetClipRgn: offset="+e.toString()),this._getClipRgn().offset(e.x,e.y)}setTextAlign(e){Ge.log("[gdi] setTextAlign: textAlignmentMode=0x"+e.toString(16)),this.state.textalign=e}setMiterLimit(e){Ge.log("[gdi] setMiterLimit: miterLimit="+e),this.state.miterlimit=e}setBkMode(e){Ge.log("[gdi] setBkMode: bkMode=0x"+e.toString(16)),this.state.bkmode=e}setBkColor(e){Ge.log("[gdi] setBkColor: bkColor="+e.toString()),this.state.bkcolor=e,this.state._svgtextbkfilter=null}setPolyFillMode(e){Ge.log("[gdi] setPolyFillMode: polyFillMode="+e),this.state.polyfillmode=e}createBrush(e,n){const r=this._storeObject(n,e);Ge.log("[gdi] createBrush: brush="+n.toString()+" with handle "+r)}createPen(e,n){const r=this._storeObject(n,e);Ge.log("[gdi] createPen: pen="+n.toString()+" width handle "+r)}createPenEx(e,n){const r=this._storeObject(n,e);Ge.log("[gdi] createPenEx: pen="+n.toString()+" width handle "+r)}selectObject(e,n){const r=this._getObject(e);r!=null&&(n==null||r.type===n)?(this._selectObject(r),Ge.log("[gdi] selectObject: objIdx="+e+(r?" selected "+r.type+": "+r.toString():"[invalid index]"))):Ge.log("[gdi] selectObject: objIdx="+e+(r?" invalid object type: "+r.type:"[invalid index]"))}abortPath(){Ge.log("[gdi] abortPath"),this._svgPath!=null&&(this._svgPath=null)}beginPath(){Ge.log("[gdi] beginPath"),this._svgPath!=null&&(this._svgPath=null),this._svgPath=this._svg.createPath()}closeFigure(){if(Ge.log("[gdi] closeFigure"),this._svgPath==null)throw new Cr("No path bracket: cannot close figure");this._svgPath.close()}fillPath(e){if(Ge.log("[gdi] fillPath"),this.state.selected.path==null)throw new Cr("No path selected");const n=this.state.selected.path,r=this._applyOpts(null,!0,!0,!1);this._svg.path(this.state._svggroup,n.svgPath,r),this._pushGroup(),this.state.selected.path=null}strokePath(e){if(Ge.log("[gdi] strokePath"),this.state.selected.path==null)throw new Cr("No path selected");const n=this.state.selected.path,r=this._applyOpts({fill:"none"},!0,!1,!1);this._svg.path(this.state._svggroup,n.svgPath,r),this._pushGroup(),this.state.selected.path=null}endPath(){if(Ge.log("[gdi] endPath"),this._svgPath==null)throw new Cr("No path bracket: cannot end path");this._pushGroup(),this._selectObject(new YH(this._svgPath)),this._svgPath=null}deleteObject(e){const n=this._deleteObject(e);Ge.log("[gdi] deleteObject: objIdx="+e+(n?" deleted object":"[invalid index]"))}_pushGroup(){if(this.state._svggroup==null||this.state._svgclipChanged){this.state._svgclipChanged=!1,this.state._svgtextbkfilter=null;const e={viewBox:[this.state.vx,this.state.vy,this.state.vw,this.state.vh].join(" "),preserveAspectRatio:"none"};this.state.clip!=null?(Ge.log("[gdi] new svg x="+this.state.vx+" y="+this.state.vy+" width="+this.state.vw+" height="+this.state.vh+" with clipping"),e["clip-path"]="url(#"+this._getSvgClipPathForRegion(this.state.clip)+")"):Ge.log("[gdi] new svg x="+this.state.vx+" y="+this.state.vy+" width="+this.state.vw+" height="+this.state.vh+" without clipping"),this.state._svggroup=this._svg.svg(this.state._svggroup,this.state.vx,this.state.vy,this.state.vw,this.state.vh,e)}}_getStockObject(e){return e>=2147483648&&e<=2147483665?fUe[(e-2147483648).toString()]:e===Ge.GDI.StockObject.DC_BRUSH?this.state.selected.brush:e===Ge.GDI.StockObject.DC_PEN?this.state.selected.pen:null}_storeObject(e,n){if(!n){for(n=0;this.objects[n.toString()]!=null&&n<=65535;)n++;if(n>65535)return Ge.log("[gdi] Too many objects!"),-1}return this.objects[n.toString()]=e,n}_getObject(e){let n=this.objects[e.toString()];return n==null&&(n=this._getStockObject(e),n==null&&Ge.log("[gdi] No object with handle "+e)),n}_getSvgDef(){return this._svgdefs==null&&(this._svgdefs=this._svg.defs()),this._svgdefs}_getSvgClipPathForRegion(e){for(const i in this._svgClipPaths)if(this._svgClipPaths[i]===e)return i;const n=Ge._makeUniqueId("c"),r=this._svg.clipPath(this._getSvgDef(),n,"userSpaceOnUse");switch(e.complexity){case 1:this._svg.rect(r,this._todevX(e.bounds.left),this._todevY(e.bounds.top),this._todevW(e.bounds.right-e.bounds.left),this._todevH(e.bounds.bottom-e.bounds.top),{fill:"black","stroke-width":0});break;case 2:for(let i=0;i<e.scans.length;i++){const s=e.scans[i];for(let o=0;o<s.scanlines.length;o++){const a=s.scanlines[o];this._svg.rect(r,this._todevX(a.left),this._todevY(s.top),this._todevW(a.right-a.left),this._todevH(s.bottom-s.top),{fill:"black","stroke-width":0})}}break}return this._svgClipPaths[n]=e,n}_getSvgPatternForBrush(e){for(const a in this._svgPatterns)if(this._svgPatterns[a]===e)return a;let n,r,i;switch(e.style){case Ge.GDI.BrushStyle.BS_PATTERN:n=e.pattern.getWidth(),r=e.pattern.getHeight();break;case Ge.GDI.BrushStyle.BS_DIBPATTERNPT:n=e.dibpatternpt.getWidth(),r=e.dibpatternpt.getHeight(),i=e.dibpatternpt.base64ref();break;default:throw new Cr("Invalid brush style")}const s=Ge._makeUniqueId("p"),o=this._svg.pattern(this._getSvgDef(),s,this.state.brx,this.state.bry,n,r,{patternUnits:"userSpaceOnUse"});return this._svg.image(o,0,0,n,r,i),this._svgPatterns[s]=e,s}_selectObject(e){switch(this.state.selected[e.type]=e,e.type){case"region":this.state._svgclipChanged=!0;break;case"brush":this.state.brx=this.state.nextbrx,this.state.bry=this.state.nextbry;break}}_deleteObject(e){const n=this.objects[e.toString()];if(n!=null){for(let r=0;r<this.statestack.length;r++){const i=this.statestack[r];i.selected[n.type]===n&&(i.selected[n.type]=this.defObjects[n.type].clone())}return delete this.objects[e.toString()],!0}return Ge.log("[gdi] Cannot delete object with invalid handle "+e),!1}_getClipRgn(){return this.state.clip!=null?this.state.ownclip||(this.state.clip=this.state.clip.clone()):this.state.selected.region!=null?this.state.clip=this.state.selected.region.clone():this.state.clip=sUe(this.state.wx,this.state.wy,this.state.wx+this.state.ww,this.state.wy+this.state.wh),this.state.ownclip=!0,this.state.clip}_todevX(e){return Math.floor((e-this.state.wx)*(this.state.vw/this.state.ww))+this.state.vx}_todevY(e){return Math.floor((e-this.state.wy)*(this.state.vh/this.state.wh))+this.state.vy}_todevW(e){return Math.floor(e*(this.state.vw/this.state.ww))+this.state.vx}_todevH(e){return Math.floor(e*(this.state.vh/this.state.wh))+this.state.vy}_tologicalX(e){return Math.floor((e-this.state.vx)/(this.state.vw/this.state.ww))+this.state.wx}_tologicalY(e){return Math.floor((e-this.state.vy)/(this.state.vh/this.state.wh))+this.state.wy}_tologicalW(e){return Math.floor(e/(this.state.vw/this.state.ww))+this.state.wx}_tologicalH(e){return Math.floor(e/(this.state.vh/this.state.wh))+this.state.wy}_applyOpts(e,n,r,i){if(e==null&&(e={}),n){const s=this.state.selected.pen;if(s.style!==Ge.GDI.PenStyle.PS_NULL){e.stroke="#"+s.color.toHex(),e["stroke-width"]=s.width,e["stroke-miterlimit"]=this.state.miterlimit,e["stroke-linecap"]="round";const o=1;e["stroke-linejoin"]="round";const a=e["stroke-width"]*4,l=e["stroke-width"]*2;switch(s.style){case Ge.GDI.PenStyle.PS_DASH:e["stroke-dasharray"]=[a,l].toString();break;case Ge.GDI.PenStyle.PS_DOT:e["stroke-dasharray"]=[o,l].toString();break;case Ge.GDI.PenStyle.PS_DASHDOT:e["stroke-dasharray"]=[a,l,o,l].toString();break;case Ge.GDI.PenStyle.PS_DASHDOTDOT:e["stroke-dasharray"]=[a,l,o,l,o,l].toString();break}}}if(r){const s=this.state.selected.brush;switch(s.style){case Ge.GDI.BrushStyle.BS_SOLID:e.fill="#"+s.color.toHex();break;case Ge.GDI.BrushStyle.BS_PATTERN:case Ge.GDI.BrushStyle.BS_DIBPATTERNPT:e.fill="url(#"+this._getSvgPatternForBrush(s)+")";break;case Ge.GDI.BrushStyle.BS_NULL:e.fill="none";break;default:Ge.log("[gdi] unsupported brush style: "+s.style),e.fill="none";break}}if(i){const s=this.state.selected.font;e["font-family"]=s.facename,e["font-size"]=Math.abs(s.height),e.fill="#"+this.state.textcolor.toHex()}return e}},pUe=class{constructor(e){this.parse(e),Ge.log("EMFJS.Renderer instantiated")}render(e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return this._render(new b0e(n),e.mapMode,e.wExt,e.hExt,e.xExt,e.yExt),n.setAttribute("viewBox",[0,0,e.xExt,e.yExt].join(" ")),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n}parse(e){this._img=null;const n=new iUe(e);if(n.readUint32()!==1)throw new Cr("Not an EMF file");const i=n.readUint32();if(i%4!==0)throw new Cr("Not an EMF file");if(this._img=new mUe(n,i),this._img==null)throw new Cr("Format not recognized")}_render(e,n,r,i,s,o){const a=new hUe(e);a.setWindowExtEx(r,i),a.setViewportExtEx(s,o),a.setMapMode(n),Ge.log("[EMF] BEGIN RENDERING --->"),this._img.render(a),Ge.log("[EMF] <--- DONE RENDERING")}};class mUe{constructor(e,n){this._hdrsize=n,this._records=new uUe(e,this._hdrsize)}render(e){this._records.play(e)}}class io extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}let I0e=!0;function gUe(t){I0e=t}const m4=class m4{static log(e){I0e&&console.log(e)}static _makeUniqueId(e){return"wmfjs_"+e+this._uniqueId++}static _writeUint32Val(e,n,r){e[n++]=r&255,e[n++]=r>>>8&255,e[n++]=r>>>16&255,e[n++]=r>>>24&255}static _blobToBinary(e){let n="";const r=e.length;for(let i=0;i<r;i++)n+=String.fromCharCode(e[i]);return n}};m4.GDI={METAHEADER_SIZE:18,BITMAPINFOHEADER_SIZE:40,BITMAPCOREHEADER_SIZE:12,MetafileType:{MEMORYMETAFILE:1,DISKMETAFILE:2},MetafileVersion:{METAVERSION100:256,METAVERSION300:768},RecordType:{META_EOF:0,META_REALIZEPALETTE:53,META_SETPALENTRIES:55,META_SETBKMODE:258,META_SETMAPMODE:259,META_SETROP2:260,META_SETRELABS:261,META_SETPOLYFILLMODE:262,META_SETSTRETCHBLTMODE:263,META_SETTEXTCHAREXTRA:264,META_RESTOREDC:295,META_RESIZEPALETTE:313,META_DIBCREATEPATTERNBRUSH:322,META_SETLAYOUT:329,META_SETBKCOLOR:513,META_SETTEXTCOLOR:521,META_OFFSETVIEWPORTORG:529,META_LINETO:531,META_MOVETO:532,META_OFFSETCLIPRGN:544,META_FILLREGION:552,META_SETMAPPERFLAGS:561,META_SELECTPALETTE:564,META_POLYGON:804,META_POLYLINE:805,META_SETTEXTJUSTIFICATION:522,META_SETWINDOWORG:523,META_SETWINDOWEXT:524,META_SETVIEWPORTORG:525,META_SETVIEWPORTEXT:526,META_OFFSETWINDOWORG:527,META_SCALEWINDOWEXT:1040,META_SCALEVIEWPORTEXT:1042,META_EXCLUDECLIPRECT:1045,META_INTERSECTCLIPRECT:1046,META_ELLIPSE:1048,META_FLOODFILL:1049,META_FRAMEREGION:1065,META_ANIMATEPALETTE:1078,META_TEXTOUT:1313,META_POLYPOLYGON:1336,META_EXTFLOODFILL:1352,META_RECTANGLE:1051,META_SETPIXEL:1055,META_ROUNDRECT:1564,META_PATBLT:1565,META_SAVEDC:30,META_PIE:2074,META_STRETCHBLT:2851,META_ESCAPE:1574,META_INVERTREGION:298,META_PAINTREGION:299,META_SELECTCLIPREGION:300,META_SELECTOBJECT:301,META_SETTEXTALIGN:302,META_ARC:2071,META_CHORD:2096,META_BITBLT:2338,META_EXTTEXTOUT:2610,META_SETDIBTODEV:3379,META_DIBBITBLT:2368,META_DIBSTRETCHBLT:2881,META_STRETCHDIB:3907,META_DELETEOBJECT:496,META_CREATEPALETTE:247,META_CREATEPATTERNBRUSH:505,META_CREATEPENINDIRECT:762,META_CREATEFONTINDIRECT:763,META_CREATEBRUSHINDIRECT:764,META_CREATEREGION:1791},MetafileEscapes:{NEWFRAME:1,ABORTDOC:2,NEXTBAND:3,SETCOLORTABLE:4,GETCOLORTABLE:5,FLUSHOUT:6,DRAFTMODE:7,QUERYESCSUPPORT:8,SETABORTPROC:9,STARTDOC:10,ENDDOC:11,GETPHYSPAGESIZE:12,GETPRINTINGOFFSET:13,GETSCALINGFACTOR:14,META_ESCAPE_ENHANCED_METAFILE:15,SETPENWIDTH:16,SETCOPYCOUNT:17,SETPAPERSOURCE:18,PASSTHROUGH:19,GETTECHNOLOGY:20,SETLINECAP:21,SETLINEJOIN:22,SETMITERLIMIT:23,BANDINFO:24,DRAWPATTERNRECT:25,GETVECTORPENSIZE:26,GETVECTORBRUSHSIZE:27,ENABLEDUPLEX:28,GETSETPAPERBINS:29,GETSETPRINTORIENT:30,ENUMPAPERBINS:31,SETDIBSCALING:32,EPSPRINTING:33,ENUMPAPERMETRICS:34,GETSETPAPERMETRICS:35,POSTSCRIPT_DATA:37,POSTSCRIPT_IGNORE:38,GETDEVICEUNITS:42,GETEXTENDEDTEXTMETRICS:256,GETPAIRKERNTABLE:258,EXTTEXTOUT:512,GETFACENAME:513,DOWNLOADFACE:514,METAFILE_DRIVER:2049,QUERYDIBSUPPORT:3073,BEGIN_PATH:4096,CLIP_TO_PATH:4097,END_PATH:4098,OPEN_CHANNEL:4110,DOWNLOADHEADER:4111,CLOSE_CHANNEL:4112,POSTSCRIPT_PASSTHROUGH:4115,ENCAPSULATED_POSTSCRIPT:4116,POSTSCRIPT_IDENTIFY:4117,POSTSCRIPT_INJECTION:4118,CHECKJPEGFORMAT:4119,CHECKPNGFORMAT:4120,GET_PS_FEATURESETTING:4121,MXDC_ESCAPE:4122,SPCLPASSTHROUGH2:4568},MapMode:{MM_TEXT:1,MM_LOMETRIC:2,MM_HIMETRIC:3,MM_LOENGLISH:4,MM_HIENGLISH:5,MM_TWIPS:6,MM_ISOTROPIC:7,MM_ANISOTROPIC:8},StretchMode:{BLACKONWHITE:1,WHITEONBLACK:2,COLORONCOLOR:3,HALFTONE:4},TextAlignmentMode:{TA_UPDATECP:1,TA_RIGHT:2,TA_CENTER:6,TA_BOTTOM:8,TA_BASELINE:24,TA_RTLREADING:256},MixMode:{TRANSPARENT:1,OPAQUE:2},VerticalTextAlignmentMode:{VTA_BOTTOM:2,VTA_CENTER:6,VTA_LEFT:8,VTA_BASELINE:24},BrushStyle:{BS_SOLID:0,BS_NULL:1,BS_HATCHED:2,BS_PATTERN:3,BS_INDEXED:4,BS_DIBPATTERN:5,BS_DIBPATTERNPT:6,BS_PATTERN8X8:7,BS_DIBPATTERN8X8:8,BS_MONOPATTERN:9},PenStyle:{PS_SOLID:0,PS_DASH:1,PS_DOT:2,PS_DASHDOT:3,PS_DASHDOTDOT:4,PS_NULL:5,PS_INSIDEFRAME:6,PS_USERSTYLE:7,PS_ALTERNATE:8,PS_ENDCAP_SQUARE:256,PS_ENDCAP_FLAT:512,PS_JOIN_BEVEL:4096,PS_JOIN_MITER:8192},PolyFillMode:{ALTERNATE:1,WINDING:2},ColorUsage:{DIB_RGB_COLORS:0,DIB_PAL_COLORS:1,DIB_PAL_INDICES:2},PaletteEntryFlag:{PC_RESERVED:1,PC_EXPLICIT:2,PC_NOCOLLAPSE:4},BitmapCompression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5}},m4._uniqueId=0;let Je=m4,R0e=class M0e{constructor(e,n){e instanceof M0e?(this.blob=e.blob,this.data=e.data,this.pos=n||e.pos):(this.blob=e,this.data=new Uint8Array(e),this.pos=n||0)}eof(){return this.pos>=this.data.length}seek(e){if(e<0||e>this.data.length)throw new io("Invalid seek position");this.pos=e}skip(e){const n=this.pos+e;if(n>this.data.length)throw new io("Unexpected end of file");this.pos=n}readBinary(e){if(this.pos+e>this.data.length)throw new io("Unexpected end of file");let r="";for(;e-- >0;)r+=String.fromCharCode(this.data[this.pos++]);return r}readInt8(){if(this.pos+1>this.data.length)throw new io("Unexpected end of file");return this.data[this.pos++]}readUint8(){return this.readInt8()>>>0}readInt32(){if(this.pos+4>this.data.length)throw new io("Unexpected end of file");let e=this.data[this.pos++];return e|=this.data[this.pos++]<<8,e|=this.data[this.pos++]<<16,e|=this.data[this.pos++]<<24,e}readUint32(){return this.readInt32()>>>0}readUint16(){if(this.pos+2>this.data.length)throw new io("Unexpected end of file");let e=this.data[this.pos++];return e|=this.data[this.pos++]<<8,e}readInt16(){let e=this.readUint16();return e>32767&&(e-=65536),e}readString(e){if(this.pos+e>this.data.length)throw new io("Unexpected end of file");let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(this.data[this.pos++]>>>0);return n}readNullTermString(e){let n="";if(e>0){e--;for(let r=0;r<e;r++){if(this.pos+r+1>this.data.length)throw new io("Unexpected end of file");const i=this.data[this.pos+r]>>>0;if(i===0)break;n+=String.fromCharCode(i)}}return n}};class cb{constructor(e,n,r){e!=null?(this.x=e.readInt16(),this.y=e.readInt16()):(this.x=n,this.y=r)}clone(){return new cb(null,this.x,this.y)}toString(){return"{x: "+this.x+", y: "+this.y+"}"}}class zc{constructor(e,n,r,i,s){e!=null?(this.bottom=e.readInt16(),this.right=e.readInt16(),this.top=e.readInt16(),this.left=e.readInt16()):(this.bottom=s,this.right=i,this.top=r,this.left=n)}clone(){return new zc(null,this.left,this.top,this.right,this.bottom)}toString(){return"{left: "+this.left+", top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+"}"}empty(){return this.left>=this.right||this.top>=this.bottom}intersect(e){return this.empty()||e.empty()||this.left>=e.right||this.top>=e.bottom||this.right<=e.left||this.bottom<=e.top?null:new zc(null,Math.max(this.left,e.left),Math.max(this.top,e.top),Math.min(this.right,e.right),Math.min(this.bottom,e.bottom))}}class oC{constructor(e){this.type=e}clone(){throw new io("clone not implemented")}toString(){throw new io("toString not implemented")}}class RR extends oC{constructor(e,n){if(super("region"),e!=null){if(e.skip(2),e.readInt16()!==6)throw new io("Invalid region identifier");e.skip(2),e.readInt16();const r=e.readInt16();e.skip(2);const i=e.readInt16(),s=e.readInt16(),o=e.readInt16(),a=e.readInt16();this.bounds=new zc(null,i,s,o,a),this.scans=[];for(let l=0;l<r;l++)this.scans.push(new GN(e));this._updateComplexity()}else if(n!=null){if(this.bounds=n.bounds!=null?n.bounds.clone():null,n.scans!=null){this.scans=[];for(let r=0;r<n.scans.length;r++)this.scans.push(n.scans[r].clone())}else this.scans=null;this.complexity=n.complexity}else this.bounds=null,this.scans=null,this.complexity=0}clone(){return new RR(null,this)}toString(){return"{complexity: "+["null","simple","complex"][this.complexity]+" bounds: "+(this.bounds!=null?this.bounds.toString():"[none]")+" #scans: "+(this.scans!=null?this.scans.length:"[none]")+"}"}_updateComplexity(){if(this.bounds==null)this.complexity=0,this.scans=null;else if(this.bounds.empty())this.complexity=0,this.scans=null,this.bounds=null;else if(this.scans==null)this.complexity=1;else if(this.complexity=2,this.scans.length===1){const e=this.scans[0];if(e.top===this.bounds.top&&e.bottom===this.bounds.bottom&&e.scanlines.length===1){const n=e.scanlines[0];n.left===this.bounds.left&&n.right===this.bounds.right&&(this.scans=null,this.complexity=1)}}}subtract(e){if(Je.log("[wmf] Region "+this.toString()+" subtract "+e.toString()),this.bounds!=null&&this.bounds.intersect(e)!=null){this.scans==null&&(this.scans=[],this.scans.push(new GN(null,null,this.bounds.top,this.bounds.bottom,[{left:this.bounds.left,right:this.bounds.right}])),this.complexity=2);let r=0;for(;r<this.scans.length;){const s=this.scans[r];if(s.bottom>=e.top){const o=s.clone();s.bottom=e.top-1,o.top=e.top,s.top>=s.bottom?this.scans[r]=o:(Je.log("[wmf] Region split top scan "+r+" for substraction"),this.scans.splice(++r,0,o));break}r++}const i=r;for(;r<this.scans.length;){const s=this.scans[r];if(s.top>e.bottom)break;if(s.bottom>e.bottom){const o=s.clone();s.bottom=e.bottom,o.top=e.bottom+1,s.top>=s.bottom?this.scans[r]=o:(Je.log("[wmf] Region split bottom scan "+r+" for substraction"),this.scans.splice(++r,0,o));break}r++}if(i<this.scans.length){let s=r;for(r=i;r<s;){if(!this.scans[r].subtract(e.left,e.right)){Je.log("[wmf] Region remove now empty scan "+r+" due to subtraction"),this.scans.splice(r,1),s--;continue}r++}}if(this.scans!=null){let s,o,a,l;const c=this.scans.length;for(let u=0;u<c;u++){const d=this.scans[u];u===0&&(o=d.top),u===c-1&&(l=d.bottom);const f=d.scanlines.length;if(f>0){let h=d.scanlines[0];(s==null||h.left<s)&&(s=h.left),h=d.scanlines[f-1],(a==null||h.right>a)&&(a=h.right)}}s!=null&&o!=null&&a!=null&&l!=null?(this.bounds=new zc(null,s,o,a,l),this._updateComplexity()):(this.bounds=null,this.scans=null,this.complexity=0)}else this._updateComplexity()}Je.log("[wmf] Region subtraction -> "+this.toString())}intersect(e){if(Je.log("[wmf] Region "+this.toString()+" intersect with "+e.toString()),this.bounds!=null)if(this.bounds=this.bounds.intersect(e),this.bounds!=null){if(this.scans!=null){let n=0;for(;n<this.scans.length&&this.scans[n].bottom<this.bounds.top;)n++;for(n>0&&(Je.log("[wmf] Region remove "+n+" scans from top"),this.scans.splice(0,n),this.scans.length>0&&(this.scans[0].top=this.bounds.top)),n=0;n<this.scans.length;){const r=this.scans[n];if(r.top>this.bounds.bottom){Je.log("[wmf] Region remove "+(this.scans.length-n)+" scans from bottom"),this.scans.splice(n,this.scans.length-n);break}if(!r.intersect(this.bounds.left,this.bounds.right)){Je.log("[wmf] Region remove now empty scan "+n+" due to intersection"),this.scans.splice(n,1);continue}n++}this.scans.length>0&&(this.scans[this.scans.length-1].bottom=this.bounds.bottom),this._updateComplexity()}}else this.scans=null,this.complexity=0;Je.log("[wmf] Region intersection -> "+this.toString())}offset(e,n){if(this.bounds!=null&&(this.bounds.left+=e,this.bounds.top+=n,this.bounds.right+=e,this.bounds.bottom+=n),this.scans!=null){const r=this.scans.length;for(let i=0;i<r;i++){const s=this.scans[i];s.top+=n,s.bottom+=n;const o=s.scanlines.length;for(let a=0;a<o;a++){const l=s.scanlines[a];l.left+=e,l.right+=e}}}}}function yUe(t,e,n,r){const i=new RR(null,null);return i.bounds=new zc(null,t,e,n,r),i._updateComplexity(),i}class GN{constructor(e,n,r,i,s){if(e!=null){const o=e.readUint16();this.top=e.readUint16(),this.bottom=e.readUint16(),this.scanlines=[];for(let a=0;a<o;a++){const l=e.readUint16(),c=e.readUint16();this.scanlines.push({left:l,right:c})}e.skip(2)}else if(n!=null){this.top=n.top,this.bottom=n.bottom,this.scanlines=[];for(let o=0;o<n.scanlines.length;o++){const a=n.scanlines[o];this.scanlines.push({left:a.left,right:a.right})}}else this.top=r,this.bottom=i,this.scanlines=s}clone(){return new GN(null,this)}subtract(e,n){let r;for(r=0;r<this.scanlines.length;){const o=this.scanlines[r];if(o.left<=e){if(o.right>=e&&(o.right=e-1,o.left>=o.right)){this.scanlines.splice(r,1);continue}r++}else break}const i=r;let s=0;for(;r<this.scanlines.length;){const o=this.scanlines[r];if(o.right>n){o.left=n,s=r-i,o.left>=o.right&&s++;break}r++}return s>0&&i<this.scanlines.length&&this.scanlines.splice(i,s),this.scanlines.length>0}intersect(e,n){for(let r=0;r<this.scanlines.length;r++){const i=this.scanlines[r];if(i.left>=e||i.right>=e){r>0&&this.scanlines.splice(0,r);break}}if(this.scanlines.length>0){let r=this.scanlines[0];r.left<e&&(r.left=e);for(let i=0;i<this.scanlines.length;i++)if(r=this.scanlines[i],r.left>n){this.scanlines.splice(i,this.scanlines.length-i);break}this.scanlines.length>0&&(r=this.scanlines[this.scanlines.length-1],r.right>n&&(r.right=n))}return this.scanlines.length>0}toString(){return"{ #scanlines: "+this.scanlines.length+"}"}}class bUe{constructor(e,n){n&&e.skip(4),this.width=e.readUint16(),this.height=e.readUint16(),this.planes=e.readUint16(),this.bitcount=e.readUint16()}colors(){return this.bitcount<=8?1<<this.bitcount:0}}class L0e{constructor(e,n){n&&e.skip(4),this.width=e.readInt32(),this.height=e.readInt32(),this.planes=e.readUint16(),this.bitcount=e.readUint16(),this.compression=e.readUint32(),this.sizeimage=e.readUint32(),this.xpelspermeter=e.readInt32(),this.ypelspermeter=e.readInt32(),this.clrused=e.readUint32(),this.clrimportant=e.readUint32()}colors(){return this.clrused!==0?this.clrused<256?this.clrused:256:this.bitcount>8?0:1<<this.bitcount}}class wUe{constructor(e,n){this._reader=e,this._offset=e.pos,this._usergb=n;const r=e.readUint32();if(this._infosize=r,r===Je.GDI.BITMAPCOREHEADER_SIZE)this._header=new bUe(e,!1),this._infosize+=this._header.colors()*(n?3:2);else{this._header=new L0e(e,!1);const i=this._header.compression===Je.GDI.BitmapCompression.BI_BITFIELDS?3:0;r<=Je.GDI.BITMAPINFOHEADER_SIZE+i*4&&(this._infosize=Je.GDI.BITMAPINFOHEADER_SIZE+i*4),this._infosize+=this._header.colors()*(n?4:2)}}getWidth(){return this._header.width}getHeight(){return Math.abs(this._header.height)}infosize(){return this._infosize}header(){return this._header}}class Z_{constructor(e,n){this._reader=e,this._offset=e.pos,this._size=n,this._info=new wUe(e,!0)}getWidth(){return this._info.getWidth()}getHeight(){return this._info.getHeight()}base64ref(){const e=this._reader.pos;this._reader.seek(this._offset);let n="image/bmp";const r=this._info.header();let i;if(r instanceof L0e&&r.compression!=null)switch(r.compression){case Je.GDI.BitmapCompression.BI_JPEG:n="data:image/jpeg";break;case Je.GDI.BitmapCompression.BI_PNG:n="data:image/png";break;default:i=this.makeBitmapFileHeader();break}else i=this.makeBitmapFileHeader();i!=null?i+=this._reader.readBinary(this._size):i=this._reader.readBinary(this._size);const s="data:"+n+";base64,"+btoa(i);return this._reader.seek(e),s}makeBitmapFileHeader(){const e=new ArrayBuffer(14),n=new Uint8Array(e);return n[0]=66,n[1]=77,Je._writeUint32Val(n,2,this._size+14),Je._writeUint32Val(n,10,this._info.infosize()+14),Je._blobToBinary(n)}}class MR{constructor(e,n){if(e!=null){if(n=n,this._reader=e,this._offset=e.pos,this._size=n,this.type=e.readInt16(),this.width=e.readInt16(),this.height=e.readInt16(),this.widthBytes=e.readInt16(),this.planes=e.readUint8(),this.bitsPixel=e.readUint8(),this.bitsOffset=e.pos,this.bitsSize=(this.width*this.bitsPixel+15>>4<<1)*this.height,this.bitsSize>n-10)throw new io("Bitmap should have "+this.bitsSize+" bytes, but has "+(n-10))}else{const r=n;this._reader=r._reader,this._offset=r._offset,this._size=r._size,this.type=r.type,this.width=r.width,this.height=r.height,this.widthBytes=r.widthBytes,this.planes=r.planes,this.bitsPixel=r.bitsPixel,this.bitsOffset=r.bitsOffset,this.bitsSize=r.bitsSize}}getWidth(){return this.width}getHeight(){return this.height}clone(){return new MR(null,this)}}class LR extends MR{constructor(e,n){super(e,n),e!=null&&(this.bitsOffset+=22)}clone(){return new LR(null,this)}}class Pf{constructor(e,n,r,i){e!=null?(this.r=e.readUint8(),this.g=e.readUint8(),this.b=e.readUint8(),e.skip(1)):(this.r=n,this.g=r,this.b=i)}clone(){return new Pf(null,this.r,this.g,this.b)}toHex(){return(16777216+(this.r<<16|this.g<<8|this.b)).toString(16).slice(1)}toString(){return"{r: "+this.r+", g: "+this.g+", b: "+this.b+"}"}}class DR extends oC{constructor(e,n){if(super("font"),e!=null){this.height=e.readInt16(),this.width=e.readInt16(),this.escapement=e.readInt16(),this.orientation=e.readInt16(),this.weight=e.readInt16(),this.italic=e.readUint8(),this.underline=e.readUint8(),this.strikeout=e.readUint8(),this.charset=e.readUint8(),this.outprecision=e.readUint8(),this.clipprecision=e.readUint8(),this.quality=e.readUint8();const r=e.readUint8();this.pitch=r&15,this.family=r>>6&3;const i=n,s=e.pos;this.facename=e.readNullTermString(Math.min(i-(e.pos-s),32))}else n!=null?(n=n,this.height=n.height,this.width=n.width,this.escapement=n.escapement,this.orientation=n.orientation,this.weight=n.weight,this.italic=n.italic,this.underline=n.underline,this.strikeout=n.strikeout,this.charset=n.charset,this.outprecision=n.outprecision,this.clipprecision=n.clipprecision,this.quality=n.quality,this.pitch=n.pitch,this.family=n.family,this.facename=n.facename):(this.height=-80,this.width=0,this.escapement=0,this.orientation=0,this.weight=400,this.italic=0,this.underline=0,this.strikeout=0,this.charset=0,this.outprecision=0,this.clipprecision=0,this.quality=0,this.pitch=0,this.family=0,this.facename="Helvetica")}clone(){return new DR(null,this)}toString(){return JSON.stringify(this)}}class y1 extends oC{constructor(e,n,r){if(super("brush"),e!=null){const i=n,s=e.pos;if(r===!0||r===!1)switch(this.style=e.readUint16(),r&&this.style!==Je.GDI.BrushStyle.BS_PATTERN&&(this.style=Je.GDI.BrushStyle.BS_DIBPATTERNPT),this.style){case Je.GDI.BrushStyle.BS_SOLID:this.color=new Pf(e);break;case Je.GDI.BrushStyle.BS_PATTERN:e.skip(r?2:6),this.pattern=new MR(e,i-(e.pos-s));break;case Je.GDI.BrushStyle.BS_DIBPATTERNPT:this.colorusage=r?e.readUint16():e.readUint32(),r||e.skip(2),this.dibpatternpt=new Z_(e,i-(e.pos-s));break;case Je.GDI.BrushStyle.BS_HATCHED:this.color=new Pf(e),this.hatchstyle=e.readUint16();break}else r instanceof LR&&(this.style=Je.GDI.BrushStyle.BS_PATTERN,this.pattern=r)}else if(n!=null)switch(n=n,this.style=n.style,this.style){case Je.GDI.BrushStyle.BS_SOLID:this.color=n.color.clone();break;case Je.GDI.BrushStyle.BS_PATTERN:this.pattern=n.pattern.clone();break;case Je.GDI.BrushStyle.BS_DIBPATTERNPT:this.colorusage=n.colorusage,this.dibpatternpt=n.dibpatternpt;break;case Je.GDI.BrushStyle.BS_HATCHED:this.color=n.color.clone(),this.hatchstyle=n.hatchstyle;break}}clone(){return new y1(null,this)}toString(){let e="{style: "+this.style;switch(this.style){case Je.GDI.BrushStyle.BS_SOLID:e+=", color: "+this.color.toString();break;case Je.GDI.BrushStyle.BS_DIBPATTERNPT:e+=", colorusage: "+this.colorusage;break;case Je.GDI.BrushStyle.BS_HATCHED:e+=", color: "+this.color.toString()+", hatchstyle: "+this.hatchstyle;break}return e+"}"}}class OR extends oC{constructor(e,n,r,i,s,o){super("pen"),e!=null?(n=e.readUint16(),this.style=n&255,this.width=new cb(e),this.color=new Pf(e),this.linecap=n&(Je.GDI.PenStyle.PS_ENDCAP_SQUARE|Je.GDI.PenStyle.PS_ENDCAP_FLAT),this.join=n&(Je.GDI.PenStyle.PS_JOIN_BEVEL|Je.GDI.PenStyle.PS_JOIN_MITER)):(this.style=n,this.width=r,this.color=i,this.linecap=s,this.join=o)}clone(){return new OR(null,this.style,this.width.clone(),this.color.clone(),this.linecap,this.join)}toString(){return"{style: "+this.style+", width: "+this.width.toString()+", color: "+this.color.toString()+", linecap: "+this.linecap+", join: "+this.join+"}"}}class ZH{constructor(e,n){e!=null?(this.flag=e.readUint8(),this.b=e.readUint8(),this.g=e.readUint8(),this.r=e.readUint8()):(this.flag=n.flag,this.b=n.b,this.g=n.g,this.r=n.r)}clone(){return new ZH(null,this)}}class JH extends oC{constructor(e,n){if(super("palette"),e!=null){this.start=e.readUint16();let r=e.readUint16();for(this.entries=[];r>0;)this.entries.push(new ZH(e)),r--}else{this.start=n.start,this.entries=[];const r=n.entries.length;for(let i=0;i<r;i++)this.entries.push(n.entries[i])}}clone(){return new JH(null,this)}toString(){return"{ #entries: "+this.entries.length+"}"}}class Qee{constructor(e,n){if(e!=null){this._svggroup=e._svggroup,this._svgclipChanged=e._svgclipChanged,this._svgtextbkfilter=e._svgtextbkfilter,this.mapmode=e.mapmode,this.stretchmode=e.stretchmode,this.textalign=e.textalign,this.bkmode=e.bkmode,this.textcolor=e.textcolor.clone(),this.bkcolor=e.bkcolor.clone(),this.polyfillmode=e.polyfillmode,this.wx=e.wx,this.wy=e.wy,this.ww=e.ww,this.wh=e.wh,this.vx=e.vx,this.vy=e.vy,this.vw=e.vw,this.vh=e.vh,this.x=e.x,this.y=e.y,this.clip=e.clip,this.ownclip=!1,this.selected={};for(const r in e.selected)this.selected[r]=e.selected[r]}else{this._svggroup=null,this._svgclipChanged=!1,this._svgtextbkfilter=null,this.mapmode=Je.GDI.MapMode.MM_ANISOTROPIC,this.stretchmode=Je.GDI.StretchMode.COLORONCOLOR,this.textalign=0,this.bkmode=Je.GDI.MixMode.OPAQUE,this.textcolor=new Pf(null,0,0,0),this.bkcolor=new Pf(null,255,255,255),this.polyfillmode=Je.GDI.PolyFillMode.ALTERNATE,this.wx=0,this.wy=0,this.ww=0,this.wh=0,this.vx=0,this.vy=0,this.vw=0,this.vh=0,this.x=0,this.y=0,this.clip=null,this.ownclip=!1,this.selected={};for(const r in n){const i=n[r];this.selected[r]=i!=null?i.clone():null}}}}class vUe{constructor(e){this._svg=e,this._svgdefs=null,this._svgPatterns={},this._svgClipPaths={},this.defObjects={brush:new y1(null,null),pen:new OR(null,Je.GDI.PenStyle.PS_SOLID,new cb(null,1,1),new Pf(null,0,0,0),0,0),font:new DR(null,null),palette:null,region:null},this.state=new Qee(null,this.defObjects),this.statestack=[this.state],this.objects={}}setMapMode(e){Je.log("[gdi] setMapMode: mode="+e),this.state.mapmode=e,this.state._svggroup=null}setWindowOrg(e,n){Je.log("[gdi] setWindowOrg: x="+e+" y="+n),this.state.wx=e,this.state.wy=n,this.state._svggroup=null}setWindowExt(e,n){Je.log("[gdi] setWindowExt: x="+e+" y="+n),this.state.ww=e,this.state.wh=n,this.state._svggroup=null}offsetWindowOrg(e,n){Je.log("[gdi] offsetWindowOrg: offX="+e+" offY="+n),this.state.wx+=e,this.state.wy+=n,this.state._svggroup=null}setViewportOrg(e,n){Je.log("[gdi] setViewportOrg: x="+e+" y="+n),this.state.vx=e,this.state.vy=n,this.state._svggroup=null}setViewportExt(e,n){Je.log("[gdi] setViewportExt: x="+e+" y="+n),this.state.vw=e,this.state.vh=n,this.state._svggroup=null}offsetViewportOrg(e,n){Je.log("[gdi] offsetViewportOrg: offX="+e+" offY="+n),this.state.vx+=e,this.state.vy+=n,this.state._svggroup=null}saveDC(){Je.log("[gdi] saveDC");const e=this.state;this.state=new Qee(this.state),this.statestack.push(e),this.state._svggroup=null}restoreDC(e){if(Je.log("[gdi] restoreDC: saved="+e),this.statestack.length>1)if(e===-1)this.state=this.statestack.pop();else{if(e<-1)throw new io("restoreDC: relative restore not implemented");if(e>1)throw new io("restoreDC: absolute restore not implemented")}else throw new io("No saved contexts");this.state._svggroup=null}escape(e,n,r,i){Je.log("[gdi] escape: func="+e+" offset="+r+" count="+i)}setStretchBltMode(e){Je.log("[gdi] setStretchBltMode: stretchMode="+e)}stretchDib(e,n,r,i,s,o,a,l,c,u,d){Je.log("[gdi] stretchDib: srcX="+e+" srcY="+n+" srcW="+r+" srcH="+i+" dstX="+s+" dstY="+o+" dstW="+a+" dstH="+l+" rasterOp=0x"+c.toString(16)),e=this._todevX(e),n=this._todevY(n),r=this._todevW(r),i=this._todevH(i),s=this._todevX(s),o=this._todevY(o),a=this._todevW(a),l=this._todevH(l),Je.log("[gdi] stretchDib: TRANSLATED: srcX="+e+" srcY="+n+" srcW="+r+" srcH="+i+" dstX="+s+" dstY="+o+" dstW="+a+" dstH="+l+" rasterOp=0x"+c.toString(16)+" colorUsage=0x"+u.toString(16)),this._pushGroup(),this._svg.image(this.state._svggroup,s,o,a,l,d.base64ref())}dibBits(e,n,r,i,s,o,a,l){Je.log("[gdi] stretchDibBits: srcX="+e+" srcY="+n+" dstX="+r+" dstY="+i+" width="+s+" height="+o+" rasterOp=0x"+a.toString(16)),e=this._todevX(e),n=this._todevY(n),r=this._todevX(r),i=this._todevY(i),s=this._todevW(s),o=this._todevH(o),Je.log("[gdi] dibBits: TRANSLATED: srcX="+e+" srcY="+n+NaN+r+" dstY="+i+" width="+s+" height="+o+" rasterOp=0x"+a.toString(16)),this._pushGroup(),this._svg.image(this.state._svggroup,r,i,s,o,l.base64ref())}stretchDibBits(e,n,r,i,s,o,a,l,c,u){Je.log("[gdi] stretchDibBits: srcX="+e+" srcY="+n+" srcW="+r+" srcH="+i+" dstX="+s+" dstY="+o+" dstW="+a+" dstH="+l+" rasterOp=0x"+c.toString(16)),e=this._todevX(e),n=this._todevY(n),r=this._todevW(r),i=this._todevH(i),s=this._todevX(s),o=this._todevY(o),a=this._todevW(a),l=this._todevH(l),Je.log("[gdi] stretchDibBits: TRANSLATED: srcX="+e+" srcY="+n+" srcW="+r+" srcH="+i+" dstX="+s+" dstY="+o+" dstW="+a+" dstH="+l+" rasterOp=0x"+c.toString(16)),this._pushGroup(),this._svg.image(this.state._svggroup,s,o,a,l,u.base64ref())}rectangle(e,n,r){Je.log("[gdi] rectangle: rect="+e.toString()+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const i=this._todevY(e.bottom),s=this._todevX(e.right),o=this._todevY(e.top),a=this._todevX(e.left);n=this._todevH(n),r=this._todevH(r),Je.log("[gdi] rectangle: TRANSLATED: bottom="+i+" right="+s+" top="+o+" left="+a+" rh="+r+" rw="+n),this._pushGroup();const l=this._applyOpts(null,!0,!0,!1);this._svg.rect(this.state._svggroup,a,o,s-a,i-o,n/2,r/2,l)}textOut(e,n,r){Je.log("[gdi] textOut: x="+e+" y="+n+" text="+r+" with font "+this.state.selected.font.toString()),e=this._todevX(e),n=this._todevY(n),Je.log("[gdi] textOut: TRANSLATED: x="+e+" y="+n),this._pushGroup();const i=this._applyOpts(null,!1,!1,!0);if(this.state.selected.font.escapement!==0&&(i.transform="rotate("+[-this.state.selected.font.escapement/10,e,n]+")",i.style="dominant-baseline: middle; text-anchor: start;"),this.state.bkmode===Je.GDI.MixMode.OPAQUE){if(this.state._svgtextbkfilter==null){const s=Je._makeUniqueId("f"),o=this._svg.filter(this._getSvgDef(),s,0,0,1,1);this._svg.filters.flood(o,null,"#"+this.state.bkcolor.toHex(),1),this._svg.filters.composite(o,null,null,"SourceGraphic"),this.state._svgtextbkfilter=o}i.filter="url(#"+this.state._svgtextbkfilter.id+")"}this._svg.text(this.state._svggroup,e,n,r,i)}extTextOut(e,n,r,i,s,o){Je.log("[gdi] extTextOut: x="+e+" y="+n+" text="+r+" with font "+this.state.selected.font.toString()),e=this._todevX(e),n=this._todevY(n),Je.log("[gdi] extTextOut: TRANSLATED: x="+e+" y="+n),this._pushGroup();const a=this._applyOpts(null,!1,!1,!0);if(this.state.selected.font.escapement!==0&&(a.transform="rotate("+[-this.state.selected.font.escapement/10,e,n]+")",a.style="dominant-baseline: middle; text-anchor: start;"),this.state.bkmode===Je.GDI.MixMode.OPAQUE){if(this.state._svgtextbkfilter==null){const l=Je._makeUniqueId("f"),c=this._svg.filter(this._getSvgDef(),l,0,0,1,1);this._svg.filters.flood(c,null,"#"+this.state.bkcolor.toHex(),1),this._svg.filters.composite(c,null,null,"SourceGraphic"),this.state._svgtextbkfilter=c}a.filter="url(#"+this.state._svgtextbkfilter.id+")"}this._svg.text(this.state._svggroup,e,n,r,a)}lineTo(e,n){Je.log("[gdi] lineTo: x="+e+" y="+n+" with pen "+this.state.selected.pen.toString());const r=this._todevX(e),i=this._todevY(n),s=this._todevX(this.state.x),o=this._todevY(this.state.y);this.state.x=e,this.state.y=n,Je.log("[gdi] lineTo: TRANSLATED: toX="+r+" toY="+i+" fromX="+s+" fromY="+o),this._pushGroup();const a=this._applyOpts(null,!0,!1,!1);this._svg.line(this.state._svggroup,s,o,r,i,a)}moveTo(e,n){Je.log("[gdi] moveTo: x="+e+" y="+n),this.state.x=e,this.state.y=n}polygon(e,n){Je.log("[gdi] polygon: points="+e+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const r=[];for(let s=0;s<e.length;s++){const o=e[s];r.push([this._todevX(o.x),this._todevY(o.y)])}Je.log("[gdi] polygon: TRANSLATED: pts="+r),n&&this._pushGroup();const i={"fill-rule":this.state.polyfillmode===Je.GDI.PolyFillMode.ALTERNATE?"evenodd":"nonzero"};this._applyOpts(i,!0,!0,!1),this._svg.polygon(this.state._svggroup,r,i)}polyPolygon(e){Je.log("[gdi] polyPolygon: polygons.length="+e.length+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const n=e.length;for(let r=0;r<n;r++)this.polygon(e[r],r===0)}polyline(e){Je.log("[gdi] polyline: points="+e+" with pen "+this.state.selected.pen.toString());const n=[];for(let i=0;i<e.length;i++){const s=e[i];n.push([this._todevX(s.x),this._todevY(s.y)])}Je.log("[gdi] polyline: TRANSLATED: pts="+n),this._pushGroup();const r=this._applyOpts({fill:"none"},!0,!1,!1);this._svg.polyline(this.state._svggroup,n,r)}ellipse(e){Je.log("[gdi] ellipse: rect="+e.toString()+" with pen "+this.state.selected.pen.toString()+" and brush "+this.state.selected.brush.toString());const n=this._todevY(e.bottom),r=this._todevX(e.right),i=this._todevY(e.top),s=this._todevX(e.left);Je.log("[gdi] ellipse: TRANSLATED: bottom="+n+" right="+r+" top="+i+" left="+s),this._pushGroup();const o=(r-s)/2,a=(n-i)/2,l=this._applyOpts(null,!0,!0,!1);this._svg.ellipse(this.state._svggroup,s+o,i+a,o,a,l)}excludeClipRect(e){Je.log("[gdi] excludeClipRect: rect="+e.toString()),this._getClipRgn().subtract(e)}intersectClipRect(e){Je.log("[gdi] intersectClipRect: rect="+e.toString()),this._getClipRgn().intersect(e)}offsetClipRgn(e,n){Je.log("[gdi] offsetClipRgn: offX="+e+" offY="+n),this._getClipRgn().offset(e,n)}setTextAlign(e){Je.log("[gdi] setTextAlign: textAlignmentMode=0x"+e.toString(16)),this.state.textalign=e}setBkMode(e){Je.log("[gdi] setBkMode: bkMode=0x"+e.toString(16)),this.state.bkmode=e}setTextColor(e){Je.log("[gdi] setTextColor: textColor="+e.toString()),this.state.textcolor=e}setBkColor(e){Je.log("[gdi] setBkColor: bkColor="+e.toString()),this.state.bkcolor=e,this.state._svgtextbkfilter=null}setPolyFillMode(e){Je.log("[gdi] setPolyFillMode: polyFillMode="+e),this.state.polyfillmode=e}createBrush(e){const n=this._storeObject(e);Je.log("[gdi] createBrush: brush="+e.toString()+" with handle "+n)}createFont(e){const n=this._storeObject(e);Je.log("[gdi] createFont: font="+e.toString()+" with handle "+n)}createPen(e){const n=this._storeObject(e);Je.log("[gdi] createPen: pen="+e.toString()+" width handle "+n)}createPalette(e){const n=this._storeObject(e);Je.log("[gdi] createPalette: palette="+e.toString()+" width handle "+n)}createRegion(e){const n=this._storeObject(e);Je.log("[gdi] createRegion: region="+e.toString()+" width handle "+n)}createPatternBrush(e){const n=this._storeObject(e);Je.log("[gdi] createRegion: region="+e.toString()+" width handle "+n)}selectObject(e,n){const r=this._getObject(e);r!=null&&(n==null||r.type===n)?(this._selectObject(r),Je.log("[gdi] selectObject: objIdx="+e+(r?" selected "+r.type+": "+r.toString():"[invalid index]"))):Je.log("[gdi] selectObject: objIdx="+e+(r?" invalid object type: "+r.type:"[invalid index]"))}deleteObject(e){const n=this._deleteObject(e);Je.log("[gdi] deleteObject: objIdx="+e+(n?" deleted object":"[invalid index]"))}_pushGroup(){if(this.state._svggroup==null||this.state._svgclipChanged){this.state._svgclipChanged=!1,this.state._svgtextbkfilter=null;const e={viewBox:[this.state.vx,this.state.vy,this.state.vw,this.state.vh].join(" "),preserveAspectRatio:"none"};this.state.clip!=null?(Je.log("[gdi] new svg x="+this.state.vx+" y="+this.state.vy+" width="+this.state.vw+" height="+this.state.vh+" with clipping"),e["clip-path"]="url(#"+this._getSvgClipPathForRegion(this.state.clip)+")"):Je.log("[gdi] new svg x="+this.state.vx+" y="+this.state.vy+" width="+this.state.vw+" height="+this.state.vh+" without clipping"),this.state._svggroup=this._svg.svg(this.state._svggroup,this.state.vx,this.state.vy,this.state.vw,this.state.vh,e)}}_storeObject(e){let n=0;for(;this.objects[n.toString()]!=null&&n<=65535;)n++;return n>65535?(Je.log("[gdi] Too many objects!"),-1):(this.objects[n.toString()]=e,n)}_getObject(e){const n=this.objects[e.toString()];return n==null&&Je.log("[gdi] No object with handle "+e),n}_getSvgDef(){return this._svgdefs==null&&(this._svgdefs=this._svg.defs()),this._svgdefs}_getSvgClipPathForRegion(e){for(const i in this._svgClipPaths)if(this._svgClipPaths[i]===e)return i;const n=Je._makeUniqueId("c"),r=this._svg.clipPath(this._getSvgDef(),n,"userSpaceOnUse");switch(e.complexity){case 1:this._svg.rect(r,this._todevX(e.bounds.left),this._todevY(e.bounds.top),this._todevW(e.bounds.right-e.bounds.left),this._todevH(e.bounds.bottom-e.bounds.top),{fill:"black","stroke-width":0});break;case 2:for(let i=0;i<e.scans.length;i++){const s=e.scans[i];for(let o=0;o<s.scanlines.length;o++){const a=s.scanlines[o];this._svg.rect(r,this._todevX(a.left),this._todevY(s.top),this._todevW(a.right-a.left),this._todevH(s.bottom-s.top),{fill:"black","stroke-width":0})}}break}return this._svgClipPaths[n]=e,n}_getSvgPatternForBrush(e){for(const a in this._svgPatterns)if(this._svgPatterns[a]===e)return a;let n,r,i;switch(e.style){case Je.GDI.BrushStyle.BS_PATTERN:n=e.pattern.getWidth(),r=e.pattern.getHeight();break;case Je.GDI.BrushStyle.BS_DIBPATTERNPT:n=e.dibpatternpt.getWidth(),r=e.dibpatternpt.getHeight(),i=e.dibpatternpt.base64ref();break;default:throw new io("Invalid brush style")}const s=Je._makeUniqueId("p"),o=this._svg.pattern(this._getSvgDef(),s,0,0,n,r,{patternUnits:"userSpaceOnUse"});return this._svg.image(o,0,0,n,r,i),this._svgPatterns[s]=e,s}_selectObject(e){this.state.selected[e.type]=e,e.type==="region"&&(this.state._svgclipChanged=!0)}_deleteObject(e){const n=this.objects[e.toString()];if(n!=null){for(let r=0;r<this.statestack.length;r++){const i=this.statestack[r];i.selected[n.type]===n&&(i.selected[n.type]=this.defObjects[n.type].clone())}return delete this.objects[e.toString()],!0}return Je.log("[gdi] Cannot delete object with invalid handle "+e),!1}_getClipRgn(){return this.state.clip!=null?this.state.ownclip||(this.state.clip=this.state.clip.clone()):this.state.selected.region!=null?this.state.clip=this.state.selected.region.clone():this.state.clip=yUe(this.state.wx,this.state.wy,this.state.wx+this.state.ww,this.state.wy+this.state.wh),this.state.ownclip=!0,this.state.clip}_todevX(e){return Math.floor((e-this.state.wx)*(this.state.vw/this.state.ww))+this.state.vx}_todevY(e){return Math.floor((e-this.state.wy)*(this.state.vh/this.state.wh))+this.state.vy}_todevW(e){return Math.floor(e*(this.state.vw/this.state.ww))+this.state.vx}_todevH(e){return Math.floor(e*(this.state.vh/this.state.wh))+this.state.vy}_tologicalX(e){return Math.floor((e-this.state.vx)/(this.state.vw/this.state.ww))+this.state.wx}_tologicalY(e){return Math.floor((e-this.state.vy)/(this.state.vh/this.state.wh))+this.state.wy}_tologicalW(e){return Math.floor(e/(this.state.vw/this.state.ww))+this.state.wx}_tologicalH(e){return Math.floor(e/(this.state.vh/this.state.wh))+this.state.wy}_applyOpts(e,n,r,i){if(e==null&&(e={}),n){const s=this.state.selected.pen;if(s.style!==Je.GDI.PenStyle.PS_NULL){e.stroke="#"+s.color.toHex(),e["stroke-width"]=this._todevW(s.width.x);let o;(s.linecap&Je.GDI.PenStyle.PS_ENDCAP_SQUARE)!==0?(e["stroke-linecap"]="square",o=1):(s.linecap&Je.GDI.PenStyle.PS_ENDCAP_FLAT)!==0?(e["stroke-linecap"]="butt",o=e["stroke-width"]):(e["stroke-linecap"]="round",o=1),(s.join&Je.GDI.PenStyle.PS_JOIN_BEVEL)!==0?e["stroke-linejoin"]="bevel":(s.join&Je.GDI.PenStyle.PS_JOIN_MITER)!==0?e["stroke-linejoin"]="miter":e["stroke-linejoin"]="round";const a=e["stroke-width"]*4,l=e["stroke-width"]*2;switch(s.style){case Je.GDI.PenStyle.PS_DASH:e["stroke-dasharray"]=[a,l].toString();break;case Je.GDI.PenStyle.PS_DOT:e["stroke-dasharray"]=[o,l].toString();break;case Je.GDI.PenStyle.PS_DASHDOT:e["stroke-dasharray"]=[a,l,o,l].toString();break;case Je.GDI.PenStyle.PS_DASHDOTDOT:e["stroke-dasharray"]=[a,l,o,l,o,l].toString();break}}}if(r){const s=this.state.selected.brush;switch(s.style){case Je.GDI.BrushStyle.BS_SOLID:e.fill="#"+s.color.toHex();break;case Je.GDI.BrushStyle.BS_PATTERN:case Je.GDI.BrushStyle.BS_DIBPATTERNPT:e.fill="url(#"+this._getSvgPatternForBrush(s)+")";break;case Je.GDI.BrushStyle.BS_NULL:e.fill="none";break;default:Je.log("[gdi] unsupported brush style: "+s.style),e.fill="none";break}}if(i){const s=this.state.selected.font;e["font-family"]=s.facename,e["font-size"]=this._todevH(Math.abs(s.height)),e.fill="#"+this.state.textcolor.toHex()}return e}}class xUe{constructor(e,n){this._records=[];let r=!1,i=n;e:for(;!r;){e.seek(i);const s=e.readUint32();if(s<3)throw new io("Invalid record size");const o=e.readUint16();switch(o){case Je.GDI.RecordType.META_EOF:r=!0;break e;case Je.GDI.RecordType.META_SETMAPMODE:{const a=e.readUint16();this._records.push(l=>{l.setMapMode(a)});break}case Je.GDI.RecordType.META_SETWINDOWORG:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.setWindowOrg(l,a)});break}case Je.GDI.RecordType.META_SETWINDOWEXT:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.setWindowExt(l,a)});break}case Je.GDI.RecordType.META_OFFSETWINDOWORG:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.offsetWindowOrg(l,a)});break}case Je.GDI.RecordType.META_SETVIEWPORTORG:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.setViewportOrg(l,a)});break}case Je.GDI.RecordType.META_SETVIEWPORTEXT:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.setViewportExt(l,a)});break}case Je.GDI.RecordType.META_OFFSETVIEWPORTORG:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.offsetViewportOrg(l,a)});break}case Je.GDI.RecordType.META_SAVEDC:{this._records.push(a=>{a.saveDC()});break}case Je.GDI.RecordType.META_RESTOREDC:{const a=e.readInt16();this._records.push(l=>{l.restoreDC(a)});break}case Je.GDI.RecordType.META_SETSTRETCHBLTMODE:{const a=e.readUint16();this._records.push(l=>{l.setStretchBltMode(a)});break}case Je.GDI.RecordType.META_DIBBITBLT:{const a=(o>>8)+3!==s,l=e.readUint16()|e.readUint16()<<16,c=e.readInt16(),u=e.readInt16();a||e.skip(2);const d=e.readInt16(),f=e.readInt16(),h=e.readInt16(),m=e.readInt16();if(a){const y=s*2-(e.pos-i),w=new Z_(e,y);this._records.push(b=>{b.dibBits(u,c,m,h,f,d,l,w)})}break}case Je.GDI.RecordType.META_DIBSTRETCHBLT:{const a=e.readUint16()|e.readUint16()<<16,l=e.readInt16(),c=e.readInt16(),u=e.readInt16(),d=e.readInt16(),f=e.readInt16(),h=e.readInt16(),m=e.readInt16(),y=e.readInt16(),w=s*2-(e.pos-i),b=new Z_(e,w);this._records.push(E=>{E.stretchDibBits(d,u,c,l,y,m,h,f,a,b)});break}case Je.GDI.RecordType.META_STRETCHDIB:{const a=e.readUint16()|e.readUint16()<<16,l=e.readInt16(),c=e.readInt16(),u=e.readInt16(),d=e.readInt16(),f=e.readInt16(),h=e.readInt16(),m=e.readInt16(),y=e.readInt16(),w=e.readInt16(),b=s*2-(e.pos-i),E=new Z_(e,b);this._records.push(A=>{A.stretchDib(f,d,u,c,w,y,m,h,a,l,E)});break}case Je.GDI.RecordType.META_ESCAPE:{const a=e.readUint16(),l=e.readUint16(),c=e.pos,u=new R0e(e,c);this._records.push(d=>{d.escape(a,u,c,l)});break}case Je.GDI.RecordType.META_SETTEXTALIGN:{const a=e.readUint16();this._records.push(l=>{l.setTextAlign(a)});break}case Je.GDI.RecordType.META_SETBKMODE:{const a=e.readUint16();this._records.push(l=>{l.setBkMode(a)});break}case Je.GDI.RecordType.META_SETTEXTCOLOR:{const a=new Pf(e);this._records.push(l=>{l.setTextColor(a)});break}case Je.GDI.RecordType.META_SETBKCOLOR:{const a=new Pf(e);this._records.push(l=>{l.setBkColor(a)});break}case Je.GDI.RecordType.META_CREATEBRUSHINDIRECT:{const a=s*2-(e.pos-i),l=new y1(e,a,!1);this._records.push(c=>{c.createBrush(l)});break}case Je.GDI.RecordType.META_DIBCREATEPATTERNBRUSH:{const a=s*2-(e.pos-i),l=new y1(e,a,!0);this._records.push(c=>{c.createBrush(l)});break}case Je.GDI.RecordType.META_CREATEPENINDIRECT:{const a=new OR(e);this._records.push(l=>{l.createPen(a)});break}case Je.GDI.RecordType.META_CREATEFONTINDIRECT:{const a=s*2-(e.pos-i),l=new DR(e,a);this._records.push(c=>{c.createFont(l)});break}case Je.GDI.RecordType.META_SELECTOBJECT:{const a=e.readUint16();this._records.push(l=>{l.selectObject(a,null)});break}case Je.GDI.RecordType.META_SELECTPALETTE:{const a=e.readUint16();this._records.push(l=>{l.selectObject(a,"palette")});break}case Je.GDI.RecordType.META_SELECTCLIPREGION:{const a=e.readUint16();this._records.push(l=>{l.selectObject(a,"region")});break}case Je.GDI.RecordType.META_DELETEOBJECT:{const a=e.readUint16();this._records.push(l=>{l.deleteObject(a)});break}case Je.GDI.RecordType.META_RECTANGLE:{const a=new zc(e);this._records.push(l=>{l.rectangle(a,0,0)});break}case Je.GDI.RecordType.META_ROUNDRECT:{const a=e.readInt16(),l=e.readInt16(),c=new zc(e);this._records.push(u=>{u.rectangle(c,l,a)});break}case Je.GDI.RecordType.META_LINETO:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.lineTo(l,a)});break}case Je.GDI.RecordType.META_MOVETO:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.moveTo(l,a)});break}case Je.GDI.RecordType.META_TEXTOUT:{const a=e.readInt16();if(a>0){const l=e.readString(a);e.skip(a%2);const c=e.readInt16(),u=e.readInt16();this._records.push(d=>{d.textOut(u,c,l)})}break}case Je.GDI.RecordType.META_EXTTEXTOUT:{const a=e.readInt16(),l=e.readInt16(),c=e.readInt16(),u=e.readUint16();let d=null,f=null;s*2===14+c+c%2&&(d=!1,f=!1),s*2===22+c+c%2&&(d=!0,f=!1),s*2===14+c+c%2+c*2&&(d=!1,f=!0),s*2===22+c+c%2+c*2&&(d=!0,f=!0);const h=d?new zc(e):null;if(c>0){const m=e.readString(c);e.skip(c%2);const y=[];if(f)for(let w=0;w<m.length;w++)y.push(e.readInt16());this._records.push(w=>{w.extTextOut(l,a,m,u,h,y)})}break}case Je.GDI.RecordType.META_EXCLUDECLIPRECT:{const a=new zc(e);this._records.push(l=>{l.excludeClipRect(a)});break}case Je.GDI.RecordType.META_INTERSECTCLIPRECT:{const a=new zc(e);this._records.push(l=>{l.intersectClipRect(a)});break}case Je.GDI.RecordType.META_POLYGON:{let a=e.readInt16();const l=[];for(;a>0;)l.push(new cb(e)),a--;this._records.push(c=>{c.polygon(l,!0)});break}case Je.GDI.RecordType.META_SETPOLYFILLMODE:{const a=e.readUint16();this._records.push(l=>{l.setPolyFillMode(a)});break}case Je.GDI.RecordType.META_POLYPOLYGON:{const a=e.readUint16(),l=[];for(let u=0;u<a;u++)l.push(e.readUint16());const c=[];for(let u=0;u<a;u++){const d=l[u],f=[];for(let h=0;h<d;h++)f.push(new cb(e));c.push(f)}this._records.push(u=>{u.polyPolygon(c)});break}case Je.GDI.RecordType.META_POLYLINE:{let a=e.readInt16();const l=[];for(;a>0;)l.push(new cb(e)),a--;this._records.push(c=>{c.polyline(l)});break}case Je.GDI.RecordType.META_ELLIPSE:{const a=new zc(e);this._records.push(l=>{l.ellipse(a)});break}case Je.GDI.RecordType.META_CREATEPALETTE:{const a=new JH(e);this._records.push(l=>{l.createPalette(a)});break}case Je.GDI.RecordType.META_CREATEREGION:{const a=new RR(e);this._records.push(l=>{l.createRegion(a)});break}case Je.GDI.RecordType.META_CREATEPATTERNBRUSH:{const a=s*2-(e.pos-i),l=new LR(e,a),c=new y1(e,a,l);this._records.push(u=>{u.createPatternBrush(c)});break}case Je.GDI.RecordType.META_OFFSETCLIPRGN:{const a=e.readInt16(),l=e.readInt16();this._records.push(c=>{c.offsetClipRgn(l,a)});break}case Je.GDI.RecordType.META_REALIZEPALETTE:case Je.GDI.RecordType.META_SETPALENTRIES:case Je.GDI.RecordType.META_SETROP2:case Je.GDI.RecordType.META_SETRELABS:case Je.GDI.RecordType.META_SETTEXTCHAREXTRA:case Je.GDI.RecordType.META_RESIZEPALETTE:case Je.GDI.RecordType.META_SETLAYOUT:case Je.GDI.RecordType.META_FILLREGION:case Je.GDI.RecordType.META_SETMAPPERFLAGS:case Je.GDI.RecordType.META_SETTEXTJUSTIFICATION:case Je.GDI.RecordType.META_SCALEWINDOWEXT:case Je.GDI.RecordType.META_SCALEVIEWPORTEXT:case Je.GDI.RecordType.META_FLOODFILL:case Je.GDI.RecordType.META_FRAMEREGION:case Je.GDI.RecordType.META_ANIMATEPALETTE:case Je.GDI.RecordType.META_EXTFLOODFILL:case Je.GDI.RecordType.META_SETPIXEL:case Je.GDI.RecordType.META_PATBLT:case Je.GDI.RecordType.META_PIE:case Je.GDI.RecordType.META_STRETCHBLT:case Je.GDI.RecordType.META_INVERTREGION:case Je.GDI.RecordType.META_PAINTREGION:case Je.GDI.RecordType.META_ARC:case Je.GDI.RecordType.META_CHORD:case Je.GDI.RecordType.META_BITBLT:case Je.GDI.RecordType.META_SETDIBTODEV:default:{let a="UNKNOWN";for(const l in Je.GDI.RecordType)if(Je.GDI.RecordType[l]===o){a=l;break}Je.log("[WMF] "+a+" record (0x"+o.toString(16)+") at offset 0x"+i.toString(16)+" with "+s*2+" bytes");break}}i+=s*2}if(!r)throw new io("Could not read all records")}play(e){const n=this._records.length;for(let r=0;r<n;r++)this._records[r](e)}}class EUe{constructor(e){this.parse(e),Je.log("WMFJS.Renderer instantiated")}render(e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return this._render(new b0e(n),e.mapMode,e.xExt,e.yExt),n.setAttribute("viewBox",[0,0,e.xExt,e.yExt].join(" ")),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n}parse(e){this._img=null;const n=new R0e(e);let r,i,s,o;const a=n.readUint32();switch(a===2596720087?(s=new AUe(n),o=n.pos,r=n.readUint16(),i=n.readUint16()):(o=0,r=a&65535,i=a>>>16&65535),r){case Je.GDI.MetafileType.MEMORYMETAFILE:case Je.GDI.MetafileType.DISKMETAFILE:if(i===Je.GDI.METAHEADER_SIZE/2){const l=n.readUint16();switch(l){case Je.GDI.MetafileVersion.METAVERSION100:case Je.GDI.MetafileVersion.METAVERSION300:this._img=new TUe(n,s,l,o+i*2);break}}break}if(this._img==null)throw new io("Format not recognized")}_render(e,n,r,i){const s=new vUe(e);s.setViewportExt(r,i),s.setMapMode(n),Je.log("[WMF] BEGIN RENDERING --->"),this._img.render(s),Je.log("[WMF] <--- DONE RENDERING")}}class SUe{constructor(e){this.left=e.readInt16(),this.top=e.readInt16(),this.right=e.readInt16(),this.bottom=e.readInt16()}toString(){return"{left: "+this.left+", top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+"}"}}class AUe{constructor(e){e.skip(2),this.boundingBox=new SUe(e),this.unitsPerInch=e.readInt16(),e.skip(4),e.skip(2),Je.log("Got bounding box "+this.boundingBox+" and "+this.unitsPerInch+" units/inch")}}class TUe{constructor(e,n,r,i){this._version=r,this._hdrsize=i,this._placable=n,this._records=new xUe(e,this._hdrsize)}render(e){this._records.play(e)}}rUe(!1);gUe(!1);let D0e=null;const kUe=t=>{D0e=t||null};function O0e(){if(typeof document<"u"&&typeof XMLSerializer<"u")return!0;const e=D0e||{},n=e.window||e.mockWindow||null,r=e.document||e.mockDocument||(n==null?void 0:n.document)||null;return n&&r&&(typeof globalThis.window>"u"&&(globalThis.window=n),typeof globalThis.document>"u"&&(globalThis.document=r),n.XMLSerializer&&typeof globalThis.XMLSerializer>"u"&&(globalThis.XMLSerializer=n.XMLSerializer),n.Node&&typeof globalThis.Node>"u"&&(globalThis.Node=n.Node),typeof globalThis.atob>"u"&&typeof n.atob=="function"&&(globalThis.atob=n.atob.bind(n)),typeof globalThis.btoa>"u"&&typeof n.btoa=="function"&&(globalThis.btoa=n.btoa.bind(n))),typeof document<"u"&&typeof XMLSerializer<"u"}const P0e=8,F0e=1179469088,CUe=726027589;function B0e(t){if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t!="string")throw new Error("Unsupported data type for conversion to ArrayBuffer");let e=t;if(t.startsWith("data:")){const i=t.indexOf(",");if(i===-1)throw new Error("Invalid data URI: missing base64 content");e=t.substring(i+1)}const n=atob(e),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r.buffer}function _Ue(t){let n="";for(let r=0;r<t.length;r+=32768){const i=t.subarray(r,r+32768);n+=String.fromCharCode.apply(null,i)}return btoa(n)}function NUe(t){const e=new DataView(t);if(e.byteLength<120)return null;const n=e.getUint32(0,!0),r=e.getUint32(4,!0);if(n!==1||r<=0||r+80>e.byteLength)return null;const i=r;if(e.getUint32(i,!0)!==81)return null;const o=e.getUint32(i+4,!0);if(i+o>e.byteLength)return null;const a=e.getUint32(i+48,!0),l=e.getUint32(i+52,!0),c=e.getUint32(i+56,!0),u=e.getUint32(i+60,!0);if(!l||!u)return null;const d=i+a,f=i+c;if(f+u>e.byteLength||d+l>e.byteLength)return null;const h=14+l+u,m=new Uint8Array(h),y=new DataView(m.buffer);return y.setUint8(0,66),y.setUint8(1,77),y.setUint32(2,h,!0),y.setUint32(10,14+l,!0),m.set(new Uint8Array(t,d,l),14),m.set(new Uint8Array(t,f,u),14+l),{dataUri:`data:image/bmp;base64,${_Ue(m)}`,format:"bmp"}}function j0e(t){const n=new XMLSerializer().serializeToString(t);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(n)))}`}function IUe(t){const e=new DataView(t),n=e.getInt32(24,!0),r=e.getInt32(28,!0),i=e.getInt32(32,!0),s=e.getInt32(36,!0),o=i-n,a=s-r,l=96,c=Math.round(o*l/2540),u=Math.round(a*l/2540),d=e.getInt32(72,!0),f=e.getInt32(76,!0);return{width:c||800,height:u||600,xExt:o||d||800,yExt:a||f||600,wExt:o||d||800,hExt:a||f||600}}function RUe(t){const e=new DataView(t);if(e.byteLength<108)return!1;const n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(40,!0);if(n!==1||i!==F0e||r<=0||r>=e.byteLength)return!1;let s=r;for(let o=0;o<10&&!(s+8>e.byteLength);o++){const a=e.getUint32(s,!0),l=e.getUint32(s+4,!0);if(l<8||s+l>e.byteLength)break;if(a===70&&l>=20&&e.getUint32(s+12,!0)===CUe)return!0;s+=l}return!1}function MUe(t){if(t.byteLength<48)return!1;const e=new DataView(t),n=e.getUint32(0,!0),r=e.getUint32(40,!0);return n===1&&r===F0e}function LUe(t){const e=Math.max(1,Math.round(t.width)),n=Math.max(1,Math.round(t.height)),r=t.label||"Unable to render image",i=`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${n}" viewBox="0 0 ${e} ${n}" role="img" aria-label="${r}"><rect width="100%" height="100%" fill="#ffffff" stroke="#d9d9d9" stroke-width="1"/><text x="50%" y="50%" fill="#595959" font-family="sans-serif" font-size="${Math.max(8,Math.min(12,Math.floor(e/30)))}" text-anchor="middle" dominant-baseline="middle">${r}</text></svg>`;return{dataUri:`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(i)))}`,format:"svg"}}function DUe(t){const e=new DataView(t);if(e.getUint32(0,!0)===2596720087){const r=e.getInt16(6,!0),i=e.getInt16(8,!0),s=e.getInt16(10,!0),o=e.getInt16(12,!0),a=e.getInt16(14,!0)||1440,l=s-r,c=o-i,u=Math.round(l*96/a),d=Math.round(c*96/a);return{width:u||400,height:d||400,xExt:l||400,yExt:c||400}}return{width:400,height:400,xExt:400,yExt:400}}function $0e(t,e={}){var n;try{if(!O0e())return console.warn("EMF conversion requires browser environment with DOM support"),null;const r=B0e(t),i=NUe(r);if(i)return i;const s=IUe(r);if(RUe(r))return LUe({width:e.width||s.width,height:e.height||s.height,label:"Unable to render EMF+ image"});const o=new pUe(r),a={width:String(e.width||s.width)+"px",height:String(e.height||s.height)+"px",wExt:s.wExt,hExt:s.hExt,xExt:s.xExt,yExt:s.yExt,mapMode:P0e},l=o.render(a);return(n=l==null?void 0:l.childNodes)!=null&&n.length?{dataUri:j0e(l),format:"svg"}:null}catch(r){return console.warn("Failed to convert EMF to SVG:",r.message),null}}function OUe(t,e={}){var n;try{if(!O0e())return console.warn("WMF conversion requires browser environment with DOM support"),null;const r=B0e(t);if(MUe(r))return $0e(t,e);const i=DUe(r),s=new EUe(r),o={width:String(e.width||i.width)+"px",height:String(e.height||i.height)+"px",xExt:i.xExt,yExt:i.yExt,mapMode:P0e},a=s.render(o);return!a||!((n=a.childNodes)!=null&&n.length)?null:{dataUri:j0e(a),format:"svg"}}catch(r){return console.warn("Failed to convert WMF to SVG:",r.message),null}}function PUe(t,e,n={}){const r=e==null?void 0:e.toLowerCase();return r==="emf"?$0e(t,n):r==="wmf"?OUe(t,n):(console.warn(`Unsupported metafile extension: ${e}`),null)}function ete(t){const e=t==null?void 0:t.toLowerCase();return e==="emf"||e==="wmf"}const QH="w:drawing",FUe="http://schemas.microsoft.com/office/word/2010/wordprocessingShape",BUe="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",z0e=(t="")=>{if(!t)return t;const e=t.replace(/^\/+/,"");return e.startsWith("word/")?e:e.startsWith("media/")?`word/${e}`:`word/${e}`},jUe=100,$Ue=100;function H0e(t,e,n){var Pe,Ce,Oe,Fe,$e,he,q,ne,Ee,Se,ze,Ie,qe,Ye,ft,We,nt,bt,ct,Ft,tn,Zt,ri,Ne,le,fe,ve,He,Xe,it,Lt,Bt,Wt,Jt,qt,et;if(!t)return null;const{docx:r,filename:i,converter:s}=e,o=(t==null?void 0:t.attributes)||{},{order:a,originalChildren:l}=HUe(t),c={top:In(o==null?void 0:o.distT),bottom:In(o==null?void 0:o.distB),left:In(o==null?void 0:o.distL),right:In(o==null?void 0:o.distR)},u=(Pe=t==null?void 0:t.elements)==null?void 0:Pe.find(Ze=>Ze.name==="wp:extent"),d={width:In((Ce=u==null?void 0:u.attributes)==null?void 0:Ce.cx),height:In((Oe=u==null?void 0:u.attributes)==null?void 0:Oe.cy)};let f={};const h=(Fe=t==null?void 0:t.elements)==null?void 0:Fe.find(Ze=>Ze.name==="wp:effectExtent");if(h){const Ze=Ue=>{if(Ue==null)return 0;const at=Number(Ue);return Number.isFinite(at)?at:0};f.sizeExtension={left:In(Ze(($e=h.attributes)==null?void 0:$e.l)),top:In(Ze((he=h.attributes)==null?void 0:he.t)),right:In(Ze((q=h.attributes)==null?void 0:q.r)),bottom:In(Ze((ne=h.attributes)==null?void 0:ne.b))}}const m=(Ee=t==null?void 0:t.elements)==null?void 0:Ee.find(Ze=>Ze.name==="wp:positionH"),y=(Se=m==null?void 0:m.elements)==null?void 0:Se.find(Ze=>Ze.name==="wp:posOffset"),w=In((ze=y==null?void 0:y.elements[0])==null?void 0:ze.text),b=(Ie=m==null?void 0:m.attributes)==null?void 0:Ie.relativeFrom,E=(We=(ft=(Ye=(qe=m==null?void 0:m.elements)==null?void 0:qe.find(Ze=>Ze.name==="wp:align"))==null?void 0:Ye.elements)==null?void 0:ft[0])==null?void 0:We.text,A=(nt=t==null?void 0:t.elements)==null?void 0:nt.find(Ze=>Ze.name==="wp:positionV"),x=(bt=A==null?void 0:A.elements)==null?void 0:bt.find(Ze=>Ze.name==="wp:posOffset"),T=In((ct=x==null?void 0:x.elements[0])==null?void 0:ct.text),R=(Ft=A==null?void 0:A.attributes)==null?void 0:Ft.relativeFrom,k=(Ne=(ri=(Zt=(tn=A==null?void 0:A.elements)==null?void 0:tn.find(Ze=>Ze.name==="wp:align"))==null?void 0:Zt.elements)==null?void 0:ri[0])==null?void 0:Ne.text,_={horizontal:w,top:T},N=o.simplePos==="1"||o.simplePos===1||o.simplePos===!0,L=(le=t==null?void 0:t.elements)==null?void 0:le.find(Ze=>Ze.name==="wp:simplePos"),M=n?(fe=t==null?void 0:t.elements)==null?void 0:fe.find(Ze=>["wp:wrapNone","wp:wrapSquare","wp:wrapThrough","wp:wrapTight","wp:wrapTopAndBottom"].includes(Ze.name)):null,C=n?{type:(M==null?void 0:M.name.slice(7))||"None",attrs:{}}:{type:"Inline"};switch(C.type){case"Square":(ve=M==null?void 0:M.attributes)!=null&&ve.wrapText&&(C.attrs.wrapText=M.attributes.wrapText),"distB"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distBottom=In(M.attributes.distB)),"distL"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distLeft=In(M.attributes.distL)),"distR"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distRight=In(M.attributes.distR)),"distT"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distTop=In(M.attributes.distT));break;case"Tight":case"Through":{"distL"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distLeft=In(M.attributes.distL)),"distR"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distRight=In(M.attributes.distR)),"distT"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distTop=In(M.attributes.distT)),"distB"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distBottom=In(M.attributes.distB)),"wrapText"in((M==null?void 0:M.attributes)||{})&&(C.attrs.wrapText=M.attributes.wrapText);const Ze=(He=M==null?void 0:M.elements)==null?void 0:He.find(Ue=>Ue.name==="wp:wrapPolygon");Ze&&(C.attrs.polygon=jBe(Ze),((Xe=Ze.attributes)==null?void 0:Xe.edited)!==void 0&&(C.attrs.polygonEdited=Ze.attributes.edited));break}case"TopAndBottom":"distB"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distBottom=In(M.attributes.distB)),"distT"in((M==null?void 0:M.attributes)||{})&&(C.attrs.distTop=In(M.attributes.distT));break;case"None":C.attrs.behindDoc=((it=t.attributes)==null?void 0:it.behindDoc)==="1";break}const D=t.elements.find(Ze=>Ze.name==="wp:docPr");let O=null;(b||E||R||k)&&(O={hRelativeFrom:b,vRelativeFrom:R,alignH:E,alignV:k});const $=t.elements.find(Ze=>Ze.name==="a:graphic"),U=$==null?void 0:$.elements.find(Ze=>Ze.name==="a:graphicData"),{uri:W}=(U==null?void 0:U.attributes)||{};if(!U)return null;if(W===FUe)return zUe(e,t,U,d,c,{left:w,horizontal:w,top:T},O,C,n);if(W===BUe)return VUe(e,t,U,d,c,{left:w,horizontal:w,top:T},O,C);const ce=U==null?void 0:U.elements.find(Ze=>Ze.name==="pic:pic");if(!ce||!ce.elements)return null;const se=ce.elements.find(Ze=>Ze.name==="pic:blipFill"),Q=se==null?void 0:se.elements.find(Ze=>Ze.name==="a:blip");if(!Q)return null;const J=se==null?void 0:se.elements.find(Ze=>Ze.name==="a:stretch"),K=J==null?void 0:J.elements.find(Ze=>Ze.name==="a:fillRect"),re=se==null?void 0:se.elements.find(Ze=>Ze.name==="a:srcRect"),X=(re==null?void 0:re.attributes)||{},me=["l","t","r","b"].some(Ze=>{const Ue=X[Ze];return Ue!=null&&parseFloat(Ue)<0}),B=!!(J&&K)&&!me,z=ce.elements.find(Ze=>Ze.name==="pic:spPr");if(z){const Ze=z.elements.find(Ue=>Ue.name==="a:xfrm");Ze!=null&&Ze.attributes&&(f={...f,rotation:yH(Ze.attributes.rot),verticalFlip:Ze.attributes.flipV==="1",horizontalFlip:Ze.attributes.flipH==="1"})}const{attributes:de={}}=Q,Y=de["r:embed"];if(!Y)return null;let ae=r[`word/_rels/${i||"document.xml"}.rels`];ae||(ae=r["word/_rels/document.xml.rels"]);const ie=ae==null?void 0:ae.elements.find(Ze=>Ze.name==="Relationships"),{elements:H}=ie||[],be=H==null?void 0:H.find(Ze=>Ze.attributes.Id===Y);if(!be)return null;const{attributes:Te}=be,Z=Te.Target,oe=z0e(Z),te=oe.substring(oe.lastIndexOf(".")+1);let ye=oe,ke=te,we=!1;if(ete(te)){const Ze=(Lt=s==null?void 0:s.media)==null?void 0:Lt[oe];if(Ze){s!=null&&s.domEnvironment&&kUe(s.domEnvironment);const Ue=PUe(Ze,te,d);Ue!=null&&Ue.dataUri&&(ye=Ue.dataUri,ke=Ue.format||"svg",we=!0)}}const Ae=C;return{type:"image",attrs:{src:ye,alt:ete(te)&&!we?"Unable to render EMF/WMF image":((Bt=D==null?void 0:D.attributes)==null?void 0:Bt.name)||"Image",extension:ke,...we&&{originalSrc:oe,originalExtension:te},id:((Wt=D==null?void 0:D.attributes)==null?void 0:Wt.id)||"",title:((Jt=D==null?void 0:D.attributes)==null?void 0:Jt.descr)||"Image",inline:!0,padding:c,marginOffset:_,size:d,anchorData:O,isAnchor:n,transformData:f,...N&&{simplePos:{x:(qt=L.attributes)==null?void 0:qt.x,y:(et=L.attributes)==null?void 0:et.y}},wrap:Ae,...C.type==="Square"&&C.attrs.wrapText?{wrapText:C.attrs.wrapText}:{},wrapTopAndBottom:C.type==="TopAndBottom",shouldCover:B,originalPadding:{distT:o.distT,distB:o.distB,distL:o.distL,distR:o.distR},originalAttributes:t.attributes,rId:Te.Id,...a.length?{drawingChildOrder:a}:{},...l.length?{originalDrawingChildren:l}:{}}}}const zUe=(t,e,n,r,i,s,o,a,l)=>{var b,E;const c=n.elements.find(A=>A.name==="wps:wsp"),u=c.elements.find(A=>A.name==="wps:txbx"),d=(b=u==null?void 0:u.elements)==null?void 0:b.find(A=>A.name==="w:txbxContent"),f=c.elements.find(A=>A.name==="wps:spPr"),h=f==null?void 0:f.elements.find(A=>A.name==="a:prstGeom"),m=h==null?void 0:h.attributes.prst,y=(E=f==null?void 0:f.elements)==null?void 0:E.find(A=>A.name==="a:gradFill");if(m==="rect"&&!d&&!y)return UUe(t,f,e,s,o,a,l);if(m){const A=WUe({params:t,node:e,graphicData:n,size:r,marginOffset:s,anchorData:o,wrap:a,isAnchor:l});if(A)return A}return U0e(e,r,i,s,d?"textbox":"drawing")};function HUe(t){const e=[],n=[];return Array.isArray(t==null?void 0:t.elements)?(t.elements.forEach((r,i)=>{if(!r)return;const s=r.name??null;e.push(s),n.push({index:i,xml:Vi(r)})}),{order:e,originalChildren:n}):{order:e,originalChildren:n}}const VUe=(t,e,n,r,i,s,o,a)=>{var x,T,R,k,_,N,L,M,C,D,O,$,U,W,ce,se;const l=n.elements.find(Q=>Q.name==="wpg:wgp");if(!l)return U0e(e,r,i,s,"group");const c=l.elements.find(Q=>Q.name==="wpg:grpSpPr"),u=(x=c==null?void 0:c.elements)==null?void 0:x.find(Q=>Q.name==="a:xfrm"),d={};if(u){const Q=(T=u.elements)==null?void 0:T.find(X=>X.name==="a:off"),J=(R=u.elements)==null?void 0:R.find(X=>X.name==="a:ext"),K=(k=u.elements)==null?void 0:k.find(X=>X.name==="a:chOff"),re=(_=u.elements)==null?void 0:_.find(X=>X.name==="a:chExt");Q&&(d.x=In(((N=Q.attributes)==null?void 0:N.x)||0),d.y=In(((L=Q.attributes)==null?void 0:L.y)||0)),J&&(d.width=In(((M=J.attributes)==null?void 0:M.cx)||0),d.height=In(((C=J.attributes)==null?void 0:C.cy)||0)),K&&(d.childX=In(((D=K.attributes)==null?void 0:D.x)||0),d.childY=In(((O=K.attributes)==null?void 0:O.y)||0),d.childOriginXEmu=parseFloat((($=K.attributes)==null?void 0:$.x)||0),d.childOriginYEmu=parseFloat(((U=K.attributes)==null?void 0:U.y)||0)),re&&(d.childWidth=In(((W=re.attributes)==null?void 0:W.cx)||0),d.childHeight=In(((ce=re.attributes)==null?void 0:ce.cy)||0))}const f=l.elements.filter(Q=>Q.name==="wps:wsp"),h=l.elements.filter(Q=>Q.name==="pic:pic"),m=f.map(Q=>{var he,q,ne,Ee,Se,ze,Ie,qe,Ye,ft,We,nt,bt,ct,Ft,tn,Zt,ri,Ne,le;const J=(he=Q.elements)==null?void 0:he.find(fe=>fe.name==="wps:spPr");if(!J)return null;const K=(q=J.elements)==null?void 0:q.find(fe=>fe.name==="a:prstGeom"),re=(ne=K==null?void 0:K.attributes)==null?void 0:ne.prst,X=(Ee=J.elements)==null?void 0:Ee.find(fe=>fe.name==="a:xfrm"),me=(Se=X==null?void 0:X.elements)==null?void 0:Se.find(fe=>fe.name==="a:off"),G=(ze=X==null?void 0:X.elements)==null?void 0:ze.find(fe=>fe.name==="a:ext"),B=(Ie=me==null?void 0:me.attributes)!=null&&Ie.x?parseFloat(me.attributes.x):0,z=(qe=me==null?void 0:me.attributes)!=null&&qe.y?parseFloat(me.attributes.y):0,de=(Ye=G==null?void 0:G.attributes)!=null&&Ye.cx?parseFloat(G.attributes.cx):914400,Y=(ft=G==null?void 0:G.attributes)!=null&&ft.cy?parseFloat(G.attributes.cy):914400;let ee,ae,ie,H;if(d.childWidth&&d.childHeight){const fe=d.width/d.childWidth,ve=d.height/d.childHeight,He=d.childOriginXEmu||0,Xe=d.childOriginYEmu||0;ee=d.x+In((B-He)*fe),ae=d.y+In((z-Xe)*ve),ie=In(de*fe),H=In(Y*ve)}else ee=In(B),ae=In(z),ie=In(de),H=In(Y);const be=(We=X==null?void 0:X.attributes)!=null&&We.rot?yH(X.attributes.rot):0,Te=((nt=X==null?void 0:X.attributes)==null?void 0:nt.flipH)==="1",Z=((bt=X==null?void 0:X.attributes)==null?void 0:bt.flipV)==="1",oe=(ct=Q.elements)==null?void 0:ct.find(fe=>fe.name==="wps:style"),te=y0e(J,oe),ye=g0e(J,oe),ke=m0e(J),we=(Ft=Q.elements)==null?void 0:Ft.find(fe=>fe.name==="wps:cNvPr"),Ae=(tn=we==null?void 0:we.attributes)==null?void 0:tn.id,Re=(Zt=we==null?void 0:we.attributes)==null?void 0:Zt.name,Pe=(ri=Q.elements)==null?void 0:ri.find(fe=>fe.name==="wps:txbx"),Ce=(Ne=Pe==null?void 0:Pe.elements)==null?void 0:Ne.find(fe=>fe.name==="w:txbxContent"),Oe=(le=Q.elements)==null?void 0:le.find(fe=>fe.name==="wps:bodyPr");let Fe=null;Ce&&(Fe=V0e(Ce,Oe));const $e=(Fe==null?void 0:Fe.horizontalAlign)||"left";return{shapeType:"vectorShape",attrs:{kind:re,x:ee,y:ae,width:ie,height:H,rotation:be,flipH:Te,flipV:Z,fillColor:te,strokeColor:ye,strokeWidth:ke,shapeId:Ae,shapeName:Re,textContent:Fe,textAlign:$e,textVerticalAlign:Fe==null?void 0:Fe.verticalAlign,textInsets:Fe==null?void 0:Fe.insets}}}).filter(Boolean),w=[...h.map(Q=>{var Oe,Fe,$e,he,q,ne,Ee,Se,ze,Ie,qe,Ye,ft,We,nt,bt;const J=(Oe=Q.elements)==null?void 0:Oe.find(ct=>ct.name==="pic:spPr");if(!J)return null;const K=(Fe=J.elements)==null?void 0:Fe.find(ct=>ct.name==="a:xfrm"),re=($e=K==null?void 0:K.elements)==null?void 0:$e.find(ct=>ct.name==="a:off"),X=(he=K==null?void 0:K.elements)==null?void 0:he.find(ct=>ct.name==="a:ext"),me=(q=re==null?void 0:re.attributes)!=null&&q.x?parseFloat(re.attributes.x):0,G=(ne=re==null?void 0:re.attributes)!=null&&ne.y?parseFloat(re.attributes.y):0,B=(Ee=X==null?void 0:X.attributes)!=null&&Ee.cx?parseFloat(X.attributes.cx):914400,z=(Se=X==null?void 0:X.attributes)!=null&&Se.cy?parseFloat(X.attributes.cy):914400;let de,Y,ee,ae;if(d.childWidth&&d.childHeight){const ct=d.width/d.childWidth,Ft=d.height/d.childHeight,tn=d.childOriginXEmu||0,Zt=d.childOriginYEmu||0;de=d.x+In((me-tn)*ct),Y=d.y+In((G-Zt)*Ft),ee=In(B*ct),ae=In(z*Ft)}else de=In(me),Y=In(G),ee=In(B),ae=In(z);const ie=(ze=Q.elements)==null?void 0:ze.find(ct=>ct.name==="pic:blipFill"),H=(Ie=ie==null?void 0:ie.elements)==null?void 0:Ie.find(ct=>ct.name==="a:blip");if(!H)return null;const be=(qe=H.attributes)==null?void 0:qe["r:embed"];if(!be)return null;const Te=t.filename||"document.xml";let Z=t.docx[`word/_rels/${Te}.rels`];Z||(Z=t.docx["word/_rels/document.xml.rels"]);const oe=Z==null?void 0:Z.elements.find(ct=>ct.name==="Relationships"),{elements:te}=oe||[],ye=te==null?void 0:te.find(ct=>ct.attributes.Id===be);if(!ye)return null;const we=z0e((Ye=ye.attributes)==null?void 0:Ye.Target),Ae=(ft=Q.elements)==null?void 0:ft.find(ct=>ct.name==="pic:nvPicPr"),Re=(We=Ae==null?void 0:Ae.elements)==null?void 0:We.find(ct=>ct.name==="pic:cNvPr"),Pe=(nt=Re==null?void 0:Re.attributes)==null?void 0:nt.id,Ce=(bt=Re==null?void 0:Re.attributes)==null?void 0:bt.name;return{shapeType:"image",attrs:{x:de,y:Y,width:ee,height:ae,src:we,imageId:Pe,imageName:Ce}}}).filter(Boolean),...m],b={},E=(se=t.nodes)==null?void 0:se[0];return(E==null?void 0:E.name)===QH&&(b.drawingContent=E),{type:"shapeGroup",attrs:{...b,groupTransform:d,shapes:w,size:r,padding:i,marginOffset:s,anchorData:o,wrap:a,originalAttributes:e==null?void 0:e.attributes}}};function V0e(t,e){if(!t||!t.elements)return null;const n=t.elements.filter(b=>b.name==="w:p"),r=[];let i=null;if(n.forEach((b,E)=>{var T,R,k,_,N;if(!i){const L=(T=b.elements)==null?void 0:T.find(C=>C.name==="w:pPr"),M=(R=L==null?void 0:L.elements)==null?void 0:R.find(C=>C.name==="w:jc");if(M){const C=((k=M.attributes)==null?void 0:k.val)||((_=M.attributes)==null?void 0:_["w:val"]);C==="left"||C==="start"?i="left":C==="right"||C==="end"?i="right":C==="center"&&(i="center")}}const A=((N=b.elements)==null?void 0:N.filter(L=>L.name==="w:r"))||[];let x=!1;A.forEach(L=>{var C,D,O,$,U,W,ce,se,Q,J;const M=(C=L.elements)==null?void 0:C.find(K=>K.name==="w:t");if(M&&M.elements){const K=M.elements.find(re=>re.type==="text");if(K){x=!0;const re=typeof K.text=="string"?K.text.replace(/\[\[sdspace\]\]/g," "):K.text,X=(D=L.elements)==null?void 0:D.find(G=>G.name==="w:rPr"),me={};if(X){const G=(O=X.elements)==null?void 0:O.find(Y=>Y.name==="w:b"),B=($=X.elements)==null?void 0:$.find(Y=>Y.name==="w:i"),z=(U=X.elements)==null?void 0:U.find(Y=>Y.name==="w:color"),de=(W=X.elements)==null?void 0:W.find(Y=>Y.name==="w:sz");if(G&&(me.bold=!0),B&&(me.italic=!0),z&&(me.color=((ce=z.attributes)==null?void 0:ce.val)||((se=z.attributes)==null?void 0:se["w:val"])),de){const Y=((Q=de.attributes)==null?void 0:Q.val)||((J=de.attributes)==null?void 0:J["w:val"]);me.fontSize=parseInt(Y,10)/2}}r.push({text:re,formatting:me})}}}),E<n.length-1&&r.push({text:`
`,formatting:{},isLineBreak:!0,isEmptyParagraph:!x})}),r.length===0)return null;const s=(e==null?void 0:e.attributes)||{};let o="center";const a=s.anchor;a==="t"?o="top":a==="ctr"?o="center":a==="b"&&(o="bottom");const l=96/914400,c=91440,u=45720,d=s.lIns!=null?parseFloat(s.lIns):c,f=s.tIns!=null?parseFloat(s.tIns):u,h=s.rIns!=null?parseFloat(s.rIns):c,m=s.bIns!=null?parseFloat(s.bIns):u,y={top:f*l,right:h*l,bottom:m*l,left:d*l},w=s.wrap||"square";return{parts:r,horizontalAlign:i||"left",verticalAlign:o,insets:y,wrap:w}}const UUe=(t,e,n,r,i,s,o)=>{var m,y,w,b,E,A,x,T,R,k;const a={},l=(m=t.nodes)==null?void 0:m[0];(l==null?void 0:l.name)===QH&&(a.drawingContent=l);const c=(y=e==null?void 0:e.elements)==null?void 0:y.find(_=>_.name==="a:xfrm"),u=(w=c==null?void 0:c.elements)==null?void 0:w.find(_=>_.name==="a:off"),d=(b=c==null?void 0:c.elements)==null?void 0:b.find(_=>_.name==="a:ext"),f=(E=e==null?void 0:e.elements)==null?void 0:E.find(_=>_.name==="a:solidFill");if(u&&d){const _={top:In(((A=u.attributes)==null?void 0:A.y)||0),left:In(((x=u.attributes)==null?void 0:x.x)||0),width:In(((T=d.attributes)==null?void 0:T.cx)||0),height:In(((R=d.attributes)==null?void 0:R.cy)||0)};a.size=_}const h=(k=f==null?void 0:f.elements[0])==null?void 0:k.attributes.val;return h&&(a.background="#"+h),{type:"contentBlock",attrs:{...a,marginOffset:r,anchorData:i,wrap:s,isAnchor:o,originalAttributes:n==null?void 0:n.attributes}}},U0e=(t,e,n,r,i)=>{const s={drawingContent:{name:QH,elements:[Vi(t)]},attributes:{"data-shape-type":i}};if(e&&(Number.isFinite(e.width)||Number.isFinite(e.height))&&(s.size={...Number.isFinite(e.width)?{width:e.width}:{},...Number.isFinite(e.height)?{height:e.height}:{}}),n){const o={};Number.isFinite(n.top)&&(o["data-padding-top"]=n.top),Number.isFinite(n.right)&&(o["data-padding-right"]=n.right),Number.isFinite(n.bottom)&&(o["data-padding-bottom"]=n.bottom),Number.isFinite(n.left)&&(o["data-padding-left"]=n.left),Object.keys(o).length&&(s.attributes={...s.attributes,...o})}if(r){const o={},a=Number.isFinite(r.horizontal)?r.horizontal:Number.isFinite(r.left)?r.left:void 0;Number.isFinite(a)&&(o["data-offset-x"]=a),Number.isFinite(r.top)&&(o["data-offset-y"]=r.top),Object.keys(o).length&&(s.attributes={...s.attributes,...o})}return{type:"contentBlock",attrs:s}};function WUe({params:t,node:e,graphicData:n,size:r,marginOffset:i,anchorData:s,wrap:o,isAnchor:a}){var D,O,$,U,W,ce,se,Q,J,K,re,X,me;const l={},c=(D=t.nodes)==null?void 0:D[0];(c==null?void 0:c.name)==="w:drawing"&&(l.drawingContent=c);const u=(O=n.elements)==null?void 0:O.find(G=>G.name==="wps:wsp");if(!u)return null;const d=($=u.elements)==null?void 0:$.find(G=>G.name==="wps:spPr");if(!d)return null;const f=(U=d.elements)==null?void 0:U.find(G=>G.name==="a:prstGeom"),h=(W=f==null?void 0:f.attributes)==null?void 0:W.prst;h||console.warn("Shape kind not found"),l.kind=h;const m=(r==null?void 0:r.width)??jUe,y=(r==null?void 0:r.height)??$Ue,w=(ce=d.elements)==null?void 0:ce.find(G=>G.name==="a:xfrm"),b=(se=w==null?void 0:w.attributes)!=null&&se.rot?yH(w.attributes.rot):0,E=((Q=w==null?void 0:w.attributes)==null?void 0:Q.flipH)==="1",A=((J=w==null?void 0:w.attributes)==null?void 0:J.flipV)==="1",x=(K=u.elements)==null?void 0:K.find(G=>G.name==="wps:style"),T=y0e(d,x),R=g0e(d,x),k=m0e(d),_=(re=u.elements)==null?void 0:re.find(G=>G.name==="wps:txbx"),N=(X=_==null?void 0:_.elements)==null?void 0:X.find(G=>G.name==="w:txbxContent"),L=(me=u.elements)==null?void 0:me.find(G=>G.name==="wps:bodyPr");let M=null,C="left";return N&&(M=V0e(N,L),C=(M==null?void 0:M.horizontalAlign)||"left"),{type:"vectorShape",attrs:{...l,width:m,height:y,rotation:b,flipH:E,flipV:A,fillColor:T,strokeColor:R,strokeWidth:k,marginOffset:i,anchorData:s,wrap:o,isAnchor:a,textContent:M,textAlign:C,textVerticalAlign:M==null?void 0:M.verticalAlign,textInsets:M==null?void 0:M.insets,originalAttributes:e==null?void 0:e.attributes}}}function qUe(t){const{node:e}=t.extraParams;return e.name!=="wp:anchor"?null:H0e(e,t,!0)}const tte=(t,e="image")=>t&&t.replace(/[^a-zA-Z0-9_-]/g,"_")||e,GUe=(t="",e="image")=>{if(!t||typeof t!="string")return e;const[n]=t.split(";"),[,r]=n.split("/"),i=r==null?void 0:r.toLowerCase();return i?`${e}.${i}`:e};function eV(t,e){let{selection:n,doc:r,storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return r},get tr(){return n=t.selection,r=t.doc,i=t.storedMarks,t}}}const A2=(t,e)=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},Ml=t=>({$from:e})=>A2(e,t);function KUe(t,e){if(!t)return"";const n=(e==null?void 0:e.defaultView)??(typeof window<"u"?window:null),r=(n==null?void 0:n.DOMParser)??(typeof DOMParser<"u"?DOMParser:null);if(!r)throw new Error("[super-editor] HTML import requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");const s=new r().parseFromString(t,"text/html"),o=["href","src","alt","title","colspan","rowspan","headers","scope","lang","dir","cite","start","type","styleid"],a=l=>{l.nodeType===1&&(l.nodeName.toLowerCase()==="span"&&!l.children.length&&(l.innerHTML=YUe(l.innerHTML)),[...l.attributes].forEach(c=>{const u=c.name.toLowerCase();if(u==="style"){const f=XUe(c.value);f?l.setAttribute(c.name,f):l.removeAttribute(c.name);return}o.includes(u)||u.startsWith("data-")||l.removeAttribute(c.name)}),[...l.children].forEach(a))};return a(s.body),s.body.innerHTML}function XUe(t){if(!t)return"";const n=t.split(";").map(r=>r.trim()).filter(Boolean).find(r=>r.startsWith("text-align"));return n?`${n};`:""}function YUe(t){return t.replace(/^\s+/,"&nbsp;").replace(/\s+$/,"&nbsp;")}var YT,Q7;const yq=class yq{constructor(e){st(this,YT);Mt(this,"editor");Mt(this,"rawCommands");this.editor=e.editor,this.rawCommands=this.editor.extensionService.commands}static create(e){return new yq(e)}get state(){return this.editor.state}get commands(){const{editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.createProps(i),o=Object.entries(this.rawCommands).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!i.getMeta("preventDispatch")&&!pe(this,YT,Q7).call(this,i,{editor:e,view:r})?!1:d}]);return Object.fromEntries(o)}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{editor:r,state:i,rawCommands:s}=this,{view:o}=r,a=[],l=!!e,c=e||i.tr,u=()=>!l&&n&&!c.getMeta("preventDispatch")&&!pe(this,YT,Q7).call(this,c,{editor:r,view:o})?!1:a.every(h=>h===!0),d=Object.entries(s).map(([h,m])=>[h,(...w)=>{const b=this.createProps(c,n),E=m(...w)(b);return a.push(E),f}]),f={...Object.fromEntries(d),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.createProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...d)=>u(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}createProps(e,n=!0){const{editor:r,state:i,rawCommands:s}=this,{view:o}=r,a={tr:e,editor:r,view:o,state:eV(e,i),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};YT=new WeakSet,Q7=function(e,{editor:n,view:r}){if(n!=null&&n.isDestroyed)return console.warn("[CommandService] Cannot dispatch: editor is destroyed"),!1;try{if(r&&typeof r.dispatch=="function")r.dispatch(e);else if(typeof(n==null?void 0:n.dispatch)=="function")n.dispatch(e);else return console.warn("[CommandService] No dispatch method available (editor may not be initialized)"),!1;return!0}catch(i){const s=new Error(`[CommandService] Dispatch failed: ${i.message}`);throw s.cause=i,s}};let KN=yq;function ZUe(t,e,n){const r=n??(typeof document<"u"?document:null);if(!r)throw new Error("[super-editor] getHTMLFromFragment() requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");const i=Kf.fromSchema(e).serializeFragment(t,{document:r}),s=r.createElement("div");return s.appendChild(i),s.innerHTML}const JUe=(t="This feature")=>{console.warn(`[super-editor] ${t} requires a DOM document. This environment has no DOM. Provide a DOM (e.g., JSDOM) and set globalThis.document or pass { document } to the editor.`)},QUe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var c,u;const l=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?l:l.slice(0,Math.max(0,r-s))}),n},eWe=(t,e)=>Pb(t,e,G0e),W0e=(t,e)=>Pb(t,e,dWe),tWe=(t,e)=>{const n=W0e(t,e);return n?n.toLowerCase():null},q0e=(t,e)=>Pb(t,e,fWe),nWe=(t,e)=>{const n=q0e(t,e);return n?n.toLowerCase():null},rWe=(t,e)=>Pb(t,e,cWe),iWe=(t,e,n)=>uWe(t,e,n),sWe=(t,e)=>Pb(t,e,hWe),oWe={decimal:eWe,lowerRoman:tWe,upperRoman:W0e,lowerLetter:nWe,upperLetter:q0e,ordinal:rWe,custom:iWe,japaneseCounting:sWe},aWe=({listLevel:t,lvlText:e,listNumberingType:n,customFormat:r})=>{const i=oWe[n];return i?i(t,e,r):null},lWe=(t,e)=>t.reduce((n,r,i)=>Number(r)>9?n.replace(/^0/,"").replace(`%${i+1}`,r):n.replace(`%${i+1}`,r),e),Pb=(t,e,n)=>{const r=t.map(i=>n(i));return lWe(r,e)},cWe=t=>{const e=["th","st","nd","rd"],n=t%100,r=e[(n-20)%10]||e[n]||e[0];return`${t}${r}`},uWe=(t,e,n)=>{if(n.match(/(?:[0]+\d,\s){3}\.{3}/)==null)return Pb(t,e,G0e);const r=n.match(/(\d+)/);if(!r)throw new Error("Invalid format string: no numeric pattern found");const i=r[1].length;return Pb(t,e,s=>String(s).padStart(i,"0"))},G0e=t=>String(t),dWe=t=>{const e=[{value:1e3,numeral:"M"},{value:900,numeral:"CM"},{value:500,numeral:"D"},{value:400,numeral:"CD"},{value:100,numeral:"C"},{value:90,numeral:"XC"},{value:50,numeral:"L"},{value:40,numeral:"XL"},{value:10,numeral:"X"},{value:9,numeral:"IX"},{value:5,numeral:"V"},{value:4,numeral:"IV"},{value:1,numeral:"I"}];let n="",r=t;for(const{value:i,numeral:s}of e)for(;r>=i;)n+=s,r-=i;return n},fWe=t=>{let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let r=t;for(;r>0;){const i=(r-1)%26;e=n[i]+e,r=Math.floor((r-1)/26)}return e},hWe=t=>{const e=["","","","","","","","","",""],n=["","","",""];if(t===0)return"";if(t<10)return e[t];let r="",i=t,s=0;for(;i>0;){const o=i%10;if(o!==0?r=(o===1&&s>0?"":e[o])+(s>0?n[s]:"")+r:r&&i>0&&!r.startsWith("")&&i%100!==0&&(r=""+r),i=Math.floor(i/10),s+=1,s>3)break}return t>=10&&t<20&&(r=r.replace(/^/,"")),r},pWe=new Set(["","","","o","",""]),tV=t=>!t||!pWe.has(t)?t:t===""?"":t===""||t==="o"?"":t===""||t===""?"":t===""?"":t,nte=new WeakMap,XN="numbering-cache",YN=Symbol("superdoc.numbering.levels"),ZN=Symbol("superdoc.numbering.docx"),mWe=t=>{t&&(delete t[XN],delete t[ZN])},rte=(t,e,n)=>{t&&(t[XN]=e,n&&typeof n=="object"?t[ZN]=n:delete t[ZN])},eF=()=>({numToAbstractId:new Map,abstractById:new Map,templateById:new Map,numToDefinition:new Map,numNodesById:new Map}),gWe=t=>{var n,r,i,s;let e=t==null?void 0:t["word/numbering.xml"];return(!e||!((n=e.elements)!=null&&n.length)||!((r=e.elements[0].elements)!=null&&r.length))&&(e=Zpe),((s=(i=e==null?void 0:e.elements)==null?void 0:i[0])==null?void 0:s.elements)||[]},yWe=t=>{var a,l,c,u,d,f,h,m;if(!t||typeof t!="object")return eF();const e=gWe(t);if(!e.length)return eF();const n=new Map,r=new Map,i=new Map,s=new Map,o=new Map;for(const y of e)if((y==null?void 0:y.name)==="w:abstractNum"){const w=(a=y.attributes)==null?void 0:a["w:abstractNumId"];if(w==null)continue;const b=String(w);r.set(b,y);const E=((l=y.elements)==null?void 0:l.filter(R=>R.name==="w:lvl"))||[],A=new Map;for(const R of E){const k=(c=R==null?void 0:R.attributes)==null?void 0:c["w:ilvl"],_=k==null?0:Number(k);!Number.isNaN(_)&&!A.has(_)&&A.set(_,R)}Object.prototype.hasOwnProperty.call(y,YN)||Object.defineProperty(y,YN,{value:A,enumerable:!1,configurable:!1,writable:!1});const x=(u=y.elements)==null?void 0:u.find(R=>R.name==="w:tmpl"),T=(d=x==null?void 0:x.attributes)==null?void 0:d["w:val"];T!=null&&A.size&&i.set(String(T),y)}else if((y==null?void 0:y.name)==="w:num"){const w=(f=y.attributes)==null?void 0:f["w:numId"];if(w==null)continue;const b=String(w);o.set(b,y);const E=(h=y.elements)==null?void 0:h.find(x=>x.name==="w:abstractNumId"),A=(m=E==null?void 0:E.attributes)==null?void 0:m["w:val"];A!=null&&n.set(b,String(A))}for(const[y,w]of n.entries()){const b=r.get(w);b&&s.set(y,b)}return{numToAbstractId:n,abstractById:r,templateById:i,numToDefinition:s,numNodesById:o}},K0e=(t,e)=>{if(e!=null&&e[XN]){const i=e[ZN];if(t&&i&&i!==t)mWe(e);else return e[XN]}if(!t||typeof t!="object")return eF();const n=nte.get(t);if(n)return rte(e,n,t),n;const r=yWe(t);return e?rte(e,r,t):nte.set(t,r),r},bWe=t=>{var e,n;return(n=(e=t==null?void 0:t.elements)==null?void 0:e.find(r=>r.name==="w:numId"))==null?void 0:n.attributes["w:val"]};function wWe(t,e){const n=e["word/styles.xml"];return n?n.elements.find(a=>a.name==="w:styles").elements.filter(a=>a.name==="w:style").find(a=>a.attributes["w:styleId"]===t):{}}const ite=(t,e)=>{var y,w,b,E,A,x,T,R,k,_,N,L,M;const n=e["word/styles.xml"];if(!n)return null;const{elements:r}=n,i=r[0].elements.filter(C=>C.name==="w:style"),s=i.find(C=>C.attributes["w:styleId"]===t)||{},o=(y=s==null?void 0:s.elements)==null?void 0:y.find(C=>C.name==="w:pPr");if(!o)return null;let a=(w=o==null?void 0:o.elements)==null?void 0:w.find(C=>C.name==="w:numPr");if(!a)return null;let l=((b=a==null?void 0:a.elements)==null?void 0:b.find(C=>C.name==="w:numId"))||{},c=bWe(a),u=(E=a==null?void 0:a.elements)==null?void 0:E.find(C=>C.name==="w:ilvl"),d=(A=u==null?void 0:u.attributes)==null?void 0:A["w:val"];const f=(x=s==null?void 0:s.elements)==null?void 0:x.find(C=>C.name==="w:basedOn"),h=(T=f==null?void 0:f.attributes)==null?void 0:T["w:val"];let m=0;for(;a&&!c&&m<10;){const C=i.find(O=>O.attributes["w:styleId"]===h)||{},D=(R=C==null?void 0:C.elements)==null?void 0:R.find(O=>O.name==="w:pPr");a=(k=D==null?void 0:D.elements)==null?void 0:k.find(O=>O.name==="w:numPr"),l=((_=a==null?void 0:a.elements)==null?void 0:_.find(O=>O.name==="w:numId"))||{},c=(N=l==null?void 0:l.attributes)==null?void 0:N["w:val"],u||(u=(L=a==null?void 0:a.elements)==null?void 0:L.find(O=>O.name==="w:ilvl"),d=(M=u==null?void 0:u.attributes)==null?void 0:M["w:val"]),m++}return{numId:c,ilvl:d}},vWe=(t,e,n)=>{var c,u;if(!e["word/numbering.xml"])return{};if(t==null)return;const i=K0e(e,n),s=String(t);let o=i.numToDefinition.get(s);if(!o){const d=i.numToAbstractId.get(s);d&&(o=i.abstractById.get(d),o&&i.numToDefinition.set(s,o))}const a=o?o[YN]:null,l=a&&a.size>0;if(!o||!l){const d=(c=o==null?void 0:o.elements)==null?void 0:c.find(h=>h.name==="w:tmpl"),f=(u=d==null?void 0:d.attributes)==null?void 0:u["w:val"];if(f){const h=i.templateById.get(String(f));h&&(o=h)}}return o},xWe=(t,e,n,r,i)=>{const s=Number(t),o=[];if(s>0)for(let a=s;a>=0;a--){const{start:l}=X0e(e,a,n,i);r[a]||(r[a]=Number(l)||1),o.unshift(r[a])}return o},X0e=(t,e,n,r)=>{var w,b,E,A,x,T,R,k,_;if(n){const{numId:N,ilvl:L}=ite(n,r)||{};!t&&N&&(t=N),!e&&L&&(e=L?parseInt(L):null)}const i=vWe(t,r),s=EWe(i,e),o=(w=i==null?void 0:i.elements)==null?void 0:w.find(N=>N.name==="w:numStyleLink"),a=o==null?void 0:o.attributes["w:val"];if(a){const N=ite(a,r);return X0e(N.numId,e,null,r)}const l=(E=(b=s==null?void 0:s.elements)==null?void 0:b.find(N=>N.name==="w:start"))==null?void 0:E.attributes["w:val"];let c=(A=s==null?void 0:s.elements)==null?void 0:A.find(N=>N.name==="w:numFmt"),u=c==null?void 0:c.attributes["w:val"];if(!u){const N=s==null?void 0:s.elements.find(D=>D.name==="mc:AlternateContent"),L=N==null?void 0:N.elements.find(D=>D.name==="mc:Choice"),M=L==null?void 0:L.elements.find(D=>D.name==="w:numFmt"),C=M==null?void 0:M.attributes["w:val"];C&&(c=M,u=C)}let d=(x=s==null?void 0:s.elements)==null?void 0:x.find(N=>N.name==="w:lvlText").attributes["w:val"];d=tV(d);let f;u==="custom"&&(f=(T=c==null?void 0:c.attributes)==null?void 0:T["w:format"]);const h=(R=s==null?void 0:s.elements)==null?void 0:R.find(N=>N.name==="w:lvlJc").attributes["w:val"],m=(k=s==null?void 0:s.elements)==null?void 0:k.find(N=>N.name==="w:pPr"),y=(_=s==null?void 0:s.elements)==null?void 0:_.find(N=>N.name==="w:rPr");return{start:l,numFmt:u,lvlText:d,lvlJc:h,pPr:m,rPr:y,customFormat:f}};function EWe(t,e){var i;if(!t)return;const n=Number(e);if(Number.isNaN(n))return;const r=t[YN];return r!=null&&r.has(n)?r.get(n):(i=t==null?void 0:t.elements)==null?void 0:i.find(s=>{var o;return Number((o=s.attributes)==null?void 0:o["w:ilvl"])===n})}const SWe={generateListPath:xWe,normalizeLvlTextChar:tV},Y0e={type:"element",name:"w:abstractNum",attributes:{"w:abstractNumId":"1","w15:restartNumberingAfterBreak":"0"},elements:[{type:"element",name:"w:multiLevelType",attributes:{"w:val":"hybridMultilevel"}},{type:"element",name:"w:tmpl",attributes:{"w:val":"EE6417C4"}},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"0","w:tplc":"0409000F"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%1."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"720","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"1","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%2."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"1440","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"2","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%3."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2160","w:hanging":"180"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"3","w:tplc":"0409000F","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%4."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2880","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"4","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%5."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"3600","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"5","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%6."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"4320","w:hanging":"180"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"6","w:tplc":"0409000F","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"decimal"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%7."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5040","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"7","w:tplc":"04090019","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerLetter"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%8."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5760","w:hanging":"360"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"8","w:tplc":"0409001B","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"lowerRoman"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"%9."}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"right"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"6480","w:hanging":"180"}}]}]}]},Z0e={type:"element",name:"w:abstractNum",attributes:{"w:abstractNumId":"0","w15:restartNumberingAfterBreak":"0"},elements:[{type:"element",name:"w:nsid",attributes:{"w:val":"16126B07"}},{type:"element",name:"w:multiLevelType",attributes:{"w:val":"hybridMultilevel"}},{type:"element",name:"w:tmpl",attributes:{"w:val":"51EC4E08"}},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"0","w:tplc":"04090001"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"720","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"1","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"1440","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"2","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2160","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"3","w:tplc":"04090001","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"2880","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"4","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"3600","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"5","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"4320","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"6","w:tplc":"04090001","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5040","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Symbol","w:hAnsi":"Symbol","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"7","w:tplc":"04090003","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":"o"}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"5760","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Courier New","w:hAnsi":"Courier New","w:cs":"Courier New","w:hint":"default"}}]}]},{type:"element",name:"w:lvl",attributes:{"w:ilvl":"8","w:tplc":"04090005","w:tentative":"1"},elements:[{type:"element",name:"w:start",attributes:{"w:val":"1"}},{type:"element",name:"w:numFmt",attributes:{"w:val":"bullet"}},{type:"element",name:"w:lvlText",attributes:{"w:val":""}},{type:"element",name:"w:lvlJc",attributes:{"w:val":"left"}},{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:ind",attributes:{"w:left":"6480","w:hanging":"360"}}]},{type:"element",name:"w:rPr",elements:[{type:"element",name:"w:rFonts",attributes:{"w:ascii":"Wingdings","w:hAnsi":"Wingdings","w:hint":"default"}}]}]}]},J0e=new WeakMap;function es(t){return J0e.get(t)}function Fb(t,e,n){if(!t.converter)return e.attrs.paragraphProperties||{};const r=es(e);if(r)return r;const i=A2(n,a=>a.type.name==="table"),s=(i==null?void 0:i.node.attrs.tableStyleId)||null,o=xge({docx:t.converter.convertedXml,numbering:t.converter.numbering},e.attrs.paragraphProperties||{},!!i,!1,s);return J0e.set(e,o),o}const lu=t=>{var e,n;return!!t&&((e=t.type)==null?void 0:e.name)==="paragraph"&&es(t).numberingProperties&&((n=t.attrs)==null?void 0:n.listRendering)},nV=(t,e,n)=>{var m,y,w,b;const{state:r}=e,{selection:i,doc:s}=r,o=[],a=new Set,l=s??((y=(m=i==null?void 0:i.$from)==null?void 0:m.node)==null?void 0:y.call(m,0)),c=(E,A)=>{lu(E)&&!a.has(A)&&(o.push({node:E,pos:A}),a.add(A))},u=E=>{if(!E)return;const A=E.parent;if(A.type.name!=="paragraph")return;const x=typeof E.before=="function"?E.before():null;!A||x==null||c(A,x)},d=(w=i==null?void 0:i.ranges)!=null&&w.length&&Array.isArray(i.ranges)?i.ranges:i!=null&&i.$from&&(i!=null&&i.$to)?[{$from:i.$from,$to:i.$to}]:[];for(const E of d)!(E!=null&&E.$from)||!(E!=null&&E.$to)||(l!=null&&l.nodesBetween&&l.nodesBetween(E.$from.pos,E.$to.pos,(A,x)=>c(A,x)),u(E.$from),u(E.$to));if(!o.length&&i){const E=Ml(lu)(i);if(!E)return!1;o.push({node:E.node,pos:E.pos})}const f=[];let h=!1;for(const E of o){const A=(b=es(E.node))==null?void 0:b.numberingProperties;if(!A)continue;const x=Number.parseInt(A.ilvl??0,10),R=(Number.isNaN(x)?0:x)+t;if(R<0){h=!0;continue}if(!Zr.hasListDefinition(e,A.numId,R))return!1;f.push({node:E.node,pos:E.pos,numberingProperties:{...A,ilvl:R}})}return f.length?(f.sort((E,A)=>E.pos-A.pos).forEach(({numberingProperties:E,node:A,pos:x})=>{Bb(E,A,x,e,n)}),!0):!!h};function Bb(t,e,n,r,i){var a;const s={...e.attrs.paragraphProperties||{},numberingProperties:t?{...t}:null};((a=e.attrs.paragraphProperties)==null?void 0:a.styleId)==="ListParagraph"&&(s.styleId=null),s.indent&&delete s.indent;const o={...e.attrs,paragraphProperties:s,numberingProperties:s.numberingProperties};t||(o.listRendering=null),i.setNodeMarkup(n,null,o)}const AWe=({numId:t,listType:e,level:n,start:r,text:i,fmt:s,editor:o,markerFontFamily:a})=>{var w,b;typeof e!="string"&&(e=e.name);const l=e==="orderedList"?Y0e:Z0e,u={...o.converter.numbering};let d=!1,f=JN(o,"abstracts"),h=JSON.parse(JSON.stringify({...l,attributes:{...l.attributes,"w:abstractNumId":String(f)}}));if(n&&r&&i&&s){if(u.definitions[t]){const R=(b=(w=u.definitions[t])==null?void 0:w.elements[0])==null?void 0:b.attributes["w:val"];f=R,h={...o.converter.numbering.abstracts[R]},d=!0}const E=h.elements.findIndex(R=>R.name==="w:lvl"&&R.attributes["w:ilvl"]===n),A=h.elements[E],x=["w:numFmt","w:lvlText","w:start"],T=A.elements.filter(R=>!x.includes(R.name));if(A.elements=[...T,{type:"element",name:"w:start",attributes:{"w:val":r}},{type:"element",name:"w:numFmt",attributes:{"w:val":s}},{type:"element",name:"w:lvlText",attributes:{"w:val":i}}],a){const R=A.elements.findIndex(_=>_.name==="w:rPr");let k=A.elements[R];k||(k={type:"element",name:"w:rPr",elements:[]},A.elements.push(k)),k.elements=k.elements.filter(_=>_.name!=="w:rFonts"),k.elements.push({type:"element",name:"w:rFonts",attributes:{"w:ascii":a,"w:hAnsi":a,"w:eastAsia":a,"w:cs":a}})}}d||(u.abstracts[f]=h);const m=rV(t,f);u.definitions[t]=m,o.converter.numbering=u;const y={numDef:m,abstractDef:h,editor:o};return o.emit("list-definitions-change",{change:y,numbering:u,editor:o}),{abstract:h,definition:m}},TWe=(t,e,n)=>{var c,u,d,f;const{definitions:r,abstracts:i}=t.converter.numbering,s=r[e];if(!s)return!1;const o=(d=(u=(c=s.elements)==null?void 0:c.find(h=>h.name==="w:abstractNumId"))==null?void 0:u.attributes)==null?void 0:d["w:val"],a=i[o];return a?!!((f=a.elements)==null?void 0:f.find(h=>{var m;return h.name==="w:lvl"&&((m=h.attributes)==null?void 0:m["w:ilvl"])==n})):!1},kWe=(t,e,n,r)=>{const i=JN(r,"definitions"),{abstract:s}=Zr.getListDefinitionDetails({numId:t,level:e,listType:n,editor:r}),a={...r.converter.numbering};if(!s)return Zr.generateNewListDefinition({numId:i,listType:n,editor:r}),i;const l=JN(r,"abstracts"),c={...s,attributes:{...s.attributes||{},"w:abstractNumId":String(l)}};a.abstracts[l]=c;const u=rV(i,l);return a.definitions[i]=u,r.converter.numbering=a,i},rV=(t,e)=>({type:"element",name:"w:num",attributes:{"w:numId":String(t)},elements:[{name:"w:abstractNumId",attributes:{"w:val":String(e)}}]}),JN=(t,e="definitions")=>{var s,o;const n=((o=(s=t.converter)==null?void 0:s.numbering)==null?void 0:o[e])||{},r=Object.keys(n).map(a=>Number(a)).filter(a=>Number.isInteger(a));return(r.length?Math.max(...r):0)+1},Q0e=({numId:t,level:e,listType:n,editor:r,tries:i=0})=>{var L,M,C,D,O,$,U,W,ce,se,Q,J,K,re,X,me,G,B,z,de,Y,ee,ae;const{definitions:s,abstracts:o}=r.converter.numbering;if(!t)return{};!s[t]&&n&&Zr.generateNewListDefinition({numId:t,listType:n,editor:r});const l=(D=(C=(M=(L=s[t])==null?void 0:L.elements)==null?void 0:M.find(ie=>ie.name==="w:abstractNumId"))==null?void 0:C.attributes)==null?void 0:D["w:val"],c=o[l];if(!c)return{start:null,numFmt:null,lvlText:null,listNumberingType:null,suffix:null,justification:null,customFormat:null,abstract:null,abstractId:l};const u=(O=c.elements)==null?void 0:O.find(ie=>ie.name==="w:numStyleLink"),d=($=u==null?void 0:u.attributes)==null?void 0:$["w:val"];if(d&&i<1){const ie=wWe(d,r.converter.convertedXml),H=(K=(J=(Q=(se=(ce=(W=(U=ie==null?void 0:ie.elements)==null?void 0:U.find(be=>be.name==="w:pPr"))==null?void 0:W.elements)==null?void 0:ce.find(be=>be.name==="w:numPr"))==null?void 0:se.elements)==null?void 0:Q.find(be=>be.name==="w:numId"))==null?void 0:J.attributes)==null?void 0:K["w:val"];if(H)return Q0e({numId:Number(H),level:e,listType:n,editor:r,tries:i+1})}const f=(re=c.elements)==null?void 0:re.find(ie=>{var H;return ie.name==="w:lvl"&&((H=ie.attributes)==null?void 0:H["w:ilvl"])==e});if(!f)return{start:null,numFmt:null,lvlText:null,suffix:null,justification:null,listNumberingType:null,customFormat:null,abstract:c,abstractId:l};const h=ie=>{var H;return(H=f.elements)==null?void 0:H.find(be=>be.name===ie)},m=h("w:start");let y=h("w:numFmt");if(!y){const ie=(X=f.elements)==null?void 0:X.find(be=>be.name==="mc:AlternateContent"),H=(me=ie==null?void 0:ie.elements)==null?void 0:me.find(be=>be.name==="mc:Choice");y=(G=H==null?void 0:H.elements)==null?void 0:G.find(be=>be.name==="w:numFmt")}const w=h("w:lvlText"),b=h("w:suff"),E=h("w:lvlJc"),A=(B=m==null?void 0:m.attributes)==null?void 0:B["w:val"],x=(z=y==null?void 0:y.attributes)==null?void 0:z["w:val"],T=(de=w==null?void 0:w.attributes)==null?void 0:de["w:val"],R=(Y=b==null?void 0:b.attributes)==null?void 0:Y["w:val"],k=(ee=E==null?void 0:E.attributes)==null?void 0:ee["w:val"],_=x,N=x==="custom"?(ae=y==null?void 0:y.attributes)==null?void 0:ae["w:format"]:void 0;return{start:A,numFmt:x,lvlText:T,suffix:R,justification:k,listNumberingType:_,customFormat:N,abstract:c,abstractId:l}},CWe=t=>{var i;const e=(i=t==null?void 0:t.converter)==null?void 0:i.numbering;if(!e)return{};const{definitions:n={},abstracts:r={}}=e;return Object.entries(n).reduce((s,[o,a])=>{var d,f,h,m;if(!a)return s;const l=(h=(f=(d=a.elements)==null?void 0:d.find(y=>y.name==="w:abstractNumId"))==null?void 0:f.attributes)==null?void 0:h["w:val"],c=l!=null?r==null?void 0:r[l]:void 0,u=((m=c==null?void 0:c.elements)==null?void 0:m.filter(y=>y.name==="w:lvl"))||[];return s[o]||(s[o]={}),u.forEach(y=>{var N,L,M,C,D,O,$;const w=(N=y==null?void 0:y.attributes)==null?void 0:N["w:ilvl"];if(w==null)return;const b=U=>{var W;return(W=y==null?void 0:y.elements)==null?void 0:W.find(ce=>ce.name===U)},E=b("w:start"),A=b("w:lvlRestart"),x=b("w:numFmt"),T=b("w:lvlText"),R=b("w:suff"),k=((L=x==null?void 0:x.attributes)==null?void 0:L["w:val"])??null,_=k==="custom"?((M=x==null?void 0:x.attributes)==null?void 0:M["w:format"])??null:null;s[o][w]={start:((C=E==null?void 0:E.attributes)==null?void 0:C["w:val"])??null,restart:((D=A==null?void 0:A.attributes)==null?void 0:D["w:val"])??null,numFmt:k,lvlText:((O=T==null?void 0:T.attributes)==null?void 0:O["w:val"])??null,suffix:(($=R==null?void 0:R.attributes)==null?void 0:$["w:val"])??null,listNumberingType:k,customFormat:_,abstract:c??null,abstractId:l}}),s},{})},_We=(t,e)=>{const{numbering:n}=e.converter;if(!n)return;const{definitions:r,abstracts:i}=n,s=r[t].elements[0].attributes["w:val"];delete r[t],delete i[s],e.converter.numbering={definitions:r,abstracts:i}},eye=({level:t,numId:e,contentNode:n})=>{Array.isArray(n)||(n=[n]);const r={numId:Number(e),ilvl:Number(t)};return{type:"paragraph",attrs:{paragraphProperties:{numberingProperties:r},numberingProperties:r},content:[...n||[]]}},NWe=({level:t,numId:e,editor:n,contentNode:r})=>{t=Number(t),e=Number(e);const i=eye({level:t,numId:e,contentNode:r});return n.schema.nodeFromJSON(i)},IWe=({listType:t,tr:e,editor:n})=>{const r=Zr.getNewListId(n);Zr.generateNewListDefinition({numId:r,listType:t,editor:n});const i=Ml(a=>{var l;return((l=a==null?void 0:a.type)==null?void 0:l.name)==="paragraph"})(e.selection);if(!i)return!1;const{node:s,pos:o=0}=i;return Bb({numId:r,ilvl:0},s,o,n,e),!0},RWe=({tr:t,from:e,to:n,newNode:r})=>{t.replaceWith(e,n,r)},Zr={replaceListWithNode:RWe,getListDefinitionDetails:Q0e,getAllListDefinitions:CWe,generateNewListDefinition:AWe,getBasicNumIdTag:rV,getNewListId:JN,hasListDefinition:TWe,removeListDefinitions:_We,createNewList:IWe,createSchemaOrderedListNode:NWe,createListItemNodeJSON:eye,changeNumIdSameAbstract:kWe,baseOrderedListDef:Y0e,baseBulletList:Z0e},MWe=(t,e,n,r)=>{const i=new RegExp(`@list\\s+l${e}:level${n}(?:\\s+lfo${r})?\\s*\\{([^}]+)\\}`,"i"),s=t.match(i);if(!s)return null;const o=s[1].split(";").map(l=>l.trim()).filter(Boolean),a={};for(const l of o){const[c,u]=l.split(":").map(d=>d.trim());a[c]=u}return a},QO=(t,e)=>{const n=new RegExp(`(${e})\\s*\\{([^}]+)\\}`,"i"),r=t.match(n);if(!r)return null;const i=r[2].split(";").map(o=>o.trim()).filter(Boolean),s={};for(const o of i){const[a,l]=o.split(":").map(c=>c.trim());s[a]=l}return s};function LWe(t,e){const n={};if(e){const r=e.split(";").map(i=>i.trim()).filter(Boolean);for(const i of r){const[s,o]=i.split(":").map(a=>a.trim());n[s]=o}}return n["mso-text-indent-alt"]&&(delete n["text-indent"],n["text-indent"]=n["mso-text-indent-alt"],delete n["mso-text-indent-alt"]),n["mso-bidi-font-family"]&&(delete n["font-family"],n["font-family"]=n["mso-bidi-font-family"],delete n["mso-bidi-font-family"]),{...t,...n}}const DWe=new Map([["decimal","decimal"],["alpha-lower","lowerLetter"],["alpha-upper","upperLetter"],["roman-lower","lowerRoman"],["roman-upper","upperRoman"],["bullet","bullet"]]),OWe=new Map([["1","decimal"],["a","lowerLetter"],["A","upperLetter"],["I","upperRoman"],["i","lowerRoman"]]);function PWe(t){const e=t.match(/^(\d+)/);return e?parseInt(e[1],10):null}function FWe(t){return t.toLowerCase().charCodeAt(0)-97+1}function ste(t){const e=t.match(/^([a-zA-Z])/);return e?FWe(e[1]):null}function BWe(t){const e={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3};let n=0,r=0;for(let i=t.length-1;i>=0;i--){const s=e[t[i].toUpperCase()]||0;s<r?n-=s:n+=s,r=s}return n}function ote(t){const e=t.match(/^([ivxlcdmIVXLCDM]+)/);return e?BWe(e[1]):null}const jWe=new Map([["decimal",PWe],["lowerLetter",ste],["upperLetter",ste],["lowerRoman",ote],["upperRoman",ote],["bullet",()=>1]]),$We=new Map([["decimal","decimal"],["decimal-leading-zero","decimal"],["lower-alpha","lowerLetter"],["upper-alpha","upperLetter"],["lower-roman","lowerRoman"],["upper-roman","upperRoman"],["bullet","bullet"]]),zWe=(t,e,n)=>{var o,a;const s=(a=(o=n.converter.numbering.abstracts[0].elements.find(l=>{var c;return l.name==="w:lvl"&&((c=l.attributes)==null?void 0:c["w:ilvl"])===(e-1).toString()}).elements.find(l=>l.name==="w:lvlText"))==null?void 0:o.attributes)==null?void 0:a["w:val"];switch(t){case"decimal-leading-zero":return`0%${e}.`;case"bullet":return s;default:return`%${e}.`}},HWe=(t,e,n)=>{const{converter:r}=e;if(!r||!r.convertedXml)return rye(t,e);let i=iV(t);i=xqe(i);const s=document.createElement("div");s.innerHTML=i;const o=s.querySelectorAll("p, li, "+[1,2,3,4,5,6,7,8,9].map(u=>`h${u}`).join(", ")),a={};o.forEach(u=>{var D,O,$;let d;u.localName==="li"?d="listItem":d="p";const h=(u.getAttribute("style")||"").match(/mso-list:\s*l(\d+)\s+level(\d+)\s+lfo(\d+)/),m=s.querySelector("style").innerHTML,y=QO(m,".MsoNormal");let w=u.getAttribute("class"),b={};if(u.localName.startsWith("h")&&!w){w=u.localName;const U=w.substring(1);b=QO(m,`.Heading${U}Char`)}else w&&(w=`.${w}`);const E=QO(m,w);let A={...y,...E,...b};const x=!E||!E["mso-list"];if(h){const[,U,W,ce]=h,se=MWe(m,U,W,ce)||{},Q=(se==null?void 0:se["font-family"])??(y==null?void 0:y["font-family"]);delete se["font-family"],x?A={...y,...E,...se}:A={...y,...se,...E};let J,K,re;if(d==="listItem"){const X=u.parentNode.getAttribute("type"),me=u.parentNode.getAttribute("start");a[ce]||(a[ce]=me),J=a[ce],K=OWe.get(X),re=`%${W}.`}else{const X=se["mso-level-number-format"]||"decimal";K=DWe.get(X);const me=((O=(D=u.innerText)==null?void 0:D.match(/^\s*[a-zA-Z0-9]+([.()])/i))==null?void 0:O[1])||".";re=K==="bullet"?tV(se["mso-level-text"]):`%${W}${me}`;const G=jWe.get(K);a[ce]||(a[ce]=G((($=u.children[0])==null?void 0:$.innerText)||"1")),J=a[ce]}u.setAttribute("data-marker-font-family",Q),u.setAttribute("data-num-id",ce),u.setAttribute("data-list-level",parseInt(W)-1),u.setAttribute("data-start",J),u.setAttribute("data-lvl-text",re),u.setAttribute("data-num-fmt",K)}const T=LWe(A,u.getAttribute("style")),R=h5(parseInt(T["margin-left"]??0)),k=h5(parseInt(T["text-indent"]??0));let _,N;if(k<0?_=Math.abs(k):N=k,R||_||N){const U={};R!=null&&(U.left=R),_!=null&&(U.hanging=_),N!=null&&(U.firstLine=N),u.setAttribute("data-indent",JSON.stringify(U))}const L=h5(parseInt(T["margin-bottom"]??0)),M=h5(parseInt(T["margin-top"]??0));if(L||M){const U={};L!=null&&(U.after=L),M!=null&&(U.before=M),u.setAttribute("data-spacing",JSON.stringify(U))}const C={};if(T["font-size"]&&(C["font-size"]=T["font-size"]),T["font-family"]&&(C["font-family"]=T["font-family"]),T["text-transform"]&&(C["text-transform"]=T["text-transform"]),Object.keys(C).length){Object.keys(C).forEach(U=>{const W=C[U];W&&(u.style[U]=W)}),u.setAttribute("data-text-styles",JSON.stringify(C));for(const U of u.children)U.style&&Object.keys(C).forEach(W=>{const ce=C[W];ce&&(U.style[W]=ce)})}if(T["font-weight"]==="bold"){u.style.fontWeight="bold";for(const U of u.children)U.style&&(U.style.fontWeight="bold")}WWe(u)}),VWe(s,e);let l=ka.fromSchema(e.schema).parse(s);l=_x(l),s.remove();const{dispatch:c}=e.view;return c?(c(n.state.tr.replaceSelectionWith(l,!0)),!0):!1},_x=t=>{var r,i,s;const e=(s=(i=(r=t.type)==null?void 0:r.schema)==null?void 0:i.nodes)==null?void 0:s.run;if(!e)return t;const n=(o,a)=>{var u;if(o.isText){if(((u=a==null?void 0:a.type)==null?void 0:u.name)==="run")return o;const d=rC(o.marks);return e.create({runProperties:d},[o])}if(!o.childCount)return o;let l=!1;const c=[];return o.forEach(d=>{const f=n(d,o);f!==d&&(l=!0),c.push(f)}),l?o.copy(Nt.fromArray(c)):o};return n(t,null)},VWe=(t,e)=>{const n=Array.from(t.querySelectorAll("[data-num-id]")),r={},i={};for(const s of n){const o=parseInt(s.getAttribute("data-list-level")),a=s.getAttribute("data-num-fmt"),l=s.getAttribute("data-start"),c=s.getAttribute("data-lvl-text"),u=s.getAttribute("data-marker-font-family"),d=s.getAttribute("data-num-id");i[d]||(i[d]=Zr.getNewListId(e));const f=i[d],h=a==="bullet"?"bulletList":"orderedList";Zr.generateNewListDefinition({numId:f,listType:h,level:o.toString(),start:l,fmt:a,text:c,editor:e,markerFontFamily:u}),r[f]||(r[f]={levels:{}});const m=r[f];m.levels[o]?m.levels[o]++:m.levels[o]=Number(l)||1,Object.keys(m.levels).forEach(x=>{const T=Number(x);T>o&&delete m.levels[T]});const y=UWe(o,m.levels,l);y.length||y.push(m.levels[o]);const w=document.createElement("p");if(w.innerHTML=s.innerHTML,w.setAttribute("data-num-id",f),w.setAttribute("data-list-level",JSON.stringify(y)),w.setAttribute("data-level",o),w.setAttribute("data-lvl-text",c),w.setAttribute("data-num-fmt",a),s.hasAttribute("data-indent")&&w.setAttribute("data-indent",s.getAttribute("data-indent")),s.hasAttribute("data-spacing")&&w.setAttribute("data-spacing",s.getAttribute("data-spacing")),s.hasAttribute("data-text-styles")){const x=JSON.parse(s.getAttribute("data-text-styles"));Object.keys(x).forEach(T=>{const R=x[T];if(R){w.style[T]=R;for(const k of w.children)k.style&&(k.style[T]=R)}})}const b=s.parentNode;b.appendChild(w);let E;const A=a==="bullet"?document.createElement("ul"):document.createElement("ol");A.setAttribute("data-list-id",f),A.level=o,b.insertBefore(A,s),E=A,E.appendChild(w),s.remove()}},UWe=(t,e,n)=>{const r=Number(t),i=[];if(r>0)for(let s=r;s>=0;s--)e[s]||(e[s]=Number(n)),i.unshift(e[s]);return i};function WWe(t){const e=Array.from(t.childNodes);let n=null,r=null,i=-1,s=-1;if(e.forEach((o,a)=>{o.nodeType===Node.COMMENT_NODE&&o.nodeValue.includes("[if !supportLists]")&&(i=a),i!==-1&&o.nodeType===Node.COMMENT_NODE&&o.nodeValue.includes("[endif]")&&(s=a)}),i!==-1&&s!==-1){for(let o=i+1;o<s;o++){const a=e[o];a.nodeType===Node.ELEMENT_NODE&&a.style&&(n=n||a.style.fontFamily,r=r||a.style.fontSize)}for(let o=s;o>=i;o--)t.removeChild(t.childNodes[o]);n&&t.setAttribute("data-font-family",n),r&&t.setAttribute("data-font-size",r)}}const tye=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&tye(r)}return t};function qWe(t,e,n){var c,u;const r=n??((c=e==null?void 0:e.options)==null?void 0:c.document)??((u=e==null?void 0:e.options)==null?void 0:u.mockDocument)??(typeof document<"u"?document:null),i=(r==null?void 0:r.defaultView)??(typeof window<"u"?window:null),s=(i==null?void 0:i.DOMParser)??(typeof DOMParser<"u"?DOMParser:null);if(!s)return console.warn("[super-editor] HTML list processing requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment. Skipping list flattening."),t;const o=new s,a=tye(o.parseFromString(t,"text/html"));let l;for(;l=GWe(a);)KWe(l,e);return a.body.innerHTML}function GWe(t){let e=t.querySelector("ol:not([data-list-id]), ul:not([data-list-id])");if(e)return e;const n=t.querySelectorAll("ol[data-list-id], ul[data-list-id]");for(const r of n){const i=Array.from(r.children).filter(o=>o.tagName.toLowerCase()==="li");if(i.length>1||r.querySelectorAll("ol, ul").length>0||i.length===1)return r}return null}function KWe(t,e){const n=t.ownerDocument,r=t.tagName.toLowerCase();let i=t.getAttribute("data-list-id");i||(i=Zr.getNewListId(e),Zr.generateNewListDefinition({numId:i,listType:r==="ol"?"orderedList":"bulletList",editor:e}));let s=Number(t.getAttribute("data-level"));Number.isNaN(s)&&(s=0);let o=t.parentElement;for(;o&&o!==n.body;)o.tagName&&o.tagName.toLowerCase()==="li"&&s++,o=o.parentElement;const a=Array.from(t.children).filter(d=>d.tagName.toLowerCase()==="li"),l=[];a.forEach(d=>{var w;const f=Array.from(d.querySelectorAll("ol, ul")),h=f.map(b=>({element:b.cloneNode(!0),parent:b.parentNode}));f.forEach(b=>b.parentNode.removeChild(b));let m=r==="ol"?"decimal":"bullet";try{const b=(w=Zr.getListDefinitionDetails)==null?void 0:w.call(Zr,{numId:i,level:s,editor:e});b!=null&&b.listNumberingType&&(m=b.listNumberingType)}catch{}const y=nye({li:d,rootNumId:i,level:s,listNumberingType:m});l.push(y),h.forEach(b=>{var A;b.element.setAttribute("data-level",s+1),((A=b.element.tagName)==null?void 0:A.toLowerCase())===r&&b.element.setAttribute("data-list-id",i),l.push(b.element)})});const c=t.parentNode,u=t.nextSibling;c.removeChild(t),l.forEach(d=>{c.insertBefore(d,u)})}function nye({li:t,rootNumId:e,level:n,listNumberingType:r}){const s=t.ownerDocument.createElement("p");return Array.from(t.attributes).forEach(o=>{!o.name.startsWith("data-num-")&&!o.name.startsWith("data-level")&&!o.name.startsWith("data-list-")&&s.setAttribute(o.name,o.value)}),s.setAttribute("data-num-id",e),s.setAttribute("data-level",String(n)),r&&s.setAttribute("data-list-numbering-type",r),Array.from(t.childNodes).forEach(o=>{if(o.tagName==="P"){Array.from(o.childNodes).forEach(a=>{s.appendChild(a.cloneNode(!0))});return}s.appendChild(o.cloneNode(!0))}),s}function XWe(t,e){const n=(e==null?void 0:e.defaultView)??(typeof window<"u"?window:null),r=(n==null?void 0:n.DOMParser)??(typeof DOMParser<"u"?DOMParser:null);if(!r)return console.warn("[super-editor] HTML list processing requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment. Skipping list unflattening."),t;const s=new r().parseFromString(t,"text/html"),o=[...s.body.children],a=[];let l=null;return o.forEach(c=>{if(c.tagName==="P"&&c.hasAttribute("data-num-id")){const d=c.getAttribute("data-num-id");l&&l.id===d?l.items.push(c):(l={id:d,items:[c]},a.push(l))}else l=null}),a.reverse().forEach(c=>{var m;const u=c.items;if(u.length===0)return;const d=u.map(y=>{const w=parseInt(y.getAttribute("data-level")||"0",10),b=y.getAttribute("data-list-numbering-type")||"",E=eqe(y.getAttribute("data-list-level"));return{element:y,level:w,numId:y.getAttribute("data-num-id"),listNumberingType:b,listLevel:E}}).filter(Boolean);if(d.length===0)return;const f=YWe({items:d});if(!f)return;const h=u[0];(m=h==null?void 0:h.parentNode)==null||m.insertBefore(f,h),u.forEach(y=>{var w;(w=y.parentNode)==null||w.removeChild(y)})}),s.body.innerHTML}function YWe({items:t}){if(!t.length)return null;const[e]=t,n=e.element.ownerDocument,r=ate(e.listNumberingType),i=n.createElement(r);e.numId&&i.setAttribute("data-list-id",e.numId),i.setAttribute("data-level",String(e.level??0)),lte(i,e.listLevel,0);const s=new Map;return t.forEach(o=>{const{element:a,level:l}=o,c=ZWe(a),u=nqe(c);if(l===0)i.append(u),s.set(0,u);else{const d=s.get(l-1);if(!d){i.append(u),s.set(l,u);return}const f=ate(o.listNumberingType);let h=JWe(d,f);h||(h=n.createElement(f),o.numId&&h.setAttribute("data-list-id",o.numId),d.append(h)),h.setAttribute("data-level",String(l)),lte(h,o.listLevel,l),h.append(u),s.set(l,u)}[...s.keys()].forEach(d=>{d>l&&s.delete(d)})}),i}function ZWe(t){const n=t.ownerDocument.createElement("li");return Array.from(t.childNodes).forEach(r=>{n.appendChild(r.cloneNode(!0))}),Array.from(t.attributes).forEach(r=>{tqe.has(r.name)||n.setAttribute(r.name,r.value)}),n}function JWe(t,e){const n=e.toLowerCase();return Array.from(t.children).find(r=>r.tagName&&r.tagName.toLowerCase()===n)}function ate(t){const e=t==null?void 0:t.toLowerCase();return!e||e==="bullet"||e==="image"||e==="none"?"ul":"ol"}function lte(t,e,n){var i;if(!t||((i=t.tagName)==null?void 0:i.toLowerCase())!=="ol")return;const r=QWe(e,n);r&&r>1&&!t.hasAttribute("start")&&t.setAttribute("start",String(r))}function QWe(t,e){if(!Array.isArray(t))return null;const n=t[e],r=Number(n);return Number.isFinite(r)?r:null}function eqe(t){if(!t)return null;try{const e=JSON.parse(t);return Array.isArray(e)?e.map(n=>Number(n)):null}catch{return null}}const tqe=new Set(["data-num-id","data-level","data-num-fmt","data-lvl-text","data-list-level","data-marker-type","data-list-numbering-type"]);function nqe(t){return["data-num-id","data-level","data-num-fmt","data-lvl-text","data-list-level","data-marker-type","data-list-numbering-type","aria-label"].forEach(n=>{t.removeAttribute(n)}),t}const rqe=(t,e,n)=>{const r=iV(t),i=sV(r).innerHTML,s=document.createElement("div");s.innerHTML=i;const o=lqe(s),a=iqe(o,e);let l=ka.fromSchema(e.schema).parse(a);l=_x(l),s.remove();const{dispatch:c}=e.view;return c?(c(n.state.tr.replaceSelectionWith(l,!0)),!0):!1};function iqe(t,e){let n;for(;n=sqe(t);)oqe(n,e);return t}function sqe(t){let e=t.querySelector("ol:not([data-list-id]), ul:not([data-list-id])");return e||null}function oqe(t,e){const n=t.tagName.toLowerCase(),r=cqe(t),i=Array.from(t.children).filter(d=>{var f;return((f=d.tagName)==null?void 0:f.toLowerCase())==="li"});if(!i.length)return;const s={},o={},a=Zr.getNewListId(e),l=[];i.forEach(d=>{var T;const f=uqe(d,r),h=dqe(d,n),m=$We.get(h)||(n==="ol"?"decimal":"bullet"),y=zWe(h,f+1,e);o[f]==null&&(o[f]=fqe({li:d,listElem:t,level:f,baseLevel:r}));const w=hqe(s,f,o[f]),b=pqe(f,s),E=nye({li:d.childNodes.length&&d.childNodes[0].tagName==="P"?d.childNodes[0]:d,rootNumId:a,level:f,listNumberingType:m});E.setAttribute("data-num-fmt",m),E.setAttribute("data-lvl-text",y),E.setAttribute("data-list-level",JSON.stringify(b.length?b:[w])),Zr.generateNewListDefinition({numId:a,listType:m==="bullet"?"bulletList":"orderedList",editor:e,fmt:m,level:f.toString(),start:o[f],text:y}),l.push(E);const x=aqe([d.nextSibling])[0];if(x){const R=x.cloneNode(!0);R.setAttribute("data-level",String(f+1)),l.push(R),["OL","UL"].includes((T=d.nextSibling)==null?void 0:T.tagName)&&d.nextSibling.remove()}});const c=t.parentNode,u=t.nextSibling;c.removeChild(t),l.forEach(d=>{c.insertBefore(d,u)})}function aqe(t){let e=[];const n=Array.from(t).filter(r=>r!==null);for(let r of n)(r.tagName==="OL"||r.tagName==="UL")&&e.push(r);return e}function lqe(t){const e=t.cloneNode(!0),n=Array.from(e.querySelectorAll("ol:not(ol ol):not(ul ol)")||[]),r=n.find(s=>!s.getAttribute("start"))||n[0];return n.some(s=>s.getAttribute("start")!==null)&&r&&n.filter(o=>o!==r&&o.getAttribute("start")!==null).sort((o,a)=>Number(o.getAttribute("start"))-Number(a.getAttribute("start"))).forEach(o=>{r.append(...o.childNodes),o.remove()}),e}function cqe(t){const e=Number(t.getAttribute("data-level"));if(!Number.isNaN(e))return e;let n=0,r=t.parentElement;for(;r&&r.tagName;)r.tagName.toLowerCase()==="li"&&n++,r=r.parentElement;return n}function uqe(t,e){const n=Number(t.getAttribute("aria-level"));return Number.isNaN(n)?e:Math.max(n-1,e)}function dqe(t,e){var n;return((n=t.style)==null?void 0:n["list-style-type"])||(e==="ol"?"decimal":"bullet")}function fqe({li:t,listElem:e,level:n,baseLevel:r}){const i=Number(t.getAttribute("value"));if(!Number.isNaN(i))return i;if(n===r){const s=Number(e.getAttribute("start"));if(!Number.isNaN(s))return s}return 1}function hqe(t,e,n){const r=Number(e);return Object.keys(t).forEach(i=>{Number(i)>r&&delete t[i]}),t[r]==null?t[r]=Number(n)||1:t[r]+=1,t[r]}function pqe(t,e){const n=Number(t);if(Number.isNaN(n))return[];const r=[];for(let i=0;i<=n;i++)e[i]!=null&&r.push(e[i]);return r}class mqe{constructor(e){Mt(this,"match");Mt(this,"handler");this.match=e.match,this.handler=e.handler}}const gqe=(t,e)=>{if(Mpe(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[super-editor warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r},e9=t=>{var d;const{editor:e,from:n,to:r,text:i,rules:s,plugin:o}=t,{view:a}=e;if(a.composing)return!1;const l=a.state.doc.resolve(n);if(l.parent.type.spec.code||(d=l.nodeBefore||l.nodeAfter)!=null&&d.marks.find(f=>f.type.spec.code))return!1;let c=!1;const u=QUe(l)+i;return s.forEach(f=>{if(c)return;const h=gqe(u,f.match);if(!h)return;const m=a.state.tr,y=eV(m,a.state),w={from:n-(h[0].length-i.length),to:r},{commands:b,chain:E,can:A}=new KN({editor:e,state:y});f.handler({state:y,range:w,match:h,commands:b,chain:E,can:A})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:n,to:r,text:i}),a.dispatch(m),c=!0)}),c},yqe=({editor:t,rules:e})=>{const n=new Mr({key:new ni("inputRulesPlugin"),state:{init(){return null},apply(r,i,s){const o=r.getMeta(n);if(o)return o;const a=r.getMeta("applyInputRules");return!!a&&setTimeout(()=>{var f,h;let{text:c}=a;if(typeof c!="string"){const m=((f=t==null?void 0:t.options)==null?void 0:f.document)??((h=t==null?void 0:t.options)==null?void 0:h.mockDocument)??(typeof document<"u"?document:null);if(!m){JUe("HTML conversion for input rules");return}c=ZUe(Nt.from(c),s.schema,m)}const{from:u}=a,d=u+c.length;e9({editor:t,from:u,to:d,text:c,rules:e,plugin:n})}),r.selectionSet||r.docChanged?null:i}},props:{handleTextInput(r,i,s,o){return e9({editor:t,from:i,to:s,text:o,rules:e,plugin:n})},handleKeyDown(r,i){if(i.key!=="Enter")return!1;const{$cursor:s}=r.state.selection;return s?e9({editor:t,from:s.pos,to:s.pos,text:`
`,rules:e,plugin:n}):!1},handlePaste(r,i,s){const a=i.clipboardData.getData("text/html");return s.content.content.filter(u=>u.type.name==="fieldAnnotation").length?!1:Eqe({editor:t,view:r},a)}},isInputRules:!0});return n};function bqe(t){return/class=["']?Mso|xmlns:o=["']?urn:schemas-microsoft-com|<!--\[if gte mso|<meta[^>]+name=["']?Generator["']?[^>]+Word/i.test(t)}function wqe(t){return/docs-internal-guid-/.test(t)}function vqe(t){for(let e=t.depth;e>=0;e--){const n=t.node(e);if(n.type.name==="paragraph")return{node:n,depth:e}}return{node:null,depth:-1}}function rye(t,e,n){let r;r=jg(t,e);let i=ka.fromSchema(e.schema).parse(r);i=_x(i);const{dispatch:s,state:o}=e.view;if(!s)return!1;const{$from:a}=o.selection,{node:l}=vqe(a),c=l!==null,u=i.childCount===1&&i.firstChild.type.name==="paragraph";if(c&&u){const d=i.firstChild.content,f=o.tr.replaceSelectionWith(d,!1);s(f)}else if(c){const d=new Ut(i.content,0,0),f=o.tr.replaceSelection(d);s(f)}else s(o.tr.replaceSelectionWith(i,!0));return!0}function jg(t,e,n){var o,a;const r=n??((o=e==null?void 0:e.options)==null?void 0:o.document)??((a=e==null?void 0:e.options)==null?void 0:a.mockDocument)??(typeof document<"u"?document:null),i=qWe(t,e,r),s=iV(i);return sV(s,void 0,r)}const iV=t=>t.replace(/font-size\s*:\s*([\d.]+)em/gi,(e,n)=>{const r=parseFloat(n);return`font-size: ${Math.round(r*12*100)/100}pt`});function xqe(t){return t.replace(/<o:p>.*?<\/o:p>/gi,"").replace(/&nbsp;/gi," ").replace(/<span[^>]*>\s*<\/span>/gi,"").replace(/<p[^>]*>\s*<\/p>/gi,"").trim()}function sV(t,e=["meta","svg","script","style","button"],n){const r=n??(typeof document<"u"?document:null);if(!r)return console.warn("[super-editor] HTML sanitization requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment. Skipping sanitization."),null;const i=r.createElement("div");i.innerHTML=t;const s=o=>{for(const a of[...o.children]){if(e.includes(a.tagName.toLowerCase())){a.remove();continue}a.hasAttribute("linebreaktype")&&a.removeAttribute("linebreaktype"),s(a)}};return s(i),i}function Eqe({editor:t,view:e},n){let r;switch(n?bqe(n)?r="word-html":wqe(n)?r="google-docs":r="browser-html":r="plain-text",r){case"plain-text":return!1;case"word-html":if(t.options.mode==="docx")return HWe(n,t,e);break;case"google-docs":return rqe(n,t,e);case"browser-html":return rye(n,t)}return!1}function b1(t,e,n={}){var o,a;const{isImport:r=!1}=n;let i;if(typeof t=="string"){const l=n.document??((o=e==null?void 0:e.options)==null?void 0:o.document)??((a=e==null?void 0:e.options)==null?void 0:a.mockDocument)??(typeof document<"u"?document:null),c=jg(KUe(t,l),e,l);r&&(c.dataset.superdocImport="true"),i=c}else i=t;let s=ka.fromSchema(e.schema).parse(i);return s=_x(s),s}function oV(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var hw=oV();function iye(t){hw=t}var tA={exec:()=>null};function Vr(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(qa.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var Sqe=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),qa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Aqe=/^(?:[ \t]*(?:\n|$))+/,Tqe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,kqe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,aC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Cqe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,aV=/(?:[*+-]|\d{1,9}[.)])/,sye=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,oye=Vr(sye).replace(/bull/g,aV).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_qe=Vr(sye).replace(/bull/g,aV).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),lV=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Nqe=/^[^\n]+/,cV=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Iqe=Vr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",cV).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Rqe=Vr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,aV).getRegex(),PR="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",uV=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Mqe=Vr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",uV).replace("tag",PR).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),aye=Vr(lV).replace("hr",aC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PR).getRegex(),Lqe=Vr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",aye).getRegex(),dV={blockquote:Lqe,code:Tqe,def:Iqe,fences:kqe,heading:Cqe,hr:aC,html:Mqe,lheading:oye,list:Rqe,newline:Aqe,paragraph:aye,table:tA,text:Nqe},cte=Vr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",aC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PR).getRegex(),Dqe={...dV,lheading:_qe,table:cte,paragraph:Vr(lV).replace("hr",aC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",cte).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PR).getRegex()},Oqe={...dV,html:Vr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",uV).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:tA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Vr(lV).replace("hr",aC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",oye).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Pqe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Fqe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,lye=/^( {2,}|\\)\n(?!\s*$)/,Bqe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,FR=/[\p{P}\p{S}]/u,fV=/[\s\p{P}\p{S}]/u,cye=/[^\s\p{P}\p{S}]/u,jqe=Vr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,fV).getRegex(),uye=/(?!~)[\p{P}\p{S}]/u,$qe=/(?!~)[\s\p{P}\p{S}]/u,zqe=/(?:[^\s\p{P}\p{S}]|~)/u,Hqe=Vr(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Sqe?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),dye=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Vqe=Vr(dye,"u").replace(/punct/g,FR).getRegex(),Uqe=Vr(dye,"u").replace(/punct/g,uye).getRegex(),fye="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Wqe=Vr(fye,"gu").replace(/notPunctSpace/g,cye).replace(/punctSpace/g,fV).replace(/punct/g,FR).getRegex(),qqe=Vr(fye,"gu").replace(/notPunctSpace/g,zqe).replace(/punctSpace/g,$qe).replace(/punct/g,uye).getRegex(),Gqe=Vr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,cye).replace(/punctSpace/g,fV).replace(/punct/g,FR).getRegex(),Kqe=Vr(/\\(punct)/,"gu").replace(/punct/g,FR).getRegex(),Xqe=Vr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Yqe=Vr(uV).replace("(?:-->|$)","-->").getRegex(),Zqe=Vr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Yqe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),QN=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Jqe=Vr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",QN).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hye=Vr(/^!?\[(label)\]\[(ref)\]/).replace("label",QN).replace("ref",cV).getRegex(),pye=Vr(/^!?\[(ref)\](?:\[\])?/).replace("ref",cV).getRegex(),Qqe=Vr("reflink|nolink(?!\\()","g").replace("reflink",hye).replace("nolink",pye).getRegex(),ute=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,hV={_backpedal:tA,anyPunctuation:Kqe,autolink:Xqe,blockSkip:Hqe,br:lye,code:Fqe,del:tA,emStrongLDelim:Vqe,emStrongRDelimAst:Wqe,emStrongRDelimUnd:Gqe,escape:Pqe,link:Jqe,nolink:pye,punctuation:jqe,reflink:hye,reflinkSearch:Qqe,tag:Zqe,text:Bqe,url:tA},eGe={...hV,link:Vr(/^!?\[(label)\]\((.*?)\)/).replace("label",QN).getRegex(),reflink:Vr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",QN).getRegex()},tF={...hV,emStrongRDelimAst:qqe,emStrongLDelim:Uqe,url:Vr(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ute).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Vr(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ute).getRegex()},tGe={...tF,br:Vr(lye).replace("{2,}","*").getRegex(),text:Vr(tF.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},v5={normal:dV,gfm:Dqe,pedantic:Oqe},LE={normal:hV,gfm:tF,breaks:tGe,pedantic:eGe},nGe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dte=t=>nGe[t];function Wd(t,e){if(e){if(qa.escapeTest.test(t))return t.replace(qa.escapeReplace,dte)}else if(qa.escapeTestNoEncode.test(t))return t.replace(qa.escapeReplaceNoEncode,dte);return t}function fte(t){try{t=encodeURI(t).replace(qa.percentDecode,"%")}catch{return null}return t}function hte(t,e){var s;let n=t.replace(qa.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(qa.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(qa.slashPipe,"|");return r}function DE(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function rGe(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function pte(t,e,n,r,i){let s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function iGe(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var eI=class{constructor(t){Mt(this,"options");Mt(this,"rules");Mt(this,"lexer");this.options=t||hw}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:DE(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=iGe(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=DE(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:DE(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=DE(e[0],`
`).split(`
`),r="",i="",s=[];for(;n.length>0;){let o=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;let f=s.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let h=f,m=h.raw+`
`+n.join(`
`),y=this.blockquote(m);s[s.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,i=i.substring(0,i.length-h.text.length)+y.text;break}else if((f==null?void 0:f.type)==="list"){let h=f,m=h.raw+`
`+n.join(`
`),y=this.list(m);s[s.length-1]=y,r=r.substring(0,r.length-f.raw.length)+y.raw,i=i.substring(0,i.length-h.raw.length)+y.raw,n=m.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),o=!1;for(;t;){let l=!1,c="",u="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),f=t.split(`
`,1)[0],h=!d.trim(),m=0;if(this.options.pedantic?(m=2,u=d.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=d.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(m),E=this.rules.other.hrRegex(m),A=this.rules.other.fencesBeginRegex(m),x=this.rules.other.headingBeginRegex(m),T=this.rules.other.htmlBeginRegex(m);for(;t;){let R=t.split(`
`,1)[0],k;if(f=R,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),k=f):k=f.replace(this.rules.other.tabCharGlobal,"    "),A.test(f)||x.test(f)||T.test(f)||b.test(f)||E.test(f))break;if(k.search(this.rules.other.nonSpaceChar)>=m||!f.trim())u+=`
`+k.slice(m);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(d)||x.test(d)||E.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),c+=R+`
`,t=t.substring(R.length+1),d=k.slice(m)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let y=null,w;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(w=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!y,checked:w,loose:!1,text:u,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){var o;let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=hte(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<n.length;a++)s.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:s.align[a]});for(let a of i)s.rows.push(hte(a,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=DE(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=rGe(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),pte(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return pte(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...r[0]].length-1,s,o,a=i,l=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+i);(r=c.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){a+=o;continue}else if((r[5]||r[6])&&i%3&&!((i+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let u=[...r[0]][0].length,d=t.slice(0,i+r.index+u+o);if(Math.min(i,o)%2){let h=d.slice(1,-1);return{type:"em",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=e[0],i="mailto:"+r;else{let s;do s=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(s!==e[0]);r=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Fu=class nF{constructor(e){Mt(this,"tokens");Mt(this,"options");Mt(this,"state");Mt(this,"tokenizer");Mt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||hw,this.options.tokenizer=this.options.tokenizer||new eI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:qa,block:v5.normal,inline:LE.normal};this.options.pedantic?(n.block=v5.pedantic,n.inline=LE.pedantic):this.options.gfm&&(n.block=v5.gfm,this.options.breaks?n.inline=LE.breaks:n.inline=LE.gfm),this.tokenizer.rules=n}static get rules(){return{block:v5,inline:LE}}static lex(e,n){return new nF(n).lex(e)}static lexInline(e,n){return new nF(n).inlineTokens(e)}lex(e){e=e.replace(qa.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(qa.tabCharGlobal,"    ").replace(qa.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,u=e.slice(1),d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var l,c,u,d,f;let r=e,i=null;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)h.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let o=!1,a="";for(;e;){o||(a=""),o=!1;let h;if((d=(u=this.options.extensions)==null?void 0:u.inline)!=null&&d.some(y=>(h=y.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.escape(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.tag(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.link(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(h.raw.length);let y=n.at(-1);h.type==="text"&&(y==null?void 0:y.type)==="text"?(y.raw+=h.raw,y.text+=h.text):n.push(h);continue}if(h=this.tokenizer.emStrong(e,r,a)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.codespan(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.br(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.del(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.autolink(e)){e=e.substring(h.raw.length),n.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(e))){e=e.substring(h.raw.length),n.push(h);continue}let m=e;if((f=this.options.extensions)!=null&&f.startInline){let y=1/0,w=e.slice(1),b;this.options.extensions.startInline.forEach(E=>{b=E.call({lexer:this},w),typeof b=="number"&&b>=0&&(y=Math.min(y,b))}),y<1/0&&y>=0&&(m=e.substring(0,y+1))}if(h=this.tokenizer.inlineText(m)){e=e.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(a=h.raw.slice(-1)),o=!0;let y=n.at(-1);(y==null?void 0:y.type)==="text"?(y.raw+=h.raw,y.text+=h.text):n.push(h);continue}if(e){let y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return n}},tI=class{constructor(t){Mt(this,"options");Mt(this,"parser");this.options=t||hw}space(t){return""}code({text:t,lang:e,escaped:n}){var s;let r=(s=(e||"").match(qa.notSpaceStart))==null?void 0:s[0],i=t.replace(qa.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Wd(r)+'">'+(n?i:Wd(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Wd(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let o=0;o<t.items.length;o++){let a=t.items[o];r+=this.listitem(a)}let i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){var n;let e="";if(t.task){let r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Wd(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Wd(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),i=fte(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+Wd(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=fte(t);if(i===null)return Wd(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${Wd(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Wd(t.text)}},pV=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Bu=class rF{constructor(e){Mt(this,"options");Mt(this,"renderer");Mt(this,"textRenderer");this.options=e||hw,this.options.renderer=this.options.renderer||new tI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new pV}static parse(e,n){return new rF(n).parse(e)}static parseInline(e,n){return new rF(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},E_,oS=(E_=class{constructor(t){Mt(this,"options");Mt(this,"block");this.options=t||hw}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Fu.lex:Fu.lexInline}provideParser(){return this.block?Bu.parse:Bu.parseInline}},Mt(E_,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Mt(E_,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),E_),sGe=class{constructor(...t){Mt(this,"defaults",oV());Mt(this,"options",this.setOptions);Mt(this,"parse",this.parseMarkdown(!0));Mt(this,"parseInline",this.parseMarkdown(!1));Mt(this,"Parser",Bu);Mt(this,"Renderer",tI);Mt(this,"TextRenderer",pV);Mt(this,"Lexer",Fu);Mt(this,"Tokenizer",eI);Mt(this,"Hooks",oS);this.use(...t)}walkTokens(t,e){var r,i;let n=[];for(let s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{let o=s;for(let a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(let a of o.rows)for(let l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{let o=s;n=n.concat(this.walkTokens(o.items,e));break}default:{let o=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{let l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){let i=this.defaults.renderer||new tI(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new eI(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new oS;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=n.hooks[o],l=i[o];oS.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async&&oS.passThroughHooksRespectAsync.has(s))return(async()=>{let d=await a.call(i,c);return l.call(i,d)})();let u=a.call(i,c);return l.call(i,u)}:i[o]=(...c)=>{if(this.defaults.async)return(async()=>{let d=await a.apply(i,c);return d===!1&&(d=await l.apply(i,c)),d})();let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Fu.lex(t,e??this.defaults)}parser(t,e){return Bu.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},i={...this.defaults,...r},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let o=i.hooks?await i.hooks.preprocess(e):e,a=await(i.hooks?await i.hooks.provideLexer():t?Fu.lex:Fu.lexInline)(o,i),l=i.hooks?await i.hooks.processAllTokens(a):a;i.walkTokens&&await Promise.all(this.walkTokens(l,i.walkTokens));let c=await(i.hooks?await i.hooks.provideParser():t?Bu.parse:Bu.parseInline)(l,i);return i.hooks?await i.hooks.postprocess(c):c})().catch(s);try{i.hooks&&(e=i.hooks.preprocess(e));let o=(i.hooks?i.hooks.provideLexer():t?Fu.lex:Fu.lexInline)(e,i);i.hooks&&(o=i.hooks.processAllTokens(o)),i.walkTokens&&this.walkTokens(o,i.walkTokens);let a=(i.hooks?i.hooks.provideParser():t?Bu.parse:Bu.parseInline)(o,i);return i.hooks&&(a=i.hooks.postprocess(a)),a}catch(o){return s(o)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+Wd(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},jb=new sGe;function li(t,e){return jb.parse(t,e)}li.options=li.setOptions=function(t){return jb.setOptions(t),li.defaults=jb.defaults,iye(li.defaults),li};li.getDefaults=oV;li.defaults=hw;li.use=function(...t){return jb.use(...t),li.defaults=jb.defaults,iye(li.defaults),li};li.walkTokens=function(t,e){return jb.walkTokens(t,e)};li.parseInline=jb.parseInline;li.Parser=Bu;li.parser=Bu.parse;li.Renderer=tI;li.TextRenderer=pV;li.Lexer=Fu;li.lexer=Fu.lex;li.Tokenizer=eI;li.Hooks=oS;li.parse=li;li.options;li.setOptions;li.use;li.walkTokens;li.parseInline;Bu.parse;Fu.lex;li.use({breaks:!1,gfm:!0});function mV(t,e,n={}){const r=mye(t);return b1(r,e,n)}function mye(t){return li.parse(t,{async:!1}).replace(/<\/p>\n<ul>/g,`</p>
<p>&nbsp;</p>
<ul>`).replace(/<\/p>\n<ol>/g,`</p>
<p>&nbsp;</p>
<ol>`).replace(/<\/ul>\n<h/g,`</ul>
<p>&nbsp;</p>
<h`).replace(/<\/ol>\n<h/g,`</ol>
<p>&nbsp;</p>
<h`)}const gye=t=>{var w,b,E,A;const{node:{attrs:e={}},tableCell:n,imageSize:r}=t;let i=e.rId;const s=e.originalSrc||e.src||e.imageSrc,{originalWidth:o,originalHeight:a}=oGe(s);let l;t.node.type==="image"?s!=null&&s.startsWith("data:")?l=GUe(s):l=s==null?void 0:s.split("/").pop():l=e.fieldId,l=tte(l);let c=e.size?{w:xs(e.size.width),h:xs(e.size.height)}:r;if(o&&a){const x=In(c.w),T=In(c.h),{scaledWidth:R,scaledHeight:k}=aGe(o,a,x,T);c={w:xs(R),h:xs(k)}}if(n){const x=n.attrs.colwidth.reduce((L,M)=>L+M,0),T=((w=n.attrs.cellMargins)==null?void 0:w.left)||8,R=((b=n.attrs.cellMargins)==null?void 0:b.right)||8,k=xs(x-(T+R)),{width:_,height:N}=lGe(c.w,c.h,k);_&&N&&(c={w:_,h:N})}if(i){const T=(((E=t.converter)==null?void 0:E.convertedXml)||{})["word/_rels/document.xml.rels"],R=(A=T==null?void 0:T.elements)==null?void 0:A.find(N=>N.name==="Relationships"),k=R==null?void 0:R.elements.find(N=>N.attributes.Id===i),_=s==null?void 0:s.split("word/")[1];k||cGe(t,i,_)}else if(t.node.type==="image"&&!i){const x=s==null?void 0:s.split("word/")[1];i=mte(t,x)}else if(t.node.type==="fieldAnnotation"&&!i){const x=s==null?void 0:s.split(";")[0].split("/")[1];if(!x)return wV(t);const T=tte(e.hash,wa(4)),k=`media/${`${l}_${T}.${x}`}`,_=`word/${k}`;i=mte(t,k),t.media[_]=s}const u=e.originalPadding||{distT:0,distB:0,distL:0,distR:0},d={},f={l:0,t:0,r:0,b:0},h=e.transformData;h&&(h.rotation&&(d.rot=BBe(h.rotation)),h.verticalFlip&&(d.flipV="1"),h.horizontalFlip&&(d.flipH="1"),h.sizeExtension&&(f.l=xs(h.sizeExtension.left),f.t=xs(h.sizeExtension.top),f.r=xs(h.sizeExtension.right),f.b=xs(h.sizeExtension.bottom)));const m="http://schemas.openxmlformats.org/drawingml/2006/main",y="http://schemas.openxmlformats.org/drawingml/2006/picture";return{attributes:u,elements:[{name:"wp:extent",attributes:{cx:c.w,cy:c.h}},{name:"wp:effectExtent",attributes:f},{name:"wp:docPr",attributes:{id:e.id||0,name:e.alt||`Picture ${l}`}},{name:"wp:cNvGraphicFramePr",elements:[{name:"a:graphicFrameLocks",attributes:{"xmlns:a":m,noChangeAspect:1}}]},{name:"a:graphic",attributes:{"xmlns:a":m},elements:[{name:"a:graphicData",attributes:{uri:y},elements:[{name:"pic:pic",attributes:{"xmlns:pic":y},elements:[{name:"pic:nvPicPr",elements:[{name:"pic:cNvPr",attributes:{id:e.id||0,name:e.title||`Picture ${l}`}},{name:"pic:cNvPicPr",elements:[{name:"a:picLocks",attributes:{noChangeAspect:1,noChangeArrowheads:1}}]}]},{name:"pic:blipFill",elements:[{name:"a:blip",attributes:{"r:embed":i}},{name:"a:stretch",elements:[{name:"a:fillRect"}]}]},{name:"pic:spPr",attributes:{bwMode:"auto"},elements:[{name:"a:xfrm",attributes:d,elements:[{name:"a:ext",attributes:{cx:c.w,cy:c.h}},{name:"a:off",attributes:{x:0,y:0}}]},{name:"a:prstGeom",attributes:{prst:"rect"},elements:[{name:"a:avLst"}]},{name:"a:noFill"}]}]}]}]}]}};function oGe(t){if(!t)return{};const e=t.split(";")[0].split("/")[1];if(!t||e!=="png")return{originalWidth:void 0,originalHeight:void 0};let n=t.split(",")[1].slice(0,50),r=Uint8Array.from(atob(n),s=>s.charCodeAt(0)),i=new DataView(r.buffer,0,28);return{originalWidth:i.getInt32(16),originalHeight:i.getInt32(20)}}function aGe(t,e,n,r){let i=t,s=e,o=Math.min(n/t,r/e);return i=Math.round(i*o),s=Math.round(s*o),{scaledWidth:i,scaledHeight:s}}function lGe(t,e,n){if(t>n){let r=n/t,i=Math.round(e*r);return{width:n,height:i}}return{width:t,height:e}}function mte(t,e){const n="rId"+wa(),r={type:"element",name:"Relationship",attributes:{Id:n,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:e}};return t.relationships.push(r),n}function cGe(t,e,n){const r={type:"element",name:"Relationship",attributes:{Id:e,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:n}};t.relationships.push(r)}function uGe(t){const{node:e}=t,{drawingContent:n}=e.attrs,r={name:"w:drawing",elements:[...n?[...n.elements||[]]:[]]};return $p({name:"mc:AlternateContent",elements:[{name:"mc:Choice",attributes:{Requires:"wps"},elements:[r]}]})}function dGe(t){const{node:e}=t,{drawingContent:n}=e.attrs;if(n){const r={name:"w:drawing",elements:[...n.elements||[]]};return $p({name:"mc:AlternateContent",elements:[{name:"mc:Choice",attributes:{Requires:"wpg"},elements:[r]}]})}return $p({name:"w:drawing",elements:[]})}function yye({order:t,generated:e,original:n}){const r=pGe(e),i=fGe(n);return hGe(t,r,i)}function fGe(t=[]){const e=new Map;return t.forEach(n=>{if(!n)return;const{index:r,xml:i}=n;typeof r=="number"&&i&&i.name!=="wp:extent"&&e.set(r,Vi(i))}),e}function hGe(t=[],e,n){const r=[],i=new Set(t);return t.forEach((s,o)=>{if(s==="wp:extent"){const l=e.get("wp:extent")||[];l.length&&(r.push(l.shift()),l.length||e.delete("wp:extent"));return}if(n.has(o)){r.push(n.get(o)),n.delete(o),e.has(s)&&e.delete(s);return}const a=e.get(s)||[];a.length&&(r.push(a.shift()),a.length||e.delete(s))}),n.forEach(s=>r.push(s)),e.forEach((s,o)=>{i.has(o)||s.forEach(a=>r.push(a))}),r}function pGe(t=[]){const e=new Map;return t.forEach(n=>{if(!(n!=null&&n.name))return;const r=e.get(n.name)||[];r.push(Vi(n)),e.set(n.name,r)}),e}function mGe(t){var d,f,h,m,y,w,b,E,A,x;const{attrs:e}=t.node,n=[],r=Array.isArray(e.originalDrawingChildren)&&e.originalDrawingChildren.length>0,i=e.simplePos!==void 0||((d=e.originalAttributes)==null?void 0:d.simplePos)!==void 0;if(!r&&i&&n.push({name:"wp:simplePos",attributes:{x:((f=e.simplePos)==null?void 0:f.x)??0,y:((h=e.simplePos)==null?void 0:h.y)??0}}),!r&&e.anchorData){const T=[];e.marginOffset.horizontal!==void 0&&T.push({name:"wp:posOffset",elements:[{type:"text",text:xs(e.marginOffset.horizontal).toString()}]}),e.anchorData.alignH&&T.push({name:"wp:align",elements:[{type:"text",text:e.anchorData.alignH}]}),n.push({name:"wp:positionH",attributes:{relativeFrom:e.anchorData.hRelativeFrom},...T.length&&{elements:T}});const R=[];e.marginOffset.top!==void 0&&R.push({name:"wp:posOffset",elements:[{type:"text",text:xs(e.marginOffset.top).toString()}]}),e.anchorData.alignV&&R.push({name:"wp:align",elements:[{type:"text",text:e.anchorData.alignV}]}),n.push({name:"wp:positionV",attributes:{relativeFrom:e.anchorData.vRelativeFrom},...R.length&&{elements:R}})}const s=gye(t),o={...e.originalAttributes||{},...s.attributes||{}};o.relativeHeight==null&&(o.relativeHeight=1),((m=e.originalAttributes)==null?void 0:m.simplePos)===void 0&&i&&(o.simplePos="1");const a={name:`wp:wrap${((y=e.wrap)==null?void 0:y.type)||"None"}`};switch(r||(w=e.wrap)==null?void 0:w.type){case"Square":a.attributes={wrapText:e.wrap.attrs.wrapText},"distBottom"in(e.wrap.attrs||{})&&(a.attributes.distB=xs(e.wrap.attrs.distBottom)),"distLeft"in(e.wrap.attrs||{})&&(a.attributes.distL=xs(e.wrap.attrs.distLeft)),"distRight"in(e.wrap.attrs||{})&&(a.attributes.distR=xs(e.wrap.attrs.distRight)),"distTop"in(e.wrap.attrs||{})&&(a.attributes.distT=xs(e.wrap.attrs.distTop));break;case"TopAndBottom":{const T={};let R=!1;"distBottom"in(e.wrap.attrs||{})&&(T.distB=xs(e.wrap.attrs.distBottom),R=!0),"distTop"in(e.wrap.attrs||{})&&(T.distT=xs(e.wrap.attrs.distTop),R=!0),R&&(a.attributes=T);break}case"Through":case"Tight":{const T={};"distLeft"in(e.wrap.attrs||{})&&(T.distL=xs(e.wrap.attrs.distLeft)),"distRight"in(e.wrap.attrs||{})&&(T.distR=xs(e.wrap.attrs.distRight)),"distTop"in(e.wrap.attrs||{})&&(T.distT=xs(e.wrap.attrs.distTop)),"distBottom"in(e.wrap.attrs||{})&&(T.distB=xs(e.wrap.attrs.distBottom));const R=((b=e.wrap.attrs)==null?void 0:b.wrapText)||"bothSides";if(T.wrapText=R,Object.keys(T).length&&(a.attributes=T),(E=e.wrap.attrs)!=null&&E.polygon){const k=$Be(e.wrap.attrs.polygon);k&&(((A=e.wrap.attrs)==null?void 0:A.polygonEdited)!==void 0&&(k.attributes={...k.attributes||{},edited:String(e.wrap.attrs.polygonEdited)}),a.elements=[k])}break}case"None":o.behindDoc=(x=e.wrap.attrs)!=null&&x.behindDoc?"1":"0";break}const l=s.elements.findIndex(T=>T.name==="wp:effectExtent"),c=[...s.elements.slice(0,l+1),a,...s.elements.slice(l+1)],u=yye({order:e.drawingChildOrder||[],original:e.originalDrawingChildren||[],generated:[...n,...c]});return{name:"wp:anchor",attributes:o,elements:u}}const gGe="wp:anchor",yGe=["image","shapeGroup","vectorShape","contentBlock"],bGe=["distT","distB","distL","distR","allowOverlap","behindDoc","layoutInCell","locked","relativeHeight","simplePos","wp14:anchorId","wp14:editId"].map(t=>fn(t));function wGe(t){const{node:e}=t.extraParams;return!e||!e.name?null:qUe(t)}function vGe(t){const{node:e}=t;return!e||!e.type?null:mGe(t)}const xGe={xmlName:gGe,sdNodeOrKeyName:yGe,type:tt.translatorTypes.NODE,encode:wGe,decode:vGe,attributes:bGe},gV=tt.from(xGe);function EGe(t){const{node:e}=t.extraParams;return e.name!=="wp:inline"?null:H0e(e,t,!1)}function SGe(t){var o,a,l,c;const{attrs:e}=t.node,n=gye(t),r={...e.originalAttributes||{},...n.attributes||{}},i=(n==null?void 0:n.elements)||[],s=yye({order:((a=(o=t.node)==null?void 0:o.attrs)==null?void 0:a.drawingChildOrder)||[],original:((c=(l=t.node)==null?void 0:l.attrs)==null?void 0:c.originalDrawingChildren)||[],generated:i});return{name:"wp:inline",attributes:r,elements:s}}const AGe="wp:inline",TGe=["image","shapeGroup","vectorShape","contentBlock"],kGe=["distT","distB","distL","distR","wp14:anchorId","wp14:editId"].map(t=>fn(t));function CGe(t){const{node:e}=t.extraParams;return!e||!e.name?null:EGe(t)}function _Ge(t){const{node:e}=t;return!e||!e.type?null:SGe(t)}const NGe={xmlName:AGe,sdNodeOrKeyName:TGe,type:tt.translatorTypes.NODE,encode:CGe,decode:_Ge,attributes:kGe},yV=tt.from(NGe),IGe="w:drawing",RGe=[],MGe=[];function LGe(t){const n=t.nodes[0],r={"wp:anchor":gV,"wp:inline":yV},i=(n.elements||[]).reduce((s,o)=>{if(s)return s;const a=r[o.name];return a&&a.encode({...t,extraParams:{node:o}})||s},null);return i||{type:"passthroughBlock",attrs:{originalName:"w:drawing",originalXml:Vi(n)}}}function DGe(t){const{node:e}=t;if(!e||!e.type)return null;const r=(e.attrs.isAnchor?gV:yV).decode(t);return $p({name:"w:drawing",elements:[r]},[])}const OGe={xmlName:IGe,sdNodeOrKeyName:RGe,type:tt.translatorTypes.NODE,encode:LGe,decode:DGe,attributes:MGe},BR=tt.from(OGe);function bV(t,e,n){var d;const i=/^\s|\s$/.test(t)?"preserve":null,s=i?{"xml:space":i}:null,o=[],a=rC(e||[]),l=((d=n.extraParams)==null?void 0:d.runProperties)||{},c=wze([l,a]),u=E0.decode({node:{attrs:{runProperties:c}}});if(o.push({name:"w:t",elements:[{text:t,type:"text"}],attributes:s}),n){const{editor:f}=n,h=f.extensionService.extensions.filter(m=>m.isExternal===!0);e.forEach(m=>{const y=h.some(b=>{const E=b.name;return m.type===E});if(!y)return;let w="";Object.entries(m.attrs).forEach(([b,E])=>{E&&(w+=`${b}=${E};`)}),y&&(o.unshift({type:"element",name:"w:bookmarkStart",attributes:{"w:id":"5000","w:name":m.type+";"+w}}),o.push({type:"element",name:"w:bookmarkEnd",attributes:{"w:id":"5000"}}))})}return{name:"w:r",elements:u?[u,...o]:o}}var aS={exports:{}},PGe=aS.exports,gte;function FGe(){return gte||(gte=1,(function(t,e){(function(n){var r=e,i=t&&t.exports==r&&t,s=typeof Il=="object"&&Il;(s.global===s||s.window===s)&&(n=s);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,u={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},d=/["&'<>`]/g,f={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},h=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,m=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,w={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},b={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},E={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},A=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],x=String.fromCharCode,T={},R=T.hasOwnProperty,k=function(se,Q){return R.call(se,Q)},_=function(se,Q){for(var J=-1,K=se.length;++J<K;)if(se[J]==Q)return!0;return!1},N=function(se,Q){if(!se)return Q;var J={},K;for(K in Q)J[K]=k(se,K)?se[K]:Q[K];return J},L=function(se,Q){var J="";return se>=55296&&se<=57343||se>1114111?(Q&&D("character reference outside the permissible Unicode range"),""):k(E,se)?(Q&&D("disallowed character reference"),E[se]):(Q&&_(A,se)&&D("disallowed character reference"),se>65535&&(se-=65536,J+=x(se>>>10&1023|55296),se=56320|se&1023),J+=x(se),J)},M=function(se){return"&#x"+se.toString(16).toUpperCase()+";"},C=function(se){return"&#"+se+";"},D=function(se){throw Error("Parse error: "+se)},O=function(se,Q){Q=N(Q,O.options);var J=Q.strict;J&&m.test(se)&&D("forbidden code point");var K=Q.encodeEverything,re=Q.useNamedReferences,X=Q.allowUnsafeSymbols,me=Q.decimal?C:M,G=function(B){return me(B.charCodeAt(0))};return K?(se=se.replace(a,function(B){return re&&k(u,B)?"&"+u[B]+";":G(B)}),re&&(se=se.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),re&&(se=se.replace(c,function(B){return"&"+u[B]+";"}))):re?(X||(se=se.replace(d,function(B){return"&"+u[B]+";"})),se=se.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),se=se.replace(c,function(B){return"&"+u[B]+";"})):X||(se=se.replace(d,G)),se.replace(o,function(B){var z=B.charCodeAt(0),de=B.charCodeAt(1),Y=(z-55296)*1024+de-56320+65536;return me(Y)}).replace(l,G)};O.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var $=function(se,Q){Q=N(Q,$.options);var J=Q.strict;return J&&h.test(se)&&D("malformed character reference"),se.replace(y,function(K,re,X,me,G,B,z,de,Y){var ee,ae,ie,H,be,Te;return re?(be=re,w[be]):X?(be=X,Te=me,Te&&Q.isAttributeValue?(J&&Te=="="&&D("`&` did not start a character reference"),K):(J&&D("named character reference was not terminated by a semicolon"),b[be]+(Te||""))):G?(ie=G,ae=B,J&&!ae&&D("character reference was not terminated by a semicolon"),ee=parseInt(ie,10),L(ee,J)):z?(H=z,ae=de,J&&!ae&&D("character reference was not terminated by a semicolon"),ee=parseInt(H,16),L(ee,J)):(J&&D("named character reference was not terminated by a semicolon"),K)})};$.options={isAttributeValue:!1,strict:!1};var U=function(se){return se.replace(d,function(Q){return f[Q]})},W={version:"1.2.0",encode:O,decode:$,escape:U,unescape:$};if(r&&!r.nodeType)if(i)i.exports=W;else for(var ce in W)k(W,ce)&&(r[ce]=W[ce]);else n.he=W})(PGe)})(aS,aS.exports)),aS.exports}var BGe=FGe();const jGe=oH(BGe);function $Ge(t){var y;const{node:e,isFinalDoc:n,fieldsHighlightColor:r}=t,{attrs:i={}}=e,s=zGe(i.type,i.fieldType);if(!s)return{};let o,a,l=i.sdtId;if((i.type==="image"||i.type==="signature")&&!i.hash&&(i.hash=wa(4)),i.sdtId||(l=Sp()),n)return s(t);o=s(t),a=[o],i.type==="html"&&(a=[...o.elements[0].elements.filter(b=>b.name==="w:r")]),a=[...a];const c=qGe(r);c&&a.unshift(c);const u={displayLabel:i.displayLabel,defaultDisplayLabel:i.defaultDisplayLabel,fieldId:i.fieldId,fieldType:i.fieldType,fieldTypeShort:i.type,fieldColor:i.fieldColor,fieldMultipleImage:i.multipleImage,fieldFontFamily:i.fontFamily,fieldFontSize:i.fontSize,fieldTextColor:i.textColor,fieldTextHighlight:i.textHighlight,hash:i.hash},d=JSON.stringify(u),h=[{name:"w:alias",attributes:{"w:val":i.displayLabel==="undefined"||i.displayLabel===void 0?"":i.displayLabel}},{name:"w:tag",attributes:{"w:val":d}},{name:"w:id",attributes:{"w:val":l}}];if((y=i.sdtPr)!=null&&y.elements&&Array.isArray(i.sdtPr.elements)){const w=["w:alias","w:tag","w:id"],b=i.sdtPr.elements.filter(E=>E&&E.name&&!w.includes(E.name));h.push(...b)}return{name:"w:sdt",elements:[{name:"w:sdtPr",elements:h},{name:"w:sdtContent",elements:a}]}}function zGe(t,e){if(t==="text"&&e==="FILEUPLOADER")return null;const n={w:4286250,h:4286250},r={w:99e4,h:495e3};return{text:wV,image:s=>yte(s,n),signature:s=>yte(s,r),checkbox:HGe,html:VGe,link:UGe}[t]}function wV(t){const{node:{attrs:e={},marks:n=[]}}=t,r=bye(e);return bV(e.displayLabel,[...n,...r],t)}function yte(t,e){return BR.decode({...t,imageSize:e})}function HGe(t){const{node:{attrs:e={},marks:n=[]}}=t,r=jGe.decode(e.displayLabel);return bV(r,n,t)}function VGe(t){var m,y;const{node:{attrs:e={},marks:n=[]},editorSchema:r,editor:i}=t;let s=e.rawHtml||e.displayLabel;const o=sV(s,void 0,((m=i==null?void 0:i.options)==null?void 0:m.document)??((y=i==null?void 0:i.options)==null?void 0:y.mockDocument)),a=bye(e),l=[...n,...a];let c=yp.create({doc:ka.fromSchema(r).parse(o)});l.length&&(c=WGe(c,l));const u=c.doc.toJSON(),d=["bulletList","orderedList"],f=new Map;return c.doc.descendants(w=>{if(d.includes(w.type.name)){const b=w.firstChild,{attrs:E}=b,{level:A,numId:x}=E;if(f.has(x)){const T=f.get(x);b.attrs.numId=T}else{const T=Zr.changeNumIdSameAbstract(x,A,w.type.name,i);b.attrs.numId=T,f.set(x,T)}}}),{name:"htmlAnnotation",elements:hu({...t,node:u})}}function UGe(t){const{node:{attrs:e={},marks:n=[]}}=t;if(!e.linkUrl)return wV(t);const r={type:"text",text:e.linkUrl,marks:[...n,{type:"link",attrs:{href:e.linkUrl,history:!0,text:e.linkUrl}},{type:"textStyle",attrs:{color:"#467886"}}]};return iC.decode({...t,node:r})}function bye(t={}){const{fontFamily:e,fontSize:n,bold:r,underline:i,italic:s,textColor:o,textHighlight:a}=t,l=[];return e&&l.push({type:"fontFamily",attrs:{fontFamily:e}}),n&&l.push({type:"fontSize",attrs:{fontSize:n}}),r&&l.push({type:"bold",attrs:{}}),i&&l.push({type:"underline",attrs:{}}),s&&l.push({type:"italic",attrs:{}}),o&&l.push({type:"color",attrs:{color:o}}),a&&l.push({type:"highlight",attrs:{color:a}}),l}function WGe(t,e){const{tr:n,doc:r,schema:i}=t,s=["fontFamily","fontSize","highlight"];if(!e.some(d=>s.includes(d.type)))return t;const o=e.find(d=>d.type==="fontFamily"),a=e.find(d=>d.type==="fontSize"),l=e.find(d=>d.type==="highlight"),c=i.marks.textStyle,u=i.marks.highlight;return r.descendants((d,f)=>{if(!d.isText)return;const h=d.marks.find(y=>y.type.name==="textStyle"),m=d.marks.find(y=>y.type.name==="highlight");h?!(h!=null&&h.attrs.fontFamily)&&o?n.addMark(f,f+d.nodeSize,c.create({...h==null?void 0:h.attrs,...o.attrs})):!(h!=null&&h.attrs.fontSize)&&a&&n.addMark(f,f+d.nodeSize,c.create({...h==null?void 0:h.attrs,...a.attrs})):n.addMark(f,f+d.nodeSize,c.create({...o==null?void 0:o.attrs,...a==null?void 0:a.attrs})),m||n.addMark(f,f+d.nodeSize,u.create({...l==null?void 0:l.attrs}))}),t.apply(n)}function qGe(t){if(!t)return null;let e=t.trim();return/^#?([A-Fa-f0-9]{3}|[A-Fa-f0-9]{4}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/.test(e)?(e.startsWith("#")&&(e=e.slice(1)),{name:"w:rPr",elements:[{name:"w:shd",attributes:{"w:fill":`#${e}`,"w:color":"auto","w:val":"clear"}}]}):(console.warn(`Invalid HEX color provided to fieldsHighlightColor export param: ${t}`),null)}function GGe(t){const{node:e}=t,{attrs:n={}}=e,i=[{name:"w:sdtContent",elements:hu({...t,nodes:e.content})}],s=JSON.stringify({type:"documentSection",description:n.description}),o=KGe(n.id,n.title,s,n.sdtPr),{isLocked:a}=n;return a&&o.elements.push({name:"w:lock",attributes:{"w:val":"sdtContentLocked"}}),i.unshift(o),{name:"w:sdt",elements:i}}const KGe=(t,e,n,r)=>{const i=[{name:"w:id",attributes:{"w:val":t}},{name:"w:alias",attributes:{"w:val":e}},{name:"w:tag",attributes:{"w:val":n}}];if(r!=null&&r.elements&&Array.isArray(r.elements)){const s=["w:id","w:alias","w:tag","w:lock"],o=r.elements.filter(a=>a&&a.name&&!s.includes(a.name));i.push(...o)}return{name:"w:sdtPr",elements:i}};function XGe(t){const{node:e}=t,{attrs:n={}}=e,r=hu({...t,nodes:e.content});return{name:"w:sdt",elements:[YGe(n),{name:"w:sdtContent",elements:r}]}}function YGe(t){var l,c,u,d,f,h,m,y,w,b,E;const e=(c=(l=t.sdtPr)==null?void 0:l.elements)==null?void 0:c.find(A=>A.name==="w:docPartObj"),n=(f=(d=(u=e==null?void 0:e.elements)==null?void 0:u.find(A=>A.name==="w:docPartGallery"))==null?void 0:d.attributes)==null?void 0:f["w:val"],r=t.docPartGallery??n??null,i=t.id??((w=(y=(m=(h=t.sdtPr)==null?void 0:h.elements)==null?void 0:m.find(A=>A.name==="w:id"))==null?void 0:y.attributes)==null?void 0:w["w:val"])??"",s=t.docPartUnique??((b=e==null?void 0:e.elements)==null?void 0:b.some(A=>A.name==="w:docPartUnique"))??!1;if(r===null)return t.sdtPr?t.sdtPr:{name:"w:sdtPr",elements:[{name:"w:id",attributes:{"w:val":i}},{name:"w:docPartObj",elements:[]}]};const o=[{name:"w:docPartGallery",attributes:{"w:val":r}}];s&&o.push({name:"w:docPartUnique"});const a=[{name:"w:id",attributes:{"w:val":i}},{name:"w:docPartObj",elements:o}];if((E=t.sdtPr)!=null&&E.elements&&Array.isArray(t.sdtPr.elements)){const A=["w:id","w:docPartObj"],x=t.sdtPr.elements.filter(T=>T&&T.name&&!A.includes(T.name));a.push(...x)}return{name:"w:sdtPr",elements:a}}const ZGe=new Set(["w:hyperlink","w:ins","w:del"]);function iF(t){const e=Array.isArray(t)?t:[t],n=[];return e.forEach(r=>{if(r&&r.name!=="w:sdtPr"){if(r.name==="w:r"){n.push(r);return}if(r.name==="w:sdt"){const i=(r.elements||[]).find(s=>(s==null?void 0:s.name)==="w:sdtContent");i!=null&&i.elements&&n.push(...iF(i.elements));return}if(ZGe.has(r.name)){const i=iF(r.elements||[]);i.length&&n.push({...r,elements:i});return}r.name&&n.push({name:"w:r",type:"element",elements:r.elements||[r]})}}),n.filter(r=>Array.isArray(r.elements)&&r.elements.length>0)}function bte(t){const{node:e,isFinalDoc:n}=t,r=hu({...t,node:e}),i=Array.isArray(r)?r:[r];if(n){if((e==null?void 0:e.type)==="structuredContent")return iF(i);if((e==null?void 0:e.type)==="structuredContentBlock")return i.length===1?i[0]:i}const s={name:"w:sdtContent",elements:i};return{name:"w:sdt",elements:[JGe({node:e}),s]}}function JGe({node:t}){const{attrs:e={}}=t,n={name:"w:id",type:"element",attributes:{"w:val":e.id}},r={name:"w:alias",type:"element",attributes:{"w:val":e.alias}},i={name:"w:tag",type:"element",attributes:{"w:val":e.tag}},s=[];if(e.id&&s.push(n),e.alias&&s.push(r),e.tag&&s.push(i),e.sdtPr){const a=e.sdtPr.elements||[],l=["w:id","w:alias","w:tag"],c=a.filter(d=>!l.includes(d.name));return{name:"w:sdtPr",type:"element",elements:[...s,...c]}}return{name:"w:sdtPr",type:"element",elements:s}}const QGe="w:sdt",eKe=["fieldAnnotation","structuredContent","structuredContentBlock","documentSection"],tKe=[];function nKe(t){const n=t.nodes[0],{type:r,handler:i}=IVe(n);return!i||r==="unknown"?void 0:i(t)}function rKe(t){const{node:e}=t;if(!e||!e.type)return null;const n={fieldAnnotation:()=>$Ge(t),structuredContent:()=>bte(t),structuredContentBlock:()=>bte(t),documentSection:()=>GGe(t),documentPartObject:()=>XGe(t),default:()=>null};return(n[e.type]??n.default)()}const iKe={xmlName:QGe,sdNodeOrKeyName:eKe,type:tt.translatorTypes.NODE,encode:nKe,decode:rKe,attributes:tKe},my=tt.from(iKe);function sKe(t,{editorSchema:e}){var r;if(!t||!Array.isArray(t.content))return t;const n=t.content;for(let i=0;i<n.length;i++){const s=n[i];if(s){Array.isArray(s.content)||(s.content=[]);for(let o=0;o<s.content.length;o++){const a=s.content[o];if(!a)continue;const l=a.attrs||{};if(!l.rowspan||l.rowspan<=1)continue;const c=Math.min(l.rowspan,n.length-i);for(let u=1;u<c;u++){const d=n[i+u];if(!d)continue;Array.isArray(d.content)||(d.content=[]);const f=d.content[o];if((r=f==null?void 0:f.attrs)!=null&&r.continueMerge)continue;const h={type:a.type,content:[e.nodes.paragraph.createAndFill().toJSON()],attrs:{...a.attrs,rowspan:null,continueMerge:!0}};d.content.splice(o,0,h)}}}}return t}const wye=tt.from({xmlName:"w:bidiVisual",sdNodeOrKeyName:"rightToLeft",encode:({nodes:t})=>{var e;return vc(((e=t[0].attributes)==null?void 0:e["w:val"])??"1")},decode:({node:t})=>t.attrs.rightToLeft?{attributes:{}}:void 0}),vye=tt.from(fi("w:tblCaption","caption")),xye=tt.from(fi("w:tblDescription","description")),Eye=tt.from(pu("w:tblInd","tableIndent")),Sye=tt.from(fi("w:tblLayout","tableLayout","w:type")),Aye=tt.from({xmlName:"w:tblLook",sdNodeOrKeyName:"tblLook",attributes:["w:firstColumn","w:firstRow","w:lastColumn","w:lastRow","w:noHBand","w:noVBand"].map(t=>fn(t,null,vc,Bp)).concat([fn("w:val")]),encode:(t,e)=>Object.keys(e).length>0?e:void 0,decode:function({node:t},e){const n=this.decodeAttributes({node:{...t,attrs:t.attrs.tblLook||{}}});return Object.keys(n).length>0?{attributes:n}:void 0}}),Tye=tt.from(fi("w:tblOverlap","overlap")),kye=tt.from(fi("w:tblStyle","tableStyleId")),Cye=tt.from(fi("w:tblStyleColBandSize","tableStyleColBandSize")),_ye=tt.from(fi("w:tblStyleRowBandSize","tableStyleRowBandSize")),Nye=tt.from(pu("w:tblW","tableWidth")),Iye=tt.from({xmlName:"w:tblpPr",sdNodeOrKeyName:"floatingTableProperties",attributes:["w:leftFromText","w:rightFromText","w:topFromText","w:bottomFromText","w:tblpX","w:tblpY"].map(t=>fn(t,null,Pl,xc)).concat(["w:horzAnchor","w:vertAnchor","w:tblpXSpec","w:tblpYSpec"].map(t=>fn(t))),encode:(t,e)=>Object.keys(e).length>0?e:void 0,decode:function({node:t},e){const n=this.decodeAttributes({node:{...t,attrs:t.attrs.floatingTableProperties||{}}});return Object.keys(n).length>0?{attributes:n}:void 0}}),oKe=[Qme,Nge,ege,tge,Ige,nge],Rye=tt.from(vd("w:tblCellMar","cellMargins",oKe)),aKe=[wye,xR,eC,vye,zH,xye,Eye,Sye,Aye,Tye,kye,Cye,_ye,Nye,Iye,$H,Rye],jR=tt.from(vd("w:tblPr","tableProperties",aKe)),QA=tt.from(fi("w:gridCol","col","w:w",Pl,xc)),vV=100,lKe=t=>{if(t==null)return null;const e=typeof t=="string"?parseInt(t,10):t;return!Number.isFinite(e)||Number.isNaN(e)||e<=0?null:e},Mye=t=>{var n,r,i,s,o,a,l;const e=(l=(a=(o=(s=(i=(r=(n=t==null?void 0:t.editor)==null?void 0:n.schema)==null?void 0:r.nodes)==null?void 0:i.tableCell)==null?void 0:s.spec)==null?void 0:o.attrs)==null?void 0:a.colwidth)==null?void 0:l.default;if(Array.isArray(e)){const c=e.find(u=>typeof u=="number"&&Number.isFinite(u)&&u>0);if(c!=null)return c}else if(typeof e=="number"&&Number.isFinite(e)&&e>0)return e;return vV},cKe=t=>{var r,i,s,o,a,l;const e=(s=(i=(r=t==null?void 0:t.node)==null?void 0:r.attrs)==null?void 0:i.tableWidth)==null?void 0:s.width;if(typeof e=="number"&&e>0)return e;const n=(l=(a=(o=t==null?void 0:t.node)==null?void 0:o.attrs)==null?void 0:a.tableProperties)==null?void 0:l.tableWidth;if((n==null?void 0:n.value)!=null&&typeof n.value=="number"&&n.value>0){const{value:c,type:u}=n;if(!u||u==="auto"||u==="dxa")return Dr(c)}return null},uKe=(t,e,n)=>{const r=Math.max(e,1),i=Mye(t),s=cKe(t),o=Number.isFinite(i)&&i>0?i:vV;let a=o;typeof s=="number"&&s>0&&(a=s/r);const l=pc(a);return!Number.isFinite(l)||Number.isNaN(l)||l<=0?Math.max(pc(o),n):Math.max(l,n)},xV="w:tblGrid",Lye="grid",wte=pc(10),dKe=t=>{const{nodes:e}=t,n=e[0],r=EH({...t,nodes:[n]},{[QA.xmlName]:QA},!0);return{xmlName:xV,sdNodeOrKeyName:Lye,attributes:r}},fKe=t=>{var f;const{grid:e}=t.node.attrs||{},n=Array.isArray(e)?e:[],{firstRow:r={}}=t.extraParams||{},s=(((f=r.content)==null?void 0:f.filter(h=>h.type==="tableCell"))??[]).flatMap(h=>{var w,b;const m=Math.max(1,((w=h==null?void 0:h.attrs)==null?void 0:w.colspan)??1),y=(b=h.attrs)==null?void 0:b.colwidth;return Array.from({length:m}).map((E,A)=>Array.isArray(y)?y[A]:void 0)}),o=s.length,a=Math.max(o,n.length),l=uKe(t,a,wte),c=[],u=(h,{enforceMinimum:m=!1}={})=>{let y=typeof h=="string"?parseInt(h,10):h,w=m;(y==null||Number.isNaN(y)||y<=0)&&(y=l,w=!0);const b=Math.round(y),A=Math.max(b,w?wte:1),x=QA.decode({node:{type:QA.sdNodeOrKeyName,attrs:{col:A}}});x&&c.push(x)};for(let h=0;h<a;++h){const m=s[h],y=typeof m=="number"&&Number.isFinite(m)?m:Number(m),w=Number.isFinite(y)&&y>0,b=(n==null?void 0:n[h])||{},E=lKe(b.col),A=E!=null?Dr(E):null;let x,T=!1;E!=null?x=E:w?E!=null&&A!=null&&Math.abs(A-y)<=.5?x=E:x=pc(y):(x=l,T=!0),u(x,{enforceMinimum:T})}return{name:xV,attributes:{},elements:c}},hKe={xmlName:xV,sdNodeOrKeyName:Lye,encode:dKe,decode:fKe},EV=tt.from(hKe),pKe=12240,mKe=1440,gKe=pKe-2*mKe,yKe=pc(10),bKe=t=>t==null?null:t/50,wKe=()=>gKe,vKe=t=>{if(!t||typeof t.value!="number"||t.value<=0)return null;const{value:e,type:n}=t;if(!n||n==="auto")return null;if(n==="dxa")return Dr(e);if(n==="pct"){const r=bKe(e);if(r==null||r<=0)return null;const i=wKe()*r/100;return Dr(i)}return null},xKe=t=>{var e;return(e=t==null?void 0:t.elements)!=null&&e.length?t.elements.reduce((n,r)=>{var a,l,c;if(r.name!=="w:tc")return n;const i=(a=r.elements)==null?void 0:a.find(u=>u.name==="w:tcPr"),s=(l=i==null?void 0:i.elements)==null?void 0:l.find(u=>u.name==="w:gridSpan"),o=parseInt(((c=s==null?void 0:s.attributes)==null?void 0:c["w:val"])||"1",10);return n+(Number.isFinite(o)&&o>0?o:1)},0):0},Dye=t=>Math.max(Math.round(t),yKe),EKe=(t,e)=>Array.from({length:t},()=>({col:Dye(e)})),SKe=({params:t,rows:e,tableWidth:n,tableWidthMeasurement:r})=>{const i=e.find(f=>{var h;return(h=f.elements)==null?void 0:h.some(m=>m.name==="w:tc")}),s=xKe(i);if(!s)return null;const o=Mye(t),a=Number.isFinite(o)&&o>0?o:vV;let l;if(r){const f=vKe(r);f!=null&&(l=f)}l==null&&(n!=null&&n.width)&&n.width>0&&(l=n.width),l==null&&(l=a*s);const c=Math.max(l/s,a),u=Dye(pc(c)),d=Dr(u);return{grid:EKe(s,u),columnWidths:Array(s).fill(d)}},AKe="w:tbl",TKe="table",kKe=(t,e)=>{const{nodes:n}=t,r=n[0],i=r.elements.find(m=>m.name==="w:tblPr");if(i){const m=jR.encode({...t,nodes:[i]});e.tableProperties=m||{}}else e.tableProperties||(e.tableProperties={});const s=r.elements.find(m=>m.name==="w:tblGrid");if(s&&(e.grid=EV.encode({...t,nodes:[s]}).attributes),["tableStyleId","justification","tableLayout",["tableIndent",({value:m,type:y})=>({width:Dr(m),type:y})],["tableCellSpacing",({value:m,type:y})=>({w:String(m),type:y})]].forEach(m=>{let y,w;Array.isArray(m)?[y,w]=m:(y=m,w=b=>b),e.tableProperties[y]&&(e[y]=w(e.tableProperties[y]))}),e.tableCellSpacing&&(e.borderCollapse="separate"),e.tableProperties.tableWidth){const m=e.tableProperties.tableWidth,y=Dr(m.value);y!=null?e.tableWidth={width:y,type:m.type}:m.type==="auto"&&(e.tableWidth={width:0,type:m.type})}const o=Oye(e.tableProperties.borders||{}),a=Pye(e.tableStyleId,t)||{};e.borders={...a.borders,...o},e.tableProperties.cellMargins=a.cellMargins={...a.cellMargins,...e.tableProperties.cellMargins};const l=r.elements.filter(m=>m.name==="w:tr");let c=Array.isArray(e.grid)?e.grid.map(m=>Dr(m.col)):[];if(!c.length){const m=SKe({params:t,rows:l,tableWidth:e.tableWidth,tableWidthMeasurement:e.tableProperties.tableWidth});m&&(e.grid=m.grid,c=m.columnWidths)}const u=[],d=c.length,f=l.length,h=d>0?new Array(d).fill(0):[];return l.forEach((m,y)=>{var b;const w=VH.encode({...t,path:[...t.path||[],r],nodes:[m],extraParams:{row:m,table:r,rowBorders:e.borders,columnWidths:c,activeRowSpans:h.slice(),rowIndex:y,totalRows:f,totalColumns:d,_referencedStyles:a}});if(w&&(u.push(w),d>0)){const E=h.slice();for(let T=0;T<d;T++)h[T]>0&&(h[T]-=1);let A=0;const x=()=>{for(;A<d&&E[A]>0;)A+=1};x(),(b=w.content)==null||b.forEach(T=>{var _,N;x();const R=Math.max(1,((_=T.attrs)==null?void 0:_.colspan)||1),k=Math.max(1,((N=T.attrs)==null?void 0:N.rowspan)||1);if(k>1)for(let L=0;L<R&&A+L<d;L++){const M=A+L,C=k-1;C>0&&C>h[M]&&(h[M]=C)}A+=R,x()})}}),{type:"table",content:u,attrs:e}},CKe=(t,e)=>{var a,l;t.node=sKe(t.node,t);const{node:n}=t,r=hu(t),i=(a=n.content)==null?void 0:a.find(c=>c.type==="tableRow"),s=n.attrs.grid,o=EV.decode({...t,node:{...n,attrs:{...n.attrs,grid:s}},extraParams:{firstRow:i}});if(o&&r.unshift(o),(l=n.attrs)!=null&&l.tableProperties){const c={...n.attrs.tableProperties},u=jR.decode({...t,node:{...n,attrs:{...n.attrs,tableProperties:c}}});u&&r.unshift(u)}return{name:"w:tbl",attributes:e||{},elements:r}};function Oye(t){const e={};return Object.entries(t).forEach(([n,r])=>{const i={},s=r.color,o=r.size,a=r.val;s&&s!=="auto"&&(i.color=s.startsWith("#")?s:`#${s}`),o&&o!=="auto"&&(i.size=Ax(o)),a&&(i.val=a),e[n]=i}),e}function Pye(t,e){if(!t)return null;const n={},{docx:r}=e,i=r["word/styles.xml"],{elements:s}=i.elements[0],o=s.filter(h=>h.name==="w:style"),a=o.find(h=>h.attributes["w:styleId"]===t);if(!a)return null;n.name=a.elements.find(h=>h.name==="w:name");const l=a.elements.find(h=>h.name==="w:basedOn");let c;if(l!=null&&l.attributes){const h=o.find(m=>m.attributes["w:styleId"]===l.attributes["w:val"]);c=h?h.elements.find(m=>m.name==="w:tblPr"):{}}const u=a.elements.find(h=>h.name==="w:pPr");if(u){const h=u.elements.find(m=>m.name==="w:jc");h!=null&&h.attributes&&(n.justification=h.attributes["w:val"])}const d=a==null?void 0:a.elements.find(h=>h.name==="w:rPr");if(d){const h=d.elements.find(y=>y.name==="w:rFonts");if(h){const{"w:ascii":y,"w:hAnsi":w,"w:cs":b}=h.attributes;n.fonts={ascii:y,hAnsi:w,cs:b}}const m=d.elements.find(y=>y.name==="w:sz");m!=null&&m.attributes&&(n.fontSize=Bg(m.attributes["w:val"])+"pt")}const f=a.elements.find(h=>h.name==="w:tblPr");if(f&&f.elements){c&&c.elements&&(f.elements=[...c.elements,...f.elements]);const h=jR.encode({...e,nodes:[f]});if(h){const m=Oye(h.borders||{});(m||Object.keys(m).length)&&(n.borders=m);const y={};Object.entries(h.cellMargins||{}).forEach(([w,b])=>{(b==null?void 0:b.value)!=null&&(y[w]={value:b.value,type:b.type||"dxa"})}),Object.keys(y).length&&(n.cellMargins=y)}}return n}const _Ke={xmlName:AKe,sdNodeOrKeyName:TKe,type:tt.translatorTypes.NODE,encode:kKe,decode:CKe,attributes:[]},SV=tt.from(_Ke),NKe=t=>t["w:id"],IKe=t=>t.id,RKe=Object.freeze({xmlName:"w:id",sdName:"id",encode:NKe,decode:IKe}),MKe=t=>t["w:name"],LKe=t=>t.name,DKe=Object.freeze({xmlName:"w:name",sdName:"name",encode:MKe,decode:LKe}),OKe=t=>t["w:colFirst"],PKe=t=>t.colFirst,FKe=Object.freeze({xmlName:"w:colFirst",sdName:"colFirst",encode:OKe,decode:PKe}),BKe=t=>t["w:colLast"],jKe=t=>t.colLast,$Ke=Object.freeze({xmlName:"w:colLast",sdName:"colLast",encode:BKe,decode:jKe}),zKe=t=>t["w:displacedByCustomXml"],HKe=t=>t.displacedByCustomXml,VKe=Object.freeze({xmlName:"w:displacedByCustomXml",sdName:"displacedByCustomXml",encode:zKe,decode:HKe}),Fye=[RKe,DKe,FKe,$Ke,VKe],UKe="w:bookmarkStart",WKe="bookmarkStart",qKe=(t,e={})=>({type:"bookmarkStart",attrs:e}),GKe=(t,e={})=>{const n={name:"w:bookmarkStart",elements:[]};return e&&Object.keys(e).length&&(n.attributes=e),n},KKe={xmlName:UKe,sdNodeOrKeyName:WKe,type:tt.translatorTypes.NODE,encode:qKe,decode:GKe,attributes:Fye},$R=tt.from(KKe),XKe=t=>t["w:id"],YKe=t=>t.id,ZKe=Object.freeze({xmlName:"w:id",sdName:"id",encode:XKe,decode:YKe}),JKe=t=>t["w:displacedByCustomXml"],QKe=t=>t.displacedByCustomXml,eXe=Object.freeze({xmlName:"w:displacedByCustomXml",sdName:"displacedByCustomXml",encode:JKe,decode:QKe}),Bye=[ZKe,eXe],tXe="w:bookmarkEnd",nXe="bookmarkEnd",rXe=(t,e={})=>({type:"bookmarkEnd",attrs:e}),iXe=(t,e={})=>{const n={name:"w:bookmarkEnd",elements:[]};return e&&Object.keys(e).length&&(n.attributes=e),n},sXe={xmlName:tXe,sdNodeOrKeyName:nXe,type:tt.translatorTypes.NODE,encode:rXe,decode:iXe,attributes:Bye},AV=tt.from(sXe),oXe=t=>t==null?void 0:t["w:id"],aXe=Object.freeze({xmlName:"w:id",sdName:"w:id",encode:()=>{},decode:oXe}),lXe="w:commentRange",cXe="commentRange",uXe=t=>{const{node:e,comments:n,commentsExportType:r,exportedCommentDefs:i}=t;if(!e||!n||(i==null?void 0:i.length)===0||r==="clean")return;const s=e.attrs["w:id"],o=n.find(h=>h.commentId==s);if(!o)return;const a=o.parentCommentId,l=n.find(({commentId:h,importedId:m})=>h===a||m===a),c=(l==null?void 0:l.isInternal)||o.isInternal;if(r==="external"&&c||e.type!=="commentRangeStart"&&e.type!=="commentRangeEnd")return;const{type:u}=e,d=n.findIndex(h=>h.commentId===o.commentId);let f=dXe(u,d);if(u==="commentRangeEnd"){const h={name:"w:r",elements:[{name:"w:commentReference",attributes:{"w:id":String(d)}}]};f=[f,h]}return f},dXe=(t,e)=>({name:`w:${t}`,attributes:{"w:id":String(e)}}),jye=t=>{const e=`${cXe}${t}`,n=t==="Start";return{xmlName:`${lXe}${t}`,sdNodeOrKeyName:e,type:tt.translatorTypes.NODE,encode:({nodes:r})=>{const i=r==null?void 0:r[0];if(!i)return;const s=i.attributes?{...i.attributes}:{};return{type:n?"commentRangeStart":"commentRangeEnd",attrs:s}},decode:uXe,attributes:[aXe]}},TV=tt.from(jye("Start")),kV=tt.from(jye("End")),fXe=t=>t["w:id"],hXe=t=>t.id,pXe=Object.freeze({xmlName:"w:id",sdName:"id",encode:fXe,decode:hXe}),mXe=t=>t["w:edGrp"],gXe=t=>t.edGrp,yXe=Object.freeze({xmlName:"w:edGrp",sdName:"edGrp",encode:mXe,decode:gXe}),bXe=t=>t["w:ed"],wXe=t=>t.ed,vXe=Object.freeze({xmlName:"w:ed",sdName:"ed",encode:bXe,decode:wXe}),xXe=t=>Pl(t["w:colFirst"]),EXe=t=>xc(t.colFirst),SXe=Object.freeze({xmlName:"w:colFirst",sdName:"colFirst",encode:xXe,decode:EXe}),AXe=t=>Pl(t["w:colLast"]),TXe=t=>xc(t.colLast),kXe=Object.freeze({xmlName:"w:colLast",sdName:"colLast",encode:AXe,decode:TXe}),CXe=[pXe,yXe,vXe,SXe,kXe],$ye="w:permStart",_Xe="permStart",NXe=(t,e={})=>({type:"permStart",attrs:e}),IXe=(t,e={})=>{const n={name:$ye,elements:[]};return e&&Object.keys(e).length&&(n.attributes=e),n},RXe={xmlName:$ye,sdNodeOrKeyName:_Xe,type:tt.translatorTypes.NODE,encode:NXe,decode:IXe,attributes:CXe},CV=tt.from(RXe),MXe=t=>t["w:id"],LXe=t=>t.id,DXe=Object.freeze({xmlName:"w:id",sdName:"id",encode:MXe,decode:LXe}),OXe=t=>t["w:displacedByCustomXml"],PXe=t=>t.displacedByCustomXml,FXe=Object.freeze({xmlName:"w:displacedByCustomXml",sdName:"displacedByCustomXml",encode:OXe,decode:PXe}),BXe=[DXe,FXe],zye="w:permEnd",jXe="permEnd",$Xe=(t,e={})=>({type:"permEnd",attrs:e}),zXe=(t,e={})=>{const n={name:zye,elements:[]};return e&&Object.keys(e).length&&(n.attributes=e),n},HXe={xmlName:zye,sdNodeOrKeyName:jXe,type:tt.translatorTypes.NODE,encode:$Xe,decode:zXe,attributes:BXe},_V=tt.from(HXe),VXe="sd:pageReference",UXe="pageReference",WXe=t=>{var o;const{nodes:e=[],nodeListHandler:n}=t||{},r=e[0],i=n.handler({...t,nodes:r.elements});return{type:"pageReference",attrs:{instruction:((o=r.attributes)==null?void 0:o.instruction)||"",marksAsAttrs:r.marks||[]},content:i}},qXe=t=>{var s;const{node:e}=t,n=lC(((s=e.attrs)==null?void 0:s.marksAsAttrs)||[]),r=(e.content??[]).flatMap(o=>jp({...t,node:o}));return[{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"begin"}}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:instrText",attributes:{"xml:space":"preserve"},elements:[{type:"text",text:`${e.attrs.instruction}`}]}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"separate"}}]},...r,{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"end"}}]}]},GXe={xmlName:VXe,sdNodeOrKeyName:UXe,type:tt.translatorTypes.NODE,encode:WXe,decode:qXe},NV=tt.from(GXe),KXe="sd:tableOfContents",XXe="tableOfContents",YXe=t=>{var o;const{nodes:e=[],nodeListHandler:n}=t||{},r=e[0],i=n.handler({...t,nodes:r.elements||[]});return{type:"tableOfContents",attrs:{instruction:((o=r.attributes)==null?void 0:o.instruction)||""},content:i}},ZXe=t=>{var o;const{node:e}=t,n=e.content.map(a=>jp({...t,node:a})),r=[{name:"w:r",elements:[{name:"w:fldChar",attributes:{"w:fldCharType":"begin"},elements:[]}]},{name:"w:r",elements:[{name:"w:instrText",attributes:{"xml:space":"preserve"},elements:[{text:((o=e.attrs)==null?void 0:o.instruction)||"",type:"text",name:"#text",elements:[]}]}]},{name:"w:r",elements:[{name:"w:fldChar",attributes:{"w:fldCharType":"separate"},elements:[]}]}];if(n.length>0){const a=n[0];let l=0;if(a.elements){const c=a.elements.findIndex(u=>u.name==="w:pPr");l=c>=0?c+1:0}else a.elements=[];a.elements.splice(l,0,...r)}else n.push({name:"w:p",elements:r});const i=[{name:"w:r",elements:[{name:"w:fldChar",attributes:{"w:fldCharType":"end"},elements:[]}]}],s=n[n.length-1];return s.elements?s.elements.push(...i):s.elements=[...i],n},JXe={xmlName:KXe,sdNodeOrKeyName:XXe,type:tt.translatorTypes.NODE,encode:YXe,decode:ZXe},IV=tt.from(JXe),QXe="sd:autoPageNumber",eYe="page-number",tYe=t=>{var o;const{nodes:e=[]}=t||{},r=(o=e[0].elements)==null?void 0:o.find(a=>a.name==="w:rPr");return{type:"page-number",attrs:{marksAsAttrs:Db(r||{elements:[]})}}},nYe=t=>{var i;const{node:e}=t,n=lC(((i=e.attrs)==null?void 0:i.marksAsAttrs)||[]);return[{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"begin"}}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:instrText",attributes:{"xml:space":"preserve"},elements:[{type:"text",text:" PAGE"}]}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"separate"}}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"end"}}]}]},rYe={xmlName:QXe,sdNodeOrKeyName:eYe,type:tt.translatorTypes.NODE,encode:tYe,decode:nYe},RV=tt.from(rYe),iYe="sd:totalPageNumber",sYe="total-page-number",oYe=t=>{var o;const{nodes:e=[]}=t||{},r=(o=e[0].elements)==null?void 0:o.find(a=>a.name==="w:rPr");return{type:"total-page-number",attrs:{marksAsAttrs:Db(r||{elements:[]})}}},aYe=t=>{var i;const{node:e}=t,n=lC(((i=e.attrs)==null?void 0:i.marksAsAttrs)||[]);return[{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"begin"}}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:instrText",attributes:{"xml:space":"preserve"},elements:[{type:"text",text:" NUMPAGES"}]}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"separate"}}]},{name:"w:r",elements:[{name:"w:rPr",elements:n},{name:"w:fldChar",attributes:{"w:fldCharType":"end"}}]}]},lYe={xmlName:iYe,sdNodeOrKeyName:sYe,type:tt.translatorTypes.NODE,encode:oYe,decode:aYe},MV=tt.from(lYe);function Hye(t){return t?t.split(";").filter(e=>!!e.trim()).reduce((e,n)=>{const[r,i]=n.split(":").map(s=>s.trim());return r&&i&&(e[r]=i),e},{}):{}}function cYe({pNode:t,pict:e,params:n}){var c;const r=(c=e.elements)==null?void 0:c.find(u=>u.name==="v:rect"),i={},s=r.attributes||{};if(i.attributes=s,s.style){const u=Hye(s.style),d=uYe(u);d&&(i.style=d);const f={},h=s["o:hr"]==="t"||s["o:hrstd"]==="t";if(u.width!==void 0)if(h)f.width="100%";else{const m=vte(u.width);f.width=m}u.height!==void 0&&(f.height=vte(u.height)),Object.keys(f).length>0&&(i.size=f)}s.fillcolor&&(i.background=s.fillcolor);const o={};s["o:hralign"]&&(o.hralign=s["o:hralign"]),s["o:hrstd"]&&(o.hrstd=s["o:hrstd"]),s["o:hr"]&&(o.hr=s["o:hr"]),s.stroked&&(o.stroked=s.stroked),Object.keys(o).length>0&&(i.vmlAttributes=o),(s["o:hr"]==="t"||s["o:hrstd"]==="t")&&(i.horizontalRule=!0);const l=S2.encode({...n,nodes:[{...t,elements:t.elements.filter(u=>u.name!=="w:r")}]});return l.content=[{type:"contentBlock",attrs:i}],l}function vte(t){if(typeof t!="string")return t;if(t.endsWith("pt")){const n=t.replace("pt","");if(isNaN(Number(n)))return 0;const r=parseFloat(n);return Math.ceil(r*1.33)}if(t.endsWith("px")){const n=t.replace("px","");return isNaN(Number(n))?0:parseInt(n)}const e=parseFloat(t);return isNaN(e)?0:e}function uYe(t){let e="";for(const[n,r]of Object.entries(t))e+=`${n}: ${r};`;return e}const dYe='<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:cx="http://schemas.microsoft.com/office/drawing/2014/chartex" xmlns:cx1="http://schemas.microsoft.com/office/drawing/2015/9/8/chartex" xmlns:cx2="http://schemas.microsoft.com/office/drawing/2015/10/21/chartex" xmlns:cx3="http://schemas.microsoft.com/office/drawing/2016/5/9/chartex" xmlns:cx4="http://schemas.microsoft.com/office/drawing/2016/5/10/chartex" xmlns:cx5="http://schemas.microsoft.com/office/drawing/2016/5/11/chartex" xmlns:cx6="http://schemas.microsoft.com/office/drawing/2016/5/12/chartex" xmlns:cx7="http://schemas.microsoft.com/office/drawing/2016/5/13/chartex" xmlns:cx8="http://schemas.microsoft.com/office/drawing/2016/5/14/chartex" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:aink="http://schemas.microsoft.com/office/drawing/2016/ink" xmlns:am3d="http://schemas.microsoft.com/office/drawing/2017/model3d" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:oel="http://schemas.microsoft.com/office/2019/extlst" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:w15="http://schemas.microsoft.com/office/word/2012/wordml" xmlns:w16cex="http://schemas.microsoft.com/office/word/2018/wordml/cex" xmlns:w16cid="http://schemas.microsoft.com/office/word/2016/wordml/cid" xmlns:w16="http://schemas.microsoft.com/office/word/2018/wordml" xmlns:w16sdtdh="http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash" xmlns:w16se="http://schemas.microsoft.com/office/word/2015/wordml/symex" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 w15 w16se w16cid w16 w16cex w16sdtdh wp14"><w:body></w:body></w:document>',fYe=t=>JSON.parse(qA.xml2json(t,null,2)),hYe=(t,e=dYe)=>t["word/document.xml"]||fYe(e),pYe=t=>{const{nodes:e}=t,n=["w:drawing","w:p"];if(e.length===0||!n.includes(e[0].name))return{nodes:[],consumed:0};const r=e[0];let i;if(r.name==="w:drawing"?i=r:i=r.elements.find(l=>l.name==="w:drawing"),!i)return{nodes:[],consumed:0};const s={...t,nodes:[i]},o=BR.encode(s);return{nodes:o?[o]:[],consumed:1}},mYe={handlerName:"drawingNodeHandler",handler:pYe},gYe="w:del",yYe="trackDelete",bYe=[fn("w:id","id"),fn("w:date","date"),fn("w:author","author"),fn("w:authorEmail","authorEmail")],wYe=(t,e={})=>{const{nodeListHandler:n,extraParams:r={}}=t,{node:i}=r,s=n.handler({...t,insideTrackChange:!0,nodes:i.elements,path:[...t.path||[],i]});return e.importedAuthor=`${e.author} (imported)`,s.forEach(o=>{var a;o.marks=[],(a=o==null?void 0:o.content)!=null&&a[0]&&(o.content[0].marks===void 0&&(o.content[0].marks=[]),o.content[0].type==="text"&&o.content[0].marks.push({type:"trackDelete",attrs:e}))}),s};function vYe(t){const{node:e}=t;if(!e||!e.type)return null;const n=["trackInsert","trackFormat","trackDelete"],r=e.marks,i=r.find(l=>l.type==="trackDelete"),s=Gme(r);e.marks=r.filter(l=>!n.includes(l.type)),s&&e.marks.push(s);const o=jp({...t,node:e}),a=o.elements.find(l=>l.name==="w:t");return a.name="w:delText",{name:"w:del",attributes:{"w:id":i.attrs.id,"w:author":i.attrs.author,"w:authorEmail":i.attrs.authorEmail,"w:date":i.attrs.date},elements:[o]}}const xYe={xmlName:gYe,sdNodeOrKeyName:yYe,type:tt.translatorTypes.ATTRIBUTE,encode:wYe,decode:vYe,attributes:bYe},LV=tt.from(xYe),EYe=t=>(t==null?void 0:t.name)==="w:del"||(t==null?void 0:t.name)==="w:ins",Vye=t=>{var e,n;if(!t)return null;if(EYe(t))return t;if(t.name==="w:sdt"){const r=(e=t.elements)==null?void 0:e.find(i=>i.name==="w:sdtContent");if(!((n=r==null?void 0:r.elements)!=null&&n.length))return null;for(const i of r.elements){const s=Vye(i);if(s)return s}}return null},SYe=t=>{const{nodes:e}=t;if(e.length===0)return{nodes:[],consumed:0};const n=Vye(e[0]);if(!n)return{nodes:[],consumed:0};let r;const i={...t,nodes:[n]};switch(n.name){case"w:del":r=LV.encode({...i,extraParams:{...i.extraParams,node:n}});break;case"w:ins":r=ER.encode({...i,extraParams:{...i.extraParams,node:n}});break}return{nodes:r,consumed:1}},AYe={handlerName:"trackChangeNodeHandler",handler:SYe},TYe=wd("hyperlinkNodeHandler",iC),kYe=wd("runNodeHandler",LH),CYe="w:t",_Ye="text",NYe=[fn("xml:space","xmlSpace")],IYe=(t,e={})=>{var a,l,c,u;const{node:n}=t.extraParams,{elements:r,type:i,attributes:s}=n;let o;if(!r)return null;if(r.length===1){o=r[0].text;const d=(l=(a=t.converter)==null?void 0:a.documentAttributes)==null?void 0:l["xml:space"],f=e.xmlSpace??(s==null?void 0:s["xml:space"])??((u=(c=r[0])==null?void 0:c.attributes)==null?void 0:u["xml:space"])??d;f!=="preserve"&&typeof o=="string"&&(o=o.replace(/^[ \t\n\r]+/,"").replace(/[ \t\n\r]+$/,"")),o=o.replace(/\[\[sdspace\]\]/g,"");const h=/^[ \t\n\r]*$/.test(o);if(f!=="preserve"&&h)return null}else if(!r.length&&e.xmlSpace==="preserve")o=" ";else return null;return{type:"text",text:o,attrs:{type:i,attributes:s||{}},marks:[]}},RYe=t=>{var l,c;const{node:e,extraParams:n}=t;if(!e||!e.type)return null;const r=["trackDelete","trackInsert"],i=(l=e.marks)==null?void 0:l.find(u=>r.includes(u.type));if(i)switch(i.type){case"trackDelete":return LV.decode(t);case"trackInsert":return ER.decode(t)}if(((c=e.marks)==null?void 0:c.some(u=>u.type==="link"))&&!(n!=null&&n.linkProcessed))return iC.decode(t);const{text:o,marks:a=[]}=e;return bV(o,a,t)},MYe={xmlName:CYe,sdNodeOrKeyName:_Ye,type:tt.translatorTypes.NODE,encode:IYe,decode:RYe,attributes:NYe},DV=tt.from(MYe),LYe=t=>{const{nodes:e,insideTrackChange:n}=t;if(e.length===0||!(e[0].name==="w:t"||n&&e[0].name==="w:delText"))return{nodes:[],consumed:0};const r=e[0],i=DV.encode({...t,extraParams:{...t.extraParams||{},node:r}});return i?{nodes:[i],consumed:1}:{nodes:[],consumed:0}},DYe={handlerName:"textNodeHandler",handler:LYe},Uye=t=>{const{nodes:e}=t;if(e.length===0||e[0].name!=="w:p")return{nodes:[],consumed:0};const n=S2.encode(t);return{nodes:n?[n]:[],consumed:1}},OYe={handlerName:"paragraphNodeHandler",handler:Uye},PYe=t=>{const{nodes:e}=t;if(e.length===0||e[0].name!=="w:sdt")return{nodes:[],consumed:0};const n=my.encode(t);return n?{nodes:Array.isArray(n)?n:[n],consumed:1}:{nodes:[],consumed:0}},FYe={handlerName:"sdtNodeHandler",handler:PYe},BYe=Array.from(new Set([fw,NV,IV,RV,MV,Pme,Fme,Bme,eme,Jme,tme,nme,wye,AV,$R,SR,VN,zge,fme,vR,ame,jme,Mme,LV,kH,BR,ome,Ime,Ame,Tme,gme,DH,Nme,$me,Hge,Vge,QA,Cge,jge,$ge,Uge,Bge,xH,iC,rme,Lme,qme,zme,yme,ER,OH,PH,xR,Hme,Vme,Cme,Ume,hme,AR,Wme,bme,Dge,Kme,Xme,vme,Yme,Zme,wme,S2,sge,rge,_me,tC,ige,CV,_V,LH,lme,E0,cme,Rme,TR,my,xme,eC,mme,TH,oge,age,lge,cge,Sme,FH,sme,ume,dme,DV,wR,uge,SV,$H,vye,Rye,zH,xye,EV,Wge,Eye,Sye,Aye,Tye,jR,kye,Cye,_ye,Nye,Iye,jH,Lge,Pge,Oge,BH,kge,CH,Rge,VH,Mge,qge,HH,dge,fge,hge,kR,AH,Fge,Eme,pme,_ge,kme,Gge,Kge,Dme,pge,mge,gV,yV,TV,kV])),jYe=Object.freeze(BYe.reduce((t,e)=>{if(typeof e=="function")return t;const n=e==null?void 0:e.xmlName;return n&&(t[n]=e),t},{})),$Ye={...jYe},zYe=Object.freeze($Ye),HYe=new Set(["w:r","w:hyperlink","w:smartTag","w:fldSimple","w:proofErr","w:del","w:ins","w:p"]),xte=new Set(["m:oMathPara","m:oMath","m:t","m:r","m:ctrlPr","m:sSupPr","m:e","m:sup","m:sSup"]),VYe=new Set(["w:body","w:tbl","w:tc","w:tr"]),UYe=(t=[],e)=>{var r,i;const n=e??((r=t[t.length-1])==null?void 0:r.name);if(n&&xte.has(n))return!0;if(!Array.isArray(t)||t.length===0)return!1;for(let s=t.length-1;s>=0;s--){const o=(i=t[s])==null?void 0:i.name;if(o){if(xte.has(o)||HYe.has(o))return!0;if(VYe.has(o))return!1}}return!1},WYe=t=>{var c;const{nodes:e=[]}=t,n=e[0];if(!n)return{nodes:[],consumed:0};if(zYe[n.name]||n.name==="w:commentReference")return{nodes:[],consumed:0};const r=Vi(n)||{},i=r.elements,s=i?Vi(i):[],o=Array.isArray(n.elements)?n.elements:[];let a=[];if(o.length&&((c=t.nodeListHandler)!=null&&c.handler)){const u={...t,nodes:o,path:[...t.path||[],n]};a=t.nodeListHandler.handler(u)||[]}return s!=null&&s.length&&(r.elements=s),{nodes:[{type:UYe(t.path,n.name)?"passthroughInline":"passthroughBlock",attrs:{originalName:n.name,originalXml:r},marks:[],content:a}],consumed:1}},qYe={handlerName:"passthroughNodeHandler",handler:WYe},GYe=t=>{const{nodes:e}=t;if(e.length===0||e[0].name!=="w:br")return{nodes:[],consumed:0};const n=VN.encode(t);return n?{nodes:[n],consumed:1}:{nodes:[],consumed:0}},KYe={handlerName:"lineBreakNodeHandler",handler:GYe},XYe=t=>{var c,u,d;const{nodes:e,nodeListHandler:n,editor:r}=t;if(e.length===0||e[0].name!=="w:bookmarkStart")return{nodes:[],consumed:0};const i=e[0],s=((u=(c=r==null?void 0:r.extensionService)==null?void 0:c.extensions)==null?void 0:u.filter(f=>f.isExternal===!0))||[],o=(d=i.attributes["w:name"])==null?void 0:d.split(";")[0],a=s.find(f=>f.name===o);if(a){const f=e.findIndex(w=>w.name==="w:bookmarkEnd"&&w.attributes["w:id"]===i.attributes["w:id"]),h=e.slice(1,f),m={};i.attributes["w:name"].split(";").forEach(w=>{const[b,E]=w.split("=");b&&E&&(m[b]=E)});const y=n.handler({...t,nodes:h,path:[...t.path||[],i]});return y.forEach(w=>{w.marks.push({type:a.name,attrs:m})}),{nodes:y,consumed:y.length+2}}const l=$R.encode({...t,nodes:[i]});return l?{nodes:[l],consumed:1}:{nodes:[],consumed:0}},YYe=t=>{const{nodes:e}=t;if(!e.length||e[0].name!=="w:bookmarkStart")return{nodes:[],consumed:0};if(ZYe(e[0],t.editor))return XYe(t);const n=$R.encode(t);return n?{nodes:[n],consumed:1}:{nodes:[],consumed:0}},ZYe=(t,e)=>{var a;if(!(t!=null&&t.attributes)||!((a=e==null?void 0:e.extensionService)!=null&&a.extensions))return!1;const n=t.attributes["w:name"];if(!n||typeof n!="string")return!1;const[r,...i]=n.split(";");return!r||!e.extensionService.extensions.filter(l=>l.isExternal===!0).some(l=>l.name===r)?!1:i.some(l=>l&&l.includes("="))},JYe={handlerName:"w:bookmarkStartTranslator",handler:YYe},QYe=t=>{const{nodes:e}=t;if(!e.length||e[0].name!=="w:bookmarkEnd")return{nodes:[],consumed:0};const n=AV.encode(t);return n?{nodes:[n],consumed:1}:{nodes:[],consumed:0}},eZe={handlerName:"w:bookmarkEndTranslator",handler:QYe},tZe="mc:AlternateContent",t9={nodes:[],consumed:0},Wye=t=>(t==null?void 0:t.name)===tZe,nZe=t=>{const{elements:e}=Ome(t);return e||null},rZe=t=>{const{elements:e}=t||{};if(!(e!=null&&e.length))return null;let n=!1;const r=[];if(e.forEach(s=>{if(Wye(s)){const o=nZe(s);if(o){r.push(...o),n=!0;return}r.push(Vi(s));return}r.push(Vi(s))}),!n)return null;const i=Vi(t);return i.elements=r,i},iZe=t=>{const{nodes:e,nodeListHandler:n}=t;if(!(e!=null&&e.length))return t9;const[r]=e;if(Wye(r)){const o=r!=null&&r.type?r:{...r,type:"element"},a=fw.encode({...t,nodes:[o],extraParams:{...t.extraParams||{},node:o}});return a?{nodes:Array.isArray(a)?a:[a],consumed:1}:t9}const i=rZe(r);return i?{nodes:n.handler({...t,nodes:[i],path:[...t.path||[],i]}),consumed:1}:t9},sZe={handlerName:"alternateChoiceHandler",handler:iZe},oZe=wd("autoPageNumberHandler",RV),aZe=wd("autoTotalPageCountEntity",MV),lZe=wd("pageReferenceNodeHandler",NV),cZe=t=>{var a,l;const{nodes:e}=t;if(!e.length||e[0].name!=="w:p")return{nodes:[],consumed:0};const n=e[0],r=((a=n.elements)==null?void 0:a.filter(c=>c.name==="w:r"))||[];let i=null;for(const c of r){const u=(l=c.elements)==null?void 0:l.find(d=>d.name==="w:pict");if(u){i=u;break}}if(!i)return{nodes:[],consumed:0};const s=i,o=J_.encode({...t,extraParams:{node:s,pNode:n}});return o?{nodes:[o],consumed:1}:{nodes:[],consumed:0}},uZe={handlerName:"handlePictNode",handler:cZe};function dZe({docx:t,editor:e,converter:n}){const r=eT(),i=t["word/comments.xml"];if(!i)return;const{elements:s}=i;if(!s||!s.length)return;const{elements:o=[]}=s[0],a=o.map(c=>{var L;const{attributes:u}=c,d=u["w:id"],f=u["w:author"],h=u["w:email"],m=u["w:initials"],y=u["w:date"],w=u["custom:internalId"],b=u["custom:trackedChange"]==="true",E=u["custom:trackedChangeType"],A=u["custom:trackedChangeText"]!=="null"?u["custom:trackedChangeText"]:null,x=u["custom:trackedDeletedText"]!=="null"?u["custom:trackedDeletedText"]:null,R=new Date(y).getTime(),k=r.handler({nodes:c.elements,nodeListHandler:r,docx:t,editor:e,converter:n,path:[c]}),_=k[k.length-1],N=(L=_==null?void 0:_.attrs)==null?void 0:L["w14:paraId"];return{commentId:w||Ts(),importedId:d,creatorName:f,creatorEmail:h,createdTime:R,textJson:k[0],elements:k,initials:m,paraId:N,trackedChange:b,trackedChangeText:A,trackedChangeType:E,trackedDeletedText:x,isDone:!1}});return fZe({docx:t,comments:a})}const fZe=({docx:t,comments:e})=>{if(!(e!=null&&e.length))return[];const n=t["word/commentsExtended.xml"];if(!n){const o=pZe(t);return mZe(e,o).map(l=>({...l,isDone:l.isDone??!1}))}const{elements:r=[]}=n;if(!(r!=null&&r.length))return e.map(o=>({...o,isDone:o.isDone??!1}));const{elements:i=[]}=r[0]??{},s=i.filter(o=>o.name==="w15:commentEx");return e.map(o=>{const a=s.find(f=>{var m;return(m=o.elements)==null?void 0:m.some(y=>{var w;return((w=y.attrs)==null?void 0:w["w14:paraId"])===f.attributes["w15:paraId"]})});if(!a)return{...o,isDone:o.isDone??!1};const{isDone:l,paraIdParent:c}=hZe(a);let u;return c&&(u=e.find(f=>{var h;return f.paraId===c||((h=f.elements)==null?void 0:h.some(m=>{var y;return((y=m.attrs)==null?void 0:y["w14:paraId"])===c}))})),{...o,isDone:l??!1,parentCommentId:u==null?void 0:u.commentId}})},hZe=t=>{const{attributes:e}=t,n=e["w15:paraId"],r=e["w15:done"]==="1",i=e["w15:paraIdParent"];return{paraId:n,isDone:r,paraIdParent:i}},pZe=t=>{const e=t["word/document.xml"];if(!e)return[];const n=[],r=i=>{!i||!Array.isArray(i)||i.forEach(s=>{var o,a;if(s.name==="w:commentRangeStart"){const l=(o=s.attributes)==null?void 0:o["w:id"];l!==void 0&&n.push({type:"start",commentId:String(l)})}else if(s.name==="w:commentRangeEnd"){const l=(a=s.attributes)==null?void 0:a["w:id"];l!==void 0&&n.push({type:"end",commentId:String(l)})}s.elements&&Array.isArray(s.elements)&&r(s.elements)})};if(e.elements&&e.elements.length>0){const i=e.elements[0];i.elements&&r(i.elements)}return n},mZe=(t,e)=>{if(!e||e.length===0)return t;const n=[],r=new Map;return e.forEach(i=>{if(i.type==="start"){if(n.length>0){const s=n[n.length-1];r.set(i.commentId,s)}n.push(i.commentId)}else if(i.type==="end"){const s=n.lastIndexOf(i.commentId);s!==-1&&n.splice(s,1)}}),t.map(i=>{const s=r.get(i.importedId);if(s){const o=t.find(a=>a.importedId===s);if(o)return{...i,parentCommentId:o.commentId}}return i})},Ete={image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink"},qye=t=>{var s;const e=(s=t.converter)==null?void 0:s.convertedXml;if(!e)return[];const n=e["word/_rels/document.xml.rels"],r=n==null?void 0:n.elements;if(!Array.isArray(r))return[];const i=r.find(o=>o.name==="Relationships");return(i==null?void 0:i.elements)||[]},gZe=t=>{const e=[];return t.forEach(n=>{const r=n.attributes.Id.split("rId"),i=parseInt(r[1],10);Number.isInteger(i)&&e.push(i)}),e.length===0?0:Math.max(...e)},Gye=(t,e)=>{if(!t)return null;t.startsWith("word/")&&(t=t.replace("word/",""));const n=qye(e),r=n==null?void 0:n.find(i=>i.attributes.Target===t);if(r)return r.attributes.Id},OV=(t,e,n)=>{var u,d;if(!t||typeof t!="string")throw new Error("Target must be a non-empty string");if(!e||typeof e!="string")throw new Error("Type must be a non-empty string");if(!n)throw new Error("Editor instance is required");const r=Ete[e];if(!r)return console.warn(`Unsupported relationship type: ${e}. Available types: ${Object.keys(Ete).join(", ")}`),null;const i=Gye(t,n);if(i)return console.info(`Reusing existing relationship for target: ${t} (ID: ${i})`),i;const s=(u=n.converter)==null?void 0:u.convertedXml;if(!s)return console.error("No converted XML found in editor"),null;const o=s["word/_rels/document.xml.rels"];if(!o)return console.error("No document relationships found in the docx"),null;const a=(d=o.elements)==null?void 0:d.find(f=>f.name==="Relationships");if(!a)return console.error("No Relationships tag found in document relationships"),null;a.elements||(a.elements=[]);const l=Kye(n);if(!l)return console.error("Failed to generate new relationship ID"),null;const c={type:"element",name:"Relationship",attributes:{Id:l,Type:r,Target:t}};return e==="hyperlink"&&(c.attributes.TargetMode="External"),a.elements.push(c),l},Kye=t=>{const e=qye(t);return`rId${gZe(e)+1}`},yZe={findRelationshipIdFromTarget:Gye,insertNewRelationship:OV,getNewRelationshipId:Kye},sF=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),bZe=(t,e)=>{var se,Q,J,K,re,X,me,G,B,z,de,Y,ee,ae,ie,H,be,Te;const n={lineSpaceBefore:null,lineSpaceAfter:null};if(!t)return n;const r=e["word/styles.xml"];if(!r)return n;const{elements:i}=r.elements[0],s=i.filter(Z=>{const{attributes:oe}=Z;return oe&&oe["w:styleId"]===t}),o=s[0];if(!o)return n;const a=s.find(Z=>Z.elements.find(te=>te.name==="w:qFormat")),l=(Q=(se=s.find(Z=>Z.elements.some(oe=>oe.name==="w:name")))==null?void 0:se.elements.find(Z=>Z.name==="w:name"))==null?void 0:Q.attributes["w:val"],c=o.elements.find(Z=>Z.name==="w:pPr"),u=(J=c==null?void 0:c.elements)==null?void 0:J.find(Z=>Z.name==="w:spacing"),d=(K=c==null?void 0:c.elements)==null?void 0:K.find(Z=>Z.name==="w:jc"),f=(re=c==null?void 0:c.elements)==null?void 0:re.find(Z=>Z.name==="w:ind"),h=(X=c==null?void 0:c.elements)==null?void 0:X.find(Z=>Z.name==="w:tabs");let m,y,w;u!=null&&u.attributes&&(m=Dr(u.attributes["w:before"]),y=Dr(u.attributes["w:after"]),w=sb(u.attributes["w:line"]));let b,E,A,x;f!=null&&f.attributes&&(b=(me=d==null?void 0:d.attributes)==null?void 0:me["w:val"],E=Dr(f.attributes["w:left"]),A=Dr(f.attributes["w:right"]),x=Dr(f.attributes["w:firstLine"]));let T=[];h&&(T=(h.elements||[]).filter(Z=>Z.name==="w:tab").map(Z=>{let oe=Z.attributes["w:val"];return oe=="left"?oe="start":oe=="right"&&(oe="end"),{val:oe,pos:Dr(Z.attributes["w:pos"]),leader:Z.attributes["w:leader"]}}));const R=(G=c==null?void 0:c.elements)==null?void 0:G.find(Z=>Z.name==="w:keepNext"),k=(B=c==null?void 0:c.elements)==null?void 0:B.find(Z=>Z.name==="w:keepLines"),_=(z=c==null?void 0:c.elements)==null?void 0:z.find(Z=>Z.name==="w:outlineLvl"),N=_==null?void 0:_.attributes["w:val"],L=(de=c==null?void 0:c.elements)==null?void 0:de.find(Z=>Z.name==="w:pageBreakBefore");let M=0;L&&((Y=L.attributes)!=null&&Y["w:val"]?M=Number((ee=L==null?void 0:L.attributes)==null?void 0:ee["w:val"]):M=1);const C=(ae=c==null?void 0:c.elements)==null?void 0:ae.find(Z=>Z.name==="w:pageBreakAfter");let D;C&&((ie=C.attributes)!=null&&ie["w:val"]?D=Number((H=C==null?void 0:C.attributes)==null?void 0:H["w:val"]):D=1);const O=(Te=(be=s.find(Z=>Z.elements.some(oe=>oe.name==="w:basedOn")))==null?void 0:be.elements.find(Z=>Z.name==="w:basedOn"))==null?void 0:Te.attributes["w:val"],$={name:l,qFormat:!!a,keepNext:!!R,keepLines:!!k,outlineLevel:_?parseInt(N):null,pageBreakBefore:!!M,pageBreakAfter:!!D,basedOn:O??null},U=o.elements.find(Z=>Z.name==="w:rPr"),W=Db(U,[],e)||[],ce={spacing:{lineSpaceAfter:y,lineSpaceBefore:m,line:w},textAlign:b,indent:{leftIndent:E,rightIndent:A,firstLine:x},tabStops:T.length>0?T:null};return W.forEach(Z=>{const{type:oe,attrs:te}=Z;if(oe==="textStyle"){Object.entries(te).forEach(([ye,ke])=>{ce[sF(ye)]=ke});return}ce[oe]=te}),{attrs:$,styles:ce}},wZe=["w:proofErr","w:lastRenderedPageBreak"],PV=(t=[])=>t.filter(e=>!wZe.includes(e.name)).map(e=>e.elements?{...e,elements:PV(e.elements)}:e),vZe=t=>{const{nodes:e}=t;return!e.length||e[0].name!=="w:tab"?{nodes:[],consumed:0}:{nodes:[wR.encode(t)],consumed:1}},xZe={handlerName:"w:tabTranslator",handler:vZe},EZe=wd("tableNodeHandler",SV),SZe=wd("tableOfContentsHandler",IV);function Xye(t,e,n=null){const r={name:"sd:autoPageNumber",type:"element"};let i=!1;return t.forEach(s=>{var a;const o=(a=s.elements)==null?void 0:a.find(l=>l.name==="w:rPr");o&&(r.elements=[o],i=!0)}),!i&&n&&n.name==="w:rPr"&&(r.elements=[n]),[r]}function Yye(t,e,n=null){const r={name:"sd:totalPageNumber",type:"element"};let i=!1;return t.forEach(s=>{var a;const o=(a=s.elements)==null?void 0:a.find(l=>l.name==="w:rPr");o&&(r.elements=[o],i=!0)}),!i&&n&&n.name==="w:rPr"&&(r.elements=[n]),[r]}function AZe(t,e){return[{name:"sd:pageReference",type:"element",attributes:{instruction:e},elements:t}]}function TZe(t,e,n){var s;const r=e.match(/HYPERLINK\s+"([^"]+)"/);let i;if(r&&r.length>=2){const o=r[1],a=n["word/_rels/document.xml.rels"],l=a==null?void 0:a.elements.find(c=>c.name==="Relationships");if(l){const c=wa();l.elements.push({type:"element",name:"Relationship",attributes:{Id:c,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Target:o,TargetMode:"External"}}),i={"r:id":c}}else i={"w:anchor":o}}else{const o={"w:anchor":/(?:\\)?l "(?<value>[^"]+)"/,new_window:/(?:\\n|\n)/,"w:tgtFrame":/(?:\\t|\t) "(?<value>[^"]+)"/,"w:tooltip":/(?:\\)?o "(?<value>[^"]+)"/},a={};for(const[l,c]of Object.entries(o)){const u=e.match(c);u&&(a[l]=((s=u.groups)==null?void 0:s.value)||!0)}a.new_window&&(a["w:tgtFrame"]="_blank",delete a.new_window),i={...a}}return[{name:"w:hyperlink",type:"element",attributes:i,elements:t}]}function kZe(t,e){return[{name:"sd:tableOfContents",type:"element",attributes:{instruction:e},elements:t}]}const CZe=t=>{switch(t.split(" ")[0]){case"PAGE":return Xye;case"NUMPAGES":return Yye;case"PAGEREF":return AZe;case"HYPERLINK":return TZe;case"TOC":return kZe;default:return null}},Zye=(t=[],e)=>{var u,d,f,h,m;const n=[];let r=[],i=[],s=[],o=null,a=!1;const l=()=>{if(a){const y=r.pop().filter(x=>x!==null),w=i.pop().filter(x=>x!==null),b=s.pop(),E=_Ze(y,b.instrText.trim(),e),A=E.handled?E.nodes:w;r.length===0?n.push(...A):(r[r.length-1].push(...A),i[i.length-1].push(...A))}else o=!0};for(const y of t){const w=(u=y.elements)==null?void 0:u.find(x=>x.name==="w:fldChar"),b=(d=w==null?void 0:w.attributes)==null?void 0:d["w:fldCharType"],E=(f=y.elements)==null?void 0:f.find(x=>x.name==="w:instrText"),A=Vi(y);if(a=r.length>0,b==="begin"){r.push([]),i.push([A]),s.push({instrText:""});continue}if(E&&a&&s.length>0){i[i.length-1].push(A),s[s.length-1].instrText+=(((m=(h=E.elements)==null?void 0:h[0])==null?void 0:m.text)||"")+" ";continue}if(b==="end"){a&&i[i.length-1].push(A),l();continue}else if(b==="separate"){a&&i[i.length-1].push(A);continue}if(Array.isArray(y.elements)){const x=Zye(y.elements,e);y.elements=x.processedNodes,x.unpairedBegin?x.unpairedBegin.forEach(T=>{s.push(T.fieldInfo),r.push([y]),i.push([A])}):x.unpairedEnd?(r[r.length-1].push(y),i[i.length-1].push(A),l()):a?(r[r.length-1].push(y),i[i.length-1].push(A)):n.push(y)}else a?(r[r.length-1].push(y),i[i.length-1].push(A)):n.push(y)}let c=null;if(r.length>0){c=[];for(let y=0;y<r.length;y++)n.push(...r[y].filter(w=>w!==null)),c.push({nodes:r[y],fieldInfo:s[y]})}return{processedNodes:n,unpairedBegin:c,unpairedEnd:o}},_Ze=(t=[],e,n)=>{const r=e.trim().split(" ")[0],i=CZe(r);return i?{nodes:i(t,e,n),handled:!0}:{nodes:t,handled:!1}},nI=(t=[],e=0)=>{var i,s;const n=[];let r=0;for(;r<t.length;){const o=t[r],a=(i=o.elements)==null?void 0:i.find(c=>c.name==="w:fldChar");if(((s=a==null?void 0:a.attributes)==null?void 0:s["w:fldCharType"])==="begin"){const c=NZe(t,r);if(c&&(c.fieldType==="PAGE"||c.fieldType==="NUMPAGES")){const u=c.fieldType==="PAGE"?Xye:Yye,d=c.contentNodes,f=u(d,c.instrText,c.fieldRunRPr);n.push(...f),r=c.endIndex+1;continue}else if(c){for(let u=r;u<=c.endIndex;u++){const d=t[u];if(Array.isArray(d.elements)){const f=nI(d.elements,e+1);d.elements=f.processedNodes}n.push(d)}r=c.endIndex+1;continue}}if(Array.isArray(o.elements)){const c=nI(o.elements,e+1);o.elements=c.processedNodes}n.push(o),r++}return{processedNodes:n}};function NZe(t,e){var u,d,f,h,m,y,w;let n="",r=-1,i=-1;const s=[];let o=null;const l=(u=t[e].elements)==null?void 0:u.find(b=>b.name==="w:rPr");l&&Ste(l)&&(o=l);for(let b=e+1;b<t.length;b++){const E=t[b],A=(d=E.elements)==null?void 0:d.find(R=>R.name==="w:fldChar"),x=(f=A==null?void 0:A.attributes)==null?void 0:f["w:fldCharType"],T=(h=E.elements)==null?void 0:h.find(R=>R.name==="w:instrText");if(T&&(n+=(((y=(m=T.elements)==null?void 0:m[0])==null?void 0:y.text)||"")+" "),!o||r===-1&&x!=="end"){const R=(w=E.elements)==null?void 0:w.find(k=>k.name==="w:rPr");R&&Ste(R)&&(o=R)}if(x==="separate")r=b;else if(x==="end"){i=b;break}else r!==-1&&x!=="begin"&&s.push(E)}return i===-1?null:{fieldType:n.trim().split(" ")[0],instrText:n.trim(),contentNodes:s,fieldRunRPr:o,endIndex:i}}function Ste(t){var n;if(!((n=t==null?void 0:t.elements)!=null&&n.length))return!1;const e=["w:rStyle","w:rFonts","w:sz","w:szCs","w:b","w:bCs","w:i","w:iCs","w:u","w:color","w:highlight","w:strike","w:dstrike","w:caps","w:smallCaps"];return t.elements.some(r=>e.includes(r.name))}const IZe=wd("commentRangeStartHandler",TV),RZe=wd("commentRangeEndHandler",kV),MZe=wd("permStartHandler",CV),LZe=wd("permEndHandler",_V),DZe=(t,e,n)=>{var o,a,l,c;const r=Vi(hYe(t));if(!r)return null;if(e!=null&&e.telemetry){const u=Object.keys(t).map(f=>{const h=f.split("/");return{filePath:f,fileDepth:h.length,fileType:f.split(".").pop()}}),d=(f=null)=>e.telemetry.trackFileStructure({totalFiles:u.length,maxDepth:Math.max(...u.map(h=>h.fileDepth)),totalNodes:0,files:u},e.fileSource,e.documentGuid??e.documentId??null,f??e.documentId??null,e.documentInternalId);try{const f=(o=e.getDocumentIdentifier)==null?void 0:o.call(e);f&&typeof f.then=="function"?f.then(d).catch(()=>d()):d(f)}catch{d()}}const i=eT(),s=r.elements[0].elements.find(u=>u.name==="w:body");if(s){FZe(s);const u=s,{processedNodes:d}=Zye(u.elements??[],t);u.elements=d;const f=(a=u.elements)==null?void 0:a.find(R=>R.name==="w:sectPr"),h=(f==null?void 0:f.elements)??[];e&&(e.importedBodyHasHeaderRef=h.some(R=>(R==null?void 0:R.name)==="w:headerReference"),e.importedBodyHasFooterRef=h.some(R=>(R==null?void 0:R.name)==="w:footerReference"));const m=((l=u.elements)==null?void 0:l.filter(R=>R.name!=="w:sectPr"))??[],y=PV(m),w=dZe({docx:t,converter:e,editor:n}),b={},E=[],A=aF(t);let x=i.handler({nodes:y,nodeListHandler:i,docx:t,converter:e,numbering:A,editor:n,inlineDocumentFonts:E,lists:b,path:[]});x=oF(x),HZe(x);const T={type:"doc",content:x,attrs:{attributes:r.elements[0].attributes,...f?{bodySectPr:f}:{}}};return T.content.length>1&&((c=e==null?void 0:e.telemetry)==null||c.trackUsage("document_import",{documentType:"docx",timestamp:new Date().toISOString()})),{pmDoc:T,savedTagsToRestore:u,pageStyles:PZe(u,t,e,n),comments:w,inlineDocumentFonts:E,linkedStyles:BZe(t),numbering:aF(t,e),themeColors:VZe(t)}}return null},eT=()=>{const t=[sZe,kYe,uZe,OYe,DYe,KYe,FYe,JYe,eZe,TYe,IZe,RZe,mYe,AYe,EZe,xZe,SZe,oZe,aZe,lZe,MZe,LZe,qYe];return{handler:OZe(t),handlerEntities:t}},OZe=t=>{const e=(r,i,s,o)=>{if(!r||i<0||i>=r.length)return{elementIndex:i,error:"index_out_of_bounds",arrayLength:r==null?void 0:r.length};const a=r[i];return{elementName:a==null?void 0:a.name,attributes:s==null?void 0:s.attrs,marks:s==null?void 0:s.marks,elementPath:o,type:s==null?void 0:s.type,content:s==null?void 0:s.content}},n=({nodes:r,docx:i,insideTrackChange:s,converter:o,numbering:a,editor:l,filename:c,parentStyleId:u,lists:d,inlineDocumentFonts:f,path:h=[],extraParams:m={}})=>{var b,E,A,x,T,R;if(!r||!r.length)return[];const y=PV(r);if(!y.length)return[];const w=[];try{for(let k=0;k<y.length;k++)try{const _=y.slice(k);if(!_||_.length===0)continue;const{nodes:N,consumed:L,unhandled:M}=t.reduce((D,O)=>D.consumed>0?D:O.handler({nodes:_,docx:i,nodeListHandler:{handler:n,handlerEntities:t},insideTrackChange:s,converter:o,numbering:a,editor:l,filename:c,parentStyleId:u,lists:d,inlineDocumentFonts:f,path:h,extraParams:m}),{nodes:[],consumed:0}),C=e(y,k,N[0],`/word/${c||"document.xml"}`);if(M){if(!C.elementName)continue;(b=o==null?void 0:o.telemetry)==null||b.trackStatistic("unknown",C);continue}else{(E=o==null?void 0:o.telemetry)==null||E.trackStatistic("node",C),(C.type==="orderedList"||C.type==="bulletList")&&C.content.forEach(O=>{var U;const $=e([O],0,O,`/word/${c||"document.xml"}`);(U=o==null?void 0:o.telemetry)==null||U.trackStatistic("attributes",$)});const D=(x=(A=N[0])==null?void 0:A.marks)==null?void 0:x.find(O=>O.type==="highlight");D&&(o==null||o.docHiglightColors.add(D.attrs.color.toUpperCase()))}L>0&&(k+=L-1),N&&N.forEach(D=>{if(D!=null&&D.type&&!["runProperties"].includes(D.type)){if(D.type==="text"&&Array.isArray(D.content)&&!D.content.length)return;w.push(D)}})}catch(_){console.debug("Import error",_),l==null||l.emit("exception",{error:_,editor:l}),(T=o==null?void 0:o.telemetry)==null||T.trackStatistic("error",{type:"processing_error",message:_.message,name:_.name,stack:_.stack,fileName:`/word/${c||"document.xml"}`})}return w}catch(k){throw console.debug("Error during import",k),l==null||l.emit("exception",{error:k,editor:l}),(R=o==null?void 0:o.telemetry)==null||R.trackStatistic("error",{type:"fatal_error",message:k.message,name:k.name,stack:k.stack,fileName:`/word/${c||"document.xml"}`}),k}};return n};function PZe(t,e,n,r,i){var a,l;const s=(a=t.elements)==null?void 0:a.find(c=>c.name==="w:sectPr"),o={};return(l=s==null?void 0:s.elements)==null||l.forEach(c=>{const{name:u,attributes:d}=c;switch(u){case"w:pgSz":o.pageSize={width:Os(d["w:w"]),height:Os(d["w:h"])};break;case"w:pgMar":o.pageMargins={top:Os(d["w:top"]),right:Os(d["w:right"]),bottom:Os(d["w:bottom"]),left:Os(d["w:left"]),header:Os(d["w:header"]),footer:Os(d["w:footer"]),gutter:Os(d["w:gutter"])};break;case"w:cols":o.columns={space:Os(d["w:space"]),num:d["w:num"],equalWidth:d["w:equalWidth"]};break;case"w:docGrid":o.docGrid={linePitch:Os(d["w:linePitch"]),type:d["w:type"]};break;case"w:titlePg":n.headerIds.titlePg=!0}}),$Ze(e,n,r),o.alternateHeaders=UZe(e),o}const n9=Object.freeze({pageSize:Object.freeze({width:"12240",height:"15840"}),pageMargins:Object.freeze({top:"1440",right:"1440",bottom:"1440",left:"1440",header:"720",footer:"720",gutter:"0"})});function FZe(t){t.elements||(t.elements=[]);let e=t.elements.find(s=>s.name==="w:sectPr");e?e.elements||(e.elements=[]):(e={type:"element",name:"w:sectPr",elements:[]},t.elements.push(e));const n=(s,o)=>{let a=e.elements.find(l=>l.name===s);return a?a.attributes||(a.attributes={}):(a=o(),e.elements.push(a)),a},r=n("w:pgSz",()=>({type:"element",name:"w:pgSz",attributes:{}}));r.attributes["w:w"]=r.attributes["w:w"]??n9.pageSize.width,r.attributes["w:h"]=r.attributes["w:h"]??n9.pageSize.height;const i=n("w:pgMar",()=>({type:"element",name:"w:pgMar",attributes:{}}));return Object.entries(n9.pageMargins).forEach(([s,o])=>{const a=`w:${s}`;i.attributes[a]==null&&(i.attributes[a]=o)}),e}function BZe(t){const e=t["word/styles.xml"];if(!e)return[];const{elements:n}=e.elements[0],r=n.filter(o=>o.name==="w:style"),i=n.find(o=>o.name==="w:latentStyles");i==null||i.elements.forEach(o=>{const{attributes:a}=o;r.find(l=>l.attributes["w:styleId"]===a["w:name"])});const s=[];return r.forEach(o=>{const a=o.attributes["w:styleId"],l=bZe(a,t),c={id:o.attributes["w:styleId"],type:o.attributes["w:type"],definition:l,attributes:{}};s.push(c)}),s}function jZe(t){if(!t)return null;const e=Vi(t),{elements:n}=e.elements[0];return Object.keys(Pee).forEach(r=>{if(!n.some(s=>{var o;return((o=s.attributes)==null?void 0:o["w:styleId"])===r})){const s=Pee[r];e.elements[0].elements.push(s)}}),e}const $Ze=(t,e,n)=>{const r=t["word/_rels/document.xml.rels"],i=r==null?void 0:r.elements.find(y=>y.name==="Relationships"),{elements:s}=i||{elements:[]},o=aF(t),a="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",l="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",c=s.filter(y=>y.attributes.Type===a),u=s.filter(y=>y.attributes.Type===l),f=(Jye(t["word/document.xml"])||[]).flatMap(y=>y.elements);if(!n)return;const h={...n};h.options.annotations=!0,c.forEach(y=>{const{rId:w,referenceFile:b,currentFileName:E}=Ate(y,t),A=Vi(b.elements[0].elements??[]),{processedNodes:x}=nI(A),T=f.find(N=>N.name==="w:headerReference"&&N.attributes["r:id"]===w);let R=T==null?void 0:T.attributes["w:type"];e.headerIds[R]&&(R=null);const k=eT();let _=k.handler({nodes:x,nodeListHandler:k,docx:t,converter:e,numbering:o,editor:h,filename:E,path:[]});_=oF(_),e.headerIds.ids||(e.headerIds.ids=[]),e.headerIds.ids.push(w),e.headers[w]={type:"doc",content:[..._]},R&&(e.headerIds[R]=w)}),(f==null?void 0:f.find(y=>y.name==="w:titlePg"))&&(e.headerIds.titlePg=!0),u.forEach(y=>{const{rId:w,referenceFile:b,currentFileName:E}=Ate(y,t),A=Vi(b.elements[0].elements??[]),{processedNodes:x}=nI(A),T=f.find(N=>N.name==="w:footerReference"&&N.attributes["r:id"]===w),R=T==null?void 0:T.attributes["w:type"],k=eT();let _=k.handler({nodes:x,nodeListHandler:k,docx:t,converter:e,numbering:o,editor:h,filename:E,path:[]});_=oF(_),e.footerIds.ids||(e.footerIds.ids=[]),e.footerIds.ids.push(w),e.footers[w]={type:"doc",content:[..._]},R&&(e.footerIds[R]=w)})},Jye=(t,e=[])=>{for(const n in t)t[n]==="w:sectPr"?e.push(t):typeof t[n]=="object"&&Jye(t[n],e);return e},Ate=(t,e)=>{const n=t.attributes.Id,r=t.attributes.Target,i=e[`word/${r}`];return{rId:n,referenceFile:i,currentFileName:r}};function oF(t=[]){if(!Array.isArray(t)||t.length===0)return t;const e=new Set(["text","bookmarkStart","bookmarkEnd","lineBreak","hardBreak","pageNumber","totalPageCount","runItem","image","tab","fieldAnnotation","mention","contentBlock","aiLoaderNode","commentRangeStart","commentRangeEnd","commentReference","structuredContent"]),n={bookmarkStart:"w:bookmarkStart",bookmarkEnd:"w:bookmarkEnd"},r=[];return t.forEach(i=>{var a;if(!i||typeof i.type!="string")return;const s=i.type,o=n[s];if(s==="image"&&((a=i.attrs)!=null&&a.isAnchor)){r.push(i);return}if(!e.has(s))r.push(i);else if(o){const l=zZe(s,i.attrs,n);r.push({type:"passthroughBlock",attrs:{originalName:o,...l?{originalXml:l}:{}}})}}),r}const zZe=(t,e,n)=>{const i={bookmarkStart:Fye,bookmarkEnd:Bye}[t];if(!i)return null;const s={};i.forEach(l=>{const c=l.decode(e||{});c!==void 0&&(s[l.xmlName]=c)});const o=Object.keys(s).length?s:void 0;return{name:n[t],...o?{attributes:o}:{},elements:[]}};function HZe(t=[]){if(!Array.isArray(t)||t.length===0)return;const e=Qye(t);e.forEach((n,r)=>{if(n.kind!=="passthrough")return;const i=Tte(e,r,-1),s=Tte(e,r,1);!i||!s||!i.node.text.endsWith(" ")||!s.node.text.startsWith(" ")||(i.node.text=i.node.text.replace(/ +$/," "),s.node.text=s.node.text.replace(/^ +/,""),s.node.text.length===0&&s.parent.splice(s.index,1))})}function Qye(t,e=[],n=!1){return!Array.isArray(t)||t.length===0||t.forEach((r,i)=>{if(!r)return;const s=r.type==="passthroughInline";if(s&&!n&&e.push({kind:"passthrough",parent:t,index:i}),r.type==="text"&&typeof r.text=="string"&&!n&&e.push({kind:"text",node:r,parent:t,index:i}),Array.isArray(r.content)&&r.content.length){const o=n||s;Qye(r.content,e,o)}}),e}function Tte(t,e,n){let r=e+n;for(;r>=0&&r<t.length;){const i=t[r];if(i.kind==="text")return i;r+=n}return null}function VZe(t){var o,a;const e=t==null?void 0:t["word/theme/theme1.xml"];if(!e||!Array.isArray(e.elements))return;const n=e.elements.find(l=>l.name==="a:theme"),r=(o=n==null?void 0:n.elements)==null?void 0:o.find(l=>l.name==="a:themeElements"),i=(a=r==null?void 0:r.elements)==null?void 0:a.find(l=>l.name==="a:clrScheme");if(!i||!Array.isArray(i.elements))return;const s={};return i.elements.forEach(l=>{var m,y;const c=l==null?void 0:l.name;if(!c)return;const u=c.replace(/^a:/,"");if(!u)return;const d=Array.isArray(l.elements)?l.elements.find(w=>w.attributes&&(w.attributes.val||w.attributes.lastClr)):void 0,f=((m=d==null?void 0:d.attributes)==null?void 0:m.val)||((y=d==null?void 0:d.attributes)==null?void 0:y.lastClr);if(!f)return;const h=String(f).trim();h&&(s[u]=`#${h.toUpperCase()}`)}),Object.keys(s).length?s:void 0}function aF(t,e){const n=K0e(t,e),r={};n.abstractById.forEach((s,o)=>{const a=Number(o);Number.isNaN(a)||(r[a]=s)});let i={};return n.numNodesById.forEach((s,o)=>{const a=Number(o);Number.isInteger(a)&&(i[a]=s)}),{abstracts:r,definitions:i}}const UZe=t=>{var i;const e=t["word/settings.xml"];if(!e||!((i=e.elements)!=null&&i.length))return!1;const{elements:n=[]}=e.elements[0];return!!n.find(s=>s.name==="w:evenAndOddHeaders")};function WZe({params:t,pict:e}){var w,b,E,A;const n=(w=e.elements)==null?void 0:w.find(x=>x.name==="v:shape"),r={},i={},s=n.attributes||{};r.attributes=s,s.fillcolor&&(r.fillcolor=s.fillcolor);const o=Hye(s.style),a=qZe(o);a&&(r.style=a);const l=(b=n.elements)==null?void 0:b.find(x=>x.name==="v:textbox"),c=(E=n.elements)==null?void 0:E.find(x=>x.name==="w10:wrap");c!=null&&c.attributes&&(r.wrapAttributes=c.attributes),l!=null&&l.attributes&&(i.attributes=l.attributes);const u=(A=l==null?void 0:l.elements)==null?void 0:A.find(x=>x.name==="w:txbxContent"),h=((u==null?void 0:u.elements)||[]).map(x=>Uye({nodes:[x],docx:t.docx,nodeListHandler:eT()})).reduce((x,T)=>[...x,...T.nodes],[]);return{type:"shapeContainer",attrs:r,content:[{type:"shapeTextbox",attrs:i,content:h}]}}function qZe(t){const e=["width","height"];let n="";for(const[r,i]of Object.entries(t))e.includes(r)&&(n+=`${r}: ${i};`);return n}function GZe({params:t,pict:e}){var O,$,U;const n=(O=e.elements)==null?void 0:O.find(W=>W.name==="v:shape");if(!n)return null;const r=($=n.elements)==null?void 0:$.find(W=>W.name==="v:imagedata");if(!r)return null;const{docx:i,filename:s}=t,o=n.attributes||{},a=r.attributes||{},l=a["r:id"];if(!l)return console.warn("v:imagedata missing r:id attribute"),null;let u=i[`word/_rels/${s||"document.xml"}.rels`];u||(u=i["word/_rels/document.xml.rels"]);const d=(U=u==null?void 0:u.elements)==null?void 0:U.find(W=>W.name==="Relationships"),{elements:f}=d||[],h=f==null?void 0:f.find(W=>W.attributes.Id===l);if(!h)return console.warn(`Relationship not found for r:id="${l}"`),null;const m=h.attributes.Target,y=KZe(m),w=o.style||"",b=XZe(w),E=b.width||"100px",A=b.height||"100px",x={type:b.position||"absolute",marginLeft:b["margin-left"]||"0",marginTop:b["margin-top"]||"0"},T=b["z-index"]?parseInt(b["z-index"],10):void 0,R=b["mso-position-horizontal"]||"center",k=b["mso-position-vertical"]||"center",_=b["mso-position-horizontal-relative"]||"margin",N=b["mso-position-vertical-relative"]||"margin",L=a.gain,M=a.blacklevel,C=a["o:title"]||"Watermark";return{type:"image",attrs:{src:y,alt:C,extension:y.substring(y.lastIndexOf(".")+1),title:C,rId:l,vmlWatermark:!0,vmlStyle:w,vmlAttributes:o,vmlImagedata:a,isAnchor:!0,inline:!1,wrap:{type:"None",attrs:{behindDoc:Number.isFinite(T)?T<0:!0}},anchorData:{hRelativeFrom:_,vRelativeFrom:N,alignH:R,alignV:k},size:{width:x5(E),height:x5(A)},marginOffset:{horizontal:x5(x.marginLeft),top:x5(x.marginTop)},...L&&{gain:L},...M&&{blacklevel:M}}}}function KZe(t=""){if(!t)return t;const e=t.replace(/^\/+/,"");return e.startsWith("word/")?e:e.startsWith("media/")?`word/${e}`:`word/${e}`}function XZe(t){const e={};if(!t)return e;const n=t.split(";").filter(r=>r.trim());for(const r of n){const[i,s]=r.split(":").map(o=>o.trim());i&&s&&(e[i]=s)}return e}function x5(t){if(typeof t=="number")return t;if(!t||typeof t!="string")return 0;const e=t.match(/^([\d.]+)([a-z%]+)?$/i);if(!e)return 0;const n=parseFloat(e[1]);switch((e[2]||"px").toLowerCase()){case"px":return n;case"pt":return n*(96/72);case"in":return n*96;case"cm":return n*(96/2.54);case"mm":return n*(96/25.4);case"pc":return n*16;default:return n}}function YZe(t){var s,o,a,l,c;const e=(s=t.elements)==null?void 0:s.find(u=>u.name==="v:shape"),n=(o=t.elements)==null?void 0:o.find(u=>u.name==="v:group");return((a=t.elements)==null?void 0:a.find(u=>u.name==="v:rect"))?{type:"contentBlock",handler:cYe}:!e&&!n?{type:"unknown",handler:null}:n&&!e?{type:"unknown",handler:null}:((l=e.elements)==null?void 0:l.find(f=>f.name==="v:textbox"))?{type:"shapeContainer",handler:WZe}:((c=e.elements)==null?void 0:c.find(f=>f.name==="v:imagedata"))?{type:"image",handler:GZe}:{type:"unknown",handler:null}}function ZZe(t){const{node:e}=t,n=hu(t),r={name:"v:shape",attributes:{...e.attrs.attributes,fillcolor:e.attrs.fillcolor},elements:[...n,...e.attrs.wrapAttributes?[{name:"w10:wrap",attributes:{...e.attrs.wrapAttributes}}]:[]]},i={name:"w:pict",attributes:{"w14:anchorId":Sp()},elements:[r]};return{name:"w:p",elements:[$p(i)]}}function JZe(t){const{node:e}=t,r={name:"w:txbxContent",elements:hu(t)};return{name:"v:textbox",attributes:{...e.attrs.attributes},elements:[r]}}function QZe(t){const{node:e}=t,{vmlAttributes:n,horizontalRule:r}=e.attrs;if(n||r)return eJe(t);const i=fw.decode(t);return $p(i)}function eJe(t){const{node:e}=t,{vmlAttributes:n,background:r,attributes:i,style:s}=e.attrs,o={id:(i==null?void 0:i.id)||`_x0000_i${Math.floor(Math.random()*1e4)}`};s&&(o.style=s),r&&(o.fillcolor=r),n&&(n.hralign&&(o["o:hralign"]=n.hralign),n.hrstd&&(o["o:hrstd"]=n.hrstd),n.hr&&(o["o:hr"]=n.hr),n.stroked&&(o.stroked=n.stroked)),i&&Object.entries(i).forEach(([c,u])=>{!o[c]&&u!==void 0&&(o[c]=u)});const a={name:"v:rect",attributes:o},l={name:"w:pict",attributes:{"w14:anchorId":Sp()},elements:[a]};return $p(l)}function tJe(t){const{node:e}=t,{attrs:n}=e;if(n.vmlAttributes&&n.vmlImagedata){const a={name:"v:shape",attributes:n.vmlAttributes,elements:[{name:"v:imagedata",attributes:{...n.vmlImagedata,"r:id":n.rId}}]},l={name:"w:pict",attributes:{"w14:anchorId":Sp()},elements:[a]};return{name:"w:p",elements:[$p(l)]}}const r=nJe(n),i={name:"v:shape",attributes:{id:`WordPictureWatermark${Sp().replace("-","")}`,"o:spid":`_x0000_s${Math.floor(Math.random()*1e4)}`,type:"#_x0000_t75",style:r,"o:allowincell":"f"},elements:[{name:"v:imagedata",attributes:{"r:id":n.rId,"o:title":n.title||n.alt||"Watermark",...n.gain&&{gain:n.gain},...n.blacklevel&&{blacklevel:n.blacklevel}}}]},s={name:"w:pict",attributes:{"w14:anchorId":Sp()},elements:[i]};return{name:"w:p",elements:[$p(s)]}}function nJe(t){var n,r;const e=[];return e.push("position:absolute"),t.size&&(t.size.width&&e.push(`width:${E5(t.size.width)}pt`),t.size.height&&e.push(`height:${E5(t.size.height)}pt`)),t.marginOffset&&(t.marginOffset.horizontal!==void 0&&e.push(`margin-left:${E5(t.marginOffset.horizontal)}pt`),t.marginOffset.top!==void 0&&e.push(`margin-top:${E5(t.marginOffset.top)}pt`)),(r=(n=t.wrap)==null?void 0:n.attrs)!=null&&r.behindDoc&&e.push("z-index:-251653120"),t.anchorData&&(t.anchorData.alignH&&e.push(`mso-position-horizontal:${t.anchorData.alignH}`),t.anchorData.alignV&&e.push(`mso-position-vertical:${t.anchorData.alignV}`),t.anchorData.hRelativeFrom&&e.push(`mso-position-horizontal-relative:${t.anchorData.hRelativeFrom}`),t.anchorData.vRelativeFrom&&e.push(`mso-position-vertical-relative:${t.anchorData.vRelativeFrom}`)),e.push("mso-width-percent:0"),e.push("mso-height-percent:0"),e.join(";")}function E5(t){return t*72/96}const rJe="w:pict",iJe=["shapeContainer","contentBlock","image"],sJe=[];function oJe(t){const{node:e,pNode:n}=t.extraParams,{type:r,handler:i}=YZe(e);return!i||r==="unknown"?void 0:i({params:t,pNode:n,pict:e})}function aJe(t){const{node:e}=t;if(!e||!e.type)return null;const n={shapeContainer:()=>ZZe(t),shapeTextbox:()=>JZe(t),contentBlock:()=>QZe(t),image:()=>{var s;return(s=e.attrs)!=null&&s.vmlWatermark?tJe(t):null},default:()=>null};return(n[e.type]??n.default)()}const lJe={xmlName:rJe,sdNodeOrKeyName:iJe,type:tt.translatorTypes.NODE,encode:oJe,decode:aJe,attributes:sJe},J_=tt.from(lJe),r9=Object.freeze({pageSize:Object.freeze({width:"12240",height:"15840"}),pageMargins:Object.freeze({top:"1440",right:"1440",bottom:"1440",left:"1440",header:"720",footer:"720",gutter:"0"})}),cJe=(t,e)=>{var a,l;if(!t)return{type:"element",name:"w:sectPr",elements:[]};t.elements||(t.elements=[]);const n=c=>{let u=t.elements.find(d=>d.name===c);return u?(u.elements||(u.elements=[]),u.attributes||(u.attributes={})):(u={type:"element",name:c,elements:[],attributes:{}},t.elements.push(u)),u},r=(a=e==null?void 0:e.pageStyles)==null?void 0:a.pageSize,i=n("w:pgSz");(r==null?void 0:r.width)!=null&&(i.attributes["w:w"]=String(tc(r.width))),(r==null?void 0:r.height)!=null&&(i.attributes["w:h"]=String(tc(r.height))),i.attributes["w:w"]==null&&(i.attributes["w:w"]=r9.pageSize.width),i.attributes["w:h"]==null&&(i.attributes["w:h"]=r9.pageSize.height);const s=(l=e==null?void 0:e.pageStyles)==null?void 0:l.pageMargins,o=n("w:pgMar");return s&&Object.entries(s).forEach(([c,u])=>{const d=tc(u);d!=null&&(o.attributes[`w:${c}`]=String(d))}),Object.entries(r9.pageMargins).forEach(([c,u])=>{const d=`w:${c}`;o.attributes[d]==null&&(o.attributes[d]=u)}),t};function jp(t){const{type:e}=t.node||{};let r={doc:fJe,body:uJe,heading:dJe,paragraph:S2,run:LH,text:DV,lineBreak:VN,table:SV,tableRow:VH,tableCell:jH,bookmarkStart:$R,bookmarkEnd:AV,fieldAnnotation:my,tab:wR,image:BR,hardBreak:VN,commentRangeStart:TV,commentRangeEnd:kV,permStart:CV,permEnd:_V,commentReference:()=>null,shapeContainer:J_,shapeTextbox:J_,contentBlock:J_,vectorShape:uGe,shapeGroup:dGe,structuredContent:my,structuredContentBlock:my,documentPartObject:my,documentSection:my,"page-number":RV,"total-page-number":MV,pageReference:NV,tableOfContents:IV,passthroughBlock:kte,passthroughInline:kte}[e];return r&&"decode"in r&&typeof r.decode=="function"?r.decode(t):r?r(t):(console.error("No translation function found for node type:",e),null)}function kte(t){var n,r;const e=(r=(n=t==null?void 0:t.node)==null?void 0:n.attrs)==null?void 0:r.originalXml;return e?Vi(e):null}function uJe(t){var r,i,s,o,a,l,c,u;let e=(i=(r=t.bodyNode)==null?void 0:r.elements)==null?void 0:i.find(d=>d.name==="w:sectPr");if(e?e.elements||(e={...e,elements:[]}):e={type:"element",name:"w:sectPr",elements:[]},e=cJe(e,t.converter),t.converter){const d=t.converter.importedBodyHasHeaderRef||t.converter.headerFooterModified,f=t.converter.importedBodyHasFooterRef||t.converter.headerFooterModified,h=(s=e.elements)==null?void 0:s.some(b=>b.name==="w:headerReference"),m=(o=t.converter.headerIds)==null?void 0:o.default;if(!h&&m&&!t.editor.options.isHeaderOrFooter&&d){const b=Cte("header",(a=t.converter.headerIds)==null?void 0:a.default);e.elements.push(b)}const y=(l=e.elements)==null?void 0:l.some(b=>b.name==="w:footerReference"),w=(c=t.converter.footerIds)==null?void 0:c.default;if(!y&&w&&!t.editor.options.isHeaderOrFooter&&f){const b=Cte("footer",(u=t.converter.footerIds)==null?void 0:u.default);e.elements.push(b)}}const n=hu(t);return t.isHeaderFooter?{name:"w:body",elements:[...n]}:{name:"w:body",elements:[...n,e]}}const Cte=(t,e)=>({type:"element",name:`w:${t}Reference`,attributes:{"w:type":"default","r:id":e}});function dJe(t){const{node:e}=t,{level:n=1,...r}=e.attrs,i={type:"paragraph",content:e.content,attrs:{...r,styleId:`Heading${n}`}};return S2.decode({...t,node:i})}function fJe(t){const e={type:"body",content:t.node.content};return[{name:"w:document",elements:[jp({...t,node:e})],attributes:X7},t]}function $p(t,e){let n=[];return Array.isArray(t)?n=t:n=[t],e&&e.length&&n.unshift(ebe(e)),{name:"w:r",elements:n}}function ebe(t=[]){return{name:"w:rPr",elements:t.filter(e=>!!Object.keys(e).length)}}function lC(t=[]){return t.flatMap(e=>e.type==="textStyle"?Object.entries(e.attrs).filter(([,n])=>n).map(([n])=>{const r={type:n,attrs:e.attrs};return _te(r)}):_te(e))}function _te(t){const e=Xc.markTypes.find(s=>s.type===t.type);if(!e)return{};const n={name:e.name,attributes:{}},{attrs:r}=t;let i;switch(t.type){case"bold":r!=null&&r.value?n.attributes["w:val"]=r.value:delete n.attributes,n.type="element";break;case"italic":r!=null&&r.value&&r.value!=="1"&&r.value!==!0?n.attributes["w:val"]=r.value:delete n.attributes,n.type="element";break;case"underline":return AH.decode({node:{attrs:{underlineType:r.underlineType??r.underline??null,underlineColor:r.underlineColor??r.color??null,underlineThemeColor:r.underlineThemeColor??r.themeColor??null,underlineThemeTint:r.underlineThemeTint??r.themeTint??null,underlineThemeShade:r.underlineThemeShade??r.themeShade??null}}})||{};case"fontSize":i=r.fontSize,n.attributes["w:val"]=i.slice(0,-2)*2;break;case"fontFamily":i=r.fontFamily,["w:ascii","w:eastAsia","w:hAnsi","w:cs"].forEach(s=>{const o=i.split(", ");n.attributes[s]=o[0]?o[0]:i});break;case"styleId":n.name="w:rStyle",n.attributes["w:val"]=r.styleId;break;case"color":{const s=r.color;if(!s)break;if(String(s).trim().toLowerCase()==="inherit"){n.attributes["w:val"]="auto";break}let a=String(s).replace(/^#/,"").replace(/;$/,"");a.startsWith("rgb")&&(a=GBe(a)),n.attributes["w:val"]=a;break}case"textAlign":n.attributes["w:val"]=r.textAlign;break;case"textIndent":n.attributes["w:firstline"]=tc(r.textIndent);break;case"textTransform":(r==null?void 0:r.textTransform)==="none"?n.attributes["w:val"]="0":delete n.attributes,n.type="element";break;case"lineHeight":n.attributes["w:line"]=mH(r.lineHeight);break;case"highlight":{const s=r.color??r.highlight??null;return xH.decode({node:{attrs:{highlight:s}}})||{}}case"strike":(r==null?void 0:r.value)==="0"&&(n.attributes["w:val"]=r.value);break;case"link":return{}}return n}var Zc,tbe,lS,lF;class Nte{constructor(e){st(this,Zc);this.converter=e}schemaToXml(e,n=!1){return pe(this,Zc,tbe).call(this,e,n).join("")}}Zc=new WeakSet,tbe=function(e,n=!1){const r=JSON.parse(JSON.stringify(e)),i=this.converter.declaration.attributes,s=`<?xml${Object.entries(i).map(([l,c])=>` ${l}="${c}"`).join("")}?>`,o=pe(this,Zc,lF).call(this,r,n);return[s,...o]},lS=function(e){return e==null?e:String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},lF=function(e){if(!e)return null;let{name:n}=e;const{elements:r,attributes:i}=e;let s=`<${n}`;for(let l in i){const c=typeof i[l]=="string"?pe(this,Zc,lS).call(this,i[l]):i[l];s+=` ${l}="${c}"`}const o=n&&(!r||!r.length);o?s+=" />":s+=">";let a=[s];if(!n&&e.type==="text")return pe(this,Zc,lS).call(this,e.text??"");if(r){if(n==="w:instrText"){const l=(r||[]).map(c=>typeof(c==null?void 0:c.text)=="string"?c.text:"").join("");a.push(pe(this,Zc,lS).call(this,l))}else if(n==="w:t"||n==="w:delText"||n==="wp:posOffset")if(r.length===0)console.error(`${n} element has no child elements. Expected text node. Element will be self-closing.`);else if(r[0]==null||typeof r[0].text!="string")console.error(`${n} element's first child is missing or does not have a valid text property. Received: ${JSON.stringify(r[0])}. Pushing empty string to maintain XML structure.`),a.push("");else{let l=r[0].text.replace(/\[\[sdspace\]\]/g,"");l=pe(this,Zc,lS).call(this,l),a.push(l)}else if(r)for(let l of r){const c=pe(this,Zc,lF).call(this,l);if(!c)continue;if(typeof c=="string"){a.push(c);continue}const u=c.filter(d=>!(d==="<undefined>"||d==="</undefined>"));for(const d of u)a.push(d)}}return o||a.push(`</${n}>`),a};const hJe=t=>({...t,commentParaId:MH()}),pJe=(t,e,n,r)=>{var o,a;const i=S2.decode({editor:r,node:t.commentJSON}),s={"w:id":String(e),"w:author":t.creatorName||((o=t.importedAuthor)==null?void 0:o.name),"w:email":t.creatorEmail||((a=t.importedAuthor)==null?void 0:a.email),"w:date":nbe(t.createdTime),"w:initials":mJe(t.creatorName),"w:done":t.resolvedTime?"1":"0","w15:paraId":t.commentParaId,"custom:internalId":t.commentId||t.internalId,"custom:trackedChange":t.trackedChange,"custom:trackedChangeText":t.trackedChangeText||null,"custom:trackedChangeType":t.trackedChangeType,"custom:trackedDeletedText":t.deletedText||null};if(t!=null&&t.parentCommentId){const l=n.find(c=>c.commentId===t.parentCommentId);s["w15:paraIdParent"]=l.commentParaId}return{type:"element",name:"w:comment",attributes:s,elements:[i]}},mJe=t=>t?t.replace("(imported)","").trim().split(" ").map(r=>r[0]).join(""):null,nbe=t=>new Date(t||Date.now()).toISOString().replace(/\.\d{3}Z$/,"Z"),gJe=(t=[],e)=>{const n=Vi(e);return t.forEach(r=>{const i=r.elements[0];i.attributes||(i.attributes={}),i.elements.unshift(Nje);const o=r.attributes["w15:paraId"];i.attributes["w14:paraId"]=o,r.attributes={"w:id":r.attributes["w:id"],"w:author":r.attributes["w:author"],"w:email":r.attributes["w:email"],"w:date":r.attributes["w:date"],"w:initials":r.attributes["w:initials"],"custom:internalId":r.attributes["custom:internalId"],"custom:trackedChange":r.attributes["custom:trackedChange"],"custom:trackedChangeText":r.attributes["custom:trackedChangeText"],"custom:trackedChangeType":r.attributes["custom:trackedChangeType"],"custom:trackedDeletedText":r.attributes["custom:trackedDeletedText"],"xmlns:custom":"http://schemas.openxmlformats.org/wordprocessingml/2006/main"}}),n.elements[0].elements=t,n},yJe=(t=[],e)=>{const n=Vi(e),r=t.map(i=>{const s=i.resolvedTime||i.isDone,o={"w15:paraId":i.commentParaId,"w15:done":s?"1":"0"},a=i.parentCommentId;if(a){const l=t.find(c=>c.commentId===a);o["w15:paraIdParent"]=l.commentParaId}return{type:"element",name:"w15:commentEx",attributes:o}});return n.elements[0].elements=r,n},bJe=(t=[],e,n)=>{const r=Vi(e),i=Vi(n);return r.elements[0].elements=[],i.elements[0].elements=[],t.forEach(s=>{const o=MH(),a={type:"element",name:"w16cid:commentId",attributes:{"w16cid:paraId":s.commentParaId,"w16cid:durableId":o}};r.elements[0].elements.push(a);const l={type:"element",name:"w16cex:commentExtensible",attributes:{"w16cex:durableId":o,"w16cex:dateUtc":nbe(s.createdTime)}};i.elements[0].elements.push(l)}),{documentIdsUpdated:r,extensibleUpdated:i}},wJe=t=>{const e=Vi(t);return e["word/comments.xml"]=_v.COMMENTS_XML_DEF,e["word/commentsExtended.xml"]=_v.COMMENTS_EXTENDED_XML_DEF,e["word/commentsExtensible.xml"]=_v.COMMENTS_EXTENSIBLE_XML_DEF,e["word/commentsIds.xml"]=_v.COMMENTS_IDS_XML_DEF,e["[Content_Types].xml"]=_v.CONTENT_TYPES,e},vJe=t=>{const e=Vi(t);return delete e["word/comments.xml"],delete e["word/commentsExtended.xml"],delete e["word/commentsExtensible.xml"],delete e["word/commentsIds.xml"],e},S5=t=>({..._v.DOCUMENT_RELS_XML_DEF.elements[0].elements.find(r=>r.attributes.Target===t)}),xJe=({convertedXml:t,defs:e,commentsWithParaIds:n,exportType:r})=>{const i=[];if(r==="clean")return{documentXml:vJe(t),relationships:i};const s=wJe(t);s["word/comments.xml"]=gJe(e,s["word/comments.xml"]),i.push(S5("comments.xml")),s["word/commentsExtended.xml"]=yJe(n,s["word/commentsExtended.xml"]),i.push(S5("commentsExtended.xml"));const{documentIdsUpdated:o,extensibleUpdated:a}=bJe(n,s["word/commentsIds.xml"],s["word/commentsExtensible.xml"]);return s["word/commentsIds.xml"]=o,s["word/commentsExtensible.xml"]=a,i.push(S5("commentsIds.xml")),i.push(S5("commentsExtensible.xml")),{relationships:i,documentXml:s}},EJe="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",SJe="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",AJe="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",cF=/rId|mi/g,TJe=(t=[])=>{const e=t.map(n=>{var r;return Number(String(((r=n==null?void 0:n.attributes)==null?void 0:r.Id)??"").replace(cF,""))}).filter(n=>Number.isFinite(n));return e.length?Math.max(...e):0},kJe=(t=[],e=[])=>{var o;if(!(e!=null&&e.length))return t;let n=TJe(t);const r=new Set(t.map(a=>{var l;return(l=a==null?void 0:a.attributes)==null?void 0:l.Id}).filter(Boolean));for(const a of e){const l=(o=a==null?void 0:a.attributes)==null?void 0:o.Id;if(!l||r.has(l))continue;const c=Number(String(l).replace(cF,""));Number.isFinite(c)&&c>n&&(n=c)}const i=[];return e.forEach(a=>{var m;if(!(a!=null&&a.attributes))return;const l=a.attributes,c=l.Id||"";l.Target=(m=l==null?void 0:l.Target)==null?void 0:m.replace(/&/g,"&amp;");const u=t.find(y=>y.attributes.Target===l.Target),d=l.Type===EJe&&c.length>6,f=(l.Type===SJe||l.Type===AJe)&&c.length>6,h=c&&r.has(c);if(!(!d&&!f&&u)){if(!c||h){let y=Math.max(n,1);for(;r.has(`rId${y}`);)y+=1;l.Id=`rId${y}`,n=y}else{const y=Number(String(c).replace(cF,""));Number.isFinite(y)&&y>n&&(n=y)}r.add(l.Id),i.push(a)}}),i.length?[...t,...i]:t},CJe=Object.freeze({swiss:"Arial, sans-serif",roman:"Times New Roman, serif",modern:"Courier New, monospace",script:"cursive",decorative:"fantasy",system:"system-ui",auto:"sans-serif"}),Ite="sans-serif",_Je=10,Rte=(t,{allowOverrideTypeface:e=!0,allowOverrideSize:n=!0,themeResolver:r,state:i})=>{var l,c,u;if(!((l=t==null?void 0:t.elements)!=null&&l.length)||!i)return;const s=t.elements.find(d=>d.name==="w:rFonts");if(s!=null&&s.attributes){const d=s.attributes["w:asciiTheme"];if(d){const h=(r==null?void 0:r(d))||{};(e||!i.typeface)&&h.typeface&&(i.typeface=h.typeface),(e||!i.panose)&&h.panose&&(i.panose=h.panose)}const f=s.attributes["w:ascii"];(e||!i.typeface)&&f&&(i.typeface=f)}const o=t.elements.find(d=>d.name==="w:sz");if((c=o==null?void 0:o.attributes)!=null&&c["w:val"]){const d=Number(o.attributes["w:val"]);if(Number.isFinite(d)){i.fallbackSzTwips===void 0&&(i.fallbackSzTwips=d);const f=d/2;(n||i.fontSizePt===void 0)&&(i.fontSizePt=f)}}const a=t.elements.find(d=>d.name==="w:kern");(u=a==null?void 0:a.attributes)!=null&&u["w:val"]&&(n||i.kern===void 0)&&(i.kern=a.attributes["w:val"])};var Fl,rbe,ibe,sbe,obe,abe,lbe;const Li=class Li{constructor(e=null){st(this,Fl);this.debug=(e==null?void 0:e.debug)||!1,this.domEnvironment={mockWindow:(e==null?void 0:e.mockWindow)||null,mockDocument:(e==null?void 0:e.mockDocument)||null},this.declaration=null,this.documentAttributes=null,this.convertedXml={},this.docx=(e==null?void 0:e.docx)||[],this.media=(e==null?void 0:e.media)||{},this.fonts=(e==null?void 0:e.fonts)||{},this.addedMedia={},this.comments=[],this.inlineDocumentFonts=[],this.docHiglightColors=new Set([]),this.xml=e==null?void 0:e.xml,this.declaration=null,this.numbering={},this.numbering=null,this.pageStyles=null,this.themeColors=null,this.initialJSON=null,this.headers={},this.headerIds={default:null,even:null,odd:null,first:null},this.headerEditors=[],this.footers={},this.footerIds={default:null,even:null,odd:null,first:null},this.footerEditors=[],this.importedBodyHasHeaderRef=!1,this.importedBodyHasFooterRef=!1,this.headerFooterModified=!1,this.linkedStyles=[],this.json=e==null?void 0:e.json,this.tagsNotInSchema=["w:body"],this.savedTagsToRestore=[],this.telemetry=(e==null?void 0:e.telemetry)||null,this.documentInternalId=null,this.fileSource=(e==null?void 0:e.fileSource)||null,this.documentId=(e==null?void 0:e.documentId)||null,this.documentGuid=null,this.documentHash=null,this.documentModified=!1,(this.docx.length||this.xml)&&this.parseFromXml()}static getFontTableEntry(e,n){var s,o;if(!e||!n)return null;const r=e["word/fontTable.xml"];if(!((s=r==null?void 0:r.elements)!=null&&s.length))return null;const i=r.elements.find(a=>a.name==="w:fonts");return(o=i==null?void 0:i.elements)!=null&&o.length&&i.elements.find(a=>{var l;return((l=a==null?void 0:a.attributes)==null?void 0:l["w:name"])===n})||null}static getFallbackFromFontTable(e,n){var o,a,l;const r=Li.getFontTableEntry(e,n),i=(l=(a=(o=r==null?void 0:r.elements)==null?void 0:o.find(c=>c.name==="w:family"))==null?void 0:a.attributes)==null?void 0:l["w:val"];return i?CJe[i.toLowerCase()]||Ite:null}static toCssFontFamily(e,n){if(!e||e.includes(","))return e;const r=Li.getFallbackFromFontTable(n,e)||Ite;return r.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean).includes(e.trim().toLowerCase())?r:`${e}, ${r}`}get docxHelpers(){return yZe}parseFromXml(){var e,n;(e=this.docx)==null||e.forEach(r=>{var i;this.convertedXml[r.name]=this.parseXmlToJson(r.content),r.name==="word/document.xml"&&(this.documentAttributes=(i=this.convertedXml[r.name].elements[0])==null?void 0:i.attributes),r.name==="word/styles.xml"&&(this.convertedXml[r.name]=jZe(this.convertedXml[r.name]))}),this.initialJSON=this.convertedXml["word/document.xml"],this.initialJSON||(this.initialJSON=this.parseXmlToJson(this.xml)),this.declaration=(n=this.initialJSON)==null?void 0:n.declaration,this.resolveDocumentGuid()}parseXmlToJson(e){const n=e.replace(/(<w:(?:t|delText)(?:\s[^>]*)?>)(\s+)(<\/w:(?:t|delText)>)/g,"$1[[sdspace]]$2[[sdspace]]$3");return JSON.parse(qA.xml2json(n,null,2))}static _matchesElementName(e,n){return!e||typeof e!="string"||!n?!1:e===n?!0:e.endsWith(`:${n}`)?e.slice(0,-(n.length+1)).length>0:!1}static _extractNamespacePrefix(e){if(!e||typeof e!="string")return"";const n=e.indexOf(":");return n>0?e.slice(0,n):""}static getStoredCustomProperty(e,n){var r,i,s,o,a;try{const l=e.find(m=>m.name==="docProps/custom.xml");if(!l)return null;const c=new Li,u=l.content,d=c.parseXmlToJson(u),f=(r=d==null?void 0:d.elements)==null?void 0:r.find(m=>Li._matchesElementName(m.name,"Properties"));if(!(f!=null&&f.elements))return null;const h=f.elements.find(m=>{var y;return Li._matchesElementName(m.name,"property")&&((y=m.attributes)==null?void 0:y.name)===n});return h?(a=(o=(s=(i=h.elements)==null?void 0:i[0])==null?void 0:s.elements)==null?void 0:o[0])!=null&&a.text?h.elements[0].elements[0].text:(console.warn(`Malformed property structure for "${n}"`),null):null}catch(l){return console.warn(`Error getting custom property ${n}:`,l),null}}static setStoredCustomProperty(e,n,r,i=!1){var s,o,a,l,c,u,d,f;try{const h="docProps/custom.xml";e[h]||(e[h]=NJe());const y=(s=e[h].elements)==null?void 0:s.find(x=>Li._matchesElementName(x.name,"Properties"));if(!y)return null;y.elements||(y.elements=[]);const w=Li._extractNamespacePrefix(y.name),b=w?`${w}:property`:"property";let E=y.elements.find(x=>{var T;return Li._matchesElementName(x.name,"property")&&((T=x.attributes)==null?void 0:T.name)===n});if(E&&i)return(c=(l=(a=(o=E.elements)==null?void 0:o[0])==null?void 0:a.elements)==null?void 0:l[0])!=null&&c.text?E.elements[0].elements[0].text:(console.warn(`Malformed existing property structure for "${n}"`),null);const A=typeof r=="function"?r():r;if(E)Li._extractNamespacePrefix(E.name)!==w&&(E.name=b),(f=(d=(u=E.elements)==null?void 0:u[0])==null?void 0:d.elements)!=null&&f[0]?E.elements[0].elements[0].text=A:(console.warn(`Malformed property structure for "${n}", recreating structure`),E.elements=[{type:"element",name:"vt:lpwstr",elements:[{type:"text",text:A}]}]);else{const x=y.elements.filter(R=>{var k;return(k=R.attributes)==null?void 0:k.pid}).map(R=>parseInt(R.attributes.pid,10)).filter(Number.isInteger),T=x.length>0?Math.max(...x)+1:2;E={type:"element",name:b,attributes:{name:n,fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:T},elements:[{type:"element",name:"vt:lpwstr",elements:[{type:"text",text:A}]}]},y.elements.push(E)}return A}catch(h){return console.warn(`Error setting custom property ${n}:`,h),null}}static getStoredSuperdocVersion(e){return Li.getStoredCustomProperty(e,"SuperdocVersion")}static setStoredSuperdocVersion(e=this.convertedXml,n="1.4.0"){return Li.setStoredCustomProperty(e,"SuperdocVersion",n,!1)}static extractDocumentGuid(e){var n,r,i;try{const s=e.find(u=>u.name==="word/settings.xml");if(!s)return null;const l=(n=new Li().parseXmlToJson(s.content).elements)==null?void 0:n[0];if(!l)return null;const c=(r=l.elements)==null?void 0:r.find(u=>u.name==="w15:docId");if((i=c==null?void 0:c.attributes)!=null&&i["w15:val"])return c.attributes["w15:val"].replace(/[{}]/g,"")}catch{}return Li.getStoredCustomProperty(e,"DocumentGuid")}getDocumentGuid(){return this.documentGuid}getSuperdocVersion(){return this.docx?Li.getStoredSuperdocVersion(this.docx):null}resolveDocumentGuid(){const e=this.getMicrosoftDocId();if(e){this.documentGuid=e;return}const n=Li.getStoredCustomProperty(this.docx,"DocumentGuid");n&&(this.documentGuid=n)}getMicrosoftDocId(){return this.getDocumentInternalId(),this.documentInternalId?this.documentInternalId.replace(/[{}]/g,""):null}async getDocumentIdentifier(){return this.documentGuid?this.documentGuid:(!this.documentHash&&this.fileSource&&(this.documentHash=await pe(this,Fl,rbe).call(this)),this.documentHash)}promoteToGuid(){return this.documentGuid?this.documentGuid:(this.documentGuid=this.getMicrosoftDocId()||Ts(),this.documentModified=!0,this.documentHash=null,this.documentGuid)}getDocumentDefaultStyles(){var f,h,m,y;const e=this.convertedXml["word/styles.xml"],n=(f=e==null?void 0:e.elements)==null?void 0:f[0],r=(n==null?void 0:n.elements)||[];if(!r.length)return{};const i=r.find(w=>w.name==="w:docDefaults"),s=r.find(w=>{var b;return w.name==="w:style"&&((b=w.attributes)==null?void 0:b["w:styleId"])==="Normal"}),o={typeface:void 0,panose:void 0,fontSizePt:void 0,kern:void 0,fallbackSzTwips:void 0},a=(h=i==null?void 0:i.elements)==null?void 0:h.find(w=>w.name==="w:rPrDefault"),l=((m=a==null?void 0:a.elements)==null?void 0:m.find(w=>w.name==="w:rPr"))??a;Rte(l,{allowOverrideTypeface:!0,allowOverrideSize:!0,themeResolver:w=>this.getThemeInfo(w),state:o});const c=((y=s==null?void 0:s.elements)==null?void 0:y.find(w=>w.name==="w:rPr"))??null;Rte(c,{allowOverrideTypeface:!0,allowOverrideSize:!0,themeResolver:w=>this.getThemeInfo(w),state:o}),o.fontSizePt===void 0&&(Number.isFinite(o.fallbackSzTwips)?o.fontSizePt=o.fallbackSzTwips/2:o.fontSizePt=_Je);const u=o.typeface?Li.toCssFontFamily(o.typeface,this.convertedXml):void 0,d={};return o.fontSizePt!==void 0&&(d.fontSizePt=o.fontSizePt),o.kern!==void 0&&(d.kern=o.kern),o.typeface&&(d.typeface=o.typeface),o.panose&&(d.panose=o.panose),u&&(d.fontFamilyCss=u),d}getDocumentFonts(){var o;const e=[...new Set(this.inlineDocumentFonts||[])],n=this.convertedXml["word/fontTable.xml"];if(!n)return e;const r=(o=n.elements)==null?void 0:o.find(a=>a.name==="w:fonts");if(!r||!r.elements)return e;const i=r.elements.filter(a=>a.name==="w:font").map(a=>a.attributes["w:name"]),s=[...e,...i];return[...new Set(s)]}getFontFaceImportString(){var u,d;const e=this.convertedXml["word/fontTable.xml"];if(!e||!Object.keys(this.fonts).length)return;const n=e.elements.find(f=>f.name==="w:fonts"),r=n==null?void 0:n.elements.filter(f=>{var h;return(h=f.elements)==null?void 0:h.some(m=>(m==null?void 0:m.attributes)&&m.attributes["r:id"]&&m.attributes["w:fontKey"])}),i=r==null?void 0:r.reduce((f,h)=>{var y;const m=(y=h.elements.filter(w=>w.name.startsWith("w:embed")))==null?void 0:y.map(w=>({...w,fontFamily:h.attributes["w:name"]}));return[...f,...m]},[]),s=this.convertedXml["word/_rels/fontTable.xml.rels"],o=(s==null?void 0:s.elements.find(f=>f.name==="Relationships"))||{},{elements:a}=o,l=[];let c="";for(const f of i){const h=(d=(u=a.find(_=>_.attributes.Id===f.attributes["r:id"]))==null?void 0:u.attributes)==null?void 0:d.Target;if(!h)return;const m=this.fonts[`word/${h}`],y=m==null?void 0:m.buffer;if(!y)return;const w=KBe(y,f.attributes["w:fontKey"]);if(!w)return;const b=new Blob([w],{type:"font/ttf"}),E=URL.createObjectURL(b),A=f.name.includes("Regular"),x=f.name.includes("Bold"),T=f.name.includes("Italic"),R=f.name.includes("Light"),k=A?"normal":x?"bold":R?"200":"normal";l.includes(f.fontFamily)||l.push(f.fontFamily),c+=`
        @font-face {
          font-style: ${T?"italic":"normal"};
          font-weight: ${k};
          font-display: swap;
          font-family: ${f.fontFamily};
          src: url(${E}) format('truetype');
        }
      `}return{styleString:c,fontsImported:l}}getDocumentInternalId(){var i,s,o,a;const e="word/settings.xml";if(!this.convertedXml[e])return;const n=this.convertedXml[e];if(!((o=(s=(i=n.elements)==null?void 0:i[0])==null?void 0:s.elements)!=null&&o.length))return;const r=n.elements[0].elements.find(l=>l.name==="w15:docId");this.documentInternalId=(a=r==null?void 0:r.attributes)==null?void 0:a["w15:val"]}createDocumentIdElement(){const e=Ts().toUpperCase();return this.documentInternalId=e,{type:"element",name:"w15:docId",attributes:{"w15:val":`{${e}}`}}}getThemeInfo(e){e=e.toLowerCase();const n=this.convertedXml["word/theme/theme1.xml"];if(!n)return{};const s=n.elements.find(c=>c.name==="a:theme").elements.find(c=>c.name==="a:themeElements").elements.find(c=>c.name==="a:fontScheme");let o;e.startsWith("major")?o=s.elements.find(c=>c.name==="a:majorFont").elements[0]:e.startsWith("minor")&&(o=s.elements.find(c=>c.name==="a:minorFont").elements[0]);const{typeface:a,panose:l}=o.attributes;return{typeface:a,panose:l}}getSchema(e){let n;try{this.getDocumentInternalId(),this.convertedXml.media||(this.convertedXml.media=this.media),n=DZe(this.convertedXml,this,e)}catch(r){e==null||e.emit("exception",{error:r,editor:e})}return n?(this.savedTagsToRestore.push({...n.savedTagsToRestore}),this.pageStyles=n.pageStyles,this.numbering=n.numbering,this.comments=n.comments,this.linkedStyles=n.linkedStyles,this.inlineDocumentFonts=n.inlineDocumentFonts,this.themeColors=n.themeColors??null,n.pmDoc):null}schemaToXml(e,n=!1){return new Nte(this).schemaToXml(e,n)}async exportToDocx(e,n,r,i=!1,s,o=[],a,l=!1,c){const u=o.map(A=>hJe(A)),d=u.map((A,x)=>pJe(A,x,u,a)),{result:f,params:h}=this.exportToXmlJson({data:e,editorSchema:n,comments:o,commentDefinitions:d,commentsExportType:s,isFinalDoc:i,editor:a,fieldsHighlightColor:c});if(l)return f;const y=new Nte(this).schemaToXml(f);await pe(this,Fl,lbe).call(this,{...r,...h.media,...this.media},a);let w={...this.convertedXml},b=[];if(o.length){const{documentXml:A,relationships:x}=pe(this,Fl,sbe).call(this,{defs:h.exportedCommentDefs,exportType:s,commentsWithParaIds:u});w={...A},b=x}this.convertedXml={...this.convertedXml,...w};const E=pe(this,Fl,obe).call(this,{isFinalDoc:i});return pe(this,Fl,abe).call(this,[...h.relationships,...b,...E]),Li.setStoredSuperdocVersion(this.convertedXml),(this.documentModified||this.documentGuid)&&(this.documentGuid||(this.documentGuid=this.getMicrosoftDocId()||Ts()),Li.setStoredCustomProperty(this.convertedXml,"DocumentGuid",this.documentGuid,!0)),pe(this,Fl,ibe).call(this,h),y}exportToXmlJson({data:e,editorSchema:n,comments:r,commentDefinitions:i,commentsExportType:s="clean",isFinalDoc:o=!1,editor:a,isHeaderFooter:l=!1,fieldsHighlightColor:c=null}){const u=this.savedTagsToRestore.find(h=>h.name==="w:body"),[d,f]=jp({node:e,bodyNode:u,relationships:[],documentMedia:{},media:{},isFinalDoc:o,editorSchema:n,converter:this,pageStyles:this.pageStyles,comments:r,commentsExportType:s,exportedCommentDefs:i,editor:a,isHeaderFooter:l,fieldsHighlightColor:c});return{result:d,params:f}}createDefaultHeader(e="default"){if(typeof e!="string")throw new TypeError(`variant must be a string, received ${typeof e}`);const n=["default","first","even","odd"];if(!n.includes(e))throw new Error(`Invalid header variant: ${e}. Must be one of: ${n.join(", ")}`);if(this.headerIds[e])return console.warn(`[SuperConverter] Header already exists for variant '${e}': ${this.headerIds[e]}`),this.headerIds[e];const r=`rId-header-${e}`,i={type:"doc",content:[{type:"paragraph",content:[]}]};return this.headers[r]=i,this.headerIds[e]=r,this.headerIds.ids||(this.headerIds.ids=[]),this.headerIds.ids.includes(r)||this.headerIds.ids.push(r),this.headerFooterModified=!0,this.documentModified=!0,r}createDefaultFooter(e="default"){if(typeof e!="string")throw new TypeError(`variant must be a string, received ${typeof e}`);const n=["default","first","even","odd"];if(!n.includes(e))throw new Error(`Invalid footer variant: ${e}. Must be one of: ${n.join(", ")}`);if(this.footerIds[e])return console.warn(`[SuperConverter] Footer already exists for variant '${e}': ${this.footerIds[e]}`),this.footerIds[e];const r=`rId-footer-${e}`,i={type:"doc",content:[{type:"paragraph",content:[]}]};return this.footers[r]=i,this.footerIds[e]=r,this.footerIds.ids||(this.footerIds.ids=[]),this.footerIds.ids.includes(r)||this.footerIds.ids.push(r),this.headerFooterModified=!0,this.documentModified=!0,r}static getStoredSuperdocId(e){return console.warn("getStoredSuperdocId is deprecated, use getDocumentGuid instead"),Li.extractDocumentGuid(e)}static updateDocumentVersion(e,n){return console.warn("updateDocumentVersion is deprecated, use setStoredSuperdocVersion instead"),Li.setStoredSuperdocVersion(e,n)}};Fl=new WeakSet,rbe=async function(){if(!this.fileSource)return`HASH-${Date.now()}`;try{let e;if(ar.isBuffer(this.fileSource))e=this.fileSource;else if(this.fileSource instanceof ArrayBuffer)e=ar.from(this.fileSource);else if(this.fileSource instanceof Blob||this.fileSource instanceof File){const r=await this.fileSource.arrayBuffer();e=ar.from(r)}else return`HASH-${Date.now()}`;return`HASH-${rje(e).toString("hex").toUpperCase()}`}catch(e){return console.warn("Could not generate document hash:",e),`HASH-${Date.now()}`}},ibe=function(){const e="word/numbering.xml";let n=this.convertedXml[e];const r=this.numbering;n||(n=Zpe);const i=n.elements[0],s=Object.values(r.abstracts).map(a=>a),o=Object.values(r.definitions).map(a=>a);i.elements=[...s,...o],this.convertedXml[e]=n},sbe=function({defs:e,exportType:n,commentsWithParaIds:r}){const{documentXml:i,relationships:s}=xJe({exportType:n,convertedXml:this.convertedXml,defs:e,commentsWithParaIds:r});return{documentXml:i,relationships:s}},obe=function({isFinalDoc:e=!1}){const r=this.convertedXml["word/_rels/document.xml.rels"].elements.find(s=>s.name==="Relationships"),i=[];return Object.entries(this.headers).forEach(([s,o],a)=>{var m,y,w,b,E,A;const l=((m=r.elements.find(x=>x.attributes.Id===s))==null?void 0:m.attributes.Target)||`header${a+1}.xml`,c=this.headerEditors.find(x=>x.id===s);if(!c)return;const{result:u,params:d}=this.exportToXmlJson({data:o,editor:c.editor,editorSchema:c.editor.schema,comments:[],commentDefinitions:[],isHeaderFooter:!0,isFinalDoc:e}),f=u.elements[0].elements;if(this.convertedXml[`word/${l}`]||(this.convertedXml[`word/${l}`]={declaration:(y=this.initialJSON)==null?void 0:y.declaration,elements:[{attributes:X7,name:"w:hdr",type:"element",elements:[]}]},i.push({type:"element",name:"Relationship",attributes:{Id:s,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",Target:l}})),this.convertedXml[`word/${l}`].elements[0].elements=f,d.relationships.length){const x=((E=(b=(w=this.convertedXml[`word/_rels/${l}.rels`])==null?void 0:w.elements)==null?void 0:b.find(T=>T.name==="Relationships"))==null?void 0:E.elements)||[];this.convertedXml[`word/_rels/${l}.rels`]={declaration:(A=this.initialJSON)==null?void 0:A.declaration,elements:[{name:"Relationships",attributes:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},elements:[...x,...d.relationships]}]}}}),Object.entries(this.footers).forEach(([s,o],a)=>{var m,y,w,b,E,A;const l=((m=r.elements.find(x=>x.attributes.Id===s))==null?void 0:m.attributes.Target)||`footer${a+1}.xml`,c=this.footerEditors.find(x=>x.id===s);if(!c)return;const{result:u,params:d}=this.exportToXmlJson({data:o,editor:c.editor,editorSchema:c.editor.schema,comments:[],commentDefinitions:[],isHeaderFooter:!0,isFinalDoc:e}),f=u.elements[0].elements;if(this.convertedXml[`word/${l}`]||(this.convertedXml[`word/${l}`]={declaration:(y=this.initialJSON)==null?void 0:y.declaration,elements:[{attributes:X7,name:"w:ftr",type:"element",elements:[]}]},i.push({type:"element",name:"Relationship",attributes:{Id:s,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",Target:l}})),this.convertedXml[`word/${l}`].elements[0].elements=f,d.relationships.length){const x=((E=(b=(w=this.convertedXml[`word/_rels/${l}.rels`])==null?void 0:w.elements)==null?void 0:b.find(T=>T.name==="Relationships"))==null?void 0:E.elements)||[];this.convertedXml[`word/_rels/${l}.rels`]={declaration:(A=this.initialJSON)==null?void 0:A.declaration,elements:[{name:"Relationships",attributes:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},elements:[...x,...d.relationships]}]}}}),i},abe=function(e=[]){const r=this.convertedXml["word/_rels/document.xml.rels"].elements.find(i=>i.name==="Relationships");r.elements=kJe(r.elements,e)},lbe=async function(e={}){const n={...this.convertedXml.media||{}};for(const[r,i]of Object.entries(e))i!=null&&(n[r]=await VBe(i));this.convertedXml.media=n,this.media=this.convertedXml.media,this.addedMedia={...n}},Mt(Li,"allowedElements",Object.freeze({"w:document":"doc","w:body":"body","w:p":"paragraph","w:r":"run","w:t":"text","w:delText":"text","w:br":"lineBreak","w:tbl":"table","w:tr":"tableRow","w:tc":"tableCell","w:drawing":"drawing","w:bookmarkStart":"bookmarkStart","w:sectPr":"sectionProperties","w:rPr":"runProperties","w:commentRangeStart":"commentRangeStart","w:commentRangeEnd":"commentRangeEnd","w:commentReference":"commentReference"})),Mt(Li,"markTypes",[{name:"w:b",type:"bold",property:"value"},{name:"w:i",type:"italic"},{name:"w:u",type:"underline",mark:"underline",property:"underlineType"},{name:"w:strike",type:"strike",mark:"strike",property:"value"},{name:"w:color",type:"color",mark:"textStyle",property:"color"},{name:"w:sz",type:"fontSize",mark:"textStyle",property:"fontSize"},{name:"w:rFonts",type:"fontFamily",mark:"textStyle",property:"fontFamily"},{name:"w:rStyle",type:"styleId",mark:"textStyle",property:"styleId"},{name:"w:jc",type:"textAlign",mark:"textStyle",property:"textAlign"},{name:"w:ind",type:"textIndent",mark:"textStyle",property:"textIndent"},{name:"w:spacing",type:"lineHeight",mark:"textStyle",property:"lineHeight"},{name:"w:spacing",type:"letterSpacing",mark:"textStyle",property:"letterSpacing"},{name:"link",type:"link",mark:"link",property:"href"},{name:"w:highlight",type:"highlight",mark:"highlight",property:"color"},{name:"w:shd",type:"highlight",mark:"highlight",property:"color"},{name:"w:caps",type:"textTransform",mark:"textStyle",property:"textTransform"}]),Mt(Li,"propertyTypes",Object.freeze({"w:pPr":"paragraphProperties","w:rPr":"runProperties","w:sectPr":"sectionProperties","w:numPr":"numberingProperties","w:tcPr":"tableCellProperties"})),Mt(Li,"elements",new Set(["w:document","w:body","w:p","w:r","w:t","w:delText"]));let Xc=Li;function NJe(){return _je}var IJe=HFe();const uF=oH(IJe);var i9={exports:{}},Mte;function RJe(){return Mte||(Mte=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,m=new Array(h);f<h;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,m){var y=n?n+c:c;if(!this._events[y])return!1;var w=this._events[y],b=arguments.length,E,A;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,f),!0;case 5:return w.fn.call(w.context,u,d,f,h),!0;case 6:return w.fn.call(w.context,u,d,f,h,m),!0}for(A=1,E=new Array(b-1);A<b;A++)E[A-1]=arguments[A];w.fn.apply(w.context,E)}else{var x=w.length,T;for(A=0;A<x;A++)switch(w[A].once&&this.removeListener(c,w[A].fn,void 0,!0),b){case 1:w[A].fn.call(w[A].context);break;case 2:w[A].fn.call(w[A].context,u);break;case 3:w[A].fn.call(w[A].context,u,d);break;case 4:w[A].fn.call(w[A].context,u,d,f);break;default:if(!E)for(T=1,E=new Array(b-1);T<b;T++)E[T-1]=arguments[T];w[A].fn.apply(w[A].context,E)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&o(this,h);else{for(var y=0,w=[],b=m.length;y<b;y++)(m[y].fn!==u||f&&!m[y].once||d&&m[y].context!==d)&&w.push(m[y]);w.length?this._events[h]=w.length===1?w[0]:w:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(i9)),i9.exports}var MJe=RJe();const FV=oH(MJe),cbe="data:application/octet-stream;base64,UEsDBBQAAAAIAAAAIQAykW9XXgEAAKUFAAATABwAW0NvbnRlbnRfVHlwZXNdLnhtbFVUCQADMNDOEjDQzhJ1eAsAAQT1AQAABBQAAAC1lMtqwzAQRfeF/oPRNthKuiilxMmij2UbaPoBijRORPVCmrz+vuM4NaWkMeSxMcgz994zQsxwvLEmW0FM2ruSDYo+y8BJr7Sbl+xz+po/sCyhcEoY76BkW0hsPLq9GU63AVJGapdKtkAMj5wnuQArUuEDOKpUPlqBdIxzHoT8EnPgd/3+PZfeITjMsfZgo+EzVGJpMHvZ0O+GJIJJLHtqGuuskokQjJYCqc5XTv1JyfcJBSl3PWmhQ+pRA+MHE+rK/wF73TtdTdQKsomI+CYsdfG1j4orL5eWlMVxmwOcvqq0hFZfu4XoJaREd25N0Vas0K7XxeGWdgaRlJcHaa07IRJuDaTLEzS+3fGASIJrAOydOxHWMPu4GsUv806QinKnYmbg8hitdScE0hqA5js4m2NncyySOifRh0RrJZ4w9s/eqNU5DRwgoj7+6tpEsj57PqhXkgJ1IJvvluzoG1BLAwQKAAAAAACTZE1bAAAAAAAAAAAAAAAACQAcAGRvY1Byb3BzL1VUCQADhhztaIcc7Wh1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgAAAAhACEYr1llAQAAxQIAABAAHABkb2NQcm9wcy9hcHAueG1sVVQJAAMw0M4SMNDOEnV4CwABBPUBAAAEFAAAAJ1STU/DMAy9I/Efqt63dBwmNHlBaAhx4GPSCpyjxG0j0iRKson9e5wVSoEbOdnP9st7TuDqvTfFAUPUzq7LxbwqC7TSKW3bdflc384uyyImYZUwzuK6PGIsr/j5GWyD8xiSxlgQhY3rskvJrxiLssNexDmVLVUaF3qRKA0tc02jJd44ue/RJnZRVUuG7wmtQjXzI2E5MK4O6b+kysmsL77UR098HGrsvREJ+WOeNHPlUg9sRKF2SZha98grgscEtqLFyBfAhgBeXVAx9wwBbDoRhEy0vwxOMrj23mgpEu2VP2gZXHRNKp5OYos8DWzaAmRgh3IfdDpmqmkK99ri6YIhIFVBtEH47gROMthJYXBD1nkjTERg3wBsXO+FJTo2RsT3Fp997W7yFj5HfoITi686dTsvJP4yO8FhRygqUj8KGAG4o8cIJrPTrG1RffX8LeT1vQy/ki+W84rOaV9fGLkevwv/AFBLAwQUAAAACAAAACEACvOn+GYBAADtAgAAEQAcAGRvY1Byb3BzL2NvcmUueG1sVVQJAAMw0M4SMNDOEnV4CwABBPUBAAAEFAAAAJ2SXU+DMBSG7038D6T3UGBqDAGWTLMrZ0yc0XhX27Otjn6k7cb27y0wmMRdeXc+nvP29G3z6UFUwR6M5UoWKIliFICkinG5LtDbch7eo8A6IhmplIQCHcGiaXl9lVOdUWXgxSgNxnGwgVeSNqO6QBvndIaxpRsQxEaekL65UkYQ51OzxprQLVkDTuP4DgtwhBFHcCMY6kERnSQZHST1zlStAKMYKhAgncVJlOAz68AIe3Gg7fwiBXdHDRfRvjnQB8sHsK7rqJ60qN8/wR+Lp9f2qiGXjVcUUJkzmjnuKihzfA59ZHdf30BdVx4SH1MDxClTPnO6DWZgJKlapq83jm/hWCvDrJ8eZR5jYKnh2vl37LRHBU9XxLqFf9gVBzY7jo/5224mDOx58y/KtCWGND+Z3K0GLPDmZJ2Vfed98vC4nKMyjdObMEnD5G6Zpll8m8XxZ7PdaP4sKE4L/FuxF+gMGn/Q8gdQSwMECgAAAAAAk2RNWwAAAAAAAAAAAAAAAAYAHABfcmVscy9VVAkAA4Yc7WiHHO1odXgLAAEE9QEAAAQUAAAAUEsDBBQAAAAIAAAAIQAekRq36QAAAE4CAAALABwAX3JlbHMvLnJlbHNVVAkAAzDQzhIw0M4SdXgLAAEE9QEAAAQUAAAArZLBasMwDEDvg/2D0b1R2sEYo04vY9DbGNkHCFtJTBPb2GrX/v082NgCXelhR8vS05PQenOcRnXglF3wGpZVDYq9Cdb5XsNb+7x4AJWFvKUxeNZw4gyb5vZm/cojSSnKg4tZFYrPGgaR+IiYzcAT5SpE9uWnC2kiKc/UYySzo55xVdf3mH4zoJkx1dZqSFt7B6o9Rb6GHbrOGX4KZj+xlzMtkI/C3rJdxFTqk7gyjWop9SwabDAvJZyRYqwKGvC80ep6o7+nxYmFLAmhCYkv+3xmXBJa/ueK5hk/Nu8hWbRf4W8bnF1B8wFQSwMECgAAAAAAk2RNWwAAAAAAAAAAAAAAAAUAHAB3b3JkL1VUCQADhhztaIcc7Wh1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgAoWRNW+xw0GIQAgAAtAcAABIAHAB3b3JkL2ZvbnRUYWJsZS54bWxVVAkAA54c7WieHO1odXgLAAEE9QEAAAQUAAAAvZPBbqMwEIbvlfoOlu8NhpA0RSFV222kvexh1T6AY0ywFtvI44Tk7dcYiBSyuy3tqiCEGf75mPnHLO8PskR7bkBoleJwQjDiiulMqG2KX1/WNwuMwFKV0VIrnuIjB3y/ur5a1kmulQXk8hUkkqW4sLZKggBYwSWFia64ci9zbSS17tFsA0nNr111w7SsqBUbUQp7DCJC5vj6CrmjZZn3oHSeC8a/abaTXFkPCQwvHVYrKEQFZ8j6Pcham6wymnEA170sW6ikQp2zwviCJgUzGnRuJ663rjbPc4yQ+JUsB5TZOEr0Z8qc8cM40KIDBS7zAiaycbD5CSayIexjZQ0p2W4UJ5r2FTW3Jn0IhMxmxThmP8GgyaWWFhSKCywf1+/sxDxKNwgkWfJ9q7Shm9KR3CZDbosgD0btZJobaieO+j6Qdwiv2mK6nxLViaLSUV6E5IB+8Br91JKqXtZJK6o08NCp97RMMWkanZMpmZHYXZFbxTg4T2EFNcDtKYUMBTmVojz2743/6kBSCcuKXrGnRjQdD0Ugtk6ygw1J8TMhJHper3EbCVP85CK3i9ljF4maSvxx10WmpwhpIsxz/GPYcpjnnDT915dB6+Bf/HzSOyO4aRx908tb59+d97TxMv60l1Jn3PzbzFwcePYRJ+PpVzv54MZevunho9uPsfewPT/rIdQC4P/sx4evdrFfwuo3UEsDBBQAAAAIAAAAIQCWFrgr1QIAAIgLAAARABwAd29yZC9kb2N1bWVudC54bWxVVAkAAzDQzhIw0M4SdXgLAAEE9QEAAAQUAAAApZZbb9sgFMffJ+07WH5v8S1OYjWttGab+jCpWrcPQIDEqAYsILd9+h3s+LJ5qxz3CXPg/PjDORxz93AShXdg2nAlV354G/gek0RRLncr/+ePLzcL3zMWS4oLJdnKPzPjP9x//HB3zKgie8Gk9QAhTXYsycrPrS0zhAzJmcDmVnCilVFbe0uUQGq75YSho9IURUEYVF+lVoQZA+s9YnnAxr/gyGkcjWp8BGcHTBDJsbbs1DHCqyEztESLISiaAIIdRuEQFV+NSpFTNQAlk0CgakCaTSP9Y3PpNFI0JM2nkeIhaTGNNEgnMUxwVTIJg1ulBbbQ1TsksH7dlzcALrHlG15wewZmkDYYzOXrBEXg1RJETK8mzJFQlBUxbShq5e+1zC7+N62/k57V/pem9WDFuGVhuSViJ1sY2/jqMWdXu68vhaU6NaRZAeeopMl52VYHMZUGg3kDObx1AAdR+G1lC0detf+VtnUdhg44Rv4ldqKolb9NDIMR0XSI1mOMhD/XbJQIyOBu4UlH0zvccGTxaQDRAJASNvJn0TAWFwYi3e12HD7yWjWctOVw2uNME9MD0P1ViChudLjGufdYhlqaX4drYoScL7Y4xybvE9l1G5y1uLPonXe5e9+l+qrVvuxo/H20p668HuV1GwzSvyNYmveJeclxCVVXkOxpJ5XGmwIUwVXz4LZ4VQS8Ol1d49U3wGti7VUJ5Lmq5d/DO22j6Nm1JQwkWYk1foI0T8JlmqTz0K+s8Jezzhoks+VivpyBNYM3If0OJkiveD3/1JqetTPGYZA8fm6Na7bF+8IOpz/3JiMnwzBin/VYfiV89/ILBqFihVGUBG4iJHQ4W8A3qid8w45oFRTWMKmnaL7LbdfdKGuV6PoF2/ZGc4Ypg3XnUdXdKmV73d3eVt3LckQVBqymxITVcyozvIe/aheSrOCSPXNLQGWcVqOo2Xf1WUcEdU/o+99QSwMEFAAAAAgAAAAhAMrnZYorBAAAvgwAABEAHAB3b3JkL3NldHRpbmdzLnhtbFVUCQADMNDOEjDQzhJ1eAsAAQT1AQAABBQAAAC1V22PmzgQ/n7S/QfE58uG1ySLmq3yervV5lqVre6zAZNYa2Nkm03T0/33GwwO9BZVSav9hJln5pnxeGYM795/ZdR6wUISXsxt98axLVykPCPFfm5/edqOZrYlFSoyRHmB5/YJS/v93e+/vTtGEisFatICikJGLJ3bB6XKaDyW6QEzJG94iQsAcy4YUvAq9mOGxHNVjlLOSqRIQihRp7HnOBO7peFzuxJF1FKMGEkFlzxXtUnE85ykuH0YC3GJ38ZkzdOK4UJpj2OBKcTAC3kgpTRs7GfZADwYkpcfbeKFUaN3dJ0LtnvkIjtbXBJebVAKnmIp4YAYNQGSonMcvCI6+74B3+0WNRWYu45e9SMPryPwXhFMUvz1Oo5ZyzEGyz4Pya7jmZx5SNbj+blgegRZdRWF55s46kdt3uOSmcoO19GZMxrXtkihA5KHPiO+boPhme7EunxLekkFNtAjSQQSp375sTR62BdcoIRCOFCGFlSSpaOzmqOsH1ZTHZbJg6WTa9/B1PnGObOOUYlFCq0HI8tz7HENQMHzPFZIAVEkS0ypnmEpxQj8HqO9QAymj5FomwznqKLqCSWx4iUovSDY3tRQpgckUKqwiEuUAtuKF0pwavQy/hdXK5hkAhqttdBzrVvFzYwEiwIx2PB3c2/HM1xHVgly+cnYxrsb9l3+3xGHmS5Ihp/qRMfqRPEWgo/JN7wosg+VVAQY9fT7hQh+FAAuas8foTSeTiXeYqQqSNMbOdMnsaWk3BEhuHgoMqiNN3NG8hwLcECg1nZQPkTwo87zPUYZXKVv5LeS+G9Qhs70n6Asn5dcKc7uT+UBcv1rJ6nrfdwvX/ggyKRZfOZcnVVhbPnr6bKJtEYvQXzXCVabQWTibN1hm0XgO/4gsnLXbjCMhLPlaggJboOJuxhCJqG3CcIhZLH0Zv5sCFku3Wk4iKxW/srfDiIbZz28n83Km04HY9vees7tpj2d9kxYVH9qfBJmVTe2xRqLFWKJIMja1R8j41ojEc9LUhg8wTClcR+Jq8SAo1EDSIYo3UKJGcBp5BmR5Rrnek13SOw73lZDDEphyn44c9VTG4s/Ba/KBj0KVDYNa1TcIGgtSaEeCTNyWSWxsSrgXulBVZF9fBE6T116jpGCBtCD7xHpRtK6uBh9idtGoyKumwTvUFk2vZbs3blNyf6g3Lo9FLxl8M2qX5K912KexrwG0y8orXcG2u2ik3lG1tPzjczvZIGRBZ0sNLKwk02MbFLLDjBdBVx1z9D2ZlnLc04pP+LsvsNficwlmBI48fjEku5uu2kwSiTMoRKuQcWFwf7QmBtEGU8f6vs6aOT+YhGuF860gUN9fSo9qiC1n3G+RBJnLWZMw8b0n8nEmbjuajYKZpvb0WYaBKOZu7wdTafO1PW3rufPnH/bPjA/Hnf/AVBLAwQUAAAACAAAACEA24Vsw30EAACXHQAAEgAcAHdvcmQvbnVtYmVyaW5nLnhtbFVUCQADMNDOEjDQzhJ1eAsAAQT1AQAABBQAAADNmc1u4zYQx+8F+g6CgB4Tifq2sM4iySZFFttF0U3RMy3RlhB+CBRlx9d9mT5CH2tfoaRkyXLkxJIctz4pJjk/zQxnyL+dDx+fCdaWiOcpo1MdXJq6hmjE4pQupvqfj/cXga7lAtIYYkbRVF+jXP949fNPH1YhLcgMcblQkwyah6ssmuqJEFloGHmUIALzS5JGnOVsLi4jRgw2n6cRMlaMx4ZlArP8K+MsQnkuObeQLmGub3DRcz9azOFKGiugY0QJ5AI9bxlgMMQ1JkbQBVkjQDJCC3RR9mCUZyivOiBnFEh61SG540h7gvPGkawuyR9HsrukYBypU06kW+AsQ1ROzhknUMiPfGEQyJ+K7EKCMyjSWYpTsZZM06sxMKVPIzySVg2B2PFggm8QFiNsxzWFTfWC03Bjf9HYK9fDyn7zaCwQ7vda+bqJgZ4FzkVty/vkrjL/xKKCICrKrBkcYZlHRvMkzZrTgYylycmkhizfSsCSYL052UDPVnvtaPtUbcMW2Mf9zd4RXHn+NhGYPXZTIRqLPi7svrP2hMgK3r54VGpayQU9D58aYHUAXoR6XhY1I9gwjGjb3YqT9myrmuM1nDRuccY50wLExSCEZdd+qIcyb7HyWMTJMFy9R4ayhQImME/aRDQsQLfBrUkr39niuKb6lbMi29LS42gP2+N1RYcFaHovdzDLj3PmWwIzeeqSKHxYUMbhDEuPZKtpslu0cge0qlzVQ6s6QKv3WisLSFOnln4lhRqc5YLDSHwtiLbz6UFWuxR8khlyJFUeV4OVprueC8RvOIJPaomi0Fy9LVxCeQUAD1jejenrhpohBRbpF7RE+HGdoXpNsp7xNP5NzWE1V60VJMP1Chfc3Tp3ZlDN4KWaSOWjcioUGZb3remYE9M0QelD6WPjRGUnZeg9aQZnBcZINMRHeQfVUz++/9OMf47qUYzmm+XZ71w9UqrCVMNT3bdKTxJIF6Ugtj1TrTWaxXzzuGdU5Cq5eZTKOvy2JjOGS9NrmbedgZRKcIzmUGZmAyspRunYy0yATibsckTeZ/JSXCK14ujMsKF5AY4zLjG3rOAp4tpXtGpl58VolHcXDsua1cma+/5Z+/H976F5s4A3Lm9/ydXqO1neytru2LAE2Xsa7AQJGtxwVhD83x3nnGXHyTycdce5Z9pxjj3yCH/vjvPOtONcc+RR/n4d559lx7n+yLP6P+q44Ew7znNGHuHHd5yxo24PSl8wRvq6gW8C++b6OOl7d+c5wL91+kjf+57bGKMoJRDv3cdfwOU7a9+echVMRhYlZivEvyAh92J/RNbgiA6p1p5aEtwcE9IfjEC6PyJ7X0Q8XSQDBCUIeoTUVX/3I0N6s+acwTt0SP71VGynKzp3cEiHhFtPOXWyovOGF11HU/Uquq4AOknR+YN36JAC6ilaTld0wfCQDmiXnoriZEU3GV50HVnxStF1NQAt737auvPVD2dhXJQ/q5WDMlTHn3jWy5/LHpprv34X3cO09jGdwHWB7wDwOhO0mUbrH6pX/wJQSwMEFAAAAAgAAAAhAL5+dmJWAQAA0AMAABQAHAB3b3JkL3dlYlNldHRpbmdzLnhtbFVUCQADMNDOEjDQzhJ1eAsAAQT1AQAABBQAAACd01FvwiAQAOD3JfsPhHelumlMYzVZFpe9LEu2/QAKV0sGXAO46n79aLWuiy92T0DLfbnjYLneG02+wHmFNqOTcUIJWIFS2W1GP943owUlPnAruUYLGT2Ap+vV7c2yTmvI3yCEuNOTqFifGpHRMoQqZcyLEgz3Y6zAxp8FOsNDXLotM9x97qqRQFPxoHKlVTiwaZLM6Ylx1yhYFErAI4qdARvaeOZARxGtL1XlO62+RqvRycqhAO9jPUYfPcOVPTOT+wvIKOHQYxHGsZhTRi0VwydJOzP6F5gNA6YXwFzAfpixOBksRvYdJYc587OjZM/5XzI9QO4GEdO7Lo9maMJ7lpdBlsO4rkesieWBl9yXfRGGFTg7cwfTnLcR6fPWouO5jlK8QSReAtLC5NiFZiDHxpKuBNKeC13FJ4ZVUEZ9wwbdg8Pag2PNZ6411q8vT3HB/rzD1Q9QSwMEFAAAAAgAAAAhAD+v4WZfDwAADaYAAA8AHAB3b3JkL3N0eWxlcy54bWxVVAkAAzDQzhIw0M4SdXgLAAEE9QEAAAQUAAAA3Z1tc9s2Esff38x9B45e9V6ksp5lT92O7STnzCWpWzvX1xAJWaj5oCOpOO6nPwB8EKUlKC64UdRMZlqL4v4I4L+7xIIU+dMvXwLf+czjREThZW/w41nP4aEbeSJ8vOx9enj7at5zkpSFHvOjkF/2XnjS++Xnf/7jp+eLJH3xeeJIQJhcBO5lb5Wm64t+P3FXPGDJj9Gah/LLZRQHLJUf48d+wOKnzfqVGwVrloqF8EX60h+enU17OSZuQ4mWS+Hy15G7CXiYavt+zH1JjMJkJdZJQXtuQ3uOYm8dRy5PEtnpwM94ARNhiRmMASgQbhwl0TL9UXYmb5FGSfPBmf4r8LeACQ4wBICpy7/gGPOc0ZeWVY7wcJxpyRFehWPXmArA26AQw1HRDvU/ZV5hJV7qrXC4QqO+smUpW7FkVSVyXAcnJe4lUOMduBfvHsMoZgtfkqQHOdIJHA12MhXU/5xMWKfogqPHpfezjC4vcl/zJdv4aaI+xndx/jH/pP/3NgrTxHm+YIkrxGXvKhZMDvHzBWdJepUI9iBbLg8fCNmS26swEerLlfqjsrObXPYeRCBD+SN/dn6PAhY6P1xH3otzc/+vXl8d6InHodzzM/Mve8NsU/JXuWFcbLlJ9rf5LHwstvHw1af7ausqmxbCk01i8av7K204GF/44pGlm1g2S33ShCwRxd6N7Db/km5k++XO/Xw8+vujtC4/ZXvtDalMGDJ93GdZTH7Ll+8j94l796n84rJ31ss2fnp3F4solpnqsnd+nm+854G4FZ7Hw8qO4Up4/I8VDz8l3Ntu/+2tzjb5BjfahPLv0WyqZfYT780Xl69V7pLfhkzp9VEZaG02Yntwbf6/AjbIB7jOfsWZSuDOYB9xjkYMlUVS6W09c7PX9wH6QKNjHWh8rANNjnWg6bEONDvWgebHOtD51z6QCD2Z3wf1hwHUQxxDNKI5hmBDcwyxhOYYQgXNMUQCmmNwdDTH4MdojsFNEZw0ck1eWHH2kcHbm7mHzxF23MOnBDvu4TOAHfdwwrfjHs7vdtzD6dyOezh723EPJ2s8N5tqOe9kmIVp5yhbRlEaRil31PS0M42FkqWrWhqeOunxmKSTBJgss+Un4s40l+nPhz1k0u18nqqCzomWzlI8quKkc8N5+Jn70Zo7zPMkjxAYc1k+GUbExqdjvuQxD11O6dh0UF+E3Ak3wYLAN9fskYzFQ494+AoiSVIoHZpt0pUKEkHg1AFz44hgzsLI8sN7kXQfKwVxrje+z4lYH2lcTLO61wYa07000JjulYHGdC8MKppRDVFOIxqpnEY0YDmNaNwy/6Qat5xGNG45jWjcclr3cXsQqc/3Zx2D9mt3N36UUCS8e/EY6vXTzqR8zdS5YzF7jNl65ahl54MzLfRx9JLzA8U5rSRRzeu1i6hVZxFuug/oDo0quEoeUXiVPKIAK3ndQ+yDnCarCdotTT1zv1mktUHbviq4Z/4mm9B2jzaWdvewbQC8FXFCFgb1WAIP/qims7dEU71tK7s3bMvqHlb7WYm0eTmSoJV+5D7RpOHblzWPZVn21Jn0NvL96Jl7dMT7NI4yX6uG/HDYOuTfBOsVS0QCEO1P9cUdDM4Htu7coTufiZBGtzevAiZ8h24Gcfvw4b3zEK1VmakGhgZ4HaVpFJAx85XAH/7gi3/RNPBKFsHhC1Fvr4iWhzTsRhCcZDJS5BGR5DRThILkHKp5/+Evi4jFHg3tLubZTUMpJyLes2DtU8WWzIvPMv8QzIY0778sFmpdiCqoHkhglWXDZLP4k7vdU93HyCFZGfp1k+r1Rz3V7X61dwfXfZqwg+s+RdBqytOD8l+Czu7gund2B0fV2RufJYkwXkK15lF1t+BR97d78ZfzIj+KlxufbgALINkIFkCyIYz8TRAmlD3WPMIOax51fwldRvMIluQ079+x8MjE0DAqJTSMSgYNo9JAw0gF6H6HTgXW/TadCqz7vToZjGgKUIFR+Rnp6Z/oKk8FRuVnGkblZxpG5WcaRuVno9cOXy7lJJjuFFNBUvlcBUl3oglTHqyjmMUvRMg3Pn9kBAukGe0ujpbq1yRRmN3ETTGd3SxSysl2hqMS+Q++IGuaYlG2i2BFlPl+FBGtrW1PONpy9961Q2b65xydm3DnM5evIt/jsaFPjfXy/Zq5Ai6dtr9Y8l48rlLnflWu9lcx07ODlkXBvmN2+IB1Yz4dNl5m8sQmKBoKf0wxHbU3HgLj8WHj7Uxix3LS0hIec3rYcjtL3rGctbSEx5y3tBwBy6Z4eM3ip1pHmDX5T1njGZxv1nhhvjCuPWyTI5WWdS44a/KinVBxrlxXXS2A6rSLGbN9u+Ax22OiyEzBhJOZ0jquzIimAPudfxZJ7Rr1gevf5d0TIO+PW2fO3zZRCi5TD9v/qOudnDiFCXdqOaP2F652sox5HFunGzOidd4xI1onIDOiVSYymqNSkpnSOjeZEa2TlBmBzlbwjIDLVtAel62gvU22ghSbbNVhFmBGtJ4OmBHoQIUIdKB2mCmYEahABeZWgQop6ECFCHSgQgQ6UOEEDBeo0B4XqNDeJlAhxSZQIQUdqBCBDlSIQAcqRKADFSLQgWo5tzeaWwUqpKADFSLQgQoR6EAddwxUaI8LVGhvE6iQYhOokIIOVIhABypEoAMVItCBChHoQIUIVKACc6tAhRR0oEIEOlAhAh2ok46BCu1xgQrtbQIVUmwCFVLQgQoR6ECFCHSgQgQ6UCECHagQgQpUYG4VqJCCDlSIQAcqRKADddoxUKE9LlChvU2gQopNoEIKOlAhAh2oEIEOVIhABypEoAMVIlCBCsytAhVS0IEKEehAhYgm/8wvUZpusx/gVz2Nd+wjfueTNer36k+5d9ZQ26OKVplZ7X+LcB1FT07tDw9Ho/YQsfBFpJeoDZfVq9wZ+sLnrzfNv/Bp8RiPtl3Jfwuhr5kC+LitJVhTGTe5fNUSFHnjJk+vWoJZ57gp+1YtwWlw3JR0dVwWN6XI0xEwbkozFeOBwbwpW1fM4RA35eiKIRzhpsxcMYQD3JSPK4YTRyXnfetJy3GalveXAkKTO1YIMzOhyS2hVsa1/daimQlt1TMT2spoJqD0NGLwwppRaIXNKDupYZhhpbYPVDMBKzUkWEkNMPZSQ5S11BBlJzVMjFipIQErtX1yNhOspAYYe6khylpqiLKTGp7KsFJDAlZqSMBK3fGEbMTYSw1R1lJDlJ3UcHKHlRoSsFJDAlZqSLCSGmDspYYoa6khyk5qUCWjpYYErNSQgJUaEqykBhh7qSHKWmqIapJar6LYV0sVc9wkrGKIOyFXDHHJuWJoUS1VrC2rpQrBslqCWtlVS1XR7Kqlqnp21VJVRrtqCehpVy3VCmtXLdUqbFctmaXGVUt1UtsHql21VCc1rloySo2rlhqlxlVLjVLjqiWz1LhqqU5qXLVUJ7V9crarloxS46qlRqlx1VKj1LhqySw1rlqqkxpXLdVJjauW6qTueEK2q5YapcZVS41S46ols9S4aqlOaly1VCc1rlqqkxpXLRmlxlVLjVLjqqVGqXHVkllqXLVUJzWuWqqTGlct1UmNq5aMUuOqpUapcdVSo9S4aumDNBEEj4C6D1icOnTPi7tlySpl3R9O+CmMeRL5n7nn0Hb1PaqX/eed118ptn6dn9w/lWOmnoBe+bmSlz0BNgfqHd955WuqlLFqiZO/5yvfrBucX67NjqgNDxyqhOfXigcAv325lT7Cgsle/RrWHTxUD0as2a4cotheHOZmxeLs262rFvuc7/fl+SJO1Avcsq/Pzoaj0evZdbbXOns12xPn64/y+P3ig9SHJ/pTkv2AVpov1DPF5AiMpvq3V2yZ8viyN8+jNsqe2vT+s18eKZcuP0btW+CKV76xPyuvfNt/H5z68k2+TX2vXwlXa+kmaWXztfBE1jhXRXnZrrfj2VT7ht5ZZ4DLHtPxv92sbkpR9xm8zQjbF8gVF5urL5AbF30tXu1m4zxDo/MMKZ1n2MJ5tmGZ7bcTlF/ZvQYt3WvwfbrXaAjdK9vW0b1GRvcaUbrX6Dtxr2Gzex1yomO4ynAOXSXb1tFVxkZXGVO6yvjEXWVe9ZSx0VNGX8dTRPbfm4TEbzp6xMToERNKj5h8Hx4xPs3c0dEHpkYfmFL6wPTEfcAs++ToiWByrv7tO4F609LWBR6EeoPv1ZTAA2ZGD5hResDsb+sB0yME/pE1nxs1n1NqPj8pzaGys6PH9nCm/rXR+TXFnO/cqPM5pc7nJ67z/AgRTK+sKweVufkD1Q3rX/mLkcon++jXIu1rbnh7kkGvQTu9zO1O1SpsQ5v1Km3jwl3+sHaTQ7X2qHThZ1LLP96FyqGe83fYZy31vrBeseMN9/0PLNs7Wpt39fkyzb4dnM1rvl9kr4Qw2sf62oER0N9tTL/shHm8s5dE5j9qMa6T6keGweHOHiXWcaRb+rC7SeTQ6OXe/fbtrIHut/K2WG51tnlmL3HVxoEpXQ0OpCpz8vle1qO6LHciJR02SjokknSIO/t8/wp3WXFEKjxqVHhEpPDoayn8d1/0Q6o1blRrTKTW+NTUOvbCG1KVSaMqEyJVJqemysnpMG3UYUqkw/TUdDjqahRSklmjJDMiSWanJslpiTBvFGFOJML81EQ46koOUpLzRknOiSQ5PzVJvslyWvZgi/2xzrZSrKNpUtMi2iAv2FBrZNtF7r0L4656fcWXdMP8/En6jctjxyyBtk3W3XpV9PuJx+XgbifLZXqcwunzhDgRbiWqdYOu4VbxJbP6p1m2Hl+z+iAtX6K9L1D5BUWoFrDGaB1YRGu4CbI/hA/vhyq/BDE9mB64Je+bTECAVwwm36Lm3RHL5BZdQ3fXvczecOJzxq8sWX3MZq8B2Fcm20oRrZrUFKpDmztrD92ANige3venW3BUEcvj2khtmGSOz9S/NhpS18PbgasVp2vMVBQ2a3IwYI46cvUOrC6fbN+rsT9We6/dOOTRcChGYwv3FPpSl7pQpZ6R12LO19Jdyk7nD44rn2a3323wuDuco9R4BOqEetg7jnifVT4W9Ylu920oFAmverimvDeyKSjW117lAqneL5GelL9X+y91j5yTZUeuJ61OPuyW6+PlpdSvfKT+tmeHfhgxKjJ7NcbmU90afWU3+0SS/L/peijwo0bX7Xo62AmSAx57cnHfmCO3z9Y0DeB2j65Zsrjmh8qSi+yo+WglMqn4N2xNM3ZgSjmpH9Hir+Tn/wNQSwMECgAAAAAAk2RNWwAAAAAAAAAAAAAAAAsAHAB3b3JkL3RoZW1lL1VUCQADhhztaIcc7Wh1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgAAAAhAGeA/LSbBgAAzSAAABUAHAB3b3JkL3RoZW1lL3RoZW1lMS54bWxVVAkAAzDQzhIw0M4SdXgLAAEE9QEAAAQUAAAA7VlPb9s2FL8P2HcgdHf1x5IsBXUL/23XJm3RpB16ZGRaYkyJAkknMYoCQ3vaZcCAbthlwG47DMMKrMCKXfZhCrTYug8xSnZs0abatE23AksMxCL5e48/vvf4+ExdvHycEnCIGMc0axv2BcsAKIvoCGdx27izN2wEBuACZiNIaIbaxgxx4/KlTz+5CLdEglIEpHzGt2DbSITIt0yTR7Ib8gs0R5kcG1OWQiGbLDZHDB5JvSkxHcvyzRTizAAZTKXam+MxjhDYK1Qal06UD4j8lwledESE7UbljFWJEjua2MUXn/EeYeAQkrYh5xnRoz10LAxAIBdyoG1Y5Z9hXrpoLoWIqJGtyA3Lv4XcQmA0cUo5Fu8vBa2BE7j2Ur8z17+JGwTFZ6mvBMAokiu1N7C251uBs8BWQPNHje6wZTdVfEV/c1N/6HcdV8E3V3h3c43DcND3FLy7wnsb+I7ldMOmgvdWeH8D7w46LWeg4EtQQnA22UT7rSDwF+glZEzJVS089H2r1V/AVyizEl1z+UzUxVoKDygbSkDpXChwBsQsR2MYSVwnF5SDPuY5gTMD5DCjXHZbjm3LwHMtZ/kpLQ63EKxIz7sivtFV8AE8YjgXbeOa1GpUIC+ePXv+8Onzh789f/To+cNfwDaOE6GRuwqzuCr36sev//7+C/DXrz+8evyNHs+r+Jc/f/ny9z9ep14otL598vLpkxffffXnT4818A6D+1X4Hk4RBzfQEbhNU7lAzQRon72dxF4CcVWik8UcZrCQ0aAHIlHQN2aQQA2ui1Q73mUyXeiAV6YHCuHdhE0F1gCvJ6kC3KGUdCnTrul6MVfVCtMs1k/OplXcbQgPdXP31rw8mOYy7rFOZS9BCs1bRLocxihDAhRjdIKQRuwexopdd3DEKKdjAe5h0IVYa5I9vC/0QldxKv0y0xGU/lZss3MXdCnRqe+jQxUp9wYkOpWIKGa8AqcCplrGMCVV5DYUiY7k7oxFisG5kJ6OEaFgMEKc62RusplC9zqUeUvr9h0yS1UkE3iiQ25DSqvIPp30EpjmWs44S6rYz/hEhigEt6jQkqDqDina0g8wq3X3XYzE2+3tOzIN6QOkGJky3ZZAVN2PMzKGSKe8w1IlxXYY1kZHdxorob2NEIFHcIQQuPOZDk9zqid9LZFZ5SrS2eYaVGO1aGeIy1qpKG40jsVcCdldFNMaPjuztcQzg1kKWZ3mGxM1ZAb7TG5GXbySaKKkUsyKTasncZOn8FRabyVQCauizfXxOmPZ2+4xKXPwDjLorWVkYj+1bfYgQfqA2YMYbOvSrRSZ6kWK7VSKTbVyY3XTrtxgrhU9Kc7eUAH9N5XPB6t5zr7aqUso6zVOHW69sulRNsIff2HTh9PsFpJnyXldc17X/B/rmrr9fF7NnFcz59XMv1bNrAoYs3rZU2pJa29+xpiQXTEjaJuXpQ+Xe380lJ1loxRaXjTliXxcTKfgYgbLZ8Co+ByLZDeBuZzGLmeI+UJ1zEFOuSyfjFrdZfE1TXfoaHGPZ5/cbUoBKFb9lrfsl6WamPf6rdVF6FJ92Yp5lYBXKj09icpkKommhkSreToStnVWLEINi8B+HQuz4hV5OAFYXIt77pyRDDcZ0qPCT3P5E++euafrjKku29EsL3TPzNMKiUq4qSQqYZjIw2O9+4x9HYZ6VztaGq3gQ/ja3MwNJFNb4EjuuaYn1UQwbxtj+bNJPqa51MeLTAVJnLWNSCwM/S6ZJWdc9CFP5rByaL7+FAvEAMGpjPWqG0i24mY7LevjJRdaH5/lzHUno/EYRaKmZ9WUY3Ml2tH3BBcNOpWkd5PREdgnU3YbSkN5Lbsw4AhzsbTmCLNKcK+suJauFltReQO02qKQ5AlcnCjVZD6Hl89LOpV1lEzXV2XqTLgfD8/i1H2z0FrSrDlAWrVZ7MMd8hVWTT0rT5vrwsB6/Snx/gdChVqgp9bUU6s7O86wIKhM59fYzan15nueButRa1bqyrK18XKb7h/IyO/LanVKBJ9fkB3L8rt38lpyngnK3pPscizAlOG2cd/yOm7P8XoNK/AGDbfpWo3A6zQbHc9r2gPPtvpd54E0ikhS25vPPZQ/9sls8e6+7N94f5+elNoXIpqatKyDzVK4fH9vO/Xv7wGWlrnvO8OwGXb9RtjsDBtuvxs0wp7fbfT9Xqs/7Pe8IBw+MMBhCXY7zZ7rD4KGb/d6Dde3CvpB2Gi5jtNxW51g4HYeLGwtV37yfWLektelfwBQSwMECgAAAAAAk2RNWwAAAAAAAAAAAAAAAAsAHAB3b3JkL19yZWxzL1VUCQADhhztaIcc7Wh1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgAAAAhALO+ix3+AAAAtgMAABwAHAB3b3JkL19yZWxzL2RvY3VtZW50LnhtbC5yZWxzVVQJAAMw0M4SiBztaHV4CwABBPUBAAAEFAAAAK2TzWrDMBCE74W+g9h7LTttQwmRcymBXFv3AWR7/UP1Y6RNWr99RUoShwbTg44zYme+hdV6860VO6DzvTUCsiQFhqaydW9aAR/F9uEFmCdpaqmsQQEjetjk93frN1SSwpDv+sGzkGK8gI5oWHHuqw619Ikd0ISXxjotKUjX8kFWn7JFvkjTJXfTDMivMtmuFuB29SOwYhzwP9m2afoKX22112joRgX3SBQ28yFTuhZJwMlJQhbw2wiLqAg0KpwCHPVcfRaz3ux1iS5sfCE4W3MQy5gQFGbxAnCUv2Y2x/Ack6GxhgpZqgnH2ZqDeIoJ8YXl+5+TnJgnEH712/IfUEsBAh4DFAAAAAgAAAAhADKRb1deAQAApQUAABMAGAAAAAAAAQAAAKSBAAAAAFtDb250ZW50X1R5cGVzXS54bWxVVAUAAzDQzhJ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAACTZE1bAAAAAAAAAAAAAAAACQAYAAAAAAAAABAA7UGrAQAAZG9jUHJvcHMvVVQFAAOGHO1odXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAAAAhACEYr1llAQAAxQIAABAAGAAAAAAAAQAAAKSB7gEAAGRvY1Byb3BzL2FwcC54bWxVVAUAAzDQzhJ1eAsAAQT1AQAABBQAAABQSwECHgMUAAAACAAAACEACvOn+GYBAADtAgAAEQAYAAAAAAABAAAApIGdAwAAZG9jUHJvcHMvY29yZS54bWxVVAUAAzDQzhJ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAACTZE1bAAAAAAAAAAAAAAAABgAYAAAAAAAAABAA7UFOBQAAX3JlbHMvVVQFAAOGHO1odXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAAAAhAB6RGrfpAAAATgIAAAsAGAAAAAAAAQAAAKSBjgUAAF9yZWxzLy5yZWxzVVQFAAMw0M4SdXgLAAEE9QEAAAQUAAAAUEsBAh4DCgAAAAAAk2RNWwAAAAAAAAAAAAAAAAUAGAAAAAAAAAAQAO1BvAYAAHdvcmQvVVQFAAOGHO1odXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAoWRNW+xw0GIQAgAAtAcAABIAGAAAAAAAAQAAAKSB+wYAAHdvcmQvZm9udFRhYmxlLnhtbFVUBQADnhztaHV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAAAIQCWFrgr1QIAAIgLAAARABgAAAAAAAEAAACkgVcJAAB3b3JkL2RvY3VtZW50LnhtbFVUBQADMNDOEnV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAAAIQDK52WKKwQAAL4MAAARABgAAAAAAAEAAACkgXcMAAB3b3JkL3NldHRpbmdzLnhtbFVUBQADMNDOEnV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAAAIQDbhWzDfQQAAJcdAAASABgAAAAAAAEAAACkge0QAAB3b3JkL251bWJlcmluZy54bWxVVAUAAzDQzhJ1eAsAAQT1AQAABBQAAABQSwECHgMUAAAACAAAACEAvn52YlYBAADQAwAAFAAYAAAAAAABAAAApIG2FQAAd29yZC93ZWJTZXR0aW5ncy54bWxVVAUAAzDQzhJ1eAsAAQT1AQAABBQAAABQSwECHgMUAAAACAAAACEAP6/hZl8PAAANpgAADwAYAAAAAAABAAAApIFaFwAAd29yZC9zdHlsZXMueG1sVVQFAAMw0M4SdXgLAAEE9QEAAAQUAAAAUEsBAh4DCgAAAAAAk2RNWwAAAAAAAAAAAAAAAAsAGAAAAAAAAAAQAO1BAicAAHdvcmQvdGhlbWUvVVQFAAOGHO1odXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAAAAhAGeA/LSbBgAAzSAAABUAGAAAAAAAAQAAAKSBRycAAHdvcmQvdGhlbWUvdGhlbWUxLnhtbFVUBQADMNDOEnV4CwABBPUBAAAEFAAAAFBLAQIeAwoAAAAAAJNkTVsAAAAAAAAAAAAAAAALABgAAAAAAAAAEADtQTEuAAB3b3JkL19yZWxzL1VUBQADhhztaHV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAAAIQCzvosd/gAAALYDAAAcABgAAAAAAAEAAACkgXYuAAB3b3JkL19yZWxzL2RvY3VtZW50LnhtbC5yZWxzVVQFAAMw0M4SdXgLAAEE9QEAAAQUAAAAUEsFBgAAAAARABEAqQUAAMovAAAAAA==",Ju=()=>new Map,dF=t=>{const e=Ju();return t.forEach((n,r)=>{e.set(r,n)}),e},S0=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},LJe=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},DJe=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Nx=()=>new Set,s9=t=>t[t.length-1],OJe=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},i0=Array.from,BV=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},jV=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},PJe=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},Ix=Array.isArray;let ube=class{constructor(){this._observers=Ju()}on(e,n){return S0(this._observers,e,Nx).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return i0((this._observers.get(e)||Ju()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ju()}};const Ff=Math.floor,Q_=Math.abs,dbe=(t,e)=>t<e?t:e,pw=(t,e)=>t>e?t:e,fbe=t=>t!==0?t<0:1/t<0,Lte=1,Dte=2,o9=4,a9=8,tT=32,Ap=64,mc=128,zR=31,fF=63,ub=127,FJe=2147483647,rI=Number.MAX_SAFE_INTEGER,Ote=Number.MIN_SAFE_INTEGER,BJe=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Ff(t)===t),jJe=String.fromCharCode,$Je=t=>t.toLowerCase(),zJe=/^\s*/g,HJe=t=>t.replace(zJe,""),VJe=/([A-Z])/g,Pte=(t,e)=>HJe(t.replace(VJe,n=>`${e}${$Je(n)}`)),UJe=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},nT=typeof TextEncoder<"u"?new TextEncoder:null,WJe=t=>nT.encode(t),qJe=nT?WJe:UJe;let nA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});nA&&nA.decode(new Uint8Array).length===1&&(nA=null);const GJe=(t,e)=>PJe(e,()=>t).join("");let cC=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const HR=()=>new cC,KJe=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},gf=t=>{const e=new Uint8Array(KJe(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},XJe=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(pw(n,e)*2),t.cpos=0)},go=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},hF=go,Er=(t,e)=>{for(;e>ub;)go(t,mc|ub&e),e=Ff(e/128);go(t,ub&e)},$V=(t,e)=>{const n=fbe(e);for(n&&(e=-e),go(t,(e>fF?mc:0)|(n?Ap:0)|fF&e),e=Ff(e/64);e>0;)go(t,(e>ub?mc:0)|ub&e),e=Ff(e/128)},pF=new Uint8Array(3e4),YJe=pF.length/3,ZJe=(t,e)=>{if(e.length<YJe){const n=nT.encodeInto(e,pF).written||0;Er(t,n);for(let r=0;r<n;r++)go(t,pF[r])}else Xl(t,qJe(e))},JJe=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Er(t,r);for(let i=0;i<r;i++)go(t,n.codePointAt(i))},w1=nT&&nT.encodeInto?ZJe:JJe,VR=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=dbe(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(pw(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},Xl=(t,e)=>{Er(t,e.byteLength),VR(t,e)},zV=(t,e)=>{XJe(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},QJe=(t,e)=>zV(t,4).setFloat32(0,e,!1),eQe=(t,e)=>zV(t,8).setFloat64(0,e,!1),tQe=(t,e)=>zV(t,8).setBigInt64(0,e,!1),Fte=new DataView(new ArrayBuffer(4)),nQe=t=>(Fte.setFloat32(0,t),Fte.getFloat32(0)===t),rT=(t,e)=>{switch(typeof e){case"string":go(t,119),w1(t,e);break;case"number":BJe(e)&&Q_(e)<=FJe?(go(t,125),$V(t,e)):nQe(e)?(go(t,124),QJe(t,e)):(go(t,123),eQe(t,e));break;case"bigint":go(t,122),tQe(t,e);break;case"object":if(e===null)go(t,126);else if(Ix(e)){go(t,117),Er(t,e.length);for(let n=0;n<e.length;n++)rT(t,e[n])}else if(e instanceof Uint8Array)go(t,116),Xl(t,e);else{go(t,118);const n=Object.keys(e);Er(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];w1(t,i),rT(t,e[i])}}break;case"boolean":go(t,e?120:121);break;default:go(t,127)}};class Bte extends cC{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Er(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const jte=t=>{t.count>0&&($V(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Er(t.encoder,t.count-2))};class e6{constructor(){this.encoder=new cC,this.s=0,this.count=0}write(e){this.s===e?this.count++:(jte(this),this.count=1,this.s=e)}toUint8Array(){return jte(this),gf(this.encoder)}}const $te=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);$V(t.encoder,e),t.count>1&&Er(t.encoder,t.count-2)}};class l9{constructor(){this.encoder=new cC,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):($te(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return $te(this),gf(this.encoder)}}class rQe{constructor(){this.sarr=[],this.s="",this.lensE=new e6}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new cC;return this.sarr.push(this.s),this.s="",w1(e,this.sarr.join("")),VR(e,this.lensE.toUint8Array()),gf(e)}}const Bf=t=>new Error(t),Qu=()=>{throw Bf("Method unimplemented")},Ec=()=>{throw Bf("Unexpected case")},hbe=Bf("Unexpected end of array"),pbe=Bf("Integer out of Range");let UR=class{constructor(e){this.arr=e,this.pos=0}};const T2=t=>new UR(t),iQe=t=>t.pos!==t.arr.length,sQe=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Yl=t=>sQe(t,cr(t)),Rx=t=>t.arr[t.pos++],cr=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&ub)*n,n*=128,i<mc)return e;if(e>rI)throw pbe}throw hbe},HV=t=>{let e=t.arr[t.pos++],n=e&fF,r=64;const i=(e&Ap)>0?-1:1;if((e&mc)===0)return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&ub)*r,r*=128,e<mc)return i*n;if(n>rI)throw pbe}throw hbe},oQe=t=>{let e=cr(t);if(e===0)return"";{let n=String.fromCodePoint(Rx(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Rx(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},aQe=t=>nA.decode(Yl(t)),v1=nA?aQe:oQe,VV=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},lQe=t=>VV(t,4).getFloat32(0,!1),cQe=t=>VV(t,8).getFloat64(0,!1),uQe=t=>VV(t,8).getBigInt64(0,!1),dQe=[t=>{},t=>null,HV,lQe,cQe,uQe,t=>!1,t=>!0,v1,t=>{const e=cr(t),n={};for(let r=0;r<e;r++){const i=v1(t);n[i]=iT(t)}return n},t=>{const e=cr(t),n=[];for(let r=0;r<e;r++)n.push(iT(t));return n},Yl],iT=t=>dQe[127-Rx(t)](t);class zte extends UR{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),iQe(this)?this.count=cr(this)+1:this.count=-1),this.count--,this.s}}class t6 extends UR{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=HV(this);const e=fbe(this.s);this.count=1,e&&(this.s=-this.s,this.count=cr(this)+2)}return this.count--,this.s}}class c9 extends UR{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=HV(this),n=e&1;this.diff=Ff(e/2),this.count=1,n&&(this.count=cr(this)+2)}return this.s+=this.diff,this.count--,this.s}}class fQe{constructor(e){this.decoder=new t6(e),this.str=v1(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const hQe=crypto.getRandomValues.bind(crypto),mbe=()=>hQe(new Uint32Array(1))[0],pQe="10000000-1000-4000-8000"+-1e11,mQe=()=>pQe.replace(/[018]/g,t=>(t^mbe()&15>>t/4).toString(16)),gQe=Date.now,Hte=t=>new Promise(t);Promise.all.bind(Promise);const Vte=t=>t===void 0?null:t;let yQe=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},gbe=new yQe,bQe=!0;try{typeof localStorage<"u"&&localStorage&&(gbe=localStorage,bQe=!1)}catch{}const wQe=gbe,sT=Symbol("Equality"),ybe=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[sT])!=null&&n.call(t,e))||!1},vQe=t=>typeof t=="object",xQe=Object.assign,EQe=Object.keys,SQe=(t,e)=>{for(const n in t)e(t[n],n)},iI=t=>EQe(t).length,AQe=t=>{for(const e in t)return!1;return!0},uC=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},UV=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),TQe=(t,e)=>t===e||iI(t)===iI(e)&&uC(t,(n,r)=>(n!==void 0||UV(e,r))&&ybe(e[r],n)),WV=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&WV(t,e,n+1)}},kQe=t=>t,n6=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[sT]!=null)return t[sT](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!n6(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(iI(t)!==iI(e))return!1;for(const n in t)if(!UV(t,n)||!n6(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!n6(t[n],e[n]))return!1;break;default:return!1}return!0},CQe=(t,e)=>e.includes(t);var bbe={};const oT=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Pd;const _Qe=()=>{if(Pd===void 0)if(oT){Pd=Ju();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Pd.set(e,""),e=r):e!==null&&(Pd.set(e,r),e=null)}e!==null&&Pd.set(e,"")}else typeof location=="object"?(Pd=Ju(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Pd.set(`--${Pte(e,"-")}`,n),Pd.set(`-${Pte(e,"-")}`,n)}})):Pd=Ju();return Pd},mF=t=>_Qe().has(t),gF=t=>Vte(oT?bbe[t.toUpperCase().replaceAll("-","_")]:wQe.getItem(t)),wbe=t=>mF("--"+t)||gF(t)!==null,NQe=wbe("production"),IQe=oT&&CQe(bbe.FORCE_COLOR,["true","1","2"]),RQe=IQe||!mF("--no-colors")&&!wbe("no-color")&&(!oT||process.stdout.isTTY)&&(!oT||mF("--color")||gF("COLORTERM")!==null||(gF("TERM")||"").includes("color")),MQe=t=>new Uint8Array(t),LQe=t=>{const e=MQe(t.byteLength);return e.set(t),e};class DQe{constructor(e,n){this.left=e,this.right=n}}const Eh=(t,e)=>new DQe(t,e),Ute=t=>t.next()>=.5,u9=(t,e,n)=>Ff(t.next()*(n+1-e)+e),vbe=(t,e,n)=>Ff(t.next()*(n+1-e)+e),qV=(t,e,n)=>vbe(t,e,n),OQe=t=>jJe(qV(t,97,122)),PQe=(t,e=0,n=20)=>{const r=qV(t,e,n);let i="";for(let s=0;s<r;s++)i+=OQe(t);return i},d9=(t,e)=>e[qV(t,0,e.length-1)],FQe=Symbol("0schema");class BQe{constructor(){this._rerrs=[]}extend(e,n,r,i=null){this._rerrs.push({path:e,expected:n,has:r,message:i})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(GJe(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const yF=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[sT]?ybe(t,e):Ix(t)?BV(t,n=>jV(e,r=>yF(n,r))):vQe(t)?uC(t,(n,r)=>yF(n,e[r])):!1;var jP;let tl=(jP=class{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),yF(n,r)}equals(e){return this.constructor===e.constructor&&n6(this.shape,e.shape)}[FQe](){return!0}[sT](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){Qu()}get nullable(){return k2(this,XR)}get optional(){return new Sbe(this)}cast(e){return Wte(e,this),e}expect(e){return Wte(e,this),e}},Mt(jP,"_dilutes",!1),jP);class GV extends tl{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const Ks=(t,e=null)=>new GV(t,e);Ks(GV);class KV extends tl{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const Ro=t=>new KV(t);Ks(KV);class WR extends tl{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(i=>i===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const qR=(...t)=>new WR(t),xbe=Ks(WR),jQe=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),Ebe=t=>{if(Mx.check(t))return[jQe(t)];if(xbe.check(t))return t.shape.map(e=>e+"");if(Mbe.check(t))return["[+-]?\\d+.?\\d*"];if(Lbe.check(t))return[".*"];if(oI.check(t))return t.shape.map(Ebe).flat(1);Ec()};class $Qe extends tl{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(Ebe).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}Ks($Qe);const zQe=Symbol("optional");class Sbe extends tl{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[zQe](){return!0}}const HQe=Ks(Sbe);class VQe extends tl{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}Ks(VQe);const g4=class g4 extends tl{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new g4(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):uC(this.shape,(r,i)=>{const s=this._isPartial&&!UV(e,i)||r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),r.toString(),typeof e[i],"Object property does not match")),s})}};Mt(g4,"_dilutes",!0);let sI=g4;const UQe=t=>new sI(t),WQe=Ks(sI),qQe=Ro(t=>t!=null&&(t.constructor===Object||t.constructor==null));class Abe extends tl{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&uC(e,(r,i)=>{const s=this.shape.keys.check(i,n);return!s&&(n==null||n.extend(i+"","Record",typeof e,s?"Key doesn't match schema":"Value doesn't match value")),s&&this.shape.values.check(r,n)})}}const Tbe=(t,e)=>new Abe(t,e),GQe=Ks(Abe);class kbe extends tl{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&uC(this.shape,(r,i)=>{const s=r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),"Tuple",typeof r)),s})}}const KQe=(...t)=>new kbe(t);Ks(kbe);class Cbe extends tl{constructor(e){super(),this.shape=e.length===1?e[0]:new GR(e)}check(e,n){const r=Ix(e)&&BV(e,i=>this.shape.check(i));return!r&&(n==null||n.extend(null,"Array","")),r}}const _be=(...t)=>new Cbe(t),XQe=Ks(Cbe),YQe=Ro(t=>Ix(t));class Nbe extends tl{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const ZQe=(t,e=null)=>new Nbe(t,e);Ks(Nbe);const JQe=ZQe(tl);class QQe extends tl{constructor(e){super(),this.len=e.length-1,this.args=KQe(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const eet=Ks(QQe),tet=Ro(t=>typeof t=="function");class net extends tl{constructor(e){super(),this.shape=e}check(e,n){const r=BV(this.shape,i=>i.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}Ks(net,t=>t.shape.length>0);class GR extends tl{constructor(e){super(),this.shape=e}check(e,n){const r=jV(this.shape,i=>i.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}Mt(GR,"_dilutes",!0);const k2=(...t)=>t.findIndex(e=>oI.check(e))>=0?k2(...t.map(e=>aT(e)).map(e=>oI.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new GR(t),oI=Ks(GR),Ibe=()=>!0,aI=Ro(Ibe),ret=Ks(KV,t=>t.shape===Ibe),XV=Ro(t=>typeof t=="bigint"),iet=Ro(t=>t===XV),Rbe=Ro(t=>typeof t=="symbol");Ro(t=>t===Rbe);const x1=Ro(t=>typeof t=="number"),Mbe=Ro(t=>t===x1),Mx=Ro(t=>typeof t=="string"),Lbe=Ro(t=>t===Mx),KR=Ro(t=>typeof t=="boolean"),set=Ro(t=>t===KR),Dbe=qR(void 0);Ks(WR,t=>t.shape.length===1&&t.shape[0]===void 0);qR(void 0);const XR=qR(null),oet=Ks(WR,t=>t.shape.length===1&&t.shape[0]===null);Ks(Uint8Array);Ks(GV,t=>t.shape===Uint8Array);const aet=k2(x1,Mx,XR,Dbe,XV,KR,Rbe);(()=>{const t=_be(aI),e=Tbe(Mx,aI),n=k2(x1,Mx,XR,KR,t,e);return t.shape=n,e.shape.values=n,n})();const aT=t=>{if(JQe.check(t))return t;if(qQe.check(t)){const e={};for(const n in t)e[n]=aT(t[n]);return UQe(e)}else{if(YQe.check(t))return k2(...t.map(aT));if(aet.check(t))return qR(t);if(tet.check(t))return Ks(t)}Ec()},Wte=NQe?()=>{}:(t,e)=>{const n=new BQe;if(!e.check(t,n))throw Bf(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class cet{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:aT(e),h:n}),this}else(e){return this.if(aI,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const i=this.patterns[r];if(i.if.check(e))return i.h(e,n)}throw Bf("Unhandled pattern")}}}const uet=t=>new cet(t),Obe=uet(aI).if(Mbe,(t,e)=>u9(e,Ote,rI)).if(Lbe,(t,e)=>PQe(e)).if(set,(t,e)=>Ute(e)).if(iet,(t,e)=>BigInt(u9(e,Ote,rI))).if(oI,(t,e)=>rv(e,d9(e,t.shape))).if(WQe,(t,e)=>{const n={};for(const r in t.shape){let i=t.shape[r];if(HQe.check(i)){if(Ute(e))continue;i=i.shape}n[r]=Obe(i,e)}return n}).if(XQe,(t,e)=>{const n=[],r=vbe(e,0,42);for(let i=0;i<r;i++)n.push(rv(e,t.shape));return n}).if(xbe,(t,e)=>d9(e,t.shape)).if(oet,(t,e)=>null).if(eet,(t,e)=>{const n=rv(e,t.res);return()=>n}).if(ret,(t,e)=>rv(e,d9(e,[x1,Mx,XR,Dbe,XV,KR,_be(x1),Tbe(k2("a","b","c"),x1)]))).if(GQe,(t,e)=>{const n={},r=u9(e,0,3);for(let i=0;i<r;i++){const s=rv(e,t.shape.keys),o=rv(e,t.shape.values);n[s]=o}return n}).done(),rv=(t,e)=>Obe(aT(e),t),YR=typeof document<"u"?document:{};Ro(t=>t.nodeType===met);typeof DOMParser<"u"&&new DOMParser;Ro(t=>t.nodeType===fet);Ro(t=>t.nodeType===het);const det=t=>LJe(t,(e,n)=>`${n}:${e};`).join(""),fet=YR.ELEMENT_NODE,het=YR.TEXT_NODE,pet=YR.DOCUMENT_NODE,met=YR.DOCUMENT_FRAGMENT_NODE;Ro(t=>t.nodeType===pet);const Yp=Symbol,Pbe=Yp(),Fbe=Yp(),get=Yp(),yet=Yp(),bet=Yp(),Bbe=Yp(),wet=Yp(),YV=Yp(),vet=Yp(),xet=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},Eet={[Pbe]:Eh("font-weight","bold"),[Fbe]:Eh("font-weight","normal"),[get]:Eh("color","blue"),[bet]:Eh("color","green"),[yet]:Eh("color","grey"),[Bbe]:Eh("color","red"),[wet]:Eh("color","purple"),[YV]:Eh("color","orange"),[vet]:Eh("color","black")},Aet=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Ju();let i=[],s=0;for(;s<t.length;s++){const a=t[s],l=Eet[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=det(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||i.push(a)}return i},jbe=RQe?Aet:xet,Tet=(...t)=>{console.log(...jbe(t)),$be.forEach(e=>e.print(t))},ket=(...t)=>{console.warn(...jbe(t)),t.unshift(YV),$be.forEach(e=>e.print(t))},$be=Nx(),zbe=t=>({[Symbol.iterator](){return this},next:t}),Cet=(t,e)=>zbe(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),f9=(t,e)=>zbe(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class ZV{constructor(e,n){this.clock=e,this.len=n}}class C2{constructor(){this.clients=new Map}}const s0=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);for(let o=0;o<r.length;o++){const a=r[o];rwe(t,s,a.clock,a.len,n)}}),_et=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=Ff((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},_2=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&_et(n,e.clock)!==null},JV=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=pw(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},bF=t=>{const e=new C2;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)OJe(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return JV(e),e},lT=(t,e,n,r)=>{S0(t.clients,e,()=>[]).push(new ZV(n,r))},Hbe=()=>new C2,Vbe=t=>{const e=Hbe();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const a=o.id.clock;let l=o.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;i.push(new ZV(a,l))}}i.length>0&&e.clients.set(r,i)}),e},N2=(t,e)=>{Er(t.restEncoder,e.clients.size),i0(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Er(t.restEncoder,n);const i=r.length;Er(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},QV=t=>{const e=new C2,n=cr(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=cr(t.restDecoder),s=cr(t.restDecoder);if(s>0){const o=S0(e.clients,i,()=>[]);for(let a=0;a<s;a++)o.push(new ZV(t.readDsClock(),t.readDsLen()))}}return e},qte=(t,e,n)=>{const r=new C2,i=cr(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=cr(t.restDecoder),a=cr(t.restDecoder),l=n.clients.get(o)||[],c=ks(n,o);for(let u=0;u<a;u++){const d=t.readDsClock(),f=d+t.readDsLen();if(d<c){c<f&&lT(r,o,c,f-c);let h=fd(l,d),m=l[h];for(!m.deleted&&m.id.clock<d&&(l.splice(h+1,0,pI(e,m,d-m.id.clock)),h++);h<l.length&&(m=l[h++],m.id.clock<f);)m.deleted||(f<m.id.clock+m.length&&l.splice(h,0,pI(e,m,f-m.id.clock)),m.delete(e))}else lT(r,o,d,f-d)}}if(r.clients.size>0){const s=new $b;return Er(s.restEncoder,0),N2(s,r),s.toUint8Array()}return null},Ube=mbe;class Xf extends ube{constructor({guid:e=mQe(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=Ube(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new twe,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Hte(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>Hte(c=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ri(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(i0(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Ri(this,e,n)}get(e,n=Jo){const r=S0(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==Jo&&i!==n)if(i===Jo){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,A1)}getText(e=""){return this.get(e,a0)}getMap(e=""){return this.get(e,o0)}getXmlElement(e=""){return this.get(e,Ga)}getXmlFragment(e=""){return this.get(e,zp)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,i0(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Xf({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Ri(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Wbe{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return cr(this.restDecoder)}readDsLen(){return cr(this.restDecoder)}}class qbe extends Wbe{readLeftID(){return er(cr(this.restDecoder),cr(this.restDecoder))}readRightID(){return er(cr(this.restDecoder),cr(this.restDecoder))}readClient(){return cr(this.restDecoder)}readInfo(){return Rx(this.restDecoder)}readString(){return v1(this.restDecoder)}readParentInfo(){return cr(this.restDecoder)===1}readTypeRef(){return cr(this.restDecoder)}readLen(){return cr(this.restDecoder)}readAny(){return iT(this.restDecoder)}readBuf(){return LQe(Yl(this.restDecoder))}readJSON(){return JSON.parse(v1(this.restDecoder))}readKey(){return v1(this.restDecoder)}}class Net{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=cr(this.restDecoder),this.dsCurrVal}readDsLen(){const e=cr(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Lx extends Net{constructor(e){super(e),this.keys=[],cr(e),this.keyClockDecoder=new c9(Yl(e)),this.clientDecoder=new t6(Yl(e)),this.leftClockDecoder=new c9(Yl(e)),this.rightClockDecoder=new c9(Yl(e)),this.infoDecoder=new zte(Yl(e),Rx),this.stringDecoder=new fQe(Yl(e)),this.parentInfoDecoder=new zte(Yl(e),Rx),this.typeRefDecoder=new t6(Yl(e)),this.lenDecoder=new t6(Yl(e))}readLeftID(){return new E1(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new E1(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return iT(this.restDecoder)}readBuf(){return Yl(this.restDecoder)}readJSON(){return iT(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Gbe{constructor(){this.restEncoder=HR()}toUint8Array(){return gf(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Er(this.restEncoder,e)}writeDsLen(e){Er(this.restEncoder,e)}}class dC extends Gbe{writeLeftID(e){Er(this.restEncoder,e.client),Er(this.restEncoder,e.clock)}writeRightID(e){Er(this.restEncoder,e.client),Er(this.restEncoder,e.clock)}writeClient(e){Er(this.restEncoder,e)}writeInfo(e){hF(this.restEncoder,e)}writeString(e){w1(this.restEncoder,e)}writeParentInfo(e){Er(this.restEncoder,e?1:0)}writeTypeRef(e){Er(this.restEncoder,e)}writeLen(e){Er(this.restEncoder,e)}writeAny(e){rT(this.restEncoder,e)}writeBuf(e){Xl(this.restEncoder,e)}writeJSON(e){w1(this.restEncoder,JSON.stringify(e))}writeKey(e){w1(this.restEncoder,e)}}class Kbe{constructor(){this.restEncoder=HR(),this.dsCurrVal=0}toUint8Array(){return gf(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Er(this.restEncoder,n)}writeDsLen(e){e===0&&Ec(),Er(this.restEncoder,e-1),this.dsCurrVal+=e}}class $b extends Kbe{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new l9,this.clientEncoder=new e6,this.leftClockEncoder=new l9,this.rightClockEncoder=new l9,this.infoEncoder=new Bte(hF),this.stringEncoder=new rQe,this.parentInfoEncoder=new Bte(hF),this.typeRefEncoder=new e6,this.lenEncoder=new e6}toUint8Array(){const e=HR();return Er(e,0),Xl(e,this.keyClockEncoder.toUint8Array()),Xl(e,this.clientEncoder.toUint8Array()),Xl(e,this.leftClockEncoder.toUint8Array()),Xl(e,this.rightClockEncoder.toUint8Array()),Xl(e,gf(this.infoEncoder)),Xl(e,this.stringEncoder.toUint8Array()),Xl(e,gf(this.parentInfoEncoder)),Xl(e,this.typeRefEncoder.toUint8Array()),Xl(e,this.lenEncoder.toUint8Array()),VR(e,gf(this.restEncoder)),gf(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){rT(this.restEncoder,e)}writeBuf(e){Xl(this.restEncoder,e)}writeJSON(e){rT(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Iet=(t,e,n,r)=>{r=pw(r,e[0].id.clock);const i=fd(e,r);Er(t.restEncoder,e.length-i),t.writeClient(n),Er(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},eU=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{ks(e,s)>i&&r.set(s,i)}),fC(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),Er(t.restEncoder,r.size),i0(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{Iet(t,e.clients.get(i),i,s)})},Ret=(t,e)=>{const n=Ju(),r=cr(t.restDecoder);for(let i=0;i<r;i++){const s=cr(t.restDecoder),o=new Array(s),a=t.readClient();let l=cr(t.restDecoder);n.set(a,{i:0,refs:o});for(let c=0;c<s;c++){const u=t.readInfo();switch(zR&u){case 0:{const d=t.readLen();o[c]=new Wc(er(a,l),d),l+=d;break}case 10:{const d=cr(t.restDecoder);o[c]=new qc(er(a,l),d),l+=d;break}default:{const d=(u&(Ap|mc))===0,f=new Pi(er(a,l),null,(u&mc)===mc?t.readLeftID():null,null,(u&Ap)===Ap?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(u&tT)===tT?t.readString():null,Twe(t,u));o[c]=f,l+=f.length}}}}return n},Met=(t,e,n)=>{const r=[];let i=i0(n.keys()).sort((h,m)=>h-m);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let h=n.get(i[i.length-1]);for(;h.refs.length===h.i;)if(i.pop(),i.length>0)h=n.get(i[i.length-1]);else return null;return h};let o=s();if(o===null)return null;const a=new twe,l=new Map,c=(h,m)=>{const y=l.get(h);(y==null||y>m)&&l.set(h,m)};let u=o.refs[o.i++];const d=new Map,f=()=>{for(const h of r){const m=h.id.client,y=n.get(m);y?(y.i--,a.clients.set(m,y.refs.slice(y.i)),n.delete(m),y.i=0,y.refs=[]):a.clients.set(m,[h]),i=i.filter(w=>w!==m)}r.length=0};for(;;){if(u.constructor!==qc){const m=S0(d,u.id.client,()=>ks(e,u.id.client))-u.id.clock;if(m<0)r.push(u),c(u.id.client,u.id.clock-1),f();else{const y=u.getMissing(t,e);if(y!==null){r.push(u);const w=n.get(y)||{refs:[],i:0};if(w.refs.length===w.i)c(y,ks(e,y)),f();else{u=w.refs[w.i++];continue}}else(m===0||m<u.length)&&(u.integrate(t,m),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=s(),o===null)break;u=o.refs[o.i++]}}if(a.clients.size>0){const h=new $b;return eU(h,a,new Map),Er(h.restEncoder,0),{missing:l,update:h.toUint8Array()}}return null},Let=(t,e)=>eU(t,e.doc.store,e.beforeState),Det=(t,e,n,r=new Lx(t))=>Ri(e,i=>{i.local=!1;let s=!1;const o=i.doc,a=o.store,l=Ret(r,o),c=Met(i,a,l),u=a.pendingStructs;if(u){for(const[f,h]of u.missing)if(h<ks(a,f)){s=!0;break}if(c){for(const[f,h]of c.missing){const m=u.missing.get(f);(m==null||m>h)&&u.missing.set(f,h)}u.update=cI([u.update,c.update])}}else a.pendingStructs=c;const d=qte(r,i,a);if(a.pendingDs){const f=new Lx(T2(a.pendingDs));cr(f.restDecoder);const h=qte(f,i,a);d&&h?a.pendingDs=cI([d,h]):a.pendingDs=d||h}else a.pendingDs=d;if(s){const f=a.pendingStructs.update;a.pendingStructs=null,lI(i.doc,f)}},n,!1),lI=(t,e,n,r=Lx)=>{const i=T2(e);Det(i,t,n,new r(i))},Xbe=(t,e,n)=>lI(t,e,n,qbe),Oet=(t,e,n=new Map)=>{eU(t,e.store,n),N2(t,Vbe(e.store))},Pet=(t,e=new Uint8Array([0]),n=new $b)=>{const r=Ybe(e);Oet(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Qet(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===dC)return Zet(i.map((s,o)=>o===0?s:ttt(s)));if(n.constructor===$b)return cI(i)}return i[0]},tU=(t,e)=>Pet(t,e,new dC),Fet=t=>{const e=new Map,n=cr(t.restDecoder);for(let r=0;r<n;r++){const i=cr(t.restDecoder),s=cr(t.restDecoder);e.set(i,s)}return e},Ybe=t=>Fet(new Wbe(T2(t))),Zbe=(t,e)=>(Er(t.restEncoder,e.size),i0(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Er(t.restEncoder,n),Er(t.restEncoder,r)}),t),Bet=(t,e)=>Zbe(t,fC(e.store)),jet=(t,e=new Kbe)=>(t instanceof Map?Zbe(e,t):Bet(e,t),e.toUint8Array()),Jbe=t=>jet(t,new Gbe);class $et{constructor(){this.l=[]}}const Gte=()=>new $et,Kte=(t,e)=>t.l.push(e),Xte=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Qbe=(t,e,n)=>WV(t.l,[e,n]);class E1{constructor(e,n){this.client=e,this.clock=n}}const Uv=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,er=(t,e)=>new E1(t,e),cT=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Ec()},uT=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class dT{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}}const db=t=>new dT(t.type==null?null:er(t.type.client,t.type.clock),t.tname??null,t.item==null?null:er(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class zet{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const Het=(t,e,n=0)=>new zet(t,e,n),A5=(t,e,n)=>{let r=null,i=null;return t._item===null?i=cT(t):r=er(t._item.id.client,t._item.id.clock),new dT(r,i,e,n)},h9=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return A5(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return A5(t,er(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return A5(t,r.lastId,n);r=r.right}return A5(t,null,n)},Vet=(t,e,n=!0)=>{const r=e.store,i=t.item,s=t.type,o=t.tname,a=t.assoc;let l=null,c=0;if(i!==null){if(ks(r,i.client)<=i.clock)return null;const u=n?EF(r,i):{item:S1(r,i),diff:0},d=u.item;if(!(d instanceof Pi))return null;if(l=d.parent,l._item===null||!l._item.deleted){c=d.deleted||!d.countable?0:u.diff+(a>=0?0:1);let f=d.left;for(;f!==null;)!f.deleted&&f.countable&&(c+=f.length),f=f.left}}else{if(o!==null)l=e.get(o);else if(s!==null){if(ks(r,s.client)<=s.clock)return null;const{item:u}=n?EF(r,s):{item:S1(r,s)};if(u instanceof Pi&&u.content instanceof xd)l=u.content.type;else return null}else throw Ec();a>=0?c=l._length:c=0}return Het(l,c,t.assoc)},Yte=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Uv(t.item,e.item)&&Uv(t.type,e.type)&&t.assoc===e.assoc;class nU{constructor(e,n){this.ds=e,this.sv=n}}const ewe=(t,e)=>new nU(t,e),p9=t=>ewe(Vbe(t.store),fC(t.store)),gy=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!_2(e.ds,t.id),wF=(t,e)=>{const n=S0(t.meta,wF,Nx),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<ks(r,s)&&_l(t,er(s,i))}),s0(t,e.ds,i=>{}),n.add(e))};class twe{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const fC=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},ks=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},nwe=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ec()}n.push(e)},fd=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=Ff(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=Ff((n+r)/2)}throw Ec()},Uet=(t,e)=>{const n=t.clients.get(e.client);return n[fd(n,e.clock)]},S1=Uet,vF=(t,e,n)=>{const r=fd(e,n),i=e[r];return i.id.clock<n&&i instanceof Pi?(e.splice(r+1,0,pI(t,i,n-i.id.clock)),r+1):r},_l=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[vF(t,n,e.clock)]},Zte=(t,e,n)=>{const r=e.clients.get(n.client),i=fd(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Wc&&r.splice(i+1,0,pI(t,s,n.clock-s.id.clock+1)),s},Wet=(t,e,n)=>{const r=t.clients.get(e.id.client);r[fd(r,e.id.clock)]=n},rwe=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=vF(t,e,n),a;do a=e[o++],s<a.id.clock+a.length&&vF(t,e,s),i(a);while(o<e.length&&e[o].id.clock<s)};class qet{constructor(e,n,r){this.doc=e,this.deleteSet=new C2,this.beforeState=fC(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Jte=(t,e)=>e.deleteSet.clients.size===0&&!DJe(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(JV(e.deleteSet),Let(t,e),N2(t,e.deleteSet),!0),Qte=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&S0(t.changed,e,Nx).add(n)},r6=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Pi&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},Get=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=a.clock+a.len;for(let c=fd(s,a.clock),u=s[c];c<s.length&&u.id.clock<l;u=s[++c]){const d=s[c];if(a.clock+a.len<=d.id.clock)break;d instanceof Pi&&d.deleted&&!d.keep&&n(d)&&d.gc(e,!1)}}}},Ket=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],a=dbe(i.length-1,1+fd(i,o.clock+o.len-1));for(let l=a,c=i[l];l>0&&c.id.clock>=o.clock;c=i[l])l-=1+r6(i,l)}})},iwe=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{JV(s),n.afterState=fC(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,d)=>u.path.length-d.path.length),Qbe(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),WV(a,[]),n._needFormattingCleanup&&mtt(n)}finally{r.gc&&Get(s,i,r.gcFilter),Ket(s,i),n.afterState.forEach((u,d)=>{const f=n.beforeState.get(d)||0;if(f!==u){const h=i.clients.get(d),m=pw(fd(h,f),1);for(let y=h.length-1;y>=m;)y-=1+r6(h,y)}});for(let u=o.length-1;u>=0;u--){const{client:d,clock:f}=o[u].id,h=i.clients.get(d),m=fd(h,f);m+1<h.length&&r6(h,m+1)>1||m>0&&r6(h,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Tet(YV,Pbe,"[yjs] ",Fbe,Bbe,"Changed the client-id because another client seems to be using it."),r.clientID=Ube()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new dC;Jte(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new $b;Jte(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):iwe(t,e+1)}}},Ri=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new qet(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const a=t._transaction===i[0];t._transaction=null,a&&iwe(i,0)}}return o};class Xet{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const ene=(t,e,n)=>{s0(t,n.deletions,r=>{r instanceof Pi&&e.scope.some(i=>uT(i,r))&&uU(r,!1)})},tne=(t,e,n)=>{let r=null;const i=t.doc,s=t.scope;Ri(i,a=>{for(;e.length>0&&t.currStackItem===null;){const l=i.store,c=e.pop(),u=new Set,d=[];let f=!1;s0(a,c.insertions,h=>{if(h instanceof Pi){if(h.redone!==null){let{item:m,diff:y}=EF(l,h.id);y>0&&(m=_l(a,er(m.id.client,m.id.clock+y))),h=m}!h.deleted&&s.some(m=>uT(m,h))&&d.push(h)}}),s0(a,c.deletions,h=>{h instanceof Pi&&s.some(m=>uT(m,h))&&!_2(c.insertions,h.id)&&u.add(h)}),u.forEach(h=>{f=Awe(a,h,u,c.insertions,t.ignoreRemoteMapChanges,t)!==null||f});for(let h=d.length-1;h>=0;h--){const m=d[h];t.deleteFilter(m)&&(m.delete(a),f=!0)}t.currStackItem=f?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const o=t.currStackItem;if(o!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return o};class swe extends ube{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=Ix(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(w=>l.changedParentTypes.has(w))||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,d=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const f=new C2;l.afterState.forEach((w,b)=>{const E=l.beforeState.get(b)||0,A=w-E;A>0&&lT(f,b,E,A)});const h=gQe();let m=!1;if(this.lastChange>0&&h-this.lastChange<this.captureTimeout&&d.length>0&&!c&&!u){const w=d[d.length-1];w.deletions=bF([w.deletions,l.deleteSet]),w.insertions=bF([w.insertions,f])}else d.push(new Xet(l.deleteSet,f)),m=!0;!c&&!u&&(this.lastChange=h),s0(l,l.deleteSet,w=>{w instanceof Pi&&this.scope.some(b=>uT(b,w))&&uU(w,!0)});const y=[{stackItem:d[d.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];m?this.emit("stack-item-added",y):this.emit("stack-item-updated",y)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=Ix(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&ket("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>ene(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>ene(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=tne(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=tne(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Yet(t){const e=cr(t.restDecoder);for(let n=0;n<e;n++){const r=cr(t.restDecoder),i=t.readClient();let s=cr(t.restDecoder);for(let o=0;o<r;o++){const a=t.readInfo();if(a===10){const l=cr(t.restDecoder);yield new qc(er(i,s),l),s+=l}else if((zR&a)!==0){const l=(a&(Ap|mc))===0,c=new Pi(er(i,s),null,(a&mc)===mc?t.readLeftID():null,null,(a&Ap)===Ap?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&tT)===tT?t.readString():null,Twe(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new Wc(er(i,s),l),s+=l}}}}class rU{constructor(e,n){this.gen=Yet(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===qc);return this.curr}}class iU{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Zet=t=>cI(t,qbe,dC),Jet=(t,e)=>{if(t.constructor===Wc){const{client:n,clock:r}=t.id;return new Wc(er(n,r+e),t.length-e)}else if(t.constructor===qc){const{client:n,clock:r}=t.id;return new qc(er(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Pi(er(r,i+e),null,er(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},cI=(t,e=Lx,n=$b)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(T2(u)));let i=r.map(u=>new rU(u,!0)),s=null;const o=new n,a=new iU(o);for(;i=i.filter(f=>f.curr!==null),i.sort((f,h)=>{if(f.curr.id.client===h.curr.id.client){const m=f.curr.id.clock-h.curr.id.clock;return m===0?f.curr.constructor===h.curr.constructor?0:f.curr.constructor===qc?1:-1:m}else return h.curr.id.client-f.curr.id.client}),i.length!==0;){const u=i[0],d=u.curr.id.client;if(s!==null){let f=u.curr,h=!1;for(;f!==null&&f.id.clock+f.length<=s.struct.id.clock+s.struct.length&&f.id.client>=s.struct.id.client;)f=u.next(),h=!0;if(f===null||f.id.client!==d||h&&f.id.clock>s.struct.id.clock+s.struct.length)continue;if(d!==s.struct.id.client)Gm(a,s.struct,s.offset),s={struct:f,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<f.id.clock)if(s.struct.constructor===qc)s.struct.length=f.id.clock+f.length-s.struct.id.clock;else{Gm(a,s.struct,s.offset);const m=f.id.clock-s.struct.id.clock-s.struct.length;s={struct:new qc(er(d,s.struct.id.clock+s.struct.length),m),offset:0}}else{const m=s.struct.id.clock+s.struct.length-f.id.clock;m>0&&(s.struct.constructor===qc?s.struct.length-=m:f=Jet(f,m)),s.struct.mergeWith(f)||(Gm(a,s.struct,s.offset),s={struct:f,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===d&&f.id.clock===s.struct.id.clock+s.struct.length&&f.constructor!==qc;f=u.next())Gm(a,s.struct,s.offset),s={struct:f,offset:0}}s!==null&&(Gm(a,s.struct,s.offset),s=null),sU(a);const l=r.map(u=>QV(u)),c=bF(l);return N2(o,c),o.toUint8Array()},Qet=(t,e,n=Lx,r=$b)=>{const i=Ybe(e),s=new r,o=new iU(s),a=new n(T2(t)),l=new rU(a,!1);for(;l.curr;){const u=l.curr,d=u.id.client,f=i.get(d)||0;if(l.curr.constructor===qc){l.next();continue}if(u.id.clock+u.length>f)for(Gm(o,u,pw(f-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===d;)Gm(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===d&&l.curr.id.clock+l.curr.length<=f;)l.next()}sU(o);const c=QV(a);return N2(s,c),s.toUint8Array()},owe=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:gf(t.encoder.restEncoder)}),t.encoder.restEncoder=HR(),t.written=0)},Gm=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&owe(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Er(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},sU=t=>{owe(t);const e=t.encoder.restEncoder;Er(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Er(e,r.written),VR(e,r.restEncoder)}},ett=(t,e,n,r)=>{const i=new n(T2(t)),s=new rU(i,!1),o=new r,a=new iU(o);for(let c=s.curr;c!==null;c=s.next())Gm(a,e(c),0);sU(a);const l=QV(i);return N2(o,l),o.toUint8Array()},ttt=t=>ett(t,kQe,Lx,dC),nne="You must not compute changes after the event-handler fired.";class ZR{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ntt(this.currentTarget,this.target))}deletes(e){return _2(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Bf(nne);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))o="delete",a=s9(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=s9(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=s9(s.content.getContent());else return;e.set(i,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Bf(nne);const n=this.target,r=Nx(),i=Nx(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,i.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const ntt=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},awe=80;let oU=0;class rtt{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=oU++}}const itt=t=>{t.timestamp=oU++},lwe=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=oU++},stt=(t,e,n)=>{if(t.length>=awe){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return lwe(r,e,n),r}else{const r=new rtt(e,n);return t.push(r),r}},JR=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Q_(e-s.index)<Q_(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,itt(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Q_(n.index-i)<r.parent.length/awe?(lwe(n,r,i),n):stt(t._searchMarker,r,i)},fT=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=pw(e,i.index+n))}},QR=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;S0(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;Qbe(r._eH,n,e)};class Jo{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Gte(),this._dEH=Gte(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Qu()}clone(){throw Qu()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Kte(this._eH,e)}observeDeep(e){Kte(this._dEH,e)}unobserve(e){Xte(this._eH,e)}unobserveDeep(e){Xte(this._dEH,e)}toJSON(){}}const cwe=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&r>0;a++)i.push(o[a]),r--;e=0}}s=s.right}return i},uwe=t=>{const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},dwe=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&gy(r,e)){const i=r.content.getContent();for(let s=0;s<i.length;s++)n.push(i[s])}r=r.right}return n},hT=(t,e)=>{let n=0,r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},fwe=(t,e)=>{const n=[];return hT(t,(r,i)=>{n.push(e(r,i,t))}),n},ott=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},hwe=(t,e)=>{const n=JR(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},uI=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new Pi(er(o,ks(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new zb(c)),i.integrate(t,0),c=[])};r.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:i=new Pi(er(o,ks(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new hC(new Uint8Array(d))),i.integrate(t,0);break;case Xf:i=new Pi(er(o,ks(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new pC(d)),i.integrate(t,0);break;default:if(d instanceof Jo)i=new Pi(er(o,ks(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new xd(d)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},pwe=()=>Bf("Length exceeded!"),mwe=(t,e,n,r)=>{if(n>e._length)throw pwe();if(n===0)return e._searchMarker&&fT(e._searchMarker,n,r.length),uI(t,e,null,r);const i=n,s=JR(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&_l(t,er(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&fT(e._searchMarker,i,r.length),uI(t,e,o,r)},att=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return uI(t,e,i,n)},gwe=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=JR(e,n);let a=e._start;for(o!==null&&(a=o.p,n-=o.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&_l(t,er(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&_l(t,er(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw pwe();e._searchMarker&&fT(e._searchMarker,i,-s+r)},dI=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},aU=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let a;if(r==null)a=new zb([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new zb([r]);break;case Uint8Array:a=new hC(r);break;case Xf:a=new pC(r);break;default:if(r instanceof Jo)a=new xd(r);else throw new Error("Unexpected content type")}new Pi(er(o,ks(s.store,o)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},lU=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},ywe=t=>{const e={};return t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},bwe=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted},ltt=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&gy(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},T5=t=>Cet(t.entries(),e=>!e[1].deleted);class ctt extends ZR{}class A1 extends Jo{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new A1;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new A1}clone(){const e=new A1;return e.insert(0,this.toArray().map(n=>n instanceof Jo?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),QR(this,e,new ctt(this,e))}insert(e,n){this.doc!==null?Ri(this.doc,r=>{mwe(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Ri(this.doc,n=>{att(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Ri(this.doc,r=>{gwe(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return hwe(this,e)}toArray(){return uwe(this)}slice(e=0,n=this.length){return cwe(this,e,n)}toJSON(){return this.map(e=>e instanceof Jo?e.toJSON():e)}map(e){return fwe(this,e)}forEach(e){hT(this,e)}[Symbol.iterator](){return ott(this)}_write(e){e.writeTypeRef(Ltt)}}const utt=t=>new A1;class dtt extends ZR{constructor(e,n,r){super(e,n),this.keysChanged=r}}class o0 extends Jo{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new o0}clone(){const e=new o0;return this.forEach((n,r)=>{e.set(r,n instanceof Jo?n.clone():n)}),e}_callObserver(e,n){QR(this,e,new dtt(this,e,n))}toJSON(){const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Jo?i.toJSON():i}}),e}get size(){return[...T5(this._map)].length}keys(){return f9(T5(this._map),e=>e[0])}values(){return f9(T5(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return f9(T5(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ri(this.doc,n=>{dI(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Ri(this.doc,r=>{aU(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return lU(this,e)}has(e){return bwe(this,e)}clear(){this.doc!==null?Ri(this.doc,e=>{this.forEach(function(n,r,i){dI(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Dtt)}}const ftt=t=>new o0,Eg=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&TQe(t,e);class xF{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Ec(),this.right.content.constructor){case Gs:this.right.deleted||I2(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const rne=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Gs:e.right.deleted||I2(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&_l(t,er(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},k5=(t,e,n,r)=>{const i=new Map,s=r?JR(e,n):null;if(s){const o=new xF(s.p.left,s.p,s.index,i);return rne(t,o,n-s.index)}else{const o=new xF(null,e._start,0,i);return rne(t,o,n)}},wwe=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Gs&&Eg(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,a)=>{const l=n.left,c=n.right,u=new Pi(er(s,ks(i.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new Gs(a,o));u.integrate(t,0),n.right=u,n.forward()})},I2=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},vwe=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Gs&&Eg(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},xwe=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Eg(c,l)){o.set(a,c);const{left:u,right:d}=n;n.right=new Pi(er(s,ks(i.store,s)),u,u&&u.lastId,d,d&&d.id,e,null,new Gs(a,l)),n.right.integrate(t,0),n.forward()}}return o},m9=(t,e,n,r,i)=>{n.currentAttributes.forEach((f,h)=>{i[h]===void 0&&(i[h]=null)});const s=t.doc,o=s.clientID;vwe(n,i);const a=xwe(t,e,n,i),l=r.constructor===String?new hd(r):r instanceof Jo?new xd(r):new mw(r);let{left:c,right:u,index:d}=n;e._searchMarker&&fT(e._searchMarker,n.index,l.getLength()),u=new Pi(er(o,ks(s.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(t,0),n.right=u,n.index=d,n.forward(),wwe(t,e,n,a)},ine=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;vwe(n,i);const a=xwe(t,e,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Gs));){if(!n.right.deleted)switch(n.right.content.constructor){case Gs:{const{key:l,value:c}=n.right.content,u=i[l];if(u!==void 0){if(Eg(u,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&_l(t,er(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Pi(er(o,ks(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new hd(l)),n.right.integrate(t,0),n.forward()}wwe(t,e,n,a)},Ewe=(t,e,n,r,i)=>{let s=e;const o=Ju();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Gs){const c=s.content;o.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case Gs:{const{key:u,value:d}=c,f=r.get(u)??null;(o.get(u)!==c||f===d)&&(e.delete(t),a++,!l&&(i.get(u)??null)===d&&f!==d&&(f===null?i.delete(u):i.set(u,f))),!l&&!e.deleted&&I2(i,c);break}}}e=e.right}return a},htt=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Gs){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},ptt=t=>{let e=0;return Ri(t.doc,n=>{let r=t._start,i=t._start,s=Ju();const o=dF(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Gs:I2(o,i.content);break;default:e+=Ewe(n,r,i,s,o),s=dF(o),r=i;break}i=i.right}}),e},mtt=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&rwe(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===Gs&&o.constructor!==Wc&&e.add(o.parent)})}Ri(n,r=>{s0(t,t.deleteSet,i=>{if(i instanceof Wc||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===Gs?e.add(s):htt(r,i)});for(const i of e)ptt(i)})},sne=(t,e,n)=>{const r=n,i=dF(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case xd:case mw:case hd:n<e.right.length&&_l(t,er(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&Ewe(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&fT(o._searchMarker,e.index,-r+n),e};class gtt extends ZR{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Ri(e,r=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const l={};let c="",u=0,d=0;const f=()=>{if(a!==null){let h=null;switch(a){case"delete":d>0&&(h={delete:d}),d=0;break;case"insert":(typeof c=="object"||c.length>0)&&(h={insert:c},i.size>0&&(h.attributes={},i.forEach((m,y)=>{m!==null&&(h.attributes[y]=m)}))),c="";break;case"retain":u>0&&(h={retain:u},AQe(l)||(h.attributes=xQe({},l))),u=0;break}h&&n.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case xd:case mw:this.adds(o)?this.deletes(o)||(f(),a="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),d+=1):o.deleted||(a!=="retain"&&(f(),a="retain"),u+=1);break;case hd:this.adds(o)?this.deletes(o)||(a!=="insert"&&(f(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),d+=o.length):o.deleted||(a!=="retain"&&(f(),a="retain"),u+=o.length);break;case Gs:{const{key:h,value:m}=o.content;if(this.adds(o)){if(!this.deletes(o)){const y=i.get(h)??null;Eg(y,m)?m!==null&&o.delete(r):(a==="retain"&&f(),Eg(m,s.get(h)??null)?delete l[h]:l[h]=m)}}else if(this.deletes(o)){s.set(h,m);const y=i.get(h)??null;Eg(y,m)||(a==="retain"&&f(),l[h]=y)}else if(!o.deleted){s.set(h,m);const y=l[h];y!==void 0&&(Eg(y,m)?y!==null&&o.delete(r):(a==="retain"&&f(),m===null?delete l[h]:l[h]=m))}o.deleted||(a==="insert"&&f(),I2(i,o.content));break}}o=o.right}for(f();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class a0 extends Jo{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new a0}clone(){const e=new a0;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new gtt(this,e,n);QR(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===hd&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Ri(this.doc,r=>{const i=new xF(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const a=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&m9(r,this,i,a,o.attributes||{})}else o.retain!==void 0?ine(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&sne(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){const i=[],s=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const d={};let f=!1;s.forEach((m,y)=>{f=!0,d[y]=m});const h={insert:a};f&&(h.attributes=d),i.push(h),a=""}}const u=()=>{for(;l!==null;){if(gy(l,e)||n!==void 0&&gy(l,n))switch(l.content.constructor){case hd:{const d=s.get("ychange");e!==void 0&&!gy(l,e)?(d===void 0||d.user!==l.id.client||d.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!gy(l,n)?(d===void 0||d.user!==l.id.client||d.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):d!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case xd:case mw:{c();const d={insert:l.content.getContent()[0]};if(s.size>0){const f={};d.attributes=f,s.forEach((h,m)=>{f[m]=h})}i.push(d);break}case Gs:gy(l,e)&&(c(),I2(s,l.content));break}l=l.right}c()};return e||n?Ri(o,d=>{e&&wF(d,e),n&&wF(d,n),u()},"cleanup"):u(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Ri(i,s=>{const o=k5(s,this,e,!r);r||(r={},o.currentAttributes.forEach((a,l)=>{r[l]=a})),m9(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?Ri(i,s=>{const o=k5(s,this,e,!r);m9(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Ri(r,i=>{sne(i,k5(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?Ri(i,s=>{const o=k5(s,this,e,!1);o.right!==null&&ine(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Ri(this.doc,n=>{dI(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Ri(this.doc,r=>{aU(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return lU(this,e)}getAttributes(){return ywe(this)}_write(e){e.writeTypeRef(Ott)}}const ytt=t=>new a0;class g9{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Ga||n.constructor===zp)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class zp extends Jo{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new zp}clone(){const e=new zp;return e.insert(0,this.toArray().map(n=>n instanceof Jo?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new g9(this,e)}querySelector(e){e=e.toUpperCase();const r=new g9(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),i0(new g9(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){QR(this,e,new vtt(this,n,e))}toString(){return fwe(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),hT(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?Ri(this.doc,r=>{mwe(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Ri(this.doc,r=>{const i=e&&e instanceof Jo?e._item:e;uI(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Bf("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?Ri(this.doc,r=>{gwe(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return uwe(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return hwe(this,e)}slice(e=0,n=this.length){return cwe(this,e,n)}forEach(e){hT(this,e)}_write(e){e.writeTypeRef(Ftt)}}const btt=t=>new zp;class Ga extends zp{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Ga(this.nodeName)}clone(){const e=new Ga(this.nodeName),n=this.getAttributes();return SQe(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Jo?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Ri(this.doc,n=>{dI(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Ri(this.doc,r=>{aU(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return lU(this,e)}hasAttribute(e){return bwe(this,e)}getAttributes(e){return e?ltt(this,e):ywe(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return hT(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Ptt),e.writeKey(this.nodeName)}}const wtt=t=>new Ga(t.readKey());class vtt extends ZR{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class fI extends o0{constructor(e){super(),this.hookName=e}_copy(){return new fI(this.hookName)}clone(){const e=new fI(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(Btt),e.writeKey(this.hookName)}}const xtt=t=>new fI(t.readKey());class gc extends a0{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new gc}clone(){const e=new gc;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,a)=>o.key<a.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const a=s.attrs[o];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(jtt)}}const Ett=t=>new gc;class cU{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Qu()}mergeWith(e){return!1}write(e,n,r){throw Qu()}integrate(e,n){throw Qu()}}const Stt=0;class Wc extends cU{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),nwe(e.doc.store,this)}write(e,n){e.writeInfo(Stt),e.writeLen(this.length-n)}getMissing(e,n){return null}}class hC{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new hC(this.content)}splice(e){throw Qu()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const Att=t=>new hC(t.readBuf());class pT{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new pT(this.len)}splice(e){const n=new pT(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){lT(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Ttt=t=>new pT(t.readLen()),Swe=(t,e)=>new Xf({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class pC{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new pC(Swe(this.doc.guid,this.opts))}splice(e){throw Qu()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const ktt=t=>new pC(Swe(t.readString(),t.readAny()));class mw{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new mw(this.embed)}splice(e){throw Qu()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const Ctt=t=>new mw(t.readJSON());class Gs{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Gs(this.key,this.value)}splice(e){throw Qu()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const _tt=t=>new Gs(t.readKey(),t.readJSON());class hI{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new hI(this.arr)}splice(e){const n=new hI(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const Ntt=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new hI(n)};class zb{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new zb(this.arr)}splice(e){const n=new zb(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const Itt=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new zb(n)};class hd{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new hd(this.str)}splice(e){const n=new hd(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Rtt=t=>new hd(t.readString()),Mtt=[utt,ftt,ytt,wtt,btt,xtt,Ett],Ltt=0,Dtt=1,Ott=2,Ptt=3,Ftt=4,Btt=5,jtt=6;class xd{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xd(this.type._copy())}splice(e){throw Qu()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const $tt=t=>new xd(Mtt[t.readTypeRef()](t)),EF=(t,e)=>{let n=e,r=0,i;do r>0&&(n=er(n.client,n.clock+r)),i=S1(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof Pi);return{item:i,diff:r}},uU=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},pI=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Pi(er(r,i+n),e,er(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=er(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},one=(t,e)=>jV(t,n=>_2(n.deletions,e)),Awe=(t,e,n,r,i,s)=>{const o=t.doc,a=o.store,l=o.clientID,c=e.redone;if(c!==null)return _l(t,c);let u=e.parent._item,d=null,f;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!n.has(u)||Awe(t,u,n,r,i,s)===null))return null;for(;u.redone!==null;)u=_l(t,u.redone)}const h=u===null?e.parent:u.content.type;if(e.parentSub===null){for(d=e.left,f=e;d!==null;){let b=d;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:_l(t,b.redone);if(b!==null&&b.parent._item===u){d=b;break}d=d.left}for(;f!==null;){let b=f;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:_l(t,b.redone);if(b!==null&&b.parent._item===u){f=b;break}f=f.right}}else if(f=null,e.right&&!i){for(d=e;d!==null&&d.right!==null&&(d.right.redone||_2(r,d.right.id)||one(s.undoStack,d.right.id)||one(s.redoStack,d.right.id));)for(d=d.right;d.redone;)d=_l(t,d.redone);if(d&&d.right!==null)return null}else d=h._map.get(e.parentSub)||null;const m=ks(a,l),y=er(l,m),w=new Pi(y,d,d&&d.lastId,f,f&&f.id,h,e.parentSub,e.content.copy());return e.redone=y,uU(w,!0),w.integrate(t,0),w};let Pi=class SF extends cU{constructor(e,n,r,i,s,o,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?Dte:0}set marker(e){(this.info&a9)>0!==e&&(this.info^=a9)}get marker(){return(this.info&a9)>0}get keep(){return(this.info&Lte)>0}set keep(e){this.keep!==e&&(this.info^=Lte)}get countable(){return(this.info&Dte)>0}get deleted(){return(this.info&o9)>0}set deleted(e){this.deleted!==e&&(this.info^=o9)}markDeleted(){this.info|=o9}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ks(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ks(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===E1&&this.id.client!==this.parent.client&&this.parent.clock>=ks(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Zte(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=_l(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Wc||this.right&&this.right.constructor===Wc)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===SF&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===SF&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===E1){const r=S1(n,this.parent);r.constructor===Wc?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=Zte(e,e.doc.store,er(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Uv(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Uv(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(S1(e.doc.store,i.origin)))s.has(S1(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),nwe(e.doc.store,this),this.content.integrate(e,this),Qte(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Wc(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:er(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Uv(e.origin,this.lastId)&&this.right===e&&Uv(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),lT(e.deleteSet,this.id.client,this.id.clock,this.length),Qte(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Ec();this.content.gc(e),n?Wet(e,this,new Wc(this.id,this.length)):this.content=new pT(this.length)}write(e,n){const r=n>0?er(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&zR|(r===null?0:mc)|(i===null?0:Ap)|(s===null?0:tT);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=cT(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===E1?(e.writeParentInfo(!1),e.writeLeftID(a)):Ec();s!==null&&e.writeString(s)}this.content.write(e,n)}};const Twe=(t,e)=>ztt[e&zR](t),ztt=[()=>{Ec()},Ttt,Ntt,Att,Rtt,Ctt,_tt,$tt,Itt,ktt,()=>{Ec()}],Htt=10;class qc extends cU{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Ec()}write(e,n){e.writeInfo(Htt),Er(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const kwe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Cwe="__ $YJS$ __";kwe[Cwe]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");kwe[Cwe]=!0;const Vtt=t=>/\.xml$|\.rels$/i.test(t);function Utt(t){if(t.length>=2){const n=t[0],r=t[1];if(n===255&&r===254)return"utf-16le";if(n===254&&r===255)return"utf-16be"}let e=0;for(let n=0;n<Math.min(64,t.length);n++)t[n]===0&&e++;return e>16?"utf-16le":"utf-8"}function ane(t){return t&&t.charCodeAt(0)===65279?t.slice(1):t}function Wtt(t){if(typeof t=="string")return ane(t);let e=null;if(t&&typeof t=="object"&&(t instanceof Uint8Array?e=t:typeof ar<"u"&&ar.isBuffer&&ar.isBuffer(t)?e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):ArrayBuffer.isView&&ArrayBuffer.isView(t)?e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t.constructor&&(t instanceof ArrayBuffer||t.constructor.name==="ArrayBuffer")&&(e=new Uint8Array(t))),!e)throw new Error("Unsupported content type for XML");const n=Utt(e);let r=new TextDecoder(n).decode(e);return ane(r)}class lne{constructor(e={}){this.debug=e.debug||!1,this.zip=new uF,this.files=[],this.media={},this.mediaFiles={},this.fonts={}}async getDocxData(e,n=!1){var s;const r=await this.unzip(e),i=Object.entries(r.files);for(const[,o]of i){const a=o.name;if(Vtt(a)){const l=await o.async("uint8array"),c=Wtt(l);this.files.push({name:a,content:c})}else if(a.startsWith("word/media")&&a!=="word/media/"||o.name.startsWith("media")&&o.name!=="media/"||a.startsWith("media")&&a!=="media/"||a.startsWith("word/embeddings")&&a!=="word/embeddings/")if(n){const c=(await o.async("nodebuffer")).toString("base64");this.mediaFiles[a]=c}else{const l=await o.async("base64"),c=(s=this.getFileExtension(a))==null?void 0:s.toLowerCase();if(new Set(["png","jpg","jpeg","gif","bmp","tiff","emf","wmf","svg","webp"]).has(c)){this.mediaFiles[a]=`data:image/${c};base64,${l}`;const d=await o.async("blob"),f=new File([d],a,{type:d.type}),h=URL.createObjectURL(f);this.media[a]=h}else this.mediaFiles[a]=l}else if(a.startsWith("word/fonts")&&a!=="word/fonts/"){const l=await o.async("uint8array");this.fonts[a]=l}}return this.files}getFileExtension(e){const n=e.split(".");return n.length<2?null:n[n.length-1]}async updateContentTypes(e,n,r,i={}){var _,N,L,M,C,D,O,$,U,W,ce,se;const s=Object.keys(i||{}),o=new Set(["png","jpg","jpeg","gif","bmp","tiff","emf","wmf","svg","webp"]),a=Object.keys(n).map(Q=>this.getFileExtension(Q)).filter(Q=>Q&&o.has(Q)),l="[Content_Types].xml";let c;r?Array.isArray(e.files)?c=((_=e.files.find(Q=>Q.name===l))==null?void 0:_.content)||"":c=((N=e.files)==null?void 0:N[l])||"":c=await e.file(l).async("string");let u="";const d=UBe(c),f=new Set;for(let Q of a){if(d.includes(Q)||f.has(Q))continue;const J=`<Default Extension="${Q}" ContentType="image/${Q}"/>`;u+=J,f.add(Q)}const m=((L=JSON.parse(qA.xml2json(c,null,2)).elements)==null?void 0:L.find(Q=>Q.name==="Types"))||{},y=(M=m.elements)==null?void 0:M.some(Q=>Q.name==="Override"&&Q.attributes.PartName==="/word/comments.xml"),w=(C=m.elements)==null?void 0:C.some(Q=>Q.name==="Override"&&Q.attributes.PartName==="/word/commentsExtended.xml"),b=(D=m.elements)==null?void 0:D.some(Q=>Q.name==="Override"&&Q.attributes.PartName==="/word/commentsIds.xml"),E=(O=m.elements)==null?void 0:O.some(Q=>Q.name==="Override"&&Q.attributes.PartName==="/word/commentsExtensible.xml"),A=Q=>e!=null&&e.files?r&&Array.isArray(e.files)?e.files.some(J=>J.name===Q):!!e.files[Q]:!1;A("word/comments.xml")&&(y||(u+='<Override PartName="/word/comments.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml" />')),A("word/commentsExtended.xml")&&(w||(u+='<Override PartName="/word/commentsExtended.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.commentsExtended+xml" />')),A("word/commentsIds.xml")&&(b||(u+='<Override PartName="/word/commentsIds.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.commentsIds+xml" />')),A("word/commentsExtensible.xml")&&(E||(u+='<Override PartName="/word/commentsExtensible.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.commentsExtensible+xml" />'));const x=new Set(s);e!=null&&e.files&&(r&&Array.isArray(e.files)?e.files.forEach(Q=>x.add(Q.name)):Object.keys(e.files).forEach(Q=>x.add(Q))),x.forEach(Q=>{var X;if(Q.includes(".rels")||!Q.includes("header")&&!Q.includes("footer"))return;const J=(X=m.elements)==null?void 0:X.some(me=>me.name==="Override"&&me.attributes.PartName===`/${Q}`),K=Q.includes("header")?"header":"footer",re=`<Override PartName="/${Q}" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.${K}+xml"/>`;J||(u+=re)});const T='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">';let R=c.replace(T,`${T}${u}`),k=i["word/_rels/document.xml.rels"];if(k||(r?Array.isArray(e.files)?k=($=e.files.find(Q=>Q.name==="word/_rels/document.xml.rels"))==null?void 0:$.content:k=(U=e.files)==null?void 0:U["word/_rels/document.xml.rels"]:k=await((W=e.file("word/_rels/document.xml.rels"))==null?void 0:W.async("string"))),k)try{const J=(ce=qA.xml2js(k,{compact:!1}).elements)==null?void 0:ce.find(K=>K.name==="Relationships");(se=J==null?void 0:J.elements)==null||se.forEach(K=>{var de,Y;const re=(de=K.attributes)==null?void 0:de.Type,X=(Y=K.attributes)==null?void 0:Y.Target;if(!re||!X)return;const me=re.includes("/header"),G=re.includes("/footer");if(!me&&!G)return;let B=X.replace(/^\.\//,"");B.startsWith("../")&&(B=B.slice(3)),B.startsWith("/")&&(B=B.slice(1));const z=B.startsWith("word/")?B:`word/${B}`;x.add(z)})}catch(Q){console.warn("Failed to parse document relationships while updating content types",Q)}if(x.forEach(Q=>{if(Q.includes(".rels")||!Q.includes("header")&&!Q.includes("footer")||R.includes(`PartName="/${Q}"`))return;const J=Q.includes("header")?"header":"footer",K=`<Override PartName="/${Q}" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.${J}+xml"/>`;R=R.replace("</Types>",`${K}</Types>`)}),r)return R;e.file(l,R)}async unzip(e){return await this.zip.loadAsync(e)}async updateZip({docx:e,updatedDocs:n,originalDocxFile:r,media:i,fonts:s,isHeadless:o}){let a;r?a=await this.exportFromOriginalFile(r,n,i):a=await this.exportFromCollaborativeDocx(e,n,i,s);const l=o?"nodebuffer":"blob";return await a.generateAsync({type:l})}async exportFromCollaborativeDocx(e,n,r,i){const s=new uF;for(const o of e){const a=o.content;s.file(o.name,a)}Object.keys(n).forEach(o=>{const a=n[o];s.file(o,a)}),Object.keys(r).forEach(o=>{const a=ar.from(r[o],"base64");s.file(o,a)});for(const[o,a]of Object.entries(i))s.file(o,a);return await this.updateContentTypes(s,r,!1,n),s}async exportFromOriginalFile(e,n,r){const i=await this.unzip(e),s=[];return i.forEach((o,a)=>{const l=a.async("string").then(c=>{i.file(a.name,c)});s.push(l)}),await Promise.all(s),Object.keys(n).forEach(o=>{i.file(o,n[o])}),Object.keys(r).forEach(o=>{i.file(o,r[o])}),await this.updateContentTypes(i,r,!1,n),i}}function kn(t,e,n={name:""}){const r=t.config[e];return typeof r=="function"?r.bind({...n}):r}function Ni(t,e=null,...n){if(typeof t=="function"){const r=t;return e?r.bind(e)(...n):r(...n)}return t}let Tr=class _we{constructor(e){this.type="node",this.name="node",this.config={...e,name:e.name||this.name},this.name=this.config.name,this.group=this.config.group,this.config.addOptions?this.options=Ni(kn(this,"addOptions",{name:this.name}))||{}:this.options={},this.storage=Ni(kn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e){return new _we(e)}};class nl{constructor(e){this.type="mark",this.name="mark",this.config={...e,name:e.name||this.name},this.name=this.config.name,this.isExternal=!!this.config.isExternal,this.config.addOptions?this.options=Ni(kn(this,"addOptions",{name:this.name}))||{}:this.options={},this.storage=Ni(kn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e){return new nl(e)}}function qtt(t={}){return Object.keys(t).length===0&&t.constructor===Object}const dU=()=>typeof navigator<"u"?/Mac/.test(navigator.platform):!1,Gtt=()=>typeof navigator>"u"?!1:["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform);function cne(t,e){const n=typeof e=="string"?[e]:e,r=(s,o,a=0)=>{if(!s||typeof s!="object")return!1;const l=o[a],c=a===o.length-1;return l in s&&(c||r(s[l],o,a+1))&&delete s[l],Object.keys(s).length===0},i=JSON.parse(JSON.stringify(t));return n.forEach(s=>{if(!s.includes(".")){delete i[s];return}r(i,s.split("."))}),Object.entries(i).reduce((s,[o,a])=>(a==null||typeof a=="object"&&Object.keys(a).length===0||(s[o]=a),s),{})}const Ktt=/[\d-.]+(\w+)$/,Xtt=["px","rem","em","in","q","mm","cm","pt","pc","vh","vw","vmin","vmax"];function mT(t="0"){const e=t.toString()||"0",n=Number.parseFloat(e),r=e.match(Ktt),i=((r==null?void 0:r[1])??"").toLowerCase();return[n,Xtt.includes(i)?i:null]}function mI(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}const Ytt=Object.freeze({swiss:"Arial, sans-serif",roman:"Times New Roman, serif",modern:"Courier New, monospace",script:"cursive",decorative:"fantasy",system:"system-ui",auto:"sans-serif"}),AF="sans-serif",Ztt=t=>(t||"").split(",").map(e=>e.trim()).filter(Boolean);function Jtt(t){return t&&Ytt[t.toLowerCase()]||AF}function Hb(t,e={}){if(!t||typeof t!="string")return t;const n=t.trim();if(!n||n.includes(","))return n;const{fallback:r,wordFamily:i}=e,s=r??(i?Jtt(i):void 0)??AF,o=Ztt(s);if(o.length===0)return n;const a=n.toLowerCase();return o.some(c=>c.toLowerCase()===a)?o.join(", "):[n,...o].join(", ")}const y9=new Map;function fU(t,e,n={}){let r=Qtt(),i=ent(e),s;const o=tnt(t.styleId,e.styles);for(const l of o)r=dne(r,l.paragraph),i=fne(i,l.character),!s&&l.numbering&&(s=une(l.numbering.numId,l.numbering.level,e));r=dne(r,t.paragraphProps),i=fne(i,t.characterProps),t.numbering&&(s=une(t.numbering.numId,t.numbering.level,e));const a=n!=null&&n.sdt?Nwe(n.sdt):void 0;return{paragraph:r,character:i,numbering:s,sdt:a}}function une(t,e,n){var s,o,a;const r=(s=n.numbering)==null?void 0:s[t];if(!r)return;const i=r.levels.find(l=>l.level===e)??r.levels[e];if(i)return{numId:t,level:e,indent:{left:(o=i.indent)==null?void 0:o.left,hanging:(a=i.indent)==null?void 0:a.hanging},format:i.format??"decimal",text:i.text??"%1.",start:i.start??1}}function Nwe(t){if(!t)return;const{nodeType:e,attrs:n,cacheKey:r}=t;if(!e)return;const i=gI(n)?n:{},s=dnt(e,i,r);if(s&&y9.has(s))return y9.get(s);let o;switch(e){case"fieldAnnotation":o=nnt(i);break;case"structuredContent":case"structuredContentBlock":o=rnt(e,i);break;case"documentSection":o=int(i);break;case"docPartObject":o=snt(i);break}return o&&s&&y9.set(s,o),o}function Qtt(t){return{alignment:"left",spacing:{before:0,after:0,line:12,lineRule:"auto"},indent:{left:0,right:0,firstLine:0,hanging:0},tabs:[]}}function ent(t){var s,o,a,l;const e=((s=t.defaults)==null?void 0:s.paragraphFont)??"Calibri",n=(o=t.defaults)==null?void 0:o.paragraphFontFallback,r=(a=t.defaults)==null?void 0:a.paragraphFontFamily;return{font:{family:Hb(e,{fallback:n,wordFamily:r})??e,size:((l=t.defaults)==null?void 0:l.fontSize)??11,weight:400,italic:!1},color:"#000000"}}function tnt(t,e){if(!t||!e)return[];const n=[],r=new Set;let i=e[t];for(;i&&!r.has(i.id);)n.unshift(i),r.add(i.id),i=i.basedOn?e[i.basedOn]:void 0;return n}function dne(t,e){return e?{...t,alignment:e.alignment??t.alignment,spacing:e.spacing?{...t.spacing,...e.spacing}:t.spacing,indent:e.indent?{...t.indent,...e.indent}:t.indent,borders:e.borders?{...t.borders,...e.borders}:t.borders,shading:e.shading??t.shading,tabs:e.tabs??t.tabs}:t}function fne(t,e){return e?{...t,font:e.font?{...t.font,...e.font}:t.font,color:e.color??t.color,underline:e.underline??t.underline,strike:e.strike??t.strike,highlight:e.highlight??t.highlight,letterSpacing:e.letterSpacing??t.letterSpacing}:t}function nnt(t){const e=js(t.fieldId)??"",n=unt(t),r=lnt(t.size),i=gI(t.extras)?t.extras:null,s=gI(t.marks)?t.marks:void 0;return{type:"fieldAnnotation",fieldId:e,variant:cnt(t.type),fieldType:js(t.fieldType),displayLabel:js(t.displayLabel),defaultDisplayLabel:js(t.defaultDisplayLabel),alias:js(t.alias),fieldColor:C5(t.fieldColor),borderColor:C5(t.borderColor),highlighted:Sg(t.highlighted,!0),fontFamily:T1(t.fontFamily),fontSize:ant(t.fontSize),textColor:C5(t.textColor)??null,textHighlight:C5(t.textHighlight)??null,linkUrl:T1(t.linkUrl),imageSrc:T1(t.imageSrc),rawHtml:t.rawHtml??void 0,size:r??null,extras:i,multipleImage:Sg(t.multipleImage,!1),hash:js(t.hash)??null,generatorIndex:TF(t.generatorIndex),sdtId:js(t.sdtId)??null,hidden:Sg(t.hidden,!1),visibility:ont(t.visibility),isLocked:Sg(t.isLocked,!1),formatting:n,marks:s}}function rnt(t,e){return{type:"structuredContent",scope:t==="structuredContentBlock"?"block":"inline",id:T1(e.id),tag:js(e.tag),alias:js(e.alias),sdtPr:e.sdtPr}}function int(t){return{type:"documentSection",id:T1(t.id),title:js(t.title)??null,description:js(t.description)??null,sectionType:js(t.sectionType)??null,isLocked:Sg(t.isLocked,!1),sdBlockId:T1(t.sdBlockId)}}function snt(t){return{type:"docPartObject",gallery:js(t.docPartGallery??t.gallery)??null,uniqueId:js(t.id??t.uniqueId)??null,alias:js(t.alias)??null,instruction:js(t.instruction)??null}}function gI(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function js(t){if(t!=null){if(typeof t=="string"){const e=t.trim();return e.length?e:void 0}return String(t)}}function T1(t){return js(t)??null}function Sg(t,e){if(typeof t=="boolean")return t;if(typeof t=="string"){const n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1}return t==null?e:!!t}function ont(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="visible"||e==="hidden")return e}function C5(t){if(typeof t!="string")return;const e=t.trim();if(!(!e||e.toLowerCase()==="none"))return e}function ant(t){if(t==null)return null;if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=t.trim();return e.length?e:null}return null}function TF(t){if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=parseFloat(t);return Number.isFinite(e)?e:null}return null}function lnt(t){if(!gI(t))return null;const e=t,n=TF(e.width),r=TF(e.height);if(n==null&&r==null)return null;const i={};return n!=null&&(i.width=n),r!=null&&(i.height=r),i}function cnt(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="text"||e==="image"||e==="signature"||e==="checkbox"||e==="html"||e==="link")return e}function unt(t){const e=Sg(t.bold,!1),n=Sg(t.italic,!1),r=Sg(t.underline,!1),i={};return e&&(i.bold=!0),n&&(i.italic=!0),r&&(i.underline=!0),Object.keys(i).length?i:void 0}function dnt(t,e,n){const r=js(n);if(r)return`${t}:${r}`;const i=js(e.hash);if(i)return`${t}:${i}`;const s=js(e.id);if(s)return`${t}:${s}`}function Iwe(t,e,n,{check:r=!1}={}){const i=t.getSchema(n);if(i){const s=e.nodeFromJSON(i);return r&&s.check(),s}return e.topNodeType.createAndFill()}function Iv(t,e){return e.nodes[t]||e.marks[t]||null}function kF(t){const e=Object.entries(t).filter(([n,r])=>n==="attrs"&&qtt(r)?!1:r!=null);return Object.fromEntries(e)}function uc(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}' in schema.`);return e.nodes[t]}return t}function A0(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}' in schema.`);return e.marks[t]}return t}function hU(t){for(let e=0;e<t.edgeCount;e++){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const fnt=(t,e)=>{const r=e.filter(o=>o.type==="node").find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ni(kn(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")};function hnt(t){const e={bulletList:1,orderedList:2};return{attributes:{parentAttributes:{"w14:paraId":wa(),"w14:textId":wa(),"w:rsidR":wa(),"w:rsidRDefault":wa(),"w:rsidP":wa(),paragraphProperties:{type:"element",name:"w:pPr",elements:[{type:"element",name:"w:pStyle",attributes:{"w:val":"ListParagraph"}},{type:"element",name:"w:numPr",elements:[{type:"element",name:"w:ilvl",attributes:{"w:val":"0"}},{type:"element",name:"w:numId",attributes:{"w:val":e[t]||0}}]}]}}}}}const Rwe=t=>t instanceof Vt;function CF(t,e,n={}){return t.find(r=>r.type===e&&Tx(r.attrs,n))}function pnt(t,e,n={}){return!!CF(t,e,n)}function Tp(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=CF([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(CF([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&pnt([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function yI(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?A0(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Tx(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,m=f.pos;t.doc.nodesBetween(h,m,(y,w)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(h,w),E=Math.min(m,w+y.nodeSize),A=E-b;o+=A,a.push(...y.marks.map(x=>({mark:x,from:b,to:E})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Tx(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function mnt(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=Tp(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function mC(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function bI(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?uc(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),m=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:m})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Tx(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}function Mwe(t,e,n={}){if(!e)return bI(t,null,n)||yI(t,null,n);const r=mC(e,t.schema);return r==="node"?bI(t,e,n):r==="mark"?yI(t,e,n):!1}function R2(t){const{from:e,to:n,empty:r}=t.selection,i=[];return r?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(e,n,s=>{i.push(...s.marks)}),i}const pU=(t,e,n=!1)=>{const{selection:r,doc:i}=t,{$from:s,$to:o}=r,a=s.marks().find(d=>d.type===e),l=o.marks().find(d=>d.type===e);let c;const u=[];return i.nodesBetween(s.pos,o.pos,(d,f)=>{if(d.marks){const h=d.marks.find(m=>m.type===e);h&&(c={from:f,to:f+d.nodeSize,attrs:h.attrs,contained:!a||!l||a===l},u.push(c))}}),n?u:c};function _F(t){var m,y,w;const{state:e}=t,{selection:n}=e,r=R2(e),i=n.$head.parent.attrs.marksAttrs,s=r.filter(b=>!["textStyle","link"].includes(b.type.name)).map(b=>({name:b.type.name,attrs:b.attrs})),o=r.filter(b=>b.type.name==="textStyle");if(s.push(...o.flatMap(hne)),i){const b=i.filter(A=>!["textStyle","link"].includes(A.type)).map(A=>({name:A.type,attrs:A.attrs||{}})),E=i.filter(A=>A.type==="textStyle");s.push(...b),s.push(...E.flatMap(hne))}const a=e.schema.marks.link,l=pU(e,a);if(l){let{from:b,to:E,attrs:A}=l;n.from>=b&&n.to<=E&&s.push({name:"link",attrs:A})}const c=["paragraphSpacing"],u=gnt(e);Object.keys(u).forEach(b=>{if(c.includes(b))return;const E={};E[b]=u[b],s.push({name:b,attrs:E})});const d=s.find(b=>b.name==="textColor"),f=s.find(b=>b.name==="textHighlight");return d&&s.push({name:"color",attrs:{color:(m=d.attrs)==null?void 0:m.textColor}}),f&&s.push({name:"highlight",attrs:{color:(y=f.attrs)==null?void 0:y.textHighlight}}),!!((w=t.storage.formatCommands)!=null&&w.storedStyle)&&s.push({name:"copyFormat",attrs:!0}),s}function hne(t){const e=[],{attrs:n}=t;return Object.keys(n).forEach(r=>{n[r]&&e.push({name:r,attrs:{[r]:n[r]}})}),e}function gnt(t){try{const{from:e,to:n,empty:r}=t.selection,i={},s=l=>{Object.keys(l.attrs).forEach(c=>{const u=l.attrs[c];u&&(i[c]=u)})};let o=e,a=n;return r?t.doc.nodesBetween(o,a+1,l=>s(l)):t.doc.nodesBetween(e,n,l=>s(l)),i}catch{return{}}}function M2(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function ynt(t,e,n){const i=t.state.doc.content.size,s=mI(e,0,i),o=mI(n,0,i),a=t.coordsAtPos(s),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,m=u-c,b={top:c,bottom:u,left:d,right:f,width:h,height:m,x:d,y:c};return{...b,toJSON:()=>b}}const mU=t=>{var n,r;const{$head:e}=t.selection;for(let i=e.depth;i>0;i-=1)if(((r=(n=e.node(i).type)==null?void 0:n.spec)==null?void 0:r.tableRole)==="row")return!0;return!1};function Lwe({content:t,type:e,editor:n}){var s,o;if(!n)throw new Error("[processContent] Editor instance is required");if(!n.schema)throw new Error("[processContent] Editor schema is not initialized");if(t==null)throw new Error("[processContent] Content is required and cannot be null or undefined");const r=((s=n==null?void 0:n.options)==null?void 0:s.document)??((o=n==null?void 0:n.options)==null?void 0:o.mockDocument)??(typeof document<"u"?document:null);let i;switch(e){case"html":if(!r)throw new Error("[processContent] HTML processing requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");i=b1(t,n,{isImport:!0,document:r});break;case"markdown":if(!r)throw new Error("[processContent] Markdown processing requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");i=mV(t,n,{isImport:!0,document:r});break;case"text":if(!r)throw new Error("[processContent] Text processing requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");const a=r.createElement("div");a.dataset.superdocImport="true";const l=r.createElement("p");l.textContent=t,a.appendChild(l),i=ka.fromSchema(n.schema).parse(a),i=_x(i);break;case"schema":i=n.schema.nodeFromJSON(t),i=_x(i);break;default:throw new Error(`[processContent] Unknown content type: ${e}. Expected 'html', 'markdown', 'text', or 'schema'.`)}return i}const bnt=["required","readonly","disabled","checked","multiple","autofocus"];function gT(t,e={},n={}){const r=n.customBooleans||[],i=[...bnt,...r];Object.entries(e).forEach(([s,o])=>{if(i.includes(s)){o?t.setAttribute(s,""):t.removeAttribute(s);return}o!=null?t.setAttribute(s,o):t.removeAttribute(s)})}const gC=Object.freeze(Object.defineProperty({__proto__:null,chainableEditorState:eV,cleanSchemaItem:kF,convertMarkdownToHTML:mye,createDocFromHTML:b1,createDocFromMarkdown:mV,createDocument:Iwe,defaultBlockAt:hU,findChildren:M2,findMark:pU,findParentNode:Ml,findParentNodeClosestToPos:A2,generateDocxListAttributes:hnt,generateDocxRandomId:wa,generateRandom32BitHex:MH,generateRandomSigned32BitIntStrId:Sp,getActiveFormatting:_F,getExtensionConfigField:kn,getMarkRange:Tp,getMarkType:A0,getMarksBetween:mnt,getMarksFromSelection:R2,getNodeType:uc,getSchemaTypeByName:Iv,getSchemaTypeNameByName:mC,isActive:Mwe,isInTable:mU,isList:fnt,isMarkActive:yI,isNodeActive:bI,isTextSelection:Rwe,posToDOMRect:ynt,processContent:Lwe,updateDOMAttributes:gT},Symbol.toStringTag,{value:"Module"})),yf={RESOLVED:"resolved",NEW:"new",ADD:"add",UPDATE:"update",DELETED:"deleted",PENDING:"pending",SELECTED:"selected",COMMENTS_LIST:"comments-list",CHANGE_ACCEPTED:"change-accepted",CHANGE_REJECTED:"change-rejected"};function wnt(t){return typeof t.captureStackTrace=="function"}class wI extends Error{constructor(e,n){super(e),this.cause=n,this.name="FileObjectError",wnt(Error)&&Error.captureStackTrace(this,this.constructor)}}class vnt extends wI{constructor(e){super("Invalid data URI format: URI must contain exactly one comma separator"),this.uri=e,this.name="InvalidDataUriError"}}class xnt extends wI{constructor(e,n){super(`Failed to fetch file from URL: ${e}`,n),this.url=e,this.name="FetchFailedError"}}const NF=async(t,e,n)=>{try{if(t.startsWith("data:")&&t.includes(";base64,")){const s=t.split(",");if(s.length!==2)throw new vnt(t);const o=atob(s[1]),a=Uint8Array.from(o,l=>l.charCodeAt(0));return new File([a],e,{type:n})}const r=await fetch(t);if(!r.ok)throw new xnt(t,new Error(`HTTP ${r.status}: ${r.statusText}`));const i=await r.blob();return new File([i],e,{type:n})}catch(r){throw r instanceof wI?r:new wI("Failed to create file object",r)}},gU={mounted(t,e){const n=r=>{var i;t.contains(r.target)||(i=e.value)==null||i.call(e,r)};document.addEventListener("click",n),t.__clickOutsideHandler=n},unmounted(t){t.__clickOutsideHandler&&(document.removeEventListener("click",t.__clickOutsideHandler),delete t.__clickOutsideHandler)}};var vI=200,Co=function(){};Co.prototype.append=function(e){return e.length?(e=Co.from(e),!this.length&&e||e.length<vI&&this.leafAppend(e)||this.length<vI&&e.leafPrepend(this)||this.appendInner(e)):this};Co.prototype.prepend=function(e){return e.length?Co.from(e).append(this):this};Co.prototype.appendInner=function(e){return new Ent(this,e)};Co.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Co.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Co.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Co.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Co.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Co.from=function(e){return e instanceof Co?e:e&&e.length?new Dwe(e):Co.empty};var Dwe=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vI)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vI)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Co);Co.empty=new Dwe([]);var Ent=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Co);const Snt=500;class zu{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Yd(d.map));let h=d.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Yd(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new zu(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Yd(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let c=o-r.depth;return c>Tnt&&(a=Ant(a,c),o-=c),new zu(a.append(s),o)}remapping(e,n){let r=new cd;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new zu(this.items.append(e.map(n=>new Yd(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(f.step){let y=e.steps[h].invert(e.docs[h]),w=f.selection&&f.selection.map(s.slice(l+1,h));w&&a++,r.push(new Yd(m,y,w))}else r.push(new Yd(m))},i);let c=[];for(let f=n;f<o;f++)c.push(new Yd(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new zu(u,a);return d.emptyItemCount()>Snt&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Yd(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new zu(Co.from(i.reverse()),s)}}zu.empty=new zu(Co.empty,0);function Ant(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Yd{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Yd(n.getMap().invert(),n,this.selection)}}}class zm{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Tnt=20;function knt(t,e,n,r){let i=n.getMeta(kp),s;if(i)return i.historyState;n.getMeta(Nnt)&&(t=new zm(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(kp))return o.getMeta(kp).redo?new zm(t.done.addTransform(n,void 0,r,i6(e)),t.undone,pne(n.mapping.maps),t.prevTime,t.prevComposition):new zm(t.done,t.undone.addTransform(n,void 0,r,i6(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Cnt(n,t.prevRanges)),c=o?b9(t.prevRanges,n.mapping):pne(n.mapping.maps);return new zm(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,i6(e)),zu.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new zm(t.done.rebased(n,s),t.undone.rebased(n,s),b9(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new zm(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),b9(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Cnt(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function pne(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function b9(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function _nt(t,e,n){let r=i6(e),i=kp.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new zm(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(kp,{redo:n,historyState:l})}let w9=!1,mne=null;function i6(t){let e=t.plugins;if(mne!=e){w9=!1,mne=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){w9=!0;break}}return w9}const kp=new ni("history"),Nnt=new ni("closeHistory");function Int(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Mr({key:kp,state:{init(){return new zm(zu.empty,zu.empty,null,0,-1)},apply(e,n,r){return knt(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Pwe:r=="historyRedo"?Fwe:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function Owe(t,e){return(n,r)=>{let i=kp.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=_nt(i,n,t);s&&r(s.scrollIntoView())}return!0}}const Pwe=Owe(!1),Fwe=Owe(!0);function Bwe(t){let e=kp.getState(t);return e?e.done.eventCount:0}function jwe(t){let e=kp.getState(t);return e?e.undone.eventCount:0}const qo=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Dx=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let IF=null;const Mh=function(t,e,n){let r=IF||(IF=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Rnt=function(){IF=null},Vb=function(t,e,n,r){return n&&(gne(t,e,n,r,-1)||gne(t,e,n,r,1))},Mnt=/^(img|br|input|textarea|hr)$/i;function gne(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Gc(t))){let o=t.parentNode;if(!o||o.nodeType!=1||yC(t)||Mnt.test(t.nodeName)||t.contentEditable=="false")return!1;e=qo(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Gc(t):0}else return!1}}function Gc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Lnt(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Gc(t)}else if(t.parentNode&&!yC(t))e=qo(t),t=t.parentNode;else return null}}function Dnt(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!yC(t))e=qo(t)+1,t=t.parentNode;else return null}}function Ont(t,e,n){for(let r=e==0,i=e==Gc(t);r||i;){if(t==n)return!0;let s=qo(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Gc(t)}}function yC(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const eM=function(t){return t.focusNode&&Vb(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function yy(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Pnt(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Fnt(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Gc(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Gc(r.startContainer),r.startOffset)}}}const jf=typeof navigator<"u"?navigator:null,yne=typeof document<"u"?document:null,T0=jf&&jf.userAgent||"",RF=/Edge\/(\d+)/.exec(T0),$we=/MSIE \d/.exec(T0),MF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(T0),Ll=!!($we||MF||RF),$g=$we?document.documentMode:MF?+MF[1]:RF?+RF[1]:0,nu=!Ll&&/gecko\/(\d+)/i.test(T0);nu&&+(/Firefox\/(\d+)/.exec(T0)||[0,0])[1];const LF=!Ll&&/Chrome\/(\d+)/.exec(T0),Ao=!!LF,zwe=LF?+LF[1]:0,_a=!Ll&&!!jf&&/Apple Computer/.test(jf.vendor),Ox=_a&&(/Mobile\/\w+/.test(T0)||!!jf&&jf.maxTouchPoints>2),$c=Ox||(jf?/Mac/.test(jf.platform):!1),Hwe=jf?/Win/.test(jf.platform):!1,bp=/Android \d/.test(T0),bC=!!yne&&"webkitFontSmoothing"in yne.documentElement.style,Bnt=bC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jnt(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Sh(t,e){return typeof t=="number"?t:t[e]}function $nt(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function bne(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Dx(o);continue}let a=o,l=a==s.body,c=l?jnt(s):$nt(a),u=0,d=0;if(e.top<c.top+Sh(r,"top")?d=-(c.top-e.top+Sh(i,"top")):e.bottom>c.bottom-Sh(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Sh(i,"top")-c.top:e.bottom-c.bottom+Sh(i,"bottom")),e.left<c.left+Sh(r,"left")?u=-(c.left-e.left+Sh(i,"left")):e.right>c.right-Sh(r,"right")&&(u=e.right-c.right+Sh(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-h,w=a.scrollTop-m;e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Dx(o)}}function znt(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Vwe(t.dom)}}function Vwe(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Dx(r));return e}function Hnt({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Uwe(n,r==0?0:r-e)}function Uwe(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let iv=null;function Vnt(t){if(t.setActive)return t.setActive();if(iv)return t.focus(iv);let e=Vwe(t);t.focus(iv==null?{get preventScroll(){return iv={preventScroll:!0},!0}}:void 0),iv||(iv=!1,Uwe(e,0))}function Wwe(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Mh(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let m=f[h];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Unt(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Wwe(n,i)}function Unt(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=Om(r,1);if(o.top!=o.bottom&&yU(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function yU(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Wnt(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function qnt(t,e,n){let{node:r,offset:i}=Wwe(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Gnt(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function qwe(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(yU(e,c))return qwe(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function Knt(t,e){let n=t.dom.ownerDocument,r,i=0,s=Fnt(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!yU(e,c)||(o=qwe(t.dom,e,c),!o))return null}if(_a)for(let c=o;r&&c;c=Dx(c))c.draggable&&(r=void 0);if(o=Wnt(o,e),r){if(nu&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;bC&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=Gnt(t,r,i,e))}a==null&&(a=qnt(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function wne(t){return t.top<t.bottom||t.left<t.right}function Om(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(wne(r))return r}return Array.prototype.find.call(n,wne)||t.getBoundingClientRect()}const Xnt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gwe(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=bC||nu;if(r.nodeType==3)if(o&&(Xnt.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Om(Mh(r,i,i),n);if(nu&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Om(Mh(r,i-1,i-1),-1);if(c.top==l.top){let u=Om(Mh(r,i,i+1),-1);if(u.top!=l.top)return OE(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,OE(Om(Mh(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Gc(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return v9(l.getBoundingClientRect(),!1)}if(s==null&&i<Gc(r)){let l=r.childNodes[i];if(l.nodeType==1)return v9(l.getBoundingClientRect(),!0)}return v9(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Gc(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Mh(l,Gc(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return OE(Om(c,1),!1)}if(s==null&&i<Gc(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Mh(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return OE(Om(c,-1),!0)}return OE(Om(r.nodeType==3?Mh(r):r,-n),n>=0)}function OE(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function v9(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Kwe(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Ynt(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Kwe(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Gwe(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Mh(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const Znt=/[\u0590-\u08ac]/;function Jnt(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!Znt.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:Kwe(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),w=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),w}):r.pos==r.start()||r.pos==r.end()}let vne=null,xne=null,Ene=!1;function Qnt(t,e,n){return vne==e&&xne==n?Ene:(vne=e,xne=n,Ene=n=="up"||n=="down"?Ynt(t,e,n):Jnt(t,e,n))}const ru=0,Sne=1,xy=2,$f=3;class wC{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ru,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>qo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof Ywe){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Xwe&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?qo(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?qo(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=qo(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=qo(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let y=this.children[h],w=m+y.size;if(s>m&&o<w)return y.setSelection(e-m-y.border,n-m-y.border,r,i);m=w}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((nu||_a)&&e==n){let{node:h,offset:m}=a;if(h.nodeType==3){if(d=!!(m&&h.nodeValue[m-1]==`
`),d&&m==h.nodeValue.length)for(let y=h,w;y;y=y.parentNode){if(w=y.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:qo(w)+1});break}let b=y.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let y=h.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(nu&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&_a)&&Vb(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Vb(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&nu)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?xy:Sne,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=$f:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?xy:$f}r=o}this.dirty=xy}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?xy:Sne;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Xwe extends wC{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ru&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ert extends wC{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ub extends wC{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Kf.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ub(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&$f||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=$f&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ru){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ru}}slice(e,n,r){let i=Ub.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=OF(s,n,o,r)),e>0&&(s=OF(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zg extends wC{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Kf.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Qwe(u,r,n),c?l=new trt(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new tM(e,n,r,i,u,f,s):new zg(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Nt.empty)}return e}matchesNode(e,n,r){return this.dirty==ru&&e.eq(this.node)&&xI(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new rrt(this,o&&o.node,e);ort(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Si.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==xy)&&(o&&this.protectLocalComposition(e,o),Zwe(this.contentDOM,this.children,e),Ox&&art(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Vt)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=lrt(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new ert(this,s,n,i);e.input.compositionNodes.push(o),this.children=OF(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==$f||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ru}updateOuterDeco(e){if(xI(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Jwe(this.dom,this.nodeDOM,DF(this.outerDeco,this.node,n),DF(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ane(t,e,n,r,i){Qwe(r,e,t);let s=new zg(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class tM extends zg{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==$f||this.dirty!=ru&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ru||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ru,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new tM(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=$f)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ywe extends wC{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ru&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class trt extends zg{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==$f)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zwe(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Tne(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Ub){let l=r?r.previousSibling:t.lastChild;Zwe(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Tne(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const rA=function(t){t&&(this.nodeName=t)};rA.prototype=Object.create(null);const Ey=[new rA];function DF(t,e,n){if(t.length==0)return Ey;let r=n?Ey[0]:new rA,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new rA(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new rA(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function Jwe(t,e,n,r){if(n==Ey&&r==Ey)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ey[0]),i=l}nrt(i,a||Ey[0],o)}return i}function nrt(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Qwe(t,e,n){return Jwe(t,t,Ey,DF(e,n,t.nodeType!=1))}function xI(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Tne(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class rrt{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=irt(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ru,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ub.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==$f&&o.dom==o.contentDOM&&(o.dirty=xy),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof zg){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=$f&&xI(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=xy,d.updateChildren(i,o+1),d.dirty=ru),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!xI(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=zg.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=zg.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Xwe(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ub;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof tM)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_a||Ao)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Ywe(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function irt(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Ub)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function srt(t,e){return t.type.side-e.type.side}function ort(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(u?(d||(d=[u])).push(w):u=w)}if(u)if(d){d.sort(srt);for(let w=0;w<d.length;w++)n(d[w],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let w=0;w<a.length;w++)a[w].to<=s&&a.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let w=m;o<i.length&&i[o].from<w&&(w=i[o].from);for(let b=0;b<a.length;b++)a[b].to<w&&(w=a[b].to);w<m&&(l=f.cut(w-s),f=f.cut(0,w-s),m=w,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let y=f.isInline&&!f.isLeaf?a.filter(w=>!w.inline):a.slice();r(f,y,e.forChild(s,f),h),s=m}}function art(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function lrt(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function OF(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function bU(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(eM(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&ln.isSelectable(d)&&i.parent&&!(d.isInline&&Ont(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new ln(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=wU(t,u,a,d)}return c}function eve(t){return t.editable?t.hasFocus():nve(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Cp(t,e=!1){let n=t.state.selection;if(tve(t,n),!!eve(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ao){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Vb(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)urt(t);else{let{anchor:r,head:i}=n,s,o;kne&&!(n instanceof Vt)&&(n.$from.parent.inlineContent||(s=Cne(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Cne(t,n.to))),t.docView.setSelection(r,i,t,e),kne&&(s&&_ne(s),o&&_ne(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&crt(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const kne=_a||Ao&&zwe<63;function Cne(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(_a&&i&&i.contentEditable=="false")return x9(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return x9(i);if(s)return x9(s)}}function x9(t){return t.contentEditable="true",_a&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function _ne(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function crt(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!eve(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function urt(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,qo(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Ll&&$g<=11&&(n.disabled=!0,n.disabled=!1)}function tve(t,e){if(e instanceof ln){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Nne(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Nne(t)}function Nne(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function wU(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Vt.between(e,n,r)}function Ine(t){return t.editable&&!t.hasFocus()?!1:nve(t)}function nve(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function drt(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Vb(e.node,e.offset,n.anchorNode,n.anchorOffset)}function PF(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&_n.findFrom(s,e)}function Hm(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Rne(t,e,n){let r=t.state.selection;if(r instanceof Vt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Hm(t,new Vt(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=PF(t.state,e);return i&&i instanceof ln?Hm(t,i):!1}else if(!($c&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?ln.isSelectable(s)?Hm(t,new ln(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):bC?Hm(t,new Vt(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ln&&r.node.isInline)return Hm(t,new Vt(e>0?r.$to:r.$from));{let i=PF(t.state,e);return i?Hm(t,i):!1}}}function EI(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function iA(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function sv(t,e){return e<0?frt(t):hrt(t)}function frt(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(nu&&n.nodeType==1&&r<EI(n)&&iA(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(iA(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(rve(n))break;{let a=n.previousSibling;for(;a&&iA(a,-1);)i=n.parentNode,s=qo(a),a=a.previousSibling;if(a)n=a,r=EI(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?FF(t,n,r):i&&FF(t,i,s)}function hrt(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=EI(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(iA(a,1))s=n,o=++r;else break}else{if(rve(n))break;{let a=n.nextSibling;for(;a&&iA(a,1);)s=a.parentNode,o=qo(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=EI(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&FF(t,s,o)}function rve(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function prt(t,e){for(;t&&e==t.childNodes.length&&!yC(t);)e=qo(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function mrt(t,e){for(;t&&!e&&!yC(t);)e=qo(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function FF(t,e,n){if(e.nodeType!=3){let s,o;(o=prt(e,n))?(e=o,n=0):(s=mrt(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(eM(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Cp(t)},50)}function Mne(t,e){let n=t.state.doc.resolve(e);if(!(Ao||Hwe)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Lne(t,e,n){let r=t.state.selection;if(r instanceof Vt&&!r.empty||n.indexOf("s")>-1||$c&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=PF(t.state,e);if(o&&o instanceof ln)return Hm(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Ja?_n.near(o,e):_n.findFrom(o,e);return a?Hm(t,a):!1}return!1}function Dne(t,e){if(!(t.state.selection instanceof Vt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function One(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function grt(t){if(!_a||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;One(t,r,"true"),setTimeout(()=>One(t,r,"false"),20)}return!1}function yrt(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function brt(t,e){let n=e.keyCode,r=yrt(e);if(n==8||$c&&n==72&&r=="c")return Dne(t,-1)||sv(t,-1);if(n==46&&!e.shiftKey||$c&&n==68&&r=="c")return Dne(t,1)||sv(t,1);if(n==13||n==27)return!0;if(n==37||$c&&n==66&&r=="c"){let i=n==37?Mne(t,t.state.selection.from)=="ltr"?-1:1:-1;return Rne(t,i,r)||sv(t,i)}else if(n==39||$c&&n==70&&r=="c"){let i=n==39?Mne(t,t.state.selection.from)=="ltr"?1:-1:1;return Rne(t,i,r)||sv(t,i)}else{if(n==38||$c&&n==80&&r=="c")return Lne(t,-1,r)||sv(t,-1);if(n==40||$c&&n==78&&r=="c")return grt(t)||Lne(t,1,r)||sv(t,1);if(r==($c?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function vU(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Kf.fromSchema(t.state.schema),a=cve(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=lve[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=a.createElement(u[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function ive(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return a=new Ut(Nt.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,m=Kf.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let w=o.appendChild(document.createElement("p"));y&&w.appendChild(m.serializeNode(h.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=Ert(n),bC&&Srt(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ka.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!wrt.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Art(Pne(a,+u[1],+u[2]),u[4]);else if(a=Ut.maxOpen(vrt(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Pne(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const wrt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vrt(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&ove(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=ave(o[o.length-1],s.length));let u=sve(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Nt.from(o)}return t}function sve(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Nt.from(t));return t}function ove(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=ove(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Nt.from(sve(n,t,i+1))))}}function ave(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ave(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Nt.empty,!0);return t.copy(n.append(r))}function BF(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=BF(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Nt.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Pne(t,e,n){return e<t.openStart&&(t=new Ut(BF(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Ut(BF(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const lve={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Fne=null;function cve(){return Fne||(Fne=document.implementation.createHTMLDocument("title"))}let E9=null;function xrt(t){let e=window.trustedTypes;return e?(E9||(E9=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),E9.createHTML(t)):t}function Ert(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=cve().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&lve[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=xrt(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Srt(t){let e=t.querySelectorAll(Ao?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Art(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Nt.from(l.create(r[a+1],i)),s++,o++}return new Ut(i,s,o)}const Qa={},el={},Trt={touchstart:!0,touchmove:!0};class krt{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Crt(t){for(let e in Qa){let n=Qa[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Nrt(t,r)&&!xU(t,r)&&(t.editable||!(r.type in el))&&n(t,r)},Trt[e]?{passive:!0}:void 0)}_a&&t.dom.addEventListener("input",()=>null),jF(t)}function Ag(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function _rt(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function jF(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>xU(t,r))})}function xU(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Nrt(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Irt(t,e){!xU(t,e)&&Qa[e.type]&&(t.editable||!(e.type in el))&&Qa[e.type](t,e)}el.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dve(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(bp&&Ao&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ox&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,yy(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||brt(t,n)?n.preventDefault():Ag(t,"key")};el.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};el.keypress=(t,e)=>{let n=e;if(dve(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||$c&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Vt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function nM(t){return{left:t.clientX,top:t.clientY}}function Rrt(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function EU(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function k1(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Mrt(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ln.isSelectable(r)?(k1(t,new ln(n)),!0):!1}function Lrt(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ln&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ln.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(k1(t,ln.create(t.state.doc,i)),!0):!1}function Drt(t,e,n,r,i){return EU(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Lrt(t,n):Mrt(t,n))}function Ort(t,e,n,r){return EU(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Prt(t,e,n,r){return EU(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Frt(t,n,r)}function Frt(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(k1(t,Vt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)k1(t,Vt.create(r,a+1,a+1+o.content.size));else if(ln.isSelectable(o))k1(t,ln.create(r,a));else continue;return!0}}function SU(t){return SI(t)}const uve=$c?"metaKey":"ctrlKey";Qa.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=SU(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Rrt(n,t.input.lastClick)&&!n[uve]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(nM(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Brt(t,o,n,!!r)):(s=="doubleClick"?Ort:Prt)(t,o.pos,o.inside,n)?n.preventDefault():Ag(t,"pointer"))};class Brt{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[uve],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ln&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&nu&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ag(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Cp(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(nM(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ag(this.view,"pointer"):Drt(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_a&&this.mightDrag&&!this.mightDrag.node.isAtom||Ao&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(k1(this.view,_n.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ag(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ag(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qa.touchstart=t=>{t.input.lastTouch=Date.now(),SU(t),Ag(t,"pointer")};Qa.touchmove=t=>{t.input.lastTouch=Date.now(),Ag(t,"pointer")};Qa.contextmenu=t=>SU(t);function dve(t,e){return t.composing?!0:_a&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const jrt=bp?5e3:-1;el.compositionstart=el.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Vt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ao&&Hwe&&$rt(t)))t.markCursor=t.state.storedMarks||n.marks(),SI(t,!0),t.markCursor=null;else if(SI(t,!e.selection.empty),nu&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}fve(t,jrt)};function $rt(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}el.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,fve(t,20))};function fve(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>SI(t),e))}function hve(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Hrt());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function zrt(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Lnt(e.focusNode,e.focusOffset),r=Dnt(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function Hrt(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function SI(t,e=!1){if(!(bp&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),hve(t),e||t.docView&&t.docView.dirty){let n=bU(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Vrt(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const yT=Ll&&$g<15||Ox&&Bnt<604;Qa.copy=el.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=yT?null:n.clipboardData,o=r.content(),{dom:a,text:l}=vU(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Vrt(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Urt(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Wrt(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?bT(t,r.value,null,i,e):bT(t,r.textContent,r.innerHTML,i,e)},50)}function bT(t,e,n,r,i){let s=ive(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||Ut.empty)))return!0;if(!s)return!1;let o=Urt(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pve(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}el.paste=(t,e)=>{let n=e;if(t.composing&&!bp)return;let r=yT?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&bT(t,pve(r),r.getData("text/html"),i,n)?n.preventDefault():Wrt(t,n)};class mve{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const qrt=$c?"altKey":"ctrlKey";function gve(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[qrt]}Qa.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(nM(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ln?i.to-1:i.to))){if(r&&r.mightDrag)o=ln.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=ln.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=vU(t,a);(!n.dataTransfer.files.length||!Ao||zwe>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(yT?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",yT||n.dataTransfer.setData("text/plain",c),t.dragging=new mve(u,gve(t,n),o)};Qa.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};el.dragover=el.dragenter=(t,e)=>e.preventDefault();el.drop=(t,e)=>{try{Grt(t,e,t.dragging)}finally{t.dragging=null}};function Grt(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(nM(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",h=>{s=h(s,t,!1)}):s=ive(t,pve(e.dataTransfer),yT?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&gve(t,e));if(t.someProp("handleDrop",h=>h(t,e,s||Ut.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?o0e(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(d))return;let f=l.doc.resolve(c);if(u&&ln.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new ln(f));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,y,w,b)=>h=b),l.setSelection(wU(t,f,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Qa.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Cp(t)},20))};Qa.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Qa.beforeinput=(t,e)=>{if(Ao&&bp&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,yy(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in el)Qa[t]=el[t];function wT(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class AI{constructor(e,n){this.toDOM=e,this.spec=n||fb,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Qn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof AI&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wT(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Hg{constructor(e,n){this.attrs=e,this.spec=n||fb}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Qn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Hg&&wT(this.attrs,e.attrs)&&wT(this.spec,e.spec)}static is(e){return e.type instanceof Hg}destroy(){}}class AU{constructor(e,n){this.attrs=e,this.spec=n||fb}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Qn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof AU&&wT(this.attrs,e.attrs)&&wT(this.spec,e.spec)}destroy(){}}class Qn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Qn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Qn(e,e,new AI(n,r))}static inline(e,n,r,i){return new Qn(e,n,new Hg(r,i))}static node(e,n,r,i){return new Qn(e,n,new AU(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Hg}get widget(){return this.type instanceof AI}}const Rv=[],fb={};class An{constructor(e,n){this.local=e.length?e:Rv,this.children=n.length?n:Rv}static create(e,n){return n.length?TI(n,e,0,fb):fa}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==fa||e.maps.length==0?this:this.mapInner(e,n,0,0,r||fb)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Krt(this.children,o||[],e,n,r,i,s):o?new An(o.sort(hb),Rv):fa}add(e,n){return n.length?this==fa?An.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=bve(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,TI(u,a,c+1,fb)),s+=3}});let o=yve(s?wve(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new An(o.length?this.local.concat(o).sort(hb):this.local,i||this.children)}remove(e){return e.length==0||this==fa?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=fa?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new An(i,r):fa}forChild(e,n){if(this==fa)return this;if(n.isLeaf)return An.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Hg){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new An(i.sort(hb),Rv);return r?new Km([a,r]):a}return r||fa}eq(e){if(this==e)return!0;if(!(e instanceof An)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return TU(this.localsInner(e))}localsInner(e){if(this==fa)return Rv;if(e.inlineContent||!this.local.some(Hg.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Hg||n.push(this.local[r]);return n}forEachSet(e){e(this)}}An.empty=new An([],[]);An.removeOverlap=TU;const fa=An.empty;class Km{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,fb));return Km.from(r)}forChild(e,n){if(n.isLeaf)return An.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=fa&&(s instanceof Km?r=r.concat(s.members):r.push(s))}return Km.from(r)}eq(e){if(!(e instanceof Km)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?TU(r?n:n.sort(hb)):Rv}static from(e){switch(e.length){case 0:return fa;case 1:return e[0];default:return new Km(e.every(n=>n instanceof An)?e:e.reduce((n,r)=>n.concat(r instanceof An?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Krt(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,m,y)=>{let w=y-m-(h-f);for(let b=0;b<a.length;b+=3){let E=a[b+1];if(E<0||f>E+u-d)continue;let A=a[b]+u-d;h>=A?a[b+1]=f<=A?-2:-1:f>=u&&w&&(a[b]+=w,a[b+1]+=w)}d+=w}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-i,{index:m,offset:y}=r.content.findIndex(d),w=r.maybeChild(m);if(w&&y==d&&y+w.nodeSize==h){let b=a[c+2].mapInner(n,w,u+1,t[c]+s+1,o);b!=fa?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Xrt(a,t,e,n,i,s,o),u=TI(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new An(e.sort(hb),a)}function yve(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Qn(i.from+e,i.to+e,i.type))}return n}function Xrt(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function bve(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function wve(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function TI(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=bve(t,a,l+n);if(c){s=!0;let u=TI(c,a,n+l+1,r);u!=fa&&i.push(l,l+a.nodeSize,u)}});let o=yve(s?wve(t):t,-n).sort(hb);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new An(o,i):fa}function hb(t,e){return t.from-e.from||t.to-e.to}function TU(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Bne(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Bne(e,i,r.copy(s.from,r.to)));break}}}return e}function Bne(t,e,n){for(;e<t.length&&hb(n,t[e])>0;)e++;t.splice(e,0,n)}function S9(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=fa&&e.push(r)}),t.cursorWrapper&&e.push(An.create(t.state.doc,[t.cursorWrapper.deco])),Km.from(e)}const Yrt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Zrt=Ll&&$g<=11;class Jrt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Qrt{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Jrt,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ll&&$g<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Zrt&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Yrt)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ine(this.view)){if(this.suppressingSelectionUpdates)return Cp(this.view);if(Ll&&$g<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Vb(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Dx(s))n.add(s);for(let s=e.anchorNode;s;s=Dx(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ine(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(nu&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||nit(e,d)!=h)&&f.remove()}}}else if((Ao||_a)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&eM(r)&&(c=bU(e))&&c.eq(_n.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Cp(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),eit(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Cp(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ll&&$g<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?qo(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?qo(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let jne=new WeakMap,$ne=!1;function eit(t){if(!jne.has(t)&&(jne.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=nu,$ne)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$ne=!0}}function zne(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Vb(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function tit(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return zne(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?zne(t,n):null}function nit(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function rit(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],eM(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ao&&t.input.lastKeyCode===8)for(let w=s;w>i;w--){let b=r.childNodes[w-1],E=b.pmViewDesc;if(b.nodeName=="BR"&&!E){s=w;break}if(!E||E.size)break}let d=t.state.doc,f=t.someProp("domParser")||ka.fromSchema(t.state.schema),h=d.resolve(o),m=null,y=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:iit,context:h});if(c&&c[0].pos!=null){let w=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=w),m={anchor:w+o,head:b+o}}return{doc:y,sel:m,from:o,to:a}}function iit(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(_a&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||_a&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const sit=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oit(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=bU(t,k);if(_&&!t.state.selection.eq(_)){if(Ao&&bp&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,yy(13,"Enter"))))return;let N=t.state.tr.setSelection(_);k=="pointer"?N.setMeta("pointer",!0):k=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=rit(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=cit(d.content,c.doc.content,c.from,f,h);if(m&&t.input.domChangeCount++,(Ox&&t.input.lastIOSEnter>Date.now()-225||bp)&&i.some(k=>k.nodeType==1&&!sit.test(k.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",k=>k(t,yy(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Vt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let k=Hne(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let _=t.state.tr.setSelection(k);s&&_.setMeta("composition",s),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Vt&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Ll&&$g<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),w=c.doc.resolveNoCache(m.endB-c.from),b=u.resolve(m.start),E=y.sameParent(w)&&y.parent.inlineContent&&b.end()>=m.endA;if((Ox&&t.input.lastIOSEnter>Date.now()-225&&(!E||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!E&&y.pos<c.doc.content.size&&(!y.sameParent(w)||!y.parent.inlineContent)&&y.pos<w.pos&&!/\S/.test(c.doc.textBetween(y.pos,w.pos,"","")))&&t.someProp("handleKeyDown",k=>k(t,yy(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&lit(u,m.start,m.endA,y,w)&&t.someProp("handleKeyDown",k=>k(t,yy(8,"Backspace")))){bp&&Ao&&t.domObserver.suppressSelectionUpdates();return}Ao&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),bp&&!E&&y.start()!=w.start()&&w.parentOffset==0&&y.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,w=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,yy(13,"Enter"))})},20));let A=m.start,x=m.endA,T=k=>{let _=k||t.state.tr.replace(A,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let N=Hne(t,_.doc,c.sel);N&&!(Ao&&t.composing&&N.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==A||N.head==_.mapping.map(x)-1)||Ll&&N.empty&&N.head==A)&&_.setSelection(N)}return s&&_.setMeta("composition",s),_.scrollIntoView()},R;if(E)if(y.pos==w.pos){Ll&&$g<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Cp(t),20));let k=T(t.state.tr.delete(A,x)),_=u.resolve(m.start).marksAcross(u.resolve(m.endA));_&&k.ensureMarks(_),t.dispatch(k)}else if(m.endA==m.endB&&(R=ait(y.parent.content.cut(y.parentOffset,w.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start())))){let k=T(t.state.tr);R.type=="add"?k.addMark(A,x,R.mark):k.removeMark(A,x,R.mark),t.dispatch(k)}else if(y.parent.child(y.index()).isText&&y.index()==w.index()-(w.textOffset?0:1)){let k=y.parent.textBetween(y.parentOffset,w.parentOffset),_=()=>T(t.state.tr.insertText(k,A,x));t.someProp("handleTextInput",N=>N(t,A,x,k,_))||t.dispatch(_())}else t.dispatch(T());else t.dispatch(T())}function Hne(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:wU(t,e.resolve(n.anchor),e.resolve(n.head))}function ait(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Nt.from(c).eq(t))return{mark:a,type:o}}function lit(t,e,n,r,i){if(n-e<=i.pos-r.pos||A9(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(A9(s,!0,!0));return!o.parent.isTextblock||o.pos>n||A9(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function A9(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function cit(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&Vne(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Vne(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Vne(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class vve{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new krt,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Kne),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qne(this),Wne(this),this.nodeViews=Gne(this),this.docView=Ane(this.state.doc,Une(this),S9(this),this.dom,this),this.domObserver=new Qrt(this,(r,i,s,o)=>oit(this,r,i,s,o)),this.domObserver.start(),Crt(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&jF(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Kne),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(hve(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Gne(this);dit(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&jF(this),this.editable=qne(this),Wne(this);let l=S9(this),c=Une(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&znt(this);if(o){this.domObserver.stop();let h=d&&(Ll||Ao)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&uit(i.selection,e.selection);if(d){let m=Ao?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zrt(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Ane(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&drt(this))?Cp(this,h):(tve(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&Hnt(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ln){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&bne(this,n.getBoundingClientRect(),e)}else bne(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new mve(e.slice,e.move,i<0?void 0:ln.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Ll){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vnt(this.dom),Cp(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Knt(this,e)}coordsAtPos(e,n=1){return Gwe(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return Qnt(this,n||this.state,e)}pasteHTML(e,n){return bT(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return bT(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return vU(this,e)}destroy(){this.docView&&(_rt(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],S9(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Rnt())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Irt(this,e)}domSelectionRange(){let e=this.domSelection();return e?_a&&this.root.nodeType===11&&Pnt(this.dom.ownerDocument)==this.dom&&tit(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}vve.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Une(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Qn.node(0,t.state.doc.content.size,e)]}function Wne(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Qn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function qne(t){return!t.someProp("editable",e=>e(t.state)===!1)}function uit(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Gne(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function dit(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Kne(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const Px=Math.floor,fit=Math.abs,_p=(t,e)=>t<e?t:e,Fx=(t,e)=>t>e?t:e,hit=Math.pow,pit=t=>t!==0?t<0:1/t<0,mit=64,Bx=128,git=1<<29,Xne=63,C1=127,yit=2147483647,bit=Number.MAX_SAFE_INTEGER,wit=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Px(t)===t),rM=()=>new Set,xve=Array.from,vit=Array.isArray,xit=String.fromCharCode,Eit=t=>t.toLowerCase(),Sit=/^\s*/g,Ait=t=>t.replace(Sit,""),Tit=/([A-Z])/g,Yne=(t,e)=>Ait(t.replace(Tit,n=>`${e}${Eit(n)}`)),kit=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},vT=typeof TextEncoder<"u"?new TextEncoder:null,Cit=t=>vT.encode(t),_it=vT?Cit:kit;let sA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});sA&&sA.decode(new Uint8Array).length===1&&(sA=null);let Nit=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const ec=()=>new Nit,Iit=t=>{const e=ec();return t(e),Sl(e)},kU=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Sl=t=>{const e=new Uint8Array(kU(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},Rit=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Fx(n,e)*2),t.cpos=0)},Vo=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},ts=(t,e)=>{for(;e>C1;)Vo(t,Bx|C1&e),e=Px(e/128);Vo(t,C1&e)},Mit=(t,e)=>{const n=pit(e);for(n&&(e=-e),Vo(t,(e>Xne?Bx:0)|(n?mit:0)|Xne&e),e=Px(e/64);e>0;)Vo(t,(e>C1?Bx:0)|C1&e),e=Px(e/128)},$F=new Uint8Array(3e4),Lit=$F.length/3,Dit=(t,e)=>{if(e.length<Lit){const n=vT.encodeInto(e,$F).written||0;ts(t,n);for(let r=0;r<n;r++)Vo(t,$F[r])}else kf(t,_it(e))},Oit=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;ts(t,r);for(let i=0;i<r;i++)Vo(t,n.codePointAt(i))},zF=vT&&vT.encodeInto?Dit:Oit,Pit=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=_p(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Fx(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},kf=(t,e)=>{ts(t,e.byteLength),Pit(t,e)},CU=(t,e)=>{Rit(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Fit=(t,e)=>CU(t,4).setFloat32(0,e,!1),Bit=(t,e)=>CU(t,8).setFloat64(0,e,!1),jit=(t,e)=>CU(t,8).setBigInt64(0,e,!1),Zne=new DataView(new ArrayBuffer(4)),$it=t=>(Zne.setFloat32(0,t),Zne.getFloat32(0)===t),HF=(t,e)=>{switch(typeof e){case"string":Vo(t,119),zF(t,e);break;case"number":wit(e)&&fit(e)<=yit?(Vo(t,125),Mit(t,e)):$it(e)?(Vo(t,124),Fit(t,e)):(Vo(t,123),Bit(t,e));break;case"bigint":Vo(t,122),jit(t,e);break;case"object":if(e===null)Vo(t,126);else if(vit(e)){Vo(t,117),ts(t,e.length);for(let n=0;n<e.length;n++)HF(t,e[n])}else if(e instanceof Uint8Array)Vo(t,116),kf(t,e);else{Vo(t,118);const n=Object.keys(e);ts(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];zF(t,i),HF(t,e[i])}}break;case"boolean":Vo(t,e?120:121);break;default:Vo(t,127)}},iM=t=>new Error(t),zit=()=>{throw iM("Method unimplemented")},Eve=()=>{throw iM("Unexpected case")},Cf=()=>new Map,vC=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Sve=Object.keys,Hit=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},Jne=t=>Sve(t).length,Vit=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Uit=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Qne=Symbol("Equality"),oA=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor)return!1;if(t[Qne]!=null)return t[Qne](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!oA(t.get(n),e.get(n)))return!1;break}case Object:if(Jne(t)!==Jne(e))return!1;for(const n in t)if(!Uit(t,n)||!oA(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!oA(t[n],e[n]))return!1;break;default:return!1}return!0},Wit=(t,e)=>e.includes(t),qit=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},Git=/[\uD800-\uDBFF]/,Kit=/[\uDC00-\uDFFF]/,Xit=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&Git.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&Kit.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},Yit=Xit,vi=new ni("y-sync"),Np=new ni("y-undo"),_5=new ni("yjs-cursor"),Zit=Math.random,Jit=t=>t[Px(Zit()*t.length)],ere=t=>t===void 0?null:t;let Qit=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},Ave=new Qit,_U=!0;try{typeof localStorage<"u"&&localStorage&&(Ave=localStorage,_U=!1)}catch{}const Tve=Ave,est=t=>_U||addEventListener("storage",t),tst=t=>_U||removeEventListener("storage",t),l0=typeof _e<"u"&&_e.release&&/node|io\.js/.test(_e.release.name)&&Object.prototype.toString.call(typeof _e<"u"?_e:0)==="[object process]",NU=typeof window<"u"&&typeof document<"u"&&!l0;let Fd;const nst=()=>{if(Fd===void 0)if(l0){Fd=Cf();const t=_e.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Fd.set(e,""),e=r):e!==null&&(Fd.set(e,r),e=null)}e!==null&&Fd.set(e,"")}else typeof location=="object"?(Fd=Cf(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Fd.set(`--${Yne(e,"-")}`,n),Fd.set(`-${Yne(e,"-")}`,n)}})):Fd=Cf();return Fd},VF=t=>nst().has(t),UF=t=>ere(l0?_e.env[t.toUpperCase().replaceAll("-","_")]:Tve.getItem(t)),kve=t=>VF("--"+t)||UF(t)!==null;kve("production");const rst=l0&&Wit(_e.env.FORCE_COLOR,["true","1","2"]);rst||!VF("--no-colors")&&!kve("no-color")&&(!l0||_e.stdout.isTTY)&&(!l0||VF("--color")||UF("COLORTERM")!==null||(UF("TERM")||"").includes("color"));const ist=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const sst=t=>class{constructor(n){this._=n}destroy(){t(this._)}},ost=sst(clearTimeout),IU=(t,e)=>new ost(setTimeout(e,t)),_f=(t,e)=>t>>>e|t<<32-e,ast=t=>_f(t,2)^_f(t,13)^_f(t,22),lst=t=>_f(t,6)^_f(t,11)^_f(t,25),cst=t=>_f(t,7)^_f(t,18)^t>>>3,ust=t=>_f(t,17)^_f(t,19)^t>>>10,dst=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fst=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class hst{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(fst),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let d=16;d<64;d++)n[d]=ust(n[d-2])+n[d-7]+cst(n[d-15])+n[d-16];let r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7];for(let d=0,f,h;d<64;d++)f=u+lst(a)+(a&l^~a&c)+dst[d]+n[d]>>>0,h=ast(r)+(r&i^r&s^i&s)>>>0,u=c,c=l,l=a,a=o+f>>>0,o=s,s=i,i=r,r=f+h>>>0;e[0]+=r,e[1]+=i,e[2]+=s,e[3]+=o,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=u}digest(e){let n=0;for(;n+56<=e.length;){let o=0;for(;o<16&&n+3<e.length;o++)this._W[o]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,o,16);n<e.length;)this._W[o]|=e[n]<<(3-n%4)*8,n++;this._W[o]|=Bx<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let i=0;for(;n<e.length;i++)for(let o=3;o>=0&&n<e.length;o--)this._W[i]|=e[n++]<<o*8;r||(this._W[i-(n%4===0?0:1)]|=Bx<<(3-n%4)*8),this._W[14]=e.byteLength/git,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let o=0;o<this._H.length;o++)for(let a=0;a<4;a++)s[o*4+a]=this._H[o]>>>(3-a)*8;return s}}const pst=t=>new hst().digest(t),mst=t=>new Uint8Array(t),gst=(t,e,n)=>new Uint8Array(t,e,n),yst=t=>new Uint8Array(t),bst=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=xit(t[n]);return btoa(e)},wst=t=>ar.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),vst=t=>{const e=atob(t),n=mst(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},xst=t=>{const e=ar.from(t,"base64");return gst(e.buffer,e.byteOffset,e.byteLength)},Cve=NU?bst:wst,Est=NU?vst:xst,Sst=t=>Iit(e=>HF(e,t)),Ast=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},Tst=t=>Cve(Ast(pst(Sst(t)))),kst=()=>({mapping:new Map,isOMark:new Map}),kI=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!_2(e.ds,t.id),Cst=[{light:"#ecd44433",dark:"#ecd444"}],_st=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=rM();t.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}t.set(n,Jit(e))}return t.get(n)},Nst=(t,{colors:e=Cst,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:s}={})=>{let o=!1;const a=new Rst(t,s),l=new Mr({props:{editable:c=>{const u=vi.getState(c);return u.snapshot==null&&u.prevSnapshot==null}},key:vi,state:{init:(c,u)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,u)=>{const d=c.getMeta(vi);if(d!==void 0){u=Object.assign({},u);for(const f in d)u[f]=d[f]}return u.addToHistory=c.getMeta("addToHistory")!==!1,u.isChangeOrigin=d!==void 0&&!!d.isChangeOrigin,u.isUndoRedoOperation=d!==void 0&&!!d.isChangeOrigin&&!!d.isUndoRedoOperation,a.prosemirrorView!==null&&d!==void 0&&(d.snapshot!=null||d.prevSnapshot!=null)&&IU(0,()=>{a.prosemirrorView!=null&&(d.restore==null?a._renderSnapshot(d.snapshot,d.prevSnapshot,u):(a._renderSnapshot(d.snapshot,d.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),u}},view:c=>(a.initView(c),s==null&&a._forceRerender(),i(),{update:()=>{const u=l.getState(c.state);if(u.snapshot==null&&u.prevSnapshot==null&&(o||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(o=!0,u.addToHistory===!1&&!u.isChangeOrigin){const d=Np.getState(c.state),f=d&&d.undoManager;f&&f.stopCapturing()}a.mux(()=>{u.doc.transact(d=>{d.meta.set("addToHistory",u.addToHistory),a._prosemirrorChanged(c.state.doc)},vi)})}},destroy:()=>{a.destroy()}})});return l},Ist=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new Ja(t.doc));else if(e.type==="node"){const r=Vg(n.doc,n.type,e.anchor,n.mapping);t.setSelection(ln.create(t.doc,r))}else{const r=Vg(n.doc,n.type,e.anchor,n.mapping),i=Vg(n.doc,n.type,e.head,n.mapping);if(r!==null&&i!==null){const s=Vt.between(t.doc.resolve(r),t.doc.resolve(i));t.setSelection(s)}}},WF=(t,e)=>({type:e.selection.jsonID,anchor:jx(e.selection.anchor,t.type,t.mapping),head:jx(e.selection.head,t.type,t.mapping)});class Rst{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=qit(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=WF(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(NU&&this._domSelectionInView===null&&(IU(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),s=ist.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||s.clientWidth||0)&&i.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=ewe(Hbe(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(vi,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>aA(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ut(Nt.from(e),0,0));n.setMeta(vi,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>aA(i,this.prosemirrorView.state.schema,this)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ut(Nt.from(n),0,0));if(e){const i=_p(Fx(e.anchor,0),r.doc.content.size),s=_p(Fx(e.head,0),r.doc.content.size);r.setSelection(Vt.create(r.doc,i,s))}this.prosemirrorView.dispatch(r.setMeta(vi,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let i=this.doc,s=this.type;if(e||(e=p9(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Eve(),i=new Xf({gc:!1}),lI(i,n),n=p9(i),lI(i,e),e=p9(i),s._item===null){const o=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=i.getXmlFragment(o)}else{const o=i.store.clients.get(s._item.id.client)??[],a=fd(o,s._item.id.clock);s=o[a].content.type}this.mapping.clear(),this.mux(()=>{i.transact(o=>{const a=r.permanentUserData;a&&a.dss.forEach(d=>{s0(o,d,f=>{})});const l=(d,f)=>{const h=d==="added"?a.getUserByClientId(f.client):a.getUserByDeletedId(f);return{user:h,type:d,color:_st(r.colorMapping,r.colors,h)}},c=dwe(s,new nU(n.ds,e.sv)).map(d=>!d._item.deleted||kI(d._item,e)||kI(d._item,n)?aA(d,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(d=>d!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ut(Nt.from(c),0,0));this.prosemirrorView.dispatch(u.setMeta(vi,{isChangeOrigin:!0}))},vi)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=vi.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(a,l)=>this.mapping.delete(l);s0(n,n.deleteSet,a=>{if(a.constructor===Pi){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const s=this.type.toArray().map(a=>_ve(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ut(Nt.from(s),0,0));Ist(o,this.beforeTransactionSelection,this),o=o.setMeta(vi,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof swe}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{_I(this.doc,this.type,e,this),this.beforeTransactionSelection=WF(this,this.prosemirrorView.state)},vi)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const _ve=(t,e,n,r,i,s)=>{const o=n.mapping.get(t);if(o===void 0){if(t instanceof Ga)return aA(t,e,n,r,i,s);throw zit()}return o},aA=(t,e,n,r,i,s)=>{const o=[],a=l=>{var c,u;if(l instanceof Ga){const d=_ve(l,e,n,r,i,s);d!==null&&o.push(d)}else{const d=(u=(c=l._item.right)==null?void 0:c.content)==null?void 0:u.type;d instanceof a0&&!d._item.deleted&&d._item.id.client===d.doc.clientID&&(l.applyDelta([{retain:l.length},...d.toDelta()]),d.doc.transact(h=>{d._item.delete(h)}));const f=Mst(l,e,n,r,i,s);f!==null&&f.forEach(h=>{h!==null&&o.push(h)})}};r===void 0||i===void 0?t.toArray().forEach(a):dwe(t,new nU(i.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(kI(t._item,r)?kI(t._item,i)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,o);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},vi),n.mapping.delete(t),null}},Mst=(t,e,n,r,i,s)=>{const o=[],a=t.toDelta(r,i,s);try{for(let l=0;l<a.length;l++){const c=a[l];o.push(e.text(c.insert,Bst(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},vi),null}return o},Lst=(t,e)=>{const n=new gc,r=t.map(i=>({insert:i.text,attributes:Rve(i.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},Dst=(t,e)=>{const n=new Ga(t.type.name);for(const r in t.attrs){const i=t.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,sM(t).map(r=>qF(r,e))),e.mapping.set(n,t),n},qF=(t,e)=>t instanceof Array?Lst(t,e):Dst(t,e),tre=t=>typeof t=="object"&&t!==null,RU=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(i=>e[i]!==null).length);for(let i=0;i<n.length&&r;i++){const s=n[i],o=t[s],a=e[s];r=s==="ychange"||o===a||tre(o)&&tre(a)&&RU(o,a)}return r},sM=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.isText){const s=[];for(let o=e[r];r<e.length&&o.isText;o=e[++r])s.push(o);r--,n.push(s)}else n.push(i)}return n},Nve=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,i)=>r.insert===e[i].text&&Sve(r.attributes||{}).length===e[i].marks.length&&Vit(r.attributes,(s,o)=>{var c;const a=Ive(o),l=e[i].marks;return RU(s,(c=l.find(u=>u.type.name===a))==null?void 0:c.attrs)}))},xT=(t,e)=>{if(t instanceof Ga&&!(e instanceof Array)&&GF(t,e)){const n=sM(e);return t._length===n.length&&RU(t.getAttributes(),e.attrs)&&t.toArray().every((r,i)=>xT(r,n[i]))}return t instanceof gc&&e instanceof Array&&Nve(t,e)},CI=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),nre=(t,e,n)=>{const r=t.toArray(),i=sM(e),s=i.length,o=r.length,a=_p(o,s);let l=0,c=0,u=!1;for(;l<a;l++){const d=r[l],f=i[l];if(CI(n.mapping.get(d),f))u=!0;else if(!xT(d,f))break}for(;l+c<a;c++){const d=r[o-c-1],f=i[s-c-1];if(CI(n.mapping.get(d),f))u=!0;else if(!xT(d,f))break}return{equalityFactor:l+c,foundMappedChild:u}},Ost=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof hd?e+=n.content.str:n.content instanceof Gs&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},Pst=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:i}=Ost(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,Rve(c.marks,n))})),{insert:o,remove:a,index:l}=Yit(i,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,o),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},Fst=/(.*)(--[a-zA-Z0-9+/=]{8})$/,Ive=t=>{var e;return((e=Fst.exec(t))==null?void 0:e[1])??t},Bst=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(Ive(r),t[r]));return n},Rve=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const i=vC(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[i?`${r.type.name}--${Tst(r.toJSON())}`:r.type.name]=r.attrs}}),n},_I=(t,e,n,r)=>{if(e instanceof Ga&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Ga){const d=e.getAttributes(),f=n.attrs;for(const h in f)f[h]!==null?d[h]!==f[h]&&h!=="ychange"&&e.setAttribute(h,f[h]):e.removeAttribute(h);for(const h in d)f[h]===void 0&&e.removeAttribute(h)}const i=sM(n),s=i.length,o=e.toArray(),a=o.length,l=_p(s,a);let c=0,u=0;for(;c<l;c++){const d=o[c],f=i[c];if(!CI(r.mapping.get(d),f))if(xT(d,f))r.mapping.set(d,f);else break}for(;u+c<l;u++){const d=o[a-u-1],f=i[s-u-1];if(!CI(r.mapping.get(d),f))if(xT(d,f))r.mapping.set(d,f);else break}t.transact(()=>{for(;a-c-u>0&&s-c-u>0;){const f=o[c],h=i[c],m=o[a-u-1],y=i[s-u-1];if(f instanceof gc&&h instanceof Array)Nve(f,h)||Pst(f,h,r),c+=1;else{let w=f instanceof Ga&&GF(f,h),b=m instanceof Ga&&GF(m,y);if(w&&b){const E=nre(f,h,r),A=nre(m,y,r);E.foundMappedChild&&!A.foundMappedChild?b=!1:!E.foundMappedChild&&A.foundMappedChild||E.equalityFactor<A.equalityFactor?w=!1:b=!1}w?(_I(t,f,h,r),c+=1):b?(_I(t,m,y,r),u+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[qF(h,r)]),c+=1)}}const d=a-c-u;if(a===1&&s===0&&o[0]instanceof gc?(r.mapping.delete(o[0]),o[0].delete(0,o[0].length)):d>0&&(e.slice(c,c+d).forEach(f=>r.mapping.delete(f)),e.delete(c,d)),c+u<s){const f=[];for(let h=c;h<s-u;h++)f.push(qF(i[h],r));e.insert(c,f)}},vi)},GF=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let lA=null;const jst=()=>{const t=lA;lA=null,t.forEach((e,n)=>{const r=n.state.tr,i=vi.getState(n.state);i&&i.binding&&!i.binding.isDestroyed&&(e.forEach((s,o)=>{r.setMeta(o,s)}),n.dispatch(r))})},$st=(t,e,n)=>{lA||(lA=new Map,IU(0,jst)),vC(lA,t,Cf).set(e,n)},jx=(t,e,n)=>{if(t===0)return h9(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof gc){if(r._length>=t)return h9(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<i)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&i>1)return new dT(r._item===null?null:r._item.id,r._item===null?cT(r):null,null);if(t-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new dT(r._item===null?null:r._item.id,r._item===null?cT(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Eve();if(t===0&&r.constructor!==gc&&r!==e)return zst(r._item.parent,r._item)}return h9(e,e._length,e.length===0?-1:0)},zst=(t,e)=>{let n=null,r=null;return t._item===null?r=cT(t):n=er(t._item.id.client,t._item.id.clock),new dT(n,r,e.id)},Vg=(t,e,n,r)=>{const i=Vet(n,t);if(i===null||i.type!==e&&!uT(e,i.type._item))return null;let s=i.type,o=0;if(s.constructor===gc)o=i.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<i.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof gc?o+=c._length:o+=r.get(c).nodeSize}a=a.right}o+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){o+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof gc?o+=c._length:o+=r.get(c).nodeSize),l=l.right}}s=a}return o-1},Hst=(t,e)=>{const n=t.toArray().map(r=>aA(r,e,kst())).filter(r=>r!==null);return Nt.fromArray(n)},Vst=(t,e)=>e.topNodeType.create(null,Hst(t,e));function Ust(t,e="prosemirror"){const n=new Xf,r=n.get(e,zp);return r.doc?(Wst(t,r),r.doc):n}function Wst(t,e){const n=e||new zp,r=n.doc?n.doc:{transact:i=>i(void 0)};return _I(r,n,t,{mapping:new Map,isOMark:new Map}),n}const qst=(t,e,n)=>t!==e,Gst=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode(""),i=document.createTextNode("");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},Kst=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),Xst=/^#[0-9a-fA-F]{6}$/,rre=(t,e,n,r,i)=>{const s=vi.getState(t),o=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?An.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(o.clientID,c,l)&&l.cursor!=null){const u=l.user||{};u.color==null?u.color="#ffa500":Xst.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${c}`);let d=Vg(o,s.type,db(l.cursor.anchor),s.binding.mapping),f=Vg(o,s.type,db(l.cursor.head),s.binding.mapping);if(d!==null&&f!==null){const h=Fx(t.doc.content.size-1,0);d=_p(d,h),f=_p(f,h),a.push(Qn.widget(f,()=>r(u,c),{key:c+"",side:10}));const m=_p(d,f),y=Fx(d,f);a.push(Qn.inline(m,y,i(u,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),An.create(t.doc,a))},Yst=(t,{awarenessStateFilter:e=qst,cursorBuilder:n=Gst,selectionBuilder:r=Kst,getSelection:i=o=>o.selection}={},s="cursor")=>new Mr({key:_5,state:{init(o,a){return rre(a,t,e,n,r)},apply(o,a,l,c){const u=vi.getState(c),d=o.getMeta(_5);return u&&u.isChangeOrigin||d&&d.awarenessUpdated?rre(c,t,e,n,r):a.map(o.mapping,o.doc)}},props:{decorations:o=>_5.getState(o)},view:o=>{const a=()=>{o.docView&&$st(o,_5,{awarenessUpdated:!0})},l=()=>{const c=vi.getState(o.state),u=t.getLocalState()||{};if(o.hasFocus()){const d=i(o.state),f=jx(d.anchor,c.type,c.binding.mapping),h=jx(d.head,c.type,c.binding.mapping);(u.cursor==null||!Yte(db(u.cursor.anchor),f)||!Yte(db(u.cursor.head),h))&&t.setLocalStateField(s,{anchor:f,head:h})}else u.cursor!=null&&Vg(c.doc,c.type,db(u.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),o.dom.addEventListener("focusin",l),o.dom.addEventListener("focusout",l),{update:l,destroy:()=>{o.dom.removeEventListener("focusin",l),o.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),Zst=t=>{var e,n;return((n=(e=Np.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},Jst=t=>{var e,n;return((n=(e=Np.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},Qst=new Set(["paragraph"]),eot=(t,e)=>!(t instanceof Pi)||!(t.content instanceof xd)||!(t.content.type instanceof a0||t.content.type instanceof Ga&&e.has(t.content.type.nodeName))||t.content.type._length===0,tot=({protectedNodes:t=Qst,trackedOrigins:e=[],undoManager:n=null}={})=>new Mr({key:Np,state:{init:(r,i)=>{const s=vi.getState(i),o=n||new swe(s.type,{trackedOrigins:new Set([vi].concat(e)),deleteFilter:a=>eot(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(r,i,s,o)=>{const a=vi.getState(o).binding,l=i.undoManager,c=l.undoStack.length>0,u=l.redoStack.length>0;return a?{undoManager:l,prevSel:WF(a,s),hasUndoOps:c,hasRedoOps:u}:c!==i.hasUndoOps||u!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):i}},view:r=>{const i=vi.getState(r.state),s=Np.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:o})=>{const a=i.binding;a&&o.meta.set(a,Np.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:o})=>{const a=i.binding;a&&(a.beforeTransactionSelection=o.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});class hi{constructor(e){this.type="extension",this.name="extension",this.config={...e,name:e.name||this.name},this.name=this.config.name,this.config.addOptions?this.options=Ni(kn(this,"addOptions",{name:this.name}))||{}:this.options={},this.storage=Ni(kn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e){return new hi(e)}}const Mve=hi.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addPmPlugins(){return this.editor.options.collaborationProvider&&this.editor.options.ydoc?[not()]:[Int(this.options)]},addCommands(){return{undo:()=>({state:t,dispatch:e,tr:n})=>this.editor.options.collaborationProvider&&this.editor.options.ydoc?(n.setMeta("preventDispatch",!0),Zst(t)):(n.setMeta("inputType","historyUndo"),Pwe(t,e)),redo:()=>({state:t,dispatch:e,tr:n})=>this.editor.options.collaborationProvider&&this.editor.options.ydoc?(n.setMeta("preventDispatch",!0),Jst(t)):(n.setMeta("inputType","historyRedo"),Fwe(t,e))}},addShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Shift-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo()}}}),not=()=>tot();var n2,Lve,Dve;class an{static getAttributesFromExtensions(e){const n=[],r={default:null,rendered:!0,renderDOM:null,parseDOM:null,keepOnSplit:!0},i=pe(this,n2,Lve).call(this,e,r),s=pe(this,n2,Dve).call(this,e,r);return n.push(...i,...s),n}static insertExtensionAttrsToParseRule(e,n){return"style"in e?e:{...e,getAttrs:r=>{const i=e.getAttrs?e.getAttrs(r):e.attrs;if(i===!1)return!1;const s=a=>typeof a!="string"?a:a.match(/^[+-]?(\d*\.)?\d+$/)?Number(a):a==="true"?!0:a==="false"?!1:a;let o={};for(const a of n){const l=a.attribute.parseDOM?a.attribute.parseDOM(r):s(r.getAttribute(a.name));l!=null&&(o={...o,[a.name]:l})}return{...i,...o}}}}static getAttributesToRender(e,n){const r=n.filter(s=>s.attribute.rendered).map(s=>s.attribute.renderDOM?s.attribute.renderDOM(e.attrs)||{}:{[s.name]:e.attrs[s.name]});let i={};for(const s of r)i=this.mergeAttributes(i,s);return i}static mergeAttributes(...e){const n=e.filter(i=>!!i);let r={};for(const i of n){const s={...r};for(const[o,a]of Object.entries(i)){if(!s[o]){s[o]=a;continue}if(o==="class"){const c=typeof a=="string"?a:String(a),u=typeof s[o]=="string"?s[o]:String(s[o]||""),d=c?c.split(" "):[],f=u?u.split(" "):[],h=d.filter(m=>!f.includes(m));s[o]=[...f,...h].join(" ")}else o==="style"?s[o]=[s[o],a].join("; "):s[o]=a}r=s}return r}static getSplittedAttributes(e,n,r){const i=Object.entries(r).filter(([s])=>{const o=e.find(a=>a.type===n&&a.name===s);return o?o.attribute.keepOnSplit:!1});return Object.fromEntries(i)}static getMarkAttributes(e,n){const r=A0(n,e.schema),s=R2(e).find(o=>o.type.name===r.name);return s?{...s.attrs}:{}}static getNodeAttributes(e,n){const r=uc(n,e.schema),{from:i,to:s}=e.selection,o=[];e.doc.nodesBetween(i,s,l=>{o.push(l)});const a=o.reverse().find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}static getAttributes(e,n){const r=mC(typeof n=="string"?n:n.name,e.schema);return r==="node"?this.getNodeAttributes(e,n):r==="mark"?this.getMarkAttributes(e,n):{}}}n2=new WeakSet,Lve=function(e,n){const r=[],i=s=>{for(const o of s.types){const a=Object.entries(s.attributes);for(const[l,c]of a)r.push({type:o,name:l,attribute:{...n,...c}})}};for(const s of e){const o={name:s.name,options:s.options,storage:s.storage},a=kn(s,"addGlobalAttributes",o);if(!a)continue;const l=a();for(const c of l)i(c)}return r},Dve=function(e,n){const r=[],i=e.filter(s=>s.type==="node"||s.type==="mark");for(const s of i){const o={name:s.name,options:s.options,storage:s.storage},a=kn(s,"addAttributes",o);if(!a)continue;const l=a();for(const[c,u]of Object.entries(l)){const d={...n,...u};typeof d.default=="function"&&(d.default=d.default()),r.push({type:s.name,name:c,attribute:d})}}return r},st(an,n2);var r2,Ove,Pve;const CA=class CA{static createSchemaByExtensions(e,n){var c,u,d;const r=e.filter(f=>f.type==="node"),i=e.filter(f=>f.type==="mark"),s=(c=r.find(f=>kn(f,"topNode")))==null?void 0:c.name,o=an.getAttributesFromExtensions(e),a=pe(u=CA,r2,Ove).call(u,r,o,n),l=pe(d=CA,r2,Pve).call(d,i,o,n);return new Kpe({topNode:s,nodes:a,marks:l})}};r2=new WeakSet,Ove=function(e,n,r){const i=e.map(s=>{const o=n.filter(m=>m.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:r},l=Object.fromEntries(o.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)==null?void 0:y.default}]})),c=e.reduce((m,y)=>{const w=kn(y,"extendNodeSchema",a);return{...m,...w?w(s):{}}},{}),u=kF({content:Ni(kn(s,"content",a)),group:Ni(kn(s,"group",a)),marks:Ni(kn(s,"marks",a)),inline:Ni(kn(s,"inline",a)),atom:Ni(kn(s,"atom",a)),selectable:Ni(kn(s,"selectable",a)),draggable:Ni(kn(s,"draggable",a)),code:Ni(kn(s,"code",a)),defining:Ni(kn(s,"defining",a)),isolating:Ni(kn(s,"isolating",a)),summary:kn(s,"summary",a),attrs:l,...c});(typeof s.validChildren=="function"||Array.isArray(s.validChildren))&&Object.defineProperty(u,"validChildren",{enumerable:!1,configurable:!1,get:()=>s.validChildren});const d=Ni(kn(s,"parseDOM",a));d&&(u.parseDOM=d.map(m=>an.insertExtensionAttrsToParseRule(m,o)));const f=kn(s,"renderDOM",a);f&&(u.toDOM=m=>f({node:m,htmlAttributes:an.getAttributesToRender(m,o)}));const h=kn(s,"renderText",a);return h&&(u.toText=h),[s.name,u]});return Object.fromEntries(i)},Pve=function(e,n,r){const i=e.map(s=>{const o=n.filter(f=>f.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:r},l=Object.fromEntries(o.map(f=>{var h;return[f.name,{default:(h=f==null?void 0:f.attribute)==null?void 0:h.default}]})),c=kF({group:Ni(kn(s,"group",a)),inclusive:Ni(kn(s,"inclusive",a)),excludes:Ni(kn(s,"excludes",a)),spanning:Ni(kn(s,"spanning",a)),code:Ni(kn(s,"code",a)),attrs:l}),u=Ni(kn(s,"parseDOM",a));u&&(c.parseDOM=u.map(f=>an.insertExtensionAttrsToParseRule(f,o)));const d=kn(s,"renderDOM",a);return d&&(c.toDOM=f=>d({mark:f,htmlAttributes:an.getAttributesToRender(f,o)})),[s.name,c]});return Object.fromEntries(i)},st(CA,r2);let KF=CA;class oM extends Tr{constructor(e){super(e),this.oXmlName=e.oXmlName}static create(e){return new oM(e)}}class aM extends Error{constructor(e){super(e),this.name="EditorError"}}class rot extends aM{constructor(e){super(e),this.name="InvalidStateError"}}class iot extends aM{constructor(e){super(e),this.name="NoSourcePathError"}}class sot extends aM{constructor(e){super(e),this.name="FileSystemNotAvailableError"}}class oot extends aM{constructor(e,n){super(e),this.name="DocumentLoadError",this.cause=n}}const aot=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1},lot=t=>e=>t(e),cot=()=>({tr:t})=>(t.insertText("	",t.selection.from,t.selection.to),!0),uot=()=>t=>{const{state:e,view:n,tr:r,editor:i}=t,{$from:s,empty:o}=e.selection;if(!o||s.parent.type.name!=="run")return!1;let a=null;if(n!=null&&n.dispatch?a=n.dispatch.bind(n):i!=null&&i.dispatch&&(a=i.dispatch.bind(i)),!a)return!1;const l=dot(e,c=>{a(c)},i);return l&&r.setMeta("preventDispatch",!0),l};function dot(t,e,n){let{$from:r}=t.selection;if(t.selection instanceof ln&&t.selection.node.isBlock)return!r.parentOffset||!Tf(t.doc,r.pos)?!1:(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,o,a=null,l=!1,c=!1;for(let h=r.depth;;h--){let m=r.node(h);if(m.isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),o=hU(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),a={...m.attrs},i.unshift({type:o||m.type,attrs:a}),s=h;break}else{if(h==1)return!1;i.unshift(null)}}let u=t.tr;(t.selection instanceof Vt||t.selection instanceof Ja)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Tf(u.doc,d,i.length,i);if(f||(i[0]=o?{type:o,attrs:a}:null,f=Tf(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(s).type!=o){let h=u.mapping.map(r.before(s)),m=u.doc.resolve(h);o&&r.node(s-1).canReplaceWith(m.index(),m.index()+1,o)&&u.setNodeMarkup(u.mapping.map(r.before(s)),o)}return fot(t,u,n,a),e&&e(u.scrollIntoView()),!0}function fot(t,e,n,r){var s,o,a,l,c,u;const i=(s=r==null?void 0:r.paragraphProperties)==null?void 0:s.styleId;if(!(!(n!=null&&n.converter)&&!i))try{const d={docx:((o=n==null?void 0:n.converter)==null?void 0:o.convertedXml)??{},numbering:((a=n==null?void 0:n.converter)==null?void 0:a.numbering)??{}},h=i?nC(d,{},i?{styleId:i}:{},!1,!1):{},m=i?RH(h,((l=n==null?void 0:n.converter)==null?void 0:l.convertedXml)??{}):[],y=(u=(c=t.selection)==null?void 0:c.$from)!=null&&u.marks?t.selection.$from.marks():[],w=y.map(A=>({type:A.type.name,attrs:A.attrs})),b=y.length?w:m,E=b.map(A=>{const x=t.schema.marks[A.type];return x?x.create(A.attrs):null}).filter(Boolean);E.length>0&&(e.ensureMarks(E),e.setMeta("sdStyleMarks",b))}catch{}}const Fve=()=>t=>{let{state:e,dispatch:n,tr:r}=t;const i=e.selection;if(!i.empty)return!1;const s=i.$from,o=e.schema.nodes.run;if(s.parent.type!==o)return!1;const a=s.parent,l=s.parentOffset,c=s.before(),u=c+a.nodeSize,d=a.content.cut(0,l),f=a.content.cut(l),h=o.create(a.attrs,d,a.marks),m=o.create(a.attrs,f,a.marks),y=c+h.nodeSize;return r.replaceWith(c,u,[h,m]).setSelection(Vt.create(r.doc,y)),n&&n(r),!0},Bve=({tr:t,state:e,dispatch:n})=>{const{from:r}=t.selection,i=e.schema.text("	");return t=t.replaceSelectionWith(i),t=t.setSelection(Vt.create(t.doc,r+1)),n&&n(t),!0},hot=()=>({tr:t,state:e,dispatch:n})=>{var a,l,c;let r=t.selection.from;const i=(c=(l=(a=e.schema)==null?void 0:a.nodes)==null?void 0:l.tab)==null?void 0:c.create();if(!i)return Bve({tr:t,state:e,dispatch:n});const{from:s}=t.selection,o=t.doc.resolve(s);return o.parent.type===e.schema.nodes.run&&(s===o.end()?r=o.end()+1:s===o.start()?r=o.start()-1:(Fve()({tr:t,state:e}),r=t.selection.from)),t.insert(r,i),t=t.setSelection(Vt.create(t.doc,r+i.nodeSize)),n&&n(t),!0},pot=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),ire=(t,e)=>{const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}},jve=({keepMarks:t=!0,attrsToRemoveOverride:e=[]}={})=>n=>{const{tr:r,state:i,dispatch:s,editor:o}=n,{selection:a,doc:l}=r,{$from:c,$to:u}=a,d=o.extensionService.attributes;let f=an.getSplittedAttributes(d,c.node().type.name,c.node().attrs);if(e.length>0&&(f=mot(f,e)),a instanceof ln&&a.node.isBlock)return!c.parentOffset||!Tf(l,c.pos)?!1:(s&&(t&&ire(i,o.extensionService.splittableMarks),r.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(s){const h=u.parentOffset===u.parent.content.size;a instanceof Vt&&r.deleteSelection();const m=c.depth===0?null:hU(c.node(-1).contentMatchAt(c.indexAfter(-1)));let y=h&&m?[{type:m,attrs:f}]:void 0,w=Tf(r.doc,r.mapping.map(c.pos),1,y);if(!y&&!w&&Tf(r.doc,r.mapping.map(c.pos),1,m?[{type:m}]:void 0)&&(w=!0,y=m?[{type:m,attrs:f}]:void 0),w&&(r.split(r.mapping.map(c.pos),1,y),m&&!h&&!c.parentOffset&&c.parent.type!==m)){const b=r.mapping.map(c.before()),E=r.doc.resolve(b);c.node(-1).canReplaceWith(E.index(),E.index()+1,m)&&r.setNodeMarkup(r.mapping.map(c.before()),m)}t&&ire(i,o.extensionService.splittableMarks),r.scrollIntoView()}return!0};function mot(t,e){const n={...t};return e.forEach(r=>{const i=r.split(".");if(i.length===1)delete n[r];else{let s=n;for(let o=0;o<i.length-1;o++){if(s[i[o]]==null)return;s=s[i[o]]}delete s[i[i.length-1]]}}),n}const NI=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function got(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const XF=(t,e,n)=>{let r=got(t,n);if(!r)return!1;let i=zve(r);if(!i){let o=r.blockRange(),a=o&&_R(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Gve(t,i,e,-1))return!0;if(r.parent.content.size==0&&($x(s,"end")||ln.isSelectable(s)))for(let o=r.depth;;o--){let a=GH(t.doc,r.before(o),r.after(o),Ut.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection($x(s,"end")?_n.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):ln.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function $x(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $ve=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=zve(r)}let o=s&&s.nodeBefore;return!o||!ln.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ln.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function zve(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function yot(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const YF=(t,e,n)=>{let r=yot(t,n);if(!r)return!1;let i=Vve(r);if(!i)return!1;let s=i.nodeAfter;if(Gve(t,i,e,1))return!0;if(r.parent.content.size==0&&($x(s,"start")||ln.isSelectable(s))){let o=GH(t.doc,r.before(),r.after(),Ut.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection($x(s,"start")?_n.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ln.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Hve=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Vve(r)}let o=s&&s.nodeAfter;return!o||!ln.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ln.create(t.doc,s.pos)).scrollIntoView()),!0)};function Vve(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const bot=(t,e)=>{let n=t.selection,r=n instanceof ln,i;if(r){if(n.node.isTextblock||!NR(t.doc,n.from))return!1;i=n.from}else if(i=s0e(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(ln.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},wot=(t,e)=>{let n=t.selection,r;if(n instanceof ln){if(n.node.isTextblock||!NR(t.doc,n.to))return!1;r=n.to}else if(r=s0e(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Uve=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function MU(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const vot=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=MU(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(_n.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Wve=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ja||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=MU(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Vt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},qve=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Tf(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&_R(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function xot(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ln&&e.selection.node.isBlock)return!r.parentOffset||!Tf(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=MU(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(l&&a?{type:a}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Vt||e.selection instanceof Ja)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Tf(u.doc,d,s.length,s);if(f||(s[0]=a?{type:a}:null,f=Tf(u.doc,d,s.length,s)),!f)return!1;if(u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let h=u.mapping.map(r.before(o)),m=u.doc.resolve(h);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const Eot=xot(),Sot=(t,e)=>(e&&e(t.tr.setSelection(new Ja(t.doc))),!0);function Aot(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||NR(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Gve(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Aot(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,m=Nt.empty;for(let b=o.length-1;b>=0;b--)m=Nt.from(o[b].create(null,m));m=Nt.from(i.copy(m));let y=t.tr.step(new ud(e.pos-1,h,e.pos,h,new Ut(m,1,0),o.length,!0)),w=y.doc.resolve(h+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&NR(y.doc,w.pos)&&y.join(w.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:_n.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&_R(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&$x(s,"start",!0)&&$x(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let y=s,w=1;for(;!y.isTextblock;y=y.firstChild)w++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let b=Nt.empty;for(let A=m.length-1;A>=0;A--)b=Nt.from(m[A].copy(b));let E=t.tr.step(new ud(e.pos-m.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new Ut(b,m.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function Kve(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Vt.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Tot=Kve(-1),kot=Kve(1);function sre(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function LU(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}LU(NI,XF,$ve);LU(NI,YF,Hve);LU(Uve,Wve,qve,Eot);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";const Cot=()=>({state:t,dispatch:e})=>qve(t,e),_ot=()=>({state:t,dispatch:e})=>Wve(t,e),Not=()=>({state:t,dispatch:e})=>Uve(t,e),Iot=()=>({state:t,dispatch:e})=>vot(t,e);function Rot(t,e,n,r){let{selection:i}=n;t.options.isHeaderOrFooter&&(i=t.options.lastSelection);let s=null;if(Rwe(i)&&(s=i.$cursor),s){const o=e.storedMarks??s.marks();return!!r.isInSet(o)||!o.some(a=>a.type.excludes(r))}return i.ranges.some(({$from:o,$to:a})=>{let l=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(o.pos,a.pos,(c,u,d)=>{if(l)return!1;if(c.isInline){const f=!d||d.type.allowsMarkType(r),h=!!r.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(r));l=f&&h}return!l}),l})}const Mot=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{let{selection:o}=n;s.options.isHeaderOrFooter&&(o=s.options.lastSelection);const{empty:a,ranges:l}=o,c=A0(t,r.schema);if(i)if(a){const u=an.getMarkAttributes(r,c);n.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(h,m)=>{const y=Math.max(m,d),w=Math.min(m+h.nodeSize,f);h.marks.find(E=>E.type===c)?h.marks.forEach(E=>{c===E.type&&n.addMark(y,w,c.create({...E.attrs,...e}))}):n.addMark(y,w,c.create(e))})});return Rot(s,r,n,c)},Lot=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var f;const{extendEmptyMarkRange:o=!1}=e;let{selection:a}=n;s.options.isHeaderOrFooter&&(a=s.options.lastSelection);const l=A0(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:m}=a;const y=(f=c.marks().find(b=>b.type===l))==null?void 0:f.attrs,w=Tp(c,l,y);w&&(h=w.from,m=w.to),n.removeMark(h,m,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},Dot=()=>({tr:t,dispatch:e,editor:n})=>{let{selection:r}=t;n.options.isHeaderOrFooter&&(r=n.options.lastSelection);const{empty:i,ranges:s}=r;return e&&(i||s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),t.setStoredMarks([])),!0},Oot=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=A0(t,r.schema);return yI(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Xve=(t,e={})=>({state:n,chain:r,editor:i})=>{const{negationAttrs:s={value:"0"},isNegation:o=y=>(y==null?void 0:y.value)==="0",styleDetector:a=Yve,extendEmptyMarkRange:l=!0}=e,c=R2(n)||[],u=c.filter(y=>{var w;return((w=y.type)==null?void 0:w.name)===t}),d=u.some(y=>o(y.attrs||{})),f=u.some(y=>!o(y.attrs||{})),h=a({state:n,selectionMarks:c,markName:t,editor:i}),m=r();return d?m.unsetMark(t,{extendEmptyMarkRange:l}).run():f&&h?m.unsetMark(t,{extendEmptyMarkRange:l}).setMark(t,s,{extendEmptyMarkRange:l}).run():f?m.unsetMark(t,{extendEmptyMarkRange:l}).run():h?m.setMark(t,s,{extendEmptyMarkRange:l}).run():m.setMark(t,{},{extendEmptyMarkRange:l}).run()};function Yve({state:t,selectionMarks:e,markName:n,editor:r}){var i,s,o,a;try{const l=Zve(t,e);if(!l||!((i=r==null?void 0:r.converter)!=null&&i.linkedStyles))return!1;const c=r.converter.linkedStyles,u=new Set;let d=l;const f=Jve(n);for(;d&&!u.has(d);){u.add(d);const h=c.find(y=>y.id===d),m=((s=h==null?void 0:h.definition)==null?void 0:s.styles)||{};if(f in m){const y=m[f];if(y===void 0)return!0;const w=(y==null?void 0:y.value)??y;return Qve(w)}d=((a=(o=h==null?void 0:h.definition)==null?void 0:o.attrs)==null?void 0:a.basedOn)||null}return!1}catch{return!1}}function Zve(t,e){var c,u;const n=s6(e);if(n)return n;const r=t.selection.$from,i=r.nodeBefore,s=r.nodeAfter;if(i&&i.marks){const d=s6(i.marks);if(d)return d}if(s&&s.marks){const d=s6(s.marks);if(d)return d}const o=e.find(d=>{var f,h;return((f=d.type)==null?void 0:f.name)==="textStyle"&&((h=d.attrs)==null?void 0:h.styleId)});if(o)return o.attrs.styleId;const a=t.selection.$from.pos,l=t.doc.resolve(a);for(let d=l.depth;d>=0;d--){const f=l.node(d);if(((c=f==null?void 0:f.type)==null?void 0:c.name)==="paragraph")return((u=f.attrs)==null?void 0:u.styleId)||null}return null}function s6(t){if(!Array.isArray(t))return null;const e=t.find(n=>{var r,i;return((r=n.type)==null?void 0:r.name)==="textStyle"&&((i=n.attrs)==null?void 0:i.styleId)});return e?e.attrs.styleId:null}function Jve(t){return t==="textStyle"||t==="color"?"color":t}function Qve(t){if(t===!1||t===0)return!1;if(typeof t=="string"){const e=t.trim().toLowerCase();return!(!e||["0","false","none","inherit","transparent"].includes(e))}return!!t}const Pot=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const m=_R(h);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(m||m===0)&&e.lift(h,m)})}),!0},Fot=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=uc(t,n.schema);return s.isTextblock?i().command(({commands:o})=>sre(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>sre(s,e)(o,r)).run():!1},Bot=(t,e,n={})=>({state:r,commands:i})=>{const s=uc(t,r.schema),o=uc(e,r.schema);return bI(r,s,n)?i.setNode(o):i.setNode(s,n)},jot=()=>({state:t,dispatch:e})=>Sot(t,e),$ot=()=>({state:t,tr:e,dispatch:n})=>{var a,l;const{from:r,to:i,empty:s}=t.selection;if(typeof document<"u"&&document.getSelection){const c=document.getSelection();if(((l=(a=c==null?void 0:c.baseNode)==null?void 0:a.data)==null?void 0:l.length)===1)return!1}if(s)return NI(t,n);let o=!1;if(t.doc.nodesBetween(r,i,c=>{if(c.type.name==="orderedList"||c.type.name==="bulletList"||c.type.name==="listItem")return o=!0,!1}),o){const c=e||t.tr;return c.deleteRange(r,i),n&&n(c),!0}return NI(t,n)},zot=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=mC(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=uc(t,r.schema)),a==="mark"&&(o=A0(t,r.schema)),i&&(n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{if(s&&s===d.type){const h=ore(d.attrs,e);n.setNodeMarkup(f,void 0,h)}o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const m=Math.max(f,c),y=Math.min(f+d.nodeSize,u),w=ore(h.attrs,e);n.addMark(m,y,o.create(w))}})})}),i(n)),!0):!1},Hot=t=>!!t&&typeof t=="object"&&!Array.isArray(t),Vot=(t,e,n)=>{if(!e.includes(".")){t[e]=n;return}const r=e.split(".");let i=t;for(let s=0;s<r.length;s+=1){const o=r[s];s===r.length-1?i[o]=n:(Hot(i[o])||(i[o]={}),i=i[o])}},ore=(t={},e={})=>{const n=JSON.parse(JSON.stringify(t));return Object.entries(e).forEach(([r,i])=>{Vot(n,r,i)}),n},Uot=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=mC(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=uc(t,r.schema)),a==="mark"&&(o=A0(t,r.schema)),i&&(n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,cne(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(cne(d.attrs,e)))})})}),i(n)),!0):!1},Wot=()=>({state:t,dispatch:e})=>bot(t,e),qot=()=>({state:t,dispatch:e})=>wot(t,e),Got=()=>({state:t,dispatch:e})=>{const{selection:n,doc:r}=t,{$from:i}=n;if(!i.parent.isTextblock||i.parentOffset>0)return XF(t,e);const s=i.before(),o=r.resolve(s).nodeBefore,a=r.resolve(s).nodeAfter,l=c=>(c==null?void 0:c.type.name)==="orderedList"||(c==null?void 0:c.type.name)==="bulletList";return l(o)||l(a)?!1:XF(t,e)},Kot=()=>({state:t,dispatch:e})=>{const{selection:n,doc:r}=t,{$from:i}=n;if(!i.parent.isTextblock||i.parentOffset>0)return YF(t,e);const s=i.before(),o=r.resolve(s).nodeBefore,a=r.resolve(s).nodeAfter,l=c=>(c==null?void 0:c.type.name)==="orderedList"||(c==null?void 0:c.type.name)==="bulletList";return l(o)||l(a)?!1:YF(t,e)},Xot=()=>({state:t,dispatch:e})=>$ve(t,e),Yot=()=>({state:t,dispatch:e})=>Hve(t,e),Zot=()=>({state:t,dispatch:e})=>Tot(t,e),Jot=()=>({state:t,dispatch:e})=>kot(t,e),Qot=(t,e={})=>({tr:n,commands:r,editor:i})=>{if(e.contentType){const s=["html","markdown","text","schema"];if(!s.includes(e.contentType))return console.error(`[insertContent] Invalid contentType: "${e.contentType}". Use: ${s.join(", ")}`),!1;try{const a=Lwe({content:t,type:e.contentType,editor:i}).toJSON(),l=r.insertContentAt({from:n.selection.from,to:n.selection.to},a,e);return l&&(e.contentType==="html"||e.contentType==="markdown")&&Promise.resolve().then(()=>{var c;return(c=i.migrateListsToV2)==null?void 0:c.call(i)}),l}catch(o){return console.error(`[insertContent] Failed to process ${e.contentType}:`,o),!1}}return r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e)},e1e=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&e1e(r)}return t};function eat(t,e){const n=`<body>${t}</body>`,r=jg(n,e);return r===null?null:e1e(r)}function ZF(t,e,n){const r=e.schema;n={slice:!0,parseOptions:{},...n};const i=typeof t=="object"&&t!==null,s=typeof t=="string";if(i)try{if(Array.isArray(t)&&t.length>0)return Nt.fromArray(t.map(l=>r.nodeFromJSON(l)));const a=r.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(o){if(n.errorOnInvalidContent)throw new Error("[super-editor error]: Invalid JSON content",{cause:o});return console.warn("[super-editor warn]: Invalid content.","Passed value:",t,"Error:",o),ZF("",e,n)}if(s){const o=eat(t,e);if(o===null)return console.warn("[super-editor] Cannot parse HTML content without a DOM. HTML insertion requires a browser environment or JSDOM. Skipping insertion."),null;if(n.errorOnInvalidContent){let l=!1,c="";const u=new Kpe({topNode:r.spec.topNode,marks:r.spec.marks,nodes:r.spec.nodes.append({__supereditor__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:()=>[{tag:"*",getAttrs:d=>(l=!0,c=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?ka.fromSchema(u).parseSlice(o,n.parseOptions):ka.fromSchema(u).parse(o,n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[super-editor error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const a=ka.fromSchema(r);return n.slice?a.parseSlice(o,n.parseOptions).content:a.parse(o,n.parseOptions)}return ZF("",e,n)}function are(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof xi||i instanceof ud))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(_n.near(t.doc.resolve(o),n))}const tat=t=>!("type"in t),nat=t=>/^\s*<[a-zA-Z][^>]*>.*<\/[a-zA-Z][^>]*>\s*$/s.test(t)||/^\s*<[a-zA-Z][^>]*\/>\s*$/.test(t)||/^\s*<(br|hr|img|input|meta|link|area|base|col|embed|param|source|track|wbr)\b[^>]*>\s*$/i.test(t),rat=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(!i)return!0;n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,asText:!1,...n};let{from:o,to:a}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to};const l=typeof e=="string",c=Array.isArray(e)&&e.every(b=>typeof b=="string"||b&&typeof b.text=="string"),u=!!e&&typeof e=="object"&&!Array.isArray(e)&&typeof e.text=="string";if(n.asText||c||u||l&&!nat(e)){let b;return c?b=e.map(E=>typeof E=="string"?E:E&&E.text||"").join(""):u?b=e.text:b=typeof e=="string"?e:"",r.insertText(b,o,a),n.updateSelection&&are(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:o,text:b}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:o,text:b}),!0}let f;try{f=ZF(e,s,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:n.errorOnInvalidContent??s.options.enableContentCheck})}catch(b){return s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{console.error("[super-editor error]: Unable to disable collaboration at this point in time")}}),!1}if(f===null)return!1;let h=!0,m=!0;if((tat(f)?f:[f]).forEach(b=>{b.check(),h=h?b.isText&&b.marks.length===0:!1,m=m?b.isBlock:!1}),o===a&&m){const{parent:b}=r.doc.resolve(o);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(o-=1,a+=1)}let w;return h?(w=typeof e=="string"?e:"",r.insertText(w,o,a)):(w=f,r.replaceWith(o,a,w)),n.updateSelection&&are(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:o,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:o,text:w}),!0},iat=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sat=({headerInches:t,footerInches:e}={})=>({editor:n})=>{var l;if(!n)return console.warn("[setBodyHeaderFooter] No editor instance provided"),!1;const r=typeof t=="number",i=typeof e=="number";if(!r&&!i)return console.warn("[setBodyHeaderFooter] No margin values provided"),!1;if(r&&t<0)return console.warn("[setBodyHeaderFooter] headerInches must be >= 0, got:",t),!1;if(i&&e<0)return console.warn("[setBodyHeaderFooter] footerInches must be >= 0, got:",e),!1;if(!n.updatePageStyle)return console.warn("[setBodyHeaderFooter] editor.updatePageStyle is not available"),!1;const a={...(((l=n.getPageStyles)==null?void 0:l.call(n))||{}).pageMargins||{}};return r&&(a.header=t),i&&(a.footer=e),n.updatePageStyle({pageMargins:a}),!0};function II(t){var i;if(!t||t.name!=="w:sectPr")return{};const e=(i=t.elements)==null?void 0:i.find(s=>(s==null?void 0:s.name)==="w:pgMar");if(!(e!=null&&e.attributes))return{};const n=e.attributes,r={};return n["w:top"]!=null&&(r.top=Os(n["w:top"])),n["w:right"]!=null&&(r.right=Os(n["w:right"])),n["w:bottom"]!=null&&(r.bottom=Os(n["w:bottom"])),n["w:left"]!=null&&(r.left=Os(n["w:left"])),n["w:header"]!=null&&(r.header=Os(n["w:header"])),n["w:footer"]!=null&&(r.footer=Os(n["w:footer"])),n["w:gutter"]!=null&&(r.gutter=Os(n["w:gutter"])),r}function oat(t){if(!t||t.name!=="w:sectPr")throw new Error("ensurePgMar: invalid sectPr node");Array.isArray(t.elements)||(t.elements=[]);let e=t.elements.find(n=>(n==null?void 0:n.name)==="w:pgMar");return e?e.attributes||(e.attributes={}):(e={type:"element",name:"w:pgMar",attributes:{}},t.elements.push(e)),e}function aat(t,e={}){if(!t||t.name!=="w:sectPr")throw new Error("updateSectPrMargins: invalid sectPr node");const r=oat(t).attributes;return e.topInches!=null&&(r["w:top"]=String(tc(e.topInches))),e.rightInches!=null&&(r["w:right"]=String(tc(e.rightInches))),e.bottomInches!=null&&(r["w:bottom"]=String(tc(e.bottomInches))),e.leftInches!=null&&(r["w:left"]=String(tc(e.leftInches))),e.headerInches!=null&&(r["w:header"]=String(tc(e.headerInches))),e.footerInches!=null&&(r["w:footer"]=String(tc(e.footerInches))),e.gutterInches!=null&&(r["w:gutter"]=String(tc(e.gutterInches))),t}function RI(t,e={}){if(!t||!t.type)throw new Error("updateSectionMargins: missing or invalid target");if(t.type==="body"){const{converter:n}=t;if(!n)throw new Error("updateSectionMargins: body target missing converter");n.pageStyles||(n.pageStyles={}),n.pageStyles.pageMargins||(n.pageStyles.pageMargins={});const r=n.pageStyles.pageMargins;return e.topInches!=null&&(r.top=e.topInches),e.rightInches!=null&&(r.right=e.rightInches),e.bottomInches!=null&&(r.bottom=e.bottomInches),e.leftInches!=null&&(r.left=e.leftInches),e.headerInches!=null&&(r.header=e.headerInches),e.footerInches!=null&&(r.footer=e.footerInches),e.gutterInches!=null&&(r.gutter=e.gutterInches),{kind:"body",pageMargins:{...r}}}if(t.type==="sectPr"){const{sectPr:n}=t;if(!n||n.name!=="w:sectPr")throw new Error("updateSectionMargins: sectPr target missing/invalid sectPr");return aat(n,e),{kind:"sectPr",sectPr:n}}throw new Error(`updateSectionMargins: unsupported target type: ${t.type}`)}function lat(t,e){let n=null;return t.descendants((r,i)=>{var s,o,a;return i>e?!1:(((s=r.type)==null?void 0:s.name)==="paragraph"&&((a=(o=r.attrs)==null?void 0:o.paragraphProperties)!=null&&a.sectPr)&&(n={node:r,pos:i}),!0)}),n}const cat=({headerInches:t,footerInches:e}={})=>({tr:n,state:r,editor:i})=>{var A;if(!r||!i)return console.warn("[setSectionHeaderFooterAtSelection] Missing state or editor"),!1;const s=typeof t=="number",o=typeof e=="number";if(!s&&!o)return console.warn("[setSectionHeaderFooterAtSelection] No margin values provided"),!1;if(s&&t<0)return console.warn("[setSectionHeaderFooterAtSelection] headerInches must be >= 0, got:",t),!1;if(o&&e<0)return console.warn("[setSectionHeaderFooterAtSelection] footerInches must be >= 0, got:",e),!1;const{from:a}=r.selection,l=lat(r.doc,a);if(!l)return console.warn("[setSectionHeaderFooterAtSelection] No section break found at or before selection"),!1;const{node:c,pos:u}=l,d=((A=c.attrs)==null?void 0:A.paragraphProperties)||null,f=(d==null?void 0:d.sectPr)||null;if(!f)return console.warn("[setSectionHeaderFooterAtSelection] Paragraph found but has no sectPr"),!1;const h=JSON.parse(JSON.stringify(f)),m={};s&&(m.headerInches=t),o&&(m.footerInches=e);try{RI({type:"sectPr",sectPr:h},m)}catch(x){return console.error("[setSectionHeaderFooterAtSelection] Failed to update sectPr:",x),!1}const y={...d||{},sectPr:h},w=II(h),b={header:w.header??null,footer:w.footer??null},E={...c.attrs,paragraphProperties:y,sectionMargins:b};return n.setNodeMarkup(u,void 0,E,c.marks),!0};function uat(t,e){const n=[];if(t.descendants((s,o)=>{var a,l,c;((a=s.type)==null?void 0:a.name)==="paragraph"&&((c=(l=s.attrs)==null?void 0:l.paragraphProperties)!=null&&c.sectPr)&&n.push({node:s,pos:o})}),!n.length)return null;const r=n.find(s=>e>=s.pos&&e<s.pos+s.node.nodeSize);return r||(n.find(s=>s.pos>=e)??n[n.length-1])}const t1e=({topInches:t,rightInches:e,bottomInches:n,leftInches:r}={})=>({tr:i,state:s,editor:o})=>{var A;if(!s||!o)return console.warn("[setSectionPageMarginsAtSelection] Missing state or editor"),!1;const a=typeof t=="number",l=typeof e=="number",c=typeof n=="number",u=typeof r=="number";if(!a&&!l&&!c&&!u)return console.warn("[setSectionPageMarginsAtSelection] No margin values provided"),!1;if(a&&t<0||l&&e<0||c&&n<0||u&&r<0)return console.warn("[setSectionPageMarginsAtSelection] Margin values must be >= 0"),!1;const d={};a&&(d.topInches=t),l&&(d.rightInches=e),c&&(d.bottomInches=n),u&&(d.leftInches=r);const{from:f}=s.selection,h=uat(s.doc,f);if(h){const{node:x,pos:T}=h,R=((A=x.attrs)==null?void 0:A.paragraphProperties)||null,k=(R==null?void 0:R.sectPr)||null;if(!k)return console.warn("[setSectionPageMarginsAtSelection] Paragraph found but has no sectPr"),!1;const _=JSON.parse(JSON.stringify(k));try{RI({type:"sectPr",sectPr:_},d)}catch(D){return console.error("[setSectionPageMarginsAtSelection] Failed to update sectPr:",D),!1}const N=II(_),L={top:N.top??null,right:N.right??null,bottom:N.bottom??null,left:N.left??null,header:N.header??null,footer:N.footer??null},M={...R||{},sectPr:_},C={...x.attrs,paragraphProperties:M,sectionMargins:L};return i.setNodeMarkup(T,void 0,C,x.marks),i.setMeta("forceUpdatePagination",!0),!0}const m=s.doc.attrs??{},y=o.converter??null,w=m.bodySectPr||(y==null?void 0:y.bodySectPr)||null,b=w!=null?JSON.parse(JSON.stringify(w)):{type:"element",name:"w:sectPr",elements:[]};try{RI({type:"sectPr",sectPr:b},d)}catch(x){return console.error("[setSectionPageMarginsAtSelection] Failed to update sectPr:",x),!1}if(y){y.bodySectPr=b,y.pageStyles||(y.pageStyles={}),y.pageStyles.pageMargins||(y.pageStyles.pageMargins={});const x=y.pageStyles.pageMargins,T=II(b);T.top!=null&&(x.top=T.top),T.right!=null&&(x.right=T.right),T.bottom!=null&&(x.bottom=T.bottom),T.left!=null&&(x.left=T.left),T.header!=null&&(x.header=T.header),T.footer!=null&&(x.footer=T.footer)}const E={...m,bodySectPr:b};return i.setNodeMarkup(0,void 0,E),i.setMeta("forceUpdatePagination",!0),!0},dat=({headerInches:t,footerInches:e}={})=>({tr:n,state:r,editor:i})=>{var w,b;if(!r||!i)return console.warn("[insertSectionBreakAtSelection] Missing state or editor"),!1;if(typeof t=="number"&&t<0)return console.warn("[insertSectionBreakAtSelection] headerInches must be >= 0, got:",t),!1;if(typeof e=="number"&&e<0)return console.warn("[insertSectionBreakAtSelection] footerInches must be >= 0, got:",e),!1;const{$from:s}=r.selection;let o=0,a=null;for(let E=s.depth;E>=0;E-=1){const A=s.node(E);if(((w=A==null?void 0:A.type)==null?void 0:w.name)==="paragraph"){o=s.before(E),a=A;break}}if(!a||o<=0)return console.warn("[insertSectionBreakAtSelection] No paragraph found at selection"),!1;const l=((b=a.attrs)==null?void 0:b.paragraphProperties)||null,c=(l==null?void 0:l.sectPr)||null,u=c?JSON.parse(JSON.stringify(c)):{type:"element",name:"w:sectPr",elements:[]},d={};t!=null&&(d.headerInches=t),e!=null&&(d.footerInches=e),Object.keys(d).length&&RI({type:"sectPr",sectPr:u},d);const f=II(u)||{},h={header:f.header??null,footer:f.footer??null},m={...l||{},sectPr:u},y={...a.attrs,paragraphProperties:m,pageBreakSource:"sectPr",sectionMargins:h};return n.setNodeMarkup(o,void 0,y,a.marks),!0},fat=36,hat=()=>lM(t=>n1e(t,1)),pat=()=>lM(t=>n1e(t,-1)),mat=t=>lM(()=>gH(t)),gat=()=>lM(()=>null);function n1e(t,e){let{indent:n}=es(t),{left:r}=n||{};const i=gH(e*fat);return r?r+=i:r=i,r<=0&&(r=null),r}function lM(t){return({state:e,dispatch:n})=>{const r=e.tr,{from:i,to:s}=e.selection,o=[];e.doc.nodesBetween(i,s,(l,c)=>{var u;if(l.type.name==="paragraph"){let d=t(l);if(Number.isNaN(d))return o.push(!1),!1;const f={...l.attrs,paragraphProperties:{...l.attrs.paragraphProperties||{},indent:{...((u=l.attrs.paragraphProperties)==null?void 0:u.indent)||{},left:d}}};return d==null&&(delete f.paragraphProperties.indent.left,Object.keys(f.paragraphProperties.indent).length===0&&delete f.paragraphProperties.indent),r.setNodeMarkup(c,void 0,f),o.push(!0),!1}return!0});const a=o.every(l=>l);return n&&a&&n(r),a}}const yat=t=>({commands:e})=>t?e.updateAttributes("paragraph",{"paragraphProperties.spacing.line":mH(t),"paragraphProperties.spacing.lineRule":"auto"}):!1,bat=()=>({commands:t})=>t.resetAttributes("paragraph","paragraphProperties.spacing.line","paragraphProperties.spacing.lineRule"),wat=()=>({state:t,dispatch:e})=>{const{$from:n}=t.selection;if(!t.selection.empty)return!1;const r=t.schema.nodes.paragraph,i=t.schema.nodes.run,s=n.parent;if(s.type!==r||s.childCount!==1||s.firstChild.type!==i||s.firstChild.content.size||t.doc.childCount===1&&n.depth===1)return!1;if(e){const o=n.before();let a=t.tr.deleteRange(o,o+s.nodeSize).scrollIntoView();const l=Math.max(1,Math.min(o-1,a.doc.content.size));a=a.setSelection(Vt.create(a.doc,l)),e(a)}return!0},vat=()=>({state:t,dispatch:e})=>{const n=t.selection;if(!n.empty)return!1;const r=t.schema.nodes.run,i=n.$from,s=l=>l&&l.type===r&&l.content.size===0;if(i.parent.type!==r||i.pos!==i.end()||!s(t.doc.nodeAt(i.pos+1)))return!1;const o=_n.findFrom(i,-1,!0);if(!o)return!1;const a=o.$from.pos;return e&&e(t.tr.delete(a-1,a).scrollIntoView()),!0},xat=()=>({state:t,tr:e,dispatch:n})=>{var o;const r=t.selection;if(!r.empty)return!1;const i=t.schema.nodes.run,s=r.$from;if(((o=s.nodeBefore)==null?void 0:o.type)!==i&&s.pos!==s.start())return!1;if(s.nodeBefore){if(s.nodeBefore.content.size===0)return!1;e.delete(s.pos-2,s.pos-1).setSelection(_n.near(e.doc.resolve(s.pos-2))),n&&n(e.scrollIntoView())}else{const a=t.doc.resolve(s.start()-1).nodeBefore;if((a==null?void 0:a.type)!==i||a.content.size===0)return!1;e.delete(s.pos-3,s.pos-2).setSelection(_n.near(e.doc.resolve(s.pos-3))),n&&n(e.scrollIntoView())}return!0},Eat=()=>({state:t,dispatch:e})=>{const n=t.selection;if(!n.empty)return!1;const r=t.schema.nodes.run,i=n.$from,s=o=>o&&o.type===r&&o.content.size===0;return i.parent.type===r&&s(t.doc.nodeAt(i.end()+1))?i.pos===i.end()?Sat(t,e,i):i.pos===i.end()-1?Aat(t,e,i):!1:!1};function Sat(t,e,n){const r=t.doc.nodeAt(n.pos+1),i=t.doc.resolve(n.pos+2+r.nodeSize),s=_n.findFrom(i,1,!0);if(!s)return!1;const o=s.$from.pos;return e&&e(t.tr.delete(o,o+1).scrollIntoView()),!0}function Aat(t,e,n){return e&&e(t.tr.delete(n.pos,n.pos+1).scrollIntoView()),!0}const Tat=()=>({state:t,tr:e,dispatch:n})=>{var o;const r=t.selection;if(!r.empty)return!1;const i=t.schema.nodes.run,s=r.$from;if(((o=s.nodeAfter)==null?void 0:o.type)!==i&&s.pos!==s.end())return!1;if(s.nodeAfter){if(s.nodeAfter.content.size===0)return!1;e.delete(s.pos+1,s.pos+2).setSelection(_n.near(e.doc.resolve(s.pos+1))),n&&n(e.scrollIntoView())}else{const a=t.doc.resolve(s.end()+1).nodeAfter;if((a==null?void 0:a.type)!==i||a.content.size===0)return!1;e.delete(s.pos+2,s.pos+3).setSelection(_n.near(e.doc.resolve(s.pos+2))),n&&n(e.scrollIntoView())}return!0};function kat(t){return({state:e,dispatch:n})=>{const r=e.schema.nodes.tab,i=e.schema.nodes.run,s=e.selection;if(!r||!s.empty)return!1;const o=s.$from;if(o.parent.type!==i||t>0&&o.pos<o.end()||t<0&&o.pos>o.start())return!1;const a=t>0?1:-1;let l=e.doc.resolve(o.pos+a);const c=t>0?l.nodeAfter:l.nodeBefore;if(!c||c.type!==r)return!1;const u=t>0?Math.min(l.pos+c.nodeSize+1,e.doc.nodeSize):Math.max(0,l.pos-c.nodeSize-1);return n&&n(e.tr.setSelection(Vt.create(e.doc,u))),!0}}const r1e=()=>({editor:t,tr:e,dispatch:n})=>{const r=nV(-1,t,e);return r&&n&&n(e),r},i1e=({checkType:t="startParagraph"}={})=>e=>{const{tr:n,state:r,editor:i,dispatch:s}=e,{node:o,pos:a}=Ml(lu)(r.selection)||{};if(!o||t==="empty"&&!MI(o))return!1;if(t==="startParagraph"){const{$from:c,empty:u}=r.selection;if((!u||c.parentOffset!==0)&&!MI(o))return!1}if(es(o).numberingProperties.ilvl>0){const c=r1e()(e);return c&&n.scrollIntoView(),c}else Bb(null,o,a,i,n);return s&&s(n),!0};function MI(t){if(!t||t.type.name!=="paragraph")return!1;let e=!1;if(t.descendants(i=>i.type&&i.type.name==="hardBreak"?(e=!0,!1):!0),e||(t.textContent||"").replace(/\u200b/g,"").trim().length>0)return!1;let r=!1;return t.descendants(i=>{var s,o;return i.isInline&&i.isLeaf&&((s=i.type)==null?void 0:s.name)!=="hardBreak"&&((o=i.type)==null?void 0:o.name)!=="run"?(r=!0,!1):!0}),!r}const JF=t=>({editor:e,state:n,tr:r,dispatch:i})=>{let s;if(t==="orderedList")s=y=>es(y).numberingProperties&&y.attrs.listRendering&&y.attrs.listRendering.numberingType!=="bullet";else if(t==="bulletList")s=y=>es(y).numberingProperties&&y.attrs.listRendering&&y.attrs.listRendering.numberingType==="bullet";else return!1;const{selection:o}=n,{from:a,to:l}=o;let c=null,u=!1,d=[];n.doc.nodesBetween(a,l,(y,w)=>y.type.name==="paragraph"?(d.push({node:y,pos:w}),!1):!0);let f=d.length===1?d:d.filter(({node:y})=>!MI(y));for(const{node:y}of f)!c&&s(y)?c=y:s(y)||(u=!0);if(!c&&a>0){const y=n.doc.resolve(a),w=y.index(-1);if(w>0){const b=y.node(-1).child(w-1);b&&b.type.name==="paragraph"&&s(b)&&(c=b)}}let h=null,m=null;if(c)if(!u)h="remove";else{h="reuse";const w=es(c).numberingProperties||{};m={...w,ilvl:w.ilvl??0}}else{h="create";const y=Zr.getNewListId(e);Zr.generateNewListDefinition({numId:Number(y),listType:t,editor:e}),m={numId:Number(y),ilvl:0}}for(const{node:y,pos:w}of f){if(h==="remove"){Bb(null,y,w,e,r);continue}h==="reuse"&&s(y)||Bb(m,y,w,e,r)}if(f.length>0){const y=f[0],w=f[f.length-1],b=r.mapping.map(y.pos),E=r.mapping.map(w.pos),A=r.doc.resolve(b),x=r.doc.resolve(E),T=A.nodeAfter,R=x.nodeAfter;if(T&&R){let k=b+1,_=E+R.nodeSize-1;if(T.firstChild&&T.firstChild.type.name==="run"&&(k=b+2),R.lastChild&&R.lastChild.type.name==="run"&&(_=E+R.nodeSize-2),k>=0&&_<=r.doc.content.size&&k<=_)try{r.setSelection(Vt.create(r.doc,k,_))}catch{}}}return i&&i(r),!0},Cat=()=>({editor:t,tr:e,dispatch:n})=>{const r=nV(1,t,e);return r&&n&&n(e),r},_at=()=>({editor:t,state:e,tr:n})=>t.options.lastSelection?(n.setSelection(Vt.create(e.doc,t.options.lastSelection.from,t.options.lastSelection.to)),!0):!1,lre=(t,e,n)=>Math.max(e,Math.min(t,n)),Nat=({from:t,to:e})=>({state:n,dispatch:r,editor:i})=>{var h;if(typeof t!="number"&&typeof e!="number")return!1;const s=n.doc,o=s.content.size,a=lre(typeof t=="number"?t:n.selection.from,0,o),c=lre(typeof e=="number"?e:a,0,o),[u,d]=a<=c?[a,c]:[c,a],f=Vt.create(s,u,d);if(r){const m=n.tr.setSelection(f);r(m)}return(h=i==null?void 0:i.view)!=null&&h.dom&&typeof i.view.dom.focus=="function"?i.view.dom.focus({preventScroll:!0}):i!=null&&i.view&&typeof i.view.focus=="function"&&i.view.focus(),!0},Iat=()=>({state:t,tr:e})=>{var i;e.setMeta("preventDispatch",!0);const n=R2(t)??[],r=new Map;for(const s of n){const o=typeof(s==null?void 0:s.type)=="string"?s.type:(i=s==null?void 0:s.type)==null?void 0:i.name;if(!o)continue;const a=r.get(o);if(!a){r.set(o,s);continue}const l=(a==null?void 0:a.attrs)??{},c=(s==null?void 0:s.attrs)??{},u=Object.values(l).some(f=>f!=null),d=Object.values(c).some(f=>f!=null);!u&&d&&r.set(o,s)}return Array.from(r.values())},Rat=Object.freeze(Object.defineProperty({__proto__:null,backspaceEmptyRunParagraph:wat,backspaceNextToRun:xat,backspaceSkipEmptyRun:vat,changeListLevel:nV,clearNodes:Pot,command:lot,createParagraphNear:_ot,decreaseListIndent:r1e,decreaseTextIndent:pat,defaultStyleDetector:Yve,deleteNextToRun:Tat,deleteSelection:$ot,deleteSkipEmptyRun:Eat,exitCode:Iot,first:aot,getEffectiveStyleId:Zve,getSelectionMarks:Iat,getStyleIdFromMarks:s6,increaseListIndent:Cat,increaseTextIndent:hat,insertContent:Qot,insertContentAt:rat,insertSectionBreakAtSelection:dat,insertTabChar:cot,insertTabCharacter:Bve,insertTabNode:hot,isStyleTokenEnabled:Qve,isVisuallyEmptyParagraph:MI,joinBackward:Got,joinDown:qot,joinForward:Kot,joinUp:Wot,liftEmptyBlock:Cot,mapMarkToStyleKey:Jve,newlineInCode:Not,removeNumberingProperties:i1e,resetAttributes:Uot,restoreSelection:_at,selectAll:jot,selectNodeBackward:Xot,selectNodeForward:Yot,selectTextblockEnd:Jot,selectTextblockStart:Zot,setBodyHeaderFooter:sat,setLineHeight:yat,setMark:Mot,setMeta:pot,setNode:Fot,setSectionHeaderFooterAtSelection:cat,setSectionPageMarginsAtSelection:t1e,setTextIndentation:mat,setTextSelection:Nat,skipTab:kat,splitBlock:jve,toggleList:JF,toggleMark:Oot,toggleMarkCascade:Xve,toggleNode:Bot,undoInputRule:iat,unsetAllMarks:Dot,unsetLineHeight:bat,unsetMark:Lot,unsetTextIndentation:gat,updateAttributes:zot,updateNumberingProperties:Bb},Symbol.toStringTag,{value:"Module"})),Mat=hi.create({name:"commands",addCommands(){return{...Rat}}}),Lat=t=>t.commands.first(({commands:e})=>[()=>e.splitRunToParagraph(),()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),PE=t=>t.commands.first(({commands:e,tr:n})=>[()=>e.undoInputRule(),()=>(n.setMeta("inputType","deleteContentBackward"),!1),()=>e.backspaceEmptyRunParagraph(),()=>e.backspaceSkipEmptyRun(),()=>e.backspaceNextToRun(),()=>e.deleteSelection(),()=>e.removeNumberingProperties(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),ov=t=>t.commands.first(({commands:e})=>[()=>e.deleteSkipEmptyRun(),()=>e.deleteNextToRun(),()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]),Dat=hi.create({name:"keymap",addShortcuts(){const t={Enter:()=>Lat(this.editor),"Shift-Enter":()=>this.editor.commands.insertLineBreak(),"Mod-Enter":()=>this.editor.commands.insertPageBreak(),Backspace:()=>PE(this.editor),"Mod-Backspace":()=>PE(this.editor),"Shift-Backspace":()=>PE(this.editor),Delete:()=>ov(this.editor),"Mod-Delete":()=>ov(this.editor),"Mod-a":()=>this.editor.commands.selectAll(),Tab:()=>this.editor.commands.insertTabNode(),ArrowLeft:()=>this.editor.commands.skipTab(-1),ArrowRight:()=>this.editor.commands.skipTab(1)},e={...t},n={...t,"Ctrl-h":()=>PE(this.editor),"Alt-Backspace":()=>PE(this.editor),"Ctrl-d":()=>ov(this.editor),"Ctrl-Alt-Backspace":()=>ov(this.editor),"Alt-Delete":()=>ov(this.editor),"Alt-d":()=>ov(this.editor),"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd(),"Ctrl-t":()=>this.editor.commands.insertTabChar()};return dU()||Gtt()?n:e}}),Oat=hi.create({name:"editable",addPmPlugins(){const t=this.editor;return[new Mr({key:new ni("editable"),props:{editable:()=>t.options.editable,handleDOMEvents:{beforeinput:(n,r)=>t.options.editable?!1:(r.preventDefault(),!0),mousedown:(n,r)=>t.options.editable?!1:(r.preventDefault(),!0),focus:(n,r)=>t.options.editable?!1:(r.preventDefault(),n.dom.blur(),!0)},handleClick:()=>!t.options.editable,handleDoubleClick:()=>!t.options.editable,handleTripleClick:()=>!t.options.editable,handleKeyDown:()=>!t.options.editable,handlePaste:()=>!t.options.editable,handleDrop:()=>!t.options.editable}})]}}),Pat=hi.create({name:"editorFocus",addPmPlugins(){const t=this.editor;return[new Mr({key:new ni("editorFocus"),props:{handleDOMEvents:{focus:(n,r)=>{t.isFocused=!0;const i=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return n.dispatch(i),!1},blur:(n,r)=>{t.isFocused=!1;const i=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return n.dispatch(i),!1}}}})]}});var ef,Dle;let cM=(Dle=class{constructor(){st(this,ef,new Map)}on(e,n){const r=F(this,ef).get(e);r?r.push(n):F(this,ef).set(e,[n])}emit(e,...n){const r=F(this,ef).get(e);if(r)for(const i of r)i.apply(this,n)}off(e,n){const r=F(this,ef).get(e);r&&(n?F(this,ef).set(e,r.filter(i=>i!==n)):F(this,ef).delete(e))}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};this.on(e,r)}removeAllListeners(){je(this,ef,new Map)}},ef=new WeakMap,Dle);var c0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},LI={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Fat=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bat=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Go=0;Go<10;Go++)c0[48+Go]=c0[96+Go]=String(Go);for(var Go=1;Go<=24;Go++)c0[Go+111]="F"+Go;for(var Go=65;Go<=90;Go++)c0[Go]=String.fromCharCode(Go+32),LI[Go]=String.fromCharCode(Go);for(var T9 in c0)LI.hasOwnProperty(T9)||(LI[T9]=c0[T9]);function jat(t){var e=Fat&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Bat&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?LI:c0)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const $at=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),zat=typeof navigator<"u"&&/Win/.test(navigator.platform);function Hat(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))$at?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Vat(t){let e=Object.create(null);for(let n in t)e[Hat(n)]=t[n];return e}function k9(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Uat(t){return new Mr({props:{handleKeyDown:DU(t)}})}function DU(t){let e=Vat(t);return function(n,r){let i=jat(r),s,o=e[k9(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[k9(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(zat&&r.ctrlKey&&r.altKey)&&(s=c0[r.keyCode])&&s!=i){let a=e[k9(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}function Wat(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}var i2,s1e,o1e;const r1=class r1{constructor(e,n,r){st(this,i2);Mt(this,"editor");Mt(this,"schema");Mt(this,"extensions");Mt(this,"externalExtensions",[]);Mt(this,"splittableMarks",[]);this.editor=r,this.externalExtensions=n||[],this.externalExtensions=this.externalExtensions.map(i=>({...i,isExternal:!0})),this.extensions=r1.getResolvedExtensions([...e,...this.externalExtensions]),this.schema=KF.createSchemaByExtensions(this.extensions,r),pe(this,i2,s1e).call(this)}static create(...e){return new r1(...e)}static getResolvedExtensions(e){return r1.sortByPriority(e)}static sortByPriority(e){return e.sort((r,i)=>{const s=kn(r,"priority")||100,o=kn(i,"priority")||100;return s>o?-1:s<o?1:0})}get attributes(){return an.getAttributesFromExtensions(this.extensions)}get commands(){let e={};for(const n of this.extensions){const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Iv(n.name,this.schema)},i=kn(n,"addCommands",r);i&&(e={...e,...i()})}return e}get helpers(){const e={};for(const n of this.extensions){const r=n.name;if(!r)continue;const i={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Iv(n.name,this.schema)},s=kn(n,"addHelpers",i);s&&(e[r]=s())}return e}get plugins(){const e=this.editor,n=r1.sortByPriority([...this.extensions].reverse()),r=[],i=n.map(s=>{const o={name:s.name,options:s.options,storage:s.storage,editor:e,type:Iv(s.name,this.schema)},a=[],l=kn(s,"addShortcuts",o);let c={};if(l){const f=Object.entries(l()).map(([h,m])=>[h,(...y)=>m({editor:e,keymapArgs:y})]);c={...Object.fromEntries(f)}}a.push(Uat(c));const u=kn(s,"addInputRules",o);Wat(s,e.options.enableInputRules)&&u&&r.push(...u());const d=kn(s,"addPmPlugins",o);if(d){const f=d();a.push(...f)}return a}).flat();return[yqe({editor:e,rules:r}),...i]}get nodeViews(){const{editor:e}=this,r=this.extensions.filter(i=>i.type==="node").filter(i=>!!kn(i,"addNodeView")).map(i=>{const s=this.attributes.filter(u=>u.type===i.name),o={name:i.name,options:i.options,storage:i.storage,editor:e,type:uc(i.name,this.schema)},a=kn(i,"addNodeView",o);if(!a)return null;const l=a();if(!l)return null;const c=(u,d,f,h)=>{const m=an.getAttributesToRender(u,s);return l({editor:e,node:u,getPos:f,decorations:h,htmlAttributes:m,extension:i,extensionAttrs:s})};return[i.name,c]}).filter(Boolean);return Object.fromEntries(r)}};i2=new WeakSet,s1e=function(){for(const e of this.extensions){this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Iv(e.name,this.schema)};e.type==="mark"&&(Ni(kn(e,"keepOnSplit",n))??!0)&&this.splittableMarks.push(e.name),pe(this,i2,o1e).call(this,e)}},o1e=function(e){const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Iv(e.name,this.schema)},r=kn(e,"onBeforeCreate",n),i=kn(e,"onCreate",n),s=kn(e,"onUpdate",n),o=kn(e,"onSelectionUpdate",n),a=kn(e,"onTransaction",n),l=kn(e,"onFocus",n),c=kn(e,"onBlur",n),u=kn(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)};let QF=r1;const a1e=({tr:t,from:e,to:n,markName:r,attrs:i={},offset:s=1})=>{const{doc:o}=t,a=Math.max(e-s,0),l=Math.min(n+s,o.content.size);let c=null;const u=(f,h)=>{var y;if(!f||(f==null?void 0:f.nodeSize)===void 0)return;const m=(y=f.marks)==null?void 0:y.find(w=>w.type.name===r&&Object.keys(i).every(b=>w.attrs[b]===i[b]));if(m&&!c)return c={from:h,to:h+f.nodeSize,mark:m},!1};o.nodesBetween(a,l,(f,h)=>u(f,h));const d=f=>{var w,b,E,A,x,T,R,k;if(f<0||f>o.content.size)return;const h=o.resolve(f),m=h.nodeBefore;if(((w=m==null?void 0:m.type)==null?void 0:w.name)==="run"){const _=Math.max(f-m.nodeSize,0),N=(E=(b=m.content)==null?void 0:b.content)==null?void 0:E[0];((A=N==null?void 0:N.type)==null?void 0:A.name)==="text"&&u(N,_)}const y=h.nodeAfter;if(((x=y==null?void 0:y.type)==null?void 0:x.name)==="run"){const _=(R=(T=y.content)==null?void 0:T.content)==null?void 0:R[0];((k=_==null?void 0:_.type)==null?void 0:k.name)==="text"&&u(_,f)}};return c||(d(a),d(l)),c},qat=({tr:t,from:e,to:n,user:r,date:i})=>{t.removeMark(e,n,t.doc.type.schema.marks[Hi]),t.removeMark(e,n,t.doc.type.schema.marks[ko]);let s=a1e({tr:t,from:e,to:n,markName:ko,attrs:{authorEmail:r.email}}),o;s?o=s.mark.attrs.id:o=Ts();const a=t.doc.type.schema.marks[ko].create({id:o,author:r.name,authorEmail:r.email,authorImage:r.image,date:i});return t.addMark(e,n,a),t.doc.nodesBetween(e,n,(l,c)=>{if(c<e||["bulletList","orderedList"].includes(l.type.name))return!0;if(l.isInline||["tableRow","tableCell"].includes(l.type.name)||(l.attrs.track,l.type.name==="table"))return!1}),a},Gat=({tr:t,from:e,to:n,user:r,date:i,id:s})=>{let o=a1e({tr:t,from:e,to:n,markName:Hi,attrs:{authorEmail:r.email}}),a;s?a=s:o?a=o.mark.attrs.id:a=Ts();const l=t.doc.type.schema.marks[Hi].create({id:a,author:r.name,authorEmail:r.email,authorImage:r.image,date:i}),c=new cd;let u=[];return t.doc.nodesBetween(e,n,(d,f)=>{if(!d.type.name.includes("table"))if(d.isInline&&d.marks.find(h=>h.type.name===ko&&h.attrs.authorEmail===r.email)){const h=new xi(c.map(Math.max(e,f)),c.map(Math.min(n,f+d.nodeSize)),Ut.empty);t.maybeStep(h).failed||c.appendMap(h.getMap())}else d.isInline&&!d.marks.find(h=>h.type.name===Hi)?(u.push(d),t.addMark(c.map(Math.max(e,f)),c.map(Math.min(n,f+d.nodeSize)),l)):d.attrs.track&&!d.attrs.track.find(h=>h.type===Hi)&&["bulletList","orderedList"].includes(d.type.name)}),{deletionMark:l,deletionMap:c,nodes:u}},Kat=(t,e,n)=>{const r=t.resolve(e),i=r.parent,s=i.childAfter(r.parentOffset);if(!s.node)return null;const o=s.node.marks.find(d=>d.type.name===n);if(!o)return null;let a=r.index(),l=r.start()+s.offset;for(;a>0&&o.isInSet(i.child(a-1).marks);)l-=i.child(--a).nodeSize;let c=r.index()+1,u=r.start()+s.offset+s.node.nodeSize;for(;c<i.childCount&&o.isInSet(i.child(c).marks);)u+=i.child(c++).nodeSize;return{from:l,to:u,attrs:o.attrs}},Xat=(t,e=!0)=>{if(!t)throw new Error('Invalid "node" parameter');const n=[];return t.descendants((r,i)=>{if(n.push({node:r,pos:i}),!e)return!1}),n},Yat=(t,e,n)=>{if(t){if(!e)throw new Error('Invalid "predicate" parameter')}else throw new Error('Invalid "node" parameter');return Xat(t,n).filter(r=>e(r.node))},Zat=(t,e)=>Yat(t,n=>n.isInline,e),uM=(t,e=null)=>{const n=[],r=Zat(t.doc);return r.length?(r.forEach(({node:i,pos:s})=>{const{marks:o}=i,a=[ko,Hi,Zo];o.length>0&&o.forEach(l=>{a.includes(l.type.name)&&n.push({mark:l,from:s,to:s+i.nodeSize})})}),e?n.filter(({mark:i})=>i.attrs.id===e):n):n},Ps=new ni("TrackChangesBase"),Jat=()=>new Mr({key:Ps,state:{init(t,e){return{isTrackChangesActive:!1,onlyOriginalShown:!1,onlyModifiedShown:!1,decorations:av(e,!1,!1)}},apply(t,e,n,r){const i=t.getMeta(Ps);if(i&&i.type==="TRACK_CHANGES_ENABLE")return{...e,isTrackChangesActive:i.value===!0,decorations:av(r,e.onlyOriginalShown,e.onlyModifiedShown)};if(i&&i.type==="SHOW_ONLY_ORIGINAL")return{...e,onlyOriginalShown:i.value===!0,onlyModifiedShown:!1,decorations:av(r,i.value===!0,!1)};if(i&&i.type==="SHOW_ONLY_MODIFIED")return{...e,onlyOriginalShown:!1,onlyModifiedShown:i.value===!0,decorations:av(r,!1,i.value===!0)};if(!t.docChanged)return e;if(!i){let s=!1;return t.steps.forEach(o=>{(o.slice||o.from!==o.to)&&(s=!0)}),s?{...e,decorations:av(r,e.onlyOriginalShown,e.onlyModifiedShown)}:{...e,decorations:e.decorations.map(t.mapping,t.doc)}}return{...e,decorations:av(r,e.onlyOriginalShown,e.onlyModifiedShown)}}},props:{decorations(t){var e;return(e=this.getState(t))==null?void 0:e.decorations}}}),av=(t,e,n)=>{if(!t.doc||!t.doc.nodeSize||n&&e)return An.empty;const r=[],i=uM(t);return i.length?(i.forEach(({mark:s,from:o,to:a})=>{if(s.type.name===ko)if(e){const l=Qn.inline(o,a,{class:"track-insert-dec hidden"});r.push(l)}else if(n){const l=Qn.inline(o,a,{class:"track-insert-dec normal"});r.push(l)}else{const l=Qn.inline(o,a,{class:"track-insert-dec highlighted"});r.push(l)}if(s.type.name===Hi)if(e){const l=Qn.inline(o,a,{class:"track-delete-dec normal"});r.push(l)}else if(n){const l=Qn.inline(o,a,{class:"track-delete-dec hidden"});r.push(l)}else{const l=Qn.inline(o,a,{class:"track-delete-dec highlighted"});r.push(l);const c=Qn.widget(o,()=>{const u=document.createElement("span");return u.classList.add("track-delete-widget"),u},{ignoreSelection:!0,key:"stable-key"});r.push(c)}if(s.type.name===Zo)if(e){const l=Qn.inline(o,a,{class:"track-format-dec before"});r.push(l)}else if(n){const l=Qn.inline(o,a,{class:"track-format-dec normal"});r.push(l)}else{const l=Qn.inline(o,a,{class:"track-format-dec highlighted"});r.push(l)}}),An.create(t.doc,r)):An.empty},xa="commentMark",Qat=({converter:t,importedId:e})=>{const r=((t==null?void 0:t.comments)||[]).find(o=>o.importedId==e),i=(r==null?void 0:r.commentId)??(e?String(e):Ts()),s=(r==null?void 0:r.internal)??(r==null?void 0:r.isInternal)??!1;return{resolvedCommentId:i,importedId:e,internal:s,matchingImportedComment:r}},elt=({converter:t,matchingImportedComment:e,commentId:n,importedId:r})=>{e||!t||(t.comments=t.comments||[],t.comments.some(s=>s.commentId===n))||t.comments.push({commentId:n,importedId:r,textJson:null,creatorName:null,creatorEmail:null,createdTime:null,isDone:!1})},tlt=({commentId:t,state:e,tr:n,dispatch:r})=>{nlt(t,e.doc).forEach(({from:s,to:o})=>{n.removeMark(s,o,e.schema.marks[xa])}),r(n)},nlt=(t,e)=>{const n=[];return e.descendants((r,i)=>{const{marks:s}=r,o=s.find(a=>a.type.name===xa);if(o){const{attrs:a}=o,{commentId:l}=a;t===l&&n.push({from:i,to:i+r.nodeSize})}}),n},rlt=(t,e)=>{const n=[];return e.descendants((r,i)=>{var o;if(!r.isInline)return;const s=(o=r.marks)==null?void 0:o.find(a=>{var l;return a.type.name===xa&&((l=a.attrs)==null?void 0:l.commentId)===t});s&&n.push({from:i,to:i+r.nodeSize,attrs:s.attrs||{}})}),n},ilt=(t,e)=>{const n=rlt(t,e);if(!n.length)return{segments:n,ranges:[]};const r=[];let i=null;return n.forEach(s=>{var o,a;if(!i){i={from:s.from,to:s.to,internal:!!((o=s.attrs)!=null&&o.internal)};return}if(s.from<=i.to){i.to=Math.max(i.to,s.to);return}r.push(i),i={from:s.from,to:s.to,internal:!!((a=s.attrs)!=null&&a.internal)}}),i&&r.push(i),{segments:n,ranges:r}},slt=({commentId:t,state:e,tr:n,dispatch:r})=>{var u,d,f;const{schema:i}=e,s=(u=i.marks)==null?void 0:u[xa];if(!s)return!1;const{segments:o,ranges:a}=ilt(t,e.doc);if(!o.length)return!1;o.forEach(({from:h,to:m,attrs:y})=>{n.removeMark(h,m,s.create(y))});const l=(d=i.nodes)==null?void 0:d.commentRangeStart,c=(f=i.nodes)==null?void 0:f.commentRangeEnd;return l&&c&&a.slice().sort((h,m)=>m.from-h.from).forEach(({from:h,to:m,internal:y})=>{n.insert(m,c.create({"w:id":t})),n.insert(h,l.create({"w:id":t,internal:y}))}),r(n),!0},olt=(t,e,n,r=[])=>{const i=new Map;r.forEach(l=>{i.set(l.commentId,l)});const s=[],o=[],a=new Set;return t.descendants((l,c)=>{var d;(((d=l.marks)==null?void 0:d.filter(f=>f.type.name===xa))||[]).forEach(f=>{const{attrs:h={}}=f,{commentId:m}=h;if(m==="pending"||a.has(m))return;a.add(m);const y=i.get(m),w=y==null?void 0:y.parentCommentId,b=cre(f.attrs),E=n.nodes.commentRangeStart.create(b);s.push({pos:c,node:E,commentId:m,parentCommentId:w});const A=n.nodes.commentRangeEnd.create(b);o.push({pos:c+l.nodeSize,node:A,commentId:m,parentCommentId:w}),r.filter(T=>T.parentCommentId===m).sort((T,R)=>T.createdTime-R.createdTime).forEach(T=>{if(a.has(T.commentId))return;a.add(T.commentId);const R=cre({commentId:T.commentId,internal:T.isInternal}),k=n.nodes.commentRangeStart.create(R);s.push({pos:c,node:k,commentId:T.commentId,parentCommentId:T.parentCommentId});const _=n.nodes.commentRangeEnd.create(R);o.push({pos:c+l.nodeSize,node:_,commentId:T.commentId,parentCommentId:T.parentCommentId})})})}),s.sort((l,c)=>{if(l.pos!==c.pos)return l.pos-c.pos;const u=l.commentId===c.parentCommentId,d=c.commentId===l.parentCommentId;if(u)return-1;if(d)return 1;if(l.parentCommentId&&l.parentCommentId===c.parentCommentId){const f=i.get(l.commentId),h=i.get(c.commentId);return((f==null?void 0:f.createdTime)||0)-((h==null?void 0:h.createdTime)||0)}return 0}),o.sort((l,c)=>{if(l.pos!==c.pos)return l.pos-c.pos;const u=l.commentId===c.parentCommentId,d=c.commentId===l.parentCommentId;if(u)return-1;if(d)return 1;if(l.parentCommentId&&l.parentCommentId===c.parentCommentId){const f=i.get(l.commentId),h=i.get(c.commentId);return((f==null?void 0:f.createdTime)||0)-((h==null?void 0:h.createdTime)||0)}return 0}),s.forEach(l=>{const{pos:c,node:u}=l,d=e.mapping.map(c);e.insert(d,u)}),o.forEach(l=>{const{pos:c,node:u}=l,d=e.mapping.map(c);e.insert(d,u)}),e},cre=t=>{const{commentId:e,internal:n}=t;return{"w:id":e,internal:n}},alt=(t,e,n,r)=>{const i=[],s=[],o=[];t.descendants((a,l)=>{const{type:c}=a;if(!["commentRangeStart","commentRangeEnd","commentReference"].includes(c.name))return;const{resolvedCommentId:d,importedId:f,internal:h,matchingImportedComment:m}=Qat({converter:r,importedId:a.attrs["w:id"]}),y=!!(m!=null&&m.isDone);if(c.name==="commentRangeStart")y||i.push({commentId:d,importedId:f,internal:h,start:l}),elt({converter:r,matchingImportedComment:m,commentId:d,importedId:f}),y?o.push({pos:l,attrs:{...a.attrs,"w:id":d,internal:h}}):s.push({start:l,end:l+1});else if(c.name==="commentRangeEnd"){if(y){o.push({pos:l,attrs:{...a.attrs,"w:id":d}});return}const w=i.find(A=>A.importedId===f);if(!w)return;const{start:b}=w,E={commentId:w.commentId,importedId:f,internal:w.internal};e.addMark(b,l+1,n.marks[xa].create(E)),s.push({start:l,end:l+1})}else c.name==="commentReference"&&s.push({start:l,end:l+1})}),typeof e.setNodeMarkup=="function"&&o.sort((a,l)=>l.pos-a.pos).forEach(({pos:a,attrs:l})=>{e.setNodeMarkup(a,void 0,l)}),s.sort((a,l)=>l.start-a.start).forEach(({start:a,end:l})=>{e.delete(a,l)})},llt=(t={})=>{var m,y;const{before:e=[],after:n=[]}=t,r=new Set(e.map(w=>w.type)),i=new Set(n.map(w=>w.type)),s=[...i].filter(w=>!r.has(w)),o=[...r].filter(w=>!i.has(w)),a=[],l=s.filter(w=>!["textStyle","commentMark"].includes(w));l.length&&a.push(`Added formatting: ${l.join(", ")}`);const c=o.filter(w=>!["textStyle","commentMark"].includes(w));c.length&&a.push(`Removed formatting: ${c.join(", ")}`);const u=((m=e.find(w=>w.type==="textStyle"))==null?void 0:m.attrs)||{},d=((y=n.find(w=>w.type==="textStyle"))==null?void 0:y.attrs)||{},f=[],h=w=>w.replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase();return Object.keys({...u,...d}).forEach(w=>{const b=u[w],E=d[w];if(b!==E){if(E===null)return;if(w==="color")f.push("Changed color");else{const A=h(w);b==null?f.push(`Set ${A} to ${E}`):f.push(`Changed ${A} from ${b} to ${E}`)}}}),f.length&&a.push(`Modified text style: ${f.join(", ")}`),a.length?a.join(". "):"No formatting changes."},clt=({activeThreadId:t,threadId:e,isInternal:n,editor:r})=>{if(!r.options.isInternal&&n)return"transparent";const i=Zi.getState(r.state),s=n?i.internalColor:i.externalColor,o=t==e?"44":"22";return`${s}${o}`},ult=({conversation:t,editorOptions:e,fallbackCommentId:n,fallbackInternal:r})=>{const{user:i,documentId:s}=e||{},o={...t,commentId:(t==null?void 0:t.commentId)??n,isInternal:(t==null?void 0:t.isInternal)??r};return!o.commentText&&o.text&&(o.commentText=o.text,delete o.text),"skipEmit"in o&&delete o.skipEmit,!o.creatorName&&(i!=null&&i.name)&&(o.creatorName=i.name),!o.creatorEmail&&(i!=null&&i.email)&&(o.creatorEmail=i.email),!o.creatorImage&&(i!=null&&i.image)&&(o.creatorImage=i.image),o.createdTime||(o.createdTime=Date.now()),!o.fileId&&s&&(o.fileId=s),!o.documentId&&s&&(o.documentId=s),o},ure=({allCommentPositions:t,threadId:e,pos:n,currentBounds:r,node:i})=>{let s={};if(r instanceof DOMRect?s={top:r.top,bottom:r.bottom,left:r.left,right:r.right}:s={...r},!t[e])t[e]={threadId:e,start:n,end:n+i.nodeSize,bounds:s};else{const o=t[e];o.start=Math.min(o.start,n),o.end=Math.max(o.end,n+i.nodeSize),o.bounds.top=Math.min(o.bounds.top,r.top),o.bounds.bottom=Math.max(o.bounds.bottom,r.bottom)}},OU=[ko,Hi,Zo],Zi=new ni("comments"),dlt=hi.create({name:"comments",addCommands(){return{insertComment:(t={})=>({tr:e,dispatch:n})=>{const{selection:r}=e,{$from:i,$to:s}=r,o=t==null?void 0:t.skipEmit,a=(t==null?void 0:t.commentId)??Ts(),l=(t==null?void 0:t.isInternal)??!1;if(e.setMeta(Zi,{event:"add"}),e.addMark(i.pos,s.pos,this.editor.schema.marks[xa].create({commentId:a,internal:l})),n&&n(e),!o&&a!=="pending"){const u=ult({conversation:t,editorOptions:this.editor.options,fallbackCommentId:a,fallbackInternal:l}),d=u.commentId||u.importedId||null,f={type:yf.ADD,comment:u,...d&&{activeCommentId:d}};this.editor.emit("commentsUpdate",f)}return!0},removeComment:({commentId:t,importedId:e})=>({tr:n,dispatch:r,state:i})=>{n.setMeta(Zi,{event:"deleted"}),tlt({commentId:t,state:i,tr:n,dispatch:r})},setActiveComment:({commentId:t})=>({tr:e})=>(e.setMeta(Zi,{type:"setActiveComment",activeThreadId:t,forceUpdate:!0}),!0),setCommentInternal:({commentId:t,isInternal:e})=>({tr:n,dispatch:r,state:i})=>{const{doc:s}=i;let o,a;return n.setMeta(Zi,{event:"update"}),s.descendants((l,c)=>{if(o)return;const{marks:u=[]}=l,d=u.find(f=>f.type.name===xa);if(d){const{attrs:f}=d;f.commentId===t&&(o=l,a=c)}}),o?(n.addMark(a,a+o.nodeSize,this.editor.schema.marks[xa].create({commentId:t,internal:e})),n.setMeta(Zi,{type:"setCommentInternal"}),r(n),!0):!1},resolveComment:({commentId:t})=>({tr:e,dispatch:n,state:r})=>(e.setMeta(Zi,{event:"update"}),slt({commentId:t,state:r,tr:e,dispatch:n})),setCursorById:t=>({state:e,editor:n})=>{const{from:r}=ylt(e.doc,t)||{};return r!=null?(e.tr.setSelection(Vt.create(e.doc,r)),n.view.focus(),!0):!1}}},addPmPlugins(){const t=this.editor;let e=!0;return t.options.isHeadless?[]:[new Mr({key:Zi,state:{init(){return{activeThreadId:null,externalColor:"#B1124B",internalColor:"#078383",decorations:An.empty,allCommentPositions:{},allCommentIds:[],changedActiveThread:!1,trackedChanges:{}}},apply(r,i,s,o){const a=r.getMeta(Zi),{type:l}=a||{};if((l==="force"||l==="forceTrackChanges")&&(e=!0),l==="setActiveComment")return e=!0,i.activeThreadId=a.activeThreadId,{...i,activeThreadId:a.activeThreadId,changedActiveThread:!0};if(a&&a.decorations)return{...i,decorations:a.decorations,allCommentPositions:a.allCommentPositions};const c=r.getMeta(Ps),u=i.trackedChanges;c&&(i.trackedChanges=plt(c,u,o,t));const d=(a==null?void 0:a.type)==="setActiveComment";if(!r.docChanged&&r.selectionSet||d){const{selection:f}=r;let h=hlt(o.doc,f);if(d&&(h=a.activeThreadId),i.activeThreadId!==h){i.activeThreadId=h;const y={type:yf.SELECTED,activeCommentId:h||null};e=!0,t.emit("commentsUpdate",y);const{tr:w}=t.view.state,{dispatch:b}=t.view;w.setMeta(Zi,{type:"force"}),b(w)}}return i}},props:{decorations(r){return this.getState(r).decorations}},view(){let r=null,i=null,s={},o=!1;return{update(a){const{state:l}=a,{doc:c,tr:u}=l,d=Zi.getState(l),f=d.activeThreadId,h=u.getMeta(Zi);((h==null?void 0:h.type)==="setActiveComment"||h!=null&&h.forceUpdate)&&(e=!0);const m=!r||!r.eq(c);m&&(e=!0);const y=i!==f;y&&(e=!0,i=f);const b=!(r===null)&&!m&&y;if(!e)return;r=c,e=!1;const E=[],A={};c.descendants((k,_)=>{const{marks:N=[]}=k,L=N.filter(D=>D.type.name===xa);let M=!1;L.forEach(D=>{const{attrs:O}=D,$=O.commentId||O.importedId;if(!b){let se;try{se=a.coordsAtPos(_)}catch{se=null}se&&ure({allCommentPositions:A,threadId:$,pos:_,currentBounds:se,node:k})}const U=O.internal;M||(M=f===$);let W=clt({activeThreadId:f,threadId:$,isInternal:U,editor:t});const ce=Qn.inline(_,_+k.nodeSize,{style:`background-color: ${W};`,"data-thread-id":$,class:"sd-editor-comment-highlight"});M&&f!==$||E.push(ce)});const C=l1e({doc:c,from:_,to:_+k.nodeSize});if(C){if(!b){let O;try{O=a.coordsAtPos(_)}catch{O=null}const{id:$}=C.mark.attrs;O&&ure({allCommentPositions:A,threadId:$,pos:_,currentBounds:O,node:k})}if(f===C.mark.attrs.id){const O=Qn.inline(_,_+k.nodeSize,{style:"border-width: 2px;","data-thread-id":C.mark.attrs.id,class:"sd-editor-tracked-change-highlight"});E.push(O)}}});const x=An.create(c,E);if(!d.decorations.eq(x)){const k=l.tr.setMeta(Zi,{decorations:x,allCommentPositions:A,forceUpdate:!0});a.dispatch(k)}if(!b){const k=flt(s,A),_=Object.keys(A).length>0;(k||!o&&_)&&(s=A,o=!0,t.emit("comment-positions",{allCommentPositions:A}))}}}}})]}}),flt=(t,e)=>{const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!0;for(const i of r){const s=t[i],o=e[i];if(!s||!s.bounds||!o.bounds||s.bounds.top!==o.bounds.top||s.bounds.left!==o.bounds.left)return!0}return!1},hlt=(t,e)=>{var f,h;if(!e)return;const{$from:n,$to:r}=e;if(n.pos!==r.pos||!t.nodeAt(n.pos))return;const s=l1e({doc:t,from:n.pos,to:r.pos});if(s)return s.mark.attrs.id;const o=[];let a=!1;t.descendants((m,y)=>{if(a)return;const w=y+m.nodeSize;if(n.pos<y||n.pos>=w)return;const{marks:b=[]}=m;b.find(A=>A.type.name===xa)&&o.push({node:m,pos:y,size:m.nodeSize}),y>n.pos&&(a=!0)});let l=null,c=null;o.forEach(({pos:m,node:y})=>{l||(l=n.pos-m);const w=n.pos-m;w>=0&&w<=l&&(c=y,l=w)});const{marks:u=[]}=c||{},d=u.find(m=>m.type.name===xa);return((f=d==null?void 0:d.attrs)==null?void 0:f.commentId)||((h=d==null?void 0:d.attrs)==null?void 0:h.importedId)},l1e=({doc:t,from:e,to:n,offset:r=1})=>{const i=Math.max(e-r,0),s=Math.min(n+r,t.content.size);let o;return t.nodesBetween(i,s,(a,l)=>{if(!a||(a==null?void 0:a.nodeSize)===void 0)return;const c=a.marks.find(u=>OU.includes(u.type.name));c&&!o&&(o={from:l,to:l+a.nodeSize,mark:c})}),o},plt=(t,e,n,r)=>{var m,y,w,b,E,A,x;const{insertedMark:i,deletionMark:s,formatMark:o,deletionNodes:a}=t;if(!i&&!s&&!o)return;const l={...e};let c=((m=i==null?void 0:i.attrs)==null?void 0:m.id)||((y=s==null?void 0:s.attrs)==null?void 0:y.id)||((w=o==null?void 0:o.attrs)==null?void 0:w.id);if(!c)return e;let u=!1;l[c]||(l[c]={},u=!0),i&&(l[c].insertion=c),s&&(l[c].deletion=(b=s.attrs)==null?void 0:b.id),o&&(l[c].format=(E=o.attrs)==null?void 0:E.id);const{step:d}=t;let f=((x=(A=d==null?void 0:d.slice)==null?void 0:A.content)==null?void 0:x.content)||[];f.length||n.doc.descendants(T=>{if(T.marks.find(k=>k.type.name===Zo))return f=[T],!1});const h=glt({documentId:r.options.documentId,event:u?"add":"update",marks:{insertedMark:i,deletionMark:s,formatMark:o},deletionNodes:a,nodes:f,newEditorState:n});return h&&r.emit("commentsUpdate",h),l},mlt=({nodes:t,mark:e,trackedChangeType:n,isDeletionInsertion:r})=>{let i="",s="";return n===ko&&(i=t.reduce((o,a)=>(a.marks.find(l=>l.type.name===e.type.name)&&(o+=(a==null?void 0:a.text)||(a==null?void 0:a.textContent)||""),o),"")),n===Zo&&(i=llt(e.attrs)),(n===Hi||r)&&(s=t.reduce((o,a)=>(a.marks.find(l=>l.type.name===Hi)&&(o+=(a==null?void 0:a.text)||(a==null?void 0:a.textContent)||""),o),"")),{deletionText:s,trackedChangeText:i}},glt=({event:t,marks:e,deletionNodes:n,nodes:r,newEditorState:i,documentId:s})=>{const o=e.insertedMark||e.deletionMark||e.formatMark,{type:a,attrs:l}=o,{name:c}=a,{author:u,authorEmail:d,authorImage:f,date:h,importedAuthor:m}=l,y=l.id,w=r[0],b=!!(e.insertedMark&&e.deletionMark);let E=[];i.doc.descendants(k=>{const{marks:_=[]}=k,N=_.filter(M=>OU.includes(M.type.name));if(!N.length)return;N.find(M=>M.attrs.id===y)&&E.push(k)});const A=E.length?E:w?[w]:[];if(!A.length)return;const{deletionText:x,trackedChangeText:T}=mlt({nodes:A,mark:o,trackedChangeType:c,isDeletionInsertion:b});if(!x&&!T)return;const R={event:yf.ADD,type:"trackedChange",documentId:s,changeId:y,trackedChangeType:b?"both":c,trackedChangeText:T,deletedText:e.deletionMark?x:null,author:u,authorEmail:d,...f&&{authorImage:f},date:h,...m&&{importedAuthor:{name:m}}};return t==="add"?R.event=yf.ADD:t==="update"&&(R.event=yf.UPDATE),R};function ylt(t,e){let n=null,r=null;return t.descendants((i,s)=>{i.marks.find(l=>OU.includes(l.type.name)&&l.attrs.id===e)&&((n===null||s<n)&&(n=s),(r===null||s+i.nodeSize>r)&&(r=s+i.nodeSize)),i.marks.find(l=>l.type.name===xa&&(l.attrs.commentId===e||l.attrs.importedId===e))&&((n===null||s<n)&&(n=s),(r===null||s+i.nodeSize>r)&&(r=s+i.nodeSize)),i.type.name==="commentRangeStart"&&i.attrs["w:id"]===e&&(n=s),i.type.name==="commentRangeEnd"&&i.attrs["w:id"]===e&&(r=s)}),n!==null&&r!==null?{from:n,to:r}:null}const blt=({state:t,tr:e,step:n,newTr:r,map:i,user:s,date:o,originalStep:a,originalStepIndex:l})=>{var T,R;const c=t.apply(r).tr;let u=n.to;const d=Math.max(n.from,n.to-1),f=Kat(c.doc,d,Hi);f&&f.to>u&&(u=f.to);const h=k=>{const _=new xi(u,u,k,!1);return c.maybeStep(_).failed?null:{insertedFrom:_.from,insertedTo:_.getMap().map(_.to,1)}},m=h(n.slice)||h(Ut.maxOpen(n.slice.content,!0));if(!m){r.maybeStep(n).failed||i.appendMap(n.getMap());return}const y={},w=qat({tr:c,from:m.insertedFrom,to:m.insertedTo,user:s,date:o}),b=c.doc.slice(m.insertedFrom,m.insertedTo),E=new xi(u,u,b,!1);if(r.maybeStep(E).failed){r.maybeStep(n).failed||i.appendMap(n.getMap());return}const A=a.invert(e.docs[l]).map(i);i.appendMap(A.getMap());const x=i.maps.length-1;if(i.appendMap(E.getMap(),x),m.insertedFrom!==m.insertedTo&&(y.insertedMark=w,y.step=E),r.selection.eq(c.selection)||r.setSelection(c.selection),n.from!==n.to){const{deletionMark:k,deletionMap:_,nodes:N}=Gat({tr:r,from:n.from,to:n.to,user:s,date:o,id:(R=(T=y.insertedMark)==null?void 0:T.attrs)==null?void 0:R.id});y.deletionNodes=N,y.deletionMark=k,i.appendMapping(_)}r.setMeta(Ps,y),r.setMeta(Zi,{type:"force"})},wlt=({state:t,step:e,newTr:n,doc:r,user:i,date:s})=>{const o={};r.nodesBetween(e.from,e.to,(a,l)=>{if(!a.isInline)return;if(a.marks.find(f=>f.type.name===Hi))return!1;const c=a.marks.find(f=>[Hi,Zo].includes(f.type.name)),u=c?c.attrs.id:Ts();if(n.addMark(Math.max(e.from,l),Math.min(e.to,l+a.nodeSize),e.mark),["bold","italic","strike","underline","textStyle"].includes(e.mark.type.name)&&!a.marks.find(f=>f.type===e.mark.type)){const f=a.marks.find(y=>y.type.name===Zo);let h=[],m=[];if(f?f.attrs.before.find(w=>w.type==="textStyle"?w.type===e.mark.type.name&&Tx(w.attrs,e.mark.attrs):w.type===e.mark.type.name)?(m=[...f.attrs.before.filter(w=>w.type!==e.mark.type.name)],h=[...f.attrs.after]):(m=[...f.attrs.before],h=[...f.attrs.after,{type:e.mark.type.name,attrs:{...e.mark.attrs}}]):(m=a.marks.map(y=>({type:y.type.name,attrs:{...y.attrs}})),h=[{type:e.mark.type.name,attrs:{...e.mark.attrs}}]),h.length||m.length){const y=t.schema.marks[Zo].create({id:u,author:i.name,authorEmail:i.email,authorImage:i.image,date:s,before:m,after:h});n.addMark(e.from,e.to,y),o.formatMark=y,o.step=e,n.setMeta(Ps,o),n.setMeta(Zi,{type:"force"})}else f&&n.removeMark(Math.max(e.from,l),Math.min(e.to,l+a.nodeSize),f)}})},vlt=({state:t,step:e,newTr:n,doc:r,user:i,date:s})=>{const o={};r.nodesBetween(e.from,e.to,(a,l)=>{if(!a.isInline)return!0;if(a.marks.find(u=>u.type.name===Hi))return!1;if(n.removeMark(Math.max(e.from,l),Math.min(e.to,l+a.nodeSize),e.mark),["bold","italic","strike","underline","textStyle"].includes(e.mark.type.name)&&a.marks.find(u=>u.type===e.mark.type)){const u=a.marks.find(h=>h.type.name===Zo);let d=[],f=[];if(u?u.attrs.after.find(m=>m.type===e.mark.type.name)?(d=[...u.attrs.after.filter(m=>m.type!==e.mark.type.name)],f=[...u.attrs.before]):(d=[...u.attrs.after],f=[...u.attrs.before,{type:e.mark.type.name,attrs:{...e.mark.attrs}}]):(d=[],f=[{type:e.mark.type.name,attrs:{...e.mark.attrs}}]),d.length||f.length){const h=t.schema.marks[Zo].create({id:Ts(),author:i.name,authorEmail:i.email,authorImage:i.image,date:s,before:f,after:d});n.addMark(Math.max(e.from,l),Math.min(e.to,l+a.nodeSize),h),o.formatMark=h,o.step=e,n.setMeta(Ps,o),n.setMeta(Zi,{type:"force"})}else u&&n.removeMark(Math.max(e.from,l),Math.min(e.to,l+a.nodeSize),u)}})},xlt=({tr:t,state:e,user:n})=>{const r=["inputType","uiEvent","paste","pointer"],i=["historyUndo","historyRedo","acceptReject"],s=t.getMeta("inputType")==="programmatic",o=t.getMeta(vi),a=new Set([...r,vi.key]),l=t.meta&&Object.keys(t.meta).some(h=>!a.has(h));if(o!=null&&o.isChangeOrigin||!t.steps.length||l&&!s||i.includes(t.getMeta("inputType"))||t.getMeta(Zi))return t;const c=e.tr,u=new cd,d=Math.floor(Date.now()/6e5)*6e5,f=new Date(d).toISOString();if(t.steps.forEach((h,m)=>{const y=h.map(u),{doc:w}=c;y&&(y instanceof xi?blt({state:e,tr:t,step:y,newTr:c,map:u,user:n,date:f,originalStep:h,originalStepIndex:m}):y instanceof Kc?wlt({state:e,step:y,newTr:c,doc:w,user:n,date:f}):y instanceof Eo?vlt({state:e,step:y,newTr:c,doc:w,user:n,date:f}):c.step(y))}),t.getMeta("inputType")&&c.setMeta("inputType",t.getMeta("inputType")),t.getMeta("uiEvent")&&c.setMeta("uiEvent",t.getMeta("uiEvent")),t.getMeta("addToHistory")!==void 0&&c.setMeta("addToHistory",t.getMeta("addToHistory")),t.selectionSet){const h=e.schema.marks[Hi],m=pU(e,h,!1);if(t.selection instanceof Vt&&(t.selection.from<e.selection.from||t.getMeta("inputType")==="deleteContentBackward")){const y=u.map(t.selection.from,-1);c.setSelection(new Vt(c.doc.resolve(y)))}else if(t.selection.from>e.selection.from&&m){const y=u.map(m.to+1,1);c.setSelection(new Vt(c.doc.resolve(y)))}else c.setSelection(t.selection.map(c.doc,u))}else if(e.selection.from-t.selection.from>1&&t.selection.$head.depth>1){const h=u.map(t.selection.from-2,-1);c.setSelection(new Vt(c.doc.resolve(h)))}return t.storedMarksSet&&c.setStoredMarks(t.storedMarks),t.scrolledIntoView&&c.scrollIntoView(),c},Elt=t=>{var i;const{state:e}=t,n=typeof((i=t.view)==null?void 0:i.dispatch)=="function"?t.view.dispatch.bind(t.view):t.dispatch.bind(t),{tr:r}=e;if(n)return e.doc.descendants((s,o)=>{if(s.type.name==="paragraph"){const{attrs:a}=s,{spacing:l}=a;if(!l)return;const c={line:sb(pc(l.line)),lineSpaceBefore:sb(pc(l.lineSpaceBefore)),lineSpaceAfter:sb(pc(l.lineSpaceAfter))};r.setNodeMarkup(o,void 0,{...a,spacing:{...l,...c}})}}),n(r),!0},Slt={initial:Elt},dre=t=>{if(t==="initial"||t==="0.4.14")return Object.values(Slt)},PU=(t,e,n)=>{const{type:r}=t.attrs,s={html:Alt,text:Tlt,checkbox:Clt,image:klt,link:Nlt,yesno:Ilt,date:_lt}[r];return s?s(e,n):{}},Alt=t=>({rawHtml:t}),Tlt=t=>({displayLabel:t}),klt=t=>({imageSrc:t}),Clt=t=>({displayLabel:t}),_lt=(t,e)=>({displayLabel:Plt(t,e.input_format)}),Nlt=t=>(t.startsWith("http")||(t=`http://${t}`),{linkUrl:t}),Ilt=t=>({displayLabel:{YES:"Yes",NO:"No"}[t[0].toUpperCase()]}),Rlt=({state:t,tr:e,annotationValues:n})=>{const{doc:r}=t,i=[];return r.descendants((s,o)=>{s.type.name==="table"&&i.push({node:s,pos:o})}),i.reverse().forEach(({pos:s})=>{const o=e.doc.nodeAt(s);if(!(!o||o.type.name!=="table"))try{Mlt({tableNode:{node:o,pos:s},annotationValues:n,tr:e,state:t})}catch(a){console.error("Error generating table at pos",s,":",a)}}),e},Mlt=({tableNode:t,annotationValues:e,tr:n,state:r})=>{const{tableRow:i,tableCell:s,fieldAnnotation:o,paragraph:a}=r.schema.nodes,l=[];t.node.descendants((w,b)=>{w.type===i&&l.push({node:w,pos:b})});let c=null;for(const w of l){let b=!1;if(w.node.descendants(E=>{if(E.type===o){const A=C9(E.attrs.fieldId,e);Array.isArray(A)&&E.attrs.generatorIndex===null&&(b=!0)}}),b){c=w;break}}if(!c)return;const{node:u,pos:d}=c,f=t.pos+1+d;let h=0;if(u.descendants(w=>{if(w.type===o){const b=C9(w.attrs.fieldId,e);Array.isArray(b)&&(h=Math.max(h,b.length))}}),h<=1)return;const m=w=>{const b={};for(const[E,A]of Object.entries(w))A!=null&&(E==="displayLabel"||E==="rawHtml"||E==="linkUrl"||E==="imageSrc"?b[E]=String(A):(typeof A=="string"&&A.length>0||typeof A!="string")&&(b[E]=A));return b},y=(w,b)=>{try{const E=w.content.content.map(A=>{if(A.type!==a)return A;const x=A.content.content.map(T=>{if(T.type!==o)return T;let R=C9(T.attrs.fieldId,e);Array.isArray(R)||(R=[R]);const k=R[b];let _={};try{const M=PU(T,k,null);_=m(M||{})}catch(M){console.error("Error getting field attrs:",M),_={}}const N=m(T.attrs||{}),L={...N,..._,generatorIndex:b};try{return o.create(L,T.content||Nt.empty,T.marks||[])}catch(M){console.error("Error creating field node:",M);try{const C={...N,generatorIndex:b,displayLabel:String(k||"")};return o.create(m(C),T.content||Nt.empty,T.marks||[])}catch(C){return console.error("Fallback also failed:",C),T}}});try{return a.create(m(A.attrs||{}),Nt.from(x),A.marks||[])}catch(T){return console.error("Error creating paragraph node:",T),A}});return s.create(m(w.attrs||{}),Nt.from(E),w.marks||[])}catch(E){throw console.error(`Failed to rebuild cell for row ${b}:`,E),E}};try{const w=[];for(let A=0;A<h;A++){const x=u.content.content.map(R=>y(R,A)),T=i.create(m(u.attrs||{}),Nt.from(x),u.marks||[]);w.push(T)}const b=n.mapping.map(f),E=b+u.nodeSize;n.replaceWith(b,E,Nt.from(w)),n.setMeta("tableGeneration",!0)}catch(w){throw console.error("Error during row generation:",w),w}},C9=(t,e)=>{var n;return((n=e.find(r=>r.input_id===t))==null?void 0:n.input_value)||null},Llt=()=>[],Dlt=()=>{},Olt=({annotationValues:t=[],hiddenFieldIds:e=[],removeEmptyFields:n=!1,schema:r,tr:i})=>{const s=[],o=r.nodes.fieldAnnotation;i.doc.descendants((l,c)=>{l.type===o&&s.push({node:l,pos:c,size:l.nodeSize})});const a=new Set;if(e.length)for(const{node:l,pos:c}of s)e.includes(l.attrs.fieldId)&&a.add(c);for(const{node:l,pos:c}of s){const{type:u,fieldType:d,fieldId:f}=l.attrs;if(a.has(c))continue;let h=null;const m=t.find(y=>y.input_id===f);if(!m){const y=t.filter(w=>w.input_field_type==="CHECKBOXINPUT");e:for(const w of y)for(const b of w.input_options)if(b.itemid===f){h=w.input_link_value[b.itemid]||" ";break e}}if(h=h||(m==null?void 0:m.input_value)||null,!(Array.isArray(h)&&l.attrs.generatorIndex!=null))if((u==="checkbox"||d==="CHECKBOXINPUT")&&(!h||typeof h=="string"&&h.codePointAt(0)===9744)&&(h=" "),!h)a.add(c);else{const y=PU(l,h,m);i=i.setNodeMarkup(c,void 0,{...l.attrs,...y})}}return n&&Array.from(a).sort((l,c)=>c-l).forEach(l=>{const c=s.find(u=>u.pos===l);c&&(i=i.delete(l,l+c.node.nodeSize))}),i},Plt=(t=null,e="")=>{const n=t?new Date(t):new Date;return isNaN(n.getTime())?t:e?dateFormat(n,e):n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})},_9={getFieldAttrs:PU,processTables:Rlt,annotateDocument:Olt,annotateHeadersAndFooters:Dlt,getAllHeaderFooterEditors:Llt},zx=async(t,e)=>{var n;try{if(e=e||((n=t==null?void 0:t.options)==null?void 0:n.ydoc),!e||!t||t.isDestroyed)return;const r=e.getMap("meta"),i=r.get("docx");let s=[];Array.isArray(i)?s=[...i]:i&&typeof i.toArray=="function"?s=i.toArray():i&&typeof i[Symbol.iterator]=="function"&&(s=Array.from(i)),!s.length&&Array.isArray(t.options.content)&&(s=[...t.options.content]);const o=await t.exportDocx({getUpdatedDocs:!0});if(!o||typeof o!="object")return;let a=!1;Object.keys(o).forEach(l=>{const c=s.findIndex(d=>d.name===l);(c>-1?s[c].content:null)!==o[l]&&(a=!0,c>-1&&s.splice(c,1),s.push({name:l,content:o[l]}))}),(a||!i)&&e.transact(()=>{r.set("docx",s)},{event:"docx-update",user:t.options.user})}catch(r){console.warn("[collaboration] Failed to update Ydoc docx data",r)}};let DI=!1;const Flt=()=>DI,Blt=(t,e,n,r)=>{var l,c;if(DI)return;const i=(l=t==null?void 0:t.options)==null?void 0:l.ydoc;if(!i)return;const s=i.getMap("headerFooterJson"),o=`${e}:${n}`,a=(c=s.get(o))==null?void 0:c.content;a&&JSON.stringify(a)===JSON.stringify(r)||i.transact(()=>s.set(o,{type:e,sectionId:n,content:r}),{event:"header-footer-update",user:t.options.user})},jlt=(t,e,n)=>{if(!t||t.isDestroyed||!t.converter)return;const{type:r,sectionId:i,content:s}=n;if(!(!r||!i||!s)){DI=!0;try{const o=t.converter[`${r}s`];o&&(o[i]=s),t.converter.headerFooterModified=!0;const a=t.converter[`${r}Editors`];a==null||a.forEach(l=>{l.id===i&&l.editor&&l.editor.replaceContent(s)}),t.emit("remoteHeaderFooterChanged",{type:r,sectionId:i,content:s})}finally{setTimeout(()=>{DI=!1},0)}}};new ni("collaboration");const $lt=hi.create({name:"collaboration",priority:1e3,addOptions(){return{ydoc:null,field:"supereditor",fragment:null,isReady:!1}},addPmPlugins(){if(!this.editor.options.ydoc)return[];this.options.ydoc=this.editor.options.ydoc,Wlt(this.options.ydoc,this.editor,this),Vlt({ydoc:this.options.ydoc,editor:this.editor});const[t,e]=zlt(this.options.ydoc,this.editor);this.options.fragment=e;const n=this.options.ydoc.getMap("media");n.observe(i=>{i.changes.keys.forEach((s,o)=>{if(!(o in this.editor.storage.image.media)){const a=n.get(o);this.editor.storage.image.media[o]=a}})});const r=this.options.ydoc.getMap("headerFooterJson");return r.observe(i=>{i.transaction.local||i.changes.keys.forEach((s,o)=>{if(s.action==="add"||s.action==="update"){const a=r.get(o);a&&jlt(this.editor,o,a)}})}),[t]},addCommands(){return{addImageToCollaboration:({mediaPath:t,fileData:e})=>()=>!this.options.ydoc||!t||!e?!1:(this.options.ydoc.getMap("media").set(t,e),!0)}}}),zlt=(t,e)=>{const n=t.getXmlFragment("supereditor");return[Nst(n,{onFirstRender:()=>{e.options.isNewFile&&c1e(t,e)}}),n]},c1e=(t,e)=>{const n=t.getMap("meta");n.set("docx",e.options.content),n.set("fonts",e.options.fonts);const r=t.getMap("media");Object.entries(e.options.mediaFiles).forEach(([i,s])=>{r.set(i,s)})},Hlt=t=>{if(!t.changed)return!1;for(const[,e]of t.changed.entries())if(e instanceof Set&&e.has("docx"))return!0;return!1},Vlt=({ydoc:t,editor:e})=>{const n=Ult(r=>{zx(r)},1e3);t.on("afterTransaction",r=>{var o;const{local:i}=r;!Hlt(r)&&((o=r.changed)!=null&&o.size)&&i&&n(e)})},Ult=(t,e)=>{let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t.apply(void 0,r),e)}},Wlt=(t,e,n)=>{const r=e.options.collaborationProvider;if(!r)return;const i=()=>{n.options.isReady=!0,r.off("synced",i),e.emit("collaborationReady",{editor:e,ydoc:t})};if(r.synced){setTimeout(()=>{i()},250);return}r.on("synced",i)},qlt=async t=>{const e=Ust(t.state.doc,"supereditor");return c1e(e,t),await zx(t,e),tU(e)},fre=Ve(!1);function k0(){return{isHighContrastMode:fre,setHighContrastMode:e=>{fre.value=e}}}const Glt=(t,e)=>{const{doc:n}=t.state,r=n.nodeAt(e);if(r&&r.type.name==="image"){const i=t.state.tr.setSelection(ln.create(n,e));return t.dispatch(i),!0}return!1};function Klt(t,e="sans-serif"){const n=(i,s)=>{const a=document.createElement("canvas").getContext("2d");a.textBaseline="top";const l="abcdefghijklmnopqrstuvwxyz0123456789";a.font=`72px ${s}`;const c=a.measureText(l),u=c.width,d=c.actualBoundingBoxDescent;a.font=`72px "${i}", ${s}`;const f=a.measureText(l),h=f.width,m=f.actualBoundingBoxDescent;return h!==u||m!==d};return n(t,e)?!0:n(t,e==="sans-serif"?"serif":"sans-serif")}const{findChildren:Xlt}=gC;function up(t){return Xlt(t.doc,n=>n.type.name==="fieldAnnotation")}const{findChildren:Ylt}=gC;function Wv(t,e){return Ylt(e.doc,r=>{let i=r.type.name==="fieldAnnotation";return Array.isArray(t)?i&&t.includes(r.attrs.fieldId):i&&r.attrs.fieldId===t})}function lv(t,e,n){let r=[];return n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||i.type.name==="fieldAnnotation"&&r.push({node:i,pos:s})}),r}function Zlt(t){let e=[];return!t.steps.length||t.meta&&!Object.keys(t.meta).every(r=>["inputType","uiEvent","paste"].includes(r))||["historyUndo","historyRedo"].includes(t.getMeta("inputType"))||["drop"].includes(t.getMeta("uiEvent"))||t.getMeta("fieldAnnotationUpdate")===!0||t.getMeta("tableGeneration")===!0||!Jlt(t)||t.steps.forEach((r,i)=>{if(r instanceof xi&&r.from!==r.to){let s=t.mapping.maps[i];t.before.nodesBetween(r.from,r.to,(a,l)=>{a.type.name==="fieldAnnotation"&&s.mapResult(l).deleted&&e.push({node:a,pos:l})})}}),e}function Jlt(t){return t.steps.some(e=>e instanceof xi||e instanceof ReplaceAroundStep?e.from!==e.to:!1)}function Qlt(t,e){let n=[];try{n=Zlt(e)}catch{}n.length>0&&setTimeout(()=>{t.emit("fieldAnnotationDeleted",{editor:t,removedNodes:n})},0)}const{findChildren:F9t}=gC,ect=t=>{var c;const e=[];if(!t.converter.numbering)return e;const{state:r}=t,{doc:i}=r,s=typeof((c=t.view)==null?void 0:c.dispatch)=="function"?t.view.dispatch.bind(t.view):t.dispatch.bind(t),o=["orderedList","bulletList"];let a=0;i.descendants((u,d)=>{if(!o.includes(u.type.name)||d<a)return;const f=o6(u,t,0);f.length>0&&e.push({from:d,to:d+u.nodeSize,listNode:u,replacement:f}),a=d+u.nodeSize});let l=r.tr;if(e.length>0)for(let u=e.length-1;u>=0;u--){const{from:d,to:f,replacement:h,listNode:m}=e[u],y=[];for(const w of h)if(w.node.type.name==="listItem"){const b=m.type.create(m.attrs,[w.node]);y.push(b)}else y.push(w.node);l=l.replaceWith(d,f,y)}return l.setMeta("listsv2migration",e),t.options.migrated=!0,s(l),e};function o6(t,e,n=0,r=null){var d,f;const i=[],s=["orderedList","bulletList"],o=t.type.name,a=tct(t),l=nct(t,e);if(!a)return l?i:rct(t,e);let c=parseInt((d=t.attrs)==null?void 0:d.listId);(!c||Number.isNaN(c))&&(c=Zr.getNewListId(e)),(!Zr.getListDefinitionDetails({numId:c,level:n,editor:e})||!r&&!c)&&(c=Zr.getNewListId(e),Zr.generateNewListDefinition({numId:c,listType:o,editor:e})),r||(r=c);for(const h of t.content.content)if(!((f=h.content.content)!=null&&f.length))i.push({node:h,baseLevel:n});else if(h.content.content.length===1){const m=h.content.content[0];if(s.includes(m.type.name)){const y=o6(m,e,n+1,r);i.push(...y)}else{const y=Zr.createSchemaOrderedListNode({level:n,numId:r,listType:t.type.name,editor:e,contentNode:m.toJSON(),listLevel:h.attrs.listLevel||[1]});i.push({node:y,baseLevel:n})}}else{const m=h.content.content[0];if(s.includes(m.type.name)){const y=o6(m,e,n+1,r);i.push(...y)}else if(m.type.name==="paragraph"||m.isTextblock){const y=Zr.createSchemaOrderedListNode({level:n,numId:r,listType:t.type.name,editor:e,contentNode:m.toJSON(),listLevel:h.attrs.listLevel||[1]});i.push({node:y,baseLevel:n})}else i.push({node:m});for(let y of h.content.content.slice(1))if(s.includes(y.type.name)){const w=o6(y,e,n+1,r);i.push(...w)}else i.push({node:y})}return i}const tct=t=>{var r,i;const e=t.content;if(((r=e==null?void 0:e.content)==null?void 0:r.length)>1)return!0;const n=e.firstChild;if(n&&n.type.name==="listItem"){const{attrs:s}=n,{level:o,listNumberingType:a}=s||{};return typeof o>"u"||!a?!0:((i=n==null?void 0:n.content)==null?void 0:i.content).filter(u=>["bulletList","orderedList"].includes(u.type.name)).length>0}return!1},nct=(t,e)=>{const n=t.type.name,r=t.content.firstChild,{attrs:i}=r,{numId:s,level:o}=i||{},a=Zr.getListDefinitionDetails({numId:s,level:o,listType:n,editor:e}),{abstract:l}=a||{};return!!l},rct=(t,e)=>{const n=t.type.name,r=t.content.firstChild,{attrs:i}=r,{numId:s}=i||{};return Zr.generateNewListDefinition({numId:s,listType:n,editor:e})},ict=async(t=[],e)=>{var i,s;const n=up(e.state),r=[];if(!n.length)return t;for(const o of n){const a=(s=(i=o.node)==null?void 0:i.attrs)==null?void 0:s.type,l=t.find(u=>u.input_id===o.node.attrs.fieldId);if(l&&(!a||a!=="html")){r.push(l);continue}const c=l==null?void 0:l.input_value;c&&await new Promise((u,d)=>{const f=document.createElement("div");e.createChildEditor({element:f,html:c,onCreate:({editor:h})=>{const{migrated:m}=h.options;if(m){const y=h.getHTML();l.input_value=y,r.push(l)}u()},onError:h=>{d(h)}})})}return r},sct=(t,e={})=>t.options.isChildEditor?null:new zf({...t.options,pagination:!1,suppressDefaultDocxStyles:!0,ydoc:null,collaborationProvider:null,fileSource:null,initialState:null,documentId:null,isCommentsEnabled:!1,isNewFile:!1,fragment:!1,onCreate:()=>null,onListDefinitionsChange:oct,...e,isChildEditor:!0,parentEditor:t}),oct=t=>{const{editor:e,numbering:n}=t,{parentEditor:r={}}=e.options,{converter:i}=r;if(!i)return;i.numbering=n;const{tr:s}=r.state;s.setMeta("updatedListItemNodeViews",!0),r.dispatch(s)};function u1e(t,e=[]){const n="[SuperValidator]",r="color: teal; font-weight: bold;",i=[n,...e.map(a=>`[${a}]`)],s=i.map(()=>"%c%s").join(" "),o=i.map(a=>[r,a]).flat();return{debug:(...a)=>{t&&console.debug(s,...o,...a)},withPrefix:a=>u1e(t,[...e,a])}}function act(t,e,n,r){let i=!1;const s=[];return t.forEach(({node:o,pos:a})=>{const{rId:l,src:c}=o.attrs;if(!l&&c){let u=e.converter.docxHelpers.findRelationshipIdFromTarget(c,e);u&&r.debug("Reusing existing rId for image:",u,"at pos:",a),u||(u=e.converter.docxHelpers.insertNewRelationship(c,"image",e),r.debug("Creating new rId for image at pos:",a,"with src:",c)),n.setNodeMarkup(a,void 0,{...o.attrs,rId:u}),s.push(`Added missing rId to image at pos ${a}`),i=!0}}),{modified:i,results:s}}function lct({editor:t,logger:e}){const n=(r,i)=>{const s=i.image||[],o=[act(s,t,r,e)],a=o.some(c=>c.modified),l=o.flatMap(c=>c.results);return{modified:a,results:l}};return n.requiredElements={nodes:["image"]},n}function cct(t,e,n,r){let i=!1;const s=[];return t.forEach(({mark:o,from:a,to:l})=>{const{rId:c,href:u,anchor:d}=o.attrs;if(!c&&u&&!d){let f=e.converter.docxHelpers.findRelationshipIdFromTarget(u,e);if(f&&r.debug("Reusing existing rId for link:",f,"from pos:",a,"to pos:",l),f||(f=e.converter.docxHelpers.insertNewRelationship(u,"hyperlink",e),r.debug("Creating new rId for link from pos:",a,"to pos:",l,"with href:",u)),f){const h=e.schema.marks.link,m=h.create({...o.attrs,rId:f});n.removeMark(a,l,h),n.addMark(a,l,m),s.push(`Added missing rId to link from pos ${a} to ${l}`),i=!0}}}),{modified:i,results:s}}function uct({editor:t,logger:e}){const n=(r,i)=>{const s=i.link||[],o=[cct(s,t,r,e)],a=o.some(c=>c.modified),l=o.flatMap(c=>c.results);return{modified:a,results:l}};return n.requiredElements={marks:["link"]},n}const dct={imageNodeValidator:lct,linkMarkValidator:uct};function fct({editor:t,logger:e}){return()=>{var c,u,d,f;const n=[];let r=!1;const i=(c=t==null?void 0:t.converter)==null?void 0:c.convertedXml,s="word/numbering.xml",o=i==null?void 0:i[s];if(!o||!((u=o.elements)!=null&&u.length)||!((d=o.elements[0].elements)!=null&&d.length))return n.push(`${s} is not a valid xml`),{results:n,modified:r};const a=[];let l=o.elements[0];return d1e(l,a),a.length?(r=!0,n.push("Removed invalid <w:num> by numId:"+a.join(", ")),(f=e==null?void 0:e.debug)==null||f.call(e,`Removed invalid <w:num> by numId: ${a.join(", ")}`)):n.push("No <w:num> entries with null/invalid numId found."),{results:n,modified:r}}}function d1e(t,e){if(!t||!Array.isArray(t.elements))return;const n=[];for(const r of t.elements){if((r==null?void 0:r.type)==="element"){if(r.name==="w:num"){const s=(r.attributes||{})["w:numId"],o=s==null?null:String(s).trim();if(o==null||o===""||/^null$/i.test(o)||!/^\d+$/.test(o)){e.push(o??"missing node");continue}}Array.isArray(r.elements)&&r.elements.length&&d1e(r,e)}n.push(r)}t.elements=n}function hct({editor:t,logger:e}){return()=>{var w;const n=[];let r=!1;const i=(w=t==null?void 0:t.converter)==null?void 0:w.convertedXml;if(!i||typeof i!="object")return{results:n,modified:r};const{relsKey:s,wasNormalized:o}=pct(i,n);if(!s)return{results:n,modified:r};o&&(r=!0);const{root:a,wasFixed:l}=mct(i[s],s,n);if(!a)return{results:n,modified:r};l&&(r=!0),gct(a)&&(r=!0);const{filteredIds:u,binMediaTargets:d,wasProcessed:f}=yct(a,i,n);f&&(r=!0),bct(i,u,n,e)&&(r=!0);const y=i["[Content_Types].xml"];return d.size>0||y?wct(i,d,n)&&(r=!0):n.push("[Content_Types].xml not found or not parseable. Skipped content types patch."),{results:n,modified:r}}}function pct(t,e){const r=["word/_rels/document.xml.rels","word/document.xml.rels","_rels/document.xml.rels","document.xml.rels"].find(s=>{var o;return(o=t==null?void 0:t[s])==null?void 0:o.elements});if(!r)return{relsKey:null,wasNormalized:!1};const i="word/_rels/document.xml.rels";return r!==i?(t[i]=t[r],delete t[r],e.push(`Normalized relationships location to ${i} (was ${r})`),{relsKey:i,wasNormalized:!0}):{relsKey:r,wasNormalized:!1}}function mct(t,e,n){var o;const r=(o=t==null?void 0:t.elements)==null?void 0:o[0];if(!r||r.type!=="element")return n.push(`${e} is not a valid xml`),{root:null,wasFixed:!1};const i="http://schemas.openxmlformats.org/package/2006/relationships";let s=!1;return r.name!=="Relationships"&&(r.name="Relationships",n.push('Fixed relationships root element name to "Relationships"'),s=!0),r.attributes=r.attributes||{},r.attributes.xmlns!==i&&(r.attributes.xmlns=i,n.push(`Set relationships xmlns to ${i}`),s=!0),{root:r,wasFixed:s}}function gct(t){var n,r;const e=((n=t.elements)==null?void 0:n.filter(i=>(i==null?void 0:i.type)==="element"&&i.name==="Relationship"))||[];return((r=t.elements)==null?void 0:r.length)!==e.length?(t.elements=e,!0):!1}function yct(t,e,n){var E;const r=new Set,i=new Set;let s=!1;const o=A=>{const x=/^rId(\d+)$/.exec(String(A||""));return x?parseInt(x[1],10):null},a=(A,x)=>typeof A=="string"&&new RegExp(`/relationships/${x}$`,"i").test(A),l=A=>a(A,"hyperlink"),c=A=>a(A,"image"),u=A=>/^https?:\/\//i.test(A||"")||/^mailto:/i.test(A||""),d=new Set;let f=0;for(const A of t.elements){A.attributes=A.attributes||{};const x=A.attributes.Id,T=o(x);Number.isInteger(T)&&(f=Math.max(f,T)),typeof x=="string"&&x&&d.add(x)}let h=f;const m=A=>{let x;do h+=1,x=`rId${h}`;while(d.has(x));return d.add(x),x},y=new Set,w=[];function b(A,x){return typeof A[x]=="string"?A[x].trim():""}for(const A of t.elements){A.attributes=A.attributes||{};const x=A.attributes;let T=b(x,"Id");const R=b(x,"Type");let k=b(x,"Target"),_=b(x,"TargetMode");if(!k){n.push(`Removed relationship "${T}" without Target`),s=!0;continue}if(l(R)&&u(k)&&_.toLowerCase()!=="external"&&(x.TargetMode="External",_="External",n.push(`Set TargetMode="External" for hyperlink ${T}`),s=!0),c(R)){const N=`word/${k.replace(/^\.?\//,"")}`;/^media\/.+\.bin$/i.test(k)&&N in e&&r.add(`/${N}`)}if(_.toLowerCase()!=="external"&&!u(k)){let N;if(k.startsWith("../")?N=k.replace(/^\.\.\//,""):N=`word/${k.replace(/^\.?\//,"")}`,!(N in e))if(c(R))n.push(`Warning: image relationship ${T} target not found: ${k}.`);else{n.push(`Removed relationship ${T} with missing target: ${k}`),s=!0;continue}}if(!T){const N=m();x.Id=N,n.push(`Assigned missing Id "${N}"`),s=!0,T=N}if(y.has(T)){n.push(`Removed duplicate relationship with ID "${T}"`),s=!0;continue}y.add(T),w.push(A)}(t.elements.length!==w.length||t.elements.some((x,T)=>x!==w[T]))&&(t.elements=w,s=!0);for(const A of t.elements){const x=(E=A.attributes)==null?void 0:E.Id;typeof x=="string"&&x&&i.add(x)}return{filteredIds:i,binMediaTargets:r,wasProcessed:s}}function bct(t,e,n,r){var o,a;const s=t["word/document.xml"];if((o=s==null?void 0:s.elements)!=null&&o.length){const l=s.elements[0];if((l==null?void 0:l.type)==="element"){const c=[];if(f1e(l,e,c),c.length)return n.push(`Fixed ${c.length} missing relationship references`),(a=r==null?void 0:r.debug)==null||a.call(r,`Fixed ${c.length} missing relationship references in document`),!0}}return!1}function wct(t,e,n){var s;const r="[Content_Types].xml",i=t[r];return typeof i=="string"?vct(i,e,n,t,r):(s=i==null?void 0:i.elements)!=null&&s.length?xct(i,e,n):!1}function vct(t,e,n,r,i){const s='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">',o=(c,u,d)=>new RegExp(`<Default\\s+Extension="${u}"\\b`,"i").test(c)?c:c.replace(s,`${s}<Default Extension="${u}" ContentType="${d}"/>`),a=(c,u,d)=>{const f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`<Override\\s+PartName="${f}"\\b`,"i").test(c)?c:c.replace(s,`${s}<Override PartName="${u}" ContentType="${d}" />`)};let l=t;l=o(l,"rels","application/vnd.openxmlformats-package.relationships+xml"),l=o(l,"xml","application/xml");for(const c of e)l=a(l,c,"image/png"),n.push(`Added Content Types Override for "${c}" as image/png`);return l!==t?(r[i]=l,!0):!1}function xct(t,e,n){const r=t.elements.find(c=>c.name==="Types")||t.elements[0];r.elements=r.elements||[];const i=c=>r.elements.some(u=>{var d;return u.name==="Default"&&((d=u.attributes)==null?void 0:d.Extension)===c}),s=(c,u)=>{r.elements.unshift({type:"element",name:"Default",attributes:{Extension:c,ContentType:u}})},o=c=>r.elements.some(u=>{var d;return u.name==="Override"&&((d=u.attributes)==null?void 0:d.PartName)===c}),a=(c,u)=>{r.elements.unshift({type:"element",name:"Override",attributes:{PartName:c,ContentType:u}})};let l=!1;i("rels")||(s("rels","application/vnd.openxmlformats-package.relationships+xml"),l=!0),i("xml")||(s("xml","application/xml"),l=!0);for(const c of e)o(c)||(a(c,"image/png"),n.push(`Added Content Types Override for "${c}" as image/png`),l=!0);return l}function f1e(t,e,n){var r,i;if((r=t==null?void 0:t.elements)!=null&&r.length)for(const s of t.elements){if((s==null?void 0:s.type)!=="element")continue;const o=(i=s.attributes)==null?void 0:i["r:id"];typeof o=="string"&&!e.has(o)&&(delete s.attributes["r:id"],n.push(`Removed invalid r:id="${o}"`)),f1e(s,e,n)}}const Ect={numberingValidator:fct,relationshipsValidator:hct};var Ru,ZT,JT,B1,j1,gd,h1e,p1e,m1e,eB;class hre{constructor(e){st(this,gd);st(this,Ru);st(this,ZT);st(this,JT);st(this,B1);st(this,j1);je(this,Ru,e.editor),this.dryRun=e.dryRun||!1,this.debug=e.debug||!1,this.logger=u1e(this.debug);const{stateValidators:n,xmlValidators:r,nodeTypes:i,markTypes:s}=pe(this,gd,h1e).call(this);je(this,ZT,n),je(this,JT,r),je(this,B1,i),je(this,j1,s)}validateActiveDocument(){const e=F(this,Ru).state;if(!e)return{modified:!1,results:[]};const{tr:n}=e,r=pe(this,gd,m1e).call(this);this.logger.debug("Document analysis:",r);let i=!1;const s=[];return Object.entries(F(this,ZT)).forEach(([o,a])=>{this.logger.debug(` Validating with ${o}...`);const{results:l,modified:c}=a(n,r);s.push({key:o,results:l}),i=i||c}),this.dryRun?this.logger.debug("DRY RUN: No changes applied to the document."):pe(this,gd,eB).call(this,n),this.logger.debug("Results:",s),{modified:i,results:s}}validateDocumentExport(){const e=F(this,Ru).state;if(!e)return{modified:!1,results:[]};const{tr:n}=e;let r=!1;const i=[];return Object.entries(F(this,JT)).forEach(([s,o])=>{this.logger.debug(` Validating export with ${s}...`);const{results:a,modified:l}=o();i.push({key:s,results:a}),r=r||l}),!this.dryRun&&r?pe(this,gd,eB).call(this,n):this.logger.debug("DRY RUN: No export changes applied to the document."),this.logger.debug("Export validation results:",i),{modified:r,results:i}}}Ru=new WeakMap,ZT=new WeakMap,JT=new WeakMap,B1=new WeakMap,j1=new WeakMap,gd=new WeakSet,h1e=function(){const e=new Set,n=new Set,r=o=>Object.fromEntries(Object.entries(o).map(([a,l])=>{const c=this.logger.withPrefix(a),u=l({editor:F(this,Ru),logger:c});return pe(this,gd,p1e).call(this,u,e,n),[a,u]})),i=r(dct),s=r(Ect);return{stateValidators:i,xmlValidators:s,nodeTypes:e,markTypes:n}},p1e=function(e,n,r){e.requiredElements&&typeof e.requiredElements=="object"&&(e.requiredElements.nodes&&e.requiredElements.nodes.forEach(i=>{n.add(i)}),e.requiredElements.marks&&e.requiredElements.marks.forEach(i=>{r.add(i)}))},m1e=function(){const{doc:e}=F(this,Ru).state,n={};F(this,B1).forEach(i=>n[i]=[]),F(this,j1).forEach(i=>n[i]=[]);const r=(i,s)=>{F(this,B1).has(i.type.name)&&n[i.type.name].push({node:i,pos:s}),i.isText&&i.marks&&i.marks.forEach(o=>{F(this,j1).has(o.type.name)&&n[o.type.name].push({mark:o,node:i,pos:s,from:s,to:s+i.nodeSize})})};return e.descendants(r),n},eB=function(e){var n,r,i,s;if(typeof((n=F(this,Ru))==null?void 0:n.dispatch)=="function"){F(this,Ru).dispatch(e);return}(s=(i=(r=F(this,Ru))==null?void 0:r.view)==null?void 0:i.dispatch)==null||s.call(i,e)};const gw=t=>{var e;return((e=t==null?void 0:t.options)==null?void 0:e.isHeadless)??!1},Sct=t=>gw(t);let N5=null;const qv=()=>{if(N5!==null)return N5;try{const t=typeof globalThis<"u"&&typeof globalThis.window<"u"&&typeof globalThis.document<"u"&&typeof globalThis.document.createElement=="function";return N5=t,t}catch{return N5=!1,!1}},Act="1.4.0",Tct=["group","content","marks","inline","atom","defining","code","tableRole","summary"],kct=["group","inclusive","excludes","spanning","code"];function pre(t){return t?Object.fromEntries(Object.entries(t).map(([e,n])=>{const r=n==null?void 0:n.default;return[e,{default:r??null,required:r===void 0}]})):{}}function mre(t,e){return Object.fromEntries(e.map(n=>[n,t[n]]).filter(([,n])=>n!==void 0))}function Cct(t,e){var s;if(!t||typeof t!="object")throw new Error("Invalid schema: schema must be a valid ProseMirror Schema object.");const n=e||"current",r=[];t.spec.nodes.forEach((o,a)=>{r.push({name:o,attrs:pre(a.attrs),...mre(a,Tct)})});const i=[];return t.spec.marks.forEach((o,a)=>{i.push({name:o,attrs:pre(a.attrs),...mre(a,kct)})}),{version:Act,schemaVersion:n,topNode:(s=t.topNodeType)==null?void 0:s.name,nodes:r,marks:i}}const _ct=t=>{const e=document.createElement("div");e.innerHTML=t;const n=[],r=[],i=s=>{for(;r.length&&r[r.length-1].level>=s;){const o=r.pop();r.length?r[r.length-1].el.appendChild(o.el):n.push(o.el.outerHTML)}};return Array.from(e.childNodes).forEach(s=>{if(s.nodeType!==Node.ELEMENT_NODE){n.push(s.outerHTML||s.textContent);return}if(s.tagName.toLowerCase()==="ol"||s.tagName.toLowerCase()==="ul"){const o=Ict(s),a=Rct(o),l=o.getAttribute("data-num-fmt"),c=o.getAttribute("data-lvl-text"),u=s.tagName.toLowerCase(),d=o.cloneNode(!0);if(d.setAttribute("aria-level",a+1),d.style["list-style-type"]=Nct(l,c),!r.length||r[r.length-1].level<a){const f=document.createElement(u);r.push({tag:u,level:a,el:f})}else if(r[r.length-1].level>a)i(a+1);else if(r[r.length-1].tag!==u){i(a);const f=document.createElement(u);r.push({tag:u,level:a,el:f})}r[r.length-1].el.appendChild(d)}else i(0),n.push(s.outerHTML)}),i(0),n.join("")},Nct=(t,e)=>{const n=new Map([["","disc"],["","circle"],["","square"]]);if(t==="bullet")return n.get(e)||"disc";const r=new Map([["decimal","decimal"],["lowerLetter","lower-alpha"],["upperLetter","upper-alpha"],["lowerRoman","lower-roman"],["upperRoman","upper-roman"]]);return e.startsWith("0")?"decimal-leading-zero":r.get(t)};function Ict(t){return Array.from(t.childNodes).find(e=>e.nodeType===Node.ELEMENT_NODE)||null}const Rct=t=>{const e=t.getAttribute("data-level");return e?parseInt(e,10):0},Mct="sd-editor-scoped",dM=t=>{!t||!t.classList||t.classList.add(Mct)},Lct=1,Dct=10,Oct=150,Pct=1.2;class gre{constructor(){this.view=null,this.eventListenerCleanups=[],this.resizeTimeoutId=null}attach({element:e,state:n,editorProps:r={},dispatchTransaction:i,handleClick:s}){var a;(a=this.view)==null||a.destroy();const o=r&&typeof r=="object"?r:{};return this.view=new vve(e,{...o,dispatchTransaction:i,state:n,handleClick:s}),this.view}destroy(){var e;this.resizeTimeoutId!==null&&(clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=null);for(const n of this.eventListenerCleanups)n();this.eventListenerCleanups=[],(e=this.view)==null||e.destroy(),this.view=null}initContainerElement(e){if(!qv()){e.isHeadless=!0,e.element=null;return}if(!e.element&&e.selector){const{selector:n}=e;let r=null;if(n.startsWith("#")||n.startsWith(".")){const s=document.querySelector(n);r=s instanceof HTMLElement?s:null}else r=document.getElementById(n);e.element=r,["text","html"].includes(e.mode)&&e.element&&e.element.classList.add("sd-super-editor-html")}if(e.isHeadless){e.element=null;return}e.element=e.element||document.createElement("div"),dM(e.element)}initFonts(e){var r;const n=e.converter.getFontFaceImportString();if((r=n==null?void 0:n.styleString)!=null&&r.length)try{const i=document.createElement("style");i.textContent=n.styleString,document.head.appendChild(i),e.fontsImported=n.fontsImported}catch(i){console.warn("Failed to inject fonts into DOM:",i)}}updateEditorStyles(e,n,r){const{pageSize:i,pageMargins:s}=e.converter.pageStyles??{};if(!r||!n)return;r.setAttribute("role","document"),r.setAttribute("aria-multiline","true"),r.setAttribute("aria-label","Main content area, start typing to enter text."),r.setAttribute("aria-description",""),r.classList.remove("view-mode"),i&&(n.style.width=i.width+"in",n.style.minWidth=i.width+"in",n.style.minHeight=i.height+"in"),s&&(n.style.paddingLeft=s.left+"in",n.style.paddingRight=s.right+"in"),n.style.boxSizing="border-box",n.style.isolation="isolate",r.style.outline="none",r.style.border="none",n.style.backgroundColor="#fff",r.style.backgroundColor="#fff";const{typeface:o,fontSizePt:a,fontFamilyCss:l}=e.converter.getDocumentDefaultStyles()??{},c=l||o;c&&(n.style.fontFamily=c),a&&(n.style.fontSize=`${a}pt`),n.style.transformOrigin="top left",n.style.touchAction="auto";const u=n.style;("webkitOverflowScrolling"in n.style||typeof u=="object")&&(u.webkitOverflowScrolling="touch"),r.style.lineHeight=String(Pct),e.presentationEditor&&(s==null?void 0:s.top)!=null?r.style.paddingTop=`${s.top}in`:e.presentationEditor?r.style.paddingTop=`${Lct}in`:r.style.paddingTop="0",r.style.paddingBottom="0"}initDefaultStyles(e,n=e.element){if(e.options.isHeadless||e.options.suppressDefaultDocxStyles||!n)return;const r=n.querySelector(".ProseMirror"),i=r instanceof HTMLElement?r:null;i&&(this.updateEditorStyles(e,n,i),this.initMobileStyles(e,n))}initMobileStyles(e,n){if(!n)return;const r=n.offsetWidth,i=()=>{const o=r,a=document.documentElement.clientWidth-Dct;e.options.scale=Math.min(1,a/o);const l=n.closest(".super-editor"),c=n.closest(".super-editor-container");!(l instanceof HTMLElement)||!(c instanceof HTMLElement)||(e.options.scale<1?(l.style.maxWidth=`${o*e.options.scale}px`,c.style.minWidth="0px",n.style.transform=`scale(${e.options.scale})`):(l.style.maxWidth="",c.style.minWidth="",n.style.transform="none"))};i();const s=()=>{this.resizeTimeoutId!==null&&clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=setTimeout(()=>{i(),this.resizeTimeoutId=null},Oct)};if("orientation"in screen&&"addEventListener"in screen.orientation)screen.orientation.addEventListener("change",s),this.eventListenerCleanups.push(()=>{screen.orientation.removeEventListener("change",s)});else{const o=typeof window.matchMedia=="function"?window.matchMedia("(orientation: portrait)"):null;o!=null&&o.addEventListener&&(o.addEventListener("change",s),this.eventListenerCleanups.push(()=>{o.removeEventListener("change",s)}))}window.addEventListener("resize",s),this.eventListenerCleanups.push(()=>{window.removeEventListener("resize",s)})}registerCopyHandler(e){var i;const n=(i=this.view)==null?void 0:i.dom;if(!n||!qv())return;const r=s=>{try{const o=s.clipboardData;if(!o||(s.preventDefault(),!this.view))return;const{from:a,to:l}=this.view.state.selection,u=this.view.state.doc.slice(a,l).content,d=document.createElement("div"),f=Kf.fromSchema(this.view.state.schema);d.appendChild(f.serializeFragment(u));const h=_ct(d.innerHTML);o.setData("text/html",h)}catch(o){console.warn("Failed to transform copied content:",o)}};n.addEventListener("copy",r),this.eventListenerCleanups.push(()=>{n.removeEventListener("copy",r)})}initDevTools(e){if(!e.options.isHeaderOrFooter&&(_e.env.NODE_ENV==="development"||e.options.isDebug))try{window.superdocdev={converter:e.converter,editor:e}}catch(n){console.warn("Failed to initialize developer tools:",n)}}}var Zm,jo,$1,eo,Fa,Et,a6,l6,c6,u6,Mv,d6,g1e,y1e,b1e,w1e,v1e,tB,f6,x1e,nB,h6,rB,p6,m6,Lv,cS,iB,sB,E1e,g6,y6,uS,b6,S1e,oB,Dv,qd,A1e,aB,lB,T1e,cB,k1e,C1e,uB;const Dh=class Dh extends cM{constructor(n){super();st(this,Et);st(this,Zm);st(this,jo);st(this,$1);st(this,eo);st(this,Fa);this.extensionStorage={},je(this,jo,null),je(this,$1,!1),je(this,eo,"initialized"),je(this,Fa,null),this.presentationEditor=null,this.isFocused=!1,this.fontsImported=[],this.options={element:null,selector:null,isHeadless:!1,document:null,mockDocument:null,mockWindow:null,content:"",user:null,users:[],media:{},mediaFiles:{},fonts:{},documentMode:"editing",mode:"docx",role:"editor",colors:[],converter:null,fileSource:null,initialState:null,documentId:null,extensions:[],editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,isCommentsEnabled:!1,isNewFile:!1,scale:1,annotations:!1,isInternal:!1,externalExtensions:[],isChildEditor:!1,numbering:{},isHeaderOrFooter:!1,lastSelection:null,suppressDefaultDocxStyles:!1,jsonOverride:null,loadFromSchema:!1,fragment:null,skipViewCreation:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:d})=>{throw d},onTrackedChangesUpdate:()=>null,onCommentsUpdate:()=>null,onCommentsLoaded:()=>null,onCommentClicked:()=>null,onCommentLocationsUpdate:()=>null,onDocumentLocked:()=>null,onFirstRender:()=>null,onCollaborationReady:()=>null,onException:()=>null,onListDefinitionsChange:()=>null,onFontsResolved:null,handleImageUpload:null,telemetry:null,customUpdatedFiles:{},isHeaderFooterChanged:!1,isCustomXmlChanged:!1,ydoc:null,collaborationProvider:null,collaborationIsReady:!1,shouldLoadComments:!1,replacedFile:!1,focusTarget:null,permissionResolver:null,parentEditor:null};const r={...n},i=qv(),s=!!r.isHeadless,o=!!(r.element||r.selector),a=r.document??r.mockDocument??(i?document:null),l=!!(r.html||r.markdown)||(r.mode==="text"||r.mode==="html")&&typeof r.content=="string";if(!a&&l)throw new Error("[super-editor] HTML/Markdown import requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");if(!i&&o&&!s)throw new Error("[super-editor] Cannot mount an editor without a DOM. Provide DOM globals (e.g. via JSDOM) or pass { isHeadless: true }.");!i&&!s&&(r.isHeadless=!0),r.isHeadless&&(r.element=null,r.selector=null),pe(this,Et,x1e).call(this,r),this.setOptions(r),je(this,jo,r.renderer??(i?new gre:null));const{setHighContrastMode:c}=k0();if(this.setHighContrastMode=c,r.deferDocumentLoad===!0)pe(this,Et,g1e).call(this),je(this,eo,"initialized");else{const d={docx:()=>pe(this,Et,v1e).call(this),text:()=>pe(this,Et,tB).call(this),html:()=>pe(this,Et,tB).call(this),default:()=>{console.log("Not implemented.")}};(d[this.options.mode]??d.default)(),je(this,eo,"ready")}}get docChanged(){return this.options.isHeaderFooterChanged||this.options.isCustomXmlChanged||!this.options.initialState.doc.eq(this.state.doc)}mount(n){pe(this,Et,S1e).call(this,n),setTimeout(()=>{this.isDestroyed||this.emit("create",{editor:this})},0)}unmount(){F(this,jo)?F(this,jo).destroy():this.view&&this.view.destroy(),this.view=void 0}setToolbar(n){this.toolbar=n}focus(){var n;(n=this.view)==null||n.focus()}get state(){return this._state}get lifecycleState(){return F(this,eo)}get sourcePath(){return F(this,Fa)}setState(n){this._state=n,this.view&&!this.view.isDestroyed&&this.view.updateState(n)}get storage(){return this.extensionStorage}get commands(){var n;return(n=F(this,Zm))==null?void 0:n.commands}get helpers(){return this.extensionService.helpers}get isEditable(){return!!(this.options.editable&&this.view&&this.view.editable)}get isDestroyed(){var n;return!!(F(this,$1)||(n=this.view)!=null&&n.isDestroyed)}get element(){return this.options.element}get users(){return this.options.users}chain(){return F(this,Zm).chain()}can(){return F(this,Zm).can()}setDocumentMode(n,r){var o,a,l,c,u,d,f,h,m,y,w,b,E;if(this.options.isHeaderOrFooter||this.options.isChildEditor)return;let i=(n==null?void 0:n.toLowerCase())||"editing";if(!this.extensionService||!this.state)return;const s=((o=this.view)==null?void 0:o.dom)||((l=(a=this.options.element)==null?void 0:a.querySelector)==null?void 0:l.call(a,".ProseMirror"));this.options.role==="viewer"&&(i="viewing"),this.options.role==="suggester"&&i==="editing"&&(i="suggesting"),i==="viewing"?((u=(c=this.commands).toggleTrackChangesShowOriginal)==null||u.call(c),this.setEditable(!1,!1),this.setOptions({documentMode:"viewing"}),s&&s.classList.add("view-mode")):i==="suggesting"?((f=(d=this.commands).disableTrackChangesShowOriginal)==null||f.call(d),(m=(h=this.commands).enableTrackChanges)==null||m.call(h),this.setOptions({documentMode:"suggesting"}),this.setEditable(!0,!1),s&&s.classList.remove("view-mode")):i==="editing"&&((w=(y=this.commands).disableTrackChangesShowOriginal)==null||w.call(y),(E=(b=this.commands).disableTrackChanges)==null||E.call(b),this.setEditable(!0,!1),this.setOptions({documentMode:"editing"}),s&&s.classList.remove("view-mode"))}blur(){var n,r;(r=(n=this.view)==null?void 0:n.dom)==null||r.blur()}hasFocus(){return this.view?this.view.hasFocus():!1}coordsAtPos(n){var i,s;if(this.view)return this.view.coordsAtPos(n);const r=(s=(i=this.presentationEditor)==null?void 0:i.getRangeRects)==null?void 0:s.call(i,n,n);if(Array.isArray(r)&&r.length>0){const o=r[0];return{top:o.top,bottom:o.bottom,left:o.left,right:o.right,width:o.width,height:o.height}}return null}posAtCoords(n){var r;if(typeof((r=this.presentationEditor)==null?void 0:r.hitTest)=="function"){const i=n,s=(i==null?void 0:i.clientX)??(i==null?void 0:i.left)??(i==null?void 0:i.x)??null,o=(i==null?void 0:i.clientY)??(i==null?void 0:i.top)??(i==null?void 0:i.y)??null;if(Number.isFinite(s)&&Number.isFinite(o)){const a=this.presentationEditor.hitTest(s,o);if(a)return{pos:a.pos,inside:a.pos}}}return this.view?this.view.posAtCoords(n):null}async generateCollaborationUpdate(){return await qlt(this)}initializeCollaborationData(){var i;if(!this.options.isNewFile||!this.options.collaborationProvider)return;const n=this.options.collaborationProvider,r=()=>{var s;(s=n.off)==null||s.call(n,"synced",r),pe(this,Et,h6).call(this)};n.synced?pe(this,Et,h6).call(this):(i=n.on)==null||i.call(n,"synced",r)}replaceContent(n){this.setOptions({content:n}),pe(this,Et,Lv).call(this),this.initDefaultStyles(),pe(this,Et,Lv).call(this),pe(this,Et,cS).call(this);const r=pe(this,Et,y6).call(this),i=this.state.tr.replaceWith(0,this.state.doc.content.size,r);i.setMeta("replaceContent",!0),pe(this,Et,qd).call(this,i)}setOptions(n={}){this.options={...this.options,...n},(this.options.isNewFile||!this.options.ydoc)&&this.options.isCommentsEnabled&&(this.options.shouldLoadComments=!0),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n=!0,r=!0){this.setOptions({editable:n}),this.view&&(this.view.setProps({}),!n&&this.view.dom&&this.view.dom.blur()),r&&this.emit("update",{editor:this,transaction:this.state.tr})}registerPlugin(n,r){var s,o;if(this.isDestroyed||!((s=this.state)!=null&&s.plugins))return;const i=typeof r=="function"?r(n,[...this.state.plugins]):[...this.state.plugins,n];this._state=this.state.reconfigure({plugins:i}),(o=this.view)==null||o.updateState(this._state)}unregisterPlugin(n){var i;if(this.isDestroyed)return;const r=typeof n=="string"?`${n}$`:(n==null?void 0:n.key)??"";this._state=this.state.reconfigure({plugins:this.state.plugins.filter(s=>!pe(this,Et,rB).call(this,s).startsWith(r))}),(i=this.view)==null||i.updateState(this._state)}static async loadXmlData(n,r=!1){if(!n)return;const i=new lne,s=await i.getDocxData(n,r),o=i.media;return[s,o,i.mediaFiles,i.fonts]}static getDocumentVersion(n){return Xc.getStoredSuperdocVersion(n)}static setDocumentVersion(n,r){const i=Xc.setStoredSuperdocVersion(n,r);return typeof i=="string"?i:r}static getDocumentGuid(n){return Xc.extractDocumentGuid(n)}static updateDocumentVersion(n,r){return console.warn("updateDocumentVersion is deprecated, use setDocumentVersion instead"),Dh.setDocumentVersion(n,r)}async getSchemaSummaryJSON(){var s,o,a;if(!this.schema)throw new Error("Schema is not initialized.");const n=((o=(s=this.converter)==null?void 0:s.getSuperdocVersion)==null?void 0:o.call(s))||"current",r=new Set((((a=this.extensionService)==null?void 0:a.extensions)||[]).filter(l=>{const c=l==null?void 0:l.config;return!!(c==null?void 0:c.excludeFromSummaryJSON)}).map(l=>l.name)),i=Cct(this.schema,n);return r.size?{...i,nodes:i.nodes.filter(l=>!r.has(l.name)),marks:i.marks.filter(l=>!r.has(l.name))}:i}validateJSON(n){if(!this.schema)throw new Error("Schema is not initialized.");try{return Array.isArray(n)?n.map(r=>this.schema.nodeFromJSON(r)):this.schema.nodeFromJSON(n)}catch(r){const i=r instanceof Error?r.message:String(r),s=new Error(`Invalid document for current schema: ${i}`);throw r instanceof Error&&(s.cause=r),s}}createNodeViews(){var n;this.options.skipViewCreation||typeof((n=this.view)==null?void 0:n.setProps)!="function"||this.view.setProps({nodeViews:this.extensionService.nodeViews})}getMaxContentSize(){if(!this.converter)return{};const{pageSize:n={},pageMargins:r={}}=this.converter.pageStyles??{},{width:i,height:s}=n,{top:o=0,bottom:a=0,left:l=0,right:c=0}=r;if(!i||!s)return{};const u=s*96-o*96-a*96-50;return{width:i*96-l*96-c*96-20,height:u}}updateEditorStyles(n,r){var i,s;(s=(i=F(this,jo))==null?void 0:i.updateEditorStyles)==null||s.call(i,this,n,r)}initDefaultStyles(n=this.element){var r,i;this.options.isHeadless||this.options.suppressDefaultDocxStyles||(i=(r=F(this,jo))==null?void 0:r.initDefaultStyles)==null||i.call(r,this,n)}initMobileStyles(n){var r,i;(i=(r=F(this,jo))==null?void 0:r.initMobileStyles)==null||i.call(r,this,n)}dispatch(n){pe(this,Et,qd).call(this,n)}async getDocumentIdentifier(){var n;return await((n=this.converter)==null?void 0:n.getDocumentIdentifier())||null}getDocumentGuid(){var n;return((n=this.converter)==null?void 0:n.documentGuid)||null}isDocumentModified(){var n;return((n=this.converter)==null?void 0:n.documentModified)||!1}async getTelemetryData(){var n,r;return{documentId:await this.getDocumentIdentifier(),isModified:this.isDocumentModified(),isPermanentId:!!((n=this.converter)!=null&&n.documentGuid),version:(r=this.converter)==null?void 0:r.getSuperdocVersion()}}getDocumentId(){return console.warn("getDocumentId is deprecated, use getDocumentGuid instead"),this.getDocumentGuid()}getAttributes(n){return an.getAttributes(this.state,n)}isActive(n,r){const i=typeof n=="string"?n:null,s=typeof n=="string"?r:n;return Mwe(this.state,i,s)}getJSON(){const n=this.state.doc.toJSON();try{const r=n,i=r.attrs,s=this.converter;s&&s.bodySectPr&&(r.attrs=i||{},r.attrs.bodySectPr=s.bodySectPr)}catch{}return n}getMetadata(){var n,r;return{documentGuid:((n=this.converter)==null?void 0:n.documentGuid)||null,isModified:this.isDocumentModified(),version:((r=this.converter)==null?void 0:r.getSuperdocVersion())||null}}getHTML({unflattenLists:n=!1}={}){const r=pe(this,Et,c6).call(this);if(!r)throw new Error("[super-editor] getHTML() requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");const i=r.createElement("div"),s=Kf.fromSchema(this.schema).serializeFragment(this.state.doc.content,{document:r});i.appendChild(s);let o=i.innerHTML;return n&&(o=XWe(o,r)),o}async getMarkdown(){var o;const n=pe(this,Et,c6).call(this);if(!n)throw new Error("[super-editor] getMarkdown() requires a DOM. Provide { document } (e.g. from JSDOM), set DOM globals, or run in a browser environment.");const r=globalThis,i=r.document===void 0,s=i?{document:r.document,window:r.window,navigatorDescriptor:Object.getOwnPropertyDescriptor(globalThis,"navigator")}:null;i&&(r.document=n,!r.window&&n.defaultView&&(r.window=n.defaultView),!r.navigator&&((o=n.defaultView)!=null&&o.navigator)&&(r.navigator=n.defaultView.navigator));try{const[{unified:a},{default:l},{default:c},{default:u},{default:d}]=await Promise.all([ju(()=>import("./index-DEA9_vr5.es-CeMaHJjR.js"),__vite__mapDeps([0,1])),ju(()=>import("./index-Ch5xh5Co.es-Y0D1ymE5.js"),__vite__mapDeps([2,1,3])),ju(()=>import("./index-CiiMW3Y4.es-BCvq86wk.js"),__vite__mapDeps([4,5])),ju(()=>import("./index-DLYzyLb1.es-2BR1DlyS.js"),__vite__mapDeps([6,7,5])),ju(()=>import("./index-C045ejDF.es-CIqHpVEK.js"),__vite__mapDeps([8,7,5,3]))]),f=this.getHTML(),h=a().use(l,{fragment:!0}).use(c).use(d).use(u,{bullet:"-",fences:!0}).processSync(f);return String(h)}finally{s&&(s.document===void 0?delete r.document:r.document=s.document,s.window===void 0?delete r.window:r.window=s.window,s.navigatorDescriptor?Object.defineProperty(globalThis,"navigator",s.navigatorDescriptor):delete r.navigator)}}getDocumentVersion(){var n;return((n=this.converter)==null?void 0:n.getSuperdocVersion())||null}createChildEditor(n){return sct(this,n)}getPageStyles(){var n;return((n=this.converter)==null?void 0:n.pageStyles)||{}}updatePageStyle({pageMargins:n}){if(!this.converter)return;let r=!1;if(n&&(this.converter.pageStyles.pageMargins=n,this.initDefaultStyles(),r=!0),r&&this.view&&!gw()){const i=this.view.state.tr;i.setMeta("forceUpdatePagination",!0),pe(this,Et,qd).call(this,i),this.emit("pageStyleUpdate",{pageMargins:n,pageStyles:this.converter.pageStyles})}}migrateListsToV2(){return this.options.isHeaderOrFooter?[]:ect(this)}getUpdatedJson(){return pe(this,Et,lB).call(this)}async exportDocx({isFinalDoc:n=!1,commentsType:r="external",exportJsonOnly:i=!1,exportXmlOnly:s=!1,comments:o=[],getUpdatedDocs:a=!1,fieldsHighlightColor:l=null}={}){var c,u,d,f,h,m;try{const y=pe(this,Et,lB).call(this,o),w=await this.converter.exportToDocx(y,this.schema,this.storage.image.media,n,r,o,this,i,l);if(pe(this,Et,C1e).call(this),s||i)return w;const b=this.converter.schemaToXml(this.converter.convertedXml["docProps/custom.xml"].elements[0]),E=this.converter.schemaToXml(this.converter.convertedXml["word/styles.xml"].elements[0]),A=!!((u=(c=this.converter.convertedXml["word/settings.xml"])==null?void 0:c.elements)!=null&&u.length),x=A?this.converter.schemaToXml((f=(d=this.converter.convertedXml["word/settings.xml"])==null?void 0:d.elements)==null?void 0:f[0]):null,T=this.converter.schemaToXml(this.converter.convertedXml["word/_rels/document.xml.rels"].elements[0]),R=this.converter.addedMedia,k={};Object.entries(this.converter.convertedXml).forEach(([D,O])=>{var $;if(D.includes("header")||D.includes("footer")){const U=O,W=this.converter.schemaToXml(($=U.elements)==null?void 0:$[0]);k[D]=String(W.replace(/\[\[sdspace\]\]/g,""))}});const _=this.converter.convertedXml["word/numbering.xml"],N=this.converter.schemaToXml(_.elements[0]),L={...this.options.customUpdatedFiles,"word/document.xml":String(w),"docProps/custom.xml":String(b),"word/_rels/document.xml.rels":String(T),"word/numbering.xml":String(N),"word/styles.xml":String(E).replace(/&/gi,"&amp;"),...k};if(A&&(L["word/settings.xml"]=String(x)),o.length){const D=this.converter.schemaToXml(this.converter.convertedXml["word/comments.xml"].elements[0]),O=this.converter.schemaToXml(this.converter.convertedXml["word/commentsExtended.xml"].elements[0]),$=this.converter.schemaToXml(this.converter.convertedXml["word/commentsExtensible.xml"].elements[0]),U=this.converter.schemaToXml(this.converter.convertedXml["word/commentsIds.xml"].elements[0]);L["word/comments.xml"]=String(D),L["word/commentsExtended.xml"]=String(O),L["word/commentsExtensible.xml"]=String($),L["word/commentsIds.xml"]=String(U)}const M=new lne;if(a)return L["[Content_Types].xml"]=await M.updateContentTypes({files:this.options.content},R,!0,L),L;const C=await M.updateZip({docx:this.options.content,updatedDocs:L,originalDocxFile:this.options.fileSource,media:R,fonts:this.options.fonts,isHeadless:this.options.isHeadless});return(m=(h=this.options.telemetry)==null?void 0:h.trackUsage)==null||m.call(h,"document_export",{documentType:"docx",timestamp:new Date().toISOString()}),C}catch(y){const w=y instanceof Error?y:new Error(String(y));this.emit("exception",{error:w,editor:this}),console.error(w)}}async open(n,r){pe(this,Et,Mv).call(this,"initialized","closed"),await pe(this,Et,d6).call(this,"documentLoading","ready","closed",async()=>{await pe(this,Et,b1e).call(this,n,r)}),this.emit("documentOpen",{editor:this,sourcePath:F(this,Fa)})}static async open(n,r){const s={mode:"docx",isHeadless:!((r==null?void 0:r.element)!=null||(r==null?void 0:r.selector)!=null),...r},{html:o,markdown:a,isCommentsEnabled:l,suppressDefaultDocxStyles:c,documentMode:u,content:d,mediaFiles:f,fonts:h,...m}=s,y={mode:s.mode,html:o,markdown:a,isCommentsEnabled:l,suppressDefaultDocxStyles:c,documentMode:u,content:d,mediaFiles:f,fonts:h},w=new Dh({...m,deferDocumentLoad:!0});return await w.open(n,y),w}close(){F(this,eo)==="closed"||F(this,eo)==="initialized"||F(this,eo)!=="destroyed"&&(pe(this,Et,Mv).call(this,"ready"),this.emit("documentClose",{editor:this}),pe(this,Et,w1e).call(this),je(this,eo,"closed"))}async save(n){if(pe(this,Et,Mv).call(this,"ready"),!F(this,Fa))throw new iot("No source path. Use saveTo(path) or exportDocument() instead.");await pe(this,Et,d6).call(this,"saving","ready","ready",async()=>{const r=await this.exportDocument(n);await pe(this,Et,cB).call(this,F(this,Fa),r)})}async saveTo(n,r){pe(this,Et,Mv).call(this,"ready"),await pe(this,Et,d6).call(this,"saving","ready","ready",async()=>{const i=await this.exportDocument(r);await pe(this,Et,cB).call(this,n,i),je(this,Fa,n)})}async exportDocument(n){return pe(this,Et,Mv).call(this,"ready","saving"),await this.exportDocx({isFinalDoc:n==null?void 0:n.isFinalDoc,commentsType:n==null?void 0:n.commentsType,comments:n==null?void 0:n.comments,fieldsHighlightColor:n==null?void 0:n.fieldsHighlightColor})}destroy(){F(this,eo)==="ready"&&this.close(),F(this,eo)!=="destroyed"&&(je(this,$1,!0),this.emit("destroy"),this.unmount(),this.destroyHeaderFooterEditors(),pe(this,Et,T1e).call(this),this.removeAllListeners(),this.extensionService=void 0,this.schema=void 0,je(this,Zm,void 0),je(this,eo,"destroyed"))}destroyHeaderFooterEditors(){var n,r,i,s;try{const o=((n=this.converter)==null?void 0:n.headerEditors)??[],a=((r=this.converter)==null?void 0:r.footerEditors)??[];if(!o.length&&!a.length)return;const l=[...o,...a].filter(Boolean);for(const c of l)(s=(i=c==null?void 0:c.editor)==null?void 0:i.destroy)==null||s.call(i);o.length&&(o.length=0),a.length&&(a.length=0)}catch(o){const a=o instanceof Error?o:new Error(String(o));this.emit("exception",{error:a,editor:this}),console.error(a)}}static checkIfMigrationsNeeded(){const n=version??"initial",r=dre(n)||[];return console.debug("[checkVersionMigrations] Migrations needed:",n,r.length),r.length>0}processCollaborationMigrations(){if(console.debug("[checkVersionMigrations] Current editor version","1.4.0"),!this.options.ydoc)return;let r=this.options.ydoc.getMap("meta").get("version");r||(r="initial"),console.debug("[checkVersionMigrations] Document version",r);const i=dre(r)||[],o=this.state.plugins.find(c=>pe(this,Et,rB).call(this,c).startsWith("y-sync"));if(!o)return this.options.ydoc;let a=!1;for(const c of i)if(console.debug(" Running migration",c.name),c(this))a=!0;else throw new Error("Migration failed at "+c.name);return a?(o==null?void 0:o.getState(this.state)).doc:void 0}async replaceFile(n){this.setOptions({annotations:!0});const[r,i,s,o]=await Dh.loadXmlData(n);this.setOptions({fileSource:n,content:r,media:i,mediaFiles:s,fonts:o,isNewFile:!0}),this.options.shouldLoadComments=!0,this.options.replacedFile=!0,pe(this,Et,Lv).call(this),pe(this,Et,cS).call(this),this.initDefaultStyles(),this.options.ydoc&&this.options.collaborationProvider?(zx(this,this.options.ydoc),this.initializeCollaborationData()):pe(this,Et,h6).call(this),this.options.ydoc||pe(this,Et,Dv).call(this)}getInternalXmlFile(n,r="json"){return this.converter.convertedXml[n]?r==="json"?this.converter.convertedXml[n].elements[0]||null:this.converter.schemaToXml(this.converter.convertedXml[n].elements[0]):(console.warn("Cannot find file in docx"),null)}updateInternalXmlFile(n,r){if(typeof r=="string")this.options.customUpdatedFiles[n]=String(r);else{const i=this.converter.schemaToXml(r);this.options.customUpdatedFiles[n]=String(i)}this.options.isCustomXmlChanged=!0}getNodesOfType(n){const{findChildren:r}=gC;return r(this.state.doc,i=>i.type.name===n)}replaceNodeWithHTML(n,r){const{tr:i}=this.state;if(!n||!r)return;const s=n.pos,o=s+n.node.nodeSize,a=b1(r,this);i.replaceWith(s,o,a),this.dispatch(i)}prepareForAnnotations(n=[]){const{tr:r}=this.state,i=_9.processTables({state:this.state,tr:r,annotationValues:n});this.dispatch(i)}async migrateParagraphFields(n=[]){return!Array.isArray(n)||!n.length?n:await ict(n,this)}annotate(n=[],r=[],i=!1){const{state:s,schema:o}=this;let a=s.tr;if(a=_9.processTables({state:this.state,tr:a,annotationValues:n}),a=_9.annotateDocument({tr:a,schema:o,annotationValues:n,hiddenFieldIds:r,removeEmptyFields:i,editor:this}),a.docChanged){const l=a.scrollIntoView();this.dispatch(l)}}previewAnnotations(n=[],r=[]){this.originalState=this.state,this.annotate(n,r)}closePreview(){this.originalState&&(this.view?this.view.updateState(this.originalState):this._state=this.originalState)}};Zm=new WeakMap,jo=new WeakMap,$1=new WeakMap,eo=new WeakMap,Fa=new WeakMap,Et=new WeakSet,a6=function(n){var r,i;(i=(r=F(this,jo))==null?void 0:r.initContainerElement)==null||i.call(r,n)},l6=function(){return qv()&&!this.options.isHeadless},c6=function(){return this.options.document??this.options.mockDocument??(qv()?document:null)},u6=function(){setTimeout(()=>{this.isDestroyed||this.emit("create",{editor:this})},0)},Mv=function(...n){if(!n.includes(F(this,eo)))throw new rot(`Invalid operation: editor is in '${F(this,eo)}' state, expected one of: ${n.join(", ")}`)},d6=async function(n,r,i,s){je(this,eo,n);try{const o=await s();return je(this,eo,r),o}catch(o){throw je(this,eo,i),o}},g1e=function(){var n;(n=this.options.extensions)!=null&&n.length||(this.options.extensions=this.options.mode==="docx"?_W():PT()),pe(this,Et,p6).call(this),pe(this,Et,m6).call(this),pe(this,Et,g6).call(this),pe(this,Et,y1e).call(this)},y1e=function(){this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",pe(this,Et,f6).bind(this)),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("trackedChangesUpdate",this.options.onTrackedChangesUpdate),this.on("commentsLoaded",this.options.onCommentsLoaded),this.on("commentClick",this.options.onCommentClicked),this.on("commentsUpdate",this.options.onCommentsUpdate),this.on("locked",this.options.onDocumentLocked),this.on("collaborationReady",pe(this,Et,oB).bind(this)),this.on("comment-positions",this.options.onCommentLocationsUpdate),this.on("list-definitions-change",this.options.onListDefinitionsChange),this.on("fonts-resolved",this.options.onFontsResolved),this.on("exception",this.options.onException)},b1e=async function(n,r){var i;try{const s=(r==null?void 0:r.mode)??this.options.mode??"docx",o={...this.options,mode:s,isCommentsEnabled:(r==null?void 0:r.isCommentsEnabled)??this.options.isCommentsEnabled,suppressDefaultDocxStyles:(r==null?void 0:r.suppressDefaultDocxStyles)??this.options.suppressDefaultDocxStyles,documentMode:(r==null?void 0:r.documentMode)??this.options.documentMode??"editing",html:r==null?void 0:r.html,markdown:r==null?void 0:r.markdown,jsonOverride:(r==null?void 0:r.json)??null};if(typeof n=="string")if(typeof _e<"u"&&((i=_e.versions)!=null&&i.node)){const u=require("fs").readFileSync(n),[d,f,h,m]=await Dh.loadXmlData(u,!0);o.content=d,o.mediaFiles=h,o.fonts=m,o.fileSource=u,je(this,Fa,n)}else{const u=await(await fetch(n)).blob(),[d,f,h,m]=await Dh.loadXmlData(u);o.content=d,o.mediaFiles=h,o.fonts=m,o.fileSource=u,je(this,Fa,n.split("/").pop()||null)}else if(n!=null&&typeof n=="object"){const c=typeof ar<"u"&&(ar.isBuffer(n)||n instanceof ar),u=typeof Blob<"u"&&n instanceof Blob,d=n instanceof ArrayBuffer,f=typeof n=="object"&&"buffer"in n&&n.buffer instanceof ArrayBuffer;if(c||u||d||f){const[h,m,y,w]=await Dh.loadXmlData(n,c);o.content=h,o.mediaFiles=y,o.fonts=w,o.fileSource=n,je(this,Fa,null)}else{const[h,m,y,w]=await Dh.loadXmlData(n,!1);o.content=h,o.mediaFiles=y,o.fonts=w,o.fileSource=n,je(this,Fa,null)}}else o.content=(r==null?void 0:r.content)??[],o.mediaFiles=(r==null?void 0:r.mediaFiles)??{},o.fonts=(r==null?void 0:r.fonts)??{},o.fileSource=null,o.isNewFile=!(r!=null&&r.content),je(this,Fa,null);this.setOptions(o),pe(this,Et,Lv).call(this),pe(this,Et,cS).call(this);const a=pe(this,Et,l6).call(this);if(a&&(pe(this,Et,a6).call(this,this.options),pe(this,Et,iB).call(this)),pe(this,Et,uS).call(this,{includePlugins:!a}),!a){const c=this.state.tr.setMeta("forcePluginPass",!0).setMeta("addToHistory",!1);pe(this,Et,qd).call(this,c)}a&&(this.mount(this.options.element),pe(this,Et,b6).call(this)),a||pe(this,Et,u6).call(this),a&&(this.initDefaultStyles(),pe(this,Et,sB).call(this)),!!(this.options.markdown||this.options.html||this.options.loadFromSchema||this.options.jsonOverride||this.options.mode==="html"||this.options.mode==="text")&&this.migrateListsToV2(),this.setDocumentMode(this.options.documentMode,"init"),this.initializeCollaborationData(),!this.options.ydoc&&!this.options.isChildEditor&&pe(this,Et,Dv).call(this),a&&(pe(this,Et,uB).call(this),pe(this,Et,nB).call(this))}catch(s){const o=s instanceof Error?s:new Error(String(s));throw new oot(`Failed to load document: ${o.message}`,o)}},w1e=function(){this.unmount(),this.destroyHeaderFooterEditors(),this.converter=void 0,this.storage.image&&(this.storage.image.media={}),je(this,Fa,null),this.options.initialState=null,this.options.content="",this.options.fileSource=null,this._state=void 0},v1e=function(){pe(this,Et,p6).call(this),pe(this,Et,m6).call(this),pe(this,Et,g6).call(this),pe(this,Et,Lv).call(this),pe(this,Et,cS).call(this),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError);const n=pe(this,Et,l6).call(this);if(pe(this,Et,uS).call(this,{includePlugins:!n}),!n){const i=this.state.tr.setMeta("forcePluginPass",!0).setMeta("addToHistory",!1);pe(this,Et,qd).call(this,i)}n&&(pe(this,Et,a6).call(this,this.options),pe(this,Et,iB).call(this),this.mount(this.options.element),pe(this,Et,b6).call(this)),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",pe(this,Et,f6).bind(this)),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("trackedChangesUpdate",this.options.onTrackedChangesUpdate),this.on("commentsLoaded",this.options.onCommentsLoaded),this.on("commentClick",this.options.onCommentClicked),this.on("commentsUpdate",this.options.onCommentsUpdate),this.on("locked",this.options.onDocumentLocked),this.on("collaborationReady",pe(this,Et,oB).bind(this)),this.on("comment-positions",this.options.onCommentLocationsUpdate),this.on("list-definitions-change",this.options.onListDefinitionsChange),this.on("fonts-resolved",this.options.onFontsResolved),this.on("exception",this.options.onException),n||pe(this,Et,u6).call(this),this.initializeCollaborationData(),n&&(this.initDefaultStyles(),pe(this,Et,sB).call(this)),!!(this.options.markdown||this.options.html||this.options.loadFromSchema||this.options.jsonOverride||this.options.mode==="html"||this.options.mode==="text")&&this.migrateListsToV2(),this.setDocumentMode(this.options.documentMode,"init"),!this.options.ydoc&&!this.options.isChildEditor&&pe(this,Et,Dv).call(this),n&&(pe(this,Et,uB).call(this),pe(this,Et,nB).call(this))},tB=function(){(!this.options.extensions||!this.options.extensions.length)&&(this.options.extensions=PT()),pe(this,Et,p6).call(this),pe(this,Et,m6).call(this),pe(this,Et,g6).call(this),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError);const n=pe(this,Et,l6).call(this);pe(this,Et,uS).call(this,{includePlugins:!n}),n&&(pe(this,Et,a6).call(this,this.options),this.mount(this.options.element),pe(this,Et,b6).call(this)),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",pe(this,Et,f6).bind(this)),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("commentsLoaded",this.options.onCommentsLoaded),this.on("commentClick",this.options.onCommentClicked),this.on("locked",this.options.onDocumentLocked),this.on("list-definitions-change",this.options.onListDefinitionsChange),n||pe(this,Et,u6).call(this)},f6=function({editor:n,event:r}){var i,s,o,a;(s=(i=this.toolbar)==null?void 0:i.setActiveEditor)==null||s.call(i,n),(a=(o=this.options).onFocus)==null||a.call(o,{editor:n,event:r})},x1e=function(n){n.isHeadless&&(typeof navigator>"u"&&(lc.navigator={platform:"node",userAgent:"Node.js"}),n.mockDocument&&(console.warn("[super-editor] `mockDocument` is deprecated and will be removed in a future version. Use `document` instead (e.g., `new Editor({ document: jsdomDocument })`). See https://docs.superdoc.dev/guide/headless for migration guidance."),lc.document=n.mockDocument),n.mockWindow&&(console.warn("[super-editor] `mockWindow` is deprecated and will be removed in a future version. Prefer passing `document` only. Global window assignment is no longer required for headless mode."),lc.window=n.mockWindow))},nB=function(){var n,r;(r=(n=F(this,jo))==null?void 0:n.registerCopyHandler)==null||r.call(n,this)},h6=function(){if(!this.options.isNewFile)return;this.options.isNewFile=!1;const n=pe(this,Et,y6).call(this),r=this.state.tr.replaceWith(0,this.state.doc.content.size,n).setMeta("addToHistory",!1);pe(this,Et,qd).call(this,r),setTimeout(()=>{pe(this,Et,Dv).call(this)},50)},rB=function(n){const r=n.key;return typeof(r==null?void 0:r.key)=="string"?r.key:""},p6=function(){const n=["extension","node","mark"],r=[Oat,Mat,Pat,Dat],i=this.options.externalExtensions||[],s=[...r,...this.options.extensions].filter(o=>{const a=typeof(o==null?void 0:o.type)=="string"?o.type:void 0;return a?n.includes(a):!1});this.extensionService=QF.create(s,i,this)},m6=function(){je(this,Zm,KN.create({editor:this}))},Lv=function(){this.options.converter?this.converter=this.options.converter:this.converter=new Xc({docx:this.options.content,media:this.options.mediaFiles,fonts:this.options.fonts,debug:!0,telemetry:this.options.telemetry,fileSource:this.options.fileSource,documentId:this.options.documentId,mockWindow:this.options.mockWindow??null,mockDocument:this.options.mockDocument??null})},cS=function(){if(this.options.isChildEditor)return;if(!this.options.ydoc){this.storage.image.media=this.options.mediaFiles;return}const n=this.options.ydoc.getMap("media");this.options.isNewFile?(Object.entries(this.options.mediaFiles).forEach(([r,i])=>{n.set(r,i)}),this.storage.image.media=this.options.mediaFiles):this.storage.image.media=Object.fromEntries(n.entries())},iB=function(){var n,r;(r=(n=F(this,jo))==null?void 0:n.initFonts)==null||r.call(n,this)},sB=async function(){if(!(!this.options.onFontsResolved||typeof this.options.onFontsResolved!="function")&&!this.options.isHeadless)try{const n=this.converter.getDocumentFonts(),r=pe(this,Et,E1e).call(this,n),i={documentFonts:n,unsupportedFonts:r};this.emit("fonts-resolved",i)}catch{console.warn("[SuperDoc] Could not determine document fonts and unsupported fonts")}},E1e=function(n){return n.filter(i=>{const s=Klt(i),o=this.fontsImported.includes(i);return!s&&!o})},g6=function(){this.schema=this.extensionService.schema},y6=function(){let n;try{const{mode:r,content:i,fragment:s,loadFromSchema:o}=this.options,a=pe(this,Et,c6).call(this),l=c=>typeof c=="object"&&c!==null&&!Array.isArray(c);r==="docx"?o&&l(i)?(n=this.schema.nodeFromJSON(i),n=pe(this,Et,aB).call(this,n)):(n=Iwe(this.converter,this.schema,this),n=pe(this,Et,aB).call(this,n),this.options.markdown?n=mV(this.options.markdown,this,{isImport:!0,document:a}):this.options.html?n=b1(this.options.html,this,{isImport:!0,document:a}):this.options.jsonOverride&&(n=this.schema.nodeFromJSON(this.options.jsonOverride)),s&&(n=Vst(s,this.schema))):(r==="text"||r==="html")&&(o&&l(i)?n=this.schema.nodeFromJSON(i):typeof i=="string"?n=b1(i,this,{document:a}):n=this.schema.topNodeType.createAndFill())}catch(r){console.error(r);const i=r instanceof Error?r:new Error(String(r));this.emit("contentError",{editor:this,error:i})}return n},uS=function({includePlugins:n=!1}={}){if(this._state)return;const r=pe(this,Et,y6).call(this),i={schema:this.schema};this.options.ydoc||(i.doc=r);let s=yp.create(i);n&&(s=s.reconfigure({plugins:[...this.extensionService.plugins]})),this.options.initialState=s,this._state=s},b6=function(){var r;const n=this.state.reconfigure({plugins:[...this.extensionService.plugins]});this._state=n,(r=this.view)==null||r.updateState(n)},S1e=function(n){var r,i;if(this._state||pe(this,Et,uS).call(this),!F(this,jo)){if(!qv())throw new Error("[super-editor] Cannot create an editor view without a renderer.");je(this,jo,new gre)}this.view=F(this,jo).attach({element:n,editorProps:this.options.editorProps,dispatchTransaction:pe(this,Et,qd).bind(this),state:this.state,handleClick:pe(this,Et,A1e).bind(this)}),this.createNodeViews(),(i=(r=this.options.telemetry)==null?void 0:r.trackUsage)==null||i.call(r,"editor_initialized",{})},oB=function({editor:n,ydoc:r}){if(this.options.collaborationIsReady)return;console.debug(" [super-editor] Collaboration ready"),pe(this,Et,k1e).call(this),this.options.ydoc&&this.migrateListsToV2(),this.options.onCollaborationReady({editor:n,ydoc:r}),this.options.collaborationIsReady=!0,this.options.initialState=this.state;const{tr:i}=this.state;i.setMeta("collaborationReady",!0),pe(this,Et,qd).call(this,i),this.options.isNewFile||(pe(this,Et,Dv).call(this),zx(this,this.options.ydoc))},Dv=function(){if(!this.options.isCommentsEnabled||!this.options.shouldLoadComments)return;const n=this.options.replacedFile;this.emit("commentsLoaded",{editor:this,replacedFile:n,comments:this.converter.comments||[]}),this.options.replacedFile=!1,!this.options.isHeadless&&setTimeout(()=>{const r=this.state;if(!r)return;const i=r.tr.setMeta(Zi,{type:"force"});pe(this,Et,qd).call(this,i)},50)},qd=function(n){if(this.isDestroyed)return;const r=Date.now(),i=this.state;let s,o=n;try{const d=Ps.getState(i);o=(d==null?void 0:d.isTrackChangesActive)??!1?xlt({tr:o,state:i,user:this.options.user}):o;const{state:h}=i.applyTransaction(o);s=h}catch(d){s=i.apply(o),console.log(d)}const a=!i.selection.eq(s.selection);this._state=s,this.view&&this.view.updateState(s);const l=Date.now();this.emit("transaction",{editor:this,transaction:o,duration:l-r}),a&&this.emit("selectionUpdate",{editor:this,transaction:o});const c=o.getMeta("focus");c&&this.emit("focus",{editor:this,event:c.event,transaction:o});const u=o.getMeta("blur");u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),o.docChanged&&(n.docChanged&&this.converter&&(this.converter.documentGuid||(this.converter.promoteToGuid(),console.debug("Document modified - assigned GUID:",this.converter.documentGuid)),this.converter.documentModified=!0),this.emit("update",{editor:this,transaction:o}))},A1e=function(n,r){if(this.setOptions({lastSelection:null}),this.options.isHeaderOrFooter)return Glt(n,r)},aB=function(n){const r=yp.create({schema:this.schema,doc:n}),{tr:i,doc:s}=r;return alt(s,i,this.schema,this.converter),r.apply(i).doc},lB=function(n=[]){const r=yp.create({schema:this.schema,doc:this.state.doc,plugins:this.state.plugins}),{tr:i,doc:s}=r;return olt(s,i,this.schema,n),r.apply(i).doc.toJSON()},T1e=function(){var n,r;if(this.options.ydoc)try{console.debug(" [super-editor] Ending collaboration"),(r=(n=this.options.collaborationProvider)==null?void 0:n.disconnect)==null||r.call(n),this.options.ydoc.destroy()}catch(i){const s=i instanceof Error?i:new Error(String(i));this.emit("exception",{error:s,editor:this}),console.error(s)}},cB=async function(n,r){var o;const i=typeof globalThis<"u"&&typeof globalThis.process<"u"&&((o=globalThis.process.versions)==null?void 0:o.node)!=null,s=typeof ar<"u"&&typeof ar.isBuffer=="function";if(i||s)try{const a=require("fs"),l=ar.isBuffer(r)?r:ar.from(await r.arrayBuffer());a.writeFileSync(n,l);return}catch{}if(typeof window<"u"&&"showSaveFilePicker"in window){const l=await(await window.showSaveFilePicker({suggestedName:n.split("/").pop()||"document.docx",types:[{description:"Word Document",accept:{"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]}}]})).createWritable();await l.write(r),await l.close();return}throw new sot("File System Access API not available. Use exportDocument() to get the document data and handle the download manually.")},k1e=function(){if(this.options.isHeaderOrFooter||this.options.isChildEditor)return;new hre({editor:this,dryRun:!1,debug:!1}).validateActiveDocument()},C1e=function(){if(this.options.isHeaderOrFooter||this.options.isChildEditor)return;new hre({editor:this,dryRun:!1,debug:!1}).validateDocumentExport()},uB=function(){var n,r;(r=(n=F(this,jo))==null?void 0:n.initDevTools)==null||r.call(n,this)};let zf=Dh,dB,fB;if(typeof WeakMap<"u"){let t=new WeakMap;dB=e=>t.get(e),fB=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;dB=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},fB=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Ei=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return dB(t)||fB(t,Fct(t))}};function Fct(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Bct(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==d.childCount)break;const y=d.child(m),{colspan:w,rowspan:b,colwidth:E}=y.attrs;for(let A=0;A<b;A++){if(A+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-A});break}const x=i+A*e;for(let T=0;T<w;T++){r[x+T]==0?r[x+T]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:w-T});const R=E&&E[T];if(R){const k=(x+T)%e*2,_=o[k];_==null||_!=R&&o[k+1]==1?(o[k]=R,o[k+1]=1):_==R&&o[k+1]++}}}i+=w,u+=y.nodeSize}const f=(c+1)*e;let h=0;for(;i<f;)r[i++]==0&&h++;h&&(s||(s=[])).push({type:"missing",row:c,n:h}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Ei(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&jct(a,o,t),a}function Bct(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function jct(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=e[(i+c)%t.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=$ct(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function $ct(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function ea(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const Xm=new ni("selectingCells");function L2(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function zct(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ed(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function fM(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=L2(e.$head)||Hct(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Hct(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function hB(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Vct(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function FU(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function _1e(t,e,n){const r=t.node(-1),i=Ei.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function Wb(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function N1e(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Uct(t,e,n){const r=ea(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var ei=class _h extends _n{constructor(e,n=e){const r=e.node(-1),i=Ei.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw new RangeError(`No cell with offset ${u} found`);const f=s+u+1;return new f0e(a.resolve(f),a.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(hB(r)&&hB(i)&&FU(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?_h.rowSelection(r,i):s&&this.isColSelection()?_h.colSelection(r,i):new _h(r,i)}return Vt.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Ei.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const f=n.map[u];if(s[f])continue;s[f]=!0;const h=n.findCell(f);let m=e.nodeAt(f);if(!m)throw new RangeError(`No cell with offset ${f} found`);const y=i.left-h.left,w=h.right-i.right;if(y>0||w>0){let b=m.attrs;if(y>0&&(b=Wb(b,0,y)),w>0&&(b=Wb(b,b.colspan-w,w)),h.left<i.left){if(m=m.type.createAndFill(b),!m)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else m=m.type.create(b,m.content)}if(h.top<i.top||h.bottom>i.bottom){const b={...m.attrs,rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)};h.top<i.top?m=m.type.createAndFill(b):m=m.type.create(b,m.content)}c.push(m)}o.push(e.child(l).copy(Nt.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Ut(Nt.from(a),1,1)}replace(e,n=Ut.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?Ut.empty:n)}const s=_n.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Ut(Nt.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Ei.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Ei.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new _h(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Ei.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof _h&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Ei.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new _h(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new _h(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new _h(e.resolve(n),e.resolve(r))}getBookmark(){return new Wct(this.$anchorCell.pos,this.$headCell.pos)}};ei.prototype.visible=!1;_n.jsonID("cell",ei);var Wct=class I1e{constructor(e,n){this.anchor=e,this.head=n}map(e){return new I1e(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&FU(n,r)?new ei(n,r):_n.near(r,1)}};function qct(t){if(!(t.selection instanceof ei))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Qn.node(r,r+n.nodeSize,{class:"selectedCell"}))}),An.create(t.doc,e)}function Gct({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function Kct({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Xct(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof ln&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=ei.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=ei.rowSelection(a,a)}else if(!n){const a=Ei.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=ei.create(i,l+1,c)}}else r instanceof Vt&&Gct(r)?s=Vt.create(i,r.from):r instanceof Vt&&Kct(r)&&(s=Vt.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}const Yct=new ni("fix-tables");function R1e(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?R1e(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function M1e(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=Zct(t,i,s,n))};return e?e.doc!=t.doc&&R1e(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Zct(t,e,n,r){const i=Ei.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Wb(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),d=c+u.nodeSize,f=s[l];if(f>0){let h="cell";u.firstChild&&(h=u.firstChild.type.spec.tableRole);const m=[];for(let w=0;w<f;w++){const b=ea(t.schema)[h].createAndFill();b&&m.push(b)}const y=(l==0||o==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(y),m)}c=d}return r.setMeta(Yct,{fixTables:!0})}function mu(t){const e=t.selection,n=fM(t),r=n.node(-1),i=n.start(-1),s=Ei.get(r);return{...e instanceof ei?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function L1e(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;Uct(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,N1e(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?ea(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function yre(t,e){if(!Ed(t))return!1;if(e){const n=mu(t);e(L1e(t.tr,n,n.left))}return!0}function bre(t,e){if(!Ed(t))return!1;if(e){const n=mu(t);e(L1e(t.tr,n,n.right))}return!0}function Jct(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Wb(u,i-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}o+=u.rowspan}}function Qct(t,e){if(!Ed(t))return!1;if(e){const n=mu(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Jct(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=Ei.get(s)}e(r)}return!0}function eut(t,e,n){var r;const i=ea(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))===null||r===void 0?void 0:r.type)!=i)return!1;return!0}function D1e(t,{map:e,tableStart:n,table:r},i){let s=n;for(let c=0;c<i;c++)s+=r.child(c).nodeSize;const o=[];let a=i>0?-1:0;eut(e,r,i+a)&&(a=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],f=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{var l;const d=a==null?ea(r.type.schema).cell:(l=r.nodeAt(e.map[u+a*e.width]))===null||l===void 0?void 0:l.type,f=d==null?void 0:d.createAndFill();f&&o.push(f)}return t.insert(s,ea(r.type.schema).row.create(null,o)),t}function wre(t,e){if(!Ed(t))return!1;if(e){const n=mu(t);e(D1e(t.tr,n,n.top))}return!0}function vre(t,e){if(!Ed(t))return!1;if(e){const n=mu(t);e(D1e(t.tr,n,n.bottom))}return!0}function tut(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==e.map[u-e.width]){const f=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const f=n.nodeAt(d),h=f.attrs,m=f.type.create({...h,rowspan:f.attrs.rowspan-1},f.content),y=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+y),m),c+=h.colspan-1}}}}function nut(t,e){if(!Ed(t))return!1;if(e){const n=mu(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;tut(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=Ei.get(n.table)}e(r)}return!0}function xre(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function rut({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function Ere(t,e){const n=t.selection;if(!(n instanceof ei)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=mu(t),{map:i}=r;if(rut(i,r))return!1;if(e){const s=t.tr,o={};let a=Nt.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const f=i.map[u*i.width+d],h=r.table.nodeAt(f);if(!(o[f]||!h))if(o[f]=!0,l==null)l=f,c=h;else{xre(h)||(a=a.append(h.content));const m=s.mapping.map(f+r.tableStart);s.delete(m,m+h.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...N1e(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size>0){const u=l+1+c.content.size,d=xre(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new ei(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function iut(t,e){const n=ea(t.schema);return sut(({node:r})=>n[r.type.spec.tableRole])(t,e)}function sut(t){return(e,n)=>{const r=e.selection;let i,s;if(r instanceof ei){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,s=r.$anchorCell.pos}else{var o;if(i=zct(r.$from),!i)return!1;s=(o=L2(r.$from))===null||o===void 0?void 0:o.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=mu(e),d=e.tr;for(let h=0;h<u.right-u.left;h++)l.push(c?{...a,colwidth:c&&c[h]?[c[h]]:null}:a);let f;for(let h=u.top;h<u.bottom;h++){let m=u.map.positionAt(h,u.left,u.table);h==u.top&&(m+=i.nodeSize);for(let y=u.left,w=0;y<u.right;y++,w++)y==u.left&&h==u.top||d.insert(f=d.mapping.map(m+u.tableStart,1),t({node:i,row:h,col:y}).createAndFill(l[w]))}d.setNodeMarkup(s,t({node:i,row:u.top,col:u.left}),l[0]),r instanceof ei&&d.setSelection(new ei(d.doc.resolve(r.$anchorCell.pos),f?d.doc.resolve(f):void 0)),n(d)}return!0}}function out(t,e){return function(n,r){if(!Ed(n))return!1;const i=fM(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof ei?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function aut(t){return function(e,n){if(!Ed(e))return!1;if(n){const r=ea(e.schema),i=mu(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length===0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function Sre(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function ET(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?aut(t):function(n,r){if(!Ed(n))return!1;if(r){const i=ea(n.schema),s=mu(n),o=n.tr,a=Sre("row",s,i),l=Sre("column",s,i),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:s.map.height}:t=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,d=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(u).forEach(f=>{const h=f+s.tableStart,m=o.doc.nodeAt(h);m&&o.setNodeMarkup(h,d,m.attrs)}),r(o)}return!0}}ET("row",{useDeprecatedLogic:!0});ET("column",{useDeprecatedLogic:!0});const lut=ET("cell",{useDeprecatedLogic:!0});function cut(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function Are(t){return function(e,n){if(!Ed(e))return!1;const r=cut(fM(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Vt.between(i,Vct(i))).scrollIntoView())}return!0}}function uut(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function I5(t,e){const n=t.selection;if(!(n instanceof ei))return!1;if(e){const r=t.tr,i=ea(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Ut(i,0,0))}),r.docChanged&&e(r)}return!0}function dut(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=pB(ea(o).row,new Ut(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?pB(ea(o).row,new Ut(e,n,r)).content:e);else return null;return fut(o,a)}function fut(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Nt.empty),n[i]<r){const s=ea(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(Nt.from(o))}return{height:e.length,width:r,rows:e}}function pB(t,e){const n=t.createAndFill();return new d0e(n).replace(0,n.content.size,e).doc}function hut({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(Wb(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)s[a+h]=(s[a+h]||0)+f.attrs.colspan}o.push(Nt.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}s.push(Nt.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function put(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=ea(a);let c,u;if(i>e.width)for(let d=0,f=0;d<e.height;d++){const h=n.child(d);f+=h.nodeSize;const m=[];let y;h.lastChild==null||h.lastChild.type==l.cell?y=c||(c=l.cell.createAndFill()):y=u||(u=l.header_cell.createAndFill());for(let w=e.width;w<i;w++)m.push(y);t.insert(t.mapping.slice(o).map(f-1+r),m)}if(s>e.height){const d=[];for(let m=0,y=(e.height-1)*e.width;m<Math.max(e.width,i);m++){const w=m>=e.width?!1:n.nodeAt(e.map[y+m]).type==l.header_cell;d.push(w?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,Nt.from(d)),h=[];for(let m=e.height;m<s;m++)h.push(f);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),h)}return!!(c||u)}function Tre(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:h,left:m}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:o-h}),t.insert(t.mapping.slice(a).map(e.positionAt(o,m,n)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return l}function kre(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),h=e.colCount(d),m=t.mapping.slice(a).map(d+r);t.setNodeMarkup(m,null,Wb(f.attrs,o-h,f.attrs.colspan-(o-h))),t.insert(m+f.nodeSize,f.type.createAndFill(Wb(f.attrs,0,o-h))),c+=f.attrs.rowspan-1}}return l}function Cre(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Ei.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=t.tr;let f=0;function h(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=Ei.get(s),f=d.mapping.maps.length}put(d,o,s,n,c,u,f)&&h(),Tre(d,o,s,n,l,c,a,f)&&h(),Tre(d,o,s,n,l,c,u,f)&&h(),kre(d,o,s,n,a,u,l,f)&&h(),kre(d,o,s,n,a,u,c,f)&&h();for(let m=a;m<u;m++){const y=o.positionAt(m,l,s),w=o.positionAt(m,c,s);d.replace(d.mapping.slice(f).map(y+n),d.mapping.slice(f).map(w+n),new Ut(i.rows[m-a],0,0))}h(),d.setSelection(new ei(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(d)}const mut=DU({ArrowLeft:R5("horiz",-1),ArrowRight:R5("horiz",1),ArrowUp:R5("vert",-1),ArrowDown:R5("vert",1),"Shift-ArrowLeft":M5("horiz",-1),"Shift-ArrowRight":M5("horiz",1),"Shift-ArrowUp":M5("vert",-1),"Shift-ArrowDown":M5("vert",1),Backspace:I5,"Mod-Backspace":I5,Delete:I5,"Mod-Delete":I5});function w6(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function R5(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof ei)return w6(n,r,_n.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=O1e(i,t,e);if(o==null)return!1;if(t=="horiz")return w6(n,r,_n.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=_1e(a,t,e);let c;return l?c=_n.near(l,1):e<0?c=_n.near(n.doc.resolve(a.before(-1)),-1):c=_n.near(n.doc.resolve(a.after(-1)),1),w6(n,r,c)}}}function M5(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof ei)o=s;else{const l=O1e(i,t,e);if(l==null)return!1;o=new ei(n.doc.resolve(l))}const a=_1e(o.$headCell,t,e);return a?w6(n,r,new ei(o.$anchorCell,a)):!1}}function gut(t,e){const n=t.state.doc,r=L2(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new ei(r))),!0):!1}function yut(t,e,n){if(!Ed(t.state))return!1;let r=dut(n);const i=t.state.selection;if(i instanceof ei){r||(r={width:1,height:1,rows:[Nt.from(pB(ea(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Ei.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=hut(r,a.right-a.left,a.bottom-a.top),Cre(t.state,t.dispatch,o,a,r),!0}else if(r){const s=fM(t.state),o=s.start(-1);return Cre(t.state,t.dispatch,o,Ei.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function but(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=_re(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof ei)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=L2(t.state.selection.$anchor))!=null&&((n=N9(t,e))===null||n===void 0?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let u=N9(t,c);const d=Xm.getState(t.state)==null;if(!u||!FU(l,u))if(d)u=l;else return;const f=new ei(l,u);if(d||!t.state.selection.eq(f)){const h=t.state.tr.setSelection(f);d&&h.setMeta(Xm,l.pos),t.dispatch(h)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Xm.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Xm,-1))}function a(l){const c=l,u=Xm.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(_re(t,c.target)!=r&&(d=N9(t,e),!d))return o();d&&s(d,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function O1e(t,e,n){if(!(t.state.selection instanceof Vt))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?o:null}}return null}function _re(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function N9(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;const r=n.inside>=0?n.inside:n.pos;return L2(t.state.doc.resolve(r))}var wut=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),mB(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,mB(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function mB(t,e,n,r,i,s){let o=0,a=!0,l=e.firstChild;const c=t.firstChild;if(c){for(let d=0,f=0;d<c.childCount;d++){const{colspan:h,colwidth:m}=c.child(d).attrs;for(let y=0;y<h;y++,f++){const w=i==f?s:m&&m[y],b=w?w+"px":"";if(o+=w||r,w||(a=!1),l)l.style.width!=b&&(l.style.width=b),l=l.nextSibling;else{const E=document.createElement("col");E.style.width=b,e.appendChild(E)}}}for(;l;){var u;const d=l.nextSibling;(u=l.parentNode)===null||u===void 0||u.removeChild(l),l=d}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const rc=new ni("tableColumnResizing");function vut({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=wut,lastColumnResizable:i=!0}={}){const s=new Mr({key:rc,state:{init(o,a){var l;const c=(l=s.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,u=ea(a.schema).table.name;return r&&c&&(c[u]=(d,f)=>new r(d,n,f)),new xut(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=rc.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Eut(o,a,t,i)},mouseleave:o=>{Sut(o)},mousedown:(o,a)=>{Aut(o,a,e,n)}},decorations:o=>{const a=rc.getState(o);if(a&&a.activeHandle>-1)return Nut(o,a.activeHandle)},nodeViews:{}}});return s}var xut=class v6{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(rc);if(r&&r.setHandle!=null)return new v6(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new v6(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return hB(e.doc.resolve(i))||(i=-1),new v6(i,n.dragging)}return n}};function Eut(t,e,n,r){if(!t.editable)return;const i=rc.getState(t.state);if(i&&!i.dragging){const s=kut(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=Nre(t,e,"left",n):l-e.clientX<=n&&(o=Nre(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Ei.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}P1e(t,o)}}}function Sut(t){if(!t.editable)return;const e=rc.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&P1e(t,-1)}function Aut(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,o=rc.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=Tut(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(rc,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const f=rc.getState(t.state);f!=null&&f.dragging&&(Cut(t,f.activeHandle,Ire(f.dragging,d,n)),t.dispatch(t.state.tr.setMeta(rc,{setDragging:null})))}function u(d){if(!d.which)return c(d);const f=rc.getState(t.state);if(f&&f.dragging){const h=Ire(f.dragging,d,n);Rre(t,f.activeHandle,h,r)}}return Rre(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function Tut(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let o=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(o-=r[l],a--);return o/a}function kut(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Nre(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=L2(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=Ei.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Ire(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function P1e(t,e){t.dispatch(t.state.tr.setMeta(rc,{setHandle:e}))}function Cut(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=Ei.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],f=i.nodeAt(d).attrs,h=f.colspan==1?0:a-s.colCount(d);if(f.colwidth&&f.colwidth[h]==n)continue;const m=f.colwidth?f.colwidth.slice():_ut(f.colspan);m[h]=n,l.setNodeMarkup(o+d,null,{...f,colwidth:m})}l.docChanged&&t.dispatch(l)}function Rre(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=Ei.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&mB(s,l.firstChild,l,r,a,n)}function _ut(t){return Array(t).fill(0)}function Nut(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return An.empty;const s=Ei.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=a+c*s.width;if((a==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){var l;const d=s.map[u],f=o+d+i.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",!((l=rc.getState(t))===null||l===void 0)&&l.dragging&&n.push(Qn.node(o+d,o+d+i.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),n.push(Qn.widget(f,h))}}return An.create(t.doc,n)}function Iut({allowTableNodeSelection:t=!1}={}){return new Mr({key:Xm,state:{init(){return null},apply(e,n){const r=e.getMeta(Xm);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:qct,handleDOMEvents:{mousedown:but},createSelectionBetween(e){return Xm.getState(e.state)!=null?e.state.selection:null},handleTripleClick:gut,handleKeyDown:mut,handlePaste:yut},appendTransaction(e,n,r){return Xct(r,M1e(r,n),t)}})}var Jm,jh,z1,QT,gB;class Rut{constructor(e){st(this,QT);st(this,Jm,0);st(this,jh,new Map);st(this,z1);const n=(e==null?void 0:e.maxEpochsToKeep)??100;je(this,z1,Math.max(1,Math.floor(n)))}getCurrentEpoch(){return F(this,Jm)}recordTransaction(e){var i;if(!e.docChanged)return;const n=F(this,Jm),r=Array.isArray((i=e.mapping)==null?void 0:i.maps)?e.mapping.maps:[];F(this,jh).set(n,r),je(this,Jm,n+1),pe(this,QT,gB).call(this)}onLayoutComplete(e){for(const n of F(this,jh).keys())n<e&&F(this,jh).delete(n);pe(this,QT,gB).call(this)}mapPosFromLayoutToCurrent(e,n,r=1){const i=this.mapPosFromLayoutToCurrentDetailed(e,n,r);return i.ok?i.pos:null}mapPosFromLayoutToCurrentDetailed(e,n,r=1){const i=F(this,Jm);if(!Number.isFinite(e)||e<0)return{ok:!1,reason:"invalid_pos",fromEpoch:n,toEpoch:i};if(!Number.isFinite(n)||n<0)return{ok:!1,reason:"invalid_epoch",fromEpoch:n,toEpoch:i};if(n>i)return{ok:!1,reason:"invalid_epoch",fromEpoch:n,toEpoch:i};if(n===i)return{ok:!0,pos:e,fromEpoch:n,toEpoch:i};const s=Math.max(0,i-F(this,z1));if(n<s)return{ok:!1,reason:"epoch_too_old",fromEpoch:n,toEpoch:i};let o=e;for(let a=n;a<i;a+=1){const l=F(this,jh).get(a);if(!l)return{ok:!1,reason:"missing_stepmap",fromEpoch:n,toEpoch:i};for(const c of l){const u=c.mapResult(o,r);if(u.deleted)return{ok:!1,reason:"deleted",fromEpoch:n,toEpoch:i};o=u.pos}}return{ok:!0,pos:o,fromEpoch:n,toEpoch:i}}}Jm=new WeakMap,jh=new WeakMap,z1=new WeakMap,QT=new WeakSet,gB=function(){const e=Math.max(0,F(this,Jm)-F(this,z1));for(const n of F(this,jh).keys())n<e&&F(this,jh).delete(n)};function F1e(t){const{explicitStops:e,defaultTabInterval:n,paragraphIndent:r}=t,i=r.left??0,s=e.filter(f=>f.val==="clear").map(f=>f.pos),o=e.filter(f=>f.val!=="clear"),a=o.reduce((f,h)=>Math.max(f,h.pos),0),l=o.length>0,c=l?Math.max(a,i??0):0;let u=l?c:0;const d=Math.max(c,i??0)+14400;for(;u<d;){u+=n;const f=o.some(m=>Math.abs(m.pos-u)<20),h=s.some(m=>Math.abs(m-u)<20);!f&&!h&&o.push({val:"start",pos:u,leader:"none"})}return o.filter(f=>f.pos>=i).sort((f,h)=>f.pos-h.pos)}function Mut(t,e,n,r={}){const i=[];let s=0,o=0,a,l,c;const u=r.decimalSeparator??".";for(const d of t){const{run:f,width:h,isTab:m}=d;if(m){for(;o<e.length&&e[o].pos<=s;)o++;if(o<e.length){const y=e[o];i.push({run:f,x:s,width:0,tabStop:y}),s=y.pos,a=y.val==="decimal"?y:void 0,l=y.val==="center"?y:void 0,c=y.val==="end"?y:void 0,o++}else i.push({run:f,x:s,width:h}),s+=h,a=void 0,l=void 0,c=void 0}else a?(s=Lut(d,a,r,u),a=void 0):l?(s=Dut(d,l),l=void 0):c&&(s=Out(d,c),c=void 0),i.push({run:f,x:s,width:h}),s+=h}return i}function Lut(t,e,n,r){const i=t.text??"",s=i.indexOf(r);if(s<=0)return e.pos;const o=i.slice(0,s);let a;n.measureTextWidth?a=n.measureTextWidth(t.run,o):i.length>0?a=t.width*s/i.length:a=0;const l=e.pos-a;return l<0?0:l}function Dut(t,e){const n=t.width,r=e.pos-n/2;return r<0?0:r}function Out(t,e){const n=t.width,r=e.pos-n;return r<0?0:r}function B1e(t){const{currentX:e,tabStops:n,paragraphWidth:r,defaultTabDistance:i,defaultLineLength:s,followingText:o="",measureText:a,decimalSeparator:l="."}=t,c=n.find(h=>h.val!=="clear"&&h.pos>e),u=()=>{let h=i-e%s%i;return h<=0&&(h=i),{width:h,alignment:"default",tabStopPosUsed:"default"}};if(!c)return u();let d=Math.min(c.pos,r)-e;const f=c.val;if(f==="bar")return{width:0,leader:c.leader,alignment:f,tabStopPosUsed:c.pos};if(f==="center"||f==="end"){const h=a?a(o):0;f==="center"?d-=h/2:d-=h}else if(f==="decimal"){const h=o.indexOf(l);if(h>=0){const m=o.slice(0,h),y=a?a(m):0;d-=y}}return d<1?u():{width:d,leader:c.leader,alignment:f,tabStopPosUsed:c.pos}}const j1e=5e3;function Put(t,e){const n=t.length,r=e/n;return t.map(()=>r)}function Fut(t,e){return t.map(()=>20)}const yB=new Set([" ",""]);function $1e(t){const{alignment:e,hasExplicitPositioning:n,isLastLineOfParagraph:r,paragraphEndsWithLineBreak:i,skipJustifyOverride:s}=t;return!(e!=="justify"&&e!=="both"||s===!0||n||r&&!i)}function z1e(t){const{lineWidth:e,availableWidth:n,spaceCount:r,shouldJustify:i}=t;return!i||r<=0?0:(n-e)/r}const But=t=>t==="image"||t==="lineBreak"||t==="break"||t==="tab"||t==="fieldAnnotation",jut=t=>!t||typeof t!="object"?!1:typeof t.src=="string",$ut=t=>{if(!t||typeof t!="object")return"";const e=t.text;return typeof e=="string"?e:""},zut=t=>{if(!t||typeof t!="object")return;const e=t.pmStart;return typeof e=="number"?e:void 0},Hut=t=>{if(!t||typeof t!="object")return;const e=t.pmEnd;return typeof e=="number"?e:void 0};function BU(t,e){if(t.kind!=="paragraph")return{};let n,r;for(let i=e.fromRun;i<=e.toRun;i+=1){const s=t.runs[i];if(!s)continue;const o=zut(s);if(o==null)continue;if(But(s.kind)||jut(s)){const y=Hut(s)??o+1;n==null&&(n=o),r=y;continue}const l=$ut(s).length,c=i===e.fromRun,u=i===e.toRun,d=c?e.fromChar:0,f=u?e.toChar:l,h=o+d,m=o+f;n==null&&(n=h),r=m}return{pmStart:n,pmEnd:r}}function Vut(t,e,n,r){let i,s;for(let o=n;o<r;o+=1){const a=BU(t,e[o]);a.pmStart!=null&&i==null&&(i=a.pmStart),a.pmEnd!=null&&(s=a.pmEnd)}return{pmStart:i,pmEnd:s}}function Uut(t,e){var i,s,o,a,l,c,u,d;const n={before:((i=t.spacing)==null?void 0:i.before)??0,after:((s=t.spacing)==null?void 0:s.after)??0,line:((o=t.spacing)==null?void 0:o.line)??12,lineRule:((a=t.spacing)==null?void 0:a.lineRule)??"auto"};let r={left:((l=t.indent)==null?void 0:l.left)??0,right:((c=t.indent)==null?void 0:c.right)??0,firstLine:((u=t.indent)==null?void 0:u.firstLine)??0,hanging:((d=t.indent)==null?void 0:d.hanging)??0};return e!=null&&e.indent&&(r={...r,left:e.indent.left??r.left,hanging:e.indent.hanging??r.hanging}),{spacing:n,indent:r}}function Wut(t,e){const{format:n,text:r,start:i}=t;if(n==="bullet"||n==="custom")return{text:r,width:Dre(r)};let s=r;for(let o=0;o<e.length;o++){const a=`%${o+1}`;if(s.includes(a)){const l=Gut(e[o]+i-1,n);s=s.replace(a,l)}}return{text:s,width:Dre(s)}}function qut(t){const{indent:e}=t;return{labelWidth:Math.abs(e.hanging),hangingIndent:e.hanging,firstLineIndent:e.left-Math.abs(e.hanging)}}function Gut(t,e){switch(e){case"decimal":return t.toString();case"lowerLetter":return Mre(t,!1);case"upperLetter":return Mre(t,!0);case"lowerRoman":return Lre(t).toLowerCase();case"upperRoman":return Lre(t);default:return t.toString()}}function Mre(t,e){let n="",r=t;for(;r>0;){const i=(r-1)%26;n=String.fromCharCode((e?65:97)+i)+n,r=Math.floor((r-1)/26)}return n||(e?"A":"a")}function Lre(t){const e=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let n="",r=t;for(const[i,s]of e)for(;r>=i;)n+=s,r-=i;return n}function Dre(t){return t.length*7}function Kut(t,e){if(!t||t.length===0)return[];let n=1/0,r=1/0,i=-1/0,s=-1/0;for(const[u,d]of t)n=Math.min(n,u),r=Math.min(r,d),i=Math.max(i,u),s=Math.max(s,d);const o=i-n,a=s-r;if(o===0||a===0)return[];const l=e.width/o,c=e.height/a;return t.map(([u,d])=>[e.x+(u-n)*l,e.y+(d-r)*c])}function Xut(t,e,n){const{rect:r,wrap:i}=t,s=r.y-(i.distTop??0),o=r.y+r.height+(i.distBottom??0),a=r.x-(i.distLeft??0),l=r.x+r.width+(i.distRight??0);if(e+n<=s||e>=o)return null;switch(i.type){case"None":return null;case"TopAndBottom":return null;case"Square":return{left:a,right:l};case"Tight":case"Through":{if(!i.polygon||i.polygon.length===0)return{left:a,right:l};const u=i.polygon,d=e+n/2;let f=1/0,h=-1/0;for(let m=0;m<u.length;m++){const[y,w]=u[m],[b,E]=u[(m+1)%u.length],A=Math.min(w,E),x=Math.max(w,E);if(d>=A&&d<=x){const T=(d-w)/(E-w),R=y+T*(b-y);f=Math.min(f,R),h=Math.max(h,R)}}return f===1/0||h===-1/0?null:{left:f-(i.distLeft??0),right:h+(i.distRight??0)}}default:return null}}const H1e=Object.freeze(Object.defineProperty({__proto__:null,OOXML_PCT_DIVISOR:j1e,calculateTabWidth:B1e,computeListIndent:qut,computeTabStops:F1e,computeWrapExclusion:Xut,formatListLabel:Wut,layoutWithTabs:Mut,measureRowHeights:Fut,resolveColumnWidths:Put,resolveSpacingIndent:Uut,scaleWrapPolygon:Kut},Symbol.toStringTag,{value:"Module"}));var Yut={accentBorderCallout1:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -38.333 112.5",fill:"none",stroke:"#000000"}]},accentBorderCallout2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -46.667 112.5",fill:"none",stroke:"#000000"}]},accentBorderCallout3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -16.667 100 L -8.333 112.963",fill:"none",stroke:"#000000"}]},accentCallout1:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -38.333 112.5",fill:"none",stroke:"#000000"}]},accentCallout2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -46.667 112.5",fill:"none",stroke:"#000000"}]},accentCallout3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 0 Z L -8.333 100",fill:"none",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -16.667 100 L -8.333 112.963",fill:"none",stroke:"#000000"}]},actionButtonBackPrevious:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 12.5 50 L 87.5 12.5 L 87.5 87.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 12.5 50 L 87.5 12.5 L 87.5 87.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 12.5 50 L 87.5 12.5 L 87.5 87.5 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonBeginning:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 31.25 50 L 87.5 12.5 L 87.5 87.5 Z M 21.875 12.5 L 12.5 12.5 L 12.5 87.5 L 21.875 87.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 31.25 50 L 87.5 12.5 L 87.5 87.5 Z M 21.875 12.5 L 12.5 12.5 L 12.5 87.5 L 21.875 87.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 31.25 50 L 87.5 12.5 L 87.5 87.5 Z M 21.875 12.5 L 21.875 87.5 L 12.5 87.5 L 12.5 12.5 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonBlank:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},actionButtonDocument:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 21.875 12.5 L 59.375 12.5 L 78.125 31.25 L 78.125 87.5 L 21.875 87.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 21.875 12.5 L 59.375 12.5 L 59.375 31.25 L 78.125 31.25 L 78.125 87.5 L 21.875 87.5 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 59.375 12.5 L 59.375 31.25 L 78.125 31.25 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 21.875 12.5 L 59.375 12.5 L 78.125 31.25 L 78.125 87.5 L 21.875 87.5 Z M 78.125 31.25 L 59.375 31.25 L 59.375 12.5",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonEnd:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 68.75 50 L 12.5 12.5 L 12.5 87.5 Z M 78.125 12.5 L 87.5 12.5 L 87.5 87.5 L 78.125 87.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 68.75 50 L 12.5 12.5 L 12.5 87.5 Z M 78.125 12.5 L 87.5 12.5 L 87.5 87.5 L 78.125 87.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 68.75 50 L 12.5 87.5 L 12.5 12.5 Z M 78.125 12.5 L 87.5 12.5 L 87.5 87.5 L 78.125 87.5 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonForwardNext:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 87.5 50 L 12.5 12.5 L 12.5 87.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 87.5 50 L 12.5 12.5 L 12.5 87.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 87.5 50 L 12.5 87.5 L 12.5 12.5 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonHelp:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 28.571428571428573 33.92857142857143 A 21.428571428571427 21.428571428571427 0 0 1 71.42857142857143 33.92857142857142 A 10.714285714285714 16.071428571428573 0 0 1 60.714285714285715 50 A 5.357142857142857 8.035714285714286 0 0 0 55.35714285714286 58.035714285714285 L 55.357142857142854 68.75 L 44.642857142857146 68.75 L 44.642857142857146 58.035714285714285 A 10.714285714285714 16.071428571428573 0 0 1 55.35714285714286 41.96428571428571 A 5.357142857142857 8.035714285714286 0 0 0 60.714285714285715 33.92857142857142 A 10.714285714285714 10.714285714285714 0 0 0 39.285714285714285 33.92857142857142 Z M 50 71.42857142857143 A 8.035714285714286 8.035714285714286 0 0 1 50 87.50000000000001 A 8.035714285714286 8.035714285714286 0 0 1 50 71.42857142857143 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 28.571428571428573 33.92857142857143 A 21.428571428571427 21.428571428571427 0 0 1 71.42857142857143 33.92857142857142 A 10.714285714285714 16.071428571428573 0 0 1 60.714285714285715 50 A 5.357142857142857 8.035714285714286 0 0 0 55.35714285714286 58.035714285714285 L 55.357142857142854 68.75 L 44.642857142857146 68.75 L 44.642857142857146 58.035714285714285 A 10.714285714285714 16.071428571428573 0 0 1 55.35714285714286 41.96428571428571 A 5.357142857142857 8.035714285714286 0 0 0 60.714285714285715 33.92857142857142 A 10.714285714285714 10.714285714285714 0 0 0 39.285714285714285 33.92857142857142 Z M 50 71.42857142857143 A 8.035714285714286 8.035714285714286 0 0 1 50 87.50000000000001 A 8.035714285714286 8.035714285714286 0 0 1 50 71.42857142857143 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 28.571428571428573 33.92857142857143 A 21.428571428571427 21.428571428571427 0 0 1 71.42857142857143 33.92857142857142 A 10.714285714285714 16.071428571428573 0 0 1 60.714285714285715 50 A 5.357142857142857 8.035714285714286 0 0 0 55.35714285714286 58.035714285714285 L 55.357142857142854 68.75 L 44.642857142857146 68.75 L 44.642857142857146 58.035714285714285 A 10.714285714285714 16.071428571428573 0 0 1 55.35714285714286 41.96428571428571 A 5.357142857142857 8.035714285714286 0 0 0 60.714285714285715 33.92857142857142 A 10.714285714285714 10.714285714285714 0 0 0 39.285714285714285 33.92857142857142 Z M 50 71.42857142857143 A 8.035714285714286 8.035714285714286 0 0 1 50 87.50000000000001 A 8.035714285714286 8.035714285714286 0 0 1 50 71.42857142857143 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonHome:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 50 12.5 L 12.5 50 L 21.875 50 L 21.875 87.5 L 78.125 87.5 L 78.125 50 L 87.5 50 L 73.4375 35.9375 L 73.4375 17.1875 L 64.0625 17.1875 L 64.0625 26.5625 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 73.4375 35.9375 L 73.4375 17.1875 L 64.0625 17.1875 L 64.0625 26.5625 Z M 21.875 50 L 21.875 87.5 L 45.3125 87.5 L 45.3125 68.75 L 54.6875 68.75 L 54.6875 87.5 L 78.125 87.5 L 78.125 50 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 50 12.5 L 12.5 50 L 87.5 50 Z M 45.3125 68.75 L 54.6875 68.75 L 54.6875 87.5 L 45.3125 87.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 50 12.5 L 64.0625 26.5625 L 64.0625 17.1875 L 73.4375 17.1875 L 73.4375 35.9375 L 87.5 50 L 78.125 50 L 78.125 87.5 L 21.875 87.5 L 21.875 50 L 12.5 50 Z M 64.0625 26.5625 L 73.4375 35.9375 M 78.125 50 L 21.875 50 M 45.3125 87.5 L 45.3125 68.75 L 54.6875 68.75 L 54.6875 87.5",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonInformation:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 50 12.5 A 37.5 37.5 0 0 1 50.00000000000002 87.5 A 37.5 37.5 0 0 1 49.99999999999999 12.5 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 50 12.5 A 37.5 37.5 0 0 1 50.00000000000002 87.5 A 37.5 37.5 0 0 1 49.99999999999999 12.5 Z M 50 14.84375 A 7.03125 7.03125 0 0 1 50 28.90625 A 7.03125 7.03125 0 0 1 50 14.84375 M 35.9375 35.9375 L 35.9375 40.625 L 42.96875 40.625 L 42.96875 73.4375 L 35.9375 73.4375 L 35.9375 78.125 L 64.0625 78.125 L 64.0625 73.4375 L 57.03125 73.4375 L 57.03125 35.9375 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 50 14.84375 A 7.03125 7.03125 0 0 1 50 28.90625 A 7.03125 7.03125 0 0 1 50 14.84375 M 35.9375 35.9375 L 57.03125 35.9375 L 57.03125 73.4375 L 64.0625 73.4375 L 64.0625 78.125 L 35.9375 78.125 L 35.9375 73.4375 L 42.96875 73.4375 L 42.96875 40.625 L 35.9375 40.625 Z",fill:"color-mix(in srgb, currentColor 60%, white)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 50 12.5 A 37.5 37.5 0 0 1 50.00000000000002 87.5 A 37.5 37.5 0 0 1 49.99999999999999 12.5 Z M 50 14.84375 A 7.03125 7.03125 0 0 1 50 28.90625 A 7.03125 7.03125 0 0 1 50 14.84375 M 35.9375 35.9375 L 57.03125 35.9375 L 57.03125 73.4375 L 64.0625 73.4375 L 64.0625 78.125 L 35.9375 78.125 L 35.9375 73.4375 L 42.96875 73.4375 L 42.96875 40.625 L 35.9375 40.625 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonMovie:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 12.5 30.833333333333332 L 12.5 45.677083333333336 L 17.552083333333332 45.677083333333336 L 19.114583333333332 43.982638888888886 L 20.572916666666664 43.982638888888886 L 20.572916666666664 66.63888888888889 L 71.5625 66.63888888888889 L 71.5625 58.826388888888886 L 79.63541666666667 58.826388888888886 L 84.01041666666667 63.125 L 87.5 63.125 L 87.5 35.52083333333333 L 84.01041666666667 35.52083333333333 L 80.98958333333333 38.513888888888886 L 71.5625 38.513888888888886 L 71.5625 35.52083333333333 L 68.59375 32.39583333333333 L 19.114583333333332 32.39583333333333 L 17.552083333333332 30.833333333333332 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 12.5 30.833333333333332 L 12.5 45.677083333333336 L 17.552083333333332 45.677083333333336 L 19.114583333333332 43.982638888888886 L 20.572916666666664 43.982638888888886 L 20.572916666666664 66.63888888888889 L 71.5625 66.63888888888889 L 71.5625 58.826388888888886 L 79.63541666666667 58.826388888888886 L 84.01041666666667 63.125 L 87.5 63.125 L 87.5 35.52083333333333 L 84.01041666666667 35.52083333333333 L 80.98958333333333 38.513888888888886 L 71.5625 38.513888888888886 L 71.5625 35.52083333333333 L 68.59375 32.39583333333333 L 19.114583333333332 32.39583333333333 L 17.552083333333332 30.833333333333332 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 12.5 30.833333333333332 L 17.552083333333332 30.833333333333332 L 19.114583333333332 32.39583333333333 L 68.59375 32.39583333333333 L 71.5625 35.52083333333333 L 71.5625 38.513888888888886 L 80.98958333333333 38.513888888888886 L 84.01041666666667 35.52083333333333 L 87.5 35.52083333333333 L 87.5 63.125 L 84.01041666666667 63.125 L 79.63541666666667 58.826388888888886 L 71.5625 58.826388888888886 L 71.5625 66.63888888888889 L 20.572916666666664 66.63888888888889 L 20.572916666666664 43.982638888888886 L 19.114583333333332 43.982638888888886 L 17.552083333333332 45.677083333333336 L 12.5 45.677083333333336 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonReturn:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 87.5 31.25 L 68.75 12.5 L 50 31.25 L 59.375 31.25 L 59.375 59.375 A 9.375 9.375 0 0 1 50 68.75 L 40.625 68.75 A 9.375 9.375 0 0 1 31.25 59.375 L 31.25 31.25 L 12.5 31.25 L 12.5 59.375 A 28.125 28.125 0 0 0 40.625 87.5 L 50 87.5 A 28.125 28.125 0 0 0 78.125 59.375 L 78.125 31.25 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 87.5 31.25 L 68.75 12.5 L 50 31.25 L 59.375 31.25 L 59.375 59.375 A 9.375 9.375 0 0 1 50 68.75 L 40.625 68.75 A 9.375 9.375 0 0 1 31.25 59.375 L 31.25 31.25 L 12.5 31.25 L 12.5 59.375 A 28.125 28.125 0 0 0 40.625 87.5 L 50 87.5 A 28.125 28.125 0 0 0 78.125 59.375 L 78.125 31.25 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 87.5 31.25 L 78.125 31.25 L 78.125 59.375 A 28.125 28.125 0 0 1 50 87.5 L 40.625 87.5 A 28.125 28.125 0 0 1 12.5 59.375 L 12.5 31.25 L 31.25 31.25 L 31.25 59.375 A 9.375 9.375 0 0 0 40.625 68.75 L 50 68.75 A 9.375 9.375 0 0 0 59.375 59.375 L 59.375 31.25 L 50 31.25 L 68.75 12.5 Z",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},actionButtonSound:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 12.5 35.9375 L 12.5 64.0625 L 35.9375 64.0625 L 59.375 87.5 L 59.375 12.5 L 35.9375 35.9375 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 12.5 35.9375 L 12.5 64.0625 L 35.9375 64.0625 L 59.375 87.5 L 59.375 12.5 L 35.9375 35.9375 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 12.5 35.9375 L 35.9375 35.9375 L 59.375 12.5 L 59.375 87.5 L 35.9375 64.0625 L 12.5 64.0625 Z M 68.75 35.9375 L 87.5 21.875 M 68.75 50 L 87.5 50 M 68.75 64.0625 L 87.5 78.125",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},arc:{viewBox:"0 0 100 100",paths:[{d:"M 49.99999999999999 0 A 50 50 0 0 1 100 49.999999999999986",fill:"none",stroke:"#000000"}]},bentArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 0 56.25 A 43.75 43.75 0 0 1 43.74999999999999 12.499999999999993 L 75 12.5 L 75 0 L 100 25 L 75 50 L 75 37.5 L 43.75 37.5 A 18.75 18.75 0 0 0 25 56.25 L 25 100 Z",fill:"#000000",stroke:"#000000"}]},bentConnector2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100",fill:"none",stroke:"#000000"}]},bentConnector3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 50 100 L 100 100",fill:"none",stroke:"#000000"}]},bentConnector4:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 50 50 L 100 50 L 100 100",fill:"none",stroke:"#000000"}]},bentConnector5:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 50 50 L 50 50 L 50 100 L 100 100",fill:"none",stroke:"#000000"}]},bentUpArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 75 L 62.5 75 L 62.5 25 L 50 25 L 75 0 L 100 25 L 87.5 25 L 87.5 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},bevel:{viewBox:"0 0 100 100",paths:[{d:"M 12.5 12.5 L 87.5 12.5 L 87.5 87.5 L 12.5 87.5 Z",fill:"#000000",stroke:"none"},{d:"M 0 0 L 100 0 L 87.5 12.5 L 12.5 12.5 Z",fill:"color-mix(in srgb, currentColor 80%, white)",stroke:"none"},{d:"M 0 100 L 12.5 87.5 L 87.5 87.5 L 100 100 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 0 L 12.5 12.5 L 12.5 87.5 L 0 100 Z",fill:"color-mix(in srgb, currentColor 60%, white)",stroke:"none"},{d:"M 100 0 L 100 100 L 87.5 87.5 L 87.5 12.5 Z",fill:"color-mix(in srgb, currentColor 60%, black)",stroke:"none"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 12.5 12.5 L 87.5 12.5 L 87.5 87.5 L 12.5 87.5 Z M 0 0 L 12.5 12.5 M 0 100 L 12.5 87.5 M 100 0 L 87.5 12.5 M 100 100 L 87.5 87.5",fill:"none",stroke:"#000000"}]},blockArc:{viewBox:"0 0 100 100",paths:[{d:"M 0 50.00000000000001 A 50 50 0 0 1 100 49.999999999999986 L 75 50 A 25 25 0 0 0 25 50 Z",fill:"#000000",stroke:"#000000"}]},borderCallout1:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 18.75 L -38.333 112.5",fill:"none",stroke:"#000000"}]},borderCallout2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -46.667 112.5",fill:"none",stroke:"#000000"}]},borderCallout3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M -8.333 18.75 L -16.667 18.75 L -16.667 100 L -8.333 112.963",fill:"none",stroke:"#000000"}]},bracePair:{viewBox:"0 0 100 100",paths:[{d:"M 16.666 100 A 8.333 8.333 0 0 1 8.333 91.667 L 8.333 58.333 A 8.333 8.333 0 0 0 5.102490888647448e-16 50 A 8.333 8.333 0 0 0 8.333 41.667 L 8.333 8.333 A 8.333 8.333 0 0 1 16.666 -1.7763568394002505e-15 L 83.334 0 A 8.333 8.333 0 0 1 91.667 8.332999999999998 L 91.667 41.667 A 8.333 8.333 0 0 0 100 50 A 8.333 8.333 0 0 0 91.667 58.333 L 91.667 91.667 A 8.333 8.333 0 0 1 83.334 100 Z",fill:"#000000",stroke:"none"},{d:"M 16.666 100 A 8.333 8.333 0 0 1 8.333 91.667 L 8.333 58.333 A 8.333 8.333 0 0 0 5.102490888647448e-16 50 A 8.333 8.333 0 0 0 8.333 41.667 L 8.333 8.333 A 8.333 8.333 0 0 1 16.666 -1.7763568394002505e-15 M 83.334 0 A 8.333 8.333 0 0 1 91.667 8.332999999999998 L 91.667 41.667 A 8.333 8.333 0 0 0 100 50 A 8.333 8.333 0 0 0 91.667 58.333 L 91.667 91.667 A 8.333 8.333 0 0 1 83.334 100",fill:"none",stroke:"#000000"}]},bracketPair:{viewBox:"0 0 100 100",paths:[{d:"M 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 L 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 83.333 A 16.667 16.667 0 0 1 83.333 100 L 16.667 100 A 16.667 16.667 0 0 1 0 83.333 Z",fill:"#000000",stroke:"none"},{d:"M 16.667 100 A 16.667 16.667 0 0 1 0 83.333 L 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 M 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 83.333 A 16.667 16.667 0 0 1 83.333 100",fill:"none",stroke:"#000000"}]},callout1:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 18.75 L -38.333 112.5",fill:"none",stroke:"#000000"}]},callout2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 18.75 L -16.667 18.75 L -46.667 112.5",fill:"none",stroke:"#000000"}]},callout3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M -8.333 18.75 L -16.667 18.75 L -16.667 100 L -8.333 112.963",fill:"none",stroke:"#000000"}]},can:{viewBox:"0 0 100 100",paths:[{d:"M 0 12.5 A 50 12.5 0 0 0 100 12.499999999999998 L 100 87.5 A 50 12.5 0 0 1 0 87.5 Z",fill:"#000000",stroke:"none"},{d:"M 0 12.5 A 50 12.5 0 0 1 100 12.499999999999995 A 50 12.5 0 0 1 0 12.499999999999996 Z",fill:"color-mix(in srgb, currentColor 60%, white)",stroke:"none"},{d:"M 100 12.5 A 50 12.5 0 0 1 0 12.500000000000002 A 50 12.5 0 0 1 100 12.499999999999996 L 100 87.5 A 50 12.5 0 0 1 0 87.5 L 0 12.5",fill:"none",stroke:"#000000"}]},chartPlus:{viewBox:"0 0 100 100",paths:[{d:"M 50 0 L 50 100 M 0 50 L 100 50",fill:"none",stroke:"#000000"},{d:"M 0 0 L 0 100 L 100 100 L 100 0 Z",fill:"#000000",stroke:"none"}]},chartStar:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 100 M 0 100 L 100 0 M 50 0 L 50 100",fill:"none",stroke:"#000000"},{d:"M 0 0 L 0 100 L 100 100 L 100 0 Z",fill:"#000000",stroke:"none"}]},chartX:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 100 M 0 100 L 100 0",fill:"none",stroke:"#000000"},{d:"M 0 0 L 0 100 L 100 100 L 100 0 Z",fill:"#000000",stroke:"none"}]},chevron:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 100 50 L 50 100 L 0 100 L 50 50 Z",fill:"#000000",stroke:"#000000"}]},chord:{viewBox:"0 0 100 100",paths:[{d:"M 85.35533905932738 85.35533905932738 A 50 50 0 0 1 3.806023374435661 69.1341716182545 A 50 50 0 0 1 49.99999999999999 7.105427357601002e-15 Z",fill:"#000000",stroke:"#000000"}]},circularArrow:{viewBox:"0 0 100 100",paths:[{d:"M 6.25 50.00000000000001 A 43.75 43.75 0 0 1 92.00503607239835 37.76727975646819 L 97.94870282721459 37.767278803641936 L 87.5 49.99999999999999 L 72.94870282721459 37.767278803641936 L 78.75626944045719 37.767278803641936 A 31.25 31.25 0 0 0 18.74999910786014 49.999997902787435 Z",fill:"#000000",stroke:"#000000"}]},cloud:{viewBox:"0 0 100 100",paths:[{d:"M 9.027777777777777 33.263888888888886 A 15.631944444444443 21.273148148148145 0 0 1 30.57998957216487 9.85246862529543 A 12.344907407407407 16.82175925925926 0 0 1 47.80891412463702 6.079559020422696 A 10.104166666666666 13.761574074074073 0 0 1 63.17482489729218 3.8997359934452227 A 11.243055555555555 15.266203703703702 0 0 1 81.4699864255032 11.79662680033136 A 12.344907407407407 16.83564814814815 0 0 1 89.70950362413667 36.805045586854234 A 15.68287037037037 21.34259259259259 0 0 1 80.50683519493268 73.45235178627696 A 13.391203703703702 18.21064814814815 0 0 1 61.5295304537904 89.80375312777574 A 15.629629629629628 21.33101851851852 0 0 1 35.53836349121606 96.03429219674027 A 17.87037037037037 24.40509259259259 0 0 1 14.265888824303735 88.73812262075411 A 10.092592592592592 13.699074074074073 0 0 1 7.154178969814962 64.32542955825295 A 10.05787037037037 13.761574074074073 0 0 1 10.355981204179617 37.95132232917963 Z",fill:"#000000",stroke:"#000000"},{d:"M 10.863425925925926 60.594907407407405 A 10.05787037037037 13.761574074074073 0 0 1 6.3341973784947445 59.507019673542544 M 16.037037037037035 80.78472222222221 A 10.092592592592592 13.699074074074073 0 0 1 14.058709360103522 81.29044790335425 M 38.14351851851852 90.4861111111111 A 15.629629629629628 21.33101851851852 0 0 1 35.927529327520006 86.22025847613271 M 66.72916666666666 80.44212962962962 A 15.629629629629628 21.33101851851852 0 0 1 65.64350914942649 86.19106007926317 M 79.00231481481481 53.13425925925926 A 13.391203703703702 18.21064814814815 0 0 1 87.87692721942935 70.4768770248552 M 96.75462962962962 35.541666666666664 A 12.344907407407407 16.83564814814815 0 0 1 92.62714666279902 41.3312984002895 M 88.71296296296296 12.560185185185185 A 11.243055555555555 15.266203703703702 0 0 1 89.03277422425806 16.48423239319878 M 67.31018518518518 9.148148148148147 A 11.243055555555555 15.266203703703702 0 0 1 69.59160776727714 5.445361345350392 M 51.25231481481481 10.925925925925926 A 10.104166666666666 13.761574074074073 0 0 1 52.582357388029564 7.102165159074247 M 32.407407407407405 12.018518518518517 A 15.631944444444443 21.273148148148145 0 0 1 35.32846815343311 14.263252515392796 M 9.55324074074074 36.54861111111111 A 15.631944444444443 21.273148148148145 0 0 1 8.640529037810998 32.332858776375595",fill:"none",stroke:"#000000"}]},cloudCallout:{viewBox:"0 0 100 100",paths:[{d:"M 9.027777777777777 33.263888888888886 A 15.631944444444443 21.273148148148145 0 0 1 30.57998957216487 9.85246862529543 A 12.344907407407407 16.82175925925926 0 0 1 47.80891412463702 6.079559020422696 A 10.104166666666666 13.761574074074073 0 0 1 63.17482489729218 3.8997359934452227 A 11.243055555555555 15.266203703703702 0 0 1 81.4699864255032 11.79662680033136 A 12.344907407407407 16.83564814814815 0 0 1 89.70950362413667 36.805045586854234 A 15.68287037037037 21.34259259259259 0 0 1 80.50683519493268 73.45235178627696 A 13.391203703703702 18.21064814814815 0 0 1 61.5295304537904 89.80375312777574 A 15.629629629629628 21.33101851851852 0 0 1 35.53836349121606 96.03429219674027 A 17.87037037037037 24.40509259259259 0 0 1 14.265888824303735 88.73812262075411 A 10.092592592592592 13.699074074074073 0 0 1 7.154178969814962 64.32542955825295 A 10.05787037037037 13.761574074074073 0 0 1 10.355981204179617 37.95132232917963 Z",fill:"#000000",stroke:"#000000"},{d:"M 31.94477777777778 112.5 A 2.7777777777777777 2.7777777777777777 0 0 1 26.389222222222223 112.5 A 2.7777777777777777 2.7777777777777777 0 0 1 31.94477777777778 112.5 Z",fill:"#000000",stroke:"#000000"},{d:"M 35.81090347544299 109.23490399880167 A 5.555555555555555 5.555555555555555 0 0 1 24.699792364331877 109.23490399880167 A 5.555555555555555 5.555555555555555 0 0 1 35.81090347544299 109.23490399880167 Z",fill:"#000000",stroke:"#000000"},{d:"M 41.43382479714197 100.69933679796284 A 8.333333333333334 8.333333333333334 0 0 1 24.767158130475302 100.69933679796284 A 8.333333333333334 8.333333333333334 0 0 1 41.43382479714197 100.69933679796284 Z",fill:"#000000",stroke:"#000000"},{d:"M 10.863425925925926 60.594907407407405 A 10.05787037037037 13.761574074074073 0 0 1 6.3341973784947445 59.507019673542544 M 16.037037037037035 80.78472222222221 A 10.092592592592592 13.699074074074073 0 0 1 14.058709360103522 81.29044790335425 M 38.14351851851852 90.4861111111111 A 15.629629629629628 21.33101851851852 0 0 1 35.927529327520006 86.22025847613271 M 66.72916666666666 80.44212962962962 A 15.629629629629628 21.33101851851852 0 0 1 65.64350914942649 86.19106007926317 M 79.00231481481481 53.13425925925926 A 13.391203703703702 18.21064814814815 0 0 1 87.87692721942935 70.4768770248552 M 96.75462962962962 35.541666666666664 A 12.344907407407407 16.83564814814815 0 0 1 92.62714666279902 41.3312984002895 M 88.71296296296296 12.560185185185185 A 11.243055555555555 15.266203703703702 0 0 1 89.03277422425806 16.48423239319878 M 67.31018518518518 9.148148148148147 A 11.243055555555555 15.266203703703702 0 0 1 69.59160776727714 5.445361345350392 M 51.25231481481481 10.925925925925926 A 10.104166666666666 13.761574074074073 0 0 1 52.582357388029564 7.102165159074247 M 32.407407407407405 12.018518518518517 A 15.631944444444443 21.273148148148145 0 0 1 35.32846815343311 14.263252515392796 M 9.55324074074074 36.54861111111111 A 15.631944444444443 21.273148148148145 0 0 1 8.640529037810998 32.332858776375595",fill:"none",stroke:"#000000"}]},corner:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 50 50 L 100 50 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},cornerTabs:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 7.0710678118654755 0 L 0 7.0710678118654755 Z",fill:"#000000",stroke:"#000000"},{d:"M 0 92.92893218813452 L 7.0710678118654755 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M 92.92893218813452 0 L 100 0 L 100 7.0710678118654755 Z",fill:"#000000",stroke:"#000000"},{d:"M 100 92.92893218813452 L 100 100 L 92.92893218813452 100 Z",fill:"#000000",stroke:"#000000"}]},cube:{viewBox:"0 0 100 100",paths:[{d:"M 0 25 L 75 25 L 75 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M 75 25 L 100 0 L 100 75 L 75 100 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 25 L 25 0 L 100 0 L 75 25 Z",fill:"color-mix(in srgb, currentColor 80%, white)",stroke:"none"},{d:"M 0 25 L 25 0 L 100 0 L 100 75 L 75 100 L 0 100 Z M 0 25 L 75 25 L 100 0 M 75 25 L 75 100",fill:"none",stroke:"#000000"}]},curvedConnector2:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 C 50 0 100 50 100 100",fill:"none",stroke:"#000000"}]},curvedConnector3:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 C 25 0 50 25 50 50 C 50 75 75 100 100 100",fill:"none",stroke:"#000000"}]},curvedConnector4:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 C 25 0 50 12.5 50 25 C 50 37.5 62.5 50 75 50 C 87.5 50 100 75 100 100",fill:"none",stroke:"#000000"}]},curvedConnector5:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 C 25 0 50 12.5 50 25 C 50 37.5 50 50 50 50 C 50 50 50 62.5 50 75 C 50 87.5 75 100 100 100",fill:"none",stroke:"#000000"}]},curvedDownArrow:{viewBox:"0 0 100 100",paths:[{d:"M 75 100 L 49.00768239224544 75 L 61.50768239224544 75 A 31.25 100 0 0 0 37.416898858120966 38.6950051637524 L 56.25 0 A 31.25 100 0 0 1 80.34078353412448 36.304994836247616 L 99.00768239224544 75 Z",fill:"#000000",stroke:"none"},{d:"M 43.75 8.348486100883193 A 31.25 100 0 0 0 16.722972521631938 107.43120402663949 L 0 100 A 31.25 100 0 0 1 35.47297252163195 0.9172820742437011 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 43.75 8.348486100883193 A 31.25 100 0 0 0 16.722972521631938 107.43120402663949 L 0 100 A 31.25 100 0 0 1 31.249999999999993 -1.4210854715202004e-14 L 56.25 0 A 31.25 100 0 0 1 80.34078353412448 36.304994836247616 L 99.00768239224544 75 L 75 100 L 49.00768239224544 75 L 61.50768239224544 75 A 31.25 100 0 0 0 37.416898858120966 38.6950051637524",fill:"none",stroke:"#000000"}]},curvedLeftArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 75 L 25 49.00768239224544 L 25 61.50768239224544 A 100 31.25 0 0 0 60.38771276200397 41.63987137975289 A 100 31.25 0 0 1 25.00000000000007 69.9536274355093 L 25 99.00768239224544 Z",fill:"#000000",stroke:"none"},{d:"M 100 56.25 A 100 31.25 0 0 0 6.123233995736766e-15 25 L 0 0 A 100 31.25 0 0 1 100.00000000000001 31.249999999999993 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 100 56.25 A 100 31.25 0 0 0 6.123233995736766e-15 25 L 0 0 A 100 31.25 0 0 1 100.00000000000001 31.249999999999993 L 100 56.25 A 100 31.25 0 0 1 63.69500516375231 80.34078353412448 L 25 99.00768239224544 L 0 75 L 25 49.00768239224544 L 25 61.50768239224544 A 100 31.25 0 0 0 60.38771276200397 41.63987137975289",fill:"none",stroke:"#000000"}]},curvedRightArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 31.25 A 100 31.25 0 0 0 36.30499483624771 55.34078353412449 L 75 49.00768239224544 L 100 75 L 75 99.00768239224544 L 75 86.50768239224544 A 100 31.25 0 0 1 38.695005163752285 62.41689885812095 Z",fill:"#000000",stroke:"none"},{d:"M 100 25 A 100 31.25 0 0 0 0.9172820742437295 52.02702747836806 A 100 31.25 0 0 1 100 16.55405495673611 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 31.25 A 100 31.25 0 0 0 36.30499483624771 55.34078353412449 L 75 49.00768239224544 L 100 75 L 75 99.00768239224544 L 75 86.50768239224544 A 100 31.25 0 0 1 38.695005163752285 62.41689885812095 L 0 31.25 A 100 31.25 0 0 1 99.99999999999999 -3.552713678800501e-15 L 100 25 A 100 31.25 0 0 0 0.9172820742437295 52.02702747836806",fill:"none",stroke:"#000000"}]},curvedUpArrow:{viewBox:"0 0 100 100",paths:[{d:"M 75 0 L 99.00768239224544 25 L 86.50768239224544 25 A 31.25 100 0 0 1 58.19392633648901 60.38771276200398 A 31.25 100 0 0 0 78.06173734898155 25 L 49.00768239224544 25 Z",fill:"#000000",stroke:"none"},{d:"M 31.25 100 A 31.25 100 0 0 1 -3.552713678800501e-15 1.2246467991473532e-14 L 25 0 A 31.25 100 0 0 0 56.25 99.99999999999999 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 43.75 91.65151389911681 A 31.25 100 0 0 0 63.61781101249255 56.26380113711283 L 49.00768239224544 25 L 75 0 L 99.00768239224544 25 L 86.50768239224544 25 A 31.25 100 0 0 1 62.41689885812095 61.304994836247694 L 31.25 100 A 31.25 100 0 0 1 -3.552713678800501e-15 1.2246467991473532e-14 L 25 0 A 31.25 100 0 0 0 56.25 99.99999999999999",fill:"none",stroke:"#000000"}]},decagon:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 9.54915028125263 19.09836593122781 L 34.54915028125263 0.00010576881489043899 L 65.45084971874738 0.00010576881489043899 L 90.45084971874738 19.09836593122781 L 100 50 L 90.45084971874738 80.90163406877218 L 65.45084971874738 99.99989423118511 L 34.54915028125263 99.99989423118511 L 9.54915028125263 80.90163406877218 Z",fill:"#000000",stroke:"#000000"}]},diagStripe:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 100 0 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},diamond:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 100 50 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},dodecagon:{viewBox:"0 0 100 100",paths:[{d:"M 0 36.601851851851855 L 13.398148148148149 13.398148148148149 L 36.601851851851855 0 L 63.398148148148145 0 L 86.60185185185185 13.398148148148149 L 100 36.601851851851855 L 100 63.398148148148145 L 86.60185185185185 86.60185185185185 L 63.398148148148145 100 L 36.601851851851855 100 L 13.398148148148149 86.60185185185185 L 0 63.398148148148145 Z",fill:"#000000",stroke:"#000000"}]},donut:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z M 25 50 A 25 25 0 0 0 50 75 A 25 25 0 0 0 75 50 A 25 25 0 0 0 50 25 A 25 25 0 0 0 25.000000000000007 50 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},doubleWave:{viewBox:"0 0 100 100",paths:[{d:"M 0 6.25 C 16.666666666666668 -14.583333333333332 33.333333333333336 27.083333333333332 50 6.25 C 66.66666666666667 -14.583333333333332 83.33333333333334 27.083333333333332 100 6.25 L 100 93.75 C 83.33333333333334 114.58333333333333 66.66666666666667 72.91666666666667 50 93.75 C 33.333333333333336 114.58333333333333 16.666666666666668 72.91666666666667 0 93.75 Z",fill:"#000000",stroke:"#000000"}]},downArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 25 50 L 25 0 L 75 0 L 75 50 L 100 50 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},downArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 64.977 L 62.5 64.977 L 62.5 75 L 75 75 L 50 100 L 25 75 L 37.5 75 L 37.5 64.977 L 0 64.977 Z",fill:"#000000",stroke:"#000000"}]},ellipse:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"#000000",stroke:"#000000"}]},ellipseRibbon:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 Q 18.75 9.375 37.5 11.71875 L 25 21.875 Q 50 28.125 75 21.875 L 62.5 11.71875 Q 81.25 9.375 100 0 L 87.5 42.96875 L 100 75 Q 87.5 81.25 75 84.375 L 75 96.875 Q 50 103.125 25 96.875 L 25 84.375 Q 12.5 81.25 0 75 L 12.5 42.96875 Z",fill:"#000000",stroke:"none"},{d:"M 37.5 24.21875 L 37.5 11.71875 L 25 21.875 Q 50 28.125 75 21.875 L 62.5 11.71875 L 62.5 24.21875 Q 50 25.78125 37.5 24.21875 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 0 Q 18.75 9.375 37.5 11.71875 L 25 21.875 Q 50 28.125 75 21.875 L 62.5 11.71875 Q 81.25 9.375 100 0 L 87.5 42.96875 L 100 75 Q 87.5 81.25 75 84.375 L 75 96.875 Q 50 103.125 25 96.875 L 25 84.375 Q 12.5 81.25 0 75 L 12.5 42.96875 Z M 25 84.375 L 25 21.875 M 75 21.875 L 75 84.375 M 37.5 11.71875 L 37.5 24.21875 M 62.5 24.21875 L 62.5 11.71875",fill:"none",stroke:"#000000"}]},ellipseRibbon2:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 Q 18.75 90.625 37.5 88.28125 L 25 78.125 Q 50 71.875 75 78.125 L 62.5 88.28125 Q 81.25 90.625 100 100 L 87.5 57.03125 L 100 25 Q 87.5 18.75 75 15.625 L 75 3.125 Q 50 -3.125 25 3.125 L 25 15.625 Q 12.5 18.75 0 25 L 12.5 57.03125 Z",fill:"#000000",stroke:"none"},{d:"M 37.5 75.78125 L 37.5 88.28125 L 25 78.125 Q 50 71.875 75 78.125 L 62.5 88.28125 L 62.5 75.78125 Q 50 74.21875 37.5 75.78125 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 100 L 12.5 57.03125 L 0 25 Q 12.5 18.75 25 15.625 L 25 3.125 Q 50 -3.125 75 3.125 L 75 15.625 Q 87.5 18.75 100 25 L 87.5 57.03125 L 100 100 Q 81.25 90.625 62.5 88.28125 L 75 78.125 Q 50 71.875 25 78.125 L 37.5 88.28125 Q 18.75 90.625 0 100 Z M 25 78.125 L 25 15.625 M 75 15.625 L 75 78.125 M 37.5 75.78125 L 37.5 88.28125 M 62.5 88.28125 L 62.5 75.78125",fill:"none",stroke:"#000000"}]},flowChartAlternateProcess:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 A 0 0 0 0 1 0 0 L 100 0 A 0 0 0 0 1 100 0 L 100 100 A 0 0 0 0 1 100 100 L 0 100 A 0 0 0 0 1 0 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartCollate:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 50 50 L 100 100 L 0 100 L 50 50 Z",fill:"#000000",stroke:"#000000"}]},flowChartConnector:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"#000000",stroke:"#000000"}]},flowChartDecision:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 100 50 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartDelay:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 A 50 50 0 0 1 50.00000000000002 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartDisplay:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 16.666666666666668 0 L 83.33333333333334 0 A 16.666666666666668 50 0 0 1 83.33333333333334 100 L 16.666666666666668 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartDocument:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 80.19444444444444 C 50 80.19444444444444 50 110.75 0 93.38888888888889 Z",fill:"#000000",stroke:"#000000"}]},flowChartExtract:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 50 0 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartInputOutput:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 20 0 L 100 0 L 80 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartInternalStorage:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M 12.5 0 L 12.5 100 M 0 12.5 L 100 12.5",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},flowChartMagneticDisk:{viewBox:"0 0 100 100",paths:[{d:"M 0 16.666666666666668 A 50 16.666666666666668 0 0 1 100 16.66666666666666 L 100 83.33333333333334 A 50 16.666666666666668 0 0 1 0 83.33333333333334 Z",fill:"#000000",stroke:"none"},{d:"M 100 16.666666666666668 A 50 16.666666666666668 0 0 1 0 16.66666666666667",fill:"none",stroke:"#000000"},{d:"M 0 16.666666666666668 A 50 16.666666666666668 0 0 1 100 16.66666666666666 L 100 83.33333333333334 A 50 16.666666666666668 0 0 1 0 83.33333333333334 Z",fill:"none",stroke:"#000000"}]},flowChartMagneticDrum:{viewBox:"0 0 100 100",paths:[{d:"M 16.666666666666668 0 L 83.33333333333334 0 A 16.666666666666668 50 0 0 1 83.33333333333334 100 L 16.666666666666668 100 A 16.666666666666668 50 0 0 1 16.666666666666664 0 Z",fill:"#000000",stroke:"none"},{d:"M 83.33333333333334 100 A 16.666666666666668 50 0 0 1 83.33333333333334 0",fill:"none",stroke:"#000000"},{d:"M 16.666666666666668 0 L 83.33333333333334 0 A 16.666666666666668 50 0 0 1 83.33333333333334 100 L 16.666666666666668 100 A 16.666666666666668 50 0 0 1 16.666666666666664 0 Z",fill:"none",stroke:"#000000"}]},flowChartMagneticTape:{viewBox:"0 0 100 100",paths:[{d:"M 50 100 A 50 50 0 0 1 0 50.00000000000001 A 50 50 0 0 1 49.99999999999999 0 A 50 50 0 0 1 100 49.999999999999986 A 50 50 0 0 1 85.35533905932738 85.35533905932735 L 100 85.35533905932738 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartManualInput:{viewBox:"0 0 100 100",paths:[{d:"M 0 20 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartManualOperation:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 80 100 L 20 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartMerge:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartMultidocument:{viewBox:"0 0 100 100",paths:[{d:"M 0 96.21296296296296 C 43.04629629629629 108.99074074074073 43.04629629629629 83.43518518518518 86.08796296296296 83.43518518518518 L 86.08796296296296 17.01388888888889 L 0 17.01388888888889 Z M 7.092592592592593 17.01388888888889 L 7.092592592592593 8.402777777777777 L 92.59259259259258 8.402777777777777 L 92.59259259259258 75.24074074074073 C 89.34259259259258 75.24074074074073 86.08796296296296 75.7037037037037 86.08796296296296 75.7037037037037 L 86.08796296296296 17.01388888888889 Z M 13.759259259259258 8.402777777777777 L 13.759259259259258 0 L 100 0 L 100 66.62962962962962 C 96.29629629629629 66.62962962962962 92.59259259259258 66.97685185185185 92.59259259259258 66.97685185185185 L 92.59259259259258 8.402777777777777 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 0 17.01388888888889 L 86.08796296296296 17.01388888888889 L 86.08796296296296 83.43518518518518 C 43.04629629629629 83.43518518518518 43.04629629629629 108.99074074074073 0 96.21296296296296 Z M 7.092592592592593 17.01388888888889 L 7.092592592592593 8.402777777777777 L 92.59259259259258 8.402777777777777 L 92.59259259259258 75.24074074074073 C 89.34259259259258 75.24074074074073 86.08796296296296 75.7037037037037 86.08796296296296 75.7037037037037 M 13.759259259259258 8.402777777777777 L 13.759259259259258 0 L 100 0 L 100 66.62962962962962 C 96.29629629629629 66.62962962962962 92.59259259259258 66.97685185185185 92.59259259259258 66.97685185185185",fill:"none",stroke:"#000000"}]},flowChartOfflineStorage:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 50 100 Z",fill:"#000000",stroke:"none"},{d:"M 40 80 L 60 80",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 50 100 Z",fill:"none",stroke:"#000000"}]},flowChartOffpageConnector:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 80 L 50 100 L 0 80 Z",fill:"#000000",stroke:"#000000"}]},flowChartOnlineStorage:{viewBox:"0 0 100 100",paths:[{d:"M 16.666666666666668 0 L 100 0 A 16.666666666666668 50 0 0 0 100 100 L 16.666666666666668 100 A 16.666666666666668 50 0 0 1 16.666666666666664 0 Z",fill:"#000000",stroke:"#000000"}]},flowChartOr:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"#000000",stroke:"none"},{d:"M 50 0 L 50 100 M 0 50 L 100 50",fill:"none",stroke:"#000000"},{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"none",stroke:"#000000"}]},flowChartPredefinedProcess:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M 12.5 0 L 12.5 100 M 87.5 0 L 87.5 100",fill:"none",stroke:"#000000"},{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"none",stroke:"#000000"}]},flowChartPreparation:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 20 0 L 80 0 L 100 50 L 80 100 L 20 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartProcess:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartPunchedCard:{viewBox:"0 0 100 100",paths:[{d:"M 0 20 L 20 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},flowChartPunchedTape:{viewBox:"0 0 100 100",paths:[{d:"M 0 10 A 25 10 0 0 0 50 9.999999999999998 A 25 10 0 0 1 100 9.999999999999995 L 100 90 A 25 10 0 0 0 50 90 A 25 10 0 0 1 0 90 Z",fill:"#000000",stroke:"#000000"}]},flowChartSort:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 100 50 L 50 100 Z",fill:"#000000",stroke:"none"},{d:"M 0 50 L 100 50",fill:"none",stroke:"#000000"},{d:"M 0 50 L 50 0 L 100 50 L 50 100 Z",fill:"none",stroke:"#000000"}]},flowChartSummingJunction:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"#000000",stroke:"none"},{d:"M 14.644660940672622 14.64466094067263 L 85.35533905932738 85.35533905932738 M 85.35533905932738 14.64466094067263 L 14.644660940672622 85.35533905932738",fill:"none",stroke:"#000000"},{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z",fill:"none",stroke:"#000000"}]},flowChartTerminator:{viewBox:"0 0 100 100",paths:[{d:"M 16.087962962962962 0 L 83.91203703703704 0 A 16.087962962962962 50 0 0 1 83.91203703703704 100 L 16.087962962962962 100 A 16.087962962962962 50 0 0 1 16.08796296296296 0 Z",fill:"#000000",stroke:"#000000"}]},foldedCorner:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 83.333 L 83.333 100 L 0 100 Z",fill:"#000000",stroke:"none"},{d:"M 83.333 100 L 86.6664 86.6664 L 100 83.333 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 83.333 100 L 86.6664 86.6664 L 100 83.333 L 83.333 100 L 0 100 L 0 0 L 100 0 L 100 83.333",fill:"none",stroke:"#000000"}]},frame:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 12.5 12.5 L 12.5 87.5 L 87.5 87.5 L 87.5 12.5 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},funnel:{viewBox:"0 0 100 100",paths:[{d:"M 0.4865947579902823 28.47932110261916 A 50 25 0 0 1 50.363602241574895 1.7268853347203788 A 50 25 0 0 1 100.24060972515952 28.47932110261915 L 62.37835131050243 94.61983027565479 A 12.5 6.25 0 0 1 37.43984756871012 94.61983027565479 Z M 5 25 A 45 20 0 0 0 95 24.999999999999996 A 45 20 0 0 0 5 24.999999999999993 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},gear6:{viewBox:"0 0 100 100",paths:[{d:"M 74.82470053891974 25.327459734495154 L 89.57808159568633 20.881065308239084 L 95.0067779720481 30.283843250962747 L 83.77939691528152 40.83744882470668 A 35 35 0 0 1 83.77939691528152 59.16255117529331 L 95.0067779720481 69.71615674903725 L 89.57808159568633 79.11893469176091 L 74.82470053891974 74.67254026550485 A 35 35 0 0 1 58.954696376361774 83.83509144079817 L 55.42869637636177 98.83509144079817 L 44.57130362363823 98.83509144079817 L 41.045303623638226 83.83509144079817 A 35 35 0 0 1 25.175299461080265 74.67254026550485 L 10.421918404313672 79.11893469176091 L 4.9932220279519015 69.71615674903725 L 16.220603084718476 59.16255117529332 A 35 35 0 0 1 16.22060308471847 40.837448824706684 L 4.9932220279519015 30.283843250962747 L 10.421918404313672 20.881065308239084 L 25.175299461080257 25.327459734495154 A 35 35 0 0 1 41.04530362363821 16.16490855920184 L 44.57130362363823 1.1649085592018338 L 55.42869637636177 1.1649085592018338 L 58.954696376361774 16.164908559201834 A 35 35 0 0 1 74.82470053891973 25.327459734495143 Z",fill:"#000000",stroke:"#000000"}]},gear9:{viewBox:"0 0 100 100",paths:[{d:"M 70.98043216644243 15.943848336764354 L 78.75884461652657 9.416638461451942 L 84.97288812699333 14.630840079204173 L 79.89554838334669 23.424519066271323 A 40 40 0 0 1 87.96281579807138 37.3974361068193 L 98.11703506542025 37.397170398710514 L 99.52564437161423 45.38579074787268 L 89.98370857871895 48.85848859310251 A 40 40 0 0 1 87.18197600808145 64.74790358438975 L 94.96073004592583 71.27470637126171 L 90.90480119853021 78.2997812068352 L 81.36304716068582 74.82658399370717 A 40 40 0 0 1 69.00327641227653 85.19766307013315 L 70.76679975508767 95.19757079067537 L 63.14414693842693 97.97198952208531 L 58.06726741472468 89.17804482690939 A 40 40 0 0 1 41.93273258527532 89.17804482690939 L 36.85585306157307 97.97198952208531 L 29.233200244912325 95.19757079067537 L 30.996723587723466 85.19766307013313 A 40 40 0 0 1 18.636952839314183 74.82658399370717 L 9.095198801469792 78.2997812068352 L 5.039269954074172 71.27470637126171 L 12.818023991918551 64.74790358438975 A 40 40 0 0 1 10.016291421281053 48.85848859310253 L 0.4743556283857657 45.38579074787268 L 1.8829649345797463 37.397170398710514 L 12.037184201928625 37.39743610681929 A 40 40 0 0 1 20.104451616653293 23.42451906627133 L 15.027111873006675 14.630840079204173 L 21.241155383473426 9.416638461451942 L 29.019567833557574 15.943848336764354 A 40 40 0 0 1 44.18107115260436 10.425512421903086 L 45.944071152604366 0.42551242190308614 L 54.055928847395634 0.42551242190308614 L 55.81892884739563 10.425512421903086 A 40 40 0 0 1 70.98043216644243 15.943848336764354 Z",fill:"#000000",stroke:"#000000"}]},halfFrame:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 66.667 33.333 L 33.333 33.333 L 33.333 66.667 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},heart:{viewBox:"0 0 100 100",paths:[{d:"M 50 25 C 70.83333333333333 -33.333333333333336 152.08333333333331 25 50 100 C -52.08333333333333 25 29.166666666666668 -33.333333333333336 50 25 Z",fill:"#000000",stroke:"#000000"}]},heptagon:{viewBox:"0 0 100 100",paths:[{d:"M -0.0002599799999956076 64.3106646 L 9.903066619999997 19.806308549999997 L 50 0 L 90.09693338 19.806308549999997 L 100.00025998 64.3106646 L 72.25196968 100.00052685 L 27.74803032 100.00052685 Z",fill:"#000000",stroke:"#000000"}]},hexagon:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 25 0.00002331250544074237 L 75 0.00002331250544074237 L 100 50 L 75 99.99997668749455 L 25 99.99997668749455 Z",fill:"#000000",stroke:"#000000"}]},homePlate:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 50 0 L 100 50 L 50 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},horizontalScroll:{viewBox:"0 0 100 100",paths:[{d:"M 100 6.25 A 6.25 6.25 0 0 1 93.75 12.5 L 93.75 6.25 A 3.125 3.125 0 0 1 87.5 6.25 L 87.5 12.5 L 6.25 12.5 A 6.25 6.25 0 0 0 8.881784197001252e-16 18.75 L 0 93.75 A 6.25 6.25 0 0 0 12.5 93.75 L 12.5 87.5 L 93.75 87.5 A 6.25 6.25 0 0 0 100 81.25 Z M 6.25 25 A 6.25 6.25 0 0 0 12.5 18.75 A 3.125 3.125 0 0 0 6.25 18.75 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 6.25 25 A 6.25 6.25 0 0 0 12.5 18.75 A 3.125 3.125 0 0 0 6.25 18.75 Z M 93.75 12.5 A 6.25 6.25 0 0 0 98.16941738241593 1.8305826175840787 A 6.25 6.25 0 0 0 87.5 6.249999999999999 A 3.125 3.125 0 0 0 93.75 6.249999999999999 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 0 18.75 A 6.25 6.25 0 0 1 6.249999999999999 12.5 L 87.5 12.5 L 87.5 6.25 A 6.25 6.25 0 0 1 100 6.249999999999997 L 100 81.25 A 6.25 6.25 0 0 1 93.75 87.5 L 12.5 87.5 L 12.5 93.75 A 6.25 6.25 0 0 1 0 93.75 Z M 87.5 12.5 L 93.75 12.5 A 6.25 6.25 0 0 0 100 6.25 M 93.75 12.5 L 93.75 6.25 A 3.125 3.125 0 0 1 87.5 6.25 M 6.25 25 L 6.25 18.75 A 3.125 3.125 0 0 1 12.5 18.75 A 6.25 6.25 0 0 1 0 18.75 M 12.5 18.75 L 12.5 87.5",fill:"none",stroke:"#000000"}]},irregularSeal1:{viewBox:"0 0 100 100",paths:[{d:"M 50 26.85185185185185 L 67.23148148148148 0 L 65.5324074074074 24.652777777777775 L 85.09259259259258 20.63425925925926 L 77.32407407407408 33.86574074074074 L 97.67129629629629 37.6712962962963 L 81.51388888888889 48.49537037037037 L 100 61.52777777777777 L 77.94907407407408 59.916666666666664 L 84.00462962962962 83.77314814814814 L 64.9074074074074 66.93055555555556 L 61.3287037037037 91.375 L 48.75925925925926 69.14351851851852 L 39.282407407407405 100 L 35.71759259259259 72.34722222222221 L 22.046296296296294 81.56018518518518 L 26.23611111111111 64.52314814814814 L 0.625 67.5324074074074 L 17.23148148148148 54.513888888888886 L 0 39.88425925925926 L 21.421296296296294 35.263888888888886 L 1.7129629629629628 10.625 L 33.85185185185185 29.259259259259256 L 38.666666666666664 10.625 Z",fill:"#000000",stroke:"#000000"}]},irregularSeal2:{viewBox:"0 0 100 100",paths:[{d:"M 53.06481481481481 20.10185185185185 L 68.47222222222221 0 L 67.24537037037037 26.74537037037037 L 83.36574074074073 14.685185185185185 L 75.83333333333333 30.24074074074074 L 100 30.763888888888886 L 78.63425925925925 43.52777777777778 L 84.58333333333333 52.26851851851852 L 75.83333333333333 56.99074074074074 L 87.39351851851852 72.37037037037037 L 67.77777777777777 66.43518518518518 L 69.17592592592592 80.41666666666666 L 56.388888888888886 73.77314814814814 L 53.75925925925926 87.23148148148148 L 45.7037037037037 80.41666666666666 L 40.27777777777778 91.25925925925925 L 34.84722222222222 83.91203703703704 L 22.76388888888889 100 L 22.24537037037037 84.44444444444444 L 5.9490740740740735 82.52314814814814 L 15.416666666666666 71.1574074074074 L 0 59.61574074074074 L 18.21759259259259 53.666666666666664 L 5.425925925925926 38.28703703703704 L 24.87037037037037 36.18981481481481 L 20.84259259259259 16.782407407407405 L 39.58333333333333 29.546296296296294 L 45.00925925925926 8.73611111111111 Z",fill:"#000000",stroke:"#000000"}]},leftArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 50 25 L 100 25 L 100 75 L 50 75 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},leftArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 25 25 L 25 37.5 L 35.022999999999996 37.5 L 35.022999999999996 0 L 100 0 L 100 100 L 35.022999999999996 100 L 35.022999999999996 62.5 L 25 62.5 L 25 75 Z",fill:"#000000",stroke:"#000000"}]},leftBrace:{viewBox:"0 0 100 100",paths:[{d:"M 100 100 A 50 8.333 0 0 1 50 91.667 L 50 58.333 A 50 8.333 0 0 0 3.061616997868383e-15 50 A 50 8.333 0 0 0 50 41.667 L 50 8.333 A 50 8.333 0 0 1 99.99999999999999 -1.7763568394002505e-15 Z",fill:"#000000",stroke:"none"},{d:"M 100 100 A 50 8.333 0 0 1 50 91.667 L 50 58.333 A 50 8.333 0 0 0 3.061616997868383e-15 50 A 50 8.333 0 0 0 50 41.667 L 50 8.333 A 50 8.333 0 0 1 99.99999999999999 -1.7763568394002505e-15",fill:"none",stroke:"#000000"}]},leftBracket:{viewBox:"0 0 100 100",paths:[{d:"M 100 100 A 100 8.333 0 0 1 0 91.667 L 0 8.333 A 100 8.333 0 0 1 99.99999999999999 -1.7763568394002505e-15 Z",fill:"#000000",stroke:"none"},{d:"M 100 100 A 100 8.333 0 0 1 0 91.667 L 0 8.333 A 100 8.333 0 0 1 99.99999999999999 -1.7763568394002505e-15",fill:"none",stroke:"#000000"}]},leftCircularArrow:{viewBox:"0 0 100 100",paths:[{d:"M 6.25 50.00000000000001 L 18.75 50.00000000000001 A 31.25 31.25 0 0 0 78.75627033259704 62.2327190991455 L 72.94870282721459 62.232721196358064 L 87.5 50 L 97.94870282721459 62.232721196358064 L 92.00503579491598 62.232721196358064 A 43.75 43.75 0 0 1 6.249999722517629 50.00000095282626 Z",fill:"#000000",stroke:"#000000"}]},leftRightArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 50 25 L 50 25 L 50 0 L 100 50 L 50 100 L 50 75 L 50 75 L 50 100 Z",fill:"#000000",stroke:"#000000"}]},leftRightArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 25 25 L 25 37.5 L 25.9385 37.5 L 25.9385 0 L 74.0615 0 L 74.0615 37.5 L 75 37.5 L 75 25 L 100 50 L 75 75 L 75 62.5 L 74.0615 62.5 L 74.0615 100 L 25.9385 100 L 25.9385 62.5 L 25 62.5 L 25 75 Z",fill:"#000000",stroke:"#000000"}]},leftRightCircularArrow:{viewBox:"0 0 100 100",paths:[{d:"M 12.5 50.00000000000001 L 2.0512971727853966 37.76727880364194 L 7.9949639276016455 37.767279756468184 A 43.75 43.75 0 0 1 92.00503607239835 37.76727975646819 L 97.94870282721459 37.767278803641936 L 87.5 49.99999999999999 L 72.94870282721459 37.767278803641936 L 78.75626944045719 37.767278803641936 A 31.25 31.25 0 0 0 21.243728775263097 37.76727880364193 L 27.051297172785397 37.76727880364194 Z",fill:"#000000",stroke:"#000000"}]},leftRightRibbon:{viewBox:"0 0 100 100",paths:[{d:"M 0 41.6665 L 46.875 0 L 46.875 16.6665 L 50 16.6665 A 3.125 4.16675 0 0 1 50 25 A 3.125 4.16675 0 0 0 50 33.3335 L 53.125 33.3335 L 53.125 16.667 L 100 58.3335 L 53.125 100 L 53.125 83.3335 L 50 83.3335 A 3.125 4.16675 0 0 1 46.875 79.16675000000001 L 46.875 66.6665 L 46.875 66.6665 L 46.875 83.333 Z",fill:"#000000",stroke:"none"},{d:"M 53.125 20.83325 A 3.125 4.16675 0 0 1 50 25 A 3.125 4.16675 0 0 0 50 33.3335 L 53.125 33.3335 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none"},{d:"M 0 41.6665 L 46.875 0 L 46.875 16.6665 L 50 16.6665 A 3.125 4.16675 0 0 1 50 25 A 3.125 4.16675 0 0 0 50 33.3335 L 53.125 33.3335 L 53.125 16.667 L 100 58.3335 L 53.125 100 L 53.125 83.3335 L 50 83.3335 A 3.125 4.16675 0 0 1 46.875 79.16675000000001 L 46.875 66.6665 L 46.875 66.6665 L 46.875 83.333 Z M 53.125 20.83325 L 53.125 33.3335 M 46.875 29.16675 L 46.875 66.6665",fill:"none",stroke:"#000000"}]},leftRightUpArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 75 L 25 50 L 25 62.5 L 37.5 62.5 L 37.5 25 L 25 25 L 50 0 L 75 25 L 62.5 25 L 62.5 62.5 L 75 62.5 L 75 50 L 100 75 L 75 100 L 75 87.5 L 25 87.5 L 25 100 Z",fill:"#000000",stroke:"#000000"}]},leftUpArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 75 L 25 50 L 25 62.5 L 62.5 62.5 L 62.5 25 L 50 25 L 75 0 L 100 25 L 87.5 25 L 87.5 87.5 L 25 87.5 L 25 100 Z",fill:"#000000",stroke:"#000000"}]},lightningBolt:{viewBox:"0 0 100 100",paths:[{d:"M 39.22222222222222 0 L 59.53703703703703 28.148148148148145 L 51.157407407407405 31.46759259259259 L 76.74537037037037 55.58796296296296 L 68.36574074074073 59.61574074074074 L 100 100 L 46.35185185185185 69.05092592592592 L 56.58333333333333 64.75462962962962 L 23.25 44.93055555555555 L 35.19444444444444 38.80555555555555 L 0 18.00925925925926 Z",fill:"#000000",stroke:"#000000"}]},line:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 100",fill:"none",stroke:"#000000"}]},lineInv:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 100 0",fill:"none",stroke:"#000000"}]},mathDivide:{viewBox:"0 0 100 100",paths:[{d:"M 50 11.790000000000004 A 11.76 11.76 0 0 1 50.00000000000001 35.31 A 11.76 11.76 0 0 1 49.99999999999999 11.790000000000004 Z M 50 88.21 A 11.76 11.76 0 0 1 50 64.68999999999998 A 11.76 11.76 0 0 1 50.00000000000001 88.21 Z M 13.255000000000003 38.24 L 86.745 38.24 L 86.745 61.76 L 13.255000000000003 61.76 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},mathEqual:{viewBox:"0 0 100 100",paths:[{d:"M 13.255000000000003 20.599999999999998 L 86.745 20.599999999999998 L 86.745 44.12 L 13.255000000000003 44.12 Z M 13.255000000000003 55.88 L 86.745 55.88 L 86.745 79.4 L 13.255000000000003 79.4 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},mathMinus:{viewBox:"0 0 100 100",paths:[{d:"M 13.255000000000003 38.24 L 86.745 38.24 L 86.745 61.76 L 13.255000000000003 61.76 Z",fill:"#000000",stroke:"#000000"}]},mathMultiply:{viewBox:"0 0 100 100",paths:[{d:"M 15.701924253246204 32.3330757467538 L 32.3330757467538 15.7019242532462 L 50 33.3688485064924 L 67.66692425324621 15.7019242532462 L 84.2980757467538 32.3330757467538 L 66.63115149350759 50 L 84.2980757467538 67.66692425324621 L 67.66692425324621 84.2980757467538 L 50 66.6311514935076 L 32.3330757467538 84.2980757467538 L 15.701924253246204 67.66692425324621 L 33.36884850649241 50 Z",fill:"#000000",stroke:"#000000"}]},mathNotEqual:{viewBox:"0 0 100 100",paths:[{d:"M 13.255000000000003 20.599999999999998 L 48.185994283109636 20.599999999999998 L 55.6837811089934 0 L 77.78535154987797 8.044313771019729 L 73.21545549174309 20.599999999999998 L 86.745 20.599999999999998 L 86.745 44.12 L 64.654875581802 44.12 L 60.37458562683146 55.88 L 86.745 55.88 L 86.745 79.4 L 51.81400571689038 79.4 L 44.3162188910066 100 L 22.214648450122027 91.95568622898027 L 26.78454450825693 79.4 L 13.255000000000003 79.4 L 13.255000000000003 55.88 L 35.34512441819801 55.88 L 39.62541437316855 44.12 L 13.255000000000003 44.12 Z",fill:"#000000",stroke:"#000000"}]},mathPlus:{viewBox:"0 0 100 100",paths:[{d:"M 13.255000000000003 38.24 L 38.24 38.24 L 38.24 13.255000000000003 L 61.76 13.255000000000003 L 61.76 38.24 L 86.745 38.24 L 86.745 61.76 L 61.76 61.76 L 61.76 86.745 L 38.24 86.745 L 38.24 61.76 L 13.255000000000003 61.76 Z",fill:"#000000",stroke:"#000000"}]},moon:{viewBox:"0 0 100 100",paths:[{d:"M 100 100 A 100 50 0 0 1 99.99999999999999 0 A 125 62.5 0 0 0 100 69.33752296828366 Z",fill:"#000000",stroke:"#000000"}]},nonIsoscelesTrapezoid:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 25 0 L 75 0 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},noSmoking:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 50 99.99999999999997 A 50 50 0 0 1 0 49.99999999999998 Z M 77.5147233635495 64.81561670087828 A 31.25 31.25 0 0 0 35.18438329912174 22.4852766364505 Z M 22.4852766364505 35.18438329912172 A 31.25 31.25 0 0 0 64.81561670087828 77.51472336354949 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},notchedRightArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 25 L 50 25 L 50 0 L 100 50 L 50 100 L 50 75 L 0 75 L 25 50 Z",fill:"#000000",stroke:"#000000"}]},octagon:{viewBox:"0 0 100 100",paths:[{d:"M 0 29.289 L 29.289 0 L 70.711 0 L 100 29.289 L 100 70.711 L 70.711 100 L 29.289 100 L 0 70.711 Z",fill:"#000000",stroke:"#000000"}]},parallelogram:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 25 0 L 100 0 L 75 100 Z",fill:"#000000",stroke:"#000000"}]},pentagon:{viewBox:"0 0 100 100",paths:[{d:"M 0.00010576881489043899 38.19650407644447 L 50 0 L 99.99989423118511 38.19650407644447 L 80.90163406877218 99.99974592355554 L 19.09836593122782 99.99974592355554 Z",fill:"#000000",stroke:"#000000"}]},pie:{viewBox:"0 0 100 100",paths:[{d:"M 100 50 A 50 50 0 0 1 14.64466094067263 85.35533905932738 A 50 50 0 0 1 49.99999999999999 0 L 50 50 Z",fill:"#000000",stroke:"#000000"}]},pieWedge:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 A 100 100 0 0 1 99.99999999999999 -1.4210854715202004e-14 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},plaque:{viewBox:"0 0 100 100",paths:[{d:"M 0 16.667 A 16.667 16.667 0 0 0 16.667 0 L 83.333 0 A 16.667 16.667 0 0 0 100 16.666999999999998 L 100 83.333 A 16.667 16.667 0 0 0 83.333 100 L 16.667 100 A 16.667 16.667 0 0 0 1.0205594100694468e-15 83.333 Z",fill:"#000000",stroke:"#000000"}]},plaqueTabs:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 7.0710678118654755 0 A 7.0710678118654755 7.0710678118654755 0 0 1 4.3297802811774667e-16 7.0710678118654755 Z",fill:"#000000",stroke:"#000000"},{d:"M 0 92.92893218813452 A 7.0710678118654755 7.0710678118654755 0 0 1 7.071067811865476 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M 100 0 L 100 7.0710678118654755 A 7.0710678118654755 7.0710678118654755 0 0 1 92.92893218813452 8.659560562354933e-16 Z",fill:"#000000",stroke:"#000000"},{d:"M 92.92893218813452 100 A 7.0710678118654755 7.0710678118654755 0 0 1 100 92.92893218813452 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},plus:{viewBox:"0 0 100 100",paths:[{d:"M 0 25 L 25 25 L 25 0 L 75 0 L 75 25 L 100 25 L 100 75 L 75 75 L 75 100 L 25 100 L 25 75 L 0 75 Z",fill:"#000000",stroke:"#000000"}]},quadArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 22.5 27.5 L 22.5 38.75 L 38.75 38.75 L 38.75 22.5 L 27.5 22.5 L 50 0 L 72.5 22.5 L 61.25 22.5 L 61.25 38.75 L 77.5 38.75 L 77.5 27.5 L 100 50 L 77.5 72.5 L 77.5 61.25 L 61.25 61.25 L 61.25 77.5 L 72.5 77.5 L 50 100 L 27.5 77.5 L 38.75 77.5 L 38.75 61.25 L 22.5 61.25 L 22.5 72.5 Z",fill:"#000000",stroke:"#000000"}]},quadArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 18.515 31.485 L 18.515 40.7425 L 25.9385 40.7425 L 25.9385 25.9385 L 40.7425 25.9385 L 40.7425 18.515 L 31.485 18.515 L 50 0 L 68.515 18.515 L 59.2575 18.515 L 59.2575 25.9385 L 74.0615 25.9385 L 74.0615 40.7425 L 81.485 40.7425 L 81.485 31.485 L 100 50 L 81.485 68.515 L 81.485 59.2575 L 74.0615 59.2575 L 74.0615 74.0615 L 59.2575 74.0615 L 59.2575 81.485 L 68.515 81.485 L 50 100 L 31.485 81.485 L 40.7425 81.485 L 40.7425 74.0615 L 25.9385 74.0615 L 25.9385 59.2575 L 18.515 59.2575 L 18.515 68.515 Z",fill:"#000000",stroke:"#000000"}]},rect:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 0 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},ribbon:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 34.375 0 A 3.125 4.16675 0 0 1 34.375 8.3335 L 28.125 8.3335 A 3.125 4.16675 0 0 0 28.125 16.667 L 71.875 16.667 A 3.125 4.16675 0 0 0 71.875 8.3335 L 65.625 8.3335 A 3.125 4.16675 0 0 1 65.625 0 L 100 0 L 87.5 41.6665 L 100 83.333 L 75 83.333 L 75 95.83324999999999 A 3.125 4.16675 0 0 1 71.875 100 L 28.125 100 A 3.125 4.16675 0 0 1 25 95.83324999999999 L 25 83.333 L 0 83.333 L 12.5 41.6665 Z",fill:"#000000",stroke:"none"},{d:"M 37.5 4.16675 A 3.125 4.16675 0 0 1 34.375 8.3335 L 28.125 8.3335 A 3.125 4.16675 0 0 0 28.125 16.667 L 37.5 16.667 Z M 62.5 4.16675 A 3.125 4.16675 0 0 0 65.625 8.3335 L 71.875 8.3335 A 3.125 4.16675 0 0 1 71.875 16.667 L 62.5 16.667 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 0 0 L 34.375 0 A 3.125 4.16675 0 0 1 34.375 8.3335 L 28.125 8.3335 A 3.125 4.16675 0 0 0 28.125 16.667 L 71.875 16.667 A 3.125 4.16675 0 0 0 71.875 8.3335 L 65.625 8.3335 A 3.125 4.16675 0 0 1 65.625 0 L 100 0 L 87.5 41.6665 L 100 83.333 L 75 83.333 L 75 95.83324999999999 A 3.125 4.16675 0 0 1 71.875 100 L 28.125 100 A 3.125 4.16675 0 0 1 25 95.83324999999999 L 25 83.333 L 0 83.333 L 12.5 41.6665 Z M 37.5 4.16675 L 37.5 16.667 M 62.5 16.667 L 62.5 4.16675 M 25 83.333 L 25 12.500250000000001 M 75 12.500250000000001 L 75 83.333",fill:"none",stroke:"#000000"}]},ribbon2:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 34.375 100 A 3.125 4.16675 0 0 0 34.375 91.66649999999998 L 28.125 91.6665 A 3.125 4.16675 0 0 1 28.125 83.333 L 71.875 83.333 A 3.125 4.16675 0 0 1 71.875 91.66650000000001 L 65.625 91.6665 A 3.125 4.16675 0 0 0 65.625 100 L 100 100 L 87.5 58.3335 L 100 16.667 L 75 16.667 L 75 4.16675 A 3.125 4.16675 0 0 0 71.875 0 L 28.125 0 A 3.125 4.16675 0 0 0 25 4.166750000000001 L 25 16.667 L 0 16.667 L 12.5 58.3335 Z",fill:"#000000",stroke:"none"},{d:"M 37.5 95.83324999999999 A 3.125 4.16675 0 0 0 34.375 91.66649999999998 L 28.125 91.6665 A 3.125 4.16675 0 0 1 28.125 83.333 L 37.5 83.333 Z M 62.5 95.83324999999999 A 3.125 4.16675 0 0 1 65.625 91.66649999999998 L 71.875 91.6665 A 3.125 4.16675 0 0 0 71.875 83.333 L 62.5 83.333 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 0 100 L 12.5 58.3335 L 0 16.667 L 25 16.667 L 25 4.16675 A 3.125 4.16675 0 0 1 28.125 -8.881784197001252e-16 L 71.875 0 A 3.125 4.16675 0 0 1 75 4.1667499999999995 L 75 16.667 L 75 16.667 L 100 16.667 L 87.5 58.3335 L 100 100 L 65.625 100 A 3.125 4.16675 0 0 1 65.625 91.66649999999998 L 71.875 91.6665 A 3.125 4.16675 0 0 0 71.875 83.333 L 28.125 83.333 A 3.125 4.16675 0 0 0 28.125 91.66650000000001 L 34.375 91.6665 A 3.125 4.16675 0 0 1 34.375 100 Z M 37.5 83.333 L 37.5 95.83324999999999 M 62.5 95.83324999999999 L 62.5 83.333 M 25 87.49975 L 25 16.667 M 75 16.667 L 75 87.49975",fill:"none",stroke:"#000000"}]},rightArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 25 L 50 25 L 50 0 L 100 50 L 50 100 L 50 75 L 0 75 Z",fill:"#000000",stroke:"#000000"}]},rightArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 64.977 0 L 64.977 37.5 L 75 37.5 L 75 25 L 100 50 L 75 75 L 75 62.5 L 64.977 62.5 L 64.977 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},rightBrace:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 A 50 8.333 0 0 1 50.00000000000001 8.332999999999998 L 50 41.667 A 50 8.333 0 0 0 100 50 A 50 8.333 0 0 0 50.000000000000014 58.333 L 50 91.667 A 50 8.333 0 0 1 3.061616997868383e-15 100 Z",fill:"#000000",stroke:"none"},{d:"M 0 0 A 50 8.333 0 0 1 50.00000000000001 8.332999999999998 L 50 41.667 A 50 8.333 0 0 0 100 50 A 50 8.333 0 0 0 50.000000000000014 58.333 L 50 91.667 A 50 8.333 0 0 1 3.061616997868383e-15 100",fill:"none",stroke:"#000000"}]},rightBracket:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 A 100 8.333 0 0 1 100.00000000000001 8.332999999999998 L 100 91.667 A 100 8.333 0 0 1 6.123233995736766e-15 100 Z",fill:"#000000",stroke:"none"},{d:"M 0 0 A 100 8.333 0 0 1 100.00000000000001 8.332999999999998 L 100 91.667 A 100 8.333 0 0 1 6.123233995736766e-15 100",fill:"none",stroke:"#000000"}]},round1Rect:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},round2DiagRect:{viewBox:"0 0 100 100",paths:[{d:"M 16.667 0 L 100 0 A 0 0 0 0 1 100 0 L 100 83.333 A 16.667 16.667 0 0 1 83.333 100 L 0 100 A 0 0 0 0 1 0 100 L 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 Z",fill:"#000000",stroke:"#000000"}]},round2SameRect:{viewBox:"0 0 100 100",paths:[{d:"M 16.667 0 L 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 100 A 0 0 0 0 1 100 100 L 0 100 A 0 0 0 0 1 0 100 L 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 Z",fill:"#000000",stroke:"#000000"}]},roundRect:{viewBox:"0 0 100 100",paths:[{d:"M 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 L 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 83.333 A 16.667 16.667 0 0 1 83.333 100 L 16.667 100 A 16.667 16.667 0 0 1 0 83.333 Z",fill:"#000000",stroke:"#000000"}]},rtTriangle:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 0 0 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},smileyFace:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 0 50.000000000000014 Z",fill:"#000000",stroke:"none"},{d:"M 28.77314814814815 35.0462962962963 A 5.208333333333333 5.208333333333333 0 0 1 39.18981481481482 35.0462962962963 A 5.208333333333333 5.208333333333333 0 0 1 28.77314814814815 35.0462962962963 M 60.81018518518518 35.0462962962963 A 5.208333333333333 5.208333333333333 0 0 1 71.22685185185185 35.0462962962963 A 5.208333333333333 5.208333333333333 0 0 1 60.81018518518518 35.0462962962963",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 22.89967279598138 71.80533333333332 Q 50 90.41733333333333 77.03703703703704 71.80533333333332",fill:"none",stroke:"#000000"},{d:"M 0 50 A 50 50 0 0 1 100 49.99999999999998 A 50 50 0 0 1 0 50.000000000000014 Z",fill:"none",stroke:"#000000"}]},snip1Rect:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 83.333 0 L 100 16.667 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},snip2DiagRect:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 83.333 0 L 100 16.667 L 100 100 L 100 100 L 16.667 100 L 0 83.333 L 0 0 Z",fill:"#000000",stroke:"#000000"}]},snip2SameRect:{viewBox:"0 0 100 100",paths:[{d:"M 16.667 0 L 83.333 0 L 100 16.667 L 100 100 L 100 100 L 0 100 L 0 100 L 0 16.667 Z",fill:"#000000",stroke:"#000000"}]},snipRoundRect:{viewBox:"0 0 100 100",paths:[{d:"M 16.667 0 L 83.333 0 L 100 16.667 L 100 100 L 0 100 L 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 Z",fill:"#000000",stroke:"#000000"}]},squareTabs:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 7.0710678118654755 0 L 7.0710678118654755 7.0710678118654755 L 0 7.0710678118654755 Z",fill:"#000000",stroke:"#000000"},{d:"M 0 92.92893218813452 L 7.0710678118654755 92.92893218813452 L 7.0710678118654755 100 L 0 100 Z",fill:"#000000",stroke:"#000000"},{d:"M 92.92893218813452 0 L 100 0 L 100 7.0710678118654755 L 92.92893218813452 7.0710678118654755 Z",fill:"#000000",stroke:"#000000"},{d:"M 92.92893218813452 92.92893218813452 L 100 92.92893218813452 L 100 100 L 92.92893218813452 100 Z",fill:"#000000",stroke:"#000000"}]},star10:{viewBox:"0 0 100 100",paths:[{d:"M -0.00007738000000045986 34.549 L 13.819211287416401 24.99952793 L 19.09811633 9.549 L 36.180085377416404 9.548565019999998 L 50 0 L 63.819914622583596 9.548565019999998 L 80.90188367 9.549 L 86.18078871258359 24.99952793 L 100.00007738 34.549 L 94.72174817999999 50 L 100.00007738 65.451 L 86.18078871258359 75.00047207 L 80.90188367 90.451 L 63.819914622583596 90.45143498 L 50 100 L 36.180085377416404 90.45143498 L 19.09811633 90.451 L 13.819211287416401 75.00047207 L -0.00007738000000045986 65.451 L 5.278251820000001 50 Z",fill:"#000000",stroke:"#000000"}]},star12:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 13.77778151415994 40.294285808655474 L 6.698729810778062 25 L 23.483495705504467 23.48349570550447 L 25 6.698729810778069 L 40.294285808655474 13.77778151415994 L 50 0 L 59.705714191344526 13.77778151415994 L 75 6.698729810778069 L 76.51650429449553 23.48349570550447 L 93.30127018922194 25 L 86.22221848584006 40.294285808655474 L 100 50 L 86.22221848584006 59.705714191344526 L 93.30127018922194 75 L 76.51650429449553 76.51650429449553 L 75 93.30127018922192 L 59.705714191344526 86.22221848584006 L 50 100 L 40.294285808655474 86.22221848584006 L 25 93.30127018922192 L 23.483495705504467 76.51650429449553 L 6.698729810778062 75 L 13.77778151415994 59.705714191344526 Z",fill:"#000000",stroke:"#000000"}]},star16:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 13.220374999999997 42.684125 L 3.8059999999999974 30.866 L 18.819875 29.166125 L 14.6445 14.6445 L 29.166125 18.819875 L 30.866 3.8059999999999974 L 42.684125 13.220374999999997 L 50 0 L 57.315875 13.220374999999997 L 69.134 3.8059999999999974 L 70.833875 18.819875 L 85.3555 14.6445 L 81.180125 29.166125 L 96.194 30.866 L 86.77962500000001 42.684125 L 100 50 L 86.77962500000001 57.315875 L 96.194 69.134 L 81.180125 70.833875 L 85.3555 85.3555 L 70.833875 81.180125 L 69.134 96.194 L 57.315875 86.77962500000001 L 50 100 L 42.684125 86.77962500000001 L 30.866 96.194 L 29.166125 81.180125 L 14.6445 85.3555 L 18.819875 70.833875 L 3.8059999999999974 69.134 L 13.220374999999997 57.315875 Z",fill:"#000000",stroke:"#000000"}]},star24:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 12.820999999999998 45.105125 L 1.7037086855465873 37.059047744873965 L 15.354500000000002 35.6495 L 6.698729810778062 25 L 20.249375 27.1715 L 14.644660940672622 14.64466094067263 L 27.1715 20.249375 L 25 6.698729810778069 L 35.6495 15.354500000000002 L 37.059047744873965 1.7037086855465873 L 45.105125 12.820999999999998 L 50 0 L 54.894875 12.820999999999998 L 62.940952255126035 1.7037086855465873 L 64.3505 15.354500000000002 L 75 6.698729810778069 L 72.82849999999999 20.249375 L 85.35533905932738 14.64466094067263 L 79.750625 27.1715 L 93.30127018922194 25 L 84.6455 35.6495 L 98.29629131445341 37.059047744873965 L 87.179 45.105125 L 100 50 L 87.179 54.894875 L 98.29629131445341 62.940952255126035 L 84.6455 64.3505 L 93.30127018922194 75 L 79.750625 72.82849999999999 L 85.35533905932738 85.35533905932738 L 72.82849999999999 79.750625 L 75 93.30127018922192 L 64.3505 84.6455 L 62.940952255126035 98.29629131445341 L 54.894875 87.179 L 50 100 L 45.105125 87.179 L 37.059047744873965 98.29629131445341 L 35.6495 84.6455 L 25 93.30127018922192 L 27.1715 79.750625 L 14.644660940672622 85.35533905932738 L 20.249375 72.82849999999999 L 6.698729810778062 75 L 15.354500000000002 64.3505 L 1.7037086855465873 62.940952255126035 L 12.820999999999998 54.894875 Z",fill:"#000000",stroke:"#000000"}]},star32:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 12.680750000000003 46.32425 L 0.9605000000000032 40.2455 L 14.11475 39.1145 L 3.8059999999999974 30.866 L 16.927999999999997 32.322500000000005 L 8.426499999999997 22.2215 L 21.012125 26.210375 L 14.644660940672622 14.64466094067263 L 26.210375 21.012125 L 22.2215 8.426499999999997 L 32.322500000000005 16.927999999999997 L 30.866 3.8059999999999974 L 39.1145 14.11475 L 40.2455 0.9605000000000032 L 46.32425 12.680750000000003 L 50 0 L 53.67575 12.680750000000003 L 59.7545 0.9605000000000032 L 60.8855 14.11475 L 69.134 3.8059999999999974 L 67.6775 16.927999999999997 L 77.77850000000001 8.426499999999997 L 73.789625 21.012125 L 85.35533905932738 14.64466094067263 L 78.987875 26.210375 L 91.5735 22.2215 L 83.072 32.322500000000005 L 96.194 30.866 L 85.88525 39.1145 L 99.0395 40.2455 L 87.31925 46.32425 L 100 50 L 87.31925 53.67575 L 99.0395 59.7545 L 85.88525 60.8855 L 96.194 69.134 L 83.072 67.6775 L 91.5735 77.77850000000001 L 78.987875 73.789625 L 85.35533905932738 85.35533905932738 L 73.789625 78.987875 L 77.77850000000001 91.5735 L 67.6775 83.072 L 69.134 96.194 L 60.8855 85.88525 L 59.7545 99.0395 L 53.67575 87.31925 L 50 100 L 46.32425 87.31925 L 40.2455 99.0395 L 39.1145 85.88525 L 30.866 96.194 L 32.322500000000005 83.072 L 22.2215 91.5735 L 26.210375 78.987875 L 14.644660940672622 85.35533905932738 L 21.012125 73.789625 L 8.426499999999997 77.77850000000001 L 16.927999999999997 67.6775 L 3.8059999999999974 69.134 L 14.11475 60.8855 L 0.9605000000000032 59.7545 L 12.680750000000003 53.67575 Z",fill:"#000000",stroke:"#000000"}]},star4:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 41.161165235168156 41.161165235168156 L 50 0 L 58.838834764831844 41.161165235168156 L 100 50 L 58.838834764831844 58.838834764831844 L 50 100 L 41.161165235168156 58.838834764831844 Z",fill:"#000000",stroke:"#000000"}]},star5:{viewBox:"0 0 100 100",paths:[{d:"M 0.00010576881489043899 38.19650407644447 L 38.19681185109177 38.196772907038735 L 50 0 L 61.80318814890823 38.196772907038735 L 99.99989423118511 38.19650407644447 L 69.09795960054346 61.80313916296127 L 80.90163406877218 99.99974592355554 L 50 76.39267586 L 19.09836593122782 99.99974592355554 L 30.90204039945654 61.80313916296127 Z",fill:"#000000",stroke:"#000000"}]},star6:{viewBox:"0 0 100 100",paths:[{d:"M 0.000023312505433636943 25 L 33.3330602 24.999578643550826 L 50 0 L 66.6669398 24.999578643550826 L 99.99997668749457 25 L 83.3338796 50 L 99.99997668749457 75 L 66.6669398 75.00042135644918 L 50 100 L 33.3330602 75.00042135644918 L 0.000023312505433636943 75 L 16.666120399999997 50 Z",fill:"#000000",stroke:"#000000"}]},star7:{viewBox:"0 0 100 100",paths:[{d:"M -0.0002599799999956076 64.3106646 L 15.398820088640399 44.504445983508 L 9.903066619999997 19.806308549999997 L 34.6011919420464 19.806347509263 L 50 0 L 65.3988080579536 19.806347509263 L 90.09693338 19.806308549999997 L 84.6011799113596 44.504445983508 L 100.00025998 64.3106646 L 77.7478798376276 75.302350457229 L 72.25196968 100.00052685 L 50 89.0087121 L 27.74803032 100.00052685 L 22.252120162372403 75.302350457229 Z",fill:"#000000",stroke:"#000000"}]},star8:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 15.354500000000002 35.6495 L 14.644660940672622 14.64466094067263 L 35.6495 15.354500000000002 L 50 0 L 64.3505 15.354500000000002 L 85.35533905932738 14.64466094067263 L 84.6455 35.6495 L 100 50 L 84.6455 64.3505 L 85.35533905932738 85.35533905932738 L 64.3505 84.6455 L 50 100 L 35.6495 84.6455 L 14.644660940672622 85.35533905932738 L 15.354500000000002 64.3505 Z",fill:"#000000",stroke:"#000000"}]},straightConnector1:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 100 100",fill:"none",stroke:"#000000"}]},stripedRightArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 25 L 0 25 L 0 75 L 0 75 Z M 0 25 L 0 25 L 0 75 L 0 75 Z M 15.625 25 L 50 25 L 50 0 L 100 50 L 50 100 L 50 75 L 15.625 75 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},sun:{viewBox:"0 0 100 100",paths:[{d:"M 100 50 L 79.82292175292969 57.175445556640625 L 79.82292175292969 42.824554443359375 Z M 85.35185185185185 14.643518518518519 L 76.16092175292968 33.986554443359374 L 66.01344555664062 23.83907824707031 Z M 50 0 L 57.175445556640625 20.177078247070312 L 42.824554443359375 20.177078247070312 Z M 14.643518518518519 14.643518518518519 L 33.986554443359374 23.83907824707031 L 23.83907824707031 33.986554443359374 Z M 0 50 L 20.177078247070312 42.824554443359375 L 20.177078247070312 57.175445556640625 Z M 14.643518518518519 85.35185185185185 L 23.83907824707031 66.01344555664062 L 33.986554443359374 76.16092175292968 Z M 50 100 L 42.824554443359375 79.82292175292969 L 57.175445556640625 79.82292175292969 Z M 85.35185185185185 85.35185185185185 L 66.01344555664062 76.16092175292968 L 76.16092175292968 66.01344555664062 Z M 25 50 A 25 25 0 0 1 75 49.99999999999999 A 25 25 0 0 1 25 50.00000000000001 Z",fill:"#000000",stroke:"#000000",fillRule:"evenodd",clipRule:"evenodd"}]},swooshArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 Q 16.666666666666668 33.333333333333336 83.333 0 L 83.333 0 L 100 7.5 L 86.14982349750278 25 L 86.14982349750278 25 Q 25 33.333333333333336 0 100 Z",fill:"#000000",stroke:"#000000"}]},teardrop:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 A 50 50 0 0 1 49.99999999999999 -7.105427357601002e-15 Q 75 0 100 0 Q 100 25 100 50 A 50 50 0 0 1 50 100 A 50 50 0 0 1 0 50.00000000000001 Z",fill:"#000000",stroke:"#000000"}]},trapezoid:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 25 0 L 75 0 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},triangle:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 50 0 L 100 100 Z",fill:"#000000",stroke:"#000000"}]},upArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 35.022999999999996 L 37.5 35.022999999999996 L 37.5 25 L 25 25 L 50 0 L 75 25 L 62.5 25 L 62.5 35.022999999999996 L 100 35.022999999999996 L 100 100 L 0 100 Z",fill:"#000000",stroke:"#000000"}]},upDownArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 50 L 50 0 L 100 50 L 75 50 L 75 50 L 100 50 L 50 100 L 0 50 L 25 50 L 25 50 Z",fill:"#000000",stroke:"#000000"}]},upDownArrowCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 25.9385 L 37.5 25.9385 L 37.5 25 L 25 25 L 50 0 L 75 25 L 62.5 25 L 62.5 25.9385 L 100 25.9385 L 100 74.0615 L 62.5 74.0615 L 62.5 75 L 75 75 L 50 100 L 25 75 L 37.5 75 L 37.5 74.0615 L 0 74.0615 Z",fill:"#000000",stroke:"#000000"}]},uturnArrow:{viewBox:"0 0 100 100",paths:[{d:"M 0 100 L 0 43.75 A 43.75 43.75 0 0 1 43.74999999999999 -7.105427357601002e-15 L 43.75 0 A 43.75 43.75 0 0 1 87.5 43.749999999999986 L 87.5 50 L 100 50 L 75 75 L 50 50 L 62.5 50 L 62.5 43.75 A 18.75 18.75 0 0 0 43.75 25 L 43.75 25 A 18.75 18.75 0 0 0 25 43.75 L 25 100 Z",fill:"#000000",stroke:"#000000"}]},verticalScroll:{viewBox:"0 0 100 100",paths:[{d:"M 6.25 100 A 6.25 6.25 0 0 0 12.5 93.75 L 6.25 93.75 A 3.125 3.125 0 0 0 6.25 87.5 L 12.5 87.5 L 12.5 6.25 A 6.25 6.25 0 0 1 18.75 -8.881784197001252e-16 L 93.75 0 A 6.25 6.25 0 0 1 93.75 12.5 L 87.5 12.5 L 87.5 93.75 A 6.25 6.25 0 0 1 81.25 100 Z M 25 6.25 A 6.25 6.25 0 0 1 18.75 12.5 A 3.125 3.125 0 0 1 18.75 6.25 Z",fill:"#000000",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 25 6.25 A 6.25 6.25 0 0 1 18.75 12.5 A 3.125 3.125 0 0 1 18.75 6.25 Z M 12.5 93.75 A 6.25 6.25 0 0 1 1.8305826175840787 98.16941738241593 A 6.25 6.25 0 0 1 6.249999999999999 87.5 A 3.125 3.125 0 0 1 6.250000000000001 93.75 Z",fill:"color-mix(in srgb, currentColor 80%, black)",stroke:"none",fillRule:"evenodd",clipRule:"evenodd"},{d:"M 12.5 87.5 L 12.5 6.25 A 6.25 6.25 0 0 1 18.75 -8.881784197001252e-16 L 93.75 0 A 6.25 6.25 0 0 1 93.75 12.5 L 87.5 12.5 L 87.5 93.75 A 6.25 6.25 0 0 1 81.25 100 L 6.25 100 A 6.25 6.25 0 0 1 6.249999999999999 87.5 Z M 18.75 0 A 6.25 6.25 0 0 1 18.750000000000004 12.5 A 3.125 3.125 0 0 1 18.750000000000004 6.25 L 25 6.25 M 87.5 12.5 L 18.75 12.5 M 6.25 87.5 A 3.125 3.125 0 0 1 6.250000000000002 93.75 L 12.5 93.75 M 6.25 100 A 6.25 6.25 0 0 0 12.5 93.75 L 12.5 87.5",fill:"none",stroke:"#000000"}]},wave:{viewBox:"0 0 100 100",paths:[{d:"M 0 12.5 C 33.333333333333336 -29.166666666666664 66.66666666666667 54.166666666666664 100 12.5 L 100 87.5 C 66.66666666666667 129.16666666666666 33.333333333333336 45.833333333333336 0 87.5 Z",fill:"#000000",stroke:"#000000"}]},wedgeEllipseCallout:{viewBox:"0 0 100 100",paths:[{d:"M 29.167 112.5 L 25.428460527844393 93.54583157970805 A 50 50 0 0 1 65.81115470846487 2.5657572339877106 A 50 50 0 0 1 43.53022094510429 99.57965267103867 Z",fill:"#000000",stroke:"#000000"}]},wedgeRectCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 0 L 16.666666666666668 0 L 16.666666666666668 0 L 41.666666666666664 0 L 100 0 L 100 58.333333333333336 L 100 58.333333333333336 L 100 83.33333333333333 L 100 100 L 41.666666666666664 100 L 29.167 112.5 L 16.666666666666668 100 L 0 100 L 0 83.33333333333333 L 0 58.333333333333336 L 0 58.333333333333336 Z",fill:"#000000",stroke:"#000000"}]},wedgeRoundRectCallout:{viewBox:"0 0 100 100",paths:[{d:"M 0 16.667 A 16.667 16.667 0 0 1 16.666999999999998 -3.552713678800501e-15 L 16.666666666666668 0 L 16.666666666666668 0 L 41.666666666666664 0 L 83.333 0 A 16.667 16.667 0 0 1 100 16.666999999999998 L 100 58.333333333333336 L 100 58.333333333333336 L 100 83.33333333333333 L 100 83.333 A 16.667 16.667 0 0 1 83.333 100 L 41.666666666666664 100 L 29.167 112.5 L 16.666666666666668 100 L 16.667 100 A 16.667 16.667 0 0 1 0 83.333 L 0 83.33333333333333 L 0 58.333333333333336 L 0 58.333333333333336 Z",fill:"#000000",stroke:"#000000"}]}},Zut=["fill","stroke","strokeWidth","fillRule","clipRule"],Jut=Yut;function I9(t){if(!t)return null;let e={};return Zut.forEach(n=>{let r=t[n];if(r!==void 0)if(n==="strokeWidth"){if(typeof r=="number")e.strokeWidth=r;else if(typeof r=="string"){let i=Number(r);Number.isFinite(i)&&(e.strokeWidth=i)}}else typeof r=="string"&&(e[n]=r)}),Object.keys(e).length?e:null}function Qut(t,e){let n=t.map(i=>({...i}));if(!e)return n;let r=(i,s)=>typeof e=="function"?I9(e(i,s)):Array.isArray(e)?I9(e[s]):I9(e);return n.map((i,s)=>{let o=r(i,s);return o?{...i,...o}:i})}function edt(t){let{preset:e,styleOverrides:n}=t;if(!e)throw new Error("createPresetShape requires a preset name.");let r=Jut[e];if(!r)throw new Error(`Unknown preset shape: ${e}`);return{preset:e,viewBox:r.viewBox,paths:Qut(r.paths,n)}}function jU(t){let e=edt(t),n=e.paths.map(r=>{let i=[`d="${r.d}"`];return r.fill!==void 0&&i.push(`fill="${r.fill}"`),r.stroke!==void 0&&i.push(`stroke="${r.stroke}"`),r.strokeWidth!==void 0&&i.push(`stroke-width="${r.strokeWidth}"`),r.fillRule!==void 0&&i.push(`fill-rule="${r.fillRule}"`),r.clipRule!==void 0&&i.push(`clip-rule="${r.clipRule}"`),`  <path ${i.join(" ")} />`}).join(`
`);return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${e.viewBox}" preserveAspectRatio="none">
${n}
</svg>`}function $U(t){if(typeof t!="string")return;const e=t.trim();if(!e)return;const n=e.startsWith("#")?e.slice(1):e;if(/^[0-9A-Fa-f]{3}$|^[0-9A-Fa-f]{6}$/.test(n))return`#${n}`}function tdt(t,e){e.forEach(n=>{const r=typeof n.position=="number"&&Number.isFinite(n.position)?Math.max(0,Math.min(1,n.position)):0,i=$U(n.color);if(!i)return;const s=typeof n.alpha=="number"&&Number.isFinite(n.alpha)?Math.max(0,Math.min(1,n.alpha)):1,o=document.createElementNS("http://www.w3.org/2000/svg","stop");o.setAttribute("offset",`${r*100}%`),o.setAttribute("stop-color",i),s<1&&o.setAttribute("stop-opacity",s.toString()),t.appendChild(o)})}function ndt(t,e){const{gradientType:n,stops:r,angle:i}=t;if(!r||r.length===0)return null;let s;if(n==="linear"){s=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),s.setAttribute("id",e);const o=i*Math.PI/180,a=50-50*Math.cos(o),l=50+50*Math.sin(o),c=50+50*Math.cos(o),u=50-50*Math.sin(o);s.setAttribute("x1",`${a}%`),s.setAttribute("y1",`${l}%`),s.setAttribute("x2",`${c}%`),s.setAttribute("y2",`${u}%`)}else s=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),s.setAttribute("id",e),s.setAttribute("cx","50%"),s.setAttribute("cy","50%"),s.setAttribute("r","50%");return tdt(s,r),s}function rdt(t,e){try{const n=odt("gradient"),r=ndt(e,n);if(!r)return;let i=t.querySelector("defs");i||(i=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.insertBefore(i,t.firstChild)),i.appendChild(r),t.querySelectorAll('[fill]:not([fill="none"])').forEach(o=>{o.setAttribute("fill",`url(#${n})`)})}catch(n){console.error("Failed to apply gradient to SVG:",n)}}function idt(t,e){try{const{color:n,alpha:r}=e,i=$U(n);if(!i)return;const s=typeof r=="number"&&Number.isFinite(r)?Math.max(0,Math.min(1,r)):1;t.querySelectorAll('[fill]:not([fill="none"])').forEach(a=>{a.setAttribute("fill",i),a.setAttribute("fill-opacity",s.toString())})}catch(n){console.error("Failed to apply alpha to SVG:",n)}}let sdt=0;function odt(t="gradient"){return`${t}-${Date.now()}-${sdt++}-${Math.random().toString(36).substring(2,11)}`}const Ho={container:"superdoc-layout",page:"superdoc-page",fragment:"superdoc-fragment",line:"superdoc-line",spread:"superdoc-spread",pageHeader:"superdoc-page-header",pageFooter:"superdoc-page-footer"},adt={background:"#fff",boxShadow:"0 4px 20px rgba(15, 23, 42, 0.08)",border:"1px solid rgba(15, 23, 42, 0.08)",margin:"0 auto"},Ore={display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"0",overflowY:"auto"},ldt={display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"safe center",background:"transparent",padding:"0",overflowX:"auto",minHeight:"100%"},cdt={display:"flex",flexDirection:"row",alignItems:"center",gap:"0px"},L5=(t,e,n)=>{const r={...adt,...n||{}};return{position:"relative",width:`${t}px`,height:`${e}px`,minWidth:`${t}px`,minHeight:`${e}px`,flexShrink:"0",background:r.background,boxShadow:r.boxShadow,border:r.border,margin:r.margin,overflow:"hidden"}},sy={position:"absolute",whiteSpace:"pre",overflow:"visible",boxSizing:"border-box"},udt=t=>({lineHeight:`${t}px`,height:`${t}px`,position:"relative",display:"block",whiteSpace:"pre",overflow:"visible"}),ddt=`
@media print {
  .${Ho.container} {
    background: transparent;
    padding: 0;
  }

  .${Ho.page} {
    margin: 0;
    border: none;
    box-shadow: none;
    page-break-after: always;
  }
}
`,fdt=`
/* Reset browser default link styling - allow run colors to show through from inline styles
 *
 * Note: !important was removed from these rules to allow inline styles to take precedence.
 * This is necessary because OOXML hyperlink character styles apply colors via inline style
 * attributes on the run elements. The CSS cascade ensures that inline styles (applied via
 * element.style.color in applyRunStyles) override these class-based rules naturally.
 *
 * Implications:
 * - OOXML hyperlink character styles will correctly display their assigned colors
 * - Browser default link colors are still reset by these inherit rules
 * - Inline color styles from run objects override the inherit value as expected
 */
.superdoc-link {
  color: inherit;
  text-decoration: none;
}

.superdoc-link:visited {
  color: inherit;
}

.superdoc-link:hover {
  text-decoration: underline;
}

/* Focus visible for keyboard navigation (WCAG 2.1 SC 2.4.7) */
.superdoc-link:focus-visible {
  outline: 2px solid #0066cc;
  outline-offset: 2px;
  border-radius: 2px;
}

/* Remove outline for mouse users */
.superdoc-link:focus:not(:focus-visible) {
  outline: none;
}

/* Active state */
.superdoc-link:active {
  opacity: 0.8;
}

/* Print mode: show URLs after links */
@media print {
  .superdoc-link::after {
    content: " (" attr(href) ")";
    font-size: 0.9em;
    color: #666;
  }

  /* Don't show URL for anchor-only links */
  .superdoc-link[href^="#"]::after {
    content: "";
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .superdoc-link:focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .superdoc-link {
    transition: none;
  }
}

/* Screen reader only content (WCAG SC 1.3.1) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* TOC entry specific styles - prevent wrapping */
.superdoc-toc-entry {
  white-space: nowrap !important;
}

.superdoc-toc-entry .superdoc-link {
  color: inherit !important;
  text-decoration: none !important;
  cursor: default;
}

.superdoc-toc-entry .superdoc-link:hover {
  text-decoration: none;
}

/* Override focus styles for TOC links (they're not interactive) */
.superdoc-toc-entry .superdoc-link:focus-visible {
  outline: none;
}

/* Remove focus outlines from layout engine elements */
.superdoc-layout,
.superdoc-page,
.superdoc-layout:focus,
.superdoc-page:focus {
  outline: none !important;
}
`,hdt=`
.superdoc-layout .track-insert-dec.hidden,
.superdoc-layout .track-delete-dec.hidden {
  display: none;
}

.superdoc-layout .track-insert-dec.highlighted {
  border-top: 1px dashed #00853d;
  border-bottom: 1px dashed #00853d;
  background-color: #399c7222;
}

.superdoc-layout .track-delete-dec.highlighted {
  border-top: 1px dashed #cb0e47;
  border-bottom: 1px dashed #cb0e47;
  background-color: #cb0e4722;
  text-decoration: line-through !important;
  text-decoration-thickness: 2px !important;
}

.superdoc-layout .track-format-dec.highlighted {
  border-bottom: 2px solid gold;
}
`,pdt=`
/* Document Section - Block-level container with gray border and hover tooltip */
.superdoc-document-section {
  background-color: #fafafa;
  border: 1px solid #ababab;
  border-radius: 4px;
  position: relative;
  box-sizing: border-box;
}

/* Document section tooltip - positioned above the fragment */
.superdoc-document-section__tooltip {
  position: absolute;
  top: -19px;
  left: -1px;
  max-width: 100px;
  min-width: 0;
  height: 18px;
  border: 1px solid #ababab;
  border-bottom: none;
  border-radius: 6px 6px 0 0;
  padding: 0 8px;
  align-items: center;
  font-size: 10px;
  display: none;
  z-index: 100;
  background-color: #fafafa;
  pointer-events: none;
}

.superdoc-document-section__tooltip span {
  max-width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Show tooltip on hover - adjust border radius to connect with tooltip tab */
.superdoc-document-section:hover {
  border-radius: 0 4px 4px 4px;
}

.superdoc-document-section:hover .superdoc-document-section__tooltip {
  display: flex;
  align-items: center;
}

/* Continuation styling: first fragment has top corners, last has bottom corners */
.superdoc-document-section[data-sdt-container-start="true"] {
  border-radius: 4px 4px 0 0;
}

.superdoc-document-section[data-sdt-container-end="true"] {
  border-radius: 0 0 4px 4px;
}

.superdoc-document-section[data-sdt-container-start="true"][data-sdt-container-end="true"] {
  border-radius: 4px;
}

.superdoc-document-section[data-sdt-container-start="true"]:hover {
  border-radius: 0 4px 0 0;
}

/* Middle fragments have no border radius */
.superdoc-document-section:not([data-sdt-container-start="true"]):not([data-sdt-container-end="true"]) {
  border-radius: 0;
  border-top: none;
}

/* Structured Content Block - Blue border container */
.superdoc-structured-content-block {
  padding: 1px;
  box-sizing: border-box;
  border-radius: 4px;
  border: 1px solid #629be7;
  position: relative;
}

/* Structured content drag handle/label - positioned above */
.superdoc-structured-content__label {
  font-size: 10px;
  align-items: center;
  justify-content: center;
  position: absolute;
  left: 2px;
  top: -19px;
  width: calc(100% - 4px);
  max-width: 110px;
  min-width: 0;
  height: 18px;
  padding: 0 4px;
  border: 1px solid #629be7;
  border-bottom: none;
  border-radius: 6px 6px 0 0;
  background-color: #629be7dd;
  box-sizing: border-box;
  z-index: 10;
  display: none;
  pointer-events: none;
}

.superdoc-structured-content__label span {
  max-width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.superdoc-structured-content-block:hover .superdoc-structured-content__label {
  display: inline-flex;
}

/* Continuation styling for structured content blocks */
.superdoc-structured-content-block[data-sdt-container-start="true"] {
  border-radius: 4px 4px 0 0;
}

.superdoc-structured-content-block[data-sdt-container-end="true"] {
  border-radius: 0 0 4px 4px;
}

.superdoc-structured-content-block[data-sdt-container-start="true"][data-sdt-container-end="true"] {
  border-radius: 4px;
}

.superdoc-structured-content-block:not([data-sdt-container-start="true"]):not([data-sdt-container-end="true"]) {
  border-radius: 0;
  border-top: none;
}

/* Structured Content Inline - Inline wrapper with blue border */
.superdoc-structured-content-inline {
  padding: 1px;
  box-sizing: border-box;
  border-radius: 4px;
  border: 1px solid #629be7;
  position: relative;
  display: inline;
}

/* Hover effect for inline structured content */
.superdoc-structured-content-inline:hover {
  background-color: rgba(98, 155, 231, 0.15);
  border-color: #4a8ad9;
}

/* Inline structured content label - shown on hover */
.superdoc-structured-content-inline__label {
  position: absolute;
  bottom: calc(100% + 2px);
  left: 50%;
  transform: translateX(-50%);
  font-size: 10px;
  padding: 2px 6px;
  background-color: #629be7dd;
  color: white;
  border-radius: 4px;
  white-space: nowrap;
  z-index: 100;
  display: none;
  pointer-events: none;
}

.superdoc-structured-content-inline:hover .superdoc-structured-content-inline__label {
  display: block;
}

/* Viewing mode: remove structured content affordances */
.presentation-editor--viewing .superdoc-structured-content-block,
.presentation-editor--viewing .superdoc-structured-content-inline {
  background: none;
  border: none;
  padding: 0;
}

.presentation-editor--viewing .superdoc-structured-content-inline:hover {
  background: none;
  border: none;
}

.presentation-editor--viewing .superdoc-structured-content__label,
.presentation-editor--viewing .superdoc-structured-content-inline__label {
  display: none !important;
}

/* Print mode: hide visual styling for SDT containers */
@media print {
  .superdoc-document-section,
  .superdoc-structured-content-block,
  .superdoc-structured-content-inline {
    background: none;
    border: none;
    padding: 0;
  }

  .superdoc-document-section__tooltip,
  .superdoc-structured-content__label,
  .superdoc-structured-content-inline__label {
    display: none !important;
  }
}
`,mdt=`
/* Field annotation draggable styles */
.superdoc-layout .annotation[data-draggable="true"] {
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
}

.superdoc-layout .annotation[data-draggable="true"]:hover {
  opacity: 0.9;
}

.superdoc-layout .annotation[data-draggable="true"]:active {
  cursor: grabbing;
}

/* Drag over indicator for drop targets */
.superdoc-layout.drag-over {
  outline: 2px dashed #b015b3;
  outline-offset: -2px;
}

/* Drop zone indicator */
.superdoc-layout .superdoc-drop-indicator {
  position: absolute;
  width: 2px;
  background-color: #b015b3;
  pointer-events: none;
  z-index: 1000;
}
`,gdt=`
/* Highlight for selected images (block or inline) */
.superdoc-image-selected {
  outline: 2px solid #4a90e2;
  outline-offset: 2px;
  border-radius: 2px;
  box-shadow: 0 0 0 1px rgba(74, 144, 226, 0.35);
}

/* Ensure inline images can be targeted */
.superdoc-inline-image.superdoc-image-selected {
  outline-offset: 2px;
}
`,ydt=`
/* Hide native browser selection on layout engine content.
 * We render our own selection overlay via PresentationEditor's #localSelectionLayer
 * for precise control over selection geometry across pages and zoom levels. */
.superdoc-layout *::selection {
  background: transparent;
}

.superdoc-layout *::-moz-selection {
  background: transparent;
}
`;let Pre=!1,Fre=!1,Bre=!1,jre=!1,$re=!1,zre=!1,Hre=!1;const bdt=t=>{var n;if(Pre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-print-styles","true"),e.textContent=ddt,(n=t.head)==null||n.appendChild(e),Pre=!0},wdt=t=>{var n;if(Fre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-link-styles","true"),e.textContent=fdt,(n=t.head)==null||n.appendChild(e),Fre=!0},vdt=t=>{var n;if(Bre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-track-change-styles","true"),e.textContent=hdt,(n=t.head)==null||n.appendChild(e),Bre=!0},xdt=t=>{var n;if(jre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-sdt-container-styles","true"),e.textContent=pdt,(n=t.head)==null||n.appendChild(e),jre=!0},Edt=t=>{var n;if($re||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-field-annotation-styles","true"),e.textContent=mdt,(n=t.head)==null||n.appendChild(e),$re=!0},Sdt=t=>{var n;if(zre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-image-selection-styles","true"),e.textContent=gdt,(n=t.head)==null||n.appendChild(e),zre=!0},Adt=t=>{var n;if(Hre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-native-selection-styles","true"),e.textContent=ydt,(n=t.head)==null||n.appendChild(e),Hre=!0},iu={PAGE:"superdoc-page",FRAGMENT:"superdoc-fragment",LINE:"superdoc-line",INLINE_SDT_WRAPPER:"superdoc-structured-content-inline"},V1e=["http","https","mailto","tel","sms"],Tdt=["ftp","sftp","irc"],kdt=["javascript","data","vbscript","file","ssh","ws","wss"],Cdt=2048,_dt=500,Ndt=/^[A-Za-z0-9._-]+$/;function Vre(t){const e=new Set;return t&&t.forEach(n=>{typeof n=="string"&&n.trim()&&e.add(n.trim().toLowerCase())}),e}function Idt(t={}){var r;const e=(r=t.allowedProtocols)!=null&&r.length?Vre(t.allowedProtocols):new Set(V1e),n=Vre(t.optionalProtocols);return n.size>0&&n.forEach(i=>{Tdt.includes(i)&&e.add(i)}),e}function Rdt(t){const e=new Set,n=new Set;return t?(t.forEach(r=>{if(!r||typeof r!="string")return;const i=r.trim().toLowerCase();i&&(i.includes("://")?n.add(i):e.add(i))}),{hosts:e,urls:n}):{hosts:e,urls:n}}function Mdt(t){if(!t.startsWith("#"))return null;const e=t.slice(1);return!e||!Ndt.test(e)?null:{href:`#${e}`,protocol:null,isExternal:!1}}function Ldt(t,e,n){return n.includes(t)?!1:e.has(t)}function Ddt(t,e,n){const{hosts:r,urls:i}=n,s=e.hostname?e.hostname.toLowerCase():"";if(r.size>0&&s&&r.has(s))return!0;if(i.size>0){const o=t.toLowerCase();for(const a of i)if(o.startsWith(a))return!0}return!1}function pb(t,e={}){if(typeof t!="string")return null;const n=t.trim();if(!n)return null;const r=typeof e.maxLength=="number"?e.maxLength:Cdt;if(n.length>r)return null;const i=Mdt(n);if(i!==null)return i;if(n.startsWith("/")||n.startsWith(".")||n.startsWith("//")||/^www\./i.test(n))return null;const s=n.match(/^([a-z0-9+.-]+):/i);if(!s)return null;const o=s[1].toLowerCase(),a=Idt(e),l=kdt.concat(e.blockedProtocols??[]).map(b=>b.toLowerCase());if(!Ldt(o,a,l))return null;const c=n.indexOf("://")+3;let u=n.indexOf("/",c);u===-1&&(u=n.indexOf("?",c)),u===-1&&(u=n.indexOf("#",c)),u===-1&&(u=n.length);const d=n.slice(c,u).toLowerCase();d&&/[^\x00-\x7F]/.test(d)&&(_e.env.NODE_ENV==="development"||_e.env.DEBUG_HYPERLINKS==="true")&&console.warn(`[URL Validation] Potential homograph attack detected in hostname: ${d.slice(0,50)}`);const f=n.indexOf("?");if(f!==-1){const b=n.slice(f);if(/[<>"']/.test(b))return null}let h;try{h=new URL(n)}catch{return null}const m=n,y=Rdt(e.redirectBlocklist);return Ddt(m,h,y)?null:{href:m,protocol:o,isExternal:o==="http"||o==="https"}}function U1e(t,e=_dt){if(typeof t!="string")return null;const n=t.trim();if(!n)return null;const r=typeof e=="number"&&e>0?e:0,i=r>0&&n.length>r;return{text:r>0&&n.length>r?n.slice(0,r):n,wasTruncated:i}}const Odt={DEFAULT_ALLOWED_PROTOCOLS:V1e},Pdt=new Set(["none","single","double","dashed","dotted","thick","triple","dotDash","dotDotDash","wave","doubleWave"]),Fdt=t=>!t||t==="none"?"none":Pdt.has(t)?{none:"none",single:"solid",double:"double",dashed:"dashed",dotted:"dotted",thick:"solid",triple:"solid",dotDash:"dashed",dotDotDash:"dashed",wave:"solid",doubleWave:"solid"}[t]:(console.warn(`Invalid border style: ${t}, using 'solid' fallback`),"solid"),Bdt=t=>/^#[0-9A-Fa-f]{6}$/.test(t),D5=(t,e,n)=>{if(!n)return;if(n.style==="none"||n.width===0){t.style[`border${e}`]="none";return}const r=Fdt(n.style),i=n.width??1,s=n.color??"#000000",o=Bdt(s)?s:"#000000",a=n.style==="thick"?Math.max(i*2,3):i;t.style[`border${e}`]=`${a}px ${r} ${o}`},jdt=(t,e)=>{e&&(D5(t,"Top",e.top),D5(t,"Right",e.right),D5(t,"Bottom",e.bottom),D5(t,"Left",e.left))},uf=t=>{if(t){if(typeof t=="object"&&"none"in t&&t.none)return{style:"none",width:0};if(typeof t=="object"){const e=t,n=typeof e.width=="number"?e.width:typeof e.size=="number"?e.size:void 0,r=typeof e.color=="string"?e.color:void 0,i=typeof e.space=="number"?e.space:void 0,o={style:e.style??"single"};return n!=null&&(o.width=n),r&&(o.color=r),i!=null&&(o.space=i),o}}},$dt=(t,e,n,r,i)=>{const s=e===0,o=e===r-1,a=n===0,l=n===i-1;return{top:uf(s?t==null?void 0:t.top:t==null?void 0:t.insideH),bottom:uf(o?t==null?void 0:t.bottom:null),left:uf(a?t==null?void 0:t.left:t==null?void 0:t.insideV),right:uf(l?t==null?void 0:t.right:null)}},zdt=8;function Hdt(t){var h,m,y,w,b,E,A;const{doc:e,lineEl:n,markerLayout:r,markerMeasure:i,indentLeftPx:s}=t,o=(r==null?void 0:r.justification)??"left",a=(typeof(r==null?void 0:r.markerBoxWidthPx)=="number"?r.markerBoxWidthPx:void 0)??(i==null?void 0:i.markerWidth)??0,l=(typeof(r==null?void 0:r.gutterWidthPx)=="number"?r.gutterWidthPx:void 0)??(i==null?void 0:i.gutterWidth)??zdt,c=o==="left"?s:(typeof(r==null?void 0:r.markerX)=="number"?r.markerX:void 0)??s,u=c-a,d=e.createElement("div");d.style.position="relative",d.style.width="100%";const f=e.createElement("span");return f.classList.add("superdoc-paragraph-marker"),f.textContent=(r==null?void 0:r.markerText)??"",f.style.display="inline-block",f.style.fontFamily=Hb((h=r==null?void 0:r.run)==null?void 0:h.fontFamily)??((m=r==null?void 0:r.run)==null?void 0:m.fontFamily)??"",((y=r==null?void 0:r.run)==null?void 0:y.fontSize)!=null&&(f.style.fontSize=`${r.run.fontSize}px`),f.style.fontWeight=(w=r==null?void 0:r.run)!=null&&w.bold?"bold":"",f.style.fontStyle=(b=r==null?void 0:r.run)!=null&&b.italic?"italic":"",(E=r==null?void 0:r.run)!=null&&E.color&&(f.style.color=r.run.color),((A=r==null?void 0:r.run)==null?void 0:A.letterSpacing)!=null&&(f.style.letterSpacing=`${r.run.letterSpacing}px`),f.style.position="absolute",f.style.left=`${u}px`,f.style.width=`${a}px`,f.style.textAlign=o,f.style.paddingRight=`${l}px`,n.style.paddingLeft=`${c}px`,d.appendChild(f),d.appendChild(n),d}function Vdt(t,e){var i,s,o;const n=(i=e.attrs)==null?void 0:i.borders;if(n){t.style.boxSizing="border-box";const a={top:{width:"border-top-width",style:"border-top-style",color:"border-top-color"},bottom:{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},left:{width:"border-left-width",style:"border-left-style",color:"border-left-color"},right:{width:"border-right-width",style:"border-right-style",color:"border-right-color"}};["top","bottom","left","right"].forEach(l=>{const c=n[l];if(!c)return;const u=c.style??"solid";let d=typeof c.width=="number"?Math.max(0,c.width):1;u==="none"&&(d=0);const f=a[l];t.style.setProperty(f.style,u),t.style.setProperty(f.width,`${d}px`),c.color&&t.style.setProperty(f.color,c.color)})}const r=(o=(s=e.attrs)==null?void 0:s.shading)==null?void 0:o.fill;r&&(t.style.backgroundColor=r)}const Udt=t=>{var k,_,N,L,M,C,D,O,$,U,W,ce,se;const{doc:e,x:n,y:r,rowHeight:i,cellMeasure:s,cell:o,borders:a,renderLine:l,renderDrawingContent:c,context:u,applySdtDataset:d,fromLine:f,toLine:h}=t,m=o==null?void 0:o.attrs,y=(m==null?void 0:m.padding)||{top:2,left:4,right:4,bottom:2},w=y.left??4,b=y.top??2,E=y.right??4,A=y.bottom??2,x=e.createElement("div");x.style.position="absolute",x.style.left=`${n}px`,x.style.top=`${r}px`,x.style.width=`${s.width}px`,x.style.height=`${i}px`,x.style.boxSizing="border-box",x.style.overflow="hidden",x.style.paddingLeft=`${w}px`,x.style.paddingTop=`${b}px`,x.style.paddingRight=`${E}px`,x.style.paddingBottom=`${A}px`,a&&jdt(x,a),(k=o==null?void 0:o.attrs)!=null&&k.background&&(x.style.backgroundColor=o.attrs.background);const T=(o==null?void 0:o.blocks)??(o!=null&&o.paragraph?[o.paragraph]:[]),R=(s==null?void 0:s.blocks)??(s!=null&&s.paragraph?[s.paragraph]:[]);if(T.length>0&&R.length>0){const Q=e.createElement("div");Q.style.position="relative",Q.style.width="100%",Q.style.height="100%",Q.style.display="flex",Q.style.flexDirection="column",((_=o==null?void 0:o.attrs)==null?void 0:_.verticalAlign)==="center"?Q.style.justifyContent="center":((N=o==null?void 0:o.attrs)==null?void 0:N.verticalAlign)==="bottom"?Q.style.justifyContent="flex-end":Q.style.justifyContent="flex-start",x.appendChild(Q);const J=[];for(let G=0;G<Math.min(R.length,T.length);G++){const B=R[G];B.kind==="paragraph"?J.push(((L=B.lines)==null?void 0:L.length)||0):J.push(0)}const K=J.reduce((G,B)=>G+B,0),re=f??0,X=h===-1||h===void 0?K:h;let me=0;for(let G=0;G<Math.min(R.length,T.length);G++){const B=R[G],z=T[G];if(B.kind==="image"&&(z==null?void 0:z.kind)==="image"){const de=e.createElement("div");de.style.position="relative",de.style.width=`${B.width}px`,de.style.height=`${B.height}px`,de.style.maxWidth="100%",de.style.boxSizing="border-box",d(de,(M=z.attrs)==null?void 0:M.sdt);const Y=e.createElement("img");Y.classList.add("superdoc-table-image"),z.src&&(Y.src=z.src),Y.alt=z.alt??"",Y.style.width="100%",Y.style.height="100%",Y.style.objectFit=z.objectFit??"contain",z.objectFit==="cover"&&(Y.style.objectPosition="left top"),Y.style.display="block",de.appendChild(Y),Q.appendChild(de);continue}if(B.kind==="drawing"&&(z==null?void 0:z.kind)==="drawing"){const de=e.createElement("div");de.style.position="relative",de.style.width=`${B.width}px`,de.style.height=`${B.height}px`,de.style.maxWidth="100%",de.style.boxSizing="border-box",d(de,z.attrs);const Y=e.createElement("div");if(Y.classList.add("superdoc-table-drawing"),Y.style.width="100%",Y.style.height="100%",Y.style.display="flex",Y.style.alignItems="center",Y.style.justifyContent="center",Y.style.overflow="hidden",z.drawingKind==="image"&&"src"in z&&z.src){const ee=e.createElement("img");ee.classList.add("superdoc-drawing-image"),ee.src=z.src,ee.alt=z.alt??"",ee.style.width="100%",ee.style.height="100%",ee.style.objectFit=z.objectFit??"contain",z.objectFit==="cover"&&(ee.style.objectPosition="left top"),Y.appendChild(ee)}else if(c){const ee=c(z);ee.style.width="100%",ee.style.height="100%",Y.appendChild(ee)}else{const ee=e.createElement("div");ee.style.width="100%",ee.style.height="100%",ee.style.background="repeating-linear-gradient(45deg, rgba(15,23,42,0.1), rgba(15,23,42,0.1) 6px, rgba(15,23,42,0.2) 6px, rgba(15,23,42,0.2) 12px)",ee.style.border="1px dashed rgba(15, 23, 42, 0.3)",Y.appendChild(ee)}de.appendChild(Y),Q.appendChild(de);continue}if(B.kind==="paragraph"&&(z==null?void 0:z.kind)==="paragraph"){const de=B,Y=de.lines,ee=(Y==null?void 0:Y.length)||0,ae=((C=z.attrs)==null?void 0:C.wordLayout)??null,ie=ae==null?void 0:ae.marker,H=de.marker,be=(H==null?void 0:H.indentLeft)??(ae==null?void 0:ae.indentLeftPx)??((D=z.attrs)!=null&&D.indent&&typeof z.attrs.indent.left=="number"?z.attrs.indent.left:0),Te=me;if(me+ee<=re){me+=ee;continue}if(Te>=X){me+=ee;continue}const oe=Math.max(0,re-Te),te=Math.min(ee,X-Te),ye=e.createElement("div");ye.style.position="relative",ye.style.left="0",ye.style.width="100%",d(ye,(O=z.attrs)==null?void 0:O.sdt),Vdt(ye,z),zU(ye,($=z.attrs)==null?void 0:$.borders),HU(ye,(U=z.attrs)==null?void 0:U.shading);let ke=0;for(let Ae=oe;Ae<te&&Ae<Y.length;Ae++){const Re=Y[Ae],Pe=Ae===Y.length-1,Ce=l(z,Re,{...u,section:"body"},Ae,Pe);if(Ce.style.paddingLeft="",Ce.style.paddingRight="",Ce.style.textIndent="",ie&&H&&Ae===0&&oe===0&&H.markerWidth>0){const Fe=Hdt({doc:e,lineEl:Ce,markerLayout:ie,markerMeasure:H,indentLeftPx:be});ye.appendChild(Fe)}else{if(ie&&be)Ce.style.paddingLeft=`${be}px`;else{const Fe=(W=z.attrs)==null?void 0:W.indent;if(Fe){const $e=typeof Fe.left=="number"?Fe.left:0,he=typeof Fe.hanging=="number"?Fe.hanging:0,q=typeof Fe.firstLine=="number"?Fe.firstLine:0,ne=Ae===0&&oe===0,Ee=q-he;ne?($e>0&&(Ce.style.paddingLeft=`${$e}px`),Ee!==0&&(Ce.style.textIndent=`${Ee}px`)):$e>0&&(Ce.style.paddingLeft=`${$e}px`),typeof Fe.right=="number"&&Fe.right>0&&(Ce.style.paddingRight=`${Fe.right}px`)}}ye.appendChild(Ce)}ke+=Re.lineHeight}const we=oe===0&&te>=ee;if(we&&B.totalHeight&&B.totalHeight>ke&&(ke=B.totalHeight),Q.appendChild(ye),ke>0&&(ye.style.height=`${ke}px`),we){const Ae=(se=(ce=z.attrs)==null?void 0:ce.spacing)==null?void 0:se.after;typeof Ae=="number"&&Ae>0&&(ye.style.marginBottom=`${Ae}px`)}me+=ee}else me+=0}}return{cellElement:x}},Ure=t=>{var x,T,R,k;const{doc:e,container:n,rowIndex:r,y:i,rowMeasure:s,row:o,totalRows:a,tableBorders:l,columnWidths:c,allRowHeights:u,context:d,renderLine:f,renderDrawingContent:h,applySdtDataset:m,continuesFromPrev:y,continuesOnNext:w,partialRow:b}=t,E=_=>{let N=0;for(let L=0;L<_&&L<c.length;L++)N+=c[L];return N},A=(_,N)=>{let L=0;for(let M=0;M<N&&_+M<u.length;M++)L+=u[_+M];return L};for(let _=0;_<s.cells.length;_+=1){const N=s.cells[_],L=(x=o==null?void 0:o.cells)==null?void 0:x[_],M=N.gridColumnStart!=null?E(N.gridColumnStart):_===0?0:E(_),C=(T=L==null?void 0:L.attrs)==null?void 0:T.borders,D=C!==void 0,O=D&&C&&(C.top!==void 0||C.right!==void 0||C.bottom!==void 0||C.left!==void 0),$=N.gridColumnStart??_,U=c.length;let W;if(D&&!O)W=void 0;else if(O&&l){const re=r===0,X=r===a-1,me=$===0,G=$===U-1,B=re||y,z=X||w;W={top:C.top??uf(B?l.top:l.insideH),bottom:C.bottom??uf(z?l.bottom:void 0),left:C.left??uf(me?l.left:l.insideV),right:C.right??uf(G?l.right:void 0)}}else if(O)W={top:C.top,bottom:C.bottom,left:C.left,right:C.right};else if(l){const re=r===0,X=r===a-1,me=re||y,G=X||w,B=$dt(l,r,$,a,U);B?W={top:me?uf(l.top):B.top,bottom:G?uf(l.bottom):B.bottom,left:B.left,right:B.right}:W=void 0}else W=void 0;const ce=N.rowSpan??1;let se;b?se=b.partialHeight:ce>1?se=A(r,ce):se=s.height;const Q=(R=b==null?void 0:b.fromLineByCell)==null?void 0:R[_],J=(k=b==null?void 0:b.toLineByCell)==null?void 0:k[_],{cellElement:K}=Udt({doc:e,x:M,y:i,rowHeight:se,cellMeasure:N,cell:L,borders:W,renderLine:f,renderDrawingContent:h,context:d,applySdtDataset:m,fromLine:Q,toLine:J});n.appendChild(K)}};function Wdt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="structuredContent"}function qdt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="documentSection"}function Wre(t){return qdt(t)?{className:"superdoc-document-section",labelText:t.title??"Document section",labelClassName:"superdoc-document-section__tooltip",isStart:!0,isEnd:!0}:Wdt(t)&&t.scope==="block"?{className:"superdoc-structured-content-block",labelText:t.alias??"Structured content",labelClassName:"superdoc-structured-content__label",isStart:!0,isEnd:!0}:null}function bB(t,e,n,r){let i=Wre(n);if(!i&&r&&(i=Wre(r)),!i)return;e.classList.add(i.className),e.dataset.sdtContainerStart=String(i.isStart),e.dataset.sdtContainerEnd=String(i.isEnd),e.style.overflow="visible";const s=t.createElement("div");s.className=i.labelClassName;const o=t.createElement("span");o.textContent=i.labelText,s.appendChild(o),e.appendChild(s)}const Gdt=t=>{var E,A,x,T,R,k;const{doc:e,fragment:n,blockLookup:r,context:i,renderLine:s,renderDrawingContent:o,applyFragmentFrame:a,applySdtDataset:l,applyStyles:c}=t;if(!e){if(console.error("DomPainter: document is not available"),typeof document<"u"){const _=document.createElement("div");return _.classList.add(Ho.fragment,"superdoc-error-placeholder"),_.textContent="[Document not available]",_.style.border="1px dashed red",_.style.padding="8px",_}throw new Error("Document is required for table rendering")}const u=r.get(n.blockId);if(!u||u.block.kind!=="table"||u.measure.kind!=="table"){console.error(`DomPainter: missing table block for fragment ${n.blockId}`,{blockId:n.blockId,lookup:u?{kind:u.block.kind}:null});const _=e.createElement("div");return _.classList.add(Ho.fragment,"superdoc-error-placeholder"),_.textContent="[Table rendering error]",_.style.border="1px dashed red",_.style.padding="8px",_}const d=u.block,f=u.measure,h=(E=d.attrs)==null?void 0:E.borders,m=e.createElement("div");if(m.classList.add(Ho.fragment),c(m,sy),a(m,n),m.style.height=`${n.height}px`,l(m,(A=d.attrs)==null?void 0:A.sdt),bB(e,m,(x=d.attrs)==null?void 0:x.sdt),m.classList.add("superdoc-table-fragment"),(T=n.metadata)!=null&&T.columnBoundaries){const _=f.columnWidths.length,N=d.rows.length,L=[];for(let D=0;D<_;D++)L.push([]);let M=0;for(let D=0;D<N;D++){const O=f.rows[D];if(!O)continue;const $=new Set;for(const U of O.cells){const W=U.gridColumnStart??0,ce=U.colSpan??1,se=W+ce;W>0&&$.add(W),se<_&&$.add(se)}for(const U of $){const W=L[U],ce=W[W.length-1];ce&&ce.toRow===D?(ce.toRow=D+1,ce.height+=O.height):W.push({fromRow:D,toRow:D+1,y:M,height:O.height})}M+=O.height}const C={columns:n.metadata.columnBoundaries.map(D=>({i:D.index,x:D.x,w:D.width,min:D.minWidth,r:D.resizable?1:0})),segments:L.map((D,O)=>D.map($=>({c:O,y:$.y,h:$.height})))};m.setAttribute("data-table-boundaries",JSON.stringify(C))}d.id&&m.setAttribute("data-sd-block-id",d.id),(((R=d.attrs)==null?void 0:R.borderCollapse)||"collapse")==="separate"&&((k=d.attrs)!=null&&k.cellSpacing)&&(m.style.borderSpacing=`${d.attrs.cellSpacing}px`);const w=f.rows.map((_,N)=>n.partialRow&&n.partialRow.rowIndex===N?n.partialRow.partialHeight:(_==null?void 0:_.height)??0);let b=0;if(n.repeatHeaderCount&&n.repeatHeaderCount>0)for(let _=0;_<n.repeatHeaderCount;_+=1){const N=f.rows[_];if(!N)break;Ure({doc:e,container:m,rowIndex:_,y:b,rowMeasure:N,row:d.rows[_],totalRows:d.rows.length,tableBorders:h,columnWidths:f.columnWidths,allRowHeights:w,context:i,renderLine:s,renderDrawingContent:o,applySdtDataset:l,continuesFromPrev:!1,continuesOnNext:!1}),b+=N.height}for(let _=n.fromRow;_<n.toRow;_+=1){const N=f.rows[_];if(!N)break;const L=_===n.fromRow,M=_===n.toRow-1,D=n.partialRow&&n.partialRow.rowIndex===_?n.partialRow:void 0,O=D?D.partialHeight:N.height;Ure({doc:e,container:m,rowIndex:_,y:b,rowMeasure:N,row:d.rows[_],totalRows:d.rows.length,tableBorders:h,columnWidths:f.columnWidths,allRowHeights:w,context:i,renderLine:s,renderDrawingContent:o,applySdtDataset:l,continuesFromPrev:L&&n.continuesFromPrev===!0,continuesOnNext:M&&n.continuesOnNext===!0,partialRow:D}),b+=O}return m},W1e=()=>typeof _e<"u"&&typeof _e.env<"u"?_e.env.NODE_ENV==="development":!1;class Kdt{constructor(){this.stats={totalSpans:0,validSpans:0,missingPmStart:0,missingPmEnd:0,missingBoth:0}}record(e,n){this.stats.totalSpans++,e&&n?this.stats.validSpans++:!e&&!n?this.stats.missingBoth++:e?this.stats.missingPmEnd++:this.stats.missingPmStart++}getStats(){return{...this.stats}}reset(){this.stats={totalSpans:0,validSpans:0,missingPmStart:0,missingPmEnd:0,missingBoth:0}}getCoveragePercent(){return this.stats.totalSpans===0?100:this.stats.validSpans/this.stats.totalSpans*100}logSummary(){if(!W1e())return;const e=this.getCoveragePercent(),n=this.stats;e<100&&console.warn("[PmPositionValidation] PM position coverage:",{coverage:`${e.toFixed(1)}%`,totalSpans:n.totalSpans,validSpans:n.validSpans,missingPmStart:n.missingPmStart,missingPmEnd:n.missingPmEnd,missingBoth:n.missingBoth})}}const q1e=new Kdt;function R9(t,e){const n=t.pmStart!=null,r=t.pmEnd!=null;if(q1e.record(n,r),!!W1e()&&(!n||!r)){const i=t.text?t.text.substring(0,20)+(t.text.length>20?"...":""):"(no text)";console.warn(`[PmPositionValidation] Missing PM positions in ${e}:`,{hasPmStart:n,hasPmEnd:r,textPreview:i,fallback:"Will use PM DOM coordinates for cursor positioning"})}}function Xdt(t,e){const n=t.pmStart!=null,r=t.pmEnd!=null;q1e.record(n,r)}const hM=96,G1e=25,Tg=hM/8;function Ydt(t){const e=t.ppi??hM,n=t.heightPx??G1e,{pageSize:r,pageMargins:i}=t;if(!Number.isFinite(e)||e<=0)throw new Error(`Invalid PPI: ${e}. Must be a positive finite number.`);if(!Number.isFinite(r.width)||r.width<=0)throw new Error(`Invalid page width: ${r.width}. Must be a positive finite number.`);if(!Number.isFinite(r.height)||r.height<=0)throw new Error(`Invalid page height: ${r.height}. Must be a positive finite number.`);if(!Number.isFinite(i.left)||i.left<0)throw new Error(`Invalid left margin: ${i.left}. Must be a non-negative finite number.`);if(!Number.isFinite(i.right)||i.right<0)throw new Error(`Invalid right margin: ${i.right}. Must be a non-negative finite number.`);if(i.left+i.right>=r.width)throw new Error(`Invalid margins: left (${i.left}) + right (${i.right}) must be less than page width (${r.width}).`);const s=r.width*e,o=[];let a=0;for(let l=0;l<r.width;l++){const c=r.width-l;o.push({size:"main",height:"20%",label:l,x:a}),a+=Tg;for(let u=0;u<3;u++)o.push({size:"eighth",height:"10%",x:a}),a+=Tg;if(o.push({size:"half",height:"40%",x:a}),a+=Tg,c<=.5)break;for(let u=0;u<3;u++)o.push({size:"eighth",height:"10%",x:a}),a+=Tg}return{widthPx:s,heightPx:n,ticks:o,leftMarginPx:i.left*e,rightMarginPx:s-i.right*e,pageWidthInches:r.width}}function Zdt(t,e,n,r=hM){return e==="left"?t/r:(n-t)/r}function Jdt(t,e,n,r,i=200){if(!Number.isFinite(t))throw new Error(`Invalid handleX: ${t}. Must be a finite number.`);if(!Number.isFinite(n))throw new Error(`Invalid otherHandleX: ${n}. Must be a finite number.`);if(!Number.isFinite(r))throw new Error(`Invalid pageWidthPx: ${r}. Must be a finite number.`);if(!Number.isFinite(i))throw new Error(`Invalid minContentWidthPx: ${i}. Must be a finite number.`);if(e==="left"){const o=n-i;return Math.max(0,Math.min(o,t))}else{const s=n+i;return Math.max(s,Math.min(r,t))}}function Qdt(t){const e=t.ppi??hM,n=t.heightPx??G1e,{pageWidthPx:r,leftMarginPx:i,rightMarginPx:s}=t;if(!Number.isFinite(e)||e<=0)throw new Error(`Invalid PPI: ${e}. Must be a positive finite number.`);if(!Number.isFinite(r)||r<=0)throw new Error(`Invalid page width: ${r}px. Must be a positive finite number.`);if(!Number.isFinite(t.pageHeightPx)||t.pageHeightPx<=0)throw new Error(`Invalid page height: ${t.pageHeightPx}px. Must be a positive finite number.`);if(!Number.isFinite(i)||i<0)throw new Error(`Invalid left margin: ${i}px. Must be a non-negative finite number.`);if(!Number.isFinite(s)||s<0)throw new Error(`Invalid right margin: ${s}px. Must be a non-negative finite number.`);if(i+s>=r)throw new Error(`Invalid margins: left (${i}px) + right (${s}px) must be less than page width (${r}px).`);const o=r/e,a=[];let l=0;for(let c=0;c<o;c++){const u=o-c;a.push({size:"main",height:"20%",label:c,x:l}),l+=Tg;for(let d=0;d<3;d++)a.push({size:"eighth",height:"10%",x:l}),l+=Tg;if(a.push({size:"half",height:"40%",x:l}),l+=Tg,u<=.5)break;for(let d=0;d<3;d++)a.push({size:"eighth",height:"10%",x:l}),l+=Tg}return{widthPx:r,heightPx:n,ticks:a,leftMarginPx:i,rightMarginPx:r-s,pageWidthInches:o}}const Yi={ruler:"superdoc-ruler",tick:"superdoc-ruler-tick",tickMain:"superdoc-ruler-tick--main",tickHalf:"superdoc-ruler-tick--half",tickEighth:"superdoc-ruler-tick--eighth",label:"superdoc-ruler-label",handle:"superdoc-ruler-handle",handleLeft:"superdoc-ruler-handle--left",handleRight:"superdoc-ruler-handle--right",indicator:"superdoc-ruler-indicator"};function eft(t){const{definition:e,doc:n,interactive:r=!1}=t;(!Number.isFinite(e.widthPx)||e.widthPx<=0)&&(console.warn(`[createRulerElement] Invalid ruler width: ${e.widthPx}px. Using minimum width of 1px.`),e.widthPx=Math.max(1,e.widthPx||1)),(!e.ticks||e.ticks.length===0)&&console.warn("[createRulerElement] Ruler definition has no ticks. Ruler will be empty.");const i=n.createElement("div");i.className=Yi.ruler,i.style.cssText=`
    position: relative;
    width: ${e.widthPx}px;
    height: ${e.heightPx}px;
    display: flex;
    align-items: flex-end;
    box-sizing: border-box;
    user-select: none;
    pointer-events: ${r?"auto":"none"};
  `;for(const s of e.ticks){const o=tft(s,n);i.appendChild(o)}if(r){const s=qre("left",e.leftMarginPx,n,t),o=qre("right",e.rightMarginPx,n,t);i.appendChild(s),i.appendChild(o)}return i}function tft(t,e){const n=e.createElement("div"),r=t.size==="main"?Yi.tickMain:t.size==="half"?Yi.tickHalf:Yi.tickEighth;if(n.className=`${Yi.tick} ${r}`,n.style.cssText=`
    position: absolute;
    left: ${t.x}px;
    bottom: 0;
    width: 1px;
    height: ${t.height};
    background-color: #666;
    pointer-events: none;
  `,t.label!==void 0){const i=e.createElement("span");i.className=Yi.label,i.textContent=String(t.label),i.style.cssText=`
      position: absolute;
      top: -16px;
      left: -2px;
      font-size: 10px;
      color: #666;
      pointer-events: none;
      user-select: none;
    `,n.appendChild(i)}return n}function qre(t,e,n,r){const i=n.createElement("div"),s=t==="left"?Yi.handleLeft:Yi.handleRight;return i.className=`${Yi.handle} ${s}`,i.dataset.side=t,i.style.cssText=`
    position: absolute;
    left: ${e}px;
    top: 0;
    width: 5px;
    height: 20px;
    margin-left: -2px;
    background-color: #ccc;
    border-radius: 4px 4px 0 0;
    cursor: grab;
    transition: background-color 150ms ease;
    z-index: 10;
  `,i.addEventListener("mouseenter",()=>{i.dataset.dragging||(i.style.backgroundColor="rgba(37, 99, 235, 0.4)")}),i.addEventListener("mouseleave",()=>{i.dataset.dragging||(i.style.backgroundColor="#ccc")}),(r.onDragStart||r.onDrag||r.onDragEnd)&&nft(i,t,r),i}function nft(t,e,n){let r=0;const i=a=>{var c;a.preventDefault(),t.dataset.dragging="true",t.style.backgroundColor="rgba(37, 99, 235, 0.4)",t.style.cursor="grabbing";const l=t.getBoundingClientRect();r=a.clientX-l.left-l.width/2,t.setPointerCapture(a.pointerId),(c=n.onDragStart)==null||c.call(n,e,a)},s=a=>{var d;if(t.dataset.dragging!=="true")return;const l=t.parentElement;if(!l)return;const c=l.getBoundingClientRect(),u=a.clientX-c.left-r;(d=n.onDrag)==null||d.call(n,e,u,a)},o=a=>{var d;if(t.dataset.dragging!=="true")return;t.dataset.dragging="",t.style.backgroundColor="#ccc",t.style.cursor="grab",t.releasePointerCapture(a.pointerId);const l=t.parentElement;if(!l)return;const c=l.getBoundingClientRect(),u=a.clientX-c.left-r;(d=n.onDragEnd)==null||d.call(n,e,u,a)};t.addEventListener("pointerdown",i),t.addEventListener("pointermove",s),t.addEventListener("pointerup",o),t.addEventListener("pointercancel",o)}const rft=`
/* Ruler container */
.${Yi.ruler} {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background-color: transparent;
}

/* Tick marks base styling */
.${Yi.tick} {
  flex-shrink: 0;
}

/* Handle hover and active states */
.${Yi.handle}:hover {
  background-color: rgba(37, 99, 235, 0.4) !important;
}

.${Yi.handle}:active,
.${Yi.handle}[data-dragging="true"] {
  background-color: rgba(37, 99, 235, 0.6) !important;
  cursor: grabbing !important;
}

/* Vertical indicator animation */
.${Yi.indicator} {
  transition: left 16ms linear;
}

/* Print mode: hide rulers */
@media print {
  .${Yi.ruler} {
    display: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .${Yi.tick} {
    background-color: #000 !important;
  }

  .${Yi.label} {
    color: #000 !important;
  }

  .${Yi.handle} {
    background-color: #666 !important;
    border: 1px solid #000;
  }

  .${Yi.handle}:hover,
  .${Yi.handle}:active {
    background-color: #0066cc !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .${Yi.handle} {
    transition: none !important;
  }

  .${Yi.indicator} {
    transition: none !important;
  }
}
`;let Gre=!1;function ift(t){var n;if(Gre||!t)return;const e=t.createElement("style");e.setAttribute("data-superdoc-ruler-styles","true"),e.textContent=rft,(n=t.head)==null||n.appendChild(e),Gre=!0}const O5=t=>{const e=[];return t.style!==void 0&&e.push(`s:${t.style}`),t.width!==void 0&&e.push(`w:${t.width}`),t.color!==void 0&&e.push(`c:${t.color}`),t.space!==void 0&&e.push(`sp:${t.space}`),e.join(",")},Kre=t=>{const e=[];return t.top&&e.push(`t:[${O5(t.top)}]`),t.right&&e.push(`r:[${O5(t.right)}]`),t.bottom&&e.push(`b:[${O5(t.bottom)}]`),t.left&&e.push(`l:[${O5(t.left)}]`),e.join(";")},sft=t=>typeof t=="object"&&t!==null&&"none"in t&&t.none===!0,oft=t=>typeof t=="object"&&t!==null&&!("none"in t),dS=t=>{const e=[];return t.style!==void 0&&e.push(`s:${t.style}`),t.width!==void 0&&e.push(`w:${t.width}`),t.color!==void 0&&e.push(`c:${t.color}`),t.space!==void 0&&e.push(`sp:${t.space}`),e.join(",")},cv=t=>t===void 0?"":t===null?"null":sft(t)?"none":oft(t)?dS(t):"",aft=t=>{if(!t)return"";const e=[];return t.top!==void 0&&e.push(`t:[${cv(t.top)}]`),t.right!==void 0&&e.push(`r:[${cv(t.right)}]`),t.bottom!==void 0&&e.push(`b:[${cv(t.bottom)}]`),t.left!==void 0&&e.push(`l:[${cv(t.left)}]`),t.insideH!==void 0&&e.push(`ih:[${cv(t.insideH)}]`),t.insideV!==void 0&&e.push(`iv:[${cv(t.insideV)}]`),e.join(";")},lft=t=>{if(!t)return"";const e=[];return t.top&&e.push(`t:[${dS(t.top)}]`),t.right&&e.push(`r:[${dS(t.right)}]`),t.bottom&&e.push(`b:[${dS(t.bottom)}]`),t.left&&e.push(`l:[${dS(t.left)}]`),e.join(";")},cft=(t,e)=>e in t&&typeof t[e]=="string",uft=(t,e)=>e in t&&typeof t[e]=="number",dft=(t,e)=>e in t&&typeof t[e]=="boolean",M9=(t,e)=>cft(t,e)?t[e]:"",fft=(t,e)=>uft(t,e)?t[e]:0,L9=(t,e)=>dft(t,e)?t[e]:!1,hft=t=>"underline"in t&&t.underline&&typeof t.underline=="object"?t.underline.style??"":"",pft=t=>"underline"in t&&t.underline&&typeof t.underline=="object"?t.underline.color??"":"";function Xre(t){if(typeof t!="object"||t===null)return!1;const e=t;if(e.marker!==void 0){if(typeof e.marker!="object"||e.marker===null)return!1;const n=e.marker;if(n.markerText!==void 0&&typeof n.markerText!="string"||n.markerX!==void 0&&typeof n.markerX!="number"||n.textStartX!==void 0&&typeof n.textStartX!="number")return!1}if(e.indentLeftPx!==void 0&&typeof e.indentLeftPx!="number"||e.firstLineIndentMode!==void 0&&typeof e.firstLineIndentMode!="boolean"||e.textStartPx!==void 0&&typeof e.textStartPx!="number")return!1;if(e.tabsPx!==void 0){if(!Array.isArray(e.tabsPx))return!1;for(const n of e.tabsPx)if(typeof n!="number")return!1}return!0}const co=8,P5=48,mft=1056,Yre=72,gft="#B1124B",yft="#078383",bft="22",Ym={blocked:"linkBlocked",docLocation:"linkDocLocation",history:"linkHistory",rId:"linkRid",truncated:"linkTooltipTruncated"},Zre=2048,K1e=/^[A-Za-z0-9._-]+$/,Jre=10*1024*1024,Qre=/^data:image\/(png|jpeg|jpg|gif|svg\+xml|webp|bmp|ico|tiff?);base64,/i,eie=3,tie=1e3,nie=20,wft=/^(click here|read more|more|link|here|this|download|view)$/i,vft={insert:"track-insert-dec",delete:"track-delete-dec",format:"track-format-dec"},xft={insert:{review:"highlighted",original:"hidden",final:"normal",off:void 0},delete:{review:"highlighted",original:"normal",final:"hidden",off:void 0},format:{review:"highlighted",original:"before",final:"normal",off:void 0}};function Eft(t){if(typeof t!="string")return null;const e=pb(t);return(e==null?void 0:e.href)??null}const Sft=new Set(["_blank","_self","_parent","_top"]),Aft=t=>{if(typeof t!="string")return null;const e=t.trim();if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return K1e.test(n)?`#${n}`:null},Tft=t=>K1e.test(t),kft=t=>{try{return encodeURIComponent(t)}catch{return null}},Cft=(t,e)=>{if(!(e!=null&&e.trim()))return t;const n=e.trim();if(t!=null&&t.includes("#"))return t;const r=Tft(n)?n:kft(n);return r?t?`${t}#${r}`:`#${r}`:t},_ft=t=>{const e={};return t.version===2&&(t.rId&&(e[Ym.rId]=t.rId),t.docLocation&&(e[Ym.docLocation]=t.docLocation),typeof t.history=="boolean"&&(e[Ym.history]=String(t.history))),e},Nft=(t,e)=>{if(t.target&&Sft.has(t.target))return t.target;if(e&&(e.protocol==="http"||e.protocol==="https"))return"_blank"},Ift=(t,e)=>{const n=new Set;if(typeof t.rel=="string"&&t.rel.trim()&&t.rel.trim().split(/\s+/).forEach(r=>{r&&n.add(r)}),e==="_blank"&&(n.add("noopener"),n.add("noreferrer")),n.size!==0)return Array.from(n).join(" ")},Rft=(t,e)=>{e&&Object.entries(e).forEach(([n,r])=>{r!=null&&(t.dataset[n]=r)})},y4=class y4{constructor(e,n,r={}){var s;this.mount=null,this.doc=null,this.pageStates=[],this.currentLayout=null,this.changedBlocks=new Set,this.totalPages=0,this.linkIdCounter=0,this.pendingTooltips=new WeakMap,this.pageGap=24,this.virtualEnabled=!1,this.virtualWindow=5,this.virtualOverscan=0,this.virtualGap=Yre,this.virtualPaddingTop=null,this.topSpacerEl=null,this.bottomSpacerEl=null,this.virtualGapSpacers=[],this.virtualPinnedPages=[],this.virtualMountedKey="",this.pageIndexToState=new Map,this.virtualHeights=[],this.virtualOffsets=[],this.virtualStart=0,this.virtualEnd=-1,this.layoutVersion=0,this.layoutEpoch=0,this.processedLayoutVersion=-1,this.currentMapping=null,this.onScrollHandler=null,this.onWindowScrollHandler=null,this.onResizeHandler=null,this.options=r,this.layoutMode=r.layoutMode??"vertical",this.blockLookup=this.buildBlockLookup(e,n),this.headerProvider=r.headerProvider,this.footerProvider=r.footerProvider;const i=this.layoutMode==="horizontal"?20:24;if(this.pageGap=typeof r.pageGap=="number"&&Number.isFinite(r.pageGap)?Math.max(0,r.pageGap):i,this.layoutMode==="vertical"&&((s=r.virtualization)!=null&&s.enabled)){this.virtualEnabled=!0,this.virtualWindow=Math.max(1,r.virtualization.window??5),this.virtualOverscan=Math.max(0,r.virtualization.overscan??0);const o=r.virtualization.gap;typeof o=="number"&&Number.isFinite(o)?this.virtualGap=Math.max(0,o):this.virtualGap=Yre,typeof r.virtualization.paddingTop=="number"&&Number.isFinite(r.virtualization.paddingTop)&&(this.virtualPaddingTop=Math.max(0,r.virtualization.paddingTop))}}setProviders(e,n){this.headerProvider=e,this.footerProvider=n}setVirtualizationPins(e){const n=Array.from(new Set((e??[]).filter(r=>Number.isInteger(r)))).sort((r,i)=>r-i);this.virtualPinnedPages=n,this.virtualEnabled&&this.mount&&this.updateVirtualWindow()}setData(e,n,r,i,s,o){if(e.length!==n.length)throw new Error(`setData: blocks and measures arrays must have the same length. Got blocks.length=${e.length}, measures.length=${n.length}`);const a=r!==void 0,l=i!==void 0;if(a!==l)throw new Error(`setData: headerBlocks and headerMeasures must both be provided or both be omitted. Got headerBlocks=${a?"provided":"omitted"}, headerMeasures=${l?"provided":"omitted"}`);if(a&&l&&r.length!==i.length)throw new Error(`setData: headerBlocks and headerMeasures arrays must have the same length. Got headerBlocks.length=${r.length}, headerMeasures.length=${i.length}`);const c=s!==void 0,u=o!==void 0;if(c!==u)throw new Error(`setData: footerBlocks and footerMeasures must both be provided or both be omitted. Got footerBlocks=${c?"provided":"omitted"}, footerMeasures=${u?"provided":"omitted"}`);if(c&&u&&s.length!==o.length)throw new Error(`setData: footerBlocks and footerMeasures arrays must have the same length. Got footerBlocks.length=${s.length}, footerMeasures.length=${o.length}`);const d=this.buildBlockLookup(e,n);r&&i&&this.buildBlockLookup(r,i).forEach((m,y)=>{d.set(y,m)}),s&&o&&this.buildBlockLookup(s,o).forEach((m,y)=>{d.set(y,m)});const f=new Set;d.forEach((h,m)=>{const y=this.blockLookup.get(m);(!y||y.version!==h.version)&&f.add(m)}),this.blockLookup=d,this.changedBlocks=f}paint(e,n,r){var a;if(!(n instanceof HTMLElement))throw new Error("DomPainter.paint requires a valid HTMLElement mount");const i=n.ownerDocument??(typeof document<"u"?document:null);if(!i)throw new Error("DomPainter.paint requires a DOM-like document");this.doc=i;const s=r&&r.maps.length===1;r&&!s?(this.blockLookup.forEach((l,c)=>this.changedBlocks.add(c)),this.currentMapping=null):this.currentMapping=r??null,bdt(i),wdt(i),vdt(i),Edt(i),xdt(i),Sdt(i),Adt(i),(a=this.options.ruler)!=null&&a.enabled&&ift(i),n.classList.add(Ho.container),this.mount&&this.mount!==n&&this.resetState(),this.layoutVersion+=1,this.layoutEpoch=e.layoutEpoch??0,this.mount=n,this.totalPages=e.pages.length;const o=this.layoutMode;if(o==="horizontal"){dl(n,ldt),n.style.gap=`${this.pageGap}px`,this.renderHorizontal(e,n),this.currentLayout=e,this.pageStates=[],this.changedBlocks.clear(),this.currentMapping=null;return}if(o==="book"){dl(n,Ore),this.renderBookMode(e,n),this.currentLayout=e,this.pageStates=[],this.changedBlocks.clear(),this.currentMapping=null;return}if(dl(n,Ore),this.virtualEnabled){n.style.gap=`${this.virtualGap}px`,this.renderVirtualized(e,n),this.currentLayout=e,this.changedBlocks.clear(),this.currentMapping=null;return}n.style.gap=`${this.pageGap}px`,!this.currentLayout||this.pageStates.length===0?this.fullRender(e):this.patchLayout(e),this.currentLayout=e,this.changedBlocks.clear(),this.currentMapping=null}renderVirtualized(e,n){if(!this.doc)return;this.currentLayout=e,(!this.topSpacerEl||!this.bottomSpacerEl||this.mount!==n)&&this.ensureVirtualizationSetup(n),this.computeVirtualMetrics(),this.updateVirtualWindow()}ensureVirtualizationSetup(e){this.doc&&(e.innerHTML="",this.pageStates=[],this.pageIndexToState.clear(),this.virtualGapSpacers=[],this.virtualMountedKey="",this.topSpacerEl=this.doc.createElement("div"),this.bottomSpacerEl=this.doc.createElement("div"),this.configureSpacerElement(this.topSpacerEl,"top"),this.configureSpacerElement(this.bottomSpacerEl,"bottom"),e.appendChild(this.topSpacerEl),e.appendChild(this.bottomSpacerEl),this.bindVirtualizationHandlers(e))}configureSpacerElement(e,n){e.style.width="1px",e.style.height="0px",e.style.flex="0 0 auto",e.setAttribute("data-virtual-spacer",n)}bindVirtualizationHandlers(e){var r;this.onScrollHandler&&e.removeEventListener("scroll",this.onScrollHandler),this.onScrollHandler=()=>{this.updateVirtualWindow()},e.addEventListener("scroll",this.onScrollHandler);const n=(r=this.doc)==null?void 0:r.defaultView;n&&(this.onWindowScrollHandler&&n.removeEventListener("scroll",this.onWindowScrollHandler),this.onWindowScrollHandler=()=>{this.updateVirtualWindow()},n.addEventListener("scroll",this.onWindowScrollHandler,{passive:!0}),this.onResizeHandler&&n.removeEventListener("resize",this.onResizeHandler),this.onResizeHandler=()=>{this.updateVirtualWindow()},n.addEventListener("resize",this.onResizeHandler))}computeVirtualMetrics(){if(!this.currentLayout)return;this.currentLayout.pages.length!==this.virtualHeights.length&&(this.virtualHeights=this.currentLayout.pages.map(r=>{var i;return((i=r.size)==null?void 0:i.h)??this.currentLayout.pageSize.h}));const n=new Array(this.virtualHeights.length+1);n[0]=0;for(let r=0;r<this.virtualHeights.length;r+=1)n[r+1]=n[r]+this.virtualHeights[r]+this.virtualGap;this.virtualOffsets=n}topOfIndex(e){return e<=0?0:this.virtualOffsets[e]}contentTotalHeight(){const e=this.virtualHeights.length;return e<=0?0:this.virtualOffsets[e]-this.virtualGap}getMountPaddingTopPx(){if(this.virtualPaddingTop!=null)return this.virtualPaddingTop;if(!this.mount||!this.doc)return 0;const e=this.doc.defaultView;if(!e)return 0;const n=e.getComputedStyle(this.mount),r=(n==null?void 0:n.paddingTop)??"0",i=Number.parseFloat(r.replace("px",""));return Number.isFinite(i)?Math.max(0,i):0}updateVirtualWindow(){if(!this.mount||!this.topSpacerEl||!this.bottomSpacerEl||!this.currentLayout)return;const e=this.currentLayout,n=e.pages.length;if(n===0){this.mount.innerHTML="",this.processedLayoutVersion=this.layoutVersion;return}const r=this.getMountPaddingTopPx();let i;if(this.mount.scrollHeight>this.mount.clientHeight+1)i=Math.max(0,this.mount.scrollTop-r);else{const E=this.mount.getBoundingClientRect();i=Math.max(0,-E.top-r)}let o=0,a=n;for(;o<a;){const E=o+a>>>1;this.topOfIndex(E)<=i?o=E+1:a=E}const l=Math.max(0,o-1),c=this.virtualWindow,u=this.virtualOverscan;let d=l-Math.floor(c/2)-u;d=Math.max(0,Math.min(d,Math.max(0,n-c)));const f=Math.min(n-1,d+c-1+u*2);d=Math.max(0,Math.min(d,f-c+1));const h=new Set;for(let E=d;E<=f;E+=1)h.add(E);for(const E of this.virtualPinnedPages){const A=Math.max(0,Math.min(E,n-1));h.add(A)}const m=Array.from(h).sort((E,A)=>E-A),y=m.join(","),w=this.processedLayoutVersion===this.layoutVersion;if(y===this.virtualMountedKey&&this.changedBlocks.size===0&&w){this.virtualStart=d,this.virtualEnd=f,this.updateSpacersForMountedPages(m);return}this.virtualMountedKey=y,this.virtualStart=d,this.virtualEnd=f,this.updateSpacersForMountedPages(m),this.clearGapSpacers();for(const[E,A]of this.pageIndexToState.entries())h.has(E)||(A.element.remove(),this.pageIndexToState.delete(E));for(const E of m){const A=e.pages[E],x=A.size??e.pageSize,T=this.pageIndexToState.get(E);if(T)this.patchPage(T,A,x);else{const R=this.createPageState(A,x);R.element.dataset.pageNumber=String(A.number),R.element.dataset.pageIndex=String(E),dl(R.element,L5(x.w,x.h,this.getEffectivePageStyles())),this.mount.insertBefore(R.element,this.bottomSpacerEl),this.pageIndexToState.set(E,R)}}this.mount.firstChild!==this.topSpacerEl&&this.mount.insertBefore(this.topSpacerEl,this.mount.firstChild),this.mount.appendChild(this.bottomSpacerEl);let b=null;for(const E of m){if(b!=null&&E>b+1){const x=this.doc.createElement("div");this.configureSpacerElement(x,"gap"),x.dataset.gapFrom=String(b),x.dataset.gapTo=String(E);const T=this.topOfIndex(E)-this.topOfIndex(b)-this.virtualHeights[b]-this.virtualGap*2;x.style.height=`${Math.max(0,Math.floor(T))}px`,this.virtualGapSpacers.push(x),this.mount.insertBefore(x,this.bottomSpacerEl)}const A=this.pageIndexToState.get(E);this.mount.insertBefore(A.element,this.bottomSpacerEl),b=E}this.changedBlocks.clear(),this.processedLayoutVersion=this.layoutVersion}updateSpacers(e,n){if(!this.topSpacerEl||!this.bottomSpacerEl)return;const r=this.topOfIndex(e),i=this.contentTotalHeight()-this.topOfIndex(n+1);this.topSpacerEl.style.height=`${Math.max(0,Math.floor(r))}px`,this.bottomSpacerEl.style.height=`${Math.max(0,Math.floor(i))}px`}updateSpacersForMountedPages(e){if(!this.topSpacerEl||!this.bottomSpacerEl)return;if(e.length===0){this.topSpacerEl.style.height="0px",this.bottomSpacerEl.style.height="0px";return}const n=e[0],r=e[e.length-1],i=this.virtualHeights.length,s=Math.max(0,Math.min(n,Math.max(0,i-1))),o=Math.max(0,Math.min(r,Math.max(0,i-1))),a=this.topOfIndex(s),l=this.topOfIndex(i)-this.topOfIndex(o+1)-this.virtualGap;this.topSpacerEl.style.height=`${Math.max(0,Math.floor(a))}px`,this.bottomSpacerEl.style.height=`${Math.max(0,Math.floor(l))}px`}clearGapSpacers(){for(const e of this.virtualGapSpacers)e.remove();this.virtualGapSpacers=[]}renderHorizontal(e,n){this.doc&&(n.innerHTML="",e.pages.forEach((r,i)=>{const s=r.size??e.pageSize,o=this.renderPage(s.w,s.h,r);o.dataset.pageNumber=String(r.number),o.dataset.pageIndex=String(i),n.appendChild(o)}))}renderBookMode(e,n){if(!this.doc)return;n.innerHTML="";const r=e.pages;if(r.length===0)return;const i=r[0].size??e.pageSize,s=this.renderPage(i.w,i.h,r[0]);s.dataset.pageNumber=String(r[0].number),s.dataset.pageIndex="0",n.appendChild(s);for(let o=1;o<r.length;o+=2){const a=this.doc.createElement("div");a.classList.add(Ho.spread),dl(a,cdt);const l=r[o],c=l.size??e.pageSize,u=this.renderPage(c.w,c.h,l);if(u.dataset.pageNumber=String(l.number),u.dataset.pageIndex=String(o),a.appendChild(u),o+1<r.length){const d=r[o+1],f=d.size??e.pageSize,h=this.renderPage(f.w,f.h,d);h.dataset.pageNumber=String(d.number),h.dataset.pageIndex=String(o+1),a.appendChild(h)}n.appendChild(a)}}renderPage(e,n,r){var o;if(!this.doc)throw new Error("DomPainter: document is not available");const i=this.doc.createElement("div");if(i.classList.add(Ho.page),dl(i,L5(e,n,this.getEffectivePageStyles())),i.dataset.layoutEpoch=String(this.layoutEpoch),(o=this.options.ruler)!=null&&o.enabled){const a=this.renderPageRuler(e,r);a&&i.appendChild(a)}const s={pageNumber:r.number,totalPages:this.totalPages,section:"body",pageNumberText:r.numberText};return r.fragments.forEach(a=>{i.appendChild(this.renderFragment(a,s))}),this.renderDecorationsForPage(i,r),i}renderPageRuler(e,n){var o,a,l;if(!this.doc)return console.warn("[renderPageRuler] Cannot render ruler: document is not available."),null;if(!n.margins)return console.warn(`[renderPageRuler] Cannot render ruler for page ${n.number}: margins not available.`),null;const r=n.margins,i=r.left??0,s=r.right??0;try{const c=Qdt({pageWidthPx:e,pageHeightPx:((o=n.size)==null?void 0:o.h)??mft,leftMarginPx:i,rightMarginPx:s}),u=((a=this.options.ruler)==null?void 0:a.interactive)??!1,d=(l=this.options.ruler)==null?void 0:l.onMarginChange,f=eft({definition:c,doc:this.doc,interactive:u,onDragEnd:u&&d?(h,m)=>{try{const w=h==="left"?m/96:(e-m)/96;d(h,w)}catch(y){console.error("[renderPageRuler] Error in onMarginChange callback:",y)}}:void 0});return f.style.position="absolute",f.style.top="0",f.style.left="0",f.style.zIndex="20",f.dataset.pageNumber=String(n.number),f}catch(c){return console.error(`[renderPageRuler] Failed to create ruler for page ${n.number}:`,c),null}}renderDecorationsForPage(e,n){this.renderDecorationSection(e,n,"header"),this.renderDecorationSection(e,n,"footer")}renderDecorationSection(e,n,r){var A;if(!this.doc)return;const i=r==="header"?this.headerProvider:this.footerProvider,s=r==="header"?Ho.pageHeader:Ho.pageFooter,o=e.querySelector(`.${s}`),a=i?i(n.number,n.margins,n):null;if(!a||a.fragments.length===0){o==null||o.remove();return}const l=o??this.doc.createElement("div");l.className=s,l.innerHTML="";const c=a.offset??(r==="footer"?e.clientHeight-a.height:0),u=a.marginLeft??0,d=((A=n.margins)==null?void 0:A.right)??0;let f=a.height,h=c;r==="footer"&&typeof a.contentHeight=="number"&&Number.isFinite(a.contentHeight)&&a.contentHeight>0&&a.contentHeight>a.height&&(f=a.contentHeight,h=c-(a.contentHeight-a.height)),l.style.position="absolute",l.style.left=`${u}px`,typeof a.contentWidth=="number"?l.style.width=`${Math.max(0,a.contentWidth)}px`:l.style.width=`calc(100% - ${u+d}px)`,l.style.pointerEvents="none",l.style.height=`${f}px`,l.style.top=`${Math.max(0,h)}px`,l.style.zIndex="1",l.style.overflow="visible";let m=0;if(r==="footer"&&a.fragments.length>0){const x=typeof a.contentHeight=="number"?a.contentHeight:a.fragments.reduce((T,R)=>{const k="height"in R&&typeof R.height=="number"?R.height:this.estimateFragmentHeight(R);return Math.max(T,R.y+Math.max(0,k))},0);m=Math.max(0,f-x)}const y={pageNumber:n.number,totalPages:this.totalPages,section:r,pageNumberText:n.numberText},w=[],b=[];for(const x of a.fragments)(x.kind==="image"||x.kind==="drawing")&&"zIndex"in x&&x.zIndex===0?w.push(x):b.push(x);const E=`[data-behind-doc-section="${r}"]`;e.querySelectorAll(E).forEach(x=>x.remove()),w.forEach(x=>{const T=this.renderFragment(x,y),R=h+x.y+(r==="footer"?m:0);T.style.top=`${R}px`,T.style.left=`${u+x.x}px`,T.style.zIndex="0",T.dataset.behindDocSection=r,e.insertBefore(T,e.firstChild)}),b.forEach(x=>{const T=this.renderFragment(x,y);if(m>0){const R=parseFloat(T.style.top)||x.y;T.style.top=`${R+m}px`}l.appendChild(T)}),o||e.appendChild(l)}resetState(){var e,n;if(this.mount){if(this.onScrollHandler)try{this.mount.removeEventListener("scroll",this.onScrollHandler)}catch{}if(this.onWindowScrollHandler&&((e=this.doc)!=null&&e.defaultView))try{this.doc.defaultView.removeEventListener("scroll",this.onWindowScrollHandler)}catch{}if(this.onResizeHandler&&((n=this.doc)!=null&&n.defaultView))try{this.doc.defaultView.removeEventListener("resize",this.onResizeHandler)}catch{}this.mount.innerHTML=""}this.pageStates=[],this.currentLayout=null,this.pageIndexToState.clear(),this.topSpacerEl=null,this.bottomSpacerEl=null,this.onScrollHandler=null,this.onWindowScrollHandler=null,this.onResizeHandler=null,this.layoutVersion=0,this.processedLayoutVersion=-1}fullRender(e){!this.mount||!this.doc||(this.mount.innerHTML="",this.pageStates=[],e.pages.forEach((n,r)=>{const i=n.size??e.pageSize,s=this.createPageState(n,i);s.element.dataset.pageNumber=String(n.number),s.element.dataset.pageIndex=String(r),this.mount.appendChild(s.element),this.pageStates.push(s)}))}patchLayout(e){var r;if(!this.mount||!this.doc)return;const n=[];if(e.pages.forEach((i,s)=>{const o=i.size??e.pageSize,a=this.pageStates[s];if(!a){const l=this.createPageState(i,o);l.element.dataset.pageNumber=String(i.number),l.element.dataset.pageIndex=String(s),this.mount.insertBefore(l.element,this.mount.children[s]??null),n.push(l);return}this.patchPage(a,i,o),n.push(a)}),this.pageStates.length>e.pages.length)for(let i=e.pages.length;i<this.pageStates.length;i+=1)(r=this.pageStates[i])==null||r.element.remove();this.pageStates=n}patchPage(e,n,r){const i=e.element;dl(i,L5(r.w,r.h,this.getEffectivePageStyles())),i.dataset.pageNumber=String(n.number),i.dataset.layoutEpoch=String(this.layoutEpoch);const s=new Map(e.fragments.map(l=>[l.key,l])),o=[],a={pageNumber:n.number,totalPages:this.totalPages,section:"body",pageNumberText:n.numberText};n.fragments.forEach((l,c)=>{const u=rie(l),d=s.get(u);if(d){if(s.delete(u),this.changedBlocks.has(l.blockId)||d.signature!==F5(l,this.blockLookup)){const m=this.renderFragment(l,a);i.replaceChild(m,d.element),d.element=m,d.signature=F5(l,this.blockLookup)}else this.currentMapping&&this.updatePositionAttributes(d.element,this.currentMapping);this.updateFragmentElement(d.element,l,a.section),d.fragment=l,d.key=u,d.context=a,o.push(d);return}const f=this.renderFragment(l,a);i.insertBefore(f,i.children[c]??null),o.push({key:u,fragment:l,element:f,signature:F5(l,this.blockLookup),context:a})}),s.forEach(l=>l.element.remove()),o.forEach((l,c)=>{const u=i.children[c];l.element!==u&&i.insertBefore(l.element,u??null)}),e.fragments=o,this.renderDecorationsForPage(i,n)}updatePositionAttributes(e,n){if(!e.closest(".superdoc-page-header, .superdoc-page-footer"))try{const r=e.dataset.pmEnd;if(r!==void 0&&r!==""){const o=Number(r);if(Number.isFinite(o)&&n.map(o,-1)===o)return}const i=e.querySelectorAll("[data-pm-start], [data-pm-end]"),s=[e,...Array.from(i)];for(const o of s){const a=o.dataset.pmStart,l=o.dataset.pmEnd;if(a!==void 0&&a!==""){const c=Number(a);Number.isFinite(c)&&(o.dataset.pmStart=String(n.map(c)))}if(l!==void 0&&l!==""){const c=Number(l);Number.isFinite(c)&&(o.dataset.pmEnd=String(n.map(c,-1)))}}}catch(r){console.error("Error updating position attributes with mapping:",r)}}createPageState(e,n){if(!this.doc)throw new Error("DomPainter.createPageState requires a document");const r=this.doc.createElement("div");r.classList.add(Ho.page),dl(r,L5(n.w,n.h,this.getEffectivePageStyles())),r.dataset.layoutEpoch=String(this.layoutEpoch);const i={pageNumber:e.number,totalPages:this.totalPages,section:"body"},s=e.fragments.map(o=>{const a=this.renderFragment(o,i);return r.appendChild(a),{key:rie(o),signature:F5(o,this.blockLookup),fragment:o,element:a,context:i}});return this.renderDecorationsForPage(r,e),{element:r,fragments:s}}getEffectivePageStyles(){return this.virtualEnabled&&this.layoutMode==="vertical"?{...this.options.pageStyles??{},margin:"0 auto"}:this.options.pageStyles}renderFragment(e,n){if(e.kind==="para")return this.renderParagraphFragment(e,n);if(e.kind==="list-item")return this.renderListItemFragment(e,n);if(e.kind==="image")return this.renderImageFragment(e,n);if(e.kind==="drawing")return this.renderDrawingFragment(e,n);if(e.kind==="table")return this.renderTableFragment(e,n);throw new Error(`DomPainter: unsupported fragment kind ${e.kind}`)}renderParagraphFragment(e,n){var r,i,s,o,a,l,c,u,d,f,h,m,y,w,b,E,A,x,T,R;try{const k=this.blockLookup.get(e.blockId);if(!k||k.block.kind!=="paragraph"||k.measure.kind!=="paragraph")throw new Error(`DomPainter: missing block/measure for fragment ${e.blockId}`);if(!this.doc)throw new Error("DomPainter: document is not available");const _=k.block,N=k.measure,L=Xre((r=_.attrs)==null?void 0:r.wordLayout)?_.attrs.wordLayout:void 0,M=(i=_.attrs)==null?void 0:i.alignment,C=this.doc.createElement("div");C.classList.add(Ho.fragment);const D=(s=_.attrs)==null?void 0:s.isTocEntry,O=!e.continuesFromPrev&&e.markerWidth&&(L==null?void 0:L.marker),$=((a=(o=_.attrs)==null?void 0:o.sdt)==null?void 0:a.type)==="documentSection"||((c=(l=_.attrs)==null?void 0:l.sdt)==null?void 0:c.type)==="structuredContent"||((d=(u=_.attrs)==null?void 0:u.containerSdt)==null?void 0:d.type)==="documentSection"||((h=(f=_.attrs)==null?void 0:f.containerSdt)==null?void 0:h.type)==="structuredContent",U=(m=_.attrs)==null?void 0:m.indent,W=((U==null?void 0:U.left)??0)<0||((U==null?void 0:U.right)??0)<0,ce=D?{...sy,whiteSpace:"nowrap"}:O||$||W?{...sy,overflow:"visible"}:sy;dl(C,ce),this.applyFragmentFrame(C,e,n.section),D&&C.classList.add("superdoc-toc-entry"),e.continuesFromPrev&&(C.dataset.continuesFromPrev="true"),e.continuesOnNext&&(C.dataset.continuesOnNext="true");const se=e.lines??N.lines.slice(e.fromLine,e.toLine);sie(C,_.attrs,{includeBorders:!1,includeShading:!1});const{shadingLayer:Q,borderLayer:J}=oie(this.doc,e.width,_.attrs);Q&&C.appendChild(Q),J&&C.appendChild(J),(y=_.attrs)!=null&&y.styleId&&(C.dataset.styleId=_.attrs.styleId,C.setAttribute("styleid",_.attrs.styleId)),this.applySdtDataset(C,(w=_.attrs)==null?void 0:w.sdt),this.applyContainerSdtDataset(C,(b=_.attrs)==null?void 0:b.containerSdt),bB(this.doc,C,(E=_.attrs)==null?void 0:E.sdt,(A=_.attrs)==null?void 0:A.containerSdt);const K=(x=_.attrs)==null?void 0:x.dropCapDescriptor,re=N.dropCap;if(K&&re&&!e.continuesFromPrev){const ae=this.renderDropCap(K,re);C.appendChild(ae)}C.style.paddingLeft&&C.style.removeProperty("padding-left"),C.style.paddingRight&&C.style.removeProperty("padding-right"),C.style.marginLeft&&C.style.removeProperty("margin-left"),C.style.marginRight&&C.style.removeProperty("margin-right"),C.style.textIndent&&C.style.removeProperty("text-indent");const X=(T=_.attrs)==null?void 0:T.indent,me=(X==null?void 0:X.left)??0,G=(X==null?void 0:X.right)??0,z=((R=_.attrs)==null?void 0:R.suppressFirstLineIndent)===!0?0:((X==null?void 0:X.firstLine)??0)-((X==null?void 0:X.hanging)??0),de=_.runs.length>0?_.runs[_.runs.length-1]:null,Y=(de==null?void 0:de.kind)==="lineBreak";let ee;if(!e.continuesFromPrev&&e.markerWidth&&(L!=null&&L.marker)){const ae=e.markerWidth,ie=e.markerTextWidth!=null&&isFinite(e.markerTextWidth)&&e.markerTextWidth>=0?e.markerTextWidth:ae,H=L.marker.suffix??"tab";if(H==="tab"){const be=L.marker.justification??"left",Te=L.firstLineIndentMode===!0;let Z;if(Te&&L.marker.markerX!==void 0&&Number.isFinite(L.marker.markerX))Z=L.marker.markerX;else{const ye=(X==null?void 0:X.hanging)??0,ke=(X==null?void 0:X.firstLine)??0;Z=me-ye+ke}const oe=Number.isFinite(Z)?Z:0;let te;if(be==="left"){const ye=oe+ie;if(Te){const ke=L.marker.textStartX!==void 0&&Number.isFinite(L.marker.textStartX)?L.marker.textStartX:L.textStartPx;ke!==void 0&&Number.isFinite(ke)&&ke>ye?te=ke-ye:te=co}else{const ke=(X==null?void 0:X.firstLine)??0;te=me+ke-ye,te<=0?te=P5-ye%P5:te<co&&(te=co)}}else{const ye=e.markerGutter??L.marker.gutterWidthPx;te=ye!==void 0&&Number.isFinite(ye)&&ye>0?ye:co}te<co&&(te=co),ee=oe+ie+te}else if(H==="space"){const be=(X==null?void 0:X.hanging)??0,Te=(X==null?void 0:X.firstLine)??0,Z=me-be+Te;ee=(Number.isFinite(Z)?Z:0)+ie+4}}return se.forEach((ae,ie)=>{var Pe;const H=Math.max(0,me)+Math.max(0,G),be=Math.max(0,e.width-H);let Te=ae.maxWidth!=null?Math.min(ae.maxWidth,be):be;ie===0&&ee!=null&&(Te=e.width-ee-Math.max(0,G));const te=ie===se.length-1&&!e.continuesOnNext&&!Y,ye=this.renderLine(_,ae,n,Te,e.fromLine+ie,te),ke=ie===0&&!e.continuesFromPrev&&e.markerWidth&&(L==null?void 0:L.marker),we=(Pe=ae.segments)==null?void 0:Pe.some(Ce=>Ce.x!==void 0),Ae=ie===0&&!e.continuesFromPrev;if(!ke)if(we){if(Ae&&z!==0){const Oe=(me<0?0:me)+z;Oe>0&&(ye.style.paddingLeft=`${Oe}px`)}}else me&&me>0?ye.style.paddingLeft=`${me}px`:!Ae&&(X!=null&&X.hanging)&&X.hanging>0&&!(me!=null&&me<0)&&(ye.style.paddingLeft=`${X.hanging}px`);G&&G>0&&(ye.style.paddingRight=`${G}px`);const Re=me!=null&&me<0;if(!e.continuesFromPrev&&ie===0&&z&&!ke?we||(ye.style.textIndent=`${z}px`):z&&!ke&&(ye.style.textIndent="0px"),ke&&(L!=null&&L.marker)&&e.markerWidth){const Ce=L.firstLineIndentMode===!0;let Oe;if(Ce&&L.marker.markerX!==void 0&&Number.isFinite(L.marker.markerX))Oe=L.marker.markerX;else{const Ee=(X==null?void 0:X.hanging)??0,Se=(X==null?void 0:X.firstLine)??0;Oe=me-Ee+Se}const Fe=Number.isFinite(Oe)?Oe:0;ye.style.paddingLeft=`${Fe}px`;const $e=this.doc.createElement("span");$e.style.display="inline-block",$e.style.wordSpacing="0px";const he=this.doc.createElement("span");he.classList.add("superdoc-paragraph-marker"),he.textContent=L.marker.markerText??"",he.style.pointerEvents="none";const q=L.marker.justification??"left";if(q!=="left"&&(he.style.width=`${e.markerWidth}px`,he.style.textAlign=L.marker.justification??"right",he.style.paddingRight=`${co}px`),q==="left")$e.style.position="relative";else{const Ee=Fe-e.markerWidth;$e.style.position="absolute",$e.style.left=`${Ee}px`,$e.style.top="0"}he.style.fontFamily=Hb(L.marker.run.fontFamily)??L.marker.run.fontFamily,he.style.fontSize=`${L.marker.run.fontSize}px`,he.style.fontWeight=L.marker.run.bold?"bold":"",he.style.fontStyle=L.marker.run.italic?"italic":"",L.marker.run.color&&(he.style.color=L.marker.run.color),L.marker.run.letterSpacing!=null&&(he.style.letterSpacing=`${L.marker.run.letterSpacing}px`),$e.appendChild(he);const ne=L.marker.suffix??"tab";if(ne==="tab"){const Ee=this.doc.createElement("span");Ee.className="superdoc-tab",Ee.innerHTML="&nbsp;";let Se;const ze=e.markerWidth,Ie=e.markerTextWidth!=null&&isFinite(e.markerTextWidth)&&e.markerTextWidth>=0?e.markerTextWidth:ze;if((L.marker.justification??"left")==="left"){const qe=Fe+Ie;if(Ce){const Ye=L.tabsPx;let ft;if(Array.isArray(Ye)&&Ye.length>0){for(const nt of Ye)if(typeof nt=="number"&&nt>qe){ft=nt;break}}const We=L.marker.textStartX!==void 0&&Number.isFinite(L.marker.textStartX)?L.marker.textStartX:L.textStartPx;ft!==void 0?Se=ft-qe:We!==void 0&&Number.isFinite(We)&&We>qe?Se=We-qe:Se=co,Se<co&&(Se=co)}else{const Ye=(X==null?void 0:X.firstLine)??0;Se=me+Ye-qe,Se<=0?Se=P5-qe%P5:Se<co&&(Se=co)}}else{const qe=e.markerGutter??L.marker.gutterWidthPx;if(qe!==void 0&&Number.isFinite(qe)&&qe>0)Se=qe;else{const Ye=(X==null?void 0:X.firstLine)??0;Se=me+Ye-Fe}Se<co&&(Se=co)}Ee.style.display="inline-block",Ee.style.wordSpacing="0px",Ee.style.width=`${Se}px`,ye.prepend(Ee)}else if(ne==="space"){const Ee=this.doc.createElement("span");Ee.classList.add("superdoc-marker-suffix-space"),Ee.style.wordSpacing="0px",Ee.textContent="",ye.prepend(Ee)}ye.prepend($e)}C.appendChild(ye)}),C}catch(k){return console.error("[DomPainter] Fragment rendering failed:",{fragment:e,error:k}),this.createErrorPlaceholder(e.blockId,k)}}createErrorPlaceholder(e,n){if(!this.doc){const i=document.createElement("div");return i.className="render-error-placeholder",i.style.cssText="color: red; padding: 4px; border: 1px solid red; background: #fee;",i.textContent=`[Render Error: ${e}]`,i}const r=this.doc.createElement("div");return r.className="render-error-placeholder",r.style.cssText="color: red; padding: 4px; border: 1px solid red; background: #fee;",r.textContent=`[Render Error: ${e}]`,n instanceof Error&&(r.title=n.message),r}renderDropCap(e,n){const r=this.doc,{run:i,mode:s}=e,o=r.createElement("span");return o.classList.add("superdoc-drop-cap"),o.textContent=i.text,o.style.fontFamily=i.fontFamily,o.style.fontSize=`${i.fontSize}px`,i.bold&&(o.style.fontWeight="bold"),i.italic&&(o.style.fontStyle="italic"),i.color&&(o.style.color=i.color),s==="drop"?(o.style.float="left",o.style.marginRight="4px",o.style.lineHeight="1"):s==="margin"&&(o.style.position="absolute",o.style.left="0",o.style.lineHeight="1"),i.position&&i.position!==0&&(o.style.position=o.style.position||"relative",o.style.top=`${i.position}px`),n&&(o.style.width=`${n.width}px`,o.style.height=`${n.height}px`),o}renderListItemFragment(e,n){var r,i,s;try{const o=this.blockLookup.get(e.blockId);if(!o||o.block.kind!=="list"||o.measure.kind!=="list")throw new Error(`DomPainter: missing list data for fragment ${e.blockId}`);if(!this.doc)throw new Error("DomPainter: document is not available");const a=o.block,l=o.measure,c=a.items.find(R=>R.id===e.itemId),u=l.items.find(R=>R.itemId===e.itemId);if(!c||!u)throw new Error(`DomPainter: missing list item ${e.itemId}`);const d=this.doc.createElement("div");d.classList.add(Ho.fragment,`${Ho.fragment}-list-item`),dl(d,sy),d.style.left=`${e.x-e.markerWidth}px`,d.style.top=`${e.y}px`,d.style.width=`${e.markerWidth+e.width}px`,d.dataset.blockId=e.blockId,d.dataset.itemId=e.itemId;const f=(r=c.paragraph.attrs)==null?void 0:r.sdt;this.applySdtDataset(d,f),bB(this.doc,d,f,(i=c.paragraph.attrs)==null?void 0:i.containerSdt),e.continuesFromPrev&&(d.dataset.continuesFromPrev="true"),e.continuesOnNext&&(d.dataset.continuesOnNext="true");const h=this.doc.createElement("span");h.classList.add("superdoc-list-marker");const m=(s=c.paragraph.attrs)==null?void 0:s.wordLayout,y=m==null?void 0:m.marker;y?(h.textContent=y.markerText??null,h.style.display="inline-block",h.style.width=`${Math.max(0,e.markerWidth-co)}px`,h.style.paddingRight=`${co}px`,h.style.textAlign=y.justification??"left",h.style.fontFamily=Hb(y.run.fontFamily)??y.run.fontFamily,h.style.fontSize=`${y.run.fontSize}px`,y.run.bold&&(h.style.fontWeight="bold"),y.run.italic&&(h.style.fontStyle="italic"),y.run.color&&(h.style.color=y.run.color),y.run.letterSpacing&&(h.style.letterSpacing=`${y.run.letterSpacing}px`)):(h.textContent=c.marker.text,h.style.display="inline-block",h.style.width=`${Math.max(0,e.markerWidth-co)}px`,h.style.paddingRight=`${co}px`,c.marker.align&&(h.style.textAlign=c.marker.align)),d.appendChild(h);const w=this.doc.createElement("div");w.classList.add("superdoc-list-content"),this.applySdtDataset(w,f),w.style.display="inline-block",w.style.position="relative",w.style.width=`${e.width}px`;const b=u.paragraph.lines.slice(e.fromLine,e.toLine),E=m?c.paragraph.attrs:Bft(c.paragraph.attrs);sie(w,E,{includeBorders:!1,includeShading:!1});const{shadingLayer:A,borderLayer:x}=oie(this.doc,e.width,E);A&&w.appendChild(A),x&&w.appendChild(x),w.style.textAlign="left";const T={...c.paragraph,attrs:{...c.paragraph.attrs||{},alignment:"left"}};return b.forEach((R,k)=>{const _=this.renderLine(T,R,n,e.width,e.fromLine+k,!0);w.appendChild(_)}),d.appendChild(w),d}catch(o){return console.error("[DomPainter] List item fragment rendering failed:",{fragment:e,error:o}),this.createErrorPlaceholder(e.blockId,o)}}renderImageFragment(e,n){var r,i,s;try{const o=this.blockLookup.get(e.blockId);if(!o||o.block.kind!=="image"||o.measure.kind!=="image")throw new Error(`DomPainter: missing image block for fragment ${e.blockId}`);if(!this.doc)throw new Error("DomPainter: document is not available");const a=o.block,l=this.doc.createElement("div");l.classList.add(Ho.fragment,"superdoc-image-fragment"),dl(l,sy),this.applyFragmentFrame(l,e,n.section),l.style.height=`${e.height}px`,this.applySdtDataset(l,(r=a.attrs)==null?void 0:r.sdt),this.applyContainerSdtDataset(l,(i=a.attrs)==null?void 0:i.containerSdt),e.isAnchored&&e.zIndex!=null&&(l.style.zIndex=String(e.zIndex)),a.id&&l.setAttribute("data-sd-block-id",a.id),e.pmStart!=null&&(l.dataset.pmStart=String(e.pmStart)),e.pmEnd!=null&&(l.dataset.pmEnd=String(e.pmEnd)),e.metadata&&!((s=a.attrs)!=null&&s.vmlWatermark)&&l.setAttribute("data-image-metadata",JSON.stringify(e.metadata));const c=this.doc.createElement("img");a.src&&(c.src=a.src),c.alt=a.alt??"",c.style.width="100%",c.style.height="100%",c.style.objectFit=a.objectFit??"contain",a.objectFit==="cover"&&(c.style.objectPosition="left top"),c.style.display=a.display==="inline"?"inline-block":"block";const u=[];if(a.gain!=null||a.blacklevel!=null){if(a.gain&&typeof a.gain=="string"&&a.gain.endsWith("f")){const d=Math.max(0,parseInt(a.gain)/65536);d>0&&u.push(`contrast(${d})`)}if(a.blacklevel&&typeof a.blacklevel=="string"&&a.blacklevel.endsWith("f")){const d=Math.max(0,1+parseInt(a.blacklevel)/327/100)+.5;d>0&&u.push(`brightness(${d})`)}u.length>0&&(c.style.filter=u.join(" "))}return l.appendChild(c),l}catch(o){return console.error("[DomPainter] Image fragment rendering failed:",{fragment:e,error:o}),this.createErrorPlaceholder(e.blockId,o)}}renderDrawingFragment(e,n){try{const r=this.blockLookup.get(e.blockId);if(!r||r.block.kind!=="drawing"||r.measure.kind!=="drawing")throw new Error(`DomPainter: missing drawing block for fragment ${e.blockId}`);if(!this.doc)throw new Error("DomPainter: document is not available");const i=r.block,s=i.kind==="drawing"&&i.drawingKind==="vectorShape",o=this.doc.createElement("div");o.classList.add(Ho.fragment,"superdoc-drawing-fragment"),dl(o,sy),this.applyFragmentFrame(o,e,n.section),o.style.height=`${e.height}px`,o.style.position="absolute",o.style.overflow="hidden",e.isAnchored&&e.zIndex!=null&&(o.style.zIndex=String(e.zIndex));const a=this.doc.createElement("div");a.classList.add("superdoc-drawing-inner"),a.style.position="absolute",a.style.left="50%",a.style.top="50%",a.style.width=`${e.geometry.width}px`,a.style.height=`${e.geometry.height}px`,a.style.transformOrigin="center";const l=e.scale??1,c=["translate(-50%, -50%)"];return s||(c.push(`rotate(${e.geometry.rotation??0}deg)`),c.push(`scaleX(${e.geometry.flipH?-1:1})`),c.push(`scaleY(${e.geometry.flipV?-1:1})`)),c.push(`scale(${l})`),a.style.transform=c.join(" "),a.appendChild(this.renderDrawingContent(i,e)),o.appendChild(a),o}catch(r){return console.error("[DomPainter] Drawing fragment rendering failed:",{fragment:e,error:r}),this.createErrorPlaceholder(e.blockId,r)}}renderDrawingContent(e,n){if(!this.doc)throw new Error("DomPainter: document is not available");return e.drawingKind==="image"?this.createDrawingImageElement(e):e.drawingKind==="vectorShape"?this.createVectorShapeElement(e,n.geometry,!0):e.drawingKind==="shapeGroup"?this.createShapeGroupElement(e):this.createDrawingPlaceholder()}createDrawingImageElement(e){const n=e,r=this.doc.createElement("img");return r.classList.add("superdoc-drawing-image"),n.src&&(r.src=n.src),r.alt=n.alt??"",r.style.width="100%",r.style.height="100%",r.style.objectFit=n.objectFit??"contain",n.objectFit==="cover"&&(r.style.objectPosition="left top"),r.style.display="block",r}createVectorShapeElement(e,n,r=!1,i=1,s=1){const o=this.doc.createElement("div");o.classList.add("superdoc-vector-shape"),o.style.width="100%",o.style.height="100%",o.style.position="relative",o.style.overflow="hidden";const a=e.shapeKind?this.tryCreatePresetSvg(e):null;if(a){const l=this.parseSafeSvg(a);if(l){if(l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.style.display="block",e.fillColor&&typeof e.fillColor=="object"&&("type"in e.fillColor&&e.fillColor.type==="gradient"?rdt(l,e.fillColor):"type"in e.fillColor&&e.fillColor.type==="solidWithAlpha"&&idt(l,e.fillColor)),r&&n&&this.applyVectorShapeTransforms(l,n),o.appendChild(l),e.textContent&&e.textContent.parts.length>0){const c=this.createFallbackTextElement(e.textContent,e.textAlign??"center",e.textVerticalAlign,e.textInsets,i,s);o.appendChild(c)}return o}}if(this.applyFallbackShapeStyle(o,e),e.textContent&&e.textContent.parts.length>0){const l=this.createFallbackTextElement(e.textContent,e.textAlign??"center",e.textVerticalAlign,e.textInsets,i,s);o.appendChild(l)}return r&&n&&this.applyVectorShapeTransforms(o,n),o}applyFallbackShapeStyle(e,n){if(n.fillColor===null)e.style.background="none";else if(typeof n.fillColor=="string")e.style.background=n.fillColor;else if(typeof n.fillColor=="object"&&"type"in n.fillColor)if(n.fillColor.type==="solidWithAlpha"){const r=n.fillColor.alpha,i=n.fillColor.color;e.style.background=i,e.style.opacity=r.toString()}else n.fillColor.type==="gradient"&&(e.style.background="rgba(15, 23, 42, 0.1)");else e.style.background="rgba(15, 23, 42, 0.1)";if(n.strokeColor===null)e.style.border="none";else if(typeof n.strokeColor=="string"){const r=n.strokeWidth??1;e.style.border=`${r}px solid ${n.strokeColor}`}else e.style.border="1px solid rgba(15, 23, 42, 0.3)"}createFallbackTextElement(e,n,r,i,s=1,o=1){const a=this.doc.createElement("div");a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.display="flex",a.style.flexDirection="column";const l=r??"center";if(l==="top"?a.style.justifyContent="flex-start":l==="bottom"?a.style.justifyContent="flex-end":a.style.justifyContent="center",i?a.style.padding=`${i.top}px ${i.right}px ${i.bottom}px ${i.left}px`:a.style.padding="10px",a.style.boxSizing="border-box",a.style.wordWrap="break-word",a.style.overflowWrap="break-word",a.style.overflow="hidden",a.style.minWidth="0",a.style.fontSize="12px",a.style.lineHeight="1.2",s!==1||o!==1){const u=1/s,d=1/o;a.style.transform=`scale(${u}, ${d})`,a.style.transformOrigin="top left",a.style.width=`${100*s}%`,a.style.height=`${100*o}%`}n==="center"?a.style.textAlign="center":n==="right"||n==="r"?a.style.textAlign="right":a.style.textAlign="left";let c=this.doc.createElement("div");return c.style.width="100%",c.style.minWidth="0",c.style.whiteSpace="normal",e.parts.forEach(u=>{if(u.isLineBreak)a.appendChild(c),c=this.doc.createElement("div"),c.style.width="100%",c.style.minWidth="0",c.style.whiteSpace="normal",u.isEmptyParagraph&&(c.style.minHeight="1em");else{const d=this.doc.createElement("span");if(d.textContent=u.text,u.formatting){if(u.formatting.bold&&(d.style.fontWeight="bold"),u.formatting.italic&&(d.style.fontStyle="italic"),u.formatting.color){const f=$U(u.formatting.color);f&&(d.style.color=f)}u.formatting.fontSize&&(d.style.fontSize=`${u.formatting.fontSize}px`)}c.appendChild(d)}}),a.appendChild(c),a}tryCreatePresetSvg(e){try{let n;e.fillColor===null?n="none":typeof e.fillColor=="string"&&(n=e.fillColor);const r=e.strokeColor===null?"none":typeof e.strokeColor=="string"?e.strokeColor:void 0;if(e.shapeKind==="line"){const i=e.geometry.width,s=e.geometry.height,o=r??"#000000",a=e.strokeWidth??1;return`<svg xmlns="http://www.w3.org/2000/svg" width="${i}" height="${s}" viewBox="0 0 ${i} ${s}">
  <line x1="0" y1="0" x2="${i}" y2="${s}" stroke="${o}" stroke-width="${a}" />
</svg>`}return jU({preset:e.shapeKind??"",styleOverrides:()=>({fill:n,stroke:r,strokeWidth:e.strokeWidth??void 0})})}catch(n){return console.warn(`[DomPainter] Unable to render preset shape "${e.shapeKind}":`,n),null}}parseSafeSvg(e){var a,l,c;const n=((l=(a=this.doc)==null?void 0:a.defaultView)==null?void 0:l.DOMParser)??(typeof DOMParser<"u"?DOMParser:null);if(!n)return null;const i=new n().parseFromString(e,"image/svg+xml");if(!i||i.getElementsByTagName("parsererror").length>0)return null;const s=i.documentElement;if(!s)return null;this.stripUnsafeSvgContent(s);const o=(c=this.doc)==null?void 0:c.importNode(s,!0);return o||null}stripUnsafeSvgContent(e){e.querySelectorAll("script").forEach(r=>r.remove());const n=r=>{Array.from(r.attributes).forEach(i=>{i.name.toLowerCase().startsWith("on")&&r.removeAttribute(i.name)}),Array.from(r.children).forEach(i=>{n(i)})};n(e)}applyVectorShapeTransforms(e,n){const r=[];n.rotation&&r.push(`rotate(${n.rotation}deg)`),n.flipH&&r.push("scaleX(-1)"),n.flipV&&r.push("scaleY(-1)"),r.length>0?(e.style.transformOrigin="center",e.style.transform=r.join(" ")):(e.style.removeProperty("transform"),e.style.removeProperty("transform-origin"))}createShapeGroupElement(e){const n=this.doc.createElement("div");n.classList.add("superdoc-shape-group"),n.style.position="relative",n.style.width="100%",n.style.height="100%";const r=e.groupTransform;let i=n,s=1,o=1;if(r){const a=this.doc.createElement("div");a.style.position="absolute",a.style.left="0",a.style.top="0";const l=r.childWidth??r.width??e.geometry.width??0,c=r.childHeight??r.height??e.geometry.height??0;a.style.width=`${Math.max(1,l)}px`,a.style.height=`${Math.max(1,c)}px`;const u=[],d=r.childX??0,f=r.childY??0;(d||f)&&u.push(`translate(${-d}px, ${-f}px)`);const h=r.width??e.geometry.width??l,m=r.height??e.geometry.height??c;s=l?h/l:1,o=c?m/c:1,(s!==1||o!==1)&&u.push(`scale(${s}, ${o})`),u.length>0&&(a.style.transformOrigin="top left",a.style.transform=u.join(" ")),n.appendChild(a),i=a}return e.shapes.forEach(a=>{const l=this.createGroupChildContent(a,s,o);if(!l)return;const c=a.attrs??{},u=this.doc.createElement("div");u.classList.add("superdoc-shape-group__child"),u.style.position="absolute",u.style.left=`${c.x??0}px`,u.style.top=`${c.y??0}px`;const d=typeof c.width=="number"?c.width:e.geometry.width,f=typeof c.height=="number"?c.height:e.geometry.height;u.style.width=`${Math.max(1,d)}px`,u.style.height=`${Math.max(1,f)}px`,u.style.transformOrigin="center";const h=[];c.rotation&&h.push(`rotate(${c.rotation}deg)`),c.flipH&&h.push("scaleX(-1)"),c.flipV&&h.push("scaleY(-1)"),h.length>0&&(u.style.transform=h.join(" ")),l.style.width="100%",l.style.height="100%",u.appendChild(l),i.appendChild(u)}),n}createGroupChildContent(e,n=1,r=1){if(e.shapeType==="vectorShape"&&"fillColor"in e.attrs){const i=e.attrs,s={width:i.width??0,height:i.height??0,rotation:i.rotation??0,flipH:i.flipH??!1,flipV:i.flipV??!1},o={drawingKind:"vectorShape",kind:"drawing",id:`${i.shapeId??e.shapeType}`,geometry:s,padding:void 0,margin:void 0,anchor:void 0,wrap:void 0,attrs:e.attrs,drawingContentId:void 0,drawingContent:void 0,shapeKind:i.kind,fillColor:i.fillColor,strokeColor:i.strokeColor,strokeWidth:i.strokeWidth,textContent:i.textContent,textAlign:i.textAlign};return this.createVectorShapeElement(o,s,!1,n,r)}if(e.shapeType==="image"&&"src"in e.attrs){const i=e.attrs,s=this.doc.createElement("img");return s.src=i.src,s.alt=i.alt??"",s.style.objectFit="contain",s.style.display="block",s}return this.createDrawingPlaceholder()}createDrawingPlaceholder(){const e=this.doc.createElement("div");return e.classList.add("superdoc-drawing-placeholder"),e.style.width="100%",e.style.height="100%",e.style.background="repeating-linear-gradient(45deg, rgba(15,23,42,0.1), rgba(15,23,42,0.1) 6px, rgba(15,23,42,0.2) 6px, rgba(15,23,42,0.2) 12px)",e.style.border="1px dashed rgba(15, 23, 42, 0.3)",e}renderTableFragment(e,n){if(!this.doc)throw new Error("DomPainter: document is not available");const r=(o,a)=>{this.applyFragmentFrame(o,a,n.section)},i=(o,a,l,c,u)=>{const d=o.runs.length>0?o.runs[o.runs.length-1]:null,f=(d==null?void 0:d.kind)==="lineBreak",h=u&&!f;return this.renderLine(o,a,l,void 0,c,h)},s=o=>o.drawingKind==="image"?this.createDrawingImageElement(o):o.drawingKind==="shapeGroup"?this.createShapeGroupElement(o):o.drawingKind==="vectorShape"?this.createVectorShapeElement(o,o.geometry,!1):this.createDrawingPlaceholder();return Gdt({doc:this.doc,fragment:e,context:n,blockLookup:this.blockLookup,renderLine:i,renderDrawingContent:s,applyFragmentFrame:r,applySdtDataset:this.applySdtDataset.bind(this),applyStyles:dl})}extractLinkData(e){if(e.kind==="tab"||e.kind==="image"||e.kind==="lineBreak")return null;const n=e.link;return n?this.buildLinkRenderData(n):null}buildLinkRenderData(e){const n=_ft(e),r=typeof e.href=="string"?pb(e.href):null,i=Aft(e.anchor??e.name??"");let s=(r==null?void 0:r.href)??i;if(e.version===2&&(s=Cft(s,e.docLocation??null)),r&&r.href&&typeof e.href=="string"){const d=e.href.indexOf("://")+3;let f=e.href.indexOf("/",d);f===-1&&(f=e.href.indexOf("?",d)),f===-1&&(f=e.href.indexOf("#",d)),f===-1&&(f=e.href.length),e.href.slice(d,f)}if(r&&r.href.length>Zre)return console.warn(`[DomPainter] Rejecting URL exceeding ${Zre} characters`),{blocked:!0,dataset:{[Ym.blocked]:"true"}};if(!s){if(typeof e.href=="string"&&e.href.trim())return n[Ym.blocked]="true",console.warn(`[DomPainter] Blocked potentially unsafe URL: ${e.href.slice(0,50)}`),{blocked:!0,dataset:n};const d=(e.anchor??e.name??null)!=null;return Object.keys(n).length>0||d?(n[Ym.blocked]="true",{blocked:!0,dataset:n}):null}const o=Nft(e,r),a=Ift(e,o),l=e.version===2?e.tooltip??e.title:e.title,c=l?U1e(l):null,u=(c==null?void 0:c.text)??null;return c!=null&&c.wasTruncated&&(n[Ym.truncated]="true"),{href:s,target:o,rel:a,tooltip:u,dataset:Object.keys(n).length>0?n:void 0,blocked:!1}}applyTooltipAccessibility(e,n){const r=`superdoc-link-${++this.linkIdCounter}`;if(e.id=r,!n||!this.doc)return r;e.setAttribute("title",n);const i=`link-desc-${r}`,s=this.doc.createElement("span");return s.id=i,s.className="sr-only",s.textContent=n,e.parentElement?(e.parentElement.appendChild(s),e.setAttribute("aria-describedby",i)):console.warn("[DomPainter] Unable to add aria-describedby for tooltip (element not in DOM)"),r}enhanceAccessibility(e,n,r){if(!n.href)return;const i=r.trim().toLowerCase();if(wft.test(i))try{const o=new URL(n.href).hostname.replace(/^www\./,""),a=`${r.trim()} - ${o}`;e.setAttribute("aria-label",a);return}catch{e.setAttribute("aria-label",`${r.trim()} - external link`);return}n.target==="_blank"&&!e.getAttribute("aria-label")&&e.setAttribute("aria-label",`${r.trim()} (opens in new tab)`)}applyLinkAttributes(e,n){n.href&&(e.href=n.href,e.classList.add("superdoc-link"),n.target?e.target=n.target:e.removeAttribute("target"),n.rel?e.rel=n.rel:e.removeAttribute("rel"),n.tooltip?e.title=n.tooltip:e.removeAttribute("title"),e.setAttribute("role","link"),e.setAttribute("tabindex","0"),e.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const i=new CustomEvent("superdoc-link-click",{bubbles:!0,composed:!0,detail:{href:n.href,target:n.target,rel:n.rel,tooltip:n.tooltip,element:e,clientX:r.clientX,clientY:r.clientY}});e.dispatchEvent(i)}))}isImageRun(e){return e.kind==="image"}isLineBreakRun(e){return e.kind==="lineBreak"}isBreakRun(e){return e.kind==="break"}isFieldAnnotationRun(e){return e.kind==="fieldAnnotation"}renderRun(e,n,r){if(this.isImageRun(e))return this.renderImageRun(e);if(this.isFieldAnnotationRun(e))return this.renderFieldAnnotationRun(e);if(this.isLineBreakRun(e)||this.isBreakRun(e)||!("text"in e)||!e.text||!this.doc)return null;const i=this.extractLinkData(e),s=!!(i&&!i.blocked&&i.href),o=s?this.doc.createElement("a"):this.doc.createElement("span"),a=$ft(e,n);o.textContent=a,i!=null&&i.dataset&&Rft(o,i.dataset),i!=null&&i.blocked&&(o.dataset[Ym.blocked]="true",o.setAttribute("role","text"),o.setAttribute("aria-label","Invalid link - not clickable")),s&&i&&(this.applyLinkAttributes(o,i),this.enhanceAccessibility(o,i,a),i.tooltip&&this.pendingTooltips.set(o,i.tooltip)),Lft(o,e,s);const l=Dft(e);l&&!e.highlight&&(o.style.backgroundColor=l);const c=e.comments;return c!=null&&c.length&&(o.dataset.commentIds=c.map(u=>u.commentId).join(","),c.some(u=>u.internal)&&(o.dataset.commentInternal="true"),o.classList.add("superdoc-comment-highlight")),o.style.zIndex="1",iie(o,e.dataAttrs),R9(e,"paragraph text run"),e.pmStart!=null&&(o.dataset.pmStart=String(e.pmStart)),e.pmEnd!=null&&(o.dataset.pmEnd=String(e.pmEnd)),o.dataset.layoutEpoch=String(this.layoutEpoch),r&&this.applyTrackedChangeDecorations(o,e,r),this.applySdtDataset(o,e.sdt),o}renderImageRun(e){if(!this.doc||!e.src)return null;const n=this.doc.createElement("img");if(n.classList.add("superdoc-inline-image"),typeof e.src=="string"&&e.src.startsWith("data:")){if(e.src.length>Jre||!Qre.test(e.src))return null;n.src=e.src}else{const i=Eft(e.src);if(i)n.src=i;else return null}if(n.width=e.width,n.height=e.height,e.width>0&&e.height>0){const i=e.width/e.height,s={originalWidth:e.width,originalHeight:e.height,maxWidth:Math.max(e.width*eie,tie),maxHeight:Math.max(e.height*eie,tie),aspectRatio:i,minWidth:nie,minHeight:nie};n.setAttribute("data-image-metadata",JSON.stringify(s))}return n.alt=e.alt??"",e.title&&(n.title=e.title),n.style.display="inline-block",n.style.verticalAlign=e.verticalAlign??"bottom",e.distTop&&(n.style.marginTop=`${e.distTop}px`),e.distBottom&&(n.style.marginBottom=`${e.distBottom}px`),e.distLeft&&(n.style.marginLeft=`${e.distLeft}px`),e.distRight&&(n.style.marginRight=`${e.distRight}px`),n.style.zIndex="1",R9(e,"inline image run"),e.pmStart!=null&&(n.dataset.pmStart=String(e.pmStart)),e.pmEnd!=null&&(n.dataset.pmEnd=String(e.pmEnd)),n.dataset.layoutEpoch=String(this.layoutEpoch),this.applySdtDataset(n,e.sdt),e.dataAttrs&&iie(n,e.dataAttrs),n}renderFieldAnnotationRun(e){if(!this.doc)return null;if(e.hidden){const a=this.doc.createElement("span");return a.style.display="none",e.pmStart!=null&&(a.dataset.pmStart=String(e.pmStart)),e.pmEnd!=null&&(a.dataset.pmEnd=String(e.pmEnd)),a.dataset.layoutEpoch=String(this.layoutEpoch),a}const n="#b015b3",r="#980043",i=this.doc.createElement("span");if(i.classList.add("annotation"),i.setAttribute("aria-label","Field annotation"),e.highlighted!==!1){const a=e.borderColor||n;i.style.border=`2px solid ${a}`,i.style.borderRadius="2px",i.style.padding="1px 2px",i.style.boxSizing="border-box";const l=e.fieldColor||r,c=l.length===7?`${l}33`:l;e.textHighlight?i.style.backgroundColor=e.textHighlight:i.style.backgroundColor=c}if(e.visibility==="hidden"&&(i.style.visibility="hidden"),e.size&&(e.size.width&&(i.style.width=`${e.size.width}px`,i.style.display="inline-block",i.style.overflow="hidden"),e.size.height&&(i.style.height=`${e.size.height}px`)),e.fontFamily&&(i.style.fontFamily=e.fontFamily),e.fontSize){const a=typeof e.fontSize=="number"?`${e.fontSize}pt`:e.fontSize;i.style.fontSize=a}e.textColor&&(i.style.color=e.textColor),e.bold&&(i.style.fontWeight="bold"),e.italic&&(i.style.fontStyle="italic"),e.underline&&(i.style.textDecoration="underline"),i.style.zIndex="1";const o=this.doc.createElement("span");switch(o.classList.add("annotation-content"),o.style.pointerEvents="none",o.setAttribute("contenteditable","false"),e.variant){case"image":case"signature":{if(e.imageSrc){const a=this.doc.createElement("img");if(e.imageSrc.startsWith("data:"))if(e.imageSrc.length<=Jre&&Qre.test(e.imageSrc))a.src=e.imageSrc;else{o.textContent=e.displayLabel;break}else{const c=pb(e.imageSrc);if(c)a.src=c.href;else{o.textContent=e.displayLabel;break}}a.alt=e.displayLabel,a.style.height="auto",a.style.maxWidth="100%",a.style.pointerEvents="none",a.style.verticalAlign="middle",e.variant==="signature"&&(a.style.maxHeight="28px"),o.appendChild(a),i.style.display="inline-block",o.style.display="inline-block"}else o.textContent=e.displayLabel||(e.variant==="signature"?"Signature":"");break}case"link":{if(e.linkUrl){const a=this.doc.createElement("a"),l=pb(e.linkUrl);l?(a.href=l.href,a.target="_blank",a.rel="noopener noreferrer",a.textContent=e.linkUrl,a.style.textDecoration="none",o.style.pointerEvents="all",o.appendChild(a)):o.textContent=e.displayLabel}else o.textContent=e.displayLabel;break}case"html":{e.rawHtml&&typeof e.rawHtml=="string"?(o.textContent=e.displayLabel,i.style.display="inline-block",o.style.display="inline-block"):o.textContent=e.displayLabel;break}case"text":case"checkbox":default:{o.textContent=e.displayLabel;break}}return i.appendChild(o),i.dataset.type=e.variant,e.fieldId&&(i.dataset.fieldId=e.fieldId),e.fieldType&&(i.dataset.fieldType=e.fieldType),i.draggable=!0,i.dataset.draggable="true",e.displayLabel&&(i.dataset.displayLabel=e.displayLabel),e.variant&&(i.dataset.variant=e.variant),R9(e,"field annotation run"),e.pmStart!=null&&(i.dataset.pmStart=String(e.pmStart)),e.pmEnd!=null&&(i.dataset.pmEnd=String(e.pmEnd)),i.dataset.layoutEpoch=String(this.layoutEpoch),this.applySdtDataset(i,e.sdt),i}renderLine(e,n,r,i,s,o){var T,R,k,_,N,L,M,C,D,O,$;if(!this.doc)throw new Error("DomPainter: document is not available");const a=this.doc.createElement("div");a.classList.add(Ho.line),dl(a,udt(n.lineHeight)),a.dataset.layoutEpoch=String(this.layoutEpoch);const l=(T=e.attrs)==null?void 0:T.styleId;l&&a.setAttribute("styleid",l);const c=(R=e.attrs)==null?void 0:R.alignment;c==="center"||c==="right"?a.style.textAlign=c:a.style.textAlign="left";const u=BU(e,n);u.pmStart!=null&&(a.dataset.pmStart=String(u.pmStart)),u.pmEnd!=null&&(a.dataset.pmEnd=String(u.pmEnd));let d=jft(e,n);const f=this.resolveTrackedChangesConfig(e);if(d.length===0){const U=this.doc.createElement("span");U.classList.add("superdoc-empty-run"),u.pmStart!=null&&(U.dataset.pmStart=String(u.pmStart)),u.pmEnd!=null&&(U.dataset.pmEnd=String(u.pmEnd)),U.innerHTML="&nbsp;",a.appendChild(U)}n.leaders&&n.leaders.length>0&&n.leaders.forEach(U=>{const W=this.doc.createElement("div");W.classList.add("superdoc-leader"),W.setAttribute("data-style",U.style),W.style.position="absolute",W.style.left=`${U.from}px`,W.style.width=`${Math.max(0,U.to-U.from)}px`;const ce=Math.max(1,Math.round(Math.max(1,n.descent*.5)));W.style.bottom=`${ce}px`,W.style.height=U.style==="heavy"?"2px":"1px",W.style.pointerEvents="none",W.style.zIndex="0",U.style==="dot"||U.style==="middleDot"?W.style.borderBottom="1px dotted currentColor":U.style==="hyphen"?W.style.borderBottom="1px dashed currentColor":U.style==="underscore"?W.style.borderBottom="1px solid currentColor":U.style==="heavy"&&(W.style.borderBottom="2px solid currentColor"),a.appendChild(W)}),n.bars&&n.bars.length>0&&n.bars.forEach(U=>{const W=this.doc.createElement("div");W.classList.add("superdoc-tab-bar"),W.style.position="absolute",W.style.left=`${U.x}px`,W.style.top="0px",W.style.bottom="0px",W.style.width="1px",W.style.background="currentColor",W.style.opacity="0.6",W.style.pointerEvents="none",a.appendChild(W)});const h=(k=n.segments)==null?void 0:k.some(U=>U.x!==void 0),m=i??n.maxWidth??n.width,y=$1e({alignment:(_=e.attrs)==null?void 0:_.alignment,hasExplicitPositioning:h??!1,isLastLineOfParagraph:!1,paragraphEndsWithLineBreak:!1,skipJustifyOverride:o}),w=U=>{let W=0;for(let ce=0;ce<U.length;ce+=1)yB.has(U[ce])&&(W+=1);return W};if(y){const U=re=>{if(!re)return;const X=Object.keys(re).sort(),me={};return X.forEach(G=>{me[G]=re[G]}),me},W=re=>JSON.stringify({kind:re.kind??"text",fontFamily:re.fontFamily,fontSize:re.fontSize,bold:re.bold??!1,italic:re.italic??!1,letterSpacing:re.letterSpacing??null,color:re.color??null,underline:re.underline??null,strike:re.strike??!1,highlight:re.highlight??null,textTransform:re.textTransform??null,token:re.token??null,pageRefMetadata:re.pageRefMetadata??null,trackedChange:re.trackedChange??null,sdt:re.sdt??null,link:re.link??null,comments:re.comments??null,dataAttrs:U(re.dataAttrs)??null}),ce=re=>{if(re.length===0)return!1;for(let X=0;X<re.length;X+=1)if(!yB.has(re[X]))return!1;return!0},se=re=>({...re,comments:re.comments?[...re.comments]:void 0,dataAttrs:re.dataAttrs?{...re.dataAttrs}:void 0,underline:re.underline?{...re.underline}:void 0,pageRefMetadata:re.pageRefMetadata?{...re.pageRefMetadata}:void 0}),Q=d.map(re=>re.kind!=="text"&&re.kind!==void 0||!("text"in re)?re:se(re)),J=[];for(let re=0;re<Q.length;re+=1){const X=Q[re];if(X.kind!=="text"&&X.kind!==void 0||!("text"in X)){J.push(X);continue}const me=X;if(!ce(me.text??"")){J.push(me);continue}const G=J[J.length-1];if(G&&(G.kind==="text"||G.kind===void 0)&&"text"in G){const z=G;if(W(z)===W(me)){const de=me.text??"";z.text=(z.text??"")+de,z.pmStart!=null?z.pmEnd=z.pmStart+z.text.length:z.pmEnd!=null&&(z.pmEnd=z.pmEnd+de.length);continue}}const B=Q[re+1];if(B&&(B.kind==="text"||B.kind===void 0)&&"text"in B){const z=B;if(W(z)===W(me)){const de=me.text??"";z.text=de+(z.text??""),me.pmStart!=null?z.pmStart=me.pmStart:z.pmStart!=null&&(z.pmStart=z.pmStart-de.length),z.pmStart!=null&&z.pmEnd==null&&(z.pmEnd=z.pmStart+z.text.length);continue}}J.push(me)}if(d=J,d.some(re=>(re.kind==="text"||re.kind===void 0)&&"text"in re&&(re.text??"").trim().length>0))for(let re=d.length-1;re>=0;re-=1){const X=d[re];if(X.kind!=="text"&&X.kind!==void 0||!("text"in X))continue;const me=X.text??"";let G=0;for(let z=me.length-1;z>=0&&me[z]===" ";z-=1)G+=1;if(G===0)break;const B=me.slice(0,Math.max(0,me.length-G));if(B.length===0){d.splice(re,1);continue}X.text=B,X.pmEnd!=null&&(X.pmEnd=X.pmEnd-G);break}}const b=n.spaceCount??d.reduce((U,W)=>W.kind!=="text"&&W.kind!==void 0||!("text"in W)||W.text==null?U:U+w(W.text),0),E=n.naturalWidth??n.width,A=z1e({lineWidth:E,availableWidth:m,spaceCount:b,shouldJustify:y});if(A!==0&&(a.style.wordSpacing=`${A}px`),h&&n.segments){const U=(N=e.attrs)==null?void 0:N.indent,W=(U==null?void 0:U.left)??0,ce=(U==null?void 0:U.firstLine)??0,se=(U==null?void 0:U.hanging)??0,Q=s===0||s===void 0,J=Q?ce-se:0,K=(L=e.attrs)==null?void 0:L.wordLayout,re=Xre(K)?K:void 0,X=!!(re!=null&&re.marker),me=typeof((M=re==null?void 0:re.marker)==null?void 0:M.textStartX)=="number"&&Number.isFinite(re.marker.textStartX)?re.marker.textStartX:typeof(re==null?void 0:re.textStartPx)=="number"&&Number.isFinite(re.textStartPx)?re.textStartPx:void 0,B=X?Q?me??W:W:W+J;let z=0;const de=new Map;n.segments.forEach(ee=>{const ae=de.get(ee.runIndex);ae?ae.push(ee):de.set(ee.runIndex,[ee])});const Y=ee=>{const ae=ee+1;if(ae<=n.toRun){const ie=de.get(ae);if(ie&&ie.length>0)return ie[0].x}};for(let ee=n.fromRun;ee<=n.toRun;ee+=1){const ae=e.runs[ee];if(!ae)continue;if(ae.kind==="tab"){const Z=Y(ee),oe=z,te=Z!==void 0?Z:oe+(ae.width??0),ye=te-oe,ke=this.doc.createElement("span");if(ke.style.position="absolute",ke.style.left=`${oe+B}px`,ke.style.top="0px",ke.style.width=`${ye}px`,ke.style.height=`${n.lineHeight}px`,ke.style.display="inline-block",ke.style.pointerEvents="none",ke.style.zIndex="1",ae.underline){const we=ae.underline.style??"single",Ae=ae.underline.color??"#000000",Re=we==="double"?"double":"solid";ke.style.borderBottom=`1px ${Re} ${Ae}`}else ke.style.visibility="hidden";l&&ke.setAttribute("styleid",l),ae.pmStart!=null&&(ke.dataset.pmStart=String(ae.pmStart)),ae.pmEnd!=null&&(ke.dataset.pmEnd=String(ae.pmEnd)),ke.dataset.layoutEpoch=String(this.layoutEpoch),a.appendChild(ke),z=te;continue}if(this.isImageRun(ae)){const Z=this.renderRun(ae,r,f);if(Z){l&&Z.setAttribute("styleid",l);const oe=de.get(ee),te=oe&&((C=oe[0])==null?void 0:C.x)!==void 0?oe[0].x:z,ye=te+B,ke=(oe&&((D=oe[0])==null?void 0:D.width)!==void 0?oe[0].width:Z.offsetWidth)??0;Z.style.position="absolute",Z.style.left=`${ye}px`,a.appendChild(Z),z=te+ke}continue}if(this.isLineBreakRun(ae)||this.isBreakRun(ae))continue;if(this.isFieldAnnotationRun(ae)){const Z=this.renderRun(ae,r,f);if(Z){l&&Z.setAttribute("styleid",l);const oe=de.get(ee),te=oe&&((O=oe[0])==null?void 0:O.x)!==void 0?oe[0].x:z,ye=te+B,ke=(oe&&(($=oe[0])==null?void 0:$.width)!==void 0?oe[0].width:0)??0;Z.style.position="absolute",Z.style.left=`${ye}px`,a.appendChild(Z),z=te+ke}continue}const ie=de.get(ee);if(!ie||ie.length===0||!("text"in ae))continue;const H=ae.text??"",be=ae.pmStart??null,Te=be!=null&&ae.pmEnd==null?be+H.length:ae.pmEnd??null;ie.forEach(Z=>{const oe=H.slice(Z.fromChar,Z.toChar);if(!oe)return;const te=be!=null?be+Z.fromChar:void 0,ye=be!=null?be+Z.toChar:Te??void 0,ke={...ae,text:oe,pmStart:te,pmEnd:ye},we=this.renderRun(ke,r,f);if(we){l&&we.setAttribute("styleid",l);const Ae=Z.x!==void 0?Z.x:z,Re=Ae+B;we.style.position="absolute",we.style.left=`${Re}px`,a.appendChild(we);let Pe=Z.width??0;if(Pe<=0&&this.doc){const Ce=we.cloneNode(!0);Ce.style.position="absolute",Ce.style.visibility="hidden",Ce.style.left="-9999px",this.doc.body.appendChild(Ce),Pe=Ce.offsetWidth,this.doc.body.removeChild(Ce)}z=Ae+Pe}})}}else{let U=null,W=null;const ce=()=>{U&&(a.appendChild(U),U=null,W=null)};d.forEach(se=>{const Q=se.sdt,J=(Q==null?void 0:Q.type)==="structuredContent"&&(Q==null?void 0:Q.scope)==="inline",K=J&&(Q!=null&&Q.id)?String(Q.id):null;if(K!==W&&ce(),se.kind==="tab"){const X=this.doc.createElement("span");X.classList.add("superdoc-tab");const me=se.width??48;if(X.style.display="inline-block",X.style.width=`${me}px`,X.style.height=`${n.lineHeight}px`,X.style.verticalAlign="bottom",se.underline){const G=se.underline.style??"single",B=se.underline.color??"#000000",z=G==="double"?"double":"solid";X.style.borderBottom=`1px ${z} ${B}`}l&&X.setAttribute("styleid",l),se.pmStart!=null&&(X.dataset.pmStart=String(se.pmStart)),se.pmEnd!=null&&(X.dataset.pmEnd=String(se.pmEnd)),X.dataset.layoutEpoch=String(this.layoutEpoch),a.appendChild(X);return}const re=this.renderRun(se,r,f);if(re)if(l&&re.setAttribute("styleid",l),J&&K&&this.doc){if(!U){U=this.doc.createElement("span"),U.className=iu.INLINE_SDT_WRAPPER,U.dataset.layoutEpoch=String(this.layoutEpoch),W=K,this.applySdtDataset(U,Q);const G=(Q==null?void 0:Q.alias)||"Inline content",B=this.doc.createElement("span");B.className=`${iu.INLINE_SDT_WRAPPER}__label`,B.textContent=G,U.appendChild(B)}const X=U.dataset.pmStart,me=U.dataset.pmEnd;se.pmStart!=null&&(!X||se.pmStart<parseInt(X,10))&&(U.dataset.pmStart=String(se.pmStart)),se.pmEnd!=null&&(!me||se.pmEnd>parseInt(me,10))&&(U.dataset.pmEnd=String(se.pmEnd)),U.appendChild(re)}else a.appendChild(re)}),ce()}return a.querySelectorAll("a[href]").forEach(U=>{const W=this.pendingTooltips.get(U);W&&(this.applyTooltipAccessibility(U,W),this.pendingTooltips.delete(U))}),a}resolveTrackedChangesConfig(e){const n=e.attrs??{},r=n.trackedChangesMode??"review",i=n.trackedChangesEnabled!==!1;return{mode:r,enabled:i}}applyTrackedChangeDecorations(e,n,r){var l;if(!r.enabled||r.mode==="off")return;const s=n.trackedChange;if(!s)return;const o=vft[s.kind];o&&e.classList.add(o);const a=(l=xft[s.kind])==null?void 0:l[r.mode];a&&e.classList.add(a),e.dataset.trackChangeId=s.id,e.dataset.trackChangeKind=s.kind,s.author&&(e.dataset.trackChangeAuthor=s.author),s.authorEmail&&(e.dataset.trackChangeAuthorEmail=s.authorEmail),s.authorImage&&(e.dataset.trackChangeAuthorImage=s.authorImage),s.date&&(e.dataset.trackChangeDate=s.date)}updateFragmentElement(e,n,r){this.applyFragmentFrame(e,n,r),n.kind==="image"&&(e.style.height=`${n.height}px`),n.kind==="drawing"&&(e.style.height=`${n.height}px`)}applyFragmentFrame(e,n,r){e.style.left=`${n.x}px`,e.style.top=`${n.y}px`,e.style.width=`${n.width}px`,e.dataset.blockId=n.blockId,e.dataset.layoutEpoch=String(this.layoutEpoch),n.kind==="para"&&((r==="body"||r===void 0)&&Xdt(n),n.pmStart!=null?e.dataset.pmStart=String(n.pmStart):delete e.dataset.pmStart,n.pmEnd!=null?e.dataset.pmEnd=String(n.pmEnd):delete e.dataset.pmEnd,n.pmStart!=null&&n.pmEnd!=null?e.title=`PM ${n.pmStart}${n.pmEnd}`:e.removeAttribute("title"),n.continuesFromPrev?e.dataset.continuesFromPrev="true":delete e.dataset.continuesFromPrev,n.continuesOnNext?e.dataset.continuesOnNext="true":delete e.dataset.continuesOnNext)}estimateFragmentHeight(e){const n=this.blockLookup.get(e.blockId),r=n==null?void 0:n.measure;return e.kind==="para"&&(r==null?void 0:r.kind)==="paragraph"||e.kind==="list-item"&&(r==null?void 0:r.kind)==="list"?r.totalHeight:e.kind==="table"||e.kind==="image"||e.kind==="drawing"?e.height:0}buildBlockLookup(e,n){if(e.length!==n.length)throw new Error("DomPainter requires the same number of blocks and measures");const r=new Map;return e.forEach((i,s)=>{r.set(i.id,{block:i,measure:n[s],version:X1e(i)})}),r}setDatasetString(e,n,r){r&&(e.dataset[n]=r)}setDatasetBoolean(e,n,r){r!=null&&(e.dataset[n]=String(r))}applySdtDataset(e,n){e!=null&&e.dataset&&(this.clearSdtDataset(e),n&&(e.dataset.sdtType=n.type,"id"in n&&n.id!=null&&(e.dataset.sdtId=String(n.id)),n.type==="fieldAnnotation"?(this.setDatasetString(e,"sdtFieldId",n.fieldId),this.setDatasetString(e,"sdtFieldType",n.fieldType),this.setDatasetString(e,"sdtFieldVariant",n.variant),this.setDatasetString(e,"sdtFieldVisibility",n.visibility),this.setDatasetBoolean(e,"sdtFieldHidden",n.hidden),this.setDatasetBoolean(e,"sdtFieldLocked",n.isLocked)):n.type==="structuredContent"?(this.setDatasetString(e,"sdtScope",n.scope),this.setDatasetString(e,"sdtTag",n.tag),this.setDatasetString(e,"sdtAlias",n.alias)):n.type==="documentSection"?(this.setDatasetString(e,"sdtSectionTitle",n.title),this.setDatasetString(e,"sdtSectionType",n.sectionType),this.setDatasetBoolean(e,"sdtSectionLocked",n.isLocked)):n.type==="docPartObject"&&(this.setDatasetString(e,"sdtDocpartGallery",n.gallery),this.setDatasetString(e,"sdtDocpartId",n.uniqueId),this.setDatasetString(e,"sdtDocpartInstruction",n.instruction))))}clearSdtDataset(e){y4.SDT_DATASET_KEYS.forEach(n=>{delete e.dataset[n]})}applyContainerSdtDataset(e,n){e!=null&&e.dataset&&n&&(e.dataset.sdtContainerType=n.type,"id"in n&&n.id!=null&&(e.dataset.sdtContainerId=String(n.id)),n.type==="documentSection"&&(this.setDatasetString(e,"sdtContainerSectionTitle",n.title),this.setDatasetString(e,"sdtContainerSectionType",n.sectionType),this.setDatasetBoolean(e,"sdtContainerSectionLocked",n.isLocked)))}};y4.SDT_DATASET_KEYS=["sdtType","sdtId","sdtFieldId","sdtFieldType","sdtFieldVariant","sdtFieldVisibility","sdtFieldHidden","sdtFieldLocked","sdtScope","sdtTag","sdtAlias","sdtSectionTitle","sdtSectionType","sdtSectionLocked","sdtDocpartGallery","sdtDocpartId","sdtDocpartInstruction"];let wB=y4;const rie=t=>{if(t.kind==="para")return`para:${t.blockId}:${t.fromLine}:${t.toLine}`;if(t.kind==="list-item")return`list-item:${t.blockId}:${t.itemId}:${t.fromLine}:${t.toLine}`;if(t.kind==="image")return`image:${t.blockId}:${t.x}:${t.y}`;if(t.kind==="drawing")return`drawing:${t.blockId}:${t.x}:${t.y}`;if(t.kind==="table"){const n=t.partialRow?`:${t.partialRow.fromLineByCell.join(",")}-${t.partialRow.toLineByCell.join(",")}`:"";return`table:${t.blockId}:${t.fromRow}:${t.toRow}${n}`}return t},F5=(t,e)=>{var r;const n=((r=e.get(t.blockId))==null?void 0:r.version)??"missing";if(t.kind==="para")return[n,t.fromLine,t.toLine,t.continuesFromPrev?1:0,t.continuesOnNext?1:0,t.markerWidth??""].join("|");if(t.kind==="list-item")return[n,t.itemId,t.fromLine,t.toLine,t.continuesFromPrev?1:0,t.continuesOnNext?1:0].join("|");if(t.kind==="image")return[n,t.width,t.height].join("|");if(t.kind==="drawing")return[n,t.drawingKind,t.drawingContentId??"",t.width,t.height,t.geometry.width,t.geometry.height,t.geometry.rotation??0,t.scale??1,t.zIndex??""].join("|");if(t.kind==="table"){const i=t.partialRow?`${t.partialRow.fromLineByCell.join(",")}-${t.partialRow.toLineByCell.join(",")}-${t.partialRow.partialHeight}`:"";return[n,t.fromRow,t.toRow,t.width,t.height,t.continuesFromPrev?1:0,t.continuesOnNext?1:0,t.repeatHeaderCount??0,i].join("|")}return n},Mft=t=>{if(!t||typeof t!="object")return!1;const e=t;if(!e.numberingProperties||typeof e.numberingProperties!="object")return!1;const n=e.numberingProperties;if("numId"in n){const r=n.numId;if(typeof r!="number"&&typeof r!="string")return!1}if("ilvl"in n&&typeof n.ilvl!="number")return!1;if("wordLayout"in e&&e.wordLayout!==void 0){if(typeof e.wordLayout!="object"||e.wordLayout===null)return!1;const r=e.wordLayout;if("marker"in r&&r.marker!==void 0){if(typeof r.marker!="object"||r.marker===null)return!1;const i=r.marker;if("markerText"in i&&i.markerText!==void 0&&typeof i.markerText!="string")return!1}}return!0},X1e=t=>{var e,n,r,i,s,o,a,l,c,u,d,f,h,m,y,w,b,E,A,x,T,R,k;if(t.kind==="paragraph"){const _=Mft(t.attrs)?`marker:${t.attrs.numberingProperties.numId??""}:${t.attrs.numberingProperties.ilvl??0}:${((n=(e=t.attrs.wordLayout)==null?void 0:e.marker)==null?void 0:n.markerText)??""}`:"",N=t.runs.map(D=>{var $,U,W;if(D.kind==="image"){const ce=D;return["img",ce.src,ce.width,ce.height,ce.alt??"",ce.title??"",ce.distTop??"",ce.distBottom??"",ce.distLeft??"",ce.distRight??""].join(",")}if(D.kind==="lineBreak")return"linebreak";if(D.kind==="tab")return[D.text??"","tab"].join(",");const O=D;return[O.text??"",O.fontFamily,O.fontSize,O.bold?1:0,O.italic?1:0,O.color??"",(($=O.underline)==null?void 0:$.style)??"",((U=O.underline)==null?void 0:U.color)??"",O.strike?1:0,O.highlight??"",O.letterSpacing!=null?O.letterSpacing:"",O.token??"",O.trackedChange?1:0,((W=O.comments)==null?void 0:W.length)??0].join(",")}).join("|"),L=t.attrs,M=L?[L.alignment??"",((r=L.spacing)==null?void 0:r.before)??"",((i=L.spacing)==null?void 0:i.after)??"",((s=L.spacing)==null?void 0:s.line)??"",((o=L.spacing)==null?void 0:o.lineRule)??"",((a=L.indent)==null?void 0:a.left)??"",((l=L.indent)==null?void 0:l.right)??"",((c=L.indent)==null?void 0:c.firstLine)??"",((u=L.indent)==null?void 0:u.hanging)??"",L.borders?Kre(L.borders):"",((d=L.shading)==null?void 0:d.fill)??"",((f=L.shading)==null?void 0:f.color)??"",L.direction??"",L.rtl?"1":"",(h=L.tabs)!=null&&h.length?JSON.stringify(L.tabs):""].join(":"):"";return[_,N,M].filter(Boolean).join("|")}if(t.kind==="list")return t.items.map(_=>`${_.id}:${_.marker.text}:${X1e(_.paragraph)}`).join("|");if(t.kind==="image")return[t.src??"",t.width??"",t.height??"",t.alt??"",t.title??""].join("|");if(t.kind==="drawing"){if(t.drawingKind==="image"){const _=t;return["drawing:image",_.src??"",_.width??"",_.height??"",_.alt??""].join("|")}if(t.drawingKind==="vectorShape"){const _=t;return["drawing:vector",_.shapeKind??"",_.fillColor??"",_.strokeColor??"",_.strokeWidth??"",_.geometry.width,_.geometry.height,_.geometry.rotation??0,_.geometry.flipH?1:0,_.geometry.flipV?1:0].join("|")}if(t.drawingKind==="shapeGroup"){const _=t,N=_.shapes.map(L=>`${L.shapeType}:${JSON.stringify(L.attrs??{})}`).join(";");return["drawing:group",_.geometry.width,_.geometry.height,_.groupTransform?JSON.stringify(_.groupTransform):"",N].join("|")}return`drawing:unknown:${t.id}`}if(t.kind==="table"){const _=t,N=(D,O)=>{let $=D>>>0;for(let U=0;U<O.length;U++)$^=O.charCodeAt(U),$=Math.imul($,16777619);return $>>>0},L=(D,O)=>{const $=Number.isFinite(O)?O:0;let U=D^$;return U=Math.imul(U,16777619),U^=U>>>13,U>>>0};let M=2166136261;M=N(M,t.id),M=L(M,_.rows.length),M=(_.columnWidths??[]).reduce((D,O)=>L(D,Math.round(O*1e3)),M);const C=_.rows??[];for(const D of C)if(!(!D||!Array.isArray(D.cells))){M=L(M,D.cells.length);for(const O of D.cells){if(!O)continue;const $=O.blocks??(O.paragraph?[O.paragraph]:[]);if(M=L(M,$.length),M=L(M,O.rowSpan??1),M=L(M,O.colSpan??1),O.attrs){const U=O.attrs;if(U.borders&&(M=N(M,lft(U.borders))),U.padding){const W=U.padding;M=L(M,W.top??0),M=L(M,W.right??0),M=L(M,W.bottom??0),M=L(M,W.left??0)}U.verticalAlign&&(M=N(M,U.verticalAlign)),U.background&&(M=N(M,U.background))}for(const U of $)if(M=N(M,(U==null?void 0:U.kind)??"unknown"),(U==null?void 0:U.kind)==="paragraph"){const W=U,ce=W.runs??[];M=L(M,ce.length);const se=W.attrs;se&&(M=N(M,se.alignment??""),M=L(M,((m=se.spacing)==null?void 0:m.before)??0),M=L(M,((y=se.spacing)==null?void 0:y.after)??0),M=L(M,((w=se.spacing)==null?void 0:w.line)??0),M=N(M,((b=se.spacing)==null?void 0:b.lineRule)??""),M=L(M,((E=se.indent)==null?void 0:E.left)??0),M=L(M,((A=se.indent)==null?void 0:A.right)??0),M=L(M,((x=se.indent)==null?void 0:x.firstLine)??0),M=L(M,((T=se.indent)==null?void 0:T.hanging)??0),M=N(M,((R=se.shading)==null?void 0:R.fill)??""),M=N(M,((k=se.shading)==null?void 0:k.color)??""),M=N(M,se.direction??""),M=N(M,se.rtl?"1":""),se.borders&&(M=N(M,Kre(se.borders))));for(const Q of ce)"text"in Q&&typeof Q.text=="string"&&(M=N(M,Q.text)),M=L(M,Q.pmStart??-1),M=L(M,Q.pmEnd??-1),M=N(M,M9(Q,"color")),M=N(M,M9(Q,"highlight")),M=N(M,L9(Q,"bold")?"1":""),M=N(M,L9(Q,"italic")?"1":""),M=L(M,fft(Q,"fontSize")),M=N(M,M9(Q,"fontFamily")),M=N(M,hft(Q)),M=N(M,pft(Q)),M=N(M,L9(Q,"strike")?"1":"")}}}if(_.attrs){const D=_.attrs;D.borders&&(M=N(M,aft(D.borders))),D.borderCollapse&&(M=N(M,D.borderCollapse)),D.cellSpacing!==void 0&&(M=L(M,D.cellSpacing))}return[t.id,_.rows.length,M.toString(16)].join("|")}return t.id},Lft=(t,e,n=!1)=>{if(e.kind==="tab"||e.kind==="image"||e.kind==="lineBreak"||e.kind==="break"||e.kind==="fieldAnnotation")return;t.style.fontFamily=e.fontFamily,t.style.fontSize=`${e.fontSize}px`,e.bold&&(t.style.fontWeight="bold"),e.italic&&(t.style.fontStyle="italic"),e.color&&(t.style.color=e.color),e.letterSpacing!=null&&(t.style.letterSpacing=`${e.letterSpacing}px`),e.highlight&&(t.style.backgroundColor=e.highlight),e.textTransform&&(t.style.textTransform=e.textTransform);const r=[];if(e.underline){r.push("underline");const i=e.underline;t.style.textDecorationStyle=i.style&&i.style!=="single"?i.style:"solid",i.color&&(t.style.textDecorationColor=i.color)}e.strike&&r.push("line-through"),r.length>0&&(t.style.textDecorationLine=r.join(" "))},Dft=t=>{const e=t.comments;return!e||e.length===0?void 0:`${e[0].internal?yft:gft}${bft}`},iie=(t,e)=>{e&&Object.entries(e).forEach(([n,r])=>{if(!(typeof n!="string"||!n.toLowerCase().startsWith("data-"))&&typeof r=="string")try{t.setAttribute(n,r)}catch(i){_e.env.NODE_ENV==="development"&&console.warn(`[DomPainter] Failed to set data attribute "${n}":`,i)}})},sie=(t,e,n={})=>{if(!e)return;e.styleId&&t.setAttribute("styleid",e.styleId),e.alignment&&(t.style.textAlign=e.alignment==="justify"||e.alignment==="both"?"left":e.alignment),e.dropCap&&t.classList.add("sd-editor-dropcap");const r=e.indent;if(r&&(r.left&&r.left>0&&(t.style.paddingLeft=`${r.left}px`),r.right&&r.right>0&&(t.style.paddingRight=`${r.right}px`),!(r.left!=null&&r.left<0))){const s=(r.firstLine??0)-(r.hanging??0);s&&(t.style.textIndent=`${s}px`)}(n.includeBorders??!0)&&zU(t,e.borders),(n.includeShading??!0)&&HU(t,e.shading)},Oft=(t,e)=>{const n=Number.isFinite(e==null?void 0:e.left)?e.left:0,r=Number.isFinite(e==null?void 0:e.right)?e.right:0,i=Number.isFinite(e==null?void 0:e.firstLine)?e.firstLine:0,s=Number.isFinite(e==null?void 0:e.hanging)?e.hanging:0,o=i-s,a=Math.min(n,n+o),l=Math.max(0,a),c=Math.max(0,r);return{leftInset:l,width:Math.max(0,t-l-c)}},oie=(t,e,n)=>{if(!(n!=null&&n.borders)&&!(n!=null&&n.shading))return{};const r=Oft(e,n.indent),i={position:"absolute",top:"0px",bottom:"0px",left:`${r.leftInset}px`,width:`${r.width}px`,pointerEvents:"none",boxSizing:"border-box"};let s;n.shading&&(s=t.createElement("div"),s.classList.add("superdoc-paragraph-shading"),Object.assign(s.style,i),HU(s,n.shading));let o;return n.borders&&(o=t.createElement("div"),o.classList.add("superdoc-paragraph-border"),Object.assign(o.style,i),o.style.zIndex="1",zU(o,n.borders)),{shadingLayer:s,borderLayer:o}},Pft=["top","right","bottom","left"],zU=(t,e)=>{e&&(t.style.boxSizing="border-box",Pft.forEach(n=>{const r=e[n];r&&Fft(t,n,r)}))},Fft=(t,e,n)=>{const r=e,i=n.style&&n.style!=="none"?n.style:n.style==="none"?"none":"solid";if(i==="none"){t.style.setProperty(`border-${r}-style`,"none"),t.style.setProperty(`border-${r}-width`,"0px"),n.color&&t.style.setProperty(`border-${r}-color`,n.color);return}const s=n.width!=null?Math.max(0,n.width):void 0;t.style.setProperty(`border-${r}-style`,i),t.style.setProperty(`border-${r}-width`,`${s??1}px`),t.style.setProperty(`border-${r}-color`,n.color??"#000")},Bft=t=>{if(!(t!=null&&t.indent)||t.indent.left==null)return t;const e={...t.indent};return delete e.left,{...t,indent:Object.keys(e).length>0?e:void 0}},HU=(t,e)=>{e!=null&&e.fill&&(t.style.backgroundColor=e.fill)},jft=(t,e)=>{const n=[];for(let r=e.fromRun;r<=e.toRun;r+=1){const i=t.runs[r];if(!i)continue;if(i.kind==="image"){n.push(i);continue}if(i.kind==="lineBreak"){n.push(i);continue}if(i.kind==="break"){n.push(i);continue}if(i.kind==="tab"){n.push(i);continue}if(i.kind==="fieldAnnotation"){n.push(i);continue}if(!("text"in i))continue;const s=i.text??"",o=r===e.fromRun,a=r===e.toRun,l=s.length,c=i.pmStart??null,u=c!=null&&i.pmEnd==null?c+l:i.pmEnd??null;if(o||a){const d=o?e.fromChar:0,f=a?e.toChar:s.length,h=s.slice(d,f);if(!h)continue;const m=c!=null?c+d:void 0,y=c!=null?c+f:u??void 0,w={...i,text:h,pmStart:m,pmEnd:y,comments:i.comments?[...i.comments]:void 0};n.push(w)}else n.push(i)}return n},dl=(t,e)=>{Object.entries(e).forEach(([n,r])=>{r!=null&&r!==""&&n in t.style&&(t.style[n]=String(r))})},$ft=(t,e)=>{const n="token"in t?t.token:void 0;return t.kind==="tab"?t.text:t.kind==="image"||t.kind==="lineBreak"||t.kind==="break"||!("text"in t)?"":n?n==="pageNumber"?e.pageNumberText??String(e.pageNumber):n==="totalPageCount"&&e.totalPages?String(e.totalPages):t.text??"":t.text??""},zft=t=>{const e=new wB(t.blocks,t.measures,{pageStyles:t.pageStyles,layoutMode:t.layoutMode,pageGap:t.pageGap,headerProvider:t.headerProvider,footerProvider:t.footerProvider,virtualization:t.virtualization,ruler:t.ruler});return{paint(n,r,i){e.paint(n,r,i)},setData(n,r,i,s,o,a){e.setData(n,r,i,s,o,a)},setProviders(n,r){e.setProviders(n,r)},setVirtualizationPins(n){e.setVirtualizationPins(n)}}},FE={logLevel:"off",hud:!1,dumpRects:!1,disableRectDedupe:!1},aie={error:0,warn:1,info:2,verbose:3};function pM(){var e;if(typeof window>"u")return FE;window.superdocDebug??(window.superdocDebug={}),(e=window.superdocDebug).selection??(e.selection={});const t=window.superdocDebug.selection;return{logLevel:t.logLevel??FE.logLevel,hud:t.hud??FE.hud,dumpRects:t.dumpRects??FE.dumpRects,disableRectDedupe:t.disableRectDedupe??FE.disableRectDedupe}}function Lr(t,e,n){const r=pM();if(r.logLevel==="off"||aie[t]>aie[r.logLevel])return;const i="[Selection]";n?console.log(i,e,n):console.log(i,e)}const lie="data-superdoc-selection-debug-hud";function Hft(t,e){const n=pM(),r=t.ownerDocument??(typeof document<"u"?document:null);if(!r)return;const i=t.querySelector(`[${lie}="true"]`);if(!n.hud){i==null||i.remove();return}const s=i??r.createElement("div");s.setAttribute(lie,"true"),s.style.position="absolute",s.style.top="8px",s.style.left="8px",s.style.zIndex="9999",s.style.maxWidth="420px",s.style.padding="6px 8px",s.style.borderRadius="6px",s.style.background="rgba(0, 0, 0, 0.72)",s.style.color="white",s.style.fontFamily='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',s.style.fontSize="12px",s.style.lineHeight="1.3",s.style.pointerEvents="none",s.style.whiteSpace="pre";const o=Math.max(0,e.docEpoch-e.layoutEpoch),a=e.selection?`${e.selection.from}..${e.selection.to}`:"null",l=e.lastPointer?`${e.lastPointer.clientX},${e.lastPointer.clientY} -> ${Math.round(e.lastPointer.x)},${Math.round(e.lastPointer.y)}`:"null",c=e.lastHit?`${e.lastHit.source} pos=${e.lastHit.pos??"null"} epoch=${e.lastHit.layoutEpoch??"null"} mapped=${e.lastHit.mappedPos??"null"}`:"null";s.textContent=[`docEpoch=${e.docEpoch} layoutEpoch=${e.layoutEpoch} behind=${o}`,`selection=${a}`,`pointer=${l}`,`hit=${c}`].join(`
`),i||t.appendChild(s)}var Iy;class Vft{constructor(){st(this,Iy,[])}get size(){return F(this,Iy).length}rebuild(e,n={}){const r=n.leafOnly!==!1,i=Array.from(e.querySelectorAll("[data-pm-start][data-pm-end]")),s=[],o=[];for(const c of i)c instanceof HTMLElement&&o.push(c);const a=new WeakSet;if(r){const c=new WeakSet;o.forEach(u=>c.add(u));for(const u of o){let d=u.parentElement;for(;d&&d!==e;)c.has(d)&&a.add(d),d=d.parentElement}}for(const c of o){if(c.classList.contains(iu.INLINE_SDT_WRAPPER)||c.closest(".superdoc-page-header, .superdoc-page-footer")||r&&a.has(c))continue;const u=Number(c.dataset.pmStart??"NaN"),d=Number(c.dataset.pmEnd??"NaN");!Number.isFinite(u)||!Number.isFinite(d)||d<u||s.push({pmStart:u,pmEnd:d,el:c})}if(s.sort((c,u)=>c.pmStart-u.pmStart!==0?c.pmStart-u.pmStart:c.pmEnd-u.pmEnd),je(this,Iy,s),pM().logLevel==="verbose"){const c={total:s.length,body:0,header:0,footer:0},u=[],d=[],f=[];for(const h of s){const m=h.el.closest(`.${iu.PAGE}`),y=(m==null?void 0:m.dataset.pageIndex)??null,w=h.el.closest(".superdoc-page-header")?"header":h.el.closest(".superdoc-page-footer")?"footer":"body";if(w==="header"){c.header+=1,d.length<10&&d.push({pmStart:h.pmStart,pmEnd:h.pmEnd,pageIndex:y,text:(h.el.textContent??"").slice(0,40)});continue}if(w==="footer"){c.footer+=1,f.length<10&&f.push({pmStart:h.pmStart,pmEnd:h.pmEnd,pageIndex:y,text:(h.el.textContent??"").slice(0,40)});continue}c.body+=1,u.length<10&&u.push({pmStart:h.pmStart,pmEnd:h.pmEnd,pageIndex:y,text:(h.el.textContent??"").slice(0,40)})}Lr("verbose",`DomPositionIndex: rebuild summary ${JSON.stringify({counts:c,bodySamples:u,headerSamples:d,footerSamples:f})}`)}}findEntryAtPosition(e){if(!Number.isFinite(e))return null;const n=F(this,Iy);if(n.length===0)return null;let r=0,i=n.length;for(;r<i;){const a=r+i>>>1;n[a].pmStart<=e?r=a+1:i=a}const s=r-1;if(s<0)return null;const o=n[s];return e<o.pmStart||e>o.pmEnd?null:o}findElementAtPosition(e){var n;return((n=this.findEntryAtPosition(e))==null?void 0:n.el)??null}findEntriesInRange(e,n){if(!Number.isFinite(e)||!Number.isFinite(n))return[];const r=Math.min(e,n),i=Math.max(e,n);if(r===i)return[];const s=F(this,Iy);if(s.length===0)return[];let o=0,a=s.length;for(;o<a;){const u=o+a>>>1;s[u].pmStart<r?o=u+1:a=u}let l=Math.max(0,o-1);for(;l<s.length&&s[l].pmEnd<r;)l+=1;const c=[];for(let u=l;u<s.length;u+=1){const d=s[u];if(d.pmStart>=i)break;d.pmEnd<=r||c.push(d)}return c}findElementsInRange(e,n){return this.findEntriesInRange(e,n).map(r=>r.el)}}Iy=new WeakMap;var $h,H1,ek,zh,Ry,Qm;class Uft{constructor(e){st(this,$h);st(this,H1);st(this,ek);st(this,zh,null);st(this,Ry,!1);st(this,Qm,null);je(this,$h,e.windowRoot),je(this,H1,e.getPainterHost),je(this,ek,e.onRebuild)}setup(){var e;typeof F(this,$h).MutationObserver=="function"&&((e=F(this,zh))==null||e.disconnect(),je(this,zh,new(F(this,$h)).MutationObserver(()=>{this.scheduleRebuild()})),this.resume())}pause(){var e;(e=F(this,zh))==null||e.disconnect()}resume(){const e=F(this,zh);if(!e)return;const n=F(this,H1).call(this);if(n)try{e.observe(n,{childList:!0})}catch{}}destroy(){var e;(e=F(this,zh))==null||e.disconnect(),je(this,zh,null),je(this,Ry,!1),F(this,Qm)!=null&&typeof F(this,$h).cancelAnimationFrame=="function"&&F(this,$h).cancelAnimationFrame(F(this,Qm)),je(this,Qm,null)}scheduleRebuild(){F(this,Ry)||(je(this,Ry,!0),je(this,Qm,F(this,$h).requestAnimationFrame(()=>{je(this,Ry,!1),je(this,Qm,null);const e=F(this,H1).call(this);e!=null&&e.isConnected&&F(this,ek).call(this)})))}}$h=new WeakMap,H1=new WeakMap,ek=new WeakMap,zh=new WeakMap,Ry=new WeakMap,Qm=new WeakMap;function Wft(t,e,n){const r=t.painterHost;if(!r)return null;const i=t.layout;if(!i||!Number.isFinite(e)||!Number.isFinite(n))return null;const s=Math.min(e,n),o=Math.max(e,n);if(s===o)return[];t.domPositionIndex.size===0&&t.rebuildDomPositionIndex();const a=t.zoom,l=t.pageHeight,c=t.pageGap,u=Array.from(r.querySelectorAll(`.${iu.PAGE}[data-page-index]`)),d=[];let f=!1;const h=pM(),m=h.logLevel==="verbose",y=m&&h.dumpRects,w=h.disableRectDedupe,b=A=>{const x=A.el.closest(`.${iu.PAGE}`),T=A.el.closest(".superdoc-page-header")?"header":A.el.closest(".superdoc-page-footer")?"footer":"body";return{pmStart:A.pmStart,pmEnd:A.pmEnd,pageIndex:(x==null?void 0:x.dataset.pageIndex)??null,section:T,connected:A.el.isConnected,layoutEpoch:A.el.dataset.layoutEpoch??null,pageEpoch:(x==null?void 0:x.dataset.layoutEpoch)??null,text:(A.el.textContent??"").slice(0,80)}},E=A=>({x:A.x,y:A.y,width:A.width,height:A.height,top:A.top,left:A.left,right:A.right,bottom:A.bottom});for(const A of u){const x=Number(A.dataset.pageIndex??"NaN");if(!Number.isFinite(x))continue;const T=i.pages[x];if(!T)continue;let R=1/0,k=-1/0;for(const se of T.fragments){const Q=se.pmStart,J=se.pmEnd;typeof Q=="number"&&Number.isFinite(Q)&&(R=Math.min(R,Q)),typeof J=="number"&&Number.isFinite(J)&&(k=Math.max(k,J))}if(!Number.isFinite(R)||!Number.isFinite(k)||k<=R)continue;const _=Math.max(s,R),N=Math.min(o,k);if(_>=N)continue;let L=t.domPositionIndex.findEntriesInRange(_,N);if(L.length===0)continue;m&&Lr("verbose",`DOM selection rects: slice entries ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,entriesCount:L.length,entriesPreview:L.slice(0,20).map(b)})}`);let M=t.domPositionIndex.findEntryAtPosition(_)??L[0],C=t.domPositionIndex.findEntryAtPosition(N)??L[L.length-1];m&&Lr("verbose",`DOM selection rects: boundaries ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,start:b(M),end:b(C)})}`);let D=A.contains(M.el),O=A.contains(C.el);if(!D||!O){if(m&&Lr("verbose",`DOM selection rects: boundary containment ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,startContained:D,endContained:O})}`),!f){if(t.rebuildDomPositionIndex(),f=!0,L=t.domPositionIndex.findEntriesInRange(_,N),L.length===0)continue;M=t.domPositionIndex.findEntryAtPosition(_)??L[0],C=t.domPositionIndex.findEntryAtPosition(N)??L[L.length-1],D=A.contains(M.el),O=A.contains(C.el),m&&Lr("verbose",`DOM selection rects: boundary containment after rebuild ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,startContained:D,endContained:O,start:b(M),end:b(C)})}`)}if(!D||!O)return Lr("warn",`DOM selection rects: stale index after rebuild ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,start:b(M),end:b(C)})}`),null}const $=A.ownerDocument??document,U=$.createRange();try{if(!vB(U,M,_)||!xB(U,C,N))return null}catch(se){return Lr("warn","DOM selection rects: Range boundary set failed",{error:String(se)}),null}let W=[];try{let se=Array.from(U.getClientRects());y&&Lr("verbose",`DOM selection rects: raw rects ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,rects:se.map(E)})}`);let Q=null;if(typeof U.intersectsNode=="function")for(const J of L)try{U.intersectsNode(J.el)||(Q??(Q=[]),Q.push(J))}catch{}if(Q&&Q.length>0&&(m&&Lr("verbose",`DOM selection rects: range missing entries ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,missingCount:Q.length,missingPreview:Q.slice(0,20).map(b)})}`),se=qft($,L,_,N),y&&Lr("verbose",`DOM selection rects: fallback raw rects ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,rects:se.map(E)})}`)),W=w?se:Yft(se),y){Lr("verbose",`DOM selection rects: final rects ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,dedupeDisabled:w,rects:W.map(E)})}`);const J=W.filter(K=>!Number.isFinite(K.width)||!Number.isFinite(K.height)||K.width<=0||K.height<=0);J.length>0&&Lr("verbose",`DOM selection rects: non-positive rects ${JSON.stringify({pageIndex:x,sliceFrom:_,sliceTo:N,rects:J.map(E)})}`)}}catch(se){return Lr("warn","DOM selection rects: getClientRects failed",{error:String(se)}),null}const ce=A.getBoundingClientRect();for(const se of W){const Q=se.width/a,J=se.height/a;if(!Number.isFinite(Q)||!Number.isFinite(J)||Q<=0||J<=0)continue;const K=(se.left-ce.left)/a,re=(se.top-ce.top)/a;!Number.isFinite(K)||!Number.isFinite(re)||d.push({pageIndex:x,x:K,y:x*(l+c)+re,width:Math.max(1,Q),height:Math.max(1,J)})}}return d}function qft(t,e,n,r){var a,l;const i=[],s=new Map,o=[];for(const c of e){const u=c.el.closest(".superdoc-line");if(!u){o.push(c);continue}const d=s.get(u);d?d.push(c):s.set(u,[c])}for(const[,c]of s){c.sort((b,E)=>b.pmStart-E.pmStart!==0?b.pmStart-E.pmStart:b.pmEnd-E.pmEnd);const u=((a=c[0])==null?void 0:a.pmStart)??1/0,d=((l=c[c.length-1])==null?void 0:l.pmEnd)??-1/0;if(!Number.isFinite(u)||!Number.isFinite(d)||d<=u)continue;const f=Math.max(n,u),h=Math.min(r,d);if(f>=h)continue;const m=c.find(b=>f>=b.pmStart&&f<=b.pmEnd)??c[0],y=c.find(b=>h>=b.pmStart&&h<=b.pmEnd)??c[c.length-1],w=t.createRange();try{if(!vB(w,m,f)||!xB(w,y,h))continue}catch{continue}i.push(...Array.from(w.getClientRects()))}for(const c of o){const u=Math.max(n,c.pmStart),d=Math.min(r,c.pmEnd);if(u>=d)continue;const f=t.createRange();try{if(!vB(f,c,u)||!xB(f,c,d))continue}catch{continue}i.push(...Array.from(f.getClientRects()))}return i}function vB(t,e,n){const r=e.el,i=e.pmStart,s=r.firstChild;if(s&&s.nodeType===Node.TEXT_NODE){const o=s,a=VU(n,i,e.pmEnd,o.length);return t.setStart(o,a),!0}return!r.isConnected||!r.parentNode?!1:n<=i?(t.setStartBefore(r),!0):(t.setStartAfter(r),!0)}function xB(t,e,n){const r=e.el,i=e.pmStart,s=r.firstChild;if(s&&s.nodeType===Node.TEXT_NODE){const o=s,a=VU(n,i,e.pmEnd,o.length);return t.setEnd(o,a),!0}return!r.isConnected||!r.parentNode?!1:n<=i?(t.setEndBefore(r),!0):(t.setEndAfter(r),!0)}function Gft(t,e){if(!t.painterHost)return null;t.domPositionIndex.size===0&&t.rebuildDomPositionIndex();let n=t.domPositionIndex.findEntryAtPosition(e);if(n&&!n.el.isConnected&&(t.rebuildDomPositionIndex(),n=t.domPositionIndex.findEntryAtPosition(e)),!n)return null;const r=n.el,i=r.closest(`.${iu.PAGE}`);if(!i)return null;const s=i.getBoundingClientRect(),o=t.zoom,a=r.firstChild;if(!a||a.nodeType!==Node.TEXT_NODE){const h=r.getBoundingClientRect();return{pageIndex:Number(i.dataset.pageIndex??"0"),x:(h.left-s.left)/o,y:(h.top-s.top)/o}}const l=VU(e,n.pmStart,n.pmEnd,a.length),c=document.createRange();c.setStart(a,l),c.setEnd(a,l);const u=c.getBoundingClientRect(),d=r.closest(".superdoc-line"),f=(d==null?void 0:d.getBoundingClientRect())??u;return{pageIndex:Number(i.dataset.pageIndex??"0"),x:(u.left-s.left)/o,y:(f.top-s.top)/o}}function VU(t,e,n,r){if(!Number.isFinite(t)||!Number.isFinite(e)||!Number.isFinite(n)||r<=0)return 0;const i=n-e;if(!Number.isFinite(i)||i<=0)return 0;if(i===r){const o=t-e;return Math.min(r,Math.max(0,o))}if(t<=e)return 0;if(t>=n)return r;const s=e+i/2;return t<=s?0:r}const Kft=2,cie=3,Xft=.8;function Yft(t){if(t.length<=1)return t;const e=[...t].sort((c,u)=>{const d=c.y-u.y;return Math.abs(d)>Kft?d:c.x-u.x}),n=[],r=[];let i=[];for(const c of e){if(i.length===0){i.push(c);continue}const u=i[0].y;Math.abs(c.y-u)<=cie?i.push(c):(r.push(i),i=[c])}i.length>0&&r.push(i);const s=.5,o=1,a=(c,u)=>{const d=Math.max(c.x,u.x),f=Math.min(c.x+c.width,u.x+u.width);if(!(f>d))return!1;const m=Math.max(0,f-d),y=Math.min(c.width,u.width);return y>0&&m/y>Xft},l=(c,u)=>c.width>u.width+s||c.height>u.height+s;for(const c of r){const u=[];for(const h of c)u.some(y=>{const w=Math.abs(y.x-h.x)<=o,b=Math.abs(y.y-h.y)<=cie,E=Math.abs(y.width-h.width)<=s,A=Math.abs(y.height-h.height)<=s;return w&&b&&E&&A})||u.push(h);if(u.length<=1){n.push(...u);continue}const d=new Set;for(const h of u)for(const m of u)if(h!==m&&a(h,m)&&l(h,m)){d.add(h);break}const f=u.filter(h=>!d.has(h));n.push(...f.length>0?f:u)}return n}function Y1e(t){if(!t.painterHost||!t.viewportHost)return null;const e=t.painterHost.querySelector(`.superdoc-page[data-page-index="${t.pageIndex}"]`);if(!e)return null;const n=e.getBoundingClientRect(),r=t.viewportHost.getBoundingClientRect();return(n.left-r.left)/t.zoom}function Zft(t){return!Number.isFinite(t.pageIndex)||t.pageIndex<0?(console.warn(`[PresentationEditor] #convertPageLocalToOverlayCoords: Invalid pageIndex ${t.pageIndex}. Expected a finite non-negative number.`),null):Number.isFinite(t.pageLocalX)?Number.isFinite(t.pageLocalY)?{x:(Y1e({painterHost:t.painterHost,viewportHost:t.viewportHost,zoom:t.zoom,pageIndex:t.pageIndex})??0)+t.pageLocalX,y:t.pageIndex*(t.pageHeight+t.pageGap)+t.pageLocalY}:(console.warn(`[PresentationEditor] #convertPageLocalToOverlayCoords: Invalid pageLocalY ${t.pageLocalY}. Expected a finite number.`),null):(console.warn(`[PresentationEditor] #convertPageLocalToOverlayCoords: Invalid pageLocalX ${t.pageLocalX}. Expected a finite number.`),null)}function Jft(t,e,n){if(!Number.isFinite(e)||!Number.isFinite(n))return null;const r=t.viewportHost.getBoundingClientRect(),i=t.visibleHost.scrollLeft??0,s=t.visibleHost.scrollTop??0,o=(e-r.left+i)/t.zoom,a=(n-r.top+s)/t.zoom;let l=o;const c=t.visibleHost.ownerDocument??document,u=typeof c.elementsFromPoint=="function"?c.elementsFromPoint(e,n):[],d=Array.isArray(u)?u.find(f=>{var h;return(h=f==null?void 0:f.classList)==null?void 0:h.contains("superdoc-page")}):null;if(d){const f=Number(d.dataset.pageIndex??"NaN");if(Number.isFinite(f)){const h=t.getPageOffsetX(f);h!=null&&(l=o-h)}}return{x:l,y:a}}function uie(t,e){if(!t)return null;const n=t.querySelectorAll("[data-page-index]");for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("data-page-index");if(s&&parseInt(s,10)===e)return i}return null}function _u(t){if(t==null)return;const e=Number(t);if(Number.isFinite(e))return e*96}function Qft(t){if(!t||typeof t!="object")return;const e=t,n=Number(e.count??e.num??e.numberOfColumns??1);if(!Number.isFinite(n)||n<=1)return;const r=Math.max(1,Math.floor(n)),i=_u(e.space??e.gap)??0;return{count:r,gap:i}}function eht(t,e,n,r){var s;return!t||e==null||typeof t.now!="function"?void 0:{durationMs:Math.max(0,t.now()-e),blockCount:r.length,pageCount:((s=n.pages)==null?void 0:s.length)??0}}function BE(t,e){try{t()}catch(n){console.warn(`[PresentationEditor] ${e} cleanup failed:`,n)}}function tht(t,e){const n=t.createElement("div");return n.className="presentation-editor__hidden-host",n.style.position="fixed",n.style.left="-9999px",n.style.top="0",n.style.width=`${e}px`,n.style.setProperty("overflow-anchor","none"),n.style.pointerEvents="none",n.style.opacity="0",n.style.zIndex="-1",n.style.userSelect="none",n}function Z1e(t,e){return e[t%e.length]}function UU(t,e,n){return t.match(/^#[0-9A-Fa-f]{6}$/)?t:Z1e(e,n)}function nht(t){var l,c;const e=t.provider;if(!(e!=null&&e.awareness))return new Map;const n=t.editorState;if(!n)return new Map;const r=vi.getState(n);if(!r)return new Map;const i=(c=(l=e.awareness)==null?void 0:l.getStates)==null?void 0:c.call(l),s=new Map;i==null||i.forEach((u,d)=>{var h,m,y,w;if(d===((h=e.awareness)==null?void 0:h.clientID))return;const f=u;if(f.cursor)try{const b=Vg(r.doc,r.type,db(f.cursor.anchor),r.binding.mapping),E=Vg(r.doc,r.type,db(f.cursor.head),r.binding.mapping);if(b===null||E===null)return;const A=n.doc.content.size,x=Math.max(0,Math.min(b,A)),T=Math.max(0,Math.min(E,A)),R=t.previousState.get(d),k=!R||R.anchor!==x||R.head!==T;s.set(d,{clientId:d,user:{name:(m=f.user)==null?void 0:m.name,email:(y=f.user)==null?void 0:y.email,color:((w=f.user)==null?void 0:w.color)||Z1e(d,t.fallbackColors)},anchor:x,head:T,updatedAt:k?Date.now():(R==null?void 0:R.updatedAt)??Date.now()})}catch(b){console.warn(`Failed to normalize cursor for client ${d}:`,b)}});const o=Date.now()-t.staleTimeoutMs,a=[];return t.previousState.forEach((u,d)=>{u.updatedAt<o&&!s.has(d)&&a.push(d)}),a.forEach(u=>{t.previousState.delete(u)}),s}let die=null,uv=null;const _1=1,rht=yB,ed=t=>(t==null?void 0:t.kind)==="tab",fie=t=>{if(!t)return!1;const e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||t==="'"},iht=t=>{if(!t)return t;let e="";for(let n=0;n<t.length;n+=1){const r=n>0?t[n-1]:"",i=t[n];e+=fie(i)&&!fie(r)?i.toUpperCase():i}return e},WU=(t,e)=>!t||!e||e==="none"?t:e==="uppercase"?t.toUpperCase():e==="lowercase"?t.toLowerCase():e==="capitalize"?iht(t):t;function J1e(){if(uv)return uv;if(typeof document>"u")return _e.env.NODE_ENV!=="test"&&console.warn("[text-measurement] Canvas not available (non-browser environment)"),null;die=document.createElement("canvas");try{uv=die.getContext("2d")}catch{uv=null}return!uv&&_e.env.NODE_ENV!=="test"&&console.warn("[text-measurement] Failed to create 2D context"),uv}const ST=t=>{let e=0;for(let n=0;n<t.length;n+=1)rht.has(t[n])&&(e+=1);return e},Q1e=(t,e,n,r,i,s,o)=>{var E,A;if(t.kind!=="paragraph")return{extraPerSpace:0,totalSpaces:0};if(t.runs.length===0)return{extraPerSpace:0,totalSpaces:0};const a=r??((E=t.attrs)==null?void 0:E.alignment),l=((A=e.segments)==null?void 0:A.some(x=>x.x!==void 0))??!1,c=t.runs.length-1,u=t.runs[c],d=e.toRun>=c,f=u?u.kind==="lineBreak":!1;if(!$1e({alignment:a,hasExplicitPositioning:l,isLastLineOfParagraph:d,paragraphEndsWithLineBreak:f,skipJustifyOverride:o}))return{extraPerSpace:0,totalSpaces:0};let m=e.spaceCount??0;m===0&&(m=Hx(t,e).reduce((T,R)=>ed(R)||"src"in R||R.kind==="lineBreak"||R.kind==="break"||R.kind==="fieldAnnotation"?T:T+ST(R.text??""),0));const y=n??e.maxWidth??e.width,w=e.naturalWidth??e.width;return{extraPerSpace:z1e({lineWidth:w,availableWidth:y,spaceCount:m,shouldJustify:!0}),totalSpaces:m}};function OI(t){if(t.kind==="tab"||t.kind==="lineBreak"||t.kind==="break"||t.kind==="fieldAnnotation"||"src"in t)return"normal normal 16px Arial";const e=t.italic?"italic":"normal",n=t.bold?"bold":"normal",r=t.fontSize??16,i=t.fontFamily??"Arial";return`${e} ${n} ${r}px ${i}`}function Hx(t,e){const n=[];if(t.kind!=="paragraph")return n;for(let r=e.fromRun;r<=e.toRun;r+=1){const i=t.runs[r];if(!i)continue;if(ed(i)){n.push(i);continue}if("src"in i){n.push(i);continue}if(i.kind==="lineBreak"){n.push(i);continue}if(i.kind==="break"){n.push(i);continue}if(i.kind==="fieldAnnotation"){n.push(i);continue}const s=i.text??"",o=r===e.fromRun,a=r===e.toRun;if(o||a){const l=o?e.fromChar:0,c=a?e.toChar:s.length,u=s.slice(l,c),d=i.pmStart!=null?i.pmStart+l:i.pmEnd!=null?i.pmEnd-(s.length-l):void 0,f=i.pmStart!=null?i.pmStart+c:i.pmEnd!=null?i.pmEnd-(s.length-c):void 0;n.push({...i,text:u,pmStart:d,pmEnd:f})}else n.push(i)}return n}function exe(t,e,n,r,i){var w,b;const s=J1e(),o=r??e.maxWidth??e.width,a=Q1e(t,e,o,i),l=i??(t.kind==="paragraph"?(w=t.attrs)==null?void 0:w.alignment:void 0),c=l==="justify"&&a.extraPerSpace!==0?o:e.width,u=(b=e.segments)==null?void 0:b.some(E=>E.x!==void 0),d=!u&&l==="center"?Math.max(0,(o-c)/2):!u&&l==="right"?Math.max(0,o-c):0;if(u&&e.segments&&s)return sht(t,e,n,s);if(!s){const E=Hx(t,e),A=Math.max(1,E.reduce((x,T)=>ed(T)?x+_1:"src"in T||T.kind==="lineBreak"||T.kind==="break"||T.kind==="fieldAnnotation"?x:x+(T.text??"").length,0));return n/A*c}const f=Hx(t,e);let h=0,m=0,y=0;for(const E of f){if(ed(E)){const L=_1,M=E.width??0;if(m+L>=n){const C=n-m;return h+(C<=0?0:M)}h+=M,m+=L;continue}const A="src"in E||E.kind==="lineBreak"||E.kind==="break"||E.kind==="fieldAnnotation"?"":E.text??"",x=A.length,T=ed(E)||"src"in E||E.kind==="lineBreak"||E.kind==="break"||E.kind==="fieldAnnotation"?void 0:E.textTransform,R=WU(A,T);if(m+x>=n){const L=n-m;s.font=OI(E);const M=R.slice(0,L),C=s.measureText(M),D=N1(E,L,x),O=a.extraPerSpace!==0?ST(A.slice(0,L)):0;return d+h+C.width+D+a.extraPerSpace*(y+O)}s.font=OI(E);const k=s.measureText(R),_=N1(E,x,x),N=a.extraPerSpace!==0?ST(A):0;h+=k.width+_+a.extraPerSpace*N,y+=N,m+=x}return d+h}function sht(t,e,n,r){if(t.kind!=="paragraph"||!e.segments)return 0;let i=0;for(const s of e.segments){const o=t.runs[s.runIndex];if(!o)continue;const a=s.toChar-s.fromChar;if(i+a>=n){const l=n-i;let c=s.x;if(c===void 0){c=0;for(const b of e.segments){if(b===s)break;t.runs[b.runIndex]&&(b.x!==void 0?c=b.x+(b.width??0):c+=b.width??0)}}if(ed(o))return c+(l>0?s.width??0:0);if("src"in o||o.kind==="lineBreak"||o.kind==="break"||o.kind==="fieldAnnotation")return c+(l>=a?s.width??0:0);const u=o.text??"",d="textTransform"in o?o.textTransform:void 0,m=WU(u,d).slice(s.fromChar,s.toChar).slice(0,l);r.font=OI(o);const y=r.measureText(m),w=N1(o,l,a);return c+y.width+w}i+=a}return e.width}function Ov(t,e,n,r){if(!Number.isFinite(n)||!Number.isFinite(r))return console.warn("[charOffsetToPm] Invalid input:",{charOffset:n,fallbackPmStart:r}),r;const i=Math.max(0,n);if(t.kind!=="paragraph")return r+i;const s=Hx(t,e);let o=0,a=r;for(const l of s){const c=ed(l),u="src"in l||l.kind==="lineBreak"||l.kind==="break"||l.kind==="fieldAnnotation"?"":l.text??"",d=c?_1:u.length,f=typeof l.pmStart=="number"?l.pmStart:null,h=typeof l.pmEnd=="number"?l.pmEnd:f!=null?f+d:null;if(f!=null&&(a=f),i<=o+d){const m=Math.max(0,i-o);return f!=null?f+Math.min(m,d):r+i}h!=null&&(a=h),o+=d}return a}function oht(t,e,n,r,i,s){var A,x;const o=J1e(),a=i??e.maxWidth??e.width,l=Q1e(t,e,a,s),c=s??(t.kind==="paragraph"?(A=t.attrs)==null?void 0:A.alignment:void 0),u=c==="justify"?e.width+Math.max(0,a-e.width):e.width,d=(x=e.segments)==null?void 0:x.some(T=>T.x!==void 0),f=!d&&c==="center"?Math.max(0,(a-u)/2):!d&&c==="right"?Math.max(0,a-u):0;if(!o){const T=Hx(t,e),R=Math.max(1,T.reduce((L,M)=>ed(M)?L+_1:"src"in M||M.kind==="lineBreak"||M.kind==="break"||M.kind==="fieldAnnotation"?L:L+(M.text??"").length,0)),k=Math.max(0,Math.min(1,(n-f)/u)),_=Math.round(k*R),N=Ov(t,e,_,r);return{charOffset:_,pmPosition:N}}const h=Hx(t,e),m=Math.max(0,Math.min(u,n-f));let y=0,w=0,b=0;for(const T of h){if(ed(T)){const D=T.width??0,O=y,$=y+D;if(m<=$){const U=O+D/2,W=m<U?0:_1,ce=w+W,se=Ov(t,e,ce,r);return{charOffset:ce,pmPosition:se}}y=$,w+=_1;continue}const R="src"in T||T.kind==="lineBreak"||T.kind==="break"||T.kind==="fieldAnnotation"?"":T.text??"",k=R.length,_=ed(T)||"src"in T||T.kind==="lineBreak"||T.kind==="break"||T.kind==="fieldAnnotation"?void 0:T.textTransform,N=WU(R,_);if(k===0)continue;o.font=OI(T);for(let D=0;D<=k;D++){const O=N.slice(0,D),$=o.measureText(O),U=l.extraPerSpace>0?ST(R.slice(0,D)):0,W=y+$.width+N1(T,D,k)+l.extraPerSpace*(b+U);if(W>=m){if(D===0){const me=Ov(t,e,w,r);return{charOffset:w,pmPosition:me}}const ce=N.slice(0,D-1),se=o.measureText(ce),Q=y+se.width+N1(T,D-1,k),J=Math.abs(m-Q),K=Math.abs(m-W),re=J<K?w+D-1:w+D,X=Ov(t,e,re,r);return{charOffset:re,pmPosition:X}}}const L=o.measureText(N),M=N1(T,k,k),C=l.extraPerSpace>0?ST(R):0;y+=L.width+M+l.extraPerSpace*C,b+=C,w+=k}const E=Ov(t,e,w,r);return{charOffset:w,pmPosition:E}}const N1=(t,e,n)=>{if(ed(t)||"src"in t||t.kind==="fieldAnnotation"||!("letterSpacing"in t)||!t.letterSpacing)return 0;const r=Math.max(n-1,0);return r===0?0:Math.min(Math.max(e,0),r)*t.letterSpacing},xo=(...t)=>{},kg={page:iu.PAGE,fragment:iu.FRAGMENT,line:iu.LINE};function txe(t,e,n){const r=aht(t,e,n);if(!r)return null;const i=r.getBoundingClientRect(),s=e-i.left,o=n-i.top,a=i.left+s,l=i.top+o;xo("Page found:",{pageIndex:r.dataset.pageIndex,pageRect:{left:i.left,top:i.top,width:i.width,height:i.height},viewCoords:{viewX:a,viewY:l}});let c=[];const u=document,d=typeof u.elementsFromPoint=="function";if(d)try{c=u.elementsFromPoint(a,l)??[]}catch{}if(!Array.isArray(c))return null;const f=c.map(E=>{var x,T,R;const A=E.getBoundingClientRect();return{tag:E.tagName,classes:E.className,blockId:(x=E.dataset)==null?void 0:x.blockId,pmStart:(T=E.dataset)==null?void 0:T.pmStart,pmEnd:(R=E.dataset)==null?void 0:R.pmEnd,rect:{top:Math.round(A.top),bottom:Math.round(A.bottom),left:Math.round(A.left),right:Math.round(A.right),height:Math.round(A.height)}}});xo("Hit chain elements:",JSON.stringify(f,null,2));const m=Array.from(r.querySelectorAll(`.${kg.fragment}`)).map(E=>{const A=E.getBoundingClientRect();return{blockId:E.dataset.blockId,pmStart:E.dataset.pmStart,pmEnd:E.dataset.pmEnd,rect:{top:Math.round(A.top),bottom:Math.round(A.bottom),left:Math.round(A.left),right:Math.round(A.right),height:Math.round(A.height)}}});xo("All fragments on page:",JSON.stringify(m,null,2));const y=c.find(E=>{var A,x;return(x=(A=E.classList)==null?void 0:A.contains)==null?void 0:x.call(A,kg.fragment)});if(!y){if(d)return null;const E=r.querySelector(`.${kg.fragment}`);return E?(xo("Using fallback fragment (no elementsFromPoint):",{blockId:E.dataset.blockId,pmStart:E.dataset.pmStart,pmEnd:E.dataset.pmEnd}),hie(E,a,l)):null}xo("Fragment found:",{blockId:y.dataset.blockId,pmStart:y.dataset.pmStart,pmEnd:y.dataset.pmEnd});const w=c.find(E=>{var A,x,T,R;return((x=(A=E.classList)==null?void 0:A.contains)==null?void 0:x.call(A,kg.line))&&((T=E.dataset)==null?void 0:T.pmStart)!==void 0&&((R=E.dataset)==null?void 0:R.pmEnd)!==void 0});return w?(xo("Using hit chain line directly:",{pmStart:w.dataset.pmStart,pmEnd:w.dataset.pmEnd}),cht(w,a)):hie(y,a,l)}function aht(t,e,n){var s,o;if((o=(s=t.classList)==null?void 0:s.contains)!=null&&o.call(s,kg.page))return t;const r=document;if(typeof r.elementsFromPoint=="function")try{const a=r.elementsFromPoint(e,n);if(Array.isArray(a)){const l=a.find(c=>{var u,d;return(d=(u=c.classList)==null?void 0:u.contains)==null?void 0:d.call(u,kg.page)});if(l)return l}}catch{}const i=Array.from(t.querySelectorAll(`.${kg.page}`));for(const a of i){const l=a.getBoundingClientRect();if(e>=l.left&&e<=l.right&&n>=l.top&&n<=l.bottom)return a}return i.length>0?i[0]:null}function hie(t,e,n){var A;xo("processFragment:",{viewX:e,viewY:n,blockId:t.dataset.blockId});const r=Array.from(t.querySelectorAll(`.${kg.line}`));if(xo("Lines in fragment:",r.map((x,T)=>{const R=x.getBoundingClientRect();return{index:T,pmStart:x.dataset.pmStart,pmEnd:x.dataset.pmEnd,rect:{top:R.top,bottom:R.bottom,left:R.left,right:R.right}}})),r.length===0)return null;const i=uht(r,n);if(!i)return null;const s=Number(i.dataset.pmStart??"NaN"),o=Number(i.dataset.pmEnd??"NaN"),a=i.getBoundingClientRect();if(xo("Selected line:",{pmStart:s,pmEnd:o,rect:{top:a.top,bottom:a.bottom,left:a.left,right:a.right}}),!Number.isFinite(s)||!Number.isFinite(o))return null;const l=Array.from(i.querySelectorAll("span, a")).filter(x=>x.dataset.pmStart!==void 0&&x.dataset.pmEnd!==void 0&&!x.classList.contains(iu.INLINE_SDT_WRAPPER));if(xo("Spans/anchors in line:",l.map((x,T)=>{var k;const R=x.getBoundingClientRect();return{index:T,tag:x.tagName,pmStart:x.dataset.pmStart,pmEnd:x.dataset.pmEnd,text:((k=x.textContent)==null?void 0:k.substring(0,20))+(x.textContent&&x.textContent.length>20?"...":""),visibility:x.style.visibility,rect:{left:R.left,right:R.right,width:R.width}}})),l.length===0)return s;const c=l[0].getBoundingClientRect();if(e<=c.left)return s;const u=l[l.length-1].getBoundingClientRect();if(e>=u.right)return o;const d=nxe(l,e);if(!d)return s;const f=Number(d.dataset.pmStart??"NaN"),h=Number(d.dataset.pmEnd??"NaN"),m=d.getBoundingClientRect();if(xo("Target element:",{tag:d.tagName,pmStart:f,pmEnd:h,text:(A=d.textContent)==null?void 0:A.substring(0,30),visibility:d.style.visibility,rect:{left:m.left,right:m.right,width:m.width},pageX:e,pageY:n}),!Number.isFinite(f)||!Number.isFinite(h))return null;const y=d.firstChild;if(!y||y.nodeType!==Node.TEXT_NODE||!y.textContent){const x=d.getBoundingClientRect();return Math.abs(e-x.left)<=Math.abs(e-x.right)?f:h}const w=y,b=rxe(w,d,e);return lht(f,h,w.length,b)}function lht(t,e,n,r){if(!Number.isFinite(t)||!Number.isFinite(e)||n<=0)return t;const i=e-t;if(!Number.isFinite(i)||i<=0)return t;if(i===n){const o=t+r;return Math.min(e,Math.max(t,o))}return r/n<=.5?t:e}function cht(t,e){var w;const n=Number(t.dataset.pmStart??"NaN"),r=Number(t.dataset.pmEnd??"NaN"),i=t.getBoundingClientRect();if(xo("processLineElement:",{pmStart:n,pmEnd:r,rect:{top:i.top,bottom:i.bottom,left:i.left,right:i.right}}),!Number.isFinite(n)||!Number.isFinite(r))return null;const s=Array.from(t.querySelectorAll("span, a")).filter(b=>b.dataset.pmStart!==void 0&&b.dataset.pmEnd!==void 0&&!b.classList.contains(iu.INLINE_SDT_WRAPPER));if(xo("Spans/anchors in line:",s.map((b,E)=>{var x;const A=b.getBoundingClientRect();return{index:E,tag:b.tagName,pmStart:b.dataset.pmStart,pmEnd:b.dataset.pmEnd,text:((x=b.textContent)==null?void 0:x.substring(0,20))+(b.textContent&&b.textContent.length>20?"...":""),visibility:b.style.visibility,rect:{left:A.left,right:A.right,width:A.width}}})),s.length===0)return n;const o=s[0].getBoundingClientRect();if(e<=o.left)return n;const a=s[s.length-1].getBoundingClientRect();if(e>=a.right)return r;const l=nxe(s,e);if(!l)return n;const c=Number(l.dataset.pmStart??"NaN"),u=Number(l.dataset.pmEnd??"NaN"),d=l.getBoundingClientRect();if(xo("Target element:",{tag:l.tagName,pmStart:c,pmEnd:u,text:(w=l.textContent)==null?void 0:w.substring(0,30),visibility:l.style.visibility,rect:{left:d.left,right:d.right,width:d.width}}),!Number.isFinite(c)||!Number.isFinite(u))return null;const f=l.firstChild;if(!f||f.nodeType!==Node.TEXT_NODE||!f.textContent){const b=l.getBoundingClientRect();return Math.abs(e-b.left)<=Math.abs(e-b.right)?c:u}const m=rxe(f,l,e);return c+m}function uht(t,e){if(t.length===0)return null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getBoundingClientRect();if(e>=s.top&&e<=s.bottom)return xo("findLineAtY: Found line at index",r,{pmStart:i.dataset.pmStart,pmEnd:i.dataset.pmEnd,rect:{top:s.top,bottom:s.bottom},viewY:e}),i}const n=t[t.length-1];return xo("findLineAtY: Y beyond all lines, using last line:",{pmStart:n.dataset.pmStart,pmEnd:n.dataset.pmEnd,viewY:e}),n}function nxe(t,e){if(t.length===0)return null;let n=t[0];for(let r=0;r<t.length;r++){const i=t[r],s=i.getBoundingClientRect();if(e>=s.left&&e<=s.right)return xo("findSpanAtX: Found containing element at index",r,{tag:i.tagName,pmStart:i.dataset.pmStart,pmEnd:i.dataset.pmEnd,rect:{left:s.left,right:s.right},viewX:e}),i;e>s.right&&(n=i)}return xo("findSpanAtX: No containing element, using nearest:",{tag:n.tagName,pmStart:n.dataset.pmStart,pmEnd:n.dataset.pmEnd,viewX:e}),n}function rxe(t,e,n){const r=t.textContent??"",i=e.getBoundingClientRect().left,s=document.createRange();let o=0,a=r.length;for(;o<a;){const f=Math.floor((o+a)/2);s.setStart(t,0),s.setEnd(t,f);const h=s.getBoundingClientRect().width;i+h<n?o=f+1:a=f}const l=Math.max(0,Math.min(r.length,o)),c=f=>(s.setStart(t,0),s.setEnd(t,f),i+s.getBoundingClientRect().width),u=c(l),d=Math.abs(u-n);if(l>0){const f=c(l-1);if(Math.abs(f-n)<d)return l-1}return l}const Ou=8,dht=24,fht=24,hht=24,pht=18,mht=4;function qU(t,e,n,r,i){const s=t==null?void 0:t.marker;if(!s)return(t==null?void 0:t.firstLineIndentMode)===!0&&typeof t.textStartPx=="number"&&Number.isFinite(t.textStartPx)?t.textStartPx:void 0;const o=typeof s.markerBoxWidthPx=="number"&&Number.isFinite(s.markerBoxWidthPx)?s.markerBoxWidthPx:0;let a=typeof s.glyphWidthPx=="number"&&Number.isFinite(s.glyphWidthPx)?s.glyphWidthPx:void 0;a==null&&s.markerText&&(a=i(s.markerText,s)),(!Number.isFinite(a)||a!==void 0&&a<0)&&(a=o);const l=Math.max(0,a??0);let c;(t==null?void 0:t.firstLineIndentMode)===!0&&typeof s.markerX=="number"&&Number.isFinite(s.markerX)?c=s.markerX:c=e-r+n,Number.isFinite(c)||(c=0);const u=c+l,d=s.suffix??"tab";if(d==="space")return c+l+mht;if(d==="nothing")return c+l;const f=s.justification??"left",h=Math.max(typeof s.markerBoxWidthPx=="number"&&Number.isFinite(s.markerBoxWidthPx)?s.markerBoxWidthPx:0,l);if(f!=="left"){const A=typeof s.gutterWidthPx=="number"&&Number.isFinite(s.gutterWidthPx)&&s.gutterWidthPx>0?s.gutterWidthPx:Ou;return c+l+Math.max(A,Ou)}if((t==null?void 0:t.firstLineIndentMode)===!0){let A;if(Array.isArray(t.tabsPx)){for(const R of t.tabsPx)if(typeof R=="number"&&R>u){A=R;break}}const x=typeof s.textStartX=="number"&&Number.isFinite(s.textStartX)?s.textStartX:t.textStartPx;let T;return A!==void 0?T=A-u:x!==void 0&&Number.isFinite(x)&&x>u?T=x-u:T=Ou,T<Ou&&(T=Ou),c+l+T}const m=typeof(t==null?void 0:t.textStartPx)=="number"&&Number.isFinite(t.textStartPx)?t.textStartPx:void 0,y=typeof s.gutterWidthPx=="number"&&Number.isFinite(s.gutterWidthPx)&&s.gutterWidthPx>0?s.gutterWidthPx:Ou,w=c+h;if(m!==void 0){const A=Math.max(m-w,y);return w+A}let E=e+n-w;return E<=0?E=y:E<Ou&&(E=Math.max(E,y)),w+E}function AT(t){var e;if(!(!t||t.kind!=="paragraph"))return(e=t.attrs)==null?void 0:e.wordLayout}function EB(t,e){var u,d,f,h,m;if(t>0)return!0;if(!e||e.kind!=="paragraph")return!1;const r=AT(e),i=e.attrs;if((i==null?void 0:i.listItem)!=null||((u=e.attrs)==null?void 0:u.numberingProperties)!=null||(r==null?void 0:r.marker)!=null)return!0;const a=((f=(d=e.attrs)==null?void 0:d.indent)==null?void 0:f.hanging)??0,l=((m=(h=e.attrs)==null?void 0:h.indent)==null?void 0:m.left)??0;return a>0&&l>0}function SB(t){var f,h;const{isFirstLine:e,isListItem:n,markerWidth:r,markerTextWidth:i,paraIndentLeft:s,firstLineIndent:o,hangingIndent:a,wordLayout:l}=t,c=o-a,u=typeof i=="number"&&Number.isFinite(i)&&i>0?i:r;let d=s;if(n&&e){const m=qU(l,s,Math.max(o,0),Math.max(a,0),()=>u);if(typeof m=="number"&&Number.isFinite(m))d=m;else{const y=((f=l==null?void 0:l.marker)==null?void 0:f.textStartX)??(l==null?void 0:l.textStartPx),w=a>0&&(l==null?void 0:l.firstLineIndentMode)!==!0;if(typeof y=="number"&&Number.isFinite(y)&&(!w||y>s))d=y;else if((l==null?void 0:l.firstLineIndentMode)===!0)d=s+Math.max(o,0)+r;else if(w&&u>0){const E=Math.max(0,s-a+o),A=l==null?void 0:l.gutterWidthPx,x=typeof A=="number"&&Number.isFinite(A)?A:((h=l==null?void 0:l.marker)==null?void 0:h.gutterWidthPx)??Ou;d=E+u+x}}}else e&&!n&&(d+=c);return d}function AB(t){const e=typeof(t==null?void 0:t.left)=="number"&&Number.isFinite(t.left)?t.left:0,n=typeof(t==null?void 0:t.right)=="number"&&Number.isFinite(t.right)?t.right:0,r=typeof(t==null?void 0:t.firstLine)=="number"&&Number.isFinite(t.firstLine)?t.firstLine:0,i=typeof(t==null?void 0:t.hanging)=="number"&&Number.isFinite(t.hanging)?t.hanging:0;return{left:e,right:n,firstLine:r,hanging:i}}const ght=()=>({headerIds:{default:null,first:null,even:null,odd:null},footerIds:{default:null,first:null,even:null,odd:null},titlePg:!1,alternateHeaders:!1}),TB=t=>{var i;const e=ght();if(!t)return e;const n=t.headerIds??{},r=t.footerIds??{};return e.headerIds={default:n.default??null,first:n.first??null,even:n.even??null,odd:n.odd??null},e.footerIds={default:r.default??null,first:r.first??null,even:r.even??null,odd:r.odd??null},e.titlePg=!!(n.titlePg??r.titlePg??!1),e.alternateHeaders=!!(((i=t.pageStyles)==null?void 0:i.alternateHeaders)??!1),e},yht=(t,e,n)=>{if(t<=0)return null;const i=((n==null?void 0:n.kind)??"header")==="header"?e.headerIds:e.footerIds,s=!!i.first,o=!!i.even,a=!!i.odd,l=!!i.default,c=e.titlePg&&s;if(t===1&&c)return"first";if(e.alternateHeaders){if(t%2===0&&(o||l))return o?"even":"default";if(t%2===1&&(a||l))return a?"odd":"default"}return l?"default":null},bht=()=>({headerIds:{default:null,first:null,even:null,odd:null},footerIds:{default:null,first:null,even:null,odd:null},titlePg:!1,alternateHeaders:!1,sectionCount:0,sectionHeaderIds:new Map,sectionFooterIds:new Map,sectionTitlePg:new Map});function wht(t,e,n){const r=bht();r.alternateHeaders=!!((e==null?void 0:e.alternateHeaders)??!1),r.sectionCount=t.length;for(const o of t){const a=o.sectionIndex;o.headerRefs&&r.sectionHeaderIds.set(a,{default:o.headerRefs.default??null,first:o.headerRefs.first??null,even:o.headerRefs.even??null,odd:o.headerRefs.odd??null}),o.footerRefs&&r.sectionFooterIds.set(a,{default:o.footerRefs.default??null,first:o.footerRefs.first??null,even:o.footerRefs.even??null,odd:o.footerRefs.odd??null}),r.sectionTitlePg.set(a,o.titlePg===!0)}const i=r.sectionHeaderIds.get(0),s=r.sectionFooterIds.get(0);return i&&(r.headerIds={...i}),s&&(r.footerIds={...s}),r.titlePg=r.sectionTitlePg.get(0)??!1,n!=null&&n.headerIds&&(!r.titlePg&&n.headerIds.titlePg&&(r.titlePg=!0),r.headerIds.default=r.headerIds.default??n.headerIds.default??null,r.headerIds.first=r.headerIds.first??n.headerIds.first??null,r.headerIds.even=r.headerIds.even??n.headerIds.even??null,r.headerIds.odd=r.headerIds.odd??n.headerIds.odd??null),n!=null&&n.footerIds&&(!r.titlePg&&n.footerIds.titlePg&&(r.titlePg=!0),r.footerIds.default=r.footerIds.default??n.footerIds.default??null,r.footerIds.first=r.footerIds.first??n.footerIds.first??null,r.footerIds.even=r.footerIds.even??n.footerIds.even??null,r.footerIds.odd=r.footerIds.odd??n.footerIds.odd??null),r}function vht(t,e,n,r){if(t<=0)return null;const i=(r==null?void 0:r.kind)??"header",s=(r==null?void 0:r.sectionPageNumber)??t,a=(i==="header"?n.sectionHeaderIds.get(e):n.sectionFooterIds.get(e))??(i==="header"?n.headerIds:n.footerIds),l=!!a.first,c=!!a.even,u=!!a.odd,d=!!a.default,h=(n.sectionTitlePg.has(e)?n.sectionTitlePg.get(e):n.titlePg)===!0;if(s===1&&h)return l||d||c||u?"first":null;if(n.alternateHeaders){if(t%2===0&&(c||d))return c?"even":"default";if(t%2===1&&(u||d))return u?"odd":"default"}return d?"default":null}function xht(t,e,n){const r=[];let i=t,s=e,o=n,a=Math.max(0,(s==null?void 0:s.left)??0);return{registerDrawing(l,c,u,d,f){var T;if(!((T=l.anchor)!=null&&T.isAnchored))return;const{wrap:h,anchor:m}=l,y=(h==null?void 0:h.type)??"Inline";if(y==="Inline"||y==="None")return;const w=c.width??0,b=c.height??0,E=GU(m,d,i,w,s,o),A=u+(m.offsetV??0),x={imageBlockId:l.id,pageNumber:f,columnIndex:d,bounds:{x:E,y:A,width:w,height:b},distances:{top:(h==null?void 0:h.distTop)??0,bottom:(h==null?void 0:h.distBottom)??0,left:(h==null?void 0:h.distLeft)??0,right:(h==null?void 0:h.distRight)??0},wrapMode:Eht(h),polygon:h==null?void 0:h.polygon};r.push(x)},registerTable(l,c,u,d,f){var T;if(!((T=l.anchor)!=null&&T.isAnchored))return;const{wrap:h,anchor:m}=l;if(((h==null?void 0:h.type)??"None")==="None")return;const w=c.totalWidth??0,b=c.totalHeight??0,E=Sht(m,d,i,w,s,o),A=u+(m.offsetV??0),x={imageBlockId:l.id,pageNumber:f,columnIndex:d,bounds:{x:E,y:A,width:w,height:b},distances:{top:(h==null?void 0:h.distTop)??0,bottom:(h==null?void 0:h.distBottom)??0,left:(h==null?void 0:h.distLeft)??0,right:(h==null?void 0:h.distRight)??0},wrapMode:Aht(h)};r.push(x)},getExclusionsForLine(l,c,u,d){return r.filter(h=>{if(h.pageNumber!==d||h.columnIndex!==u)return!1;const m=l,y=l+c,w=h.bounds.y-h.distances.top,b=h.bounds.y+h.bounds.height+h.distances.bottom;return y>w&&m<b})},computeAvailableWidth(l,c,u,d,f){const h=this.getExclusionsForLine(l,c,d,f);if(h.length===0)return{width:u,offsetX:0};const m=h.filter(_=>_.wrapMode!=="none");if(m.length===0)return{width:u,offsetX:0};const y=[],w=[],b=a+d*(i.width+i.gap),E=b+u/2;for(const _ of m)_.wrapMode==="left"?y.push(_):_.wrapMode==="right"?w.push(_):(_.wrapMode==="both"||_.wrapMode==="largest")&&(_.bounds.x+_.bounds.width/2<E?y.push(_):w.push(_));let A=0;for(const _ of y){const N=_.bounds.x+_.bounds.width+_.distances.left+_.distances.right;A=Math.max(A,N)}let T=b+u;for(const _ of w){const N=_.bounds.x-_.distances.left-_.distances.right;T=Math.min(T,N)}const R=T-A,k=Math.max(0,A-b);return R<=0?{width:1,offsetX:0}:{width:R,offsetX:k}},getAllFloatsForPage(l){return r.filter(c=>c.pageNumber===l)},clear(){r.length=0},setLayoutContext(l,c,u){i=l,s=c,o=u,a=Math.max(0,(s==null?void 0:s.left)??0)}}}function GU(t,e,n,r,i,s){const o=t.alignH??"left",a=t.offsetH??0,l=Math.max(0,(i==null?void 0:i.left)??0),c=Math.max(0,(i==null?void 0:i.right)??0),u=s!=null?Math.max(1,s-(l+c)):n.width,d=l,f=d+e*(n.width+n.gap),h=t.hRelativeFrom??"column";let m,y;return h==="page"?(m=0,y=s??u+l+c):h==="margin"?(m=d,y=u):(m=f,y=n.width),o==="left"?m+a:o==="right"?m+y-r-a:o==="center"?m+(y-r)/2+a:m}function Eht(t,e){if(!t)return"none";const n=t.wrapText??"bothSides";return t.type==="TopAndBottom"?"none":n==="left"?"right":n==="right"?"left":n==="largest"?"largest":"both"}function Sht(t,e,n,r,i,s){const o=t.alignH??"left",a=t.offsetH??0,l=Math.max(0,(i==null?void 0:i.left)??0),c=Math.max(0,(i==null?void 0:i.right)??0),u=s!=null?Math.max(1,s-(l+c)):n.width,d=l,f=d+e*(n.width+n.gap),h=t.hRelativeFrom??"column";let m,y;h==="page"?n.count===1?(m=d,y=u):(m=0,y=s??u):h==="margin"?(m=d,y=u):(m=f,y=n.width);let w=o;return o==="inside"&&(w="left"),o==="outside"&&(w="right"),w==="left"?m+a:w==="right"?m+y-r-a:w==="center"?m+(y-r)/2+a:m}function Aht(t){if(!t||t.type==="None")return"none";const e=t.wrapText??"bothSides";return e==="left"?"right":e==="right"?"left":e==="largest"?"largest":"both"}function Tht(t){var i;const e=new Map,n=[];for(let s=0;s<t.length;s+=1){const o=t[s];!o||o.kind!=="sectionBreak"||((i=o.attrs)==null?void 0:i.source)==="sectPr"&&n.push(s)}const r=s=>{const o={};return s.kind!=="sectionBreak"||(s.margins&&(o.margins={header:s.margins.header,footer:s.margins.footer,top:s.margins.top,right:s.margins.right,bottom:s.margins.bottom,left:s.margins.left}),s.pageSize&&(o.pageSize={w:s.pageSize.w,h:s.pageSize.h}),s.columns&&(o.columns={count:s.columns.count,gap:s.columns.gap}),s.orientation&&(o.orientation=s.orientation),s.vAlign&&(o.vAlign=s.vAlign)),o};return n.forEach((s,o)=>{var d;const a=t[s],l=n[o+1],u=(a==null?void 0:a.kind)==="sectionBreak"&&((d=a.attrs)==null?void 0:d.isFirstSection)||typeof l!="number"?a:t[l];e.set(s,r(u))}),e}function pie(t,e,n,r=0,i=0){var x,T,R,k,_,N,L,M,C,D,O,$,U,W,ce,se,Q,J,K,re;const s={...e},o=(X,me)=>r>0?Math.max(me,X+r):me,a=(X,me)=>i>0?Math.max(me,X+i):me;if((x=t.attrs)!=null&&x.isFirstSection&&!s.hasAnyPages){t.pageSize&&(s.activePageSize={w:t.pageSize.w,h:t.pageSize.h},s.pendingPageSize=null),t.orientation&&(s.activeOrientation=t.orientation,s.pendingOrientation=null);const X=typeof((T=t.margins)==null?void 0:T.header)=="number"?Math.max(0,t.margins.header):s.activeHeaderDistance,me=typeof((R=t.margins)==null?void 0:R.footer)=="number"?Math.max(0,t.margins.footer):s.activeFooterDistance,G=typeof((k=t.margins)==null?void 0:k.top)=="number"?Math.max(0,t.margins.top):n.top,B=typeof((_=t.margins)==null?void 0:_.bottom)=="number"?Math.max(0,t.margins.bottom):n.bottom;if(((N=t.margins)==null?void 0:N.header)!==void 0&&(s.activeHeaderDistance=X,s.pendingHeaderDistance=X),((L=t.margins)==null?void 0:L.footer)!==void 0&&(s.activeFooterDistance=me,s.pendingFooterDistance=me),(((M=t.margins)==null?void 0:M.top)!==void 0||((C=t.margins)==null?void 0:C.header)!==void 0)&&(s.activeTopMargin=o(X,G),s.pendingTopMargin=s.activeTopMargin),(((D=t.margins)==null?void 0:D.bottom)!==void 0||((O=t.margins)==null?void 0:O.footer)!==void 0)&&(s.activeBottomMargin=a(me,B),s.pendingBottomMargin=s.activeBottomMargin),(($=t.margins)==null?void 0:$.left)!==void 0){const z=Math.max(0,t.margins.left);s.activeLeftMargin=z,s.pendingLeftMargin=z}if(((U=t.margins)==null?void 0:U.right)!==void 0){const z=Math.max(0,t.margins.right);s.activeRightMargin=z,s.pendingRightMargin=z}return t.columns&&(s.activeColumns={count:t.columns.count,gap:t.columns.gap},s.pendingColumns=null),{decision:{forcePageBreak:!1,forceMidPageRegion:!1},state:s}}const l=(W=t.margins)==null?void 0:W.header,c=(ce=t.margins)==null?void 0:ce.footer,u=(se=t.margins)==null?void 0:se.top,d=(Q=t.margins)==null?void 0:Q.bottom,f=s.pendingTopMargin??s.activeTopMargin,h=s.pendingBottomMargin??s.activeBottomMargin,m=s.pendingLeftMargin??s.activeLeftMargin,y=s.pendingRightMargin??s.activeRightMargin,w=s.pendingHeaderDistance??s.activeHeaderDistance,b=s.pendingFooterDistance??s.activeFooterDistance;if(typeof l=="number"||typeof u=="number"){const X=typeof l=="number"?Math.max(0,l):w,me=typeof u=="number"?Math.max(0,u):n.top;s.pendingHeaderDistance=X,s.pendingTopMargin=o(X,me)}else s.pendingTopMargin=f,s.pendingHeaderDistance=w;if(typeof c=="number"||typeof d=="number"){const X=typeof c=="number"?Math.max(0,c):b,me=typeof d=="number"?Math.max(0,d):n.bottom;s.pendingFooterDistance=X,s.pendingBottomMargin=a(X,me)}else s.pendingBottomMargin=h,s.pendingFooterDistance=b;typeof((J=t.margins)==null?void 0:J.left)=="number"?s.pendingLeftMargin=Math.max(0,t.margins.left):s.pendingLeftMargin=m,typeof((K=t.margins)==null?void 0:K.right)=="number"?s.pendingRightMargin=Math.max(0,t.margins.right):s.pendingRightMargin=y,t.pageSize&&(s.pendingPageSize={w:t.pageSize.w,h:t.pageSize.h}),t.orientation&&(s.pendingOrientation=t.orientation);const E=t.type??"continuous",A=!!t.columns&&(t.columns.count!==s.activeColumns.count||t.columns.gap!==s.activeColumns.gap);if((re=t.attrs)!=null&&re.requirePageBoundary)return t.columns&&(s.pendingColumns={count:t.columns.count,gap:t.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1},state:s};switch(E){case"nextPage":return t.columns&&(s.pendingColumns={count:t.columns.count,gap:t.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1},state:s};case"evenPage":return t.columns&&(s.pendingColumns={count:t.columns.count,gap:t.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1,requiredParity:"even"},state:s};case"oddPage":return t.columns&&(s.pendingColumns={count:t.columns.count,gap:t.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1,requiredParity:"odd"},state:s};case"continuous":default:return A?{decision:{forcePageBreak:!1,forceMidPageRegion:!0},state:s}:(t.columns&&(s.pendingColumns={count:t.columns.count,gap:t.columns.gap}),{decision:{forcePageBreak:!1,forceMidPageRegion:!1},state:s})}}function kht(t){const e={...t};return e.pendingTopMargin!=null&&(e.activeTopMargin=e.pendingTopMargin),e.pendingBottomMargin!=null&&(e.activeBottomMargin=e.pendingBottomMargin),e.pendingLeftMargin!=null&&(e.activeLeftMargin=e.pendingLeftMargin),e.pendingRightMargin!=null&&(e.activeRightMargin=e.pendingRightMargin),e.pendingHeaderDistance!=null&&(e.activeHeaderDistance=e.pendingHeaderDistance),e.pendingFooterDistance!=null&&(e.activeFooterDistance=e.pendingFooterDistance),e.pendingPageSize!=null&&(e.activePageSize=e.pendingPageSize),e.pendingColumns!=null&&(e.activeColumns=e.pendingColumns),e.pendingOrientation!=null&&(e.activeOrientation=e.pendingOrientation),e.pendingTopMargin=null,e.pendingBottomMargin=null,e.pendingLeftMargin=null,e.pendingRightMargin=null,e.pendingHeaderDistance=null,e.pendingFooterDistance=null,e.pendingPageSize=null,e.pendingColumns=null,e.pendingOrientation=null,e}function D9(t){return t.lines.length>0?t.lines:[{fromRun:0,fromChar:0,toRun:0,toChar:0,width:0,ascent:0,descent:0,lineHeight:t.totalHeight||0}]}function Cht(t,e,n){let r=0,i=e;for(;i<t.length;){const s=t[i].lineHeight||0;if(r>0&&r+s>n)break;r+=s,i+=1}return i===e&&(r=t[e].lineHeight||0,i+=1),{toLine:i,height:r}}const kB=(t,e,n,r)=>Vut(t,e,n,r),TT=t=>{if(!t||!t.attrs)return{};const e=t.attrs,n=typeof e.pmStart=="number"?e.pmStart:void 0,r=typeof e.pmEnd=="number"?e.pmEnd:void 0;return{pmStart:n,pmEnd:r??(n!=null?n+1:void 0)}},mie=t=>{if(!(!t.attrs||typeof t.attrs!="object"))return t.attrs},_ht=t=>typeof t=="string"?t:void 0,Nht=t=>{if(t===!0||t===1)return!0;if(typeof t=="string"){const e=t.toLowerCase();return e==="true"||e==="1"||e==="on"}return!1},Iht=t=>typeof t!="number"||!Number.isFinite(t)||t<0?0:t;function gie(t,e){var a;const n=(a=t.attrs)==null?void 0:a.wordLayout;if(!(n!=null&&n.firstLineIndentMode)||!n.marker||!e.marker)return 0;const r=e.marker.markerWidth??n.marker.markerBoxWidthPx??0,i=Number.isFinite(r)&&r>=0?r:0,s=e.marker.gutterWidth??0,o=Number.isFinite(s)&&s>=0?s:0;return i+o}function Rht(t,e){var se,Q,J,K,re,X,me,G,B,z,de,Y,ee,ae,ie,H,be,Te;const{block:n,measure:r,columnWidth:i,ensurePage:s,advanceColumn:o,columnX:a,floatManager:l}=t,c=t.remeasureParagraph,u=mie(n),d=u==null?void 0:u.frame;if((se=e==null?void 0:e.anchoredDrawings)!=null&&se.length)for(const Z of e.anchoredDrawings){if(e.placedAnchoredIds.has(Z.block.id))continue;const oe=s(),te=(Q=Z.block.anchor)==null?void 0:Q.vRelativeFrom,ye=(J=Z.block.anchor)==null?void 0:J.alignV,ke=((K=Z.block.anchor)==null?void 0:K.offsetV)??0,we=Z.measure.height,Ae=oe.topMargin,Re=oe.contentBottom,Pe=Math.max(0,Re-Ae);let Ce;if(te==="margin")ye==="top"?Ce=Ae+ke:ye==="bottom"?Ce=Re-we+ke:ye==="center"?Ce=Ae+(Pe-we)/2+ke:Ce=Ae+ke;else if(te==="page")ye==="top"?Ce=ke:ye==="bottom"?Ce=Re+(e.pageMargins.bottom??0)-we+ke:ye==="center"?Ce=(Re+(e.pageMargins.bottom??0)-we)/2+ke:Ce=ke;else if(te==="paragraph"){const $e=oe.cursorY,he=((X=(re=r.lines)==null?void 0:re[0])==null?void 0:X.lineHeight)??0;ye==="top"?Ce=$e+ke:ye==="bottom"?Ce=$e+he-we+ke:ye==="center"?Ce=$e+(he-we)/2+ke:Ce=$e+ke}else Ce=oe.cursorY+ke;l.registerDrawing(Z.block,Z.measure,Ce,oe.columnIndex,oe.page.number);const Oe=Z.block.anchor?GU(Z.block.anchor,oe.columnIndex,e.columns,Z.measure.width,{left:e.pageMargins.left,right:e.pageMargins.right},e.pageWidth):a(oe.columnIndex),Fe=TT(Z.block);if(Z.block.kind==="image"&&Z.measure.kind==="image"){const $e=Math.max(0,oe.contentBottom-oe.topMargin),he=((me=Z.block.anchor)==null?void 0:me.hRelativeFrom)??"column",q=e.pageMargins.left??0,ne=e.pageMargins.right??0;let Ee;he==="page"?Ee=e.columns.count===1?e.pageWidth-q-ne:e.pageWidth:he==="margin"?Ee=e.pageWidth-q-ne:Ee=e.columns.width;const Se=Z.measure.width>0&&Z.measure.height>0?Z.measure.width/Z.measure.height:1,ze=20,Ie=ze/Se,qe={originalWidth:Z.measure.width,originalHeight:Z.measure.height,maxWidth:Ee,maxHeight:$e,aspectRatio:Se,minWidth:ze,minHeight:Ie},Ye={kind:"image",blockId:Z.block.id,x:Oe,y:Ce,width:Z.measure.width,height:Z.measure.height,isAnchored:!0,zIndex:(G=Z.block.anchor)!=null&&G.behindDoc?0:1,metadata:qe};Fe.pmStart!=null&&(Ye.pmStart=Fe.pmStart),Fe.pmEnd!=null&&(Ye.pmEnd=Fe.pmEnd),oe.page.fragments.push(Ye)}else if(Z.block.kind==="drawing"&&Z.measure.kind==="drawing"){const $e={kind:"drawing",blockId:Z.block.id,drawingKind:Z.block.drawingKind,x:Oe,y:Ce,width:Z.measure.width,height:Z.measure.height,geometry:Z.measure.geometry,scale:Z.measure.scale,isAnchored:!0,zIndex:(B=Z.block.anchor)!=null&&B.behindDoc?0:1,drawingContentId:Z.block.drawingContentId};Fe.pmStart!=null&&($e.pmStart=Fe.pmStart),Fe.pmEnd!=null&&($e.pmEnd=Fe.pmEnd),oe.page.fragments.push($e)}e.placedAnchoredIds.add(Z.block.id)}let f=D9(r);const h=(z=f[0])==null?void 0:z.maxWidth,m=(de=n.attrs)==null?void 0:de.indent,y=typeof(m==null?void 0:m.left)=="number"&&Number.isFinite(m.left)?m.left:0,w=typeof(m==null?void 0:m.right)=="number"&&Number.isFinite(m.right)?m.right:0,b=y<0?y:0,E=w<0?w:0,A=Math.max(1,i-y-w);let x=!1,T;if(typeof c=="function"&&typeof h=="number"&&h>A){const Z=gie(n,r),oe=c(n,i,Z);f=D9(oe),x=!0,oe.marker&&(T=oe.marker)}let R=0;const k=mie(n),_=(k==null?void 0:k.spacing)??{},N=_ht(k==null?void 0:k.styleId),L=Nht(k==null?void 0:k.contextualSpacing);let M=Math.max(0,Number(_.before??_.lineSpaceBefore??0));const C=Math.max(0,Number(_.after??_.lineSpaceAfter??0));let D=M===0,O=null;if((d==null?void 0:d.wrap)==="none"){let Z=s();Z.cursorY>=Z.contentBottom&&(Z=o(Z));const te=f.reduce((Ae,Re)=>Math.max(Ae,Re.width??0),0)||i;let ye=a(Z.columnIndex);d.xAlign==="right"?ye+=i-te:d.xAlign==="center"&&(ye+=(i-te)/2),typeof d.x=="number"&&Number.isFinite(d.x)&&(ye+=d.x);const ke=typeof d.y=="number"&&Number.isFinite(d.y)?d.y:0,we={kind:"para",blockId:n.id,fromLine:0,toLine:f.length,x:ye,y:Z.cursorY+ke,width:te,...kB(n,f,0,f.length)};if(r.marker||T){const Ae=T??r.marker;we.markerWidth=(Ae==null?void 0:Ae.markerWidth)??((Y=r.marker)==null?void 0:Y.markerWidth)??0;const Re=(T==null?void 0:T.markerTextWidth)??((ee=r.marker)==null?void 0:ee.markerTextWidth);Re!=null&&(we.markerTextWidth=Re)}Z.page.fragments.push(we),Z.trailingSpacing=0,Z.lastParagraphStyleId=N;return}let U=i,W=0,ce=!1;if(typeof c=="function"){const Z=s();let oe=Z.cursorY;if(!D&&M>0){const ye=Z.trailingSpacing??0,ke=Math.max(M-ye,0);oe+=ke}for(let ye=0;ye<f.length;ye++){const ke=oe,we=((ae=f[ye])==null?void 0:ae.lineHeight)||0,{width:Ae,offsetX:Re}=l.computeAvailableWidth(ke,we,i,Z.columnIndex,Z.page.number);Ae<U&&(U=Ae,W=Re),oe+=we}const te=Math.max(1,U-y-w);if(te<A){const ye=gie(n,r),ke=c(n,te,ye);f=D9(ke),ce=!0,ke.marker&&(T=ke.marker)}}for(;R<f.length;){let Z=s();if(Z.trailingSpacing==null&&(Z.trailingSpacing=0),L&&Z.lastParagraphStyleId&&N&&Z.lastParagraphStyleId===N){M=0;const $e=Iht(Z.trailingSpacing);$e>0&&(Z.cursorY-=$e,Z.trailingSpacing=0)}if(!D&&M>0)for(;!D;){const $e=Z.trailingSpacing??0,he=Math.max(M-$e,0);if(Z.cursorY+he>Z.contentBottom){if(Z.cursorY<=Z.topMargin){Z.trailingSpacing=0,D=!0;break}Z=o(Z),Z.trailingSpacing==null&&(Z.trailingSpacing=0);continue}he>0&&(Z.cursorY+=he),Z.trailingSpacing=0,D=!0}else Z.trailingSpacing=0;Z.cursorY>=Z.contentBottom&&(Z=o(Z)),Z.contentBottom-Z.cursorY<=0&&(Z=o(Z));const te=f[R].lineHeight||0,ye=Z.contentBottom-Z.cursorY;Z.page.fragments.length>0&&ye<te&&(Z=o(Z));let ke=i,we=0;ce&&(ke=U,we=W);const Ae=Cht(f,R,Z.contentBottom-Z.cursorY),Re=Ae.height,Pe=a(Z.columnIndex)+we+b,Ce=ke-b-E,Oe={kind:"para",blockId:n.id,fromLine:R,toLine:Ae.toLine,x:Pe,y:Z.cursorY,width:Ce,...kB(n,f,R,Ae.toLine)};if(x&&(Oe.lines=f.slice(R,Ae.toLine)),(r.marker||T)&&R===0){const $e=T??r.marker;Oe.markerWidth=($e==null?void 0:$e.markerWidth)??((ie=r.marker)==null?void 0:ie.markerWidth)??0;const he=(T==null?void 0:T.markerTextWidth)??((H=r.marker)==null?void 0:H.markerTextWidth);he!=null&&(Oe.markerTextWidth=he);const q=(T==null?void 0:T.gutterWidth)??((be=r.marker)==null?void 0:be.gutterWidth);q!=null&&(Oe.markerGutter=q)}R>0&&(Oe.continuesFromPrev=!0),Ae.toLine<f.length&&(Oe.continuesOnNext=!0);const Fe=(Te=n.attrs)==null?void 0:Te.floatAlignment;if(Fe&&(Fe==="right"||Fe==="center")){let $e=0;for(let he=R;he<Ae.toLine;he++)f[he].width>$e&&($e=f[he].width);Fe==="right"?Oe.x=a(Z.columnIndex)+we+(ke-$e):Fe==="center"&&(Oe.x=a(Z.columnIndex)+we+(ke-$e)/2)}Z.page.fragments.push(Oe),Z.cursorY+=Re,O=Z,R=Ae.toLine}if(O){if(C>0){let Z=O,oe=C;Z.cursorY+C>Z.contentBottom?(Z=o(Z),oe=0):Z.cursorY+=C,Z.trailingSpacing=oe}else O.trailingSpacing=0;O.lastParagraphStyleId=N}}function Mht({block:t,measure:e,columns:n,ensurePage:r,advanceColumn:i,columnX:s}){var R,k,_,N,L;if((R=t.anchor)!=null&&R.isAnchored)return;const o=Math.max(0,((k=t.margin)==null?void 0:k.top)??0),a=Math.max(0,((_=t.margin)==null?void 0:_.bottom)??0),l=Math.max(0,((N=t.margin)==null?void 0:N.left)??0),c=Math.max(0,((L=t.margin)==null?void 0:L.right)??0),u=Math.max(0,n.width-(l+c));let d=e.width,f=e.height;if(d>u&&u>0){const M=u/d;d=u,f*=M}let h=r();const m=Math.max(0,h.contentBottom-h.topMargin);if(f>m&&m>0){const M=m/f;f=m,d*=M}const y=o+f+a;h.cursorY+y>h.contentBottom&&h.cursorY>h.topMargin&&(h=i(h));const w=TT(t),b=e.width>0&&e.height>0?e.width/e.height:1,E=20,A=E/b,x={originalWidth:e.width,originalHeight:e.height,maxWidth:u,maxHeight:m,aspectRatio:b,minWidth:E,minHeight:A},T={kind:"image",blockId:t.id,x:s(h.columnIndex)+l,y:h.cursorY+o,width:d,height:f,pmStart:w.pmStart,pmEnd:w.pmEnd,metadata:x};h.page.fragments.push(T),h.cursorY+=y}function Lht({block:t,measure:e,columns:n,ensurePage:r,advanceColumn:i,columnX:s}){var R,k,_,N,L;if((R=t.anchor)!=null&&R.isAnchored)return;const o=Math.max(0,((k=t.margin)==null?void 0:k.top)??0),a=Math.max(0,((_=t.margin)==null?void 0:_.bottom)??0),l=Math.max(0,((N=t.margin)==null?void 0:N.left)??0),c=Math.max(0,((L=t.margin)==null?void 0:L.right)??0),u=Math.max(0,n.width-(l+c));let d=e.width,f=e.height;const h=t.attrs,m=typeof(h==null?void 0:h.hrIndentLeft)=="number"?h.hrIndentLeft:0,y=typeof(h==null?void 0:h.hrIndentRight)=="number"?h.hrIndentRight:0,w=(h==null?void 0:h.isFullWidth)===!0&&u>0?Math.max(1,u-m-y):u;if(d>w&&w>0){const M=w/d;d=w,f*=M}let b=r();const E=Math.max(0,b.contentBottom-b.topMargin);if(f>E&&E>0){const M=E/f;f=E,d*=M}const A=o+f+a;b.cursorY+A>b.contentBottom&&b.cursorY>b.topMargin&&(b=i(b));const x=TT(t),T={kind:"drawing",blockId:t.id,drawingKind:t.drawingKind,x:s(b.columnIndex)+l+m,y:b.cursorY+o,width:d,height:f,geometry:e.geometry,scale:e.scale,drawingContentId:t.drawingContentId,zIndex:t.zIndex,pmStart:x.pmStart,pmEnd:x.pmEnd};b.page.fragments.push(T),b.cursorY+=A}function Dht(t){if(!t)return 0;const e=t.tableIndent;if(!e||typeof e!="object")return 0;const n=e.width;return n==null||typeof n!="number"||!Number.isFinite(n)?0:n}function Oht(t,e,n){return{x:t+n,width:Math.max(0,e-n)}}function fS(t,e,n,r){const i=Math.min(e,n),s=typeof(r==null?void 0:r.justification)=="string"?r.justification:void 0;if(s==="center")return{x:t+Math.max(0,(e-i)/2),width:i};if(s==="right"||s==="end")return{x:t+Math.max(0,e-i),width:i};const o=Dht(r);return Oht(t,i,o)}function Pht(t,e){const r=e.columnWidths[t]||25;return Math.max(25,Math.min(r,200))}function mM(t){const e=[];let n=0;for(let r=0;r<t.columnWidths.length;r++){const i=t.columnWidths[r],s=Pht(r,t),o={index:r,x:n,width:i,minWidth:s,resizable:!0};e.push(o),n+=i}return e}function Fht(t){var n,r;let e=0;for(let i=0;i<t.rows.length&&((r=(n=t.rows[i].attrs)==null?void 0:n.tableRowProperties)==null?void 0:r.repeatHeader)===!0;i++)e++;return e}function cA(t,e,n){let r=0;for(let i=e;i<n&&i<t.length;i++)r+=t[i].height;return r}function Bht(t,e,n){let r=0;return t.repeatHeaderCount&&t.repeatHeaderCount>0&&(r+=cA(e.rows,0,t.repeatHeaderCount)),r+=cA(e.rows,t.fromRow,t.toRow),r}const jht=20;function KU(t){var e;if(t.blocks&&t.blocks.length>0){const n=[];for(const r of t.blocks)if(r.kind==="paragraph"&&r.kind==="paragraph"&&"lines"in r){const i=r;i.lines&&n.push(...i.lines)}return n}return(e=t.paragraph)!=null&&e.lines?t.paragraph.lines:[]}function ixe(t,e){var r,i,s;const n=((s=(i=(r=e==null?void 0:e.cells)==null?void 0:r[t])==null?void 0:i.attrs)==null?void 0:s.padding)??{};return{top:n.top??2,bottom:n.bottom??2,left:n.left??4,right:n.right??4}}function PI(t){return KU(t).length}const $ht=.1;function zht(t,e){let n=0;for(let r=0;r<e.cells.length;r++){const i=e.cells[r],s=ixe(r,t),o=s.top+s.bottom,l=KU(i).reduce((c,u)=>c+(u.lineHeight||0),0);n=Math.max(n,l+o)}return n}function sxe(t,e){var i;const n=(i=t==null?void 0:t.attrs)==null?void 0:i.rowHeight;if(!n||n.value==null||!Number.isFinite(n.value))return!1;const r=zht(t,e);return e.height>r+$ht}function x6(t,e){typeof e.pmStart=="number"&&(t.pmStart=t.pmStart==null?e.pmStart:Math.min(t.pmStart,e.pmStart)),typeof e.pmEnd=="number"&&(t.pmEnd=t.pmEnd==null?e.pmEnd:Math.max(t.pmEnd,e.pmEnd))}function Hht(t,e,n,r){const i={};if(!t||!e)return i;const s=t.blocks??(t.paragraph?[t.paragraph]:[]),o=e.blocks??(e.paragraph?[e.paragraph]:[]),a=Math.min(s.length,o.length);let l=0;for(let c=0;c<a;c++){const u=s[c],d=o[c];if(d.kind==="paragraph"&&(u==null?void 0:u.kind)==="paragraph"){const h=d.lines,m=(h==null?void 0:h.length)??0,y=l,w=l+m,b=Math.max(n,y)-y,E=Math.min(r,w)-y;h&&h.length>0&&b<E?x6(i,kB(u,h,b,E)):x6(i,TT(u)),l+=m;continue}x6(i,TT(u))}return i}function Vht(t,e,n,r,i){const s={};for(let o=n;o<r;o++){const a=t.rows[o],l=e.rows[o];if(!a||!l)continue;const c=(i==null?void 0:i.rowIndex)===o,u=Math.min(a.cells.length,l.cells.length);for(let d=0;d<u;d++){const f=a.cells[d],h=l.cells[d];if(!f||!h)continue;const m=PI(h);let y=0,w=m;if(c){const b=(i==null?void 0:i.fromLineByCell)&&d<i.fromLineByCell.length,E=(i==null?void 0:i.toLineByCell)&&d<i.toLineByCell.length;if(b){const A=i.fromLineByCell[d];typeof A=="number"&&A>=0&&(y=A)}if(E){const A=i.toLineByCell[d];typeof A=="number"&&(w=A===-1?m:A)}}y=Math.max(0,Math.min(y,m)),w=Math.max(0,Math.min(w,m)),w<y&&(w=y),x6(s,Hht(f,h,y,w))}}return s}function Gv(t,e,n){const r=Vht(e,n,t.fromRow,t.toRow,t.partialRow);r.pmStart!=null&&(t.pmStart=r.pmStart),r.pmEnd!=null&&(t.pmEnd=r.pmEnd)}function uA(t,e,n,r,i){const s=n.rows[t];if(!s)throw new Error(`Invalid rowIndex ${t}: measure.rows has ${n.rows.length} rows`);const o=s.cells.length,a=i||new Array(o).fill(0),l=[],c=[],u=s.cells.map((b,E)=>ixe(E,e));for(let b=0;b<o;b++){const E=s.cells[b],A=a[b]||0,x=u[b],T=Math.max(0,r-(x.top+x.bottom)),R=KU(E);let k=0,_=A;for(let N=A;N<R.length;N++){const L=R[N].lineHeight||0;if(k+L>T)break;k+=L,_=N+1}l.push(_),c.push(k)}let d=0,f=0;for(let b=0;b<o;b++){const E=u[b],A=E.top+E.bottom;f=Math.max(f,A),d=Math.max(d,c[b]+A)}const h=l.some((b,E)=>b>(a[E]||0)),m=a.every(b=>b===0),w=l.every((b,E)=>{const A=PI(s.cells[E]);return b>=A})||!h;return d===0&&m&&(d=f),{rowIndex:t,fromLineByCell:a,toLineByCell:l,isFirstPart:m,isLastPart:w,partialHeight:d}}function Uht(t,e,n,r,i,s){var l,c;let o=0,a=n;for(let u=n;u<t.rows.length;u++){const d=t.rows[u],f=e.rows[u],h=(f==null?void 0:f.height)||0;let m=((c=(l=d.attrs)==null?void 0:l.tableRowProperties)==null?void 0:c.cantSplit)===!0;if(f&&sxe(d,f)&&(!i||h<=i)&&(m=!0),o+h<=r)o+=h,a=u+1;else{const y=r-o;if(i&&h>i){const w=uA(u,t.rows[u],e,y);return{endRow:u+1,partialRow:w}}if(m)return a===n?{endRow:n,partialRow:null}:{endRow:a,partialRow:null};if(y>=jht){const w=uA(u,t.rows[u],e,y);if(w.toLineByCell.some((E,A)=>E>(w.fromLineByCell[A]||0)))return{endRow:u+1,partialRow:w}}return{endRow:a,partialRow:null}}}return{endRow:t.rows.length,partialRow:null}}function O9(t,e,n,r){return{columnBoundaries:mM(t),coordinateSystem:"fragment"}}function Wht(t){let e=t.ensurePage();e.cursorY+t.measure.totalHeight>e.contentBottom&&e.page.fragments.length>0&&(e=t.advanceColumn(e)),e=t.ensurePage();const n=Math.min(t.measure.totalHeight,e.contentBottom-e.cursorY),r={columnBoundaries:mM(t.measure),coordinateSystem:"fragment"},i=t.columnX(e.columnIndex),s=Math.min(t.columnWidth,t.measure.totalWidth||t.columnWidth),{x:o,width:a}=fS(i,t.columnWidth,s,t.block.attrs),l={kind:"table",blockId:t.block.id,fromRow:0,toRow:t.block.rows.length,x:o,y:e.cursorY,width:a,height:n,metadata:r};Gv(l,t.block,t.measure),e.page.fragments.push(l),e.cursorY+=n}function qht({block:t,measure:e,columnWidth:n,ensurePage:r,advanceColumn:i,columnX:s}){var b,E,A,x,T,R;if((b=t.anchor)!=null&&b.isAnchored)return;const o=(E=t.attrs)==null?void 0:E.tableProperties,a=o==null?void 0:o.floatingTableProperties;if(a&&Object.keys(a).length>0){Wht({block:t,measure:e,columnWidth:n,ensurePage:r,advanceColumn:i,columnX:s});return}const l=Fht(t),c=l>0?cA(e.rows,0,l):0;let u=r();const d=u.contentBottom-u.cursorY,f=u.page.fragments.length>0;if(e.rows.length>0&&t.rows.length>0&&f){const k=((T=(x=(A=t.rows[0])==null?void 0:A.attrs)==null?void 0:x.tableRowProperties)==null?void 0:T.cantSplit)===!0,_=((R=e.rows[0])==null?void 0:R.height)??e.totalHeight??0,N=sxe(t.rows[0],e.rows[0]),L=_<=u.contentBottom;if(k||N&&L)_>d&&(u=i(u));else{const C=uA(0,t.rows[0],e,d),D=C.toLineByCell.some(($,U)=>$>(C.fromLineByCell[U]||0)),O=C.partialHeight>0;(!D||!O)&&(u=i(u))}}else if(f){let k=0;e.rows.length>0?k=cA(e.rows,0,1):e.totalHeight>0&&(k=e.totalHeight),k>d&&(u=i(u))}let m=0,y=!1,w=null;if(t.rows.length===0&&e.totalHeight>0){const k=Math.min(e.totalHeight,u.contentBottom-u.cursorY),_={columnBoundaries:mM(e),coordinateSystem:"fragment"},N=s(u.columnIndex),L=Math.min(n,e.totalWidth||n),{x:M,width:C}=fS(N,n,L,t.attrs),D={kind:"table",blockId:t.id,fromRow:0,toRow:0,x:M,y:u.cursorY,width:C,height:k,metadata:_};Gv(D,t,e),u.page.fragments.push(D),u.cursorY+=k;return}for(;m<t.rows.length||w!==null;){u=r();const k=u.contentBottom-u.cursorY;let _=0;m===0&&!w?_=0:l>0&&c<=k?_=l:l>0&&c>k&&(_=0);const N=_>0?k-c:k,L=u.contentBottom;if(w!==null){const Q=w.rowIndex,J=w.toLineByCell,K=uA(Q,t.rows[Q],e,N,J),re=K.toLineByCell.some((z,de)=>z>(J[de]||0)),X=K.toLineByCell.some((z,de)=>{const Y=PI(e.rows[Q].cells[de]);return z<Y}),me=J.some((z,de)=>{const Y=PI(e.rows[Q].cells[de]);return z<Y}),G=K.partialHeight+(_>0?c:0);if(G>0&&re){const z=s(u.columnIndex),de=Math.min(n,e.totalWidth||n),{x:Y,width:ee}=fS(z,n,de,t.attrs),ae={kind:"table",blockId:t.id,fromRow:Q,toRow:Q+1,x:Y,y:u.cursorY,width:ee,height:G,continuesFromPrev:!0,continuesOnNext:X||Q+1<t.rows.length,repeatHeaderCount:_,partialRow:K,metadata:O9(e)};Gv(ae,t,e),u.page.fragments.push(ae),u.cursorY+=G}!X?(m=Q+1,w=null):!re&&me?u=i(u):w=K,y=!0;continue}const M=m,{endRow:C,partialRow:D}=Uht(t,e,M,N,L);if(C===M&&D===null&&u.page.fragments.length>0){u=i(u);continue}if(C===M&&D===null){const Q=uA(M,t.rows[M],e,N),J=M+1,K=Q.partialHeight+(_>0?c:0),re=s(u.columnIndex),X=Math.min(n,e.totalWidth||n),{x:me,width:G}=fS(re,n,X,t.attrs),B={kind:"table",blockId:t.id,fromRow:M,toRow:J,x:me,y:u.cursorY,width:G,height:K,continuesFromPrev:y,continuesOnNext:!Q.isLastPart||J<t.rows.length,repeatHeaderCount:_,partialRow:Q,metadata:O9(e)};Gv(B,t,e),u.page.fragments.push(B),u.cursorY+=K,w=Q,y=!0;continue}let O;D?O=cA(e.rows,M,C-1)+D.partialHeight+(_>0?c:0):O=Bht({fromRow:M,toRow:C,repeatHeaderCount:_},e);const $=s(u.columnIndex),U=Math.min(n,e.totalWidth||n),{x:W,width:ce}=fS($,n,U,t.attrs),se={kind:"table",blockId:t.id,fromRow:M,toRow:C,x:W,y:u.cursorY,width:ce,height:O,continuesFromPrev:y,continuesOnNext:C<t.rows.length||(D?!D.isLastPart:!1),repeatHeaderCount:_,partialRow:D||void 0,metadata:O9(e)};Gv(se,t,e),u.page.fragments.push(se),u.cursorY+=O,D&&!D.isLastPart?(w=D,m=D.rowIndex):(m=C,w=null),y=!0}}function Ght(t,e,n,r){const i={columnBoundaries:mM(e),coordinateSystem:"fragment"},s={kind:"table",blockId:t.id,fromRow:0,toRow:t.rows.length,x:n,y:r,width:e.totalWidth??0,height:e.totalHeight??0,metadata:i};return Gv(s,t,e),s}function oxe(t){var n;const e=(n=t.anchor)==null?void 0:n.vRelativeFrom;return e==="margin"||e==="page"}function Kht(t,e){var i;const n=[],r=Math.min(t.length,e.length);for(let s=0;s<r;s+=1){const o=t[s],a=e[s],l=o.kind==="image"&&(a==null?void 0:a.kind)==="image",c=o.kind==="drawing"&&(a==null?void 0:a.kind)==="drawing";if(!l&&!c)continue;const u=o,d=a;(i=u.anchor)!=null&&i.isAnchored&&oxe(u)&&n.push({block:u,measure:d})}return n}function Xht(t,e){var a;const n=new Map,r=Math.min(t.length,e.length),i=new Map;for(let l=0;l<r;l+=1){const c=t[l];c.kind==="paragraph"&&i.set(c.id,l)}const s=l=>{for(let c=l-1;c>=0;c-=1)if(t[c].kind==="paragraph")return c;return null},o=l=>{for(let c=l+1;c<r;c+=1)if(t[c].kind==="paragraph")return c;return null};for(let l=0;l<r;l+=1){const c=t[l],u=e[l],d=c.kind==="image"&&(u==null?void 0:u.kind)==="image",f=c.kind==="drawing"&&(u==null?void 0:u.kind)==="drawing";if(!d&&!f)continue;const h=c,m=u;if(!((a=h.anchor)!=null&&a.isAnchored)||oxe(h))continue;const y=typeof h.attrs=="object"&&h.attrs?h.attrs.anchorParagraphId:void 0;let w=typeof y=="string"?i.get(y)??null:null;if(w==null&&(w=s(l)),w==null&&(w=o(l)),w==null)continue;const b=n.get(w)??[];b.push({block:h,measure:m}),n.set(w,b)}return n}function Yht(t,e){var o;const n=new Map,r=new Map;for(let a=0;a<t.length;a+=1){const l=t[a];l.kind==="paragraph"&&r.set(l.id,a)}const i=a=>{for(let l=a-1;l>=0;l-=1)if(t[l].kind==="paragraph")return l;return null},s=a=>{for(let l=a+1;l<t.length;l+=1)if(t[l].kind==="paragraph")return l;return null};for(let a=0;a<t.length;a+=1){const l=t[a],c=e[a];if(l.kind!=="table"||(c==null?void 0:c.kind)!=="table")continue;const u=l,d=c;if(!((o=u.anchor)!=null&&o.isAnchored))continue;const f=typeof u.attrs=="object"&&u.attrs?u.attrs.anchorParagraphId:void 0;let h=typeof f=="string"?r.get(f)??null:null;if(h==null&&(h=i(a)),h==null&&(h=s(a)),h==null)continue;const m=n.get(h)??[];m.push({block:u,measure:d}),n.set(h,m)}return n}function Zht(t){const e=[],n=[],r=l=>l.activeConstraintIndex>=0&&l.constraintBoundaries[l.activeConstraintIndex]?l.constraintBoundaries[l.activeConstraintIndex].columns:t.getActiveColumns(),i=l=>{const c=t.getCurrentColumns();return t.margins.left+l*(c.width+c.gap)},s=()=>{t.onNewPage&&t.onNewPage(void 0);const l=t.getActiveTopMargin(),c=t.getActiveBottomMargin(),u=t.getActiveHeaderDistance(),d=t.getActiveFooterDistance(),f=t.getActivePageSize(),h=t.getDefaultPageSize(),m=f.h-c;if(m-l<=0)throw new Error("layoutDocument: pageSize and margins yield non-positive content area");const w={top:l,bottom:c,left:t.margins.left,right:t.margins.right,header:u,footer:d},b=f.w!==h.w||f.h!==h.h?f:void 0,E={page:t.createPage(n.length+1,w,b),cursorY:l,columnIndex:0,topMargin:l,contentBottom:m,constraintBoundaries:[],activeConstraintIndex:-1,trailingSpacing:0,lastParagraphStyleId:void 0};return e.push(E),n.push(E.page),t.onNewPage&&t.onNewPage(E),E};return{pages:n,states:e,startNewPage:s,ensurePage:()=>{const l=e[e.length-1];return l||s()},advanceColumn:l=>{const c=r(l);return l.columnIndex<c.count-1?(l.columnIndex+=1,l.activeConstraintIndex>=0&&l.constraintBoundaries[l.activeConstraintIndex]?l.cursorY=l.constraintBoundaries[l.activeConstraintIndex].y:l.cursorY=l.topMargin,l.trailingSpacing=0,l.lastParagraphStyleId=void 0,l):s()},columnX:i,getActiveColumnsForState:r}}function axe(t){if(t<1||t>3999)return String(t);const e=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];let r="",i=t;for(let s=0;s<e.length;s++)for(;i>=e[s];)r+=n[s],i-=e[s];return r}function Jht(t){return axe(t).toLowerCase()}function lxe(t){if(t<1)return"A";let e="",n=t;for(;n>0;){const r=(n-1)%26;e=String.fromCharCode(65+r)+e,n=Math.floor((n-1)/26)}return e}function Qht(t){return lxe(t).toLowerCase()}function cxe(t,e){const n=Math.max(1,t);switch(e){case"decimal":return String(n);case"upperRoman":return axe(n);case"lowerRoman":return Jht(n);case"upperLetter":return lxe(n);case"lowerLetter":return Qht(n);case"numberInDash":return`-${n}-`;default:return String(n)}}function uxe(t,e){var o,a;const n=[];if(t.length===0)return n;const r=new Map;for(const l of e)r.set(l.sectionIndex,l);let i=1,s=-1;for(let l=0;l<t.length;l++){const c=t[l],u=c.sectionIndex??0;if(u!==s){const y=r.get(u);((o=y==null?void 0:y.numbering)==null?void 0:o.start)!==void 0&&(i=y.numbering.start),s=u}const d=r.get(u),f=((a=d==null?void 0:d.numbering)==null?void 0:a.format)??"decimal",h=i,m=cxe(h,f);n.push({physicalPage:c.number,displayNumber:h,displayText:m,sectionIndex:u}),i++}return n}function ept(t,e,n,r){const i=new Set,s=new Map;if(!(t!=null&&t.pages)||t.pages.length===0)return{affectedBlockIds:i,updatedBlocks:s};if(!r||!r.displayPages||r.totalPages<1)return console.warn("[resolvePageTokens] Invalid numbering context - skipping resolution"),{affectedBlockIds:i,updatedBlocks:s};const o=new Map,a=new Map;for(let u=0;u<e.length;u++){const d=e[u];o.set(d.id,d),d.kind==="paragraph"&&d.attrs&&"hasPageTokens"in d.attrs&&a.set(d.id,!!d.attrs.hasPageTokens)}const l=String(r.totalPages),c=new Set;for(const u of t.pages){const d=u.number-1,f=r.displayPages[d];if(!f){console.warn(`[resolvePageTokens] No display page info for page ${u.number} - skipping`);continue}const h=f.displayText;for(const m of u.fragments){if(m.kind!=="para")continue;const y=m.blockId;if(c.has(y)||a.get(y)===!1)continue;const b=o.get(y);if(!b||b.kind!=="paragraph")continue;if(!tpt(b)){c.add(y);continue}const A=npt(b,h,l);s.set(y,A),i.add(y),c.add(y)}}return{affectedBlockIds:i,updatedBlocks:s}}function tpt(t){for(const e of t.runs)if("token"in e&&(e.token==="pageNumber"||e.token==="totalPageCount"))return!0;return!1}function npt(t,e,n){const r=t.runs.map(i=>{if("token"in i&&i.token){if(i.token==="pageNumber"){const{token:s,...o}=i;return{...o,text:e}}else if(i.token==="totalPageCount"){const{token:s,...o}=i;return{...o,text:n}}}return i});return{...t,runs:r}}const dxe=20;function rpt(t){return t.kind==="image"||t.kind==="drawing"||t.kind==="table"}function ipt(t){var r;const e=(r=t.attrs)==null?void 0:r.spacing,n=(e==null?void 0:e.before)??(e==null?void 0:e.lineSpaceBefore);return typeof n=="number"&&Number.isFinite(n)&&n>0?n:0}function spt(t){var r;const e=(r=t.attrs)==null?void 0:r.spacing,n=(e==null?void 0:e.after)??(e==null?void 0:e.lineSpaceAfter);return typeof n=="number"&&Number.isFinite(n)&&n>0?n:0}function yie(t,e){switch(e.kind){case"paragraph":return e.totalHeight;case"table":return e.totalHeight;case"list":return e.totalHeight;case"image":case"drawing":return e.height;case"sectionBreak":case"pageBreak":case"columnBreak":return 0;default:return t.kind==="paragraph"?dxe:0}}const opt={w:612,h:792},dv={top:72,right:72,bottom:72,left:72},apt=1e-4,lpt=typeof _e<"u"&&typeof _e.env<"u"&&!!_e.env.SD_DEBUG_LAYOUT,jr=(...t)=>{lpt&&console.log(...t)};function CB(t,e,n={}){var ct,Ft,tn,Zt,ri,Ne,le,fe,ve,He,Xe,it,Lt,Bt,Wt,Jt,qt,et,Ze,Ue,at,vt,Dt,$t,Hn,dn,bn,sn,Jn,Rn;if(t.length!==e.length)throw new Error(`layoutDocument expected measures for every block (blocks=${t.length}, measures=${e.length})`);const r=n.pageSize??opt,i={top:((ct=n.margins)==null?void 0:ct.top)??dv.top,right:((Ft=n.margins)==null?void 0:Ft.right)??dv.right,bottom:((tn=n.margins)==null?void 0:tn.bottom)??dv.bottom,left:((Zt=n.margins)==null?void 0:Zt.left)??dv.left,header:((ri=n.margins)==null?void 0:ri.header)??((Ne=n.margins)==null?void 0:Ne.top)??dv.top,footer:((le=n.margins)==null?void 0:le.footer)??((fe=n.margins)==null?void 0:fe.bottom)??dv.bottom};if(r.w-(i.left+i.right)<=0)throw new Error("layoutDocument: pageSize and margins yield non-positive content area");const o=lt=>lt===void 0||!Number.isFinite(lt)||lt<0?0:lt,a=n.headerContentHeights,l=n.footerContentHeights,c=n.headerContentHeightsByRId,u=n.footerContentHeightsByRId,d=(lt,jt,cn)=>lt===1&&jt?"first":"default",f=(lt,jt)=>jt&&(c!=null&&c.has(jt))?o(c.get(jt)):a?o(a[lt]):0,h=(lt,jt)=>jt&&(u!=null&&u.has(jt))?o(u.get(jt)):l?o(l[lt]):0,m=(lt,jt,cn)=>lt>0?Math.max(cn,jt+lt):cn,y=(lt,jt,cn)=>lt>0?Math.max(cn,jt+lt):cn,w=a?Math.max(0,o(a.default),o(a.first),o(a.even),o(a.odd)):0,b=l?Math.max(0,o(l.default),o(l.first),o(l.even),o(l.odd)):0,E=i.header??i.top,A=i.footer??i.bottom,x=f("default",void 0),T=h("default",void 0),R=m(x,E,i.top),k=y(T,A,i.bottom);let _=R,N=k,L=i.left,M=i.right,C=null,D=null,O=null,$=null,U=i.top,W=i.bottom,ce=null,se=null,Q=i.header??i.top,J=null,K=i.footer??i.bottom,re=null,X={w:r.w,h:r.h},me=null,G=n.columns??{count:1,gap:0},B=null,z=null,de=null,Y=null,ee=null;const ae={left:L,right:M},ie=xht(jE(G,X.w-(L+M)),{left:L,right:M},X.w),H=Tht(t),be=(lt,jt,cn)=>{var _s,si,gu,rl,ao,eh,Sd,Ad,yu,th,jl,nh,il,tm,Ia,bu,$l,Td,rh,wu,sl,Ra;if(typeof pie=="function")return pie(lt,jt,cn,w,b);const gt={...jt};if((_s=lt.attrs)!=null&&_s.isFirstSection&&!gt.hasAnyPages){lt.pageSize&&(gt.activePageSize={w:lt.pageSize.w,h:lt.pageSize.h},gt.pendingPageSize=null),lt.orientation&&(gt.activeOrientation=lt.orientation,gt.pendingOrientation=null);const ta=typeof((si=lt.margins)==null?void 0:si.header)=="number"?Math.max(0,lt.margins.header):gt.activeHeaderDistance,dr=typeof((gu=lt.margins)==null?void 0:gu.footer)=="number"?Math.max(0,lt.margins.footer):gt.activeFooterDistance,na=typeof((rl=lt.margins)==null?void 0:rl.top)=="number"?Math.max(0,lt.margins.top):cn.top,I0=typeof((ao=lt.margins)==null?void 0:ao.bottom)=="number"?Math.max(0,lt.margins.bottom):cn.bottom;if(((eh=lt.margins)==null?void 0:eh.header)!==void 0&&(gt.activeHeaderDistance=ta,gt.pendingHeaderDistance=ta),((Sd=lt.margins)==null?void 0:Sd.footer)!==void 0&&(gt.activeFooterDistance=dr,gt.pendingFooterDistance=dr),((Ad=lt.margins)==null?void 0:Ad.top)!==void 0||((yu=lt.margins)==null?void 0:yu.header)!==void 0){const Xs=w>0?ta+w:0;gt.activeTopMargin=Math.max(na,Xs),gt.pendingTopMargin=gt.activeTopMargin}if(((th=lt.margins)==null?void 0:th.bottom)!==void 0||((jl=lt.margins)==null?void 0:jl.footer)!==void 0){const Xs=b>0?dr+b:0;gt.activeBottomMargin=Math.max(I0,Xs),gt.pendingBottomMargin=gt.activeBottomMargin}if(((nh=lt.margins)==null?void 0:nh.left)!==void 0){const Xs=Math.max(0,lt.margins.left);gt.activeLeftMargin=Xs,gt.pendingLeftMargin=Xs}if(((il=lt.margins)==null?void 0:il.right)!==void 0){const Xs=Math.max(0,lt.margins.right);gt.activeRightMargin=Xs,gt.pendingRightMargin=Xs}lt.columns&&(gt.activeColumns={count:lt.columns.count,gap:lt.columns.gap},gt.pendingColumns=null),(lt.headerRefs||lt.footerRefs)&&(Re={...lt.headerRefs&&{headerRefs:lt.headerRefs},...lt.footerRefs&&{footerRefs:lt.footerRefs}},jr("[Layout] First section: Scheduled pendingSectionRefs:",Re));const vu=(tm=lt.attrs)==null?void 0:tm.sectionIndex,kd=typeof vu=="number"?vu:Number(vu??NaN);Number.isFinite(kd)&&(Pe=kd);const Ma=Number.isFinite(kd)?ke[kd]:void 0;return Ma!=null&&Ma.numbering&&(Ma.numbering.format&&(oe=Ma.numbering.format),typeof Ma.numbering.start=="number"&&(te=Ma.numbering.start)),{decision:{forcePageBreak:!1,forceMidPageRegion:!1},state:gt}}const Vn=(Ia=lt.margins)==null?void 0:Ia.header,yr=(bu=lt.margins)==null?void 0:bu.footer,Xn=($l=lt.margins)==null?void 0:$l.top,Un=(Td=lt.margins)==null?void 0:Td.bottom,zn=(rh=lt.margins)==null?void 0:rh.left,zt=(wu=lt.margins)==null?void 0:wu.right,pn=gt.pendingTopMargin??gt.activeTopMargin,Nn=gt.pendingBottomMargin??gt.activeBottomMargin,Pr=gt.pendingLeftMargin??gt.activeLeftMargin,gs=gt.pendingRightMargin??gt.activeRightMargin,On=gt.pendingHeaderDistance??gt.activeHeaderDistance,Wr=gt.pendingFooterDistance??gt.activeFooterDistance;if(gt.pendingHeaderDistance=typeof Vn=="number"?Math.max(0,Vn):On,gt.pendingFooterDistance=typeof yr=="number"?Math.max(0,yr):Wr,typeof Vn=="number"||typeof Xn=="number"){const ta=typeof Xn=="number"?Math.max(0,Xn):cn.top,dr=gt.pendingHeaderDistance,na=w>0?dr+w:dr;gt.pendingTopMargin=Math.max(ta,na)}else gt.pendingTopMargin=pn;if(typeof yr=="number"||typeof Un=="number"){const ta=gt.pendingFooterDistance,dr=typeof Un=="number"?Math.max(0,Un):cn.bottom,na=b>0?ta+b:ta;gt.pendingBottomMargin=Math.max(dr,na)}else gt.pendingBottomMargin=Nn;gt.pendingLeftMargin=typeof zn=="number"?Math.max(0,zn):Pr,gt.pendingRightMargin=typeof zt=="number"?Math.max(0,zt):gs,lt.pageSize&&(gt.pendingPageSize={w:lt.pageSize.w,h:lt.pageSize.h}),lt.orientation&&(gt.pendingOrientation=lt.orientation);const mn=lt.type??"continuous",Wi=!!lt.columns&&(lt.columns.count!==gt.activeColumns.count||lt.columns.gap!==gt.activeColumns.gap),ur=(sl=lt.attrs)==null?void 0:sl.sectionIndex,ki=typeof ur=="number"?ur:Number(ur??NaN);Number.isFinite(ki)&&(Ce=ki);const ii=Number.isFinite(ki)?ke[ki]:void 0;return ii!=null&&ii.numbering?ye={...ii.numbering}:lt.numbering&&(ye={...lt.numbering}),(lt.headerRefs||lt.footerRefs)&&(Re={...lt.headerRefs&&{headerRefs:lt.headerRefs},...lt.footerRefs&&{footerRefs:lt.footerRefs}},jr("[Layout] Compat fallback: Scheduled pendingSectionRefs:",Re)),(Ra=lt.attrs)!=null&&Ra.requirePageBoundary?(lt.columns&&(gt.pendingColumns={count:lt.columns.count,gap:lt.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1},state:gt}):mn==="nextPage"?(lt.columns&&(gt.pendingColumns={count:lt.columns.count,gap:lt.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1},state:gt}):mn==="evenPage"?(lt.columns&&(gt.pendingColumns={count:lt.columns.count,gap:lt.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1,requiredParity:"even"},state:gt}):mn==="oddPage"?(lt.columns&&(gt.pendingColumns={count:lt.columns.count,gap:lt.columns.gap}),{decision:{forcePageBreak:!0,forceMidPageRegion:!1,requiredParity:"odd"},state:gt}):Wi?{decision:{forcePageBreak:!1,forceMidPageRegion:!0},state:gt}:(lt.columns&&(gt.pendingColumns={count:lt.columns.count,gap:lt.columns.gap}),{decision:{forcePageBreak:!1,forceMidPageRegion:!1},state:gt})},Te=(lt,jt,cn)=>{const gt={number:lt,fragments:[],margins:jt};return cn&&(gt.size=cn),z&&(gt.orientation=z),Y&&Y!=="top"&&(gt.vAlign=Y),gt};let Z=0,oe="decimal",te=1,ye=null;const ke=n.sectionMetadata??[],we=ke[0];(ve=we==null?void 0:we.numbering)!=null&&ve.format&&(oe=we.numbering.format),typeof((He=we==null?void 0:we.numbering)==null?void 0:He.start)=="number"&&(te=we.numbering.start);let Ae=null,Re=null;(we!=null&&we.headerRefs||we!=null&&we.footerRefs)&&(Ae={...we.headerRefs&&{headerRefs:we.headerRefs},...we.footerRefs&&{footerRefs:we.footerRefs}});let Pe=(we==null?void 0:we.sectionIndex)??0,Ce=null;const Oe=new Map,Fe=Zht({margins:ae,getActiveTopMargin:()=>_,getActiveBottomMargin:()=>N,getActiveHeaderDistance:()=>Q,getActiveFooterDistance:()=>K,getActivePageSize:()=>X,getDefaultPageSize:()=>r,getActiveColumns:()=>G,getCurrentColumns:()=>Ee(),createPage:Te,onNewPage:lt=>{var jt,cn,gt,Vn,yr,Xn,Un;if(!lt){const zn=Ce!==null,zt=kht({activeTopMargin:_,activeBottomMargin:N,activeLeftMargin:L,activeRightMargin:M,pendingTopMargin:C,pendingBottomMargin:D,pendingLeftMargin:O,pendingRightMargin:$,activeHeaderDistance:Q,activeFooterDistance:K,pendingHeaderDistance:J,pendingFooterDistance:re,activePageSize:X,pendingPageSize:me,activeColumns:G,pendingColumns:B,activeOrientation:z,pendingOrientation:de,hasAnyPages:Z>0});_=zt.activeTopMargin,N=zt.activeBottomMargin,L=zt.activeLeftMargin,M=zt.activeRightMargin,C=zt.pendingTopMargin,D=zt.pendingBottomMargin,O=zt.pendingLeftMargin,$=zt.pendingRightMargin,Q=zt.activeHeaderDistance,K=zt.activeFooterDistance,J=zt.pendingHeaderDistance,re=zt.pendingFooterDistance,X=zt.activePageSize,me=zt.pendingPageSize,G=zt.activeColumns,B=zt.pendingColumns,z=zt.activeOrientation,de=zt.pendingOrientation,ne.state=null,ae.left=L,ae.right=M;const pn=X.w-(L+M);ie.setLayoutContext(jE(G,pn),{left:L,right:M},X.w),ye&&(ye.format&&(oe=ye.format),typeof ye.start=="number"&&Number.isFinite(ye.start)&&(te=ye.start),ye=null),Re&&(Ae=Re,Re=null),Ce!==null&&(Pe=Ce,Ce=null),ee!==null&&(Y=ee,ee=null),ce!==null&&(U=ce,ce=null),se!==null&&(W=se,se=null),Z+=1;const Nn=Z;(zn||!Oe.has(Pe))&&Oe.set(Pe,Nn);const Pr=Oe.get(Pe)??Nn,gs=Nn-Pr+1,On=ke[Pe],Wr=(On==null?void 0:On.titlePg)??!1,mn=d(gs,Wr);let Wi=(jt=Ae==null?void 0:Ae.headerRefs)==null?void 0:jt[mn],ur=(cn=Ae==null?void 0:Ae.footerRefs)==null?void 0:cn[mn],ki=mn;if(!Wi&&mn!=="default"&&Pe>0){const si=ke[Pe-1];(gt=si==null?void 0:si.headerRefs)!=null&&gt[mn]&&(Wi=si.headerRefs[mn],jr(`[Layout] Page ${Nn}: Inheriting header '${mn}' from section ${Pe-1}: ${Wi}`))}if(!ur&&mn!=="default"&&Pe>0){const si=ke[Pe-1];(Vn=si==null?void 0:si.footerRefs)!=null&&Vn[mn]&&(ur=si.footerRefs[mn],jr(`[Layout] Page ${Nn}: Inheriting footer '${mn}' from section ${Pe-1}: ${ur}`))}!Wi&&mn!=="default"&&((yr=Ae==null?void 0:Ae.headerRefs)!=null&&yr.default)&&(Wi=Ae.headerRefs.default,ki="default"),!ur&&mn!=="default"&&((Xn=Ae==null?void 0:Ae.footerRefs)!=null&&Xn.default)&&(ur=Ae.footerRefs.default);const ii=f(ki,Wi),_s=h(mn!=="default"&&!((Un=Ae==null?void 0:Ae.footerRefs)!=null&&Un[mn])?"default":mn,ur);_=m(ii,Q,U),N=y(_s,K,W),jr(`[Layout] Page ${Nn}: Using variant '${mn}' - headerHeight: ${ii}, footerHeight: ${_s}`),jr(`[Layout] Page ${Nn}: Adjusted margins - top: ${_}, bottom: ${N} (base: ${U}, ${W})`);return}lt!=null&&lt.page&&(lt.page.numberText=cxe(te,oe),lt.page.sectionIndex=Pe,jr(`[Layout] Page ${lt.page.number}: Stamped sectionIndex:`,Pe),Ae?(lt.page.sectionRefs={...Ae.headerRefs&&{headerRefs:Ae.headerRefs},...Ae.footerRefs&&{footerRefs:Ae.footerRefs}},jr(`[Layout] Page ${lt.page.number}: Stamped sectionRefs:`,lt.page.sectionRefs)):jr(`[Layout] Page ${lt.page.number}: No activeSectionRefs to stamp`),te+=1)}}),$e=Fe.pages,he=Fe.states,q=Fe.getActiveColumnsForState;let ne={state:null,constraintIndex:-2,contentWidth:-1,colsConfig:null,normalized:null};const Ee=()=>{var yr,Xn;const lt=X.w-(L+M),jt=he[he.length-1]??null,cn=jt?q(jt):G,gt=jt?jt.activeConstraintIndex:-1;if(ne.state===jt&&ne.constraintIndex===gt&&ne.contentWidth===lt&&((yr=ne.colsConfig)==null?void 0:yr.count)===cn.count&&((Xn=ne.colsConfig)==null?void 0:Xn.gap)===cn.gap&&ne.normalized)return ne.normalized;const Vn=jE(cn,lt);return ne={state:jt,constraintIndex:gt,contentWidth:lt,colsConfig:{count:cn.count,gap:cn.gap},normalized:Vn},Vn},Se=Fe.columnX,ze=Fe.advanceColumn,Ie=(lt,jt)=>{const cn={y:lt.cursorY,columns:jt};lt.constraintBoundaries.push(cn),lt.activeConstraintIndex=lt.constraintBoundaries.length-1,lt.columnIndex=0,jr("[Layout] *** COLUMNS CHANGED MID-PAGE ***"),jr(`  OLD activeColumns: ${JSON.stringify(G)}`),jr(`  NEW activeColumns: ${JSON.stringify(jt)}`),jr(`  Current page: ${lt.page.number}, cursorY: ${lt.cursorY}`),G=jt,ne.state=null;const gt=X.w-(L+M);ie.setLayoutContext(jE(G,gt),{left:L,right:M},X.w)},qe=Xht(t,e),Ye=Yht(t,e),ft=new Set,We=new Set,nt=Kht(t,e),bt=new Map;for(const lt of nt){const jt=Fe.ensurePage(),cn=((Xe=lt.block.anchor)==null?void 0:Xe.vRelativeFrom)??"paragraph",gt=((it=lt.block.anchor)==null?void 0:it.alignV)??"top",Vn=((Lt=lt.block.anchor)==null?void 0:Lt.offsetV)??0,yr=lt.measure.height??0,Xn=jt.topMargin,Un=jt.contentBottom,zn=Math.max(0,Un-Xn);let zt;cn==="margin"?gt==="top"?zt=Xn+Vn:gt==="bottom"?zt=Un-yr+Vn:gt==="center"?zt=Xn+(zn-yr)/2+Vn:zt=Xn+Vn:cn==="page"?gt==="top"?zt=Vn:gt==="bottom"?zt=Un+(((Bt=jt.page.margins)==null?void 0:Bt.bottom)??N)-yr+Vn:gt==="center"?zt=(Un+(((Wt=jt.page.margins)==null?void 0:Wt.bottom)??N)-yr)/2+Vn:zt=Vn:zt=Xn+Vn;const pn=lt.block.anchor?GU(lt.block.anchor,jt.columnIndex,jE(G,X.w-(L+M)),lt.measure.width,{left:L,right:M},X.w):L;ie.registerDrawing(lt.block,lt.measure,zt,jt.columnIndex,jt.page.number),bt.set(lt.block.id,{anchorX:pn,anchorY:zt,pageNumber:jt.page.number})}for(let lt=0;lt<t.length;lt+=1){const jt=t[lt],cn=e[lt];if(!cn)throw new Error(`layoutDocument: missing measure for block ${jt.id}`);if(jr(`[Layout] Block ${lt} (${jt.kind}) - ID: ${jt.id}`),jr(`  activeColumns: ${JSON.stringify(G)}`),jr(`  pendingColumns: ${JSON.stringify(B)}`),jt.kind==="sectionBreak"){const gt=jt;jr(`  sectionBreak.columns: ${JSON.stringify(gt.columns)}`),jr(`  sectionBreak.type: ${gt.type}`)}if(jt.kind==="sectionBreak"){if(cn.kind!=="sectionBreak")throw new Error(`layoutDocument: expected sectionBreak measure for block ${jt.id}`);let gt=jt;const Vn=H.get(lt),yr=typeof((Jt=gt.attrs)==null?void 0:Jt.sectionIndex)=="number";Vn&&((qt=gt.attrs)==null?void 0:qt.source)==="sectPr"&&!yr&&Vn&&(gt={...gt,margins:Vn.margins?{...gt.margins??{},...Vn.margins}:gt.margins??{},pageSize:Vn.pageSize??gt.pageSize,columns:Vn.columns??gt.columns,orientation:Vn.orientation??gt.orientation,vAlign:Vn.vAlign??gt.vAlign});const Xn={activeTopMargin:_,activeBottomMargin:N,activeLeftMargin:L,activeRightMargin:M,pendingTopMargin:C,pendingBottomMargin:D,pendingLeftMargin:O,pendingRightMargin:$,activeHeaderDistance:Q,activeFooterDistance:K,pendingHeaderDistance:J,pendingFooterDistance:re,activePageSize:X,pendingPageSize:me,activeColumns:G,pendingColumns:B,activeOrientation:z,pendingOrientation:de,hasAnyPages:he.length>0},Un=be(gt,Xn,{top:i.top,bottom:i.bottom}),zn=Un.decision,zt=Un.state??Xn;jr("[Layout] ========== SECTION BREAK SCHEDULED =========="),jr(`  Block index: ${lt}`),jr(`  effectiveBlock.columns: ${JSON.stringify(gt.columns)}`),jr(`  effectiveBlock.type: ${gt.type}`),jr(`  breakInfo.forcePageBreak: ${zn.forcePageBreak}`),jr(`  breakInfo.forceMidPageRegion: ${zn.forceMidPageRegion}`),jr(`  BEFORE: activeColumns = ${JSON.stringify(Xn.activeColumns)}, pendingColumns = ${JSON.stringify(Xn.pendingColumns)}`),jr(`  AFTER: activeColumns = ${JSON.stringify(zt.activeColumns)}, pendingColumns = ${JSON.stringify(zt.pendingColumns)}`),jr("[Layout] ========== END SECTION BREAK =========="),_=zt.activeTopMargin,N=zt.activeBottomMargin,L=zt.activeLeftMargin,M=zt.activeRightMargin,C=zt.pendingTopMargin,D=zt.pendingBottomMargin,O=zt.pendingLeftMargin,$=zt.pendingRightMargin,Q=zt.activeHeaderDistance,K=zt.activeFooterDistance,J=zt.pendingHeaderDistance,re=zt.pendingFooterDistance,X=zt.activePageSize,me=zt.pendingPageSize,G=zt.activeColumns,B=zt.pendingColumns,z=zt.activeOrientation,de=zt.pendingOrientation;const pn=((et=gt.attrs)==null?void 0:et.isFirstSection)&&he.length===0,Nn=(Ze=gt.margins)==null?void 0:Ze.top,Pr=(Ue=gt.margins)==null?void 0:Ue.bottom;pn?(U=typeof Nn=="number"?Nn:i.top,W=typeof Pr=="number"?Pr:i.bottom):(Nn!==void 0||Pr!==void 0)&&(Nn!==void 0&&(ce=typeof Nn=="number"?Nn:i.top),Pr!==void 0&&(se=typeof Pr=="number"?Pr:i.bottom)),gt.vAlign&&(((at=gt.attrs)==null?void 0:at.isFirstSection)&&he.length===0?(Y=gt.vAlign,ee=null):ee=gt.vAlign),(gt.headerRefs||gt.footerRefs)&&(Re={...gt.headerRefs&&{headerRefs:gt.headerRefs},...gt.footerRefs&&{footerRefs:gt.footerRefs}},jr("[Layout] After scheduleSectionBreakCompat: Scheduled pendingSectionRefs:",Re));const gs=(vt=gt.attrs)==null?void 0:vt.sectionIndex,On=typeof gs=="number"?gs:Number(gs??NaN);Number.isFinite(On)&&(pn?Pe=On:Ce=On);const Wr=Number.isFinite(On)?ke[On]:void 0;if(Wr!=null&&Wr.numbering?pn?(Wr.numbering.format&&(oe=Wr.numbering.format),typeof Wr.numbering.start=="number"&&(te=Wr.numbering.start)):ye={...Wr.numbering}:gt.numbering&&(pn?(gt.numbering.format&&(oe=gt.numbering.format),typeof gt.numbering.start=="number"&&(te=gt.numbering.start)):ye={...gt.numbering}),zn.forceMidPageRegion&&jt.columns){let mn=Fe.ensurePage();const Wi=mn.columnIndex,ur=jt.columns.count,ki=typeof ur=="number"&&Number.isFinite(ur)&&ur>0?Math.max(1,Math.floor(ur)):1,ii=jt.columns.gap,_s=typeof ii=="number"&&Number.isFinite(ii)&&ii>=0?Math.max(0,ii):0,si={count:ki,gap:_s};Wi>=si.count&&(mn=Fe.startNewPage()),Ie(mn,si)}if(zn.forcePageBreak){let mn=Fe.ensurePage();if(mn.page.fragments.length>0&&(jr("[Layout] Starting new page due to section break (forcePageBreak=true)"),jr(`  Before: activeColumns = ${JSON.stringify(G)}, pendingColumns = ${JSON.stringify(B)}`),mn=Fe.startNewPage(),jr(`  After page ${mn.page.number} created: activeColumns = ${JSON.stringify(G)}, pendingColumns = ${JSON.stringify(B)}`)),zn.requiredParity){const ur=mn.page.number%2===0,ki=zn.requiredParity==="even";(ki&&!ur||!ki&&ur)&&(jr(`[Layout] Inserting blank page for parity (need ${zn.requiredParity})`),mn=Fe.startNewPage())}}continue}if(jt.kind==="paragraph"){if(cn.kind!=="paragraph")throw new Error(`layoutDocument: expected paragraph measure for block ${jt.id}`);const gt=jt;if(!gt.runs||gt.runs.length===0||gt.runs.length===1&&(!gt.runs[0].kind||gt.runs[0].kind==="text")&&(!gt.runs[0].text||gt.runs[0].text==="")){const Un=lt>0?t[lt-1]:null,zn=lt<t.length-1?t[lt+1]:null;if((Un==null?void 0:Un.kind)==="pageBreak"&&(zn==null?void 0:zn.kind)==="sectionBreak")continue}const yr=qe.get(lt),Xn=Ye.get(lt);if(Xn){const Un=Fe.ensurePage();for(const{block:zn,measure:zt}of Xn){if(We.has(zn.id))continue;ie.registerTable(zn,zt,Un.cursorY,Un.columnIndex,Un.page.number);const pn=((Dt=zn.anchor)==null?void 0:Dt.offsetH)??Se(Un.columnIndex),Nn=Un.cursorY+((($t=zn.anchor)==null?void 0:$t.offsetV)??0),Pr=Ght(zn,zt,pn,Nn);Un.page.fragments.push(Pr),We.add(zn.id)}}if(((Hn=gt.attrs)==null?void 0:Hn.keepNext)===!0){const Un=t[lt+1],zn=e[lt+1];if(Un&&zn&&Un.kind!=="sectionBreak"&&Un.kind!=="pageBreak"&&Un.kind!=="columnBreak"&&!(Un.kind==="table"&&((dn=Un.anchor)==null?void 0:dn.isAnchored)===!0)){let pn=Fe.ensurePage();const Nn=pn.contentBottom-pn.cursorY,Pr=spt(gt),gs=yie(gt,cn),On=yie(Un,zn),Wr=Un.kind==="paragraph"&&zn.kind==="paragraph",mn=Wr?ipt(Un):0,Wi=(()=>{var ii;if(!Wr)return On;const ki=(ii=zn.lines[0])==null?void 0:ii.lineHeight;return typeof ki=="number"&&Number.isFinite(ki)&&ki>0?ki:On})();(Wr?gs+Math.max(Pr,mn)+Wi:gs+Pr+On)>Nn&&pn.page.fragments.length>0&&(pn=Fe.advanceColumn(pn))}}Rht({block:jt,measure:cn,columnWidth:Ee().width,ensurePage:Fe.ensurePage,advanceColumn:Fe.advanceColumn,columnX:Se,floatManager:ie,remeasureParagraph:n.remeasureParagraph},yr?{anchoredDrawings:yr,pageWidth:X.w,pageMargins:{top:_,bottom:N,left:L,right:M},columns:Ee(),placedAnchoredIds:ft}:void 0);continue}if(jt.kind==="image"){if(cn.kind!=="image")throw new Error(`layoutDocument: expected image measure for block ${jt.id}`);const gt=bt.get(jt.id);if(gt&&Number.isFinite(gt.anchorX)&&Number.isFinite(gt.anchorY)&&Number.isFinite(gt.pageNumber)){const Vn=Fe.ensurePage(),yr=jt,Xn=cn,Un=Math.max(0,Vn.contentBottom-Vn.topMargin),zn=((bn=yr.anchor)==null?void 0:bn.hRelativeFrom)??"column",zt=Ee();let pn;zn==="page"?pn=zt.count===1?X.w-(L+M):X.w:zn==="margin"?pn=X.w-(L+M):pn=zt.width;const Nn=Xn.width>0&&Xn.height>0?Xn.width/Xn.height:1,Pr=20,gs=Pr/Nn,On={originalWidth:Xn.width,originalHeight:Xn.height,maxWidth:pn,maxHeight:Un,aspectRatio:Nn,minWidth:Pr,minHeight:gs},Wr={kind:"image",blockId:yr.id,x:gt.anchorX,y:gt.anchorY,width:Xn.width,height:Xn.height,isAnchored:!0,zIndex:(sn=yr.anchor)!=null&&sn.behindDoc?0:1,metadata:On},mn=yr.attrs;(mn==null?void 0:mn.pmStart)!=null&&(Wr.pmStart=mn.pmStart),(mn==null?void 0:mn.pmEnd)!=null&&(Wr.pmEnd=mn.pmEnd),Vn.page.fragments.push(Wr),ft.add(yr.id);continue}Mht({block:jt,measure:cn,columns:Ee(),ensurePage:Fe.ensurePage,advanceColumn:Fe.advanceColumn,columnX:Se});continue}if(jt.kind==="drawing"){if(cn.kind!=="drawing")throw new Error(`layoutDocument: expected drawing measure for block ${jt.id}`);Lht({block:jt,measure:cn,columns:Ee(),ensurePage:Fe.ensurePage,advanceColumn:Fe.advanceColumn,columnX:Se});continue}if(jt.kind==="table"){if(cn.kind!=="table")throw new Error(`layoutDocument: expected table measure for block ${jt.id}`);qht({block:jt,measure:cn,columnWidth:Ee().width,ensurePage:Fe.ensurePage,advanceColumn:Fe.advanceColumn,columnX:Se});continue}if(jt.kind==="pageBreak"){if(cn.kind!=="pageBreak")throw new Error(`layoutDocument: expected pageBreak measure for block ${jt.id}`);Fe.startNewPage();continue}if(jt.kind==="columnBreak"){if(cn.kind!=="columnBreak")throw new Error(`layoutDocument: expected columnBreak measure for block ${jt.id}`);const gt=Fe.ensurePage(),Vn=q(gt);gt.columnIndex<Vn.count-1?ze(gt):Fe.startNewPage();continue}throw new Error(`layoutDocument: unsupported block kind for ${jt.id}`)}for(;$e.length>0&&$e[$e.length-1].fragments.length===0;)$e.pop();for(const lt of $e){if(!lt.vAlign||lt.vAlign==="top"||lt.fragments.length===0)continue;const jt=lt.size??r,cn=((Jn=lt.margins)==null?void 0:Jn.top)??i.top,Vn=jt.h-(((Rn=lt.margins)==null?void 0:Rn.bottom)??i.bottom)-cn;let yr=1/0,Xn=-1/0;for(const pn of lt.fragments){pn.y<yr&&(yr=pn.y);let Nn=pn.y;if(rpt(pn))Nn+=pn.height;else{const Pr=pn.toLine-pn.fromLine;Nn+=Pr*dxe}Nn>Xn&&(Xn=Nn)}const Un=Xn-yr,zn=Vn-Un;if(zn<=0)continue;let zt=0;if(lt.vAlign==="center"?zt=zn/2:lt.vAlign==="bottom"?zt=zn:lt.vAlign==="both"&&(zt=zn/2),zt>0)for(const pn of lt.fragments)pn.y+=zt}return{pageSize:r,pages:$e,columns:G.count>1?{count:G.count,gap:G.gap}:void 0}}function Kv(t,e,n){var d,f,h,m,y,w;if(t.length!==e.length)throw new Error(`layoutHeaderFooter expected measures for every block (blocks=${t.length}, measures=${e.length})`);const r=Number(n==null?void 0:n.width),i=Number(n==null?void 0:n.height);if(!Number.isFinite(r)||r<=0)throw new Error("layoutHeaderFooter: width must be positive");if(!Number.isFinite(i)||i<=0)return{pages:[],height:0};const s=((d=n.margins)==null?void 0:d.left)??0,o=s>0?t.map(b=>{var A;return(b.kind==="image"||b.kind==="drawing")&&((A=b.anchor)==null?void 0:A.hRelativeFrom)==="page"&&b.anchor.offsetH!=null?{...b,anchor:{...b.anchor,offsetH:b.anchor.offsetH-s}}:b}):t,a=CB(o,e,{pageSize:{w:r,h:i},margins:{top:0,right:0,bottom:0,left:0}}),l=new Map;for(let b=0;b<t.length;b+=1)l.set(t[b].id,b);let c=0,u=0;for(const b of a.pages)for(const E of b.fragments){const A=l.get(E.blockId);if(A==null)continue;const x=t[A],T=e[A];if((E.kind==="image"||E.kind==="drawing")&&E.isAnchored===!0){if(x.kind!=="image"&&x.kind!=="drawing")throw new Error(`Type mismatch: fragment kind is ${E.kind} but block kind is ${x.kind} for block ${x.id}`);if((f=x.anchor)!=null&&f.behindDoc)continue}E.y<c&&(c=E.y);let k=E.y;if(E.kind==="para"&&(T==null?void 0:T.kind)==="paragraph"){let _=0;for(let L=E.fromLine;L<E.toLine;L+=1)_+=((h=T.lines[L])==null?void 0:h.lineHeight)??0;k+=_;const N=(y=(m=x==null?void 0:x.attrs)==null?void 0:m.spacing)==null?void 0:y.after;N&&E.toLine===T.lines.length&&(k+=Math.max(0,Number(N)))}else if(E.kind==="image"){const _=typeof E.height=="number"?E.height:(T==null?void 0:T.height)??0;k+=_}else if(E.kind==="drawing"){const _=typeof E.height=="number"?E.height:(T==null?void 0:T.height)??0;k+=_}else if(E.kind==="list-item"){const _=T;if(_){const N=_.items.find(L=>L.itemId===E.itemId);if(N!=null&&N.paragraph){let L=0;for(let M=E.fromLine;M<E.toLine;M+=1)L+=((w=N.paragraph.lines[M])==null?void 0:w.lineHeight)??0;k+=L}}}k>u&&(u=k)}return{height:u-c,minY:c,maxY:u,pages:a.pages.map(b=>({number:b.number,fragments:b.fragments}))}}function jE(t,e){const n=Number.isFinite(t==null?void 0:t.count)?Math.floor(t.count):1,r=Math.max(1,n||1),i=Math.max(0,(t==null?void 0:t.gap)??0),s=i*(r-1),o=(e-s)/r;return o<=apt?{count:1,gap:0,width:e}:{count:r,gap:i,width:o}}const _B=t=>"trackedChange"in t&&t.trackedChange!==void 0&&t.trackedChange!==null,NB=(t,e=!0)=>!t||!("trackedChangesEnabled"in t)?e:t.trackedChangesEnabled!==!1,B5=t=>{const e=[];return t.style!==void 0&&e.push(`s:${t.style}`),t.width!==void 0&&e.push(`w:${t.width}`),t.color!==void 0&&e.push(`c:${t.color}`),t.space!==void 0&&e.push(`sp:${t.space}`),e.join(",")},bie=t=>{const e=[];return t.top&&e.push(`t:[${B5(t.top)}]`),t.right&&e.push(`r:[${B5(t.right)}]`),t.bottom&&e.push(`b:[${B5(t.bottom)}]`),t.left&&e.push(`l:[${B5(t.left)}]`),e.join(";")};function cpt(t){return typeof t=="object"&&t!==null&&"none"in t&&t.none===!0}function upt(t){return typeof t=="object"&&t!==null&&!("none"in t)}const hS=t=>{const e=[];return t.style!==void 0&&e.push(`s:${t.style}`),t.width!==void 0&&e.push(`w:${t.width}`),t.color!==void 0&&e.push(`c:${t.color}`),t.space!==void 0&&e.push(`sp:${t.space}`),e.join(",")},fv=t=>t===void 0?"":t===null?"null":cpt(t)?"none":upt(t)?hS(t):"",dpt=t=>{if(!t)return"";const e=[];return t.top!==void 0&&e.push(`t:[${fv(t.top)}]`),t.right!==void 0&&e.push(`r:[${fv(t.right)}]`),t.bottom!==void 0&&e.push(`b:[${fv(t.bottom)}]`),t.left!==void 0&&e.push(`l:[${fv(t.left)}]`),t.insideH!==void 0&&e.push(`ih:[${fv(t.insideH)}]`),t.insideV!==void 0&&e.push(`iv:[${fv(t.insideV)}]`),e.join(";")},fpt=t=>{if(!t)return"";const e=[];return t.top&&e.push(`t:[${hS(t.top)}]`),t.right&&e.push(`r:[${hS(t.right)}]`),t.bottom&&e.push(`b:[${hS(t.bottom)}]`),t.left&&e.push(`l:[${hS(t.left)}]`),e.join(";")};function hpt(t){return"comments"in t&&Array.isArray(t.comments)&&t.comments.length>0}const P9=1e4,wie=5e3,ppt=t=>{const e=[];return t.wrap!==void 0&&e.push(`w:${t.wrap}`),t.x!==void 0&&e.push(`x:${t.x}`),t.y!==void 0&&e.push(`y:${t.y}`),t.xAlign!==void 0&&e.push(`xa:${t.xAlign}`),t.yAlign!==void 0&&e.push(`ya:${t.yAlign}`),t.hAnchor!==void 0&&e.push(`ha:${t.hAnchor}`),t.vAnchor!==void 0&&e.push(`va:${t.vAnchor}`),e.join(",")},mpt=t=>{var o;if(t.kind==="table"){const a=t,l=[];if(!a.rows)return`${t.id}:table:`;for(const d of a.rows)if(d.cells)for(const f of d.cells){if(f.attrs){const m=f.attrs,y=[];if(m.borders&&y.push(`cb:${fpt(m.borders)}`),m.padding){const w=m.padding;y.push(`cp:${w.top??0}:${w.right??0}:${w.bottom??0}:${w.left??0}`)}m.verticalAlign&&y.push(`va:${m.verticalAlign}`),m.background&&y.push(`bg:${m.background}`),y.length>0&&l.push(`ca:${y.join(":")}`)}const h=f.blocks??(f.paragraph?[f.paragraph]:[]);for(const m of h){const y=m;if(y.runs){for(const w of y.runs){const b="text"in w&&typeof w.text=="string"?w.text:"",E="bold"in w?w.bold:!1,A="italic"in w?w.italic:!1,x="color"in w?w.color:void 0,T="fontSize"in w?w.fontSize:void 0,R="fontFamily"in w?w.fontFamily:void 0,k="highlight"in w?w.highlight:void 0,_=[E?"b":"",A?"i":"",x??"",T!==void 0?`fs:${T}`:"",R?`ff:${R}`:"",k?`hl:${k}`:""].join(""),N=hpt(w)?w.comments.map(C=>`${C.commentId??""}:${C.internal?"1":"0"}`).join("|"):"";let L="";if(_B(w)){const C=w.trackedChange,D=C.before?JSON.stringify(C.before):"",O=C.after?JSON.stringify(C.after):"";L=`|tc:${C.kind??""}:${C.id??""}:${C.author??""}:${C.date??""}:${D}:${O}`}const M=N?`|cm:${N}`:"";l.push(`${b}:${_}${L}${M}`)}if(y.attrs){const w=y.attrs,b=[];if(w.alignment&&b.push(`al:${w.alignment}`),w.spacing){const E=w.spacing;E.before!==void 0&&b.push(`sb:${E.before}`),E.after!==void 0&&b.push(`sa:${E.after}`),E.line!==void 0&&b.push(`sl:${E.line}`),E.lineRule&&b.push(`sr:${E.lineRule}`)}if(w.indent){const E=w.indent;E.left!==void 0&&b.push(`il:${E.left}`),E.right!==void 0&&b.push(`ir:${E.right}`),E.firstLine!==void 0&&b.push(`if:${E.firstLine}`),E.hanging!==void 0&&b.push(`ih:${E.hanging}`)}if(w.borders&&b.push(`br:${bie(w.borders)}`),w.shading){const E=w.shading;E.fill&&b.push(`shf:${E.fill}`),E.color&&b.push(`shc:${E.color}`)}w.direction&&b.push(`dir:${w.direction}`),w.rtl&&b.push("rtl"),b.length>0&&l.push(`pa:${b.join(":")}`)}}}}let c="";if(a.attrs){const d=a.attrs,f=[];d.borders&&f.push(`tb:${dpt(d.borders)}`),d.borderCollapse&&f.push(`bc:${d.borderCollapse}`),d.cellSpacing!==void 0&&f.push(`cs:${d.cellSpacing}`),f.length>0&&(c=`|ta:${f.join(":")}`)}const u=l.join("|");return`${t.id}:table:${u}${c}`}if(t.kind!=="paragraph")return t.id;const e=t.attrs&&"trackedChangesMode"in t.attrs&&t.attrs.trackedChangesMode||"review",n=NB(t.attrs,!0),r=t.runs.map(a=>{if(a.kind==="image"){const b=a;return`img:${b.src.slice(0,50)}:${b.width}x${b.height}`}const l="src"in a||a.kind==="lineBreak"||a.kind==="break"||a.kind==="fieldAnnotation"?"":a.text??"",c="bold"in a?a.bold:!1,u="italic"in a?a.italic:!1,d="color"in a?a.color:void 0,f="fontSize"in a?a.fontSize:void 0,h="fontFamily"in a?a.fontFamily:void 0,m="highlight"in a?a.highlight:void 0,y=[c?"b":"",u?"i":"",d??"",f!==void 0?`fs:${f}`:"",h?`ff:${h}`:"",m?`hl:${m}`:""].join("");let w="";if(_B(a)){const b=a.trackedChange,E=b.before?JSON.stringify(b.before):"",A=b.after?JSON.stringify(b.after):"";w=`|tc:${b.kind??""}:${b.id??""}:${b.author??""}:${b.date??""}:${E}:${A}`}return`${l}:${y}${w}`}).join("|");let i="";if(t.attrs){const a=t.attrs;if(a.numberingProperties){const l=a.numberingProperties;let c;if(!((o=a.wordLayout)!=null&&o.marker))c="<NULL>";else{const u=a.wordLayout.marker.markerText;c=u===""?"<EMPTY>":u??"<NULL>"}i=`|num:${l.numId??""}:${l.ilvl??0}:${c}`}}let s="";if(t.attrs){const a=t.attrs,l=[];if(a.alignment&&l.push(`al:${a.alignment}`),a.spacing){const c=a.spacing;c.before!==void 0&&l.push(`sb:${c.before}`),c.after!==void 0&&l.push(`sa:${c.after}`),c.line!==void 0&&l.push(`sl:${c.line}`),c.lineRule&&l.push(`sr:${c.lineRule}`)}if(a.indent){const c=a.indent;c.left!==void 0&&l.push(`il:${c.left}`),c.right!==void 0&&l.push(`ir:${c.right}`),c.firstLine!==void 0&&l.push(`if:${c.firstLine}`),c.hanging!==void 0&&l.push(`ih:${c.hanging}`)}if(a.borders&&l.push(`br:${bie(a.borders)}`),a.shading){const c=a.shading;c.fill&&l.push(`shf:${c.fill}`),c.color&&l.push(`shc:${c.color}`)}if(a.tabs&&a.tabs.length>0){const c=a.tabs.map(u=>`${u.val??""}:${u.pos??""}:${u.leader??""}`).join(",");l.push(`tb:${c}`)}if(a.direction&&l.push(`dir:${a.direction}`),a.rtl&&l.push("rtl"),a.keepNext&&l.push("kn"),a.keepLines&&l.push("kl"),a.floatAlignment&&l.push(`fa:${a.floatAlignment}`),a.contextualSpacing&&l.push("cs"),a.suppressFirstLineIndent&&l.push("sfi"),a.dropCap&&l.push(`dc:${a.dropCap}`),a.dropCapDescriptor){const c=a.dropCapDescriptor;l.push(`dcd:${c.mode??""}:${c.lines??""}`)}a.frame&&l.push(`fr:${ppt(a.frame)}`),a.tabIntervalTwips!==void 0&&l.push(`ti:${a.tabIntervalTwips}`),a.decimalSeparator&&l.push(`ds:${a.decimalSeparator}`),l.length>0&&(s=`|pa:${l.join(":")}`)}return`${e}:${n?"on":"off"}|${r}${i}${s}`},vie=()=>({hits:0,misses:0,sets:0,invalidations:0,clears:0,evictions:0,size:0,memorySizeEstimate:0}),xie=1e6;class fxe{constructor(){this.cache=new Map,this.stats=vie()}get(e,n,r){if(!e||!e.id)return;const i=this.composeKey(e,n,r),s=this.cache.get(i);if(s!==void 0)return this.stats.hits+=1,this.cache.delete(i),this.cache.set(i,s),s;this.stats.misses+=1}set(e,n,r,i){if(!e||!e.id)return;const s=this.composeKey(e,n,r);if(this.cache.has(s)&&this.cache.delete(s),this.cache.size>=P9){const o=this.cache.keys().next().value;o!==void 0&&(this.cache.delete(o),this.stats.evictions+=1)}this.cache.set(s,i),this.stats.sets+=1,this.updateSizeStats()}invalidate(e){let n=0;e.forEach(r=>{for(const i of this.cache.keys())i.startsWith(r+"@")&&(this.cache.delete(i),n+=1)}),this.stats.invalidations+=n,this.updateSizeStats()}clear(){this.cache.clear(),this.stats.clears+=1,this.updateSizeStats()}resetStats(){const e=this.cache.size,n=e*wie;this.stats=vie(),this.stats.size=e,this.stats.memorySizeEstimate=n}getStats(){return{...this.stats}}getSize(){return this.cache.size}getMaxSize(){return P9}isNearCapacity(e=.9){return this.cache.size>=P9*e}updateSizeStats(){this.stats.size=this.cache.size,this.stats.memorySizeEstimate=this.cache.size*wie}composeKey(e,n,r){const i=Number.isFinite(n)?Math.max(0,Math.min(Math.floor(n),xie)):0,s=Number.isFinite(r)?Math.max(0,Math.min(Math.floor(r),xie)):0,o=mpt(e);return`${e.id}@${i}x${s}:${o}`}}function Eie(t,e,n,r){if(!t||t.length===0)return;(!Number.isFinite(e)||e<1)&&(console.warn("[resolveHeaderFooterTokens] Invalid pageNumber:",e,"- using 1 as fallback"),e=1),(!Number.isFinite(n)||n<1)&&(console.warn("[resolveHeaderFooterTokens] Invalid totalPages:",n,"- using 1 as fallback"),n=1);const i=r??String(e),s=String(n);for(const o of t){if(o.kind!=="paragraph")continue;const a=o;for(const l of a.runs)"token"in l&&l.token&&(l.token==="pageNumber"?l.text=i:l.token==="totalPageCount"&&(l.text=s))}}function Sie(t){return!t||t.length===0?[]:t.map(e=>{if(e.kind==="paragraph"){const n=e;return{...n,runs:n.runs.map(r=>({...r})),attrs:n.attrs?{...n.attrs}:void 0}}return{...e}})}function J0(t,e){if(typeof _e>"u"||typeof _e.env>"u")return e;const n=_e.env[t];return n==="true"||n==="1"?!0:n==="false"||n==="0"?!1:e}const Ua={NUMBERING_SECTION_AWARE:J0("SD_NUMBERING_SECTION_AWARE",!0),BODY_PAGE_TOKENS:J0("SD_BODY_PAGE_TOKENS",!0),HEADER_FOOTER_PAGE_TOKENS:J0("SD_HEADER_FOOTER_PAGE_TOKENS",!0),HF_DIGIT_BUCKETING:J0("SD_HF_DIGIT_BUCKETING",!0),DEBUG_PAGE_TOKENS:J0("SD_DEBUG_PAGE_TOKENS",!1),DEBUG_HF_CACHE:J0("SD_DEBUG_HF_CACHE",!1),DEBUG_LAYOUT_VERSION:J0("SD_DEBUG_LAYOUT_VERSION",!1)},j5={logIterationStart(t,e){Ua.DEBUG_PAGE_TOKENS&&console.log(`[PageTokens] Iteration ${t}: Resolving tokens for ${e} pages`)},logAffectedBlocks(t,e,n=[]){if(!Ua.DEBUG_PAGE_TOKENS)return;const r=e.size,i=n.slice(0,5).join(", ");console.log(`[PageTokens] Iteration ${t}: ${r} blocks affected`,i?`(samples: ${i})`:"")},logConvergence(t,e,n){Ua.DEBUG_PAGE_TOKENS&&(e?console.log(`[PageTokens] Converged after ${t} iterations in ${n.toFixed(2)}ms`):console.warn(`[PageTokens] Did NOT converge after ${t} iterations (${n.toFixed(2)}ms)`))},logError(t,e){Ua.DEBUG_PAGE_TOKENS&&console.error(`[PageTokens] Error resolving tokens in block ${t}:`,e)},logRemeasure(t,e){Ua.DEBUG_PAGE_TOKENS&&console.log(`[PageTokens] Re-measured ${t} blocks in ${e.toFixed(2)}ms`)}},FI={logCacheHit(t,e,n){Ua.DEBUG_HF_CACHE&&console.log(`[HF Cache] HIT: variant=${t}, page=${e}, bucket=${n}`)},logCacheMiss(t,e,n){Ua.DEBUG_HF_CACHE&&console.log(`[HF Cache] MISS: variant=${t}, page=${e}, bucket=${n}`)},logInvalidation(t,e){Ua.DEBUG_HF_CACHE&&console.log(`[HF Cache] INVALIDATE: reason=${t}, blocks=${e.length}`)},logStats(t){if(!Ua.DEBUG_HF_CACHE)return;const e=t.hits+t.misses>0?(t.hits/(t.hits+t.misses)*100).toFixed(1):"0.0";console.log(`[HF Cache] Stats: hits=${t.hits}, misses=${t.misses}, hitRate=${e}%, size=${t.size}, evictions=${t.evictions}`)},logBucketingDecision(t,e,n){Ua.DEBUG_HF_CACHE&&console.log(e&&n?`[HF Cache] Bucketing enabled: ${t} pages, buckets=${n.join(", ")}`:`[HF Cache] Bucketing disabled: ${t} pages (per-page layouts)`)}};class gpt{constructor(){this.pageTokenMetrics=null,this.headerFooterCacheMetrics=null,this.layoutMetrics=null}recordPageTokenMetrics(e){this.pageTokenMetrics={...e},this.checkPageTokenRollbackTriggers(e)}recordHeaderFooterCacheMetrics(e){const n=e.hits+e.misses>0?e.hits/(e.hits+e.misses)*100:0;this.headerFooterCacheMetrics={hits:e.hits,misses:e.misses,hitRate:n,cacheSize:e.size,memoryEstimate:e.memorySizeEstimate,evictions:e.evictions},this.checkCacheRollbackTriggers(this.headerFooterCacheMetrics)}recordLayoutMetrics(e){this.layoutMetrics={...e}}getMetrics(){return{pageTokens:this.pageTokenMetrics,headerFooterCache:this.headerFooterCacheMetrics,layout:this.layoutMetrics}}reset(){this.pageTokenMetrics=null,this.headerFooterCacheMetrics=null,this.layoutMetrics=null}checkPageTokenRollbackTriggers(e){e.iterations>2&&!e.converged&&console.warn(`[Rollback Trigger] Page token resolution did not converge after ${e.iterations} iterations. Consider disabling SD_BODY_PAGE_TOKENS if this persists.`),e.totalTimeMs>100&&e.iterations>0&&console.warn(`[Rollback Trigger] Page token resolution took ${e.totalTimeMs.toFixed(2)}ms (>100ms threshold). Consider disabling SD_BODY_PAGE_TOKENS if performance is unacceptable.`)}checkCacheRollbackTriggers(e){e.hits+e.misses>10&&e.hitRate<30&&console.warn(`[Rollback Trigger] Header/footer cache hit rate is low (${e.hitRate.toFixed(1)}% < 30%). Consider disabling SD_HF_DIGIT_BUCKETING if cache thrashing persists.`),e.memoryEstimate>1e6&&console.warn(`[Rollback Trigger] Header/footer cache memory usage is high (${(e.memoryEstimate/1e6).toFixed(2)}MB). Monitor for excessive growth.`)}}const Aie=new gpt,ypt=100;function hxe(t){return t<10?"d1":t<100?"d2":t<1e3?"d3":"d4"}function pxe(t){switch(t){case"d1":return 5;case"d2":return 50;case"d3":return 500;case"d4":return 5e3}}function bpt(t){for(const e of t)if(e.kind==="paragraph"){for(const n of e.runs)if("token"in n&&(n.token==="pageNumber"||n.token==="totalPageCount"))return!0}return!1}class mxe{constructor(){this.cache=new fxe}async measureBlocks(e,n,r){const i=[];for(const s of e){const o=this.cache.get(s,n.width,n.height);if(o){i.push(o);continue}const a=await r(s,{maxWidth:n.width,maxHeight:n.height});this.cache.set(s,n.width,n.height,a),i.push(a)}return i}invalidate(e){this.cache.invalidate(e)}getStats(){return this.cache.getStats()}}const wpt=new mxe;async function Xv(t,e,n,r=wpt,i,s){var c,u,d;const o={};if(!s){const f=i??1;for(const[h,m]of Object.entries(t)){if(!m||m.length===0)continue;const y=Sie(m);Eie(y,1,f);const w=await r.measureBlocks(y,e,n),b=Kv(y,w,e);o[h]={blocks:y,measures:w,layout:b}}return o}const{totalPages:a}=s(1),l=Ua.HF_DIGIT_BUCKETING&&a>=ypt;for(const[f,h]of Object.entries(t)){if(!h||h.length===0)continue;if(!bpt(h)){const A=await r.measureBlocks(h,e,n),x=Kv(h,A,e);o[f]={blocks:h,measures:A,layout:x};continue}let y;if(!l)y=Array.from({length:a},(A,x)=>x+1),FI.logBucketingDecision(a,!1);else{const A=new Set;for(let x=1;x<=a;x++)A.add(hxe(x));y=Array.from(A).map(x=>pxe(x)),FI.logBucketingDecision(a,!0,Array.from(A))}const w=[];for(const A of y){const x=Sie(h),{displayText:T,totalPages:R}=s(A);Eie(x,A,R,T);const k=await r.measureBlocks(x,e,n),_=Kv(x,k,e),N=new Map;for(let M=0;M<x.length;M+=1)N.set(x[M].id,k[M]);const L=((c=_.pages[0])==null?void 0:c.fragments.map(M=>{if(M.kind!=="para")return M;const C=N.get(M.blockId);return!C||C.kind!=="paragraph"?M:{...M,lines:C.lines.slice(M.fromLine,M.toLine)}}))??[];w.push({number:A,blocks:x,measures:k,fragments:L})}const b=w[0]?Kv(w[0].blocks,w[0].measures,e):{height:0},E={height:b.height,minY:b.minY,maxY:b.maxY,pages:w.map(A=>({number:A.number,fragments:A.fragments}))};o[f]={blocks:((u=w[0])==null?void 0:u.blocks)??h,measures:((d=w[0])==null?void 0:d.measures)??[],layout:E}}return o}function Tie(t,e){const n=gxe(t,e);if(!n)return null;const{block:r,localPos:i}=n;if(r.kind!=="paragraph")return null;const{text:s,pmStart:o}=XU(r);if(s.length===0)return null;const a=Math.max(0,Math.min(i,s.length));let l=a;for(;l>0&&Cie(s[l-1]);)l--;let c=a;for(;c<s.length&&Cie(s[c]);)c++;if(l===c){for(;l>0&&_ie(s[l-1]);)l--;for(;c<s.length&&_ie(s[c]);)c++;if(l===c)return null}return{from:o+l,to:o+c}}function kie(t,e){const n=gxe(t,e);if(!n)return null;const{block:r}=n;if(r.kind==="paragraph"){const{pmStart:i,pmEnd:s}=XU(r);return{from:i,to:s}}return r.kind==="image"?{from:e,to:e+1}:null}function XU(t){if(t.kind!=="paragraph")return{text:"",pmStart:0,pmEnd:0};let e="",n=1/0,r=0;for(const i of t.runs)e+="src"in i||i.kind==="lineBreak"||i.kind==="break"||i.kind==="fieldAnnotation"?"":i.text,i.pmStart!==void 0&&(n=Math.min(n,i.pmStart)),i.pmEnd!==void 0&&(r=Math.max(r,i.pmEnd));return n===1/0&&(n=0),r===0&&e.length>0&&(r=n+e.length),{text:e,pmStart:n,pmEnd:r}}function gxe(t,e){for(const n of t)if(n.kind==="paragraph"){const{pmStart:r,pmEnd:i}=XU(n);if(e>=r&&e<=i)return{block:n,localPos:e-r}}return null}function Cie(t){return/[\p{L}\p{N}_]/u.test(t)}function _ie(t){return/\s/.test(t)}let Nie=null,$5=null;function yxe(){return $5||(typeof document>"u"?null:(Nie=document.createElement("canvas"),$5=Nie.getContext("2d"),$5))}function BI(t){return!(t.kind==="tab"||t.kind==="lineBreak"||t.kind==="break"||t.kind==="fieldAnnotation"||"src"in t)}function vpt(t){const e=BI(t)?t:null,n=(e==null?void 0:e.fontSize)??16,r=(e==null?void 0:e.fontFamily)??"Arial",i=e!=null&&e.italic?"italic ":"",s=e!=null&&e.bold?"bold ":"";return`${i}${s}${n}px ${r}`.trim()}function IB(t){return"src"in t||t.kind==="lineBreak"||t.kind==="break"||t.kind==="fieldAnnotation"?"":t.text??""}const Iie=t=>{if(!t)return!1;const e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||t==="'"},xpt=(t,e,n)=>{if(!t)return t;const r=typeof n=="number"&&e!=null;let i="";for(let s=0;s<t.length;s+=1){const o=r?n+s>0?e[n+s-1]:"":s>0?t[s-1]:"",a=t[s];i+=Iie(a)&&!Iie(o)?a.toUpperCase():a}return i},Ept=(t,e,n,r)=>!t||!e||e==="none"?t:e==="uppercase"?t.toUpperCase():e==="lowercase"?t.toLowerCase():e==="capitalize"?xpt(t,n,r):t,bxe=720,Spt=1440,Apt=96,wxe=Spt/Apt,Tpt=.1,kpt=.5,vxe=t=>t/wxe,z5=t=>Math.round(t*wxe),Cpt=t=>{const e=(t==null?void 0:t.fontSize)??16,n=(t==null?void 0:t.fontFamily)??"Arial",r=t!=null&&t.italic?"italic ":"",i=t!=null&&t.bold?"bold ":"";return`${r}${i}${e}px ${n}`.trim()},_pt=(t,e,n)=>{const r={left:z5(Math.max(0,(t==null?void 0:t.left)??0)),right:z5(Math.max(0,(t==null?void 0:t.right)??0)),firstLine:z5(Math.max(0,(t==null?void 0:t.firstLine)??0)),hanging:z5(Math.max(0,(t==null?void 0:t.hanging)??0))};return F1e({explicitStops:e??[],defaultTabInterval:n??bxe,paragraphIndent:r}).map(s=>({pos:vxe(s.pos),val:s.val,leader:s.leader}))},Npt=(t,e,n)=>{let r=n;for(;r<e.length&&e[r].pos<=t+Tpt;)r+=1;return r<e.length?{target:e[r].pos,nextIndex:r+1}:{target:t+vxe(bxe),nextIndex:r}};function Ipt(t,e,n){const r=yxe(),i=IB(t),s=BI(t)?t.textTransform:void 0,o=Ept(i.slice(e,n),s,i,e);if(!r){const l=BI(t)?t:null,c=(l==null?void 0:l.fontSize)??16;return Math.max(1,o.length*(c*.6))}return r.font=vpt(t),r.measureText(o).width}function Rpt(t,e,n){let r=0;for(let i=e;i<=n;i+=1){const s=t[i],o=s&&BI(s)?s:null,a=(o==null?void 0:o.fontSize)??16;a>r&&(r=a)}return r*1.2}function Rie(t,e,n=0){var M;if(!Number.isFinite(e)||e<=0)throw new Error(`remeasureParagraph: maxWidth must be a positive number, got ${e}`);if(!Number.isFinite(n))throw new Error(`remeasureParagraph: firstLineIndent must be a finite number, got ${n}`);if(!t)throw new Error("remeasureParagraph: block must be defined");if(!Array.isArray(t.runs))throw new Error(`remeasureParagraph: block.runs must be an array, got ${typeof t.runs}`);const r=t.runs??[],i=[],s=t.attrs,o=s==null?void 0:s.indent,a=s==null?void 0:s.wordLayout,l=Math.max(0,(o==null?void 0:o.left)??0),c=Math.max(0,(o==null?void 0:o.right)??0),u=Math.max(0,(o==null?void 0:o.firstLine)??0),d=Math.max(0,(o==null?void 0:o.hanging)??0),f=Math.max(0,n||u-d),h=Math.max(1,e-l-c),m=(M=a==null?void 0:a.marker)==null?void 0:M.textStartX,y=typeof m=="number"&&Number.isFinite(m)?m:typeof(a==null?void 0:a.textStartPx)=="number"&&Number.isFinite(a.textStartPx)?a.textStartPx:void 0;let w;const E=qU(a,l,u,d,(C,D)=>{const O=yxe();if(!O)return 0;O.font=Cpt(D.run);const $=O.measureText(C).width;return w=$,$})??y,A=!(a!=null&&a.marker)&&E&&l===0&&d===0,x=typeof E=="number"&&E>l&&!A?Math.max(1,e-E-c):Math.max(1,h-f),T=_pt(o,s==null?void 0:s.tabs,s==null?void 0:s.tabIntervalTwips);let R=0,k=0;for(;R<r.length;){const C=i.length===0,D=Math.max(1,C?x:h),O=R,$=k;let U=0,W=-1,ce=-1,se=-1,Q=R,J=k,K=0,re=!1;for(let me=R;me<r.length;me+=1){const G=r[me];if(G.kind==="tab"){const{target:de,nextIndex:Y}=Npt(U,T,K),ee=Math.max(0,de-U);U+=ee,K=Y,Q=me,J=1,ce=me,se=1,W=U;continue}const B=IB(G),z=me===R?k:0;for(let de=z;de<B.length;de+=1){const Y=Ipt(G,de,de+1);if(U+Y>D-kpt&&U>0){ce>=0?(Q=ce,J=se,U=W>=0?W:U):(Q=me,J=de),re=!0;break}U+=Y,Q=me,J=de+1;const ee=B[de];(ee===" "||ee==="	"||ee==="-")&&(ce=me,se=de+1,W=U)}if(re)break}O===Q&&$===J&&(Q=O,J=$+1);const X={fromRun:O,fromChar:$,toRun:Q,toChar:J,width:U,ascent:0,descent:0,lineHeight:Rpt(r,O,Q),maxWidth:D};if(i.push(X),R=Q,k=J,R>=r.length)break;k>=IB(r[R]).length&&(R+=1,k=0)}const _=i.reduce((C,D)=>C+D.lineHeight,0),N=a==null?void 0:a.marker,L=N?{markerWidth:N.markerBoxWidthPx??d??0,markerTextWidth:w??0,indentLeft:l,gutterWidth:N.gutterWidthPx}:void 0;return{kind:"paragraph",lines:i,totalHeight:_,marker:L}}function Mpt(t){return"comments"in t&&Array.isArray(t.comments)&&t.comments.length>0}const Lpt=(t,e)=>{const n=new Map(t.map((u,d)=>[u.id,{block:u,index:d}])),r=new Map(e.map((u,d)=>[u.id,{block:u,index:d}]));let i=e.length,s=-1,o=0,a=0;for(;o<t.length&&a<e.length;){const u=t[o],d=e[a];if(u.id===d.id&&Dpt(u,d)){s=a,o+=1,a+=1;continue}i=Math.min(i,a),r.has(u.id)?(n.has(d.id)&&(o+=1),a+=1):o+=1}const l=e.filter(u=>!n.has(u.id)).map(u=>u.id),c=t.filter(u=>!r.has(u.id)).map(u=>u.id);return i===e.length&&t.length!==e.length&&(i=Math.min(o,a)),{firstDirtyIndex:i===e.length?e.length:i,lastStableIndex:s,insertedBlockIds:l,deletedBlockIds:c}},Dpt=(t,e)=>t.kind!==e.kind?!1:t.kind==="image"&&e.kind==="image"?xxe(t,e):t.kind==="paragraph"&&e.kind==="paragraph"?Upt(t,e):t.kind==="drawing"&&e.kind==="drawing"?Wpt(t,e):!1,Mie=t=>{if(_B(t)){const e=t.trackedChange,n=e.before?JSON.stringify(e.before):"",r=e.after?JSON.stringify(e.after):"";return`${e.kind??""}:${e.id??""}:${e.author??""}:${e.date??""}:${n}:${r}`}return""},Lie=t=>Mpt(t)?t.comments.map(e=>`${e.commentId??""}:${e.internal?"1":"0"}`).join("|"):"",Opt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.before===e.before&&t.after===e.after&&t.line===e.line&&t.lineRule===e.lineRule&&t.beforeAutospacing===e.beforeAutospacing&&t.afterAutospacing===e.afterAutospacing,Ppt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.left===e.left&&t.right===e.right&&t.firstLine===e.firstLine&&t.hanging===e.hanging,H5=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.style===e.style&&t.width===e.width&&t.color===e.color&&t.space===e.space,Fpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:H5(t.top,e.top)&&H5(t.right,e.right)&&H5(t.bottom,e.bottom)&&H5(t.left,e.left),Bpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.fill===e.fill&&t.color===e.color&&t.val===e.val&&t.themeColor===e.themeColor&&t.themeFill===e.themeFill&&t.themeFillShade===e.themeFillShade&&t.themeFillTint===e.themeFillTint&&t.themeShade===e.themeShade&&t.themeTint===e.themeTint,jpt=(t,e)=>t.val===e.val&&t.pos===e.pos&&t.leader===e.leader,$pt=(t,e)=>{if(t===e)return!0;if(!t||!e)return!t&&!e;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(!jpt(t[n],e[n]))return!1;return!0},zpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.wrap===e.wrap&&t.x===e.x&&t.y===e.y&&t.xAlign===e.xAlign&&t.yAlign===e.yAlign&&t.hAnchor===e.hAnchor&&t.vAnchor===e.vAnchor,Hpt=(t,e)=>{if(t===e)return!0;if(!t||!e)return!t&&!e;if(t.mode!==e.mode||t.lines!==e.lines)return!1;const n=t.run,r=e.run;return!n||!r?!n&&!r:!(n.text!==r.text||n.fontFamily!==r.fontFamily||n.fontSize!==r.fontSize||n.bold!==r.bold||n.italic!==r.italic||n.color!==r.color)},Vpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:!(t.alignment!==e.alignment||t.contextualSpacing!==e.contextualSpacing||t.suppressFirstLineIndent!==e.suppressFirstLineIndent||t.dropCap!==e.dropCap||t.decimalSeparator!==e.decimalSeparator||t.tabIntervalTwips!==e.tabIntervalTwips||t.keepNext!==e.keepNext||t.keepLines!==e.keepLines||t.direction!==e.direction||t.rtl!==e.rtl||t.floatAlignment!==e.floatAlignment||!Opt(t.spacing,e.spacing)||!Ppt(t.indent,e.indent)||!Fpt(t.borders,e.borders)||!Bpt(t.shading,e.shading)||!$pt(t.tabs,e.tabs)||!zpt(t.frame,e.frame)||!Hpt(t.dropCapDescriptor,e.dropCapDescriptor)),Upt=(t,e)=>{var o,a;const n=((o=t.attrs)==null?void 0:o.trackedChangesMode)??"review",r=((a=e.attrs)==null?void 0:a.trackedChangesMode)??"review";if(n!==r)return!1;const i=NB(t.attrs,!0),s=NB(e.attrs,!0);if(i!==s||!Vpt(t.attrs,e.attrs)||t.runs.length!==e.runs.length)return!1;for(let l=0;l<t.runs.length;l+=1){const c=t.runs[l],u=e.runs[l];if(("src"in c||c.kind==="lineBreak"||c.kind==="break"||c.kind==="fieldAnnotation"?"":c.text)!==("src"in u||u.kind==="lineBreak"||u.kind==="break"||u.kind==="fieldAnnotation"?"":u.text)||("bold"in c?c.bold:!1)!==("bold"in u?u.bold:!1)||("italic"in c?c.italic:!1)!==("italic"in u?u.italic:!1)||("color"in c?c.color:void 0)!==("color"in u?u.color:void 0)||("fontSize"in c?c.fontSize:void 0)!==("fontSize"in u?u.fontSize:void 0)||("fontFamily"in c?c.fontFamily:void 0)!==("fontFamily"in u?u.fontFamily:void 0)||("highlight"in c?c.highlight:void 0)!==("highlight"in u?u.highlight:void 0)||Mie(c)!==Mie(u)||Lie(c)!==Lie(u))return!1}return!0},xxe=(t,e)=>t.src===e.src&&t.width===e.width&&t.height===e.height&&t.alt===e.alt&&t.title===e.title&&t.objectFit===e.objectFit&&t.display===e.display&&jI(t.margin,e.margin)&&jI(t.padding,e.padding)&&Exe(t.anchor,e.anchor)&&Sxe(t.wrap,e.wrap)&&Axe(t.attrs,e.attrs),Wpt=(t,e)=>t.drawingKind!==e.drawingKind||!jI(t.margin,e.margin)||!jI(t.padding,e.padding)||!Exe(t.anchor,e.anchor)||!Sxe(t.wrap,e.wrap)||t.zIndex!==e.zIndex||t.drawingContentId!==e.drawingContentId||!Txe(t.drawingContent,e.drawingContent)||!Axe(t.attrs,e.attrs)?!1:t.drawingKind==="image"&&e.drawingKind==="image"?xxe(t,e):t.drawingKind==="vectorShape"&&e.drawingKind==="vectorShape"?Die(t.geometry,e.geometry)&&t.shapeKind===e.shapeKind&&t.fillColor===e.fillColor&&t.strokeColor===e.strokeColor&&t.strokeWidth===e.strokeWidth:t.drawingKind==="shapeGroup"&&e.drawingKind==="shapeGroup"?Die(t.geometry,e.geometry)&&Gpt(t.groupTransform,e.groupTransform)&&Kpt(t.size,e.size)&&Xpt(t.shapes,e.shapes):!0,jI=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.top===e.top&&t.right===e.right&&t.bottom===e.bottom&&t.left===e.left,Exe=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.isAnchored===e.isAnchored&&t.hRelativeFrom===e.hRelativeFrom&&t.vRelativeFrom===e.vRelativeFrom&&t.alignH===e.alignH&&t.alignV===e.alignV&&t.offsetH===e.offsetH&&t.offsetV===e.offsetV&&t.behindDoc===e.behindDoc,Sxe=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.type===e.type&&t.wrapText===e.wrapText&&t.distTop===e.distTop&&t.distBottom===e.distBottom&&t.distLeft===e.distLeft&&t.distRight===e.distRight&&t.behindDoc===e.behindDoc&&qpt(t.polygon,e.polygon),qpt=(t,e)=>{if(t===e)return!0;if(!t||!e)return!t&&!e;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1){const r=t[n],i=e[n];if(!r||!i||r.length!==i.length)return!1;for(let s=0;s<r.length;s+=1)if(r[s]!==i[s])return!1}return!0},Die=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.width===e.width&&t.height===e.height&&(t.rotation??0)===(e.rotation??0)&&!!t.flipH==!!e.flipH&&!!t.flipV==!!e.flipV,Gpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height&&t.childX===e.childX&&t.childY===e.childY&&t.childWidth===e.childWidth&&t.childHeight===e.childHeight&&t.childOriginXEmu===e.childOriginXEmu&&t.childOriginYEmu===e.childOriginYEmu,Kpt=(t,e)=>t===e?!0:!t||!e?!t&&!e:t.width===e.width&&t.height===e.height,Xpt=(t,e)=>{if(t===e)return!0;if(!t||!e)return!t&&!e;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1){const r=t[n],i=e[n];if(!r||!i||r.shapeType!==i.shapeType||!Txe(r.attrs,i.attrs))return!1}return!0},Axe=(t,e)=>{if(t===e)return!0;if(!t||!e)return!t&&!e;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||t[i]!==e[i])return!1;return!0},Txe=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t==null&&e==null;try{return JSON.stringify(t)===JSON.stringify(e)}catch{return!1}};function Ypt(t){if(!t||t.length===0)return"";const e=[];for(const n of t)if(e.push(n.id),n.kind==="paragraph")for(const r of n.runs)!("src"in r)&&r.kind!=="lineBreak"&&r.kind!=="break"&&r.kind!=="fieldAnnotation"&&e.push(r.text??""),"bold"in r&&r.bold&&e.push("b"),"italic"in r&&r.italic&&e.push("i"),"token"in r&&r.token&&e.push(`token:${r.token}`);return e.join("|")}function Zpt(t){if(!t||t.length===0)return"";const e=[];for(const n of t){if(e.push(`section:${n.sectionIndex}`),n.numbering){const r=n.numbering;e.push(`num:${r.format??"decimal"}:${r.start??1}`)}if(n.headerRefs){const r=n.headerRefs;r.default&&e.push(`hdr-def:${r.default}`),r.first&&e.push(`hdr-first:${r.first}`),r.even&&e.push(`hdr-even:${r.even}`),r.odd&&e.push(`hdr-odd:${r.odd}`)}if(n.footerRefs){const r=n.footerRefs;r.default&&e.push(`ftr-def:${r.default}`),r.first&&e.push(`ftr-first:${r.first}`),r.even&&e.push(`ftr-even:${r.even}`),r.odd&&e.push(`ftr-odd:${r.odd}`)}}return e.join("|")}function Jpt(t){const{width:e,height:n,pageWidth:r,margins:i,overflowBaseHeight:s}=t,o=[`w:${e}`,`h:${n}`];return r!==void 0&&o.push(`pw:${r}`),s!==void 0&&o.push(`obh:${s}`),i&&o.push(`ml:${i.left}`,`mr:${i.right}`),o.join("|")}class Qpt{constructor(){this.contentHashes=new Map,this.constraintsHash="",this.sectionMetadataHash=""}hasContentChanged(e,n){const r=Ypt(n),i=this.contentHashes.get(e);if(i===void 0)return this.contentHashes.set(e,r),!1;const s=r!==i;return s&&this.contentHashes.set(e,r),s}hasConstraintsChanged(e){const n=Jpt(e);if(this.constraintsHash==="")return this.constraintsHash=n,!1;const r=n!==this.constraintsHash;return r&&(this.constraintsHash=n),r}hasSectionMetadataChanged(e){const n=Zpt(e);if(this.sectionMetadataHash==="")return this.sectionMetadataHash=n,!1;const r=n!==this.sectionMetadataHash;return r&&(this.sectionMetadataHash=n),r}reset(){this.contentHashes.clear(),this.constraintsHash="",this.sectionMetadataHash=""}}function F9(t,e,n,r,i,s){const o=[],a=[];if(i&&e.hasConstraintsChanged(i)&&(o.push("constraints changed"),n&&Object.values(n).forEach(l=>{l&&a.push(...l.map(c=>c.id))}),r&&Object.values(r).forEach(l=>{l&&a.push(...l.map(c=>c.id))})),s&&e.hasSectionMetadataChanged(s)&&(o.push("section metadata changed"),n&&Object.values(n).forEach(l=>{l&&a.push(...l.map(c=>c.id))}),r&&Object.values(r).forEach(l=>{l&&a.push(...l.map(c=>c.id))})),n)for(const[l,c]of Object.entries(n)){if(!c)continue;const u=`header-${l}`;e.hasContentChanged(u,c)&&(o.push(`header ${l} content changed`),a.push(...c.map(d=>d.id)))}if(r)for(const[l,c]of Object.entries(r)){if(!c)continue;const u=`footer-${l}`;e.hasContentChanged(u,c)&&(o.push(`footer ${l} content changed`),a.push(...c.map(d=>d.id)))}if(a.length>0){const l=Array.from(new Set(a));t.invalidate(l),FI.logInvalidation(o.join(", "),l)}}const Sy=new fxe,Nm=new mxe,B9=new Qpt,emt=typeof _e<"u"&&typeof _e.env<"u"&&!!_e.env.SD_DEBUG_LAYOUT,Cu=(...t)=>{emt&&console.log(...t)};async function tmt(t,e,n,r,i,s){performance.now();const o=Lpt(t,n);o.deletedBlockIds.length>0&&Sy.invalidate(o.deletedBlockIds);const{measurementWidth:a,measurementHeight:l}=rmt(r,n);if(a<=0||l<=0)throw new Error("incrementalLayout: invalid measurement constraints resolved from options");const c=performance.now(),u={maxWidth:a,maxHeight:l},d=[];let f=0,h=0;for(const re of n){if(re.kind==="sectionBreak"){d.push({kind:"sectionBreak"});continue}const X=Sy.get(re,a,l);if(X){d.push(X),f++;continue}const me=await i(re,u);Sy.set(re,a,l,me),d.push(me),h++}const m=performance.now();Cu(`[Perf] 4.1 Measure all blocks: ${(m-c).toFixed(2)}ms (${h} measured, ${f} cached)`);let y,w;const b=(s==null?void 0:s.headerBlocks)&&Object.keys(s.headerBlocks).length>0,E=(s==null?void 0:s.headerBlocksByRId)&&s.headerBlocksByRId.size>0;if(s!=null&&s.constraints&&(b||E)){const re=performance.now(),X=s.measure??i;F9(Nm,B9,s.headerBlocks,s.footerBlocks,s.constraints,r.sectionMetadata);const me=1,G=z=>["default","first","even","odd"].includes(z);if(y={},b&&s.headerBlocks){const z=await Xv(s.headerBlocks,s.constraints,X,Nm,me,void 0);for(const[de,Y]of Object.entries(z))if(G(de)&&Y!=null&&Y.layout&&typeof Y.layout.height=="number"){const ee=Y.layout.height;Number.isFinite(ee)&&ee>=0&&(y[de]=ee)}}if(E&&s.headerBlocksByRId){w=new Map;for(const[z,de]of s.headerBlocksByRId){if(!de||de.length===0)continue;const Y={maxWidth:s.constraints.width,maxHeight:s.constraints.height},ee=await Promise.all(de.map(ie=>X(ie,Y))),ae=Kv(de,ee,{width:s.constraints.width,height:s.constraints.height});ae.height>0&&w.set(z,ae.height)}}const B=performance.now();Cu(`[Perf] 4.1.5 Pre-layout headers for height: ${(B-re).toFixed(2)}ms`)}let A,x;const T=(s==null?void 0:s.footerBlocks)&&Object.keys(s.footerBlocks).length>0,R=(s==null?void 0:s.footerBlocksByRId)&&s.footerBlocksByRId.size>0;if(s!=null&&s.constraints&&(T||R)){const re=performance.now(),X=s.measure??i;!b&&!E&&F9(Nm,B9,s.headerBlocks,s.footerBlocks,s.constraints,r.sectionMetadata);const me=1,G=z=>["default","first","even","odd"].includes(z);A={};try{if(T&&s.footerBlocks){const z=await Xv(s.footerBlocks,s.constraints,X,Nm,me,void 0);for(const[de,Y]of Object.entries(z))if(G(de)&&Y!=null&&Y.layout&&typeof Y.layout.height=="number"){const ee=Y.layout.height;Number.isFinite(ee)&&ee>=0&&(A[de]=ee)}}if(R&&s.footerBlocksByRId){x=new Map;for(const[z,de]of s.footerBlocksByRId){if(!de||de.length===0)continue;const Y={maxWidth:s.constraints.width,maxHeight:s.constraints.height},ee=await Promise.all(de.map(ie=>X(ie,Y))),ae=Kv(de,ee,{width:s.constraints.width,height:s.constraints.height});ae.height>0&&x.set(z,ae.height)}}}catch(z){console.error("[Layout] Footer pre-layout failed:",z),A=void 0}const B=performance.now();Cu(`[Perf] 4.1.6 Pre-layout footers for height: ${(B-re).toFixed(2)}ms`)}const k=performance.now();let _=CB(n,d,{...r,headerContentHeights:y,footerContentHeights:A,headerContentHeightsByRId:w,footerContentHeightsByRId:x,remeasureParagraph:(re,X,me)=>Rie(re,X,me)});const N=performance.now();Cu(`[Perf] 4.2 Layout document (pagination): ${(N-k).toFixed(2)}ms`);const L=3;let M=n,C=d,D=0;const O=performance.now();let $=0,U=0,W=0,ce=!0;if(Ua.BODY_PAGE_TOKENS){for(;D<L;){const re=r.sectionMetadata??[],X=Pie(_,re);j5.logIterationStart(D,_.pages.length);const me=ept(_,M,C,X);if(me.affectedBlockIds.size===0){Cu(`[Perf] 4.3 Page token resolution converged after ${D} iterations`);break}Cu(`[Perf] 4.3.${D+1} Page tokens resolved: ${me.affectedBlockIds.size} blocks affected`);const G=Array.from(me.affectedBlockIds).slice(0,5);j5.logAffectedBlocks(D,me.affectedBlockIds,G),$+=me.affectedBlockIds.size,M=M.map(be=>me.updatedBlocks.get(be.id)??be),Sy.invalidate(Array.from(me.affectedBlockIds));const B=performance.now();C=await imt(M,C,me.affectedBlockIds,u,i);const de=performance.now()-B;U+=de,Cu(`[Perf] 4.3.${D+1}.1 Re-measure: ${de.toFixed(2)}ms`),j5.logRemeasure(me.affectedBlockIds.size,de);const Y=_.pages.length,ee=performance.now();_=CB(M,C,{...r,headerContentHeights:y,footerContentHeights:A,headerContentHeightsByRId:w,footerContentHeightsByRId:x,remeasureParagraph:(be,Te,Z)=>Rie(be,Te,Z)});const ie=performance.now()-ee;W+=ie,Cu(`[Perf] 4.3.${D+1}.2 Re-layout: ${ie.toFixed(2)}ms`);const H=_.pages.length;if(H===Y&&D>0){Cu(`[Perf] 4.3 Page count stable at ${H} - breaking convergence loop`);break}D++}D>=L&&(ce=!1,console.warn(`[incrementalLayout] Page token resolution did not converge after ${L} iterations - stopping`))}const Q=performance.now()-O;D>0&&(Cu(`[Perf] 4.3 Total page token resolution time: ${Q.toFixed(2)}ms`),j5.logConvergence(D,ce,Q),Aie.recordPageTokenMetrics({totalTimeMs:Q,iterations:D,affectedBlocks:$,remeasureTimeMs:U,relayoutTimeMs:W,converged:ce}));let J,K;if(s!=null&&s.constraints&&(s.headerBlocks||s.footerBlocks)){const re=performance.now(),X=s.measure??i;F9(Nm,B9,s.headerBlocks,s.footerBlocks,s.constraints,r.sectionMetadata);const me=r.sectionMetadata??[],G=Pie(_,me),B=Ua.HEADER_FOOTER_PAGE_TOKENS?Y=>{const ee=Y-1,ae=G.displayPages[ee];return{displayText:(ae==null?void 0:ae.displayText)??String(Y),totalPages:G.totalPages}}:void 0;if(s.headerBlocks){const Y=await Xv(s.headerBlocks,s.constraints,X,Nm,Ua.HEADER_FOOTER_PAGE_TOKENS?void 0:G.totalPages,B);J=Oie("header",Y)}if(s.footerBlocks){const Y=await Xv(s.footerBlocks,s.constraints,X,Nm,Ua.HEADER_FOOTER_PAGE_TOKENS?void 0:G.totalPages,B);K=Oie("footer",Y)}const z=performance.now();Cu(`[Perf] 4.4 Header/footer layout: ${(z-re).toFixed(2)}ms`);const de=Nm.getStats();Aie.recordHeaderFooterCacheMetrics(de),FI.logStats(de)}return{layout:_,measures:C,dirty:o,headers:J,footers:K}}const nmt={w:612,h:792},V5={top:72,right:72,bottom:72,left:72},Im=(t,e)=>Number.isFinite(t)?t:e;function rmt(t,e){var c,u,d,f,h,m,y,w;const n=t.pageSize??nmt,r={top:Im((c=t.margins)==null?void 0:c.top,V5.top),right:Im((u=t.margins)==null?void 0:u.right,V5.right),bottom:Im((d=t.margins)==null?void 0:d.bottom,V5.bottom),left:Im((f=t.margins)==null?void 0:f.left,V5.left)},i=n.w-(r.left+r.right),s=n.h-(r.top+r.bottom),o=(b,E)=>{if(!E||E.count<=1)return b;const x=Math.max(0,E.gap??0)*(E.count-1);return(b-x)/E.count};let a=o(i,t.columns),l=s;if(e&&e.length>0)for(const b of e){if(b.kind!=="sectionBreak")continue;const E=b.pageSize??n,A={top:Im((h=b.margins)==null?void 0:h.top,r.top),right:Im((m=b.margins)==null?void 0:m.right,r.right),bottom:Im((y=b.margins)==null?void 0:y.bottom,r.bottom),left:Im((w=b.margins)==null?void 0:w.left,r.left)},x=E.w-(A.left+A.right),T=E.h-(A.top+A.bottom);if(x<=0||T<=0)continue;const R=o(x,b.columns??t.columns);R>a&&(a=R),T>l&&(l=T)}return{measurementWidth:a,measurementHeight:l}}const Oie=(t,e)=>{const n=[];return Object.entries(e).forEach(([r,i])=>{i&&n.push({kind:t,type:r,layout:i.layout,blocks:i.blocks,measures:i.measures})}),n};function Pie(t,e){const n=t.pages.length,r=uxe(t.pages,e);return{totalPages:n,displayPages:r}}async function imt(t,e,n,r,i){const s=[...e];for(let o=0;o<t.length;o++){const a=t[o];if(n.has(a.id))try{const l=await i(a,r);s[o]=l,Sy.set(a,r.maxWidth,r.maxHeight,l)}catch(l){console.warn(`[incrementalLayout] Failed to re-measure block ${a.id} after token resolution:`,l)}}return s}class smt{constructor(e){this.cache=null,this.config=e}updateLayout(e,n){this.config.layout=e,n!==void 0&&(this.config.pageGap=n),this.cache=null}updatePageGap(e){this.config.pageGap!==e&&(this.config.pageGap=e,this.cache=null)}getPageTop(e){return this.ensureCache(),e<0||e>=this.cache.cumulativeY.length?0:this.cache.cumulativeY[e]}getPageHeight(e){return this.ensureCache(),e<0||e>=this.cache.pageHeights.length?0:this.cache.pageHeights[e]}getPageGap(){return this.ensureCache(),this.cache.pageGap}getTotalHeight(){return this.ensureCache(),this.cache.totalHeight}getPageCount(){return this.config.layout.pages.length}getPageIndexAtY(e){this.ensureCache();const n=this.cache;for(let r=0;r<n.cumulativeY.length;r++){const i=n.cumulativeY[r],s=i+n.pageHeights[r];if(e>=i&&e<s)return r}return null}getNearestPageIndex(e){this.ensureCache();const n=this.cache,r=n.pageHeights.length;if(r===0)return null;const i=this.getPageIndexAtY(e);if(i!==null)return i;let s=0,o=1/0;for(let a=0;a<r;a++){const l=n.cumulativeY[a],c=n.pageHeights[a],u=l+c/2,d=Math.abs(e-u);d<o&&(o=d,s=a)}return s}ensureCache(){if(this.cache!==null)if(!Array.isArray(this.cache.cumulativeY)||!Array.isArray(this.cache.pageHeights))console.warn("[PageGeometryHelper] Cache corruption detected, rebuilding cache"),this.cache=null;else return;this.buildCache()}buildCache(){var e;try{const n=this.config.layout;if(!n||!Array.isArray(n.pages))throw new Error("Invalid layout: missing or invalid pages array");const r=this.config.pageGap??n.pageGap??0,i=n.pages.length;if(!Number.isFinite(r)||r<0)throw new Error(`Invalid pageGap: ${r} (must be non-negative finite number)`);const s=new Array(i),o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=n.pages[c];if(!u)throw new Error(`Invalid page at index ${c}: page is null or undefined`);const d=((e=u.size)==null?void 0:e.h)??n.pageSize.h;if(!Number.isFinite(d)||d<0)throw new Error(`Invalid page height at index ${c}: ${d} (must be non-negative finite number)`);s[c]=a,o[c]=d,a+=d,c<i-1&&(a+=r)}const l=a;this.cache={cumulativeY:s,pageHeights:o,pageGap:r,totalHeight:l,layoutVersion:0}}catch(n){const r=n instanceof Error?n.message:String(n);console.error(`[PageGeometryHelper] Cache build failed: ${r}. Using fallback empty cache.`),this.cache={cumulativeY:[],pageHeights:[],pageGap:0,totalHeight:0,layoutVersion:0}}}clearCache(){this.cache=null}getDebugInfo(){return this.ensureCache(),{isCached:this.cache!==null,pageCount:this.config.layout.pages.length,pageGap:this.cache.pageGap,totalHeight:this.cache.totalHeight,cumulativeY:[...this.cache.cumulativeY],pageHeights:[...this.cache.pageHeights]}}}var pS=(t=>(t[t.P0=0]="P0",t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t))(pS||{});pS.P0+"",pS.P1+"",pS.P2+"",pS.P3+"";const omt="application/x-field-annotation",j9="fieldAnnotation";function Fie(t){if(!t)return;const e=parseInt(t,10);return Number.isFinite(e)?e:void 0}function amt(t){const e=t.dataset,n={};for(const r in e){const i=e[r];i!==void 0&&(n[r]=i)}return{fieldId:e.fieldId,fieldType:e.fieldType,variant:e.variant??e.type,displayLabel:e.displayLabel,pmStart:Fie(e.pmStart),pmEnd:Fie(e.pmEnd),attributes:n}}class lmt{constructor(e,n={}){this.container=e,this.config=n,this.mimeType=n.mimeType??omt,this.boundHandlers={dragstart:this.handleDragStart.bind(this),dragover:this.handleDragOver.bind(this),drop:this.handleDrop.bind(this),dragend:this.handleDragEnd.bind(this),dragleave:this.handleDragLeave.bind(this)},this.windowDragoverHandler=this.handleWindowDragOver.bind(this),this.windowDropHandler=this.handleWindowDrop.bind(this),this.attachListeners()}attachListeners(){this.container.addEventListener("dragstart",this.boundHandlers.dragstart),this.container.addEventListener("dragover",this.boundHandlers.dragover),this.container.addEventListener("drop",this.boundHandlers.drop),this.container.addEventListener("dragend",this.boundHandlers.dragend),this.container.addEventListener("dragleave",this.boundHandlers.dragleave),window.addEventListener("dragover",this.windowDragoverHandler,!1),window.addEventListener("drop",this.windowDropHandler,!1)}removeListeners(){this.container.removeEventListener("dragstart",this.boundHandlers.dragstart),this.container.removeEventListener("dragover",this.boundHandlers.dragover),this.container.removeEventListener("drop",this.boundHandlers.drop),this.container.removeEventListener("dragend",this.boundHandlers.dragend),this.container.removeEventListener("dragleave",this.boundHandlers.dragleave),window.removeEventListener("dragover",this.windowDragoverHandler,!1),window.removeEventListener("drop",this.windowDropHandler,!1)}handleWindowDragOver(e){var n,r;if(this.hasFieldAnnotationData(e)){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");const i=e.target;this.container.contains(i)||(r=(n=this.config).onDragOver)==null||r.call(n,{event:e,clientX:e.clientX,clientY:e.clientY,hasFieldAnnotation:!0})}}handleWindowDrop(e){if(this.hasFieldAnnotationData(e)){const n=e.target;this.container.contains(n)||this.handleDrop(e)}}handleDragStart(e){var i,s,o;const n=e.target;if(!((i=n==null?void 0:n.dataset)!=null&&i.draggable)||n.dataset.draggable!=="true")return;const r=amt(n);if(e.dataTransfer){const a=JSON.stringify({attributes:r.attributes,sourceField:r});e.dataTransfer.setData(this.mimeType,a),e.dataTransfer.setData(j9,a),e.dataTransfer.setData("text/plain",r.displayLabel??"Field Annotation"),e.dataTransfer.setDragImage(n,0,0),e.dataTransfer.effectAllowed="move"}(o=(s=this.config).onDragStart)==null||o.call(s,{event:e,element:n,data:r})}handleDragOver(e){var r,i;const n=this.hasFieldAnnotationData(e);n&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),this.container.classList.add("drag-over")),(i=(r=this.config).onDragOver)==null||i.call(r,{event:e,clientX:e.clientX,clientY:e.clientY,hasFieldAnnotation:n})}handleDragLeave(e){const n=e.relatedTarget;(!n||!this.container.contains(n))&&this.container.classList.remove("drag-over")}handleDrop(e){var i,s;if(this.container.classList.remove("drag-over"),!this.hasFieldAnnotationData(e))return;e.preventDefault();const n=this.extractDragData(e);if(!n)return;const r=txe(this.container,e.clientX,e.clientY);(s=(i=this.config).onDrop)==null||s.call(i,{event:e,data:n,pmPosition:r,clientX:e.clientX,clientY:e.clientY})}handleDragEnd(e){var n,r;this.container.classList.remove("drag-over"),(r=(n=this.config).onDragEnd)==null||r.call(n,e)}hasFieldAnnotationData(e){if(!e.dataTransfer)return!1;const n=e.dataTransfer.types;return n.includes(this.mimeType)||n.includes(j9)}extractDragData(e){if(!e.dataTransfer)return null;let n=e.dataTransfer.getData(this.mimeType);if(n||(n=e.dataTransfer.getData(j9)),!n)return null;try{const r=JSON.parse(n);return r.sourceField??r.attributes??r}catch{return null}}updateConfig(e){this.config={...this.config,...e},e.mimeType&&(this.mimeType=e.mimeType)}destroy(){this.removeListeners(),this.container.classList.remove("drag-over")}}function cmt(t,e={}){const n=new lmt(t,e);return()=>n.destroy()}const I1=t=>t.kind==="drawing"||t.kind==="image",Kl=(t,e,n)=>{},umt=t=>{},$9=t=>{},Bie=t=>{const e=t==null?void 0:t.attrs,n=typeof(e==null?void 0:e.pmStart)=="number"?e.pmStart:void 0,r=typeof(e==null?void 0:e.pmEnd)=="number"?e.pmEnd:n!=null?n+1:void 0;return{pmStart:n,pmEnd:r}},$I=(t,e)=>{const n=typeof t.pmStart=="number"?t.pmStart:Bie(e).pmStart,r=typeof t.pmEnd=="number"?t.pmEnd:Bie(e).pmEnd;return{pmStart:n,pmEnd:r}},dmt=(t,e,n,r)=>t==null?!1:(e??t+1)>n&&t<r;function fmt(t,e,n){var a;if(n){const l=n.getPageIndexAtY(e.y);if(l!==null)return{pageIndex:l,page:t.pages[l]};const c=n.getNearestPageIndex(e.y);return c!==null?{pageIndex:c,page:t.pages[c]}:null}const r=t.pageGap??0;let i=0,s=null,o=1/0;for(let l=0;l<t.pages.length;l+=1){const c=t.pages[l],u=((a=c.size)==null?void 0:a.h)??t.pageSize.h,d=i,f=d+u;if(e.y>=d&&e.y<f)return{pageIndex:l,page:c};const h=d+u/2,m=Math.abs(e.y-h);m<o&&(o=m,s=l),i=f+r}return s!==null?{pageIndex:s,page:t.pages[s]}:null}function hmt(t,e,n,r,i){const s=[...e.page.fragments].sort((o,a)=>{const l=o.kind==="para"?o.y:0,c=a.kind==="para"?a.y:0;if(Math.abs(l-c)>.5)return l-c;const u=o.kind==="para"?o.x:0,d=a.kind==="para"?a.x:0;return u-d});for(const o of s){if(o.kind!=="para")continue;const a=Ug(n,o.blockId);if(a===-1)continue;const l=n[a],c=r[a];if(!l||l.kind!=="paragraph"||(c==null?void 0:c.kind)!=="paragraph")continue;const u=c.lines.slice(o.fromLine,o.toLine).reduce((h,m)=>h+m.lineHeight,0),d=i.x>=o.x&&i.x<=o.x+o.width,f=i.y>=o.y&&i.y<=o.y+u;if(!(!d||!f))return{fragment:o,block:l,measure:c,pageIndex:e.pageIndex,pageY:i.y-o.y}}return null}const pmt=(t,e,n,r)=>{for(const i of t.page.fragments){if(!I1(i))continue;const s=r.x>=i.x&&r.x<=i.x+i.width,o=r.y>=i.y&&r.y<=i.y+i.height;if(!s||!o)continue;const a=Ug(e,i.blockId);if(a===-1)continue;const l=e[a],c=n[a];if(!(!l||!c))return{fragment:i,block:l,measure:c,pageIndex:t.pageIndex,pageY:0}}return null},kxe=(t,e,n,r)=>{var i;for(const s of t.page.fragments){if(s.kind!=="table")continue;const o=s,a=r.x>=o.x&&r.x<=o.x+o.width,l=r.y>=o.y&&r.y<=o.y+o.height;if(!a||!l)continue;const c=e.findIndex(D=>D.id===o.blockId);if(c===-1)continue;const u=e[c],d=n[c];if(!u||u.kind!=="table"||!d||d.kind!=="table")continue;const f=u,h=d,m=r.x-o.x,y=r.y-o.y;let w=0,b=-1;if(h.rows.length===0||f.rows.length===0)continue;for(let D=o.fromRow;D<o.toRow&&D<h.rows.length;D++){const O=h.rows[D];if(y>=w&&y<w+O.height){b=D;break}w+=O.height}if(b===-1&&(b=Math.min(o.toRow-1,h.rows.length-1),b<o.fromRow))continue;const E=h.rows[b],A=f.rows[b];if(!E||!A)continue;let x=0,T=-1;if(E.cells.length===0||A.cells.length===0)continue;for(let D=0;D<E.cells.length;D++){const O=E.cells[D];if(m>=x&&m<x+O.width){T=D;break}x+=O.width}if(T===-1&&(T=E.cells.length-1,T<0))continue;const R=E.cells[T],k=A.cells[T];if(!R||!k)continue;const _=k.blocks??(k.paragraph?[k.paragraph]:[]),N=R.blocks??(R.paragraph?[R.paragraph]:[]),L=(Array.isArray(N)?N:[]).filter(D=>D!=null&&typeof D=="object"&&"kind"in D);let M=0;const C=D=>D?"totalHeight"in D&&typeof D.totalHeight=="number"?D.totalHeight:"height"in D&&typeof D.height=="number"?D.height:0:0;for(let D=0;D<_.length&&D<L.length;D++){const O=_[D],$=L[D];if((O==null?void 0:O.kind)!=="paragraph"||($==null?void 0:$.kind)!=="paragraph"){M+=C($);continue}const U=C($),W=M+U,ce=((i=k.attrs)==null?void 0:i.padding)??{top:2,left:4},se=m-x-(ce.left??4),Q=y-w-(ce.top??2),J=O,K=$,re=Q>=M&&Q<W,X=D===Math.min(_.length,L.length)-1;if(re||X){const me=Q-M,G=Math.max(0,Math.min(me,Math.max(U,0)));return{fragment:o,block:f,measure:h,pageIndex:t.pageIndex,cellRowIndex:b,cellColIndex:T,cellBlock:J,cellMeasure:K,localX:Math.max(0,se),localY:Math.max(0,G)}}M=W}}return null},mmt=(t,e,n)=>{const r=t.ownerDocument??(typeof document<"u"?document:null);if(!r||typeof r.elementsFromPoint!="function")return null;let i=[];try{i=r.elementsFromPoint(e,n)??[]}catch{return null}let s=null;for(const o of i){if(!(o instanceof HTMLElement)||!t.contains(o))continue;const a=o.dataset.layoutEpoch;if(a==null)continue;const l=Number(a);Number.isFinite(l)&&(s==null||l>s)&&(s=l)}return s};function $E(t,e,n,r,i,s,o,a){var y,w,b,E,A,x,T,R,k,_,N,L,M;const l=t.layoutEpoch??0;if(Kl("log","entry",{pages:t.pages.length}),i!=null&&s!=null&&o!=null){const C=txe(i,s,o),D=mmt(i,s,o)??l;if(C!=null){let O="",$=0,U=0,W=-1;for(let ce=0;ce<t.pages.length;ce++){const se=t.pages[ce];for(const Q of se.fragments)if(Q.kind==="para"&&Q.pmStart!=null&&Q.pmEnd!=null&&C>=Q.pmStart&&C<=Q.pmEnd){O=Q.blockId,$=ce,U=Bd(t,Q.x);const J=Ug(e,Q.blockId);if(J!==-1){const K=n[J];if(K&&K.kind==="paragraph")for(let re=Q.fromLine;re<Q.toLine;re++){const X=K.lines[re],me=qb(e[J],X);if(me.pmStart!=null&&me.pmEnd!=null&&C>=me.pmStart&&C<=me.pmEnd){W=re;break}}}return{pos:C,layoutEpoch:D,blockId:O,pageIndex:$,column:U,lineIndex:W}}}return{pos:C,layoutEpoch:D,blockId:"",pageIndex:0,column:0,lineIndex:-1}}}const c=fmt(t,r,a);if(!c)return null;const u=a?a.getPageTop(c.pageIndex):Cxe(t,c.pageIndex),d={x:r.x,y:r.y-u};Kl("log","page-hit",{pageIndex:c.pageIndex});let f=hmt(t,c,e,n,d);if(!f){const D=c.page.fragments.filter(U=>U!=null&&typeof U=="object");let O=null,$=1/0;for(const U of D){const W=U.kind==="para",ce=I1(U);if(!W&&!ce)continue;const se=Ug(e,U.blockId);if(se===-1)continue;const Q=e[se],J=n[se];if(!Q||!J)continue;let K=0;if(ce)K=U.height;else if(W&&Q.kind==="paragraph"&&J.kind==="paragraph")K=J.lines.slice(U.fromLine,U.toLine).reduce((G,B)=>G+B.lineHeight,0);else continue;const re=U.y,X=U.y+K;let me;if(d.y<re?me=re-d.y:d.y>X?me=d.y-X:me=0,me<$){$=me;const G=Math.max(0,Math.min(d.y-re,K));O={fragment:U,block:Q,measure:J,pageIndex:c.pageIndex,pageY:G}}}f=O}if(f){const{fragment:C,block:D,measure:O,pageIndex:$,pageY:U}=f;if(C.kind==="para"&&O.kind==="paragraph"&&D.kind==="paragraph"){const W=$ie(O,U,C.fromLine,C.toLine);if(W==null)return Kl("warn","no-line",{blockId:C.blockId}),null;const ce=O.lines[W],se=Hie(D),Q=typeof((w=(y=D.attrs)==null?void 0:y.indent)==null?void 0:w.left)=="number"?D.attrs.indent.left:0,J=typeof((E=(b=D.attrs)==null?void 0:b.indent)==null?void 0:E.right)=="number"?D.attrs.indent.right:0,K=Number.isFinite(Q)?Q:0,re=Number.isFinite(J)?J:0,X=K+re,me=Math.max(0,C.width-X);X>C.width&&console.warn(`[clickToPosition] Paragraph indents (${X}px) exceed fragment width (${C.width}px) for block ${C.blockId}. This may indicate a layout miscalculation. Available width clamped to 0.`);const B=(C.markerWidth??((A=O.marker)==null?void 0:A.markerWidth)??0)>0,z=(x=D.attrs)==null?void 0:x.alignment,Y=B&&!(z==="justify"||z==="both")?"left":void 0,ee=zie(D,ce,d.x-C.x,se,me,Y);if(ee==null)return Kl("warn","no-position",{blockId:C.blockId}),null;const ae=Bd(t,C.x);return umt({blockId:C.blockId,x:d.x-C.x}),Kl("log","success",{blockId:C.blockId}),{pos:ee,layoutEpoch:l,blockId:C.blockId,pageIndex:$,column:ae,lineIndex:W}}if(I1(C)){const W=$I(C,D),ce=W.pmStart??W.pmEnd??null;return ce==null?(Kl("warn","atomic-without-range",{fragmentId:C.blockId}),null):(Kl("log","success",{blockId:C.blockId,column:Bd(t,C.x)}),{pos:ce,layoutEpoch:l,blockId:C.blockId,pageIndex:$,column:Bd(t,C.x),lineIndex:-1})}}const h=kxe(c,e,n,d);if(h){const{cellBlock:C,cellMeasure:D,localX:O,localY:$,pageIndex:U}=h,W=$ie(D,$,0,D.lines.length);if(W!=null){const se=D.lines[W],Q=Hie(C),J=typeof((R=(T=C.attrs)==null?void 0:T.indent)==null?void 0:R.left)=="number"?C.attrs.indent.left:0,K=typeof((_=(k=C.attrs)==null?void 0:k.indent)==null?void 0:_.right)=="number"?C.attrs.indent.right:0,re=Number.isFinite(J)?J:0,X=Number.isFinite(K)?K:0,me=re+X,G=Math.max(0,h.fragment.width-me);me>h.fragment.width&&console.warn(`[clickToPosition:table] Paragraph indents (${me}px) exceed fragment width (${h.fragment.width}px) for block ${h.fragment.blockId}. This may indicate a layout miscalculation. Available width clamped to 0.`);const z=(((N=D.marker)==null?void 0:N.markerWidth)??0)>0,de=(L=C.attrs)==null?void 0:L.alignment,ae=zie(C,se,O,Q,G,z&&!(de==="justify"||de==="both")?"left":void 0);if(ae!=null)return Kl("log","success",{blockId:h.fragment.blockId,column:Bd(t,h.fragment.x)}),{pos:ae,layoutEpoch:l,blockId:h.fragment.blockId,pageIndex:U,column:Bd(t,h.fragment.x),lineIndex:W}}const ce=(M=C.runs)==null?void 0:M[0];if(ce&&ce.pmStart!=null)return Kl("log","success",{blockId:h.fragment.blockId,pos:ce.pmStart,column:Bd(t,h.fragment.x)}),{pos:ce.pmStart,layoutEpoch:l,blockId:h.fragment.blockId,pageIndex:U,column:Bd(t,h.fragment.x),lineIndex:0};Kl("warn","table-cell-no-position",{blockId:h.fragment.blockId,cellRow:h.cellRowIndex,cellCol:h.cellColIndex})}const m=pmt(c,e,n,d);if(m&&I1(m.fragment)){const{fragment:C,block:D,pageIndex:O}=m,$=$I(C,D),U=$.pmStart??$.pmEnd??null;return U==null?(Kl("warn","atomic-without-range",{fragmentId:C.blockId}),null):(Kl("log","success",{blockId:C.blockId,column:Bd(t,C.x)}),{pos:U,layoutEpoch:l,blockId:C.blockId,pageIndex:O,column:Bd(t,C.x),lineIndex:-1})}return Kl("warn","no-fragment",{pageIndex:c.pageIndex}),null}function Ug(t,e,n){const r=t.findIndex(o=>o.id===e&&o.kind!=="pageBreak"&&o.kind!=="sectionBreak");if(r!==-1)return r;const i=e.replace(/-\d+$/,"");if(i===e)return-1;const s=[];if(t.forEach((o,a)=>{o.id===i&&o.kind==="paragraph"&&s.push(a)}),s.length===0)return-1;if(s.length===1)return s[0];if(n)for(const o of s){const a=t[o];if(a.kind!=="paragraph")continue;if(a.runs.some(c=>c.pmStart==null||c.pmEnd==null?!1:c.pmEnd>n.from&&c.pmStart<n.to))return o}return s[0]}const U5={top:2,bottom:2,left:4,right:4},gmt=(t,e)=>{var r,i,s;const n=((s=(i=(r=e==null?void 0:e.cells)==null?void 0:r[t])==null?void 0:i.attrs)==null?void 0:s.padding)??{};return{top:n.top??U5.top,bottom:n.bottom??U5.bottom,left:n.left??U5.left,right:n.right??U5.right}},ymt=t=>t?t.blocks??(t.paragraph?[t.paragraph]:[]):[],bmt=t=>t?t.blocks??(t.paragraph?[t.paragraph]:[]):[],wmt=(t,e,n)=>{var i;let r=0;for(let s=e;s<n&&s<t.lines.length;s+=1)r+=((i=t.lines[s])==null?void 0:i.lineHeight)??0;return r},Cxe=(t,e)=>{var i,s;const n=t.pageGap??0;let r=0;for(let o=0;o<e;o++){const a=((s=(i=t.pages[o])==null?void 0:i.size)==null?void 0:s.h)??t.pageSize.h;r+=a+n}return r};function dA(t,e,n,r,i,s){if(r===i)return[];const o=[];return t.pages.forEach((a,l)=>{const c=s?s.getPageTop(l):Cxe(t,l);a.fragments.forEach(u=>{if(u.kind==="para"){const d=Ug(e,u.blockId,{from:r,to:i});if(d===-1)return;const f=e[d],h=n[d];if(!f||f.kind!=="paragraph"||(h==null?void 0:h.kind)!=="paragraph")return;jie(f,h,r,i).forEach(({line:y,index:w})=>{var J,K,re,X;if(w<u.fromLine||w>=u.toLine)return;const b=qb(f,y);if(b.pmStart==null||b.pmEnd==null)return;const E=Math.max(b.pmStart,r),A=Math.min(b.pmEnd,i);if(E>=A)return;const x=mS(f,y,E),T=mS(f,y,A),R=u.markerWidth??((J=h.marker)==null?void 0:J.markerWidth)??0,k=EB(R,f),_=(K=f.attrs)==null?void 0:K.alignment,L=k&&!(_==="justify"||_==="both")?"left":void 0,M=q5(f,y,x,u.width,L),C=q5(f,y,T,u.width,L),D=AB((re=f.attrs)==null?void 0:re.indent),O=AT(f),$=w===u.fromLine,U=SB({isFirstLine:$,isListItem:k,markerWidth:R,markerTextWidth:u.markerTextWidth??((X=h.marker)==null?void 0:X.markerTextWidth)??void 0,paraIndentLeft:D.left,firstLineIndent:D.firstLine,hangingIndent:D.hanging,wordLayout:O}),W=u.x+U+Math.min(M,C),ce=Math.max(1,Math.min(Math.abs(C-M),y.width)),se=W5(h,w)-W5(h,u.fromLine),Q=u.y+se;o.push({x:W,y:Q+c,width:ce,height:y.lineHeight,pageIndex:l})});return}if(u.kind==="table"){const d=Ug(e,u.blockId,{from:r,to:i});if(d===-1)return;const f=e[d],h=n[d];if(!f||f.kind!=="table"||(h==null?void 0:h.kind)!=="table")return;const m=f,y=h,w=u,b=y.rows.map((R,k)=>w.partialRow&&w.partialRow.rowIndex===k?w.partialRow.partialHeight:(R==null?void 0:R.height)??0),E=(R,k)=>{const _=k.gridColumnStart??R;let N=0;for(let L=0;L<_&&L<y.columnWidths.length;L+=1)N+=y.columnWidths[L];return N},A=(R,k)=>{var O,$,U,W,ce,se;const _=y.rows[R],N=m.rows[R];if(!_||!N)return k;const L=b[R]??_.height,C=((O=w.partialRow)==null?void 0:O.rowIndex)===R?w.partialRow:null,D=Math.min(_.cells.length,N.cells.length);for(let Q=0;Q<D;Q+=1){const J=_.cells[Q],K=N.cells[Q];if(!J||!K)continue;const re=gmt(Q,N),X=E(Q,J),me=ymt(K),G=bmt(J),B=[];let z=0;for(let be=0;be<Math.min(me.length,G.length);be+=1){const Te=me[be],Z=G[be];if(!Te||!Z||Te.kind!=="paragraph"||Z.kind!=="paragraph")continue;const oe=Z.lines.length,te=z,ye=z+oe;z=ye;const ke=(($=C==null?void 0:C.fromLineByCell)==null?void 0:$[Q])??0,we=(U=C==null?void 0:C.toLineByCell)==null?void 0:U[Q],Ae=we==null||we===-1?z:we,Re=Math.max(te,ke),Pe=Math.min(ye,Ae);if(Re>=Pe)continue;const Ce=Re-te,Oe=Pe-te;let Fe=wmt(Z,Ce,Oe);if(Ce===0&&Oe>=oe){const he=Z.totalHeight;typeof he=="number"&&he>Fe&&(Fe=he);const q=(ce=(W=Te.attrs)==null?void 0:W.spacing)==null?void 0:ce.after;typeof q=="number"&&q>0&&(Fe+=q)}B.push({block:Te,measure:Z,startLine:Ce,endLine:Oe,height:Fe})}const de=B.reduce((be,Te)=>be+Te.height,0),Y=Math.max(0,L-(re.top+re.bottom)),ee=Math.max(0,Y-de);let ae=0;const ie=(se=K.attrs)==null?void 0:se.verticalAlign;ie==="center"||ie==="middle"?ae=ee/2:ie==="bottom"&&(ae=ee);let H=re.top+ae;B.forEach(be=>{var we,Ae;const Te=((we=be.measure.marker)==null?void 0:we.markerWidth)??0,Z=EB(Te,be.block),oe=Z?"left":void 0,te=AB(be.block.kind==="paragraph"?(Ae=be.block.attrs)==null?void 0:Ae.indent:void 0),ye=AT(be.block);jie(be.block,be.measure,r,i).forEach(({line:Re,index:Pe})=>{var We,nt;if(Pe<be.startLine||Pe>=be.endLine)return;const Ce=qb(be.block,Re);if(Ce.pmStart==null||Ce.pmEnd==null)return;const Oe=Math.max(Ce.pmStart,r),Fe=Math.min(Ce.pmEnd,i);if(Oe>=Fe)return;const $e=mS(be.block,Re,Oe),he=mS(be.block,Re,Fe),q=Math.max(1,J.width-re.left-re.right),ne=q5(be.block,Re,$e,q,oe),Ee=q5(be.block,Re,he,q,oe),Se=Pe===be.startLine,ze=SB({isFirstLine:Se,isListItem:Z,markerWidth:Te,markerTextWidth:((nt=(We=be.measure)==null?void 0:We.marker)==null?void 0:nt.markerTextWidth)??void 0,paraIndentLeft:te.left,firstLineIndent:te.firstLine,hangingIndent:te.hanging,wordLayout:ye}),Ie=u.x+X+re.left+ze+Math.min(ne,Ee),qe=Math.max(1,Math.min(Math.abs(Ee-ne),Re.width)),Ye=W5(be.measure,Pe)-W5(be.measure,be.startLine),ft=u.y+k+H+Ye;o.push({x:Ie,y:ft+c,width:qe,height:Re.lineHeight,pageIndex:l})}),H+=be.height})}return k+L};let x=0;const T=w.repeatHeaderCount??0;for(let R=0;R<T&&R<y.rows.length;R+=1)x=A(R,x);for(let R=w.fromRow;R<w.toRow&&R<y.rows.length;R+=1)x=A(R,x);return}if(I1(u)){const d=Ug(e,u.blockId,{from:r,to:i});if(d===-1)return;const f=e[d],h=$I(u,f);if(!dmt(h.pmStart,h.pmEnd,r,i))return;o.push({x:u.x,y:u.y+c,width:u.width,height:u.height,pageIndex:l})}})}),o}function kT(t,e,n,r){for(let i=0;i<t.pages.length;i+=1){const s=t.pages[i];for(const o of s.fragments){const a=Ug(e,o.blockId);if(a===-1)continue;const l=e[a],c=n[a];if(!(!l||!c)){if(o.kind==="para"){if(l.kind!=="paragraph"||c.kind!=="paragraph")continue;if(o.pmStart!=null&&o.pmEnd!=null&&r>=o.pmStart&&r<=o.pmEnd)return{fragment:o,block:l,measure:c,pageIndex:i,pageY:0};continue}if(o.kind==="table"){if(l.kind!=="table"||c.kind!=="table")continue;const u=l,d=o;let f=null,h=null;for(let m=d.fromRow;m<d.toRow&&m<u.rows.length;m++){const y=u.rows[m];for(const w of y.cells){const b=w.blocks??(w.paragraph?[w.paragraph]:[]);for(const E of b)if((E==null?void 0:E.kind)==="paragraph"){const A=E;for(const x of A.runs??[])x.pmStart!=null&&((f===null||x.pmStart<f)&&(f=x.pmStart),(h===null||x.pmStart>h)&&(h=x.pmStart)),x.pmEnd!=null&&((f===null||x.pmEnd<f)&&(f=x.pmEnd),(h===null||x.pmEnd>h)&&(h=x.pmEnd))}}}if(f!=null&&h!=null&&r>=f&&r<=h)return{fragment:o,block:l,measure:c,pageIndex:i,pageY:0};continue}if(I1(o)){const{pmStart:u,pmEnd:d}=$I(o,l),f=u??d,h=d??u;if(f==null||h==null)continue;const m=Math.min(f,h),y=Math.max(f,h);if(r>=m&&r<=y)return{fragment:o,block:l,measure:c,pageIndex:i,pageY:0}}}}}return null}function jie(t,e,n,r){if(t.kind!=="paragraph"||e.kind!=="paragraph")return[];const i=[];return e.lines.forEach((s,o)=>{const a=qb(t,s);if(a.pmStart==null||a.pmEnd==null)return;a.pmEnd>n&&a.pmStart<r&&i.push({line:s,index:o})}),i}function qb(t,e){return BU(t,e)}function mS(t,e,n){if(t.kind!=="paragraph")return 0;let r=0;for(let i=e.fromRun;i<=e.toRun;i+=1){const s=t.runs[i];if(!s)continue;const o="src"in s||s.kind==="lineBreak"||s.kind==="break"||s.kind==="fieldAnnotation"?"":s.text??"",a=o.length,l=s.pmStart??null,c=s.pmEnd??(l!=null?l+a:null);if(l==null||c==null||a===0)continue;const u=i===e.fromRun,d=i===e.toRun,f=u?e.fromChar:0,h=d?e.toChar:a,m=h-f,y=c-l,w=l+f/a*y,b=l+h/a*y;if(n>=w&&n<=b){const E=b-w;if(E>0){const A=n-w,x=Math.round(A/E*m),T=r+Math.min(x,m),R=o,k=T-r-0;return $9({blockId:t.id,lineFromRun:e.fromRun,lineToRun:e.toRun,runTextPreview:R.slice(Math.max(0,k-10),Math.min(R.length,k+10))}),T}return $9({blockId:t.id}),r}n>b&&(r+=m)}return $9({blockId:t.id,lineFromRun:e.fromRun,lineToRun:e.toRun}),r}const Bd=(t,e)=>{const n=t.columns;if(!n||n.count<=1)return 0;const s=(t.pageSize.w-n.gap*(n.count-1))/n.count+n.gap,a=Math.floor(e/Math.max(s,1));return Math.max(0,Math.min(n.count-1,a))},$ie=(t,e,n,r)=>{if(t.kind!=="paragraph")return null;const i=t.lines.length;if(n<0||r>i||n>=r)return null;let s=0;for(let o=n;o<r;o+=1){const a=t.lines[o];if(!a)return null;const l=s+a.lineHeight;if(e>=s&&e<l)return o;s=l}return r-1},W5=(t,e)=>{var r;if(t.kind!=="paragraph")return 0;let n=0;for(let i=0;i<e;i+=1)n+=((r=t.lines[i])==null?void 0:r.lineHeight)??0;return n},zie=(t,e,n,r,i,s)=>{if(t.kind!=="paragraph")return null;const o=qb(t,e);if(o.pmStart==null||o.pmEnd==null)return null;const a=oht(t,e,n,o.pmStart,i,s);let l=a.pmPosition;if(r){const c=a.charOffset,u=Math.max(1,e.toChar-e.fromChar),d=Math.max(0,Math.min(u,u-c));l=Ov(t,e,d,o.pmStart)}return l},q5=(t,e,n,r,i)=>{var u,d,f,h,m,y;if(r<=0||e.width<=0)return 0;let s=0,o=0,a=0;if(t.kind==="paragraph"){const w=typeof((d=(u=t.attrs)==null?void 0:u.indent)==null?void 0:d.left)=="number"?t.attrs.indent.left:0,b=typeof((h=(f=t.attrs)==null?void 0:f.indent)==null?void 0:h.right)=="number"?t.attrs.indent.right:0;s=Number.isFinite(w)?w:0,o=Number.isFinite(b)?b:0,a=s;const E=AT(t);if(!!((m=t.attrs)!=null&&m.numberingProperties)||!!(E!=null&&E.marker)){const x=typeof((y=E==null?void 0:E.marker)==null?void 0:y.textStartX)=="number"&&Number.isFinite(E.marker.textStartX)?E.marker.textStartX:typeof(E==null?void 0:E.textStartPx)=="number"&&Number.isFinite(E.textStartPx)?E.textStartPx:void 0;typeof x=="number"&&x>s&&(a=x)}}const l=a+o,c=Math.max(0,r-l);return l>r&&console.warn(`[mapPmToX] Paragraph indents (${l}px) exceed fragment width (${r}px) for block ${t.id}. This may indicate a layout miscalculation. Available width clamped to 0.`),exe(t,e,n,c,i)},Hie=t=>{if(t.kind!=="paragraph")return!1;const e=t.attrs;if(!e)return!1;const n=e.direction??e.dir??e.textDirection;return typeof n=="string"&&n.toLowerCase()==="rtl"?!0:typeof e.rtl=="boolean"?e.rtl:!1};function vmt(t){var a;const e=t.layout,n=t.blocks,r=t.measures,i=((a=t.presence)==null?void 0:a.maxVisible)??20,s=Array.from(t.remoteCursorState.values()).sort((l,c)=>c.updatedAt-l.updatedAt).slice(0,i),o=new Set;s.forEach(l=>{var u;o.add(l.clientId);const c=(u=t.remoteCursorOverlay)==null?void 0:u.querySelectorAll(`.presentation-editor__remote-selection[data-client-id="${l.clientId}"]`);c==null||c.forEach(d=>d.remove()),l.anchor===l.head?Vie({cursor:l,presence:t.presence,remoteCursorElements:t.remoteCursorElements,remoteCursorOverlay:t.remoteCursorOverlay,doc:t.doc,computeCaretLayoutRect:t.computeCaretLayoutRect,convertPageLocalToOverlayCoords:t.convertPageLocalToOverlayCoords,fallbackColors:t.fallbackColors,cursorStyles:t.cursorStyles}):Emt({cursor:l,layout:e,blocks:n,measures:r,pageGeometryHelper:t.pageGeometryHelper,presence:t.presence,remoteCursorOverlay:t.remoteCursorOverlay,doc:t.doc,convertPageLocalToOverlayCoords:t.convertPageLocalToOverlayCoords,fallbackColors:t.fallbackColors,cursorStyles:t.cursorStyles,maxSelectionRectsPerUser:t.maxSelectionRectsPerUser,defaultPageHeight:t.defaultPageHeight,fallbackPageHeight:t.fallbackPageHeight,renderCaret:()=>Vie({cursor:l,presence:t.presence,remoteCursorElements:t.remoteCursorElements,remoteCursorOverlay:t.remoteCursorOverlay,doc:t.doc,computeCaretLayoutRect:t.computeCaretLayoutRect,convertPageLocalToOverlayCoords:t.convertPageLocalToOverlayCoords,fallbackColors:t.fallbackColors,cursorStyles:t.cursorStyles})})}),t.remoteCursorElements.forEach((l,c)=>{o.has(c)||(l.remove(),t.remoteCursorElements.delete(c))})}function Vie(t){var a,l;const e=t.computeCaretLayoutRect(t.cursor.head),n=UU(t.cursor.user.color,t.cursor.clientId,t.fallbackColors);let r=t.remoteCursorElements.get(t.cursor.clientId);if(!r&&(r=t.doc.createElement("div"),r.className="presentation-editor__remote-caret",r.style.position="absolute",r.style.width=`${t.cursorStyles.CARET_WIDTH}px`,r.style.borderLeft=`${t.cursorStyles.CARET_WIDTH}px solid ${n}`,r.style.pointerEvents="none",r.style.transition="transform 50ms ease-out, height 50ms ease-out, opacity 100ms ease-out",r.style.willChange="transform",r.setAttribute("data-client-id",t.cursor.clientId.toString()),r.setAttribute("aria-hidden","true"),((a=t.presence)==null?void 0:a.showLabels)!==!1&&xmt({caretEl:r,cursor:t.cursor,presence:t.presence,doc:t.doc,fallbackColors:t.fallbackColors,cursorStyles:t.cursorStyles}),t.remoteCursorElements.set(t.cursor.clientId,r),(l=t.remoteCursorOverlay)==null||l.appendChild(r)),!e){r.style.opacity="0";return}const s=t.convertPageLocalToOverlayCoords(e.pageIndex,e.x,e.y);if(!s){r.style.opacity="0";return}r.style.opacity="1",r.style.transform=`translate(${s.x}px, ${s.y}px)`,r.style.height=`${Math.max(1,e.height)}px`,r.style.borderLeftColor=n;const o=r.querySelector(".presentation-editor__remote-label");o&&(o.style.backgroundColor=n)}function xmt(t){var s;const e=(s=t.presence)==null?void 0:s.labelFormatter;let n=e?e(t.cursor.user):t.cursor.user.name||t.cursor.user.email||"Anonymous";n.length>t.cursorStyles.MAX_LABEL_LENGTH&&(n=n.substring(0,t.cursorStyles.MAX_LABEL_LENGTH-1)+"");const r=UU(t.cursor.user.color,t.cursor.clientId,t.fallbackColors),i=t.doc.createElement("div");i.className="presentation-editor__remote-label",i.textContent=n,i.style.position="absolute",i.style.top=t.cursorStyles.LABEL_OFFSET,i.style.left="-1px",i.style.fontSize=`${t.cursorStyles.LABEL_FONT_SIZE}px`,i.style.backgroundColor=r,i.style.color="white",i.style.padding=t.cursorStyles.LABEL_PADDING,i.style.borderRadius="3px",i.style.whiteSpace="nowrap",i.style.pointerEvents="none",i.title=`${t.cursor.user.name||t.cursor.user.email}  editing`,t.caretEl.appendChild(i)}function Emt(t){var c,u;const e=Math.min(t.cursor.anchor,t.cursor.head),n=Math.max(t.cursor.anchor,t.cursor.head),r=dA(t.layout,t.blocks,t.measures,e,n,t.pageGeometryHelper??void 0)??[],i=UU(t.cursor.user.color,t.cursor.clientId,t.fallbackColors),s=((c=t.presence)==null?void 0:c.highlightOpacity)??.35,o=((u=t.layout.pageSize)==null?void 0:u.h)??t.fallbackPageHeight??t.defaultPageHeight,a=t.layout.pageGap??0;r.slice(0,t.maxSelectionRectsPerUser).forEach(d=>{var y;const f=d.y-d.pageIndex*(o+a),h=t.convertPageLocalToOverlayCoords(d.pageIndex,d.x,f);if(!h)return;const m=t.doc.createElement("div");m.className="presentation-editor__remote-selection",m.style.position="absolute",m.style.left=`${h.x}px`,m.style.top=`${h.y}px`,m.style.width=`${Math.max(1,d.width)}px`,m.style.height=`${Math.max(1,d.height)}px`,m.style.backgroundColor=i,m.style.opacity=s.toString(),m.style.borderRadius=t.cursorStyles.SELECTION_BORDER_RADIUS,m.style.pointerEvents="none",m.setAttribute("data-client-id",t.cursor.clientId.toString()),m.setAttribute("aria-hidden","true"),(y=t.remoteCursorOverlay)==null||y.appendChild(m)}),t.renderCaret()}const Smt=()=>{if(typeof window<"u"&&typeof window.requestAnimationFrame=="function")return{requestAnimationFrame:e=>window.requestAnimationFrame(e),cancelAnimationFrame:e=>window.cancelAnimationFrame(e)};const t=globalThis;return typeof t.requestAnimationFrame=="function"&&typeof t.cancelAnimationFrame=="function"?{requestAnimationFrame:e=>t.requestAnimationFrame(e),cancelAnimationFrame:e=>t.cancelAnimationFrame(e)}:{requestAnimationFrame:e=>{var r;return(r=t.setTimeout)==null?void 0:r.call(t,()=>e(Date.now()),0)},cancelAnimationFrame:e=>{var n;(n=t.clearTimeout)==null||n.call(t,e)}}};var Hh,eg,Vh,Uh,My,tg,V1,Sa,E6,gS,yS;class Amt extends cM{constructor(n){super();st(this,Sa);st(this,Hh,0);st(this,eg,0);st(this,Vh,!1);st(this,Uh,!1);st(this,My,!1);st(this,tg,null);st(this,V1);je(this,V1,(n==null?void 0:n.scheduler)??Smt())}getDocEpoch(){return F(this,Hh)}getLayoutEpoch(){return F(this,eg)}isLayoutUpdating(){return F(this,Vh)}setDocEpoch(n){!Number.isFinite(n)||n<0||n!==F(this,Hh)&&(je(this,Hh,n),pe(this,Sa,yS).call(this),pe(this,Sa,gS).call(this))}onLayoutStart(){F(this,Vh)||(je(this,Vh,!0),pe(this,Sa,yS).call(this))}onLayoutComplete(n){je(this,Vh,!1),Number.isFinite(n)&&n>=0&&je(this,eg,n),pe(this,Sa,gS).call(this)}onLayoutAbort(){je(this,Vh,!1),pe(this,Sa,gS).call(this)}requestRender(n){je(this,Uh,!0),n!=null&&n.immediate&&this.flushNow(),pe(this,Sa,gS).call(this)}flushNow(){F(this,Uh)&&pe(this,Sa,E6).call(this)&&(pe(this,Sa,yS).call(this),je(this,Uh,!1),this.emit("render",{docEpoch:F(this,Hh),layoutEpoch:F(this,eg)}))}destroy(){pe(this,Sa,yS).call(this),this.removeAllListeners()}}Hh=new WeakMap,eg=new WeakMap,Vh=new WeakMap,Uh=new WeakMap,My=new WeakMap,tg=new WeakMap,V1=new WeakMap,Sa=new WeakSet,E6=function(){return!F(this,Vh)&&F(this,eg)>=F(this,Hh)},gS=function(){F(this,Uh)&&pe(this,Sa,E6).call(this)&&(F(this,My)||(je(this,My,!0),je(this,tg,F(this,V1).requestAnimationFrame(()=>{je(this,My,!1),je(this,tg,null),F(this,Uh)&&pe(this,Sa,E6).call(this)&&(je(this,Uh,!1),this.emit("render",{docEpoch:F(this,Hh),layoutEpoch:F(this,eg)}))}))))},yS=function(){if(F(this,tg)!=null)try{F(this,V1).cancelAnimationFrame(F(this,tg))}finally{je(this,tg,null)}je(this,My,!1)};const Uie=new WeakSet;function _xe(t){var r,i;const e=typeof t.composedPath=="function"?t.composedPath():[];if(e.length>0){for(const s of e)if(Uie.has(s)||(r=s==null?void 0:s.hasAttribute)!=null&&r.call(s,"data-editor-ui-surface"))return!0;return!1}let n=t.target;for(;n;){if(Uie.has(n)||(i=n.hasAttribute)!=null&&i.call(n,"data-editor-ui-surface"))return!0;n=n.parentElement}return!1}const Nxe="__sdHandledBySlashMenu";var tk,Ly,Dy,ng,nk,Oy,Wh,U1,rk,Wn,Gd,bS,RB,S6,A6,Ixe,Rxe,wS,Mxe,vS,Lxe;class Tmt{constructor(e,n,r,i,s,o){st(this,Wn);st(this,tk);st(this,Ly);st(this,Dy);st(this,ng);st(this,nk);st(this,Oy);st(this,Wh,null);st(this,U1,!1);st(this,rk);je(this,tk,e),je(this,Ly,new Set([n])),je(this,Dy,r),je(this,ng,i),je(this,nk,s),je(this,Oy,[]),je(this,rk,(o==null?void 0:o.useWindowFallback)??!1)}bind(){pe(this,Wn,vS).call(this).forEach(s=>{pe(this,Wn,Gd).call(this,"keydown",pe(this,Wn,RB),s),pe(this,Wn,Gd).call(this,"keyup",pe(this,Wn,RB),s)}),pe(this,Wn,vS).call(this).forEach(s=>{pe(this,Wn,Gd).call(this,"compositionstart",pe(this,Wn,A6),s),pe(this,Wn,Gd).call(this,"compositionupdate",pe(this,Wn,A6),s),pe(this,Wn,Gd).call(this,"compositionend",pe(this,Wn,A6),s)}),pe(this,Wn,vS).call(this).forEach(s=>{pe(this,Wn,Gd).call(this,"beforeinput",pe(this,Wn,S6),s),pe(this,Wn,Gd).call(this,"input",pe(this,Wn,S6),s),pe(this,Wn,Gd).call(this,"textInput",pe(this,Wn,S6),s)}),pe(this,Wn,vS).call(this).forEach(s=>{pe(this,Wn,Gd).call(this,"contextmenu",pe(this,Wn,Ixe),s)})}destroy(){F(this,Oy).forEach(({type:e,handler:n,target:r,useCapture:i})=>{r.removeEventListener(e,n,i)}),je(this,Oy,[]),je(this,Wh,null),je(this,U1,!0)}notifyTargetChanged(){var n;if(F(this,U1))return;const e=F(this,Dy).call(this);if(e!==F(this,Wh)){if(F(this,Wh)){let r=null;typeof CompositionEvent<"u"?r=new CompositionEvent("compositionend",{data:"",bubbles:!0,cancelable:!0}):r=new Event("compositionend",{bubbles:!0,cancelable:!0});try{F(this,Wh).dispatchEvent(r)}catch(i){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to dispatch composition event:",i)}}je(this,Wh,e),(n=F(this,nk))==null||n.call(this,e??null)}}}tk=new WeakMap,Ly=new WeakMap,Dy=new WeakMap,ng=new WeakMap,nk=new WeakMap,Oy=new WeakMap,Wh=new WeakMap,U1=new WeakMap,rk=new WeakMap,Wn=new WeakSet,Gd=function(e,n,r,i=!1){const s=n.bind(this);F(this,Oy).push({type:e,handler:s,target:r,useCapture:i}),r.addEventListener(e,s,i)},bS=function(e,n){if(F(this,U1))return;const r=F(this,Dy).call(this);if(je(this,Wh,r),!(!r||r.isConnected===!1))try{(!r.dispatchEvent(n)||n.defaultPrevented)&&e.preventDefault()}catch(s){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to dispatch event to target:",s)}},RB=function(e){if(!F(this,ng).call(this)||pe(this,Wn,wS).call(this,e)||e.defaultPrevented||e.isComposing||e.keyCode===229||pe(this,Wn,Lxe).call(this,e))return;const n=new KeyboardEvent(e.type,{key:e.key,code:e.code,location:e.location,repeat:e.repeat,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0});pe(this,Wn,bS).call(this,e,n)},S6=function(e){F(this,ng).call(this)&&(pe(this,Wn,wS).call(this,e)||e.defaultPrevented||e.isComposing||queueMicrotask(()=>{if(e.defaultPrevented)return;let n;typeof InputEvent<"u"?n=new InputEvent(e.type,{data:e.data??e.data??null,inputType:e.inputType??"insertText",dataTransfer:e.dataTransfer??null,isComposing:e.isComposing??!1,bubbles:!0,cancelable:!0}):n=new Event(e.type,{bubbles:!0,cancelable:!0}),pe(this,Wn,bS).call(this,e,n)}))},A6=function(e){if(!F(this,ng).call(this)||pe(this,Wn,wS).call(this,e)||e.defaultPrevented)return;let n;typeof CompositionEvent<"u"?n=new CompositionEvent(e.type,{data:e.data??"",bubbles:!0,cancelable:!0}):n=new Event(e.type,{bubbles:!0,cancelable:!0}),pe(this,Wn,bS).call(this,e,n)},Ixe=function(e){if(!!e[Nxe]||!F(this,ng).call(this)||pe(this,Wn,wS).call(this,e)||e.defaultPrevented)return;const r=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey});pe(this,Wn,bS).call(this,e,r)},Rxe=function(e){const n=F(this,Dy).call(this);if(!n)return!1;const r=e.target;if(!r)return!1;const i=n,s=typeof i.contains=="function"?i.contains:null;return i===r?!0:s?s.call(i,r):!1},wS=function(e){return!!(pe(this,Wn,Rxe).call(this,e)||!pe(this,Wn,Mxe).call(this,e)||_xe(e))},Mxe=function(e){const n=typeof e.composedPath=="function"?e.composedPath():[];if(n.length)return n.some(i=>F(this,Ly).has(i));const r=e.target;return r?F(this,Ly).has(r):!1},vS=function(){const e=new Set(F(this,Ly));return F(this,rk)&&e.add(F(this,tk)),Array.from(e)},Lxe=function(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey};const kmt=/[\p{L}\p{N}'\u2018\u2019_~-]/u;function z9(t){return t?kmt.test(t):!1}function Cmt(t,e,n,r){if(r==="word"){const i=Tie(t,e),s=Tie(t,n);if(i&&s)return n>=e?{selAnchor:i.from,selHead:s.to}:{selAnchor:i.to,selHead:s.from}}else if(r==="para"){const i=kie(t,e),s=kie(t,n);if(i&&s)return n>=e?{selAnchor:i.from,selHead:s.to}:{selAnchor:i.to,selHead:s.from}}return{selAnchor:e,selHead:n}}function Dxe(t){if(!t)return[];const e=[];try{for(const n in t.nodes){if(n==="text")continue;const r=t.nodes[n];r&&(r.isAtom||r.isLeaf)&&e.push(n)}}catch{return[]}return e}const Wie=t=>typeof t=="object"&&t!==null;function _mt(t,e){if(!t||!Wie(e))return null;const n=new WeakMap,r=(s,o,a,l)=>{var y;const c=o.type,u=s.isText?"text":(y=s.type)==null?void 0:y.name;if(!u||c!==u)return!1;const d=a+(l?s.content.size:s.nodeSize);if(n.set(o,{start:a,end:d}),s.isLeaf)return!0;const f=Array.isArray(o.content)?o.content:[];if(s.childCount!==f.length)return!1;const h=a+(l?0:1);let m=!0;return s.forEach((w,b,E)=>{const A=f[E];if(!Wie(A)){m=!1;return}r(w,A,h+b,!1)||(m=!1)}),m};return r(t,e,0,!0)?n:null}function Nmt(t,e,n){const r=t.timeStamp??performance.now(),s=r-e.lastClickTime<=n.timeThresholdMs,o=Math.abs(t.clientX-e.lastClickPosition.x),a=Math.abs(t.clientY-e.lastClickPosition.y),l=o<=n.distanceThresholdPx&&a<=n.distanceThresholdPx;return{clickCount:s&&l?Math.min(e.clickCount+1,n.maxClickCount):1,lastClickTime:r,lastClickPosition:{x:t.clientX,y:t.clientY}}}function Imt(t){if(!t||!t.content)return 1;let e=1;return t.nodesBetween(0,t.content.size,(n,r)=>n.isTextblock?(e=r+1,!1):!0),e}function Rmt(t,e){if(!(t!=null&&t.doc)||e<0||e>t.doc.content.size)return null;const n=Oxe(t.doc,e);if(!n)return null;const r=n.start(),i=n.end(),s=Math.min(e+1,i),o=t.doc.textBetween(e,s,"\0","\0");if(!z9(o))return null;let a=e;for(;a>r;){const c=t.doc.textBetween(a-1,a,"\0","\0");if(!z9(c))break;a-=1}let l=e;for(;l<i;){const c=t.doc.textBetween(l,l+1,"\0","\0");if(!z9(c))break;l+=1}return a===l?null:{from:a,to:l}}function Mmt(t,e){if(!(t!=null&&t.doc))return null;const n=Oxe(t.doc,e);return n?{from:n.start(),to:n.end()}:null}function Oxe(t,e){var i,s;let r=t.resolve(e);for(;r.depth>0&&!((i=r.parent)!=null&&i.isTextblock||!r.parent||r.depth===0);){const o=r.before();if(o<0||o>t.content.size)return null;r=t.resolve(o)}return(s=r.parent)!=null&&s.isTextblock?r:null}function Lmt(t,e){const n=t;n instanceof HTMLElement&&(n.hasAttribute("tabindex")||(n.tabIndex=0),n.hasAttribute("role")||n.setAttribute("role","textbox"),n.hasAttribute("aria-multiline")||n.setAttribute("aria-multiline","true"),n.hasAttribute("aria-label")||n.setAttribute("aria-label","Document content area"),n.setAttribute("aria-readonly",e==="viewing"?"true":"false"))}function Dmt(t,e){var s,o;if(!t.ariaLiveRegion||t.sessionMode!=="body"||t.isDragging&&!(e!=null&&e.immediate))return t.currentTimeout;t.currentTimeout!=null&&clearTimeout(t.currentTimeout);const n=((o=(s=t.visibleHost)==null?void 0:s.ownerDocument)==null?void 0:o.defaultView)??window,i=!!(e!=null&&e.immediate)?0:150;return n.setTimeout(()=>{t.announceNow()},i)}function Omt(t){const e=t==null?void 0:t.selection;if(!e)return null;const n=e.from,r=e.to;if(typeof n!="number"||typeof r!="number")return null;const i=n,s=r;let o;if(e instanceof ei)o="Table cells selected.";else if(i===s)o="Cursor moved.";else{const l=Math.max(0,Math.min(i,s)),c=Math.max(0,Math.max(i,s)),u=t==null?void 0:t.doc;let d="";if(u&&typeof u.textBetween=="function")try{const f=Math.min(c,l+256);d=u.textBetween(l,f," "," ").replace(/\s+/g," ").trim(),f<c&&d.length>0&&(d=`${d}`)}catch{}o=d.length>0?`Selected: ${d}`:"Selection updated."}const a=`${i}:${s}:${o}`;return{from:i,to:s,message:o,key:a}}function Pmt(t){const e=t.layout.pages.length;if(e<=0)return[];const n=new Set,r=i=>{if(!Number.isFinite(i))return;const s=Math.floor(i);s<0||s>=e||(n.add(s),t.includeDragBuffer&&(s-1>=0&&n.add(s-1),s+1<e&&n.add(s+1)))};if(t.isDragging&&t.dragAnchorPageIndex!=null&&t.dragLastHitPageIndex!=null)r(t.dragAnchorPageIndex),r(t.dragLastHitPageIndex);else if(t.selection){const i=t.selection.anchor??t.selection.from,s=t.selection.head??t.selection.to,o=kT(t.layout,t.blocks,t.measures,i),a=kT(t.layout,t.blocks,t.measures,s);o&&r(o.pageIndex),a&&r(a.pageIndex),t.docSize!=null&&(!o&&i<=1&&r(0),!a&&s>=t.docSize&&r(e-1))}for(const i of t.extraPages??[])r(i);return Array.from(n).sort((i,s)=>i-s)}function Fmt({selection:t,layout:e,localSelectionLayer:n,blocks:r,measures:i,cellAnchorTableBlockId:s,convertPageLocalToOverlayCoords:o}){var A;if(!t||!e||!e.pages){console.warn("[renderCellSelectionOverlay] Invalid input parameters");return}const a=t.$anchorCell;if(!a){console.warn("[renderCellSelectionOverlay] No anchor cell in selection");return}let l=a.depth;for(;l>0&&a.node(l).type.name!=="table";)l--;if(l===0&&a.node(0).type.name!=="table"){console.warn("[renderCellSelectionOverlay] Could not find table node in selection hierarchy");return}const c=a.node(l),u=a.start(l)-1;let d;if(s&&(d=r.find(x=>x.kind==="table"&&x.id===s)),!d){const x=`${u}-table`;d=r.find(T=>T.kind==="table"&&T.id===x)}if(!d){const x=r.filter(T=>T.kind==="table");x.length===1&&(d=x[0])}if(!d)return;const f=[];if(e.pages.forEach((x,T)=>{x.fragments.forEach(R=>{R.kind==="table"&&R.blockId===d.id&&f.push({fragment:R,pageIndex:T})})}),f.length===0)return;let h;try{h=Ei.get(c)}catch(x){console.error("[renderCellSelectionOverlay] TableMap.get failed:",x);return}const m=[];t.forEachCell((x,T)=>{var O,$;const R=T-u-1,k=h.map.indexOf(R);if(k===-1)return;const _=Math.floor(k/h.width),N=k%h.width,L=(O=x.attrs)==null?void 0:O.colspan,M=($=x.attrs)==null?void 0:$.rowspan,C=typeof L=="number"&&Number.isFinite(L)&&L>0?L:1,D=typeof M=="number"&&Number.isFinite(M)&&M>0?M:1;m.push({row:_,col:N,colspan:C,rowspan:D})});const y=r.indexOf(d),w=y!==-1?i[y]:void 0,b=(w==null?void 0:w.kind)==="table"?w:void 0,E=[];if(b!=null&&b.rows){let x=0;for(const T of b.rows)E.push({y:x,height:T.height}),x+=T.height}for(const{fragment:x,pageIndex:T}of f){const{columnBoundaries:R}=x.metadata??{};if(R)for(const{row:k,col:_,colspan:N,rowspan:L}of m){if(k<x.fromRow||k>=x.toRow)continue;const M=R.find(se=>se.index===_);if(!M)continue;let C=M.width;if(N>1)for(let se=1;se<N;se++){const Q=R.find(J=>J.index===_+se);Q&&(C+=Q.width)}let D,O;if(k>=0&&k<E.length&&E[k]){const se=x.fromRow>0&&x.fromRow<E.length&&E[x.fromRow]?E[x.fromRow].y:0;if(D=E[k].y-se,O=E[k].height,L>1)for(let Q=1;Q<L&&k+Q<E.length&&E[k+Q];Q++)O+=E[k+Q].height}else{const se=x.toRow-x.fromRow,Q=se>0?x.height/se:20;D=(k-x.fromRow)*Q,O=Q*L}const $=x.x+M.x,U=x.y+D,W=o(T,$,U);if(!W)continue;const ce=(A=n.ownerDocument)==null?void 0:A.createElement("div");ce&&(ce.className="presentation-editor__cell-selection-rect",ce.style.position="absolute",ce.style.left=`${W.x}px`,ce.style.top=`${W.y}px`,ce.style.width=`${Math.max(1,C)}px`,ce.style.height=`${Math.max(1,O)}px`,ce.style.backgroundColor="rgba(51, 132, 255, 0.35)",ce.style.pointerEvents="none",n.appendChild(ce))}}}function Bmt({localSelectionLayer:t,rects:e,pageHeight:n,pageGap:r,convertPageLocalToOverlayCoords:i}){e.forEach(s=>{var c;const o=s.y-s.pageIndex*(n+r),a=i(s.pageIndex,s.x,o);if(!a)return;const l=(c=t.ownerDocument)==null?void 0:c.createElement("div");l&&(l.className="presentation-editor__selection-rect",l.style.position="absolute",l.style.left=`${a.x}px`,l.style.top=`${a.y}px`,l.style.width=`${Math.max(1,s.width)}px`,l.style.height=`${Math.max(1,s.height)}px`,l.style.backgroundColor="rgba(51, 132, 255, 0.35)",l.style.borderRadius="2px",l.style.pointerEvents="none",t.appendChild(l))})}function jmt({localSelectionLayer:t,caretLayout:e,convertPageLocalToOverlayCoords:n}){var o;const r=n(e.pageIndex,e.x,e.y);if(!r)return;const i=Math.max(1,e.height),s=(o=t.ownerDocument)==null?void 0:o.createElement("div");s&&(s.className="presentation-editor__selection-caret",s.style.position="absolute",s.style.left=`${r.x}px`,s.style.top=`${r.y}px`,s.style.width="2px",s.style.height=`${i}px`,s.style.backgroundColor="#000000",s.style.borderRadius="1px",s.style.pointerEvents="none",t.appendChild(s))}function $mt({viewportHost:t,visibleHost:e,zoom:n},r,i,s,o,a){const l=Array.from(t.querySelectorAll(".superdoc-line"));if(l.length===0)return null;for(const c of l){const u=Number(c.dataset.pmStart??"NaN"),d=Number(c.dataset.pmEnd??"NaN");if(!Number.isFinite(u)||!Number.isFinite(d)||r<u||r>d)continue;const f=Array.from(c.querySelectorAll("span[data-pm-start]"));for(const y of f){const w=Number(y.dataset.pmStart??"NaN"),b=Number(y.dataset.pmEnd??"NaN");if(!Number.isFinite(w)||!Number.isFinite(b)||r<w||r>b)continue;const E=y.firstChild;if(!E||E.nodeType!==Node.TEXT_NODE){const N=y.getBoundingClientRect(),L=t.getBoundingClientRect();return{pageIndex:a,x:(N.left-L.left+e.scrollLeft)/n,y:(N.top-L.top+e.scrollTop)/n,height:N.height/n}}const A=E.textContent??"",x=Math.max(0,Math.min(A.length,r-w)),T=document.createRange();T.setStart(E,x),T.setEnd(E,x);const R=T.getBoundingClientRect(),k=t.getBoundingClientRect(),_=c.getBoundingClientRect();return{pageIndex:a,x:(R.left-k.left+e.scrollLeft)/n,y:(_.top-k.top+e.scrollTop)/n,height:_.height/n}}const h=c.getBoundingClientRect(),m=t.getBoundingClientRect();return{pageIndex:a,x:(h.left-m.left+e.scrollLeft)/n,y:(h.top-m.top+e.scrollTop)/n,height:h.height/n}}return null}function zmt(t,e,n,r,i){if(e.kind!=="paragraph"||t.kind!=="paragraph")return null;for(let s=n;s<r;s+=1){const o=e.lines[s];if(!o)continue;const a=qb(t,o);if(!(a.pmStart==null||a.pmEnd==null)&&i>=a.pmStart&&i<=a.pmEnd)return{line:o,index:s}}return null}function Hmt(t,e,n){var i;let r=0;for(let s=e;s<n;s+=1)r+=((i=t[s])==null?void 0:i.lineHeight)??0;return r}function Vmt({layout:t,blocks:e,measures:n,painterHost:r,viewportHost:i,visibleHost:s,zoom:o},a,l=!0){var J,K,re,X;if(!t)return null;let c=a,u=kT(t,e,n,a);if(!u){const me=[a-1,a+1,a-2,a+2].filter(G=>G>=0);for(const G of me){const B=kT(t,e,n,G);if(B){u=B,c=G;break}}if(!u)return null}const d=u.block,f=u.measure;if(u.fragment.kind==="table"&&(d==null?void 0:d.kind)==="table"&&(f==null?void 0:f.kind)==="table")return $mt({viewportHost:i,visibleHost:s,zoom:o},c,u.fragment,d,f,u.pageIndex);if(!d||d.kind!=="paragraph"||(f==null?void 0:f.kind)!=="paragraph"||u.fragment.kind!=="para")return null;const h=u.fragment,m=zmt(d,f,h.fromLine,h.toLine,c);if(!m)return null;const{line:y,index:w}=m,b=qb(d,y);if(b.pmStart==null||b.pmEnd==null)return null;const E=mS(d,y,c),A=h.markerWidth??((J=f.marker)==null?void 0:J.markerWidth)??0,x=h.markerTextWidth??((K=f.marker)==null?void 0:K.markerTextWidth)??void 0,T=w===h.fromLine,R=EB(A,d),k=AT(d),_=AB((re=d.attrs)==null?void 0:re.indent),N=SB({isFirstLine:T,isListItem:R,markerWidth:A,markerTextWidth:x,paraIndentLeft:_.left,firstLineIndent:_.firstLine,hangingIndent:_.hanging,wordLayout:k}),L=Math.max(0,h.width-(N+_.right)),M=exe(d,y,E,L),C=h.x+N+M,D=Hmt(f.lines,h.fromLine,w),O=h.y+D,$={pageIndex:u.pageIndex,x:C,y:O,height:y.lineHeight},U=r==null?void 0:r.querySelector(`.superdoc-page[data-page-index="${u.pageIndex}"]`),W=U==null?void 0:U.getBoundingClientRect();let ce=null,se=null;const Q=U==null?void 0:U.querySelectorAll("span[data-pm-start][data-pm-end]");for(const me of Array.from(Q??[])){const G=Number(me.dataset.pmStart),B=Number(me.dataset.pmEnd);if(c>=G&&c<=B&&((X=me.firstChild)==null?void 0:X.nodeType)===Node.TEXT_NODE){const z=me.firstChild,de=Math.min(c-G,z.length),Y=document.createRange();if(Y.setStart(z,de),Y.setEnd(z,de),typeof Y.getBoundingClientRect!="function")break;const ee=Y.getBoundingClientRect();W&&(ce=(ee.left-W.left)/o,se=(ee.top-W.top)/o);break}}return l&&ce!=null&&se!=null?{pageIndex:u.pageIndex,x:ce,y:se,height:y.lineHeight}:$}function Umt(t,e){if(!t)return{};const n={};return t.descendants((r,i)=>{const s=r.marks||[];for(const o of s){const a=Wmt(o,e);if(!a)continue;const l=i+r.nodeSize;n[a]?(n[a].start=Math.min(n[a].start,i),n[a].end=Math.max(n[a].end,l)):n[a]={threadId:a,start:i,end:l}}}),n}function Wmt(t,e){if(t.type.name===e.commentMarkName)return t.attrs.commentId||t.attrs.importedId;if(e.trackChangeMarkNames.includes(t.type.name))return t.attrs.id}function qmt(t,e,n){var E,A,x,T,R,k,_;const i=(E=t==null?void 0:t.pages)==null?void 0:E[e],o=(n??{}).pageMargins??{left:1,right:1,top:1,bottom:1},a={left:typeof o.left=="number"?o.left:1,right:typeof o.right=="number"?o.right:1,top:typeof o.top=="number"?o.top:1,bottom:typeof o.bottom=="number"?o.bottom:1};if(!i)return{pageSize:{width:8.5,height:11},pageMargins:a,sectionIndex:0,orientation:"portrait"};const l=i.orientation==="landscape"||i.orientation==="portrait"?i.orientation:"portrait",c={w:8.5*96,h:1056},u={w:1056,h:8.5*96},d=l==="landscape"?u:c,f=((A=i.size)==null?void 0:A.w)??d.w,h=((x=i.size)==null?void 0:x.h)??d.h,m=((T=i.margins)==null?void 0:T.left)??a.left*96,y=((R=i.margins)==null?void 0:R.right)??a.right*96,w=((k=i.margins)==null?void 0:k.top)??a.top*96,b=((_=i.margins)==null?void 0:_.bottom)??a.bottom*96;return{pageSize:{width:f/96,height:h/96},pageMargins:{left:m/96,right:y/96,top:w/96,bottom:b/96},sectionIndex:i.sectionIndex??0,orientation:l}}function Gmt(t,e,n){const r=new Map,i=new Map,s=o=>{if(i.has(o)){const u=i.get(o);return{pmStart:u.pmStart,pmEnd:u.pmEnd}}const a=n.find(u=>u.id===o);if(!a||a.kind!=="paragraph")return i.set(o,{pmStart:null,pmEnd:null,hasFragmentPositions:!1}),{pmStart:null,pmEnd:null};let l=null,c=null;for(const u of a.runs)u.pmStart!=null&&(l=l==null?u.pmStart:Math.min(l,u.pmStart)),u.pmEnd!=null&&(c=c==null?u.pmEnd:Math.max(c,u.pmEnd));return i.set(o,{pmStart:l,pmEnd:c,hasFragmentPositions:!1}),{pmStart:l,pmEnd:c}};return t.forEach((o,a)=>{for(const l of e.pages)for(const c of l.fragments){if(c.kind!=="para")continue;let u=c.pmStart,d=c.pmEnd;if(u==null||d==null){const f=s(c.blockId);f.pmStart!=null&&f.pmEnd!=null&&(u=f.pmStart,d=f.pmEnd)}else{const f=i.get(c.blockId);i.set(c.blockId,{pmStart:(f==null?void 0:f.pmStart)??u,pmEnd:(f==null?void 0:f.pmEnd)??d,hasFragmentPositions:!0})}if(!(u==null||d==null)&&o>=u&&o<d){r.set(a,l.number);return}}}),r}async function Kmt({anchor:t,layout:e,blocks:n,measures:r,bookmarks:i,pageGeometryHelper:s,painterHost:o,scrollPageIntoView:a,waitForPageMount:l,getActiveEditor:c,timeoutMs:u}){var E;if(!t||!e)return!1;const d=t.startsWith("#")?t.slice(1):t;if(!d)return!1;const f=i.get(d);if(f==null)return!1;const m=(dA(e,n,r,f,f+1,s)??[])[0];let y=(m==null?void 0:m.pageIndex)??null;if(y==null){let A=null,x=null;for(const T of e.pages){for(const R of T.fragments){if(R.kind!=="para")continue;const k=R.pmStart,_=R.pmEnd;if(!(k==null||_==null)){if(f>=k&&f<_){y=T.number-1;break}k>f&&(x===null||k<x)&&(A=T.number-1,x=k)}}if(y!=null)break}y==null&&A!=null&&(y=A)}if(y==null)return!1;a(y),await l(y,u);const w=o.querySelector(`[data-page-index="${y}"]`);w&&w.scrollIntoView({behavior:"instant",block:"start"});const b=c();return(E=b==null?void 0:b.commands)!=null&&E.setTextSelection?b.commands.setTextSelection({from:f,to:f}):console.warn("[PresentationEditor] goToAnchor: Navigation succeeded but could not move caret (editor commands unavailable)"),!0}function Xmt(t,e,n){var d;if(!t||!t.block||typeof t.block.id!="string")return console.warn("[getCellPosFromTableHit] Invalid tableHit input:",t),null;if(typeof t.cellRowIndex!="number"||typeof t.cellColIndex!="number"||t.cellRowIndex<0||t.cellColIndex<0)return console.warn("[getCellPosFromTableHit] Invalid cell indices:",{row:t.cellRowIndex,col:t.cellColIndex}),null;if(!e)return null;const i=n.filter(f=>f.kind==="table").findIndex(f=>f.id===t.block.id);if(i===-1)return null;let s=null,o=0;try{e.descendants((f,h)=>{if(f.type.name==="table"){if(o===i)return s=h,!1;o++}return!0})}catch(f){return console.error("[getCellPosFromTableHit] Error during document traversal:",f),null}if(s===null)return null;const a=e.nodeAt(s);if(!a||a.type.name!=="table")return null;const l=t.cellRowIndex,c=t.cellColIndex;if(l>=a.childCount)return console.warn("[getCellPosFromTableHit] Target row index out of bounds:",{targetRowIndex:l,tableChildCount:a.childCount}),null;let u=s+1;for(let f=0;f<a.childCount&&f<=l;f++){const h=a.child(f);if(f===l){u+=1;let m=0;for(let y=0;y<h.childCount;y++){const w=h.child(y),b=(d=w.attrs)==null?void 0:d.colspan,E=typeof b=="number"&&Number.isFinite(b)&&b>0?b:1;if(c>=m&&c<m+E)return u;u+=w.nodeSize,m+=E}return console.warn("[getCellPosFromTableHit] Target column not found in row:",{targetColIndex:c,logicalColReached:m,rowCellCount:h.childCount}),null}else u+=h.nodeSize}return null}function Ymt(t,e,n){if(!e)return null;const i=n.filter(a=>a.kind==="table").findIndex(a=>a.id===t.block.id);if(i===-1)return null;let s=null,o=0;return e.descendants((a,l)=>{if(a.type.name==="table"){if(o===i)return s=l,!1;o++}return!0}),s}function Zmt(t,e,n){return e?!t||t.block.id!==e.tableBlockId||t.cellRowIndex===e.cellRowIndex&&t.cellColIndex===e.cellColIndex?n==="active":!0:!1}function Jmt(t,e,n,r,i,s,o,a){var f;if(!t)return null;let l=0,c=null;if(a){const h=a.getPageIndexAtY(i)??a.getNearestPageIndex(i);h!=null&&t.pages[h]&&(c={pageIndex:h,page:t.pages[h]},l=a.getPageTop(h))}if(!c){const h=t.pageGap??o;for(let m=0;m<t.pages.length;m++){const y=t.pages[m],w=((f=y.size)==null?void 0:f.h)??s;if(i>=l&&i<l+w){c={pageIndex:m,page:y};break}l+=w+h}}if(!c)return null;const u=i-l;return kxe(c,e,n,{x:r,y:u})}function Pxe(t){if(!t||typeof t!="object")return!1;const e=t;return typeof e.fieldId=="string"&&typeof e.fieldType=="string"&&typeof e.displayLabel=="string"&&typeof e.type=="string"}const MB="fieldAnnotation";function Qmt({painterHost:t,getActiveEditor:e,hitTest:n,scheduleSelectionUpdate:r}){return cmt(t,{onDragOver:i=>{var u,d;if(!i.hasFieldAnnotation||i.event.clientX===0)return;const s=e();if(!(s!=null&&s.isEditable))return;const o=n(i.clientX,i.clientY),a=(u=s.state)==null?void 0:u.doc;if(!o||!a)return;const l=Math.min(Math.max(o.pos,1),a.content.size),c=s.state.selection;if(!(c instanceof Vt&&c.from===l&&c.to===l))try{const f=s.state.tr.setSelection(Vt.create(a,l)).setMeta("addToHistory",!1);(d=s.view)==null||d.dispatch(f),r()}catch{}},onDrop:i=>{var u,d;if(i.event.preventDefault(),i.event.stopPropagation(),i.pmPosition===null)return;const s=e(),{state:o,view:a}=s;if(!o||!a)return;const l=i.data.fieldId;if(l){const f=i.pmPosition;let h=null,m=null,y=null;if(o.doc.descendants((E,A)=>E.type.name==="fieldAnnotation"&&E.attrs.fieldId===l?(h=A,m=A+E.nodeSize,y=E,!1):!0),h===null||m===null||!y||f>=h&&f<=m)return;const w=o.tr;w.delete(h,m);const b=w.mapping.map(f);if(b<0||b>w.doc.content.size)return;w.insert(b,y),w.setMeta("uiEvent","drop"),a.dispatch(w);return}const c=i.data.attributes;if(c&&Pxe(c)){((d=(u=s.commands)==null?void 0:u.addFieldAnnotation)==null?void 0:d.call(u,i.pmPosition,c,!0))&&r();return}s.emit("fieldAnnotationDropped",{sourceField:i.data,editor:s,coordinates:{pos:i.pmPosition}})}})}function egt({getActiveEditor:t,hitTest:e,scheduleSelectionUpdate:n}){return r=>{var f,h,m,y;const i=t();if(!(i!=null&&i.isEditable))return;r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="copy");const s=r.dataTransfer;if(!(((f=s==null?void 0:s.types)==null?void 0:f.includes(MB))||!!((h=s==null?void 0:s.getData)!=null&&h.call(s,MB))))return;const a=e(r.clientX,r.clientY),l=(m=i.state)==null?void 0:m.doc;if(!a||!l)return;const c=Math.min(Math.max(a.pos,1),l.content.size),u=i.state.selection;if(!(u instanceof Vt&&u.from===c&&u.to===c))try{const w=i.state.tr.setSelection(Vt.create(l,c)).setMeta("addToHistory",!1);(y=i.view)==null||y.dispatch(w),n()}catch(w){_e.env.NODE_ENV==="development"&&console.debug("[PresentationEditor] Drag position update skipped:",w)}}}function tgt({getActiveEditor:t,hitTest:e,scheduleSelectionUpdate:n}){return r=>{var m,y,w,b,E,A,x,T,R,k,_,N,L,M,C;const i=t();if(!(i!=null&&i.isEditable)||(y=(m=r.dataTransfer)==null?void 0:m.types)!=null&&y.includes("application/x-field-annotation"))return;r.preventDefault(),r.stopPropagation();const s=(w=r.dataTransfer)==null?void 0:w.getData(MB);if(!s)return;const o=e(r.clientX,r.clientY),a=(b=i.state)==null?void 0:b.selection,l=(a==null?void 0:a.from)??((A=(E=i.state)==null?void 0:E.doc)==null?void 0:A.content.size)??null,c=(o==null?void 0:o.pos)??l;if(c==null)return;let u=null;try{u=JSON.parse(s)}catch{return}const{attributes:d,sourceField:f}=u??{};if((x=i.emit)==null||x.call(i,"fieldAnnotationDropped",{sourceField:f,editor:i,coordinates:o,pos:c}),d&&Pxe(d)){(R=(T=i.commands)==null?void 0:T.addFieldAnnotation)==null||R.call(T,c,d,!0);const D=Math.min(c+1,((_=(k=i.state)==null?void 0:k.doc)==null?void 0:_.content.size)??c+1),O=(N=i.state)==null?void 0:N.tr.setSelection(Vt.create(i.state.doc,D));O&&((L=i.view)==null||L.dispatch(O)),n()}const h=(M=i.view)==null?void 0:M.dom;h&&(h.focus(),(C=i.view)==null||C.focus())}}var YU=(t=>(t.CONTINUOUS="continuous",t.NEXT_PAGE="nextPage",t.EVEN_PAGE="evenPage",t.ODD_PAGE="oddPage",t))(YU||{});const Fxe="nextPage",Bxe="continuous",jxe=1440,$xe=96,qie=.5;function Vm(t){const e=Number(t);return Number.isFinite(e)?e/jxe*$xe:void 0}function ngt(t){if(t==null)return 1;const e=Number(t);return Number.isFinite(e)&&e>0?e:1}function rgt(t){if(t==null)return qie;const e=Number(t);return Number.isFinite(e)?e/jxe:qie}function igt(t){const e=t.sectionMargins;return{headerPx:typeof(e==null?void 0:e.header)=="number"?e.header*96:void 0,footerPx:typeof(e==null?void 0:e.footer)=="number"?e.footer*96:void 0}}function sgt(t){var r;const e=t.find(i=>(i==null?void 0:i.name)==="w:type"),n=(r=e==null?void 0:e.attributes)==null?void 0:r["w:val"];return n==="continuous"||n==="nextPage"||n==="evenPage"||n==="oddPage"?n:"nextPage"}function ogt(t){const e=t.find(l=>(l==null?void 0:l.name)==="w:pgSz");if(!(e!=null&&e.attributes))return{pageSizePx:void 0,orientation:void 0};const n=e.attributes,r=n["w:w"]!=null?Vm(n["w:w"]):void 0,i=n["w:h"]!=null?Vm(n["w:h"]):void 0;let s;r!=null&&i!=null&&(s={w:r,h:i});let o;const a=n["w:orient"];return a==="portrait"||a==="landscape"?o=a:r!=null&&i!=null&&(o=i>r?"portrait":"landscape"),{pageSizePx:s,orientation:o}}function agt(t,e,n){const r=t.find(s=>(s==null?void 0:s.name)==="w:pgMar"),i=(r==null?void 0:r.attributes)||{};return{headerPx:e??(i["w:header"]!=null?Vm(i["w:header"]):void 0),footerPx:n??(i["w:footer"]!=null?Vm(i["w:footer"]):void 0),topPx:i["w:top"]!=null?Vm(i["w:top"]):void 0,rightPx:i["w:right"]!=null?Vm(i["w:right"]):void 0,bottomPx:i["w:bottom"]!=null?Vm(i["w:bottom"]):void 0,leftPx:i["w:left"]!=null?Vm(i["w:left"]):void 0}}function Gie(t,e){const n=t.filter(i=>(i==null?void 0:i.name)===e);if(!n.length)return;const r={};return n.forEach(i=>{var l,c;const s=(l=i==null?void 0:i.attributes)==null?void 0:l["w:type"],o=s==="first"||s==="even"||s==="odd"||s==="default"?s:"default",a=(c=i==null?void 0:i.attributes)==null?void 0:c["r:id"];(typeof a=="string"||typeof a=="number")&&(r[o]=String(a))}),Object.keys(r).length?r:void 0}function lgt(t){const e=t.find(l=>(l==null?void 0:l.name)==="w:pgNumType");if(!(e!=null&&e.attributes))return;const n=e.attributes["w:fmt"],i=["decimal","lowerLetter","upperLetter","lowerRoman","upperRoman","numberInDash"].includes(n)?n:void 0,s=e.attributes["w:start"],o=s!=null?Number(s):void 0;return{format:i??(Number.isFinite(o)?"decimal":void 0),...Number.isFinite(o)?{start:Number(o)}:{}}}function cgt(t){const e=t.find(i=>(i==null?void 0:i.name)==="w:cols");if(!(e!=null&&e.attributes))return;const n=ngt(e.attributes["w:num"]),r=rgt(e.attributes["w:space"]);return{count:n,gap:r*$xe}}function ugt(t){const e=t.find(r=>(r==null?void 0:r.name)==="w:vAlign");if(!(e!=null&&e.attributes))return;const n=e.attributes["w:val"];if(n==="top"||n==="center"||n==="bottom"||n==="both")return n}function zxe(t){const e=t.attrs??{};let{headerPx:n,footerPx:r}=igt(e);const i=typeof e.paragraphProperties=="object"&&e.paragraphProperties!==null?e.paragraphProperties:void 0,s=i!=null&&i.sectPr&&typeof i.sectPr=="object"&&"elements"in i.sectPr&&Array.isArray(i.sectPr.elements)?i.sectPr.elements:void 0;if(!s)return n==null&&r==null?null:{headerPx:n,footerPx:r};const o=sgt(s),{pageSizePx:a,orientation:l}=ogt(s),c=s.some(x=>(x==null?void 0:x.name)==="w:titlePg"),u=agt(s,n,r);n=u.headerPx,r=u.footerPx;const{topPx:d,rightPx:f,bottomPx:h,leftPx:m}=u,y=Gie(s,"w:headerReference"),w=Gie(s,"w:footerReference"),b=lgt(s),E=cgt(s),A=ugt(s);return{headerPx:n,footerPx:r,topPx:d,rightPx:f,bottomPx:h,leftPx:m,type:o,pageSizePx:a,orientation:l,columnsPx:E,titlePg:c,headerRefs:y,footerRefs:w,numbering:b,vAlign:A}}function ZU(t){return typeof t=="object"&&t!==null&&t.type==="element"&&t.name==="w:sectPr"}function dgt(t){if(t.type!=="paragraph"||!t.attrs)return!1;const n=t.attrs.paragraphProperties;if(!n||typeof n!="object")return!1;const r=n.sectPr;return ZU(r)||typeof r=="object"&&r!==null&&"elements"in r&&Array.isArray(r.elements)}function fgt(t){if(!t.attrs)return null;const n=t.attrs.paragraphProperties;if(!n||typeof n!="object")return null;const r=n.sectPr;return ZU(r)?r:null}function LB(t,e,n){return{kind:"sectionBreak",id:e("sectionBreak"),margins:t.margins??{header:0,footer:0},type:t.type,attrs:{source:"sectPr",sectionIndex:t.sectionIndex,...n},...t.pageSize&&{pageSize:t.pageSize},...t.orientation&&{orientation:t.orientation},...t.columns&&{columns:t.columns},...t.numbering?{numbering:t.numbering}:{},...t.headerRefs&&{headerRefs:t.headerRefs},...t.footerRefs&&{footerRefs:t.footerRefs},...t.vAlign&&{vAlign:t.vAlign}}}function hgt(t,e){return e?!!(t.orientation&&e.orientation&&t.orientation!==e.orientation||t.pageSize&&e.pageSize&&(t.pageSize.w!==e.pageSize.w||t.pageSize.h!==e.pageSize.h)):!1}function pgt(t){return!1}const zI=0;function mgt(t,e,n,r){const i=t.attrs??{},s=i==null?void 0:i.paragraphProperties,o=s==null?void 0:s.sectPr;if(!o)return!0;const a=Array.isArray(o.elements)&&o.elements.length>0,l=(()=>{const u=i.sectionMargins;return u?u.header!=null||u.footer!=null:!1})(),c=e===n-1&&!r;return!a&&!l&&!c}function ggt(t){const e=[];let n=0;if(t.content)for(const r of t.content)r.type==="paragraph"&&(dgt(r)&&e.push({index:n,node:r}),n++);return{paragraphs:e,totalCount:n}}function ygt(t,e){const n=[];let r=0;return t.forEach((i,s)=>{if(mgt(i.node,s,t.length,e))return;const o=zxe(i.node);if(!o)return;const a=fgt(i.node),l=o.headerPx!=null||o.footerPx!=null||o.topPx!=null||o.rightPx!=null||o.bottomPx!=null||o.leftPx!=null,c={sectionIndex:s,startParagraphIndex:r,endParagraphIndex:i.index,sectPr:a,margins:l?{header:o.headerPx??zI,footer:o.footerPx??zI,top:o.topPx,right:o.rightPx,bottom:o.bottomPx,left:o.leftPx}:null,pageSize:o.pageSizePx??null,orientation:o.orientation??null,columns:o.columnsPx??null,type:o.type??Fxe,titlePg:o.titlePg??!1,headerRefs:o.headerRefs,footerRefs:o.footerRefs,numbering:o.numbering,vAlign:o.vAlign};n.push(c),r=i.index+1}),n}function bgt(t,e){e!=null&&e.sectionMetadata&&(e.sectionMetadata.length=0,t.forEach(n=>{var r;(r=e.sectionMetadata)==null||r.push({sectionIndex:n.sectionIndex,headerRefs:n.headerRefs,footerRefs:n.footerRefs,numbering:n.numbering,titlePg:n.titlePg})}))}function wgt(t,e,n,r){const i=Math.max(0,Math.min(e,Math.max(n-1,0))),o=zxe({attrs:{paragraphProperties:{sectPr:t}}});if(!o)return null;const a=o.headerPx!=null||o.footerPx!=null||o.topPx!=null||o.rightPx!=null||o.bottomPx!=null||o.leftPx!=null;return{sectionIndex:r,startParagraphIndex:i,endParagraphIndex:n-1,sectPr:t,margins:a?{header:o.headerPx??zI,footer:o.footerPx??zI,top:o.topPx,right:o.rightPx,bottom:o.bottomPx,left:o.leftPx}:null,pageSize:o.pageSizePx??null,orientation:o.orientation??null,columns:o.columnsPx??null,type:o.type??Bxe,titlePg:o.titlePg??!1,headerRefs:o.headerRefs,footerRefs:o.footerRefs,numbering:o.numbering,vAlign:o.vAlign}}function vgt(t,e,n){return{sectionIndex:n,startParagraphIndex:t,endParagraphIndex:e-1,sectPr:null,margins:null,pageSize:null,orientation:null,columns:null,type:Bxe,titlePg:!1,headerRefs:void 0,footerRefs:void 0}}function xgt(t,e){const{paragraphs:n,totalCount:r}=ggt(t),s=ygt(n,!!e),o=s.length>0?s[s.length-1].endParagraphIndex+1:0;if(ZU(e)){const a=wgt(e,Math.min(o,r),r,s.length);a&&s.push(a)}else if(s.length>0){const a=vgt(Math.min(o,r),r,s.length);a&&(a.type=Fxe,s.push(a))}return s}const Egt=1440,Sgt=96,JU=96/72;YU.NEXT_PAGE;YU.CONTINUOUS;const Agt=["review","original","final","off"],xC={enableRichHyperlinks:!1},Tgt=new Set(["image","hardBreak","lineBreak","page-number","total-page-number","passthroughInline","bookmarkEnd"]),Kie=new Map([["page-number","pageNumber"],["total-page-number","totalPageCount"]]),kgt=t=>typeof t=="string"&&Agt.includes(t),xS=t=>"text"in t&&t.kind!=="tab",Xie=t=>{xS(t)&&"trackedChange"in t&&t.trackedChange&&delete t.trackedChange},QU=(t,e)=>!t||!e||!e.enabled?!1:e.mode==="original"&&t.kind==="insert"||e.mode==="final"&&t.kind==="delete",eW=(t,e,n)=>{e&&(!n||!n.enabled||n.mode==="off"||(t.attrs={...t.attrs??{},trackedChange:e}))},G5=t=>{delete t.bold,delete t.italic,delete t.color,delete t.underline,delete t.strike,delete t.highlight,delete t.link,delete t.letterSpacing},Yie=(t,e,n,r,i,s=!0)=>{const o=t.trackedChange;if(!o||o.kind!=="format"||e.mode!=="original")return;const a=o.before;if(!a||a.length===0){G5(t);return}if(!a.every(c=>c!==null&&typeof c=="object"&&"type"in c&&typeof c.type=="string")){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Invalid before marks in tracked change, resetting formatting"),G5(t);return}G5(t);try{r(t,a,n,i,void 0,s)}catch(c){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Error applying format change marks, resetting formatting:",c),G5(t)}},Cgt=(t,e,n,r,i,s=!0)=>{if(!e)return t;const o=!e.enabled||e.mode==="off",a=e.enabled&&e.mode==="original",l=e.enabled&&e.mode==="final";if(!a&&!l)return o?t.forEach(u=>Xie(u)):t.forEach(u=>{xS(u)&&Yie(u,e,n,r,i,s)}),t;const c=[];return t.forEach(u=>{if(!xS(u)){c.push(u);return}const d=u.trackedChange;if(!d){c.push(u);return}a&&d.kind==="insert"||l&&d.kind==="delete"||c.push(u)}),o?c.forEach(u=>Xie(u)):(c.forEach(u=>{xS(u)&&Yie(u,e,n||xC,r,i,s)}),(e.mode==="original"||e.mode==="final")&&e.enabled&&c.forEach(u=>{xS(u)&&u.trackedChange&&(u.trackedChange.kind==="insert"||u.trackedChange.kind==="delete")&&delete u.trackedChange})),c},Jr=t=>t/Egt*Sgt,Ea=t=>{if(!(t==null||!Number.isFinite(t)))return t*JU},Cg=t=>{if(!(t==null||!Number.isFinite(t)))return t/JU},H9=t=>{if(!t)return;const e={};return Yr(t.left)&&(e.left=Jr(t.left)),Yr(t.right)&&(e.right=Jr(t.right)),Yr(t.firstLine)&&(e.firstLine=Jr(t.firstLine)),Yr(t.hanging)&&(e.hanging=Jr(t.hanging)),Object.keys(e).length?e:void 0},Yr=t=>typeof t=="number"&&Number.isFinite(t),To=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),_gt=t=>t?String(t):"",hn=t=>{if(Yr(t))return t;if(typeof t=="string"){const e=parseFloat(t);return Number.isFinite(e)?e:void 0}},Zie=t=>{if(typeof t!="string")return;const e=t.trim();if(e==="."||e===",")return e},Ngt=t=>typeof t!="string"?void 0:t.trim().toLowerCase()||void 0,CT=t=>{if(typeof t!="string")return;const e=t.trim();if(!(!e||e==="auto"||e==="none"))return e.startsWith("#")?e:`#${e}`};function Hp(t){if(Yr(t))return Number(t);if(typeof t=="string"&&t.trim()!==""){const e=Number(t);return Number.isFinite(e)?e:void 0}}function u0(t,e){if(!Yr(e)||e<=0)throw new Error(`coercePositiveNumber: fallback must be a positive number, got ${e}`);const n=Hp(t);return n!=null&&n>0?n:e}function d0(t){if(typeof t=="boolean")return t;if(typeof t=="number")return t===1?!0:t===0?!1:void 0;if(typeof t=="string"){const e=t.trim().toLowerCase();if(["true","1","yes","on"].includes(e))return!0;if(["false","0","no","off"].includes(e))return!1}}const Hxe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.trim().toLowerCase();if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1}if(typeof t=="number"){if(t===1)return!0;if(t===0)return!1}};function V9(t){if(!t)return;const e={};return["top","right","bottom","left"].forEach(n=>{const r=t[n];Yr(r)&&(e[n]=Number(r))}),Object.keys(e).length>0?e:void 0}const Jie=(t,e)=>{const n=new WeakMap,r=new Set(Tgt);if(e!=null&&e.atomNodeTypes)for(const s of e.atomNodeTypes)typeof s=="string"&&s.length>0&&r.add(s);const i=(s,o)=>{var f;if(s.type==="text"){const h=((f=s.text)==null?void 0:f.length)??0,m=o+h;return n.set(s,{start:o,end:m}),m}if(r.has(s.type)){const h=o+1;return n.set(s,{start:o,end:h}),h}const a=s.type==="doc"?0:1,l=s.type==="doc"?0:1;let c=o+a;const u=Array.isArray(s.content)?s.content:[];n.set(s,{start:o,end:o}),u.forEach(h=>{c=i(h,c)});const d=c+l;return n.set(s,{start:o,end:d}),d};return i(t,0),n},Igt=(t="")=>{let e=0;return n=>`${t}${e++}-${n}`};function Rgt(t){if(!t||typeof t!="object")return;const e=t,n=e.name;if(typeof n!="string")return;const r={name:n};if(e.attributes&&typeof e.attributes=="object"&&!Array.isArray(e.attributes)&&(r.attributes={...e.attributes}),Array.isArray(e.elements)){const i=e.elements.filter(s=>s!=null&&typeof s=="object");i.length>0&&(r.elements=i)}return r}function Mgt(t){if(!t||typeof t!="object")return!1;const e=t;return Yr(e.x)||Yr(e.y)||Yr(e.width)||Yr(e.height)||Yr(e.childWidth)||Yr(e.childHeight)||Yr(e.childX)||Yr(e.childY)}function Lgt(t){if(!t||typeof t!="object")return;const e=t,n=Hp(e.width),r=Hp(e.height);if(n==null&&r==null)return;const i={};return n!=null&&(i.width=n),r!=null&&(i.height=r),i}function Dgt(t){return Array.isArray(t)?t.filter(e=>!e||typeof e!="object"?!1:typeof e.shapeType=="string"):[]}function Qie(t){if(t)return t.replace(/\\/g,"/").replace(/^(\.\/|\/)+/,"")}function ese(t){var i;if(!t)return;const e=(i=t.split("/").pop())==null?void 0:i.split("\\").pop();if(!e||e.startsWith("."))return;const n=e.split(".");if(n.length<2)return;const r=n.at(-1);if(!(!r||r.length===0))return r.toLowerCase()}function Ogt(t,e){if(!e||Object.keys(e).length===0)return t;const n=new Map;if(Object.entries(e).forEach(([s,o])=>{const a=Qie(s);a&&n.set(a,o)}),n.size===0)return t;const r=(s,o,a,l)=>{if(!s||s.startsWith("data:"))return;const c=new Set;if(c.add(s),a&&c.add(a),o){const u=l??ese(s)??"jpeg";c.add(`word/media/${o}.${u}`),c.add(`media/${o}.${u}`)}for(const u of c){const d=Qie(u);if(!d)continue;const f=n.get(d);if(!f)continue;const h=l??ese(d)??"jpeg";return f.startsWith("data:")?f:`data:image/${h};base64,${f}`}},i=s=>{let o=!1;const a=s.map(l=>{if(l.kind!=="image")return l;const c=l;if(!c.src||c.src.startsWith("data:"))return l;const u=r(c.src);return u?(o=!0,{...c,src:u}):l});return o?a:s};return t.map(s=>{const o=a=>{if(a.kind==="image"){if(!a.src||a.src.startsWith("data:"))return a;const l=a.attrs??{},c=typeof l.rId=="string"?l.rId:void 0,u=typeof l.src=="string"?l.src:void 0,d=typeof l.extension=="string"?l.extension.toLowerCase():void 0,f=r(a.src,c,u,d);return f?{...a,src:f}:a}if(a.kind==="paragraph"){const l=a;if(!l.runs||l.runs.length===0)return a;const c=i(l.runs);return c!==l.runs?{...l,runs:c}:a}if(a.kind==="table"){let l=!1;const c=a.rows.map(u=>{let d=!1;const f=u.cells.map(h=>{let m=!1;const y=(h.blocks??(h.paragraph?[h.paragraph]:[])).map(b=>o(b));h.blocks&&y!==h.blocks&&(m=!0);let w=h.paragraph;if(!h.blocks&&h.paragraph&&h.paragraph.kind==="paragraph"){const b=o(h.paragraph);b!==h.paragraph&&(w=b,m=!0)}return m?{...h,blocks:y.length>0?y:h.blocks,paragraph:w}:h});return f.some((h,m)=>h!==u.cells[m])&&(d=!0),d?(l=!0,{...u,cells:f}):u});return l?{...a,rows:c}:a}if(a.kind==="drawing"){const l=a;if(l.drawingKind!=="shapeGroup")return a;const c=l;if(!c.shapes||c.shapes.length===0)return a;let u=!1;const d=c.shapes.map(f=>{var w;if(f.shapeType!=="image")return f;const h=f,m=(w=h.attrs)==null?void 0:w.src;if(!m||m.startsWith("data:"))return f;const y=r(m);return y?(u=!0,{...h,attrs:{...h.attrs,src:y}}):f});return u?{...c,shapes:d}:a}return a};return o(s)})}function Pgt(t){if(!To(t)||t.type!=="gradient")return!1;const e=t.gradientType;return e!=="linear"&&e!=="radial"||e==="linear"&&(typeof t.angle!="number"||!Number.isFinite(t.angle))||!Array.isArray(t.stops)||t.stops.length===0?!1:t.stops.every(n=>To(n)?typeof n.position=="number"&&Number.isFinite(n.position)&&typeof n.color=="string"&&(n.alpha===void 0||typeof n.alpha=="number"&&Number.isFinite(n.alpha)):!1)}function Fgt(t){return To(t)&&t.type==="solidWithAlpha"&&typeof t.color=="string"&&typeof t.alpha=="number"}function Bgt(t){if(t===null)return null;if(typeof t=="string"||Pgt(t)||Fgt(t))return t}function jgt(t){if(t===null)return null;if(typeof t=="string")return t}function $gt(t){if(!To(t)||!Array.isArray(t.parts)||t.parts.length===0)return;const e=t.parts.filter(r=>To(r)&&typeof r.text=="string");if(e.length===0)return;const n={parts:e};return["left","center","right"].includes(t.horizontalAlign)&&(n.horizontalAlign=t.horizontalAlign),n}function zgt(t){if(typeof t=="string"&&(t==="top"||t==="center"||t==="bottom"))return t}function Hgt(t){if(!To(t))return;const e=hn(t.top),n=hn(t.right),r=hn(t.bottom),i=hn(t.left);if(!(e==null||n==null||r==null||i==null))return{top:e,right:n,bottom:r,left:i}}const Vgt=251658240;function Ugt(t){if(!To(t))return;const e=t.relativeHeight;if(typeof e=="number")return Math.max(0,e-Vgt)}const Wgt=new Set(["_blank","_self","_parent","_top"]),Rm=t=>{if(typeof t!="string")return;const e=t.trim();return e||void 0},qgt=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.trim().toLowerCase();if(!e)return;if(e==="true"||e==="1"||e==="yes"||e==="on")return!0;if(e==="false"||e==="0"||e==="no"||e==="off")return!1}},Ggt=t=>t.version===2?t:{version:2,href:t.href,title:t.title},Kgt=t=>{const e=typeof t.href=="string"&&t.href.trim()?pb(t.href):null,n=Rm(t.anchor),r=Rm(t.name),i=Rm(t.docLocation),s=Rm(t.rId);if(!e&&!n&&!r&&!i&&!s)return null;const o={version:2};e&&(o.href=e.href);const a=Rm(t.title);a&&(o.title=a);const l=Rm(t.tooltip);l&&(o.tooltip=l);const c=Rm(t.target);c&&Wgt.has(c)&&(o.target=c);const u=Rm(t.rel);u&&(o.rel=u),n&&(o.anchor=n),r&&(o.name=r),i&&(o.docLocation=i),s&&(o.rId=s);const d=qgt(t.history);return d!=null&&(o.history=d),o},Vxe="trackInsert",Uxe="trackDelete",Wxe="trackFormat",Xgt={[Vxe]:"insert",[Uxe]:"delete",[Wxe]:"format"},tse={insert:3,delete:3,format:1},nse=1e4,rse=100,qxe=5,Gxe=(t,e=0)=>{if(e>qxe)return!1;if(t&&typeof t=="object"){const n=Array.isArray(t)?t:Object.values(t);for(const r of n)if(!Gxe(r,e+1))return!1}return!0},ise=t=>{if(typeof t!="string")return;const e=t.trim();if(!e)return;const n=Number.parseInt(e,16);if(!Number.isNaN(n))return Math.max(0,Math.min(n/255,1))},Ygt=t=>{const e=t.replace("#","");return e.length===3?e.split("").map(n=>n+n).join(""):e},tW=t=>{const e=Ygt(t);if(e.length!==6)return null;const n=Number.parseInt(e.slice(0,2),16),r=Number.parseInt(e.slice(2,4),16),i=Number.parseInt(e.slice(4,6),16);return[n,r,i].some(s=>Number.isNaN(s))?null:{r:n,g:r,b:i}},Kxe=t=>{const e=n=>Math.max(0,Math.min(255,n)).toString(16).padStart(2,"0").toUpperCase();return`#${e(t.r)}${e(t.g)}${e(t.b)}`},Zgt=(t,e)=>{const n=tW(t);if(!n)return t;const r={r:Math.round(n.r+(255-n.r)*e),g:Math.round(n.g+(255-n.g)*e),b:Math.round(n.b+(255-n.b)*e)};return Kxe(r)},Jgt=(t,e)=>{const n=tW(t);if(!n)return t;const r={r:Math.round(n.r*e),g:Math.round(n.g*e),b:Math.round(n.b*e)};return Kxe(r)},Qgt=t=>{const e=tW(t);if(!e)return 1;const n=o=>{const a=o/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)},r=n(e.r),i=n(e.g),s=n(e.b);return .2126*r+.7152*i+.0722*s},e0t=.18,t0t=t=>Qgt(t)<e0t?"#FFFFFF":"#000000",n0t=(t,e)=>{if(!t||!e)return;const n=t.themeColor;if(typeof n!="string")return;const r=n.trim();if(!r)return;const i=e[r];if(!i)return;const s=ise(t.themeTint),o=ise(t.themeShade);let a=i;return s!=null&&(a=Zgt(a,s)),o!=null&&(a=Jgt(a,o)),a},DB=(t,e)=>{if(!t)return;if(typeof t.color=="string"){const r=CT(t.color);if(r)return r}const n=n0t(t,e);if(n)return CT(n)},sse=50,ose=1e3,ase=100,r0t=(t,e)=>{const n=typeof(e==null?void 0:e.commentId)=="string"?e.commentId:void 0,r=typeof(e==null?void 0:e.importedId)=="string"?e.importedId:void 0,i=(e==null?void 0:e.internal)===!0;if(!n&&!r)return;const s=t.comments?[...t.comments]:[],o=`${n??""}::${r??""}`;s.some(l=>`${l.commentId??""}::${l.importedId??""}`===o)||s.push({commentId:n??r,importedId:r,internal:i}),t.comments=s},i0t=t=>{if(!t)return;const e={};let n=0;for(const[r,i]of Object.entries(t))if(!(typeof r!="string"||!r.toLowerCase().startsWith("data-"))){if(n>=sse){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting data attributes exceeding ${sse} limit`);break}if(r.length>ase){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting data attribute name exceeding ${ase} chars: ${r.substring(0,50)}...`);continue}if(i!=null&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")){const s=String(i);if(s.length>ose){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting data attribute value exceeding ${ose} chars for key: ${r}`);continue}e[r]=s,n++}}return Object.keys(e).length>0?e:void 0},lse=t=>{if(!t)return;let e=t;if(typeof t=="string"){if(t.length>nse){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting run mark JSON payload exceeding ${nse} chars`);return}try{e=JSON.parse(t)}catch(r){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Failed to parse run mark JSON:",r);return}}if(!Array.isArray(e))return;if(e.length>rse){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting run mark array exceeding ${rse} entries`);return}if(!Gxe(e)){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Rejecting run mark array exceeding depth ${qxe}`);return}const n=e.map(r=>{if(!r||typeof r!="object")return null;const i=r,s=typeof i.type=="string"?i.type:void 0;if(!s)return null;const o=i.attrs&&typeof i.attrs=="object"?i.attrs:void 0;return{type:s,attrs:o}}).filter(Boolean);return n.length?n:void 0},s0t=t=>Xgt[t],o0t=(t,e)=>{if(e&&typeof e.id=="string"&&e.id.trim())return e.id;const n=e&&typeof e.authorEmail=="string"?e.authorEmail:"unknown",r=e&&typeof e.date=="string"?e.date:"unknown",i=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`;return`${t}-${n}-${r}-${i}`},Xxe=t=>{const e=s0t(t.type);if(!e)return;const n=t.attrs??{},r={kind:e,id:o0t(e,n)};return typeof n.author=="string"&&n.author&&(r.author=n.author),typeof n.authorEmail=="string"&&n.authorEmail&&(r.authorEmail=n.authorEmail),typeof n.authorImage=="string"&&n.authorImage&&(r.authorImage=n.authorImage),typeof n.date=="string"&&n.date&&(r.date=n.date),e==="format"&&(r.before=lse(n.before),r.after=lse(n.after)),r},Yxe=(t,e)=>{if(!t)return e;const n=tse[t.kind]??0;return(tse[e.kind]??0)>n?e:t},a0t=(t,e)=>{const n=t.trackedChange,r=e.trackedChange;return!n&&!r?!0:!n||!r?!1:n.kind===r.kind&&n.id===r.id},nW=t=>{if(!(!t||!t.length))return t.reduce((e,n)=>{const r=Xxe(n);return r?Yxe(e,r):e},void 0)},l0t=t=>{if(t==null)return"single";if(typeof t=="boolean")return t?"single":void 0;if(typeof t=="number")return t===0?void 0:"single";if(typeof t=="string"){const e=t.trim().toLowerCase();return e?e==="none"||e==="0"||e==="false"||e==="off"?void 0:e==="double"||e==="dotted"||e==="dashed"||e==="wavy"?e:"single":"single"}return"single"},U9=t=>{if(t!=null){if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){const e=t.trim().toLowerCase();if(e==="0"||e==="false"||e==="off"||e==="none")return!1;if(e==="1"||e==="true"||e==="on")return!0}return!!t}},cse=200,c0t=t=>{if(!t||typeof t!="string")return;let e=t.trim();if(e.length>cse){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Font family name exceeds ${cse} character limit`);return}const n=e.toLowerCase();if(["javascript:","data:","vbscript:"].some(s=>n.includes(s))){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Rejected font family containing dangerous URI scheme");return}if(e=e.replace(/["']/g,""),/[;{}()@<>]/.test(e)){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Rejected font family containing CSS injection characters");return}if(e=e.replace(/[\r\n\t\f\v]/g," "),e=e.replace(/\s+/g," ").trim(),!!e)return e},u0t=t=>{var i,s;if(Yr(t))return t;if(typeof t!="string")return;const e=t.trim();if(!e)return;const n=Number.parseFloat(e);return Number.isFinite(n)?((s=(i=e.match(/[a-zA-Z%]+$/))==null?void 0:i[0])==null?void 0:s.toLowerCase())==="pt"?Ea(n):n:void 0},d0t=(t,e,n)=>{const r=DB(e,n);if(r&&(t.color=r),typeof e.fontFamily=="string"&&e.fontFamily.trim()){const s=c0t(e.fontFamily);s&&(t.fontFamily=s)}const i=u0t(e.fontSize);if(i!==void 0&&i>=1&&i<=1e3?t.fontSize=i:e.fontSize,Yr(e.letterSpacing)){const s=Number(e.letterSpacing);s>=-100&&s<=100&&(t.letterSpacing=s)}if(typeof e.textTransform=="string"){const s=e.textTransform;(s==="uppercase"||s==="lowercase"||s==="capitalize"||s==="none")&&(t.textTransform=s)}},f0t={enableRichHyperlinks:!1},Ay=(t,e,n=f0t,r,i,s=!0)=>{!s&&"comments"in t&&t.comments&&delete t.comments;const o=t.kind==="tab";let a=!1;if(e.forEach(l=>{var u,d,f,h,m,y,w,b;const c=i0t(l.attrs);try{switch(l.type){case Vxe:case Uxe:case Wxe:{if(!o){const E=Xxe(l);E&&(t.trackedChange=Yxe(t.trackedChange,E))}break}case"bold":{U9((u=l.attrs)==null?void 0:u.value)===!1?delete t.bold:t.bold=!0;break}case"italic":{U9((d=l.attrs)==null?void 0:d.value)===!1?delete t.italic:t.italic=!0;break}case"textStyle":if(!o){const E=t.color;d0t(t,l.attrs??{},r),t.color!==E&&t.color!==void 0&&(a=!0)}break;case"commentMark":case"comment":{!o&&s&&r0t(t,l.attrs??{});break}case"underline":{const E=((f=l.attrs)==null?void 0:f.underlineType)??((h=l.attrs)==null?void 0:h.value)??((m=l.attrs)==null?void 0:m.underline)??((y=l.attrs)==null?void 0:y.style),A=l0t(E);if(A){const x=DB(l.attrs??{},r);t.underline={style:A,color:x??((w=t.underline)==null?void 0:w.color)}}else E!=null&&delete t.underline;break}case"strike":{U9((b=l.attrs)==null?void 0:b.value)===!1?delete t.strike:t.strike=!0;break}case"highlight":t.highlight=DB(l.attrs??{},r);break;case"link":{if(!o){const E=l.attrs??{};if(n.enableRichHyperlinks)try{const A=Kgt(E);A&&(t.link=A)}catch(A){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Failed to build rich hyperlink:",A)}else if(typeof E.href=="string"&&E.href.trim())try{const A=pb(E.href);if(A&&A.href){const x={href:A.href,title:typeof E.title=="string"?E.title:void 0};t.link=Ggt(x)}}catch(A){_e.env.NODE_ENV==="development"&&console.warn("[PM-Adapter] Failed to sanitize link href:",A)}}break}default:break}}catch(E){_e.env.NODE_ENV==="development"&&console.warn(`[PM-Adapter] Failed to apply mark ${l.type}:`,E)}c&&!o&&(t.dataAttrs={...t.dataAttrs??{},...c})}),!o&&!a&&i){const l=CT(t.color),c=l==null?void 0:l.toUpperCase(),u=c==="#000000"||c==="#000",d=typeof t.color=="string"&&["auto","none"].includes(t.color.trim().replace(/^#/,"").toLowerCase());(!l||d||u)&&(t.color=t0t(i))}};function use(t,e,n,r,i=[],s,o=xC,a){const l={text:t.text||"",fontFamily:n,fontSize:r},c=e.get(t);return c&&(l.pmStart=c.start,l.pmEnd=c.end),Ay(l,[...t.marks??[],...i??[]],o,a),s&&(l.sdt=s),l}function h0t(t,e,n,r,i=[]){var f;const s=e.get(t);if(!s)return null;const o=r.attrs??{},a=typeof o.paragraphProperties=="object"&&o.paragraphProperties!==null?o.paragraphProperties:{},l=Array.isArray(o.tabStops)&&o.tabStops.length?o.tabStops:Array.isArray(a.tabStops)?a.tabStops:void 0,c=o.indent??a.indent??void 0,u={kind:"tab",text:"	",pmStart:s.start,pmEnd:s.end,tabIndex:n,tabStops:l,indent:c,leader:((f=t.attrs)==null?void 0:f.leader)??null},d=[...t.marks??[],...i??[]];return d.length>0&&Ay(u,d),u}function p0t(t,e,n,r,i=[],s,o=xC,a){var m;const l={text:"0",token:s,fontFamily:n,fontSize:r},c=e.get(t);c&&(l.pmStart=c.start,l.pmEnd=c.end);const u=t.marks??[],d=Array.isArray((m=t.attrs)==null?void 0:m.marksAsAttrs)?t.attrs.marksAsAttrs:[],h=[...u.length>0?u:d,...i??[]];return Ay(l,h,o,a),d.length>0&&(l._explicitFont=!0),console.debug("[token-debug] tokenNodeToRun",{token:s,fontFamily:l.fontFamily,fontSize:l.fontSize,defaultFont:n,defaultSize:r,nodeMarksCount:u.length,marksAsAttrsCount:d.length,inheritedMarksCount:(i==null?void 0:i.length)??0}),l}const m0t=8,g0t=.5,y0t=100,rW=t=>{if(!Yr(t))return;if(t<=0)return 0;const n=t/m0t*JU;return Math.min(y0t,Math.max(g0t,n))},Zxe=t=>!t||t==="auto"?"#000000":t.startsWith("#")?t:`#${t}`;function b0t(t){if(!t||typeof t!="object"||t===null)return;const e=t;if(!(Object.keys(e).length>0))return;const{val:r,size:i,color:s}=e;if(i!==void 0&&typeof i!="number"||s!==void 0&&typeof s!="string"||r!==void 0&&typeof r!="string")return;const o=typeof i=="number"?i:void 0,a=typeof s=="string"?s:void 0;if(r==="nil"||r==="none"||o===0)return{style:"none",width:0};const l=rW(o);if(l==null)return;const c=Zxe(a);return{style:r||"single",width:l,color:c}}function w0t(t){if(!t||typeof t!="object")return;const e=t;if(Object.keys(e).length===0)return;const{val:n,size:r,color:i}=e;if(n==="nil"||n==="none"||r===0)return{none:!0};const s=rW(r);if(s==null)return;const o=Zxe(i);return{style:n||"single",width:s,color:o}}const v0t=new Set(["none","single","double","dashed","dotted","thick","triple","dotDash","dotDotDash","wave","doubleWave"]);function x0t(t){return typeof t=="string"&&v0t.has(t)}function E0t(t){if(t===null)return!0;if(typeof t!="object")return!1;const e=t;return e.none===!0?!0:"val"in e||"size"in e?!1:("style"in e||"width"in e||"color"in e||"space"in e)&&(!("style"in e)||e.style==null||x0t(e.style))}function S0t(t){if(!t||typeof t!="object")return;const e=["top","right","bottom","left","insideH","insideV"],n={};for(const r of e){const i=t[r];if(i!=null)if(E0t(i))n[r]=i;else{const s=w0t(i);s!==void 0&&(n[r]=s)}}return Object.keys(n).length>0?n:void 0}function A0t(t){if(!(t!=null&&t.borders))return;const e=t.borders,n={};for(const r of["top","right","bottom","left"]){const i=b0t(e[r]);i&&(n[r]=i)}return Object.keys(n).length>0?n:void 0}function T0t(t){const e=t==null?void 0:t.cellMargins;if(!e||typeof e!="object")return;const n={},r=e;return typeof r.top=="number"&&(n.top=r.top),typeof r.right=="number"&&(n.right=r.right),typeof r.bottom=="number"&&(n.bottom=r.bottom),typeof r.left=="number"&&(n.left=r.left),Object.keys(n).length>0?n:void 0}const k0t=t=>{if(!t||typeof t!="object")return;const e=t,n=["top","right","bottom","left"],r={};return n.forEach(i=>{const s=C0t(e[i]);s&&(r[i]=s)}),Object.keys(r).length>0?r:void 0},C0t=t=>{if(!t||typeof t!="object")return;const e=t,n=_0t(e.val);if(n==="none")return;const r=hn(e.size),i=rW(r),s=CT(e.color),o=hn(e.space);if(!n&&i==null&&o==null&&!s)return;const a={};return n&&(a.style=n),i!=null&&(a.width=Math.max(0,i)),s&&(a.color=s),o!=null&&(a.space=Math.max(0,o)),a},_0t=t=>{if(typeof t!="string")return;const e=t.toLowerCase();return e==="nil"||e==="none"?"none":e==="double"?"double":e==="dashed"||e==="dashsmallgap"||e==="dashlargegap"?"dashed":e==="dotted"||e==="dot"?"dotted":"solid"},N0t=t=>{if(!t||typeof t!="object")return;const e=t,n={},r=dse(e.fill);r&&(n.fill=r);const i=dse(e.color);i&&(n.color=i);const s=Q0(e.val);s&&(n.val=s);const o=Q0(e.themeColor);o&&(n.themeColor=o);const a=Q0(e.themeFill);a&&(n.themeFill=a);const l=Q0(e.themeFillShade);l&&(n.themeFillShade=l);const c=Q0(e.themeFillTint);c&&(n.themeFillTint=c);const u=Q0(e.themeShade);u&&(n.themeShade=u);const d=Q0(e.themeTint);return d&&(n.themeTint=d),Object.keys(n).length>0?n:void 0},dse=t=>{const e=CT(t);if(e&&e.toLowerCase()!=="#auto")return e},Q0=t=>{if(typeof t!="string")return;const e=t.trim();return e||void 0},iW=10,I0t=50,R0t=t=>{const e={};return t.before!=null&&(e.before=Cg(t.before)),t.after!=null&&(e.after=Cg(t.after)),t.line!=null&&(t.lineRule==="auto"&&t.line>0&&t.line<=iW?e.line=t.line:e.line=Cg(t.line)),t.lineRule&&(e.lineRule=t.lineRule),e},M0t=t=>{const e={};return t.left!=null&&(e.left=Cg(t.left)),t.right!=null&&(e.right=Cg(t.right)),t.firstLine!=null&&(e.firstLine=Cg(t.firstLine)),t.hanging!=null&&(e.hanging=Cg(t.hanging)),e},L0t=(t,e)=>{const n={};if(e){if(e.before!=null){const r=Ea(t.before);r!=null&&(n.before=r)}if(e.after!=null){const r=Ea(t.after);r!=null&&(n.after=r)}if(e.line!=null){if(t.lineRule==="auto"&&t.line!=null&&t.line>0&&t.line<=iW)n.line=t.line;else{const i=Ea(t.line);i!=null&&(n.line=i)}t.lineRule&&(n.lineRule=t.lineRule)}}return Object.keys(n).length>0?n:void 0},D0t=t=>{const e={},n=Ea(t.left),r=Ea(t.right),i=Ea(t.firstLine),s=Ea(t.hanging);return n!=null&&n!==0&&(e.left=n),r!=null&&r!==0&&(e.right=r),i!=null&&(e.firstLine=i),s!=null&&(e.hanging=s),Object.keys(e).length>0?e:void 0},Yv=t=>{switch(t){case"center":case"right":case"justify":case"left":return t;case"both":case"distribute":case"numTab":case"thaiDistribute":return"justify";case"end":return"right";case"start":return"left";default:return}},Jxe=t=>{if(!t||typeof t!="object")return;const e=t,n={},r=hn(e.before),i=hn(e.after),s=hn(e.line),o=P0t(e.lineRule),a=W9(e.beforeAutospacing??e.beforeAutoSpacing),l=W9(e.afterAutospacing??e.afterAutoSpacing),c=W9(e.contextualSpacing),u=r!=null?Jr(r):hn(e.lineSpaceBefore),d=i!=null?Jr(i):hn(e.lineSpaceAfter),f=O0t(s,o);return u!=null&&(n.before=u),d!=null&&(n.after=d),f!=null&&(n.line=f),o&&(n.lineRule=o),a!=null&&(n.beforeAutospacing=a),l!=null&&(n.afterAutospacing=l),c!=null&&(n.contextualSpacing=c),Object.keys(n).length>0?n:void 0},W9=t=>{if(t===!0||t===!1)return t;if(typeof t=="string"){const e=t.trim().toLowerCase();if(["true","1","on","yes"].includes(e))return!0;if(["false","0","off","no"].includes(e))return!1}if(typeof t=="number"){if(t===1)return!0;if(t===0)return!1}},O0t=(t,e)=>{if(t!=null)return e==="auto"?t>0&&t<=iW?t:t/240:Jr(t)},P0t=t=>{if(t==="auto"||t==="exact"||t==="atLeast")return t},Qxe=t=>{if(!t||typeof t!="object")return;const e=t,n={},r=[];if(["left","right","firstLine","hanging"].forEach(s=>{const o=e[s];typeof o=="number"&&Number.isFinite(o)&&(n[s]=o,r.push(Math.abs(o)))}),!(!r.length||r.some(s=>s>=50||s!==0&&Math.abs(s%15)<1e-6)))return n},e2e=t=>{if(!t||typeof t!="object")return;const e=t,n={},r=l=>{const c=hn(l);if(c!=null)return Math.abs(c)<=I0t?c:Jr(Number(c))},i=r(hn(e.left)),s=r(hn(e.right)),o=r(hn(e.firstLine)),a=r(hn(e.hanging));return i!=null&&(n.left=i),s!=null&&(n.right=s),o!=null&&(n.firstLine=o),a!=null&&(n.hanging=a),Object.keys(n).length>0?n:void 0},F0t=15,B0t=1e3,OB=t=>{if(!Array.isArray(t))return;const e=[];for(const n of t){if(!n||typeof n!="object")continue;const r=n,i=!!(r.tab&&typeof r.tab=="object"),s=i?r.tab:r,o=j0t(s,i);if(o==null)continue;const a=$0t(s.val??s.align??s.alignment??s.type??s.tabType);if(!a)continue;const l={val:a,pos:o},c=z0t(s.leader);c&&(l.leader=c),e.push(l)}return e.length>0?e:void 0},j0t=(t,e=!1)=>{const n=hn(t.originalPos);if(n!=null)return n;const r=hn(t.pos??t.position??t.offset);if(r!=null)return e||r>B0t?r:Math.round(r*F0t)},$0t=t=>{switch(t){case"start":case"center":case"end":case"decimal":case"bar":case"clear":return t;case"left":return"start";case"right":return"end";case"dec":return"decimal";default:return}},z0t=t=>{switch(t){case"none":case"dot":case"hyphen":case"heavy":case"underscore":case"middleDot":return t;case"thick":return"heavy";default:return}},fse=1,HI=24,hse=t=>{const e={};let n=!1;return t.right!=null&&(e.left=t.right,n=!0),t.left!=null&&(e.right=t.left,n=!0),t.firstLine!=null&&(e.firstLine=-t.firstLine,n=!0),t.hanging!=null&&(e.hanging=-t.hanging,n=!0),n?e:t},H0t=t=>{const e={...t},n=i=>{if(i==null)return i;const s=Math.abs(i);return s>0&&s<fse?(e.__bidiFallback=e.__bidiFallback??"clamped",(Math.sign(i)||1)*fse):i};return e.left=n(e.left),e.right=n(e.right),typeof e.left=="number"&&e.left!==0||typeof e.right=="number"&&e.right!==0||(e.left=HI,e.right=HI,e.__bidiFallback="synthetic"),e},t2e=18,fA=8,V0t="",U0t="%1.",W0t=65,q0t=97,pse=26,G0t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]],mse=(t,e)=>{if(!Number.isFinite(t)||t<=0)return"";let n=Math.floor(t),r="";for(;n>0;){n--;const i=n%pse;r=String.fromCharCode((e?W0t:q0t)+i)+r,n=Math.floor(n/pse)}return r},gse=(t,e)=>{if(!Number.isFinite(t)||t<=0)return"";let n=Math.floor(t),r="";for(const[i,s]of G0t)for(;n>=i;)r+=s,n-=i;return e?r:r.toLowerCase()},K0t=t=>Number.isFinite(t)?String(Math.floor(t)):"",X0t=(t,e)=>{switch(e){case"lowerLetter":return mse(t,!1);case"upperLetter":return mse(t,!0);case"lowerRoman":return gse(t,!1);case"upperRoman":return gse(t,!0);default:return K0t(t)}},Y0t=t=>{if(!t)return"";const e=t.path&&t.path.length?t.path:[t.start??1];return t.format==="bullet"?t.lvlText||V0t:(t.lvlText||U0t).replace(/%(\d+)/g,(r,i)=>{const s=Number(i)-1,o=e[s]??e[e.length-1]??1;return X0t(o,t.format)})},Z0t=t=>{const e=t.italic?"italic ":"",n=t.bold?"bold ":"";let r=t.fontSize??12;Number.isFinite(r)||(r=12),r=Math.floor(r),r=Math.max(1,Math.min(999,r));const i=`${r}px`,s=t.fontFamily??"Times New Roman";return`${e}${n}${i} ${s}`},J0t=1440,Q0t=96,eyt=Math.round(J0t/Q0t),tyt=1/eyt,nyt=t=>{if(t==null)return null;const e=Number(t);return Number.isFinite(e)?e:null},Yc=t=>{const e=nyt(t);return e==null?0:e*tyt},ryt=new Set(["__proto__","constructor","prototype"]),q9="__no_abstract__",ey=t=>String(t),hv=t=>{if(typeof t=="string"){const e=t.trim();if(e==="")throw new Error("Invalid numId: empty string. NumId must be a non-empty string or number.");if(ryt.has(e))throw new Error(`Invalid numId: reserved property name "${e}". NumId cannot be a prototype-polluting key.`)}if(typeof t=="number"&&!Number.isFinite(t))throw new Error(`Invalid numId: ${t}. NumId must be a finite number.`)},G9=t=>Object.keys(t).map(e=>parseInt(e,10)).filter(e=>Number.isFinite(e)).sort((e,n)=>e-n),iyt=()=>{let t={},e={};const n={};let r={},i={},s={},o=!1;const a=(x,T,R,k)=>{const _=k??void 0;if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(!Number.isFinite(R))throw new Error(`Invalid startValue: ${R}. Start value must be a finite number.`);if(_!==void 0&&!Number.isFinite(_))throw new Error(`Invalid restartValue: ${k}. Restart value must be a finite number.`);const N=ey(x);n[N]||(n[N]={}),n[N][T]||(n[N][T]={}),n[N][T].start=R,n[N][T].restart=_},l=(x,T,R)=>{x[T]||(x[T]={}),x[T][R]||(x[T][R]={})},c=(x,T,R,k,_)=>{if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(R<0||!Number.isFinite(R))throw new Error(`Invalid position: ${R}. Position must be a non-negative finite number.`);if(!Number.isFinite(k))throw new Error(`Invalid value: ${k}. Value must be a finite number.`);const N=ey(x),L=_!=null?ey(_):q9;if(l(t,N,T),t[N][T][R]=k,r[N]=L,l(e,L,T),e[L][T][R]=k,!o)return;i[N]||(i[N]={});const M=i[N][T];(!M||R>M.pos)&&(i[N][T]={pos:R,count:k})},u=(x,T,R)=>{if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(R<0||!Number.isFinite(R))throw new Error(`Invalid position: ${R}. Position must be a non-negative finite number.`);const k=ey(x),_=t[k];if(_==null)return null;const N=_[T];if(N==null)return null;const L=N[R];return L??null},d=(x,T,R,k)=>{var M,C,D;const _=((C=(M=n==null?void 0:n[R])==null?void 0:M[k])==null?void 0:C.start)??1;let N=null,L=_-1;if(o){const O=(D=i==null?void 0:i[R])==null?void 0:D[k];O&&O.pos<T&&(N=O.pos,L=O.count)}if(N==null){const O=G9(x).filter(U=>U<T),$=O[O.length-1];$!=null&&(N=$,L=x[$])}return{pos:N,count:L,startValue:_}},f=(x,T,R,k,_)=>{var L;const N=[];for(let M=0;M<T;M++){const C=((L=e==null?void 0:e[x])==null?void 0:L[M])||{};G9(C).some(O=>O>R&&O<k)&&N.push(M)}return N.length===0?!1:_==null?!0:N.some(M=>M<=_)},h=(x,T,R,k)=>{var U,W,ce;if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(R<0||!Number.isFinite(R))throw new Error(`Invalid position: ${R}. Position must be a non-negative finite number.`);const _=ey(x),N=k!=null?ey(k):q9;r[_]=N;const L=(W=(U=n==null?void 0:n[_])==null?void 0:U[T])==null?void 0:W.restart,M=((ce=t==null?void 0:t[_])==null?void 0:ce[T])||{},{pos:C,count:D,startValue:O}=d(M,R,_,T);if(!Number.isFinite(O))throw new Error(`Invalid startValue: ${O}. Start value must be a finite number.`);let $;if(L===0)$=D+1;else if(C==null)$=O;else{const se=r[_];f(se,T,C,R,L)?$=O:$=D+1}if(!Number.isFinite($))throw new Error(`Calculated counter value is not finite: ${$}`);if($>Number.MAX_SAFE_INTEGER)throw new Error(`Counter overflow: calculated value ${$} exceeds maximum safe integer ${Number.MAX_SAFE_INTEGER}`);return $},m=(x,T,R)=>{var L,M,C,D,O;if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(R<0||!Number.isFinite(R))throw new Error(`Invalid position: ${R}. Position must be a non-negative finite number.`);const k=ey(x);if(o&&((M=(L=s==null?void 0:s[k])==null?void 0:L[T])!=null&&M[R]))return s[k][T][R];const _=[],N=r[k]??q9;for(let $=0;$<T;$++){const U=((D=(C=n==null?void 0:n[k])==null?void 0:C[$])==null?void 0:D.start)??1,W=((O=e==null?void 0:e[N])==null?void 0:O[$])||{},ce=G9(W).filter(se=>se<R).pop();ce==null?_.push(U):_.push(W[ce])}return o&&(s[k]||(s[k]={}),s[k][T]||(s[k][T]={}),s[k][T][R]=_),_},y=(x,T,R)=>{if(hv(x),T<0||!Number.isFinite(T))throw new Error(`Invalid level: ${T}. Level must be a non-negative finite number.`);if(R<0||!Number.isFinite(R))throw new Error(`Invalid position: ${R}. Position must be a non-negative finite number.`);const k=m(x,T,R),_=u(x,T,R);return _!=null&&k.push(_),k},w=()=>{i={},s={},t={},e={},r={}};return{setStartSettings:a,setCounter:c,getCounter:u,calculateCounter:h,getAncestorsPath:m,calculatePath:y,getCountersMap:()=>t,clearAllState:w,enableCache:()=>{o=!0,w()},disableCache:()=>{o=!1,w()}}};function syt(t){var A;const{paragraph:e,docDefaults:n,measurement:r}=t,i=(t.numbering??e.numberingProperties)||null,s=lyt(n,e.indent),o=Array.isArray(e.tabs)?e.tabs:[],a=s.left??0,l=s.hanging??(s.firstLine!=null&&s.firstLine<0?-s.firstLine:0),c=s.firstLine,u=cyt(e.tabIntervalTwips,n),d=o.map(x=>x.position),f=s.firstLine!=null&&Number.isFinite(s.firstLine)&&s.firstLine>0&&!s.hanging,h={indentLeftPx:a,hangingPx:Math.max(l,0),firstLinePx:c,tabsPx:d,textStartPx:a,marker:void 0,resolvedIndent:s,resolvedTabs:o,defaultTabIntervalPx:u};if(!i)return h;const m=t.markerRun??oyt({inlineMarkerRpr:(A=e.numberingProperties)==null?void 0:A.resolvedMarkerRpr,resolvedParagraphProps:e,numbering:i,docDefaults:n,cached:i.resolvedMarkerRpr}),y=i.markerText??Y0t(i),w=r!=null&&r.measureText&&y?r.measureText(y,Z0t(m),{letterSpacing:m.letterSpacing}):void 0;let b,E;return f?(b=w!=null&&w>0?w+fA:t2e,E=a+(c??0),h.textStartPx=E+b,h.hangingPx=0,h.firstLineIndentMode=!0):(b=uyt(l,w),E=a-b,h.hangingPx=b),h.marker=dyt({numbering:i,markerText:y,markerRun:m,glyphWidthPx:w,textStartPx:h.textStartPx,markerBoxWidthPx:b,markerX:E}),h}function oyt(t){var r,i;if(t.cached)return t.cached;const e=((r=t.numbering)==null?void 0:r.resolvedMarkerRpr)||((i=t.resolvedParagraphProps.numberingProperties)==null?void 0:i.resolvedMarkerRpr);return ayt(n2e,t.docDefaults.run,e,t.inlineMarkerRpr)}const n2e={fontFamily:"Times New Roman",fontSize:12,color:"#000000"},ayt=(...t)=>{const e={...n2e},n=i=>{if(i)for(const[s,o]of Object.entries(i)){if(o==null||!r(s))continue;const a=s;if(typeof o=="object"&&!Array.isArray(o)){const l=e[a],c=typeof l=="object"&&l!=null?{...l,...o}:{...o};e[a]=c}else e[a]=o}},r=i=>["fontFamily","fontSize","bold","italic","underline","strike","color","highlight","smallCaps","allCaps","baselineShift","letterSpacing","scale","lang"].includes(i);for(const i of t)n(i);return e},lyt=(t,e)=>{var r;return{...((r=t.paragraph)==null?void 0:r.indent)??{},...e??{}}},cyt=(t,e)=>{if(Number.isFinite(t))return Yc(t);if(Number.isFinite(e.defaultTabIntervalTwips))return Yc(e.defaultTabIntervalTwips)},uyt=(t,e)=>{let n=Math.max(t||0,0);return n<=0?e!=null&&e>0?n=e+fA:n=t2e:e!=null&&e+fA>n&&(n=e+fA),n},dyt=({numbering:t,markerText:e,markerRun:n,glyphWidthPx:r,textStartPx:i,markerBoxWidthPx:s,markerX:o})=>({markerText:e,glyphWidthPx:r,markerBoxWidthPx:s,markerX:o,textStartX:i,baselineOffsetPx:n.baselineShift??0,gutterWidthPx:fA,justification:t.lvlJc??"left",suffix:fyt(t.suffix)??"tab",run:n,path:t.path}),fyt=t=>{if(t==="tab"||t==="space"||t==="nothing")return t},sW=t=>!!(t!=null&&t.docx),hyt=t=>!!(t!=null&&t.docx),oW={definitions:{},abstracts:{}},aW=bge({pPr:tC,rPr:E0}),r2e=(t,e,n)=>{if(!sW(e))return null;const r=t.attrs??{},i=typeof r.paragraphProperties=="object"&&r.paragraphProperties!==null?r.paragraphProperties:{},s=r.styleId??i.styleId,o=typeof s=="string"&&s.trim()?s:null,a={styleId:o},l=Ah(r.numberingProperties??i.numberingProperties);l!=null&&(a.numberingProperties=l);const c=Ah(r.indent??i.indent);c!=null&&(a.indent=c);const u=Ah(r.spacing??i.spacing);u!=null&&(a.spacing=u);const d={docx:e.docx,numbering:e.numbering??oW},f=aW.resolveParagraphProperties(d,a);if(!f)return null;const h=f,m=f;let y=Ah(m.indent);const w=typeof o=="string"?o.toLowerCase():"",b=typeof h.outlineLvl=="number"||w.startsWith("heading ")||w.startsWith("heading"),E=y&&y.firstLine!=null&&y.hanging==null&&y.left==null&&y.right==null;b&&(!y||Object.keys(y).length===0||E)&&(y={firstLine:0,hanging:0,left:y==null?void 0:y.left,right:y==null?void 0:y.right});let A=Ah(m.spacing);const x=e.tableStyleParagraphProps;if(x!=null&&x.spacing){const k=x.spacing;!!u?A={...k,...A}:A={...A,...k}}const T=Yv(h.justification);return{resolved:f,spacing:A,indent:y,borders:Ah(h.borders),shading:Ah(h.shading),alignment:T,tabStops:Ah(h.tabStops),keepLines:h.keepLines,keepNext:h.keepNext,numberingProperties:Ah(m.numberingProperties),contextualSpacing:h.contextualSpacing}},Ah=t=>!t||typeof t!="object"?t:Array.isArray(t)?t.map(e=>typeof e=="object"?{...e}:e):{...t},i2e=(t,e)=>{const n=gyt(t.fontFamily,e),r=typeof t.fontSize=="number"?t.fontSize:20,i=yyt(t.color),s=K9(t.bold),o=K9(t.italic),a=K9(t.strike),l=byt(t.underline),c=typeof t.letterSpacing=="number"?t.letterSpacing:void 0;return{fontFamily:n,fontSize:r,color:i,bold:s,italic:o,strike:a,underline:l,letterSpacing:c}},pyt=(t,e,n)=>{if(!sW(e))return null;const r=t.attrs??{},i=typeof r.paragraphProperties=="object"&&r.paragraphProperties!==null?r.paragraphProperties:{},s=r.styleId??i.styleId,o=typeof s=="string"&&s.trim()?s:null,a={},l=n??{styleId:o},c=r.numberingProperties??i.numberingProperties;c!=null&&(l.numberingProperties=c);const u={docx:e.docx,numbering:e.numbering??oW};let d=null;try{if(d=aW.resolveRunProperties(u,a,l,!1,!1),!d||typeof d!="object")return null}catch{return null}return i2e(d,e.docx)},myt=(t,e,n)=>{if(!sW(e))return null;const r=t.attrs??{},i=typeof r.paragraphProperties=="object"&&r.paragraphProperties!==null?r.paragraphProperties:{},s=r.styleId??i.styleId,o=typeof s=="string"&&s.trim()?s:null,a={},l=r.numberingProperties??i.numberingProperties,c=(l==null?void 0:l.numId)!=null,u=n?{...n}:{styleId:o};o&&!u.styleId&&(u.styleId=o),l!=null&&(u.numberingProperties=l);const d={docx:e.docx,numbering:e.numbering??oW};let f=null;try{if(f=aW.resolveRunProperties(d,a,u,!0,c),!f||typeof f!="object")return null}catch{return null}return i2e(f,e.docx)};function gyt(t,e){if(!t||typeof t!="object")return;const n=Xc.toCssFontFamily;return IH(t,e??null,n)??void 0}function yyt(t){if(!t||typeof t!="object")return;const n=t.val;if(typeof n=="string"&&!(!n||n.toLowerCase()==="auto"))return n}function K9(t){if(t!=null){if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){const e=t.toLowerCase();if(e==="0"||e==="false"||e==="off")return!1;if(e==="1"||e==="true"||e==="on"||e==="")return!0}return!!t}}function byt(t){if(!t||typeof t!="object")return;const e=t,n=e["w:val"]??e.type??e.val;if(typeof n!="string"||n==="none")return;const r=e["w:color"]??e.color;return{type:n,color:typeof r=="string"?r:void 0}}const{resolveSpacingIndent:wyt}=H1e,yse=".",vyt=t=>t!=null&&t!==0&&t!=="0",bse=t=>{if(!t||typeof t!="object")return;const e=t;if(!(e.name==null&&e.attributes==null&&e.elements==null))return e},Ss=(t,e)=>{var n;return(n=t==null?void 0:t.elements)==null?void 0:n.find(r=>(r==null?void 0:r.name)===e)},Bs=(t,e)=>{if(!(t!=null&&t.attributes))return;const n=t.attributes;return n[e]??n[e.startsWith("w:")?e.slice(2):`w:${e}`]},qu=t=>{if(t==null)return;const e=typeof t=="number"?t:Number.parseInt(String(t),10);return Number.isFinite(e)?e:void 0},xyt=(t,e,n)=>{const r=a=>a!==null&&typeof a=="object",i=r(t)?t:{},s=r(e)?e:{},o=r(n)?n:{};if(!(Object.keys(i).length===0&&Object.keys(s).length===0&&Object.keys(o).length===0))return{...i,...s,...o}},Eyt=t=>{if(typeof t=="string")switch(t){case"decimal":return"decimal";case"lowerLetter":return"lowerLetter";case"upperLetter":return"upperLetter";case"lowerRoman":return"lowerRoman";case"upperRoman":return"upperRoman";case"bullet":return"bullet";default:return}},Syt=t=>{if(typeof t=="string"&&(t==="tab"||t==="space"||t==="nothing"))return t},Ayt=t=>{if(typeof t=="string"){if(t==="start")return"left";if(t==="end")return"right";if(t==="left"||t==="center"||t==="right")return t}},Tyt=t=>{const e=Ss(t,"w:pPr"),n=Ss(e,"w:ind");if(!n)return;const r=qu(Bs(n,"w:left")),i=qu(Bs(n,"w:right")),s=qu(Bs(n,"w:firstLine")),o=qu(Bs(n,"w:hanging")),a={};return r!=null&&(a.left=r),i!=null&&(a.right=i),s!=null&&(a.firstLine=s),o!=null&&(a.hanging=o),Object.keys(a).length?a:void 0},kyt=t=>{if(typeof t!="string")return;const e=t.trim();return!e||e.toLowerCase()==="auto"?void 0:`#${(e.startsWith("#")?e.slice(1):e).toUpperCase()}`},Cyt=t=>{const e=Ss(t,"w:rPr");if(!e)return;const n={},r=Ss(e,"w:rFonts"),i=Bs(r,"w:ascii")??Bs(r,"w:hAnsi")??Bs(r,"w:eastAsia");typeof i=="string"&&i.trim()&&(n.fontFamily=i);const s=qu(Bs(Ss(e,"w:sz"),"w:val"))??qu(Bs(Ss(e,"w:szCs"),"w:val"));s!=null&&(n.fontSize=s/2);const o=kyt(Bs(Ss(e,"w:color"),"w:val"));o&&(n.color=o);const a=Ss(e,"w:b");if(a){const u=Bs(a,"w:val");(u==null||Hf(u))&&(n.bold=!0)}const l=Ss(e,"w:i");if(l){const u=Bs(l,"w:val");(u==null||Hf(u))&&(n.italic=!0)}const c=qu(Bs(Ss(e,"w:spacing"),"w:val"));return c!=null&&Number.isFinite(c)&&(n.letterSpacing=Jr(c)),Object.keys(n).length?n:void 0},_yt=t=>{if(!t)return;const e=Ss(t,"w:numFmt");if(e)return e;const n=Ss(t,"mc:AlternateContent"),r=Ss(n,"mc:Choice");if(r)return Ss(r,"w:numFmt")},Nyt=(t,e,n)=>{var x,T;const r=n==null?void 0:n.definitions,i=n==null?void 0:n.abstracts;if(!r||!i)return;const s=bse(r[String(t)]);if(!s)return;const o=Bs(Ss(s,"w:abstractNumId"),"w:val");if(o==null)return;const a=bse(i[String(o)]);if(!a)return;let l=(x=a.elements)==null?void 0:x.find(R=>{var k;return(R==null?void 0:R.name)==="w:lvl"&&qu((k=R.attributes)==null?void 0:k["w:ilvl"])===e});const c=(T=s.elements)==null?void 0:T.find(R=>{var k;return(R==null?void 0:R.name)==="w:lvlOverride"&&qu((k=R.attributes)==null?void 0:k["w:ilvl"])===e}),u=Ss(c,"w:lvl");u&&(l=u);const d=qu(Bs(Ss(c,"w:startOverride"),"w:val"));if(!l)return;const f=_yt(l),h=Bs(Ss(l,"w:lvlText"),"w:val"),m=d??qu(Bs(Ss(l,"w:start"),"w:val")),y=Syt(Bs(Ss(l,"w:suff"),"w:val")),w=Ayt(Bs(Ss(l,"w:lvlJc"),"w:val")),b=Tyt(l),E=Cyt(l);return{format:Eyt(Bs(f,"w:val")),lvlText:h,start:m,suffix:y,lvlJc:w,resolvedLevelIndent:b,resolvedMarkerRpr:E}},Hf=t=>{if(t===!0||t===1)return!0;if(typeof t=="string"){const e=t.toLowerCase();if(e==="true"||e==="1"||e==="on")return!0}return!1},wse=(t,e)=>!t||typeof t!="object"?void 0:t[e],PB=t=>{if(t===!1||t===0)return!0;if(typeof t=="string"){const e=t.toLowerCase();return e==="false"||e==="0"||e==="off"}return!1},s2e=(t,e)=>{var o,a;const n=t.elements;if(!Array.isArray(n))return;const r=new Set((Array.isArray(e)?e:[e]).flatMap(l=>l.startsWith("w:")?[l,l.slice(2)]:[l,`w:${l}`])),i=n.find(l=>{if(!l||typeof l!="object")return!1;const c=l.name;return typeof c=="string"&&r.has(c)});if(!i)return;const s=((o=i.attributes)==null?void 0:o["w:val"])??((a=i.attributes)==null?void 0:a.val);if(s==null)return!0;if(PB(s))return!1;if(Hf(s))return!0},vse=(t,e,n)=>{const r=t.attrs??{};if(e in r){const s=r[e];if(Hf(s))return!0;if(PB(s))return!1}const i=r.paragraphProperties;if(i){if(e in i){const s=i[e];if(Hf(s))return!0;if(PB(s))return!1}return s2e(i,n)}},Iyt=t=>{const e=t.attrs??{};if(Hf(e.pageBreakBefore))return!0;const n=e.paragraphProperties;if(n&&Hf(n.pageBreakBefore))return!0;if(n){const r=s2e(n,"w:pageBreakBefore");if(typeof r=="boolean")return r}return!1},X9=t=>{if(!t)return;const e={...t};if(t.spacing&&(e.spacing={...t.spacing}),t.indent&&(e.indent={...t.indent}),t.borders){const n={};["top","right","bottom","left"].forEach(r=>{var s;const i=(s=t.borders)==null?void 0:s[r];i&&(n[r]={...i})}),e.borders=Object.keys(n).length?n:void 0}return t.shading&&(e.shading={...t.shading}),t.tabs&&(e.tabs=t.tabs.map(n=>({...n}))),t.dropCapDescriptor&&(e.dropCapDescriptor={...t.dropCapDescriptor,run:{...t.dropCapDescriptor.run}}),e},o2e=(t,e,n)=>{if(!t)return{};const r={},i=Yv(t.alignment??t.textAlign);i&&(r.alignment=i),e&&(r.spacing=R0t(e)),n&&(r.indent=M0t(n));const s=t.tabs??t.tabStops,o=OB(s);o&&(r.tabs=o);const a={};return r&&Object.keys(r).length>0&&(a.paragraphProps=r),a},Ryt=t=>{if(!t||typeof t!="object")return;const e=t,n=typeof e.markerText=="string"?e.markerText:void 0,r=e.justification==="left"||e.justification==="right"||e.justification==="center"?e.justification:void 0,i=typeof e.numberingType=="string"?e.numberingType:void 0,s=e.suffix==="tab"||e.suffix==="space"||e.suffix==="nothing"?e.suffix:void 0,o=Array.isArray(e.path)&&e.path.length?e.path.map(a=>typeof a=="number"?a:Number(a)).filter(a=>Number.isFinite(a)):void 0;return{markerText:n,justification:r,numberingType:i,suffix:s,path:o&&o.length?o:void 0}},Myt=(t,e,n,r)=>{const i=Number.isFinite(e)&&e>0?Math.floor(e):0;if(!r||typeof t!="number")return Array.from({length:i+1},(o,a)=>a===i?n:1);const s=[];for(let o=0;o<i;o+=1){const a=r.getListCounter(t,o);s.push(a>0?a:1)}return s.push(n),s},oy=t=>{if(!t)return;const e={},n=a=>{if(typeof a=="string"&&a.trim()!==""&&isFinite(Number(a))||Yr(a))return Number(a)},r=n(t.left),i=n(t.right),s=n(t.firstLine),o=n(t.hanging);return r!=null&&(e.left=Jr(r)),i!=null&&(e.right=Jr(i)),s!=null&&(e.firstLine=Jr(s)),o!=null&&(e.hanging=Jr(o)),Object.keys(e).length>0?e:void 0},Lyt=t=>{if(!t||typeof t!="object")return;const e=t,n=e.numId;if(typeof n!="number"&&typeof n!="string")return;const r=e.ilvl,i=Number.isFinite(r)?Math.floor(Number(r)):0;return{...e,numId:n,ilvl:i}},Dyt=t=>{if(!Array.isArray(t)||t.length===0)return;const e=[];for(const n of t){if(!n||typeof n.pos!="number")continue;const r=Oyt(n.val);if(!r)continue;const i=Jr(n.pos);if(!Number.isFinite(i))continue;const s={position:i,alignment:r};n.leader&&n.leader!=="none"&&(s.leader=n.leader),e.push(s)}return e.length>0?e:void 0},Oyt=t=>{switch(t){case"start":case"center":case"end":case"decimal":case"bar":return t;default:return}},K5=64,Pyt="Times New Roman",Fyt=t=>{const e=t.content;if(!Array.isArray(e)||e.length===0)return null;let n="",r={},i={};const s=50,o=(b,E=0)=>{var A;if(E>s)return console.warn(`extractTextAndStyle exceeded max recursion depth (${s})`),!1;for(const x of b)if(x){if(x.type==="text"&&typeof x.text=="string"&&x.text.length>0){if(n=x.text,Array.isArray(x.marks))for(const T of x.marks)(T==null?void 0:T.type)==="textStyle"&&T.attrs&&(i={...i,...T.attrs});return!0}if(x.type==="run"){if((A=x.attrs)!=null&&A.runProperties&&typeof x.attrs.runProperties=="object"&&(r={...r,...x.attrs.runProperties}),Array.isArray(x.marks))for(const T of x.marks)(T==null?void 0:T.type)==="textStyle"&&T.attrs&&(i={...i,...T.attrs});if(Array.isArray(x.content)&&o(x.content,E+1))return!0}if(Array.isArray(x.content)&&o(x.content,E+1))return!0}return!1};if(o(e),!n)return null;const a={...r,...i};let l=K5;const c=a.fontSize??a["w:sz"]??a.sz;if(c!=null){if(typeof c=="number")l=(c>100?Ea(c/2):c)??K5;else if(typeof c=="string"){const b=parseFloat(c);Number.isFinite(b)&&(c.endsWith("pt")?l=Ea(b)??K5:c.endsWith("px")?l=b:l=(b>100?Ea(b/2):b)??K5)}}let u=Pyt;const d=a.fontFamily??a["w:rFonts"]??a.rFonts;if(typeof d=="string")u=d;else if(d&&typeof d=="object"){const b=d,E=b["w:ascii"]??b.ascii;typeof E=="string"&&(u=E)}const f={text:n,fontFamily:u,fontSize:l},h=a.bold??a["w:b"]??a.b;Hf(h)&&(f.bold=!0);const m=a.italic??a["w:i"]??a.i;Hf(m)&&(f.italic=!0);const y=a.color??a["w:color"]??a.val;typeof y=="string"&&y.length>0&&y.toLowerCase()!=="auto"&&(f.color=y.startsWith("#")?y:`#${y}`);const w=a.position??a["w:position"];if(w!=null){const b=hn(w);b!=null&&(f.position=Ea(b/2))}return f},Byt=(t,e,n,r,i,s)=>{var o,a,l,c,u,d,f,h,m;if(e===null)return null;try{let y=t.indent;e!=null&&e.resolvedLevelIndent&&(y={...oy(e.resolvedLevelIndent)??e.resolvedLevelIndent,...t.indent});const w=Dyt(t.tabs),b={indent:y,spacing:t.spacing,tabs:w,tabIntervalTwips:t.tabIntervalTwips,alignment:t.alignment,decimalSeparator:t.decimalSeparator,numberingProperties:e},E=((o=n.defaults)==null?void 0:o.paragraphFont)??((a=n.defaults)==null?void 0:a.paragraphFontFamily)??"Times New Roman",A=((l=n.defaults)==null?void 0:l.fontSize)??12,x={defaultTabIntervalTwips:((c=n.defaults)==null?void 0:c.defaultTabIntervalTwips)??720,decimalSeparator:((u=n.defaults)==null?void 0:u.decimalSeparator)??".",run:{fontFamily:E,fontSize:A},paragraph:{indent:{},spacing:{}}};let T;const R=r&&i?myt(r,i,s):null;if(R){const _=R.color?`#${R.color.replace("#","")}`:void 0;T={fontFamily:R.fontFamily??"Times New Roman",fontSize:R.fontSize/2,bold:R.bold,italic:R.italic,color:_,letterSpacing:R.letterSpacing!=null?Jr(R.letterSpacing):void 0}}if(T||(T=e==null?void 0:e.resolvedMarkerRpr),!T){const{character:_}=fU({styleId:t.styleId},n);_&&(T={fontFamily:((d=_.font)==null?void 0:d.family)??"Times New Roman",fontSize:((f=_.font)==null?void 0:f.size)??12,bold:((h=_.font)==null?void 0:h.weight)!=null&&_.font.weight>400,italic:(m=_.font)==null?void 0:m.italic,color:_.color,letterSpacing:_.letterSpacing})}if(T||(T={fontFamily:"Times New Roman",fontSize:12,color:"#000000"}),T.fontSize!=null){const _=Ea(T.fontSize);_!=null&&(T={...T,fontSize:_})}return syt({paragraph:b,numbering:e,markerRun:T,docDefaults:x})}catch{return null}},jyt=(t,e)=>{const n=t.resolvedIndent??e??{},r=Yr(n.left)?n.left:0,i=Yr(n.firstLine)?n.firstLine:0,s=Yr(n.hanging)?n.hanging:0,o=i>0&&!s;return t.firstLineIndentMode===!0&&!o&&(t.firstLineIndentMode=!1),t.firstLineIndentMode===!0?Yr(t.textStartPx)?t.marker&&(!Yr(t.marker.textStartX)||t.marker.textStartX!==t.textStartPx)&&(t.marker.textStartX=t.textStartPx):t.marker&&Yr(t.marker.textStartX)&&(t.textStartPx=t.marker.textStartX):(t.textStartPx=r,t.marker&&(t.marker.textStartX=r)),t},$yt=(t,e,n,r,i)=>{var we,Ae,Re,Pe,Ce,Oe,Fe;const s=t.attrs??{},o=typeof s.paragraphProperties=="object"&&s.paragraphProperties!==null?s.paragraphProperties:{},a=i??r2e(t,r),l=xyt(a==null?void 0:a.spacing,o.spacing,s.spacing),c=Jxe(l),u=$e=>{if(!(!$e||typeof $e!="object"))return Qxe($e)??oy($e)},d=oy(a==null?void 0:a.indent),f=oy(o.indent),h=e2e(s.textIndent),m=u(s.indent),y=[];d&&y.push({indent:d}),f&&y.push({indent:f}),h&&y.push({indent:h}),m&&y.push({indent:m});const w=y.length?yge(y).indent:void 0,b=$e=>{if(!Array.isArray($e))return;const he=[];for(const q of $e){if(!q||typeof q!="object")continue;if("tab"in q){const ze=q.tab;if(!ze||typeof ze!="object")continue;const Ie=ze,qe=typeof Ie.tabType=="string"?Ie.tabType:typeof Ie.val=="string"?Ie.val:void 0,Ye=hn(Ie.originalPos),ft=Ye??hn(Ie.pos);if(!qe||ft==null)continue;const We={val:qe,pos:ft};Ye!=null&&Number.isFinite(Ye)?We.originalPos=Ye:We.originalPos=ft;const nt=Ie.leader;typeof nt=="string"&&nt.length>0&&(We.leader=nt),he.push(We);continue}const ne=q;("val"in ne||"tabType"in ne)&&("pos"in ne||"originalPos"in ne)&&he.push(ne)}return he.length>0?he:void 0},E={...s},A=$e=>Array.isArray($e)?$e:void 0,x=b(E.tabStops??E.tabs)??A(E.tabStops),T=b(a==null?void 0:a.tabStops)??A(a==null?void 0:a.tabStops),R=b(o.tabStops)??A(o.tabStops),k=15,_=1e3,N=$e=>{const he=hn($e.originalPos);if(he!=null)return he;const q=hn($e.pos??$e.position??$e.offset);if(q!=null)return q>_?q:Math.round(q*k)},M=((...$e)=>{const he=new Map;for(const q of $e)if(Array.isArray(q))for(const ne of q){if(!ne||typeof ne!="object")continue;const Ee=N(ne);Ee!=null&&he.set(Ee,{...ne})}if(he.size!==0)return Array.from(he.entries()).sort(([q],[ne])=>q-ne).map(([,q])=>q)})(T,R,x);M&&(E.tabStops=M,"tabs"in E&&delete E.tabs);const C=o2e(E,c,w);E.styleId==null&&o.styleId&&(C.styleId=o.styleId);const D=fU(C,e),{spacing:O,indent:$}=wyt(D.paragraph,D.numbering),U={},W=vse(t,"bidi","w:bidi")===!0,ce=vse(t,"adjustRightInd","w:adjustRightInd")===!0;W&&(U.direction="rtl",U.rtl=!0);const se=Yv(s.alignment??s.textAlign),Q=typeof o.justification=="string"?Yv(o.justification):void 0,J=a!=null&&a.alignment?Yv(a.alignment):void 0;W&&ce?U.alignment="right":se?U.alignment=se:Q?U.alignment=Q:W?U.alignment="right":J?U.alignment=J:D.paragraph.alignment&&(U.alignment=Yv(D.paragraph.alignment));const K=L0t(O,c);K&&(U.spacing=K),((c==null?void 0:c.beforeAutospacing)!=null||(c==null?void 0:c.afterAutospacing)!=null)&&(U.spacing=U.spacing??{},(c==null?void 0:c.beforeAutospacing)!=null&&(U.spacing.beforeAutospacing=c.beforeAutospacing),(c==null?void 0:c.afterAutospacing)!=null&&(U.spacing.afterAutospacing=c.afterAutospacing));const re=(c==null?void 0:c.contextualSpacing)??wse(o,"contextualSpacing")??wse(s,"contextualSpacing")??(a==null?void 0:a.contextualSpacing);re!=null&&(U.contextualSpacing=Hf(re));const X=!!w,me=!!((Ae=(we=D.numbering)==null?void 0:we.indent)!=null&&Ae.left||(Pe=(Re=D.numbering)==null?void 0:Re.indent)!=null&&Pe.hanging);if(X||me||W&&ce){const $e=D0t($);if($e){const he=W&&ce?H0t({...$e}):$e,q=W&&ce?hse({...he}):he;U.indent=q}else if(W&&ce){const q=hse({...{left:HI,right:HI}});U.indent=q}}const G=k0t(s.borders??(a==null?void 0:a.borders)??o.borders);G&&(U.borders=G);const B=N0t(s.shading??(a==null?void 0:a.shading)??o.shading);B&&(U.shading=B),(o.keepNext??(a==null?void 0:a.keepNext)??s.keepNext)===!0&&(U.keepNext=!0),(o.keepLines??(a==null?void 0:a.keepLines)??s.keepLines)===!0&&(U.keepLines=!0);const Y=((Ce=e.defaults)==null?void 0:Ce.decimalSeparator)??yse;Y!==yse&&(U.decimalSeparator=Y);const ee=typeof s.styleId=="string"?s.styleId:void 0;ee?U.styleId=ee:o.styleId&&(U.styleId=o.styleId);const ae=hn(s.tabIntervalTwips)??(()=>{const $e=hn(s.tabIntervalPx);return $e!=null?Math.round($e*15):void 0})(),ie=(Oe=e.defaults)==null?void 0:Oe.defaultTabIntervalTwips;if(ae!=null?U.tabIntervalTwips=ae:ie!=null&&(U.tabIntervalTwips=ie),D.paragraph.tabs&&D.paragraph.tabs.length>0)U.tabs=D.paragraph.tabs.map($e=>({...$e}));else if(M){const $e=OB(M);$e&&(U.tabs=$e)}else if(T){const $e=OB(T);$e&&(U.tabs=$e)}const H=$e=>typeof $e=="string"?$e:void 0,be=$e=>{if(!$e||typeof $e!="object")return;const he=$e;return he.attributes&&typeof he.attributes=="object"?he.attributes:he},Te=$e=>{if(!$e||typeof $e!="object")return;const he=$e;if(!Array.isArray(he.elements))return;const q=he.elements.find(ne=>ne.name==="w:framePr");if(q!=null&&q.attributes&&typeof q.attributes=="object")return q.attributes},Z=be(s.framePr)??be((Fe=s.paragraphProperties)==null?void 0:Fe.framePr)??Te(s.paragraphProperties);if(Z){const $e=H(Z["w:xAlign"]??Z.xAlign),he=typeof $e=="string"?$e.toLowerCase():void 0;(he==="left"||he==="right"||he==="center")&&(U.floatAlignment=he);const q=Z["w:dropCap"]??Z.dropCap;if(q!=null&&(typeof q=="string"||typeof q=="number"||typeof q=="boolean")){U.dropCap=q;const ft=typeof q=="string"?q.toLowerCase():"drop",We=hn(Z["w:lines"]??Z.lines),nt=H(Z["w:wrap"]??Z.wrap),bt=Fyt(t);if(bt){const ct={mode:ft==="margin"?"margin":"drop",lines:We!=null&&We>0?We:3,run:bt};if(nt){const Ft=nt.toLowerCase();(Ft==="around"||Ft==="notbeside"||Ft==="none"||Ft==="tight")&&(ct.wrap=Ft==="notbeside"?"notBeside":Ft)}U.dropCapDescriptor=ct}}const ne={},Ee=H(Z["w:wrap"]??Z.wrap);Ee&&(ne.wrap=Ee),he&&(ne.xAlign=he);const Se=H(Z["w:yAlign"]??Z.yAlign);Se&&(ne.yAlign=Se);const ze=H(Z["w:hAnchor"]??Z.hAnchor);ze&&(ne.hAnchor=ze);const Ie=H(Z["w:vAnchor"]??Z.vAnchor);Ie&&(ne.vAnchor=Ie);const qe=hn(Z["w:x"]??Z.x);qe!=null&&(ne.x=Jr(qe));const Ye=hn(Z["w:y"]??Z.y);Ye!=null&&(ne.y=Jr(Ye)),Object.keys(ne).length>0&&(U.frame=ne)}const oe=Ryt(s.listRendering),te=s.numberingProperties??o.numberingProperties??(a==null?void 0:a.numberingProperties);let ye=Lyt(te);if(!ye&&oe){const $e=oe.path,he=$e&&$e.length?$e[$e.length-1]:void 0;ye={numId:-1,ilvl:$e&&$e.length>1?$e.length-1:0,path:$e,counterValue:Number.isFinite(he)?Number(he):void 0,markerText:oe.markerText,format:oe.numberingType,lvlJc:oe.justification,suffix:oe.suffix}}if(ye&&vyt(ye.numId)&&ye){const $e=ye,he=$e.numId,q=Number.isFinite($e.ilvl)?Math.max(0,Math.floor(Number($e.ilvl))):0,ne=typeof he=="number"?he:void 0;let Ee;try{Ee=Nyt(he,q,r==null?void 0:r.numbering)}catch{Ee=void 0}Ee&&(Ee.format&&$e.format==null&&($e.format=Ee.format),Ee.lvlText&&$e.lvlText==null&&($e.lvlText=Ee.lvlText),Ee.start!=null&&$e.start==null&&($e.start=Ee.start),Ee.suffix&&$e.suffix==null&&($e.suffix=Ee.suffix),Ee.lvlJc&&$e.lvlJc==null&&($e.lvlJc=Ee.lvlJc),Ee.resolvedLevelIndent&&!$e.resolvedLevelIndent&&($e.resolvedLevelIndent=Ee.resolvedLevelIndent),Ee.resolvedMarkerRpr&&!$e.resolvedMarkerRpr&&($e.resolvedMarkerRpr=Ee.resolvedMarkerRpr));let Se=1;if(n&&typeof ne=="number"){Se=n.incrementListCounter(ne,q);for(let ft=q+1;ft<=8;ft++)n.resetListCounter(ne,ft)}const ze=(oe!=null&&oe.path&&oe.path.length?oe.path:void 0)??Myt(ne,q,Se,n),Ie=ze[ze.length-1]??Se,qe={...$e,numId:$e.numId,ilvl:$e.ilvl,path:ze,counterValue:Ie};if(oe!=null&&oe.numberingType&&qe.format==null&&(qe.format=oe.numberingType),oe!=null&&oe.markerText&&qe.markerText==null&&(qe.markerText=oe.markerText),oe!=null&&oe.justification&&qe.lvlJc==null&&(qe.lvlJc=oe.justification),oe!=null&&oe.suffix&&qe.suffix==null&&(qe.suffix=oe.suffix),!qe.resolvedMarkerRpr){const ft=D.numbering;if(ft&&typeof ft.marker=="object"&&ft.marker!==null){const We=ft.marker;typeof We.run=="object"&&We.run!==null&&(qe.resolvedMarkerRpr=We.run)}}let Ye=null;try{Ye=Byt(U,qe,e,t,r,a==null?void 0:a.resolved)}catch{Ye=null}if(!Ye&&qe.resolvedLevelIndent){const nt={...oy(qe.resolvedLevelIndent)??qe.resolvedLevelIndent,...U.indent??{}},bt=Yr(nt.firstLine)?nt.firstLine:0,ct=Yr(nt.hanging)?nt.hanging:0;bt>0&&!ct&&(Ye={firstLineIndentMode:!0,textStartPx:bt})}if(Ye&&!Number.isFinite(Ye.textStartPx)&&qe.resolvedLevelIndent){const nt={...oy(qe.resolvedLevelIndent)??qe.resolvedLevelIndent,...U.indent??{}},bt=Yr(nt.firstLine)?nt.firstLine:0,ct=Yr(nt.hanging)?nt.hanging:0;bt>0&&!ct&&(Ye={...Ye,firstLineIndentMode:Ye.firstLineIndentMode??!0,textStartPx:bt})}if(Ye&&(Ye.marker&&(oe!=null&&oe.markerText&&(Ye.marker.markerText=oe.markerText),oe!=null&&oe.justification&&(Ye.marker.justification=oe.justification),oe!=null&&oe.suffix&&(Ye.marker.suffix=oe.suffix)),Ye=jyt(Ye,U.indent),U.wordLayout=Ye),qe.resolvedLevelIndent){const We=oy(qe.resolvedLevelIndent)??qe.resolvedLevelIndent;U.indent={...We,...w??{}},(w==null?void 0:w.firstLine)!==void 0?delete U.indent.hanging:(w==null?void 0:w.hanging)!==void 0&&delete U.indent.firstLine}U.numberingProperties=qe}return Object.keys(U).length>0?U:void 0};function EC(t){if(typeof t.attrs!="object"||t.attrs===null)return;const e=t.attrs;return typeof e.instruction=="string"?e.instruction:void 0}function a2e(t){if(typeof t.attrs!="object"||t.attrs===null)return;const e=t.attrs;return typeof e.docPartGallery=="string"?e.docPartGallery:void 0}function l2e(t){if(typeof t.attrs!="object"||t.attrs===null)return;const e=t.attrs;return typeof e.id=="string"?e.id:void 0}function Gb(t,e){const n=t.attrs;if(!n)return;const r=e??t.type;if(!r)return;const i=typeof n.hash=="string"?n.hash:typeof n.id=="string"?n.id:typeof n.fieldId=="string"?n.fieldId:void 0;return Nwe({nodeType:r,attrs:n,cacheKey:i})}function Kb(t,e){e&&t.forEach(n=>{n.kind==="paragraph"&&(n.attrs||(n.attrs={}),n.attrs.sdt=e)})}function VI(t,e){var r;if(!e||!t||t.kind!=="table")return;const n=t;n.attrs||(n.attrs={}),n.attrs.sdt=e,(r=n.rows)==null||r.forEach(i=>{var s;(s=i.cells)==null||s.forEach(o=>{o.paragraph&&Kb([o.paragraph],e)})})}function zyt(t,e){t.forEach(n=>{n.kind==="paragraph"&&(n.attrs||(n.attrs={}),n.attrs.isTocEntry=!0,n.attrs.sdt||(n.attrs.sdt={type:"docPartObject",gallery:e.gallery,uniqueId:e.uniqueId,instruction:e.instruction}),e.instruction&&(n.attrs.tocInstruction=e.instruction))})}function lW(t,e,n,r,i){const{docPartGallery:s,docPartObjectId:o,tocInstruction:a}=e,{blocks:l,recordBlockKind:c}=r;t.forEach(u=>{if(u.type==="paragraph"){const d=i(u,n.nextBlockId,n.positions,n.defaultFont,n.defaultSize,n.styleContext,n.listCounterContext,n.trackedChanges,n.bookmarks,n.hyperlinkConfig);zyt(d,{gallery:s,uniqueId:o,instruction:a}),Kb(d.filter(f=>f.kind==="paragraph"),e.sdtMetadata),d.forEach(f=>{l.push(f),c(f.kind)})}else if(u.type==="tableOfContents"&&Array.isArray(u.content)){const f=EC(u)??a;lW(u.content,{docPartGallery:s,docPartObjectId:o,tocInstruction:f,sdtMetadata:e.sdtMetadata},n,r,i)}})}function Hyt(t,e){if(!Array.isArray(t.content))return;const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,trackedChangesConfig:u,bookmarks:d,hyperlinkConfig:f,converters:h}=e,{getListCounter:m,incrementListCounter:y,resetListCounter:w}=c,b=EC(t),E=h==null?void 0:h.paragraphToFlowBlocks;E&&t.content.forEach(A=>{A.type==="paragraph"&&E(A,i,s,o,a,l,{getListCounter:m,incrementListCounter:y,resetListCounter:w},u,d,f).forEach(T=>{T.kind==="paragraph"&&(T.attrs||(T.attrs={}),T.attrs.isTocEntry=!0,b&&(T.attrs.tocInstruction=b)),n.push(T),r(T.kind)})})}function Vyt(t,e){if(!Array.isArray(t.content))return;const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,trackedChangesConfig:u,bookmarks:d,hyperlinkConfig:f,converters:h}=e,{getListCounter:m,incrementListCounter:y,resetListCounter:w}=c,b=Gb(t,"structuredContentBlock"),E=h==null?void 0:h.paragraphToFlowBlocks;E&&t.content.forEach(A=>{if(A.type==="paragraph"){const x=E(A,i,s,o,a,l,{getListCounter:m,incrementListCounter:y,resetListCounter:w},u,d,f);Kb(x.filter(T=>T.kind==="paragraph"),b),x.forEach(T=>{n.push(T),r(T.kind)})}else if(A.type==="table"){const x=h==null?void 0:h.tableNodeToBlock;if(x){const T=x(A,i,s,o,a,l,u,d,f);T&&(VI(T,b),n.push(T),r(T.kind))}}})}function Uyt(t,e,n,r,i){const{getListCounter:s,incrementListCounter:o,resetListCounter:a}=n.listCounterContext,l=i.paragraphToFlowBlocks(t,n.nextBlockId,n.positions,n.defaultFont,n.defaultSize,n.styleContext,{getListCounter:s,incrementListCounter:o,resetListCounter:a},void 0,n.bookmarks,n.hyperlinkConfig);Kb(l.filter(c=>c.kind==="paragraph"),e),l.forEach(c=>{r.blocks.push(c),r.recordBlockKind(c.kind)})}function Wyt(t,e,n,r,i){const s=i.tableNodeToBlock(t,n.nextBlockId,n.positions,n.defaultFont,n.defaultSize,n.styleContext,void 0,void 0,n.hyperlinkConfig);s&&(VI(s,e),r.blocks.push(s),r.recordBlockKind(s.kind))}function qyt(t,e,n,r,i){const s=i.imageNodeToBlock(t,n.nextBlockId,n.positions);s&&s.kind==="image"&&(e&&(s.attrs||(s.attrs={}),s.attrs.sdt=e),r.blocks.push(s),r.recordBlockKind(s.kind))}function Gyt(t,e,n,r,i){var c;const{getListCounter:s,incrementListCounter:o,resetListCounter:a}=n.listCounterContext,l=Gb(t,"structuredContentBlock");(c=t.content)==null||c.forEach(u=>{if(u.type==="paragraph"){const d=i.paragraphToFlowBlocks(u,n.nextBlockId,n.positions,n.defaultFont,n.defaultSize,n.styleContext,{getListCounter:s,incrementListCounter:o,resetListCounter:a},void 0,n.bookmarks,n.hyperlinkConfig),f=d.filter(h=>h.kind==="paragraph");Kb(f,l),Kb(f,e),d.forEach(h=>{r.blocks.push(h),r.recordBlockKind(h.kind)})}else if(u.type==="table"){const d=i.tableNodeToBlock(u,n.nextBlockId,n.positions,n.defaultFont,n.defaultSize,n.styleContext,void 0,void 0,n.hyperlinkConfig);d&&(l&&VI(d,l),VI(d,e),r.blocks.push(d),r.recordBlockKind(d.kind))}})}function Kyt(t,e,n,r,i){var f;const{getListCounter:s,incrementListCounter:o,resetListCounter:a}=n.listCounterContext,l=a2e(t),c=l2e(t),u=EC(t),d=Gb(t,"docPartObject");if(l==="Table of Contents"){const h=r.blocks.length;lW(Array.from(t.content??[]),{docPartGallery:l,docPartObjectId:c,tocInstruction:u,sdtMetadata:d},{nextBlockId:n.nextBlockId,positions:n.positions,defaultFont:n.defaultFont,defaultSize:n.defaultSize,styleContext:n.styleContext,listCounterContext:{getListCounter:s,incrementListCounter:o,resetListCounter:a},bookmarks:n.bookmarks,hyperlinkConfig:n.hyperlinkConfig},{blocks:r.blocks,recordBlockKind:r.recordBlockKind},i.paragraphToFlowBlocks);for(let m=h;m<r.blocks.length;m++){const y=r.blocks[m];if(y.kind==="paragraph"){const w=(f=y.attrs)==null?void 0:f.sdt;(w==null?void 0:w.type)==="docPartObject"?e&&(y.attrs||(y.attrs={}),y.attrs.containerSdt=e):Kb([y],e)}}}}function Xyt(t,e,n,r,i){t.forEach(s=>{s.type==="paragraph"?Uyt(s,e,n,r,i):s.type==="table"?Wyt(s,e,n,r,i):s.type==="image"?qyt(s,e,n,r,i):s.type==="structuredContentBlock"&&Array.isArray(s.content)?Gyt(s,e,n,r,i):s.type==="documentPartObject"&&Array.isArray(s.content)&&Kyt(s,e,n,r,i)})}function Yyt(t,e){if(!Array.isArray(t.content))return;const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,bookmarks:u,hyperlinkConfig:d,converters:f}=e,h=Gb(t,"documentSection"),m={paragraphToFlowBlocks:(f==null?void 0:f.paragraphToFlowBlocks)||(()=>[]),tableNodeToBlock:(f==null?void 0:f.tableNodeToBlock)||(()=>null),imageNodeToBlock:(f==null?void 0:f.imageNodeToBlock)||(()=>null)};Xyt(t.content,h,{nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,bookmarks:u,hyperlinkConfig:d},{blocks:n,recordBlockKind:r},m)}function Zyt(t,e){if(!Array.isArray(t.content))return;const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,bookmarks:c,hyperlinkConfig:u,converters:d,listCounterContext:f,trackedChangesConfig:h}=e,m=a2e(t),y=l2e(t),w=EC(t),b=Gb(t,"docPartObject"),E=d==null?void 0:d.paragraphToFlowBlocks;if(m==="Table of Contents"&&E)lW(Array.from(t.content),{docPartGallery:m,docPartObjectId:y,tocInstruction:w,sdtMetadata:b},{nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,bookmarks:c,hyperlinkConfig:u},{blocks:n,recordBlockKind:r},E);else if(E){for(const A of t.content)if(A.type==="paragraph"){const x=E(A,i,s,o,a,l,f,h,c,u);for(const T of x)n.push(T),r(T.kind)}}}const Jyt=new Set(["None","Square","Tight","Through","TopAndBottom","Inline"]),Qyt=new Set(["bothSides","left","right","largest"]),ebt=new Set(["column","page","margin"]),tbt=new Set(["paragraph","page","margin"]),nbt=new Set(["left","center","right"]),rbt=new Set(["top","center","bottom"]),gM=t=>To(t.attrs)?t.attrs:{},ibt=t=>{if(typeof t=="string")return Jyt.has(t)?t:void 0},sbt=t=>{if(typeof t=="string")return Qyt.has(t)?t:void 0},obt=t=>{if(!Array.isArray(t))return;const e=[];return t.forEach(n=>{if(!Array.isArray(n)||n.length<2)return;const r=hn(n[0]),i=hn(n[1]);r==null||i==null||e.push([r,i])}),e.length>0?e:void 0},abt=t=>{if(!To(t))return;const e=ibt(t.type);if(!e||e==="Inline")return;const n={type:e},r=To(t.attrs)?t.attrs:{},i=sbt(r.wrapText);i&&(n.wrapText=i);const s=hn(r.distTop??r.distT);s!=null&&(n.distTop=s);const o=hn(r.distBottom??r.distB);o!=null&&(n.distBottom=o);const a=hn(r.distLeft??r.distL);a!=null&&(n.distLeft=a);const l=hn(r.distRight??r.distR);l!=null&&(n.distRight=l);const c=obt(r.polygon);c&&(n.polygon=c);const u=Hxe(r.behindDoc);return u!=null&&(n.behindDoc=u),n},xse=(t,e)=>{if(typeof t=="string")return e.has(t)?t:void 0},Ese=(t,e)=>{if(typeof t=="string")return e.has(t)?t:void 0},lbt=(t,e,n)=>{const r=To(t)?t:void 0,i=To(e.marginOffset)?e.marginOffset:void 0,s=To(e.simplePos)?e.simplePos:void 0,o=To(e.originalAttributes)?e.originalAttributes:void 0,a=e.isAnchor===!0||!!r,l={};a&&(l.isAnchored=!0);const c=xse(r==null?void 0:r.hRelativeFrom,ebt);c&&(l.hRelativeFrom=c);const u=xse(r==null?void 0:r.vRelativeFrom,tbt);u&&(l.vRelativeFrom=u);const d=Ese(r==null?void 0:r.alignH,nbt);d&&(l.alignH=d);const f=Ese(r==null?void 0:r.alignV,rbt);f&&(l.alignV=f);const h=hn((i==null?void 0:i.horizontal)??(i==null?void 0:i.left)??(r==null?void 0:r.offsetH)??(s==null?void 0:s.x));h!=null&&(l.offsetH=h);const m=hn((i==null?void 0:i.top)??(i==null?void 0:i.vertical)??(r==null?void 0:r.offsetV)??(s==null?void 0:s.y));m!=null&&(l.offsetV=m);const y=Hxe((r==null?void 0:r.behindDoc)??n??(o==null?void 0:o.behindDoc));return y!=null&&(l.behindDoc=y),l.isAnchored||l.hRelativeFrom!=null||l.vRelativeFrom!=null||l.alignH!=null||l.alignV!=null||l.offsetH!=null||l.offsetV!=null||l.behindDoc!=null?l:void 0},SC=(t,e,n,r,i,s,o)=>{const a=abt(t.wrap),l=lbt(t.anchorData,t,a==null?void 0:a.behindDoc),c=n.get(r),u={...t};c&&(u.pmStart=c.start,u.pmEnd=c.end);const f=Ugt(t.originalAttributes)??Hp(t.zIndex);return{kind:"drawing",id:e("drawing"),drawingKind:s,padding:V9(t.padding),margin:V9(t.marginOffset)??V9(t.margin),anchor:l,wrap:a,zIndex:f,drawingContentId:typeof t.drawingContentId=="string"?t.drawingContentId:void 0,drawingContent:Rgt(t.drawingContent),attrs:u,geometry:i,shapeKind:typeof t.kind=="string"?t.kind:void 0,fillColor:Bgt(t.fillColor),strokeColor:jgt(t.strokeColor),strokeWidth:Hp(t.strokeWidth),textContent:$gt(t.textContent),textAlign:typeof t.textAlign=="string"?t.textAlign:void 0,textVerticalAlign:zgt(t.textVerticalAlign),textInsets:Hgt(t.textInsets),...o}};function Vx(t,e,n){const r=gM(t),i={width:u0(r.width,1),height:u0(r.height,1),rotation:Hp(r.rotation)??0,flipH:d0(r.flipH)??!1,flipV:d0(r.flipV)??!1};return SC(r,e,n,t,i,"vectorShape")}function Ux(t,e,n){const r=gM(t),i=Mgt(r.groupTransform)?{...r.groupTransform}:void 0,s=Lgt(r.size),o=(s==null?void 0:s.width)??(i==null?void 0:i.width)??1,a=(s==null?void 0:s.height)??(i==null?void 0:i.height)??1,l={width:u0(o,1),height:u0(a,1),rotation:Hp(r.rotation)??0,flipH:d0(r.flipH)??!1,flipV:d0(r.flipV)??!1};return SC(r,e,n,t,l,"shapeGroup",{groupTransform:i,shapes:Dgt(r.shapes),size:s})}function Wx(t,e,n){const r=gM(t),i={width:u0(r.width,1),height:u0(r.height,1),rotation:Hp(r.rotation)??0,flipH:d0(r.flipH)??!1,flipV:d0(r.flipV)??!1};return SC(r,e,n,t,i,"vectorShape")}function qx(t,e,n){const r=gM(t),i={width:u0(r.width,1),height:u0(r.height,1),rotation:Hp(r.rotation)??0,flipH:d0(r.flipH)??!1,flipV:d0(r.flipV)??!1};return SC(r,e,n,t,i,"vectorShape")}function cbt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s}=e,o=Vx(t,i,s);o&&(n.push(o),r(o.kind))}function ubt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s}=e,o=Ux(t,i,s);o&&(n.push(o),r(o.kind))}function dbt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s}=e,o=Wx(t,i,s);o&&(n.push(o),r(o.kind))}function fbt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s}=e,o=qx(t,i,s);o&&(n.push(o),r(o.kind))}const hbt=t=>To(t.attrs)?{...t.attrs}:{},pbt=t=>{if(typeof t=="string"){const e=t.trim();return e.endsWith("%")?{width:e==="100%"?1:null,isFullWidth:e==="100%"}:{width:hn(e)??null,isFullWidth:!1}}return{width:hn(t)??null,isFullWidth:!1}};function c2e(t,e,n){const r=hbt(t),i=hn(r.hrIndentLeft),s=hn(r.hrIndentRight);if(r.horizontalRule!==!0)return null;const o=To(r.size)?r.size:void 0,{width:a,isFullWidth:l}=pbt(o==null?void 0:o.width),c=hn(o==null?void 0:o.height);return!c||c<=0||!l&&(!a||a<=0)?null:(l&&(r.isFullWidth=!0),(i!=null||s!=null)&&(r.hrIndentLeft=i,r.hrIndentRight=s),typeof r.background=="string"&&r.background.trim()&&(r.fillColor=r.background),SC(r,e,n,t,{width:l?1:a??1,height:c,rotation:0,flipH:!1,flipV:!1},"vectorShape",{strokeColor:null}))}const AC=t=>t&&typeof t=="object"&&"value"in t?t.value:t,Y9=t=>{const e=AC(t);if(e!=null){if(typeof e=="boolean")return e;if(typeof e=="number")return e!==0;if(typeof e=="string"){const n=e.trim().toLowerCase();return n?!["0","false","off","none"].includes(n):void 0}return!!e}},Sse=t=>{const e=AC(t);if(typeof e=="string"&&e)return e.startsWith("#")?e:`#${e}`},mbt=t=>{let e;if(t&&typeof t=="object"){const r=t;e=r.underline??r.underlineType??r.value??t}else e=AC(t);const n=`${e??""}`.toLowerCase();if(!(!n||n==="none"||n==="0"||n==="[object object]"))return n==="double"||n==="dotted"||n==="dashed"||n==="wavy"?n:"single"},gbt=96/72,Ase=t=>{var o;const e=AC(t);if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e!="string")return;const r=e.trim().match(/^(-?\d+(\.\d+)?)([a-z%]*)$/i);if(!r)return;const i=parseFloat(r[1]);if(!Number.isFinite(i))return;const s=(o=r[3])==null?void 0:o.toLowerCase();return!s||s==="px"?i:s==="pt"?i*gbt:i},ybt=20;var Py;class bbt{constructor(e){st(this,Py);je(this,Py,new Map),e.forEach(n=>(n==null?void 0:n.id)&&F(this,Py).set(n.id,n))}getStyleMap(e){var a,l;if(!e||typeof e!="string")return{};const n=new Set,r=[];let i=F(this,Py).get(e),s=0;for(;i&&!n.has(i.id);){if(++s>ybt){console.warn(`Style inheritance depth exceeded for: ${e}`);break}r.unshift(i),n.add(i.id);const c=(l=(a=i.definition)==null?void 0:a.attrs)==null?void 0:l.basedOn;if(!c||typeof c!="string")break;i=F(this,Py).get(c)}const o={};return r.forEach(c=>{var u;Object.assign(o,((u=c.definition)==null?void 0:u.styles)||{})}),o}}Py=new WeakMap;const wbt=t=>!t||t.length===0?null:new bbt(t),vbt=(t,e)=>{const{resolver:n,paragraphStyleId:r,inlineStyleId:i,runStyleId:s}=e,o=[];if(r){const b=n.getStyleMap(r);o.push(b)}if(i&&!(r!=null&&r.startsWith("TOC"))){const b=n.getStyleMap(i);o.push(b)}if(s){const b=n.getStyleMap(s);o.push(b)}if(!o.length)return;const a=Object.assign({},...o),l=AC(a["font-family"]);typeof l=="string"&&l&&(t.fontFamily=l);const c=Ase(a["font-size"]);c!=null&&(t.fontSize=c);const u=Ase(a["letter-spacing"]);u!=null&&t.letterSpacing==null&&(t.letterSpacing=u);const d=Sse(a.color);d&&!t.color&&(t.color=d);const f=Sse(a.highlight);f&&!t.highlight&&(t.highlight=f),Y9(a.bold)&&t.bold===void 0&&(t.bold=!0),Y9(a.italic)&&t.italic===void 0&&(t.italic=!0),Y9(a.strike)&&t.strike===void 0&&(t.strike=!0);const w=mbt(a.underline);w&&!t.underline&&(t.underline={style:w})},xbt=t=>{if(!t)return null;if(typeof t=="object"&&!Array.isArray(t)){const e=t.styleId;if(typeof e=="string"&&e.trim())return e;const n=t.formatting;if(n&&typeof n=="object"&&typeof n.styleId=="string")return n.styleId}if(Array.isArray(t)){const e=t.find(i=>i&&typeof i=="object"&&i.xmlName==="w:rStyle"),n=e==null?void 0:e.attributes,r=n==null?void 0:n["w:val"];if(typeof r=="string"&&r.trim())return r}return null},Tse=100,Ebt=2,Sbt=96,Abt=72;function Tbt(t){const e=t.attrs??{},n=e.wrap,r=n==null?void 0:n.type;return r==="Inline"?!0:r&&r!=="Inline"?!1:e.inline===!0||e.display==="inline"}function kbt(t,e,n){const r=t.attrs??{},i=typeof r.src=="string"?r.src:"";if(!i)return null;const s=r.size??{},o=typeof s.width=="number"&&Number.isFinite(s.width)&&s.width>0?s.width:Tse,a=typeof s.height=="number"&&Number.isFinite(s.height)&&s.height>0?s.height:Tse,l=To(r.wrap)?r.wrap:{},c=To(l.attrs)?l.attrs:{},u={kind:"image",src:i,width:o,height:a};typeof r.alt=="string"&&(u.alt=r.alt),typeof r.title=="string"&&(u.title=r.title);const d=hn(c.distTop??c.distT);d!=null&&(u.distTop=d);const f=hn(c.distBottom??c.distB);f!=null&&(u.distBottom=f);const h=hn(c.distLeft??c.distL);h!=null&&(u.distLeft=h);const m=hn(c.distRight??c.distR);m!=null&&(u.distRight=m),u.verticalAlign="bottom";const y=e.get(t);return y&&(u.pmStart=y.start,u.pmEnd=y.end),n&&(u.sdt=n),u}function Cbt(t,e,n){const r=t.attrs??{},i=r.type??(n==null?void 0:n.variant)??"text",o=["text","image","signature","checkbox","html","link"].includes(i)?i:"text",a=(typeof r.displayLabel=="string"?r.displayLabel:void 0)||(typeof r.defaultDisplayLabel=="string"?r.defaultDisplayLabel:void 0)||(typeof(n==null?void 0:n.displayLabel)=="string"?n.displayLabel:void 0)||(typeof(n==null?void 0:n.defaultDisplayLabel)=="string"?n.defaultDisplayLabel:void 0)||(typeof r.alias=="string"?r.alias:void 0)||(typeof(n==null?void 0:n.alias)=="string"?n.alias:void 0)||"",l={kind:"fieldAnnotation",variant:o,displayLabel:a},c=typeof r.fieldId=="string"?r.fieldId:n==null?void 0:n.fieldId;c&&(l.fieldId=c);const u=typeof r.fieldType=="string"?r.fieldType:n==null?void 0:n.fieldType;u&&(l.fieldType=u);const d=typeof r.fieldColor=="string"?r.fieldColor:n==null?void 0:n.fieldColor;d&&(l.fieldColor=d);const f=typeof r.borderColor=="string"?r.borderColor:n==null?void 0:n.borderColor;f&&(l.borderColor=f),(r.highlighted??(n==null?void 0:n.highlighted))===!1&&(l.highlighted=!1),(r.hidden===!0||(n==null?void 0:n.hidden)===!0)&&(l.hidden=!0),(r.visibility??(n==null?void 0:n.visibility))==="hidden"&&(l.visibility="hidden");const y=typeof r.imageSrc=="string"?r.imageSrc:n==null?void 0:n.imageSrc;y&&(l.imageSrc=y);const w=typeof r.linkUrl=="string"?r.linkUrl:n==null?void 0:n.linkUrl;w&&(l.linkUrl=w);const b=r.rawHtml??(n==null?void 0:n.rawHtml);typeof b=="string"&&(l.rawHtml=b);const E=r.size??(n==null?void 0:n.size);E&&(typeof E.width=="number"||typeof E.height=="number")&&(l.size={width:typeof E.width=="number"?E.width:void 0,height:typeof E.height=="number"?E.height:void 0});const A=r.fontFamily??(n==null?void 0:n.fontFamily);typeof A=="string"&&(l.fontFamily=A);const x=r.fontSize??(n==null?void 0:n.fontSize);(typeof x=="string"||typeof x=="number")&&(l.fontSize=x);const T=r.textColor??(n==null?void 0:n.textColor);typeof T=="string"&&(l.textColor=T);const R=r.textHighlight??(n==null?void 0:n.textHighlight);typeof R=="string"&&(l.textHighlight=R);const k=n==null?void 0:n.formatting;(r.bold===!0||(k==null?void 0:k.bold)===!0)&&(l.bold=!0),(r.italic===!0||(k==null?void 0:k.italic)===!0)&&(l.italic=!0),(r.underline===!0||(k==null?void 0:k.underline)===!0)&&(l.underline=!0);const _=e.get(t);return _&&(l.pmStart=_.start,l.pmEnd=_.end),n&&(l.sdt=n),l}const kse=t=>t.kind!=="tab",_bt=(t,e)=>{const n=t.dataAttrs,r=e.dataAttrs;if(!n&&!r)return!0;if(!n||!r)return!1;const i=Object.keys(n).sort(),s=Object.keys(r).sort();if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++){const a=i[o];if(a!==s[o]||n[a]!==r[a])return!1}return!0},Nbt=(t,e)=>{const n=t.comments??[],r=e.comments??[];if(n.length===0&&r.length===0)return!0;if(n.length!==r.length)return!1;const i=a=>`${a.commentId??""}::${a.importedId??""}::${a.internal?"1":"0"}`,s=n.map(i).sort(),o=r.map(i).sort();for(let a=0;a<s.length;a++)if(s[a]!==o[a])return!1;return!0};function Ibt(t){if(t.length<=1)return t;const e=[];let n=t[0];for(let r=1;r<t.length;r++){const i=t[r];if(kse(n)&&kse(i)&&!n.token&&!i.token&&n.pmStart!=null&&n.pmEnd!=null&&i.pmStart!=null&&i.pmEnd!=null&&n.pmEnd===i.pmStart&&n.fontFamily===i.fontFamily&&n.fontSize===i.fontSize&&n.bold===i.bold&&n.italic===i.italic&&n.underline===i.underline&&n.strike===i.strike&&n.color===i.color&&n.highlight===i.highlight&&(n.letterSpacing??0)===(i.letterSpacing??0)&&a0t(n,i)&&_bt(n,i)&&Nbt(n,i)){const o=n.text??"",a=i.text??"";n={...n,text:o+a,pmEnd:i.pmEnd}}else e.push(n),n=i}return e.push(n),e}const Rbt=t=>{if(!t.content||!Array.isArray(t.content)||t.content.length===0)return;const e=i=>{if(!i||!Array.isArray(i))return;const s={};for(const o of i)if(!(!o||typeof o!="object")&&o.type==="textStyle"&&o.attrs){const a=o.attrs;if(a.fontSize!=null){const l=String(a.fontSize),c=parseFloat(l);Number.isFinite(c)&&(l.endsWith("pt")?s.fontSizePx=Ea(c):s.fontSizePx=c)}typeof a.fontFamily=="string"&&(s.fontFamily=a.fontFamily)}return Object.keys(s).length>0?s:void 0},n=i=>{for(const s of i)if(s){if(s.type==="text"){const o=e(s.marks);if(o)return o}if(s.type==="run"&&Array.isArray(s.content)){const o=e(s.marks),a=n(s.content);if(o||a)return{fontSizePx:(a==null?void 0:a.fontSizePx)??(o==null?void 0:o.fontSizePx),fontFamily:(a==null?void 0:a.fontFamily)??(o==null?void 0:o.fontFamily)}}if(Array.isArray(s.content)){const o=n(s.content);if(o)return o}}};return n(t.content)},Z9=(t,e,n,r)=>{t&&(e.fontFamily&&t.fontFamily===n&&(t.fontFamily=e.fontFamily),e.fontSizePx!=null&&t.fontSize===r&&(t.fontSize=e.fontSizePx),e.color&&!t.color&&(t.color=e.color),e.letterSpacing!=null&&t.letterSpacing==null&&(t.letterSpacing=e.letterSpacing))},J9=(t,e)=>{e&&(e==null?void 0:e.letterSpacing)!=null&&(t.letterSpacing=Jr(e.letterSpacing))},Cse=t=>{if(!(!t||typeof t!="object"||Array.isArray(t))&&Object.prototype.hasOwnProperty.call(t,"vanish"))return t.vanish===!0};function FB(t,e,n,r,i,s,o,a,l,c=xC,u,d,f,h=!0){var se,Q,J,K,re,X,me,G,B,z,de;const m=e("paragraph"),y=typeof((se=t.attrs)==null?void 0:se.paragraphProperties)=="object"&&t.attrs.paragraphProperties!==null?t.attrs.paragraphProperties:{},w=Cse(y.runProperties)===!0,b=typeof((Q=t.attrs)==null?void 0:Q.styleId)=="string"&&t.attrs.styleId.trim()?t.attrs.styleId:typeof y.styleId=="string"&&y.styleId.trim()?y.styleId:null,E=f?r2e(t,f):null;let A={};try{const Y=f?pyt(t,f,E==null?void 0:E.resolved):null;if(Y){const ee=Y.fontSize/Ebt*(Sbt/Abt);A={fontFamily:Y.fontFamily,fontSizePx:ee,color:Y.color?`#${Y.color.replace("#","")}`:void 0,bold:Y.bold,italic:Y.italic,underline:Y.underline?{style:Y.underline.type,color:Y.underline.color}:void 0,letterSpacing:Y.letterSpacing!=null?Jr(Y.letterSpacing):void 0}}else{const ee=((J=t.attrs)==null?void 0:J.spacing)!==void 0?t.attrs.spacing:y.spacing!==void 0?y.spacing:E==null?void 0:E.spacing,ae=oe=>{if(!(!oe||typeof oe!="object"))return Qxe(oe)??H9(oe)},ie=Jxe(ee),H=ae((K=t.attrs)==null?void 0:K.indent)??H9(y.indent)??H9(E==null?void 0:E.indent)??e2e((re=t.attrs)==null?void 0:re.textIndent),be=E!=null&&E.tabStops&&!((X=t.attrs)!=null&&X.tabStops)&&!((me=t.attrs)!=null&&me.tabs)?{...t.attrs??{},tabStops:E.tabStops}:t.attrs??{},Te=o2e(be,ie,H);be.styleId==null&&y.styleId&&(Te.styleId=y.styleId);const Z=fU(Te,s);A={fontFamily:(G=Z.character.font)==null?void 0:G.family,fontSizePx:Ea((B=Z.character.font)==null?void 0:B.size),color:Z.character.color,bold:((z=Z.character.font)==null?void 0:z.weight)!=null?Z.character.font.weight>=600:void 0,italic:(de=Z.character.font)==null?void 0:de.italic,underline:Z.character.underline?{style:Z.character.underline.style,color:Z.character.underline.color}:void 0,letterSpacing:Ea(Z.character.letterSpacing)}}}catch{A={}}const x=$yt(t,s,o,f,E);if(x!=null&&x.spacing){const Y={...x.spacing},ee=A.fontSizePx??i,ae=!!x.numberingProperties;Y.beforeAutospacing&&(Y.before=ae?0:Math.max(0,Number(Y.before??0)+ee*.5)),Y.afterAutospacing&&(Y.after=ae?0:Math.max(0,Number(Y.after??0)+ee*.5)),x.spacing=Y}if(x!=null&&x.numberingProperties&&(x!=null&&x.wordLayout)){const ee=x.numberingProperties.resolvedMarkerRpr,ae=(ee==null?void 0:ee.fontFamily)!=null,ie=(ee==null?void 0:ee.fontSize)!=null,H=Rbt(t);if(H){const Te=x.wordLayout.marker;if(Te!=null&&Te.run){const Z=Te.run;!ie&&H.fontSizePx!=null&&Number.isFinite(H.fontSizePx)&&(Z.fontSize=H.fontSizePx),!ae&&H.fontFamily&&(Z.fontFamily=H.fontFamily)}}}const T=wbt(f==null?void 0:f.linkedStyles),R=[];if(Iyt(t)&&R.push({kind:"pageBreak",id:e("pageBreak"),attrs:{source:"pageBreakBefore"}}),!t.content||t.content.length===0){if(w)return R;const Y=n.get(t),ee={text:"",fontFamily:r,fontSize:i};return Y&&(ee.pmStart=Y.start+1,ee.pmEnd=Y.start+1),R.push({kind:"paragraph",id:m,runs:[ee],attrs:X9(x)}),R}let k=[],_=0,N=0,L=!1;const M=()=>_===0?m:`${m}-${_}`,C=(Y,ee)=>{if(!new Set(["drawing","image","table"]).has(Y.kind))return Y;const ie=Y;return{...ie,attrs:{...ie.attrs??{},anchorParagraphId:ee}}},D=()=>{if(k.length===0)return;const Y=k;k=[],R.push({kind:"paragraph",id:M(),runs:Y,attrs:X9(x)}),_+=1},O=(Y=[])=>{const ee=Y.find(ae=>{var ie;return(ae==null?void 0:ae.type)==="textStyle"&&typeof((ie=ae.attrs)==null?void 0:ie.styleId)=="string"&&ae.attrs.styleId.trim()});return ee?ee.attrs.styleId:null},$=(Y,ee,ae)=>{T&&vbt(Y,{resolver:T,paragraphStyleId:b,inlineStyleId:ee,runStyleId:ae})},U=(Y,ee=[],ae,ie=null,H,be=!1)=>{var Te,Z;if(be&&Y.type!=="run"){L=!0;return}if(Y.type==="text"&&Y.text){const oe=use(Y,n,r,i,[],ae,c,u),te=O(ee);$(oe,te,ie),Z9(oe,A,r,i),J9(oe,H),Ay(oe,[...Y.marks??[],...ee??[]],c,u,f==null?void 0:f.backgroundColor,h),k.push(oe);return}if(Y.type==="run"&&Array.isArray(Y.content)){const oe=[...Y.marks??[],...ee??[]],te=typeof((Te=Y.attrs)==null?void 0:Te.runProperties)=="object"&&Y.attrs.runProperties!==null?Y.attrs.runProperties:null,ye=Cse(te),ke=ye===void 0?be:ye;if(ke){L=!0;return}const we=xbt(te)??ie,Ae=te??H;Y.content.forEach(Re=>U(Re,oe,ae,we,Ae,ke));return}if(Y.type==="structuredContent"&&Array.isArray(Y.content)){const te=Gb(Y,"structuredContent")??ae;Y.content.forEach(ye=>U(ye,ee,te,ie,H,be));return}if(Y.type==="fieldAnnotation"){if(be){L=!0;return}const oe=Gb(Y,"fieldAnnotation");let te;if(Array.isArray(Y.content)&&Y.content.length>0){const we=Ae=>Ae.type==="text"&&typeof Ae.text=="string"?Ae.text:Array.isArray(Ae.content)?Ae.content.map(we).join(""):"";te=Y.content.map(we).join("")}const ye=te&&te.length>0?{...Y,attrs:{...Y.attrs??{},displayLabel:te}}:Y,ke=Cbt(ye,n,oe);k.push(ke);return}if(Y.type==="pageReference"){if(be){L=!0;return}const oe=EC(Y)||"",te=typeof Y.attrs=="object"&&Y.attrs!==null?Y.attrs:{},ke=[...Array.isArray(te.marksAsAttrs)?te.marksAsAttrs:[],...ee??[]],we=oe.match(/PAGEREF\s+"?([^"\s\\]+)"?/i),Ae=we?we[1]:"";if(Ae){let Re="??";if(Array.isArray(Y.content)&&Y.content.length>0){const Fe=$e=>$e.type==="text"&&$e.text?$e.text:Array.isArray($e.content)?$e.content.map(Fe).join(""):"";Re=Y.content.map(Fe).join("").trim()||"??"}const Pe=n.get(Y),Ce=use({type:"text",text:Re},n,r,i,[],ae,c,u),Oe=O(ke);$(Ce,Oe,ie),Z9(Ce,A,r,i),J9(Ce,H),Ay(Ce,ke,c,u,f==null?void 0:f.backgroundColor,h),Pe&&(Ce.pmStart=Pe.start,Ce.pmEnd=Pe.end),Ce.token="pageReference",Ce.pageRefMetadata={bookmarkId:Ae,instruction:oe},ae&&(Ce.sdt=ae),k.push(Ce)}else Array.isArray(Y.content)&&Y.content.forEach(Re=>U(Re,ke,ae,ie,H));return}if(Y.type==="bookmarkStart"){const oe=typeof Y.attrs=="object"&&Y.attrs!==null?Y.attrs:{},te=typeof oe.name=="string"?oe.name:void 0;if(te&&l){const ye=n.get(Y);ye&&l.set(te,ye.start)}Array.isArray(Y.content)&&Y.content.forEach(ye=>U(ye,ee,ae,ie,H));return}if(Y.type==="tab"){const oe=h0t(Y,n,N,t,ee);N+=1,oe&&k.push(oe);return}if(Kie.has(Y.type)){const oe=Kie.get(Y.type);if(oe){const te=Array.isArray((Z=Y.attrs)==null?void 0:Z.marksAsAttrs)?Y.attrs.marksAsAttrs:[],ye=Y.marks??[],we=[...ye.length>0?ye:te,...ee??[]],Ae=p0t(Y,n,r,i,ee,oe,c,u);ae&&(Ae.sdt=ae);const Re=O(ee);$(Ae,Re,ie),Z9(Ae,A,r,i),we.length>0&&Ay(Ae,we,c,u,f==null?void 0:f.backgroundColor,h),console.debug("[token-debug] paragraph-token-run",{token:Ae.token,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,inlineStyleId:Re,runStyleId:ie,mergedMarksCount:we.length}),J9(Ae,H),k.push(Ae)}return}if(Y.type==="image"){if(be){L=!0;return}if(Tbt(Y)){const we=kbt(Y,n,ae);we&&k.push(we);return}const te=M();D();const ye=[...Y.marks??[],...ee??[]],ke=a!=null&&a.enabled?nW(ye):void 0;if(QU(ke,a))return;if(d!=null&&d.imageNodeToBlock){const we=d.imageNodeToBlock(Y,e,n,ke,a);we&&we.kind==="image"&&(eW(we,ke,a),R.push(C(we,te)))}return}if(Y.type==="contentBlock"){if(be){L=!0;return}const oe=Y.attrs??{};if(oe.horizontalRule===!0){const te=M();D();const ye=x==null?void 0:x.indent,ke=typeof(ye==null?void 0:ye.left)=="number"?ye.left:void 0,we=typeof(ye==null?void 0:ye.right)=="number"?ye.right:void 0,Re=typeof ke=="number"&&ke!==0||typeof we=="number"&&we!==0?{...Y,attrs:{...oe,hrIndentLeft:ke,hrIndentRight:we}}:Y,Ce=((d==null?void 0:d.contentBlockNodeToDrawingBlock)??c2e)(Re,e,n);Ce&&R.push(C(Ce,te))}return}if(Y.type==="vectorShape"){if(be){L=!0;return}const oe=M();if(D(),d!=null&&d.vectorShapeNodeToDrawingBlock){const te=d.vectorShapeNodeToDrawingBlock(Y,e,n);te&&R.push(C(te,oe))}return}if(Y.type==="shapeGroup"){if(be){L=!0;return}const oe=M();if(D(),d!=null&&d.shapeGroupNodeToDrawingBlock){const te=d.shapeGroupNodeToDrawingBlock(Y,e,n);te&&R.push(C(te,oe))}return}if(Y.type==="shapeContainer"){if(be){L=!0;return}const oe=M();if(D(),d!=null&&d.shapeContainerNodeToDrawingBlock){const te=d.shapeContainerNodeToDrawingBlock(Y,e,n);te&&R.push(C(te,oe))}return}if(Y.type==="shapeTextbox"){if(be){L=!0;return}const oe=M();if(D(),d!=null&&d.shapeTextboxNodeToDrawingBlock){const te=d.shapeTextboxNodeToDrawingBlock(Y,e,n);te&&R.push(C(te,oe))}return}if(Y.type==="table"){if(be){L=!0;return}const oe=M();if(D(),d!=null&&d.tableNodeToBlock){const te=d.tableNodeToBlock(Y,e,n,r,i,s,a,l,c,u,...f!==void 0?[f]:[]);te&&R.push(C(te,oe))}return}if(Y.type==="hardBreak"||Y.type==="lineBreak"){if(be){L=!0;return}const oe=Y.attrs??{},te=oe.pageBreakType??oe.lineBreakType??"line";if(te==="page"){D(),R.push({kind:"pageBreak",id:M(),attrs:Y.attrs||{}});return}if(te==="column"){D(),R.push({kind:"columnBreak",id:M(),attrs:Y.attrs||{}});return}const ye={kind:"lineBreak",attrs:{}},ke={};oe.lineBreakType&&(ke.lineBreakType=String(oe.lineBreakType)),oe.clear&&(ke.clear=String(oe.clear)),Object.keys(ke).length>0?ye.attrs=ke:delete ye.attrs;const we=n.get(Y);we&&(ye.pmStart=we.start,ye.pmEnd=we.end),ae&&(ye.sdt=ae),k.push(ye);return}};if(t.content.forEach(Y=>{U(Y,[],void 0,null,void 0)}),D(),!R.some(Y=>Y.kind==="paragraph")&&!L&&!w&&R.push({kind:"paragraph",id:m,runs:[{text:"",fontFamily:r,fontSize:i}],attrs:X9(x)}),R.forEach(Y=>{Y.kind==="paragraph"&&Y.runs.length>1&&(Y.runs=Ibt(Y.runs))}),!a)return R;const ce=[];return R.forEach(Y=>{if(Y.kind!=="paragraph"){ce.push(Y);return}const ee=Cgt(Y.runs,a,c,Ay,u,h);a.enabled&&ee.length===0||(Y.runs=ee,Y.attrs={...Y.attrs??{},trackedChangesMode:a.mode,trackedChangesEnabled:a.enabled},ce.push(Y))}),ce}function Mbt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,trackedChangesConfig:u,bookmarks:d,hyperlinkConfig:f,sectionState:h,converters:m}=e,{ranges:y,currentSectionIndex:w,currentParagraphIndex:b}=h;if(y.length>0){const k=y[w+1];if(k&&b===k.startParagraphIndex){const _=y[w],L=hgt(_,k)||pgt()?{requirePageBoundary:!0}:void 0,M=LB(k,i,L);n.push(M),r(M.kind),h.currentSectionIndex++}}const{getListCounter:E,incrementListCounter:A,resetListCounter:x}=c,T=m==null?void 0:m.paragraphToFlowBlocks;if(!T)return;T(t,i,s,o,a,l,{getListCounter:E,incrementListCounter:A,resetListCounter:x},u,d,f,void 0,e.converterContext).forEach(k=>{n.push(k),r(k.kind)}),h.currentParagraphIndex++}const Lbt=new Set(["None","Square","Tight","Through","TopAndBottom","Inline"]),Dbt=new Set(["bothSides","left","right","largest"]),Obt=new Set(["column","page","margin"]),Pbt=new Set(["paragraph","page","margin"]),Fbt=new Set(["left","center","right"]),Bbt=new Set(["top","center","bottom"]),Zv=t=>typeof t=="object"&&t!==null&&!Array.isArray(t),jbt=t=>t==="contain"||t==="cover"||t==="fill"||t==="scale-down";function _se(t){if(!t)return;const e={};return["top","right","bottom","left"].forEach(n=>{const r=t[n];Yr(r)&&(e[n]=Number(r))}),Object.keys(e).length>0?e:void 0}const $bt=t=>{if(typeof t=="string")return Lbt.has(t)?t:void 0},zbt=t=>{if(typeof t=="string")return Dbt.has(t)?t:void 0},Hbt=t=>{if(!Array.isArray(t))return;const e=[];return t.forEach(n=>{if(!Array.isArray(n)||n.length<2)return;const r=hn(n[0]),i=hn(n[1]);r==null||i==null||e.push([r,i])}),e.length>0?e:void 0},u2e=t=>{if(t!=null){if(typeof t=="boolean")return t;if(typeof t=="number"){if(t===1)return!0;if(t===0)return!1}if(typeof t=="string"){const e=t.trim().toLowerCase();if(e==="1"||e==="true")return!0;if(e==="0"||e==="false")return!1}}},Vbt=t=>{if(!Zv(t))return;const e=$bt(t.type);if(!e)return;const n={type:e},r=Zv(t.attrs)?t.attrs:{},i=zbt(r.wrapText);i&&(n.wrapText=i);const s=hn(r.distTop??r.distT);s!=null&&(n.distTop=s);const o=hn(r.distBottom??r.distB);o!=null&&(n.distBottom=o);const a=hn(r.distLeft??r.distL);a!=null&&(n.distLeft=a);const l=hn(r.distRight??r.distR);l!=null&&(n.distRight=l);const c=Hbt(r.polygon);c&&(n.polygon=c);const u=u2e(r.behindDoc);return u!=null&&(n.behindDoc=u),n},Nse=(t,e)=>{if(typeof t=="string")return e.has(t)?t:void 0},Ise=(t,e)=>{if(typeof t=="string")return e.has(t)?t:void 0},Ubt=(t,e,n)=>{const r=Zv(t)?t:void 0,i=Zv(e.marginOffset)?e.marginOffset:void 0,s=Zv(e.simplePos)?e.simplePos:void 0,o=Zv(e.originalAttributes)?e.originalAttributes:void 0,a=e.isAnchor===!0||!!r,l={};a&&(l.isAnchored=!0);const c=Nse(r==null?void 0:r.hRelativeFrom,Obt);c&&(l.hRelativeFrom=c);const u=Nse(r==null?void 0:r.vRelativeFrom,Pbt);u&&(l.vRelativeFrom=u);const d=Ise(r==null?void 0:r.alignH,Fbt);d&&(l.alignH=d);const f=Ise(r==null?void 0:r.alignV,Bbt);f&&(l.alignV=f);const h=hn((i==null?void 0:i.horizontal)??(i==null?void 0:i.left)??(r==null?void 0:r.offsetH)??(s==null?void 0:s.x));h!=null&&(l.offsetH=h);const m=hn((i==null?void 0:i.top)??(i==null?void 0:i.vertical)??(r==null?void 0:r.offsetV)??(s==null?void 0:s.y));m!=null&&(l.offsetV=m);const y=u2e((r==null?void 0:r.behindDoc)??n??(o==null?void 0:o.behindDoc));return y!=null&&(l.behindDoc=y),l.isAnchored||l.hRelativeFrom!=null||l.vRelativeFrom!=null||l.alignH!=null||l.alignV!=null||l.offsetH!=null||l.offsetV!=null||l.behindDoc!=null?l:void 0};function Gx(t,e,n,r,i){const s=t.attrs??{};if(!s.src||typeof s.src!="string")return null;const o=n.get(t),a={...s};o&&(a.pmStart=o.start,a.pmEnd=o.end);const l=s.size??{},c=typeof l.width=="number"&&Number.isFinite(l.width)?l.width:void 0,u=typeof l.height=="number"&&Number.isFinite(l.height)?l.height:void 0,d=typeof s.display=="string"?s.display:void 0,f=Vbt(s.wrap);let h=Ubt(s.anchorData,s,f==null?void 0:f.behindDoc);!h&&f&&(h={isAnchored:!0},f.behindDoc!=null&&(h.behindDoc=f.behindDoc));const m=(f==null?void 0:f.type)==="Inline"||typeof s.inline=="boolean"&&s.inline,y=d==="inline"||d==="block"?d:m?"inline":"block",w=typeof s.objectFit=="string"?s.objectFit:void 0,b=s.shouldCover===!0,E=(h==null?void 0:h.isAnchored)??(typeof s.isAnchor=="boolean"?s.isAnchor:!1),A=jbt(w)?w:b?"cover":y==="inline"?"scale-down":"contain";return{kind:"image",id:e("image"),src:s.src,width:c,height:u,alt:typeof s.alt=="string"?s.alt:void 0,title:typeof s.title=="string"?s.title:void 0,objectFit:A,display:y,padding:_se(s.padding),margin:_se(s.marginOffset),anchor:h,wrap:f,attrs:a,gain:typeof s.gain=="string"||typeof s.gain=="number"?s.gain:void 0,blacklevel:typeof s.blacklevel=="string"||typeof s.blacklevel=="number"?s.blacklevel:void 0}}function Wbt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,trackedChangesConfig:o}=e,a=o.enabled?nW(t.marks??[]):void 0;if(QU(a,o))return;const l=Gx(t,i,s);l&&l.kind==="image"&&(eW(l,a,o),n.push(l),r(l.kind))}const qbt=(t,e)=>{var s,o;const n={},r=((s=t.attrs)==null?void 0:s.tableProperties)??null;if(r){const a=Mse(r.cellMargins);a&&(n.cellPadding=a),r.borders&&typeof r.borders=="object"&&(n.borders=Rse(r.borders)),!n.justification&&typeof r.justification=="string"&&(n.justification=r.justification);const l=Kbt(r.tableWidth);l&&(n.tableWidth=l)}const i=typeof((o=t.attrs)==null?void 0:o.tableStyleId)=="string"?t.attrs.tableStyleId:void 0;if(i&&hyt(e)){const a=Pye(i,{docx:e.docx});if(a){if(!n.borders&&a.borders&&(n.borders=Rse(a.borders)),!n.cellPadding&&a.cellMargins){const c=Mse(a.cellMargins);c&&(n.cellPadding=c)}!n.justification&&a.justification&&(n.justification=a.justification)}const l=Xbt(i,e.docx);l&&(n.paragraphProps=l)}return Object.keys(n).length>0?n:null},Rse=t=>({...t}),Mse=t=>{if(!t||typeof t!="object")return;const e={},n={top:"top",bottom:"bottom",left:"left",right:"right",marginTop:"top",marginBottom:"bottom",marginLeft:"left",marginRight:"right"};return Object.entries(t).forEach(([r,i])=>{const s=n[r];if(!s)return;const o=Gbt(i);o!=null&&(e[s]=o)}),Object.keys(e).length?e:void 0},Gbt=t=>{if(typeof t=="number")return t;if(!t||typeof t!="object")return;const e=t;if(typeof e.value=="number"){if(!e.type||e.type==="px"||e.type==="pixel")return e.value;if(e.type==="dxa")return Jr(e.value)}},Kbt=t=>{if(!t||typeof t!="object")return;const e=t,n=typeof e.width=="number"?e.width:e.value;if(typeof n=="number")return!e.type||e.type==="px"||e.type==="pixel"?{width:n,type:e.type??"px"}:e.type==="dxa"?{width:Jr(n),type:"px"}:{width:n,type:e.type}},Xbt=(t,e)=>{var n,r;try{const i=e["word/styles.xml"];if(!((r=(n=i==null?void 0:i.elements)==null?void 0:n[0])!=null&&r.elements))return;const o=i.elements[0].elements.filter(b=>b.name==="w:style").find(b=>{var E;return((E=b.attributes)==null?void 0:E["w:styleId"])===t});if(!(o!=null&&o.elements))return;const a=o.elements.find(b=>b.name==="w:pPr");if(!(a!=null&&a.elements))return;const l=a.elements.find(b=>b.name==="w:spacing");if(!(l!=null&&l.attributes))return;const c=l.attributes,u={},d=Q9(c["w:before"]),f=Q9(c["w:after"]),h=Q9(c["w:line"]),m=c["w:lineRule"],y=m==="auto"||m==="exact"||m==="atLeast"?m:void 0;return d!=null&&(u.before=Jr(d)),f!=null&&(u.after=Jr(f)),h!=null&&(y==="auto"?u.line=h/240:u.line=Jr(h)),y&&(u.lineRule=y),Object.keys(u).length>0?{spacing:u}:void 0}catch{return}},Q9=t=>{if(t==null)return;const e=typeof t=="number"?t:parseInt(String(t),10);return Number.isFinite(e)?e:void 0},d2e=t=>t.type==="tableRow"||t.type==="table_row",f2e=t=>t.type==="tableCell"||t.type==="table_cell"||t.type==="tableHeader"||t.type==="table_header",Ybt=t=>{if(!t||typeof t!="object")return;const e=t.rowHeight;if(!e||typeof e!="object")return;const n=e,r=hn(n.value??n.val);if(r==null)return;const i=n.rule??n.hRule,s=i==="exact"||i==="atLeast"||i==="auto"?i:"atLeast";return{value:Jr(r),rule:s}},Zbt=t=>{var R,k,_,N,L,M,C,D,O,$,U,W,ce;const{cellNode:e,rowIndex:n,cellIndex:r,context:i,defaultCellPadding:s,tableStyleParagraphProps:o}=t;if(!f2e(e)||!Array.isArray(e.content))return null;const a=[],l=(R=e.attrs)==null?void 0:R.background;let c;if(l&&typeof l.color=="string"){const se=l.color.trim();if(se){const Q=se.startsWith("#")?se:`#${se}`;/^#[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$/.test(Q)&&(c=Q)}}const u=o||c?{...i.converterContext,...o&&{tableStyleParagraphProps:o},...c&&{backgroundColor:c}}:i.converterContext,d=((k=i.converters)==null?void 0:k.paragraphToFlowBlocks)??i.paragraphToFlowBlocks,f=i.listCounterContext;for(const se of e.content){if(se.type==="paragraph"){if(!d)continue;d(se,i.nextBlockId,i.positions,i.defaultFont,i.defaultSize,i.styleContext,f,i.trackedChanges,i.bookmarks,i.hyperlinkConfig,i.themeColors,u).forEach(J=>{(J.kind==="paragraph"||J.kind==="image"||J.kind==="drawing")&&a.push(J)});continue}if(se.type==="image"&&((_=i.converters)!=null&&_.imageNodeToBlock)){const Q=[...se.marks??[]],J=i.trackedChanges?nW(Q):void 0;if(QU(J,i.trackedChanges))continue;const K=i.converters.imageNodeToBlock(se,i.nextBlockId,i.positions,J,i.trackedChanges);K&&K.kind==="image"&&(eW(K,J,i.trackedChanges),a.push(K));continue}if(se.type==="vectorShape"&&((N=i.converters)!=null&&N.vectorShapeNodeToDrawingBlock)){const Q=i.converters.vectorShapeNodeToDrawingBlock(se,i.nextBlockId,i.positions);Q&&Q.kind==="drawing"&&a.push(Q);continue}if(se.type==="shapeGroup"&&((L=i.converters)!=null&&L.shapeGroupNodeToDrawingBlock)){const Q=i.converters.shapeGroupNodeToDrawingBlock(se,i.nextBlockId,i.positions);Q&&Q.kind==="drawing"&&a.push(Q);continue}if(se.type==="shapeContainer"&&((M=i.converters)!=null&&M.shapeContainerNodeToDrawingBlock)){const Q=i.converters.shapeContainerNodeToDrawingBlock(se,i.nextBlockId,i.positions);Q&&Q.kind==="drawing"&&a.push(Q);continue}if(se.type==="shapeTextbox"&&((C=i.converters)!=null&&C.shapeTextboxNodeToDrawingBlock)){const Q=i.converters.shapeTextboxNodeToDrawingBlock(se,i.nextBlockId,i.positions);Q&&Q.kind==="drawing"&&a.push(Q)}}if(a.length===0)return null;const h={},m=A0t(e.attrs??{});m&&(h.borders=m);const y=T0t(e.attrs??{})??(s?{...s}:void 0);y&&(h.padding=y);const w=(D=e.attrs)==null?void 0:D.verticalAlign,b=w==="middle"||w==="center"?"center":w;(b==="top"||b==="center"||b==="bottom")&&(h.verticalAlign=b);const E=(O=e.attrs)==null?void 0:O.background;if(E&&typeof E.color=="string"){const se=E.color;h.background=se.startsWith("#")?se:`#${se}`}const A=($=e.attrs)==null?void 0:$.tableCellProperties;A&&typeof A=="object"&&(h.tableCellProperties=A);const x=hn((U=e.attrs)==null?void 0:U.rowspan),T=hn((W=e.attrs)==null?void 0:W.colspan);return{id:i.nextBlockId(`cell-${n}-${r}`),blocks:a,paragraph:((ce=a[0])==null?void 0:ce.kind)==="paragraph"?a[0]:void 0,rowSpan:x??void 0,colSpan:T??void 0,attrs:Object.keys(h).length>0?h:void 0}},Jbt=t=>{var u;const{rowNode:e,rowIndex:n,context:r,defaultCellPadding:i,tableStyleParagraphProps:s}=t;if(!d2e(e)||!Array.isArray(e.content))return null;const o=[];if(e.content.forEach((d,f)=>{const h=Zbt({cellNode:d,rowIndex:n,cellIndex:f,context:r,defaultCellPadding:i,tableStyleParagraphProps:s});h&&o.push(h)}),o.length===0)return null;const a=(u=e.attrs)==null?void 0:u.tableRowProperties,l=Ybt(a),c=a&&typeof a=="object"?{tableRowProperties:a,...l?{rowHeight:l}:{}}:l?{rowHeight:l}:void 0;return{id:r.nextBlockId(`row-${n}`),cells:o,attrs:c}};function Qbt(t){var c;const e=(c=t.attrs)==null?void 0:c.tableProperties,n=e==null?void 0:e.floatingTableProperties;if(!n)return{};if(!(n.tblpX!==void 0||n.tblpY!==void 0||n.tblpXSpec!==void 0||n.tblpYSpec!==void 0||n.horzAnchor!==void 0||n.vertAnchor!==void 0))return{};const i=u=>{switch(u){case"page":return"page";case"margin":return"margin";case"text":default:return"column"}},s=u=>{switch(u){case"page":return"page";case"margin":return"margin";case"text":default:return"paragraph"}},o={isAnchored:!0,hRelativeFrom:i(n.horzAnchor),vRelativeFrom:s(n.vertAnchor)};n.tblpXSpec&&(o.alignH=n.tblpXSpec),n.tblpYSpec&&(o.alignV=n.tblpYSpec),n.tblpX!==void 0&&(o.offsetH=Jr(n.tblpX)),n.tblpY!==void 0&&(o.offsetV=Jr(n.tblpY));const a=n.leftFromText!==void 0||n.rightFromText!==void 0||n.topFromText!==void 0||n.bottomFromText!==void 0,l={type:"Square",wrapText:"bothSides"};return a&&(n.topFromText!==void 0&&(l.distTop=Jr(n.topFromText)),n.bottomFromText!==void 0&&(l.distBottom=Jr(n.bottomFromText)),n.leftFromText!==void 0&&(l.distLeft=Jr(n.leftFromText)),n.rightFromText!==void 0&&(l.distRight=Jr(n.rightFromText))),{anchor:o,wrap:l}}function cW(t,e,n,r,i,s,o,a,l,c,u,d,f){var $,U,W,ce,se,Q,J,K,re,X,me;if(!Array.isArray(t.content)||t.content.length===0)return null;const h=u??(($=f==null?void 0:f.converters)==null?void 0:$.paragraphToFlowBlocks);if(!h)return null;const m={nextBlockId:e,positions:n,defaultFont:r,defaultSize:i,styleContext:s,trackedChanges:o,bookmarks:a,hyperlinkConfig:l,themeColors:c,listCounterContext:f==null?void 0:f.listCounterContext,paragraphToFlowBlocks:h,converterContext:d,converters:f==null?void 0:f.converters},y=qbt(t,d),w=y==null?void 0:y.cellPadding,b=y==null?void 0:y.paragraphProps,E=[];if(t.content.forEach((G,B)=>{const z=Jbt({rowNode:G,rowIndex:B,context:m,defaultCellPadding:w,tableStyleParagraphProps:b});z&&E.push(z)}),E.length===0)return null;const A={},T=(()=>{var G;if((G=t.attrs)!=null&&G.borders&&typeof t.attrs.borders=="object"&&t.attrs.borders!==null)return t.attrs.borders;if(y!=null&&y.borders&&typeof y.borders=="object"&&y.borders!==null)return y.borders})(),R=S0t(T);R&&(A.borders=R),(U=t.attrs)!=null&&U.borderCollapse&&(A.borderCollapse=t.attrs.borderCollapse),(W=t.attrs)!=null&&W.tableCellSpacing&&(A.cellSpacing=t.attrs.tableCellSpacing),(ce=t.attrs)!=null&&ce.justification?A.justification=t.attrs.justification:y!=null&&y.justification&&(A.justification=y.justification),(se=t.attrs)!=null&&se.tableWidth?A.tableWidth=t.attrs.tableWidth:y!=null&&y.tableWidth&&(A.tableWidth=y.tableWidth);const k=(Q=t.attrs)==null?void 0:Q.tableLayout;k&&(A.tableLayout=k);const _=(J=t.attrs)==null?void 0:J.tableProperties;_&&typeof _=="object"&&(A.tableProperties=_);let N;const L=G=>G/1440*96;if(((K=t.attrs)==null?void 0:K.userEdited)===!0&&Array.isArray((re=t.attrs)==null?void 0:re.grid)&&t.attrs.grid.length>0&&(N=t.attrs.grid.filter(G=>G!=null&&typeof G=="object").map(G=>{const B=typeof G.col=="number"?G.col:0;return B>0?L(B):0}).filter(G=>G>0),N.length===0&&(N=void 0)),!N&&Array.isArray(t.content)&&t.content.length>0){const G=t.content[0];if(G&&d2e(G)&&Array.isArray(G.content)&&G.content.length>0){const B=[];for(const z of G.content)if(z&&f2e(z)&&((X=z.attrs)==null?void 0:X.colwidth)!==void 0){const de=z.attrs.colwidth;Array.isArray(de)?B.push(...de.filter(Y=>typeof Y=="number"&&Y>0)):typeof de=="number"&&de>0&&B.push(de)}B.length>0&&(N=B)}}!N&&Array.isArray((me=t.attrs)==null?void 0:me.grid)&&t.attrs.grid.length>0&&(N=t.attrs.grid.filter(G=>G!=null&&typeof G=="object").map(G=>{const B=typeof G.col=="number"?G.col:0;return B>0?L(B):0}).filter(G=>G>0),N.length===0&&(N=void 0));const{anchor:C,wrap:D}=Qbt(t);return{kind:"table",id:e("table"),rows:E,attrs:Object.keys(A).length>0?A:void 0,columnWidths:N,...C?{anchor:C}:{},...D?{wrap:D}:{}}}function ewt(t,e){const{blocks:n,recordBlockKind:r,nextBlockId:i,positions:s,defaultFont:o,defaultSize:a,styleContext:l,listCounterContext:c,trackedChangesConfig:u,bookmarks:d,hyperlinkConfig:f,converters:h,converterContext:m}=e,y=cW(t,i,s,o,a,l,u,d,f,void 0,h==null?void 0:h.paragraphToFlowBlocks,m,{listCounterContext:c,converters:h});y&&(n.push(y),r(y.kind))}const Lse=Object.freeze(["de","fr","it","es","nl","ru","pl","tr","sv","fi","da","nb","cs","sk","hu","ro","uk","el","pt-pt","sr","hr","bg","lt","lv","et"]);function twt(t){if(typeof t!="string"||!t)return".";const e=t.toLowerCase(),n=e.split("-")[0];return Lse.includes(n)||Lse.includes(e)?",":(e.startsWith("pt")&&e!=="pt-pt",".")}const nwt="Arial",rwt=16,iwt=".",swt={paragraph:Mbt,tableOfContents:Hyt,structuredContentBlock:Vyt,documentSection:Yyt,table:ewt,documentPartObject:Zyt,image:Wbt,vectorShape:cbt,shapeGroup:ubt,shapeContainer:dbt,shapeTextbox:fbt};function h2e(t,e){var re,X,me,G,B;const n=(e==null?void 0:e.defaultFont)??nwt,r=(e==null?void 0:e.defaultSize)??rwt,i=e==null?void 0:e.instrumentation,s=_gt(e==null?void 0:e.blockIdPrefix),o=t,a=typeof o.attrs=="object"&&o.attrs!==null?o.attrs:{},l=Zie((re=o.attrs)==null?void 0:re.decimalSeparator),c=Ngt(a.lang??a.language??a.locale),u=c?twt(c):void 0,d=hn(a.defaultTabIntervalTwips??a.tabIntervalTwips??void 0)??(()=>{const z=hn(a.defaultTabIntervalPx??a.tabIntervalPx);return z!=null?Math.round(z*15):void 0})(),h=Zie((X=e==null?void 0:e.locale)==null?void 0:X.decimalSeparator)??l??u??iwt,m={defaults:{paragraphFont:n,fontSize:Cg(r)??12,decimalSeparator:h,defaultTabIntervalTwips:d}},y=kgt(e==null?void 0:e.trackedChangesMode)?e.trackedChangesMode:"review",w=(e==null?void 0:e.enableTrackedChanges)??!0,b={mode:y,enabled:w},E={enableRichHyperlinks:(e==null?void 0:e.enableRichHyperlinks)??!1},A=(e==null?void 0:e.enableComments)??!0,x=e==null?void 0:e.themeColors,T=e==null?void 0:e.converterContext;if(!o.content)return{blocks:[],bookmarks:new Map};const R=[],k=new Map,_=(e==null?void 0:e.positions)??(e!=null&&e.atomNodeTypes?Jie(o,{atomNodeTypes:e.atomNodeTypes}):Jie(o)),N=Igt(s),L={},M=z=>{L[z]=(L[z]??0)+1},C=new Map,D=(z,de)=>{const Y=`${z}:${de}`;return C.get(Y)??0},O=(z,de)=>{const Y=`${z}:${de}`,ae=(C.get(Y)??0)+1;return C.set(Y,ae),ae},$=(z,de)=>{const Y=`${z}:${de}`;C.set(Y,0)},U=((me=o.attrs)==null?void 0:me.bodySectPr)??((G=o.attrs)==null?void 0:G.sectPr),W=e!=null&&e.emitSectionBreaks?xgt(o,U):[];if(bgt(W,e),W.length>0&&W[0]){const z=LB(W[0],N,{isFirstSection:!0});R.push(z),M(z.kind)}const ce=(z,de,Y,ee,ae,ie,H,be,Te,Z,oe,te)=>uW(z,de,Y,ee,ae,ie,H,be,Te,Z,oe??x,te??T,A),Q={blocks:R,recordBlockKind:M,nextBlockId:N,positions:_,defaultFont:n,defaultSize:r,styleContext:m,converterContext:T,listCounterContext:{getListCounter:D,incrementListCounter:O,resetListCounter:$},trackedChangesConfig:b,hyperlinkConfig:E,enableComments:A,bookmarks:k,sectionState:{ranges:W,currentSectionIndex:0,currentParagraphIndex:0},converters:{paragraphToFlowBlocks:ce,tableNodeToBlock:(z,de,Y,ee,ae,ie,H,be,Te,Z,oe)=>awt(z,de,Y,ee,ae,ie,H,be,Te,Z??x,ce,oe??T,{listCounterContext:{getListCounter:D,incrementListCounter:O,resetListCounter:$},converters:{paragraphToFlowBlocks:ce,imageNodeToBlock:Gx,vectorShapeNodeToDrawingBlock:Vx,shapeGroupNodeToDrawingBlock:Ux,shapeContainerNodeToDrawingBlock:Wx,shapeTextboxNodeToDrawingBlock:qx}}),imageNodeToBlock:Gx,vectorShapeNodeToDrawingBlock:Vx,shapeGroupNodeToDrawingBlock:Ux,shapeContainerNodeToDrawingBlock:Wx,shapeTextboxNodeToDrawingBlock:qx}};if(o.content.forEach(z=>{const de=swt[z.type];de&&de(z,Q)}),W.length>0){const z=W.length-1,de=W[z];if(Q.sectionState.currentSectionIndex<z){const Y=LB(de,N);R.push(Y),M(Y.kind)}}(B=i==null?void 0:i.log)==null||B.call(i,{totalBlocks:R.length,blockCounts:L,bookmarks:k.size});const J=Ogt(R,e==null?void 0:e.mediaFiles);return{blocks:owt(J),bookmarks:k}}function owt(t){var r,i;const e=[];let n=0;for(;n<t.length;){const s=t[n];if(s.kind==="paragraph"&&((r=s.attrs)!=null&&r.dropCapDescriptor)&&n+1<t.length){const o=s,a=t[n+1];if(a.kind==="paragraph"){const l=a,c={kind:"paragraph",id:l.id,runs:l.runs,attrs:{...l.attrs,dropCapDescriptor:(i=o.attrs)==null?void 0:i.dropCapDescriptor,dropCap:void 0}};e.push(c),n+=2;continue}}e.push(s),n+=1}return e}function uW(t,e,n,r,i,s,o,a,l,c=xC,u,d,f=!0){return FB(t,e,n,r,i,s,o,a,l,c,u,{contentBlockNodeToDrawingBlock:c2e,imageNodeToBlock:Gx,vectorShapeNodeToDrawingBlock:Vx,shapeGroupNodeToDrawingBlock:Ux,shapeContainerNodeToDrawingBlock:Wx,shapeTextboxNodeToDrawingBlock:qx,tableNodeToBlock:(h,m,y,w,b,E,A,x,T,R,k)=>cW(h,m,y,w,b,E,A,x,T,R,uW,k??d,{listCounterContext:o,converters:{paragraphToFlowBlocks:FB,imageNodeToBlock:Gx,vectorShapeNodeToDrawingBlock:Vx,shapeGroupNodeToDrawingBlock:Ux,shapeContainerNodeToDrawingBlock:Wx,shapeTextboxNodeToDrawingBlock:qx}})},d,f)}function awt(t,e,n,r,i,s,o,a,l,c,u,d,f){return cW(t,e,n,r,i,s,o,a,l,c,uW,d,f??{converters:{paragraphToFlowBlocks:FB,imageNodeToBlock:Gx,vectorShapeNodeToDrawingBlock:Vx,shapeGroupNodeToDrawingBlock:Ux,shapeContainerNodeToDrawingBlock:Wx,shapeTextboxNodeToDrawingBlock:qx}})}new ni("paginationPlugin");const lwt=({editor:t,data:e,editorContainer:n,editorHost:r,sectionId:i,type:s,availableWidth:o,availableHeight:a,currentPageNumber:l,totalPageCount:c})=>{if(!t)throw new TypeError("editor parameter is required");if(!e)throw new TypeError("data parameter is required");if(!n)throw new TypeError("editorContainer parameter is required");if(!(n instanceof HTMLElement))throw new TypeError("editorContainer must be an HTMLElement");if(r!==void 0&&!(r instanceof HTMLElement))throw new TypeError("editorHost must be an HTMLElement or undefined");if(o!==void 0&&(typeof o!="number"||!Number.isFinite(o)||o<=0))throw new RangeError("availableWidth must be a positive number");if(a!==void 0&&(typeof a!="number"||!Number.isFinite(a)||a<=0))throw new RangeError("availableHeight must be a positive number");if(l!==void 0&&(typeof l!="number"||!Number.isInteger(l)||l<1))throw new RangeError("currentPageNumber must be a positive integer");if(c!==void 0&&(typeof c!="number"||!Number.isInteger(c)||c<1))throw new RangeError("totalPageCount must be a positive integer");const u=t.converter.getDocumentDefaultStyles(),{fontSizePt:d,typeface:f,fontFamilyCss:h}=u,m=d*1.3333,y=m*1.2;dM(n);const w=s==="footer";Object.assign(n.style,{padding:"0",margin:"0",border:"none",boxSizing:"border-box",position:"absolute",top:"0",left:"0",width:o?`${o}px`:"100%",height:a?`${a}px`:"auto",maxWidth:"none",fontFamily:h||f,fontSize:`${m}px`,lineHeight:`${y}px`,overflow:w?"visible":"hidden",pointerEvents:"auto",backgroundColor:"white"}),r?r.appendChild(n):(console.warn("[createHeaderFooterEditor] No editorHost provided, falling back to document.body"),document.body.appendChild(n));const b=new zf({role:t.options.role,loadFromSchema:!0,mode:"docx",element:n,content:e,extensions:_W(),documentId:i||"sectionId",media:t.storage.image.media,mediaFiles:t.storage.image.media,fonts:t.options.fonts,isHeaderOrFooter:!0,isHeadless:t.options.isHeadless,pagination:!1,annotations:!0,currentPageNumber:l??1,totalPageCount:c??1,editable:!1,documentMode:"viewing",onCreate:A=>cwt(A,t),onBlur:A=>p2e(A,t,i,s)});Object.defineProperty(b.options,"parentEditor",{enumerable:!1,configurable:!0,get(){return t}}),b.setEditable(!1,!1);const E=n.querySelector(".ProseMirror");return E&&(E.style.maxHeight="100%",E.style.minHeight="100%",E.style.outline="none",E.style.border="none",E.setAttribute("role","textbox"),E.setAttribute("aria-multiline",!0),E.setAttribute("aria-label",`${s} content area. Double click to start typing.`)),b},p2e=async({editor:t,transaction:e},n,r,i)=>{if(!i||!r||Flt())return;const s=t.getUpdatedJson(),o=n.converter[`${i}Editors`];Array.isArray(o)&&o.forEach(a=>{a.id===r&&(a.editor.setOptions({media:t.options.media,mediaFiles:t.options.mediaFiles}),a.editor!==t&&a.editor.replaceContent(s)),a.editor.setOptions({lastSelection:e==null?void 0:e.selection})}),n.converter[`${i}s`][r]=s,n.setOptions({isHeaderFooterChanged:t.docChanged}),t.docChanged&&n.converter&&(n.converter.headerFooterModified=!0),Blt(n,i,r,s),await zx(n)},cwt=({editor:t},e)=>{t.setToolbar(e.toolbar)},uwt=["default","first","even","odd"],dwt=100,Dse=5e3,Ose=100;var Ba,Fy,rg,ml,W1,ig,q1,sg,By,G1,Ti,T6,m2e,g2e,y2e,b2e,w2e,v2e,x2e,E2e,BB,jB;class fwt extends cM{constructor(n){super();st(this,Ti);st(this,Ba);st(this,Fy,new Map);st(this,rg,null);st(this,ml,new Map);st(this,W1,10);st(this,ig,[]);st(this,q1,new Map);st(this,sg,0);st(this,By,0);st(this,G1,0);je(this,Ba,n),this.refresh()}refresh(){je(this,rg,pe(this,Ti,m2e).call(this));const n=pe(this,Ti,g2e).call(this,F(this,rg));pe(this,Ti,y2e).call(this,n),je(this,Fy,n)}destroy(){F(this,Fy).clear(),je(this,rg,null),pe(this,Ti,b2e).call(this),this.removeAllListeners()}async ensureEditor(n,r){if(!(n!=null&&n.id))return null;if(r){if(r.editorHost!==void 0&&!(r.editorHost instanceof HTMLElement))return console.error("[HeaderFooterEditorManager] editorHost must be an HTMLElement"),this.emit("error",{descriptor:n,error:new TypeError("editorHost must be an HTMLElement")}),null;if(r.availableWidth!==void 0&&(typeof r.availableWidth!="number"||!Number.isFinite(r.availableWidth)||r.availableWidth<=0))return console.error("[HeaderFooterEditorManager] availableWidth must be a positive number"),this.emit("error",{descriptor:n,error:new TypeError("availableWidth must be a positive number")}),null;if(r.availableHeight!==void 0&&(typeof r.availableHeight!="number"||!Number.isFinite(r.availableHeight)||r.availableHeight<=0))return console.error("[HeaderFooterEditorManager] availableHeight must be a positive number"),this.emit("error",{descriptor:n,error:new TypeError("availableHeight must be a positive number")}),null;if(r.currentPageNumber!==void 0&&(typeof r.currentPageNumber!="number"||!Number.isInteger(r.currentPageNumber)||r.currentPageNumber<1))return console.error("[HeaderFooterEditorManager] currentPageNumber must be a positive integer"),this.emit("error",{descriptor:n,error:new TypeError("currentPageNumber must be a positive integer")}),null;if(r.totalPageCount!==void 0&&(typeof r.totalPageCount!="number"||!Number.isInteger(r.totalPageCount)||r.totalPageCount<1))return console.error("[HeaderFooterEditorManager] totalPageCount must be a positive integer"),this.emit("error",{descriptor:n,error:new TypeError("totalPageCount must be a positive integer")}),null}const i=F(this,ml).get(n.id);if(i){if(je(this,sg,F(this,sg)+1),pe(this,Ti,BB).call(this,n.id),await i.ready.catch(a=>{console.error("[HeaderFooterEditorManager] Editor initialization failed:",a),this.emit("error",{descriptor:n,error:a})}),i.container&&(r!=null&&r.editorHost)&&i.container.parentElement!==r.editorHost&&r.editorHost.appendChild(i.container),i.editor&&r){const a={};r.currentPageNumber!==void 0&&(a.currentPageNumber=r.currentPageNumber),r.totalPageCount!==void 0&&(a.totalPageCount=r.totalPageCount),r.availableWidth!==void 0&&(a.availableWidth=r.availableWidth),r.availableHeight!==void 0&&(a.availableHeight=r.availableHeight),Object.keys(a).length>0&&i.editor.setOptions(a)}return i.editor}const s=F(this,q1).get(n.id);if(s)return s;je(this,By,F(this,By)+1);const o=(async()=>{try{const a=await pe(this,Ti,w2e).call(this,n,r);return a?(F(this,ml).set(n.id,a),pe(this,Ti,BB).call(this,n.id),pe(this,Ti,jB).call(this),await a.ready.catch(l=>{console.error("[HeaderFooterEditorManager] Editor initialization failed:",l),this.emit("error",{descriptor:n,error:l})}),a.editor):null}finally{F(this,q1).delete(n.id)}})();return F(this,q1).set(n.id,o),o}getEditor(n){var r;return n!=null&&n.id?((r=F(this,ml).get(n.id))==null?void 0:r.editor)??null:null}getDescriptors(n){const r=Array.from(F(this,Fy).values());return n?r.filter(i=>i.kind===n):r}getDescriptorById(n){return F(this,Fy).get(n)}getDocumentJson(n){var s,o,a,l;if(!(n!=null&&n.id))return null;const r=F(this,ml).get(n.id);if(r)try{return(o=(s=r.editor).getJSON)==null?void 0:o.call(s)}catch{}const i=F(this,rg);return i?n.kind==="header"?((a=i.headers)==null?void 0:a[n.id])??null:((l=i.footers)==null?void 0:l[n.id])??null:null}get rootEditor(){return F(this,Ba)}getVariantId(n,r){const i=F(this,rg);if(!i)return null;const s=n==="header"?i.headerIds:i.footerIds,o=s==null?void 0:s[r];return typeof o=="string"?o:null}setMaxCachedEditors(n){if(n<1)throw new Error("Max cached editors must be at least 1");if(n>Ose)throw new Error(`Max cached editors must not exceed ${Ose}`);if(!Number.isInteger(n))throw new Error("Max cached editors must be an integer");je(this,W1,n),pe(this,Ti,jB).call(this)}getCacheStats(){const n=F(this,sg)+F(this,By),r=n>0?F(this,sg)/n:0;return{cachedEditors:F(this,ml).size,maxCachedEditors:F(this,W1),cacheHits:F(this,sg),cacheMisses:F(this,By),evictions:F(this,G1),hitRate:r}}resetCacheStats(){je(this,sg,0),je(this,By,0),je(this,G1,0)}}Ba=new WeakMap,Fy=new WeakMap,rg=new WeakMap,ml=new WeakMap,W1=new WeakMap,ig=new WeakMap,q1=new WeakMap,sg=new WeakMap,By=new WeakMap,G1=new WeakMap,Ti=new WeakSet,T6=function(n){return"converter"in n&&n.converter!==void 0&&n.converter!==null},m2e=function(){if(!pe(this,Ti,T6).call(this,F(this,Ba)))return null;const n=F(this,Ba).converter;return n?{headers:n.headers,footers:n.footers,headerIds:n.headerIds,footerIds:n.footerIds}:null},g2e=function(n){var a,l;const r=new Map;if(!n)return r;const i=(c,u,d)=>{if(typeof u!="string"||u.length===0)return;const f=r.get(u);if(f){d&&!f.variant&&(f.variant=d);return}r.set(u,{id:u,kind:c,variant:d})};uwt.forEach(c=>{var f,h;const u=(f=n.headerIds)==null?void 0:f[c],d=(h=n.footerIds)==null?void 0:h[c];typeof u=="string"&&i("header",u,c),typeof d=="string"&&i("footer",d,c)});const s=(a=n.headerIds)==null?void 0:a.ids;Array.isArray(s)&&s.forEach(c=>{typeof c=="string"&&!r.has(c)&&i("header",c)});const o=(l=n.footerIds)==null?void 0:l.ids;return Array.isArray(o)&&o.forEach(c=>{typeof c=="string"&&!r.has(c)&&i("footer",c)}),r},y2e=function(n){const r=[];F(this,ml).forEach((i,s)=>{if(!n.has(s)){try{i.disposer()}catch(o){console.warn("[HeaderFooterEditorManager] Cleanup failed for editor:",s,o)}r.push(s)}}),r.forEach(i=>F(this,ml).delete(i))},b2e=function(){F(this,ml).forEach(n=>{try{n.disposer()}catch(r){console.warn("[HeaderFooterEditorManager] Cleanup failed:",r)}}),F(this,ml).clear()},w2e=async function(n,r){const i=this.getDocumentJson(n);if(!i)return null;let s,o;try{o=pe(this,Ti,v2e).call(this),s=lwt({editor:F(this,Ba),data:i,editorContainer:o,editorHost:r==null?void 0:r.editorHost,sectionId:n.id,type:n.kind,availableWidth:r==null?void 0:r.availableWidth,availableHeight:(r==null?void 0:r.availableHeight)??dwt,currentPageNumber:(r==null?void 0:r.currentPageNumber)??1,totalPageCount:(r==null?void 0:r.totalPageCount)??1})}catch(u){return console.error("[HeaderFooterEditorManager] Editor creation failed:",u),null}const a=async({transaction:u})=>{this.emit("contentChanged",{descriptor:n});try{p2e({editor:s,transaction:u},F(this,Ba),n.id,n.kind),await zx(F(this,Ba),void 0)}catch(d){console.error("[HeaderFooterEditorManager] Failed to sync header/footer update",{descriptor:n,error:d}),this.emit("syncError",{descriptor:n,error:d})}};s.on("update",a),pe(this,Ti,x2e).call(this,n,s);const l=()=>{var u,d;try{(u=s.off)==null||u.call(s,"update",a)}catch(f){console.warn("[HeaderFooterEditorManager] Failed to remove update listener:",f)}try{(d=s.destroy)==null||d.call(s)}catch(f){console.warn("[HeaderFooterEditorManager] Failed to destroy editor:",f)}try{o.parentNode&&o.parentNode.removeChild(o)}catch(f){console.warn("[HeaderFooterEditorManager] Failed to remove container from DOM:",f)}try{pe(this,Ti,E2e).call(this,n)}catch(f){console.warn("[HeaderFooterEditorManager] Failed to unregister converter editor:",f)}},c=new Promise((u,d)=>{var m,y;let f=!1;const h=setTimeout(()=>{if(!f){f=!0;const w=new Error(`Editor initialization timed out after ${Dse}ms for ${n.kind} ${n.id}`);d(w)}},Dse);(m=s.once)==null||m.call(s,"create",()=>{f||(f=!0,clearTimeout(h),u())}),(y=s.once)==null||y.call(s,"error",w=>{f||(f=!0,clearTimeout(h),d(w instanceof Error?w:new Error(String(w))))})});return{descriptor:n,editor:s,container:o,disposer:l,ready:c}},v2e=function(){var i,s;const n=((s=(i=F(this,Ba).options)==null?void 0:i.element)==null?void 0:s.ownerDocument)??globalThis.document??void 0;return(n==null?void 0:n.createElement("div"))??document.createElement("div")},x2e=function(n,r){if(!pe(this,Ti,T6).call(this,F(this,Ba)))return;const i=F(this,Ba).converter;if(!i)return;const s=n.kind==="header"?"headerEditors":"footerEditors";Array.isArray(i[s])||(i[s]=[]);const o=i[s];if(!Array.isArray(o))return;o.some(l=>l&&typeof l=="object"&&"id"in l&&l.id===n.id)||o.push({id:n.id,editor:r})},E2e=function(n){if(!pe(this,Ti,T6).call(this,F(this,Ba)))return;const r=F(this,Ba).converter;if(!r)return;const i=n.kind==="header"?"headerEditors":"footerEditors",s=r[i];Array.isArray(s)&&(r[i]=s.filter(o=>!(o&&typeof o=="object"&&"id"in o&&o.id===n.id)))},BB=function(n){je(this,ig,F(this,ig).filter(r=>r!==n)),F(this,ig).push(n)},jB=function(){for(;F(this,ig).length>F(this,W1);){const n=F(this,ig).shift();if(!n)break;const r=F(this,ml).get(n);if(r){try{r.disposer(),je(this,G1,F(this,G1)+1)}catch(i){console.warn("[HeaderFooterEditorManager] LRU eviction cleanup failed:",i)}F(this,ml).delete(n)}}};var Mu,ik,og,qg,k6,S2e;class hwt{constructor(e,n){st(this,qg);st(this,Mu);st(this,ik);st(this,og,new Map);je(this,Mu,e),je(this,ik,n)}getBatch(e){const n=F(this,Mu).getDescriptors(e);if(!n.length)return;const r={};let i=!1;return n.forEach(s=>{if(!s.variant)return;const o=pe(this,qg,k6).call(this,s);o&&o.length>0&&(r[s.variant]=o,i=!0)}),i?r:void 0}getBlocksByRId(e){const n=F(this,Mu).getDescriptors(e);if(!n.length)return;const r=new Map;return n.forEach(i=>{const s=pe(this,qg,k6).call(this,i);s&&s.length>0&&r.set(i.id,s)}),r.size>0?r:void 0}getBlocksForRId(e){const n=F(this,Mu).getDescriptorById(e);if(n)return pe(this,qg,k6).call(this,n)}invalidate(e){F(this,og).delete(e)}invalidateAll(){F(this,og).clear()}clear(){F(this,og).clear()}}Mu=new WeakMap,ik=new WeakMap,og=new WeakMap,qg=new WeakSet,k6=function(e){var w,b,E;const n=F(this,Mu).getDocumentJson(e);if(!n)return;const r=F(this,og).get(e.id);if((r==null?void 0:r.docRef)===n)return r.blocks;const i=`hf-${e.kind}-${e.id}-`,s=pe(this,qg,S2e).call(this),o=(w=F(this,Mu).rootEditor)==null?void 0:w.converter,a=F(this,ik),l=o==null?void 0:o.media,c=a&&Object.keys(a).length>0?a:l,u=Dxe(((b=F(this,Mu).rootEditor)==null?void 0:b.schema)??null),d=(E=o==null?void 0:o.getDocumentDefaultStyles)==null?void 0:E.call(o),f=d==null?void 0:d.typeface,h=(d==null?void 0:d.fontSizePt)!=null?d.fontSizePt*(96/72):void 0,y=h2e(n,{mediaFiles:c,blockIdPrefix:i,converterContext:s,defaultFont:f,defaultSize:h,...u.length>0?{atomNodeTypes:u}:{}}).blocks;return F(this,og).set(e.id,{docRef:n,blocks:y}),y},S2e=function(){const e=F(this,Mu).rootEditor;if(!("converter"in e))return;const n=e.converter;if(!n)return;const r={};return n.convertedXml&&typeof n.convertedXml=="object"&&(r.docx=n.convertedXml),n.numbering&&typeof n.numbering=="object"&&(r.numbering=n.numbering),Array.isArray(n.linkedStyles)&&(r.linkedStyles=n.linkedStyles),Object.keys(r).length>0?r:void 0};const pwt="10",mwt="15",gwt="#4472c4",ywt="1px";var qh,Zl,tf,jy,nf,K1,Aa,A2e,T2e,k2e,wwt,C2e,ES;class bwt{constructor(e,n,r=null){st(this,Aa);st(this,qh);st(this,Zl,null);st(this,tf,null);st(this,jy,null);st(this,nf,null);st(this,K1,null);if(!(e instanceof HTMLElement))throw new TypeError("painterHost must be an HTMLElement");if(!(n instanceof HTMLElement))throw new TypeError("visibleHost must be an HTMLElement");if(r!==null&&!(r instanceof HTMLElement))throw new TypeError("selectionOverlay must be an HTMLElement or null");if(!e.isConnected)throw new Error("painterHost must be connected to the DOM");if(!n.isConnected)throw new Error("visibleHost must be connected to the DOM");je(this,qh,r)}setOnDimmingClick(e){}getActiveEditorHost(){return F(this,Zl)}showEditingOverlay(e,n,r){try{const i=pe(this,Aa,A2e).call(this,e,n.kind),s=pe(this,Aa,T2e).call(this,e,n.kind,i);if(!s)return{success:!1,reason:`Failed to create editor host for ${n.kind}`};if(pe(this,Aa,k2e).call(this,s,n,i,r),i&&(i.style.visibility="hidden"),s.style.visibility="visible",s.style.zIndex=pwt,n.kind==="footer"){const o=s.dataset.contentOffset;if(o){const a=s.querySelector(".super-editor");a instanceof HTMLElement&&(a.style.top=`${o}px`)}}return pe(this,Aa,C2e).call(this,e,n,i,r),je(this,Zl,s),je(this,tf,i),je(this,jy,n),{success:!0,editorHost:s}}catch(i){F(this,tf)&&(F(this,tf).style.visibility="visible"),F(this,Zl)&&(F(this,Zl).style.visibility="hidden"),pe(this,Aa,ES).call(this);const s=i instanceof Error?i.message:String(i);return console.error("[EditorOverlayManager] Failed to show editing overlay:",i),{success:!1,reason:`DOM manipulation error: ${s}`}}}hideEditingOverlay(){var e;if(F(this,tf)&&(F(this,tf).style.visibility="visible"),F(this,Zl)&&(F(this,Zl).style.visibility="hidden",F(this,Zl).style.zIndex="",((e=F(this,jy))==null?void 0:e.kind)==="footer")){const n=F(this,Zl).querySelector(".super-editor");n instanceof HTMLElement&&(n.style.top="0",n.style.transform="")}pe(this,Aa,ES).call(this),je(this,Zl,null),je(this,tf,null),je(this,jy,null)}hideSelectionOverlay(){F(this,qh)&&(F(this,qh).style.visibility="hidden")}showSelectionOverlay(){F(this,qh)&&(F(this,qh).style.visibility="visible")}destroy(){pe(this,Aa,ES).call(this),je(this,Zl,null),je(this,tf,null),je(this,jy,null),je(this,qh,null)}}qh=new WeakMap,Zl=new WeakMap,tf=new WeakMap,jy=new WeakMap,nf=new WeakMap,K1=new WeakMap,Aa=new WeakSet,A2e=function(e,n){const r=n==="header"?"superdoc-page-header":"superdoc-page-footer";return e.querySelector(`.${r}`)},T2e=function(e,n,r){var o;const i=n==="header"?"superdoc-header-editor-host":"superdoc-footer-editor-host";let s=e.querySelector(`.${i}`);return s||(s=document.createElement("div"),s.className=i,Object.assign(s.style,{position:"absolute",pointerEvents:"auto",visibility:"hidden",overflow:"hidden",boxSizing:"border-box"}),r?(o=r.parentNode)==null||o.insertBefore(s,r.nextSibling):e.appendChild(s)),s},k2e=function(e,n,r,i){if(!e.parentElement){console.error("[EditorOverlayManager] Editor host has no parent element");return}const o=(r==null?void 0:r.offsetTop)??n.localY,a=(r==null?void 0:r.offsetLeft)??n.localX,l=(r==null?void 0:r.offsetWidth)??n.width,c=(r==null?void 0:r.offsetHeight)??n.height;if(Object.assign(e.style,{top:`${o}px`,left:`${a}px`,width:`${l}px`,height:`${c}px`}),n.kind==="footer"&&r){const u=r.querySelector(".superdoc-fragment");if(u instanceof HTMLElement){const d=parseFloat(u.style.top)||0;e.dataset.contentOffset=String(d)}}},wwt=function(){F(this,K1)&&(F(this,K1).remove(),je(this,K1,null))},C2e=function(e,n,r,i){pe(this,Aa,ES).call(this),je(this,nf,document.createElement("div")),F(this,nf).className="superdoc-header-footer-border";const s=n.kind==="header",o=r==null?void 0:r.offsetTop,a=r==null?void 0:r.offsetHeight,l=s?o!=null&&a!=null?o+a:n.localY+n.height:o??n.localY;Object.assign(F(this,nf).style,{position:"absolute",left:"0",right:"0",top:`${l}px`,height:ywt,backgroundColor:gwt,zIndex:mwt,pointerEvents:"none"}),e.appendChild(F(this,nf))},ES=function(){F(this,nf)&&(F(this,nf).remove(),je(this,nf,null))};function vwt({painterHost:t,visibleHost:e,selectionOverlay:n,editor:r,converter:i,mediaFiles:s,isDebug:o,initBudgetMs:a,resetSession:l,requestRerender:c,exitHeaderFooterMode:u,previousCleanups:d,previousAdapter:f,previousManager:h,previousOverlayManager:m}){const y=performance.now();d.forEach(k=>{try{k()}catch(_){console.warn("[PresentationEditor] Header/footer cleanup failed:",_)}}),f==null||f.clear(),h==null||h.destroy(),m==null||m.destroy(),l();const w=new bwt(t,e,n);w.setOnDimmingClick(u);const b=TB(i),E=new fwt(r),A=new hwt(E,s),x=[],T=({descriptor:k})=>{A.invalidate(k.id),c()};E.on("contentChanged",T),x.push(()=>{E.off("contentChanged",T)});const R=performance.now()-y;return o&&R>a&&console.warn(`[PresentationEditor] Header/footer initialization took ${R.toFixed(2)}ms (budget: ${a}ms)`),{overlayManager:w,headerFooterIdentifier:b,headerFooterManager:E,headerFooterAdapter:A,cleanups:x}}function xwt(t){const e=Math.max(0,t.width),n=Math.max(0,t.height),r=Swt(t.rotation??0),i=Math.cos(r),s=Math.sin(r),o=Math.abs(e*i)+Math.abs(n*s),a=Math.abs(e*s)+Math.abs(n*i);return{width:o,height:a}}function Ewt(t){if(!Number.isFinite(t))return 0;let e=t%360;return e<0&&(e+=360),e}function Swt(t){return t*Math.PI/180}const Awt=5e3;let Twt=Awt;const Ty=new Map,kwt=(t,e,n)=>`${t}|${e}|${n||0}`;function Cwt(t,e,n,r){t.length>32e3&&(t=t.substring(0,32e3));const i=kwt(t,e,n),s=Ty.get(i);if(s!==void 0)return Ty.delete(i),Ty.set(i,s),s.width;try{r.font=e;const a=r.measureText(t).width,l=n?Math.max(0,t.length-1)*n:0,c=a+l;return Ty.set(i,{width:c}),_wt(),c}catch{return 0}}function _wt(){for(;Ty.size>Twt;){const t=Ty.keys().next().value;if(t===void 0)break;Ty.delete(t)}}const zE=new Map,Nwt=1e3,Iwt="MHgypbdl";function Rwt(t){return`${t.fontFamily}|${t.fontSize}|${t.bold??!1}|${t.italic??!1}`}function Mwt(t,e,n){const r=[];return t.italic&&r.push("italic"),t.bold&&r.push("bold"),r.push(`${t.fontSize}px`),r.push(t.fontFamily),r.join(" ")}function Lwt(t,e,n,r){if(!t||typeof t!="object")throw new TypeError("Canvas context must be a valid CanvasRenderingContext2D object");if(typeof e.fontSize!="number"||!Number.isFinite(e.fontSize)||e.fontSize<=0)throw new TypeError(`Font size must be a positive finite number, got: ${typeof e.fontSize=="number"?e.fontSize:typeof e.fontSize}`);if(typeof e.fontFamily!="string"||e.fontFamily.trim().length===0)throw new TypeError("Font family must be a non-empty string");const i=Rwt(e),s=zE.get(i);if(s)return s;const o=Mwt(e);t.font=o;const a=t.measureText(Iwt);let l,c;typeof a.actualBoundingBoxAscent=="number"&&typeof a.actualBoundingBoxDescent=="number"&&a.actualBoundingBoxAscent>0?(l=a.actualBoundingBoxAscent,c=a.actualBoundingBoxDescent):(l=e.fontSize*.8,c=e.fontSize*.2);const u={ascent:l,descent:c};if(zE.size>=Nwt){const d=zE.keys().next().value;d&&zE.delete(d)}return zE.set(i,u),u}const{computeTabStops:Dwt}=H1e;let X5=null;const _2e=720,Owt=1440,Pwt=96,N2e=Owt/Pwt,I2e=t=>t/N2e,Y5=t=>Math.round(t*N2e),Fwt=I2e(_2e),Bwt=.1,jwt=".",$wt=new Set(["start","center","end","decimal","bar","clear"]),R2e=8,zwt=1.2,Hwt=6,$B=16,Ir=t=>t;function dW(){if(!X5){const t=typeof document<"u"?document.createElement("canvas"):null;if(!t)throw new Error("Canvas not available. Ensure this runs in a DOM environment (browser or jsdom).");if(X5=t.getContext("2d"),!X5)throw new Error("Failed to get 2D context from canvas")}return X5}function wp(t){const e=[];return t.italic&&e.push("italic"),t.bold&&e.push("bold"),e.push(`${t.fontSize}px`),e.push(t.fontFamily),{font:e.join(" "),fontFamily:t.fontFamily}}function UI(t,e,n,r,i){n.font=e;const s=n.measureText(t),o=s.width,a=(s.actualBoundingBoxLeft||0)+(s.actualBoundingBoxRight||0);return Math.max(o,a)}const Vwt=1152/72,M2e=1.15;function sa(t,e,n){let r,i;if(n){const a=dW(),l=Lwt(a,n);r=Ir(l.ascent),i=Ir(l.descent)}else r=Ir(t*.8),i=Ir(t*.2);const s=Math.max(t*M2e,r+i,Vwt),o=Ir(B2e(e,s));return{ascent:r,descent:i,lineHeight:o}}function Nu(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,bold:t.bold,italic:t.italic}}function HE(t,e,n){return n.fontSize>=t?Nu(n):e}function L2e(t){return t.kind==="tab"}function D2e(t){return t.kind==="image"}function O2e(t){return t.kind==="lineBreak"}function P2e(t){return t.kind==="fieldAnnotation"}function Uwt(t,e,n,r="."){const i={totalWidth:0,runs:[],endRunIndex:e.length};let s=!1;for(let o=t;o<e.length;o++){const a=e[o];if(L2e(a)){i.endRunIndex=o;break}if(O2e(a)||a.kind==="break"&&a.breakType==="line"){i.endRunIndex=o;break}if(a.kind==="text"||a.kind===void 0){const l=a,c=l.text||"";if(c.length>0){const{font:u}=wp(l),d=ha(c,u,n,l,0);let f;if(!s){const h=c.indexOf(r);if(h>=0){s=!0;const m=c.slice(0,h);f=m.length>0?ha(m,u,n,l,0):0,i.beforeDecimalWidth=i.totalWidth+f}}i.runs.push({runIndex:o,width:d,text:c,beforeDecimalWidth:f}),i.totalWidth+=d}else i.runs.push({runIndex:o,width:0,text:""});continue}if(D2e(a)){const l=a.distLeft??0,c=a.distRight??0,u=a.width+l+c;i.runs.push({runIndex:o,width:u}),i.totalWidth+=u;continue}if(P2e(a)){const l=a.fontSize??$B,{font:c}=wp({fontFamily:a.fontFamily??"Arial",fontSize:l,bold:a.bold,italic:a.italic}),d=(a.displayLabel?ha(a.displayLabel,c,n,a,0):0)+R2e;i.runs.push({runIndex:o,width:d}),i.totalWidth+=d;continue}i.runs.push({runIndex:o,width:0})}return i}async function WI(t,e){const n=Qwt(e);return t.kind==="drawing"?Xwt(t,n):t.kind==="image"?Kwt(t,n):t.kind==="list"?evt(t,n):t.kind==="table"?Gwt(t,n):t.kind==="sectionBreak"?{kind:"sectionBreak"}:t.kind==="pageBreak"?{kind:"pageBreak"}:t.kind==="columnBreak"?{kind:"columnBreak"}:F2e(t,n.maxWidth)}async function F2e(t,e){var ae,ie,H,be,Te,Z,oe,te,ye,ke,we,Ae,Re,Pe;const n=dW(),r=(ae=t.attrs)==null?void 0:ae.wordLayout,i=.5,s=[],o=(ie=t.attrs)==null?void 0:ie.indent,a=(H=t.attrs)==null?void 0:H.spacing,l=Fse(o==null?void 0:o.left),c=Fse(o==null?void 0:o.right),u=(o==null?void 0:o.firstLine)??0,d=(o==null?void 0:o.hanging)??0,f=!!(r!=null&&r.marker),m=((be=t.attrs)==null?void 0:be.suppressFirstLineIndent)===!0?0:u-d,y=Math.max(0,m),w=f?0:y,b=Math.max(1,e-l-c),E=b;let A;const x=r==null?void 0:r.textStartPx,T=(Te=r==null?void 0:r.marker)==null?void 0:Te.textStartX,R=typeof T=="number"&&Number.isFinite(T)?T:typeof x=="number"&&Number.isFinite(x)?x:void 0,_=qU(r,l,u,d,(Ce,Oe)=>{var he,q,ne,Ee,Se;const Fe={fontFamily:Hb((he=Oe.run)==null?void 0:he.fontFamily)??((q=Oe.run)==null?void 0:q.fontFamily)??"Arial",fontSize:((ne=Oe.run)==null?void 0:ne.fontSize)??16,bold:((Ee=Oe.run)==null?void 0:Ee.bold)??!1,italic:((Se=Oe.run)==null?void 0:Se.italic)??!1},{font:$e}=wp(Fe);return UI(Ce,$e,n)})??R;typeof _=="number"&&_>l?A=Math.max(1,e-_-c):A=Math.max(1,b-w);const N=cvt(o,(Z=t.attrs)==null?void 0:Z.tabs,(oe=t.attrs)==null?void 0:oe.tabIntervalTwips),L=ivt((te=t.attrs)==null?void 0:te.decimalSeparator),M=N.filter(Ce=>Ce.val==="bar"),C=Ce=>{M.length>0&&(Ce.bars=M.map(Oe=>({x:Oe.pos})))},D=(ye=t.attrs)==null?void 0:ye.dropCapDescriptor;let O=null;if(D)if(!D.run||!D.run.text||!D.lines)console.warn("Invalid drop cap descriptor - missing required fields:",D);else{const Ce=ovt(n,D,a);O=Ce,D.measuredWidth=Ce.width,D.measuredHeight=Ce.height}if(t.runs.length===0){const Ce=sa(12,a),Oe={fromRun:0,fromChar:0,toRun:0,toChar:0,width:0,...Ce};return C(Oe),s.push(Oe),{kind:"paragraph",lines:s,totalHeight:Ce.lineHeight}}let $=null;const U=Ce=>O&&s.length<O.lines&&O.mode==="drop"?Math.max(1,Ce-O.width):Ce;let W=12,ce=0,se=null,Q=0,J=null;const K=new Set;let re=null;const X=Ce=>!$wt.has(Ce.val)&&!K.has(Ce.val)?(K.add(Ce.val),!1):!0,me=(Ce,Oe,Fe)=>Ce<=0?0:Oe?Q:Fe.letterSpacing??0,G=(Ce,Oe)=>{if(!se||!$)return;Ce<0&&(Ce=0);const{target:Fe,val:$e}=se;let he=$.width;return $e==="decimal"?he=Math.max(0,Fe-(Oe??0)):$e==="end"?he=Math.max(0,Fe-Ce):$e==="center"?he=Math.max(0,Fe-Ce/2):he=Math.max(0,Fe),$.width=Ir(he),J={target:Fe,val:$e},se=null,he},B=(Ce,Oe,Fe,$e)=>{if(!se||!$)return;const{val:he}=se;let q=0,ne;if(he==="decimal"){const Ee=Ce.indexOf(L);if(Ee>=0){const Se=Ce.slice(0,Ee);ne=Se.length>0?ha(Se,Oe,n,Fe,$e):0}q=Ce.length>0?ha(Ce,Oe,n,Fe,$e):0}else(he==="end"||he==="center")&&(q=Ce.length>0?ha(Ce,Oe,n,Fe,$e):0);return G(q,ne)},z=[];for(const Ce of t.runs)if(Ce.text&&typeof Ce.text=="string"&&Ce.text.includes(`
`)){const Oe=Ce,Fe=Oe.text.split(`
`);let $e=Oe.pmStart??0;Fe.forEach((he,q)=>{z.push({...Oe,text:he,pmStart:$e,pmEnd:$e+he.length}),$e+=he.length,q!==Fe.length-1&&(z.push({kind:"break",breakType:"line",pmStart:$e,pmEnd:$e+1,sdt:Ce.sdt}),$e+=1)})}else z.push(Ce);const de=Ce=>{const Oe=z[Ce.toRun];if(!Oe||!("text"in Oe)||typeof Oe.text!="string")return;const Fe=Ce.toRun===Ce.fromRun?Ce.fromChar:0,$e=Ce.toChar;if($e<=Fe)return;const he=Oe.text.slice(Fe,$e);let q=0;for(let qe=he.length-1;qe>=0&&he[qe]===" ";qe-=1)q+=1;if(q===0||Ce.fromRun===Ce.toRun&&he.trim().length===0)return;const ne=he.slice(0,Math.max(0,he.length-q)),{font:Ee}=wp(Oe),Se=ha(he,Ee,n,Oe,Fe),ze=ne.length>0?ha(ne,Ee,n,Oe,Fe):0,Ie=Math.max(0,Se-ze);Ce.width=Ir(Math.max(0,Ce.width-Ie)),Ce.spaceCount=Math.max(0,Ce.spaceCount-q),Ce.naturalWidth!=null&&typeof Ce.naturalWidth=="number"&&(Ce.naturalWidth=Ir(Math.max(0,Ce.naturalWidth-Ie)))};for(let Ce=0;Ce<z.length;Ce++){const Oe=z[Ce];if(Oe.kind==="break"){if($){const q=sa($.maxFontSize,a,$.maxFontInfo),Ee={...$,...q};C(Ee),s.push(Ee),$=null}else{const q=t.runs.find(ze=>ze.kind!=="tab"&&ze.kind!=="lineBreak"&&ze.kind!=="break"&&!("src"in ze)&&"fontSize"in ze),ne=(q==null?void 0:q.fontSize)??12,Ee=sa(ne,a),Se={fromRun:Ce,fromChar:0,toRun:Ce,toChar:0,width:0,segments:[],...Ee};C(Se),s.push(Se)}ce=0,se=null,J=null,Q=0;continue}if(O2e(Oe)){if($){const Ee=sa($.maxFontSize,a,$.maxFontInfo),Se={...$,...Ee};C(Se),s.push(Se)}else{const Ee=sa(W,a),Se={fromRun:Ce,fromChar:0,toRun:Ce,toChar:0,width:0,maxWidth:U(s.length===0?A:E),segments:[],...Ee};C(Se),s.push(Se)}const q=s.length>0,ne=U(q?E:A);$={fromRun:Ce,fromChar:0,toRun:Ce,toChar:0,width:0,maxFontSize:W,maxWidth:ne,segments:[],spaceCount:0},ce=0,se=null,J=null,Q=0;continue}if(L2e(Oe)){re=null,$||($={fromRun:Ce,fromChar:0,toRun:Ce,toChar:1,width:0,maxFontSize:12,maxWidth:U(s.length===0?A:E),segments:[],spaceCount:0});const q=$.width,ne=s.length===0?l+m:l,Ee=$.width+ne,{target:Se,nextIndex:ze,stop:Ie}=Bse(Ee,N,ce);ce=ze;const qe=$.maxWidth+ne,Ye=Math.min(Se,qe),ft=Math.max(0,Ye-Ee);if($.width=Ir($.width+ft),Oe.width=ft,$.maxFontSize=Math.max($.maxFontSize,12),$.toRun=Ce,$.toChar=1,Ie&&Ie.leader&&Ie.leader!=="none"){const We=Ie.leader,nt=Ye-ne,bt=Math.min(q,nt),ct=Math.max(q,nt);$.leaders||($.leaders=[]),$.leaders.push({from:bt,to:ct,style:We})}if(Ie)if(X(Ie),Ie.val==="end"||Ie.val==="center"||Ie.val==="decimal"){const We=Uwt(Ce+1,z,n,L);if(We.totalWidth>0){const nt=Ye-ne;let bt;if(Ie.val==="end")bt=Math.max(0,nt-We.totalWidth);else if(Ie.val==="center")bt=Math.max(0,nt-We.totalWidth/2);else{const ct=We.beforeDecimalWidth??We.totalWidth;bt=Math.max(0,nt-ct)}re={measure:We,startX:bt,currentX:bt,target:nt,val:Ie.val},$.width=Ir(bt)}se=null}else se={target:Ye-ne,val:Ie.val};else se=null;Q=0;continue}if(D2e(Oe)){const q=Oe.distLeft??0,ne=Oe.distRight??0,Ee=Oe.width+q+ne,Se=Oe.distTop??0,ze=Oe.distBottom??0,Ie=Oe.height+Se+ze;let qe;if(re&&$?(qe=re.currentX,re.currentX=Ir(re.currentX+Ee)):se&&$&&(qe=G(Ee)),!$){$={fromRun:Ce,fromChar:0,toRun:Ce,toChar:1,width:Ee,maxFontSize:Ie,maxWidth:U(s.length===0?A:E),spaceCount:0,segments:[{runIndex:Ce,fromChar:0,toChar:1,width:Ee,...qe!==void 0?{x:qe}:{}}]},Q=0,re&&Ce+1>=re.measure.endRunIndex&&(re=null);continue}const Ye=J;if(!(re!==null)&&$.width+Ee>$.maxWidth&&$.width>0){de($);const nt=sa($.maxFontSize,a,$.maxFontInfo),ct={...$,...nt};C(ct),s.push(ct),ce=0,se=null,J=null,re=null,$={fromRun:Ce,fromChar:0,toRun:Ce,toChar:1,width:Ee,maxFontSize:Ie,maxWidth:U(E),spaceCount:0,segments:[{runIndex:Ce,fromChar:0,toChar:1,width:Ee}]}}else $.toRun=Ce,$.toChar=1,$.width=Ir($.width+Ee),$.maxFontSize=Math.max($.maxFontSize,Ie),$.segments||($.segments=[]),$.segments.push({runIndex:Ce,fromChar:0,toChar:1,width:Ee,...qe!==void 0?{x:qe}:{}});re&&Ce+1>=re.measure.endRunIndex&&(re=null);const We=Ye;We&&$&&We.val==="end"&&($.width=Ir(We.target)),J=null,Q=0;continue}if(P2e(Oe)){const q=Oe.displayLabel||"",ne=fW(q,Oe),Ee=typeof Oe.fontSize=="number"?Oe.fontSize:typeof Oe.fontSize=="string"&&parseFloat(Oe.fontSize)||$B,Se=Oe.fontFamily||"Arial, sans-serif",ze=Oe.bold?"bold":"normal",qe=`${Oe.italic?"italic":"normal"} ${ze} ${Ee}px ${Se}`;n.font=qe;const ft=(ne?n.measureText(ne).width:0)+R2e,We=Ee*zwt+Hwt;let nt;if(se&&$&&(nt=G(ft)),!$){$={fromRun:Ce,fromChar:0,toRun:Ce,toChar:1,width:ft,maxFontSize:We,maxWidth:U(s.length===0?A:E),spaceCount:0,segments:[{runIndex:Ce,fromChar:0,toChar:1,width:ft,...nt!==void 0?{x:nt}:{}}]},Q=0;continue}if($.width+ft>$.maxWidth&&$.width>0){de($);const ct=sa($.maxFontSize,a,$.maxFontInfo),tn={...$,...ct};C(tn),s.push(tn),ce=0,se=null,J=null,$={fromRun:Ce,fromChar:0,toRun:Ce,toChar:1,width:ft,maxFontSize:We,maxWidth:U(E),spaceCount:0,segments:[{runIndex:Ce,fromChar:0,toChar:1,width:ft}]}}else $.toRun=Ce,$.toChar=1,$.width=Ir($.width+ft),$.maxFontSize=Math.max($.maxFontSize,We),$.segments||($.segments=[]),$.segments.push({runIndex:Ce,fromChar:0,toChar:1,width:ft,...nt!==void 0?{x:nt}:{}});const bt=J;bt&&$&&bt.val==="end"&&($.width=Ir(bt.target)),J=null,Q=0;continue}if(!("text"in Oe)||!("fontSize"in Oe)){Q=0;continue}W=Oe.fontSize;const{font:Fe}=wp(Oe),$e=Oe.text.split("	");let he=0;for(let q=0;q<$e.length;q++){const ne=$e[q],Ee=q===$e.length-1;if(/^[ ]+$/.test(ne)){const Ye=he===0&&q===0,ft=ne.length,We=he,nt=he+ft,bt=ha(ne,Fe,n,Oe,We);if(!$)$={fromRun:Ce,fromChar:We,toRun:Ce,toChar:nt,width:bt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(s.length===0?A:E),segments:[{runIndex:Ce,fromChar:We,toChar:nt,width:bt}],spaceCount:ft};else{const ct=me($.width,Ye,Oe);if($.width+ct+bt>$.maxWidth-i&&$.width>0){de($);const Ft=sa($.maxFontSize,a,$.maxFontInfo),Zt={...$,...Ft};C(Zt),s.push(Zt),ce=0,se=null,J=null,$={fromRun:Ce,fromChar:We,toRun:Ce,toChar:nt,width:bt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(E),segments:[{runIndex:Ce,fromChar:We,toChar:nt,width:bt}],spaceCount:ft}}else $.toRun=Ce,$.toChar=nt,$.width=Ir($.width+ct+bt),$.maxFontInfo=HE($.maxFontSize,$.maxFontInfo,Oe),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize),Z5($.segments,Ce,We,nt,bt),$.spaceCount+=ft}he=nt;continue}const Se=ne.split(" ");let ze=-1;for(let Ye=Se.length-1;Ye>=0;Ye-=1)if(Se[Ye]!==""){ze=Ye;break}let Ie,qe=!1;re&&$?(Ie=re.currentX,qe=!0):$&&se&&(Ie=B(ne,Fe,Oe,he),Ie==null&&(Ie=$.width));for(let Ye=0;Ye<Se.length;Ye++){const ft=Se[Ye];if(ft===""){const Bt=he,Wt=he+1,Jt=ha(" ",Fe,n,Oe,Bt),qt=he===0&&q===0&&Ye===0;if(!$)$={fromRun:Ce,fromChar:Bt,toRun:Ce,toChar:Wt,width:Jt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(s.length===0?A:E),segments:[{runIndex:Ce,fromChar:Bt,toChar:Wt,width:Jt}],spaceCount:1};else{const et=me($.width,qt,Oe);if($.width+et+Jt>$.maxWidth-i&&$.width>0){de($);const Ze=sa($.maxFontSize,a,$.maxFontInfo),at={...$,...Ze};C(at),s.push(at),ce=0,se=null,J=null,re=null,$={fromRun:Ce,fromChar:Bt,toRun:Ce,toChar:Wt,width:Jt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(E),segments:[{runIndex:Ce,fromChar:Bt,toChar:Wt,width:Jt}],spaceCount:1}}else{$.toRun=Ce,$.toChar=Wt,$.width=Ir($.width+et+Jt),$.maxFontInfo=HE($.maxFontSize,$.maxFontInfo,Oe),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize);let Ze;qe&&re&&(Ze=re.currentX,re.currentX=Ir(re.currentX+Jt)),Z5($.segments,Ce,Bt,Wt,Jt,Ze),$.spaceCount+=1}}he=Wt;continue}const We=he,nt=ha(ft,Fe,n,Oe,We),bt=Ye<ze,ct=he+ft.length,Ft=bt?ha(" ",Fe,n,Oe,ct):0,tn=nt+Ft,Zt=ct+(bt?1:0),ri=$?$.maxWidth:U(s.length===0?A:b);if(nt>ri&&ft.length>1){if($&&$.width>0&&$.segments&&$.segments.length>0){de($);const Ue=sa($.maxFontSize,a,$.maxFontInfo),vt={...$,...Ue};C(vt),s.push(vt),ce=0,se=null,$=null}const Bt=U(s.length===0?A:b),Wt=$&&$.segments&&$.segments.length===0&&$.width>0,Jt=Wt?$.maxWidth-$.width:Bt,qt=Wt?Math.max(Jt,Bt*.25):Bt,et=rvt(ft,qt-i,Fe,n,Oe,We);let Ze=We;for(let Ue=0;Ue<et.length;Ue++){const at=et[Ue],vt=Ze,Dt=Ze+at.text.length,$t=Ue===et.length-1;if(Ue===0&&Wt&&$&&$.segments)if($.toRun=Ce,$.toChar=Dt,$.width=Ir($.width+at.width),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize),$.maxFontInfo=Nu(Oe),$.segments.push({runIndex:Ce,fromChar:vt,toChar:Dt,width:at.width}),$t){const dn=Oe.letterSpacing??0;bt&&$.width+Ft<=$.maxWidth-i?($.toChar=Zt,$.width=Ir($.width+Ft+dn),he=Zt,$.spaceCount+=1):he=Zt}else{de($);const dn=sa($.maxFontSize,a,$.maxFontInfo),sn={...$,...dn};C(sn),s.push(sn),ce=0,se=null,$=null}else if($t){$={fromRun:Ce,fromChar:vt,toRun:Ce,toChar:Dt,width:at.width,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(b),segments:[{runIndex:Ce,fromChar:vt,toChar:Dt,width:at.width}],spaceCount:0};const dn=Oe.letterSpacing??0;bt&&$.width+Ft<=$.maxWidth-i?($.toChar=Zt,$.width=Ir($.width+Ft+dn),he=Zt,$.spaceCount+=1):he=Zt}else{const dn=U(s.length===0?A:b),bn=sa(Oe.fontSize,a,Nu(Oe)),sn={fromRun:Ce,fromChar:vt,toRun:Ce,toChar:Dt,width:at.width,maxWidth:dn,segments:[{runIndex:Ce,fromChar:vt,toChar:Dt,width:at.width}],...bn};C(sn),s.push(sn)}Ze=Dt}continue}if(!$){$={fromRun:Ce,fromChar:We,toRun:Ce,toChar:ct,width:nt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(s.length===0?A:E),segments:[{runIndex:Ce,fromChar:We,toChar:ct,width:nt}],spaceCount:0};const Bt=Oe.letterSpacing??0;bt&&$.width+Ft<=$.maxWidth-i?($.toChar=Zt,$.width=Ir($.width+Ft+Bt),he=Zt,$.spaceCount+=1,(ke=$.segments)!=null&&ke[0]&&($.segments[0].toChar=Zt,$.segments[0].width+=Ft)):he=Zt;continue}const Ne=(we=t.attrs)==null?void 0:we.isTocEntry,le=he===0&&q===0&&Ye===0,fe=me($.width,le,Oe),ve=((Ae=t.attrs)==null?void 0:Ae.alignment)==="justify",He=$.width+fe+tn+(bt?Oe.letterSpacing??0:0),Xe=$.maxWidth-i;let it=!qe&&$.width+fe+nt>Xe&&$.width>0&&!Ne,Lt=null;if(it&&ve&&!(Ee&&Ye===ze&&Ce===z.length-1)){const qt=($.spaceCount??0)+(bt?1:0);if(qt>0){const et=He-Xe;if(et>0){const Ze=Ft||ha(" ",Fe,n,Oe,ct)||Math.max(1,fe),Ue=et/qt,at=Ze*.25;Ue<=at&&(it=!1,Lt=Xe)}}}if(it){de($);const Bt=sa($.maxFontSize,a,$.maxFontInfo),Jt={...$,...Bt};C(Jt),s.push(Jt),ce=0,se=null,$={fromRun:Ce,fromChar:We,toRun:Ce,toChar:ct,width:nt,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(E),segments:[{runIndex:Ce,fromChar:We,toChar:ct,width:nt}],spaceCount:0},bt&&$.width+Ft<=$.maxWidth-i?($.toChar=Zt,$.width=Ir($.width+Ft+(Oe.letterSpacing??0)),he=Zt,$.spaceCount+=1,(Re=$.segments)!=null&&Re[0]&&($.segments[0].toChar=Zt,$.segments[0].width+=Ft)):he=Zt}else{if($.toRun=Ce,bt&&$.width+fe+nt+Ft>$.maxWidth-i){$.toChar=ct,$.width=Ir($.width+fe+nt),$.maxFontInfo=HE($.maxFontSize,$.maxFontInfo,Oe),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize);let qt;qe&&re?(qt=re.currentX,re.currentX=Ir(re.currentX+nt)):Ye===0&&Ie!==void 0&&(qt=Ie),Z5($.segments,Ce,We,ct,nt,qt),de($);const et=sa($.maxFontSize,a,$.maxFontInfo),Ue={...$,...et};C(Ue),s.push(Ue),ce=0,se=null,$=null,he=ct+1;continue}const Bt=bt?Zt:ct;$.toChar=Bt;let Wt;qe&&re?(Wt=re.currentX,re.currentX=Ir(re.currentX+tn)):Ye===0&&Ie!==void 0&&(Wt=Ie);const Jt=Lt??$.width+fe+tn+(bt?Oe.letterSpacing??0:0);Lt!=null&&($.naturalWidth=Ir(He)),$.width=Ir(Jt),$.maxFontInfo=HE($.maxFontSize,$.maxFontInfo,Oe),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize),Z5($.segments,Ce,We,Bt,tn,Wt),bt&&($.spaceCount+=1)}he=bt?Zt:ct}if(J&&$){const Ye=J;Ye.val==="end"&&($.width=Ir(Ye.target))}if(J=null,re&&Ce+1>=re.measure.endRunIndex&&($&&re.val==="end"&&($.width=Ir(re.target)),re=null),!Ee){se=null,$||($={fromRun:Ce,fromChar:he,toRun:Ce,toChar:he,width:0,maxFontSize:Oe.fontSize,maxFontInfo:Nu(Oe),maxWidth:U(s.length===0?A:E),segments:[],spaceCount:0});const Ye=$.width,ft=s.length===0?l+m:l,We=$.width+ft,{target:nt,nextIndex:bt,stop:ct}=Bse(We,N,ce);ce=bt;const Ft=$.maxWidth+ft,tn=Math.min(nt,Ft),Zt=Math.max(0,tn-We);if($.width=Ir($.width+Zt),$.maxFontInfo=HE($.maxFontSize,$.maxFontInfo,Oe),$.maxFontSize=Math.max($.maxFontSize,Oe.fontSize),$.toRun=Ce,$.toChar=he,he+=1,ct?(X(ct),se={target:tn-ft,val:ct.val}):se=null,ct&&ct.leader&&ct.leader!=="none"&&ct.leader!=="middleDot"){const ri=ct.leader,Ne=tn-ft,le=Math.min(Ye,Ne),fe=Math.max(Ye,Ne);$.leaders||($.leaders=[]),$.leaders.push({from:le,to:fe,style:ri})}}}Q=Oe.letterSpacing??0}if(!$&&s.length===0){const Ce=(((Pe=t.runs[0])==null?void 0:Pe.kind)==="text"?t.runs[0].fontSize:void 0)??12,Oe=sa(Ce,a),Fe={fromRun:0,fromChar:0,toRun:0,toChar:0,width:0,segments:[],...Oe};C(Fe),s.push(Fe)}if($){const Ce=sa($.maxFontSize,a,$.maxFontInfo),Fe={...$,...Ce};C(Fe),s.push(Fe)}const Y=s.reduce((Ce,Oe)=>Ce+Oe.lineHeight,0);let ee;if(r!=null&&r.marker){const Ce={fontFamily:Hb(r.marker.run.fontFamily)??r.marker.run.fontFamily,fontSize:r.marker.run.fontSize,bold:r.marker.run.bold,italic:r.marker.run.italic},{font:Oe}=wp(Ce),Fe=r.marker.markerText??"",$e=Fe?UI(Fe,Oe,n):0,he=typeof r.marker.gutterWidthPx=="number"&&isFinite(r.marker.gutterWidthPx)&&r.marker.gutterWidthPx>=0?r.marker.gutterWidthPx:Ou;ee={markerWidth:Math.max(r.marker.markerBoxWidthPx??0,$e+Ou),markerTextWidth:$e,indentLeft:r.indentLeftPx??0,gutterWidth:he}}return{kind:"paragraph",lines:s,totalHeight:Y,...ee?{marker:ee}:{},...O?{dropCap:O}:{}}}function Wwt(t){const e=t.width??t.value;if(typeof e=="number"&&Number.isFinite(e)&&e>0)return e}function qwt(t,e){const n=t==null?void 0:t.tableWidth;if(!n||typeof n!="object")return;const r=n,i=Wwt(r);if(i!==void 0){if(r.type==="pct")return Math.round(e*(i/j1e));if(r.type==="px"||r.type==="pixel")return i}}async function Gwt(t,e){var b,E,A,x,T;const n=typeof e=="number"?e:e.maxWidth,r=qwt(t.attrs,n);let i;const s=(R,k)=>{const _=R.reduce((C,D)=>C+D,0);if(_<=k||R.length===0)return R;const N=k/_,L=R.map(C=>Math.max(1,Math.round(C*N))),M=L.reduce((C,D)=>C+D,0);return M!==k&&(D=>{let O=0;const $=D>0?1:-1;for(D=Math.abs(D);D>0&&L.length>0;){const U=O%L.length;if($>0?(L[U]+=1,D-=1):L[U]>1&&(L[U]-=1,D-=1),O+=1,O>L.length*2&&D>0)break}})(k-M),L},o=Math.max(1,Math.max(...t.rows.map(R=>R.cells.length))),a=r!=null?Math.min(r,n):n;if(t.columnWidths&&t.columnWidths.length>0){i=[...t.columnWidths];const R=r!=null,k=((b=t.attrs)==null?void 0:b.tableLayout)==="fixed";if(R||k){const _=i.reduce((N,L)=>N+L,0);if(_!==a&&a>0){const N=a/_;i=i.map(M=>Math.max(1,Math.round(M*N)));const L=i.reduce((M,C)=>M+C,0);if(L!==a&&i.length>0){const M=a-L;i[i.length-1]=Math.max(1,i[i.length-1]+M)}}}else{if(i.length<o){const N=i.reduce((D,O)=>D+O,0),L=Math.max(0,a-N),M=o-i.length,C=Math.max(1,Math.floor(L/M));i.push(...Array.from({length:M},()=>C))}else i.length>o&&(i=i.slice(0,o));i.reduce((N,L)=>N+L,0)>a&&(i=s(i,a))}}else{const R=Math.max(1,Math.floor(a/o));i=Array.from({length:o},()=>R)}const l=i.length,c=(R,k)=>{let _=0;for(let N=0;N<k&&R+N<i.length;N++)_+=i[R+N];return Math.max(1,_)},u=new Array(l).fill(0),d=[],f=new Array(t.rows.length).fill(0),h=[];for(let R=0;R<t.rows.length;R++){const k=t.rows[R],_=[];let N=0;for(const L of k.cells){const M=L.colSpan??1,C=L.rowSpan??1;for(;N<l&&u[N]>0;)u[N]--,N++;if(N>=l)break;const D=c(N,M);if(C>1)for(let X=0;X<M&&N+X<l;X++)u[N+X]=C-1;const O=((E=L.attrs)==null?void 0:E.padding)??{top:2,left:4,right:4,bottom:2},$=O.top??2,U=O.bottom??2,W=O.left??4,ce=O.right??4,se=Math.max(1,D-W-ce),Q=[];let J=0;const K=L.blocks??(L.paragraph?[L.paragraph]:[]);for(let X=0;X<K.length;X++){const me=K[X],G=await WI(me,{maxWidth:se,maxHeight:1/0});Q.push(G);const B="totalHeight"in G?G.totalHeight:"height"in G?G.height:0;if(J+=B,me.kind==="paragraph"){const z=(x=(A=me.attrs)==null?void 0:A.spacing)==null?void 0:x.after;typeof z=="number"&&z>0&&(J+=z)}}const re=J+$+U;_.push({blocks:Q,paragraph:((T=Q[0])==null?void 0:T.kind)==="paragraph"?Q[0]:void 0,width:D,height:re,gridColumnStart:N,colSpan:M,rowSpan:C}),C===1?f[R]=Math.max(f[R],re):h.push({startRow:R,rowSpan:C,requiredHeight:re}),N+=M}for(let L=N;L<l;L++)u[L]>0&&u[L]--;d.push({cells:_,height:0})}const m=[...f];for(const R of h){const{startRow:k,rowSpan:_,requiredHeight:N}=R;if(_<=0)continue;let L=0;for(let M=0;M<_&&k+M<m.length;M++)L+=m[k+M];if(L<N){const M=Math.min(_,m.length-k),C=M>0?(N-L)/M:0;for(let D=0;D<M;D++)m[k+D]+=C}}t.rows.forEach((R,k)=>{var N;const _=(N=R.attrs)==null?void 0:N.rowHeight;(_==null?void 0:_.value)!=null&&Number.isFinite(_.value)&&((_.rule??"atLeast")==="exact"?m[k]=_.value:m[k]=Math.max(m[k],_.value))});for(let R=0;R<d.length;R++)d[R].height=Math.max(0,m[R]);const y=m.reduce((R,k)=>R+k,0),w=i.reduce((R,k)=>R+k,0);return{kind:"table",rows:d,columnWidths:i,totalWidth:w,totalHeight:y}}async function Kwt(t,e){var b,E,A,x,T,R,k,_,N;const n=Ywt(t,e.maxWidth),r=(b=t.anchor)==null?void 0:b.behindDoc,i=((E=t.wrap)==null?void 0:E.type)==="None"&&((A=t.wrap)==null?void 0:A.behindDoc),s=((x=t.anchor)==null?void 0:x.isAnchored)&&(((T=t.anchor)==null?void 0:T.hRelativeFrom)==="page"||((R=t.anchor)==null?void 0:R.hRelativeFrom)==="margin"),l=r||i||s||e.maxWidth<=0?n.width:e.maxWidth,d=((k=t.anchor)==null?void 0:k.isAnchored)&&(typeof((_=t.anchor)==null?void 0:_.offsetV)=="number"&&t.anchor.offsetV<0||typeof((N=t.margin)==null?void 0:N.top)=="number"&&t.margin.top<0)||t.objectFit==="cover"||!e.maxHeight||e.maxHeight<=0?1/0:e.maxHeight,f=l/n.width,h=d/n.height,m=Math.min(1,f,h),y=Number.isFinite(m)?n.width*m:n.width,w=Number.isFinite(m)?n.height*m:n.height;return{kind:"image",width:y,height:w}}async function Xwt(t,e){var x,T,R;if(t.drawingKind==="image"){const k=Zwt(t.width,t.height,e.maxWidth),_=e.maxWidth>0?e.maxWidth:k.width,N=e.maxHeight&&e.maxHeight>0?e.maxHeight:1/0,L=_/k.width,M=N/k.height,C=Math.min(1,L,M),D=Number.isFinite(C)?k.width*C:k.width,O=Number.isFinite(C)?k.height*C:k.height;return{kind:"drawing",drawingKind:"image",width:D,height:O,scale:Number.isFinite(C)?C:1,naturalWidth:k.width,naturalHeight:k.height,geometry:{width:k.width,height:k.height,rotation:0,flipH:!1,flipV:!1}}}const n=Jwt(t.geometry),r=t.attrs,i=typeof(r==null?void 0:r.hrIndentLeft)=="number"?r.hrIndentLeft:0,s=typeof(r==null?void 0:r.hrIndentRight)=="number"?r.hrIndentRight:0,a=(r==null?void 0:r.isFullWidth)===!0&&e.maxWidth>0?Math.max(1,e.maxWidth-i-s):void 0;a!=null&&(n.width=a);const l=xwt(n),c=Math.max(1,l.width),u=Math.max(1,l.height),d=a??(e.maxWidth>0?e.maxWidth:c),h=((x=t.anchor)==null?void 0:x.isAnchored)&&(typeof((T=t.anchor)==null?void 0:T.offsetV)=="number"&&t.anchor.offsetV<0||typeof((R=t.margin)==null?void 0:R.top)=="number"&&t.margin.top<0)||!e.maxHeight||e.maxHeight<=0?1/0:e.maxHeight,m=d/c,y=h/u,w=Math.min(1,m,y),b=Number.isFinite(w)?w:1,E=c*b,A=u*b;return{kind:"drawing",drawingKind:t.drawingKind,width:E,height:A,scale:b,naturalWidth:c,naturalHeight:u,geometry:{...n},...t.drawingKind==="shapeGroup"&&t.groupTransform?{groupTransform:{...t.groupTransform}}:{}}}function Ywt(t,e){const n=e>0?e:1,r=typeof t.width=="number"&&t.width>0?t.width:n,i=typeof t.height=="number"&&t.height>0?t.height:n*.75;return{width:r,height:i}}function Zwt(t,e,n=1){const r=n>0?n:1,i=typeof t=="number"&&t>0?t:r,s=typeof e=="number"&&e>0?e:r*.75;return{width:i,height:s}}function Jwt(t){return t?{width:Math.max(1,t.width),height:Math.max(1,t.height),rotation:Ewt(t.rotation??0),flipH:!!t.flipH,flipV:!!t.flipV}:{width:1,height:1,rotation:0,flipH:!1,flipV:!1}}function Qwt(t){return typeof t=="number"?{maxWidth:t}:t}async function evt(t,e){var s;const n=dW(),r=[];let i=0;for(const o of t.items){const a=(s=o.paragraph.attrs)==null?void 0:s.wordLayout;let l,c,u;if(a!=null&&a.marker){const h=a.marker,m={text:h.markerText,fontFamily:Hb(h.run.fontFamily)??h.run.fontFamily,fontSize:h.run.fontSize,bold:h.run.bold,italic:h.run.italic,letterSpacing:h.run.letterSpacing},{font:y}=wp(m);l=h.markerText?UI(h.markerText,y,n):0,c=h.markerBoxWidthPx,u=a.indentLeftPx??0}else{const h=tvt(o.paragraph),{font:m}=wp(h),y=o.marker.text??"";l=y?UI(y,m,n):0,u=avt(o);const w=lvt(o);c=Math.max(dht,l+Ou,w)}const d=Math.max(1,e.maxWidth-u-c),f=await F2e(o.paragraph,d);i+=f.totalHeight,r.push({itemId:o.id,markerWidth:c,markerTextWidth:l,indentLeft:u,paragraph:f})}return{kind:"list",items:r,totalHeight:i}}const tvt=t=>t.runs.find(e=>e.kind==="text"&&!!(e.fontFamily&&e.fontSize))||{text:"",fontFamily:"Arial",fontSize:16},Pse=t=>{if(!t)return!1;const e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||t==="'"},nvt=(t,e,n)=>{if(!t)return t;const r=typeof n=="number"&&e!=null;let i="";for(let s=0;s<t.length;s+=1){const o=r?n+s>0?e[n+s-1]:"":s>0?t[s-1]:"",a=t[s];i+=Pse(a)&&!Pse(o)?a.toUpperCase():a}return i},fW=(t,e,n)=>{const r="textTransform"in e?e.textTransform:void 0;if(!t||!r||r==="none")return t;if(r==="uppercase")return t.toUpperCase();if(r==="lowercase")return t.toLowerCase();if(r==="capitalize"){const i="text"in e&&typeof e.text=="string"?e.text:t;return nvt(t,i,n)}return t},ha=(t,e,n,r,i)=>{const s=(r.kind==="text"||r.kind===void 0)&&r.letterSpacing||0,o=fW(t,r,i),a=Cwt(o,e,s,n);return Ir(a)},rvt=(t,e,n,r,i,s)=>{const o=[],a=typeof s=="number"?s:0;if(e<=0){for(let u=0;u<t.length;u++){const d=t[u],f=ha(d,n,r,i,a+u);o.push({text:d,width:f})}return o}let l="",c=0;for(let u=0;u<t.length;u++){const d=t[u],f=l+d,h=ha(f,n,r,i,a);h>e&&l.length>0?(o.push({text:l,width:c}),l=d,c=ha(d,n,r,i,a+u)):(l=f,c=h)}return l.length>0&&o.push({text:l,width:c}),o},Z5=(t,e,n,r,i,s)=>{if(!t)return;const o=t[t.length-1];if(o&&o.runIndex===e&&o.toChar===n&&s===void 0){o.toChar=r,o.width+=i;return}t.push({runIndex:e,fromChar:n,toChar:r,width:i,x:s})},B2e=(t,e)=>{if(!t||t.line==null||t.line<=0)return e;const n=t.line,r=t.lineRule==="auto";return(r||t.lineRule==null)&&n>0&&(r||n<=10)?n*e:t.lineRule==="exact"?n:(t.lineRule==="atLeast",Math.max(e,n))},Jv=t=>typeof t=="number"&&Number.isFinite(t)?Math.max(0,t):0,Fse=t=>typeof t=="number"&&Number.isFinite(t)?t:0,ivt=t=>t===","?",":jwt,svt=4,ovt=(t,e,n)=>{const{run:r,lines:i,mode:s}=e,{font:o}=wp({fontFamily:r.fontFamily,fontSize:r.fontSize,bold:r.bold,italic:r.italic});t.font=o;const a=fW(r.text,r),l=t.measureText(a),c=l.width,u=(l.actualBoundingBoxLeft||0)+(l.actualBoundingBoxRight||0),d=Math.max(c,u),f=Ir(d+svt),h=B2e(n,r.fontSize*M2e),m=Ir(h*i);return{width:f,height:m,lines:i,mode:s}},avt=t=>{var n,r;const e=Jv((r=(n=t.paragraph.attrs)==null?void 0:n.indent)==null?void 0:r.left);return e>0?e:fht+t.marker.level*hht},lvt=t=>{var n,r;const e=Jv((r=(n=t.paragraph.attrs)==null?void 0:n.indent)==null?void 0:r.hanging);return e>0?e:pht},cvt=(t,e,n)=>{const r={left:Y5(Jv(t==null?void 0:t.left)),right:Y5(Jv(t==null?void 0:t.right)),firstLine:Y5(Jv(t==null?void 0:t.firstLine)),hanging:Y5(Jv(t==null?void 0:t.hanging))};return Dwt({explicitStops:e??[],defaultTabInterval:n??_2e,paragraphIndent:r}).map(s=>({pos:I2e(s.pos),val:s.val,leader:s.leader}))},Bse=(t,e,n)=>{let r=n;for(;r<e.length&&e[r].pos<=t+Bwt;)r++;return r<e.length?{target:e[r].pos,nextIndex:r+1,stop:e[r]}:{target:t+Fwt,nextIndex:r}};async function uvt(t,e,n,r){if(r.headerLayoutsByRId.clear(),r.footerLayoutsByRId.clear(),!t)return;const{headerBlocksByRId:i,footerBlocksByRId:s,constraints:o}=t,a=uxe(e.pages,n),l=e.pages.length,c=u=>{const d=u-1,f=a[d];return{displayText:(f==null?void 0:f.displayText)??String(u),totalPages:l}};if(i){for(const[u,d]of i)if(!(!d||d.length===0))try{const f=await Xv({default:d},o,(h,m)=>WI(h,m),void 0,void 0,c);f.default&&r.headerLayoutsByRId.set(u,{kind:"header",type:"default",layout:f.default.layout,blocks:f.default.blocks,measures:f.default.measures})}catch(f){console.warn(`[PresentationEditor] Failed to layout header rId=${u}:`,f)}}if(s){for(const[u,d]of s)if(!(!d||d.length===0))try{const f=await Xv({default:d},o,(h,m)=>WI(h,m),void 0,void 0,c);f.default&&r.footerLayoutsByRId.set(u,{kind:"footer",type:"default",layout:f.default.layout,blocks:f.default.blocks,measures:f.default.measures})}catch(f){console.warn(`[PresentationEditor] Failed to layout footer rId=${u}:`,f)}}}const dvt="commentMark",fvt="trackInsert",hvt="trackDelete",pvt="trackFormat",eP=.65,Zs={w:612,h:792},vs={top:72,right:72,bottom:72,left:72},mvt=72,gvt=24,yvt=20,bvt=400,wvt=5,vvt=200,xvt=32,jse=10,Evt=100,Svt=300*1e3,Avt=typeof performance<"u"?performance:void 0;var $y,aa,Rt,Ln,Sn,Kr,_i,Gh,Qt,Gt,Kh,ho,ag,Xh,lg,cg,ug,Bc,X1,Xi,Yh,Y1,gl,Lu,$o,Z1,J1,Zh,sk,Jh,Qh,zy,rf,ok,to,jc,Q1,ex,dg,no,yl,fg,Hy,Vy,Uy,Wy,qy,hg,pg,mg,gg,yg,yn,bl,la,ca,ja,wl,ua,ep,ak,tp,lk,ck,uk,vl,Jl,tx,sf,xl,$a,ro,El,Gy,np,of,za,nx,bg,Ql,po,af,lf,rp,Ky,Du,Me,j2e,zB,$2e,Pv,z2e,H2e,SS,V2e,HB,VB,C6,U2e,UB,WB,W2e,q2e,qB,G2e,K2e,dk,_6,X2e,GB,Y2e,Z2e,J2e,N6,KB,Q2e,eEe,AS,fk,hk,pk,mk,gk,yk,bk,wk,XB,uo,tEe,nEe,rEe,fo,iEe,sEe,oEe,aEe,lEe,cEe,YB,ZB,JB,TS,QB,uEe,kS,ej,tj,dEe,CS,nj,rj,ij,fEe,hEe,sj,oj,aj,pEe,mEe,lj,cj,gEe,Fv,I6,_S,yEe,uj,dj,ay,ly,bEe,wEe,vEe,Qs,NS,fj,IS,xEe,EEe,SEe,AEe,R6,TEe,Pm,hj,M6,Bv,pj,mj,gj,kEe,Nh,L6,CEe,yj,_Ee;const pl=class pl extends cM{constructor(n){var h,m,y,w,b,E,A,x,T,R,k,_,N,L,M,C,D,O,$;super();st(this,Me);st(this,aa);st(this,Rt);st(this,Ln);st(this,Sn);st(this,Kr);st(this,_i);st(this,Gh);st(this,Qt);st(this,Gt,{blocks:[],measures:[],layout:null,bookmarks:new Map});st(this,Kh,null);st(this,ho,null);st(this,ag,null);st(this,Xh,null);st(this,lg,"healthy");st(this,cg,null);st(this,ug,null);st(this,Bc,null);st(this,X1,!1);st(this,Xi,!1);st(this,Yh,null);st(this,Y1,!1);st(this,gl,new Amt);st(this,Lu,!1);st(this,$o,new Rut);st(this,Z1,0);st(this,J1,new Vft);st(this,Zh,null);st(this,sk,null);st(this,Jh,null);st(this,Qh,null);st(this,zy,null);st(this,rf,[]);st(this,ok,[]);st(this,to,"editing");st(this,jc,null);st(this,Q1,"review");st(this,ex,!0);st(this,dg);st(this,no,null);st(this,yl,null);st(this,fg,null);st(this,Hy,null);st(this,Vy,null);st(this,Uy,null);st(this,Wy,new Map);st(this,qy,new Map);st(this,hg);st(this,pg);st(this,mg,[]);st(this,gg,new Map);st(this,yg,new Map);st(this,yn,{mode:"body"});st(this,bl,null);st(this,la,null);st(this,ca,null);st(this,ja,null);st(this,wl,null);st(this,ua,null);st(this,ep,null);st(this,ak,null);st(this,tp,null);st(this,lk,0);st(this,ck,0);st(this,uk,{x:0,y:0});st(this,vl,null);st(this,Jl,null);st(this,tx,null);st(this,sf,!1);st(this,xl,"char");st(this,$a,null);st(this,ro,null);st(this,El,!1);st(this,Gy,!1);st(this,np,null);st(this,of,"none");st(this,za,new Map);st(this,nx,new Map);st(this,bg,!1);st(this,Ql,null);st(this,po,null);st(this,af,null);st(this,lf,null);st(this,rp);st(this,Ky,0);st(this,Du,null);st(this,dk,n=>{var x,T,R,k,_,N,L,M,C,D,O,$,U,W,ce,se,Q,J,K,re,X,me,G,B,z,de,Y,ee;if(n.button!==0||n.ctrlKey&&navigator.platform.includes("Mac"))return;je(this,Qh,null);const r=n.target;if(((x=r==null?void 0:r.closest)==null?void 0:x.call(r,".superdoc-ruler-handle"))!=null)return;const i=(T=r==null?void 0:r.closest)==null?void 0:T.call(r,"a.superdoc-link");if(i){const ae=i.getAttribute("href")??"",ie=ae.startsWith("#")&&ae.length>1,H=i.closest(".superdoc-toc-entry")!==null;if(ie&&H){n.preventDefault(),n.stopPropagation(),this.goToAnchor(ae);return}n.preventDefault(),n.stopPropagation();const be=new CustomEvent("superdoc-link-click",{bubbles:!0,composed:!0,detail:{href:ae,target:i.getAttribute("target"),rel:i.getAttribute("rel"),tooltip:i.getAttribute("title"),element:i,clientX:n.clientX,clientY:n.clientY}});i.dispatchEvent(be);return}const s=((R=r==null?void 0:r.closest)==null?void 0:R.call(r,'[data-draggable="true"]'))!=null;if(je(this,Gy,s),!F(this,Gt).layout){s||n.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur();const ae=(k=F(this,Rt).view)==null?void 0:k.dom;if(!ae)return;const ie=pe(this,Me,_6).call(this),H=(N=(_=F(this,Rt))==null?void 0:_.state)==null?void 0:N.doc;if(H)try{const be=F(this,Rt).state.tr.setSelection(Vt.create(H,ie));(L=F(this,Rt).view)==null||L.dispatch(be)}catch(be){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to set selection to first text position:",be)}ae.focus(),(M=F(this,Rt).view)==null||M.focus(),pe(this,Me,fo).call(this);return}const o=pe(this,Me,Bv).call(this,n.clientX,n.clientY);if(!o)return;const{x:a,y:l}=o;if(je(this,sk,{clientX:n.clientX,clientY:n.clientY,x:a,y:l}),F(this,yn).mode!=="body"){const ae=(D=(C=F(this,la))==null?void 0:C.getActiveEditorHost)==null?void 0:D.call(C);if(ae&&(ae.contains(n.target)||ae===n.target))return;if(!pe(this,Me,kS).call(this,a,l))pe(this,Me,CS).call(this);else return}if(pe(this,Me,kS).call(this,a,l))return;const u=$E(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,{x:a,y:l},F(this,Sn),n.clientX,n.clientY,F(this,ho)??void 0),d=(O=F(this,Rt).state)==null?void 0:O.doc,f=u&&d?F(this,$o).mapPosFromLayoutToCurrentDetailed(u.pos,u.layoutEpoch,1):null;f&&!f.ok&&Lr("warn","pointerdown mapping failed",f);const h=u&&d&&(f!=null&&f.ok)?{...u,pos:Math.max(0,Math.min(f.pos,d.content.size)),layoutEpoch:f.toEpoch}:null;if(je(this,Jh,h?{source:"dom",pos:(u==null?void 0:u.pos)??null,layoutEpoch:(u==null?void 0:u.layoutEpoch)??null,mappedPos:h.pos}:{source:"none",pos:(u==null?void 0:u.pos)??null,layoutEpoch:(u==null?void 0:u.layoutEpoch)??null,mappedPos:null}),pe(this,Me,Pv).call(this),s||n.preventDefault(),!u){document.activeElement instanceof HTMLElement&&document.activeElement.blur();const ae=($=F(this,Rt).view)==null?void 0:$.dom;if(ae){const ie=pe(this,Me,_6).call(this),H=(W=(U=F(this,Rt))==null?void 0:U.state)==null?void 0:W.doc;if(H)try{const be=F(this,Rt).state.tr.setSelection(Vt.create(H,ie));(ce=F(this,Rt).view)==null||ce.dispatch(be)}catch(be){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to set selection to first text position:",be)}ae.focus(),(se=F(this,Rt).view)==null||se.focus(),pe(this,Me,fo).call(this)}return}if(!h||!d){je(this,Xi,!0),pe(this,Me,uo).call(this);return}const m=kT(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,u.pos),y=(J=(Q=n.target)==null?void 0:Q.closest)==null?void 0:J.call(Q,"img"),w=(K=y==null?void 0:y.dataset)!=null&&K.pmStart?Number(y.dataset.pmStart):null;if(!Number.isNaN(w)&&w!=null){const ae=F(this,Rt).state.doc,ie=(re=y==null?void 0:y.dataset)==null?void 0:re.layoutEpoch,H=ie!=null?Number(ie):NaN,be=Number.isFinite(u.layoutEpoch)?u.layoutEpoch:NaN,Te=Number.isFinite(H)&&Number.isFinite(be)?Math.max(H,be):Number.isFinite(H)?H:u.layoutEpoch,Z=F(this,$o).mapPosFromLayoutToCurrentDetailed(w,Te,1);if(!Z.ok){Lr("warn","inline image mapping failed",Z),je(this,Xi,!0),pe(this,Me,uo).call(this);return}const oe=Math.max(0,Math.min(Z.pos,ae.content.size));if(oe<0||oe>=ae.content.size){_e.env.NODE_ENV==="development"&&console.warn(`[PresentationEditor] Invalid position ${oe} for inline image (document size: ${ae.content.size})`);return}const te=`inline-${oe}`;F(this,vl)&&F(this,vl)!==te&&this.emit("imageDeselected",{blockId:F(this,vl)});try{const ye=F(this,Rt).state.tr.setSelection(ln.create(ae,oe));(X=F(this,Rt).view)==null||X.dispatch(ye);const ke=`.superdoc-inline-image[data-pm-start="${w}"]`,we=F(this,Sn).querySelector(ke);this.emit("imageSelected",{element:we??y,blockId:null,pmStart:oe}),je(this,vl,te)}catch(ye){_e.env.NODE_ENV==="development"&&console.warn(`[PresentationEditor] Failed to create NodeSelection for inline image at position ${w}:`,ye)}pe(this,Me,qB).call(this);return}if(m&&(m.fragment.kind==="image"||m.fragment.kind==="drawing")){const ae=F(this,Rt).state.doc;try{const ie=F(this,Rt).state.tr.setSelection(ln.create(ae,h.pos));if((me=F(this,Rt).view)==null||me.dispatch(ie),F(this,vl)&&F(this,vl)!==m.fragment.blockId&&this.emit("imageDeselected",{blockId:F(this,vl)}),m.fragment.kind==="image"){const H=F(this,Sn).querySelector(`.superdoc-image-fragment[data-pm-start="${m.fragment.pmStart}"]`);H&&(this.emit("imageSelected",{element:H,blockId:m.fragment.blockId,pmStart:m.fragment.pmStart}),je(this,vl,m.fragment.blockId))}}catch(ie){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to create NodeSelection for atomic fragment:",ie)}pe(this,Me,qB).call(this);return}if(F(this,vl)&&(this.emit("imageDeselected",{blockId:F(this,vl)}),je(this,vl,null)),n.shiftKey&&F(this,Rt).state.selection.$anchor){const ae=F(this,Rt).state.selection.anchor,ie=h.pos,{selAnchor:H,selHead:be}=pe(this,Me,AS).call(this,ae,ie,F(this,xl));try{const Z=F(this,Rt).state.tr.setSelection(Vt.create(F(this,Rt).state.doc,H,be));(G=F(this,Rt).view)==null||G.dispatch(Z),pe(this,Me,fo).call(this)}catch(Z){console.warn("[SELECTION] Failed to extend selection on shift+click:",{error:Z,anchor:ae,head:ie,selAnchor:H,selHead:be,mode:F(this,xl)})}document.activeElement instanceof HTMLElement&&document.activeElement.blur();const Te=(B=F(this,Rt).view)==null?void 0:B.dom;Te&&(Te.focus(),(z=F(this,Rt).view)==null||z.focus());return}const b=pe(this,Me,X2e).call(this,n);if(b===1){je(this,Jl,h.pos),je(this,tx,h.pageIndex),je(this,Qh,pe(this,Me,z2e).call(this,n.pointerId,a,l));const ae=pe(this,Me,KB).call(this,a,l);if(ae){const ie=pe(this,Me,Y2e).call(this,ae);ie!==null&&pe(this,Me,J2e).call(this,ae,ie)}else pe(this,Me,N6).call(this)}else je(this,Qh,null);je(this,$a,{clientX:n.clientX,clientY:n.clientY,x:a,y:l}),je(this,ro,h),je(this,El,!1),je(this,sf,!0),b>=3?je(this,xl,"para"):b===2?je(this,xl,"word"):je(this,xl,"char"),Lr("verbose",`Drag selection start ${JSON.stringify({pointer:{clientX:n.clientX,clientY:n.clientY,x:a,y:l},clickDepth:b,extensionMode:F(this,xl),anchor:F(this,Jl),anchorPageIndex:F(this,tx),rawHit:u?{pos:u.pos,pageIndex:u.pageIndex,blockId:u.blockId,lineIndex:u.lineIndex,layoutEpoch:u.layoutEpoch}:null,mapped:f?f.ok?{ok:!0,pos:f.pos,fromEpoch:f.fromEpoch,toEpoch:f.toEpoch}:{ok:!1,reason:f.reason,fromEpoch:f.fromEpoch,toEpoch:f.toEpoch}:null,hit:h?{pos:h.pos,pageIndex:h.pageIndex,layoutEpoch:h.layoutEpoch}:null})}`),typeof F(this,Sn).setPointerCapture=="function"&&F(this,Sn).setPointerCapture(n.pointerId);let E=!1;if(F(this,yn).mode==="body"){const ae=b>=2&&F(this,Jl)!==null?F(this,Jl):h.pos;b>=3?E=pe(this,Me,eEe).call(this,ae):b===2&&(E=pe(this,Me,Q2e).call(this,ae))}if(!E)try{const ae=F(this,Rt).state.doc;let ie=Vt.create(ae,h.pos);ie.$from.parent.inlineContent||(ie=_n.near(ae.resolve(h.pos),1));const H=F(this,Rt).state.tr.setSelection(ie);(de=F(this,Rt).view)==null||de.dispatch(H)}catch{}pe(this,Me,fo).call(this),document.activeElement instanceof HTMLElement&&document.activeElement.blur();const A=(Y=F(this,Rt).view)==null?void 0:Y.dom;A&&(A.focus(),(ee=F(this,Rt).view)==null||ee.focus())});st(this,fk,n=>{var s,o,a,l;if(!F(this,Gt).layout)return;const r=pe(this,Me,Bv).call(this,n.clientX,n.clientY);if(!r)return;if(F(this,sf)&&F(this,Jl)!==null&&n.buttons&1){je(this,Qh,null);const c=F(this,$a),u=F(this,ro);je(this,$a,{clientX:n.clientX,clientY:n.clientY,x:r.x,y:r.y});const d=$E(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,{x:r.x,y:r.y},F(this,Sn),n.clientX,n.clientY,F(this,ho)??void 0);if(!d){Lr("verbose",`Drag selection update (no hit) ${JSON.stringify({pointer:{clientX:n.clientX,clientY:n.clientY,x:r.x,y:r.y},prevPointer:c,anchor:F(this,Jl)})}`);return}const f=(s=F(this,Rt).state)==null?void 0:s.doc;if(!f)return;je(this,ro,d);const h=pe(this,Me,Fv).call(this,d.pageIndex)!=null;!h&&pe(this,Me,I6).call(this)&&(je(this,El,!0),Lr("warn","Geometry fallback",{reason:"page_not_mounted",pageIndex:d.pageIndex})),pe(this,Me,_S).call(this,{includeDragBuffer:!0,extraPages:[d.pageIndex]});const m=F(this,$o).mapPosFromLayoutToCurrentDetailed(d.pos,d.layoutEpoch,1);if(!m.ok){Lr("warn","drag mapping failed",m),Lr("verbose",`Drag selection update (map failed) ${JSON.stringify({pointer:{clientX:n.clientX,clientY:n.clientY,x:r.x,y:r.y},prevPointer:c,anchor:F(this,Jl),rawHit:{pos:d.pos,pageIndex:d.pageIndex,blockId:d.blockId,lineIndex:d.lineIndex,layoutEpoch:d.layoutEpoch},mapped:{ok:!1,reason:m.reason,fromEpoch:m.fromEpoch,toEpoch:m.toEpoch}})}`);return}const y={...d,pos:Math.max(0,Math.min(m.pos,f.content.size)),layoutEpoch:m.toEpoch};je(this,Jh,{source:h?"dom":"geometry",pos:d.pos,layoutEpoch:d.layoutEpoch,mappedPos:y.pos}),pe(this,Me,Pv).call(this);const w=F(this,Jl),b=y.pos,{selAnchor:E,selHead:A}=pe(this,Me,AS).call(this,w,b,F(this,xl));Lr("verbose",`Drag selection update ${JSON.stringify({pointer:{clientX:n.clientX,clientY:n.clientY,x:r.x,y:r.y},prevPointer:c,rawHit:{pos:d.pos,pageIndex:d.pageIndex,blockId:d.blockId,lineIndex:d.lineIndex,layoutEpoch:d.layoutEpoch},prevRawHit:u?{pos:u.pos,pageIndex:u.pageIndex,blockId:u.blockId,lineIndex:u.lineIndex,layoutEpoch:u.layoutEpoch}:null,mappedHead:{pos:m.pos,fromEpoch:m.fromEpoch,toEpoch:m.toEpoch},hit:{pos:y.pos,pageIndex:y.pageIndex,layoutEpoch:y.layoutEpoch},anchor:w,head:b,selAnchor:E,selHead:A,direction:b>=w?"down":"up",selectionDirection:A>=E?"down":"up",extensionMode:F(this,xl),hitSource:h?"dom":"geometry",pageMounted:h})}`);const x=pe(this,Me,KB).call(this,r.x,r.y);if(pe(this,Me,Z2e).call(this,x)&&F(this,np)){const R=x?pe(this,Me,GB).call(this,x):null;if(R!==null){F(this,of)!=="active"&&je(this,of,"active");try{const k=F(this,Rt).state.doc,_=F(this,np).cellPos,N=Math.max(0,Math.min(_,k.content.size)),L=Math.max(0,Math.min(R,k.content.size)),M=ei.create(k,N,L),C=F(this,Rt).state.tr.setSelection(M);(o=F(this,Rt).view)==null||o.dispatch(C),pe(this,Me,fo).call(this)}catch(k){console.warn("[CELL-SELECTION] Failed to create CellSelection, falling back to TextSelection:",k);const _=F(this,Jl),N=y.pos,{selAnchor:L,selHead:M}=pe(this,Me,AS).call(this,_,N,F(this,xl));try{const C=F(this,Rt).state.tr.setSelection(Vt.create(F(this,Rt).state.doc,L,M));(a=F(this,Rt).view)==null||a.dispatch(C),pe(this,Me,fo).call(this)}catch{}}return}}try{const R=F(this,Rt).state.tr.setSelection(Vt.create(F(this,Rt).state.doc,E,A));(l=F(this,Rt).view)==null||l.dispatch(R),pe(this,Me,fo).call(this)}catch(R){console.warn("[SELECTION] Failed to extend selection during drag:",{error:R,anchor:w,head:b,selAnchor:E,selHead:A,mode:F(this,xl)})}return}if(F(this,yn).mode!=="body"){pe(this,Me,Qs).call(this);return}if(F(this,to)==="viewing"){pe(this,Me,Qs).call(this);return}const i=pe(this,Me,kS).call(this,r.x,r.y);if(!i){pe(this,Me,Qs).call(this);return}F(this,tp)&&F(this,tp).kind===i.kind&&F(this,tp).pageIndex===i.pageIndex&&F(this,tp).sectionType===i.sectionType||(je(this,tp,i),pe(this,Me,vEe).call(this,i))});st(this,hk,()=>{pe(this,Me,Qs).call(this)});st(this,pk,n=>{var a,l;if(_xe(n))return;if(F(this,Gy)){je(this,Gy,!1);return}const r=n.target,i=pe(this,Me,nj).call(this);if(!i)return;const s=i,o=typeof s.contains=="function"?s.contains:null;if(!(r&&(s===r||o&&o.call(s,r)))){try{i instanceof HTMLElement&&typeof i.focus=="function"?(a=i.focus)==null||a.call(i,{preventScroll:!0}):typeof i.focus=="function"&&i.focus()}catch{}try{(l=this.getActiveEditor().view)==null||l.focus()}catch{}}});st(this,mk,n=>{var h,m,y,w;if(je(this,Gy,!1),!F(this,sf))return;typeof F(this,Sn).hasPointerCapture=="function"&&typeof F(this,Sn).releasePointerCapture=="function"&&F(this,Sn).hasPointerCapture(n.pointerId)&&F(this,Sn).releasePointerCapture(n.pointerId);const r=F(this,Qh);je(this,Qh,null);const i=F(this,Jl),s=F(this,xl),o=F(this,El),a=F(this,$a);if(je(this,sf,!1),F(this,of)!=="none"&&je(this,of,"none"),!r||r.pointerId!==n.pointerId){if(pe(this,Me,_S).call(this,{includeDragBuffer:!1}),o&&i!=null){const b=a??{clientX:n.clientX,clientY:n.clientY};pe(this,Me,yEe).call(this,b,i,s)}pe(this,Me,aj).call(this,{immediate:!0}),je(this,$a,null),je(this,ro,null),je(this,El,!1);return}if(F(this,yn).mode!=="body"||F(this,to)==="viewing"){je(this,$a,null),je(this,ro,null),je(this,El,!1);return}const l=(h=F(this,Rt).state)==null?void 0:h.doc;if(!l){je(this,$a,null),je(this,ro,null),je(this,El,!1);return}if(r.kind==="aboveFirstLine"){const b=pe(this,Me,_6).call(this);try{const E=F(this,Rt).state.tr.setSelection(Vt.create(l,b));(m=F(this,Rt).view)==null||m.dispatch(E),pe(this,Me,fo).call(this)}catch{}je(this,Jh,{source:"margin",pos:null,layoutEpoch:null,mappedPos:b}),pe(this,Me,Pv).call(this),je(this,$a,null),je(this,ro,null),je(this,El,!1);return}if(r.kind==="right"){const b=F(this,$o).mapPosFromLayoutToCurrentDetailed(r.pmEnd,r.layoutEpoch,1);if(!b.ok){Lr("warn","right margin mapping failed",b),je(this,Xi,!0),pe(this,Me,uo).call(this),je(this,$a,null),je(this,ro,null),je(this,El,!1);return}const E=Math.max(0,Math.min(b.pos,l.content.size));try{const A=F(this,Rt).state.tr.setSelection(Vt.create(l,E));(y=F(this,Rt).view)==null||y.dispatch(A),pe(this,Me,fo).call(this)}catch{}je(this,Jh,{source:"margin",pos:r.pmEnd,layoutEpoch:r.layoutEpoch,mappedPos:E}),pe(this,Me,Pv).call(this),je(this,$a,null),je(this,ro,null),je(this,El,!1);return}const c=F(this,$o).mapPosFromLayoutToCurrentDetailed(r.pmStart,r.layoutEpoch,1),u=F(this,$o).mapPosFromLayoutToCurrentDetailed(r.pmEnd,r.layoutEpoch,-1);if(!c.ok||!u.ok){c.ok||Lr("warn","left margin mapping failed (start)",c),u.ok||Lr("warn","left margin mapping failed (end)",u),je(this,Xi,!0),pe(this,Me,uo).call(this),je(this,$a,null),je(this,ro,null),je(this,El,!1);return}const d=Math.max(0,Math.min(Math.min(c.pos,u.pos),l.content.size)),f=Math.max(0,Math.min(Math.max(c.pos,u.pos),l.content.size));try{const b=F(this,Rt).state.tr.setSelection(Vt.create(l,d,f));(w=F(this,Rt).view)==null||w.dispatch(b),pe(this,Me,fo).call(this)}catch{}je(this,Jh,{source:"margin",pos:r.pmStart,layoutEpoch:r.layoutEpoch,mappedPos:d}),pe(this,Me,Pv).call(this),je(this,$a,null),je(this,ro,null),je(this,El,!1)});st(this,gk,egt({getActiveEditor:()=>this.getActiveEditor(),hitTest:(n,r)=>this.hitTest(n,r),scheduleSelectionUpdate:()=>pe(this,Me,fo).call(this)}));st(this,yk,tgt({getActiveEditor:()=>this.getActiveEditor(),hitTest:(n,r)=>this.hitTest(n,r),scheduleSelectionUpdate:()=>pe(this,Me,fo).call(this)}));st(this,bk,n=>{if(n.button!==0||!F(this,Gt).layout)return;const r=F(this,Sn).getBoundingClientRect(),i=F(this,Qt).zoom??1,s=F(this,Ln).scrollLeft??0,o=F(this,Ln).scrollTop??0,a=(n.clientX-r.left+s)/i,l=(n.clientY-r.top+o)/i,c=pe(this,Me,kS).call(this,a,l);c?(n.preventDefault(),n.stopPropagation(),!pe(this,Me,cj).call(this,c)&&F(this,no)&&(pe(this,Me,gEe).call(this,c),F(this,no).refresh()),pe(this,Me,tj).call(this,c)):F(this,yn).mode!=="body"&&pe(this,Me,CS).call(this)});st(this,wk,n=>{if(n.key==="Escape"&&F(this,yn).mode!=="body"){n.preventDefault(),pe(this,Me,CS).call(this);return}n.ctrlKey&&n.altKey&&!n.shiftKey&&(n.code==="KeyH"?(n.preventDefault(),pe(this,Me,XB).call(this,"header")):n.code==="KeyF"&&(n.preventDefault(),pe(this,Me,XB).call(this,"footer")))});if(!(n!=null&&n.element))throw new Error("PresentationEditor requires an `element` to mount into.");je(this,aa,n),je(this,to,n.documentMode??"editing"),je(this,Ln,n.element),F(this,Ln).innerHTML="",F(this,Ln).classList.add("presentation-editor"),pe(this,Me,zB).call(this),F(this,Ln).hasAttribute("tabindex")||(F(this,Ln).tabIndex=0),(((h=F(this,Ln).ownerDocument)==null?void 0:h.defaultView)??window).getComputedStyle(F(this,Ln)).position==="static"&&(F(this,Ln).style.position="relative");const i=F(this,Ln).ownerDocument??document,s=(m=n.layoutEngineOptions)==null?void 0:m.presence,o=s?{...s,maxVisible:s.maxVisible!==void 0?Math.max(1,Math.min(s.maxVisible,100)):s.maxVisible,highlightOpacity:s.highlightOpacity!==void 0?Math.max(0,Math.min(s.highlightOpacity,1)):s.highlightOpacity}:void 0;je(this,Qt,{pageSize:((y=n.layoutEngineOptions)==null?void 0:y.pageSize)??Zs,margins:((w=n.layoutEngineOptions)==null?void 0:w.margins)??vs,virtualization:(b=n.layoutEngineOptions)==null?void 0:b.virtualization,zoom:((E=n.layoutEngineOptions)==null?void 0:E.zoom)??1,pageStyles:(A=n.layoutEngineOptions)==null?void 0:A.pageStyles,debugLabel:(x=n.layoutEngineOptions)==null?void 0:x.debugLabel,layoutMode:((T=n.layoutEngineOptions)==null?void 0:T.layoutMode)??"vertical",trackedChanges:(R=n.layoutEngineOptions)==null?void 0:R.trackedChanges,emitCommentPositionsInViewing:(k=n.layoutEngineOptions)==null?void 0:k.emitCommentPositionsInViewing,enableCommentsInViewing:(_=n.layoutEngineOptions)==null?void 0:_.enableCommentsInViewing,presence:o}),je(this,dg,(N=n.layoutEngineOptions)==null?void 0:N.trackedChanges),je(this,Sn,i.createElement("div")),F(this,Sn).className="presentation-editor__viewport",F(this,Sn).setAttribute("aria-hidden","true"),F(this,Sn).style.position="relative",F(this,Sn).style.width="100%";const a=((L=F(this,Qt).pageSize)==null?void 0:L.h)??Zs.h;F(this,Sn).style.minHeight=`${a}px`,F(this,Ln).appendChild(F(this,Sn)),je(this,Kr,i.createElement("div")),F(this,Kr).className="presentation-editor__pages",F(this,Kr).style.transformOrigin="top left",F(this,Sn).appendChild(F(this,Kr));const l=((C=(M=F(this,Ln))==null?void 0:M.ownerDocument)==null?void 0:C.defaultView)??window;je(this,Zh,new Uft({windowRoot:l,getPainterHost:()=>F(this,Kr),onRebuild:()=>{pe(this,Me,SS).call(this),F(this,gl).requestRender({immediate:!0})}})),F(this,Zh).setup(),F(this,gl).on("render",()=>pe(this,Me,iEe).call(this)),je(this,_i,i.createElement("div")),F(this,_i).className="presentation-editor__selection-overlay",F(this,_i).id=`presentation-overlay-${n.documentId||"default"}`,F(this,_i).style.position="absolute",F(this,_i).style.inset="0",F(this,_i).style.pointerEvents="none",F(this,_i).style.zIndex="10",je(this,Ql,i.createElement("div")),F(this,Ql).className="presentation-editor__selection-layer--remote",F(this,Ql).style.position="absolute",F(this,Ql).style.inset="0",F(this,Ql).style.pointerEvents="none",je(this,po,i.createElement("div")),F(this,po).className="presentation-editor__selection-layer--local",F(this,po).style.position="absolute",F(this,po).style.inset="0",F(this,po).style.pointerEvents="none",F(this,_i).appendChild(F(this,Ql)),F(this,_i).appendChild(F(this,po)),F(this,Sn).appendChild(F(this,_i)),je(this,ca,i.createElement("div")),F(this,ca).className="presentation-editor__hover-overlay",Object.assign(F(this,ca).style,{position:"absolute",border:"1px dashed rgba(51, 102, 255, 0.8)",borderRadius:"2px",pointerEvents:"none",display:"none",zIndex:"11"}),F(this,_i).appendChild(F(this,ca)),je(this,ja,i.createElement("div")),F(this,ja).className="presentation-editor__hover-tooltip",Object.assign(F(this,ja).style,{position:"absolute",background:"rgba(18, 22, 33, 0.85)",color:"#fff",padding:"2px 6px",fontSize:"12px",borderRadius:"2px",pointerEvents:"none",display:"none",zIndex:"12",whiteSpace:"nowrap"}),F(this,_i).appendChild(F(this,ja)),je(this,wl,i.createElement("div")),F(this,wl).className="presentation-editor__mode-banner",Object.assign(F(this,wl).style,{position:"absolute",top:"0",left:"50%",transform:"translate(-50%, -100%)",background:"#1b3fbf",color:"#fff",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",display:"none",zIndex:"15"}),F(this,Ln).appendChild(F(this,wl)),je(this,ua,i.createElement("div")),F(this,ua).className="presentation-editor__aria-live",F(this,ua).setAttribute("role","status"),F(this,ua).setAttribute("aria-live","polite"),F(this,ua).setAttribute("aria-atomic","true"),Object.assign(F(this,ua).style,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",clip:"rect(1px, 1px, 1px, 1px)"}),F(this,Ln).appendChild(F(this,ua)),je(this,Gh,tht(i,((D=F(this,Qt).pageSize)==null?void 0:D.w)??Zs.w)),i.body?i.body.appendChild(F(this,Gh)):F(this,Ln).appendChild(F(this,Gh));const{layoutEngineOptions:c,element:u,...d}=n,f={...d.editorProps??{},editable:()=>F(this,to)!=="viewing"};try{je(this,Rt,new zf({...d,element:F(this,Gh),editorProps:f,documentMode:F(this,to)})),pe(this,Me,j2e).call(this),F(this,Rt).presentationEditor=this,F(this,Rt)._presentationEditor=this,pe(this,Me,oj).call(this),typeof F(this,aa).disableContextMenu=="boolean"&&this.setContextMenuDisabled(F(this,aa).disableContextMenu),pe(this,Me,K2e).call(this),pe(this,Me,R6).call(this),pe(this,Me,V2e).call(this),pe(this,Me,W2e).call(this),pe(this,Me,q2e).call(this),pe(this,Me,G2e).call(this),pe(this,Me,IS).call(this),n.documentId&&F(pl,$y).set(n.documentId,this),je(this,Xi,!0),pe(this,Me,uo).call(this),(O=F(this,aa).collaborationProvider)!=null&&O.awareness&&vi.getState(F(this,Rt).state)&&(($=F(this,Qt).presence)==null?void 0:$.enabled)!==!1&&pe(this,Me,HB).call(this)}catch(U){throw this.destroy(),U}}static getInstance(n){return F(pl,$y).get(n)}static setGlobalZoom(n){F(pl,$y).forEach(r=>{r.setZoom(n)})}get editor(){return F(this,Rt)}get element(){return F(this,Ln)}get commands(){return this.getActiveEditor().commands}get state(){return this.getActiveEditor().state}get isEditable(){return this.getActiveEditor().isEditable}get options(){return this.getActiveEditor().options}dispatch(n){var i;(i=this.getActiveEditor().view)==null||i.dispatch(n)}focus(){var r;(r=this.getActiveEditor().view)==null||r.focus()}getActiveEditor(){return F(this,yn).mode==="body"||!F(this,bl)?F(this,Rt):F(this,bl)}undo(){var r;const n=this.getActiveEditor();return(r=n==null?void 0:n.commands)!=null&&r.undo?!!n.commands.undo():!1}redo(){var r;const n=this.getActiveEditor();return(r=n==null?void 0:n.commands)!=null&&r.redo?!!n.commands.redo():!1}dispatchInActiveEditor(n){const r=this.getActiveEditor();n(r)}get visibleHost(){return F(this,Ln)}get overlayElement(){return F(this,_i)??null}get zoom(){return F(this,Qt).zoom??1}setDocumentMode(n){if(typeof n!="string")throw new TypeError(`[PresentationEditor] setDocumentMode expects a string, received ${typeof n}`);const r=["editing","viewing","suggesting"];if(!r.includes(n))throw new TypeError(`[PresentationEditor] Invalid mode "${n}". Must be one of: ${r.join(", ")}`);const i=F(this,to)!==n;je(this,to,n),F(this,Rt).setDocumentMode(n),pe(this,Me,zB).call(this),pe(this,Me,oj).call(this);const s=pe(this,Me,IS).call(this);(i||s)&&(je(this,Xi,!0),pe(this,Me,uo).call(this))}setTrackedChangesOverrides(n){if(n!==void 0&&(typeof n!="object"||n===null||Array.isArray(n)))throw new TypeError("[PresentationEditor] setTrackedChangesOverrides expects an object or undefined");if(n!==void 0){const i=["review","original","final","off"];if(n.mode!==void 0&&!i.includes(n.mode))throw new TypeError(`[PresentationEditor] Invalid tracked changes mode "${n.mode}". Must be one of: ${i.join(", ")}`);if(n.enabled!==void 0&&typeof n.enabled!="boolean")throw new TypeError('[PresentationEditor] tracked changes "enabled" must be a boolean')}je(this,dg,n),F(this,Qt).trackedChanges=n,pe(this,Me,IS).call(this)&&(je(this,Xi,!0),pe(this,Me,uo).call(this))}setViewingCommentOptions(n={}){if(n!==void 0&&(typeof n!="object"||n===null||Array.isArray(n)))throw new TypeError("[PresentationEditor] setViewingCommentOptions expects an object or undefined");let r=!1;typeof n.emitCommentPositionsInViewing=="boolean"&&F(this,Qt).emitCommentPositionsInViewing!==n.emitCommentPositionsInViewing&&(F(this,Qt).emitCommentPositionsInViewing=n.emitCommentPositionsInViewing,r=!0),typeof n.enableCommentsInViewing=="boolean"&&F(this,Qt).enableCommentsInViewing!==n.enableCommentsInViewing&&(F(this,Qt).enableCommentsInViewing=n.enableCommentsInViewing,r=!0),r&&(je(this,Xi,!0),pe(this,Me,uo).call(this))}setContextMenuDisabled(n){F(this,Rt).setOptions({disableContextMenu:!!n})}onLayoutUpdated(n){return this.on("layoutUpdated",n),()=>this.off("layoutUpdated",n)}onLayoutError(n){return this.on("layoutError",n),()=>this.off("layoutError",n)}onTelemetry(n){return je(this,Bc,n),()=>{F(this,Bc)===n&&je(this,Bc,null)}}getPages(){var n;return((n=F(this,Gt).layout)==null?void 0:n.pages)??[]}getLayoutError(){return F(this,Xh)}isLayoutHealthy(){return F(this,lg)==="healthy"}getLayoutHealthState(){return F(this,lg)}getSelectionRects(n){var i;const r=(i=F(this,Rt).state)==null?void 0:i.selection;return!r||r.empty?[]:this.getRangeRects(r.from,r.to,n)}getRangeRects(n,r,i){var T;if(!F(this,_i))return[];if(!Number.isFinite(n)||!Number.isFinite(r))return[];const s=Math.min(n,r),o=Math.max(n,r),a=F(this,Qt).zoom??1,l=(i==null?void 0:i.getBoundingClientRect())??null,c=F(this,Ln).getBoundingClientRect(),u=F(this,Ln).scrollLeft??0,d=F(this,Ln).scrollTop??0;let f=!1;const m=(()=>{if(F(this,yn).mode!=="body")return pe(this,Me,fj).call(this,s,o);const R=pe(this,Me,hj).call(this,s,o);return R!=null?(f=!0,R):F(this,Gt).layout?dA(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,s,o,F(this,ho)??void 0)??[]:[]})();if(!m.length)return[];let y=null,w=null;const b={};if(!f){try{y=pe(this,Me,M6).call(this,s),w=pe(this,Me,M6).call(this,o)}catch(k){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] DOM caret computation failed in getRectsForRange:",k)}const R=pe(this,Me,pj).call(this,s,!1);y&&R&&y.pageIndex===R.pageIndex&&(b[y.pageIndex]={dx:y.x-R.x,dy:y.y-R.y})}const E=F(this,yn).mode==="body"?pe(this,Me,ly).call(this):pe(this,Me,bEe).call(this),A=((T=F(this,Gt).layout)==null?void 0:T.pageGap)??0;return m.map((R,k,_)=>{let N=R.x,L=R.y;if(!f){const se=b[R.pageIndex];N=se?R.x+se.dx:R.x,L=se?R.y+se.dy:R.y;const Q=k===0,J=k===_.length-1;if(Q&&y&&R.pageIndex===y.pageIndex&&(N=y.x),J&&w&&R.pageIndex===w.pageIndex){const K=w.x,re=Math.max(1,K-N);R={...R,width:re}}}const M=L-R.pageIndex*(E+A),C=pe(this,Me,Pm).call(this,R.pageIndex,N,M);if(!C)return null;const D=C.x*a-u+c.left,O=C.y*a-d+c.top,$=l?D-l.left:D,U=l?O-l.top:O,W=Math.max(1,R.width*a),ce=Math.max(1,R.height*a);return{pageIndex:R.pageIndex,left:$,top:U,right:$+W,bottom:U+ce,width:W,height:ce}}).filter(R=>!!R)}getSelectionBounds(n,r,i){var a;if(!F(this,Gt).layout)return null;const s=this.getRangeRects(n,r,i);if(!s.length)return null;const o=pe(this,Me,H2e).call(this,s);return o?{rects:s,bounds:o,pageIndex:((a=s[0])==null?void 0:a.pageIndex)??0}:null}getCommentBounds(n,r){if(!n||typeof n!="object"||!F(this,Gt).layout)return n;const i=Object.entries(n);if(!i.length)return n;let s=!1;const o={};return i.forEach(([a,l])=>{if(!l){o[a]=l;return}const c=l.start??l.pos,u=l.end??c;if(!Number.isFinite(c)||!Number.isFinite(u)){o[a]=l;return}const d=this.getSelectionBounds(c,u,r);if(!d){o[a]=l;return}s=!0,o[a]={...l,bounds:d.bounds,rects:d.rects,pageIndex:d.pageIndex}}),s?o:n}getLayoutSnapshot(){return{layout:F(this,Gt).layout,blocks:F(this,Gt).blocks,measures:F(this,Gt).measures,sectionMetadata:F(this,ok)}}getLayoutOptions(){return{...F(this,Qt)}}getCurrentSectionPageStyles(){var n;return qmt(F(this,Gt).layout,pe(this,Me,gj).call(this),((n=F(this,Rt).converter)==null?void 0:n.pageStyles)??null)}getRemoteCursors(){return Array.from(F(this,za).values())}setLayoutMode(n){var r;!n||F(this,Qt).layoutMode===n||(F(this,Qt).layoutMode=n,n!=="vertical"&&((r=F(this,Qt).virtualization)!=null&&r.enabled)&&(F(this,Qt).virtualization={...F(this,Qt).virtualization,enabled:!1}),je(this,Kh,null),je(this,ho,null),je(this,Xi,!0),pe(this,Me,uo).call(this))}hitTest(n,r){var c,u;const i=pe(this,Me,Bv).call(this,n,r);if(!i)return null;if(F(this,yn).mode!=="body"){const d=pe(this,Me,NS).call(this);if(!d)return null;const f=((c=d.layout.pageSize)==null?void 0:c.h)??d.region.height??1,h=pe(this,Me,ly).call(this);if(Math.max(0,Math.floor(i.y/h))!==d.region.pageIndex)return null;const y=i.x-d.region.localX,w=i.y-d.region.pageIndex*h-d.region.localY;if(y<0||w<0||y>d.region.width||w>d.region.height)return null;const b=Math.floor(w/f),E={x:y,y:b*f+(w-b*f)};return $E(d.layout,d.blocks,d.measures,E,void 0,void 0,void 0,void 0)??null}if(!F(this,Gt).layout)return null;const s=$E(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,i,F(this,Sn),n,r,F(this,ho)??void 0)??null;if(!s)return null;const o=(u=F(this,Rt).state)==null?void 0:u.doc;if(!o)return s;const a=F(this,$o).mapPosFromLayoutToCurrentDetailed(s.pos,s.layoutEpoch,1);if(!a.ok)return Lr("warn","hitTest mapping failed",a),null;const l=Math.max(0,Math.min(a.pos,o.content.size));return{...s,pos:l,layoutEpoch:a.toEpoch}}normalizeClientPoint(n,r){return pe(this,Me,Bv).call(this,n,r)}coordsAtPos(n){var s;if(!Number.isFinite(n))return console.warn("[PresentationEditor] coordsAtPos called with invalid position:",n),null;if(F(this,yn).mode!=="body"){if(!pe(this,Me,NS).call(this))return console.warn("[PresentationEditor] Header/footer context not available for coordsAtPos"),null;const a=pe(this,Me,fj).call(this,n,n);if(!a||a.length===0)return null;const l=a[0],c=F(this,Qt).zoom??1,u=F(this,Ln).getBoundingClientRect(),d=F(this,Ln).scrollLeft??0,f=F(this,Ln).scrollTop??0,h=pe(this,Me,ly).call(this),m=((s=F(this,Gt).layout)==null?void 0:s.pageGap)??0,y=l.y-l.pageIndex*(h+m),w=pe(this,Me,Pm).call(this,l.pageIndex,l.x,y);return w?{top:w.y*c-f+u.top,bottom:w.y*c-f+u.top+l.height*c,left:w.x*c-d+u.left,right:w.x*c-d+u.left+l.width*c,width:l.width*c,height:l.height*c}:null}const r=this.getRangeRects(n,n);if(!r||r.length===0)return null;const i=r[0];return{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:i.width,height:i.height}}scrollToPosition(n,r={}){var u;const i=this.getActiveEditor(),s=(u=i==null?void 0:i.state)==null?void 0:u.doc;if(!s||!Number.isFinite(n))return!1;const o=Math.max(0,Math.min(n,s.content.size)),a=r.behavior??"auto",l=r.block??"center",c=F(this,Gt).layout;if(c&&F(this,yn).mode==="body"){let d=null;for(let f=0;f<c.pages.length;f++){const h=c.pages[f];for(const m of h.fragments){const y=m;if(y.pmStart!=null&&y.pmEnd!=null&&o>=y.pmStart&&o<=y.pmEnd){d=f;break}}if(d!=null)break}if(d!=null){const f=uie(F(this,Sn),d);if(f)return f.scrollIntoView({block:l,inline:"nearest",behavior:a}),!0}return!1}else return!1}posAtCoords(n){const r=(n==null?void 0:n.clientX)??(n==null?void 0:n.left)??null,i=(n==null?void 0:n.clientY)??(n==null?void 0:n.top)??null;if(!Number.isFinite(r)||!Number.isFinite(i))return console.warn("[PresentationEditor] posAtCoords called with invalid coordinates:",n),null;const s=this.hitTest(r,i);return s?{pos:s.pos,inside:-1}:null}setZoom(n){if(typeof n!="number")throw new TypeError(`[PresentationEditor] setZoom expects a number, received ${typeof n}`);if(Number.isNaN(n))throw new RangeError("[PresentationEditor] setZoom expects a valid number (not NaN)");if(!Number.isFinite(n))throw new RangeError("[PresentationEditor] setZoom expects a finite number");if(n<=0)throw new RangeError("[PresentationEditor] setZoom expects a positive number greater than 0");n>jse&&console.warn(`[PresentationEditor] Zoom level ${n} exceeds recommended maximum of ${jse}. Performance may degrade.`),F(this,Qt).zoom=n,pe(this,Me,R6).call(this),this.emit("zoomChange",{zoom:n}),pe(this,Me,fo).call(this),F(this,za).size>0&&(je(this,bg,!0),pe(this,Me,C6).call(this)),je(this,Xi,!0),pe(this,Me,uo).call(this)}destroy(){var n,r,i,s,o,a,l,c,u,d,f,h,m,y,w,b,E,A,x,T;F(this,zy)!=null&&BE(()=>{var k,_;(((_=(k=F(this,Ln))==null?void 0:k.ownerDocument)==null?void 0:_.defaultView)??window).cancelAnimationFrame(F(this,zy)),je(this,zy,null)},"Layout RAF"),F(this,Du)!==null&&BE(()=>{clearTimeout(F(this,Du)),je(this,Du,null)},"Remote cursor throttle"),F(this,gl).destroy(),F(this,rf).forEach(({event:R,handler:k})=>{var _;return(_=F(this,Rt))==null?void 0:_.off(R,k)}),je(this,rf,[]),(n=F(this,Zh))==null||n.destroy(),je(this,Zh,null),(r=F(this,Sn))==null||r.removeEventListener("pointerdown",F(this,dk)),(i=F(this,Sn))==null||i.removeEventListener("dblclick",F(this,bk)),(s=F(this,Sn))==null||s.removeEventListener("pointermove",F(this,fk)),(o=F(this,Sn))==null||o.removeEventListener("pointerup",F(this,mk)),(a=F(this,Sn))==null||a.removeEventListener("pointerleave",F(this,hk)),(l=F(this,Sn))==null||l.removeEventListener("dragover",F(this,gk)),(c=F(this,Sn))==null||c.removeEventListener("drop",F(this,yk)),(u=F(this,Ln))==null||u.removeEventListener("keydown",F(this,wk)),(d=F(this,Ln))==null||d.removeEventListener("focusin",F(this,pk)),(f=F(this,jc))==null||f.notifyTargetChanged(),(h=F(this,jc))==null||h.destroy(),je(this,jc,null),F(this,ep)!=null&&(clearTimeout(F(this,ep)),je(this,ep,null)),F(this,af)&&(F(this,af).call(this),je(this,af,null)),F(this,lf)&&(F(this,lf).call(this),je(this,lf,null)),F(this,za).clear(),F(this,nx).clear(),je(this,Ql,null),pe(this,Me,N6).call(this),(m=F(this,aa))!=null&&m.documentId&&F(pl,$y).delete(F(this,aa).documentId),F(this,mg).forEach(R=>BE(R,"Header/footer")),je(this,mg,[]),BE(()=>{var R;(R=F(this,yl))==null||R.clear(),je(this,yl,null)},"Header/footer adapter"),BE(()=>{var R;(R=F(this,no))==null||R.destroy(),je(this,no,null)},"Header/footer manager"),je(this,fg,null),je(this,Hy,null),je(this,Vy,null),je(this,Uy,null),F(this,Wy).clear(),F(this,qy).clear(),je(this,hg,void 0),je(this,pg,void 0),je(this,yn,{mode:"body"}),je(this,bl,null),je(this,Kh,null),je(this,ho,null),(y=F(this,ag))==null||y.call(this),je(this,ag,null),(w=F(this,_i))==null||w.remove(),(b=F(this,Kr))==null||b.remove(),(E=F(this,Gh))==null||E.remove(),je(this,ca,null),je(this,ja,null),(A=F(this,wl))==null||A.remove(),je(this,wl,null),(x=F(this,ua))==null||x.remove(),je(this,ua,null),(T=F(this,cg))==null||T.remove(),F(this,Rt)&&(F(this,Rt).presentationEditor=null,F(this,Rt).destroy())}async goToAnchor(n){try{return await Kmt({anchor:n,layout:F(this,Gt).layout,blocks:F(this,Gt).blocks,measures:F(this,Gt).measures,bookmarks:F(this,Gt).bookmarks,pageGeometryHelper:F(this,ho)??void 0,painterHost:F(this,Kr),scrollPageIntoView:r=>pe(this,Me,uj).call(this,r),waitForPageMount:(r,i)=>pe(this,Me,dj).call(this,r,{timeout:i}),getActiveEditor:()=>this.getActiveEditor(),timeoutMs:pl.ANCHOR_NAV_TIMEOUT_MS})}catch(r){return console.error("[PresentationEditor] goToAnchor failed:",r),this.emit("error",{error:r,context:"goToAnchor"}),!1}}};$y=new WeakMap,aa=new WeakMap,Rt=new WeakMap,Ln=new WeakMap,Sn=new WeakMap,Kr=new WeakMap,_i=new WeakMap,Gh=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Kh=new WeakMap,ho=new WeakMap,ag=new WeakMap,Xh=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,Bc=new WeakMap,X1=new WeakMap,Xi=new WeakMap,Yh=new WeakMap,Y1=new WeakMap,gl=new WeakMap,Lu=new WeakMap,$o=new WeakMap,Z1=new WeakMap,J1=new WeakMap,Zh=new WeakMap,sk=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,zy=new WeakMap,rf=new WeakMap,ok=new WeakMap,to=new WeakMap,jc=new WeakMap,Q1=new WeakMap,ex=new WeakMap,dg=new WeakMap,no=new WeakMap,yl=new WeakMap,fg=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,Uy=new WeakMap,Wy=new WeakMap,qy=new WeakMap,hg=new WeakMap,pg=new WeakMap,mg=new WeakMap,gg=new WeakMap,yg=new WeakMap,yn=new WeakMap,bl=new WeakMap,la=new WeakMap,ca=new WeakMap,ja=new WeakMap,wl=new WeakMap,ua=new WeakMap,ep=new WeakMap,ak=new WeakMap,tp=new WeakMap,lk=new WeakMap,ck=new WeakMap,uk=new WeakMap,vl=new WeakMap,Jl=new WeakMap,tx=new WeakMap,sf=new WeakMap,xl=new WeakMap,$a=new WeakMap,ro=new WeakMap,El=new WeakMap,Gy=new WeakMap,np=new WeakMap,of=new WeakMap,za=new WeakMap,nx=new WeakMap,bg=new WeakMap,Ql=new WeakMap,po=new WeakMap,af=new WeakMap,lf=new WeakMap,rp=new WeakMap,Ky=new WeakMap,Du=new WeakMap,Me=new WeakSet,j2e=function(){var o;const n=(o=F(this,Rt))==null?void 0:o.view;if(!n||!n.dom||typeof n.focus!="function")return;const r=n;if(r.__sdPreventScrollFocus||n.focus.mock)return;r.__sdPreventScrollFocus=!0;const s=n.focus.bind(n);n.focus=()=>{var d;const a=(d=F(this,Ln).ownerDocument)==null?void 0:d.defaultView;if(!a){s();return}const l=a.scrollX,c=a.scrollY;let u=!1;try{n.dom.focus({preventScroll:!0}),u=!0}catch(f){Lr("warn","Hidden editor focus: preventScroll failed",{error:String(f),strategy:"preventScroll"})}if(!u)try{n.dom.focus(),u=!0}catch(f){Lr("warn","Hidden editor focus: standard focus failed",{error:String(f),strategy:"standard"})}if(!u)try{s()}catch(f){Lr("error","Hidden editor focus: all strategies failed",{error:String(f),strategy:"original"})}(a.scrollX!==l||a.scrollY!==c)&&a.scrollTo(l,c)}},zB=function(){F(this,Ln)&&F(this,Ln).classList.toggle("presentation-editor--viewing",F(this,to)==="viewing")},$2e=function(){var n,r;return Umt(((r=(n=F(this,Rt))==null?void 0:n.state)==null?void 0:r.doc)??null,{commentMarkName:dvt,trackChangeMarkNames:[fvt,hvt,pvt]})},Pv=function(){var n;try{const r=this.getActiveEditor(),i=(n=r==null?void 0:r.state)!=null&&n.selection?{from:r.state.selection.from,to:r.state.selection.to}:null;Hft(F(this,Sn),{docEpoch:F(this,$o).getCurrentEpoch(),layoutEpoch:F(this,Z1),selection:i,lastPointer:F(this,sk),lastHit:F(this,Jh)})}catch{}},z2e=function(n,r,i){var _;const s=F(this,Gt).layout,o=F(this,ho);if(!s||!o)return null;const a=o.getPageIndexAtY(i);if(a==null)return null;const l=s.pages[a];if(!l)return null;const c=((_=l.size)==null?void 0:_.w)??s.pageSize.w;if(!Number.isFinite(c)||c<=0||!Number.isFinite(r)||r<0||r>c)return null;const u=l.margins??F(this,Qt).margins??vs,d=Number.isFinite(u.left)?u.left:vs.left??0,f=Number.isFinite(u.right)?u.right:vs.right??0,h=d>0&&r<d,m=f>0&&r>c-f,y=F(this,Sn).querySelector(`.superdoc-page[data-page-index="${a}"]`);if(!y)return null;const w=o.getPageTop(a),b=i-w;if(!Number.isFinite(b))return null;const E=F(this,Qt).zoom??1,A=y.getBoundingClientRect(),x=[],T=Array.from(y.querySelectorAll(".superdoc-line"));for(const N of T){if(N.closest(".superdoc-page-header, .superdoc-page-footer"))continue;const L=Number(N.dataset.pmStart??"NaN"),M=Number(N.dataset.pmEnd??"NaN");if(!Number.isFinite(L)||!Number.isFinite(M))continue;const C=N.getBoundingClientRect(),D=(C.top-A.top)/E,O=(C.bottom-A.top)/E;if(!Number.isFinite(D)||!Number.isFinite(O))continue;const $=N.dataset.layoutEpoch,U=y.dataset.layoutEpoch,W=$!=null?Number($):NaN,ce=U!=null?Number(U):NaN,se=Number.isFinite(W)&&Number.isFinite(ce)?Math.max(W,ce):Number.isFinite(W)?W:Number.isFinite(ce)?ce:0;x.push({pmStart:L,pmEnd:M,layoutEpoch:Number.isFinite(se)?se:0,top:D,bottom:O})}if(x.length===0)return null;const R=Math.min(...x.map(N=>N.top));if(a===0&&Number.isFinite(R)&&b<R)return{pointerId:n,kind:"aboveFirstLine"};if(!h&&!m)return null;let k=null;for(const N of x)if(b>=N.top&&b<=N.bottom){k=N;break}if(!k){let N=1/0;for(const L of x){const M=(L.top+L.bottom)/2,C=Math.abs(b-M);C<N&&(N=C,k=L)}}return k?{pointerId:n,kind:h?"left":"right",layoutEpoch:k.layoutEpoch,pmStart:k.pmStart,pmEnd:k.pmEnd}:null},H2e=function(n){if(!n.length)return null;const r=Math.min(...n.map(a=>a.top)),i=Math.min(...n.map(a=>a.left)),s=Math.max(...n.map(a=>a.bottom)),o=Math.max(...n.map(a=>a.right));return!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s)||!Number.isFinite(o)?null:{top:r,left:i,bottom:s,right:o,width:o-i,height:s-r}},SS=function(){if(F(this,Kr))try{F(this,J1).rebuild(F(this,Kr))}catch(n){Lr("warn","DomPositionIndex rebuild failed",{error:String(n)})}},V2e=function(){const n=({transaction:a})=>{const l=pe(this,Me,IS).call(this);if(a&&(F(this,$o).recordTransaction(a),F(this,gl).setDocEpoch(F(this,$o).getCurrentEpoch())),l||a!=null&&a.docChanged){if(je(this,Xi,!0),a!=null&&a.docChanged)if(F(this,Yh)!==null){const c=F(this,Yh).slice();c.appendMapping(a.mapping),je(this,Yh,c)}else je(this,Yh,a.mapping);F(this,gl).onLayoutStart(),pe(this,Me,uo).call(this)}a!=null&&a.docChanged&&(pe(this,Me,VB).call(this),pe(this,Me,N6).call(this))},r=()=>{pe(this,Me,fo).call(this),pe(this,Me,VB).call(this),pe(this,Me,aj).call(this)};F(this,Rt).on("update",n),F(this,Rt).on("selectionUpdate",r),F(this,rf).push({event:"update",handler:n}),F(this,rf).push({event:"selectionUpdate",handler:r});const i=()=>{je(this,Xi,!0),F(this,gl).onLayoutStart(),pe(this,Me,uo).call(this)};F(this,Rt).on("pageStyleUpdate",i),F(this,rf).push({event:"pageStyleUpdate",handler:i});const s=a=>{var l,c;this.emit("collaborationReady",a),(l=F(this,aa).collaborationProvider)!=null&&l.awareness&&((c=F(this,Qt).presence)==null?void 0:c.enabled)!==!1&&pe(this,Me,HB).call(this)};F(this,Rt).on("collaborationReady",s),F(this,rf).push({event:"collaborationReady",handler:s});const o=a=>{var l,c;(l=F(this,yl))==null||l.invalidate(a.sectionId),(c=F(this,no))==null||c.refresh(),je(this,Xi,!0),pe(this,Me,uo).call(this)};F(this,Rt).on("remoteHeaderFooterChanged",o),F(this,rf).push({event:"remoteHeaderFooterChanged",handler:o})},HB=function(){const n=F(this,aa).collaborationProvider;if(!(n!=null&&n.awareness))return;F(this,af)&&(F(this,af).call(this),je(this,af,null)),F(this,lf)&&(F(this,lf).call(this),je(this,lf,null));const r=()=>{je(this,bg,!0),pe(this,Me,C6).call(this)};n.awareness.on("change",r),n.awareness.on("update",r),je(this,af,()=>{var o,a;(o=n.awareness)==null||o.off("change",r),(a=n.awareness)==null||a.off("update",r)});const i=()=>{F(this,za).size>0&&(je(this,bg,!0),pe(this,Me,C6).call(this))},s=()=>{F(this,rp)!==void 0&&clearTimeout(F(this,rp)),je(this,rp,window.setTimeout(i,xvt))};F(this,Ln).addEventListener("scroll",s,{passive:!0}),je(this,lf,()=>{F(this,rp)!==void 0&&(clearTimeout(F(this,rp)),je(this,rp,void 0)),F(this,Ln).removeEventListener("scroll",s)}),r()},VB=function(){var l,c;const n=F(this,aa).collaborationProvider;if(!(n!=null&&n.awareness)||typeof n.awareness.setLocalStateField!="function")return;const r=(l=F(this,Rt))==null?void 0:l.state;if(!r)return;const i=vi.getState(r);if(!((c=i==null?void 0:i.binding)!=null&&c.mapping))return;const{selection:s}=r,{anchor:o,head:a}=s;try{const u=jx(o,i.type,i.binding.mapping),d=jx(a,i.type,i.binding.mapping);if(u&&d){const f={anchor:u,head:d};n.awareness.setLocalStateField("cursor",f)}}catch{}},C6=function(){var n;((n=F(this,Qt).presence)==null?void 0:n.enabled)!==!1&&(F(this,Lu)||(je(this,Lu,!0),queueMicrotask(()=>{if(!F(this,Lu))return;const r=performance.now(),i=r-F(this,Ky),s=16;if(i>=s){F(this,Du)!==null&&(clearTimeout(F(this,Du)),je(this,Du,null)),je(this,Lu,!1),je(this,Ky,r),pe(this,Me,UB).call(this);return}const o=s-i;je(this,Du,window.setTimeout(()=>{je(this,Lu,!1),je(this,Du,null),je(this,Ky,performance.now()),pe(this,Me,UB).call(this)},o))})))},U2e=function(){var r,i;if(((r=F(this,Qt).presence)==null?void 0:r.enabled)===!1||F(this,Lu))return;je(this,Lu,!0),(((i=F(this,Ln).ownerDocument)==null?void 0:i.defaultView)??window).requestAnimationFrame(()=>{je(this,Lu,!1),je(this,Ky,performance.now()),pe(this,Me,WB).call(this)})},UB=function(){var r,i,s,o;if(((r=F(this,Qt).presence)==null?void 0:r.enabled)===!1){F(this,za).clear(),F(this,nx).clear(),F(this,Ql)&&(F(this,Ql).innerHTML="");return}if(!F(this,bg))return;je(this,bg,!1);const n=performance.now();if(je(this,za,nht({provider:F(this,aa).collaborationProvider??null,editorState:((i=F(this,Rt))==null?void 0:i.state)??null,previousState:F(this,za),fallbackColors:pl.FALLBACK_COLORS,staleTimeoutMs:((s=F(this,Qt).presence)==null?void 0:s.staleTimeout)??Svt})),pe(this,Me,WB).call(this),this.emit("remoteCursorsUpdate",{cursors:Array.from(F(this,za).values())}),F(this,Bc)){const a=performance.now()-n,l=((o=F(this,Qt).presence)==null?void 0:o.maxVisible)??20,c=Math.min(F(this,za).size,l);F(this,Bc).call(this,{type:"remoteCursorsRender",data:{collaboratorCount:F(this,za).size,visibleCount:c,renderTimeMs:a}})}},WB=function(){var s,o,a,l;const n=(s=F(this,Gt))==null?void 0:s.layout,r=(o=F(this,Gt))==null?void 0:o.blocks,i=(a=F(this,Gt))==null?void 0:a.measures;!n||!r||!i||vmt({layout:n,blocks:r,measures:i,pageGeometryHelper:F(this,ho),presence:F(this,Qt).presence,remoteCursorState:F(this,za),remoteCursorElements:F(this,nx),remoteCursorOverlay:F(this,Ql),doc:F(this,Ln).ownerDocument??document,computeCaretLayoutRect:c=>pe(this,Me,mj).call(this,c),convertPageLocalToOverlayCoords:(c,u,d)=>pe(this,Me,Pm).call(this,c,u,d),fallbackColors:pl.FALLBACK_COLORS,cursorStyles:pl.CURSOR_STYLES,maxSelectionRectsPerUser:Evt,defaultPageHeight:Zs.h,fallbackPageHeight:((l=F(this,Qt).pageSize)==null?void 0:l.h)??Zs.h})},W2e=function(){F(this,Sn).addEventListener("pointerdown",F(this,dk)),F(this,Sn).addEventListener("dblclick",F(this,bk)),F(this,Sn).addEventListener("pointermove",F(this,fk)),F(this,Sn).addEventListener("pointerup",F(this,mk)),F(this,Sn).addEventListener("pointerleave",F(this,hk)),F(this,Sn).addEventListener("dragover",F(this,gk)),F(this,Sn).addEventListener("drop",F(this,yk)),F(this,Ln).addEventListener("keydown",F(this,wk)),F(this,Ln).addEventListener("focusin",F(this,pk))},q2e=function(){var n;(n=F(this,ag))==null||n.call(this),je(this,ag,null),je(this,ag,Qmt({painterHost:F(this,Kr),getActiveEditor:()=>this.getActiveEditor(),hitTest:(r,i)=>this.hitTest(r,i),scheduleSelectionUpdate:()=>pe(this,Me,fo).call(this)}))},qB=function(){var r,i;pe(this,Me,fo).call(this),document.activeElement instanceof HTMLElement&&document.activeElement.blur();const n=(r=F(this,Rt).view)==null?void 0:r.dom;n&&(n.focus(),(i=F(this,Rt).view)==null||i.focus())},G2e=function(){var r,i;(r=F(this,jc))==null||r.destroy();const n=((i=F(this,Ln).ownerDocument)==null?void 0:i.defaultView)??window;je(this,jc,new Tmt(n,F(this,Ln),()=>pe(this,Me,nj).call(this),()=>F(this,to)!=="viewing")),F(this,jc).bind()},K2e=function(){var a,l,c;const n=(a=F(this,aa))==null?void 0:a.mediaFiles,r=(c=(l=F(this,Rt).storage)==null?void 0:l.image)==null?void 0:c.media,i=F(this,Rt).converter,s=n??r,o=vwt({painterHost:F(this,Kr),visibleHost:F(this,Ln),selectionOverlay:F(this,_i),editor:F(this,Rt),converter:i,mediaFiles:s,isDebug:!!F(this,aa).isDebug,initBudgetMs:vvt,resetSession:()=>{var u;je(this,mg,[]),je(this,yn,{mode:"body"}),je(this,bl,null),(u=F(this,jc))==null||u.notifyTargetChanged()},requestRerender:()=>{je(this,Xi,!0),pe(this,Me,uo).call(this)},exitHeaderFooterMode:()=>{pe(this,Me,CS).call(this)},previousCleanups:F(this,mg),previousAdapter:F(this,yl),previousManager:F(this,no),previousOverlayManager:F(this,la)});je(this,la,o.overlayManager),je(this,fg,o.headerFooterIdentifier),je(this,no,o.headerFooterManager),je(this,yl,o.headerFooterAdapter),je(this,mg,o.cleanups)},dk=new WeakMap,_6=function(){var n,r;return Imt(((r=(n=F(this,Rt))==null?void 0:n.state)==null?void 0:r.doc)??null)},X2e=function(n){const r=Nmt(n,{clickCount:F(this,lk),lastClickTime:F(this,ck),lastClickPosition:F(this,uk)},{timeThresholdMs:bvt,distanceThresholdPx:wvt,maxClickCount:3});return je(this,lk,r.clickCount),je(this,ck,r.lastClickTime),je(this,uk,r.lastClickPosition),r.clickCount},GB=function(n){var r;return Xmt(n,((r=F(this,Rt).state)==null?void 0:r.doc)??null,F(this,Gt).blocks)},Y2e=function(n){var r;return Ymt(n,((r=F(this,Rt).state)==null?void 0:r.doc)??null,F(this,Gt).blocks)},Z2e=function(n){return Zmt(n,F(this,np),F(this,of))},J2e=function(n,r){const i=pe(this,Me,GB).call(this,n);i!==null&&(je(this,np,{tablePos:r,cellPos:i,cellRowIndex:n.cellRowIndex,cellColIndex:n.cellColIndex,tableBlockId:n.block.id}),je(this,of,"pending"))},N6=function(){je(this,np,null),je(this,of,"none")},KB=function(n,r){const i=(F(this,Qt).pageSize??Zs).h;return Jmt(F(this,Gt).layout,F(this,Gt).blocks,F(this,Gt).measures,n,r,i,pe(this,Me,ay).call(this),F(this,ho))},Q2e=function(n){var o;const r=F(this,Rt).state;if(!(r!=null&&r.doc))return!1;const i=Rmt(r,n);if(!i)return!1;const s=r.tr.setSelection(Vt.create(r.doc,i.from,i.to));try{return(o=F(this,Rt).view)==null||o.dispatch(s),!0}catch(a){return _e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to select word:",a),!1}},eEe=function(n){var o;const r=F(this,Rt).state;if(!(r!=null&&r.doc))return!1;const i=Mmt(r,n);if(!i)return!1;const s=r.tr.setSelection(Vt.create(r.doc,i.from,i.to));try{return(o=F(this,Rt).view)==null||o.dispatch(s),!0}catch(a){return _e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to select paragraph:",a),!1}},AS=function(n,r,i){return Cmt(F(this,Gt).blocks,n,r,i)},fk=new WeakMap,hk=new WeakMap,pk=new WeakMap,mk=new WeakMap,gk=new WeakMap,yk=new WeakMap,bk=new WeakMap,wk=new WeakMap,XB=function(n){const r=pe(this,Me,gj).call(this),i=pe(this,Me,kEe).call(this,n,r);if(!i){pe(this,Me,lj).call(this,"missingRegion");return}pe(this,Me,tj).call(this,i)},uo=function(){var r;if(F(this,X1))return;je(this,X1,!0);const n=((r=F(this,Ln).ownerDocument)==null?void 0:r.defaultView)??window;je(this,zy,n.requestAnimationFrame(()=>{je(this,X1,!1),pe(this,Me,tEe).call(this).catch(i=>{pe(this,Me,Nh).call(this,"render",i instanceof Error?i:new Error(String(i)))})}))},tEe=async function(){if(F(this,Y1)){je(this,Xi,!0);return}if(F(this,Xi)){je(this,Xi,!1),je(this,Y1,!0);try{await pe(this,Me,nEe).call(this)}finally{je(this,Y1,!1),F(this,Xi)&&pe(this,Me,uo).call(this)}}},nEe=async function(){var r,i,s,o,a,l,c,u,d,f,h,m,y;F(this,gl).onLayoutStart();let n=!1;try{let w;const b=((r=F(this,Ln).ownerDocument)==null?void 0:r.defaultView)??window,E=(b==null?void 0:b.performance)??Avt,A=(i=E==null?void 0:E.now)==null?void 0:i.call(E);try{w=F(this,Rt).getJSON()}catch(B){pe(this,Me,Nh).call(this,"render",pe(this,Me,L6).call(this,B,"getJSON"));return}const x=F(this,$o).getCurrentEpoch(),T=[];let R,k=new Map;try{const B=F(this,Rt).converter,z=B?{docx:B.convertedXml,numbering:B.numbering,linkedStyles:B.linkedStyles}:void 0,de=Dxe(((s=F(this,Rt))==null?void 0:s.schema)??null),Y=(a=(o=F(this,Rt))==null?void 0:o.state)!=null&&a.doc&&w?_mt(F(this,Rt).state.doc,w):null,ee=F(this,to)!=="viewing"||F(this,Qt).enableCommentsInViewing===!0,ae=h2e(w,{mediaFiles:(u=(c=(l=F(this,Rt))==null?void 0:l.storage)==null?void 0:c.image)==null?void 0:u.media,emitSectionBreaks:!0,sectionMetadata:T,trackedChangesMode:F(this,Q1),enableTrackedChanges:F(this,ex),enableComments:ee,enableRichHyperlinks:!0,themeColors:((f=(d=F(this,Rt))==null?void 0:d.converter)==null?void 0:f.themeColors)??void 0,converterContext:z,...Y?{positions:Y}:{},...de.length>0?{atomNodeTypes:de}:{}});R=ae.blocks,k=ae.bookmarks??new Map}catch(B){pe(this,Me,Nh).call(this,"render",pe(this,Me,L6).call(this,B,"toFlowBlocks"));return}if(!R){pe(this,Me,Nh).call(this,"render",new Error("toFlowBlocks returned undefined blocks"));return}const _=pe(this,Me,sEe).call(this,R,T),N=F(this,Gt).blocks,L=F(this,Gt).layout;let M,C,D,O;const $=pe(this,Me,oEe).call(this);try{const B=await tmt(N,L,R,_,(z,de)=>WI(z,de),$??void 0);if(!B||typeof B!="object"){pe(this,Me,Nh).call(this,"render",new Error("incrementalLayout returned invalid result"));return}if(!B.layout||typeof B.layout!="object"){pe(this,Me,Nh).call(this,"render",new Error("incrementalLayout returned invalid layout"));return}if(!Array.isArray(B.measures)){pe(this,Me,Nh).call(this,"render",new Error("incrementalLayout returned invalid measures"));return}({layout:M,measures:C}=B),M.pageGap=pe(this,Me,ay).call(this),M.layoutEpoch=x,D=B.headers,O=B.footers}catch(B){pe(this,Me,Nh).call(this,"render",pe(this,Me,L6).call(this,B,"incrementalLayout"));return}je(this,ok,T);const U=F(this,Rt).converter;je(this,Hy,wht(T,U==null?void 0:U.pageStyles,{headerIds:U==null?void 0:U.headerIds,footerIds:U==null?void 0:U.footerIds}));const W=Gmt(k,M,R);if(je(this,Gt,{blocks:R,measures:C,layout:M,bookmarks:k,anchorMap:W}),je(this,Vy,D??null),je(this,Uy,O??null),F(this,Gt).layout){const B=F(this,Gt).layout.pageGap??pe(this,Me,ay).call(this);F(this,ho)?F(this,ho).updateLayout(F(this,Gt).layout,B):je(this,ho,new smt({layout:F(this,Gt).layout,pageGap:B}))}await pe(this,Me,lEe).call(this,$,M,T),pe(this,Me,cEe).call(this,M);const ce=pe(this,Me,rEe).call(this,R,C);typeof ce.setProviders=="function"&&ce.setProviders(F(this,hg),F(this,pg));const se=[],Q=[];if(D)for(const B of D)se.push(...B.blocks),Q.push(...B.measures);for(const B of F(this,Wy).values())se.push(...B.blocks),Q.push(...B.measures);const J=[],K=[];if(O)for(const B of O)J.push(...B.blocks),K.push(...B.measures);for(const B of F(this,qy).values())J.push(...B.blocks),K.push(...B.measures);(h=ce.setData)==null||h.call(ce,R,C,se.length>0?se:void 0,Q.length>0?Q:void 0,J.length>0?J:void 0,K.length>0?K:void 0),(m=F(this,Zh))==null||m.pause();const re=F(this,Yh);je(this,Yh,null),ce.paint(M,F(this,Kr),re??void 0),pe(this,Me,_Ee).call(this),pe(this,Me,SS).call(this),(y=F(this,Zh))==null||y.resume(),je(this,Z1,x),F(this,$o).onLayoutComplete(x),F(this,gl).onLayoutComplete(x),n=!0,je(this,Xh,null),je(this,lg,"healthy"),pe(this,Me,yj).call(this),pe(this,Me,R6).call(this);const X=eht(E,A,M,R),me={layout:M,blocks:R,measures:C,metrics:X};this.emit("layoutUpdated",me),this.emit("paginationUpdate",me);const G=F(this,Qt).emitCommentPositionsInViewing===!0;if(F(this,to)!=="viewing"||G){const B=pe(this,Me,$2e).call(this);Object.keys(B).length>0&&this.emit("commentPositions",{positions:B})}F(this,Bc)&&X&&F(this,Bc).call(this,{type:"layout",data:{layout:M,blocks:R,measures:C,metrics:X}}),F(this,gl).requestRender({immediate:!0}),F(this,za).size>0&&pe(this,Me,U2e).call(this)}finally{n||F(this,gl).onLayoutAbort()}},rEe=function(n,r){var i;return F(this,Kh)||je(this,Kh,zft({blocks:n,measures:r,layoutMode:F(this,Qt).layoutMode??"vertical",virtualization:F(this,Qt).virtualization,pageStyles:F(this,Qt).pageStyles,headerProvider:F(this,hg),footerProvider:F(this,pg),ruler:F(this,Qt).ruler,pageGap:((i=F(this,Gt).layout)==null?void 0:i.pageGap)??pe(this,Me,ay).call(this)})),F(this,Kh)},fo=function(n){F(this,gl).requestRender(n)},iEe=function(){var c;if(F(this,yn).mode!=="body"||!F(this,po))return;if(F(this,to)==="viewing"){try{F(this,po).innerHTML=""}catch(u){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to clear selection layer in viewing mode:",u)}return}const n=F(this,Gt).layout,r=this.getActiveEditor().state,i=r==null?void 0:r.selection;if(!i){try{F(this,po).innerHTML=""}catch(u){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to clear selection layer (no selection):",u)}return}if(!n)return;const{from:s,to:o}=i,a=F(this,$o).getCurrentEpoch();if(F(this,Z1)<a)return;if(pe(this,Me,_S).call(this,{includeDragBuffer:F(this,sf)}),i instanceof ei){try{F(this,po).innerHTML="",pe(this,Me,wEe).call(this,i,n)}catch(u){console.warn("[PresentationEditor] Failed to render cell selection overlay:",u)}return}if(s===o){const u=pe(this,Me,mj).call(this,s);if(!u)return;try{F(this,po).innerHTML="",jmt({localSelectionLayer:F(this,po),caretLayout:u,convertPageLocalToOverlayCoords:(d,f,h)=>pe(this,Me,Pm).call(this,d,f,h)})}catch(d){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to render caret overlay:",d)}return}const l=pe(this,Me,hj).call(this,s,o);if(l==null){Lr("warn","Local selection: DOM rect computation failed",{from:s,to:o});return}try{F(this,po).innerHTML="",l.length>0&&Bmt({localSelectionLayer:F(this,po),rects:l,pageHeight:pe(this,Me,ly).call(this),pageGap:((c=F(this,Gt).layout)==null?void 0:c.pageGap)??0,convertPageLocalToOverlayCoords:(u,d,f)=>pe(this,Me,Pm).call(this,u,d,f)})}catch(u){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to render selection rects:",u)}},sEe=function(n,r){var c,u,d,f,h,m;const i=pe(this,Me,AEe).call(this),s=n==null?void 0:n.find(y=>{var w;return y.kind==="sectionBreak"&&((w=y==null?void 0:y.attrs)==null?void 0:w.isFirstSection)}),o=(s==null?void 0:s.pageSize)??i.pageSize,a={...i.margins,...((c=s==null?void 0:s.margins)==null?void 0:c.top)!=null?{top:s.margins.top}:{},...((u=s==null?void 0:s.margins)==null?void 0:u.right)!=null?{right:s.margins.right}:{},...((d=s==null?void 0:s.margins)==null?void 0:d.bottom)!=null?{bottom:s.margins.bottom}:{},...((f=s==null?void 0:s.margins)==null?void 0:f.left)!=null?{left:s.margins.left}:{},...((h=s==null?void 0:s.margins)==null?void 0:h.header)!=null?{header:s.margins.header}:{},...((m=s==null?void 0:s.margins)==null?void 0:m.footer)!=null?{footer:s.margins.footer}:{}},l=(s==null?void 0:s.columns)??i.columns;return F(this,Qt).pageSize=o,F(this,Qt).margins=a,F(this,Gh).style.width=`${o.w}px`,{pageSize:o,margins:a,...l?{columns:l}:{},sectionMetadata:r}},oEe=function(){if(!F(this,yl))return null;const n=F(this,yl).getBatch("header"),r=F(this,yl).getBatch("footer"),i=F(this,yl).getBlocksByRId("header"),s=F(this,yl).getBlocksByRId("footer");if(!n&&!r&&!i&&!s)return null;const o=pe(this,Me,aEe).call(this);return o?{headerBlocks:n,footerBlocks:r,headerBlocksByRId:i,footerBlocksByRId:s,constraints:o}:null},aEe=function(){const n=F(this,Qt).pageSize??Zs,r=F(this,Qt).margins??vs,i=r.left??vs.left,s=r.right??vs.right,o=n.w-(i+s);if(!Number.isFinite(o)||o<=0)return null;const a=o,l=r.top??vs.top,c=r.bottom??vs.bottom;if(!Number.isFinite(l)||!Number.isFinite(c))return console.warn("[PresentationEditor] Invalid top or bottom margin: not a finite number"),null;const u=l+c;if(u>=n.h)return console.warn(`[PresentationEditor] Invalid margins: top (${l}) + bottom (${c}) = ${u} >= page height (${n.h})`),null;const d=1,f=Math.max(d,n.h-u),h=r.header??0,m=r.footer??0,y=Math.max(d,l-h),w=Math.max(d,c-m),b=Math.max(y,w);return{width:a,height:f,pageWidth:n.w,margins:{left:i,right:s},overflowBaseHeight:b}},lEe=async function(n,r,i){return await uvt(n,r,i,{headerLayoutsByRId:F(this,Wy),footerLayoutsByRId:F(this,qy)})},cEe=function(n){je(this,hg,pe(this,Me,ZB).call(this,"header",n)),je(this,pg,pe(this,Me,ZB).call(this,"footer",n)),pe(this,Me,uEe).call(this,n)},YB=function(n,r,i,s,o){const a=Number.isFinite(r)&&r>=0?r:0,l=Math.max(i.height,a),c=n==="header"?i.offset:Math.max(0,s-o-l);return{layoutHeight:a,containerHeight:l,offset:c}},ZB=function(n,r){const i=n==="header"?F(this,Vy):F(this,Uy),s=n==="header"?F(this,Wy):F(this,qy);if((!i||i.length===0)&&s.size===0)return;const o=F(this,Hy),a=F(this,fg)??TB(F(this,Rt).converter),l=new Map;for(const c of r.pages){const u=c.sectionIndex??0;l.has(u)||l.set(u,c.number)}return(c,u,d)=>{var D,O,$,U,W,ce,se,Q,J,K,re,X,me,G,B;const f=(d==null?void 0:d.sectionIndex)??0,h=l.get(f),m=typeof h=="number"?c-h+1:c,y=o?vht(c,f,o,{kind:n,sectionPageNumber:m}):yht(c,a,{kind:n});let w;if(d!=null&&d.sectionRefs&&n==="header"){if(w=(D=d.sectionRefs.headerRefs)==null?void 0:D[y],!w&&y&&y!=="default"&&f>0&&o){const z=o.sectionHeaderIds.get(f-1);w=(z==null?void 0:z[y])??void 0}!w&&y!=="default"&&(w=(O=d.sectionRefs.headerRefs)==null?void 0:O.default)}else if(d!=null&&d.sectionRefs&&n==="footer"){if(w=($=d.sectionRefs.footerRefs)==null?void 0:$[y],!w&&y&&y!=="default"&&f>0&&o){const z=o.sectionFooterIds.get(f-1);w=(z==null?void 0:z[y])??void 0}!w&&y!=="default"&&(w=(U=d.sectionRefs.footerRefs)==null?void 0:U.default)}if(!y)return null;if(w&&s.has(w)){const z=s.get(w);if(!z)console.warn(`[PresentationEditor] Inconsistent state: layoutsByRId.has('${w}') returned true but get() returned undefined`);else{const de=pe(this,Me,JB).call(this,z.layout.pages,c);if(de){const Y=de.fragments??[],ee=((W=d==null?void 0:d.size)==null?void 0:W.h)??((ce=r.pageSize)==null?void 0:ce.h)??((se=F(this,Qt).pageSize)==null?void 0:se.h)??Zs.h,ae=u??((Q=r.pages[0])==null?void 0:Q.margins)??F(this,Qt).margins??vs,ie=pe(this,Me,TS).call(this,n,ae,ee),H=z.layout.height??0,be=pe(this,Me,YB).call(this,n,H,ie,ee,ae.footer??0),Te=z.layout.minY??0;return{fragments:Te<0?Y.map(oe=>({...oe,y:oe.y-Te})):Y,height:be.containerHeight,contentHeight:be.layoutHeight>0?be.layoutHeight:be.containerHeight,offset:be.offset,marginLeft:ie.x,contentWidth:ie.width,headerId:w,sectionType:y,minY:Te,box:{x:ie.x,y:be.offset,width:ie.width,height:be.containerHeight},hitRegion:{x:ie.x,y:be.offset,width:ie.width,height:be.containerHeight}}}}}if(!i||i.length===0)return null;const b=i.find(z=>z.type===y);if(!b||!((K=(J=b.layout)==null?void 0:J.pages)!=null&&K.length))return null;const E=pe(this,Me,JB).call(this,b.layout.pages,c);if(!E)return null;const A=E.fragments??[],x=((re=d==null?void 0:d.size)==null?void 0:re.h)??((X=r.pageSize)==null?void 0:X.h)??((me=F(this,Qt).pageSize)==null?void 0:me.h)??Zs.h,T=u??((G=r.pages[0])==null?void 0:G.margins)??F(this,Qt).margins??vs,R=pe(this,Me,TS).call(this,n,T,x),k=b.layout.height??0,_=pe(this,Me,YB).call(this,n,k,R,x,T.footer??0),N=(B=F(this,no))==null?void 0:B.getVariantId(n,y),L=w??N??void 0,M=b.layout.minY??0;return{fragments:M<0?A.map(z=>({...z,y:z.y-M})):A,height:_.containerHeight,contentHeight:_.layoutHeight>0?_.layoutHeight:_.containerHeight,offset:_.offset,marginLeft:R.x,contentWidth:R.width,headerId:L,sectionType:y,minY:M,box:{x:R.x,y:_.offset,width:R.width,height:_.containerHeight},hitRegion:{x:R.x,y:_.offset,width:R.width,height:_.containerHeight}}}},JB=function(n,r){if(!n||n.length===0)return;const i=n.find(l=>l.number===r);if(i)return i;const s=hxe(r),o=pxe(s),a=n.find(l=>l.number===o);return a||n[0]},TS=function(n,r,i){const s=r??F(this,Qt).margins??vs,o=F(this,Qt).pageSize??Zs,a=s.left??vs.left,l=s.right??vs.right,c=Math.max(o.w-(a+l),1),u=i??o.h;if(n==="header"){const d=s.header??0,f=s.top??vs.top??0,h=Math.max(f-d,1);return{x:a,width:c,height:h,offset:d}}else{const d=s.footer??0,f=s.bottom??vs.bottom??0,h=Math.max(f-d,1),m=Math.max(0,u-d-h);return{x:a,width:c,height:h,offset:m}}},QB=function(n,r,i){var f;const s=r.sectionIndex??0,o=i.get(s),a=typeof o=="number"?r.number-o+1:r.number,l=F(this,Hy),c=F(this,fg);let u=!1,d=!1;return l?(u=((f=l.sectionTitlePg)==null?void 0:f.get(s))??l.titlePg,d=l.alternateHeaders):c&&(u=c.titlePg,d=c.alternateHeaders),a===1&&u?"first":d?r.number%2===0?"even":"odd":"default"},uEe=function(n){var s,o;F(this,gg).clear(),F(this,yg).clear();const r=((s=n.pageSize)==null?void 0:s.h)??((o=F(this,Qt).pageSize)==null?void 0:o.h)??Zs.h;if(r<=0)return;const i=new Map;for(const a of n.pages){const l=a.sectionIndex??0;i.has(l)||i.set(l,a.number)}n.pages.forEach((a,l)=>{var y,w,b,E,A,x,T,R,k,_,N;const c=a.margins??F(this,Qt).margins??vs,u=((y=a.size)==null?void 0:y.h)??r,d=(w=F(this,hg))==null?void 0:w.call(this,a.number,c,a),f=pe(this,Me,TS).call(this,"header",c,u);F(this,gg).set(l,{kind:"header",headerId:d==null?void 0:d.headerId,sectionType:(d==null?void 0:d.sectionType)??pe(this,Me,QB).call(this,"header",a,i),pageIndex:l,pageNumber:a.number,localX:((b=d==null?void 0:d.hitRegion)==null?void 0:b.x)??f.x,localY:((E=d==null?void 0:d.hitRegion)==null?void 0:E.y)??f.offset,width:((A=d==null?void 0:d.hitRegion)==null?void 0:A.width)??f.width,height:((x=d==null?void 0:d.hitRegion)==null?void 0:x.height)??f.height});const h=(T=F(this,pg))==null?void 0:T.call(this,a.number,c,a),m=pe(this,Me,TS).call(this,"footer",c,u);F(this,yg).set(l,{kind:"footer",headerId:h==null?void 0:h.headerId,sectionType:(h==null?void 0:h.sectionType)??pe(this,Me,QB).call(this,"footer",a,i),pageIndex:l,pageNumber:a.number,localX:((R=h==null?void 0:h.hitRegion)==null?void 0:R.x)??m.x,localY:((k=h==null?void 0:h.hitRegion)==null?void 0:k.y)??m.offset,width:((_=h==null?void 0:h.hitRegion)==null?void 0:_.width)??m.width,height:((N=h==null?void 0:h.hitRegion)==null?void 0:N.height)??m.height,contentHeight:h==null?void 0:h.contentHeight,minY:h==null?void 0:h.minY})})},kS=function(n,r){var d,f;const i=F(this,Gt).layout;if(!i)return null;const s=((d=i.pageSize)==null?void 0:d.h)??((f=F(this,Qt).pageSize)==null?void 0:f.h)??Zs.h,o=i.pageGap??0;if(s<=0)return null;const a=Math.max(0,Math.floor(r/(s+o))),l=r-a*(s+o),c=F(this,gg).get(a);if(c&&pe(this,Me,ej).call(this,c,n,l))return c;const u=F(this,yg).get(a);return u&&pe(this,Me,ej).call(this,u,n,l)?u:null},ej=function(n,r,i){const s=r>=n.localX&&r<=n.localX+n.width,o=i>=n.localY&&i<=n.localY+n.height;return s&&o},tj=function(n){const r=pe(this,Me,mEe).call(this);if(!r.allowed){pe(this,Me,lj).call(this,r.reason??"restricted");return}pe(this,Me,dEe).call(this,n)},dEe=async function(n){var r,i,s,o,a,l,c,u;try{if(!F(this,no)||!F(this,la)){pe(this,Me,Qs).call(this);return}const d=pe(this,Me,cj).call(this,n);if(!d){console.warn("[PresentationEditor] No descriptor found for region:",n),pe(this,Me,Qs).call(this);return}if(!d.id){console.warn("[PresentationEditor] Descriptor missing id:",d),pe(this,Me,Qs).call(this);return}let f=pe(this,Me,Fv).call(this,n.pageIndex);if(!f)try{if(pe(this,Me,uj).call(this,n.pageIndex),!await pe(this,Me,dj).call(this,n.pageIndex,{timeout:2e3})){console.error("[PresentationEditor] Failed to mount page for header/footer editing"),pe(this,Me,Qs).call(this),this.emit("error",{error:new Error("Failed to mount page for editing"),context:"enterHeaderFooterMode"});return}f=pe(this,Me,Fv).call(this,n.pageIndex)}catch(E){console.error("[PresentationEditor] Error mounting page:",E),pe(this,Me,Qs).call(this),this.emit("error",{error:E,context:"enterHeaderFooterMode.pageMount"});return}if(!f){console.error("[PresentationEditor] Page element not found after mount attempt"),pe(this,Me,Qs).call(this),this.emit("error",{error:new Error("Page element not found after mount"),context:"enterHeaderFooterMode"});return}const{success:h,editorHost:m,reason:y}=F(this,la).showEditingOverlay(f,n,F(this,Qt).zoom??1);if(!h||!m){console.error("[PresentationEditor] Failed to create editor host:",y),pe(this,Me,Qs).call(this),this.emit("error",{error:new Error(`Failed to create editor host: ${y}`),context:"enterHeaderFooterMode.showOverlay"});return}const w=F(this,Gt).layout;let b;try{b=await F(this,no).ensureEditor(d,{editorHost:m,availableWidth:n.width,availableHeight:n.height,currentPageNumber:n.pageNumber,totalPageCount:((r=w==null?void 0:w.pages)==null?void 0:r.length)??1})}catch(E){console.error("[PresentationEditor] Error creating editor:",E),F(this,la).hideEditingOverlay(),pe(this,Me,Qs).call(this),this.emit("error",{error:E,context:"enterHeaderFooterMode.ensureEditor"});return}if(!b){console.warn("[PresentationEditor] Failed to ensure editor for descriptor:",d),F(this,la).hideEditingOverlay(),pe(this,Me,Qs).call(this),this.emit("error",{error:new Error("Failed to create editor instance"),context:"enterHeaderFooterMode.ensureEditor"});return}if(n.kind==="footer"){const E=m.firstElementChild;if(E instanceof HTMLElement)if(E.style.overflow="visible",n.minY!=null&&n.minY<0){const A=Math.abs(n.minY);E.style.transform=`translateY(${A}px)`}else E.style.transform=""}try{b.setEditable(!0),b.setOptions({documentMode:"editing"});try{const E=(i=b.state)==null?void 0:i.doc;if(E){const A=E.content.size-1,x=Math.max(1,A);(o=(s=b.commands)==null?void 0:s.setTextSelection)==null||o.call(s,{from:x,to:x})}}catch(E){console.warn("[PresentationEditor] Could not set cursor to end:",E)}}catch(E){console.error("[PresentationEditor] Error setting editor editable:",E),F(this,la).hideEditingOverlay(),pe(this,Me,Qs).call(this),this.emit("error",{error:E,context:"enterHeaderFooterMode.setEditable"});return}F(this,la).hideSelectionOverlay(),je(this,bl,b),je(this,yn,{mode:n.kind,kind:n.kind,headerId:d.id,sectionType:d.variant??n.sectionType??null,pageIndex:n.pageIndex,pageNumber:n.pageNumber}),pe(this,Me,Qs).call(this);try{(a=b.view)==null||a.focus()}catch(E){console.warn("[PresentationEditor] Could not focus editor:",E)}pe(this,Me,rj).call(this),pe(this,Me,ij).call(this,b),(l=F(this,jc))==null||l.notifyTargetChanged()}catch(d){console.error("[PresentationEditor] Unexpected error in enterHeaderFooterMode:",d);try{(c=F(this,la))==null||c.hideEditingOverlay(),(u=F(this,la))==null||u.showSelectionOverlay(),pe(this,Me,Qs).call(this),je(this,bl,null),je(this,yn,{mode:"body"})}catch(f){console.error("[PresentationEditor] Error during cleanup:",f)}this.emit("error",{error:d,context:"enterHeaderFooterMode"})}},CS=function(){var r,i,s,o,a,l;if(F(this,yn).mode==="body")return;const n=F(this,yn).headerId;F(this,bl)&&(F(this,bl).setEditable(!1),F(this,bl).setOptions({documentMode:"viewing"})),(r=F(this,la))==null||r.hideEditingOverlay(),(i=F(this,la))==null||i.showSelectionOverlay(),je(this,bl,null),je(this,yn,{mode:"body"}),pe(this,Me,rj).call(this),pe(this,Me,ij).call(this,F(this,Rt)),(s=F(this,jc))==null||s.notifyTargetChanged(),n&&((o=F(this,yl))==null||o.invalidate(n)),(a=F(this,no))==null||a.refresh(),je(this,Xi,!0),pe(this,Me,uo).call(this),(l=F(this,Rt).view)==null||l.focus()},nj=function(){var n,r,i,s;return F(this,yn).mode!=="body"?((r=(n=F(this,bl))==null?void 0:n.view)==null?void 0:r.dom)??((i=F(this,Rt).view)==null?void 0:i.dom)??null:((s=F(this,Rt).view)==null?void 0:s.dom)??null},rj=function(){this.emit("headerFooterModeChanged",{mode:F(this,yn).mode,kind:F(this,yn).kind,headerId:F(this,yn).headerId,sectionType:F(this,yn).sectionType,pageIndex:F(this,yn).pageIndex,pageNumber:F(this,yn).pageNumber}),pe(this,Me,fEe).call(this),pe(this,Me,hEe).call(this)},ij=function(n){this.emit("headerFooterEditingContext",{kind:F(this,yn).mode,editor:n,headerId:F(this,yn).headerId,sectionType:F(this,yn).sectionType}),pe(this,Me,sj).call(this,F(this,yn).mode==="body"?"Exited header/footer edit mode.":`Editing ${F(this,yn).kind==="header"?"Header":"Footer"} (${F(this,yn).sectionType??"default"})`)},fEe=function(){const n=F(this,aa).collaborationProvider,r=n==null?void 0:n.awareness;if(!(!r||typeof r.setLocalStateField!="function")){if(F(this,yn).mode==="body"){r.setLocalStateField("layoutSession",null);return}r.setLocalStateField("layoutSession",{kind:F(this,yn).kind,headerId:F(this,yn).headerId??null,pageNumber:F(this,yn).pageNumber??null})}},hEe=function(){if(!F(this,wl))return;if(F(this,yn).mode==="body"){F(this,wl).style.display="none",F(this,wl).textContent="";return}const n=F(this,yn).kind==="header"?"Header":"Footer",r=F(this,yn).sectionType??"default",i=F(this,yn).pageNumber!=null?`Page ${F(this,yn).pageNumber}`:"";F(this,wl).textContent=`Editing ${n} (${r}) ${i}  Press Esc to return`,F(this,wl).style.display="block"},sj=function(n){F(this,ua)&&(F(this,ua).textContent=n)},oj=function(){var n,r;Lmt((r=(n=F(this,Rt))==null?void 0:n.view)==null?void 0:r.dom,F(this,to))},aj=function(n){je(this,ep,Dmt({ariaLiveRegion:F(this,ua),sessionMode:F(this,yn).mode,isDragging:F(this,sf),visibleHost:F(this,Ln),currentTimeout:F(this,ep),announceNow:()=>{je(this,ep,null),pe(this,Me,pEe).call(this)}},n))},pEe=function(){if(!F(this,ua)||F(this,yn).mode!=="body")return;const n=Omt(this.getActiveEditor().state);n&&n.key!==F(this,ak)&&(je(this,ak,n.key),pe(this,Me,sj).call(this,n.message))},mEe=function(){return F(this,to)==="viewing"?{allowed:!1,reason:"documentMode"}:F(this,Rt).isEditable?{allowed:!0}:{allowed:!1,reason:"readOnly"}},lj=function(n){this.emit("headerFooterEditBlocked",{reason:n})},cj=function(n){if(!F(this,no))return null;if(n.headerId){const i=F(this,no).getDescriptorById(n.headerId);if(i)return i}if(n.sectionType){const s=F(this,no).getDescriptors(n.kind).find(o=>o.variant===n.sectionType);if(s)return s}const r=F(this,no).getDescriptors(n.kind);return r.length?r[0]:(console.warn("[PresentationEditor] No descriptor found for region:",n),null)},gEe=function(n){const r=F(this,Rt).converter;if(!r)return;const i=n.sectionType??"default";n.kind==="header"&&typeof r.createDefaultHeader=="function"?r.createDefaultHeader(i):n.kind==="footer"&&typeof r.createDefaultFooter=="function"&&r.createDefaultFooter(i),je(this,fg,TB(r))},Fv=function(n){return uie(F(this,Kr),n)},I6=function(){var n;return!!((n=F(this,Qt).virtualization)!=null&&n.enabled&&F(this,Qt).layoutMode==="vertical")},_S=function(n){var c;if(!pe(this,Me,I6).call(this))return;const r=F(this,Kh);if(!r||typeof r.setVirtualizationPins!="function")return;const i=F(this,Gt).layout;if(!i)return;const s=this.getActiveEditor().state,o=(s==null?void 0:s.selection)??null,a=((c=s==null?void 0:s.doc)==null?void 0:c.content.size)??null,l=Pmt({layout:i,blocks:F(this,Gt).blocks,measures:F(this,Gt).measures,selection:o?{from:o.from,to:o.to,anchor:o.anchor,head:o.head}:null,docSize:a,includeDragBuffer:!!(n!=null&&n.includeDragBuffer),isDragging:F(this,sf),dragAnchorPageIndex:F(this,tx),dragLastHitPageIndex:F(this,ro)?F(this,ro).pageIndex:null,extraPages:n==null?void 0:n.extraPages});r.setVirtualizationPins(l)},yEe=function(n,r,i){var E,A,x;const s=F(this,Gt).layout;if(!s||((E=this.getActiveEditor().state)==null?void 0:E.selection)instanceof ei)return;const a=pe(this,Me,Bv).call(this,n.clientX,n.clientY);if(!a)return;pe(this,Me,_S).call(this,{includeDragBuffer:!1,extraPages:F(this,ro)?[F(this,ro).pageIndex]:void 0});const l=$E(s,F(this,Gt).blocks,F(this,Gt).measures,{x:a.x,y:a.y},F(this,Sn),n.clientX,n.clientY,F(this,ho)??void 0);if(!l)return;if(pe(this,Me,I6).call(this)&&pe(this,Me,Fv).call(this,l.pageIndex)==null){Lr("warn","Drag finalize: endpoint page still not mounted",{pageIndex:l.pageIndex});return}const c=F(this,ro);c&&(c.pos!==l.pos||c.pageIndex!==l.pageIndex)&&Lr("info","Drag finalize refined hit",{fromPos:c.pos,toPos:l.pos,fromPageIndex:c.pageIndex,toPageIndex:l.pageIndex});const u=(A=F(this,Rt).state)==null?void 0:A.doc;if(!u)return;const d=F(this,$o).mapPosFromLayoutToCurrentDetailed(l.pos,l.layoutEpoch,1);if(!d.ok){Lr("warn","drag finalize mapping failed",d);return}const f=Math.max(0,Math.min(d.pos,u.content.size)),{selAnchor:h,selHead:m}=pe(this,Me,AS).call(this,r,f,i),y=F(this,Rt).state.selection,w=Math.min(h,m),b=Math.max(h,m);if(!(y.from===w&&y.to===b))try{const T=F(this,Rt).state.tr.setSelection(Vt.create(F(this,Rt).state.doc,h,m));(x=F(this,Rt).view)==null||x.dispatch(T),pe(this,Me,fo).call(this)}catch{}},uj=function(n){var a,l;const r=F(this,Gt).layout;if(!r)return;const i=((a=r.pageSize)==null?void 0:a.h)??Zs.h,s=((l=F(this,Qt).virtualization)==null?void 0:l.gap)??0,o=n*(i+s);F(this,Ln)&&(F(this,Ln).scrollTop=o)},dj=async function(n,r={}){const i=r.timeout??2e3,s=performance.now();return new Promise(o=>{const a=()=>{if(pe(this,Me,Fv).call(this,n)){o(!0);return}if(performance.now()-s>=i){o(!1);return}requestAnimationFrame(a)};a()})},ay=function(){var n;return(n=F(this,Qt).virtualization)!=null&&n.enabled?Math.max(0,F(this,Qt).virtualization.gap??mvt):F(this,Qt).layoutMode==="horizontal"?yvt:gvt},ly=function(){var n,r,i;return((r=(n=F(this,Gt).layout)==null?void 0:n.pageSize)==null?void 0:r.h)??((i=F(this,Qt).pageSize)==null?void 0:i.h)??Zs.h},bEe=function(){var r;const n=pe(this,Me,NS).call(this);return n?((r=n.layout.pageSize)==null?void 0:r.h)??n.region.height??1:(console.warn("[PresentationEditor] Header/footer context missing when computing page height"),1)},wEe=function(n,r){var s;const i=F(this,po);i&&Fmt({selection:n,layout:r,localSelectionLayer:i,blocks:F(this,Gt).blocks,measures:F(this,Gt).measures,cellAnchorTableBlockId:((s=F(this,np))==null?void 0:s.tableBlockId)??null,convertPageLocalToOverlayCoords:(o,a,l)=>pe(this,Me,Pm).call(this,o,a,l)})},vEe=function(n){if(F(this,to)==="viewing"){pe(this,Me,Qs).call(this);return}if(!F(this,ca)||!F(this,ja))return;const r=pe(this,Me,Pm).call(this,n.pageIndex,n.localX,n.localY);if(!r){pe(this,Me,Qs).call(this);return}F(this,ca).style.display="block",F(this,ca).style.left=`${r.x}px`,F(this,ca).style.top=`${r.y}px`,F(this,ca).style.width=`${n.width}px`,F(this,ca).style.height=`${n.height}px`;const i=`Double-click to edit ${n.kind==="header"?"header":"footer"}`;F(this,ja).textContent=i,F(this,ja).style.display="block",F(this,ja).style.left=`${r.x}px`;const s=24,o=r.y,a=n.height,l=o<s+4?r.y+a+4:r.y-s;F(this,ja).style.top=`${Math.max(0,l)}px`},Qs=function(){je(this,tp,null),F(this,ca)&&(F(this,ca).style.display="none"),F(this,ja)&&(F(this,ja).style.display="none")},NS=function(){if(F(this,yn).mode==="body"||!F(this,no))return null;const n=F(this,yn).pageIndex;if(n==null)return null;const i=(F(this,yn).mode==="header"?F(this,gg):F(this,yg)).get(n);if(!i)return console.warn("[PresentationEditor] Header/footer region not found for pageIndex:",n),null;const s=F(this,yn).mode==="header"?F(this,Vy):F(this,Uy);if(!s||s.length===0)return console.warn("[PresentationEditor] Header/footer layout results not available"),null;const o=s.find(u=>u.type===F(this,yn).sectionType)??s[0]??null;if(!o)return console.warn("[PresentationEditor] Header/footer variant not found for sectionType:",F(this,yn).sectionType),null;const a=Math.max(1,i.width),l=Math.max(1,o.layout.height??i.height??1);return{layout:{pageSize:{w:a,h:l},pages:o.layout.pages.map(u=>({number:u.number,numberText:u.numberText,fragments:u.fragments}))},blocks:o.blocks,measures:o.measures,region:i}},fj=function(n,r){var c;const i=pe(this,Me,NS).call(this),s=F(this,Gt).layout;if(!i)return console.warn("[PresentationEditor] Header/footer context unavailable for selection rects",{mode:F(this,yn).mode,pageIndex:F(this,yn).pageIndex}),[];if(!s)return[];const o=dA(i.layout,i.blocks,i.measures,n,r,void 0)??[],a=((c=i.layout.pageSize)==null?void 0:c.h)??i.region.height??1,l=pe(this,Me,ly).call(this);return o.map(u=>{const d=u.y-u.pageIndex*a;return{pageIndex:i.region.pageIndex,x:u.x+i.region.localX,y:i.region.pageIndex*l+i.region.localY+d,width:u.width,height:u.height}})},IS=function(){const n=pe(this,Me,xEe).call(this),r=pe(this,Me,EEe).call(this),i=n!==F(this,Q1)||r!==F(this,ex);return i&&(je(this,Q1,n),je(this,ex,r)),i},xEe=function(){var i;const n=(i=F(this,dg))==null?void 0:i.mode;if(n)return n;const r=pe(this,Me,SEe).call(this);return r!=null&&r.onlyOriginalShown?"original":r!=null&&r.onlyModifiedShown||F(this,to)==="viewing"?"final":"review"},EEe=function(){var n;return typeof((n=F(this,dg))==null?void 0:n.enabled)=="boolean"?F(this,dg).enabled:!0},SEe=function(){var r;const n=(r=F(this,Rt))==null?void 0:r.state;if(!n)return null;try{return Ps.getState(n)??null}catch(i){return _e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] Failed to get track changes plugin state:",i),null}},AEe=function(){var c;const n=(c=F(this,Rt))==null?void 0:c.converter,r=(n==null?void 0:n.pageStyles)??{},i=r.pageSize??{},s=r.pageMargins??{},o={w:_u(i.width)??Zs.w,h:_u(i.height)??Zs.h},a={top:_u(s.top)??vs.top,right:_u(s.right)??vs.right,bottom:_u(s.bottom)??vs.bottom,left:_u(s.left)??vs.left,..._u(s.header)!=null?{header:_u(s.header)}:{},..._u(s.footer)!=null?{footer:_u(s.footer)}:{}},l=Qft(r.columns);return{pageSize:o,margins:a,columns:l}},R6=function(){var m,y,w;const n=F(this,Qt).zoom??1,r=F(this,Qt).layoutMode??"vertical",i=(m=F(this,Gt).layout)==null?void 0:m.pages,s=pe(this,Me,ay).call(this),o=((y=F(this,Qt).pageSize)==null?void 0:y.w)??Zs.w,a=((w=F(this,Qt).pageSize)==null?void 0:w.h)??Zs.h;let l=o,c=a,u=0,d=0;if(Array.isArray(i)&&i.length>0?i.forEach((b,E)=>{const A=b.size&&typeof b.size.w=="number"&&b.size.w>0?b.size.w:o,x=b.size&&typeof b.size.h=="number"&&b.size.h>0?b.size.h:a;l=Math.max(l,A),c=Math.max(c,x),u+=A,d+=x,E<i.length-1&&(u+=s,d+=s)}):(u=o,d=a),r==="horizontal"){const b=u*n,E=c*n;F(this,Sn).style.width=`${b}px`,F(this,Sn).style.minWidth=`${b}px`,F(this,Sn).style.minHeight=`${E}px`,F(this,Sn).style.transform="",F(this,Kr).style.width=`${u}px`,F(this,Kr).style.minHeight=`${c}px`,F(this,Kr).style.transformOrigin="top left",F(this,Kr).style.transform=n===1?"":`scale(${n})`,F(this,_i).style.width=`${u}px`,F(this,_i).style.height=`${c}px`,F(this,_i).style.transformOrigin="top left",F(this,_i).style.transform=n===1?"":`scale(${n})`;return}const f=l*n,h=d*n;F(this,Sn).style.width=`${f}px`,F(this,Sn).style.minWidth=`${f}px`,F(this,Sn).style.minHeight=`${h}px`,F(this,Sn).style.transform="",F(this,Kr).style.width=`${l}px`,F(this,Kr).style.minHeight=`${d}px`,F(this,Kr).style.transformOrigin="top left",F(this,Kr).style.transform=n===1?"":`scale(${n})`,F(this,_i).style.width=`${l}px`,F(this,_i).style.height=`${d}px`,F(this,_i).style.transformOrigin="top left",F(this,_i).style.transform=n===1?"":`scale(${n})`},TEe=function(n){return Y1e({painterHost:F(this,Kr),viewportHost:F(this,Sn),zoom:F(this,Qt).zoom??1,pageIndex:n})},Pm=function(n,r,i){var a,l;const s=((a=F(this,Qt).pageSize)==null?void 0:a.h)??Zs.h,o=((l=F(this,Gt).layout)==null?void 0:l.pageGap)??0;return Zft({painterHost:F(this,Kr),viewportHost:F(this,Sn),zoom:F(this,Qt).zoom??1,pageIndex:n,pageLocalX:r,pageLocalY:i,pageHeight:s,pageGap:o})},hj=function(n,r){const i=F(this,Gt).layout;return i?Wft({painterHost:F(this,Kr),layout:i,domPositionIndex:F(this,J1),rebuildDomPositionIndex:()=>pe(this,Me,SS).call(this),zoom:F(this,Qt).zoom??1,pageHeight:pe(this,Me,ly).call(this),pageGap:i.pageGap??pe(this,Me,ay).call(this)},n,r):null},M6=function(n){return Gft({painterHost:F(this,Kr),domPositionIndex:F(this,J1),rebuildDomPositionIndex:()=>pe(this,Me,SS).call(this),zoom:F(this,Qt).zoom??1},n)},Bv=function(n,r){return Jft({viewportHost:F(this,Sn),visibleHost:F(this,Ln),zoom:F(this,Qt).zoom??1,getPageOffsetX:i=>pe(this,Me,TEe).call(this,i)},n,r)},pj=function(n,r=!0){return Vmt({layout:F(this,Gt).layout,blocks:F(this,Gt).blocks,measures:F(this,Gt).measures,painterHost:F(this,Kr),viewportHost:F(this,Sn),visibleHost:F(this,Ln),zoom:F(this,Qt).zoom??1},n,r)},mj=function(n){const r=pe(this,Me,pj).call(this,n,!0);let i=null;try{i=pe(this,Me,M6).call(this,n)}catch(s){_e.env.NODE_ENV==="development"&&console.warn("[PresentationEditor] DOM caret computation failed in #computeCaretLayoutRect:",s)}return i&&r?{pageIndex:i.pageIndex,x:i.x,y:i.y,height:r.height}:r},gj=function(){var o,a;if(F(this,yn).mode!=="body")return F(this,yn).pageIndex??0;const n=F(this,Gt).layout,r=(o=F(this,Rt).state)==null?void 0:o.selection;if(!n||!r)return 0;const i=dA(n,F(this,Gt).blocks,F(this,Gt).measures,r.from,r.to,F(this,ho)??void 0)??[];if(i.length>0)return((a=i[0])==null?void 0:a.pageIndex)??0;const s=r.from;for(let l=0;l<n.pages.length;l++){const c=n.pages[l];for(const u of c.fragments){const d=u;if(d.pmStart!=null&&d.pmEnd!=null&&s>=d.pmStart&&s<=d.pmEnd)return l}}return 0},kEe=function(n,r){const i=n==="header"?F(this,gg):F(this,yg);return i.get(r)??i.values().next().value??null},Nh=function(n,r){console.error("[PresentationEditor] Layout error",r),je(this,Xh,{phase:n,error:r,timestamp:Date.now()}),n==="initialization"?je(this,lg,"failed"):je(this,lg,F(this,Gt).layout?"degraded":"failed"),this.emit("layoutError",F(this,Xh)),F(this,Bc)&&F(this,Bc).call(this,{type:"error",data:F(this,Xh)}),pe(this,Me,CEe).call(this,r)},L6=function(n,r){return n instanceof Error?(n.message=`[${r}] ${n.message}`,n):new Error(`[${r}] ${String(n)}`)},CEe=function(n){const r=F(this,Ln).ownerDocument??document;if(!F(this,cg)){const i=r.createElement("div");i.className="presentation-editor__layout-error",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="space-between",i.style.gap="8px",i.style.padding="8px 12px",i.style.background="#FFF6E5",i.style.border="1px solid #F5B971",i.style.borderRadius="6px",i.style.marginBottom="8px";const s=r.createElement("span");i.appendChild(s);const o=r.createElement("button");o.type="button",o.textContent="Reload layout",o.style.border="none",o.style.borderRadius="4px",o.style.background="#F5B971",o.style.color="#3F2D00",o.style.padding="6px 10px",o.style.cursor="pointer",o.addEventListener("click",()=>{je(this,Xh,null),pe(this,Me,yj).call(this),je(this,Xi,!0),pe(this,Me,uo).call(this)}),i.appendChild(o),F(this,Ln).prepend(i),je(this,cg,i),je(this,ug,s)}F(this,ug)&&(F(this,ug).textContent="Layout engine hit an error. Your document is safe  try reloading layout.",F(this,Qt).debugLabel&&(F(this,ug).textContent+=` (${F(this,Qt).debugLabel}: ${n.message})`))},yj=function(){var n;(n=F(this,cg))==null||n.remove(),je(this,cg,null),je(this,ug,null)},_Ee=function(){var r,i;const n=(i=(r=F(this,Rt))==null?void 0:r.state)==null?void 0:i.doc;if(!(!n||!F(this,Kr)))try{F(this,Kr).querySelectorAll(".superdoc-line span[data-pm-start]").forEach(o=>{var a,l,c,u,d,f;try{if(o.closest(".superdoc-page-header, .superdoc-page-footer"))return;const h=Number(o.dataset.pmStart??"NaN");if(!Number.isFinite(h))return;const m=Math.max(0,Math.min(h,n.content.size)),y=n.resolve(m);let w=null;for(let k=y.depth;k>=0;k--){const _=y.node(k);if(_.type.name==="run"){w=_;break}}let b=((l=(a=w==null?void 0:w.attrs)==null?void 0:a.runProperties)==null?void 0:l.vertAlign)??null,E=((u=(c=w==null?void 0:w.attrs)==null?void 0:c.runProperties)==null?void 0:u.position)??null,A=((f=(d=w==null?void 0:w.attrs)==null?void 0:d.runProperties)==null?void 0:f.fontSize)??null;if(!b&&E==null&&w&&w.forEach(k=>{var N;if(!k.isText||!((N=k.marks)!=null&&N.length))return;const _=rC(k.marks);_.vertAlign&&!b&&(b=_.vertAlign),_.position!=null&&E==null&&(E=_.position),_.fontSize!=null&&A==null&&(A=_.fontSize)}),b==null&&E==null)return;const x=[];if(E!=null&&Number.isFinite(E)){const k=Bg(E);Number.isFinite(k)&&x.push(`vertical-align: ${k}pt`)}else if(b==="superscript"||b==="subscript")if(x.push(`vertical-align: ${b==="superscript"?"super":"sub"}`),A!=null&&Number.isFinite(A)){const k=Bg(A*eP);Number.isFinite(k)?x.push(`font-size: ${k}pt`):x.push(`font-size: ${eP*100}%`)}else x.push(`font-size: ${eP*100}%`);else b==="baseline"&&x.push("vertical-align: baseline");if(!x.length)return;const T=o.getAttribute("style"),R=T?`${T}; ${x.join("; ")}`:x.join("; ");o.setAttribute("style",R)}catch(h){console.error("Failed to apply vertical alignment to span:",h)}})}catch(s){console.error("Failed to apply vertical alignment to layout:",s)}},st(pl,$y,new Map),pl.FALLBACK_COLORS=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"],pl.CURSOR_STYLES={CARET_WIDTH:2,LABEL_FONT_SIZE:13,LABEL_PADDING:"2px 6px",LABEL_OFFSET:"-1.05em",SELECTION_BORDER_RADIUS:"2px",MAX_LABEL_LENGTH:30},pl.ANCHOR_NAV_TIMEOUT_MS=2e3;let bf=pl;const NEe=hi.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseDOM:t=>{var e;return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderDOM:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),IEe=hi.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseDOM:t=>{var e;return(e=t.style.fontFamily)==null?void 0:e.replace(/['"]+/g,"")},renderDOM:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),REe=hi.create({name:"fontSize",addOptions(){return{types:["textStyle","tableCell"],defaults:{value:12,unit:"pt",min:8,max:96}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseDOM:t=>t.style.fontSize,renderDOM:t=>{if(!t.fontSize)return{};let[e,n]=mT(t.fontSize);return Number.isNaN(e)?{}:(n=n||this.options.defaults.unit,{style:`font-size: ${e}${n}`})}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>{let n,r;if(typeof t=="number"?(n=t,r=null):[n,r]=mT(t),Number.isNaN(n))return!1;let{min:i,max:s,unit:o}=this.options.defaults;return n=mI(Number(n),i,s),r=r||o,e().setMark("textStyle",{fontSize:`${n}${r}`}).run()},unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),MEe=hi.create({name:"textAlign",addOptions(){return{alignments:["left","center","right","justify"]}},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?e.updateAttributes("paragraph",{"paragraphProperties.justification":t}):!1,unsetTextAlign:()=>({commands:t})=>t.resetAttributes("paragraph","paragraphProperties.justification")}},addShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),LEe=hi.create({name:"formatCommands",addOptions(){return{}},addStorage(){return{storedStyle:null}},addCommands(){return{toggleMarkCascade:Xve,clearFormat:()=>({chain:t})=>t().clearNodes().unsetAllMarks().run(),clearMarksFormat:()=>({chain:t})=>t().unsetAllMarks().run(),clearNodesFormat:()=>({chain:t})=>t().clearNodes().run(),copyFormat:()=>({chain:t})=>{if(!this.storage.storedStyle){const s=R2(this.editor.state);return this.storage.storedStyle=s,!0}if(!this.storage.storedStyle.length)return this.storage.storedStyle=null,t().clearFormat().run();const e=this.storage.storedStyle,n=[];e.forEach(s=>{const{type:o,attrs:a}=s,{name:l}=o;l==="textStyle"?Object.keys(a).forEach(c=>{if(!a[c])return;const u={};u[c]=a[c],n.push({name:c,attrs:u})}):n.push({name:l,attrs:a})});const r={bold:["setBold","unsetBold"],italic:["setItalic","unsetItalic"],underline:["setUnderline","unsetUnderline"],color:["setColor","setColor",null],fontSize:["setFontSize","unsetFontSize"],fontFamily:["setFontFamily","unsetFontFamily"]};let i=t();return Object.keys(r).forEach(s=>{const[o,a,l]=r[s],c=n.find(f=>f.name===s),u=(c==null?void 0:c.attrs)&&(c==null?void 0:c.attrs[s]);let d={};!c&&!u?d={command:a,argument:l}:d={command:o,argument:c.attrs[s]||l},i=i[d.command](d.argument)}),this.storage.storedStyle=null,i}}},addShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.clearFormat()}}});function Tvt(t={}){return new Mr({view(e){return new kvt(e,t)}})}class kvt{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let m=h.getBoundingClientRect(),y=d?m.bottom:m.top;d&&f&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*a;r={left:m.left,right:m.right,top:y-w,bottom:y+w}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=o0e(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const DEe=hi.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:2,class:void 0}},addPmPlugins(){return[Tvt(this.options)]}});class ds extends _n{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ds.valid(r)?new ds(r):_n.near(r)}content(){return Ut.empty}eq(e){return e instanceof ds&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ds(e.resolve(n.pos))}getBookmark(){return new hW(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Cvt(e)||!_vt(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ds.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(ds.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ln.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(ds.valid(a))return a}return null}}}ds.prototype.visible=!1;ds.findFrom=ds.findGapCursorFrom;_n.jsonID("gapcursor",ds);class hW{constructor(e){this.pos=e}map(e){return new hW(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ds.valid(n)?new ds(n):_n.near(n)}}function OEe(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Cvt(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||OEe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function _vt(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||OEe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Nvt(){return new Mr({props:{decorations:Lvt,createSelectionBetween(t,e,n){return e.pos==n.pos&&ds.valid(n)?new ds(n):null},handleClick:Rvt,handleKeyDown:Ivt,handleDOMEvents:{beforeinput:Mvt}}})}const Ivt=DU({ArrowLeft:J5("horiz",-1),ArrowRight:J5("horiz",1),ArrowUp:J5("vert",-1),ArrowDown:J5("vert",1)});function J5(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Vt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=ds.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new ds(c))),!0):!1}}function Rvt(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ds.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ln.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ds(r))),!0)}function Mvt(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ds))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Nt.empty;for(let o=r.length-1;o>=0;o--)i=Nt.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Ut(i,0,0));return s.setSelection(Vt.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Lvt(t){if(!(t.selection instanceof ds))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",An.create(t.doc,[Qn.widget(t.selection.head,e,{key:"gapcursor"})])}const Dvt=hi.create({name:"gapCursor",addOptions(){return{}},addPmPlugins(){return[Nvt()]},extendNodeSchema(t){return{allowGapCursor:Ni(kn(t,"allowGapCursor",{name:t.name,options:t.options,storage:t.storage}))??null}}}),Ovt=hi.create({name:"collaborationCursor",priority:999,addOptions(){return{provider:null,user:{name:null,color:null}}},addStorage(){return{users:[]}},addPmPlugins(){const{collaborationProvider:t=null}=this.editor.options;return t?[Yst(t.awareness,{cursorBuilder:Pvt})]:[]}}),Pvt=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name||t.email),null),e.insertBefore(n,null),e},R1="aiMark",Q5="aiAnimationMark",PEe="aiLoaderNode",Fvt=nl.create({name:R1,group:"ai",inclusive:!1,excludeFromSummaryJSON:!0,addOptions(){return{htmlAttributes:{class:"sd-ai-highlight"}}},addAttributes(){return{id:{default:null,rendered:!1}}},parseDOM(){return[{tag:R1}]},renderDOM({htmlAttributes:t}){return[R1,an.mergeAttributes(this.options.htmlAttributes,t)]}}),Bvt=nl.create({name:Q5,group:"ai",inclusive:!1,spanning:!1,excludes:Q5,excludeFromSummaryJSON:!0,addOptions(){return{htmlAttributes:{}}},addAttributes(){return{id:{default:null,rendered:!1},class:{default:null,rendered:!0},dataMarkId:{default:null,rendered:!0}}},parseDOM(){return[{tag:Q5}]},renderDOM({htmlAttributes:t}){return[Q5,an.mergeAttributes(this.options.htmlAttributes,t)]}}),jvt="data:image/svg+xml,%3csvg%20fill='hsla(278,%2077.40%25,%2020.80%25,%200.65)'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='4'%20cy='12'%20r='0'%3e%3canimate%20begin='0;spinner_z0Or.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='0;3'%20fill='freeze'/%3e%3canimate%20begin='spinner_OLMs.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='4;12'%20fill='freeze'/%3e%3canimate%20begin='spinner_UHR2.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='12;20'%20fill='freeze'/%3e%3canimate%20id='spinner_lo66'%20begin='spinner_Aguh.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='3;0'%20fill='freeze'/%3e%3canimate%20id='spinner_z0Or'%20begin='spinner_lo66.end'%20attributeName='cx'%20dur='0.001s'%20values='20;4'%20fill='freeze'/%3e%3c/circle%3e%3ccircle%20cx='4'%20cy='12'%20r='3'%3e%3canimate%20begin='0;spinner_z0Or.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='4;12'%20fill='freeze'/%3e%3canimate%20begin='spinner_OLMs.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='12;20'%20fill='freeze'/%3e%3canimate%20id='spinner_JsnR'%20begin='spinner_UHR2.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='3;0'%20fill='freeze'/%3e%3canimate%20id='spinner_Aguh'%20begin='spinner_JsnR.end'%20attributeName='cx'%20dur='0.001s'%20values='20;4'%20fill='freeze'/%3e%3canimate%20begin='spinner_Aguh.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='0;3'%20fill='freeze'/%3e%3c/circle%3e%3ccircle%20cx='12'%20cy='12'%20r='3'%3e%3canimate%20begin='0;spinner_z0Or.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='12;20'%20fill='freeze'/%3e%3canimate%20id='spinner_hSjk'%20begin='spinner_OLMs.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='3;0'%20fill='freeze'/%3e%3canimate%20id='spinner_UHR2'%20begin='spinner_hSjk.end'%20attributeName='cx'%20dur='0.001s'%20values='20;4'%20fill='freeze'/%3e%3canimate%20begin='spinner_UHR2.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='0;3'%20fill='freeze'/%3e%3canimate%20begin='spinner_Aguh.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='4;12'%20fill='freeze'/%3e%3c/circle%3e%3ccircle%20cx='20'%20cy='12'%20r='3'%3e%3canimate%20id='spinner_4v5M'%20begin='0;spinner_z0Or.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='3;0'%20fill='freeze'/%3e%3canimate%20id='spinner_OLMs'%20begin='spinner_4v5M.end'%20attributeName='cx'%20dur='0.001s'%20values='20;4'%20fill='freeze'/%3e%3canimate%20begin='spinner_OLMs.end'%20attributeName='r'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='0;3'%20fill='freeze'/%3e%3canimate%20begin='spinner_UHR2.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='4;12'%20fill='freeze'/%3e%3canimate%20begin='spinner_Aguh.end'%20attributeName='cx'%20calcMode='spline'%20dur='0.5s'%20keySplines='.36,.6,.31,1'%20values='12;20'%20fill='freeze'/%3e%3c/circle%3e%3c/svg%3e",$vt=Tr.create({name:PEe,excludeFromSummaryJSON:!0,group:"inline",inline:!0,atom:!0,selectable:!1,draggable:!1,addOptions(){return{htmlAttributes:{class:"sd-ai-loader",contentEditable:"false","aria-label":"AI loader node"}}},parseDOM(){return[{tag:"span.sd-ai-loader"}]},renderDOM({htmlAttributes:t}){const e=document.createElement("span");Object.entries(an.mergeAttributes(this.options.htmlAttributes,t)).forEach(([r,i])=>e.setAttribute(r,i));const n=document.createElement("img");return n.src=jvt,n.alt="loading...",n.width=100,n.height=50,e.appendChild(n),e}}),e_=new ni("ai"),FEe=hi.create({name:"ai",addCommands(){return{insertAiMark:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{$from:r,$to:i}=n;return r.pos===i.pos?!1:(t.addMark(r.pos,i.pos,this.editor.schema.marks[R1].create({id:"ai-highlight"})),e&&e(t),!0)},removeSelectionAfterAiPulse:()=>({tr:t,dispatch:e,state:n})=>{const{selection:r}=t,{$to:i}=r;return t.setSelection(n.selection.constructor.create(t.doc,i.pos,i.pos)),e&&e(t),!0},updateAiHighlightStyle:t=>({tr:e,dispatch:n})=>(e.setMeta(e_,{type:"updateStyle",className:t}),n&&n(e),!0),clearAiHighlightStyle:()=>({tr:t,dispatch:e})=>(t.setMeta(e_,{type:"updateStyle",className:null}),e&&e(t),!0),removeAiMark:(t=R1)=>({tr:e,dispatch:n,state:r})=>{const{doc:i}=r;let s=!1;return i.descendants((o,a)=>{const{marks:l=[]}=o;l.find(u=>u.type.name===t)&&(s=!0,e.removeMark(a,a+o.nodeSize,r.schema.marks[t]))}),s?(n&&n(e),!0):!1},removeAiNode:(t=PEe)=>({tr:e,dispatch:n,state:r})=>{const{doc:i}=r,s=[];return i.descendants((o,a)=>{o.type.name===t&&s.push(a)}),s.length===0?!1:(s.sort((o,a)=>a-o),s.forEach(o=>{const a=i.nodeAt(o);a&&e.delete(o,o+a.nodeSize)}),n&&n(e),!0)}}},addPmPlugins(){const t=this.editor;return[new Mr({key:e_,state:{init(){return{decorations:An.empty,highlightColor:"#6366f1",customClass:null}},apply(n,r,i,s){const o=n.getMeta(e_);let a=r.customClass;if(o&&o.type==="updateStyle"&&(a=o.className),n.docChanged&&a==="sd-ai-highlight-pulse"){let u=!1;n.steps.forEach(d=>{d.slice&&d.slice.content.size>0&&(u=!0)}),u&&(a=null)}if(!n.docChanged&&!o)return r;const{decorations:l}=zvt(t,s.doc,r.highlightColor,a)||{},c=An.create(s.doc,l);return{...r,decorations:c,customClass:a}}},props:{decorations(n){return this.getState(n).decorations}}})]}}),zvt=(t,e,n,r=null)=>{const i=[];return e.descendants((s,o)=>{const{marks:a=[]}=s;if(a.find(c=>c.type.name===R1)){const c={style:`background-color: ${n}33; border-radius: 4px; transition: background-color 250ms ease;`,class:"sd-ai-highlight-element"};r&&(c.class+=` ${r}`);const u=Qn.inline(o,o+s.nodeSize,c);i.push(u)}}),{decorations:i}};function _T(t){var e,n,r;return t?typeof t.hitTest=="function"&&t.element instanceof HTMLElement?t.element:((e=t.presentationEditor)==null?void 0:e.element)??((n=t.view)==null?void 0:n.dom)??((r=t.options)==null?void 0:r.element)??null:null}function Hvt(t,e={}){var o,a;const n=_T(t);if(!n)return null;const r=n.getBoundingClientRect();let i,s;if(typeof e.clientX=="number"&&typeof e.clientY=="number")i=e.clientX-r.left,s=e.clientY-r.top;else if((o=t==null?void 0:t.state)!=null&&o.selection){const l=t.state.selection.from,c=(a=t.coordsAtPos)==null?void 0:a.call(t,l);c&&(i=c.left-r.left,s=c.top-r.top)}return!Number.isFinite(i)||!Number.isFinite(s)?null:{left:i,top:s}}function Vvt(t){if(!t)return null;let e=t.parentElement;for(;e&&e!==document.body&&e!==document.documentElement;){try{const n=window.getComputedStyle(e),r=n.transform,i=n.filter,s=n.backdropFilter||n.webkitBackdropFilter,o=n.perspective,a=n.willChange,l=n.contain;if(r&&r!=="none"||i&&i!=="none"||s&&s!=="none"||o&&o!=="none")return e;if(a&&a!=="auto"){const c=a.split(",").map(u=>u.trim());if(c.includes("transform")||c.includes("perspective"))return e}if(l&&/paint|layout|strict|content/.test(l))return e}catch(n){console.warn("SlashMenu: Failed to get computed style for element",e,n)}e=e.parentElement}return null}const Bh=new ni("slashMenu"),Uvt=100,Wvt=28,qvt=10,Gvt=10,Kvt=5e3,Xvt=hi.create({name:"slashMenu",addOptions(){return{}},addPmPlugins(){var o;const t=this.editor;if((o=t.options)!=null&&o.isHeadless)return[];let e=!1,n=null;const r=()=>{var a;return!!((a=t.options)!=null&&a.disableContextMenu)},i=(a={})=>({open:!1,selected:null,anchorPos:null,menuPosition:null,disabled:r(),...a});return[new Mr({key:Bh,state:{init:()=>i(),apply(a,l){var d,f,h,m,y,w;const c=a.getMeta(Bh),u=r();if(u)return l.open&&t.emit("slashMenu:close"),i({disabled:!0});if(!c)return l.disabled!==u?i({...l,disabled:u}):l;switch(c.type){case"open":{if(typeof c.pos!="number"||c.pos<0||c.pos>a.doc.content.size)return console.warn("SlashMenu: Invalid position",c.pos),i(l);let b=0,E=0,A=!1;if(typeof c.clientX=="number"&&typeof c.clientY=="number")b=c.clientX,E=c.clientY,A=!0;else{const L=Hvt(t,c);if(L){const M=((d=t.presentationEditor)==null?void 0:d.element)??((f=t.view)==null?void 0:f.dom)??((h=t.options)==null?void 0:h.element);if(M)try{const C=M.getBoundingClientRect();b=C.left+L.left,E=C.top+L.top}catch(C){return console.warn("SlashMenu: Failed to get surface bounds",C),i(l)}}}const x=((m=t.presentationEditor)==null?void 0:m.element)??((y=t.view)==null?void 0:y.dom)??((w=t.options)==null?void 0:w.element),T=Vvt(x);if(T)try{const L=T.getBoundingClientRect();b-=L.left,E-=L.top,b+=T.scrollLeft||0,E+=T.scrollTop||0}catch(L){console.warn("SlashMenu: Failed to adjust for containing block",L)}const R=A?qvt:Uvt,k=A?Gvt:Wvt,_={left:`${b+R}px`,top:`${E+k}px`},N={...l,open:!0,anchorPos:c.pos,menuPosition:_};return t.emit("slashMenu:open",{menuPosition:_}),i(N)}case"select":return i({...l,selected:c.id});case"close":return t.emit("slashMenu:close"),i({...l,open:!1,anchorPos:null});default:return i({...l,disabled:u})}}},view(a){const l=()=>{if(r())return;Bh.getState(a.state).open&&a.dispatch(a.state.tr.setMeta(Bh,{type:"updatePosition"}))};return window.addEventListener("scroll",l,!0),window.addEventListener("resize",l),{destroy(){window.removeEventListener("scroll",l,!0),window.removeEventListener("resize",l),n&&(clearTimeout(n),n=null)}}},props:{handleKeyDown(a,l){if(r())return!1;const c=this.getState(a.state);if(l.key==="/"&&e)return!1;if(l.key==="/"&&!c.open){const{$cursor:u}=a.state.selection;if(!u||!(u.parent.type.name==="paragraph"))return!1;const f=u.parent.textContent.slice(0,u.parentOffset);return!f||f.endsWith(" ")?(l.preventDefault(),e=!0,n&&clearTimeout(n),n=setTimeout(()=>{e=!1,n=null},Kvt),a.dispatch(a.state.tr.setMeta(Bh,{type:"open",pos:u.pos})),!0):!1}if(c.open&&(l.key==="Escape"||l.key==="ArrowLeft")){const{anchorPos:u}=c;if(a.dispatch(a.state.tr.setMeta(Bh,{type:"close"})),u!==null){const d=a.state.tr.setSelection(a.state.selection.constructor.near(a.state.doc.resolve(u)));a.dispatch(d),a.focus()}return!0}return!1}}})]}});class BEe{constructor(e){Mt(this,"node");Mt(this,"view");Mt(this,"getPos");Mt(this,"decorations");Mt(this,"innerDecorations");Mt(this,"editor");Mt(this,"extension");Mt(this,"htmlAttributes");Mt(this,"root");Mt(this,"isDragging",!1);this.node=e.node,this.view=e.editor.view,this.getPos=e.getPos,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.editor=e.editor,this.extension=e.extension,this.htmlAttributes=e.htmlAttributes,this.mount(e)}mount(){}get dom(){return this.root}get contentDOM(){return null}update(e,n,r){return e.type!==this.node.type?!1:(this.node=e,this.decorations=n,this.innerDecorations=r,this.updateHTMLAttributes(),!0)}stopEvent(e){var y;if(!this.dom)return!1;const n=e.target;if(!(this.dom.contains(n)&&!((y=this.contentDOM)!=null&&y.contains(n))))return!1;const i=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!i)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=ln.isSelectable(this.node),d=e.type==="copy",f=e.type==="paste",h=e.type==="cut",m=e.type==="mousedown";if(!c&&u&&i&&e.target===this.dom&&e.preventDefault(),c&&i&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&a&&!l&&m){const w=n.closest("[data-drag-handle]");w&&(this.dom===w||this.dom.contains(w))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||s||d||f||h||m&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM||this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){var e;this.dom.remove(),(e=this.contentDOM)==null||e.remove()}updateAttributes(e){const n=this.getPos();if(typeof n=="number")return this.view.dispatch(this.view.state.tr.setNodeMarkup(n,void 0,{...this.node.attrs,...e}))}updateHTMLAttributes(){const{extensionService:e}=this.editor,{attributes:n}=e,r=n.filter(i=>i.type===this.node.type.name);this.htmlAttributes=an.getAttributesToRender(this.node,r)}createDragHandle(){const e=document.createElement("span");e.classList.add("sd-structured-content-draggable"),e.draggable=!0,e.contentEditable="false",e.dataset.dragHandle="";const n=document.createElement("span");return n.textContent=this.node.attrs.alias||"Structured content",e.append(n),e}onDragStart(e){var u,d,f,h,m;const{view:n}=this.editor,r=e.target,i=r.nodeType===3?(u=r.parentElement)==null?void 0:u.closest("[data-drag-handle]"):r.closest("[data-drag-handle]");if(!this.dom||(d=this.contentDOM)!=null&&d.contains(r)||!i)return;let s=0,o=0;if(this.dom!==i){const y=this.dom.getBoundingClientRect(),w=i.getBoundingClientRect(),b=e.offsetX??((f=e.nativeEvent)==null?void 0:f.offsetX),E=e.offsetY??((h=e.nativeEvent)==null?void 0:h.offsetY);s=w.x-y.x+b,o=w.y-y.y+E}(m=e.dataTransfer)==null||m.setDragImage(this.dom,s,o);const a=this.getPos();if(typeof a!="number")return;const l=ln.create(n.state.doc,a),c=n.state.tr.setSelection(l);n.dispatch(c)}}class Yvt extends BEe{constructor(e){super(e)}mount(){this.buildView()}get contentDOM(){var n;return((n=this.dom)==null?void 0:n.querySelector(`.${$se}`))||null}createElement(){const e=document.createElement("span");e.classList.add(jEe),e.setAttribute("data-structured-content","");const n=document.createElement("span");n.classList.add($se),e.append(n);const r=an.mergeAttributes(this.htmlAttributes);return gT(e,{...r}),{element:e,contentElement:n}}buildView(){const{element:e}=this.createElement(),n=this.createDragHandle();e.prepend(n),e.addEventListener("dragstart",r=>this.onDragStart(r)),this.root=e}updateView(){const e=an.mergeAttributes(this.htmlAttributes);gT(this.dom,{...e})}update(e,n,r){return super.update(e,n,r)?(this.updateView(),!0):!1}}const jEe="sd-structured-content",$se="sd-structured-content__content",Zvt=Tr.create({name:"structuredContent",group:"inline structuredContent",inline:!0,content:"inline*",isolating:!0,atom:!1,draggable:!0,addOptions(){return{htmlAttributes:{class:jEe,"aria-label":"Structured content node"}}},addAttributes(){return{id:{default:null,parseDOM:t=>t.getAttribute("data-id"),renderDOM:t=>t.id?{"data-id":t.id}:{}},tag:{default:null,parseDOM:t=>t.getAttribute("data-tag"),renderDOM:t=>t.tag?{"data-tag":t.tag}:{}},alias:{default:null,parseDOM:t=>t.getAttribute("data-alias"),renderDOM:t=>t.alias?{"data-alias":t.alias}:{}},sdtPr:{rendered:!1}}},parseDOM(){return[{tag:"span[data-structured-content]"}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t,{"data-structured-content":""}),0]},addNodeView(){return t=>new Yvt({...t})}});class Jvt extends BEe{constructor(e){super(e)}mount(){this.buildView()}get contentDOM(){var n;return((n=this.dom)==null?void 0:n.querySelector(`.${zse}`))||null}createElement(){const e=document.createElement("div");e.classList.add($Ee),e.setAttribute("data-structured-content-block","");const n=document.createElement("div");n.classList.add(zse),e.append(n);const r=an.mergeAttributes(this.htmlAttributes);return gT(e,{...r}),{element:e,contentElement:n}}buildView(){const{element:e}=this.createElement(),n=this.createDragHandle();e.prepend(n),e.addEventListener("dragstart",r=>this.onDragStart(r)),this.root=e}updateView(){const e=an.mergeAttributes(this.htmlAttributes);gT(this.dom,{...e})}update(e,n,r){return super.update(e,n,r)?(this.updateView(),!0):!1}}const $Ee="sd-structured-content-block",zse="sd-structured-content-block__content",Qvt=Tr.create({name:"structuredContentBlock",group:"block structuredContent",content:"block*",isolating:!0,atom:!1,draggable:!0,addOptions(){return{htmlAttributes:{class:$Ee,"aria-label":"Structured content block node"}}},addAttributes(){return{id:{default:null,parseDOM:t=>t.getAttribute("data-id"),renderDOM:t=>t.id?{"data-id":t.id}:{}},tag:{default:null,parseDOM:t=>t.getAttribute("data-tag"),renderDOM:t=>t.tag?{"data-tag":t.tag}:{}},alias:{default:null,parseDOM:t=>t.getAttribute("data-alias"),renderDOM:t=>t.alias?{"data-alias":t.alias}:{}},sdtPr:{rendered:!1}}},parseDOM(){return[{tag:"div[data-structured-content-block]"}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t,{"data-structured-content-block":""}),0]},addNodeView(){return t=>new Jvt({...t})}});function qI(t,e){return M2(e.doc,r=>{const i=["structuredContent","structuredContentBlock"].includes(r.type.name);return Array.isArray(t)?i&&t.includes(r.attrs.id):i&&r.attrs.id===t})}function bj(t){return!t||typeof t!="object"?null:JSON.stringify(t)}function pW(t){if(typeof t!="string"||!t.startsWith("{"))return null;try{const e=JSON.parse(t);return e&&typeof e=="object"?e:null}catch{return null}}function e1t(t){const e=pW(t);return e!==null&&typeof e.group=="string"}function zEe(t){const e=pW(t);return e&&typeof e.group=="string"?e.group:null}function wj(t,e){const n=Array.isArray(t)?t:[t];return M2(e.doc,i=>{if(!["structuredContent","structuredContentBlock"].includes(i.type.name))return!1;const o=zEe(i.attrs.tag);return o?n.includes(o):!1})}function t1t(t){return M2(t.doc,n=>n.type.name==="structuredContent"||n.type.name==="structuredContentBlock")}function n1t(t){return M2(t.doc,n=>n.type.name==="structuredContent")}function r1t(t){return M2(t.doc,n=>n.type.name==="structuredContentBlock")}function HEe(t,e){if(!t||!e)return[];const n=qI(t,e).filter(({node:o})=>o.type.name==="structuredContentBlock");if(!n.length)return[];const{pos:r,node:i}=n[0],s=[];return i.descendants((o,a)=>{if(o.type.name==="table"){const l=r+1+a;s.push({node:o,pos:l})}}),s}const i1t=Object.freeze(Object.defineProperty({__proto__:null,createTagObject:bj,getGroup:zEe,getStructuredContentBlockTags:r1t,getStructuredContentByGroup:wj,getStructuredContentInlineTags:n1t,getStructuredContentTablesById:HEe,getStructuredContentTags:t1t,getStructuredContentTagsById:qI,hasGroup:e1t,parseTagObject:pW},Symbol.toStringTag,{value:"Module"})),s1t=["structuredContent","structuredContentBlock"],Hse=t=>{let e=null;return t.descendants(n=>n.isText?(e=n,!1):!0),e},o1t=hi.create({name:"structuredContentCommands",addCommands(){return{insertStructuredContentInline:(t={})=>({editor:e,dispatch:n,state:r,tr:i})=>{var l,c,u,d;const{schema:s}=e;let{from:o,to:a}=r.selection;if(n){const f=r.doc.textBetween(o,a);let h=null;f&&(h=s.text(f)),t.text&&(h=s.text(t.text)),t.json&&(h=s.nodeFromJSON(t.json)),h||(h=s.text(" "));let m=((l=t.attrs)==null?void 0:l.tag)||"inline_text_sdt";(c=t.attrs)!=null&&c.group&&(m=bj({group:t.attrs.group}));const y={id:((u=t.attrs)==null?void 0:u.id)||Sp(),tag:m,alias:((d=t.attrs)==null?void 0:d.alias)||"Structured content",...t.attrs};delete y.group;const w=s.nodes.structuredContent.create(y,h,null),b=Ml(E=>E.type.name==="structuredContent")(r.selection);b&&(o=a=b.pos+b.node.nodeSize),i.replaceWith(o,a,w)}return!0},insertStructuredContentBlock:(t={})=>({editor:e,dispatch:n,state:r,tr:i})=>{var l,c,u,d;const{schema:s}=e;let{from:o,to:a}=r.selection;if(n){const f=r.selection.content();let h=null;if(f.size&&(h=f.content),t.html){const E=jg(t.html,e);h=ka.fromSchema(s).parse(E).content}t.json&&(h=s.nodeFromJSON(t.json)),h||(h=s.nodeFromJSON({type:"paragraph",content:[]}));let m=((l=t.attrs)==null?void 0:l.tag)||"block_table_sdt";(c=t.attrs)!=null&&c.group&&(m=bj({group:t.attrs.group}));const y={id:((u=t.attrs)==null?void 0:u.id)||Sp(),tag:m,alias:((d=t.attrs)==null?void 0:d.alias)||"Structured content",...t.attrs};delete y.group;const w=s.nodes.structuredContentBlock.create(y,h,null),b=Ml(E=>E.type.name==="structuredContentBlock")(r.selection);b&&(o=a=b.pos+b.node.nodeSize),i.replaceRangeWith(o,a,w)}return!0},updateStructuredContentById:(t,e={})=>({editor:n,dispatch:r,state:i,tr:s})=>{const o=qI(t,i);if(!o.length)return!0;const{schema:a}=n;if(r){const l=o[0],{pos:c,node:u}=l,d=c,f=c+u.nodeSize;let h=null;if(e.text){const y=e.keepTextNodeStyles===!0?Hse(u):null,w=y?y.marks:[];h=a.text(e.text,w)}if(e.html){const y=jg(e.html,n);h=ka.fromSchema(a).parse(y).content}e.json&&(h=a.nodeFromJSON(e.json)),h||(h=u.content);const m=u.type.create({...u.attrs,...e.attrs},h,u.marks);try{n.validateJSON(m.toJSON()).check()}catch(y){return console.error("Invalid content.","Passed value:",h,"Error:",y),!1}s.replaceWith(d,f,m)}return!0},deleteStructuredContent:t=>({dispatch:e,tr:n})=>(t.length&&e&&t.forEach(r=>{const{pos:i,node:s}=r,o=n.mapping.map(i),a=n.mapping.map(i+s.nodeSize),l=n.doc.nodeAt(o);l&&s.eq(l)&&n.delete(o,a)}),!0),deleteStructuredContentById:t=>({dispatch:e,state:n,tr:r})=>{const i=qI(t,n);return i.length&&e&&i.forEach(s=>{const{pos:o,node:a}=s,l=r.mapping.map(o),c=r.mapping.map(o+a.nodeSize),u=r.doc.nodeAt(l);u&&a.eq(u)&&r.delete(l,c)}),!0},deleteStructuredContentAtSelection:()=>({dispatch:t,state:e,tr:n})=>{const i=Ml(s=>s1t.includes(s.type.name))(e.selection);if(!i)return!0;if(t){const{node:s,pos:o}=i,a=o,l=a+s.nodeSize,c=s.content;n.replaceWith(a,l,c)}return!0},updateStructuredContentByGroup:(t,e={})=>({editor:n,dispatch:r,state:i,tr:s})=>{const o=wj(t,i);if(!o.length)return!0;const{schema:a}=n;if(r){const l=[];for(const c of o){const{pos:u,node:d}=c;let f=null;if(e.text){const m=e.keepTextNodeStyles===!0?Hse(d):null,y=m?m.marks:[];f=a.text(e.text,y)}if(e.html){const m=jg(e.html,n);f=ka.fromSchema(a).parse(m).content}e.json&&(f=a.nodeFromJSON(e.json)),f||(f=d.content);const h=d.type.create({...d.attrs,...e.attrs},f,d.marks);try{n.validateJSON(h.toJSON()).check()}catch(m){return console.error("Invalid content.","Passed value:",f,"Error:",m),!1}l.push({pos:u,node:d,updatedNode:h})}for(const{pos:c,node:u,updatedNode:d}of l){const f=s.mapping.map(c),h=s.mapping.map(c+u.nodeSize),m=s.doc.nodeAt(f);m&&u.eq(m)&&s.replaceWith(f,h,d)}}return!0},deleteStructuredContentByGroup:t=>({dispatch:e,state:n,tr:r})=>{const i=wj(t,n);return i.length&&e&&i.forEach(s=>{const{pos:o,node:a}=s,l=r.mapping.map(o),c=r.mapping.map(o+a.nodeSize),u=r.doc.nodeAt(l);u&&a.eq(u)&&r.delete(l,c)}),!0},appendRowsToStructuredContentTable:({id:t,tableIndex:e=0,rows:n=[],copyRowStyle:r=!1})=>({state:i,commands:s,dispatch:o})=>{const a=a1t(n);if(!a.length)return!0;const l=HEe(t,i);if(!l.length||e<0||e>=l.length)return!0;const{node:c,pos:u}=l[e];return o?s.appendRowsWithContent({tablePos:u,tableNode:c,valueRows:a,copyRowStyle:r}):s.appendRowsWithContent({tablePos:u,tableNode:c,valueRows:a,copyRowStyle:r,dispatch:!1})}}},addHelpers(){return{...i1t}}}),a1t=t=>!Array.isArray(t)||!t.length?[]:Array.isArray(t[0])?t:[t];var s2,VEe,UEe;class l1t{constructor(e,n,r,i){st(this,s2);this.node=e,this.editor=i,this.decorations=r,this.view=i.view,this.getPos=n,pe(this,s2,VEe).call(this)}}s2=new WeakSet,VEe=function(){const{attrs:e}=this.node,{id:n,title:r,description:i}=e;this.dom=document.createElement("div"),this.dom.className="sd-document-section-block",this.dom.setAttribute("data-id",n),this.dom.setAttribute("data-title",r),this.dom.setAttribute("data-description",i),this.dom.setAttribute("aria-label","Document section"),pe(this,s2,UEe).call(this),this.contentDOM=document.createElement("div"),this.contentDOM.className="sd-document-section-block-content",this.contentDOM.setAttribute("contenteditable","true"),this.dom.appendChild(this.contentDOM)},UEe=function(){const{title:e}=this.node.attrs;this.infoDiv=document.createElement("div"),this.infoDiv.className="sd-document-section-block-info";const n=document.createElement("span");n.textContent=e||"Document section",this.infoDiv.appendChild(n),this.infoDiv.setAttribute("contenteditable","false"),this.dom.appendChild(this.infoDiv)};const M1=t=>{if(!t)return[];const e=t.schema.nodes.documentSection;if(!e)return[];const n=[],{state:r}=t;return r.doc.descendants((i,s)=>{i.type.name===e.name&&n.push({node:i,pos:s})}),n},c1t=t=>{const e=M1(t),n=new Set,r=[];return e.forEach(({node:i})=>{const{attrs:s}=i,{id:o,title:a,description:l}=s;if(n.has(o))return;n.add(o);const c=u1t(i,t);r.push({id:o,title:a,description:l,html:c})}),r},u1t=(t,e)=>{const r=document.implementation.createHTMLDocument().createElement("div"),i=Kf.fromSchema(e.schema).serializeFragment(t.content);return r.appendChild(i),r.innerHTML},d1t=t=>{const e=M1(t),n=new Set,r=[];return e.forEach(({node:i})=>{const{attrs:s}=i,{id:o,title:a,description:l}=s;n.has(o)||(n.add(o),r.push({id:o,title:a,description:l,content:i.toJSON()}))}),r},f1t=(t,e,n)=>{if(!M1(n).find(o=>o.node.attrs.id===t))return null;const s=n.createChildEditor({...e,onUpdate:({editor:o,transaction:a})=>{var w,b;if(a.getMeta("fromLinkedParent"))return;const c=o.state.doc.content,u=(w=M1(n))==null?void 0:w.find(E=>E.node.attrs.id===t);if(!u)return;const{pos:d,node:f}=u,h=f.type.create(f.attrs,c,f.marks),m=n.state.tr.replaceWith(d,d+f.nodeSize,h);m.setMeta("fromLinkedChild",!0),(typeof((b=n.view)==null?void 0:b.dispatch)=="function"?n.view.dispatch.bind(n.view):n.dispatch.bind(n))(m)}});return n.on("update",({transaction:o})=>{var h,m;if(o.getMeta("fromLinkedChild"))return;const l=(h=M1(n))==null?void 0:h.find(y=>y.node.attrs.id===t);if(!l)return;const u={type:"doc",content:l.node.content.content.map(y=>y.toJSON())},d=s.state.tr;d.setMeta("fromLinkedParent",!0),d.replaceWith(0,s.state.doc.content.size,s.schema.nodeFromJSON(u)),(typeof((m=s.view)==null?void 0:m.dispatch)=="function"?s.view.dispatch.bind(s.view):s.dispatch.bind(s))(d)}),s},VE={getAllSections:M1,exportSectionsToHTML:c1t,exportSectionsToJSON:d1t,getLinkedSectionEditor:f1t},h1t=Tr.create({name:"documentSection",group:"block",content:"block*",atom:!0,isolating:!0,addOptions(){return{htmlAttributes:{class:"sd-document-section-block","aria-label":"Structured content block"}}},parseDOM(){return[{tag:"div.sd-document-section-block",priority:60}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t),0]},addAttributes(){return{id:{},sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},title:{},description:{},sectionType:{},isLocked:{default:!1}}},addNodeView(){return({node:t,editor:e,getPos:n,decorations:r})=>new l1t(t,n,r,e)},addCommands(){return{createDocumentSection:(t={})=>({tr:e,state:n,dispatch:r,editor:i})=>{var w;const{selection:s}=n;let{from:o,to:a}=s,l=s.content().content;const{html:c,json:u}=t;if(c){const b=jg(c,this.editor);l=ka.fromSchema(this.editor.schema).parse(b).content}if(u&&(l=this.editor.schema.nodeFromJSON(u)),(w=l==null?void 0:l.content)!=null&&w.length||(l=this.editor.schema.nodeFromJSON({type:"paragraph",content:[]})),!t.id){const b=VE.getAllSections(i);t.id=b.length+1}t.title||(t.title="Document section");const d=this.type.createAndFill(t,l);if(!d)return!1;const f=Ml(b=>b.type.name==="documentSection")(s);if(f&&f.node){const b=f.pos+f.node.nodeSize;o=b,a=b}e.replaceRangeWith(o,a,d);const h=o+d.nodeSize;let m=!0,y=h;if(h>=e.doc.content.size&&(y=e.doc.content.size,y>0)){const b=e.doc.resolve(y);b.nodeBefore&&b.nodeBefore.type.name==="paragraph"&&(m=!1)}if(m){const b=e.doc.type.schema.nodes.paragraph.create();e.insert(y,b)}return r&&(e.setMeta("documentSection",{action:"create"}),r(e),setTimeout(()=>{try{const b=i.state,E=b.doc.content.size;let A=o+d.nodeSize;if(m&&(A+=1),A=Math.min(A,E),A<E&&A>0){const x=_n.near(b.doc.resolve(A)),T=b.tr.setSelection(x);i.view.dispatch(T)}}catch(b){console.warn("Could not set delayed selection:",b)}},0)),!0},removeSectionAtSelection:()=>({tr:t,dispatch:e})=>{const n=Ml(c=>c.type.name==="documentSection")(t.selection);if(!n)return!1;const{node:r,pos:i}=n,s=i,o=s+r.nodeSize,a=r.content;t.delete(s,o),a.size>0&&t.insert(s,a);const l=Math.min(s,t.doc.content.size);return t.setSelection(_n.near(t.doc.resolve(l))),e&&(t.setMeta("documentSection",{action:"delete"}),e(t)),!0},removeSectionById:t=>({tr:e,dispatch:n})=>{const i=VE.getAllSections(this.editor).find(({node:c})=>c.attrs.id===t);if(!i)return!1;const{pos:s,node:o}=i,a=s,l=a+o.nodeSize;return e.delete(a,l),n&&(e.setMeta("documentSection",{action:"delete",id:t}),n(e)),!0},lockSectionById:t=>({tr:e,dispatch:n})=>{const i=VE.getAllSections(this.editor).find(({node:s})=>s.attrs.id===t);return i?(e.setNodeMarkup(i.pos,null,{...i.node.attrs,isLocked:!0}),n&&(e.setMeta("documentSection",{action:"lock",id:t}),n(e)),!0):!1},updateSectionById:({id:t,html:e,json:n,attrs:r})=>({tr:i,dispatch:s,editor:o})=>{const l=VE.getAllSections(o||this.editor).find(({node:h})=>h.attrs.id===t);if(!l)return!1;const{pos:c,node:u}=l;let d=null;if(e){const h=jg(e,o||this.editor);d=ka.fromSchema((o||this.editor).schema).parse(h).content}n&&(d=(o||this.editor).schema.nodeFromJSON(n)),d||(d=u.content);const f=u.type.create({...u.attrs,...r},d,u.marks);return i.replaceWith(c,c+u.nodeSize,f),s&&(i.setMeta("documentSection",{action:"update",id:t,attrs:r}),s(i)),!0}}},addHelpers(){return{...VE}}}),p1t=Tr.create({name:"documentPartObject",group:"block",content:"block*",isolating:!0,excludeFromSummaryJSON:!0,addOptions(){return{htmlAttributes:{class:"sd-document-part-object-block","aria-label":"Structured document part block"}}},parseDOM(){return[{tag:"div.sd-document-part-object-block",priority:60}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t),0]},addAttributes(){return{sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},id:{},docPartGallery:{},docPartUnique:{default:!0}}}}),WEe=Tr.create({name:"doc",topNode:!0,content:"block+",parseDOM(){return[{tag:"doc"}]},renderDOM(){return["doc",0]},addAttributes(){return{attributes:{rendered:!1,"aria-label":"Document node"},bodySectPr:{rendered:!1,default:null}}},addCommands(){return{getDocumentStats:()=>({editor:t})=>{const e=t.getText(),n=e.split(/\s+/).filter(s=>s.length>0).length,r=e.length,i=t.state.doc.content.childCount;return{words:n,characters:r,paragraphs:i}},clearDocument:()=>({commands:t})=>t.setContent("<p></p>"),setSectionPageMarginsAtSelection:t1e}}}),qEe=Tr.create({name:"text",group:"inline",inline:!0,addOptions(){return{}}}),m1t=new Mr({appendTransaction(t,e,n){if(!t.some(c=>c.docChanged))return null;const{run:r,paragraph:i}=n.schema.nodes;if(!r)return null;const s=[];if(t.forEach(c=>{c.mapping.maps.forEach(u=>{u.forEach((d,f,h,m)=>{(h!==d||f!==m)&&s.push({from:h,to:m})})})}),!s.length)return null;s.sort((c,u)=>c.from-u.from);const o=[];for(const c of s){const u=Math.max(0,c.from-1),d=Math.min(n.doc.content.size,c.to+1),f=o[o.length-1];f&&u<=f.to?f.to=Math.max(f.to,d):o.push({from:u,to:d})}const a=[];if(o.forEach(({from:c,to:u})=>{n.doc.nodesBetween(c,u,(d,f,h)=>{d.type===r&&d.content.size===0&&(h==null?void 0:h.type)===i&&a.push({from:f,to:f+d.nodeSize})})}),!a.length)return null;const l=n.tr;return a.sort((c,u)=>u.from-c.from).forEach(({from:c,to:u})=>l.deleteRange(c,u)),l.docChanged?l:null}}),mW=(t,e)=>{if(!t.length)return[];const n=t.map(({from:i,to:s})=>({from:Math.max(0,i),to:Math.min(e,s)})).filter(({from:i,to:s})=>i<s).sort((i,s)=>i.from-s.from),r=[];for(const i of n){const s=r[r.length-1];s&&i.from<=s.to?s.to=Math.max(s.to,i.to):r.push({...i})}return r},g1t=(t,e)=>{const n=[];return t.forEach(r=>{r.docChanged&&r.mapping.maps.forEach(i=>{i.forEach((s,o,a,l)=>{(a!==s||o!==l)&&n.push({from:a,to:l})})})}),mW(n,e)},y1t=(t,e,n)=>{let r=t;return e.forEach(i=>{r=r.map(({from:s,to:o})=>{const a=i.mapping.map(s,-1),l=i.mapping.map(o,1);return a>=l?null:{from:a,to:l}}).filter(Boolean)}),mW(r,n)},b1t=(t,e)=>{try{const n=t.resolve(e);for(let r=n.depth;r>=0;r--){const i=n.node(r);if(i.type.name==="paragraph")return i}}catch{}return null},w1t=(t,e)=>{var r,i;if(!t||!(e!=null&&e.converter))return{};const n=(i=(r=t.attrs)==null?void 0:r.paragraphProperties)==null?void 0:i.styleId;if(!n)return{};try{const s={docx:e.converter.convertedXml,numbering:e.converter.numbering},a=nC(s,{},{styleId:n},!1,!1),l={};if(a.fontFamily){const c=a.fontFamily.ascii||a.fontFamily;c&&(l.fontFamily=typeof c=="string"?c:c.ascii)}return a.fontSize&&(l.fontSize=`${a.fontSize/2}pt`),a.bold&&(l.bold=!0),a.italic&&(l.italic=!0),a.underline&&(l.underline=a.underline),a.strike&&(l.strike=!0),l}catch{return{}}},Vse=(t,e=[])=>e.map(n=>{const r=t.marks[n.type];return r?r.create(n.attrs):null}).filter(Boolean),v1t=t=>{const e=[],n={};if(t.fontSize&&(n.fontSize=t.fontSize),t.fontFamily&&(n.fontFamily=t.fontFamily),Object.keys(n).length>0&&e.push({type:"textStyle",attrs:n}),t.bold&&e.push({type:"bold",attrs:{value:!0}}),t.italic&&e.push({type:"italic",attrs:{value:!0}}),t.strike&&e.push({type:"strike",attrs:{value:!0}}),t.underline){const r=t.underline["w:val"];if(r){let i=t.underline["w:color"];i&&i.toLowerCase()!=="auto"&&!i.startsWith("#")&&(i=`#${i}`),e.push({type:"underline",attrs:{underlineType:r,underlineColor:i}})}}return e},x1t=(t,e)=>{const n=t.selection;if(!(n instanceof Vt)||n.from!==n.to)return;const r=t.doc.resolve(n.from);if(r.parent.type===e)return;const i=r.nodeAfter;if((i==null?void 0:i.type)===e&&i.content.size>0){const o=n.from+1;o<=t.doc.content.size&&t.setSelection(Vt.create(t.doc,o));return}const s=r.nodeBefore;if((s==null?void 0:s.type)===e&&s.content.size>0){const o=n.from-1;o>=0&&t.setSelection(Vt.create(t.doc,o))}},Use=(t,e,n,r,i=[])=>{if(!e.length)return null;const s=[],o=Vse(t.schema,i);if(e.forEach(({from:l,to:c})=>{t.doc.nodesBetween(l,c,(u,d,f,h)=>{if(!u.isText||!f||f.type===n)return;const m=f.contentMatchAt?f.contentMatchAt(h):null;if(m&&!m.matchType(n)||!m&&!f.type.contentMatch.matchType(n))return;let y=rC(u.marks);if((!u.marks||u.marks.length===0)&&(r!=null&&r.converter)){const b=b1t(t.doc,d),E=w1t(b,r);if(Object.keys(E).length>0){y=E;const A=o.length?i:v1t(E),x=o.length?o:Vse(t.schema,A);if(x.length&&typeof t.schema.text=="function"){const T=t.schema.text(u.text||"",x);T&&(u=T)}}}const w=n.create({runProperties:y},u);s.push({from:d,to:d+u.nodeSize,runNode:w})})}),!s.length)return null;const a=t.tr;return s.sort((l,c)=>c.from-l.from).forEach(({from:l,to:c,runNode:u})=>a.replaceWith(l,c,u)),x1t(a,n),a.docChanged?a:null},E1t=t=>{let e=null,n=[],r=[];const i=()=>{if(!e)return;const o=e.state.schema.nodes.run;if(!o){n=[];return}const a=Use(e.state,n,o,t,r);n=[],a&&e.dispatch(a)},s=()=>{typeof globalThis>"u"||globalThis.queueMicrotask(i)};return new Mr({view(o){return e=o,o.dom.addEventListener("compositionend",s),{destroy(){o.dom.removeEventListener("compositionend",s),e=null,n=[],r=[]}}},appendTransaction(o,a,l){var m;const c=l.doc.content.size,u=l.schema.nodes.run;if(!u)return null;n=y1t(n,o,c);const d=g1t(o,c);if(n=mW([...n,...d],c),e!=null&&e.composing)return null;const f=((m=[...o].reverse().find(y=>y.getMeta&&y.getMeta("sdStyleMarks")))==null?void 0:m.getMeta("sdStyleMarks"))||r;f&&f.length&&(r=f);const h=Use(l,n,u,t,f);return n=[],h}})},S1t=new Mr({appendTransaction(t,e,n){const r=[];let i=new cd;for(let w=t.length-1;w>=0;w--){const b=t[w];b.steps.forEach(A=>{if(!(A instanceof Kc||A instanceof Eo))return;const x=b.mapping.map(A.from,1),T=b.mapping.map(A.to,-1);r.push({from:i.map(x,1),to:i.map(T,-1)})});const E=new cd;E.appendMapping(b.mapping),E.appendMapping(i),i=E}if(!r.length)return null;const s=n.schema.nodes.run;if(!s)return null;const o=new Set,a=n.doc.content.size;if(r.forEach(({from:w,to:b})=>{w<0||b<0||w>a||b>a||w>b||n.doc.nodesBetween(w,b,(E,A)=>{E.type===s&&o.add(A)})}),!o.size)return null;const l=n.tr,c=n.selection,u=c instanceof Vt;let d=u?c.anchor:null,f=u?c.head:null;const h=d!=null&&f!=null&&d<=f?-1:1,m=d!=null&&f!=null&&f>=d?1:-1,y=(w,b,E)=>{let A=w,x=E,T=null;return b.forEach(R=>{if(T!=null)return;const k=R.content.size;if(x<=k){T=A+1+x;return}x-=k,A+=R.nodeSize}),T??A};return Array.from(o).sort((w,b)=>b-w).forEach(w=>{const b=l.mapping.map(w),E=l.doc.nodeAt(b);if(!E)return;const A=[];let x=[],T=null;if(E.forEach(N=>{N.isText?T&&Si.sameSet(T,N.marks)?x.push(N):(x.length&&A.push(Nt.from(x)),x=[N],T=N.marks):(x.length&&A.push(Nt.from(x)),A.push(Nt.from(N)),x=[],T=null)}),x.length&&A.push(Nt.from(x)),A.length<=1)return;const R=Nt.from(A.map(N=>s.create(E.attrs,N,E.marks)));l.replaceWith(b,b+E.nodeSize,R);const k=l.mapping.maps[l.mapping.maps.length-1],_=(N,L)=>{if(N==null)return null;if(N<b||N>b+E.nodeSize)return k.map(N,L);const M=N-(b+1);return y(b,R,M)};d=_(d,h),f=_(f,m)}),l.docChanged&&c&&(c instanceof Vt&&d!=null&&f!=null?l.setSelection(Vt.create(l.doc,d,f)):l.setSelection(c.map(l.doc,l.mapping))),l.docChanged?l:null}}),A1t=t=>new Mr({appendTransaction(e,n,r){const i=r.tr;if(!e.some(l=>l.docChanged)||!e.some(l=>l.steps.some(c=>c instanceof Kc||c instanceof Eo)))return null;const s=r.schema.nodes.run;if(!s)return null;const o=[];e.forEach(l=>{l.steps.forEach(c=>{const u=l.mapping.map(c.from,1),d=l.mapping.map(c.to,-1);o.push({from:u,to:d})})});const a=new Set;return C1t(o,r.doc.content.size).forEach(({from:l,to:c})=>{r.doc.nodesBetween(l,c,(u,d)=>{u.type===s&&a.add(d)})}),a.size?(a.forEach(l=>{var E,A,x;const c=i.doc.nodeAt(l);if(!c)return;const u=i.doc.resolve(l);let d=null;for(let T=u.depth;T>=0;T--){const R=u.node(T);if(R.type.name==="paragraph"){d=R;break}}if(!d)return;const f=T1t(c),h=rC(f),m=es(d)||Fb(t,d,u),y=nC({docx:((E=t.converter)==null?void 0:E.convertedXml)??{},numbering:((A=t.converter)==null?void 0:A.numbering)??{}},{},m,!1,!!((x=d.attrs.paragraphProperties)!=null&&x.numberingProperties)),w=k1t(h,y),b=Object.keys(w).length?w:null;JSON.stringify(b)!==JSON.stringify(c.attrs.runProperties)&&i.setNodeMarkup(l,c.type,{...c.attrs,runProperties:b},c.marks)}),i.docChanged?i:null):null}});function T1t(t){let e=[];return t.forEach(n=>{!e.length&&n.isText&&(e=n.marks)}),e}function k1t(t,e){const n={};for(const r in t){const i=t[r],s=e[r];JSON.stringify(i)!==JSON.stringify(s)&&(n[r]=i)}return n}function C1t(t,e){if(!t.length)return[];const n=t.map(({from:i,to:s})=>({from:Math.max(0,i),to:Math.min(e,s)})).filter(({from:i,to:s})=>i<s).sort((i,s)=>i.from-s.from),r=[];for(const i of n){const s=r[r.length-1];s&&i.from<=s.to?s.to=Math.max(s.to,i.to):r.push({...i})}return r}const _1t=oM.create({name:"run",oXmlName:"w:r",group:"inline",inline:!0,content:"inline*",selectable:!1,childToAttributes:["runProperties"],addOptions(){return{htmlAttributes:{"data-run":"1"}}},addAttributes(){return{runProperties:{default:null,rendered:!1,keepOnSplit:!0},rsidR:{default:null,rendered:!1,keepOnSplit:!0},rsidRPr:{default:null,rendered:!1,keepOnSplit:!0},rsidDel:{default:null,rendered:!1,keepOnSplit:!0}}},addCommands(){return{splitRunToParagraph:uot,splitRunAtCursor:Fve}},parseDOM(){return[{tag:"span[data-run]"}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]},addPmPlugins(){return[E1t(this.editor),S1t,A1t(this.editor),m1t]}}),N1t=({editor:t,tr:e,state:n,dispatch:r})=>{const{node:i,pos:s}=Ml(lu)(n.selection)||{};if(!i)return!1;const o=[{node:i,pos:s}],a=s+i.nodeSize,l=es(i).numberingProperties.numId;let c=!1;n.doc.nodesBetween(a,n.doc.content.size,(h,m)=>{var y;if(h.type.name==="paragraph"){const w=es(h);return lu(h)&&((y=w.numberingProperties)==null?void 0:y.numId)===l?o.push({node:h,pos:m}):c=!0,!1}return!c});const{numberingType:u}=i.attrs.listRendering||{},d=u==="bullet"?"bulletList":"orderedList",f=Zr.getNewListId(t);return Zr.generateNewListDefinition({numId:Number(f),listType:d,editor:t}),o.forEach(({node:h,pos:m})=>{const y=es(h);Bb({...y.numberingProperties||{},numId:Number(f)},h,m,t,e)}),r&&r(e),!0},D6=48,GI=816;function tP(t,e,n,r,i,s=null,o=null){let a="";try{const{tabStops:l,flattened:c,positionMap:u,startPos:d}=i;i.indentWidth===void 0&&(i.indentWidth=KEe(e,d,i.indent,s,o)),i.tabHeight===void 0&&(i.tabHeight=YEe(r)),i.paragraphWidth===void 0&&(i.paragraphWidth=XEe(e,d));const f=i.indentWidth,h=Yc(Number(i.indent.hanging)||0);h>0&&l.unshift({val:"start",pos:f+h});const m=i.accumulatedTabWidth||0,y=f+Qv(e,d+1,n,s,o)+m;let w;if(l.length){const E=l.find(A=>A.pos>y&&A.val!=="clear");if(E){w=Math.min(E.pos,i.paragraphWidth)-y;let A=E.val;const x={left:"start",right:"end"};if(x[A]&&(A=x[A]),A==="center"||A==="end"||A==="right"){const T=u.get(n);if(T===void 0)return;const R=R1t(c,T+1),k=n+t,_=R===-1?d+i.paragraph.nodeSize-1:c[R].pos,N=Qv(e,k,_,s,o);w-=A==="center"?N/2:N}else if(A==="decimal"||A==="num"){const T=u.get(n);if(T===void 0)return;const R=E.decimalChar||".",k=M1t(c,T+1,R),_=k?Qv(e,n+t,k,s,o):Qv(e,n+t,d+i.paragraph.nodeSize-1,s,o);w-=_}E.leader&&(a+={dot:"border-bottom: 1px dotted black;",heavy:"border-bottom: 2px solid black;",hyphen:"border-bottom: 1px solid black;",middleDot:"border-bottom: 1px dotted black; margin-bottom: 2px;",underscore:"border-bottom: 1px solid black;"}[E.leader]||"")}}(!w||w<1)&&(w=D6-y%GI%D6,w===0&&(w=D6));const b=i.tabHeight;return i.accumulatedTabWidth=m+w,`width: ${w}px; height: ${b}; ${a}`}catch{return null}}function I1t(t,e,n){var r;for(let i=t.depth;i>=0;i--){const s=t.node(i);if(((r=s==null?void 0:s.type)==null?void 0:r.name)==="paragraph"){const o=t.start(i);if(!e.has(o)){const a=gW(s,o,n,i);e.set(o,a)}return e.get(o)}}return null}function gW(t,e,n,r=0){var c;const i=es(t)??((c=t.attrs)==null?void 0:c.paragraphProperties)??{},s={left:"start",right:"end"};let o=[];Array.isArray(i.tabStops)&&(o=i.tabStops.map(u=>{const d=u==null?void 0:u.tab;if(!d&&(u==null?void 0:u.pos)!=null)return{...u,pos:Yc(Number(u.pos)||0)};if(!d)return u||null;const f=d.tabType||"start";return{val:s[f]||f,pos:Yc(Number(d.pos)||0),leader:d.leader}}).filter(Boolean));const{entries:a,positionMap:l}=GEe(t,e);return{paragraph:t,paragraphDepth:r,startPos:e,indent:i.indent||{},tabStops:o,flattened:a,positionMap:l,accumulatedTabWidth:0}}function GEe(t,e){const n=[],r=new Map,i=(s,o)=>{var c;if(!s)return;if(((c=s.type)==null?void 0:c.name)==="run"){s.forEach((u,d)=>{const f=o+d+1;i(u,f)});return}const a=o-1,l=n.length;n.push({node:s,pos:a}),r.set(a,l)};return t.forEach((s,o)=>{const a=e+o+1;i(s,a)}),{entries:n,positionMap:r}}function R1t(t,e){var n,r,i;for(let s=e;s<t.length;s++)if(((i=(r=(n=t[s])==null?void 0:n.node)==null?void 0:r.type)==null?void 0:i.name)==="tab")return s;return-1}function M1t(t,e,n){var r,i,s;for(let o=e;o<t.length;o++){const a=t[o];if(!a||((r=a.node.type)==null?void 0:r.name)==="tab")break;if(((i=a.node.type)==null?void 0:i.name)==="text"){const l=(s=a.node.text)==null?void 0:s.indexOf(n);if(l!==void 0&&l!==-1)return a.pos+l+1}}return null}function Qv(t,e,n,r=null,i=null){var s;if(!Number.isFinite(e)||!Number.isFinite(n)||n<=e)return 0;try{const o=document.createRange(),a=vj(t,e,i),l=vj(t,n,i);o.setStart(a.node,a.offset),o.setEnd(l.node,l.offset);const c=o.getBoundingClientRect();return(s=o.detach)==null||s.call(o),c.width||0}catch{const o=KI(t,e,r,i),a=KI(t,n,r,i);return o==null||a==null?0:Math.max(0,a-o)}}function KEe(t,e,n={},r=null,i=null){const s=KI(t,e,r,i),o=KI(t,e+1,r,i);if(s!=null&&o!=null){const a=o-s;if(!Number.isNaN(a)&&Math.abs(a)>.5)return a}return L1t(n)}function XEe(t,e){const n=t.nodeDOM(e-1);if(n instanceof HTMLElement){const r=window.getComputedStyle(n);return n.clientWidth+parseFloat(r.marginLeft||"0")+parseFloat(r.marginRight||"0")+parseFloat(r.borderLeftWidth||"0")+parseFloat(r.borderRightWidth||"0")+parseFloat(r.paddingLeft||"0")+parseFloat(r.paddingRight||"0")}return GI}function L1t(t={}){if(!t)return 0;const e=Yc(Number(t.left)||0),n=Yc(Number(t.firstLine)||0),r=Yc(Number(t.hanging)||0);let i=0;return n&&r?i=n-r:n?i=n:r&&(i=-r),i?e+i:e||0}function KI(t,e,n=null,r=null){var s;if(!Number.isFinite(e))return null;if(n&&n.has(e))return n.get(e);let i=null;try{i=t.coordsAtPos(e).left}catch{try{const o=vj(t,e,r),a=document.createRange();a.setStart(o.node,o.offset),a.setEnd(o.node,o.offset);const l=a.getBoundingClientRect();(s=a.detach)==null||s.call(a),i=l.left}catch{i=null}}return n&&n.set(e,i),i}function vj(t,e,n=null){if(n&&n.has(e))return n.get(e);const r=t.domAtPos(e);return n&&n.set(e,r),r}function YEe(t){var o,a;const i=(a=(o=t.firstChild)==null?void 0:o.marks)==null?void 0:a.find(l=>l.type.name==="textStyle");return`${(parseInt(i==null?void 0:i.attrs.fontSize)*1.333||16)*1.1}px`}const ty=new WeakMap;var tr,ZEe,xj,Ej,Sj,Aj,O6,RS,JEe,QEe,eSe,tSe,nSe,rSe,Tj,kj;class D1t{constructor(e,n,r,i,s){st(this,tr);this.node=e,this.editor=n,this.getPos=r,this.decorations=i,this.extensionAttrs=s,this._animationFrameRequest=null,this.surroundingContext={},ty.set(this.node,this),Fb(this.editor,this.node,this.editor.state.doc.resolve(this.getPos())),this.dom=document.createElement("p"),this.contentDOM=document.createElement("span"),this.dom.appendChild(this.contentDOM),pe(this,tr,RS).call(this)&&(pe(this,tr,O6).call(this,e.attrs.listRendering),pe(this,tr,Tj).call(this,()=>{pe(this,tr,RS).call(this)&&pe(this,tr,Aj).call(this)})),pe(this,tr,xj).call(this),pe(this,tr,Ej).call(this)}update(e,n,r,i=!1){ty.get(this.node)===this&&ty.delete(this.node);const s=es(this.node),o=this.node.attrs;return this.node=e,this.decorations=n,this.innerDecorations=r,ty.set(this.node,this),!i&&!pe(this,tr,ZEe).call(this,s,o,this.surroundingContext)?!0:(Fb(this.editor,this.node,this.editor.state.doc.resolve(this.getPos())),pe(this,tr,xj).call(this),pe(this,tr,Ej).call(this,s),pe(this,tr,RS).call(this)?(pe(this,tr,O6).call(this,e.attrs.listRendering),pe(this,tr,Tj).call(this,()=>{pe(this,tr,O6).call(this,e.attrs.listRendering),pe(this,tr,Aj).call(this)}),!0):(pe(this,tr,nSe).call(this),!0))}ignoreMutation(e){return!!(this.marker&&(e.target===this.marker||this.marker.contains(e.target))||this.separator&&(e.target===this.separator||this.separator.contains(e.target))||e.type==="attributes"&&e.target===this.dom&&e.attributeName==="style"||e.type==="childList"&&(this.marker&&Array.from(e.removedNodes).includes(this.marker)||this.marker&&Array.from(e.addedNodes).includes(this.marker)||this.separator&&Array.from(e.removedNodes).includes(this.separator)||this.separator&&Array.from(e.addedNodes).includes(this.separator)))}destroy(){pe(this,tr,kj).call(this),ty.get(this.node)===this&&ty.delete(this.node)}}tr=new WeakSet,ZEe=function(e,n,r){return pe(this,tr,Sj).call(this),JSON.stringify(n)!==JSON.stringify(this.node.attrs)||JSON.stringify(e)!==JSON.stringify(es(this.node))||JSON.stringify(r)!==JSON.stringify(this.surroundingContext)},xj=function(){var r;const e=an.getAttributesToRender(this.node,this.extensionAttrs);e.style=e.style||"";for(const[i,s]of Object.entries(e||{})){if(s==null){this.dom.removeAttribute(i);continue}this.dom.setAttribute(i,s)}const n=es(this.node);pe(this,tr,RS).call(this)?(this.dom.setAttribute("data-num-id",n.numberingProperties.numId),this.dom.setAttribute("data-level",n.numberingProperties.ilvl)):(this.dom.removeAttribute("data-num-id"),this.dom.removeAttribute("data-level")),(r=n.framePr)!=null&&r.dropCap?this.dom.classList.add("sd-editor-dropcap"):this.dom.classList.remove("sd-editor-dropcap"),n.styleId&&this.dom.setAttribute("styleid",n.styleId)},Ej=function(e=null){this.dom.style.cssText="";const n=es(this.node);pe(this,tr,Sj).call(this);const r=vze(n,this.surroundingContext.hasPreviousParagraph,this.surroundingContext.nextParagraphProps);if(Object.entries(r).forEach(([i,s])=>{this.dom.style[i]=s}),JSON.stringify(n.spacing)!==JSON.stringify(e==null?void 0:e.spacing)||n.styleId!==(e==null?void 0:e.styleId)||n.contextualSpacing!==(e==null?void 0:e.contextualSpacing)){const i=this.surroundingContext.previousParagraph?ty.get(this.surroundingContext.previousParagraph):null;if(i){try{i.getPos()}catch{return}i.update(i.node,i.decorations,i.innerDecorations,!0)}}},Sj=function(){var a,l;const e=this.editor.state.doc.resolve(this.getPos()),n=e.parent,r=e.index();let i=!1,s=null,o=null;if(r>0){const c=n.child(r-1);i=c.type.name==="paragraph"&&!((l=(a=es(c))==null?void 0:a.framePr)!=null&&l.dropCap),i&&(s=c)}if(n&&r<n.childCount-1){const c=n.child(r+1);c.type.name==="paragraph"&&(o=es(c))}this.surroundingContext={hasPreviousParagraph:i,previousParagraph:s,nextParagraphProps:o}},Aj=function(){let{suffix:e,justification:n}=this.node.attrs.listRendering;if(e=e??"tab",pe(this,tr,tSe).call(this,n),e==="tab"){const r=es(this.node);pe(this,tr,eSe).call(this,n,r.indent)}else this.separator.textContent=e==="space"?"":"";return!0},O6=function(e){pe(this,tr,JEe).call(this,e.markerText),pe(this,tr,QEe).call(this,e.suffix)},RS=function(){return lu(this.node)},JEe=function(e){this.marker||(this.marker=document.createElement("span"),this.dom.insertBefore(this.marker,this.contentDOM)),this.marker.contentEditable="false",this.marker.className="list-marker",this.marker.textContent=e},QEe=function(e){var n,r,i,s,o,a,l;e==="tab"||e==null?((this.separator==null||((n=this.separator.tagName)==null?void 0:n.toLowerCase())!=="span")&&((i=(r=this.separator)==null?void 0:r.parentNode)==null||i.removeChild(this.separator),this.separator=document.createElement("span"),this.marker.after(this.separator)),this.separator.className="sd-editor-tab",this.separator.contentEditable="false"):e==="space"?((this.separator==null||this.separator.nodeType!==Node.TEXT_NODE)&&((o=(s=this.separator)==null?void 0:s.parentNode)==null||o.removeChild(this.separator),this.separator=document.createTextNode(""),this.marker.after(this.separator)),this.separator.textContent=""):e==="nothing"&&((this.separator==null||this.separator.nodeType!==Node.TEXT_NODE)&&((l=(a=this.separator)==null?void 0:a.parentNode)==null||l.removeChild(this.separator),this.separator=document.createTextNode(""),this.marker.after(this.separator)),this.separator.textContent="")},eSe=function(e,n){const r=this.marker.getBoundingClientRect().width;let i,{paragraphContext:s,start:o}=pe(this,tr,rSe).call(this);if(e==="right")if(n!=null&&n.hanging||!(n!=null&&n.hanging)&&!(n!=null&&n.firstLine))i=`width: ${n!=null&&n.hanging?Dr(n.hanging):0}px;`;else{const a=this.editor.schema.nodes.tab.create(null);i=tP(a.nodeSize,this.editor.view,o,this.node,s)}else if(e==="center"){s.accumulatedTabWidth=r/2;const a=this.editor.schema.nodes.tab.create(null);i=tP(a.nodeSize,this.editor.view,o,this.node,s),i+=`margin-left: ${r/2}px;`}else{s.accumulatedTabWidth=r;const a=this.editor.schema.nodes.tab.create(null);i=tP(a.nodeSize,this.editor.view,o,this.node,s)}this.separator.style.cssText=i},tSe=function(e){const n=es(this.node),r=nC({docx:this.editor.converter.convertedXml,numbering:this.editor.converter.numbering},n.runProperties||{},n,!0,!!this.node.attrs.paragraphProperties.numberingProperties),i=xze(r,this.editor.converter.convertedXml);this.marker.style.cssText=Object.entries(i).map(([u,d])=>`${u}: ${d};`).join(" ");let s={position:"",left:"",bottom:""},o={position:""};const a=()=>{let u="0";if(globalThis){const d=globalThis.getComputedStyle(this.dom),f=globalThis.getComputedStyle(this.marker),h=parseFloat(d.lineHeight),m=parseFloat(f.lineHeight);u=`${h-m}px`}return u},c=this.marker.getBoundingClientRect().width;e==="right"?(s.position="absolute",s.left=`${-c}px`,s.top=a(),o.position="relative"):e==="center"&&(s.position="absolute",s.left=`${-c/2}px`,s.top=a(),o.position="relative"),Object.entries(s).forEach(([u,d])=>{this.marker.style[u]=d}),Object.entries(o).forEach(([u,d])=>{this.dom.style[u]=d})},nSe=function(){this.marker&&(this.dom.removeChild(this.marker),this.marker=null),this.separator&&(this.dom.removeChild(this.separator),this.separator=null),this.dom.style.position=""},rSe=function(){const e=this.editor.state.doc.resolve(this.getPos()),n=e.start(e.depth+1);return{paragraphContext:gW(this.node,n,this.editor.helpers),start:n}},Tj=function(e){typeof globalThis>"u"||(pe(this,tr,kj).call(this),this._animationFrameRequest=globalThis.requestAnimationFrame(()=>{e(),this._animationFrameRequest=null}))},kj=function(){typeof globalThis>"u"||!this._animationFrameRequest||(globalThis.cancelAnimationFrame(this._animationFrameRequest),this._animationFrameRequest=null)};function O1t(){const t=iyt();return{...t,_clearCache:t.clearAllState}}function P1t(t){const e=O1t(),n=i=>{Object.entries(i||{}).forEach(([s,o])=>{Object.entries(o||{}).forEach(([a,l])=>{const c=parseInt(l==null?void 0:l.start)||1;let u=l==null?void 0:l.restart;u!=null&&(u=parseInt(u)),e.setStartSettings(s,parseInt(a),c,u)})})},r=()=>{const i=Zr.getAllListDefinitions(t);n(i)};if(r(),typeof(t==null?void 0:t.on)=="function"&&(t.on("list-definitions-change",r),typeof(t==null?void 0:t.off)=="function")){const i=()=>{var s;t.off("list-definitions-change",r),(s=t.off)==null||s.call(t,"destroy",i)};t.on("destroy",i)}return new Mr({name:"numberingPlugin",key:new ni("numberingPlugin"),appendTransaction(i,s,o){const a=i.some(u=>u.getMeta("orderedListSync")),l=i.some(u=>u.getMeta("forcePluginPass"));if(a||!l&&!i.some(u=>u.docChanged))return null;const c=o.tr;return c.setMeta("orderedListSync",!0),e.enableCache(),o.doc.descendants((u,d)=>{let f=Fb(t,u,o.doc.resolve(d));if(u.type.name!=="paragraph"||!f.numberingProperties)return;const{numId:h,ilvl:m=0}=f.numberingProperties,y=Zr.getListDefinitionDetails({numId:h,level:m,editor:t});if(!y||Object.keys(y).length===0){c.setNodeAttribute(d,"listRendering",null);return}let{lvlText:w,customFormat:b,listNumberingType:E,suffix:A,justification:x,abstractId:T}=y,R="";E=E||"decimal";const k=e.calculateCounter(h,m,d,T);e.setCounter(h,m,d,k,T);const _=e.calculatePath(h,m,d);E!=="bullet"?R=aWe({listLevel:_,lvlText:w,listNumberingType:E,customFormat:b}):R=SWe.normalizeLvlTextChar(w);const N={markerText:R,suffix:A,justification:x,path:_,numberingType:E};return JSON.stringify(u.attrs.listRendering)!==JSON.stringify(N)&&c.setNodeAttribute(d,"listRendering",N),!1}),e.disableCache(),c.docChanged?c:null}})}function F1t(t){const{view:e}=t,n=new Map,r=(a,l)=>{for(const[c]of n)c>=a&&c<=l&&n.delete(c)},i=(a,l,c)=>{const u=[];return a.doc.descendants((d,f)=>{if(o(d,f,a)){const h=s(l,f,c);return u.push(Qn.inline(f,f+d.nodeSize,{style:`margin-left: -${h}px;`})),!1}return d.type.name!=="paragraph"}),u};function s(a,l,c){if(c.has(l))return c.get(l);const u=a.nodeDOM(l);if(u){const d=document.createRange();d.selectNodeContents(u);const f=d.getBoundingClientRect().width;return c.set(l,f),f}return 0}const o=(a,l,c)=>{var d;return a.type.name!=="paragraph"?!1:((d=Fb(t,a,c.doc.resolve(l)).framePr)==null?void 0:d.dropCap)==="margin"};return new Mr({name:"dropcapPlugin",key:new ni("dropcapPlugin"),state:{init(a,l){const c=i(l,e,n);return An.create(l.doc,c)},apply(a,l,c,u){if(!a.docChanged)return l;let d=!1;if(u.doc.descendants((m,y)=>{if(o(m,y,u))return d=!0,!1}),!d)return n.clear(),An.empty;let f=!1;if(a.steps.forEach(m=>{var y;if((y=m.slice)!=null&&y.content&&m.slice.content.descendants((w,b)=>{if(o(w,b,u))return f=!0,!1}),m.jsonID==="replace"&&m.from!==void 0&&m.to!==void 0)try{c.doc.nodesBetween(m.from,m.to,(w,b)=>{if(o(w,b,u))return f=!0,!1})}catch{f=!0}}),!f)return l.map(a.mapping,a.doc);a.steps.forEach(m=>{m.from!==void 0&&m.to!==void 0&&r(m.from,m.to)});const h=i(u,e,n);return An.create(u.doc,h)}},props:{decorations(a){return this.getState(a)}}})}function Wse(t){const e={};let n,r;const{styleid:i,...s}=Array.from(t.attributes).reduce((a,l)=>{if(l.name==="data-num-id")e.numId=parseInt(l.value);else if(l.name==="data-level")e.ilvl=parseInt(l.value);else if(l.name==="data-indent")try{n=JSON.parse(l.value),Object.keys(n).forEach(c=>{n[c]=Number(n[c])})}catch{}else if(l.name==="data-spacing")try{r=JSON.parse(l.value),Object.keys(r).forEach(c=>{r[c]=Number(r[c])})}catch{}else a[l.name]=l.value;return a},{});let o={paragraphProperties:{styleId:i||null},extraAttrs:s};return n&&Object.keys(n).length>0&&(o.paragraphProperties.indent=n),r&&Object.keys(r).length>0&&(o.paragraphProperties.spacing=r),Object.keys(e).length>0&&(o.paragraphProperties.numberingProperties=e),o}const B1t=/^\s*([-+*])\s$/,j1t=/^(\d+)\.\s$/,iSe=oM.create({name:"paragraph",oXmlName:"w:p",priority:1e3,group:"block",content:"inline*",inline:!1,summary:"The paragraph node mirrors MS Word w:p paragraphs, and also represents lists in the schema.",addOptions(){return{headingLevels:[1,2,3,4,5,6],htmlAttributes:{}}},addAttributes(){return{paraId:{rendered:!1},textId:{rendered:!1},rsidR:{rendered:!1},rsidRDefault:{rendered:!1},rsidP:{rendered:!1},rsidRPr:{rendered:!1},rsidDel:{rendered:!1},extraAttrs:{default:{},parseDOM:t=>{const e={};return Array.from(t.attributes).forEach(n=>{e[n.name]=n.value}),e},renderDOM:t=>t.extraAttrs||{}},sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},attributes:{rendered:!1},filename:{rendered:!1},paragraphProperties:{rendered:!1},pageBreakSource:{rendered:!1},sectionMargins:{rendered:!1},listRendering:{keepOnSplit:!1,renderDOM:({listRendering:t})=>({"data-marker-type":t==null?void 0:t.markerText,"data-list-level":t!=null&&t.path?JSON.stringify(t.path):null,"data-list-numbering-type":t==null?void 0:t.numberingType})}}},parseDOM(){return[{tag:"p",getAttrs:Wse},{tag:"div",getAttrs:t=>{const e={};return Array.from(t.attributes).forEach(n=>{e[n.name]=n.value}),{extraAttrs:e}}},{tag:"blockquote",attrs:{paragraphProperties:{styleId:"BlockQuote"}}},...this.options.headingLevels.map(t=>({tag:`h${t}`,getAttrs:e=>{let n=Wse(e);return{...n,paragraphProperties:{...n.paragraphProperties,styleId:`Heading${t}`}}}}))]},renderDOM({htmlAttributes:t}){return["p",an.mergeAttributes(this.options.htmlAttributes,t),0]},addNodeView(){var t;return((t=this.editor.options)==null?void 0:t.mode)!=="docx"||!this.editor.converter||Sct(this.editor)?null:({node:e,editor:n,getPos:r,decorations:i,extensionAttrs:s})=>new D1t(e,n,r,i,s)},addShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList(),"Mod-Shift-8":()=>this.editor.commands.toggleBulletList(),Enter:t=>i1e({checkType:"empty"})({...t,tr:this.editor.state.tr,state:this.editor.state,dispatch:this.editor.view.dispatch}),"Shift-Enter":()=>this.editor.commands.first(({commands:t})=>[()=>t.createParagraphNear(),jve({attrsToRemoveOverride:["paragraphProperties.numberingProperties","listRendering","numberingProperties"]})]),Tab:()=>this.editor.commands.first(({commands:t})=>[()=>t.increaseListIndent()]),"Shift-Tab":()=>this.editor.commands.first(({commands:t})=>[()=>t.decreaseListIndent()])}},addInputRules(){return[{regex:j1t,type:"orderedList"},{regex:B1t,type:"bulletList"}].map(({regex:t,type:e})=>new mqe({match:t,handler:({state:n,range:r})=>{if(Ml(lu)(n.selection))return null;const{tr:s}=n;s.delete(r.from,r.to).setSelection(Vt.create(s.doc,r.from)),Zr.createNewList({listType:e,tr:s,editor:this.editor})}}))},addCommands(){return{toggleOrderedList:()=>t=>JF("orderedList")(t),toggleBulletList:()=>t=>JF("bulletList")(t),restartNumbering:()=>N1t}},addPmPlugins(){const t=F1t(this.editor),e=P1t(this.editor);return[t,e]}}),sSe=hi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6]}},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setLinkedStyle({id:`Heading${t.level}`}):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleLinkedStyle({id:`Heading${t.level}`},"paragraph"):!1}},addShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})}}),$1t=Tr.create({name:"commentRangeStart",group:"inline",inline:!0,atom:!0,selectable:!1,draggable:!1,parseDOM(){return[{tag:"commentRangeStart"}]},addOptions(){return{htmlAttributes:{contentEditable:"false","aria-label":"Comment range start node"}}},renderDOM({htmlAttributes:t}){return["commentRangeStart",an.mergeAttributes(this.options.htmlAttributes,t)]},addAttributes(){return{"w:id":{rendered:!1},internal:{default:!0,rendered:!1}}}}),z1t=Tr.create({name:"commentRangeEnd",group:"inline",inline:!0,atom:!0,selectable:!1,draggable:!1,addOptions(){return{htmlAttributes:{contentEditable:"false","aria-label":"Comment range end node"}}},parseDOM(){return[{tag:"commentRangeEnd"}]},renderDOM({htmlAttributes:t}){return["commentRangeEnd",an.mergeAttributes(this.options.htmlAttributes,t)]},addAttributes(){return{"w:id":{rendered:!1}}}}),H1t=Tr.create({name:"commentReference",group:"inline",inline:!0,atom:!0,selectable:!1,draggable:!1,addOptions(){return{htmlAttributes:{contentEditable:"false","aria-label":"Comment reference node"}}},parseDOM(){return[{tag:"commentReference"}]},renderDOM({htmlAttributes:t}){return["commentReference",an.mergeAttributes(this.options.htmlAttributes,t)]},addAttributes(){return{attributes:{rendered:!1}}}}),V1t=nl.create({name:xa,group:"comments",excludes:"",addOptions(){return{htmlAttributes:{class:"sd-editor-comment"}}},addAttributes(){return{commentId:{},importedId:{},internal:{default:!0,rendered:!1}}},parseDOM(){return[{tag:xa}]},renderDOM({htmlAttributes:t}){return[xa,an.mergeAttributes(this.options.htmlAttributes,t)]}});let Cj=new WeakMap;function U1t(t,e,n,r,i){const s=Cj.get(t);if(s&&s.revision===r)return s.context;const o=i(t,e,n);return Cj.set(t,{revision:r,context:o}),o}function W1t(){Cj=new WeakMap}const qse={dot:"border-bottom: 1px dotted black;",heavy:"border-bottom: 2px solid black;",hyphen:"border-bottom: 1px solid black;",middleDot:"border-bottom: 1px dotted black; margin-bottom: 2px;",underscore:"border-bottom: 1px solid black;"},q1t=t=>`para-${t}`,oSe=(t,e)=>`${t}-tab-${e}`;function aSe(t,e,n,r,i,s){var x,T,R,k;const o=t.resolve(e),l=I1t(o,new Map,r);if(!l)return null;const c=q1t(l.startPos),u=l.paragraph,f=U1t(u,l.startPos,r,i,()=>gW(u,l.startPos,r,l.paragraphDepth))||l,{entries:h}=GEe(u,l.startPos),m=[];let y=0;h.forEach((_,N)=>{var O,$;const L=_.node,M=`${c}-span-${N}`,C=_.pos,D=_.pos+L.nodeSize;L.type.name==="tab"?m.push({type:"tab",spanId:M,tabId:oSe(c,y++),pos:_.pos,nodeSize:L.nodeSize}):L.type.name==="lineBreak"||L.type.name==="hardBreak"?m.push({type:L.type.name,spanId:M,pos:_.pos,nodeSize:L.nodeSize}):L.type.name==="text"&&m.push({type:"text",spanId:M,text:L.text||"",style:(($=(O=L.marks)==null?void 0:O.find(U=>U.type.name==="textStyle"))==null?void 0:$.attrs)||{},from:C,to:D})});const w=Array.isArray(f.tabStops)?[...f.tabStops]:[],b=Yc(Number((x=f.indent)==null?void 0:x.hanging)||0);b>0&&f.indentWidth!=null&&w.unshift({val:"start",pos:f.indentWidth+b,leader:"none"});const E=XEe(n,f.startPos)??GI,A=f.indentWidth??KEe(n,f.startPos,f.indent);return{paragraphId:c,revision:i,paragraphWidth:E,defaultTabDistance:D6,defaultLineLength:GI,indents:{left:Yc(Number((T=f.indent)==null?void 0:T.left)||0),right:Yc(Number((R=f.indent)==null?void 0:R.right)||0),firstLine:Yc(Number((k=f.indent)==null?void 0:k.firstLine)||0),hanging:b},tabStops:w,spans:m,indentWidth:A,paragraphNode:u}}function lSe(t,e,n){var b;const{spans:r,tabStops:i,paragraphWidth:s,defaultTabDistance:o,defaultLineLength:a,paragraphId:l,revision:c,indentWidth:u=0,paragraphNode:d}=t,f={},h=((b=t.indents)==null?void 0:b.left)??0;let m=u;const y=E=>n&&typeof E.from=="number"&&typeof E.to=="number"?Qv(n,E.from,E.to):0,w=d?YEe(d):void 0;for(let E=0;E<r.length;E++){const A=r[E];if(A.type==="text")m+=y(A);else if(A.type==="lineBreak"||A.type==="hardBreak")m=h;else if(A.type==="tab"){const x=G1t(r,E+1);let T;if(n){const k=K1t(r,E+1);if(k){const _=Qv(n,k.from,k.to),N=x;T=L=>L===N?_:N.length>0?L.length/N.length*_:0}}const R=B1e({currentX:m,tabStops:i,paragraphWidth:s,defaultTabDistance:o,defaultLineLength:a,followingText:x,measureText:T});f[A.tabId]={width:R.width,height:w,leader:R.leader,alignment:R.alignment,tabStopPosUsed:R.tabStopPosUsed},m+=R.width}}return{paragraphId:l,revision:c,tabs:f}}const Gse=50;function cSe(t,e,n){const r=[];let i=0;const s=(o,a,l=0)=>{var c;if(l>Gse){console.error(`applyLayoutResult: Maximum recursion depth (${Gse}) exceeded`);return}if(!((c=o==null?void 0:o.type)!=null&&c.name)){console.error("applyLayoutResult: Node missing type.name",{node:o,pos:a,depth:l});return}if(typeof o.nodeSize!="number"||o.nodeSize<0||!Number.isFinite(o.nodeSize)){console.error("applyLayoutResult: Invalid nodeSize",{nodeSize:o.nodeSize,nodeName:o.type.name,pos:a});return}if(o.type.name==="tab"){const u=oSe(t.paragraphId,i++),d=t.tabs[u];if(d){let f=`width: ${d.width}px;`;d.height&&(f+=` height: ${d.height};`),d.leader&&qse[d.leader]&&(f+=` ${qse[d.leader]}`),r.push(Qn.node(a,a+o.nodeSize,{style:f}))}return}try{let u=0;o.forEach(d=>{const f=a+1+u;s(d,f,l+1),u+=d.nodeSize})}catch(u){console.error("applyLayoutResult: Error during recursion",{error:u,nodeName:o.type.name,pos:a,depth:l})}};return s(e,n),r}function G1t(t,e){let n="";for(let r=e;r<t.length;r++){const i=t[r];if(i.type==="tab"||i.type==="lineBreak"||i.type==="hardBreak")break;i.type==="text"&&(n+=i.text||"")}return n}function K1t(t,e){let n=null,r=null;for(let i=e;i<t.length;i++){const s=t[i];if(s.type==="tab"||s.type==="lineBreak"||s.type==="hardBreak")break;s.type==="text"&&typeof s.from=="number"&&typeof s.to=="number"&&(n===null&&(n=s.from),r=s.to)}return n!==null&&r!==null?{from:n,to:r}:null}const X1t=Tr.create({name:"tab",group:"inline",inline:!0,content:"inline*",selectable:!1,atom:!0,addOptions(){return{htmlAttributes:{class:"sd-editor-tab",contentEditable:!1}}},parseDOM(){return[{tag:"span.sd-editor-tab"}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]},addAttributes(){return{tabSize:{renderDOM:({tabSize:t})=>t?{style:`width: ${t}px; min-width: ${t}px;`}:{}}}},addPmPlugins(){if(gw(this.editor))return[];const{view:t,helpers:e}=this.editor;return[new Mr({name:"tabPlugin",key:new ni("tabPlugin"),state:{init(){return{decorations:Y1t(t.state.doc,t,e,0),revision:0}},apply(r,{decorations:i,revision:s},o,a){const l=i&&i.map?i.map(r.mapping,r.doc):An.empty;if(!r.docChanged||r.getMeta("blockNodeInitialUpdate"))return{decorations:l,revision:s};const c=J1t(r,a);if(c.size===0)return{decorations:l,revision:s};let u=l;return c.forEach(d=>{const f=a.doc.nodeAt(d);if(!f||f.type.name!=="paragraph")return;const h=d,m=d+f.nodeSize,y=u.find(h,m);y!=null&&y.length&&(u=u.remove(y));const w=Z1t(a.doc,d+1,f,t,e,s+1);u=u.add(a.doc,w)}),{decorations:u,revision:s+1}}},props:{decorations(r){return this.getState(r).decorations}},view(){return{destroy(){W1t()}}}})]}});function Y1t(t,e,n,r){const i=[];return t.descendants((s,o)=>{if(s.type.name!=="paragraph")return;let a=!1;if(s.descendants(d=>d.type.name==="tab"?(a=!0,!1):!0),!a)return;const l=aSe(t,o+1,e,n,r);if(!l)return;const c=lSe(l,void 0,e),u=cSe(c,s,o);i.push(...u)}),An.create(t,i)}function Z1t(t,e,n,r,i,s){const o=aSe(t,e,r,i,s);if(!o)return[];const a=lSe(o,void 0,r);return cSe(a,n,e-1)}function J1t(t,e){const n=new Set;return t.steps.forEach((r,i)=>{if(r.from==null&&r.to==null)return;let s=r.from,o=r.to;if(!(typeof s!="number"||typeof o!="number")){for(let a=i;a<t.steps.length;a++){const l=t.steps[a].getMap();s=l.map(s,-1),o=l.map(o,1)}s<0||o<0||s>e.doc.content.size||o>e.doc.content.size||e.doc.nodesBetween(s,o,(a,l)=>a.type.name==="paragraph"?(n.add(l),!1):!0)}}),n}const Q1t=Tr.create({name:"lineBreak",group:"inline",inline:!0,marks:"",defining:!0,selectable:!1,content:"",atom:!0,addOptions(){return{}},parseDOM(){return[{tag:"br"}]},renderDOM(){return["br",{}]},addAttributes(){return{lineBreakType:{rendered:!1},clear:{rendered:!1}}},addCommands(){return{insertLineBreak:()=>({commands:t})=>t.insertContent({type:"lineBreak"})}}}),ext=Tr.create({name:"hardBreak",group:"inline",inline:!0,selectable:!1,atom:!0,addOptions(){return{htmlAttributes:{contentEditable:"false",lineBreakType:"page","aria-hidden":"true","aria-label":"Hard break node"}}},addAttributes(){return{pageBreakSource:{rendered:!1,default:null},pageBreakType:{default:null,rendered:!1},lineBreakType:{rendered:!1},clear:{rendered:!1}}},parseDOM(){return[{tag:'span[linebreaktype="page"]',getAttrs:t=>t instanceof HTMLElement?{pageBreakSource:t.getAttribute("pagebreaksource")||null,pageBreakType:t.getAttribute("linebreaktype")||null}:!1}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t)]},addCommands(){return{insertPageBreak:()=>({commands:t})=>t.insertContent({type:"hardBreak",attrs:{pageBreakType:"page"}})}}}),txt=({editor:t})=>class{constructor(n,r){Mt(this,"editor");Mt(this,"node");Mt(this,"dom");Mt(this,"table");Mt(this,"colgroup");Mt(this,"contentDOM");Mt(this,"cellMinWidth");this.editor=t,this.node=n,this.cellMinWidth=r,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xse(this.editor,this.node,this.table),Kse(n,this.colgroup,this.table),this.contentDOM=this.table.appendChild(document.createElement("tbody")),setTimeout(()=>{Yse(this.dom,this.table)},0)}update(n){return n.type!==this.node.type?!1:(this.node=n,Xse(this.editor,n,this.table),Kse(n,this.colgroup,this.table,this.cellMinWidth),Yse(this.dom,this.table),!0)}ignoreMutation(n){const r=this.dom;return n.target===r&&n.type==="attributes"&&n.attributeName==="style"?!0:n.type==="attributes"&&(n.target===this.table||this.colgroup.contains(n.target))}};function Kse(t,e,n,r){var w,b,E,A,x,T,R,k,_,N,L,M,C;const i=Array.isArray((w=t.attrs)==null?void 0:w.grid)&&t.attrs.grid.length?t.attrs.grid.map(D=>Dr(D.col)):null,s=(i==null?void 0:i.length)??null,o=(D,O)=>O??(i&&i[D]!=null?i[D]:null),a=[],l=t.firstChild;let c=0;if(l!==null)for(let D=0;D<l.childCount;D++){const O=l.child(D),{colspan:$,colwidth:U}=O.attrs;for(let W=0;W<$;W+=1,c+=1)a.push(o(c,U&&U[W]))}if(s!=null&&c<s)for(let D=c;D<s;D+=1)a.push(o(D));const u=a.map(D=>{const O=Number(D);return!Number.isFinite(O)||O<0?null:O===0||O<1?0:O}),d=See(((b=t.attrs.tableProperties.tableWidth)==null?void 0:b.value)??null,((E=t.attrs.tableProperties.tableWidth)==null?void 0:E.type)??"auto");let f=e.firstChild;for(u.forEach(D=>{f||(f=document.createElement("col"),e.appendChild(f)),f.style.width=D!=null?`${D}px`:null,f=f.nextSibling});f;){const D=f.nextSibling;(A=f.parentNode)==null||A.removeChild(f),f=D}const h=See(((x=t.attrs.tableProperties.tableIndent)==null?void 0:x.value)??0,((T=t.attrs.tableProperties.tableIndent)==null?void 0:T.type)??"dxa"),m=((_=(k=(R=l==null?void 0:l.firstChild)==null?void 0:R.attrs)==null?void 0:k.cellMargins)==null?void 0:_.left)??0,y=((M=(L=(N=l==null?void 0:l.lastChild)==null?void 0:N.attrs)==null?void 0:L.cellMargins)==null?void 0:M.right)??0;if(n.style.marginLeft=`${-m}px`,h!==null&&(n.style.marginLeft=h),((C=t.attrs.tableProperties.tableWidth)==null?void 0:C.type)==="pct"){const D=m+y;n.style.maxWidth=n.style.width=`calc(${d} + ${D}px)`}else n.style.maxWidth=n.style.width=d}function Xse(t,e,n){const i=t.extensionService.attributes.filter(o=>o.type==="table"),s=an.getAttributesToRender(e,i);Object.entries(s).forEach(([o,a])=>{o==="style"?n.style.cssText=a:n.setAttribute(o,a)})}function Yse(t,e){let n=1,r;if(!e)return;let i=parseFloat(e.style.borderLeftWidth||0),s=parseFloat(e.style.borderRightWidth)||0,o=[...e.querySelectorAll(":scope > tbody > tr > td:first-child")],a=[...e.querySelectorAll(":scope > tbody > tr > td:last-child")];for(let l of o){let c=parseFloat(l.style.borderLeftWidth)||0;i=Math.max(i,c)}for(let l of a){let c=parseFloat(l.style.borderRightWidth)||0;s=Math.max(s,c)}r=Math.ceil(Math.max(i,s)),t.style.setProperty("--table-border-width",`${r||n}px`)}const Zse=(t,e=null)=>e?t.createChecked(null,e):t.createAndFill(),_j=(t={})=>(t={size:.66665,color:"#000000",...t},{top:t,left:t,bottom:t,right:t,insideH:t,insideV:t}),nxt=(t,e,n,r,i=null)=>{const s={table:uc("table",t),tableRow:uc("tableRow",t),tableCell:uc("tableCell",t),tableHeader:uc("tableHeader",t)},o=[],a=[];for(let u=0;u<n;u++){const d=Zse(s.tableCell,i);if(d&&a.push(d),r){const f=Zse(s.tableHeader,i);f&&o.push(f)}}const l=[];for(let u=0;u<e;u++){const d=r&&u===0?o:a;l.push(s.tableRow.createChecked(null,d))}const c=_j();return s.table.createChecked({borders:c},l)},Jse=(t,e)=>{if(e!=null){const n=Number(e);if(Number.isFinite(n)&&n>=0)return["width",`${n}px`]}return["min-width",`${t}px`]},Qse=1,rxt=(t,e,n,r)=>{var b;let i=0,s=!0;const o=[],a=[],l=t.firstChild,c=Array.isArray((b=t.attrs)==null?void 0:b.grid)&&t.attrs.grid.length?t.attrs.grid.map(E=>Dr(E.col)):null;if(!l)return{};const u=c==null?void 0:c.length,d=(E,A)=>n===E?r:A??(c&&c[E]!=null?c[E]:null);let f=0;for(let E=0;E<l.childCount;E++){const A=l.child(E),{colspan:x,colwidth:T}=A.attrs;for(let R=0;R<x;R++,f++){const k=d(f,T&&T[R]),_=Number(k);let N=Number.isFinite(_)&&_>0?_:null;N!=null&&N<Qse&&(N=0),N==null?(i+=e,s=!1):i+=N;const[L,M]=Jse(e,N);o.push(["col",{style:`${L}: ${M}`}]),a.push(parseFloat(M))}}if(u!=null)for(let E=f;E<u;E++){const A=d(E),x=Number(A);let T=Number.isFinite(x)&&x>0?x:null;T!=null&&T<Qse&&(T=0),T==null?(i+=e,s=!1):i+=T;const[R,k]=Jse(e,T);o.push(["col",{style:`${R}: ${k}`}]),a.push(parseFloat(k))}const h=s?`${i}px`:"",m=s?"":`${i}px`,y=["colgroup",{},...o],w=[...a];return{colgroup:y,tableWidth:h,tableMinWidth:m,colgroupValues:w}},uSe=t=>t instanceof ei,t_=({editor:t})=>{const{selection:e}=t.state;if(!uSe(e))return!1;let n=0;const r=A2(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},dSe=(t={})=>(t={size:.66665,color:"#000000",...t},{top:t,left:t,bottom:t,right:t});function ixt(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function sxt(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function oxt(t,e,n){if(n&&n.type&&n.type.name==="table")return n;if(typeof e=="number"){const r=t.doc.nodeAt(e);if(r&&r.type.name==="table")return r}return null}function axt(t,e){var i,s;const n=e.nodes.tableRow,r=[];if(t.descendants(o=>{o.type===n&&r.push(o)}),!r.length)return null;for(let o=r.length-1;o>=0;o--){const a=r[o];if((s=(i=a.content)==null?void 0:i.content)==null?void 0:s.some(c=>c.type.name==="tableCell"))return a}return r[r.length-1]}function lxt(t,e){var a,l;const n=e.nodes.paragraph;let r=n,i=null,s=[];const o=((a=t==null?void 0:t.content)==null?void 0:a.content)||[];for(const c of o){(c.type===n||c.type.name==="heading")&&(r=c.type||n,i=c.attrs||null);let d=null;if((l=c.descendants)==null||l.call(c,f=>{!d&&f.isText&&(d=f)}),d){s=d.marks?Array.from(d.marks):[];break}}return(!r||!r.validContent)&&(r=n),{blockType:r,blockAttrs:i,textMarks:s}}function cxt(t,e,{blockType:n,blockAttrs:r,textMarks:i},s=!1){const o=typeof e=="string"?e:e==null?"":String(e),a=s?i||[]:[],l=t.text(o,a);return(n||t.nodes.paragraph).createAndFill(r||null,l)}function uxt({schema:t,tableNode:e,templateRow:n,values:r,copyRowStyle:i=!1}){const s=t.nodes.tableRow,o=t.nodes.tableCell,a=t.nodes.tableHeader,c=Ei.get(e).width,u=Array.isArray(r)&&r.length===c,d=[];let f=0;return n.content.content.forEach((h,m)=>{const w=h.type===a?o:h.type,b={...h.attrs},E=lxt(h,t);let A="";if(u){const R=Math.max(1,b.colspan||1);A=r[f]??"",f+=R}else A=Array.isArray(r)?r[m]??"":"";const x=cxt(t,A,E,i),T=w.createAndFill(b,x);T&&d.push(T)}),s.createAndFill(null,d)}function dxt({tr:t,tablePos:e,tableNode:n,rows:r}){if(!r||!r.length)return;const i="tableRow";let s=0,o=null;if(n.descendants((c,u)=>{c.type.name===i&&(s=u,o=c)}),!o)return;const a=e+1+s+o.nodeSize,l=Nt.fromArray(r);t.insert(a,l)}const fSe=Tr.create({name:"table",content:"tableRow+",group:"block",isolating:!0,tableRole:"table",addOptions(){return{htmlAttributes:{"aria-label":"Table node"},resizable:!0,handleWidth:5,cellMinWidth:10,lastColumnResizable:!0,allowTableNodeSelection:!1}},addAttributes(){return{sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},tableIndent:{renderDOM:({tableIndent:t})=>{if(!t)return{};const{width:e}=t;let n="";return e&&(n+=`margin-left: ${e}px`),{style:n}}},borders:{default:{}},borderCollapse:{default:null,renderDOM({borderCollapse:t}){return{style:`border-collapse: ${t||"collapse"}`}}},justification:{default:null,renderDOM:t=>t.justification?t.justification==="center"?{style:"margin: 0 auto"}:t.justification==="right"?{style:"margin-left: auto"}:{}:{}},tableStyleId:{rendered:!1},tableLayout:{rendered:!1},tableCellSpacing:{default:null,rendered:!1},tableProperties:{default:{tableWidth:{value:null,type:"auto"}},rendered:!1},grid:{default:null,rendered:!1},userEdited:{default:!1,rendered:!1}}},parseDOM(){return[{tag:"table"}]},renderDOM({node:t,htmlAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=rxt(t,this.options.cellMinWidth);return["table",an.mergeAttributes(this.options.htmlAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{appendRowsWithContent:({tablePos:t,tableNode:e,valueRows:n=[],copyRowStyle:r=!1})=>({editor:i,chain:s})=>typeof t!="number"&&!e||!Array.isArray(n)||!n.length?!1:s().command(({tr:o,dispatch:a})=>{const l=oxt(o,t,e);if(!l)return!1;const c=axt(l,i.schema);if(!c)return!1;const u=n.map(f=>uxt({schema:i.schema,tableNode:l,templateRow:c,values:f,copyRowStyle:r})).filter(Boolean);if(!u.length)return!1;let d=t;if(typeof d!="number"&&l){const f=i.getNodesOfType("table"),h=l?f.find(m=>m.node.eq(l)):f[0];d=(h==null?void 0:h.pos)??null}return typeof d!="number"?!1:(a&&dxt({tr:o,tablePos:t,tableNode:l,rows:u}),!0)}).run(),insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!1}={})=>({tr:r,dispatch:i,editor:s})=>{var a,l;const o=nxt(s.schema,t,e,n);if(i){let c=r.selection.$from.end()+1;((l=(a=r.selection.$from.parent)==null?void 0:a.type)==null?void 0:l.name)==="run"&&(c=r.selection.$from.after(r.selection.$from.depth-1)),r.replaceSelectionWith(o).scrollIntoView().setSelection(Vt.near(r.doc.resolve(c)))}return!0},deleteTable:()=>({state:t,dispatch:e})=>uut(t,e),addColumnBefore:()=>({state:t,dispatch:e,chain:n})=>{if(!yre(t))return!1;let{rect:r,attrs:i}=n_(t);return n().command(()=>yre(t,e)).command(({tr:s})=>{let o=s.doc.nodeAt(r.tableStart-1);if(!o)return!1;let a=Ei.get(o),l=r.left;if(l<0||l>=a.width)return!1;for(let c=0;c<a.height;c++){let u=c*a.width+l,d=a.map[u],f=r.tableStart+d,h=s.doc.nodeAt(f);if(h){let m={...i,colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,colwidth:h.attrs.colwidth};s.setNodeMarkup(f,null,m)}}return!0}).run()},addColumnAfter:()=>({state:t,dispatch:e,chain:n})=>{if(!bre(t))return!1;let{rect:r,attrs:i}=n_(t);return n().command(()=>bre(t,e)).command(({tr:s})=>{let o=s.doc.nodeAt(r.tableStart-1);if(!o)return!1;let a=Ei.get(o),l=r.left+1;if(l<0||l>=a.width)return!1;for(let c=0;c<a.height;c++){let u=c*a.width+l,d=a.map[u],f=r.tableStart+d,h=s.doc.nodeAt(f);if(h){let m={...i,colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,colwidth:h.attrs.colwidth};s.setNodeMarkup(f,null,m)}}return!0}).run()},deleteColumn:()=>({state:t,dispatch:e})=>Qct(t,e),addRowBefore:()=>({state:t,dispatch:e,chain:n})=>{if(!wre(t))return!1;let{rect:r,attrs:i}=n_(t);return n().command(()=>wre(t,e)).command(({tr:s})=>{let o=s.doc.nodeAt(r.tableStart-1);if(!o)return!1;let a=Ei.get(o),l=r.top;if(l<0||l>=a.height)return!1;for(let c=0;c<a.width;c++){let u=l*a.width+c,d=a.map[u],f=r.tableStart+d,h=s.doc.nodeAt(f);if(h){let m={...i,colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,colwidth:h.attrs.colwidth};s.setNodeMarkup(f,null,m)}}return!0}).run()},addRowAfter:()=>({state:t,dispatch:e,chain:n})=>{if(!vre(t))return!1;let{rect:r,attrs:i}=n_(t);return n().command(()=>vre(t,e)).command(({tr:s})=>{let o=s.doc.nodeAt(r.tableStart-1);if(!o)return!1;let a=Ei.get(o),l=r.top+1;if(l>=a.height)return!1;for(let c=0;c<a.width;c++){let u=l*a.width+c,d=a.map[u],f=r.tableStart+d,h=s.doc.nodeAt(f);if(h){let m={...i,colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,colwidth:h.attrs.colwidth};s.setNodeMarkup(f,null,m)}}return!0}).run()},deleteRow:()=>({state:t,dispatch:e})=>nut(t,e),mergeCells:()=>({state:t,dispatch:e})=>Ere(t,e),splitCell:()=>({state:t,dispatch:e,commands:n})=>iut(t,e)?!0:n.splitSingleCell(),splitSingleCell:()=>({state:t,dispatch:e,tr:n})=>{var o;const r=t.selection;let i,s;if(r instanceof ei){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,s=r.$anchorCell.pos}else{if(i=sxt(r.$from),!i)return!1;s=(o=ixt(r.$from))==null?void 0:o.pos}if(i==null||s==null||i.attrs.colspan!=1||i.attrs.rowspan!=1)return!1;if(e){let a=mu(t),l=a.top,c=a.left,u={...i.attrs},d=u.colwidth,f=null;d&&d[0]&&(f=Math.ceil(d[0]/2)),f&&n.setNodeMarkup(n.mapping.map(s,1),null,{...u,colwidth:[f]});const h={...u,colwidth:f?[f]:null},m=fxt({node:i,state:t}).createAndFill(h);n.insert(n.mapping.map(s+i.nodeSize,1),m);for(let y=0;y<a.map.height;y++){if(y===l)continue;let w=new Set;for(let b=0;b<a.map.width;b++){let E=a.map.map[y*a.map.width+b];E!=null&&w.add(E)}[...w].forEach(b=>{let E=a.map.findCell(b);if(E.left<=c&&E.right>c){let A=n.mapping.map(a.tableStart+b,1),x=n.doc.nodeAt(A);if(x){let T=(x.attrs.colspan||1)+1,R=x.attrs.colwidth;if(R&&f){let _=c-E.left;R=[...R.slice(0,_),f,f,...R.slice(_+1)]}let k={...x.attrs,colspan:T,colwidth:R};n.setNodeMarkup(A,null,k)}}})}}return!0},mergeOrSplit:()=>({state:t,dispatch:e,commands:n})=>Ere(t,e)?!0:n.splitCell(),toggleHeaderColumn:()=>({state:t,dispatch:e})=>ET("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>ET("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>lut(t,e),setCellAttr:(t,e)=>({state:n,dispatch:r})=>out(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Are(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Are(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&M1e(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>(n&&e.setSelection(ei.create(e.doc,t.anchorCell,t.headCell)),!0),setCellBackground:t=>({editor:e,commands:n,dispatch:r})=>{const{selection:i}=e.state;if(!uSe(i))return!1;const s=t!=null&&t.startsWith("#")?t.slice(1):t;return r?n.setCellAttr("background",{color:s}):!0},deleteCellAndTableBorders:()=>({state:t,tr:e})=>{if(!mU(t))return!1;const n=Ml(s=>s.type.name===this.name)(t.selection);if(!n)return!1;const r=n.pos,i=n.pos+n.node.nodeSize;return t.doc.nodesBetween(r,i,(s,o)=>{["tableCell","tableHeader"].includes(s.type.name)&&e.setNodeMarkup(o,void 0,{...s.attrs,borders:dSe({size:0,space:0,val:"none",color:"auto"})})}),e.setNodeMarkup(n.pos,void 0,{...n.node.attrs,borders:_j({size:0}),tableProperties:{...n.node.attrs.tableProperties,borders:_j({size:0,space:0,val:"none",color:"auto"})}}),!0}}},addShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:t_,"Mod-Backspace":t_,Delete:t_,"Mod-Delete":t_}},addPmPlugins(){return[...this.options.resizable&&this.editor.isEditable?[vut({handleWidth:0,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,lastColumnResizable:this.options.lastColumnResizable,View:txt({editor:this.editor})})]:[],Iut({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){return{tableRole:Ni(kn(t,"tableRole",{name:t.name,options:t.options,storage:t.storage}))}}});function fxt({node:t,state:e}){return ea(e.schema)[t.type.spec.tableRole]}function hxt(t){const{colspan:e,rowspan:n,colwidth:r,...i}=t.attrs;return i}function n_(t){let e=mu(t),n=e.top*e.map.width+e.left,r=e.map.map[n],i=e.table.nodeAt(r),s=hxt(i);return{rect:e,cell:i,attrs:s}}const hSe=Tr.create({name:"tableHeader",content:"block+",tableRole:"header_cell",isolating:!0,addOptions(){return{htmlAttributes:{"aria-label":"Table head node"}}},addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseDOM:t=>{const e=t.getAttribute("data-colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null},renderDOM:t=>t.colwidth?{"data-colwidth":t.colwidth.join(",")}:{}},__placeholder:{default:null,parseDOM:t=>t.getAttribute("data-placeholder")||null,renderDOM({__placeholder:t}){return t?{"data-placeholder":t}:{}}}}},parseDOM(){return[{tag:"th"}]},renderDOM({htmlAttributes:t}){return["th",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),pSe=Tr.create({name:"tableRow",content:"(tableCell | tableHeader)*",tableRole:"row",addOptions(){return{htmlAttributes:{"aria-label":"Table row node"}}},addAttributes(){return{rowHeight:{renderDOM({rowHeight:t}){return t?{style:`height: ${t}px`}:{}}},cantSplit:{default:!1,parseDOM(){return{}},renderDOM({cantSplit:t}){return t?{"data-cant-split":"true"}:{}}},tableRowProperties:{rendered:!1},rsidDel:{rendered:!1},rsidR:{rendered:!1},rsidRPr:{rendered:!1},rsidTr:{rendered:!1},paraId:{rendered:!1},textId:{rendered:!1}}},parseDOM(){return[{tag:"tr"}]},renderDOM({htmlAttributes:t}){return["tr",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),mSe=Tr.create({name:"tableCell",content:"block+",tableRole:"cell",isolating:!0,addOptions(){return{htmlAttributes:{"aria-label":"Table cell node"}}},addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:[100],parseDOM:t=>{const e=t.getAttribute("data-colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null},renderDOM:t=>t.colwidth?{"data-colwidth":t.colwidth.join(",")}:{}},background:{renderDOM({background:t}){if(!t)return{};const{color:e}=t||{};return{style:`background-color: ${e?`#${e}`:"transparent"}`}}},verticalAlign:{renderDOM({verticalAlign:t}){return t?{style:`vertical-align: ${t}`}:{}}},cellMargins:{renderDOM({cellMargins:t,borders:e}){return t?{style:["top","right","bottom","left"].map(i=>{const s=(t==null?void 0:t[i])??0,o=e==null?void 0:e[i],a=o&&o.val!=="none"?Math.ceil(o.size):0;return s?`padding-${i}: ${Math.max(0,s-a)}px;`:""}).join(" ")}:{}}},borders:{default:()=>dSe(),renderDOM({borders:t}){return t?{style:["top","right","bottom","left"].map(r=>{const i=t==null?void 0:t[r];if(i&&i.val==="none")return`border-${r}: ${i.val};`;let s=(i==null?void 0:i.color)||"black";return s==="auto"&&(s="black"),i?`border-${r}: ${Math.ceil(i.size)}px solid ${s};`:""}).join(" ")}:{}}},widthType:{default:"auto",rendered:!1},widthUnit:{default:"px",rendered:!1},__placeholder:{default:null,parseDOM:t=>t.getAttribute("data-placeholder")||null,renderDOM({__placeholder:t}){return t?{"data-placeholder":t}:{}}},tableCellProperties:{default:null,rendered:!1}}},parseDOM(){return[{tag:"td"}]},renderDOM({htmlAttributes:t}){return["td",an.mergeAttributes(this.options.htmlAttributes,t),0]}});var ip,cy;class pxt{constructor(e){st(this,ip);Mt(this,"editor");Mt(this,"node");Mt(this,"decorations");Mt(this,"getPos");Mt(this,"htmlAttributes");Mt(this,"dom");Mt(this,"annotationClass");Mt(this,"annotationContentClass");Mt(this,"borderColor");this.editor=e.editor,this.node=e.node,this.decorations=e.decorations,this.getPos=e.getPos,this.htmlAttributes=e.htmlAttributes,this.annotationClass=e.annotationClass,this.annotationContentClass=e.annotationContentClass,this.borderColor=e.borderColor,this.handleAnnotationClick=this.handleAnnotationClick.bind(this),this.handleAnnotationDoubleClick=this.handleAnnotationDoubleClick.bind(this),this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.buildView(),this.attachEventListeners()}buildView(){let{type:e}=this.node.attrs,n={text:(...i)=>this.buildTextView(...i),image:(...i)=>this.buildImageView(...i),signature:(...i)=>this.buildSignatureView(...i),checkbox:(...i)=>this.buildCheckboxView(...i),html:(...i)=>this.buildHTMLView(...i),link:(...i)=>this.buildLinkView(...i),default:(...i)=>this.buildTextView(...i)};(n[e]??n.default)()}buildTextView(){let{displayLabel:e}=this.node.attrs,{annotation:n}=pe(this,ip,cy).call(this,{displayLabel:e});this.dom=n}buildImageView(){let{displayLabel:e,imageSrc:n}=this.node.attrs,{annotation:r,content:i}=pe(this,ip,cy).call(this);if(n){let s=document.createElement("img");s.src=n,s.alt=e,s.style.height="auto",s.style.maxWidth="100%",s.style.pointerEvents="none",s.style.verticalAlign="middle",i.append(s),r.style.display="inline-block",i.style.display="inline-block"}else i.textContent=e;this.dom=r}buildSignatureView(){let{displayLabel:e,imageSrc:n}=this.node.attrs;e=e||"Signature";let{annotation:r,content:i}=pe(this,ip,cy).call(this);if(n){let s=document.createElement("img");s.src=n,s.alt=e,s.style.height="auto",s.style.maxWidth="100%",s.style.maxHeight="28px",s.style.pointerEvents="none",s.style.verticalAlign="middle",i.append(s),r.style.display="inline-block",i.style.display="inline-block"}else i.textContent=e;this.dom=r}buildCheckboxView(){let{displayLabel:e}=this.node.attrs,{annotation:n}=pe(this,ip,cy).call(this,{displayLabel:e});this.dom=n}buildHTMLView(){let{displayLabel:e,rawHtml:n}=this.node.attrs;if(!this.editor.options.isHeadless&&n)try{const s=document.createElement("div");n=this.editor.createChildEditor({element:s,html:n}).view.dom.innerHTML}catch(s){console.warn("Error parsing HTML in FieldAnnotationView:",s)}let{annotation:r,content:i}=pe(this,ip,cy).call(this);n?(i.innerHTML=n.trim(),r.style.display="inline-block",i.style.display="inline-block"):i.textContent=e,this.dom=r}buildLinkView(){let{displayLabel:e,linkUrl:n}=this.node.attrs,{annotation:r,content:i}=pe(this,ip,cy).call(this);if(n){let s=document.createElement("a");s.href=n,s.target="_blank",s.textContent=n,s.style.textDecoration="none",i.append(s),i.style.pointerEvents="all"}else i.textContent=e;this.dom=r}attachEventListeners(){this.dom.addEventListener("click",this.handleAnnotationClick),this.dom.addEventListener("dblclick",this.handleAnnotationDoubleClick),this.editor.on("selectionUpdate",this.handleSelectionUpdate)}removeEventListeners(){this.dom.removeEventListener("click",this.handleAnnotationClick),this.dom.removeEventListener("dblclick",this.handleAnnotationDoubleClick),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}handleSelectionUpdate({editor:e}){if(!this.editor.isEditable)return;let{selection:n}=e.state;if(n instanceof ln){let r=n.node;this.node.eq(r)&&this.editor.emit("fieldAnnotationSelected",{editor:this.editor,node:this.node,nodePos:this.getPos(),target:this.dom})}}handleAnnotationClick(e){this.editor.isEditable&&this.editor.emit("fieldAnnotationClicked",{editor:this.editor,node:this.node,nodePos:this.getPos(),event:e,currentTarget:e.currentTarget})}handleAnnotationDoubleClick(e){this.editor.isEditable&&this.editor.emit("fieldAnnotationDoubleClicked",{editor:this.editor,node:this.node,nodePos:this.getPos(),event:e,currentTarget:e.currentTarget})}stopEvent(e){return this.editor.isEditable?!1:(e.preventDefault(),!0)}update(){return!1}ignoreMutation(){return!0}destroy(){this.removeEventListeners()}updateAttributes(e){this.editor.commands.command(({tr:n})=>(n.setNodeMarkup(this.getPos(),void 0,{...this.node.attrs,...e}),!0))}}ip=new WeakSet,cy=function({displayLabel:e}={}){let{highlighted:n}=this.node.attrs,r=document.createElement("span");r.classList.add(this.annotationClass);let i=document.createElement("span");i.classList.add(this.annotationContentClass),i.style.pointerEvents="none",i.contentEditable="false",e&&(i.textContent=e),r.append(i);let s=n===!1,a=[`border: 2px solid ${this.borderColor}`,"border-radius: 2px","padding: 1px 2px","box-sizing: border-box"].join("; "),l=an.mergeAttributes(this.htmlAttributes,{style:s?"":a});for(let[c,u]of Object.entries(l))c==="style"?r.style.cssText=u:r.setAttribute(c,u);return{annotation:r,content:i}};const Nj=t=>{if(t.length===0)return[];const e=[...t].sort((r,i)=>r[0]-i[0]).map(r=>[...r]),n=[e[0]];for(let r=1;r<e.length;r++){const i=e[r],s=n[n.length-1];i[0]<=s[1]?s[1]=Math.max(s[1],i[1]):n.push(i)}return n},Ij=(t,e,n)=>{const r=Math.max(0,Math.min(t,n)),i=Math.max(0,Math.min(e,n));return r>=i?null:[r,i]},mxt=(t={})=>{let{editor:e,annotationClass:n}=t;return new Mr({key:new ni("fieldAnnotation"),state:{init(){return null},apply(r,i){return Qlt(e,r),i}},props:{handleDrop(r,i,s,o){if(o)return!1;let a=i==null?void 0:i.dataTransfer.getData("fieldAnnotation");if(a){if(t.handleDropOutside)gxt({fieldAnnotation:a,editor:e,view:r,event:i});else{let l;try{l=JSON.parse(a).attributes}catch{return!1}const c=r.posAtCoords({left:i.clientX,top:i.clientY});c&&e.commands.addFieldAnnotation(c.pos,{...l})}return!0}return!1},handlePaste(r,i,s){const o=s.content.content.filter(a=>a.type.name==="fieldAnnotation");return o.length&&e.emit("fieldAnnotationPaste",{content:o,editor:e}),!1},handleDOMEvents:{dragstart:(r,i)=>{var a,l;if(!i.target)return!1;let{target:s}=i;return((a=s.classList)==null?void 0:a.contains(n))&&((l=i.dataTransfer)==null||l.setDragImage(s,0,0)),!1}}},appendTransaction:(r,i,s)=>{if(!(r.some(h=>h.docChanged)&&!i.doc.eq(s.doc)))return;const a=[];let l=!1,c=!1;if(r.forEach(h=>{h.steps&&(c=!0,h.steps.forEach(m=>{var y,w;if((y=m.slice)!=null&&y.content&&m.slice.content.descendants(b=>{if(b.type.name==="fieldAnnotation")return l=!0,!1}),typeof m.from=="number"&&typeof m.to=="number"){const b=m.from,E=m.from===m.to&&((w=m.slice)!=null&&w.size)?m.from+m.slice.size:m.to;a.push([b,E])}}))}),c&&!l&&a.length>0){const h=Nj(a);let m=!1;for(const[y,w]of h){const b=Ij(y,w,s.doc.content.size);if(!b)continue;const[E,A]=b;try{s.doc.nodesBetween(E,A,x=>{if(x.type.name==="fieldAnnotation")return m=!0,!1})}catch(x){console.warn("FieldAnnotationPlugin: range check failed, assuming annotations exist",x),m=!0;break}if(m)break}if(!m)return}const{tr:u}=s;let d=!1;const f=(h,m)=>{const{marks:y}=h,w=u.doc.nodeAt(m);y.length>0&&h.eq(w)&&(u.removeMark(m,m+h.nodeSize,null),d=!0)};if(a.length>0){const h=Nj(a);let m=!1;for(const[y,w]of h){const b=Ij(y,w,s.doc.content.size);if(!b)continue;const[E,A]=b;try{s.doc.nodesBetween(E,A,(x,T)=>{x.type.name==="fieldAnnotation"&&f(x,T)})}catch(x){console.warn("FieldAnnotationPlugin: nodesBetween failed, falling back to full scan",x),m=!0;break}}if(m){const y=up(s);if(!y.length)return d?u:null;y.forEach(({node:w,pos:b})=>{f(w,b)})}}else{const h=up(s);if(!h.length)return;h.forEach(({node:m,pos:y})=>{f(m,y)})}return d?u:null}})};function gxt({fieldAnnotation:t,editor:e,view:n,event:r}){let i;try{i=JSON.parse(t).sourceField}catch{return}let s=n.posAtCoords({left:r.clientX,top:r.clientY});s&&e.emit("fieldAnnotationDropped",{sourceField:i,editor:e,coordinates:s,pos:s.pos})}function Rj(t,e,n){return Math.min(Math.max(t,n),e)}class yxt extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var MS=yxt;function bxt(t){if(typeof t!="string")throw new MS(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=kxt.test(t)?xxt(t):t;const n=Ext.exec(e);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(NT(a,2),16)),parseInt(NT(o[3]||"f",2),16)/255]}const r=Sxt.exec(e);if(r){const o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const i=Axt.exec(e);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const s=Txt.exec(e);if(s){const[o,a,l,c]=Array.from(s).slice(1).map(parseFloat);if(Rj(0,100,a)!==a)throw new MS(t);if(Rj(0,100,l)!==l)throw new MS(t);return[...Cxt(o,a,l),Number.isNaN(c)?1:c]}throw new MS(t)}function wxt(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const eoe=t=>parseInt(t.replace(/_/g,""),36),vxt="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=eoe(e.substring(0,3)),r=eoe(e.substring(3)).toString(16);let i="";for(let s=0;s<6-r.length;s++)i+="0";return t[n]=`${i}${r}`,t},{});function xxt(t){const e=t.toLowerCase().trim(),n=vxt[wxt(e)];if(!n)throw new MS(t);return`#${n}`}const NT=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),Ext=new RegExp(`^#${NT("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Sxt=new RegExp(`^#${NT("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Axt=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${NT(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Txt=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,kxt=/^[a-z]+$/i,toe=t=>Math.round(t*255),Cxt=(t,e,n)=>{let r=n/100;if(e===0)return[r,r,r].map(toe);const i=(t%360+360)%360/60,s=(1-Math.abs(2*r-1))*(e/100),o=s*(1-Math.abs(i%2-1));let a=0,l=0,c=0;i>=0&&i<1?(a=s,l=o):i>=1&&i<2?(a=o,l=s):i>=2&&i<3?(l=s,c=o):i>=3&&i<4?(l=o,c=s):i>=4&&i<5?(a=o,c=s):i>=5&&i<6&&(a=s,c=o);const u=r-s/2,d=a+u,f=l+u,h=c+u;return[d,f,h].map(toe)};function _xt(t){const[e,n,r,i]=bxt(t);let s=o=>{const a=Rj(0,255,o).toString(16);return a.length===1?`0${a}`:a};return`#${s(e)}${s(n)}${s(r)}${i<1?s(Math.round(i*255)):""}`}const Nxt=(t,e)=>{const n={totalFieldAnnotations:0,deletableFieldAnnotations:0,hasOtherInlineContent:!1};return typeof(t==null?void 0:t.descendants)!="function"||t.descendants(r=>{var i,s,o;if(!r)return!0;if(((i=r.type)==null?void 0:i.name)==="fieldAnnotation"){n.totalFieldAnnotations+=1;const a=(s=r.attrs)==null?void 0:s.fieldId;return a&&e.has(a)?n.deletableFieldAnnotations+=1:n.hasOtherInlineContent=!0,!1}return r.isText?((o=r.text)!=null&&o.trim()&&(n.hasOtherInlineContent=!0),!1):r.isInline||r.isAtom?(n.hasOtherInlineContent=!0,!1):!0}),n},Ixt=(t=[])=>({dispatch:e,tr:n,state:r})=>{if(!e)return!0;Array.isArray(t)||(t=[t]);const i=new Set(t),{doc:s}=r,o=up(r)||[],a=[];return t.forEach(l=>{const c=o.find(E=>E.node.attrs.fieldId===l);if(!c)return;const u=A2(s.resolve(c.pos),lu);if(!u)return;const{totalFieldAnnotations:d,deletableFieldAnnotations:f,hasOtherInlineContent:h}=Nxt(u.node,i);if(!d||h||d!==f)return;let{pos:m,node:y,depth:w}=u,b=s.resolve(m);for(;w>0;){const E=b.node(w-1);if(E.childCount===1)w-=1,m=b.before(w),y=E,b=s.resolve(m);else break}a.some(E=>E.pos===m)||a.push({pos:m,node:y})}),a.length&&(a.sort((l,c)=>c.pos-l.pos).forEach(({pos:l,node:c})=>{n.delete(l,l+c.nodeSize)}),n.setMeta("updateListSync",!0)),!0},Rxt=Object.freeze(Object.defineProperty({__proto__:null,cleanUpListsWithAnnotations:Ixt},Symbol.toStringTag,{value:"Module"})),Mxt=(t=[])=>({dispatch:e,tr:n,state:r})=>{var u;if(!e)return!0;const i=(typeof Wv=="function"?Wv(t,r):[])||[],s=new Map,o=d=>d.content.size,a=(d,f)=>Number.isInteger(f)&&f>=0&&f<=o(d);for(const d of i){const f=d&&d.pos;if(!Number.isInteger(f))continue;const h=n.mapping.map(f,1);if(!a(n.doc,h))continue;let m;try{m=n.doc.resolve(h)}catch{continue}const y=m.parent;if(!y||y.childCount>=2)continue;const w=n.doc.nodeAt(h),b=d&&d.node;if(!w||b&&!((u=b.sameMarkup)!=null&&u.call(b,w))&&b.type!==w.type)continue;const E=m.before();a(n.doc,E)&&s.set(E,!0)}if(s.size===0)return!0;const l=[...s.keys()].sort((d,f)=>f-d);let c=!1;for(const d of l){const f=n.mapping.map(d,-1);if(!a(n.doc,f))continue;const h=n.doc.nodeAt(f);if(!h)continue;const m=f,y=f+h.nodeSize;if(!(!a(n.doc,m)||!a(n.doc,y)||y<=m))try{n.delete(m,y),c=!0}catch{continue}}return c&&e(n),!0},Lxt=Object.freeze(Object.defineProperty({__proto__:null,cleanUpParagraphWithAnnotations:Mxt},Symbol.toStringTag,{value:"Module"})),Dxt={...Rxt,...Lxt},Mj="annotation",gSe="annotation-content",ySe=Tr.create({name:"fieldAnnotation",group:"inline",inline:!0,atom:!0,draggable:!0,selectable:!0,addOptions(){return{htmlAttributes:{class:Mj,"aria-label":"Field annotation node"},annotationClass:Mj,annotationContentClass:gSe,types:["text","image","signature","checkbox","html","link"],defaultType:"text",borderColor:"#b015b3",visibilityOptions:["visible","hidden"],handleDropOutside:!0,toggleFormatNames:["bold","italic","underline"]}},addAttributes(){return{type:{default:this.options.defaultType,parseDOM:t=>t.getAttribute("data-type"),renderDOM:t=>t.type?{"data-type":t.type}:{}},defaultDisplayLabel:{default:"",parseDOM:t=>t.getAttribute("data-default-display-label"),renderDOM:t=>t.defaultDisplayLabel?{"data-default-display-label":t.defaultDisplayLabel}:{}},displayLabel:{default:"",parseDOM:t=>t.getAttribute("data-display-label"),renderDOM:t=>t.displayLabel?{"data-display-label":t.displayLabel}:{}},imageSrc:{default:null,rendered:!1,parseDOM:t=>{let e=t.querySelector("img");return(e==null?void 0:e.getAttribute("src"))||null}},rawHtml:{default:null,parseDOM:t=>{try{return t.getAttribute("data-type")==="html"?JSON.parse(t.getAttribute("data-raw-html")):null}catch(e){console.warn("Paste parse error",e)}return null},renderDOM:t=>t.rawHtml?{"data-raw-html":JSON.stringify(t.rawHtml)}:{}},linkUrl:{default:null,rendered:!1,parseDOM:t=>{let e=t.querySelector("a");return(e==null?void 0:e.getAttribute("href"))||null}},fieldId:{default:null,parseDOM:t=>t.getAttribute("data-field-id"),renderDOM:t=>t.fieldId?{"data-field-id":t.fieldId}:{}},fieldType:{default:null,parseDOM:t=>t.getAttribute("data-field-type"),renderDOM:t=>t.fieldType?{"data-field-type":t.fieldType}:{}},fieldColor:{default:"#980043",parseDOM:t=>t.getAttribute("data-field-color")||t.style.backgroundColor||null,renderDOM:t=>{if(!t.fieldColor||t.fieldColor=="None")return{};let e=_xt(t.fieldColor);return e.slice(1).length===6&&(e=`${e}33`),t.highlighted===!1?{"data-field-color":e}:{"data-field-color":e,style:`background-color: ${e}`}}},hidden:{default:!1,parseDOM:t=>{let e=t.hasAttribute("hidden"),n=t.style.display==="none";return e||n},renderDOM:t=>t.hidden?{style:"display: none"}:{}},visibility:{default:"visible",parseDOM:t=>{let e=t.style.visibility||"visible";return this.options.visibilityOptions.includes(e)?e:"visible"},renderDOM:t=>!t.visibility||t.visibility==="visible"?{}:{style:`visibility: ${t.visibility}`}},highlighted:{default:!0,rendered:!1},multipleImage:{default:!1,parseDOM:t=>t.getAttribute("data-multiple-image"),renderDOM:t=>t.multipleImage?{"data-multiple-image":t.multipleImage}:{}},size:{default:null,renderDOM:({size:t})=>!t||!t.width?{}:{style:`width: ${t.width}px; height: ${t.height}px; overflow: hidden;`}},extras:{default:{},rendered:!1},bold:{default:!1,parseDOM:t=>t.getAttribute("data-bold")==="true",renderDOM:t=>t.bold?{"data-bold":"true",style:"font-weight: bold"}:{}},italic:{default:!1,parseDOM:t=>t.getAttribute("data-italic")==="true",renderDOM:t=>t.italic?{"data-italic":"true",style:"font-style: italic"}:{}},underline:{default:!1,parseDOM:t=>t.getAttribute("data-underline")==="true",renderDOM:t=>t.underline?{"data-underline":"true",style:"text-decoration: underline"}:{}},fontFamily:{default:null,parseDOM:t=>t.getAttribute("data-font-family")||t.style.fontFamily||null,renderDOM:t=>t.fontFamily?{"data-font-family":t.fontFamily,style:`font-family: ${t.fontFamily}`}:{}},fontSize:{default:null,parseDOM:t=>t.getAttribute("data-font-size")||t.style.fontSize||null,renderDOM:t=>{if(!t.fontSize)return{};let[e,n]=mT(t.fontSize);if(Number.isNaN(e))return{};n=n||"pt";let r=`${e}${n}`;return{"data-font-size":r,style:`font-size: ${r}`}}},textHighlight:{default:null,parseDOM:t=>t.getAttribute("data-text-highlight"),renderDOM:t=>t.textHighlight?{"data-text-highlight":t.textHighlight,style:`background-color: ${t.textHighlight} !important`}:{}},textColor:{default:null,parseDOM:t=>t.getAttribute("data-text-color"),renderDOM:t=>t.textColor?{"data-text-color":t.textColor,style:`color: ${t.textColor}`}:{}},generatorIndex:{rendered:!1,default:null},hash:{rendered:!1,default:null},sdtId:{rendered:!1,default:null}}},parseDOM(){return[{tag:`span.${this.options.annotationClass}`,priority:60}]},renderDOM({node:t,htmlAttributes:e}){let{type:n,displayLabel:r,imageSrc:i,linkUrl:s}=t.attrs,o=()=>["span",an.mergeAttributes(this.options.htmlAttributes,e),["span",{class:`${this.options.annotationContentClass}`},r]],a=()=>{let d=()=>i?["img",{src:i,alt:r}]:r;return["span",an.mergeAttributes(this.options.htmlAttributes,e),["span",{class:`${this.options.annotationContentClass}`},d()]]},l=()=>{let d=()=>s?["a",{href:s,target:"_blank"},s]:r;return["span",an.mergeAttributes(this.options.htmlAttributes,e),["span",{class:`${this.options.annotationContentClass}`},d()]]},c={text:()=>o(),image:()=>a(),signature:()=>a(),checkbox:()=>o(),html:()=>o(),link:()=>l(),default:()=>o()};return(c[n]??c.default)()},addCommands(){const t=this.options.types;return{addFieldAnnotation:(e,n={},r=!1)=>({editor:i,dispatch:s,state:o,tr:a})=>{if(s){let{schema:l}=i,c=a.mapping.map(e),d=o.doc.resolve(c).marks();d=d.length?[...d]:null;let f=Oxt(d),h=n.defaultDisplayLabel?n.defaultDisplayLabel:n.displayLabel||"",m=l.nodes[this.name].create({...n,...f,defaultDisplayLabel:h,hash:n.hash||wa(4)},null,null);o.tr.insert(c,m).setSelection(_n.near(a.doc.resolve(c+m.nodeSize))),r&&this.editor.view.focus()}return!0},addFieldAnnotationAtSelection:(e={},n=!1)=>({state:r,commands:i})=>{const{from:s}=r.selection;return i.addFieldAnnotation(s,e,n)},replaceWithFieldAnnotation:e=>({editor:n,dispatch:r,tr:i})=>(r&&e.forEach(s=>{let{from:o,to:a,attrs:l}=s,{schema:c}=n,u=i.mapping.map(o),d=i.mapping.map(a),f=l.defaultDisplayLabel?l.defaultDisplayLabel:l.displayLabel||"";l.hash=wa(4);let h=c.nodes[this.name].create({...l,defaultDisplayLabel:f,hash:l.hash||wa(4)},null,null);i.replaceWith(u,d,h)}),!0),replaceFieldAnnotationsWithLabelInSelection:(e={})=>({commands:n})=>n.replaceFieldAnnotationsWithLabel(null,{...e,isInSelection:!0}),replaceFieldAnnotationsWithLabel:(e,{isInSelection:n=!1,addToHistory:r=!1,types:i=t}={})=>({dispatch:s,state:o,tr:a})=>{let{from:l,to:c}=o.selection,u=n?lv(l,c,o.doc):Wv(e,o);return u=i.length?u.filter(({node:d})=>i.includes(d.attrs.type)):u,u.length&&(r||a.setMeta("addToHistory",!1),s&&u.forEach(d=>{var x;let{pos:f,node:h}=d,m=a.mapping.map(f),y=a.mapping.map(f+h.nodeSize),w=a.doc.nodeAt(m),b=h.attrs.fieldId===((x=w==null?void 0:w.attrs)==null?void 0:x.fieldId),A=a.doc.resolve(m).marks();if(A=A.length?[...A]:null,b){let T=h.attrs.displayLabel||" ",R=o.schema.text(T,A);a.replaceWith(m,y,R)}})),!0},resetFieldAnnotations:()=>({dispatch:e,state:n,tr:r})=>{let i=up(n);return i.length&&(r.setMeta("fieldAnnotationUpdate",!0),e&&i.forEach(({pos:s,node:o})=>{var u;let a=r.mapping.map(s),l=r.doc.nodeAt(a);if(o.attrs.fieldId===((u=l==null?void 0:l.attrs)==null?void 0:u.fieldId)){let d=o.attrs.defaultDisplayLabel||o.attrs.displayLabel||"";r.setNodeMarkup(a,void 0,{...o.attrs,displayLabel:d,imageSrc:null,rawHtml:null,linkUrl:null,hash:null})}})),!0},updateFieldAnnotations:(e,n={})=>({dispatch:r,state:i,commands:s})=>{let o=Wv(e,i);return o.length&&r?s.updateFieldAnnotationsAttributes(o,n):!0},updateFieldAnnotation:(e,n={})=>({dispatch:r,commands:i})=>(e&&r&&(i.updateFieldAnnotationsAttributes([e],n),this.editor.options.pagination&&!gw(this.editor)&&setTimeout(()=>{const s=this.editor.view.state.tr;s.setMeta("forceUpdatePagination",!0),this.editor.view.dispatch(s)},50)),!0),updateFieldAnnotationsAttributes:(e,n={})=>({dispatch:r,tr:i})=>(r&&(i.setMeta("fieldAnnotationUpdate",!0),e.forEach(s=>{var d;let{pos:o,node:a}=s,l=i.mapping.map(o),c=i.doc.nodeAt(l);a.attrs.fieldId===((d=c==null?void 0:c.attrs)==null?void 0:d.fieldId)&&i.setNodeMarkup(l,void 0,{...a.attrs,...n})})),!0),deleteFieldAnnotations:e=>({dispatch:n,state:r,tr:i})=>{let s=Wv(e,r);return s.length&&n&&s.forEach(o=>{let{pos:a,node:l}=o,c=i.mapping.map(a),u=i.mapping.map(a+l.nodeSize),d=i.doc.nodeAt(c);l.eq(d)&&i.delete(c,u)}),!0},deleteFieldAnnotationsByNode:e=>({dispatch:n,tr:r})=>(e.length&&n&&e.forEach(i=>{let{pos:s,node:o}=i,a=r.mapping.map(s),l=r.mapping.map(s+o.nodeSize),c=r.doc.nodeAt(a);o.eq(c)&&r.delete(a,l)}),!0),deleteFieldAnnotation:e=>({dispatch:n,tr:r})=>{if(!e)return!0;if(n){let{pos:i,node:s}=e,o=r.mapping.map(i),a=r.mapping.map(i+s.nodeSize),l=r.doc.nodeAt(o);s.eq(l)&&r.delete(o,a)}return!0},sliceFieldAnnotations:(e,n)=>({dispatch:r,state:i,tr:s})=>{let o=Wv(e,i);return o.length&&r&&o.forEach((a,l)=>{if(l>=n){let{pos:c,node:u}=a,d=s.mapping.map(c),f=s.mapping.map(c+u.nodeSize),h=s.doc.nodeAt(d);u.eq(h)&&s.delete(d,f)}}),!0},setFieldAnnotationsHiddenByCondition:(e=()=>!1,n=!1)=>({dispatch:r,state:i,chain:s})=>{let o=up(i);if(!o.length)return!0;if(r){let a=[],l=o.filter(c=>{if(e(c.node))return c;a.push(c)});return n?s().updateFieldAnnotationsAttributes(l,{hidden:!0}).updateFieldAnnotationsAttributes(a,{hidden:!1}).run():s().updateFieldAnnotationsAttributes(l,{hidden:!0}).run()}return!0},unsetFieldAnnotationsHidden:()=>({dispatch:e,state:n,commands:r})=>{let i=up(n);return i.length&&e?r.updateFieldAnnotationsAttributes(i,{hidden:!1}):!0},setFieldAnnotationsVisibility:(e="visible")=>({dispatch:n,state:r,commands:i})=>{let s=up(r);return s.length?this.options.visibilityOptions.includes(e)?n?i.updateFieldAnnotationsAttributes(s,{visibility:e}):!0:!1:!0},setFieldAnnotationsHighlighted:(e=()=>!1,n=!0)=>({dispatch:r,state:i,commands:s})=>{let o=up(i);if(!o.length)return!0;if(r){let a=o.filter(l=>{if(e(l.node))return l});return s.updateFieldAnnotationsAttributes(a,{highlighted:n})}return!0},toggleFieldAnnotationsFormat:(e,n=!1)=>({dispatch:r,tr:i,state:s,commands:o})=>{if(!this.options.toggleFormatNames.includes(e))return!1;let{from:l,to:c,node:u}=s.selection,d=lv(l,c,s.doc);return d.length&&r&&(d.forEach(f=>{o.updateFieldAnnotationsAttributes([f],{[e]:!f.node.attrs[e]})}),n&&(u==null?void 0:u.type.name)===this.name&&i.setSelection(ln.create(i.doc,l))),!0},setFieldAnnotationsFontFamily:(e,n=!1)=>({dispatch:r,tr:i,state:s,commands:o})=>{let{from:a,to:l,node:c}=s.selection,u=lv(a,l,s.doc);return u.length&&r&&(u.forEach(d=>{o.updateFieldAnnotationsAttributes([d],{fontFamily:e})}),n&&(c==null?void 0:c.type.name)===this.name&&i.setSelection(ln.create(i.doc,a))),!0},setFieldAnnotationsFontSize:(e,n=!1)=>({dispatch:r,tr:i,state:s,commands:o})=>{let{from:a,to:l,node:c}=s.selection,u=lv(a,l,s.doc);if(!u.length)return!0;let[d,f]=mT(e),h=8,m=96,y="pt";return Number.isNaN(d)?!1:(d=mI(d,h,m),f=f||y,r&&(u.forEach(w=>{o.updateFieldAnnotationsAttributes([w],{fontSize:`${d}${f}`})}),n&&(c==null?void 0:c.type.name)===this.name&&i.setSelection(ln.create(i.doc,a))),!0)},setFieldAnnotationsTextHighlight:(e,n=!1)=>({dispatch:r,tr:i,state:s,commands:o})=>{let{from:a,to:l,node:c}=s.selection,u=lv(a,l,s.doc);return u.length&&r&&(u.forEach(d=>{o.updateFieldAnnotationsAttributes([d],{textHighlight:e})}),n&&(c==null?void 0:c.type.name)===this.name&&i.setSelection(ln.create(i.doc,a))),!0},setFieldAnnotationsTextColor:(e,n=!1)=>({dispatch:r,tr:i,state:s,commands:o})=>{let{from:a,to:l,node:c}=s.selection,u=lv(a,l,s.doc);return u.length&&r&&(u.forEach(d=>{o.updateFieldAnnotationsAttributes([d],{textColor:e})}),n&&(c==null?void 0:c.type.name)===this.name&&i.setSelection(ln.create(i.doc,a))),!0},...Dxt}},addNodeView(){return t=>new pxt({...t,annotationClass:this.options.annotationClass,annotationContentClass:this.options.annotationContentClass,borderColor:this.options.borderColor})},addPmPlugins(){return[mxt({editor:this.editor,annotationClass:this.options.annotationClass,handleDropOutside:this.options.handleDropOutside})]}});function Oxt(t){if(!t)return{};let e={bold:!1,italic:!1,underline:!1,fontFamily:null,fontSize:null};if(t&&t.length){e.bold=t.some(r=>r.type.name==="bold"),e.italic=t.some(r=>r.type.name==="italic"),e.underline=t.some(r=>r.type.name==="underline");let n=t.find(r=>r.type.name==="textStyle");n&&(e.fontFamily=n.attrs.fontFamily??null,e.fontSize=n.attrs.fontSize??null)}return e}const bSe="application/octet-stream",Pxt=t=>{let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString()},Fxt=t=>{if(!t)return"";if(typeof atob=="function")return atob(t);if(typeof ar<"u"&&typeof ar.from=="function")return ar.from(t,"base64").toString("binary");throw new Error("Unable to decode base64 payload in the current environment.")},wSe=t=>{const[e="",n=""]=t.split(","),r=e.match(/:(.*?);/),s=(r?r[1]:"")||bSe,o=Fxt(n),a=Pxt(o),l=s.split("/")[1]||"bin",c=`image-${a}.${l}`;return{mimeType:s,binaryString:o,filename:c}},Bxt=t=>{const{mimeType:e,filename:n}=wSe(t);return{mimeType:e,filename:n}},jxt=t=>{const{mimeType:e,binaryString:n,filename:r}=wSe(t),i=e||bSe,s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);const o=new Blob([s],{type:i});return new File([o],r,{type:i})},$xt=async(t,e,n)=>{try{const r=await fetch(t,{mode:"cors",credentials:"omit",headers:{Accept:"image/*,*/*;q=0.8"}});if(!r.ok)return console.warn(`Failed to fetch image from ${t}: ${r.status} ${r.statusText}`),null;const i=await r.blob(),s=e||Hxt(t),o=n||r.headers.get("content-type")||i.type||"image/jpeg";return new File([i],s,{type:o})}catch(r){return zxt(r)?(console.warn(`CORS policy prevents accessing image from ${t}:`,r.message),null):(console.error(`Error fetching image from ${t}:`,r),null)}},zxt=t=>{const e=t.message.toLowerCase();return t.name.toLowerCase().includes("cors")||e.includes("cors")||e.includes("cross-origin")||e.includes("access-control")||e.includes("network error")||e.includes("failed to fetch")},Hxt=t=>{try{const r=new URL(t).pathname.split("/").pop();return r&&!r.includes(".")?`${r}.jpg`:r||"image.jpg"}catch{return"image.jpg"}},Vxt=async t=>{try{return(await fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"})).ok}catch{return!1}},Uxt=t=>new Promise((e,n)=>{let r=new FileReader;r.onload=i=>{e(i.target.result)},r.onerror=n,setTimeout(()=>r.readAsDataURL(t),250)}),Wxt=(t,e)=>new Promise((n,r)=>{const i=new window.Image;i.onload=()=>{const s=document.createElement("canvas"),{width:o,height:a}=qxt(i.width,i.height,e);s.width=i.width,s.height=i.height;const l=s.getContext("2d");if(l){l.imageSmoothingEnabled=!0;try{l.imageSmoothingQuality="high"}catch{}}l.drawImage(i,0,0,i.width,i.height);const c=typeof window<"u"&&window.devicePixelRatio?window.devicePixelRatio:1,u=Math.round(o*c),d=Math.round(a*c),f=Math.min(u,i.width),h=Math.min(d,i.height);if((f!==i.width||h!==i.height)&&Kxt(s,f,h),typeof t=="string"){const y=s.toDataURL();n(y)}else s.toBlob(y=>{const w=new File([y],t.name,{type:t.type,lastModified:Date.now()});n({file:w,width:o,height:a})})},i.onerror=s=>r(s),i.src=typeof t=="string"?t:URL.createObjectURL(t)}),qxt=(t,e,n)=>{const{width:r,height:i}=n();if(!r||!i)return{width:t,height:e};let s=t,o=e;const a=t/e;return e>i&&(o=i,s=Math.round(i*a)),s>r&&(s=r,o=Math.round(r/a)),{width:s,height:o}};function Gxt(t,e,n,r){var i=t.width,s=t.height;e=Math.round(e),n=Math.round(n);for(var o=i/e,a=s/n,l=Math.ceil(o/2),c=Math.ceil(a/2),u=t.getContext("2d"),d=u.getImageData(0,0,i,s),f=u.createImageData(e,n),h=d.data,m=f.data,y=0;y<n;y++)for(var w=0;w<e;w++){for(var b=(w+y*e)*4,E=0,A=0,x=0,T=0,R=0,k=0,_=0,N=(y+.5)*a,L=Math.floor(y*a),M=Math.ceil((y+1)*a),C=L;C<M;C++)for(var D=Math.abs(N-(C+.5))/c,O=(w+.5)*o,$=D*D,U=Math.floor(w*o),W=Math.ceil((w+1)*o),ce=U;ce<W;ce++){var se=Math.abs(O-(ce+.5))/l,Q=Math.sqrt($+se*se);if(!(Q>=1)){E=2*Q*Q*Q-3*Q*Q+1;var J=4*(ce+C*i);_+=E*h[J+3],x+=E,h[J+3]<255&&(E=E*h[J+3]/250),T+=E*h[J],R+=E*h[J+1],k+=E*h[J+2],A+=E}}m[b]=T/A,m[b+1]=R/A,m[b+2]=k/A,m[b+3]=_/x}t.width=e,t.height=n,u.putImageData(f,0,0)}function Kxt(t,e,n){let r=document.createElement("canvas"),i=r.getContext("2d"),s=t.getContext("2d"),o=Math.ceil(Math.log(t.width/e)/Math.log(2));o=Math.max(o,1);let a=e*Math.pow(2,o-1),l=n*Math.pow(2,o-1),c=t.width,u=t.height;for(r.width=c,r.height=u,i.drawImage(t,0,0);o>0;)a=Math.max(a,e),l=Math.max(l,n),t.width=a,t.height=l,s.drawImage(r,0,0,c,u,0,0,a,l),c=a,u=l,r.width=c,r.height=u,i.drawImage(t,0,0),a=Math.round(a/2),l=Math.round(l/2),o--;Gxt(t,e,n)}const Xxt="image",Yxt=t=>t.normalize("NFKD").replace(/[\u0300-\u036f]/g,""),noe=(t,{allowDots:e=!1}={})=>{if(!t)return"";const n=Yxt(t).replace(/[\s\u2000-\u206f]+/g,"_").replace(/[\\/]+/g,"_"),r=e?/[^0-9A-Za-z._-]+/g:/[^0-9A-Za-z_-]+/g;let i=n.replace(r,"_");return i=i.replace(/_+/g,"_"),i=i.replace(/^[_.-]+/,""),i=i.replace(/[_-]+$/,""),i},vSe=t=>{var r;const e=((r=t==null?void 0:t.trim)==null?void 0:r.call(t))??"",n=e.lastIndexOf(".");return n<=0||n===e.length-1?{base:e,ext:""}:{base:e.slice(0,n),ext:e.slice(n+1)}},roe=t=>{const{base:e,ext:n}=vSe(t||""),r=noe(e,{allowDots:!0})||Xxt,i=noe(n,{allowDots:!1}).toLowerCase();return i?`${r}.${i}`:r},xSe=(t,e=new Set)=>{const n=roe(t);if(!e||typeof e.has!="function")return n;const r=new Set;if(e.forEach(c=>r.add(roe(c))),!r.has(n))return n;const{base:i,ext:s}=vSe(n);let o=1,a=n;const l=()=>`${i}-${o}${s?`.${s}`:""}`;for(;r.has(a);)a=l(),o+=1;return a},ESe=t=>`word/media/${t}`,Zxt=t=>Number((t.size/1048576).toFixed(4))>5?(window.alert("Image size must be less than 5MB"),!0):!1,SSe=async({getMaxContentSize:t,file:e})=>{if(Zxt(e))return{file:null,size:{width:0,height:0}};try{const r=await Wxt(e,t);return{file:r.file,size:{width:r.width,height:r.height}}}catch(n){return console.warn("Error processing image:",n),{file:null,size:{width:0,height:0}}}};function Jxt({editorOptions:t,view:e,id:n}){let{tr:r}=e.state,{selection:i}=r;t.isHeaderOrFooter&&(i=t.lastSelection),!i.empty&&!t.isHeaderOrFooter&&r.deleteSelection(),r=o2t(e.state,r,n,i.from),e.dispatch(r)}const Qxt=t=>{var r,i;const e=new Set;(i=(r=t==null?void 0:t.state)==null?void 0:r.doc)==null||i.descendants(s=>{s.type.name==="image"&&s.attrs.id!==void 0&&s.attrs.id!==null&&e.add(String(s.attrs.id))});let n;do{const s=wa();n=String(parseInt(s,16))}while(!n||e.has(n));return n};async function ASe({editor:t,view:e,file:n,size:r,id:i}){const s=typeof t.options.handleImageUpload=="function"?t.options.handleImageUpload:Uxt,o=i;try{const a=new Set(Object.keys(t.storage.image.media??{}).map(b=>b.split("/").pop())),l=xSe(n.name,a),c=l===n.name?n:new File([n],l,{type:n.type,lastModified:n.lastModified??Date.now()});let u=await s(c),d=s2t(e.state,o);if(d==null)return;const f=ESe(l),h=Qxt(t);let m=null;if(t.options.mode==="docx"){const[,b]=f.split("word/"),E=TSe({editor:t,path:b});E&&(m=E)}let y=e.state.schema.nodes.image.create({src:f,size:r,id:h,rId:m});t.storage.image.media=Object.assign(t.storage.image.media,{[f]:u}),t.options.ydoc&&typeof t.commands.addImageToCollaboration=="function"&&t.commands.addImageToCollaboration({mediaPath:f,fileData:u});let w=e.state.tr;w.replaceWith(d,d,y),w=e1(e.state,w,o),e.dispatch(w)}catch{const a=e1(e.state,e.state.tr,o);e.dispatch(a)}}function TSe({editor:t,path:e}){const n=e,r="image";try{return OV(n,r,t)}catch{return null}}const Nf=new ni("ImageRegistration"),e2t=t=>{var n,r,i;if(!t||((n=t.type)==null?void 0:n.name)!=="image")return!1;const e=(r=t.attrs)==null?void 0:r.src;return!(typeof e!="string"||e.length===0||e.startsWith("word/media")||e.startsWith("data:")&&((i=t.attrs)!=null&&i.rId))},t2t=({editor:t})=>{const{view:e}=t;return new Mr({key:Nf,state:{init(){return{set:An.empty}},apply(n,{set:r}){const i=n.getMeta(Nf);return i?(r=i.set,{set:r}):(r=r.map(n.mapping,n.doc),{set:r})}},appendTransaction:(n,r,i)=>{let s=[];return!n.some(o=>o.docChanged)||(n.forEach(o=>{o.docChanged&&o.steps.forEach((a,l)=>{const c=a.getMap();s=s.map(({node:u,pos:d,id:f})=>{const h=c.map(d,-1);return{node:u,pos:h,id:f}}),(a instanceof xi||a instanceof ud)&&(o.docs[l+1]||o.doc).nodesBetween(c.map(a.from,-1),c.map(a.to,1),(u,d)=>{if(u.type.name==="image"&&e2t(u)){const f={};s.push({node:u,pos:d,id:f})}else return!0})})}),!s||s.length===0)?null:t.options.isHeadless?r2t(s,t,i):i2t(s,t,e,i)},props:{decorations(n){let{set:r}=Nf.getState(n);return r}}})},n2t=t=>typeof t!="string"||t.length===0?"image.bin":t.startsWith("data:")?Bxt(t).filename:(t.split("/").pop()??"").split(/[?#]/)[0]||"image.bin",r2t=(t,e,n)=>{const{tr:r}=n,i=e.storage.image.media??{};e.storage.image.media||(e.storage.image.media=i);const s=new Set(Object.keys(i).map(o=>o.split("/").pop()));return t.forEach(({node:o,pos:a})=>{const{src:l}=o.attrs,c=n2t(l),u=xSe(c,s);s.add(u);const d=ESe(u);i[d]=l;const f=d.startsWith("word/")?d.slice(5):d,h=TSe({editor:e,path:f});r.setNodeMarkup(a,void 0,{...o.attrs,src:d,rId:h})}),r},i2t=(t,e,n,r)=>{a2t(t,e,n);const i=r.tr;let{set:s}=Nf.getState(r);return t.slice().sort((o,a)=>o.pos-a.pos).forEach(({pos:o,id:a})=>{let l=Qn.widget(o,()=>document.createElement("placeholder"),{side:-1,id:a});s=s.add(i.doc,[l])}),t.slice().sort((o,a)=>a.pos-o.pos).forEach(({node:o,pos:a})=>{i.delete(a,a+o.nodeSize)}),s=s.map(i.mapping,i.doc),i.setMeta(Nf,{set:s}),i},s2t=(t,e)=>{let{set:n}=Nf.getState(t),r=n==null?void 0:n.find(null,null,i=>i.id===e);return r!=null&&r.length?r[0].from:null},e1=(t,e,n)=>{let{set:r}=Nf.getState(t);return r=r.map(e.mapping,e.doc),r=r.remove(r.find(null,null,i=>i.id==n)),e.setMeta(Nf,{set:r,type:"remove"})},o2t=(t,e,n,r)=>{let{set:i}=Nf.getState(t);i=i.map(e.mapping,e.doc);let s=Qn.widget(r,()=>document.createElement("placeholder"),{id:n});return i=i.add(e.doc,[s]),e.setMeta(Nf,{set:i,type:"add"})},a2t=async(t,e,n)=>{t.forEach(async r=>{const i=r.node.attrs.src,s=r.id;let o=null;if(i.startsWith("http"))if(await Vxt(i))o=await $xt(i);else{console.warn(`Image URL ${i} is not accessible due to CORS or other restrictions. Using original URL.`);const l=n.state.tr;e1(n.state,l,s),n.dispatch(l);return}else i.startsWith("data:")?o=jxt(i):console.error(`Unsupported image source: ${i}`);if(!o){const a=n.state.tr;e1(n.state,a,s),n.dispatch(a);return}try{const a=await SSe({getMaxContentSize:()=>e.getMaxContentSize(),file:o});if(!a.file){const l=n.state.tr;e1(n.state,l,s),n.dispatch(l);return}await ASe({editor:e,view:n,file:a.file,size:a.size,id:s})}catch(a){console.error(`Error processing image from ${i}:`,a);const l=n.state.tr;e1(n.state,l,s),n.dispatch(l)}})},l2t=t=>"slice"in t&&!!t.slice,ioe=new ni("ImagePosition"),soe=new WeakMap,c2t=({editor:t})=>{const{view:e}=t;let n=!0;return new Mr({name:"ImagePositionPlugin",key:ioe,state:{init(){return An.empty},apply(r,i,s,o){if(!r.docChanged&&!n)return i;if(!(typeof document<"u"&&!!(document&&document.createElement))||!e||typeof e.domAtPos!="function")return i.map(r.mapping,r.doc);let l=!1;if(r.steps.forEach(u=>{l2t(u)&&u.slice.content.descendants(d=>{var f;if(d.type.name==="image"||(f=d.attrs)!=null&&f.anchorData)return l=!0,!1})}),!l&&!n)return i.map(r.mapping,r.doc);const c=ooe(o,e);return n=!1,An.create(o.doc,c)}},view:()=>({update:(r,i)=>{if(!(!(typeof document<"u"&&(document&&document.createElement))||!r||typeof r.domAtPos!="function")&&n){const o=ooe(i,r),a=r.state.tr.setMeta(ioe,{decorations:o});r.dispatch(a)}}}),props:{decorations(r){return this.getState(r)}}})},ooe=(t,e)=>{let n=[];if(!(typeof document<"u"&&!!(document&&document.createElement))||!e||typeof e.domAtPos!="function")return n;let i=!1;return t.doc.descendants(s=>{var o;if((o=s.attrs)!=null&&o.anchorData)return i=!0,!1}),i&&t.doc.descendants((s,o)=>{if(s.attrs.anchorData){let a="",l="";const{vRelativeFrom:c,alignH:u}=s.attrs.anchorData,{size:d,padding:f}=s.attrs,h=u2t(e,o,"pagination-break-wrapper");if(h&&c==="margin"&&u){let m=soe.get(h);m||(m={top:h.offsetTop,height:h.offsetHeight},soe.set(h,m));const y=m.top+m.height;let w=`${u}: 0;`;u==="center"&&(w="left: 50%; transform: translateX(-50%);"),a+=c==="margin"?`position: absolute; top: ${y}px; ${w}`:"";const b=e.posAtDOM(h,1);if(b<0){const x=e.state.doc.resolve(o);n.push(Qn.node(o-1,o+x.parent.nodeSize-1,{style:`height: ${d.height+parseInt(f.top)+parseInt(f.bottom)}px`}))}const E=document.createElement("div");E.className="anchor-image-placeholder",E.style.float=u==="left"||u==="right"?u:"none";let A;u==="center"?A=(parseInt(f.left)||0)+(parseInt(f.right)||0):A=parseInt(f[u])||0,E.style.width=d.width+A+"px",E.style.height=d.height+parseInt(f.top)+parseInt(f.bottom)+"px",n.push(Qn.widget(b,E,{key:"stable-key"})),n.push(Qn.inline(o,o+s.nodeSize,{style:a,class:l}))}}}),n},u2t=(t,e,n)=>{if(!(typeof document<"u"&&!!(document&&document.createElement))||!t||typeof t.domAtPos!="function")return null;let{node:i}=t.domAtPos(e);for(i.nodeType===3&&(i=i.parentNode);i;){if(i.classList&&i.classList.contains(n))return i;if(i.previousSibling)for(i=i.previousSibling;i&&i.lastChild;)i=i.lastChild;else i=i.parentNode}return null},d2t=(t={})=>{const e=t.wrap;return e!=null&&e.type&&e.type!=="Inline"?{type:e.type,attrs:e.attrs??{}}:(e==null?void 0:e.type)==="Inline"&&Object.keys(e.attrs??{}).length?{type:"Inline",attrs:e.attrs}:!e&&t.wrapText?{type:"Square",attrs:{wrapText:t.wrapText}}:!e&&t.wrapTopAndBottom?{type:"TopAndBottom",attrs:{}}:(e==null?void 0:e.type)==="Inline"?{type:"Inline",attrs:e.attrs??{}}:{type:"Inline",attrs:{}}},f2t=(t={})=>{const{left:e,horizontal:n,...r}=t;return{...r,horizontal:n??e}},h2t=(t={})=>({wrap:d2t(t),marginOffset:f2t(t.marginOffset??{})}),aoe=(t,e,n)=>{const r=n*(Math.PI/180),i=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),o=t*i+e*s,a=t*s+e*i,l=Math.round(Math.max(0,(o-t)/2)),c=Math.round(Math.max(0,(a-e)/2));return{horizontal:l,vertical:c}},kSe=Tr.create({name:"image",group:"inline",inline:!0,draggable:!0,addOptions(){return{allowBase64:!0,htmlAttributes:{style:"display: inline-block;","aria-label":"Image node"}}},addStorage(){return{media:{}}},addAttributes(){return{src:{default:null,renderDOM:({src:t})=>({src:this.storage.media[t]??t})},alt:{default:"Uploaded picture"},id:{rendered:!1},title:{default:null},rId:{default:null,rendered:!1},originalPadding:{default:null,rendered:!1},originalAttributes:{rendered:!1},wrap:{default:{type:"Inline"},rendered:!1},anchorData:{default:null,rendered:!1},isAnchor:{rendered:!1},transformData:{default:{},renderDOM:({transformData:t})=>{let e="";if(t!=null&&t.rotation&&(e+=`rotate(${Math.round(t.rotation)}deg) `),t!=null&&t.verticalFlip&&(e+="scaleY(-1) "),t!=null&&t.horizontalFlip&&(e+="scaleX(-1) "),e=e.trim(),e.length>0)return{style:`transform: ${e};`}}},simplePos:{rendered:!1},extension:{rendered:!1},originalExtension:{rendered:!1},originalSrc:{rendered:!1},shouldCover:{default:!1,rendered:!1},size:{default:{},renderDOM:({size:t,shouldCover:e})=>{let n="",{width:r,height:i}=t??{};return r&&(n+=`width: ${r}px;`),i&&e?n+=`height: ${i}px; object-fit: cover; object-position: left top;`:i&&(n+="height: auto;"),{style:n}}},padding:{default:{},rendered:!1},marginOffset:{default:{},rendered:!1},style:{default:null,rendered:!0,renderDOM:({style:t})=>t?{style:t}:{}},drawingChildOrder:{default:null,rendered:!1},originalDrawingChildren:{default:null,rendered:!1}}},parseDOM(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderDOM({node:t,htmlAttributes:e}){var k,_,N,L,M,C,D,O;const{wrap:n,marginOffset:r}=h2t(t.attrs),{anchorData:i,padding:s,transformData:o={},size:a={width:0,height:0}}=t.attrs,l={left:0,right:0,top:0,bottom:0};let c=!1,u=!1,d=(r==null?void 0:r.horizontal)||0,f="";s&&(s.left&&(l.left+=s.left),s.right&&(l.right+=s.right),s.top&&(l.top+=s.top),s.bottom&&(l.bottom+=s.bottom));const{rotation:h}=o,{height:m,width:y}=a;if(h&&m&&y){const{horizontal:$,vertical:U}=aoe(y,m,h);l.left+=$,l.right+=$,l.top+=U,l.bottom+=U}if(n&&n.type){const{type:$,attrs:U={}}=n;switch($){case"None":f+="position: absolute;";const W=(k=t.attrs.originalAttributes)==null?void 0:k.relativeHeight;if(W!=null){const ce=Math.floor(W/1e6);f+=`z-index: ${ce};`}else U.behindDoc?f+="z-index: -1;":f+="z-index: 1;";break;case"Square":if(f+="shape-outside: border-box; clear: both;",U.wrapText==="right")f+="float: left;";else if(U.wrapText==="left")f+="float: right;",u=!0;else if(["largest","bothSides"].includes(U.wrapText)){const ce=loe({editor:this.editor,marginOffset:r,size:a,attrs:U});f+=ce.style,u=ce.floatRight,d=ce.baseHorizontal}U.distTop&&(l.top+=U.distTop),U.distBottom&&(l.bottom+=U.distBottom),U.distLeft&&(l.left+=U.distLeft),U.distRight&&(l.right+=U.distRight);break;case"Through":case"Tight":{f+="clear: both;";const ce=loe({editor:this.editor,marginOffset:r,size:a,attrs:U});if(f+=ce.style,u=ce.floatRight,d=ce.baseHorizontal,U.distTop&&(l.top+=U.distTop),U.distBottom&&(l.bottom+=U.distBottom),U.distLeft&&(l.left+=U.distLeft),U.distRight&&(l.right+=U.distRight),U.polygon){let se=u?U.polygon[0][0]||0:r.horizontal+15,Q=0,J=0,K=0,re=0;U.polygon.forEach(([Y,ee])=>{u&&Y<se&&(se=Y),Y>Q&&(Q=Y),Y<J&&(J=Y),ee>re&&(re=ee),ee<K&&(K=ee)});const X=Q-J,me=re-K,G=Math.min(1,a.width/X),B=Math.min(1,a.height/me),z=Math.max(0,r.top),de=U.polygon.map(([Y,ee])=>`${se+Y*G}px ${z+ee*B}px`).join(", ");f+=`shape-outside: polygon(${de});`}break}case"TopAndBottom":f+="display: block; clear: both;",i||(c=!0),U.distTop&&(l.top+=U.distTop),U.distBottom&&(l.bottom+=U.distBottom);break}}const w=!!i,b=(r==null?void 0:r.horizontal)!=null||(r==null?void 0:r.top)!=null,E=(_=n==null?void 0:n.attrs)==null?void 0:_.behindDoc,A=i==null?void 0:i.behindDoc,x=(n==null?void 0:n.type)==="None"&&(E||A),T=f.includes("position: absolute;");if(w)switch(i.hRelativeFrom){case"page":const $=((L=(N=this.editor)==null?void 0:N.converter)==null?void 0:L.pageStyles)||((D=(C=(M=this.editor)==null?void 0:M.options.parentEditor)==null?void 0:C.converter)==null?void 0:D.pageStyles);l.left-=h1((O=$==null?void 0:$.pageMargins)==null?void 0:O.left)||0;break;case"margin":i.alignH==="center"&&(f+="position: absolute; left: 50%; transform: translateX(-50%);"),(i.alignH==="left"||i.alignH==="right")&&(f+=`position: absolute; ${i.alignH}: 0;`);break;case"column":i.alignH==="center"?c=!0:i.alignH==="right"?(u=!0,f.includes("float: right;")||(f+="float: right;")):i.alignH==="left"?f.includes("float: left;")||(f+="float: left;"):!i.alignH&&(r==null?void 0:r.horizontal)!=null&&T&&(f+=`left: ${d}px;`,f+="max-width: none;",d=0);break}if(w||b){const $=(i==null?void 0:i.vRelativeFrom)==="page",U=(i==null?void 0:i.vRelativeFrom)==="margin",W=500,ce=x,se=ce?(r==null?void 0:r.top)??0:Math.max(0,(r==null?void 0:r.top)??0);let Q=0,J=0;const{rotation:K}=o??{},{height:re,width:X}=a??{};if(K&&re&&X){const{horizontal:z,vertical:de}=aoe(X,re,K);Q=z,J=de}const me=d+Q,G=se+J;me&&(u?l.right+=me:l.left+=me),T&&ce&&!U?f+=`top: ${G}px;`:G&&!U&&($&&G>=W?l.top+=W:l.top+=G)}c?f+="margin-left: auto; margin-right: auto;":(l.left&&(f+=`margin-left: ${l.left}px;`),l.right&&(f+=`margin-right: ${l.right}px;`)),l.top&&(f+=`margin-top: ${l.top}px;`),l.bottom&&(f+=`margin-bottom: ${l.bottom}px;`),x&&(f+="max-width: none;");const R={...e};if(f){const $=R.style||"";R.style=$+($?" ":"")+f}return["img",an.mergeAttributes(this.options.htmlAttributes,R)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t}),setWrapping:t=>({chain:e,state:n})=>{const{selection:r}=n,{$from:i}=r,s=i.nodeAfter;if(!s||s.type.name!==this.name)return!1;const{type:o,attrs:a={}}=t,l={},u={None:["behindDoc"],Square:["wrapText","distTop","distBottom","distLeft","distRight"],Through:["distTop","distBottom","distLeft","distRight","polygon"],Tight:["distTop","distBottom","distLeft","distRight","polygon"],TopAndBottom:["distTop","distBottom"],Inline:[]}[o]||[];Object.keys(a).forEach(f=>{u.includes(f)&&(l[f]=a[f])});const d={...s.attrs,wrap:{type:o,attrs:l},isAnchor:o!=="Inline"};return e().updateAttributes(this.name,d).run()}}},addPmPlugins(){return[t2t({editor:this.editor}),c2t({editor:this.editor})]}}),loe=({editor:t,marginOffset:e,size:n,attrs:r})=>{var l,c,u;let i="",s=!1,o=(e==null?void 0:e.horizontal)||0;const a=((l=t==null?void 0:t.converter)==null?void 0:l.pageStyles)||((u=(c=t==null?void 0:t.options.parentEditor)==null?void 0:c.converter)==null?void 0:u.pageStyles);if(a!=null&&a.pageSize&&(a!=null&&a.pageMargins)&&n.width){const d=h1(a.pageSize.width),f=h1(a.pageMargins.left),h=h1(a.pageMargins.right),m=d-f-h,y=n.width+(r.distLeft||0)+(r.distRight||0),w=e.horizontal,b=m-w-y;b<0||b>w?i+="float: left;":(i+="float: right;",s=!0,o=b)}else i+="float: left;";return{style:i,floatRight:s,baseHorizontal:o}},p2t=[".jpg",".jpeg",".png","image/jpeg","image/png"],m2t=()=>{let t=document.createElement("input");t.type="file";let e=p2t;return t.accept=e.join(","),()=>new Promise((r,i)=>{t.onchange=async()=>{const s=t.files;if(!s)return r(null);const o=s.item(0);return r(o?{file:o}:null)},t.oncancel=()=>r(null),t.onerror=i,t.click()})},g2t=Tr.create({name:"bookmarkStart",group:"inline",content:"inline*",inline:!0,addOptions(){return{htmlAttributes:{style:"height: 0; width: 0;","aria-label":"Bookmark start node",role:"link"}}},addAttributes(){return{name:{default:null,renderDOM:({name:t})=>t?{name:t}:{}},id:{default:null,renderDOM:({id:t})=>t?{id:t}:{}}}},renderDOM({htmlAttributes:t}){return["a",an.mergeAttributes(this.options.htmlAttributes,t)]},addCommands(){return{insertBookmark:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t}),goToBookmark:t=>({editor:e,tr:n})=>{const{doc:r}=n;let i=null;return r.descendants((s,o)=>{if(s.type.name==="bookmarkStart"&&s.attrs.name===t)return i=o,!1}),i!==null?(e.commands.focus(i),!0):!1}}}}),y2t=Tr.create({name:"bookmarkEnd",group:"inline",inline:!0,atom:!0,addOptions(){return{htmlAttributes:{style:"height: 0; width: 0; display: none;","aria-label":"Bookmark end node",role:"none"}}},addAttributes(){return{id:{default:null,renderDOM:({id:t})=>t?{"data-bookmark-end-id":t}:{}},displacedByCustomXml:{default:null,renderDOM:({displacedByCustomXml:t})=>t?{"data-displaced-by-custom-xml":t}:{}},colFirst:{default:null},colLast:{default:null}}},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t)]},addCommands(){return{insertBookmarkEnd:t=>({commands:e})=>e.insertContent({type:this.name,attrs:{id:t}})}}}),CSe=Tr.create({name:"mention",group:"inline",inline:!0,selectable:!1,excludeFromSummaryJSON:!0,atom:!0,addOptions(){return{htmlAttributes:{class:"sd-editor-mention","aria-label":"Mention node"}}},parseDOM(){return[{tag:`span[data-type="${this.name||this.email}"]`,getAttrs:t=>({name:t.getAttribute("name")||null,email:t.getAttribute("email")||null})}]},renderDOM({node:t,htmlAttributes:e}){const{name:n,email:r}=t.attrs;return["span",an.mergeAttributes({"data-type":this.name||this.email},this.options.htmlAttributes,e),`@${n||r}`]},addAttributes(){return{name:{default:null},email:{default:null}}}}),b2t=Tr.create({name:"page-number",group:"inline",inline:!0,atom:!0,draggable:!1,selectable:!1,defining:!0,content:"",addOptions(){return{htmlAttributes:{contenteditable:!1,"data-id":"auto-page-number","aria-label":"Page number node"}}},addAttributes(){return{marksAsAttrs:{default:null,rendered:!1}}},addNodeView(){return({node:t,editor:e,getPos:n,decorations:r})=>{const i=this.options.htmlAttributes;return new _Se(t,n,r,e,i)}},parseDOM(){return[{tag:'span[data-id="auto-page-number"'}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t)]},addCommands(){return{addAutoPageNumber:()=>({tr:t,dispatch:e,state:n,editor:r})=>{var c;const{options:i}=r;if(!i.isHeaderOrFooter)return!1;const{schema:s}=n;if(!((c=s==null?void 0:s.nodes)==null?void 0:c["page-number"]))return!1;const a={type:"page-number"},l=s.nodeFromJSON(a);return e&&(t.replaceSelectionWith(l,!1),gw(r)||t.setMeta("forceUpdatePagination",!0)),!0}}},addShortcuts(){return{"Mod-Shift-alt-p":()=>this.editor.commands.addAutoPageNumber()}}}),w2t=Tr.create({name:"total-page-number",group:"inline",inline:!0,atom:!0,draggable:!1,selectable:!1,content:"text*",addOptions(){return{htmlAttributes:{contenteditable:!1,"data-id":"auto-total-pages","aria-label":"Total page count node",class:"sd-editor-auto-total-pages"}}},addAttributes(){return{marksAsAttrs:{default:null,rendered:!1}}},addNodeView(){return({node:t,editor:e,getPos:n,decorations:r})=>{const i=this.options.htmlAttributes;return new _Se(t,n,r,e,i)}},parseDOM(){return[{tag:'span[data-id="auto-total-pages"'}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]},addCommands(){return{addTotalPageCount:()=>({tr:t,dispatch:e,state:n,editor:r})=>{var u,d,f;const{options:i}=r;if(!i.isHeaderOrFooter)return!1;const{schema:s}=n;if(!((u=s.nodes)==null?void 0:u["total-page-number"]))return!1;const a=((f=(d=r==null?void 0:r.options)==null?void 0:d.parentEditor)==null?void 0:f.currentTotalPages)||1,l={type:"total-page-number",content:[{type:"text",text:String(a)}]},c=s.nodeFromJSON(l);return e&&t.replaceSelectionWith(c,!1),!0}}},addShortcuts(){return{"Mod-Shift-alt-c":()=>this.editor.commands.addTotalPageCount()}}}),v2t=(t,e)=>{var n;switch(t){case"page-number":return{text:e.options.currentPageNumber||"1",className:"sd-editor-auto-page-number",dataId:"auto-page-number",ariaLabel:"Page number node"};case"total-page-number":return{text:((n=e.options.parentEditor)==null?void 0:n.currentTotalPages)||"1",className:"sd-editor-auto-total-pages",dataId:"auto-total-pages",ariaLabel:"Total page count node"};default:return{}}};var o2,NSe,ISe;class _Se{constructor(e,n,r,i,s={}){st(this,o2);this.node=e,this.editor=i,this.view=i.view,this.getPos=n,this.editor=i,this.dom=pe(this,o2,NSe).call(this,e,s)}update(e){var i,s,o;const n=(i=e==null?void 0:e.type)==null?void 0:i.name,r=(o=(s=this.node)==null?void 0:s.type)==null?void 0:o.name;return!n||n!==r?!1:(this.node=e,!0)}}o2=new WeakSet,NSe=function(e,n){const r=v2t(this.node.type.name,this.editor),i=document.createTextNode(String(r.text)),s=document.createElement("span");s.className=r.className,s.setAttribute("data-id",r.dataId),s.setAttribute("aria-label",r.ariaLabel);const o=this.getPos(),{styles:a,marks:l}=x2t(o,this.view);return pe(this,o2,ISe).call(this,o,l),Object.assign(s.style,a),s.appendChild(i),Object.entries(n).forEach(([c,u])=>{u&&s.setAttribute(c,u)}),s},ISe=function(e,n){setTimeout(()=>{const{state:r}=this.editor,{dispatch:i}=this.view,s=r.doc.nodeAt(e);if(!s||s.isText)return;const o=s.attrs.marksAsAttrs||[],a=n.map(d=>({type:d.type.name,attrs:d.attrs}));if(JSON.stringify(o)===JSON.stringify(a))return;const c={...s.attrs,marksAsAttrs:a},u=r.tr.setNodeMarkup(e,void 0,c);i(u)},0)};const x2t=(t,e)=>{const n=e.state.doc.resolve(t),r={},i=[],s=n.nodeBefore;s&&(Object.assign(r,coe(s.marks)),i.push(...s.marks));const o=n.nodeAfter;return o&&(Object.assign(r,{...r,...coe(o.marks)}),i.push(...o.marks)),{styles:r,marks:i}},coe=t=>{const e={};return t.forEach(n=>{const{type:r,attrs:i}=n;switch(r.name){case"textStyle":i.fontFamily&&(e["font-family"]=i.fontFamily),i.fontSize&&(e["font-size"]=i.fontSize),i.color&&(e.color=i.color),i.backgroundColor&&(e["background-color"]=i.backgroundColor);break;case"bold":e["font-weight"]="bold";break;case"italic":e["font-style"]="italic";break;case"underline":e["text-decoration"]=(e["text-decoration"]||"")+" underline";break;case"strike":e["text-decoration"]=(e["text-decoration"]||"")+" line-through";break;default:i!=null&&i.style&&Object.entries(i.style).forEach(([s,o])=>{e[s]=o});break}}),e},E2t=Tr.create({name:"pageReference",group:"inline",inline:!0,atom:!0,draggable:!1,selectable:!1,content:"inline*",addOptions(){return{htmlAttributes:{contenteditable:!1,"data-id":"auto-page-reference","aria-label":"Page reference node",class:"sd-editor-page-reference"}}},addAttributes(){return{marksAsAttrs:{default:null,rendered:!1},instruction:{default:"",rendered:!1}}},parseDOM(){return[{tag:'span[data-id="auto-page-reference"]'}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),S2t=Tr.create({name:"shapeContainer",group:"block",content:"block+",isolating:!0,addOptions(){return{htmlAttributes:{class:"sd-editor-shape-container","aria-label":"Shape container node"}}},addAttributes(){return{fillcolor:{renderDOM:t=>t.fillcolor?{style:`background-color: ${t.fillcolor}`}:{}},sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},style:{renderDOM:t=>t.style?{style:t.style}:{}},wrapAttributes:{rendered:!1},attributes:{rendered:!1}}},parseDOM(){return[{tag:`div[data-type="${this.name}"]`}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t,{"data-type":this.name}),0]}}),A2t=Tr.create({name:"shapeTextbox",group:"block",content:"paragraph* block*",isolating:!0,addOptions(){return{htmlAttributes:{class:"sd-editor-shape-textbox","aria-label":"Shape textbox node"}}},addAttributes(){return{sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}},attributes:{rendered:!1}}},parseDOM(){return[{tag:`div[data-type="${this.name}"]`}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t,{"data-type":this.name}),0]}}),T2t=Tr.create({name:"contentBlock",group:"inline",content:"",isolating:!0,atom:!0,inline:!0,addOptions(){return{htmlAttributes:{contenteditable:!1}}},addAttributes(){return{horizontalRule:{default:!1,renderDOM:({horizontalRule:t})=>t?{"data-horizontal-rule":"true"}:{}},size:{default:null,renderDOM:t=>{var n,r,i;if(!t.size)return{};let e="";if(t.size.top&&(e+=`top: ${t.size.top}px; `),t.size.left&&(e+=`left: ${t.size.left}px; `),t.size.width&&(e+=`width: ${t.size.width.toString().endsWith("%")?t.size.width:`${t.size.width}px`}; `),t.size.height&&(e+=`height: ${t.size.height.toString().endsWith("%")?t.size.height:`${t.size.height}px`}; `),((n=t.marginOffset)==null?void 0:n.horizontal)!=null||((r=t.marginOffset)==null?void 0:r.top)!=null){e+="position: absolute; ";const s=(i=t.originalAttributes)==null?void 0:i.relativeHeight;if(s!=null){const o=Math.floor(s/1e6);e+=`z-index: ${o}; `}else e+="z-index: 1; "}return{style:e}}},background:{default:null,renderDOM:t=>t.background?{style:`background-color: ${t.background}`}:{}},drawingContent:{rendered:!1},attributes:{rendered:!1},originalAttributes:{rendered:!1},marginOffset:{default:null,rendered:!1}}},parseDOM(){return[{tag:`div[data-type="${this.name}"]`}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t,{"data-type":this.name})]},addCommands(){return{insertHorizontalRule:()=>({commands:t})=>t.insertContent({type:this.name,attrs:{horizontalRule:!0,size:{width:"100%",height:2},background:"#e5e7eb"}}),insertContentBlock:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),{findChildren:nP}=gC,RSe="sdBlockId",k2t=new ni("blockNodePlugin"),C2t=hi.create({name:"blockNode",addCommands(){return{replaceBlockNodeById:(t,e)=>({dispatch:n,tr:r})=>{const i=this.editor.helpers.blockNode.getBlockNodeById(t);if(!i||i.length>1)return!1;if(n){let{pos:s,node:o}=i[0],a=r.mapping.map(s),l=r.mapping.map(s+o.nodeSize),c=r.doc.nodeAt(a);o.eq(c)&&r.replaceWith(a,l,e)}return!0},deleteBlockNodeById:t=>({dispatch:e,tr:n})=>{const r=this.editor.helpers.blockNode.getBlockNodeById(t);if(!r||r.length>1)return!1;if(e){let{pos:i,node:s}=r[0],o=n.mapping.map(i),a=n.mapping.map(i+s.nodeSize),l=n.doc.nodeAt(o);s.eq(l)&&n.delete(o,a)}return!0},updateBlockNodeAttributes:(t,e={})=>({dispatch:n,tr:r})=>{const i=this.editor.helpers.blockNode.getBlockNodeById(t);if(!i||i.length>1)return!1;if(n){let{pos:s,node:o}=i[0],a=r.mapping.map(s),l=r.doc.nodeAt(a);return o.eq(l)&&r.setNodeMarkup(a,void 0,{...o.attrs,...e}),!0}}}},addHelpers(){return{getBlockNodes:()=>nP(this.editor.state.doc,t=>uy(t)),getBlockNodeById:t=>nP(this.editor.state.doc,e=>e.attrs.sdBlockId===t),getBlockNodesByType:t=>nP(this.editor.state.doc,e=>e.type.name===t),getBlockNodesInRange:(t,e)=>{let n=[];return this.editor.state.doc.nodesBetween(t,e,(r,i)=>{uy(r)&&n.push({node:r,pos:i})}),n}}},addPmPlugins(){let t=!1;const e=(n,r,i)=>{n.setNodeMarkup(i,void 0,{...r.attrs,sdBlockId:Ts()},r.marks)};return[new Mr({key:k2t,appendTransaction:(n,r,i)=>{const s=n.some(l=>l.docChanged)&&!r.doc.eq(i.doc);if(t&&!s||t&&!_2t([...n]))return;const{tr:o}=i;let a=!1;if(!t)i.doc.descendants((l,c)=>{uy(l)&&rP(l)&&(e(o,l,c),a=!0)});else{const l=[];let c=!1;n.forEach((d,f)=>{d.steps.forEach((h,m)=>{var b,E,A;if(!(h instanceof xi)||!((A=(E=(b=h.slice)==null?void 0:b.content)==null?void 0:E.content)==null?void 0:A.some(x=>uy(x))))return;h.getMap().forEach((x,T,R,k)=>{if(k<=R){_e.env.NODE_ENV==="development"&&console.debug("Block node: invalid range in step map, falling back to full traversal"),c=!0;return}let _=R,N=k;for(let L=m+1;L<d.steps.length;L++){const M=d.steps[L].getMap();_=M.map(_,-1),N=M.map(N,1)}for(let L=f+1;L<n.length;L++){const M=n[L];_=M.mapping.map(_,-1),N=M.mapping.map(N,1)}if(N<=_){_e.env.NODE_ENV==="development"&&console.debug("Block node: invalid range after mapping, falling back to full traversal"),c=!0;return}l.push([_,N])})})});const u=Nj(l);for(const[d,f]of u){const h=i.doc.content.size,m=Ij(d,f,h);if(!m){_e.env.NODE_ENV==="development"&&console.debug("Block node: invalid range after clamping, falling back to full traversal"),c=!0;break}const[y,w]=m;try{i.doc.nodesBetween(y,w,(b,E)=>{uy(b)&&rP(b)&&(e(o,b,E),a=!0)})}catch(b){console.warn("Block node plugin: nodesBetween failed, falling back to full traversal",b),c=!0;break}}c&&i.doc.descendants((d,f)=>{uy(d)&&rP(d)&&(e(o,d,f),a=!0)})}return a&&!t&&(t=!0,o.setMeta("blockNodeInitialUpdate",!0)),o.setStoredMarks(i.tr.storedMarks),a?o:null}})]}}),uy=t=>{var e,n,r;return!!(t!=null&&t.isBlock&&((r=(n=(e=t==null?void 0:t.type)==null?void 0:e.spec)==null?void 0:n.attrs)!=null&&r[RSe]))},rP=t=>{var n;return!((n=t==null?void 0:t.attrs)==null?void 0:n[RSe])},_2t=t=>Array.from(t).some(e=>e.steps.some(n=>{var i,s,o;return n instanceof xi?(o=(s=(i=n.slice)==null?void 0:i.content)==null?void 0:s.content)==null?void 0:o.some(a=>uy(a)):!1})),N2t=Tr.create({name:"tableOfContents",group:"block",content:"paragraph+",inline:!1,addOptions(){return{htmlAttributes:{"data-id":"table-of-contents","aria-label":"Table of Contents"}}},parseDOM(){return[{tag:'div[data-id="table-of-contents"]'}]},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t),0]},addAttributes(){return{instruction:{default:null,rendered:!1},sdBlockId:{default:null,keepOnSplit:!1,parseDOM:t=>t.getAttribute("data-sd-block-id"),renderDOM:t=>t.sdBlockId?{"data-sd-block-id":t.sdBlockId}:{}}}}});function MSe(t,e){const{gradientType:n,stops:r,angle:i}=t;if(!r||r.length===0)return null;let s;if(n==="linear"){s=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),s.setAttribute("id",e);const o=i*Math.PI/180,a=50-50*Math.cos(o),l=50+50*Math.sin(o),c=50+50*Math.cos(o),u=50-50*Math.sin(o);s.setAttribute("x1",`${a}%`),s.setAttribute("y1",`${l}%`),s.setAttribute("x2",`${c}%`),s.setAttribute("y2",`${u}%`)}else s=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),s.setAttribute("id",e),s.setAttribute("cx","50%"),s.setAttribute("cy","50%"),s.setAttribute("r","50%");return r.forEach(o=>{const a=document.createElementNS("http://www.w3.org/2000/svg","stop");a.setAttribute("offset",`${o.position*100}%`),a.setAttribute("stop-color",o.color),o.alpha!=null&&o.alpha<1&&a.setAttribute("stop-opacity",o.alpha.toString()),s.appendChild(a)}),s}function LSe(t,e,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width",n.toString()),i.setAttribute("height",r.toString());const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.display="flex",s.style.flexDirection="column",s.style.justifyContent="center",s.style.padding="10px",s.style.boxSizing="border-box",s.style.wordWrap="break-word",s.style.overflowWrap="break-word",s.style.fontSize="12px",s.style.lineHeight="1.2",e==="center"?s.style.textAlign="center":e==="right"||e==="r"?s.style.textAlign="right":s.style.textAlign="left";let o=document.createElement("div");return t.parts.forEach(a=>{if(a.isLineBreak)s.appendChild(o),o=document.createElement("div"),a.isEmptyParagraph&&(o.style.minHeight="1em");else{const l=document.createElement("span");l.textContent=a.text,a.formatting&&(a.formatting.bold&&(l.style.fontWeight="bold"),a.formatting.italic&&(l.style.fontStyle="italic"),a.formatting.color&&(l.style.color=`#${a.formatting.color}`),a.formatting.fontSize&&(l.style.fontSize=`${a.formatting.fontSize}px`)),o.appendChild(l)}}),s.appendChild(o),i.appendChild(s),i}function I2t(t,e){const{gradientType:n,stops:r,angle:i}=e,s=`gradient-${Date.now()}-${Math.random().toString(36).substring(2,11)}`;let o=t.querySelector("defs");o||(o=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.insertBefore(o,t.firstChild));let a;if(n==="linear"){a=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),a.setAttribute("id",s);const c=i*Math.PI/180,u=50-50*Math.cos(c),d=50+50*Math.sin(c),f=50+50*Math.cos(c),h=50-50*Math.sin(c);a.setAttribute("x1",`${u}%`),a.setAttribute("y1",`${d}%`),a.setAttribute("x2",`${f}%`),a.setAttribute("y2",`${h}%`)}else a=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),a.setAttribute("id",s),a.setAttribute("cx","50%"),a.setAttribute("cy","50%"),a.setAttribute("r","50%");r.forEach(c=>{const u=document.createElementNS("http://www.w3.org/2000/svg","stop");u.setAttribute("offset",`${c.position*100}%`),u.setAttribute("stop-color",c.color),c.alpha!=null&&c.alpha<1&&u.setAttribute("stop-opacity",c.alpha.toString()),a.appendChild(u)}),o.appendChild(a),t.querySelectorAll('[fill]:not([fill="none"])').forEach(c=>{c.setAttribute("fill",`url(#${s})`)})}function R2t(t,e){const{color:n,alpha:r}=e;t.querySelectorAll('[fill]:not([fill="none"])').forEach(s=>{s.setAttribute("fill",n),s.setAttribute("fill-opacity",r.toString())})}function M2t(t){const e=[];return t.rotation!=null&&e.push(`rotate(${t.rotation}deg)`),t.flipH&&e.push("scaleX(-1)"),t.flipV&&e.push("scaleY(-1)"),e}const L2t=1e6;var b4,DSe;class D2t{constructor(e){st(this,b4);Mt(this,"node");Mt(this,"view");Mt(this,"getPos");Mt(this,"decorations");Mt(this,"innerDecorations");Mt(this,"editor");Mt(this,"extension");Mt(this,"htmlAttributes");Mt(this,"root");this.node=e.node,this.view=e.editor.view,this.getPos=e.getPos,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.editor=e.editor,this.extension=e.extension,this.htmlAttributes=e.htmlAttributes,this.mount()}mount(){this.buildView(),pe(this,b4,DSe).call(this)}get dom(){return this.root}get contentDOM(){return null}createElement(){const e=this.node.attrs,n=document.createElement("span");n.classList.add("sd-vector-shape"),n.setAttribute("data-vector-shape",""),n.style.width=`${e.width}px`,n.style.height=`${e.height}px`;const r=this.getPositioningStyle(e);r&&(n.style.cssText+=r);const i=this.generateTransform(),s=n.style.transform,o=[];if(s&&s.trim()!==""&&o.push(s.trim()),Array.isArray(i)&&i.length>0){const l=i.filter(c=>c!=null&&typeof c=="string"&&c.trim()!=="");l.length>0&&o.push(...l)}o.length>0&&(n.style.transform=o.join(" "));const a=this.createSVGElement(e);if(a&&(n.appendChild(a),e.textContent&&e.textContent.parts)){const l=this.createTextElement(e.textContent,e.textAlign,e.width,e.height);l&&a.appendChild(l)}return{element:n}}getPositioningStyle(e){var f,h,m,y,w,b,E,A;const{anchorData:n,marginOffset:r,wrap:i,originalAttributes:s}=e;if(!n&&!(r!=null&&r.horizontal)&&!(r!=null&&r.top))return"";let o="";const a={left:0,right:0,top:0};let l=!1,c=!1,u=(r==null?void 0:r.horizontal)||0;if((i==null?void 0:i.type)==="None"){o+="position: absolute;";const x=s==null?void 0:s.relativeHeight;if(x!=null){const T=Math.floor(x/L2t);o+=`z-index: ${T};`}else(f=i==null?void 0:i.attrs)!=null&&f.behindDoc?o+="z-index: -1;":o+="z-index: 1;"}if(n)switch(n.hRelativeFrom){case"page":const x=((m=(h=this.editor)==null?void 0:h.converter)==null?void 0:m.pageStyles)||((E=(b=(w=(y=this.editor)==null?void 0:y.options)==null?void 0:w.parentEditor)==null?void 0:b.converter)==null?void 0:E.pageStyles);a.left-=h1((A=x==null?void 0:x.pageMargins)==null?void 0:A.left)||0;break;case"margin":n.alignH==="center"&&(o+="position: absolute; left: 50%; transform: translateX(-50%);"),(n.alignH==="left"||n.alignH==="right")&&(o+=`position: absolute; ${n.alignH}: 0;`);break;case"column":n.alignH==="center"?l=!0:n.alignH==="right"?(c=!0,o.includes("float: right;")||(o+="float: right;")):n.alignH==="left"?o.includes("float: left;")||(o+="float: left;"):!n.alignH&&(r==null?void 0:r.horizontal)!=null&&o.includes("position: absolute;")&&(o+=`left: ${u}px;`,u=0);break}const d=o.includes("position: absolute;");if(n||(r==null?void 0:r.horizontal)!=null||(r==null?void 0:r.top)!=null){const x=u,T=(r==null?void 0:r.top)??0;d?(x&&!o.includes("left:")&&(o+=`left: ${x}px;`),T!=null&&(o+=`top: ${T}px;`)):(x&&(c?a.right+=x:a.left+=x),T>0&&(a.top+=T))}return l?o+="margin-left: auto; margin-right: auto;":d||(a.left&&(o+=`margin-left: ${a.left}px;`),a.right&&(o+=`margin-right: ${a.right}px;`)),!d&&a.top&&(o+=`margin-top: ${a.top}px;`),o}generateTransform(){return M2t(this.node.attrs)}createSVGElement(e){const{kind:n,fillColor:r,strokeColor:i,strokeWidth:s,width:o,height:a}=e,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",o.toString()),l.setAttribute("height",a.toString()),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.style.display="block";const c=document.createElementNS("http://www.w3.org/2000/svg","defs");l.appendChild(c);let u="none",d=1;if(r)if(typeof r=="object")if(r.type==="gradient"){const y=`gradient-${Math.random().toString(36).slice(2,11)}-${Date.now()}`,w=this.createGradient(r,y);w&&(c.appendChild(w),u=`url(#${y})`)}else r.type==="solidWithAlpha"&&(u=r.color,d=r.alpha);else u=r;const f=i===null?"none":i||"none",h=i===null?0:i?s||1:0;let m;switch(n){case"rect":m=document.createElementNS("http://www.w3.org/2000/svg","rect"),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("width",o.toString()),m.setAttribute("height",a.toString());break;case"roundRect":m=document.createElementNS("http://www.w3.org/2000/svg","rect"),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("width",o.toString()),m.setAttribute("height",a.toString());const y=Math.min(o,a)*.05;m.setAttribute("rx",y.toString()),m.setAttribute("ry",y.toString());break;case"ellipse":m=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),m.setAttribute("cx",(o/2).toString()),m.setAttribute("cy",(a/2).toString()),m.setAttribute("rx",(o/2).toString()),m.setAttribute("ry",(a/2).toString());break;case"circle":m=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),m.setAttribute("cx",(o/2).toString()),m.setAttribute("cy",(a/2).toString()),m.setAttribute("rx",(o/2).toString()),m.setAttribute("ry",(a/2).toString());break;default:try{const w=this.generateSVG({kind:n,fillColor:r,strokeColor:i,strokeWidth:s,width:o,height:a});if(w){const b=document.createElement("div");b.innerHTML=w;const E=b.querySelector("svg");if(E)return E.setAttribute("width",o.toString()),E.setAttribute("height",a.toString()),E.setAttribute("preserveAspectRatio","none"),E.style.width=`${o}px`,E.style.height=`${a}px`,E.style.display="block",E}}catch(w){return console.warn("Failed to generate SVG for shape:",n,w),null}return null}return m.setAttribute("fill",u),d<1&&m.setAttribute("fill-opacity",d.toString()),m.setAttribute("stroke",f),m.setAttribute("stroke-width",h.toString()),l.appendChild(m),l}createGradient(e,n){return MSe(e,n)}generateSVG({kind:e,fillColor:n,strokeColor:r,strokeWidth:i,width:s,height:o}){try{let a=n||"none";return n&&typeof n=="object"&&(n.type==="gradient"?a="#cccccc":n.type==="solidWithAlpha"&&(a=n.color)),jU({preset:e,styleOverrides:{fill:a,stroke:r||"none",strokeWidth:i||0},width:s,height:o})}catch{return null}}applyGradientToSVG(e,n){I2t(e,n)}applyAlphaToSVG(e,n){R2t(e,n)}createTextElement(e,n,r,i){return LSe(e,n,r,i)}buildView(){const{element:e}=this.createElement();this.root=e}update(){return!1}}b4=new WeakSet,DSe=function(){var n;((n=this.node.attrs.wrap)==null?void 0:n.type)==="None"&&typeof globalThis<"u"&&globalThis.requestAnimationFrame&&globalThis.requestAnimationFrame(()=>{var r;try{const i=(r=this.root)==null?void 0:r.parentElement;i&&i.tagName==="P"&&(i.style.position="relative")}catch(i){console.warn("Failed to position parent element for vector shape:",i)}})};const O2t=Tr.create({name:"vectorShape",group:"inline",inline:!0,atom:!0,addOptions(){return{htmlAttributes:{}}},addAttributes(){return{kind:{default:"rect",renderDOM:t=>t.kind?{"data-kind":t.kind}:{}},width:{default:100,renderDOM:t=>t.width==null?{}:{"data-width":t.width}},height:{default:100,renderDOM:t=>t.height==null?{}:{"data-height":t.height}},fillColor:{default:"#5b9bd5",renderDOM:t=>t.fillColor?{"data-fill-color":t.fillColor}:{}},strokeColor:{default:"#000000",renderDOM:t=>t.strokeColor?{"data-stroke-color":t.strokeColor}:{}},strokeWidth:{default:1,renderDOM:t=>t.strokeWidth==null?{}:{"data-stroke-width":t.strokeWidth}},rotation:{default:0,renderDOM:t=>t.rotation==null?{}:{"data-rotation":t.rotation}},flipH:{default:!1,renderDOM:t=>t.flipH?{"data-flip-h":t.flipH}:{}},flipV:{default:!1,renderDOM:t=>t.flipV?{"data-flip-v":t.flipV}:{}},wrap:{default:{type:"Inline"},rendered:!1},anchorData:{default:null,rendered:!1},isAnchor:{rendered:!1},marginOffset:{default:{},rendered:!1},drawingContent:{rendered:!1},originalAttributes:{rendered:!1},textContent:{default:null,rendered:!1},textAlign:{default:"center",rendered:!1},textVerticalAlign:{default:"center",rendered:!1},textInsets:{default:null,rendered:!1}}},parseDOM(){return!1},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t,{"data-vector-shape":""})]},addNodeView(){return t=>new D2t({...t})}});var w4,OSe;class P2t{constructor(e){st(this,w4);Mt(this,"node");Mt(this,"view");Mt(this,"getPos");Mt(this,"decorations");Mt(this,"innerDecorations");Mt(this,"editor");Mt(this,"extension");Mt(this,"htmlAttributes");Mt(this,"root");this.node=e.node,this.view=e.editor.view,this.getPos=e.getPos,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.editor=e.editor,this.extension=e.extension,this.htmlAttributes=e.htmlAttributes,this.mount()}mount(){this.buildView(),pe(this,w4,OSe).call(this)}get dom(){return this.root}get contentDOM(){return null}createElement(){var y,w,b,E;const e=this.node.attrs,{groupTransform:n,shapes:r,size:i,marginOffset:s,originalAttributes:o,wrap:a,anchorData:l}=e,c=document.createElement("div");c.classList.add("sd-shape-group"),c.setAttribute("data-shape-group","");const u=(i==null?void 0:i.width)||(n==null?void 0:n.width)||300,d=(i==null?void 0:i.height)||(n==null?void 0:n.height)||200;c.style.width=`${u}px`,c.style.height=`${d}px`,c.style.position="relative",c.style.display="inline-block";const f=(a==null?void 0:a.type)||"Inline";if(f==="None"){c.style.position="absolute",(s==null?void 0:s.horizontal)!=null&&(c.style.left=`${s.horizontal}px`),(l==null?void 0:l.hRelativeFrom)==="column"&&!(l!=null&&l.alignH)&&(s==null?void 0:s.horizontal)!=null&&(c.style.maxWidth="none"),(s==null?void 0:s.top)!=null&&(c.style.top=`${s.top}px`);const x=o==null?void 0:o.relativeHeight;if(x!=null){const T=Math.floor(x/1e6);c.style.zIndex=T.toString()}else c.style.zIndex="1"}else f==="Square"?(c.style.float="left",c.style.clear="both",(s==null?void 0:s.horizontal)!=null&&(c.style.marginLeft=`${s.horizontal}px`),(s==null?void 0:s.top)!=null&&(c.style.marginTop=`${s.top}px`),(y=a==null?void 0:a.attrs)!=null&&y.distLeft&&(c.style.marginLeft=`${((s==null?void 0:s.horizontal)||0)+a.attrs.distLeft}px`),(w=a==null?void 0:a.attrs)!=null&&w.distRight&&(c.style.marginRight=`${a.attrs.distRight}px`),(b=a==null?void 0:a.attrs)!=null&&b.distTop&&(c.style.marginTop=`${((s==null?void 0:s.top)||0)+a.attrs.distTop}px`),(E=a==null?void 0:a.attrs)!=null&&E.distBottom&&(c.style.marginBottom=`${a.attrs.distBottom}px`)):((s==null?void 0:s.horizontal)!=null&&(c.style.marginLeft=`${s.horizontal}px`),(s==null?void 0:s.top)!=null&&(c.style.marginTop=`${s.top}px`));const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("version","1.1"),h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h.setAttribute("width",u.toString()),h.setAttribute("height",d.toString()),h.setAttribute("viewBox",`0 0 ${u} ${d}`),h.style.display="block";const m=document.createElementNS("http://www.w3.org/2000/svg","defs");return h.appendChild(m),r&&Array.isArray(r)&&r.forEach((A,x)=>{if(A.shapeType==="vectorShape"){const T=this.createShapeElement(A,n,m,x);T&&h.appendChild(T)}else if(A.shapeType==="image"){const T=this.createImageElement(A,n);T&&h.appendChild(T)}}),c.appendChild(h),{element:c}}createShapeElement(e,n,r,i){const s=e.attrs;if(!s)return null;const o=s.x??0,a=s.y??0,l=s.width??100,c=s.height??100,u=document.createElementNS("http://www.w3.org/2000/svg","g"),d=[];d.push(`translate(${o}, ${a})`),s.rotation!==0&&d.push(`rotate(${s.rotation} ${l/2} ${c/2})`),s.flipH&&d.push(`scale(-1, 1) translate(${-l}, 0)`),s.flipV&&d.push(`scale(1, -1) translate(0, ${-c})`),d.length>0&&u.setAttribute("transform",d.join(" "));const f=s.kind||"rect",h=s.fillColor===null?null:s.fillColor??"#5b9bd5",m=s.strokeColor===null?null:s.strokeColor??"#000000",y=s.strokeWidth??1;let w=h;if(h&&typeof h=="object"&&h.type==="gradient"){const b=`gradient-${i}-${Date.now()}-${Math.floor(Math.random()*1e9)}`,E=this.createGradient(h,b);r.appendChild(E),w=`url(#${b})`}else h===null?w="none":typeof h=="string"&&(w=h);if(f==="line"){const b=document.createElementNS("http://www.w3.org/2000/svg","line");if(b.setAttribute("x1","0"),b.setAttribute("y1","0"),b.setAttribute("x2",l.toString()),b.setAttribute("y2",c.toString()),b.setAttribute("stroke",m===null?"none":m),b.setAttribute("stroke-width",(m===null?0:y).toString()),u.appendChild(b),s.textContent&&s.textContent.parts){const E=this.createTextElement(s.textContent,s.textAlign,l,c);E&&u.appendChild(E)}return u}try{const b=jU({preset:f,styleOverrides:{fill:w||"none",stroke:m===null?"none":m,strokeWidth:m===null?0:y},width:l,height:c});if(b){const E=document.createElement("div");E.innerHTML=b;const A=E.querySelector("svg");A&&Array.from(A.children).forEach(x=>{const T=x.cloneNode(!0);if(T.tagName==="ellipse")T.setAttribute("cx",(l/2).toString()),T.setAttribute("cy",(c/2).toString()),T.setAttribute("rx",(l/2).toString()),T.setAttribute("ry",(c/2).toString());else if(T.tagName==="circle")if(l!==c){const R=document.createElementNS("http://www.w3.org/2000/svg","ellipse");R.setAttribute("cx",(l/2).toString()),R.setAttribute("cy",(c/2).toString()),R.setAttribute("rx",(l/2).toString()),R.setAttribute("ry",(c/2).toString()),Array.from(T.attributes).forEach(k=>{["cx","cy","r"].includes(k.name)||R.setAttribute(k.name,k.value)}),u.appendChild(R);return}else T.setAttribute("cx",(l/2).toString()),T.setAttribute("cy",(c/2).toString()),T.setAttribute("r",(l/2).toString());else if(T.tagName==="rect")T.setAttribute("width",l.toString()),T.setAttribute("height",c.toString());else if(T.tagName==="path"&&A.hasAttribute("viewBox")){const R=A.getAttribute("viewBox").split(" ").map(Number);if(R.length===4){const[,,k,_]=R,N=l/k,L=c/_;if(N!==1||L!==1){const M=`scale(${N}, ${L})`,C=T.getAttribute("transform");T.setAttribute("transform",C?`${C} ${M}`:M)}}}else T.hasAttribute("width")&&T.setAttribute("width",l.toString());T.hasAttribute("height")&&T.tagName!=="ellipse"&&T.setAttribute("height",c.toString()),u.appendChild(T)})}}catch(b){console.warn("Failed to generate shape SVG:",b);const E=document.createElementNS("http://www.w3.org/2000/svg","rect");E.setAttribute("width",l.toString()),E.setAttribute("height",c.toString()),E.setAttribute("fill",h===null?"none":typeof h=="string"?h:"#cccccc"),E.setAttribute("stroke",m===null?"none":m),E.setAttribute("stroke-width",m===null?"0":y.toString()),u.appendChild(E)}if(s.textContent&&s.textContent.parts){const b=this.createTextElement(s.textContent,s.textAlign,l,c);b&&u.appendChild(b)}return u}createTextElement(e,n,r,i){return LSe(e,n,r,i)}createGradient(e,n){return MSe(e,n)}createImageElement(e,n){var u,d,f,h;const r=e.attrs;if(!r)return null;const i=r.x||0,s=r.y||0,o=r.width||100,a=r.height||100,l=document.createElementNS("http://www.w3.org/2000/svg","image");l.setAttribute("x",i.toString()),l.setAttribute("y",s.toString()),l.setAttribute("width",o.toString()),l.setAttribute("height",a.toString());const c=((h=(f=(d=(u=this.editor)==null?void 0:u.storage)==null?void 0:d.image)==null?void 0:f.media)==null?void 0:h[r.src])??r.src;return l.setAttribute("href",c),l.setAttribute("preserveAspectRatio","none"),l}buildView(){const{element:e}=this.createElement();this.root=e}update(){return!1}}w4=new WeakSet,OSe=function(){var n;(((n=this.node.attrs.wrap)==null?void 0:n.type)||"Inline")==="None"&&typeof globalThis<"u"&&globalThis.requestAnimationFrame&&globalThis.requestAnimationFrame(()=>{var r;try{const i=(r=this.root)==null?void 0:r.parentElement;i&&i.tagName==="P"&&(i.style.position="relative")}catch(i){console.warn("Failed to position parent element for shape group:",i)}})};const F2t=Tr.create({name:"shapeGroup",group:"inline",inline:!0,atom:!0,addOptions(){return{htmlAttributes:{contenteditable:!1}}},addAttributes(){return{groupTransform:{default:{},renderDOM:()=>({})},shapes:{default:[],renderDOM:()=>({})},size:{default:null,renderDOM:t=>{if(!t.size)return{};const e={};return t.size.width&&(e["data-width"]=t.size.width),t.size.height&&(e["data-height"]=t.size.height),e}},padding:{default:null,renderDOM:t=>{if(!t.padding)return{};const e={};return t.padding.top!=null&&(e["data-padding-top"]=t.padding.top),t.padding.right!=null&&(e["data-padding-right"]=t.padding.right),t.padding.bottom!=null&&(e["data-padding-bottom"]=t.padding.bottom),t.padding.left!=null&&(e["data-padding-left"]=t.padding.left),e}},marginOffset:{default:null,renderDOM:t=>{if(!t.marginOffset)return{};const e={};return t.marginOffset.horizontal!=null&&(e["data-offset-x"]=t.marginOffset.horizontal),t.marginOffset.top!=null&&(e["data-offset-y"]=t.marginOffset.top),e}},drawingContent:{rendered:!1},wrap:{default:{type:"Inline"},rendered:!1},anchorData:{default:null,rendered:!1},originalAttributes:{rendered:!1}}},parseDOM(){return!1},renderDOM({htmlAttributes:t}){return["div",an.mergeAttributes(this.options.htmlAttributes,t,{"data-shape-group":""})]},addNodeView(){return t=>new P2t({...t})}}),PSe=()=>({originalName:{default:null},originalXml:{default:null}}),FSe=t=>["sd-passthrough",{"data-sd-passthrough":t,style:"display: none;"}],BSe=Tr.create({name:"passthroughBlock",group:"block",atom:!0,draggable:!1,selectable:!1,defining:!0,parseDOM(){return[{tag:'sd-passthrough[data-sd-passthrough="block"]'}]},renderDOM(){return FSe("block")},addAttributes(){return PSe()}}),jSe=Tr.create({name:"passthroughInline",group:"inline",inline:!0,atom:!0,draggable:!1,selectable:!1,parseDOM(){return[{tag:'sd-passthrough[data-sd-passthrough="inline"]'}]},renderDOM(){return FSe("inline")},addAttributes(){return PSe()}}),$Se=nl.create({name:"textStyle",addOptions(){return{htmlAttributes:{}}},parseDOM(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style"),n=t.classList.contains(Mj)||t.classList.contains(gSe);return!e||n?!1:{}}},{getAttrs:t=>{var i;const e=(i=t.style.fontFamily)==null?void 0:i.replace(/['"]+/g,""),n=t.style.fontSize,r=t.style.textTransform;return e||n||r?{fontFamily:e||null,fontSize:n||null,textTransform:r||null}:!1}}]},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]},addAttributes(){return{styleId:{},vertAlign:{default:null,renderDOM:t=>!t.vertAlign||t.position?{}:t.vertAlign==="superscript"?{style:"vertical-align: super; font-size: 65%;"}:t.vertAlign==="subscript"?{style:"vertical-align: sub; font-size: 65%;"}:t.vertAlign==="baseline"?{style:"vertical-align: baseline;"}:{},parseDOM:t=>{var n;const e=(n=t.style)==null?void 0:n.verticalAlign;return e==="super"?"superscript":e==="sub"?"subscript":e==="baseline"?"baseline":null}},position:{default:null,renderDOM:t=>t.position?{style:`vertical-align: ${t.position};`}:{},parseDOM:t=>{var r;const e=(r=t.style)==null?void 0:r.verticalAlign;if(!e)return null;const n=parseFloat(e);return Number.isNaN(n)?null:`${n}pt`}}}},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=an.getMarkAttributes(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}});function yM({markName:t,setCommand:e,unsetCommand:n,toggleCommand:r,negationAttrs:i,isNegation:s,extendEmptyMarkRange:o}={}){if(!t)throw new Error("createCascadeToggleCommands requires a markName");const a=t.charAt(0).toUpperCase()+t.slice(1),l=e??`set${a}`,c=n??`unset${a}`,u=r??`toggle${a}`,d={};return i&&(d.negationAttrs=i),typeof s=="function"&&(d.isNegation=s),o!==void 0&&(d.extendEmptyMarkRange=o),{[l]:()=>({commands:f})=>f.setMark(t),[c]:()=>({commands:f})=>f.unsetMark(t),[u]:()=>({commands:f})=>f.toggleMarkCascade(t,d)}}const zSe=nl.create({name:"bold",addOptions(){return{htmlAttributes:{}}},addAttributes(){return{value:{default:null,renderDOM:t=>t.value==null?{}:t.value==="0"||!t.value?{style:"font-weight: normal"}:{}}}},parseDOM(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderDOM({htmlAttributes:t}){const e=an.mergeAttributes(this.options.htmlAttributes,t),{value:n,...r}=e||{};return n==="0"?["span",r,0]:["strong",r,0]},addCommands(){const{setBold:t,unsetBold:e,toggleBold:n}=yM({markName:this.name,negationAttrs:{value:"0"}});return{setBold:t,unsetBold:e,toggleBold:n}},addShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}}}),HSe=nl.create({name:"italic",addOptions(){return{htmlAttributes:{}}},addAttributes(){return{value:{default:null,renderDOM:t=>t.value==null?{}:t.value==="0"||!t.value?{style:"font-style: normal"}:{}}}},parseDOM(){return[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}]},renderDOM({htmlAttributes:t}){const e=an.mergeAttributes(this.options.htmlAttributes,t),{value:n,...r}=e||{};return n==="0"?["span",r,0]:["em",r,0]},addCommands(){const{setItalic:t,unsetItalic:e,toggleItalic:n}=yM({markName:this.name,negationAttrs:{value:"0"}});return{setItalic:t,unsetItalic:e,toggleItalic:n}},addShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}}}),B2t=t=>t.type==="contextmenu"&&typeof t.detail=="number"&&t.detail===0&&(t.button===0||t.button===void 0)&&t.clientX===0&&t.clientY===0,j2t=t=>t?t.ctrlKey||t.metaKey?!0:B2t(t):!1,Lj=t=>j2t(t),$2t=Lj,VSe=Object.freeze({focused:!1,preservedSelection:null,showVisualSelection:!1,skipFocusReset:!1}),z2t=(t={})=>({...VSe,...t}),TC=new ni("CustomSelection"),H2t=(t,e)=>{var i;const n=(i=e==null?void 0:e.options)==null?void 0:i.element;if(!n)return;(n==null?void 0:n.contains(t.target))?e.setOptions({focusTarget:null}):e.setOptions({focusTarget:t.target})};function V2t(t){return t.getMeta(TC)}function Th(t,e){return t.setMeta(TC,e)}function r_(t){return TC.getState(t)}const iP=t=>{var e;return!!(t!=null&&t.closest(".button-text-input"))||((e=t==null?void 0:t.classList)==null?void 0:e.contains("button-text-input"))},sP=t=>{var e;return!!(t!=null&&t.closest(".toolbar-button"))||((e=t==null?void 0:t.classList)==null?void 0:e.contains("toolbar-button"))},USe=hi.create({name:"customSelection",addPmPlugins(){const t=this.editor;return[new Mr({key:TC,state:{init:()=>({...VSe}),apply:(n,r)=>{const i=V2t(n);return i!==void 0?{...r,...i}:r}},view:()=>{const n=r=>H2t(r,t);return document==null||document.addEventListener("mousedown",n),{destroy:()=>{document==null||document.removeEventListener("mousedown",n)}}},props:{handleDOMEvents:{contextmenu:(n,r)=>{if(Lj(r))return!1;r.preventDefault();const{selection:i}=n.state;return i.empty||n.dispatch(Th(n.state.tr,{focused:!0,preservedSelection:i,showVisualSelection:!0,skipFocusReset:!0})),setTimeout(()=>{n.focus()},0),!1},mousedown:(n,r)=>{var c;if(r.button===2){if(Lj(r))return!1;r.preventDefault();const{selection:u}=n.state;return u.empty||(n.dispatch(Th(n.state.tr,{focused:!0,preservedSelection:u,showVisualSelection:!0,skipFocusReset:!0})),this.editor.setOptions({lastSelection:u,preservedSelection:u})),!1}const{selection:i}=n.state,s=r.target,o=s instanceof Element,a=o&&sP(s),l=o&&iP(s);if(this.editor.setOptions({focusTarget:s}),l&&!i.empty)return n.dispatch(Th(n.state.tr,{focused:!0,preservedSelection:i,showVisualSelection:!0,skipFocusReset:!1})),this.editor.setOptions({lastSelection:i,preservedSelection:i}),!1;if(a&&!l)return i.empty||(this.editor.setOptions({lastSelection:i}),n.dispatch(Th(n.state.tr,{focused:!0,preservedSelection:i,showVisualSelection:!0,skipFocusReset:!1}))),!1;if(!a&&!l&&(n.dispatch(Th(n.state.tr,{focused:!1,preservedSelection:null,showVisualSelection:!1,skipFocusReset:!1})),!i.empty&&!((c=this.editor.options.element)!=null&&c.contains(s)))){this.editor.setOptions({lastSelection:i});const u=n.state.tr.setSelection(Vt.create(n.state.doc,0));n.dispatch(u)}},focus:n=>{const r=this.editor.options.focusTarget,i=r instanceof Element,s=i&&sP(r),o=i&&iP(r),a=r_(n.state);if(a!=null&&a.skipFocusReset)return n.dispatch(Th(n.state.tr,z2t({...a,skipFocusReset:!1}))),!1;!s&&!o&&n.dispatch(Th(n.state.tr,{focused:!1,preservedSelection:null,showVisualSelection:!1,skipFocusReset:!1}))},blur:n=>{const r=this.editor.options.focusTarget,i=r instanceof Element,s=i&&sP(r),o=i&&iP(r),a=r_(n.state);if(a!=null&&a.skipFocusReset)return!1;s||o?n.dispatch(Th(n.state.tr,{focused:!0,preservedSelection:a.preservedSelection||n.state.selection,showVisualSelection:!0,skipFocusReset:!1})):n.dispatch(Th(n.state.tr,{focused:!1,preservedSelection:null,showVisualSelection:!1,skipFocusReset:!1}))}},decorations:n=>{const{selection:r,doc:i}=n,s=r_(n);if(!(s.showVisualSelection&&(s.preservedSelection||!r.empty&&s.focused)))return null;const a=s.preservedSelection||r;return a.empty?null:An.create(i,[Qn.inline(a.from,a.to,{class:"sd-custom-selection"})])}}})]},addCommands(){return{restorePreservedSelection:()=>({tr:t,state:e})=>{const n=r_(e);if(n.preservedSelection)return t.setSelection(n.preservedSelection);const r=this.editor.options.lastSelection;return r?t.setSelection(r):t}}}}),U2t=(t,e=[])=>{var s,o;const n=e.find(a=>a.id===t),r=(o=(s=n==null?void 0:n.definition)==null?void 0:s.attrs)==null?void 0:o.basedOn,i=e.find(a=>a.id===r);return{linkedStyle:n,basedOnStyle:i}},yW=t=>{var e;return(e=t==null?void 0:t.converter)!=null&&e.linkedStyles?t.converter.linkedStyles.filter(n=>{var r;return n.type==="paragraph"&&((r=n.definition)==null?void 0:r.attrs)}).sort((n,r)=>{var o,a;const i=((o=n.definition.attrs)==null?void 0:o.name)??"",s=((a=r.definition.attrs)==null?void 0:a.name)??"";return i.localeCompare(s)}):[]},bW=(t,e,n,r,i=!0)=>{var d,f;if(!((d=t==null?void 0:t.definition)!=null&&d.styles))return"";const s={},o={...t.definition.styles},a={...(f=e==null?void 0:e.definition)==null?void 0:f.styles},l={...o};return["font-size","font-family","text-transform","bold","italic","underline","strike","color","highlight"].forEach(h=>{!o[h]&&a[h]&&(l[h]=a[h])}),Object.entries(l).forEach(([h,m])=>{var A,x,T,R,k,_,N,L,M,C,D;const y=sF(h),w=[];if((A=n==null?void 0:n.marks)==null||A.forEach(O=>{if(O.type.name==="textStyle"){Object.entries(O.attrs).forEach(([$,U])=>{const W=sF($);U&&w.push({key:W,value:U})});return}w.push({key:O.type.name,value:O.attrs[y]})}),((x=n==null?void 0:n.marks)==null?void 0:x.some(O=>{var $,U;return(($=O.type)==null?void 0:$.name)==="underline"&&((U=O.attrs)==null?void 0:U.underlineType)==="none"}))&&(s["text-decoration"]="none"),!w.find(O=>O.key===y))if(y==="bold"&&n){const O=typeof m=="object"&&m!==null?m.value:m,$=(T=n.marks)==null?void 0:T.some(W=>{var ce,se;return((ce=W.type)==null?void 0:ce.name)==="bold"&&((se=W.attrs)==null?void 0:se.value)==="0"}),U=(R=n.marks)==null?void 0:R.some(W=>{var ce,se;return((ce=W.type)==null?void 0:ce.name)==="bold"&&((se=W.attrs)==null?void 0:se.value)!=="0"});!$&&!U&&O!=="0"&&O!==!1&&(s["font-weight"]="bold")}else if(y==="italic"&&n){const O=typeof m=="object"&&m!==null?m.value:m,$=(k=n.marks)==null?void 0:k.some(W=>{var ce,se;return((ce=W.type)==null?void 0:ce.name)==="italic"&&((se=W.attrs)==null?void 0:se.value)==="0"}),U=(_=n.marks)==null?void 0:_.some(W=>{var ce,se;return((ce=W.type)==null?void 0:ce.name)==="italic"&&((se=W.attrs)==null?void 0:se.value)!=="0"});!$&&!U&&O!=="0"&&O!==!1&&(s["font-style"]="italic")}else if(y==="strike"&&n){const O=typeof m=="object"&&m!==null?m.value:m,$=(N=n.marks)==null?void 0:N.some(W=>{var ce,se;return((ce=W.type)==null?void 0:ce.name)==="strike"&&((se=W.attrs)==null?void 0:se.value)==="0"}),U=(L=n.marks)==null?void 0:L.some(W=>{var ce,se,Q;return((ce=W.type)==null?void 0:ce.name)==="strike"&&(((se=W.attrs)==null?void 0:se.value)===void 0||((Q=W.attrs)==null?void 0:Q.value)!=="0")});!$&&!U&&O!=="0"&&O!==!1&&(s["text-decoration"]="line-through")}else if(y==="text-transform"&&n)s[y]=m;else if(y==="font-size"&&n)s[y]=m;else if(y==="font-family"&&n)s[y]=m;else if(y==="color"&&n)s[y]=m;else if(y==="highlight"&&n){if(!((M=n.marks)==null?void 0:M.some($=>{var U;return((U=$.type)==null?void 0:U.name)==="highlight"}))){const $=typeof m=="string"?m:m==null?void 0:m.color;$&&(s["background-color"]=$)}}else if(y==="underline"&&n){const $=((m==null?void 0:m.underline)??(m==null?void 0:m.underlineType)??(m==null?void 0:m.value)??(typeof m=="string"?m:"")).toString().toLowerCase(),U=(C=n.marks)==null?void 0:C.some(ce=>{var se,Q;return((se=ce.type)==null?void 0:se.name)==="underline"&&((Q=ce.attrs)==null?void 0:Q.underlineType)==="none"}),W=(D=n.marks)==null?void 0:D.some(ce=>{var se,Q;return((se=ce.type)==null?void 0:se.name)==="underline"&&((Q=ce.attrs)==null?void 0:Q.underlineType)&&ce.attrs.underlineType!=="none"});if(!U&&!W&&$&&$!=="none"&&$!=="0"){const ce=m&&typeof m=="object"&&(m.color||m.underlineColor)||null;_H({type:$,color:ce}).split(";").forEach(Q=>{const J=Q.trim();if(!J)return;const K=J.indexOf(":");if(K===-1)return;const re=J.slice(0,K).trim(),X=J.slice(K+1).trim();s[re]=X})}}else typeof m=="string"&&(s[y]=m)}),Object.entries(s).map(([h,m])=>`${h}: ${m}`).join(";")},i_=(t,e,n)=>{if(!n)return!1;let r=t.selection;const i=e.state,s=TC.getState(i);r.empty&&(s!=null&&s.preservedSelection)&&!(s!=null&&s.preservedSelection.empty)?(r=s.preservedSelection,t.setSelection(r)):r.empty&&e.options.lastSelection&&(r=e.options.lastSelection,t.setSelection(r));const{from:o,to:a}=r,l=d=>({...d.attrs,paragraphProperties:{...d.attrs.paragraphProperties||{},styleId:n.id}}),c=(d,f)=>{t.doc.nodesBetween(d,f,(h,m)=>{if(h.isText&&h.marks.length>0){const y=["textStyle","bold","italic","underline","strike","subscript","superscript","highlight"];h.marks.forEach(w=>{y.includes(w.type.name)&&t.removeMark(m,m+h.nodeSize,w)})}return!0})};if(o===a){let d=o,f=t.doc.nodeAt(o);if((f==null?void 0:f.type.name)!=="paragraph"){const h=Ml(m=>m.type.name==="paragraph")(r);if(!h)return!1;d=h.pos,f=h.node}return c(d+1,d+f.nodeSize-1),t.setNodeMarkup(d,void 0,l(f)),!0}const u=[];return t.doc.nodesBetween(o,a,(d,f)=>(d.type.name==="paragraph"&&u.push({node:d,pos:f}),!0)),u.forEach(({node:d,pos:f})=>{c(f+1,f+d.nodeSize-1),t.setNodeMarkup(f,void 0,l(d))}),!0},W2t=(t,e,n,r)=>{var l,c,u,d;if(!n.slice||n.slice.size===0||typeof n.from!="number")return!1;let i=!1;if(n.slice.content.descendants(f=>{var h,m;return((h=f.type)==null?void 0:h.name)==="text"&&((m=f.text)!=null&&m.length)?(i=!0,!1):!0}),!i)return!1;const s=((l=t.docs)==null?void 0:l[r])||e.doc;if(!s)return!1;const o=Math.min(n.from,s.content.size),a=s.resolve(o);for(let f=a.depth;f>=0;f--){const h=a.node(f);if(((c=h==null?void 0:h.type)==null?void 0:c.name)==="paragraph")return!!((d=(u=h.attrs)==null?void 0:u.paragraphProperties)!=null&&d.styleId)}return!1},hA=new ni("linkedStyles"),q2t=t=>new Mr({key:hA,state:{init(){var n;if(!t.converter||t.options.mode!=="docx")return{};const e=((n=t.converter)==null?void 0:n.linkedStyles)||[];return{styles:e,decorations:uoe(t.state,e)}},apply(e,n,r,i){if(!t.converter||t.options.mode!=="docx")return{...n};let s=n.decorations||An.empty;if(e.docChanged){let o=!1;const a=new Set(["textStyle","bold","italic","underline","strike"]);if(e.steps.forEach((l,c)=>{l.slice&&l.slice.content.descendants((u,d)=>{if(u.type.name==="paragraph")return Fb(t,u,i.doc.resolve(d)).styleId&&(o=!0),!1;if(u.marks.length>0&&u.marks.some(h=>a.has(h.type.name)))return o=!0,!1}),(l.jsonID==="addMark"||l.jsonID==="removeMark")&&l.mark&&a.has(l.mark.type.name)&&(o=!0),!o&&W2t(e,r,l,c)&&(o=!0)}),o){const l=hA.getState(t.state).styles;s=uoe(i,l)}else s=s.map(e.mapping,e.doc)}return{...n,decorations:s}}},props:{decorations(e){var n;return(n=hA.getState(e))==null?void 0:n.decorations}}}),uoe=(t,e)=>{const n=[],r=t==null?void 0:t.doc;if(!r||!t)return An.empty;const i=s=>{var a;const o=t.doc.resolve(s);for(let l=o.depth;l>=0;l--){const c=o.node(l);if(((a=c==null?void 0:c.type)==null?void 0:a.name)==="paragraph")return es(c).styleId||null}return null};return r.descendants((s,o)=>{var T,R,k;const{name:a}=s.type;if(a!=="text")return;const l=i(o);let c=null,u=null;for(const _ of s.marks)if(_.type.name==="run"){const N=(T=_.attrs)==null?void 0:T.runProperties;if(N&&typeof N=="object"&&!Array.isArray(N)&&N.styleId)c=N.styleId;else if(Array.isArray(N)){const L=N.find(C=>(C==null?void 0:C.xmlName)==="w:rStyle"),M=(R=L==null?void 0:L.attributes)==null?void 0:R["w:val"];M&&(c=M)}}else _.type.name==="textStyle"&&((k=_.attrs)!=null&&k.styleId)&&(u=_.attrs.styleId);const d=_=>{var C,D;if(!_)return{};const{linkedStyle:N,basedOnStyle:L}=U2t(_,e);return N?{...{...((C=L==null?void 0:L.definition)==null?void 0:C.styles)||{}},...((D=N.definition)==null?void 0:D.styles)||{}}:{}},f=d(l);let h;l!=null&&l.startsWith("TOC")?h={}:h=d(u);const m=d(c),y={...f,...h,...m};if(Object.keys(y).length===0)return;const w={definition:{styles:y,attrs:{}}},b=null;t.doc.resolve(o).parent;const A=bW(w,b,s);if(!A)return;const x=Qn.inline(o,o+s.nodeSize,{style:A});n.push(x)}),An.create(r,n)},G2t=hi.create({name:"linkedStyles",priority:1,addOptions(){return{}},addPmPlugins(){return[q2t(this.editor)]},addCommands(){return{setLinkedStyle:t=>e=>{const{tr:n}=e;return i_(n,this.editor,t)},toggleLinkedStyle:t=>e=>{var o;const{tr:n}=e;if(n.selection.empty)return!1;let r=n.doc.nodeAt(n.selection.$from.pos);return r&&r.type.name!=="paragraph"&&(r=(o=A2(n.selection.$from,a=>a.type.name==="paragraph"))==null?void 0:o.node),r?es(r).styleId===t.id?i_(n,this.editor,{id:null}):i_(n,this.editor,t):!1},setStyleById:t=>e=>{var o;const{state:n,tr:r}=e,i=hA.getState(n);if(!i)return!1;const s=(o=i.styles)==null?void 0:o.find(a=>a.id===t);return s?i_(r,this.editor,s):!1}}},addHelpers(){return{getStyles:()=>{var e;return((e=hA.getState(this.editor.state))==null?void 0:e.styles)||[]},getStyleById:t=>this.editor.helpers[this.name].getStyles().find(n=>n.id===t),getLinkedStyleString:t=>{const n=this.editor.helpers.linkedStyles.getStyles().find(r=>r.id===t);return n?bW(n):""}}}}),WSe=nl.create({name:"underline",addOptions(){return{htmlAttributes:{}}},parseDOM(){return[{tag:"u"},{style:"text-decoration=underline"},{style:"text-decoration=auto",clearMark:t=>t.type.name=="u"}]},renderDOM({htmlAttributes:t}){const e=an.mergeAttributes(this.options.htmlAttributes,t),n=e==null?void 0:e.underlineType,r=e==null?void 0:e.underlineColor,i=_H({type:n,color:r}),{style:s,...o}=e||{},a=[s,i].filter(Boolean).join("; ");return n==="none"?["span",{...o,...a?{style:a}:{}},0]:["u",{...o,...a?{style:a}:{}},0]},addAttributes(){return{underlineType:{default:"single"},underlineColor:{default:null}}},addCommands(){const{setUnderline:t,unsetUnderline:e,toggleUnderline:n}=yM({markName:this.name,negationAttrs:{underlineType:"none"},isNegation:r=>(r==null?void 0:r.underlineType)==="none"});return{setUnderline:t,unsetUnderline:e,toggleUnderline:n}},addShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),qSe=nl.create({name:"highlight",addOptions(){return{htmlAttributes:{}}},addAttributes(){return{color:{default:null,parseDOM:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderDOM:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}},parseDOM(){return[{tag:"mark"}]},renderDOM({htmlAttributes:t}){return["mark",an.mergeAttributes(this.options.htmlAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,{color:t}),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name),toggleHighlight:()=>({commands:t})=>t.toggleMark(this.name)}},addShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}}}),GSe=nl.create({name:"strike",addOptions(){return{htmlAttributes:{}}},parseDOM(){return[{tag:"s"},{style:"text-decoration=line-through"},{style:"text-decoration=auto",clearMark:t=>t.type.name=="s"}]},renderDOM({mark:t,htmlAttributes:e}){const n=an.mergeAttributes(this.options.htmlAttributes,e),{value:r}=t.attrs,{...i}=n||{};return r==="0"||r===!1?["span",i,0]:["s",i,0]},addCommands(){const{setStrike:t,unsetStrike:e,toggleStrike:n}=yM({markName:this.name,negationAttrs:{value:"0"}});return{setStrike:t,unsetStrike:e,toggleStrike:n}},addAttributes(){return{value:{default:null,renderDOM:t=>t.value==null?{}:t.value==="0"||!t.value?{style:"text-decoration: none"}:{}}}},addShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike(),"Mod-Shift-X":()=>this.editor.commands.toggleStrike()}}}),KSe=nl.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive:!1,addOptions(){return{protocols:["http","https"],htmlAttributes:{target:null,rel:"noopener noreferrer nofollow",class:null,title:null}}},parseDOM(){return[{tag:"a"}]},renderDOM({htmlAttributes:t}){const e=s_(t.href,this.options.protocols),n={...t};return n.href=e?e.href:"",["a",an.mergeAttributes(this.options.htmlAttributes,n),0]},addAttributes(){return{href:{default:null,renderDOM:({href:t,name:e})=>{const n=s_(t,this.options.protocols);return n?{href:n.href}:e?{href:`#${e}`}:{}}},target:{default:this.options.htmlAttributes.target,renderDOM:({target:t,href:e})=>{if(t)return{target:t};const n=s_(e,this.options.protocols);return n&&n.isExternal?{target:"_blank"}:{}}},rel:{default:this.options.htmlAttributes.rel},rId:{default:this.options.htmlAttributes.rId||null},text:{default:null},name:{default:null},history:{default:!0,rendered:!1},anchor:{rendered:!1},docLocation:{rendered:!1},tooltip:{default:null,renderDOM:({tooltip:t})=>{const e=U1e(t);if(e){const n={title:e.text};return e.wasTruncated&&(n["data-link-tooltip-truncated"]="true"),n}return{}}}}},addCommands(){return{setLink:({href:t,text:e}={})=>({state:n,dispatch:r,editor:i})=>{const{selection:s}=n,o=i.schema.marks.link,a=i.schema.marks.underline,l=t?s_(t,this.options.protocols):null;if(t&&!l)return!1;let c=s.from,u=s.to;if(s.empty){const A=Tp(s.$from,o);A&&(c=A.from,u=A.to)}else{const A=Tp(s.$from,o),x=Tp(s.$to,o);if(A||x){const T=A||x;c=T.from,u=T.to}}({from:c,to:u}=X2t(n.doc,c,u));const d=n.doc.textBetween(c,u),f=e??d,h=(l==null?void 0:l.href)??"",m=f&&f.length>0?f:h;let y=n.tr;m&&d!==m&&(y=y.insertText(m,c,u),u=c+m.length),o&&(y=y.removeMark(c,u,o)),a&&(y=y.removeMark(c,u,a)),a&&(y=y.addMark(c,u,a.create()));let w=null;if(i.options.mode==="docx"){const A=Y2t({editor:i,href:t});A&&(w=A)}const b={text:m,rId:w};l!=null&&l.href&&(b.href=l.href);const E=o.create(b);return y=y.addMark(c,u,E),r(y.scrollIntoView()),!0},unsetLink:()=>({chain:t})=>t().unsetMark("underline",{extendEmptyMarkRange:!0}).unsetColor().unsetMark("link",{extendEmptyMarkRange:!0}).run(),toggleLink:({href:t,text:e}={})=>({commands:n})=>t?n.setLink({href:t,text:e}):n.unsetLink()}}});function K2t(t=[]){const e=[];return t.forEach(n=>{n&&(typeof n=="string"&&n.trim()?e.push(n.trim().toLowerCase()):typeof n=="object"&&typeof n.scheme=="string"&&n.scheme.trim()&&e.push(n.scheme.trim().toLowerCase()))}),e}function s_(t,e){if(!t)return null;const n=Array.isArray(e)?K2t(e):[],r=Array.from(new Set([...Odt.DEFAULT_ALLOWED_PROTOCOLS,...n]));return pb(t,{allowedProtocols:r})}const X2t=(t,e,n)=>{for(;e<n&&t.textBetween(e,e+1,"")==="";)e+=1;for(;n>e&&t.textBetween(n-1,n,"")==="";)n-=1;return{from:e,to:n}};function Y2t({editor:t,href:e}){const n=e,r="hyperlink";try{return OV(n,r,t)}catch{return null}}const Z2t="track-insert",XSe=nl.create({name:ko,group:"track",inclusive:!1,addOptions(){return{htmlAttributes:{class:Z2t}}},addAttributes(){return{id:{default:"",parseDOM:t=>t.getAttribute("data-id"),renderDOM:t=>t.id?{"data-id":t.id}:{}},author:{default:"",parseDOM:t=>t.getAttribute("data-author"),renderDOM:t=>t.author?{"data-author":t.author}:{}},authorEmail:{default:"",parseDOM:t=>t.getAttribute("data-authoremail"),renderDOM:t=>t.authorEmail?{"data-authoremail":t.authorEmail}:{}},authorImage:{default:"",parseDOM:t=>t.getAttribute("data-authorimage"),renderDOM:t=>t.authorImage?{"data-authorimage":t.authorImage}:{}},date:{default:"",parseDOM:t=>t.getAttribute("data-date"),renderDOM:t=>t.date?{"data-date":t.date}:{}},importedAuthor:{default:"",rendered:!1}}},parseDOM(){return!1},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),J2t="track-delete",YSe=nl.create({name:Hi,group:"track",inclusive:!1,addOptions(){return{htmlAttributes:{class:J2t}}},addAttributes(){return{id:{default:"",parseDOM:t=>t.getAttribute("data-id"),renderDOM:t=>t.id?{"data-id":t.id}:{}},author:{default:"",parseDOM:t=>t.getAttribute("data-author"),renderDOM:t=>t.author?{"data-author":t.author}:{}},authorEmail:{default:"",parseDOM:t=>t.getAttribute("data-authoremail"),renderDOM:t=>t.authorEmail?{"data-authoremail":t.authorEmail}:{}},authorImage:{default:"",parseDOM:t=>t.getAttribute("data-authorimage"),renderDOM:t=>t.authorImage?{"data-authorimage":t.authorImage}:{}},date:{default:"",parseDOM:t=>t.getAttribute("data-date"),renderDOM:t=>t.date?{"data-date":t.date}:{}},importedAuthor:{default:"",rendered:!1}}},parseDOM(){return!1},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),doe=t=>{if(!t)return[];let e;try{e=JSON.parse(t)}catch{return[]}return Array.isArray(e)?e.filter(n=>Object.hasOwn(n,"type")&&Object.hasOwn(n,"attrs")):[]},Q2t="track-format",ZSe=nl.create({name:Zo,group:"track",inclusive:!1,addOptions(){return{htmlAttributes:{class:Q2t}}},addAttributes(){return{id:{default:"",parseDOM:t=>t.getAttribute("data-id"),renderDOM:t=>t.id?{"data-id":t.id}:{}},author:{default:"",parseDOM:t=>t.getAttribute("data-author"),renderDOM:t=>t.author?{"data-author":t.author}:{}},authorEmail:{default:"",parseDOM:t=>t.getAttribute("data-authoremail"),renderDOM:t=>t.authorEmail?{"data-authoremail":t.authorEmail}:{}},authorImage:{default:"",parseDOM:t=>t.getAttribute("data-authorimage"),renderDOM:t=>t.authorImage?{"data-authorimage":t.authorImage}:{}},date:{default:"",parseDOM:t=>t.getAttribute("data-date"),renderDOM:t=>t.date?{"data-date":t.date}:{}},before:{default:[],parseDOM:t=>doe(t.getAttribute("data-before")),renderDOM:t=>t.before?{"data-before":JSON.stringify(t.before)}:{}},after:{default:[],parseDOM:t=>doe(t.getAttribute("data-after")),renderDOM:t=>t.after?{"data-after":JSON.stringify(t.after)}:{}},importedAuthor:{default:"",rendered:!1}}},parseDOM(){return!1},renderDOM({htmlAttributes:t}){return["span",an.mergeAttributes(this.options.htmlAttributes,t),0]}}),eEt={accept:{own:"RESOLVE_OWN",other:"RESOLVE_OTHER"},reject:{own:"REJECT_OWN",other:"REJECT_OTHER"}},tEt=t=>{var n,r,i,s;return`${((r=(n=t.mark)==null?void 0:n.attrs)==null?void 0:r.id)??`${t.from}-${t.to}`}:${((s=(i=t.mark)==null?void 0:i.type)==null?void 0:s.name)??"unknown"}`},nEt=(t,e)=>{var i,s,o,a,l;const n=tEt(e),r=t.get(n);r?(r.from=Math.min(r.from,e.from),r.to=Math.max(r.to,e.to),r.segments.push({from:e.from,to:e.to})):t.set(n,{id:((s=(i=e.mark)==null?void 0:i.attrs)==null?void 0:s.id)??null,type:((a=(o=e.mark)==null?void 0:o.type)==null?void 0:a.name)??null,attrs:{...((l=e.mark)==null?void 0:l.attrs)??{}},from:e.from,to:e.to,segments:[{from:e.from,to:e.to}]})},IT=({state:t,from:e,to:n})=>{if(!t)return[];const r=e===n,i=uM(t);if(!(i!=null&&i.length))return[];const s=new Map;return i.forEach(o=>{(r?o.from<=e&&o.to>=e:o.from<n&&o.to>e)&&nEt(s,o)}),Array.from(s.values())},rEt=({action:t,isOwn:e})=>{const n=eEt[t];return n?e?n.own:n.other:null},foe=t=>typeof t!="string"?"":t.trim().toLowerCase(),iEt=t=>{var s,o,a,l;if(!t)return{role:"editor",isInternal:!1,currentUser:null,resolver:null};const e=((s=t.options)==null?void 0:s.role)??"editor",n=!!((o=t.options)!=null&&o.isInternal),r=((a=t.options)==null?void 0:a.user)??null,i=(l=t.options)==null?void 0:l.permissionResolver;return{role:e,isInternal:n,currentUser:r,resolver:i}},RT=({editor:t,action:e,trackedChanges:n})=>{if(!(n!=null&&n.length))return!0;const{role:r,isInternal:i,currentUser:s,resolver:o}=iEt(t);if(typeof o!="function")return!0;const a=foe(s==null?void 0:s.email);return n.every(l=>{var h;const c=foe((h=l.attrs)==null?void 0:h.authorEmail),d=rEt({action:e,isOwn:!a||!c||a===c});if(!d)return!0;const f={permission:d,role:r,isInternal:i,trackedChange:{id:l.id,type:l.type,attrs:l.attrs,from:l.from,to:l.to,segments:l.segments,commentId:l.id},comment:l.comment??null};return o(f)!==!1})},sEt=({state:t,pos:e,trackedChangeId:n})=>{if(e==null)return[];const r=IT({state:t,from:e,to:e});return n?r.filter(i=>i.id===n):r},oEt=hi.create({name:"trackChanges",addCommands(){return{acceptTrackedChangesBetween:(t,e)=>({state:n,dispatch:r,editor:i})=>{const s=IT({state:n,from:t,to:e});if(!RT({editor:i,action:"accept",trackedChanges:s}))return!1;let{tr:o,doc:a}=n;o.setMeta("inputType","acceptReject");const l=new cd;return a.nodesBetween(t,e,(c,u)=>{if(c.marks&&c.marks.find(d=>d.type.name===Hi)){const d=new xi(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),Ut.empty);o.step(d),l.appendMap(d.getMap())}else if(c.marks&&c.marks.find(d=>d.type.name===ko)){const d=c.marks.find(f=>f.type.name===ko);o.step(new Eo(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),d))}else if(c.marks&&c.marks.find(d=>d.type.name===Zo)){const d=c.marks.find(f=>f.type.name===Zo);o.step(new Eo(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),d))}}),o.steps.length&&r(o),!0},rejectTrackedChangesBetween:(t,e)=>({state:n,dispatch:r,editor:i})=>{const s=IT({state:n,from:t,to:e});if(!RT({editor:i,action:"reject",trackedChanges:s}))return!1;const{tr:o,doc:a}=n;o.setMeta("inputType","acceptReject");const l=new cd;return a.nodesBetween(t,e,(c,u)=>{if(c.marks&&c.marks.find(d=>d.type.name===Hi)){const d=c.marks.find(f=>f.type.name===Hi);o.step(new Eo(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),d))}else if(c.marks&&c.marks.find(d=>d.type.name===ko)){const d=new xi(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),Ut.empty);o.step(d),l.appendMap(d.getMap())}else if(c.marks&&c.marks.find(d=>d.type.name===Zo)){const d=c.marks.find(f=>f.type.name===Zo);d.attrs.before.forEach(f=>{o.step(new Kc(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),n.schema.marks[f.type].create(f.attrs)))}),d.attrs.after.forEach(f=>{o.step(new Eo(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),c.marks.find(h=>h.type.name===f.type)))}),o.step(new Eo(l.map(Math.max(u,t)),l.map(Math.min(u+c.nodeSize,e)),d))}}),o.steps.length&&r(o),!0},acceptTrackedChange:({trackedChange:t})=>({commands:e})=>{const{start:n,end:r}=t;return e.acceptTrackedChangesBetween(n,r)},acceptTrackedChangeBySelection:()=>({state:t,commands:e})=>{const{from:n,to:r}=t.selection;return e.acceptTrackedChangesBetween(n,r)},acceptTrackedChangeFromToolbar:()=>({state:t,commands:e})=>{var i;const n=Zi.getState(t),r=n==null?void 0:n.activeThreadId;return r&&((i=n==null?void 0:n.trackedChanges)!=null&&i[r])?e.acceptTrackedChangeById(r):e.acceptTrackedChangeBySelection()},acceptTrackedChangeById:t=>({state:e,tr:n,commands:r})=>(hoe(e,t)||[]).map(({from:s,to:o})=>{let a=n.mapping.map(s),l=n.mapping.map(o);return r.acceptTrackedChangesBetween(a,l)}).every(s=>s),acceptAllTrackedChanges:()=>({state:t,commands:e})=>{const r=t.doc.content.size;return e.acceptTrackedChangesBetween(0,r)},rejectTrackedChangeById:t=>({state:e,tr:n,commands:r})=>(hoe(e,t)||[]).map(({from:s,to:o})=>{let a=n.mapping.map(s),l=n.mapping.map(o);return r.rejectTrackedChangesBetween(a,l)}).every(s=>s),rejectTrackedChange:({trackedChange:t})=>({commands:e})=>{const{start:n,end:r}=t;return e.rejectTrackedChangesBetween(n,r)},rejectTrackedChangeOnSelection:()=>({state:t,commands:e})=>{const{from:n,to:r}=t.selection;return e.rejectTrackedChangesBetween(n,r)},rejectTrackedChangeFromToolbar:()=>({state:t,commands:e})=>{var i;const n=Zi.getState(t),r=n==null?void 0:n.activeThreadId;return r&&((i=n==null?void 0:n.trackedChanges)!=null&&i[r])?e.rejectTrackedChangeById(r):e.rejectTrackedChangeOnSelection()},rejectAllTrackedChanges:()=>({state:t,commands:e})=>{const r=t.doc.content.size;return e.rejectTrackedChangesBetween(0,r)},toggleTrackChanges:()=>({state:t})=>{const e=Ps.getState(t);return e===void 0?!1:(t.tr.setMeta(Ps,{type:"TRACK_CHANGES_ENABLE",value:!e.isTrackChangesActive}),!0)},enableTrackChanges:()=>({state:t})=>(t.tr.setMeta(Ps,{type:"TRACK_CHANGES_ENABLE",value:!0}),!0),disableTrackChanges:()=>({state:t})=>(t.tr.setMeta(Ps,{type:"TRACK_CHANGES_ENABLE",value:!1}),!0),toggleTrackChangesShowOriginal:()=>({state:t})=>{const e=Ps.getState(t);return e===void 0?!1:(t.tr.setMeta(Ps,{type:"SHOW_ONLY_ORIGINAL",value:!e.onlyOriginalShown}),!0)},enableTrackChangesShowOriginal:()=>({state:t})=>(t.tr.setMeta(Ps,{type:"SHOW_ONLY_ORIGINAL",value:!0}),!0),disableTrackChangesShowOriginal:()=>({state:t})=>(t.tr.setMeta(Ps,{type:"SHOW_ONLY_ORIGINAL",value:!1}),!0),toggleTrackChangesShowFinal:()=>({state:t})=>{const e=Ps.getState(t);return e===void 0?!1:(t.tr.setMeta(Ps,{type:"SHOW_ONLY_MODIFIED",value:!e.onlyModifiedShown}),!0)},enableTrackChangesShowFinal:()=>({state:t})=>(t.tr.setMeta(Ps,{type:"SHOW_ONLY_MODIFIED",value:!0}),!0)}},addPmPlugins(){return[Jat()]}}),hoe=(t,e)=>{const n=uM(t),r=n.findIndex(({mark:f})=>f.attrs.id===e);if(r===-1)return;const i=n[r],s=i.mark.attrs.id,o=({from:f,to:h})=>h-f,a=(f,h)=>!f||!h||f.to!==h.from?!1:!(t.doc.textBetween(f.from,h.to,`
`).length>o(f)+o(h)),l=(f,h)=>f===Hi&&h===ko||f===ko&&h===Hi,c=[],u=[],d=(f,h)=>{let m=r,y=i;for(;;){const w=m+f,b=n[w];if(!b)break;const[E,A]=f<0?[b,y]:[y,b],x=b.mark.attrs.id===s,T=l(y.mark.type.name,b.mark.type.name);if(!x&&!a(E,A)||!x&&!T||(h.push(b),m=w,y=b,!x))break}};return d(-1,c),d(1,u),[i,...u,...c]},aEt=hi.create({name:"textTransform",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textTransform:{default:null,renderDOM:t=>t.textTransform?{style:`text-transform: ${t.textTransform}`}:{}}}}]}}),JSe=hi.create({name:"placeholder",addOptions(){return{placeholder:"Type something..."}},addPmPlugins(){const t=n=>{if(n.doc.textBetween(0,n.doc.content.size," "," ")!=="")return An.empty;const{$from:i}=n.selection,s=Qn.node(i.before(),i.after(),{"data-placeholder":this.options.placeholder,class:"sd-editor-placeholder"});return An.create(n.doc,[s])};return[new Mr({key:new ni("placeholder"),state:{init:(n,r)=>t(r),apply:(n,r,i,s)=>t(s)},props:{decorations(n){return this.getState(n)}}})]}});var Dl="top",cu="bottom",uu="right",Ol="left",wW="auto",kC=[Dl,cu,uu,Ol],Kx="start",MT="end",lEt="clippingParents",QSe="viewport",UE="popper",cEt="reference",poe=kC.reduce(function(t,e){return t.concat([e+"-"+Kx,e+"-"+MT])},[]),eAe=[].concat(kC,[wW]).reduce(function(t,e){return t.concat([e,e+"-"+Kx,e+"-"+MT])},[]),uEt="beforeRead",dEt="read",fEt="afterRead",hEt="beforeMain",pEt="main",mEt="afterMain",gEt="beforeWrite",yEt="write",bEt="afterWrite",wEt=[uEt,dEt,fEt,hEt,pEt,mEt,gEt,yEt,bEt];function Vf(t){return t?(t.nodeName||"").toLowerCase():null}function Sc(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Xb(t){var e=Sc(t).Element;return t instanceof e||t instanceof Element}function su(t){var e=Sc(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function vW(t){if(typeof ShadowRoot>"u")return!1;var e=Sc(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function vEt(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!su(s)||!Vf(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function xEt(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!su(i)||!Vf(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const tAe={name:"applyStyles",enabled:!0,phase:"write",fn:vEt,effect:xEt,requires:["computeStyles"]};function If(t){return t.split("-")[0]}var mb=Math.max,XI=Math.min,Xx=Math.round;function Dj(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function nAe(){return!/^((?!chrome|android).)*safari/i.test(Dj())}function Yx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&su(t)&&(i=t.offsetWidth>0&&Xx(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Xx(r.height)/t.offsetHeight||1);var o=Xb(t)?Sc(t):window,a=o.visualViewport,l=!nAe()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function xW(t){var e=Yx(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function rAe(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&vW(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Vp(t){return Sc(t).getComputedStyle(t)}function EEt(t){return["table","td","th"].indexOf(Vf(t))>=0}function C0(t){return((Xb(t)?t.ownerDocument:t.document)||window.document).documentElement}function bM(t){return Vf(t)==="html"?t:t.assignedSlot||t.parentNode||(vW(t)?t.host:null)||C0(t)}function moe(t){return!su(t)||Vp(t).position==="fixed"?null:t.offsetParent}function SEt(t){var e=/firefox/i.test(Dj()),n=/Trident/i.test(Dj());if(n&&su(t)){var r=Vp(t);if(r.position==="fixed")return null}var i=bM(t);for(vW(i)&&(i=i.host);su(i)&&["html","body"].indexOf(Vf(i))<0;){var s=Vp(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function CC(t){for(var e=Sc(t),n=moe(t);n&&EEt(n)&&Vp(n).position==="static";)n=moe(n);return n&&(Vf(n)==="html"||Vf(n)==="body"&&Vp(n).position==="static")?e:n||SEt(t)||e}function EW(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function pA(t,e,n){return mb(t,XI(e,n))}function AEt(t,e,n){var r=pA(t,e,n);return r>n?n:r}function iAe(){return{top:0,right:0,bottom:0,left:0}}function sAe(t){return Object.assign({},iAe(),t)}function oAe(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var TEt=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,sAe(typeof e!="number"?e:oAe(e,kC))};function kEt(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=If(n.placement),l=EW(a),c=[Ol,uu].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=TEt(i.padding,n),f=xW(s),h=l==="y"?Dl:Ol,m=l==="y"?cu:uu,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],w=o[l]-n.rects.reference[l],b=CC(s),E=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,A=y/2-w/2,x=d[h],T=E-f[u]-d[m],R=E/2-f[u]/2+A,k=pA(x,R,T),_=l;n.modifiersData[r]=(e={},e[_]=k,e.centerOffset=k-R,e)}}function CEt(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||rAe(e.elements.popper,i)&&(e.elements.arrow=i))}const _Et={name:"arrow",enabled:!0,phase:"main",fn:kEt,effect:CEt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zx(t){return t.split("-")[1]}var NEt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function IEt(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Xx(n*i)/i||0,y:Xx(r*i)/i||0}}function goe(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,m=o.y,y=m===void 0?0:m,w=typeof u=="function"?u({x:h,y}):{x:h,y};h=w.x,y=w.y;var b=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),A=Ol,x=Dl,T=window;if(c){var R=CC(n),k="clientHeight",_="clientWidth";if(R===Sc(n)&&(R=C0(n),Vp(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",_="scrollWidth")),R=R,i===Dl||(i===Ol||i===uu)&&s===MT){x=cu;var N=d&&R===T&&T.visualViewport?T.visualViewport.height:R[k];y-=N-r.height,y*=l?1:-1}if(i===Ol||(i===Dl||i===cu)&&s===MT){A=uu;var L=d&&R===T&&T.visualViewport?T.visualViewport.width:R[_];h-=L-r.width,h*=l?1:-1}}var M=Object.assign({position:a},c&&NEt),C=u===!0?IEt({x:h,y},Sc(n)):{x:h,y};if(h=C.x,y=C.y,l){var D;return Object.assign({},M,(D={},D[x]=E?"0":"",D[A]=b?"0":"",D.transform=(T.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",D))}return Object.assign({},M,(e={},e[x]=E?y+"px":"",e[A]=b?h+"px":"",e.transform="",e))}function REt(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:If(e.placement),variation:Zx(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,goe(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,goe(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const MEt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:REt,data:{}};var o_={passive:!0};function LEt(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Sc(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,o_)}),a&&l.addEventListener("resize",n.update,o_),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,o_)}),a&&l.removeEventListener("resize",n.update,o_)}}const DEt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:LEt,data:{}};var OEt={left:"right",right:"left",bottom:"top",top:"bottom"};function P6(t){return t.replace(/left|right|bottom|top/g,function(e){return OEt[e]})}var PEt={start:"end",end:"start"};function yoe(t){return t.replace(/start|end/g,function(e){return PEt[e]})}function SW(t){var e=Sc(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function AW(t){return Yx(C0(t)).left+SW(t).scrollLeft}function FEt(t,e){var n=Sc(t),r=C0(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=nAe();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+AW(t),y:l}}function BEt(t){var e,n=C0(t),r=SW(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=mb(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=mb(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+AW(t),l=-r.scrollTop;return Vp(i||n).direction==="rtl"&&(a+=mb(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function TW(t){var e=Vp(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function aAe(t){return["html","body","#document"].indexOf(Vf(t))>=0?t.ownerDocument.body:su(t)&&TW(t)?t:aAe(bM(t))}function mA(t,e){var n;e===void 0&&(e=[]);var r=aAe(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Sc(r),o=i?[s].concat(s.visualViewport||[],TW(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(mA(bM(o)))}function Oj(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function jEt(t,e){var n=Yx(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function boe(t,e,n){return e===QSe?Oj(FEt(t,n)):Xb(e)?jEt(e,n):Oj(BEt(C0(t)))}function $Et(t){var e=mA(bM(t)),n=["absolute","fixed"].indexOf(Vp(t).position)>=0,r=n&&su(t)?CC(t):t;return Xb(r)?e.filter(function(i){return Xb(i)&&rAe(i,r)&&Vf(i)!=="body"}):[]}function zEt(t,e,n,r){var i=e==="clippingParents"?$Et(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=boe(t,c,r);return l.top=mb(u.top,l.top),l.right=XI(u.right,l.right),l.bottom=XI(u.bottom,l.bottom),l.left=mb(u.left,l.left),l},boe(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lAe(t){var e=t.reference,n=t.element,r=t.placement,i=r?If(r):null,s=r?Zx(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Dl:l={x:o,y:e.y-n.height};break;case cu:l={x:o,y:e.y+e.height};break;case uu:l={x:e.x+e.width,y:a};break;case Ol:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?EW(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Kx:l[c]=l[c]-(e[u]/2-n[u]/2);break;case MT:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function LT(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?lEt:a,c=n.rootBoundary,u=c===void 0?QSe:c,d=n.elementContext,f=d===void 0?UE:d,h=n.altBoundary,m=h===void 0?!1:h,y=n.padding,w=y===void 0?0:y,b=sAe(typeof w!="number"?w:oAe(w,kC)),E=f===UE?cEt:UE,A=t.rects.popper,x=t.elements[m?E:f],T=zEt(Xb(x)?x:x.contextElement||C0(t.elements.popper),l,u,o),R=Yx(t.elements.reference),k=lAe({reference:R,element:A,placement:i}),_=Oj(Object.assign({},A,k)),N=f===UE?_:R,L={top:T.top-N.top+b.top,bottom:N.bottom-T.bottom+b.bottom,left:T.left-N.left+b.left,right:N.right-T.right+b.right},M=t.modifiersData.offset;if(f===UE&&M){var C=M[i];Object.keys(L).forEach(function(D){var O=[uu,cu].indexOf(D)>=0?1:-1,$=[Dl,cu].indexOf(D)>=0?"y":"x";L[D]+=C[$]*O})}return L}function HEt(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?eAe:l,u=Zx(r),d=u?a?poe:poe.filter(function(m){return Zx(m)===u}):kC,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var h=f.reduce(function(m,y){return m[y]=LT(t,{placement:y,boundary:i,rootBoundary:s,padding:o})[If(y)],m},{});return Object.keys(h).sort(function(m,y){return h[m]-h[y]})}function VEt(t){if(If(t)===wW)return[];var e=P6(t);return[yoe(t),e,yoe(e)]}function UEt(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,y=n.allowedAutoPlacements,w=e.options.placement,b=If(w),E=b===w,A=l||(E||!m?[P6(w)]:VEt(w)),x=[w].concat(A).reduce(function(X,me){return X.concat(If(me)===wW?HEt(e,{placement:me,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:y}):me)},[]),T=e.rects.reference,R=e.rects.popper,k=new Map,_=!0,N=x[0],L=0;L<x.length;L++){var M=x[L],C=If(M),D=Zx(M)===Kx,O=[Dl,cu].indexOf(C)>=0,$=O?"width":"height",U=LT(e,{placement:M,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),W=O?D?uu:Ol:D?cu:Dl;T[$]>R[$]&&(W=P6(W));var ce=P6(W),se=[];if(s&&se.push(U[C]<=0),a&&se.push(U[W]<=0,U[ce]<=0),se.every(function(X){return X})){N=M,_=!1;break}k.set(M,se)}if(_)for(var Q=m?3:1,J=function(me){var G=x.find(function(B){var z=k.get(B);if(z)return z.slice(0,me).every(function(de){return de})});if(G)return N=G,"break"},K=Q;K>0;K--){var re=J(K);if(re==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}const WEt={name:"flip",enabled:!0,phase:"main",fn:UEt,requiresIfExists:["offset"],data:{_skip:!1}};function woe(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function voe(t){return[Dl,uu,cu,Ol].some(function(e){return t[e]>=0})}function qEt(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=LT(e,{elementContext:"reference"}),a=LT(e,{altBoundary:!0}),l=woe(o,r),c=woe(a,i,s),u=voe(l),d=voe(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const GEt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qEt};function KEt(t,e,n){var r=If(t),i=[Ol,Dl].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ol,uu].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function XEt(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=eAe.reduce(function(u,d){return u[d]=KEt(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const YEt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:XEt};function ZEt(t){var e=t.state,n=t.name;e.modifiersData[n]=lAe({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const JEt={name:"popperOffsets",enabled:!0,phase:"read",fn:ZEt,data:{}};function QEt(t){return t==="x"?"y":"x"}function eSt(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,m=n.tetherOffset,y=m===void 0?0:m,w=LT(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=If(e.placement),E=Zx(e.placement),A=!E,x=EW(b),T=QEt(x),R=e.modifiersData.popperOffsets,k=e.rects.reference,_=e.rects.popper,N=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,L=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(R){if(s){var D,O=x==="y"?Dl:Ol,$=x==="y"?cu:uu,U=x==="y"?"height":"width",W=R[x],ce=W+w[O],se=W-w[$],Q=h?-_[U]/2:0,J=E===Kx?k[U]:_[U],K=E===Kx?-_[U]:-k[U],re=e.elements.arrow,X=h&&re?xW(re):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:iAe(),G=me[O],B=me[$],z=pA(0,k[U],X[U]),de=A?k[U]/2-Q-z-G-L.mainAxis:J-z-G-L.mainAxis,Y=A?-k[U]/2+Q+z+B+L.mainAxis:K+z+B+L.mainAxis,ee=e.elements.arrow&&CC(e.elements.arrow),ae=ee?x==="y"?ee.clientTop||0:ee.clientLeft||0:0,ie=(D=M==null?void 0:M[x])!=null?D:0,H=W+de-ie-ae,be=W+Y-ie,Te=pA(h?XI(ce,H):ce,W,h?mb(se,be):se);R[x]=Te,C[x]=Te-W}if(a){var Z,oe=x==="x"?Dl:Ol,te=x==="x"?cu:uu,ye=R[T],ke=T==="y"?"height":"width",we=ye+w[oe],Ae=ye-w[te],Re=[Dl,Ol].indexOf(b)!==-1,Pe=(Z=M==null?void 0:M[T])!=null?Z:0,Ce=Re?we:ye-k[ke]-_[ke]-Pe+L.altAxis,Oe=Re?ye+k[ke]+_[ke]-Pe-L.altAxis:Ae,Fe=h&&Re?AEt(Ce,ye,Oe):pA(h?Ce:we,ye,h?Oe:Ae);R[T]=Fe,C[T]=Fe-ye}e.modifiersData[r]=C}}const tSt={name:"preventOverflow",enabled:!0,phase:"main",fn:eSt,requiresIfExists:["offset"]};function nSt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function rSt(t){return t===Sc(t)||!su(t)?SW(t):nSt(t)}function iSt(t){var e=t.getBoundingClientRect(),n=Xx(e.width)/t.offsetWidth||1,r=Xx(e.height)/t.offsetHeight||1;return n!==1||r!==1}function sSt(t,e,n){n===void 0&&(n=!1);var r=su(e),i=su(e)&&iSt(e),s=C0(e),o=Yx(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Vf(e)!=="body"||TW(s))&&(a=rSt(e)),su(e)?(l=Yx(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=AW(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function oSt(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function aSt(t){var e=oSt(t);return wEt.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function lSt(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function cSt(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var xoe={placement:"bottom",modifiers:[],strategy:"absolute"};function Eoe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function uSt(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?xoe:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},xoe,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(b){var E=typeof b=="function"?b(u.options):b;y(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:Xb(a)?mA(a):a.contextElement?mA(a.contextElement):[],popper:mA(l)};var A=aSt(cSt([].concat(r,u.options.modifiers)));return u.orderedModifiers=A.filter(function(x){return x.enabled}),m(),h.update()},forceUpdate:function(){if(!f){var b=u.elements,E=b.reference,A=b.popper;if(Eoe(E,A)){u.rects={reference:sSt(E,CC(A),u.options.strategy==="fixed"),popper:xW(A)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var x=0;x<u.orderedModifiers.length;x++){if(u.reset===!0){u.reset=!1,x=-1;continue}var T=u.orderedModifiers[x],R=T.fn,k=T.options,_=k===void 0?{}:k,N=T.name;typeof R=="function"&&(u=R({state:u,options:_,name:N,instance:h})||u)}}}},update:lSt(function(){return new Promise(function(w){h.forceUpdate(),w(u)})}),destroy:function(){y(),f=!0}};if(!Eoe(a,l))return h;h.setOptions(c).then(function(w){!f&&c.onFirstUpdate&&c.onFirstUpdate(w)});function m(){u.orderedModifiers.forEach(function(w){var b=w.name,E=w.options,A=E===void 0?{}:E,x=w.effect;if(typeof x=="function"){var T=x({state:u,name:b,instance:h,options:A}),R=function(){};d.push(T||R)}})}function y(){d.forEach(function(w){return w()}),d=[]}return h}}var dSt=[DEt,JEt,MEt,tAe,YEt,WEt,tSt,_Et,GEt],fSt=uSt({defaultModifiers:dSt}),hSt="tippy-box",cAe="tippy-content",pSt="tippy-backdrop",uAe="tippy-arrow",dAe="tippy-svg-arrow",dy={passive:!0,capture:!0},fAe=function(){return document.body};function mSt(t,e){return{}.hasOwnProperty.call(t,e)}function oP(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function kW(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function hAe(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Soe(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function gSt(t,e){var n=Object.assign({},t);return e.forEach(function(r){delete n[r]}),n}function ySt(t){return t.split(/\s+/).filter(Boolean)}function jv(t){return[].concat(t)}function Aoe(t,e){t.indexOf(e)===-1&&t.push(e)}function bSt(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function wSt(t){return t.split("-")[0]}function YI(t){return[].slice.call(t)}function Toe(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function gA(){return document.createElement("div")}function DT(t){return["Element","Fragment"].some(function(e){return kW(t,e)})}function vSt(t){return kW(t,"NodeList")}function xSt(t){return kW(t,"MouseEvent")}function ESt(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function SSt(t){return DT(t)?[t]:vSt(t)?YI(t):Array.isArray(t)?t:YI(document.querySelectorAll(t))}function aP(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function koe(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function ASt(t){var e,n=jv(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function TSt(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=wSt(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,m=c==="left"?u.right.x:0,y=s.top-r+d>l,w=r-s.bottom-f>l,b=s.left-n+h>l,E=n-s.right-m>l;return y||w||b||E})}function lP(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Coe(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var df={isTouch:!1},_oe=0;function kSt(){df.isTouch||(df.isTouch=!0,window.performance&&document.addEventListener("mousemove",pAe))}function pAe(){var t=performance.now();t-_oe<20&&(df.isTouch=!1,document.removeEventListener("mousemove",pAe)),_oe=t}function CSt(){var t=document.activeElement;if(ESt(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function _St(){document.addEventListener("touchstart",kSt,dy),window.addEventListener("blur",CSt)}var NSt=typeof window<"u"&&typeof document<"u",ISt=NSt?!!window.msCrypto:!1;function pv(t){var e=t==="destroy"?"n already-":" ";return[t+"() was called on a"+e+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function Noe(t){var e=/[ \t]{2,}/g,n=/^[ \t]*/gm;return t.replace(e," ").replace(n,"").trim()}function RSt(t){return Noe(`
  %ctippy.js

  %c`+Noe(t)+`

  %c This is a development-only message. It will be removed in production.
  `)}function mAe(t){return[RSt(t),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}var OT;_e.env.NODE_ENV!=="production"&&MSt();function MSt(){OT=new Set}function Lh(t,e){if(t&&!OT.has(e)){var n;OT.add(e),(n=console).warn.apply(n,mAe(e))}}function Pj(t,e){if(t&&!OT.has(e)){var n;OT.add(e),(n=console).error.apply(n,mAe(e))}}function LSt(t){var e=!t,n=Object.prototype.toString.call(t)==="[object Object]"&&!t.addEventListener;Pj(e,["tippy() was passed","`"+String(t)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),Pj(n,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}var gAe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},DSt={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ic=Object.assign({appendTo:fAe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},gAe,DSt),OSt=Object.keys(ic),PSt=function(e){_e.env.NODE_ENV!=="production"&&bAe(e,[]);var n=Object.keys(e);n.forEach(function(r){ic[r]=e[r]})};function yAe(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=ic[s])!=null?a:o}return r},{});return Object.assign({},t,n)}function FSt(t,e){var n=e?Object.keys(yAe(Object.assign({},ic,{plugins:e}))):OSt,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Ioe(t,e){var n=Object.assign({},e,{content:hAe(e.content,[t])},e.ignoreAttributes?{}:FSt(t,e.plugins));return n.aria=Object.assign({},ic.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}function bAe(t,e){t===void 0&&(t={}),e===void 0&&(e=[]);var n=Object.keys(t);n.forEach(function(r){var i=gSt(ic,Object.keys(gAe)),s=!mSt(i,r);s&&(s=e.filter(function(o){return o.name===r}).length===0),Lh(s,["`"+r+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.",`

`,`All props: https://atomiks.github.io/tippyjs/v6/all-props/
`,"Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))})}var BSt=function(){return"innerHTML"};function Fj(t,e){t[BSt()]=e}function Roe(t){var e=gA();return t===!0?e.className=uAe:(e.className=dAe,DT(t)?e.appendChild(t):Fj(e,t)),e}function Moe(t,e){DT(e.content)?(Fj(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Fj(t,e.content):t.textContent=e.content)}function Bj(t){var e=t.firstElementChild,n=YI(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(cAe)}),arrow:n.find(function(r){return r.classList.contains(uAe)||r.classList.contains(dAe)}),backdrop:n.find(function(r){return r.classList.contains(pSt)})}}function wAe(t){var e=gA(),n=gA();n.className=hSt,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=gA();r.className=cAe,r.setAttribute("data-state","hidden"),Moe(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var a=Bj(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Moe(c,t.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild(Roe(o.arrow))):l.appendChild(Roe(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}wAe.$$tippy=!0;var jSt=1,a_=[],cP=[];function $St(t,e){var n=Ioe(t,Object.assign({},ic,yAe(Toe(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,u,d,f,h=[],m=Soe(H,n.interactiveDebounce),y,w=jSt++,b=null,E=bSt(n.plugins),A={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},x={id:w,reference:t,popper:gA(),popperInstance:b,props:n,state:A,plugins:E,clearDelayTimeouts:Ce,setProps:Oe,setContent:Fe,show:$e,hide:he,hideWithInteractivity:q,enable:Re,disable:Pe,unmount:ne,destroy:Ee};if(!n.render)return _e.env.NODE_ENV!=="production"&&Pj(!0,"render() function has not been supplied."),x;var T=n.render(x),R=T.popper,k=T.onUpdate;R.setAttribute("data-tippy-root",""),R.id="tippy-"+x.id,x.popper=R,t._tippy=x,R._tippy=x;var _=E.map(function(Se){return Se.fn(x)}),N=t.hasAttribute("aria-expanded");return ee(),Q(),W(),ce("onCreate",[x]),n.showOnCreate&&we(),R.addEventListener("mouseenter",function(){x.props.interactive&&x.state.isVisible&&x.clearDelayTimeouts()}),R.addEventListener("mouseleave",function(){x.props.interactive&&x.props.trigger.indexOf("mouseenter")>=0&&O().addEventListener("mousemove",m)}),x;function L(){var Se=x.props.touch;return Array.isArray(Se)?Se:[Se,0]}function M(){return L()[0]==="hold"}function C(){var Se;return!!((Se=x.props.render)!=null&&Se.$$tippy)}function D(){return y||t}function O(){var Se=D().parentNode;return Se?ASt(Se):document}function $(){return Bj(R)}function U(Se){return x.state.isMounted&&!x.state.isVisible||df.isTouch||u&&u.type==="focus"?0:oP(x.props.delay,Se?0:1,ic.delay)}function W(Se){Se===void 0&&(Se=!1),R.style.pointerEvents=x.props.interactive&&!Se?"":"none",R.style.zIndex=""+x.props.zIndex}function ce(Se,ze,Ie){if(Ie===void 0&&(Ie=!0),_.forEach(function(Ye){Ye[Se]&&Ye[Se].apply(Ye,ze)}),Ie){var qe;(qe=x.props)[Se].apply(qe,ze)}}function se(){var Se=x.props.aria;if(Se.content){var ze="aria-"+Se.content,Ie=R.id,qe=jv(x.props.triggerTarget||t);qe.forEach(function(Ye){var ft=Ye.getAttribute(ze);if(x.state.isVisible)Ye.setAttribute(ze,ft?ft+" "+Ie:Ie);else{var We=ft&&ft.replace(Ie,"").trim();We?Ye.setAttribute(ze,We):Ye.removeAttribute(ze)}})}}function Q(){if(!(N||!x.props.aria.expanded)){var Se=jv(x.props.triggerTarget||t);Se.forEach(function(ze){x.props.interactive?ze.setAttribute("aria-expanded",x.state.isVisible&&ze===D()?"true":"false"):ze.removeAttribute("aria-expanded")})}}function J(){O().removeEventListener("mousemove",m),a_=a_.filter(function(Se){return Se!==m})}function K(Se){if(!(df.isTouch&&(l||Se.type==="mousedown"))){var ze=Se.composedPath&&Se.composedPath()[0]||Se.target;if(!(x.props.interactive&&Coe(R,ze))){if(jv(x.props.triggerTarget||t).some(function(Ie){return Coe(Ie,ze)})){if(df.isTouch||x.state.isVisible&&x.props.trigger.indexOf("click")>=0)return}else ce("onClickOutside",[x,Se]);x.props.hideOnClick===!0&&(x.clearDelayTimeouts(),x.hide(),a=!0,setTimeout(function(){a=!1}),x.state.isMounted||G())}}}function re(){l=!0}function X(){l=!1}function me(){var Se=O();Se.addEventListener("mousedown",K,!0),Se.addEventListener("touchend",K,dy),Se.addEventListener("touchstart",X,dy),Se.addEventListener("touchmove",re,dy)}function G(){var Se=O();Se.removeEventListener("mousedown",K,!0),Se.removeEventListener("touchend",K,dy),Se.removeEventListener("touchstart",X,dy),Se.removeEventListener("touchmove",re,dy)}function B(Se,ze){de(Se,function(){!x.state.isVisible&&R.parentNode&&R.parentNode.contains(R)&&ze()})}function z(Se,ze){de(Se,ze)}function de(Se,ze){var Ie=$().box;function qe(Ye){Ye.target===Ie&&(lP(Ie,"remove",qe),ze())}if(Se===0)return ze();lP(Ie,"remove",d),lP(Ie,"add",qe),d=qe}function Y(Se,ze,Ie){Ie===void 0&&(Ie=!1);var qe=jv(x.props.triggerTarget||t);qe.forEach(function(Ye){Ye.addEventListener(Se,ze,Ie),h.push({node:Ye,eventType:Se,handler:ze,options:Ie})})}function ee(){M()&&(Y("touchstart",ie,{passive:!0}),Y("touchend",be,{passive:!0})),ySt(x.props.trigger).forEach(function(Se){if(Se!=="manual")switch(Y(Se,ie),Se){case"mouseenter":Y("mouseleave",be);break;case"focus":Y(ISt?"focusout":"blur",Te);break;case"focusin":Y("focusout",Te);break}})}function ae(){h.forEach(function(Se){var ze=Se.node,Ie=Se.eventType,qe=Se.handler,Ye=Se.options;ze.removeEventListener(Ie,qe,Ye)}),h=[]}function ie(Se){var ze,Ie=!1;if(!(!x.state.isEnabled||Z(Se)||a)){var qe=((ze=u)==null?void 0:ze.type)==="focus";u=Se,y=Se.currentTarget,Q(),!x.state.isVisible&&xSt(Se)&&a_.forEach(function(Ye){return Ye(Se)}),Se.type==="click"&&(x.props.trigger.indexOf("mouseenter")<0||o)&&x.props.hideOnClick!==!1&&x.state.isVisible?Ie=!0:we(Se),Se.type==="click"&&(o=!Ie),Ie&&!qe&&Ae(Se)}}function H(Se){var ze=Se.target,Ie=D().contains(ze)||R.contains(ze);if(!(Se.type==="mousemove"&&Ie)){var qe=ke().concat(R).map(function(Ye){var ft,We=Ye._tippy,nt=(ft=We.popperInstance)==null?void 0:ft.state;return nt?{popperRect:Ye.getBoundingClientRect(),popperState:nt,props:n}:null}).filter(Boolean);TSt(qe,Se)&&(J(),Ae(Se))}}function be(Se){var ze=Z(Se)||x.props.trigger.indexOf("click")>=0&&o;if(!ze){if(x.props.interactive){x.hideWithInteractivity(Se);return}Ae(Se)}}function Te(Se){x.props.trigger.indexOf("focusin")<0&&Se.target!==D()||x.props.interactive&&Se.relatedTarget&&R.contains(Se.relatedTarget)||Ae(Se)}function Z(Se){return df.isTouch?M()!==Se.type.indexOf("touch")>=0:!1}function oe(){te();var Se=x.props,ze=Se.popperOptions,Ie=Se.placement,qe=Se.offset,Ye=Se.getReferenceClientRect,ft=Se.moveTransition,We=C()?Bj(R).arrow:null,nt=Ye?{getBoundingClientRect:Ye,contextElement:Ye.contextElement||D()}:t,bt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(tn){var Zt=tn.state;if(C()){var ri=$(),Ne=ri.box;["placement","reference-hidden","escaped"].forEach(function(le){le==="placement"?Ne.setAttribute("data-placement",Zt.placement):Zt.attributes.popper["data-popper-"+le]?Ne.setAttribute("data-"+le,""):Ne.removeAttribute("data-"+le)}),Zt.attributes.popper={}}}},ct=[{name:"offset",options:{offset:qe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ft}},bt];C()&&We&&ct.push({name:"arrow",options:{element:We,padding:3}}),ct.push.apply(ct,(ze==null?void 0:ze.modifiers)||[]),x.popperInstance=fSt(nt,R,Object.assign({},ze,{placement:Ie,onFirstUpdate:f,modifiers:ct}))}function te(){x.popperInstance&&(x.popperInstance.destroy(),x.popperInstance=null)}function ye(){var Se=x.props.appendTo,ze,Ie=D();x.props.interactive&&Se===fAe||Se==="parent"?ze=Ie.parentNode:ze=hAe(Se,[Ie]),ze.contains(R)||ze.appendChild(R),x.state.isMounted=!0,oe(),_e.env.NODE_ENV!=="production"&&Lh(x.props.interactive&&Se===ic.appendTo&&Ie.nextElementSibling!==R,["Interactive tippy element may not be accessible via keyboard","navigation because it is not directly after the reference element","in the DOM source order.",`

`,"Using a wrapper <div> or <span> tag around the reference element","solves this by creating a new parentNode context.",`

`,"Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle","keyboard navigation.",`

`,"See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity"].join(" "))}function ke(){return YI(R.querySelectorAll("[data-tippy-root]"))}function we(Se){x.clearDelayTimeouts(),Se&&ce("onTrigger",[x,Se]),me();var ze=U(!0),Ie=L(),qe=Ie[0],Ye=Ie[1];df.isTouch&&qe==="hold"&&Ye&&(ze=Ye),ze?r=setTimeout(function(){x.show()},ze):x.show()}function Ae(Se){if(x.clearDelayTimeouts(),ce("onUntrigger",[x,Se]),!x.state.isVisible){G();return}if(!(x.props.trigger.indexOf("mouseenter")>=0&&x.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Se.type)>=0&&o)){var ze=U(!1);ze?i=setTimeout(function(){x.state.isVisible&&x.hide()},ze):s=requestAnimationFrame(function(){x.hide()})}}function Re(){x.state.isEnabled=!0}function Pe(){x.hide(),x.state.isEnabled=!1}function Ce(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Oe(Se){if(_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("setProps")),!x.state.isDestroyed){ce("onBeforeUpdate",[x,Se]),ae();var ze=x.props,Ie=Ioe(t,Object.assign({},ze,Toe(Se),{ignoreAttributes:!0}));x.props=Ie,ee(),ze.interactiveDebounce!==Ie.interactiveDebounce&&(J(),m=Soe(H,Ie.interactiveDebounce)),ze.triggerTarget&&!Ie.triggerTarget?jv(ze.triggerTarget).forEach(function(qe){qe.removeAttribute("aria-expanded")}):Ie.triggerTarget&&t.removeAttribute("aria-expanded"),Q(),W(),k&&k(ze,Ie),x.popperInstance&&(oe(),ke().forEach(function(qe){requestAnimationFrame(qe._tippy.popperInstance.forceUpdate)})),ce("onAfterUpdate",[x,Se])}}function Fe(Se){x.setProps({content:Se})}function $e(){_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("show"));var Se=x.state.isVisible,ze=x.state.isDestroyed,Ie=!x.state.isEnabled,qe=df.isTouch&&!x.props.touch,Ye=oP(x.props.duration,0,ic.duration);if(!(Se||ze||Ie||qe)&&!D().hasAttribute("disabled")&&(ce("onShow",[x],!1),x.props.onShow(x)!==!1)){if(x.state.isVisible=!0,C()&&(R.style.visibility="visible"),W(),me(),x.state.isMounted||(R.style.transition="none"),C()){var ft=$(),We=ft.box,nt=ft.content;aP([We,nt],0)}f=function(){var ct;if(!(!x.state.isVisible||c)){if(c=!0,R.offsetHeight,R.style.transition=x.props.moveTransition,C()&&x.props.animation){var Ft=$(),tn=Ft.box,Zt=Ft.content;aP([tn,Zt],Ye),koe([tn,Zt],"visible")}se(),Q(),Aoe(cP,x),(ct=x.popperInstance)==null||ct.forceUpdate(),ce("onMount",[x]),x.props.animation&&C()&&z(Ye,function(){x.state.isShown=!0,ce("onShown",[x])})}},ye()}}function he(){_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("hide"));var Se=!x.state.isVisible,ze=x.state.isDestroyed,Ie=!x.state.isEnabled,qe=oP(x.props.duration,1,ic.duration);if(!(Se||ze||Ie)&&(ce("onHide",[x],!1),x.props.onHide(x)!==!1)){if(x.state.isVisible=!1,x.state.isShown=!1,c=!1,o=!1,C()&&(R.style.visibility="hidden"),J(),G(),W(!0),C()){var Ye=$(),ft=Ye.box,We=Ye.content;x.props.animation&&(aP([ft,We],qe),koe([ft,We],"hidden"))}se(),Q(),x.props.animation?C()&&B(qe,x.unmount):x.unmount()}}function q(Se){_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("hideWithInteractivity")),O().addEventListener("mousemove",m),Aoe(a_,m),m(Se)}function ne(){_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("unmount")),x.state.isVisible&&x.hide(),x.state.isMounted&&(te(),ke().forEach(function(Se){Se._tippy.unmount()}),R.parentNode&&R.parentNode.removeChild(R),cP=cP.filter(function(Se){return Se!==x}),x.state.isMounted=!1,ce("onHidden",[x]))}function Ee(){_e.env.NODE_ENV!=="production"&&Lh(x.state.isDestroyed,pv("destroy")),!x.state.isDestroyed&&(x.clearDelayTimeouts(),x.unmount(),ae(),delete t._tippy,x.state.isDestroyed=!0,ce("onDestroy",[x]))}}function _C(t,e){e===void 0&&(e={});var n=ic.plugins.concat(e.plugins||[]);_e.env.NODE_ENV!=="production"&&(LSt(t),bAe(e,n)),_St();var r=Object.assign({},e,{plugins:n}),i=SSt(t);if(_e.env.NODE_ENV!=="production"){var s=DT(r.content),o=i.length>1;Lh(s&&o,["tippy() was passed an Element as the `content` prop, but more than","one tippy instance was created by this invocation. This means the","content element will only be appended to the last tippy instance.",`

`,"Instead, pass the .innerHTML of the element, or use a function that","returns a cloned version of the element instead.",`

`,`1) content: element.innerHTML
`,"2) content: () => element.cloneNode(true)"].join(" "))}var a=i.reduce(function(l,c){var u=c&&$St(c,r);return u&&l.push(u),l},[]);return DT(t)?a[0]:a}_C.defaultProps=ic;_C.setDefaultProps=PSt;_C.currentInput=df;Object.assign({},tAe,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});_C.setDefaultProps({render:wAe});const or=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},zSt=["onClick","onMouseenter"],HSt={key:0},VSt={key:0},USt={key:1},WSt={key:1},qSt={__name:"Mentions",props:{users:{type:Array,required:!0},mention:{type:String,default:""},inserMention:{type:Function,required:!0}},setup(t){const e=t,n=Ve(null),r=Ve(null),i=pt(()=>{var u;const l=(u=e.mention.slice(1))==null?void 0:u.toLowerCase();return e.users.filter(d=>{var y,w;const f=d.role==="viewer",h=(y=d.name)==null?void 0:y.toLowerCase().startsWith(l),m=(w=d.email)==null?void 0:w.toLowerCase().startsWith(l);return!f&&(h||m)})||[]}),s=l=>{e.inserMention(l)},o=l=>{if(l.key==="ArrowDown")r.value+=1,r.value===i.value.length&&(r.value=0);else if(l.key==="ArrowUp")r.value-=1,r.value<0&&(r.value=i.value.length-1);else if(l.key==="Enter"){const c=i.value[r.value];c&&e.inserMention(c)}},a=()=>{r.value=0};return(l,c)=>(rt(),wt("div",{class:"mentions-container",ref_key:"container",ref:n,onKeydown:mr(o,["prevent"]),onFocus:mr(a,["stop","prevent"]),tabindex:"0"},[(rt(!0),wt(xn,null,Ui(i.value,(u,d)=>(rt(),wt("div",{onClick:mr(f=>s(u),["stop","prevent"]),onMouseenter:f=>r.value=d,onMouseleave:c[0]||(c[0]=f=>r.value=null),key:u.email,class:Qr(["user-row",{selected:r.value===d}])},[u.name?(rt(),wt("div",HSt,[u.name?(rt(),wt("span",VSt,ci(u.name),1)):Xt("",!0),u.name&&u.email?(rt(),wt("span",USt," ("+ci(u.email)+")",1)):Xt("",!0)])):(rt(),wt("div",WSt,[Pt("span",null,ci(u.email),1)]))],42,zSt))),128))],544))}},GSt=or(qSt,[["__scopeId","data-v-72af6874"]]),Loe=new ni("popoverPlugin"),KSt=hi.create({name:"popoverPlugin",addOptions(){return{}},addPmPlugins(){return[new Mr({key:Loe,state:{init:()=>({}),apply:(e,n)=>{const r={...n};return e.docChanged||e.selectionSet?r.shouldUpdate=!0:r.shouldUpdate=!1,r}},view:e=>{const n=new XSt(e,this.editor);return{update:(r,i)=>{Loe.getState(r.state).shouldUpdate&&n.update(r,i)},destroy:()=>{n.destroy()}}}})]}});class XSt{constructor(e,n){Mt(this,"handleKeyDown",e=>{const n=e.key==="ArrowDown"||e.key==="ArrowUp";this.tippyInstance.state.isVisible&&n&&(e.preventDefault(),this.popover.firstChild.focus())});this.editor=n,this.view=e,this.popover=document.createElement("div"),this.popover.className="sd-editor-popover",dM(this.popover),document.body.appendChild(this.popover),this.tippyInstance=_C(this.popover,{trigger:"manual",placement:"bottom-start",interactive:!0,appendTo:document.body,arrow:!1,onShow:r=>{r.setProps({getReferenceClientRect:()=>this.popoverRect}),this.bindKeyDownEvents()},onHide:()=>{this.unbindKeyDownEvents()},theme:"sd-editor-popover"})}bindKeyDownEvents(){this.view.dom.addEventListener("keydown",this.handleKeyDown)}unbindKeyDownEvents(){this.view.dom.removeEventListener("keydown",this.handleKeyDown)}mountVueComponent(e,n={}){this.app&&this.app.unmount(),this.app=fR(e,n),this.app.mount(this.popover),this.tippyInstance.setContent(this.popover)}update(e){this.state=e.state;const n=this.isShowMentions;let r={component:null,props:null};if(this.isShowMentions){const{from:i}=this.state.selection,s=this.getMentionText(i);r={component:GSt,props:{users:this.editor.users,mention:s,inserMention:o=>{const{$from:a}=this.state.selection,l=s.length,c={...o},u=this.editor.schema.nodes.mention.create(c),d=this.state.tr.replaceWith(a.pos-l,a.pos,u);this.editor.view.dispatch(d),this.editor.view.focus()}}}}if(n&&r.component){const{to:i}=this.state.selection,{component:s,props:o}=r;this.mountVueComponent(s,o),this.showPopoverAtPosition(i)}else this.tippyInstance.hide()}showPopoverAtPosition(e){const n=this.view.coordsAtPos(e);this.popoverRect={width:0,height:0,top:n.bottom,left:n.left,bottom:n.bottom,right:n.left},this.tippyInstance.show()}getMentionText(e){const r=Math.max(0,e-20),i=this.state.doc.textBetween(r,e,`
`,"\0"),s=i.lastIndexOf("@");return s!==-1?i.substring(s):""}get isShowMentions(){const{from:e}=this.state.selection;if(e<1)return!1;const n=this.getMentionText(e),r=/(?:^|\s)@[\w]*$/;return n.match(r)&&this.state.selection.empty}destroy(){this.tippyInstance.destroy(),this.popover.remove()}}class vAe{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&!(this.regexp&&!tAt(this.search)),this.wholeWord=!!e.wholeWord,this.filter=e.filter||null,this.impl=this.valid?this.regexp?new JSt(this):new ZSt(this):YSt}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}findNext(e,n=0,r=e.doc.content.size){for(;;){if(n>=r)return null;let i=this.impl.findNext(e,n,r);if(!i||this.checkResult(e,i))return i;n=i.from+1}}findPrev(e,n=e.doc.content.size,r=0){for(;;){if(n<=r)return null;let i=this.impl.findPrev(e,n,r);if(!i||this.checkResult(e,i))return i;n=i.to-1}}checkResult(e,n){return(!this.wholeWord||Ooe(e,n.from)&&Ooe(e,n.to))&&(!this.filter||this.filter(e,n))}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}getReplacements(e,n){let i=e.doc.resolve(n.from).marksAcross(e.doc.resolve(n.to)),s=[],o=Nt.empty,a=n.from,{match:l}=n,c=l?QSt(l):[[0,n.to-n.from]],u=eAt(this.unquote(this.replace));for(let d of u)if(typeof d=="string")o=o.addToEnd(e.schema.text(d,i));else{const f=c[d.group];if(!f)continue;let h=n.matchStart+f[0],m=n.matchStart+f[1];d.copy?o=o.append(e.doc.slice(h,m).content):((o!=Nt.empty||h>a)&&(s.push({from:a,to:h,insert:new Ut(o,0,0)}),o=Nt.empty),a=m)}return(o!=Nt.empty||a<n.to)&&s.push({from:a,to:n.to,insert:new Ut(o,0,0)}),s}}const YSt=new class{findNext(){return null}findPrev(){return null}};class ZSt{constructor(e){this.query=e;let n=e.unquote(e.search);e.caseSensitive||(n=n.toLowerCase()),this.string=n}findNext(e,n,r){return Jx(e.doc,n,r,(i,s)=>{let o=Math.max(n,s),a=f0(i).slice(o-s,Math.min(i.content.size,r-s)),l=(this.query.caseSensitive?a:a.toLowerCase()).indexOf(this.string);if(l<0)return null;const u=o-s+l,d=_g(i,s,u),f=_g(i,s,u+this.string.length);return{from:d,to:f,match:null,matchStart:s}})}findPrev(e,n,r){return Jx(e.doc,n,r,(i,s)=>{let o=Math.max(s,r),a=f0(i).slice(o-s,Math.min(i.content.size,n-s));this.query.caseSensitive||(a=a.toLowerCase());let l=a.lastIndexOf(this.string);if(l<0)return null;const u=o-s+l,d=_g(i,s,u),f=_g(i,s,u+this.string.length);return{from:d,to:f,match:null,matchStart:s}})}}const xAe="g"+(/x/.unicode==null?"":"u")+(/x/.hasIndices==null?"":"d");class JSt{constructor(e){this.query=e,this.regexp=new RegExp(e.search,xAe+(e.caseSensitive?"":"i"))}findNext(e,n,r){return Jx(e.doc,n,r,(i,s)=>{let o=f0(i).slice(0,Math.min(i.content.size,r-s));this.regexp.lastIndex=n-s;let a=this.regexp.exec(o);if(!a)return null;const l=a.index,c=_g(i,s,l),u=_g(i,s,l+a[0].length);return{from:c,to:u,match:a,matchStart:s}})}findPrev(e,n,r){return Jx(e.doc,n,r,(i,s)=>{let o=f0(i).slice(0,Math.min(i.content.size,n-s)),a;for(let d=0;;){this.regexp.lastIndex=d;let f=this.regexp.exec(o);if(!f)break;a=f,d=f.index+1}if(!a)return null;const l=a.index,c=_g(i,s,l),u=_g(i,s,l+a[0].length);return{from:c,to:u,match:a,matchStart:s}})}}function QSt(t){if(t.indices)return t.indices;let e=[[0,t[0].length]];for(let n=1,r=0;n<t.length;n++){let i=t[n]?t[0].indexOf(t[n],r):-1;e.push(i<0?void 0:[i,r=i+t[n].length])}return e}function eAt(t){let e=[],n=-1;function r(i){let s=e.length-1;s>-1&&typeof e[s]=="string"?e[s]+=i:e.push(i)}for(;t.length;){let i=/\$([$&\d+])/.exec(t);if(!i)return r(t),e;if(i.index>0&&r(t.slice(0,i.index+(i[1]=="$"?1:0))),i[1]!="$"){let s=i[1]=="&"?0:+i[1];n>=s?e.push({group:s,copy:!0}):(n=s||1e3,e.push({group:s,copy:!1}))}t=t.slice(i.index+i[0].length)}return e}function tAt(t){try{return new RegExp(t,xAe),!0}catch{return!1}}const Doe=new WeakMap,CW=new Set(["run","bookmarkStart"]);function f0(t){let e=Doe.get(t);if(e)return e;let n="";for(let r=0;r<t.childCount;r++){let i=t.child(r);i.isText?n+=i.text:i.isLeaf?n+="":i.type&&CW.has(i.type.name)?n+=f0(i):n+=" "+f0(i)+" "}return Doe.set(t,n),n}function _g(t,e,n){if(n<=0)return e;const r=f0(t).length;return n>=r?e+t.content.size:jj(t,e,n)}function jj(t,e,n){if(n<=0)return e;let r=e;for(let i=0;i<t.childCount;i++){const s=t.child(i),o=r;if(s.isText){const d=s.text.length;if(n<=d)return o+n;n-=d,r+=s.nodeSize;continue}if(s.isLeaf){if(n<=1)return o+Math.min(n,1);n-=1,r+=s.nodeSize;continue}const a=s.inlineContent&&s.type&&CW.has(s.type.name),l=f0(s).length;if(a){if(n<=l)return jj(s,o+1,n);n-=l,r+=s.nodeSize;continue}const c=l+2,u=n-1;if(u<0)return o;if(u<=l)return jj(s,o+1,u);if(u===l+1)return o+s.nodeSize;n-=c,r+=s.nodeSize}return e+t.content.size}function Jx(t,e,n,r,i=0){const s=t.inlineContent&&t.type&&CW.has(t.type.name);if(t.inlineContent&&!s)return r(t,i);if(!t.isLeaf)if(e>n)for(let o=t.childCount-1,a=i+t.content.size;o>=0&&a>n;o--){let l=t.child(o);if(a-=l.nodeSize,a<e){let c=Jx(l,e,n,r,a+1);if(c!=null)return c}}else for(let o=0,a=i;o<t.childCount&&a<n;o++){let l=t.child(o),c=a;if(a+=l.nodeSize,a>e){let u=Jx(l,e,n,r,c+1);if(u!=null)return u}}return null}function Ooe(t,e){let n=t.doc.resolve(e),r=n.nodeBefore,i=n.nodeAfter;return!r||!i||!r.isText||!i.isText?!0:!new RegExp("\\p{L}$","u").test(r.text)||!new RegExp("^\\p{L}","u").test(i.text)}class uP{constructor(e,n,r,i){this.query=e,this.range=n,this.highlight=r,this.deco=i}}function dP(t,e,n,r=!0){if(!e.valid)return An.empty;let i=[],s=t.selection;for(let o=n?n.from:0,a=n?n.to:t.doc.content.size;;){let l=e.findNext(t,o,a);if(!l)break;let c=l.from==s.from&&l.to==s.to?"ProseMirror-active-search-match":"ProseMirror-search-match";const u=r?{class:c}:{};i.push(Qn.inline(l.from,l.to,u)),o=l.to}return An.create(t.doc,i)}const yA=new ni("search");function nAt(t={}){return new Mr({key:yA,state:{init(e,n){let r=t.initialQuery||new vAe({search:""}),i=t.initialRange||null;const s=t.initialHighlight??!0;return new uP(r,i,s,dP(n,r,i,s))},apply(e,n,r,i){let s=e.getMeta(yA);if(s){const o=typeof s.highlight=="boolean"?s.highlight:!0;return new uP(s.query,s.range,o,dP(i,s.query,s.range,o))}if(e.docChanged||e.selectionSet){let o=n.range;if(o){let l=e.mapping.map(o.from,1),c=e.mapping.map(o.to,-1);o=l<c?{from:l,to:c}:null}const a=typeof n.highlight=="boolean"?n.highlight:!0;n=new uP(n.query,o,a,dP(i,n.query,o,a))}return n}},props:{decorations:e=>yA.getState(e).deco}})}function Poe(t){let e=yA.getState(t);return e?e.deco:An.empty}function rAt(t,e,n=null,r={}){if(r!=null&&(typeof r!="object"||Array.isArray(r)))throw new TypeError("setSearchState options must be an object");const i=typeof(r==null?void 0:r.highlight)=="boolean"?r.highlight:!0;return t.setMeta(yA,{query:e,range:n,highlight:i})}const iAt=t=>Object.prototype.toString.call(t)==="[object RegExp]",sAt=hi.create({addStorage(){return{searchResults:[]}},addPmPlugins(){const t=this.editor,e=this.storage,n=new Mr({key:new ni("customSearchHighlights"),props:{decorations(r){if(!t)return null;const i=e==null?void 0:e.searchResults;if(!(i!=null&&i.length))return null;const s=i.map(o=>Qn.inline(o.from,o.to,{id:`search-match-${o.id}`}));return An.create(r.doc,s)}}});return[nAt(),n]},addCommands(){return{goToFirstMatch:()=>(({state:t,editor:e,dispatch:n})=>{var c;const r=Poe(t);if(!r)return!1;const i=r.find();if(!(i!=null&&i.length))return!1;const s=i[0];e.view.focus();const o=t.tr.setSelection(Vt.create(t.doc,s.from,s.to)).scrollIntoView();n&&n(o);const a=e.presentationEditor;if(a&&typeof a.scrollToPosition=="function"&&a.scrollToPosition(s.from,{block:"center"}))return!0;const l=e.view.domAtPos(s.from);return(c=l==null?void 0:l.node)==null||c.scrollIntoView(!0),!0}),search:(t,e={})=>(({state:n,dispatch:r})=>{if(e!=null&&(typeof e!="object"||Array.isArray(e)))throw new TypeError("Search options must be an object");const i=typeof(e==null?void 0:e.highlight)=="boolean"?e.highlight:!0;let s,o=!1,a=!1;const l=!1;if(iAt(t)){const y=t;a=!0,s=y.source,o=!y.flags.includes("i")}else if(typeof t=="string"&&/^\/(.+)\/([gimsuy]*)$/.test(t)){const[,y,w]=t.match(/^\/(.+)\/([gimsuy]*)$/);a=!0,s=y,o=!w.includes("i")}else s=String(t);const c=new vAe({search:s,caseSensitive:o,regexp:a,wholeWord:l}),u=rAt(n.tr,c,null,{highlight:i});r(u);const d=n.apply(u),f=Poe(d),m=(f?f.find():[]).map(y=>({from:y.from,to:y.to,text:d.doc.textBetween(y.from,y.to),id:Ts()}));return this.storage.searchResults=m,m}),goToSearchResult:t=>(({state:e,dispatch:n,editor:r})=>{const{from:i,to:s}=t;r.view.focus();const o=e.tr.setSelection(Vt.create(e.doc,i,s)).scrollIntoView();n&&n(o);const a=r.presentationEditor;if(a&&typeof a.scrollToPosition=="function"&&a.scrollToPosition(i,{block:"center"}))return!0;const{node:l}=r.view.domAtPos(i);return l!=null&&l.scrollIntoView&&l.scrollIntoView({block:"center",inline:"nearest"}),!0})}}}),fP=new ni("node-resizer"),oAt=(t=["image"],e)=>{let n={dragging:!1,startX:0,startWidth:0,handle:null,pos:null,resizableElement:null,aspectRatio:1},r=null,i=null,s=null,o=null,a=null,l=null;return new Mr({key:fP,state:{init(){return An.empty},apply(b,E,A,x){var _,N;if(b.getMeta(fP)||typeof document>"u"||e.options.isHeadless)return E;if(!e.options.isHeaderOrFooter&&(e.options.documentMode==="viewing"||!e.isEditable))return An.empty;const{selection:T}=x,R=T.node;if(!R||!t.includes(R.type.name)||((_=R.attrs)==null?void 0:_.vmlWatermark)===!0)return An.empty;const k=[];return t.includes((N=T.node)==null?void 0:N.type.name)&&k.push(Qn.node(T.from,T.to,{nodeName:"span",class:"sd-editor-resizable-wrapper","data-pos":T.from})),An.create(x.doc,k)}},props:{decorations(b){return this.getState(b)}},view(b){return i=b,s=E=>{!E.target.closest(".sd-editor-resizable-wrapper")&&!E.target.closest(".sd-editor-resize-container")&&u()},document.addEventListener("click",s),o=E=>{if(E.target.closest(".sd-editor-resize-handle"))return E.preventDefault(),E.stopPropagation(),f(i,E,E.target),!0},document.addEventListener("mousedown",o),a=()=>{l&&r&&d(l)},window.addEventListener("scroll",a,!0),{update(E,A){const{selection:x}=E.state,T=A.selection;(x.from!==T.from||x.to!==T.to)&&setTimeout(()=>{const R=i==null?void 0:i.dom,k=R==null?void 0:R.querySelector(".sd-editor-resizable-wrapper");k?c(E,k):u()},10)},destroy(){u(),y(),s&&(document.removeEventListener("click",s),s=null),o&&(document.removeEventListener("mousedown",o),o=null),a&&(window.removeEventListener("scroll",a,!0),a=null),i=null}}}});function c(b,E){var R;u();const A=Number.parseInt(E.getAttribute("data-pos"),10),x=b.state.doc.nodeAt(A);if(!t.includes(x==null?void 0:x.type.name)||((R=x==null?void 0:x.attrs)==null?void 0:R.vmlWatermark)===!0)return;l=E,r=document.createElement("div"),r.className="sd-editor-resize-container",r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex="1000";const T=["nw","ne","sw","se"];for(const k of T){const _=document.createElement("div");_.className=`sd-editor-resize-handle sd-editor-resize-handle-${k}`,_.setAttribute("data-handle",k),_.setAttribute("data-pos",A),_.style.pointerEvents="auto",r.appendChild(_)}dM(r),document.body.appendChild(r),d(E)}function u(){r!=null&&r.parentNode&&(r.parentNode.removeChild(r),r=null),l=null}function d(b){if(!r||!b)return;const E=b.getBoundingClientRect(),A=window.pageYOffset||document.documentElement.scrollTop,x=window.pageXOffset||document.documentElement.scrollLeft;r.style.left=`${E.left+x}px`,r.style.top=`${E.top+A}px`,r.style.width=`${E.width}px`,r.style.height=`${E.height}px`}function f(b,E,A){var _;if(!b.hasFocus())return;const x=A.getAttribute("data-handle"),T=Number.parseInt(A.getAttribute("data-pos"),10);if(b.state.selection.from!==T||!t.includes((_=b.state.selection.node)==null?void 0:_.type.name))return;const R=b.nodeDOM(T);if(!R)return;const k=R.getBoundingClientRect();n={dragging:!0,startX:E.clientX,startY:E.clientY,startWidth:k.width,startHeight:k.height,handle:x,pos:T,resizableElement:R,aspectRatio:k.width/k.height},document.addEventListener("mousemove",h),document.addEventListener("mouseup",m),document.body.style.cursor=w(x),document.body.style.userSelect="none"}function h(b){if(!n.dragging)return;b.preventDefault(),b.stopPropagation();let E=b.clientX-n.startX;n.handle.includes("w")&&(E=-E);const A=Math.max(20,n.startWidth+E);n.resizableElement&&(n.resizableElement.style.width=`${A}px`,n.resizableElement.style.height="auto",d(n.resizableElement))}function m(b){if(!n.dragging)return;y();let E=b.clientX-n.startX;n.handle.includes("w")&&(E=-E);const A=Math.max(20,n.startWidth+E),x=A/n.aspectRatio;if(i&&n.pos<i.state.doc.content.size){const T=i.state.tr,R=T.doc.nodeAt(n.pos);if(t.includes(R==null?void 0:R.type.name)){const k={...R.attrs,size:{...R.attrs.size,width:Math.round(A),height:Math.round(x)}};T.setNodeMarkup(n.pos,null,k),T.setMeta(fP,{action:"resize"}),i.dispatch(T)}}n={dragging:!1,startX:0,startY:0,startWidth:0,startHeight:0,handle:null,pos:null,resizableElement:null,aspectRatio:1}}function y(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""}function w(b){switch(b){case"nw":case"se":return"nwse-resize";case"ne":case"sw":return"nesw-resize";default:return"default"}}},EAe=hi.create({name:"nodeResizer",addOptions(){return{}},addPmPlugins(){return this.editor.options.isHeadless||!(typeof document<"u")?[]:[oAt(["image"],this.editor)]}}),aAt=Tr.create({name:"permStart",group:"inline",inline:!0,renderDOM(){return["span",{style:"display: none;"}]},addAttributes(){return{id:{default:null},edGrp:{default:null},ed:{default:null},colFirst:{default:null},colLast:{default:null}}}}),lAt=Tr.create({name:"permEnd",group:"inline",inline:!0,renderDOM(){return["span",{style:"display: none;"}]},addAttributes(){return{id:{default:null},edGrp:{default:null},displacedByCustomXml:{default:null}}}}),PT=()=>[zSe,NEe,WEe,IEe,REe,Mve,sSe,HSe,KSe,iSe,GSe,qEe,MEe,$Se,WSe,JSe,KSt,CSe,qSe,LEe,fSe,pSe,mSe,hSe,ySe,DEe,XSe,YSe,ZSe,FEe,kSe,EAe,USe,jSe,BSe],_W=()=>[zSe,C2t,NEe,$1t,z1t,H1t,WEe,IEe,REe,Mve,sSe,HSe,KSe,iSe,Q1t,ext,_1t,Xvt,GSe,X1t,N2t,qEe,MEe,$Se,WSe,LEe,dlt,Dvt,fSe,pSe,mSe,hSe,ySe,DEe,kSe,g2t,y2t,CSe,$lt,Ovt,oEt,XSe,YSe,ZSe,V1t,qSe,G2t,FEe,Fvt,Bvt,$vt,b2t,w2t,E2t,S2t,A2t,T2t,sAt,Zvt,Qvt,o1t,h1t,p1t,EAe,USe,aEt,O2t,F2t,aAt,lAt,jSe,BSe],cAt=(t,e)=>{let n=t.replace(/[^0-9.]/g,"");return n=parseFloat(n),isNaN(n)&&(n=e),n=parseFloat(n),n},uAt=(t,e,n)=>{let r,i,s,o=0;n||(n={});const a=()=>{o=n.leading===!1?0:Date.now(),r=null,s=t(...i),r||(i=null)},l=(...c)=>{const u=Date.now();!o&&n.leading===!1&&(o=u);const d=e-(u-o);return i=c,d<=0||d>e?(r&&(clearTimeout(r),r=null),o=u,s=t(...c),r||(i=null)):!r&&n.trailing!==!1&&(r=setTimeout(a,d)),s};return l.cancel=function(){clearTimeout(r),o=0,r=i=null},l},pr=t=>{var ie;if(!["button","options","separator","dropdown","overflow"].includes(t.type))throw new Error("Invalid toolbar item type - "+t.type);if(t.type==="button"&&!t.defaultLabel&&!t.icon)throw new Error("Toolbar button item needs either icon or label - "+t.name);if(!t.name)throw new Error("Invalid toolbar item name - "+t.name);const n=Ve(Ts()),r=t.type,i=Ve(t.name),s=t.command,o=t.noArgumentCommand,a=Ve(t.icon),l=Ve(t.group||"center"),c=Ve(t.allowWithoutEditor),u=Ve(t.attributes||{}),d=t.disabled||!1,f=Ve(t.disabled),h=Ve(!1),m=Ve(!1),y=Ve(t.style),w=Ve(t.isNarrow),b=Ve(t.isWide),E=Ve(t.minWidth),A=Ve(t.suppressActiveHighlight||!1),x=Ve(t.argument),T=Ve(null),R=Ve(null),k=Ve(t.iconColor),_=Ve(t.hasCaret),N=!!t.restoreEditorFocus,L=Ve(t.dropdownStyles),M=Ve(t.tooltip),C=Ve(t.tooltipVisible),D=Ve(t.tooltipTimeout),O=Ve(t.defaultLabel),$=Ve(t.label),U=Ve(t.hideLabel),W=Ve(t.inlineTextInputVisible),ce=Ve(t.hasInlineTextInput),se=Ve(t.markName),Q=Ve(t.labelAttr),J=Ve(t.selectedValue),K=Ve(t.dropdownValueKey),re=Ve(t.inputRef||null),X=Ve([]);if(t.options){if(!Array.isArray(t.options))throw new Error("Invalid toolbar item options - "+t.options);(ie=X.value)==null||ie.push(...t.options)}const me=(H={},...be)=>{de(H,...be),!A.value&&(h.value=!0)},G=()=>{Y(),h.value=!1},B=H=>{f.value=H},z=()=>{f.value=d},de=t.onActivate||(()=>null),Y=t.onDeactivate||(()=>null),ee=()=>{const H={};return Object.keys(ae).forEach(be=>{ae[be].value!==void 0&&(H[be]=ae[be].value)}),H},ae={id:n,name:i,type:r,command:s,noArgumentCommand:o,icon:a,tooltip:M,group:l,attributes:u,disabled:f,active:h,expand:m,nestedOptions:X,style:y,isNarrow:w,isWide:b,minWidth:E,argument:x,parentItem:R,iconColor:k,hasCaret:_,dropdownStyles:L,tooltipVisible:C,tooltipTimeout:D,defaultLabel:O,label:$,hideLabel:U,inlineTextInputVisible:W,hasInlineTextInput:ce,restoreEditorFocus:N,markName:se,labelAttr:Q,childItem:T,allowWithoutEditor:c,dropdownValueKey:K,selectedValue:J,inputRef:re};return{...ae,unref:ee,activate:me,deactivate:G,setDisabled:B,resetDisabled:z,onActivate:de,onDeactivate:Y}},dAt="https://sd-dev-express-gateway-i6xtm.ondigitalocean.app/insights",SAe="You are an expert copywriter and you are immersed in a document editor. You are to provide document related text responses based on the user prompts. Only write what is asked for. Do not provide explanations. Try to keep placeholders as short as possible. Do not output your prompt. Your instructions are: ";async function AAe(t,e={}){const n=e.apiKey,r=e.endpoint||dAt;try{const i={"Content-Type":"application/json"};n&&(i["x-api-key"]=n);const s=await fetch(r,{method:"POST",headers:i,body:JSON.stringify(t)});if(!s.ok){const o=await s.text();throw new Error(`Harbour API error: ${s.status} - ${o}`)}return s}catch(i){throw console.error("Error calling Harbour API:",i),i}}async function TAe(t,e,n){const r=t.getReader(),i=new TextDecoder;let s="",o="";try{for(;;){const{done:l,value:c}=await r.read();if(l){typeof n=="function"&&n();break}const u=i.decode(c,{stream:!0});typeof e=="function"&&e(u)}let a=fAt(o);return a!==null&&(s=a),s||""}catch(a){throw console.error("Error reading stream:",a),a}finally{r.releaseLock()}}function fAt(t){try{const e=/```json\s*\n([\s\S]*?)\n\s*```/,n=t.match(e);if(n&&n[1]){const r=JSON.parse(n[1]);if(r.custom_prompt&&r.custom_prompt.value!==void 0)return r.custom_prompt.value||""}return null}catch{return null}}async function hAt(t,e={},n,r){if(!t)throw new Error("Prompt is required for text generation");const i={stream:!0,context:SAe,doc_text:"",insights:[{type:"custom_prompt",name:"text_generation",message:`Generate text based on the following prompt: ${t}`}]};e.documentXml&&(i.document_content=e.documentXml);const s=await AAe(i,e.config||{});return s.body?await TAe(s.body,n,r):""}async function pAt(t,e="",n={},r,i){if(!t)throw new Error("Text is required for rewriting");const s=e?`Rewrite the following text: "${t}" using these instructions: ${e}`:`Rewrite the following text: "${t}"`,a=await AAe({stream:!0,context:SAe,insights:[{type:"custom_prompt",name:"text_rewrite",message:s}]},n.config||{});return a.body?await TAe(a.body,r,i):""}const mAt={rules:[{name:"bold",pattern:/\*\*(.*?)\*\*/g,transform:(t,e)=>({type:"text",marks:[{type:"bold"}],text:e})},{name:"italic",pattern:/\*(.*?)\*/g,transform:(t,e)=>({type:"text",marks:[{type:"italic"}],text:e})},{name:"underline",pattern:/<(?:u|ins)>(.*?)<\/(?:u|ins)>/g,transform:(t,e)=>({type:"text",marks:[{type:"underline"}],text:e})}]};function gAt(t){try{let e=t.state.doc;const n=e.textContent||"";if(!n)return;mAt.rules.forEach(r=>{r.pattern.lastIndex=0;const i=[];let s;for(;(s=r.pattern.exec(n))!==null;)i.push({rule:r,startPos:s.index,endPos:s.index+s[0].length,originalText:s[0],contentText:s[1]});i.sort((o,a)=>a.startPos-o.startPos);for(const o of i){const{startPos:a,endPos:l,originalText:c,contentText:u}=o;try{let d=t.state.tr;const f=r.transform(c,u,t),h=[];if(e.nodesBetween(a,Math.min(l,e.content.size),(m,y)=>(m.isText&&h.push({node:m,pos:y}),!0)),h.length>0){let m=!1,y=-1,w=-1;for(let b=0;b<h.length;b++){const E=h[b],A=E.node.text||"",x=E.pos;if(A.includes(c)){const T=A.indexOf(c);y=x+T,w=y+c.length,m=!0;break}}if(!m){let b="",E=[],A=h[0].pos;for(const T of h){const R=T.node.text||"",k=T.pos-A;for(let _=0;_<R.length;_++)E.push(k+_);b+=R}const x=b.indexOf(c);if(x>=0){y=A+E[x];const T=x+c.length-1;w=A+(E[T]||0)+1,m=!0}}if(m){const b=f.marks?f.marks.map(E=>t.schema.marks[E.type].create(E.attrs)):[];d=d.delete(y,w),d=d.insert(y,t.schema.text(f.text,b)),d.docChanged&&(t.view.dispatch(d),e=t.state.doc)}}}catch(d){console.error("Error processing match:",d)}}})}catch(e){console.error("Error formatting document:",e)}}const yAt=`<!-- @note: includes color gradient for inline svg AI Writer -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
    <linearGradient id="gradient" x1="125%" y1="50%" x2="-25%" y2="50%">
        <stop offset="-20%" stop-color="rgba(218, 215, 118, 0.5)" />
        <stop offset="30%" stop-color="rgb(191, 100, 100)" />
        <stop offset="60%" stop-color="rgb(77, 82, 217)" />
        <stop offset="150%" stop-color="rgb(255, 219, 102)" />
    </linearGradient>
    <path fill="url(#gradient)" d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1 .8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/>
</svg>`,bAt=`<!-- @note: includes color gradient for inline svg AI Writer -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
  <defs>
    <linearGradient id="gradient" x1="125%" y1="50%" x2="-25%" y2="50%">
      <stop offset="-20%" stop-color="rgba(218, 215, 118, 0.5)" />
      <stop offset="30%" stop-color="rgb(191, 100, 100)" />
      <stop offset="60%" stop-color="rgb(77, 82, 217)" />
      <stop offset="150%" stop-color="rgb(255, 219, 102)" />
    </linearGradient>
  </defs>
  <path fill="url(#gradient)" d="M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"/>
</svg>`,wAt={class:"ai-user-input-field"},vAt=["innerHTML"],xAt=["placeholder"],EAt={class:"ai-loader"},SAt=["innerHTML"],AAt={__name:"AIWriter",props:{selectedText:{type:String,required:!0},handleClose:{type:Function,required:!0},editor:{type:Object,required:!0},apiKey:{type:String},endpoint:{type:String,required:!1}},setup(t){const e=t,n=Ve(null),r=Ve(null),i=M=>{r.value&&!r.value.contains(M.target)&&(f.value||e.editor.commands.removeAiMark(),e.handleClose())},s=Ve(null),o=()=>{e.selectedText&&(n.value={...e.editor.state.selection,from:e.editor.state.selection.from,to:e.editor.state.selection.to},e.editor.commands.setMeta("storedSelection",n.value),e.editor.commands.insertAiMark())},a=()=>{setTimeout(()=>{gi(()=>{s.value&&s.value.focus()})},0)},l=()=>{document.addEventListener("mousedown",i),document.addEventListener("keydown",u,!0)},c=()=>{document.removeEventListener("mousedown",i),document.removeEventListener("keydown",u,!0)};Ur(()=>{o(),a(),l()}),Gk(()=>{f.value||e.editor.commands.removeAiMark(),c()});const u=M=>{s.value&&M.target===s.value&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(M.key)&&M.stopPropagation()},d=pt(()=>e.selectedText?"Insert prompt to update text":"Insert prompt to generate text"),f=Ve(!1),h=Ve(""),m=Ve(""),y=Ve(!1),w=Ve(""),b=Ve(!1),E=Ve(!1),A=pt(()=>{var M,C;return((C=(M=e.editor).isInSuggestingMode)==null?void 0:C.call(M))||!1}),x=()=>{try{return e.editor.state.doc.textContent||""}catch(M){return console.error("Error getting document XML:",M),""}},T=async M=>{try{if(e.editor.commands.removeAiNode("aiLoaderNode"),e.selectedText&&!y.value){if(e.editor.commands.removeAiMark(),e.editor.commands.clearAiHighlightStyle(),n.value){const{state:O}=e.editor,{from:$,to:U}=n.value,W=O.tr.setSelection(Vt.create(O.doc,$,U));e.editor.view.dispatch(W)}else console.warn("[AIWriter] No stored selection to restore");e.editor.commands.deleteSelection(),y.value=!0}if(M==null||M==="")return;const C=String(M),D={type:"text",marks:[{type:"aiAnimationMark",attrs:{class:"sd-ai-text-appear",dataMarkId:`ai-animation-${Date.now()}`}}],text:C};e.editor.commands.insertContent(D),E.value=!0,b.value||await R(),e.handleClose()}catch(C){console.error("Error handling text chunk:",C)}},R=async()=>{if(!b.value)try{b.value=!0,E.value=!1,await gi(),gAt(e.editor),E.value&&(E.value=!1,await R())}finally{b.value=!1}},k=async()=>{(E.value||b.value)&&(E.value=!0,await new Promise(M=>{const C=()=>{!b.value&&!E.value?M():setTimeout(C,100)};C()})),await R(),setTimeout(()=>{e.editor.commands.removeAiMark("aiAnimationMark"),e.editor.commands.removeAiMark()},1e3)},_=async()=>{h.value="",y.value=!1,w.value="",f.value=!0;try{e.handleClose(),e.selectedText?(e.editor.commands.updateAiHighlightStyle("sd-ai-highlight-pulse"),e.editor.commands.removeSelectionAfterAiPulse()):e.editor.commands.insertContent({type:"aiLoaderNode"}),A.value&&e.editor.commands.enableTrackChanges();const C={docText:"",documentXml:x(),config:{apiKey:e.apiKey,endpoint:e.endpoint}};e.selectedText?await pAt(e.selectedText,m.value,C,T,k):await hAt(m.value,C,T,k)}catch(M){console.error("AI generation error:",M),h.value=M.message||"An error occurred"}finally{m.value="",A.value&&e.editor.commands.disableTrackChanges(),f.value=!1,y.value=!1}},N=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),_())},L=M=>{h.value&&(h.value=""),m.value=M.target.value};return(M,C)=>(rt(),wt("div",{class:"ai-writer prosemirror-isolated",ref_key:"aiWriterRef",ref:r,onMousedown:C[1]||(C[1]=mr(()=>{},["stop"]))},[Pt("div",wAt,[Pt("span",{class:"ai-textarea-icon",innerHTML:Ct(yAt)},null,8,vAt),wc(Pt("textarea",{ref_key:"editableRef",ref:s,class:"ai-textarea",placeholder:d.value,onKeydown:N,onInput:L,"onUpdate:modelValue":C[0]||(C[0]=D=>m.value=D),rows:"4"},null,40,xAt),[[Mb,m.value]])]),Pt("div",EAt,[m.value?(rt(),wt("span",{key:0,class:"ai-textarea-icon ai-submit-button",onClick:mr(_,["stop"]),innerHTML:Ct(bAt)},null,8,SAt)):Xt("",!0)])],544))}},NW=or(AAt,[["__scopeId","data-v-5bf16391"]]),TAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 64C0 46.3 14.3 32 32 32l48 0 16 0 128 0c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128L96 480l-16 0-48 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l16 0 0-160L48 96 32 96C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64L112 96l0 128 112 0zM112 288l0 128 144 0c35.3 0 64-28.7 64-64s-28.7-64-64-64l-32 0-112 0z"/></svg>',kAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M128 64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-58.7 0L160 416l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l58.7 0L224 96l-64 0c-17.7 0-32-14.3-32-32z"/></svg>',CAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M16 64c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-16 0 0 128c0 53 43 96 96 96s96-43 96-96l0-128-16 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-16 0 0 128c0 88.4-71.6 160-160 160s-160-71.6-160-160L64 96 48 96C30.3 96 16 81.7 16 64zM0 448c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32z"/></svg>',_At='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"/></svg>',NAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M24 56c0-13.3 10.7-24 24-24l32 0c13.3 0 24 10.7 24 24l0 120 16 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l16 0 0-96-8 0C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432l33.2 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-88 0c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM224 64l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>',IAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/></svg>',$j='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>',RAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M288 64c0 17.7-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l224 0c17.7 0 32 14.3 32 32zm0 256c0 17.7-14.3 32-32 32L32 352c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zM0 192c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 224c-17.7 0-32-14.3-32-32zM448 448c0 17.7-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/></svg>',MAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 64c0-17.7-14.3-32-32-32L128 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32zm96 128c0-17.7-14.3-32-32-32L32 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32zM0 448c0 17.7 14.3 32 32 32l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 416c-17.7 0-32 14.3-32 32zM352 320c0-17.7-14.3-32-32-32l-192 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32z"/></svg>',LAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M448 64c0 17.7-14.3 32-32 32L192 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zm0 256c0 17.7-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zM0 192c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 224c-17.7 0-32-14.3-32-32zM448 448c0 17.7-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/></svg>',DAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M448 64c0-17.7-14.3-32-32-32L32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32zm0 256c0-17.7-14.3-32-32-32L32 288c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32zM0 192c0 17.7 14.3 32 32 32l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 160c-17.7 0-32 14.3-32 32zM448 448c0-17.7-14.3-32-32-32L32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32z"/></svg>',OAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 64C0 46.3 14.3 32 32 32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64zM192 192c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 96l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zM0 448c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32zM127.8 268.6L25.8 347.9C15.3 356.1 0 348.6 0 335.3L0 176.7c0-13.3 15.3-20.8 25.8-12.6l101.9 79.3c8.2 6.4 8.2 18.9 0 25.3z"/></svg>',PAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 64C0 46.3 14.3 32 32 32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64zM192 192c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 96l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zM0 448c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32zM.2 268.6c-8.2-6.4-8.2-18.9 0-25.3l101.9-79.3c10.5-8.2 25.8-.7 25.8 12.6l0 158.6c0 13.3-15.3 20.8-25.8 12.6L.2 268.6z"/></svg>',FAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0L352 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 192c-35.3 0-64-28.7-64-64L0 64zM160 352c0-17.7 14.3-32 32-32l0-16c0-44.2 35.8-80 80-80l144 0c17.7 0 32-14.3 32-32l0-32 0-90.5c37.3 13.2 64 48.7 64 90.5l0 32c0 53-43 96-96 96l-144 0c-8.8 0-16 7.2-16 16l0 16c17.7 0 32 14.3 32 32l0 128c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-128z"/></svg>',BAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L355.7 253.5 400.2 96 503 96 497 120.2c-4.3 17.1 6.1 34.5 23.3 38.8s34.5-6.1 38.8-23.3l11-44.1C577.6 61.3 554.7 32 523.5 32L376.1 32l-.3 0L204.5 32c-22 0-41.2 15-46.6 36.4l-6.3 25.2L38.8 5.1zm168 131.7c.1-.3 .2-.7 .3-1L217 96l116.7 0L301.3 210.8l-94.5-74.1zM243.3 416L192 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-42.2 0 17.6-62.1L272.9 311 243.3 416z"/></svg>',jAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"/></svg>',$At='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"/></svg>',zAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"/></svg>',HAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM305 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47z"/></svg>',VAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/></svg>',Foe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l293.1 0c-3.1-8.8-3.7-18.4-1.4-27.8l15-60.1c2.8-11.3 8.6-21.5 16.8-29.7l40.3-40.3c-32.1-31-75.7-50.1-123.9-50.1l-91.4 0zm435.5-68.3c-15.6-15.6-40.9-15.6-56.6 0l-29.4 29.4 71 71 29.4-29.4c15.6-15.6 15.6-40.9 0-56.6l-14.4-14.4zM375.9 417c-4.1 4.1-7 9.2-8.4 14.9l-15 60.1c-1.4 5.5 .2 11.2 4.2 15.2s9.7 5.6 15.2 4.2l60.1-15c5.6-1.4 10.8-4.3 14.9-8.4L576.1 358.7l-71-71L375.9 417z"/></svg>',Boe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/></svg>',UAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"/></svg>',WAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416 32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-1.8 0 18-48 159.6 0 18 48-1.8 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-25.8 0L254 52.8zM279.8 304l-111.6 0L224 155.1 279.8 304z"/></svg>',qAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64L0 320l384 0 0-160-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM0 416l64 0 0-64L0 352l0 64zm288 32l-80 0 0 64 80 0 0-64zm-112 0l-80 0 0 64 80 0 0-64zM64 448L0 448c0 35.3 28.7 64 64 64l0-64zm256 0l0 64c35.3 0 64-28.7 64-64l-64 0zm64-32l0-64-64 0 0 64 64 0z"/></svg>',kAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c0 0 0 0 0 0s0 0 0 0s0 0 0 0c0 0 0 0 0 0l.3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>',GAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"/></svg>',ZI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>',IW='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>',KAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-128c0-17.7-14.3-32-32-32L352 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"/></svg>',CAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"/></svg>',XAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"/></svg>',_Ae='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/></svg>',YAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M177.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L17.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L177.9 494.1z"/></svg>',ZAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M339.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L568.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S517.7-4.4 499.1 9.6L262.4 187.2c-24 18-38.2 46.1-38.4 76.1L339.3 367.1zm-19.6 25.4l-116-104.4C143.9 290.3 96 339.6 96 400c0 3.9 .2 7.8 .6 11.6C98.4 429.1 86.4 448 68.8 448L64 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg>',JAt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M315 315l158.4-215L444.1 70.6 229 229 315 315zm-187 5s0 0 0 0l0-71.7c0-15.3 7.2-29.6 19.5-38.6L420.6 8.4C428 2.9 437 0 446.2 0c11.4 0 22.4 4.5 30.5 12.6l54.8 54.8c8.1 8.1 12.6 19 12.6 30.5c0 9.2-2.9 18.2-8.4 25.6L334.4 396.5c-9 12.3-23.4 19.5-38.6 19.5L224 416l-25.4 25.4c-12.5 12.5-32.8 12.5-45.3 0l-50.7-50.7c-12.5-12.5-12.5-32.8 0-45.3L128 320zM7 466.3l63-63 70.6 70.6-31 31c-4.5 4.5-10.6 7-17 7L24 512c-13.3 0-24-10.7-24-24l0-4.7c0-6.4 2.5-12.5 7-17z"/></svg>
`,NAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.7-53.3L160 80l-53.3-26.7L80 0 53.3 53.3 0 80l53.3 26.7L80 160zm352 128l-26.7 53.3L352 368l53.3 26.7L432 448l26.7-53.3L512 368l-53.3-26.7L432 288zm70.6-193.8L417.8 9.4C411.5 3.1 403.3 0 395.2 0c-8.2 0-16.4 3.1-22.6 9.4L9.4 372.5c-12.5 12.5-12.5 32.8 0 45.3l84.9 84.9c6.3 6.3 14.4 9.4 22.6 9.4 8.2 0 16.4-3.1 22.6-9.4l363.1-363.2c12.5-12.5 12.5-32.8 0-45.2zM359.5 203.5l-50.9-50.9 86.6-86.6 50.9 50.9-86.6 86.6z"/></svg>',IAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M64 256l0-96 160 0 0 96L64 256zm0 64l160 0 0 96L64 416l0-96zm224 96l0-96 160 0 0 96-160 0zM448 256l-160 0 0-96 160 0 0 96zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"/></svg>',QAt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zm64 64l0 256 160 0 0-256L64 160zm384 0l-160 0 0 256 160 0 0-256z"/></svg>',RAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/></svg>',MAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M256 0c17.7 0 32 14.3 32 32l0 32 32 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-64 64c-12.5 12.5-32.8 12.5-45.3 0l-64-64c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8l32 0 0-32c0-17.7 14.3-32 32-32zM169.4 393.4l64-64c12.5-12.5 32.8-12.5 45.3 0l64 64c9.2 9.2 11.9 22.9 6.9 34.9s-16.6 19.8-29.6 19.8l-32 0 0 32c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-32-32 0c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9zM32 224l32 0 0-32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l64 64c12.5 12.5 12.5 32.8 0 45.3l-64 64c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-32-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm297.4 54.6c-12.5-12.5-12.5-32.8 0-45.3l64-64c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 32 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0 0 32c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-64-64zM256 224a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',dp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"/></svg>',ky='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"/></svg>',LAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7L336 192c-8.8 0-16-7.2-16-16l0-57.4c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>',DAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M32 480a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm96-64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm0-384a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm0 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM320 416a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm0-320a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm0 128a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM224 480a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm0-448a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm0 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM416 416a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm0-384a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM32 96a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM416 224a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM32 288a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm192 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm192 64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM32 320a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM416 192a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM32 128a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm192 64a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"/></svg>',eTt=`<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="3 4 18 16"><path stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 10V5m0 0L4 7m2-2 2 2m-2 7v5m0 0 2-2m-2 2-2-2m8-10h8m0 5h-8m0 5h8"></path></svg>
`,tTt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>
`,OAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M278.1 256L444.5 89.6c4.7-4.7 4.7-12.3 0-17-32.8-32.8-86-32.8-118.8 0L210.2 188.1l-24.9-24.9c4.3-10.9 6.7-22.8 6.7-35.3 0-53-43-96-96-96S0 75 0 128s43 96 96 96c4.5 0 9-.3 13.4-.9L142.3 256l-32.9 32.9c-4.4-.6-8.8-.9-13.4-.9-53 0-96 43-96 96s43 96 96 96 96-43 96-96c0-12.5-2.4-24.3-6.7-35.3l24.9-24.9L325.7 439.4c32.8 32.8 86 32.8 118.8 0 4.7-4.7 4.7-12.3 0-17L278.1 256zM96 160c-17.6 0-32-14.4-32-32s14.4-32 32-32 32 14.4 32 32-14.4 32-32 32zm0 256c-17.6 0-32-14.4-32-32s14.4-32 32-32 32 14.4 32 32-14.4 32-32 32z"/></svg>',PAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M320 448v40c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V120c0-13.3 10.7-24 24-24h72v296c0 30.9 25.1 56 56 56h168zm0-344V0H152c-13.3 0-24 10.7-24 24v368c0 13.3 10.7 24 24 24h272c13.3 0 24-10.7 24-24V128H344c-13.2 0-24-10.8-24-24zm121-31L375 7A24 24 0 0 0 358.1 0H352v96h96v-6.1a24 24 0 0 0 -7-17z"/></svg>',FAe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M128 184c0-30.9 25.1-56 56-56h136V56c0-13.3-10.7-24-24-24h-80.6C204.3 12.9 183.6 0 160 0s-44.3 12.9-55.4 32H24C10.7 32 0 42.7 0 56v336c0 13.3 10.7 24 24 24h104V184zm32-144c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm184 248h104v200c0 13.3-10.7 24-24 24H184c-13.3 0-24-10.7-24-24V184c0-13.3 10.7-24 24-24h136v104c0 13.2 10.8 24 24 24zm104-38.1V256h-96v-96h6.1a24 24 0 0 1 17 7l65.9 65.9a24 24 0 0 1 7 17z"/></svg>',nTt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M161.3 144c3.2-17.2 14-30.1 33.7-38.6c21.1-9 51.8-12.3 88.6-6.5c11.9 1.9 48.8 9.1 60.1 12c17.1 4.5 34.6-5.6 39.2-22.7s-5.6-34.6-22.7-39.2c-14.3-3.8-53.6-11.4-66.6-13.4c-44.7-7-88.3-4.2-123.7 10.9c-36.5 15.6-64.4 44.8-71.8 87.3c-.1 .6-.2 1.1-.2 1.7c-2.8 23.9 .5 45.6 10.1 64.6c4.5 9 10.2 16.9 16.7 23.9L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l448 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-209.9 0-.4-.1-1.1-.3c-36-10.8-65.2-19.6-85.2-33.1c-9.3-6.3-15-12.6-18.2-19.1c-3.1-6.1-5.2-14.6-3.8-27.4zM348.9 337.2c2.7 6.5 4.4 15.8 1.9 30.1c-3 17.6-13.8 30.8-33.9 39.4c-21.1 9-51.7 12.3-88.5 6.5c-18-2.9-49.1-13.5-74.4-22.1c-5.6-1.9-11-3.7-15.9-5.4c-16.8-5.6-34.9 3.5-40.5 20.3s3.5 34.9 20.3 40.5c3.6 1.2 7.9 2.7 12.7 4.3c0 0 0 0 0 0s0 0 0 0c24.9 8.5 63.6 21.7 87.6 25.6c0 0 0 0 0 0l.2 0c44.7 7 88.3 4.2 123.7-10.9c36.5-15.6 64.4-44.8 71.8-87.3c3.6-21 2.7-40.4-3.1-58.1l-75.7 0c7 5.6 11.4 11.2 13.9 17.2z"/></svg>
`,dc={undo:jAt,redo:$At,bold:TAt,italic:kAt,underline:CAt,color:WAt,link:$j,image:IAt,alignLeft:RAt,alignRight:LAt,alignCenter:MAt,alignJustify:DAt,bulletList:_At,numberedList:NAt,indentLeft:PAt,indentRight:OAt,pageBreak:qAt,copyFormat:FAt,clearFormatting:BAt,trackChanges:VAt,trackChangesFinal:UAt,trackChangesOriginal:Boe,trackChangesAccept:zAt,trackChangesReject:HAt,documentMode:Foe,documentEditingMode:Foe,documentSuggestingMode:kAe,documentViewingMode:Boe,colorOption:GAt,colorOptionCheck:ZI,linkInput:$j,removeLink:IW,openLink:KAt,overflow:CAe,dropdownCaretUp:XAt,dropdownCaretDown:_Ae,ruler:YAt,paintbrush:ZAt,highlight:JAt,ai:NAe,table:IAe,tableActions:QAt,splitCell:RAe,mergeCells:MAe,addRowBefore:dp,addRowAfter:dp,addColumnBefore:dp,addColumnAfter:dp,deleteRow:ky,deleteColumn:ky,deleteTable:ky,deleteBorders:DAe,fixTables:LAe,lineHeight:eTt,search:tTt,cut:OAe,copy:PAe,paste:FAe,strikethrough:nTt},rTt=["onClick","innerHTML","aria-label","onKeydown"],iTt={__name:"AlignmentButtons",emits:["select"],setup(t,{emit:e}){const{isHighContrastMode:n}=k0(),r=e,i=Ve([]),s=[{key:"left",ariaLabel:"Align left",icon:dc.alignLeft},{key:"center",ariaLabel:"Align center",icon:dc.alignCenter},{key:"right",ariaLabel:"Align right",icon:dc.alignRight},{key:"justify",ariaLabel:"Justify",icon:dc.alignJustify}],o=u=>{r("select",u)},a=u=>{if(u===i.value.length-1)return;const d=i.value[u+1];d&&(d.setAttribute("tabindex","0"),d.focus())},l=u=>{if(u===0)return;const d=i.value[u-1];d&&(d.setAttribute("tabindex","0"),d.focus())},c=(u,d)=>{switch(u.key){case"ArrowLeft":l(d);break;case"ArrowRight":a(d);break;case"Enter":o(s[d].key);break}};return Ur(()=>{const u=i.value[0];u&&(u.setAttribute("tabindex","0"),u.focus())}),(u,d)=>(rt(),wt("div",{class:Qr(["alignment-buttons",{"high-contrast":Ct(n)}])},[(rt(),wt(xn,null,Ui(s,(f,h)=>Pt("div",{key:f.key,class:"button-icon",onClick:m=>o(f.key),innerHTML:f.icon,"data-item":"btn-textAlign-option",role:"menuitem","aria-label":f.ariaLabel,ref_for:!0,ref_key:"alignmentButtonsRefs",ref:i,onKeydown:mr(m=>c(m,h),["prevent"])},null,40,rTt)),64))],2))}},sTt=or(iTt,[["__scopeId","data-v-b4162baa"]]),oTt=["onClick","onKeydown"],aTt={class:"document-mode-column icon-column"},lTt=["innerHTML"],cTt={class:"document-mode-column text-column"},uTt={class:"document-mode-type"},dTt={class:"document-mode-description"},fTt={__name:"DocumentMode",props:{options:{type:Array}},emits:["select"],setup(t,{emit:e}){const n=e,r=Ve([]),{isHighContrastMode:i}=k0(),s=t,o=u=>{n("select",u)},a=u=>{if(u===r.value.length-1)return;const d=r.value[u+1];d&&(d.setAttribute("tabindex","0"),d.focus())},l=u=>{if(u===0)return;const d=r.value[u-1];d&&(d.setAttribute("tabindex","0"),d.focus())},c=(u,d)=>{switch(u.key){case"ArrowDown":a(d);break;case"ArrowUp":l(d);break;case"Enter":o(s.options[d]);break}};return Ur(()=>{r.value[0].setAttribute("tabindex","0"),r.value[0].focus()}),(u,d)=>(rt(),wt("div",{class:Qr(["document-mode",{"high-contrast":Ct(i)}])},[(rt(!0),wt(xn,null,Ui(t.options,(f,h)=>(rt(),wt("div",{class:Qr(["option-item",{disabled:f.disabled}]),onClick:m=>o(f),"data-item":"btn-documentMode-option",role:"menuitem",ref_for:!0,ref_key:"documentModeRefs",ref:r,onKeydown:mr(m=>c(m,h),["prevent"])},[Pt("div",aTt,[Pt("div",{class:"icon-column__icon",innerHTML:f.icon},null,8,lTt)]),Pt("div",cTt,[Pt("div",uTt,ci(f.label),1),Pt("div",dTt,ci(f.description),1)])],42,oTt))),256))],2))}},hTt=or(fTt,[["__scopeId","data-v-6e1ad9c8"]]),pTt={key:0,class:"linked-style-buttons","data-editor-ui-surface":""},mTt=["onClick","onKeydown","aria-label"],gTt={__name:"LinkedStyle",props:{editor:{type:Object,required:!0},selectedOption:{type:String}},emits:["select"],setup(t,{emit:e}){const n=e,r=Ve([]),i=t,s=c=>{n("select",c)},o=c=>{if(c===r.value.length-1)return;const u=r.value[c+1];u.setAttribute("tabindex","0"),u.focus()},a=c=>{if(c===0)return;const u=r.value[c-1];u.setAttribute("tabindex","0"),u.focus()},l=(c,u,d)=>{switch(c.key){case"ArrowDown":o(u);break;case"ArrowUp":a(u);break;case"Enter":c.preventDefault(),s(d);break}};return Ur(()=>{r.value[0].setAttribute("tabindex","0"),r.value[0].focus()}),(c,u)=>i.editor?(rt(),wt("div",pTt,[(rt(!0),wt(xn,null,Ui(Ct(yW)(t.editor),(d,f)=>(rt(),wt("div",{class:Qr(["style-item",{selected:t.selectedOption===d.id}]),onClick:h=>s(d),onKeydown:h=>l(h,f,d),"aria-label":`Linked style - ${d.id}`,ref_for:!0,ref_key:"styleRefs",ref:r},[Pt("div",{class:"style-name",style:Gn(Ct(bW)(d,null,null,!1)),"data-item":"btn-linkedStyles-option"},ci(d.definition.attrs.name),5)],42,mTt))),256))])):Xt("",!0)}},yTt=or(gTt,[["__scopeId","data-v-073a491c"]]),bTt={key:0,class:"link-title"},wTt={key:1,class:"link-title"},vTt={key:2,class:"link-title"},xTt={key:3,class:"link-input-wrapper"},ETt={class:"input-row text-input-row"},STt=["onKeydown"],ATt={class:"input-row url-input-row"},TTt=["innerHTML"],kTt=["onKeydown"],CTt=["innerHTML"],_Tt={class:"input-row link-buttons"},NTt=["innerHTML"],ITt={key:4,class:"input-row go-to-anchor clickable"},RTt={__name:"LinkInput",props:{showInput:{type:Boolean,default:!0},showLink:{type:Boolean,default:!0},goToAnchor:{type:Function,default:()=>{}},editor:{type:Object,required:!0},closePopover:{type:Function,default:()=>{}}},setup(t){const e=t,{isHighContrastMode:n}=k0(),r=Ve(!1),i=()=>{if(!e.editor||!e.editor.state)return"";const{state:E}=e.editor,{selection:A}=E,x=E.schema.marks.link;if(A.empty){const k=Tp(A.$from,x);return k?E.doc.textBetween(k.from,k.to," "):""}const T=Tp(A.$from,x),R=Tp(A.$to,x);if(T||R){const k=T||R;return E.doc.textBetween(k.from,k.to," ")}return E.doc.textBetween(A.from,A.to," ")},s=()=>{if(!e.editor||!e.editor.state)return"";const{state:E}=e.editor,{schema:A,selection:x}=E,T=A.marks.link;if(!T)return"";let R="";const{$from:k,empty:_}=x;if(_){let L=(E.storedMarks||k.marks()).find(M=>M.type===T);if(!L){const M=k.nodeAfter,C=k.nodeBefore,D=M&&Array.isArray(M.marks)?M.marks:[],O=C&&Array.isArray(C.marks)?C.marks:[];L=D.find($=>$.type===T)||O.find($=>$.type===T)}L&&L.attrs&&L.attrs.href&&(R=L.attrs.href)}else E.doc.nodesBetween(x.from,x.to,N=>{if(N.marks){const L=N.marks.find(M=>M.type===T);L&&L.attrs&&L.attrs.href&&(R=L.attrs.href)}});return R||""},o=Ve(""),a=Ve(""),l=Ve(!1),c=pt(()=>a.value?!a.value.startsWith("http")&&!a.value.startsWith("#")?"http://"+a.value:a.value:""),u=pt(()=>{if(c.value.startsWith("#"))return!0;const E=c.value.split(".").filter(Boolean);return c.value.includes(".")&&E.length>1}),d=pt(()=>!l.value&&!!s()),f=pt(()=>!u.value),h=()=>{window.open(c.value,"_blank")},m=()=>{o.value=i(),a.value=s()};gr(()=>{var E,A;return(A=(E=e.editor)==null?void 0:E.state)==null?void 0:A.selection},()=>{m()},{immediate:!0});const y=()=>{const E=document.querySelector(".link-input-ctn input");E&&E.focus()};Ur(()=>{m(),l.value=a.value.startsWith("#"),e.showInput&&y()});const w=()=>{var T,R;const E=e.editor;if(!E)return;if(!a.value){(T=E.commands)!=null&&T.unsetLink&&E.commands.unsetLink(),e.closePopover();return}if(!u.value){r.value=!0;return}const A=o.value||c.value;(R=E.commands)!=null&&R.toggleLink&&E.commands.toggleLink({href:c.value,text:A});const x=E.view.state.selection.$to.pos;E.view.dispatch(E.view.state.tr.setSelection(new Vt(E.view.state.doc.resolve(x)))),setTimeout(()=>E.view.focus(),100),e.closePopover()},b=()=>{e.editor&&e.editor.commands&&e.editor.commands.unsetLink&&(e.editor.commands.unsetLink(),e.closePopover())};return(E,A)=>(rt(),wt("div",{class:Qr(["link-input-ctn",{"high-contrast":Ct(n)}])},[l.value?(rt(),wt("div",bTt,"Page anchor")):d.value?(rt(),wt("div",wTt,"Edit link")):(rt(),wt("div",vTt,"Add link")),t.showInput&&!l.value?(rt(),wt("div",xTt,[Pt("div",ETt,[A[4]||(A[4]=Pt("div",{class:"input-icon text-input-icon"},"T",-1)),wc(Pt("input",{type:"text",name:"text",placeholder:"Text","onUpdate:modelValue":A[0]||(A[0]=x=>o.value=x),onKeydown:f1(mr(w,["stop","prevent"]),["enter"])},null,40,STt),[[Mb,o.value]])]),Pt("div",ATt,[Pt("div",{class:"input-icon",innerHTML:Ct(dc).linkInput},null,8,TTt),wc(Pt("input",{type:"text",name:"link",placeholder:"Type or paste a link",class:Qr({error:r.value}),"onUpdate:modelValue":A[1]||(A[1]=x=>a.value=x),onKeydown:[f1(mr(w,["stop","prevent"]),["enter"]),A[2]||(A[2]=x=>r.value=!1)]},null,42,kTt),[[Mb,a.value]]),Pt("div",{class:Qr(["open-link-icon",{disabled:!u.value}]),innerHTML:Ct(dc).openLink,onClick:h,"data-item":"btn-link-open"},null,10,CTt)]),Pt("div",_Tt,[d.value?(rt(),wt("button",{key:0,class:"remove-btn",onClick:b,"data-item":"btn-link-remove"},[Pt("div",{class:"remove-btn__icon",innerHTML:Ct(dc).removeLink},null,8,NTt),A[5]||(A[5]=Fp(" Remove ",-1))])):Xt("",!0),Pt("button",{class:Qr(["submit-btn",{"disable-btn":f.value}]),onClick:w,"data-item":"btn-link-apply"}," Apply ",2)])])):l.value?(rt(),wt("div",ITt,[Pt("a",{onClick:A[3]||(A[3]=mr((...x)=>t.goToAnchor&&t.goToAnchor(...x),["stop","prevent"]))},"Go to "+ci(a.value.startsWith("#_")?a.value.substring(2):a.value),1)])):Xt("",!0)],2))}},NC=or(RTt,[["__scopeId","data-v-f64d35e8"]]),MTt=["aria-label","onClick","onKeydown"],LTt=["innerHTML"],DTt=["innerHTML"],l_=7,OTt={__name:"IconGridRow",props:{icons:{type:Array,required:!0},activeColor:{type:Object,required:!1}},emits:["select","clickoutside"],setup(t,{emit:e}){const n=e,r=t,i=pt(()=>m=>r.activeColor.value?r.activeColor.value.toUpperCase()===m.value:!1),s=(m,y)=>y===5||["#FFFFFF","#FAFF09"].includes(m)?{color:"#000"}:{color:"#FFF"},o=m=>{n("select",m.value)},a=Ve([]),l=Ve([]);Ur(()=>{if(!r.icons.every(w=>Array.isArray(w)))throw new Error("icon props must be 2d array");const y=l.value[0];y&&(y.setAttribute("tabindex","0"),y.focus())});const c=(m,y)=>{const w=l_*m+y+1,b=l.value[w];b&&(b.setAttribute("tabindex","0"),b.focus())},u=(m,y)=>{const w=l_*m+y-1,b=l.value[w];b&&(b.setAttribute("tabindex","0"),b.focus())},d=(m,y)=>{const w=y+l_*(m+1),b=l.value[w];b&&(b.setAttribute("tabindex","0"),b.focus())},f=(m,y)=>{const w=y+l_*(m-1),b=l.value[w];b&&(b.setAttribute("tabindex","0"),b.focus())},h=(m,y,w,b)=>{switch(m.key){case"ArrowRight":c(y,w);break;case"ArrowLeft":u(y,w);break;case"ArrowDown":d(y,w);break;case"ArrowUp":f(y,w);break;case"Enter":o(b);break;case"Escape":n("clickoutside");break}};return(m,y)=>(rt(!0),wt(xn,null,Ui(t.icons,(w,b)=>(rt(),wt("div",{class:"option-row",key:b,role:"group",ref_for:!0,ref_key:"rowRefs",ref:a},[(rt(!0),wt(xn,null,Ui(w,(E,A)=>(rt(),wt("div",{class:"option",key:A,"aria-label":E.label,role:"menuitem",ref_for:!0,ref_key:"iconRefs",ref:l,onClick:mr(x=>o(E),["stop","prevent"]),onKeydown:mr(x=>h(x,b,A,E),["prevent"])},[Pt("div",{class:"option__icon",innerHTML:E.icon,style:Gn(E.style)},null,12,LTt),i.value(E)?(rt(),wt("div",{key:0,class:"option__check",innerHTML:Ct(dc).colorOptionCheck,style:Gn(s(E.value,A))},null,12,DTt)):Xt("",!0)],40,MTt))),128))]))),128))}},joe=or(OTt,[["__scopeId","data-v-7eb02a60"]]),PTt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M320 512c53.2 0 101.4-21.6 136.1-56.6l-298.3-235C140 257.1 128 292.3 128 320c0 106 86 192 192 192zM505.2 370.7c4.4-16.2 6.8-33.1 6.8-50.7c0-91.2-130.2-262.3-166.6-308.3C339.4 4.2 330.5 0 320.9 0l-1.8 0c-9.6 0-18.5 4.2-24.5 11.7C277.8 33 240.7 81.3 205.8 136L38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L505.2 370.7zM224 336c0 44.2 35.8 80 80 80c8.8 0 16 7.2 16 16s-7.2 16-16 16c-61.9 0-112-50.1-112-112c0-8.8 7.2-16 16-16s16 7.2 16 16z"/></svg>
`,FTt={class:"options-grid-wrap"},BTt=["innerHTML"],jTt={class:"option-grid-ctn"},$Tt={__name:"IconGrid",props:{icons:{type:Array,required:!0},customIcons:{type:Array,required:!1},activeColor:{type:Object,required:!1},hasNoneIcon:{type:Boolean,required:!1}},emits:["select","clickoutside"],setup(t,{emit:e}){const n=e,r=i=>{n("select",i)};return(i,s)=>(rt(),wt("div",FTt,[t.hasNoneIcon?(rt(),wt("div",{key:0,class:"none-option",role:"menuitem","aria-label":"Clear color selection",onClick:s[0]||(s[0]=o=>r("none"))},[Pt("span",{innerHTML:Ct(PTt),class:"none-icon"},null,8,BTt),s[1]||(s[1]=Fp(" None ",-1))])):Xt("",!0),Pt("div",jTt,[Fn(joe,{icons:t.icons,"active-color":t.activeColor,onSelect:r},null,8,["icons","active-color"]),t.customIcons.flat().length?(rt(),wt(xn,{key:0},[s[2]||(s[2]=Pt("span",{class:"option-grid-ctn__subtitle"},"Custom colors",-1)),Fn(joe,{icons:t.customIcons,"active-color":t.activeColor,onSelect:r},null,8,["icons","active-color"])],64)):Xt("",!0)])]))}},zTt=or($Tt,[["__scopeId","data-v-891fd942"]]),HTt=t=>{t.expand.value=!1},gn=(t,e=null)=>({label:e,icon:dc.colorOption,value:t,style:{color:t,boxShadow:"0 0 5px 1px rgba(0, 0, 0, 0.1)",borderRadius:"50%"}}),zj=(t,e,n=[],r=!1)=>{const i=s=>{e.iconColor.value=s,t.emitCommand({item:e,argument:s}),HTt(e)};return ut("div",{},[ut(zTt,{icons:BAe,customIcons:n,activeColor:e.iconColor,hasNoneIcon:r,onSelect:i})])},BAe=[[gn("#111111","black"),gn("#333333","dark gray"),gn("#5C5C5C","medium gray"),gn("#858585","light gray"),gn("#ADADAD","very light gray"),gn("#D6D6D6","transparent gray"),gn("#FFFFFF","white")],[gn("#860028","dark red"),gn("#D2003F","red"),gn("#DB3365","coral red"),gn("#E4668C","light red"),gn("#ED99B2","pale pink"),gn("#F6CCD9","transparent pink"),gn("#FF004D","bright pink")],[gn("#83015E","dark purple"),gn("#CD0194","purple"),gn("#D734A9","orchid"),gn("#E167BF","light purple"),gn("#EB99D4","lavender"),gn("#F5CCEA","transparent pink"),gn("#FF00A8","neon pink")],[gn("#8E220A","maroon"),gn("#DD340F","red-orange"),gn("#E45C3F","burnt orange"),gn("#EB856F","peach"),gn("#F1AE9F","pale peach"),gn("#F8D6CF","transparent peach"),gn("#FF7A00","orange")],[gn("#947D02","olive"),gn("#E7C302","mustard yellow"),gn("#ECCF35","yellow"),gn("#F1DB67","light yellow"),gn("#F5E79A","very pale yellow"),gn("#FAF3CC","transparent yellow"),gn("#FAFF09","neon yellow")],[gn("#055432","forest green"),gn("#07834F","green"),gn("#399C72","medium green"),gn("#6AB595","light green"),gn("#9CCDB9","mint"),gn("#CDE6DC","transparent mint"),gn("#05F38F","bright teal")],[gn("#063E7E","navy blue"),gn("#0A60C5","blue"),gn("#3B80D1","sky blue"),gn("#6CA0DC","cornflower blue"),gn("#9DBFE8","light blue"),gn("#CEDFF3","very light blue"),gn("#21c8ce","cyan")],[gn("#3E027A","deep purple"),gn("#6103BF","indigo"),gn("#8136CC","violet"),gn("#A068D9","lavender pink"),gn("#C09AE6","light lilac"),gn("#DFCDF2","transparent lilac"),gn("#A91DFF","neon purple")]],VTt=()=>BAe.flat().map(t=>t.value),UTt=["data-cols","data-rows","onKeydown","onClick"],WTt=["aria-valuetext"],c_=5,qTt={__name:"TableGrid",emits:["select","clickoutside"],setup(t,{emit:e}){const n=e,r=Ve(0),i=Ve(0),{isHighContrastMode:s}=k0(),o=Ve([]),a=d=>{let f=d.target;if(!!f.dataset.grid)return;let y=[...f.parentElement.querySelectorAll("[data-item]")],w=parseInt(f.dataset.cols,10),b=parseInt(f.dataset.rows,10);l(y,w,b)},l=(d,f,h)=>{i.value=f,r.value=h;for(let m=0;m<d.length;m++){let y=d[m],w=parseInt(y.dataset.cols,10),b=parseInt(y.dataset.rows,10);w<=f&&b<=h?y.classList.add("selected"):y.classList.remove("selected")}},c=({cols:d,rows:f})=>{n("select",{cols:d,rows:f})},u=(d,f,h)=>{let m=f-1,y=h-1;switch(d.key){case"ArrowRight":{if(m>=4)return;const w=y*c_;o.value[w+m+1].setAttribute("tabindex","0"),o.value[w+m+1].focus(),l(o.value,f+1,h);break}case"ArrowLeft":{if(m<=0)return;const w=y*c_;o.value[w+m-1].setAttribute("tabindex","0"),o.value[w+m-1].focus(),l(o.value,f-1,h);break}case"ArrowDown":{if(y>=4)return;const w=(y+1)*c_;o.value[w+m].setAttribute("tabindex","0"),o.value[w+m].focus(),l(o.value,f,h+1);break}case"ArrowUp":{if(y<=0)return;const w=(y-1)*c_;o.value[w+m].setAttribute("tabindex","0"),o.value[w+m].focus(),l(o.value,f,h-1);break}case"Enter":{c({cols:f,rows:h});break}}};return Ur(()=>{o.value[0].setAttribute("tabindex","0"),o.value[0].focus(),l(o.value,1,1)}),(d,f)=>(rt(),wt("div",{class:Qr(["toolbar-table-grid-wrapper",{"high-contrast":Ct(s)}])},[Pt("div",{class:"toolbar-table-grid",onMouseover:a,"data-grid":"true"},[(rt(),wt(xn,null,Ui(5,h=>(rt(),wt(xn,{key:h},[(rt(),wt(xn,null,Ui(5,m=>Pt("div",{class:"toolbar-table-grid__item",key:`${h}_${m}`,"data-cols":m,"data-rows":h,"data-item":"true",ref_for:!0,ref_key:"tableGridItems",ref:o,onKeydown:mr(y=>u(y,m,h),["prevent"]),onClick:mr(y=>c({cols:m,rows:h}),["stop","prevent"])},null,40,UTt)),64))],64))),64))],32),Pt("div",{class:"toolbar-table-grid-value","aria-valuetext":`${r.value} x ${i.value}`},ci(r.value)+" x "+ci(i.value),9,WTt)],2))}},jAe=or(qTt,[["__scopeId","data-v-07c60426"]]),GTt={class:"toolbar-table-actions"},KTt=["onClick","data-item","ariaLabel"],XTt={class:"toolbar-table-actions__icon"},YTt=["innerHTML"],ZTt={class:"toolbar-table-actions__label"},JTt={__name:"TableActions",props:{options:{type:Array}},emits:["select"],setup(t,{emit:e}){const n=e,r=i=>{n("select",{command:i.command})};return(i,s)=>(rt(),wt("div",GTt,[(rt(!0),wt(xn,null,Ui(t.options,o=>{var a,l;return rt(),wt("div",{class:Qr(["toolbar-table-actions__item",{"toolbar-table-actions__item--border":o.bottomBorder}]),onClick:c=>r(o),"data-item":((a=o.props)==null?void 0:a["data-item"])||"",ariaLabel:(l=o.props)==null?void 0:l.ariaLabel,role:"menuitem"},[Pt("div",XTt,[Pt("div",{class:"toolbar-table-actions__icon-wrapper",innerHTML:o.icon},null,8,YTt)]),Pt("div",ZTt,ci(o.label),1)],10,KTt)}),256))]))}},$Ae=or(JTt,[["__scopeId","data-v-d1697e32"]]);function QTt(t){let e=t;for(;e;){const n=window.getComputedStyle(e).overflowY;if(/(auto|scroll)/.test(n)&&e.scrollHeight>e.clientHeight)return e;e=e.parentElement}return document.scrollingElement||document.documentElement}function ekt(t,e={behavior:"smooth",block:"start"}){if(!t)return;const n=QTt(t),r=n.getBoundingClientRect(),s=t.getBoundingClientRect().top-r.top+n.scrollTop;n.scrollTo({top:e.block==="start"?s:s-n.clientHeight+t.offsetHeight,behavior:e.behavior})}const tkt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>
`,nkt={class:"search-input-ctn"},rkt={class:"row"},ikt=["onKeydown"],skt={__name:"SearchInput",props:{searchRef:{type:Object}},emits:["submit"],setup(t,{emit:e}){const n=Ve(""),r=e,i=()=>{r("submit",{value:n.value})};return(s,o)=>(rt(),wt("div",nkt,[Pt("div",rkt,[wc(Pt("input",{ref:t.searchRef,"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a),class:"search-input",type:"text",name:"search",placeholder:"Type search string",onKeydown:f1(mr(i,["stop","prevent"]),["enter"])},null,40,ikt),[[Mb,n.value]])]),Pt("div",{class:"row submit"},[Pt("button",{class:"submit-btn",onClick:i},"Apply")])]))}},okt=or(skt,[["__scopeId","data-v-ab2fefe3"]]),akt=[{label:"Georgia",key:"Georgia, serif",fontWeight:400,props:{style:{fontFamily:"Georgia, serif"},"data-item":"btn-fontFamily-option"}},{label:"Arial",key:"Arial, sans-serif",fontWeight:400,props:{style:{fontFamily:"Arial, sans-serif"},"data-item":"btn-fontFamily-option"}},{label:"Courier New",key:"Courier New, monospace",fontWeight:400,props:{style:{fontFamily:"Courier New, monospace"},"data-item":"btn-fontFamily-option"}},{label:"Times New Roman",key:"Times New Roman, serif",fontWeight:400,props:{style:{fontFamily:"Times New Roman, serif"},"data-item":"btn-fontFamily-option"}}],lkt=[{label:"8",key:"8pt",props:{"data-item":"btn-fontSize-option"}},{label:"9",key:"9pt",props:{"data-item":"btn-fontSize-option"}},{label:"10",key:"10pt",props:{"data-item":"btn-fontSize-option"}},{label:"11",key:"11pt",props:{"data-item":"btn-fontSize-option"}},{label:"12",key:"12pt",props:{"data-item":"btn-fontSize-option"}},{label:"14",key:"14pt",props:{"data-item":"btn-fontSize-option"}},{label:"18",key:"18pt",props:{"data-item":"btn-fontSize-option"}},{label:"24",key:"24pt",props:{"data-item":"btn-fontSize-option"}},{label:"30",key:"30pt",props:{"data-item":"btn-fontSize-option"}},{label:"36",key:"36pt",props:{"data-item":"btn-fontSize-option"}},{label:"48",key:"48pt",props:{"data-item":"btn-fontSize-option"}},{label:"60",key:"60pt",props:{"data-item":"btn-fontSize-option"}},{label:"72",key:"72pt",props:{"data-item":"btn-fontSize-option"}},{label:"96",key:"96pt",props:{"data-item":"btn-fontSize-option"}}],Mm=t=>{t.expand.value=!1},ckt=({superToolbar:t,toolbarIcons:e,toolbarTexts:n,toolbarFonts:r,hideButtons:i,availableWidth:s,role:o,isDev:a=!1}={})=>{var Ie,qe,Ye,ft;const l=pr({type:"button",name:"bold",command:"toggleBold",icon:e.bold,tooltip:n.bold,attributes:{ariaLabel:"Bold"}}),c=[...r||akt],u=pr({type:"dropdown",name:"fontFamily",tooltip:n.fontFamily,command:"setFontFamily",defaultLabel:"Arial",label:"Arial",markName:"textStyle",labelAttr:"fontFamily",hasCaret:!0,isWide:!0,style:{width:"116px"},suppressActiveHighlight:!0,attributes:{ariaLabel:"Font family"},options:c,onActivate:({fontFamily:We})=>{if(!We)return;We=We.split(",")[0],u.label.value=We;const nt=c.find(ct=>ct.label===u.defaultLabel.value),bt=c.find(ct=>ct.label===We);bt?u.selectedValue.value=bt.key:nt?u.selectedValue.value=nt.key:u.selectedValue.value=""},onDeactivate:()=>{u.label.value=u.defaultLabel.value;const We=c.find(nt=>nt.label===u.defaultLabel.value);We?u.selectedValue.value=We.key:u.selectedValue.value=""}}),d=pr({type:"dropdown",dropdownStyles:{padding:0,outline:"none"},name:"ai",tooltip:n.ai,icon:e.ai,hideLabel:!0,hasCaret:!1,isWide:!0,suppressActiveHighlight:!0,attributes:{ariaLabel:"AI"},options:[{type:"render",key:"ai",render:()=>{let We="";if(t.activeEditor){const{state:bt}=t.activeEditor,{from:ct,to:Ft,empty:tn}=bt.selection;We=tn?"":bt.doc.textBetween(ct,Ft)}return ut("div",{},[ut(NW,{handleClose:()=>{Mm(d)},selectedText:We,editor:t.activeEditor,apiKey:t.config.aiApiKey,endpoint:t.config.aiEndpoint,superToolbar:t})])}}]}),f=lkt,h=pr({type:"dropdown",name:"fontSize",defaultLabel:"12",label:"12",minWidth:"50px",markName:"textStyle",labelAttr:"fontSize",tooltip:n.fontSize,hasCaret:!0,hasInlineTextInput:!0,inlineTextInputVisible:!0,suppressActiveHighlight:!0,isWide:!0,command:"setFontSize",attributes:{ariaLabel:"Font size"},options:f,onActivate:({fontSize:We},nt=!1)=>{if(nt){h.label.value="",h.selectedValue.value="";return}const bt=f.find(Zt=>Zt.label===String(h.defaultLabel.value));if(!We){h.label.value=h.defaultLabel.value,bt?h.selectedValue.value=bt.key:h.selectedValue.value="";return}let ct=cAt(We,12);ct<8&&(ct=8),ct>96&&(ct=96);let Ft=String(ct);const tn=f.find(Zt=>Zt.label===Ft||Zt.key===Ft);tn?h.selectedValue.value=tn.key:h.selectedValue.value="",h.label.value=Ft},onDeactivate:()=>{h.label.value=h.defaultLabel.value;const We=f.find(nt=>nt.label===String(h.defaultLabel.value));We?h.selectedValue.value=We.key:h.selectedValue.value=""}}),m=pr({type:"separator",name:"separator",isNarrow:!0}),y=pr({type:"button",name:"italic",command:"toggleItalic",icon:e.italic,tooltip:n.italic,attributes:{ariaLabel:"Italic"}}),w=pr({type:"button",name:"underline",command:"toggleUnderline",icon:e.underline,tooltip:n.underline,attributes:{ariaLabel:"Underline"}}),b=pr({type:"button",name:"strike",command:"toggleStrike",icon:e.strikethrough,tooltip:n.strikethrough,attributes:{ariaLabel:"Strikethrough"}}),E=pr({type:"dropdown",name:"highlight",icon:e.highlight,hideLabel:!0,markName:"highlight",labelAttr:"color",tooltip:n.highlight,command:"setHighlight",noArgumentCommand:"unsetHighlight",suppressActiveHighlight:!0,attributes:{ariaLabel:"Highlight"},options:[{key:"color",type:"render",render:()=>zj(t,E,[],!0)}],onActivate:({color:We})=>{E.iconColor.value=We||""},onDeactivate:()=>E.iconColor.value=""}),A=pr({type:"dropdown",name:"color",icon:e.color,hideLabel:!0,markName:"textStyle",labelAttr:"color",tooltip:n.color,command:"setColor",suppressActiveHighlight:!0,attributes:{ariaLabel:"Color"},options:[{key:"color",type:"render",render:()=>zj(t,A)}],onActivate:({color:We})=>{A.iconColor.value=We},onDeactivate:()=>A.iconColor.value="#000"}),x=Ve(null),T=pr({type:"dropdown",name:"search",icon:e.search,tooltip:n.search,group:"right",inputRef:x,attributes:{ariaLabel:"Search"},options:[{type:"render",key:"searchDropdown",render:()=>R()}]}),R=()=>ut("div",{},[ut(okt,{onSubmit:({value:nt})=>{t.activeEditor.commands.search(nt)},searchRef:x})]),k=pr({type:"dropdown",name:"link",markName:"link",icon:e.link,tooltip:n.link,attributes:{ariaLabel:"Link dropdown"},options:[{type:"render",key:"linkDropdown",render:()=>_(k)}],onActivate:({href:We})=>{We?k.attributes.value={href:We}:k.attributes.value={}},onDeactivate:()=>{k.attributes.value={},k.expand.value=!1}});function _(We){return ut("div",{},[ut(NC,{editor:t.activeEditor,closePopover:()=>Mm(We),goToAnchor:()=>{var Ft,tn,Zt;if(Mm(We),!t.activeEditor||!((Ft=We.attributes.value)!=null&&Ft.href))return;const nt=(Zt=(tn=We.attributes.value)==null?void 0:tn.href)==null?void 0:Zt.slice(1),ct=t.activeEditor.element.querySelector(`a[name='${nt}']`);ct&&ekt(ct)}})])}const N=pr({type:"options",name:"linkInput",command:"toggleLink"});k.childItem=N,N.parentItem=k;const L=pr({type:"button",name:"image",command:"startImageUpload",icon:e.image,tooltip:n.image,disabled:!1,attributes:{ariaLabel:"Image"}}),M=pr({type:"dropdown",name:"table",icon:e.table,hideLabel:!0,labelAttr:"table",tooltip:n.table,command:"insertTable",suppressActiveHighlight:!0,attributes:{ariaLabel:"Table"},options:[{key:"table",type:"render",render:()=>C(M)}]});function C(We){return ut("div",{},[ut(jAe,{onSelect:bt=>{t.emitCommand({item:We,argument:bt}),Mm(We)}})])}const D=pr({type:"dropdown",name:"tableActions",command:"executeTableCommand",tooltip:n.tableActions,icon:e.tableActions,hideLabel:!0,disabled:!0,attributes:{ariaLabel:"Table actions"},options:[{type:"render",render:()=>$(D)}]}),O=[{label:n.addRowBefore,command:"addRowBefore",icon:e.addRowBefore,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add row before"}},{label:n.addRowAfter,command:"addRowAfter",icon:e.addRowAfter,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add row after"}},{label:n.addColumnBefore,command:"addColumnBefore",icon:e.addColumnBefore,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add column before"}},{label:n.addColumnAfter,command:"addColumnAfter",icon:e.addColumnAfter,bottomBorder:!0,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add column after"}},{label:n.deleteRow,command:"deleteRow",icon:e.deleteRow,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete row"}},{label:n.deleteColumn,command:"deleteColumn",icon:e.deleteColumn,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete column"}},{label:n.deleteTable,command:"deleteTable",icon:e.deleteTable,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete table"}},{label:n.removeBorders,command:"deleteCellAndTableBorders",icon:e.deleteBorders,bottomBorder:!0,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete cell and table borders"}},{label:n.mergeCells,command:"mergeCells",icon:e.mergeCells,props:{"data-item":"btn-tableActions-option",ariaLabel:"Merge cells"}},{label:n.splitCell,command:"splitCell",icon:e.splitCell,props:{"data-item":"btn-tableActions-option",ariaLabel:"Split cells"}},{label:n.fixTables,command:"fixTables",icon:e.fixTables,props:{"data-item":"btn-tableActions-option",ariaLabel:"Fix tables"}}];function $(We){return ut($Ae,{options:O,onSelect:nt=>{Mm(We);const{command:bt}=nt;t.emitCommand({item:We,argument:{command:bt}})}})}const U=pr({type:"dropdown",name:"textAlign",tooltip:n.textAlign,icon:e.alignLeft,command:"setTextAlign",hasCaret:!0,markName:"textAlign",labelAttr:"textAlign",suppressActiveHighlight:!0,attributes:{ariaLabel:"Text align"},options:[{type:"render",render:()=>ut("div",{},[ut(sTt,{onSelect:nt=>{Mm(U);const bt={...U,command:"setTextAlign"};bt.command="setTextAlign",t.emitCommand({item:bt,argument:nt}),W(U,nt)}})]),key:"alignment"}],onActivate:({textAlign:We})=>{W(U,We)},onDeactivate:()=>{W(U,"left")}}),W=(We,nt)=>{let bt=nt==="both"?"justify":nt,ct={left:e.alignLeft,right:e.alignRight,center:e.alignCenter,justify:e.alignJustify},Ft=ct[bt]??ct.left;We.icon.value=Ft},ce=pr({type:"button",name:"list",command:"toggleBulletList",icon:e.bulletList,tooltip:n.bulletList,restoreEditorFocus:!0,attributes:{ariaLabel:"Bullet list"}}),se=pr({type:"button",name:"numberedlist",command:"toggleOrderedList",icon:e.numberedList,tooltip:n.numberedList,restoreEditorFocus:!0,attributes:{ariaLabel:"Numbered list"}}),Q=pr({type:"button",name:"indentleft",command:"decreaseTextIndent",icon:e.indentLeft,tooltip:n.indentLeft,disabled:!1,attributes:{ariaLabel:"Left indent"}}),J=pr({type:"button",name:"indentright",command:"increaseTextIndent",icon:e.indentRight,tooltip:n.indentRight,disabled:!1,attributes:{ariaLabel:"Right indent"}}),K=pr({type:"overflow",name:"overflow",command:null,icon:e.overflow,disabled:!1,attributes:{ariaLabel:"Overflow items"}}),re=pr({type:"dropdown",name:"zoom",allowWithoutEditor:!0,tooltip:n.zoom,defaultLabel:"100%",label:"100%",hasCaret:!0,command:"setZoom",isWide:!0,inlineTextInputVisible:!1,hasInlineTextInput:!0,attributes:{ariaLabel:"Zoom"},options:[{label:"50%",key:.5,props:{"data-item":"btn-zoom-option"}},{label:"75%",key:.75,props:{"data-item":"btn-zoom-option"}},{label:"90%",key:.9,props:{"data-item":"btn-zoom-option"}},{label:"100%",key:1,props:{"data-item":"btn-zoom-option"}},{label:"125%",key:1.25,props:{"data-item":"btn-zoom-option"}},{label:"150%",key:1.5,props:{"data-item":"btn-zoom-option"}},{label:"200%",key:2,props:{"data-item":"btn-zoom-option"}}],onActivate:({zoom:We})=>{We&&(re.label.value=We)}}),X=pr({type:"button",name:"undo",disabled:!0,tooltip:n.undo,command:"undo",icon:e.undo,group:"left",attributes:{ariaLabel:"Undo"}}),me=pr({type:"button",disabled:!0,name:"redo",tooltip:n.redo,command:"redo",icon:e.redo,group:"left",attributes:{ariaLabel:"Redo"}}),G=pr({type:"button",disabled:!1,name:"toggleTrackChanges",tooltip:n.trackChanges,command:"toggleTrackChanges",icon:e.trackChanges,group:"left",attributes:{ariaLabel:"Track changes"}}),B=pr({type:"button",disabled:!1,name:"acceptTrackedChangeBySelection",tooltip:n.trackChangesAccept,command:"acceptTrackedChangeFromToolbar",icon:e.trackChangesAccept,group:"left",attributes:{ariaLabel:"Accept tracked changes"}}),z=pr({type:"button",disabled:!1,name:"rejectTrackedChangeOnSelection",tooltip:n.trackChangesReject,command:"rejectTrackedChangeFromToolbar",icon:e.trackChangesReject,group:"left",attributes:{ariaLabel:"Reject tracked changes"}}),de=pr({type:"button",disabled:!1,name:"toggleTrackChangesShowOriginal",tooltip:n.trackChangesOriginal,command:"toggleTrackChangesShowOriginal",icon:e.trackChangesOriginal,group:"left",attributes:{ariaLabel:"Toggle tracked changes show original"}}),Y=pr({type:"button",disabled:!1,name:"toggleTrackChangesShowFinal",tooltip:n.trackChangesFinal,command:"toggleTrackChangesShowFinal",icon:e.trackChangesFinal,group:"left",attributes:{ariaLabel:"Toggle tracked changes show final"}}),ee=pr({type:"button",name:"clearFormatting",command:"clearFormat",tooltip:n.clearFormatting,icon:e.clearFormatting,attributes:{ariaLabel:"Clear formatting"}}),ae=pr({type:"button",name:"copyFormat",tooltip:n.copyFormat,icon:e.copyFormat,command:"copyFormat",attributes:{ariaLabel:"Copy formatting"}}),ie=(We,nt)=>We==="editor"?nt:We==="suggester"?nt.filter(bt=>bt.value==="suggesting"):nt.filter(bt=>bt.value==="viewing"),H=We=>We==="editor"?"Editing":We==="suggester"?"Suggesting":"Viewing",be=pr({type:"dropdown",name:"documentMode",command:"setDocumentMode",allowWithoutEditor:!0,icon:e.documentMode,defaultLabel:H(o),label:H(o),hasCaret:o==="editor",isWide:!0,style:{display:"flex",justifyContent:"flex-end"},inlineTextInputVisible:!1,hasInlineTextInput:!1,group:"right",disabled:o!=="editor",attributes:{dropdownPosition:"right",className:"toolbar-item--doc-mode",ariaLabel:"Document mode"},options:[{type:"render",render:()=>Z(be)}]}),Te=[{label:n.documentEditingMode,value:"editing",icon:e.documentEditingMode,description:n.documentEditingModeDescription},{label:n.documentSuggestingMode,value:"suggesting",icon:e.documentSuggestingMode,description:n.documentSuggestingModeDescription},{label:n.documentViewingMode,value:"viewing",icon:e.documentViewingMode,description:n.documentViewingModeDescription}];function Z(We){const nt=ie(o,Te);return ut(hTt,{options:nt,onSelect:bt=>{Mm(We);const{label:ct,icon:Ft}=bt;be.label.value=ct,be.icon.value=Ft,t.emitCommand({item:be,argument:ct})}})}const oe=new Map([["separator",20],["zoom",71],["fontFamily",118],["fontSize",57],["textAlign",40],["linkedStyles",142],["documentMode",47],["ai",32],["default",32]]),te=pr({type:"button",name:"ruler",command:"toggleRuler",icon:e.ruler,tooltip:n.ruler,attributes:{ariaLabel:"Ruler"}}),ye=Ve(null),ke=pr({type:"dropdown",name:"linkedStyles",command:"setLinkedStyle",tooltip:n.linkedStyles,icon:e.paintbrush,defaultLabel:n.formatText,label:n.formatText,hasCaret:!0,isWide:!0,style:{width:"140px"},suppressActiveHighlight:!0,disabled:!1,attributes:{className:"toolbar-item--linked-styles",ariaLabel:"Linked styles"},options:[{type:"render",key:"linkedStyle",render:()=>{const We=nt=>{Mm(ke);const bt={...ke,command:"setLinkedStyle"};t.emitCommand({item:bt,argument:nt}),ye.value=nt.id};return ut("div",{},[ut(yTt,{editor:t.activeEditor,onSelect:We,selectedOption:ye.value})])}}],onActivate:({styleId:We})=>{const nt=yW(t.activeEditor),bt=nt==null?void 0:nt.find(ct=>ct.id===We);ke.label.value=bt&&bt.id!=="Normal"?bt.definition.attrs.name:n.formatText,ke.disabled.value=!1},onDeactivate:()=>{ke.disabled.value=!0,ke.label.value=n.formatText}}),we=(We,nt)=>{if(nt.value==We)return ut("div",{innerHTML:tkt,class:"dropdown-select-icon"})},Ae=pr({type:"dropdown",name:"lineHeight",tooltip:n.lineHeight,icon:e.lineHeight,hasCaret:!1,hasInlineTextInput:!1,inlineTextInputVisible:!1,suppressActiveHighlight:!0,isWide:!1,command:"setLineHeight",dropdownValueKey:"key",selectedValue:"1",attributes:{ariaLabel:"Line height"},options:[1,1.15,1.5,2,2.5,3].map(We=>({label:We.toFixed(2),key:We,icon:()=>we(We,Ae.selectedValue),props:{"data-item":"btn-lineHeight-option"}}))}),Re={sm:768,md:1024,xl:1410},Pe=120,Ce=32,Oe=["linkedStyles","clearFormatting","copyFormat","ruler"],Fe=["zoom","fontFamily","fontSize","redo"];let $e=[X,me,B,z,re,u,m,h,m,l,y,w,b,A,E,m,k,L,M,D,m,U,ce,se,Q,J,Ae,m,ke,m,te,ae,ee,d,K,be];if((ft=(Ye=(qe=(Ie=t.config)==null?void 0:Ie.superdoc)==null?void 0:qe.config)==null?void 0:Ye.modules)!=null&&ft.ai||($e=$e.filter(We=>We.name.value!=="ai")),s<=Re.md&&i&&($e=$e.filter(We=>We.type!=="separator")),t.config.mode!=="docx"){const We=$e.findIndex(bt=>bt.name.value==="linkedStyles");$e.splice(We-1,2);const nt=["ruler","zoom","undo","redo"];$e=$e.filter(bt=>!nt.includes(bt.name.value))}const he=[G,de,Y];a||(o==="viewer"&&he.push(B,z),$e=$e.filter(We=>!he.includes(We)));const q=[T,X,K,be].map(We=>We.name),ne=We=>q.includes(We.name),Ee=[],Se=[];let ze=Ce+Pe;return $e.forEach(We=>{const nt=oe.get(We.name.value)||oe.get("default");if(s<Re.xl&&Oe.includes(We.name.value)&&i){if(Ee.push(We),We.name.value==="linkedStyles"){const bt=$e.findIndex(ct=>ct.name.value==="linkedStyles");$e.splice(bt+1,1)}return}if(s<Re.sm&&Fe.includes(We.name.value)&&i){Ee.push(We);return}if(ne(We)){Se.push(We),ze+=nt;return}ze<s||!i?(Se.push(We),ze+=nt):Ee.push(We)}),{defaultItems:Se,overflowItems:Ee.filter(We=>We.type!=="separator")}};function ukt(t){let e=".",n="__",r="--",i;if(t){let m=t.blockPrefix;m&&(e=m),m=t.elementPrefix,m&&(n=m),m=t.modifierPrefix,m&&(r=m)}const s={install(m){i=m.c;const y=m.context;y.bem={},y.bem.b=null,y.bem.els=null}};function o(m){let y,w;return{before(b){y=b.bem.b,w=b.bem.els,b.bem.els=null},after(b){b.bem.b=y,b.bem.els=w},$({context:b,props:E}){return m=typeof m=="string"?m:m({context:b,props:E}),b.bem.b=m,`${(E==null?void 0:E.bPrefix)||e}${b.bem.b}`}}}function a(m){let y;return{before(w){y=w.bem.els},after(w){w.bem.els=y},$({context:w,props:b}){return m=typeof m=="string"?m:m({context:w,props:b}),w.bem.els=m.split(",").map(E=>E.trim()),w.bem.els.map(E=>`${(b==null?void 0:b.bPrefix)||e}${w.bem.b}${n}${E}`).join(", ")}}}function l(m){return{$({context:y,props:w}){m=typeof m=="string"?m:m({context:y,props:w});const b=m.split(",").map(x=>x.trim());function E(x){return b.map(T=>`&${(w==null?void 0:w.bPrefix)||e}${y.bem.b}${x!==void 0?`${n}${x}`:""}${r}${T}`).join(", ")}const A=y.bem.els;if(A!==null){if(_e.env.NODE_ENV!=="production"&&A.length>=2)throw Error(`[css-render/plugin-bem]: m(${m}) is invalid, using modifier inside multiple elements is not allowed`);return E(A[0])}else return E()}}}function c(m){return{$({context:y,props:w}){m=typeof m=="string"?m:m({context:y,props:w});const b=y.bem.els;if(_e.env.NODE_ENV!=="production"&&b!==null&&b.length>=2)throw Error(`[css-render/plugin-bem]: notM(${m}) is invalid, using modifier inside multiple elements is not allowed`);return`&:not(${(w==null?void 0:w.bPrefix)||e}${y.bem.b}${b!==null&&b.length>0?`${n}${b[0]}`:""}${r}${m})`}}}return Object.assign(s,{cB:((...m)=>i(o(m[0]),m[1],m[2])),cE:((...m)=>i(a(m[0]),m[1],m[2])),cM:((...m)=>i(l(m[0]),m[1],m[2])),cNotM:((...m)=>i(c(m[0]),m[1],m[2]))}),s}function dkt(t){let e=0;for(let n=0;n<t.length;++n)t[n]==="&"&&++e;return e}const zAe=/\s*,(?![^(]*\))\s*/g,fkt=/\s+/g;function hkt(t,e){const n=[];return e.split(zAe).forEach(r=>{let i=dkt(r);if(i){if(i===1){t.forEach(o=>{n.push(r.replace("&",o))});return}}else{t.forEach(o=>{n.push((o&&o+" ")+r)});return}let s=[r];for(;i--;){const o=[];s.forEach(a=>{t.forEach(l=>{o.push(a.replace("&",l))})}),s=o}s.forEach(o=>n.push(o))}),n}function pkt(t,e){const n=[];return e.split(zAe).forEach(r=>{t.forEach(i=>{n.push((i&&i+" ")+r)})}),n}function mkt(t){let e=[""];return t.forEach(n=>{n=n&&n.trim(),n&&(n.includes("&")?e=hkt(e,n):e=pkt(e,n))}),e.join(", ").replace(fkt," ")}function $oe(t){if(!t)return;const e=t.parentElement;e&&e.removeChild(t)}function wM(t,e){return(e??document.head).querySelector(`style[cssr-id="${t}"]`)}function gkt(t){const e=document.createElement("style");return e.setAttribute("cssr-id",t),e}function u_(t){return t?/^\s*@(s|m)/.test(t):!1}const ykt=/[A-Z]/g;function HAe(t){return t.replace(ykt,e=>"-"+e.toLowerCase())}function bkt(t,e="  "){return typeof t=="object"&&t!==null?` {
`+Object.entries(t).map(n=>e+`  ${HAe(n[0])}: ${n[1]};`).join(`
`)+`
`+e+"}":`: ${t};`}function wkt(t,e,n){return typeof t=="function"?t({context:e.context,props:n}):t}function zoe(t,e,n,r){if(!e)return"";const i=wkt(e,n,r);if(!i)return"";if(typeof i=="string")return`${t} {
${i}
}`;const s=Object.keys(i);if(s.length===0)return n.config.keepEmptyBlock?t+` {
}`:"";const o=t?[t+" {"]:[];return s.forEach(a=>{const l=i[a];if(a==="raw"){o.push(`
`+l+`
`);return}a=HAe(a),l!=null&&o.push(`  ${a}${bkt(l)}`)}),t&&o.push("}"),o.join(`
`)}function Hj(t,e,n){t&&t.forEach(r=>{if(Array.isArray(r))Hj(r,e,n);else if(typeof r=="function"){const i=r(e);Array.isArray(i)?Hj(i,e,n):i&&n(i)}else r&&n(r)})}function VAe(t,e,n,r,i){const s=t.$;let o="";if(!s||typeof s=="string")u_(s)?o=s:e.push(s);else if(typeof s=="function"){const c=s({context:r.context,props:i});u_(c)?o=c:e.push(c)}else if(s.before&&s.before(r.context),!s.$||typeof s.$=="string")u_(s.$)?o=s.$:e.push(s.$);else if(s.$){const c=s.$({context:r.context,props:i});u_(c)?o=c:e.push(c)}const a=mkt(e),l=zoe(a,t.props,r,i);o?n.push(`${o} {`):l.length&&n.push(l),t.children&&Hj(t.children,{context:r.context,props:i},c=>{if(typeof c=="string"){const u=zoe(a,{raw:c},r,i);n.push(u)}else VAe(c,e,n,r,i)}),e.pop(),o&&n.push("}"),s&&s.after&&s.after(r.context)}function vkt(t,e,n){const r=[];return VAe(t,[],r,e,n),r.join(`

`)}function FT(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function xkt(t,e,n,r){const{els:i}=e;if(n===void 0)i.forEach($oe),e.els=[];else{const s=wM(n,r);s&&i.includes(s)&&($oe(s),e.els=i.filter(o=>o!==s))}}function Hoe(t,e){t.push(e)}function Ekt(t,e,n,r,i,s,o,a,l){let c;if(n===void 0&&(c=e.render(r),n=FT(c)),l){l.adapter(n,c??e.render(r));return}a===void 0&&(a=document.head);const u=wM(n,a);if(u!==null&&!s)return u;const d=u??gkt(n);if(c===void 0&&(c=e.render(r)),d.textContent=c,u!==null)return u;if(o){const f=a.querySelector(`meta[name="${o}"]`);if(f)return a.insertBefore(d,f),Hoe(e.els,d),d}return i?a.insertBefore(d,a.querySelector("style, link")):a.appendChild(d),Hoe(e.els,d),d}function Skt(t){return vkt(this,this.instance,t)}function Akt(t={}){const{id:e,ssr:n,props:r,head:i=!1,force:s=!1,anchorMetaName:o,parent:a}=t;return Ekt(this.instance,this,e,r,i,s,o,a,n)}function Tkt(t={}){const{id:e,parent:n}=t;xkt(this.instance,this,e,n)}const d_=function(t,e,n,r){return{instance:t,$:e,props:n,children:r,els:[],render:Skt,mount:Akt,unmount:Tkt}},kkt=function(t,e,n,r){return Array.isArray(e)?d_(t,{$:null},null,e):Array.isArray(n)?d_(t,e,null,n):Array.isArray(r)?d_(t,e,n,r):d_(t,e,n,null)};function UAe(t={}){const e={c:((...n)=>kkt(e,...n)),use:(n,...r)=>n.install(e,...r),find:wM,context:{},config:t};return e}function Ckt(t,e){if(t===void 0)return!1;if(e){const{context:{ids:n}}=e;return n.has(t)}return wM(t)!==null}const _kt="n",JI=`.${_kt}-`,Nkt="__",Ikt="--",WAe=UAe(),qAe=ukt({blockPrefix:JI,elementPrefix:Nkt,modifierPrefix:Ikt});WAe.use(qAe);const{c:en,find:j9t}=WAe,{cB:Dn,cE:Xr,cM:lr,cNotM:L1}=qAe;function Rkt(t){return en(({props:{bPrefix:e}})=>`${e||JI}modal, ${e||JI}drawer`,[t])}function Mkt(t){return en(({props:{bPrefix:e}})=>`${e||JI}popover`,[t])}const Lkt=(...t)=>en(">",[Dn(...t)]);function bo(t,e){return t+(e==="default"?"":e.replace(/^[a-z]/,n=>n.toUpperCase()))}let QI=[];const GAe=new WeakMap;function Dkt(){QI.forEach(t=>t(...GAe.get(t))),QI=[]}function Okt(t,...e){GAe.set(t,e),!QI.includes(t)&&QI.push(t)===1&&requestAnimationFrame(Dkt)}function Voe(t,e){let{target:n}=t;for(;n;){if(n.dataset&&n.dataset[e]!==void 0)return!0;n=n.parentElement}return!1}function e4(t){return t.composedPath()[0]||null}function Uoe(t){return typeof t=="string"?t.endsWith("px")?Number(t.slice(0,t.length-2)):Number(t):t}function Woe(t){if(t!=null)return typeof t=="number"?`${t}px`:t.endsWith("px")?t:`${t}px`}function LS(t,e){const n=t.trim().split(/\s+/g),r={top:n[0]};switch(n.length){case 1:r.right=n[0],r.bottom=n[0],r.left=n[0];break;case 2:r.right=n[1],r.left=n[1],r.bottom=n[0];break;case 3:r.right=n[1],r.bottom=n[2],r.left=n[1];break;case 4:r.right=n[1],r.bottom=n[2],r.left=n[3];break;default:throw new Error("[seemly/getMargin]:"+t+" is not a valid value.")}return r}const qoe={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function Pkt(t,e,n){e/=100,n/=100;let r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5)*255,r(3)*255,r(1)*255]}function Fkt(t,e,n){e/=100,n/=100;let r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0)*255,i(8)*255,i(4)*255]}const Yf="^\\s*",Zf="\\s*$",h0="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",fc="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Cy="([0-9A-Fa-f])",_y="([0-9A-Fa-f]{2})",KAe=new RegExp(`${Yf}hsl\\s*\\(${fc},${h0},${h0}\\)${Zf}`),XAe=new RegExp(`${Yf}hsv\\s*\\(${fc},${h0},${h0}\\)${Zf}`),YAe=new RegExp(`${Yf}hsla\\s*\\(${fc},${h0},${h0},${fc}\\)${Zf}`),ZAe=new RegExp(`${Yf}hsva\\s*\\(${fc},${h0},${h0},${fc}\\)${Zf}`),Bkt=new RegExp(`${Yf}rgb\\s*\\(${fc},${fc},${fc}\\)${Zf}`),jkt=new RegExp(`${Yf}rgba\\s*\\(${fc},${fc},${fc},${fc}\\)${Zf}`),$kt=new RegExp(`${Yf}#${Cy}${Cy}${Cy}${Zf}`),zkt=new RegExp(`${Yf}#${_y}${_y}${_y}${Zf}`),Hkt=new RegExp(`${Yf}#${Cy}${Cy}${Cy}${Cy}${Zf}`),Vkt=new RegExp(`${Yf}#${_y}${_y}${_y}${_y}${Zf}`);function fl(t){return parseInt(t,16)}function Ukt(t){try{let e;if(e=YAe.exec(t))return[t4(e[1]),Ng(e[5]),Ng(e[9]),gb(e[13])];if(e=KAe.exec(t))return[t4(e[1]),Ng(e[5]),Ng(e[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${t}.`)}catch(e){throw e}}function Wkt(t){try{let e;if(e=ZAe.exec(t))return[t4(e[1]),Ng(e[5]),Ng(e[9]),gb(e[13])];if(e=XAe.exec(t))return[t4(e[1]),Ng(e[5]),Ng(e[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${t}.`)}catch(e){throw e}}function Yb(t){try{let e;if(e=zkt.exec(t))return[fl(e[1]),fl(e[2]),fl(e[3]),1];if(e=Bkt.exec(t))return[ba(e[1]),ba(e[5]),ba(e[9]),1];if(e=jkt.exec(t))return[ba(e[1]),ba(e[5]),ba(e[9]),gb(e[13])];if(e=$kt.exec(t))return[fl(e[1]+e[1]),fl(e[2]+e[2]),fl(e[3]+e[3]),1];if(e=Vkt.exec(t))return[fl(e[1]),fl(e[2]),fl(e[3]),gb(fl(e[4])/255)];if(e=Hkt.exec(t))return[fl(e[1]+e[1]),fl(e[2]+e[2]),fl(e[3]+e[3]),gb(fl(e[4]+e[4])/255)];if(t in qoe)return Yb(qoe[t]);if(KAe.test(t)||YAe.test(t)){const[n,r,i,s]=Ukt(t);return[...Fkt(n,r,i),s]}else if(XAe.test(t)||ZAe.test(t)){const[n,r,i,s]=Wkt(t);return[...Pkt(n,r,i),s]}throw new Error(`[seemly/rgba]: Invalid color value ${t}.`)}catch(e){throw e}}function qkt(t){return t>1?1:t<0?0:t}function Vj(t,e,n,r){return`rgba(${ba(t)}, ${ba(e)}, ${ba(n)}, ${qkt(r)})`}function hP(t,e,n,r,i){return ba((t*e*(1-r)+n*r)/i)}function JAe(t,e){Array.isArray(t)||(t=Yb(t)),Array.isArray(e)||(e=Yb(e));const n=t[3],r=e[3],i=gb(n+r-n*r);return Vj(hP(t[0],n,e[0],r,i),hP(t[1],n,e[1],r,i),hP(t[2],n,e[2],r,i),i)}function QAe(t,e){const[n,r,i,s=1]=Array.isArray(t)?t:Yb(t);return typeof e.alpha=="number"?Vj(n,r,i,e.alpha):Vj(n,r,i,s)}function f_(t,e){const[n,r,i,s=1]=Array.isArray(t)?t:Yb(t),{lightness:o=1,alpha:a=1}=e;return Gkt([n*o,r*o,i*o,s*a])}function gb(t){const e=Math.round(Number(t)*100)/100;return e>1?1:e<0?0:e}function t4(t){const e=Math.round(Number(t));return e>=360||e<0?0:e}function ba(t){const e=Math.round(Number(t));return e>255?255:e<0?0:e}function Ng(t){const e=Math.round(Number(t));return e>100?100:e<0?0:e}function Gkt(t){const[e,n,r]=t;return 3 in t?`rgba(${ba(e)}, ${ba(n)}, ${ba(r)}, ${gb(t[3])})`:`rgba(${ba(e)}, ${ba(n)}, ${ba(r)}, 1)`}function RW(t=8){return Math.random().toString(16).slice(2,2+t)}function Kkt(t,e){const n=[];for(let r=0;r<t;++r)n.push(e);return n}function F6(t){return t.composedPath()[0]}const Xkt={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function Ykt(t,e,n){if(t==="mousemoveoutside"){const r=i=>{e.contains(F6(i))||n(i)};return{mousemove:r,touchstart:r}}else if(t==="clickoutside"){let r=!1;const i=o=>{r=!e.contains(F6(o))},s=o=>{r&&(e.contains(F6(o))||n(o))};return{mousedown:i,mouseup:s,touchstart:i,touchend:s}}return console.error(`[evtd/create-trap-handler]: name \`${t}\` is invalid. This could be a bug of evtd.`),{}}function eTe(t,e,n){const r=Xkt[t];let i=r.get(e);i===void 0&&r.set(e,i=new WeakMap);let s=i.get(n);return s===void 0&&i.set(n,s=Ykt(t,e,n)),s}function Zkt(t,e,n,r){if(t==="mousemoveoutside"||t==="clickoutside"){const i=eTe(t,e,n);return Object.keys(i).forEach(s=>{qs(s,document,i[s],r)}),!0}return!1}function Jkt(t,e,n,r){if(t==="mousemoveoutside"||t==="clickoutside"){const i=eTe(t,e,n);return Object.keys(i).forEach(s=>{ns(s,document,i[s],r)}),!0}return!1}function Qkt(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const t=new WeakMap,e=new WeakMap;function n(){t.set(this,!0)}function r(){t.set(this,!0),e.set(this,!0)}function i(k,_,N){const L=k[_];return k[_]=function(){return N.apply(k,arguments),L.apply(k,arguments)},k}function s(k,_){k[_]=Event.prototype[_]}const o=new WeakMap,a=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var k;return(k=o.get(this))!==null&&k!==void 0?k:null}function c(k,_){a!==void 0&&Object.defineProperty(k,"currentTarget",{configurable:!0,enumerable:!0,get:_??a.get})}const u={bubble:{},capture:{}},d={};function f(){const k=function(_){const{type:N,eventPhase:L,bubbles:M}=_,C=F6(_);if(L===2)return;const D=L===1?"capture":"bubble";let O=C;const $=[];for(;O===null&&(O=window),$.push(O),O!==window;)O=O.parentNode||null;const U=u.capture[N],W=u.bubble[N];if(i(_,"stopPropagation",n),i(_,"stopImmediatePropagation",r),c(_,l),D==="capture"){if(U===void 0)return;for(let ce=$.length-1;ce>=0&&!t.has(_);--ce){const se=$[ce],Q=U.get(se);if(Q!==void 0){o.set(_,se);for(const J of Q){if(e.has(_))break;J(_)}}if(ce===0&&!M&&W!==void 0){const J=W.get(se);if(J!==void 0)for(const K of J){if(e.has(_))break;K(_)}}}}else if(D==="bubble"){if(W===void 0)return;for(let ce=0;ce<$.length&&!t.has(_);++ce){const se=$[ce],Q=W.get(se);if(Q!==void 0){o.set(_,se);for(const J of Q){if(e.has(_))break;J(_)}}}}s(_,"stopPropagation"),s(_,"stopImmediatePropagation"),c(_)};return k.displayName="evtdUnifiedHandler",k}function h(){const k=function(_){const{type:N,eventPhase:L}=_;if(L!==2)return;const M=d[N];M!==void 0&&M.forEach(C=>C(_))};return k.displayName="evtdUnifiedWindowEventHandler",k}const m=f(),y=h();function w(k,_){const N=u[k];return N[_]===void 0&&(N[_]=new Map,window.addEventListener(_,m,k==="capture")),N[_]}function b(k){return d[k]===void 0&&(d[k]=new Set,window.addEventListener(k,y)),d[k]}function E(k,_){let N=k.get(_);return N===void 0&&k.set(_,N=new Set),N}function A(k,_,N,L){const M=u[_][N];if(M!==void 0){const C=M.get(k);if(C!==void 0&&C.has(L))return!0}return!1}function x(k,_){const N=d[k];return!!(N!==void 0&&N.has(_))}function T(k,_,N,L){let M;if(typeof L=="object"&&L.once===!0?M=U=>{R(k,_,M,L),N(U)}:M=N,Zkt(k,_,M,L))return;const D=L===!0||typeof L=="object"&&L.capture===!0?"capture":"bubble",O=w(D,k),$=E(O,_);if($.has(M)||$.add(M),_===window){const U=b(k);U.has(M)||U.add(M)}}function R(k,_,N,L){if(Jkt(k,_,N,L))return;const C=L===!0||typeof L=="object"&&L.capture===!0,D=C?"capture":"bubble",O=w(D,k),$=E(O,_);if(_===window&&!A(_,C?"bubble":"capture",k,N)&&x(k,N)){const W=d[k];W.delete(N),W.size===0&&(window.removeEventListener(k,y),d[k]=void 0)}$.has(N)&&$.delete(N),$.size===0&&O.delete(_),O.size===0&&(window.removeEventListener(k,m,D==="capture"),u[D][k]=void 0)}return{on:T,off:R}}const{on:qs,off:ns}=Qkt();function eCt(t){const e=Ve(!!t.value);if(e.value)return Nb(e);const n=gr(t,r=>{r&&(e.value=!0,n())});return Nb(e)}function ou(t){const e=pt(t),n=Ve(e.value);return gr(e,r=>{n.value=r}),typeof t=="function"?n:{__v_isRef:!0,get value(){return n.value},set value(r){t.set(r)}}}function tCt(){return Io()!==null}const nCt=typeof window<"u";let D1,bA;const rCt=()=>{var t,e;D1=nCt?(e=(t=document)===null||t===void 0?void 0:t.fonts)===null||e===void 0?void 0:e.ready:void 0,bA=!1,D1!==void 0?D1.then(()=>{bA=!0}):bA=!0};rCt();function iCt(t){if(bA)return;let e=!1;Ur(()=>{bA||D1==null||D1.then(()=>{e||t()})}),as(()=>{e=!0})}function MW(t,e){return gr(t,n=>{n!==void 0&&(e.value=n)}),pt(()=>t.value===void 0?e.value:t.value)}function LW(){const t=Ve(!1);return Ur(()=>{t.value=!0}),Nb(t)}function sCt(t,e){return pt(()=>{for(const n of e)if(t[n]!==void 0)return t[n];return t[e[e.length-1]]})}const oCt=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function aCt(){return oCt}function lCt(t={},e){const n=Oi({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:r,keyup:i}=t,s=l=>{switch(l.key){case"Control":n.ctrl=!0;break;case"Meta":n.command=!0,n.win=!0;break;case"Shift":n.shift=!0;break;case"Tab":n.tab=!0;break}r!==void 0&&Object.keys(r).forEach(c=>{if(c!==l.key)return;const u=r[c];if(typeof u=="function")u(l);else{const{stop:d=!1,prevent:f=!1}=u;d&&l.stopPropagation(),f&&l.preventDefault(),u.handler(l)}})},o=l=>{switch(l.key){case"Control":n.ctrl=!1;break;case"Meta":n.command=!1,n.win=!1;break;case"Shift":n.shift=!1;break;case"Tab":n.tab=!1;break}i!==void 0&&Object.keys(i).forEach(c=>{if(c!==l.key)return;const u=i[c];if(typeof u=="function")u(l);else{const{stop:d=!1,prevent:f=!1}=u;d&&l.stopPropagation(),f&&l.preventDefault(),u.handler(l)}})},a=()=>{(e===void 0||e.value)&&(qs("keydown",document,s),qs("keyup",document,o)),e!==void 0&&gr(e,l=>{l?(qs("keydown",document,s),qs("keyup",document,o)):(ns("keydown",document,s),ns("keyup",document,o))})};return tCt()?(qk(a),as(()=>{(e===void 0||e.value)&&(ns("keydown",document,s),ns("keyup",document,o))})):a(),Nb(n)}const cCt="n-internal-select-menu-body",DW="n-drawer-body",OW="n-modal-body",vM="n-popover-body",tTe="__disabled__";function Qx(t){const e=zr(OW,null),n=zr(DW,null),r=zr(vM,null),i=zr(cCt,null),s=Ve();if(typeof document<"u"){s.value=document.fullscreenElement;const o=()=>{s.value=document.fullscreenElement};Ur(()=>{qs("fullscreenchange",document,o)}),as(()=>{ns("fullscreenchange",document,o)})}return ou(()=>{var o;const{to:a}=t;return a!==void 0?a===!1?tTe:a===!0?s.value||"body":a:e!=null&&e.value?(o=e.value.$el)!==null&&o!==void 0?o:e.value:n!=null&&n.value?n.value:r!=null&&r.value?r.value:i!=null&&i.value?i.value:a??(s.value||"body")})}Qx.tdkey=tTe;Qx.propTo={type:[String,Object,Boolean],default:void 0};function uCt(t,e,n){const r=Ve(t.value);let i=null;return gr(t,s=>{i!==null&&window.clearTimeout(i),s===!0?n&&!n.value?r.value=!0:i=window.setTimeout(()=>{r.value=!0},e):r.value=!1}),r}const dCt=typeof document<"u"&&typeof window<"u";let Goe=!1;function fCt(){if(dCt&&window.CSS&&!Goe&&(Goe=!0,"registerProperty"in(window==null?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch{}}function hCt(t){const e={isDeactivated:!1};let n=!1;return whe(()=>{if(e.isDeactivated=!1,!n){n=!0;return}t()}),Jz(()=>{e.isDeactivated=!0,n||(n=!0)}),e}function Uj(t,e,n="default"){const r=e[n];if(r===void 0)throw new Error(`[vueuc/${t}]: slot[${n}] is empty.`);return r()}function Wj(t,e=!0,n=[]){return t.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(Fp(String(r)));return}if(Array.isArray(r)){Wj(r,e,n);return}if(r.type===xn){if(r.children===null)return;Array.isArray(r.children)&&Wj(r.children,e,n)}else r.type!==Ki&&n.push(r)}}),n}function Koe(t,e,n="default"){const r=e[n];if(r===void 0)throw new Error(`[vueuc/${t}]: slot[${n}] is empty.`);const i=Wj(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${t}]: slot[${n}] should have exactly one child.`)}let Lm=null;function nTe(){if(Lm===null&&(Lm=document.getElementById("v-binder-view-measurer"),Lm===null)){Lm=document.createElement("div"),Lm.id="v-binder-view-measurer";const{style:t}=Lm;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(Lm)}return Lm.getBoundingClientRect()}function pCt(t,e){const n=nTe();return{top:e,left:t,height:0,width:0,right:n.width-t,bottom:n.height-e}}function pP(t){const e=t.getBoundingClientRect(),n=nTe();return{left:e.left-n.left,top:e.top-n.top,bottom:n.height+n.top-e.bottom,right:n.width+n.left-e.right,width:e.width,height:e.height}}function mCt(t){return t.nodeType===9?null:t.parentNode}function rTe(t){if(t===null)return null;const e=mCt(t);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:n,overflowX:r,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(n+i+r))return e}return rTe(e)}const iTe=_r({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var e;va("VBinder",(e=Io())===null||e===void 0?void 0:e.proxy);const n=zr("VBinder",null),r=Ve(null),i=b=>{r.value=b,n&&t.syncTargetWithParent&&n.setTargetRef(b)};let s=[];const o=()=>{let b=r.value;for(;b=rTe(b),b!==null;)s.push(b);for(const E of s)qs("scroll",E,d,!0)},a=()=>{for(const b of s)ns("scroll",b,d,!0);s=[]},l=new Set,c=b=>{l.size===0&&o(),l.has(b)||l.add(b)},u=b=>{l.has(b)&&l.delete(b),l.size===0&&a()},d=()=>{Okt(f)},f=()=>{l.forEach(b=>b())},h=new Set,m=b=>{h.size===0&&qs("resize",window,w),h.has(b)||h.add(b)},y=b=>{h.has(b)&&h.delete(b),h.size===0&&ns("resize",window,w)},w=()=>{h.forEach(b=>b())};return as(()=>{ns("resize",window,w),a()}),{targetRef:r,setTargetRef:i,addScrollListener:c,removeScrollListener:u,addResizeListener:m,removeResizeListener:y}},render(){return Uj("binder",this.$slots)}}),sTe=_r({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=zr("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?wc(Koe("follower",this.$slots),[[e]]):Koe("follower",this.$slots)}}),mv="@@mmoContext",gCt={mounted(t,{value:e}){t[mv]={handler:void 0},typeof e=="function"&&(t[mv].handler=e,qs("mousemoveoutside",t,e))},updated(t,{value:e}){const n=t[mv];typeof e=="function"?n.handler?n.handler!==e&&(ns("mousemoveoutside",t,n.handler),n.handler=e,qs("mousemoveoutside",t,e)):(t[mv].handler=e,qs("mousemoveoutside",t,e)):n.handler&&(ns("mousemoveoutside",t,n.handler),n.handler=void 0)},unmounted(t){const{handler:e}=t[mv];e&&ns("mousemoveoutside",t,e),t[mv].handler=void 0}},gv="@@coContext",Xoe={mounted(t,{value:e,modifiers:n}){t[gv]={handler:void 0},typeof e=="function"&&(t[gv].handler=e,qs("clickoutside",t,e,{capture:n.capture}))},updated(t,{value:e,modifiers:n}){const r=t[gv];typeof e=="function"?r.handler?r.handler!==e&&(ns("clickoutside",t,r.handler,{capture:n.capture}),r.handler=e,qs("clickoutside",t,e,{capture:n.capture})):(t[gv].handler=e,qs("clickoutside",t,e,{capture:n.capture})):r.handler&&(ns("clickoutside",t,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(t,{modifiers:e}){const{handler:n}=t[gv];n&&ns("clickoutside",t,n,{capture:e.capture}),t[gv].handler=void 0}};function yCt(t,e){console.error(`[vdirs/${t}]: ${e}`)}class bCt{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,n){const{elementZIndex:r}=this;if(n!==void 0){e.style.zIndex=`${n}`,r.delete(e);return}const{nextZIndex:i}=this;r.has(e)&&r.get(e)+1===this.nextZIndex||(e.style.zIndex=`${i}`,r.set(e,i),this.nextZIndex=i+1,this.squashState())}unregister(e,n){const{elementZIndex:r}=this;r.has(e)?r.delete(e):n===void 0&&yCt("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((n,r)=>n[1]-r[1]),this.nextZIndex=2e3,e.forEach(n=>{const r=n[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}const mP=new bCt,yv="@@ziContext",oTe={mounted(t,e){const{value:n={}}=e,{zIndex:r,enabled:i}=n;t[yv]={enabled:!!i,initialized:!1},i&&(mP.ensureZIndex(t,r),t[yv].initialized=!0)},updated(t,e){const{value:n={}}=e,{zIndex:r,enabled:i}=n,s=t[yv].enabled;i&&!s&&(mP.ensureZIndex(t,r),t[yv].initialized=!0),t[yv].enabled=!!i},unmounted(t,e){if(!t[yv].initialized)return;const{value:n={}}=e,{zIndex:r}=n;mP.unregister(t,r)}},wCt="@css-render/vue3-ssr";function vCt(t,e){return`<style cssr-id="${t}">
${e}
</style>`}function xCt(t,e,n){const{styles:r,ids:i}=n;i.has(t)||r!==null&&(i.add(t),r.push(vCt(t,e)))}const ECt=typeof document<"u";function IC(){if(ECt)return;const t=zr(wCt,null);if(t!==null)return{adapter:(e,n)=>xCt(e,n,t),context:t}}function Yoe(t,e){console.error(`[vueuc/${t}]: ${e}`)}const{c:h_}=UAe(),SCt="vueuc-style";function Zoe(t){return typeof t=="string"?document.querySelector(t):t()||null}const ACt=_r({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(t){return{showTeleport:eCt($i(t,"show")),mergedTo:pt(()=>{const{to:e}=t;return e??"body"})}},render(){return this.showTeleport?this.disabled?Uj("lazy-teleport",this.$slots):ut(Xz,{disabled:this.disabled,to:this.mergedTo},Uj("lazy-teleport",this.$slots)):null}}),p_={top:"bottom",bottom:"top",left:"right",right:"left"},Joe={start:"end",center:"center",end:"start"},gP={top:"height",bottom:"height",left:"width",right:"width"},TCt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},kCt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},CCt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},Qoe={top:!0,bottom:!1,left:!0,right:!1},eae={top:"end",bottom:"start",left:"end",right:"start"};function _Ct(t,e,n,r,i,s){if(!i||s)return{placement:t,top:0,left:0};const[o,a]=t.split("-");let l=a??"center",c={top:0,left:0};const u=(h,m,y)=>{let w=0,b=0;const E=n[h]-e[m]-e[h];return E>0&&r&&(y?b=Qoe[m]?E:-E:w=Qoe[m]?E:-E),{left:w,top:b}},d=o==="left"||o==="right";if(l!=="center"){const h=CCt[t],m=p_[h],y=gP[h];if(n[y]>e[y]){if(e[h]+e[y]<n[y]){const w=(n[y]-e[y])/2;e[h]<w||e[m]<w?e[h]<e[m]?(l=Joe[a],c=u(y,m,d)):c=u(y,h,d):l="center"}}else n[y]<e[y]&&e[m]<0&&e[h]>e[m]&&(l=Joe[a])}else{const h=o==="bottom"||o==="top"?"left":"top",m=p_[h],y=gP[h],w=(n[y]-e[y])/2;(e[h]<w||e[m]<w)&&(e[h]>e[m]?(l=eae[h],c=u(y,h,d)):(l=eae[m],c=u(y,m,d)))}let f=o;return e[o]<n[gP[o]]&&e[o]<e[p_[o]]&&(f=p_[o]),{placement:l!=="center"?`${f}-${l}`:f,left:c.left,top:c.top}}function NCt(t,e){return e?kCt[t]:TCt[t]}function ICt(t,e,n,r,i,s){if(s)switch(t){case"bottom-start":return{top:`${Math.round(n.top-e.top+n.height)}px`,left:`${Math.round(n.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(n.top-e.top+n.height)}px`,left:`${Math.round(n.left-e.left+n.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(n.top-e.top)}px`,left:`${Math.round(n.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(n.top-e.top)}px`,left:`${Math.round(n.left-e.left+n.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(n.top-e.top)}px`,left:`${Math.round(n.left-e.left+n.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(n.top-e.top+n.height)}px`,left:`${Math.round(n.left-e.left+n.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(n.top-e.top)}px`,left:`${Math.round(n.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(n.top-e.top+n.height)}px`,left:`${Math.round(n.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(n.top-e.top)}px`,left:`${Math.round(n.left-e.left+n.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(n.top-e.top+n.height/2)}px`,left:`${Math.round(n.left-e.left+n.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(n.top-e.top+n.height/2)}px`,left:`${Math.round(n.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(n.top-e.top+n.height)}px`,left:`${Math.round(n.left-e.left+n.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(n.top-e.top+n.height+r)}px`,left:`${Math.round(n.left-e.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(n.top-e.top+n.height+r)}px`,left:`${Math.round(n.left-e.left+n.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(n.top-e.top+r)}px`,left:`${Math.round(n.left-e.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(n.top-e.top+r)}px`,left:`${Math.round(n.left-e.left+n.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(n.top-e.top+r)}px`,left:`${Math.round(n.left-e.left+n.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(n.top-e.top+n.height+r)}px`,left:`${Math.round(n.left-e.left+n.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(n.top-e.top+r)}px`,left:`${Math.round(n.left-e.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(n.top-e.top+n.height+r)}px`,left:`${Math.round(n.left-e.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(n.top-e.top+r)}px`,left:`${Math.round(n.left-e.left+n.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(n.top-e.top+n.height/2+r)}px`,left:`${Math.round(n.left-e.left+n.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(n.top-e.top+n.height/2+r)}px`,left:`${Math.round(n.left-e.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(n.top-e.top+n.height+r)}px`,left:`${Math.round(n.left-e.left+n.width/2+i)}px`,transform:"translateX(-50%)"}}}const RCt=h_([h_(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),h_(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[h_("> *",{pointerEvents:"all"})])]),aTe=_r({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=zr("VBinder"),n=ou(()=>t.enabled!==void 0?t.enabled:t.show),r=Ve(null),i=Ve(null),s=()=>{const{syncTrigger:f}=t;f.includes("scroll")&&e.addScrollListener(l),f.includes("resize")&&e.addResizeListener(l)},o=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};Ur(()=>{n.value&&(l(),s())});const a=IC();RCt.mount({id:"vueuc/binder",head:!0,anchorMetaName:SCt,ssr:a}),as(()=>{o()}),iCt(()=>{n.value&&l()});const l=()=>{if(!n.value)return;const f=r.value;if(f===null)return;const h=e.targetRef,{x:m,y,overlap:w}=t,b=m!==void 0&&y!==void 0?pCt(m,y):pP(h);f.style.setProperty("--v-target-width",`${Math.round(b.width)}px`),f.style.setProperty("--v-target-height",`${Math.round(b.height)}px`);const{width:E,minWidth:A,placement:x,internalShift:T,flip:R}=t;f.setAttribute("v-placement",x),w?f.setAttribute("v-overlap",""):f.removeAttribute("v-overlap");const{style:k}=f;E==="target"?k.width=`${b.width}px`:E!==void 0?k.width=E:k.width="",A==="target"?k.minWidth=`${b.width}px`:A!==void 0?k.minWidth=A:k.minWidth="";const _=pP(f),N=pP(i.value),{left:L,top:M,placement:C}=_Ct(x,b,_,T,R,w),D=NCt(C,w),{left:O,top:$,transform:U}=ICt(C,N,b,M,L,w);f.setAttribute("v-placement",C),f.style.setProperty("--v-offset-left",`${Math.round(L)}px`),f.style.setProperty("--v-offset-top",`${Math.round(M)}px`),f.style.transform=`translateX(${O}) translateY(${$}) ${U}`,f.style.setProperty("--v-transform-origin",D),f.style.transformOrigin=D};gr(n,f=>{f?(s(),c()):o()});const c=()=>{gi().then(l).catch(f=>console.error(f))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(f=>{gr($i(t,f),l)}),["teleportDisabled"].forEach(f=>{gr($i(t,f),c)}),gr($i(t,"syncTrigger"),f=>{f.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),f.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const u=LW(),d=ou(()=>{const{to:f}=t;if(f!==void 0)return f;u.value});return{VBinder:e,mergedEnabled:n,offsetContainerRef:i,followerRef:r,mergedTo:d,syncPosition:l}},render(){return ut(ACt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const n=ut("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[ut("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))]);return this.zindexable?wc(n,[[oTe,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):n}})}});var yb=[],MCt=function(){return yb.some(function(t){return t.activeTargets.length>0})},LCt=function(){return yb.some(function(t){return t.skippedTargets.length>0})},tae="ResizeObserver loop completed with undelivered notifications.",DCt=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:tae}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=tae),window.dispatchEvent(t)},BT;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(BT||(BT={}));var bb=function(t){return Object.freeze(t)},OCt=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,bb(this)}return t})(),lTe=(function(){function t(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,bb(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,i=e.top,s=e.right,o=e.bottom,a=e.left,l=e.width,c=e.height;return{x:n,y:r,top:i,right:s,bottom:o,left:a,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),PW=function(t){return t instanceof SVGElement&&"getBBox"in t},cTe=function(t){if(PW(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||t.getClientRects().length)},nae=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},PCt=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},wA=typeof window<"u"?window:{},m_=new WeakMap,rae=/auto|scroll/,FCt=/^tb|vertical/,BCt=/msie|trident/i.test(wA.navigator&&wA.navigator.userAgent),jd=function(t){return parseFloat(t||"0")},O1=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new OCt((n?e:t)||0,(n?t:e)||0)},iae=bb({devicePixelContentBoxSize:O1(),borderBoxSize:O1(),contentBoxSize:O1(),contentRect:new lTe(0,0,0,0)}),uTe=function(t,e){if(e===void 0&&(e=!1),m_.has(t)&&!e)return m_.get(t);if(cTe(t))return m_.set(t,iae),iae;var n=getComputedStyle(t),r=PW(t)&&t.ownerSVGElement&&t.getBBox(),i=!BCt&&n.boxSizing==="border-box",s=FCt.test(n.writingMode||""),o=!r&&rae.test(n.overflowY||""),a=!r&&rae.test(n.overflowX||""),l=r?0:jd(n.paddingTop),c=r?0:jd(n.paddingRight),u=r?0:jd(n.paddingBottom),d=r?0:jd(n.paddingLeft),f=r?0:jd(n.borderTopWidth),h=r?0:jd(n.borderRightWidth),m=r?0:jd(n.borderBottomWidth),y=r?0:jd(n.borderLeftWidth),w=d+c,b=l+u,E=y+h,A=f+m,x=a?t.offsetHeight-A-t.clientHeight:0,T=o?t.offsetWidth-E-t.clientWidth:0,R=i?w+E:0,k=i?b+A:0,_=r?r.width:jd(n.width)-R-T,N=r?r.height:jd(n.height)-k-x,L=_+w+T+E,M=N+b+x+A,C=bb({devicePixelContentBoxSize:O1(Math.round(_*devicePixelRatio),Math.round(N*devicePixelRatio),s),borderBoxSize:O1(L,M,s),contentBoxSize:O1(_,N,s),contentRect:new lTe(d,l,_,N)});return m_.set(t,C),C},dTe=function(t,e,n){var r=uTe(t,n),i=r.borderBoxSize,s=r.contentBoxSize,o=r.devicePixelContentBoxSize;switch(e){case BT.DEVICE_PIXEL_CONTENT_BOX:return o;case BT.BORDER_BOX:return i;default:return s}},jCt=(function(){function t(e){var n=uTe(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=bb([n.borderBoxSize]),this.contentBoxSize=bb([n.contentBoxSize]),this.devicePixelContentBoxSize=bb([n.devicePixelContentBoxSize])}return t})(),fTe=function(t){if(cTe(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},$Ct=function(){var t=1/0,e=[];yb.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(c){var u=new jCt(c.target),d=fTe(c.target);a.push(u),c.lastReportedSize=dTe(c.target,c.observedBox),d<t&&(t=d)}),e.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var i=r[n];i()}return t},sae=function(t){yb.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(fTe(i.target)>t?n.activeTargets.push(i):n.skippedTargets.push(i))})})},zCt=function(){var t=0;for(sae(t);MCt();)t=$Ct(),sae(t);return LCt()&&DCt(),t>0},yP,hTe=[],HCt=function(){return hTe.splice(0).forEach(function(t){return t()})},VCt=function(t){if(!yP){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return HCt()}).observe(n,r),yP=function(){n.textContent="".concat(e?e--:e++)}}hTe.push(t),yP()},UCt=function(t){VCt(function(){requestAnimationFrame(t)})},B6=0,WCt=function(){return!!B6},qCt=250,GCt={attributes:!0,characterData:!0,childList:!0,subtree:!0},oae=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],aae=function(t){return t===void 0&&(t=0),Date.now()+t},bP=!1,KCt=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=qCt),!bP){bP=!0;var r=aae(e);UCt(function(){var i=!1;try{i=zCt()}finally{if(bP=!1,e=r-aae(),!WCt())return;i?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,GCt)};document.body?n():wA.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),oae.forEach(function(n){return wA.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),oae.forEach(function(n){return wA.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),qj=new KCt,lae=function(t){!B6&&t>0&&qj.start(),B6+=t,!B6&&qj.stop()},XCt=function(t){return!PW(t)&&!PCt(t)&&getComputedStyle(t).display==="inline"},YCt=(function(){function t(e,n){this.target=e,this.observedBox=n||BT.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=dTe(this.target,this.observedBox,!0);return XCt(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),ZCt=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),g_=new WeakMap,cae=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},y_=(function(){function t(){}return t.connect=function(e,n){var r=new ZCt(e,n);g_.set(e,r)},t.observe=function(e,n,r){var i=g_.get(e),s=i.observationTargets.length===0;cae(i.observationTargets,n)<0&&(s&&yb.push(i),i.observationTargets.push(new YCt(n,r&&r.box)),lae(1),qj.schedule())},t.unobserve=function(e,n){var r=g_.get(e),i=cae(r.observationTargets,n),s=r.observationTargets.length===1;i>=0&&(s&&yb.splice(yb.indexOf(r),1),r.observationTargets.splice(i,1),lae(-1))},t.disconnect=function(e){var n=this,r=g_.get(e);r.observationTargets.slice().forEach(function(i){return n.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t})(),JCt=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");y_.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nae(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");y_.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nae(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");y_.unobserve(this,e)},t.prototype.disconnect=function(){y_.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();class QCt{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||JCt)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const n of e){const r=this.elHandlersMap.get(n.target);r!==void 0&&r(n)}}registerHandler(e,n){this.elHandlersMap.set(e,n),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const uae=new QCt,dae=_r({name:"ResizeObserver",props:{onResize:Function},setup(t){let e=!1;const n=Io().proxy;function r(i){const{onResize:s}=t;s!==void 0&&s(i)}Ur(()=>{const i=n.$el;if(i===void 0){Yoe("resize-observer","$el does not exist.");return}if(i.nextElementSibling!==i.nextSibling&&i.nodeType===3&&i.nodeValue!==""){Yoe("resize-observer","$el can not be observed (it may be a text node).");return}i.nextElementSibling!==null&&(uae.registerHandler(i.nextElementSibling,r),e=!0)}),as(()=>{e&&uae.unregisterHandler(n.$el.nextElementSibling)})},render(){return Che(this.$slots,"default")}});function pTe(t){return t instanceof HTMLElement}function mTe(t){for(let e=0;e<t.childNodes.length;e++){const n=t.childNodes[e];if(pTe(n)&&(yTe(n)||mTe(n)))return!0}return!1}function gTe(t){for(let e=t.childNodes.length-1;e>=0;e--){const n=t.childNodes[e];if(pTe(n)&&(yTe(n)||gTe(n)))return!0}return!1}function yTe(t){if(!e3t(t))return!1;try{t.focus({preventScroll:!0})}catch{}return document.activeElement===t}function e3t(t){if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.getAttribute("disabled"))return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return t.type!=="hidden"&&t.type!=="file";case"SELECT":case"TEXTAREA":return!0;default:return!1}}let WE=[];const t3t=_r({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:[String,Function],finalFocusTo:[String,Function],returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(t){const e=RW(),n=Ve(null),r=Ve(null);let i=!1,s=!1;const o=typeof document>"u"?null:document.activeElement;function a(){return WE[WE.length-1]===e}function l(w){var b;w.code==="Escape"&&a()&&((b=t.onEsc)===null||b===void 0||b.call(t,w))}Ur(()=>{gr(()=>t.active,w=>{w?(d(),qs("keydown",document,l)):(ns("keydown",document,l),i&&f())},{immediate:!0})}),as(()=>{ns("keydown",document,l),i&&f()});function c(w){if(!s&&a()){const b=u();if(b===null||b.contains(e4(w)))return;h("first")}}function u(){const w=n.value;if(w===null)return null;let b=w;for(;b=b.nextSibling,!(b===null||b instanceof Element&&b.tagName==="DIV"););return b}function d(){var w;if(!t.disabled){if(WE.push(e),t.autoFocus){const{initialFocusTo:b}=t;b===void 0?h("first"):(w=Zoe(b))===null||w===void 0||w.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",c,!0)}}function f(){var w;if(t.disabled||(document.removeEventListener("focus",c,!0),WE=WE.filter(E=>E!==e),a()))return;const{finalFocusTo:b}=t;b!==void 0?(w=Zoe(b))===null||w===void 0||w.focus({preventScroll:!0}):t.returnFocusOnDeactivated&&o instanceof HTMLElement&&(s=!0,o.focus({preventScroll:!0}),s=!1)}function h(w){if(a()&&t.active){const b=n.value,E=r.value;if(b!==null&&E!==null){const A=u();if(A==null||A===E){s=!0,b.focus({preventScroll:!0}),s=!1;return}s=!0;const x=w==="first"?mTe(A):gTe(A);s=!1,x||(s=!0,b.focus({preventScroll:!0}),s=!1)}}}function m(w){if(s)return;const b=u();b!==null&&(w.relatedTarget!==null&&b.contains(w.relatedTarget)?h("last"):h("first"))}function y(w){s||(w.relatedTarget!==null&&w.relatedTarget===n.value?h("last"):h("first"))}return{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:m,handleEndFocus:y}},render(){const{default:t}=this.$slots;if(t===void 0)return null;if(this.disabled)return t();const{active:e,focusableStyle:n}=this;return ut(xn,null,[ut("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),t(),ut("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}}),n3t=/^(\d|\.)+$/,fae=/(\d|\.)+/;function j6(t,{c:e=1,offset:n=0,attachPx:r=!0}={}){if(typeof t=="number"){const i=(t+n)*e;return i===0?"0":`${i}px`}else if(typeof t=="string")if(n3t.test(t)){const i=(Number(t)+n)*e;return r?i===0?"0":`${i}px`:`${i}`}else{const i=fae.exec(t);return i?t.replace(fae,String((Number(i[0])+n)*e)):t}return t}function hae(t){const{left:e,right:n,top:r,bottom:i}=LS(t);return`${r} ${e} ${i} ${n}`}let wP;function r3t(){return wP===void 0&&(wP=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),wP}const pae=new Set;function $v(t,e){const n=`[naive/${t}]: ${e}`;pae.has(n)||(pae.add(n),console.error(n))}function jT(t,e){console.error(`[naive/${t}]: ${e}`)}function FW(t,e){throw new Error(`[naive/${t}]: ${e}`)}function Gu(t,...e){if(Array.isArray(t))t.forEach(n=>Gu(n,...e));else return t(...e)}function i3t(t){return e=>{e?t.value=e.$el:t.value=null}}function Gj(t,e=!0,n=[]){return t.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(Fp(String(r)));return}if(Array.isArray(r)){Gj(r,e,n);return}if(r.type===xn){if(r.children===null)return;Array.isArray(r.children)&&Gj(r.children,e,n)}else{if(r.type===Ki&&e)return;n.push(r)}}}),n}function s3t(t,e="default",n=void 0){const r=t[e];if(!r)return jT("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=Gj(r(n));return i.length===1?i[0]:(jT("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function bTe(t,e=[],n){const r={};return e.forEach(i=>{r[i]=t[i]}),Object.assign(r,n)}function $T(t,...e){return typeof t=="function"?t(...e):typeof t=="string"?Fp(t):typeof t=="number"?Fp(String(t)):null}function BW(t){return t.some(e=>r0(e)?!(e.type===Ki||e.type===xn&&!BW(e.children)):!0)?t:null}function $6(t,e){const n=t&&BW(t());return e(n||null)}function mae(t){return!(t&&BW(t()))}const gae=_r({render(){var t,e;return(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t)}}),p0="n-config-provider",Kj="n";function Zp(t={},e={defaultBordered:!0}){const n=zr(p0,null);return{inlineThemeDisabled:n==null?void 0:n.inlineThemeDisabled,mergedRtlRef:n==null?void 0:n.mergedRtlRef,mergedComponentPropsRef:n==null?void 0:n.mergedComponentPropsRef,mergedBreakpointsRef:n==null?void 0:n.mergedBreakpointsRef,mergedBorderedRef:pt(()=>{var r,i;const{bordered:s}=t;return s!==void 0?s:(i=(r=n==null?void 0:n.mergedBorderedRef.value)!==null&&r!==void 0?r:e.defaultBordered)!==null&&i!==void 0?i:!0}),mergedClsPrefixRef:n?n.mergedClsPrefixRef:qm(Kj),namespaceRef:pt(()=>n==null?void 0:n.mergedNamespaceRef.value)}}function D2(t,e,n,r){n||FW("useThemeClass","cssVarsRef is not passed");const i=zr(p0,null),s=i==null?void 0:i.mergedThemeHashRef,o=i==null?void 0:i.styleMountTarget,a=Ve(""),l=IC();let c;const u=`__${t}`,d=()=>{let f=u;const h=e?e.value:void 0,m=s==null?void 0:s.value;m&&(f+=`-${m}`),h&&(f+=`-${h}`);const{themeOverrides:y,builtinThemeOverrides:w}=r;y&&(f+=`-${FT(JSON.stringify(y))}`),w&&(f+=`-${FT(JSON.stringify(w))}`),a.value=f,c=()=>{const b=n.value;let E="";for(const A in b)E+=`${A}: ${b[A]};`;en(`.${f}`,E).mount({id:f,ssr:l,parent:o}),c=void 0}};return n0(()=>{d()}),{themeClass:a,onRender:()=>{c==null||c()}}}var wTe=typeof lc=="object"&&lc&&lc.Object===Object&&lc,o3t=typeof self=="object"&&self&&self.Object===Object&&self,Jf=wTe||o3t||Function("return this")(),m0=Jf.Symbol,vTe=Object.prototype,a3t=vTe.hasOwnProperty,l3t=vTe.toString,qE=m0?m0.toStringTag:void 0;function c3t(t){var e=a3t.call(t,qE),n=t[qE];try{t[qE]=void 0;var r=!0}catch{}var i=l3t.call(t);return r&&(e?t[qE]=n:delete t[qE]),i}var u3t=Object.prototype,d3t=u3t.toString;function f3t(t){return d3t.call(t)}var h3t="[object Null]",p3t="[object Undefined]",yae=m0?m0.toStringTag:void 0;function yw(t){return t==null?t===void 0?p3t:h3t:yae&&yae in Object(t)?c3t(t):f3t(t)}function g0(t){return t!=null&&typeof t=="object"}var m3t="[object Symbol]";function jW(t){return typeof t=="symbol"||g0(t)&&yw(t)==m3t}function xTe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var du=Array.isArray,bae=m0?m0.prototype:void 0,wae=bae?bae.toString:void 0;function ETe(t){if(typeof t=="string")return t;if(du(t))return xTe(t,ETe)+"";if(jW(t))return wae?wae.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function _0(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function $W(t){return t}var g3t="[object AsyncFunction]",y3t="[object Function]",b3t="[object GeneratorFunction]",w3t="[object Proxy]";function zW(t){if(!_0(t))return!1;var e=yw(t);return e==y3t||e==b3t||e==g3t||e==w3t}var vP=Jf["__core-js_shared__"],vae=(function(){var t=/[^.]+$/.exec(vP&&vP.keys&&vP.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function v3t(t){return!!vae&&vae in t}var x3t=Function.prototype,E3t=x3t.toString;function bw(t){if(t!=null){try{return E3t.call(t)}catch{}try{return t+""}catch{}}return""}var S3t=/[\\^$.*+?()[\]{}|]/g,A3t=/^\[object .+?Constructor\]$/,T3t=Function.prototype,k3t=Object.prototype,C3t=T3t.toString,_3t=k3t.hasOwnProperty,N3t=RegExp("^"+C3t.call(_3t).replace(S3t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I3t(t){if(!_0(t)||v3t(t))return!1;var e=zW(t)?N3t:A3t;return e.test(bw(t))}function R3t(t,e){return t==null?void 0:t[e]}function ww(t,e){var n=R3t(t,e);return I3t(n)?n:void 0}var Xj=ww(Jf,"WeakMap"),xae=Object.create,M3t=(function(){function t(){}return function(e){if(!_0(e))return{};if(xae)return xae(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function L3t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function D3t(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var O3t=800,P3t=16,F3t=Date.now;function B3t(t){var e=0,n=0;return function(){var r=F3t(),i=P3t-(r-n);if(n=r,i>0){if(++e>=O3t)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function j3t(t){return function(){return t}}var n4=(function(){try{var t=ww(Object,"defineProperty");return t({},"",{}),t}catch{}})(),$3t=n4?function(t,e){return n4(t,"toString",{configurable:!0,enumerable:!1,value:j3t(e),writable:!0})}:$W,z3t=B3t($3t),H3t=9007199254740991,V3t=/^(?:0|[1-9]\d*)$/;function HW(t,e){var n=typeof t;return e=e??H3t,!!e&&(n=="number"||n!="symbol"&&V3t.test(t))&&t>-1&&t%1==0&&t<e}function VW(t,e,n){e=="__proto__"&&n4?n4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function RC(t,e){return t===e||t!==t&&e!==e}var U3t=Object.prototype,W3t=U3t.hasOwnProperty;function q3t(t,e,n){var r=t[e];(!(W3t.call(t,e)&&RC(r,n))||n===void 0&&!(e in t))&&VW(t,e,n)}function G3t(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?VW(n,a,l):q3t(n,a,l)}return n}var Eae=Math.max;function K3t(t,e,n){return e=Eae(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Eae(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),L3t(t,this,a)}}function X3t(t,e){return z3t(K3t(t,e,$W),t+"")}var Y3t=9007199254740991;function UW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Y3t}function O2(t){return t!=null&&UW(t.length)&&!zW(t)}function Z3t(t,e,n){if(!_0(n))return!1;var r=typeof e;return(r=="number"?O2(n)&&HW(e,n.length):r=="string"&&e in n)?RC(n[e],t):!1}function J3t(t){return X3t(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&Z3t(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var Q3t=Object.prototype;function WW(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Q3t;return t===n}function e5t(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var t5t="[object Arguments]";function Sae(t){return g0(t)&&yw(t)==t5t}var STe=Object.prototype,n5t=STe.hasOwnProperty,r5t=STe.propertyIsEnumerable,r4=Sae((function(){return arguments})())?Sae:function(t){return g0(t)&&n5t.call(t,"callee")&&!r5t.call(t,"callee")};function i5t(){return!1}var ATe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Aae=ATe&&typeof module=="object"&&module&&!module.nodeType&&module,s5t=Aae&&Aae.exports===ATe,Tae=s5t?Jf.Buffer:void 0,o5t=Tae?Tae.isBuffer:void 0,i4=o5t||i5t,a5t="[object Arguments]",l5t="[object Array]",c5t="[object Boolean]",u5t="[object Date]",d5t="[object Error]",f5t="[object Function]",h5t="[object Map]",p5t="[object Number]",m5t="[object Object]",g5t="[object RegExp]",y5t="[object Set]",b5t="[object String]",w5t="[object WeakMap]",v5t="[object ArrayBuffer]",x5t="[object DataView]",E5t="[object Float32Array]",S5t="[object Float64Array]",A5t="[object Int8Array]",T5t="[object Int16Array]",k5t="[object Int32Array]",C5t="[object Uint8Array]",_5t="[object Uint8ClampedArray]",N5t="[object Uint16Array]",I5t="[object Uint32Array]",ji={};ji[E5t]=ji[S5t]=ji[A5t]=ji[T5t]=ji[k5t]=ji[C5t]=ji[_5t]=ji[N5t]=ji[I5t]=!0;ji[a5t]=ji[l5t]=ji[v5t]=ji[c5t]=ji[x5t]=ji[u5t]=ji[d5t]=ji[f5t]=ji[h5t]=ji[p5t]=ji[m5t]=ji[g5t]=ji[y5t]=ji[b5t]=ji[w5t]=!1;function R5t(t){return g0(t)&&UW(t.length)&&!!ji[yw(t)]}function M5t(t){return function(e){return t(e)}}var TTe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vA=TTe&&typeof module=="object"&&module&&!module.nodeType&&module,L5t=vA&&vA.exports===TTe,xP=L5t&&wTe.process,kae=(function(){try{var t=vA&&vA.require&&vA.require("util").types;return t||xP&&xP.binding&&xP.binding("util")}catch{}})(),Cae=kae&&kae.isTypedArray,qW=Cae?M5t(Cae):R5t,D5t=Object.prototype,O5t=D5t.hasOwnProperty;function kTe(t,e){var n=du(t),r=!n&&r4(t),i=!n&&!r&&i4(t),s=!n&&!r&&!i&&qW(t),o=n||r||i||s,a=o?e5t(t.length,String):[],l=a.length;for(var c in t)(e||O5t.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||HW(c,l)))&&a.push(c);return a}function CTe(t,e){return function(n){return t(e(n))}}var P5t=CTe(Object.keys,Object),F5t=Object.prototype,B5t=F5t.hasOwnProperty;function j5t(t){if(!WW(t))return P5t(t);var e=[];for(var n in Object(t))B5t.call(t,n)&&n!="constructor"&&e.push(n);return e}function GW(t){return O2(t)?kTe(t):j5t(t)}function $5t(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var z5t=Object.prototype,H5t=z5t.hasOwnProperty;function V5t(t){if(!_0(t))return $5t(t);var e=WW(t),n=[];for(var r in t)r=="constructor"&&(e||!H5t.call(t,r))||n.push(r);return n}function _Te(t){return O2(t)?kTe(t,!0):V5t(t)}var U5t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W5t=/^\w*$/;function KW(t,e){if(du(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||jW(t)?!0:W5t.test(t)||!U5t.test(t)||e!=null&&t in Object(e)}var zT=ww(Object,"create");function q5t(){this.__data__=zT?zT(null):{},this.size=0}function G5t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var K5t="__lodash_hash_undefined__",X5t=Object.prototype,Y5t=X5t.hasOwnProperty;function Z5t(t){var e=this.__data__;if(zT){var n=e[t];return n===K5t?void 0:n}return Y5t.call(e,t)?e[t]:void 0}var J5t=Object.prototype,Q5t=J5t.hasOwnProperty;function e_t(t){var e=this.__data__;return zT?e[t]!==void 0:Q5t.call(e,t)}var t_t="__lodash_hash_undefined__";function n_t(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zT&&e===void 0?t_t:e,this}function Zb(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zb.prototype.clear=q5t;Zb.prototype.delete=G5t;Zb.prototype.get=Z5t;Zb.prototype.has=e_t;Zb.prototype.set=n_t;function r_t(){this.__data__=[],this.size=0}function xM(t,e){for(var n=t.length;n--;)if(RC(t[n][0],e))return n;return-1}var i_t=Array.prototype,s_t=i_t.splice;function o_t(t){var e=this.__data__,n=xM(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():s_t.call(e,n,1),--this.size,!0}function a_t(t){var e=this.__data__,n=xM(e,t);return n<0?void 0:e[n][1]}function l_t(t){return xM(this.__data__,t)>-1}function c_t(t,e){var n=this.__data__,r=xM(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Jp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Jp.prototype.clear=r_t;Jp.prototype.delete=o_t;Jp.prototype.get=a_t;Jp.prototype.has=l_t;Jp.prototype.set=c_t;var HT=ww(Jf,"Map");function u_t(){this.size=0,this.__data__={hash:new Zb,map:new(HT||Jp),string:new Zb}}function d_t(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function EM(t,e){var n=t.__data__;return d_t(e)?n[typeof e=="string"?"string":"hash"]:n.map}function f_t(t){var e=EM(this,t).delete(t);return this.size-=e?1:0,e}function h_t(t){return EM(this,t).get(t)}function p_t(t){return EM(this,t).has(t)}function m_t(t,e){var n=EM(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Qp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qp.prototype.clear=u_t;Qp.prototype.delete=f_t;Qp.prototype.get=h_t;Qp.prototype.has=p_t;Qp.prototype.set=m_t;var g_t="Expected a function";function XW(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(g_t);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(XW.Cache||Qp),n}XW.Cache=Qp;var y_t=500;function b_t(t){var e=XW(t,function(r){return n.size===y_t&&n.clear(),r}),n=e.cache;return e}var w_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v_t=/\\(\\)?/g,x_t=b_t(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(w_t,function(n,r,i,s){e.push(i?s.replace(v_t,"$1"):r||n)}),e});function NTe(t){return t==null?"":ETe(t)}function ITe(t,e){return du(t)?t:KW(t,e)?[t]:x_t(NTe(t))}function SM(t){if(typeof t=="string"||jW(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function RTe(t,e){e=ITe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[SM(e[n++])];return n&&n==r?t:void 0}function E_t(t,e,n){var r=t==null?void 0:RTe(t,e);return r===void 0?n:r}function S_t(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var MTe=CTe(Object.getPrototypeOf,Object),A_t="[object Object]",T_t=Function.prototype,k_t=Object.prototype,LTe=T_t.toString,C_t=k_t.hasOwnProperty,__t=LTe.call(Object);function N_t(t){if(!g0(t)||yw(t)!=A_t)return!1;var e=MTe(t);if(e===null)return!0;var n=C_t.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&LTe.call(n)==__t}function I_t(){this.__data__=new Jp,this.size=0}function R_t(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function M_t(t){return this.__data__.get(t)}function L_t(t){return this.__data__.has(t)}var D_t=200;function O_t(t,e){var n=this.__data__;if(n instanceof Jp){var r=n.__data__;if(!HT||r.length<D_t-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qp(r)}return n.set(t,e),this.size=n.size,this}function Rf(t){var e=this.__data__=new Jp(t);this.size=e.size}Rf.prototype.clear=I_t;Rf.prototype.delete=R_t;Rf.prototype.get=M_t;Rf.prototype.has=L_t;Rf.prototype.set=O_t;var DTe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_ae=DTe&&typeof module=="object"&&module&&!module.nodeType&&module,P_t=_ae&&_ae.exports===DTe,Nae=P_t?Jf.Buffer:void 0;Nae&&Nae.allocUnsafe;function F_t(t,e){return t.slice()}function B_t(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function j_t(){return[]}var $_t=Object.prototype,z_t=$_t.propertyIsEnumerable,Iae=Object.getOwnPropertySymbols,H_t=Iae?function(t){return t==null?[]:(t=Object(t),B_t(Iae(t),function(e){return z_t.call(t,e)}))}:j_t;function V_t(t,e,n){var r=e(t);return du(t)?r:S_t(r,n(t))}function Rae(t){return V_t(t,GW,H_t)}var Yj=ww(Jf,"DataView"),Zj=ww(Jf,"Promise"),Jj=ww(Jf,"Set"),Mae="[object Map]",U_t="[object Object]",Lae="[object Promise]",Dae="[object Set]",Oae="[object WeakMap]",Pae="[object DataView]",W_t=bw(Yj),q_t=bw(HT),G_t=bw(Zj),K_t=bw(Jj),X_t=bw(Xj),Um=yw;(Yj&&Um(new Yj(new ArrayBuffer(1)))!=Pae||HT&&Um(new HT)!=Mae||Zj&&Um(Zj.resolve())!=Lae||Jj&&Um(new Jj)!=Dae||Xj&&Um(new Xj)!=Oae)&&(Um=function(t){var e=yw(t),n=e==U_t?t.constructor:void 0,r=n?bw(n):"";if(r)switch(r){case W_t:return Pae;case q_t:return Mae;case G_t:return Lae;case K_t:return Dae;case X_t:return Oae}return e});var s4=Jf.Uint8Array;function Y_t(t){var e=new t.constructor(t.byteLength);return new s4(e).set(new s4(t)),e}function Z_t(t,e){var n=Y_t(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function J_t(t){return typeof t.constructor=="function"&&!WW(t)?M3t(MTe(t)):{}}var Q_t="__lodash_hash_undefined__";function e6t(t){return this.__data__.set(t,Q_t),this}function t6t(t){return this.__data__.has(t)}function o4(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Qp;++e<n;)this.add(t[e])}o4.prototype.add=o4.prototype.push=e6t;o4.prototype.has=t6t;function n6t(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function r6t(t,e){return t.has(e)}var i6t=1,s6t=2;function OTe(t,e,n,r,i,s){var o=n&i6t,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&s6t?new o4:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var m=t[d],y=e[d];if(r)var w=o?r(y,m,d,e,t,s):r(m,y,d,t,e,s);if(w!==void 0){if(w)continue;f=!1;break}if(h){if(!n6t(e,function(b,E){if(!r6t(h,E)&&(m===b||i(m,b,n,r,s)))return h.push(E)})){f=!1;break}}else if(!(m===y||i(m,y,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function o6t(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function a6t(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var l6t=1,c6t=2,u6t="[object Boolean]",d6t="[object Date]",f6t="[object Error]",h6t="[object Map]",p6t="[object Number]",m6t="[object RegExp]",g6t="[object Set]",y6t="[object String]",b6t="[object Symbol]",w6t="[object ArrayBuffer]",v6t="[object DataView]",Fae=m0?m0.prototype:void 0,EP=Fae?Fae.valueOf:void 0;function x6t(t,e,n,r,i,s,o){switch(n){case v6t:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w6t:return!(t.byteLength!=e.byteLength||!s(new s4(t),new s4(e)));case u6t:case d6t:case p6t:return RC(+t,+e);case f6t:return t.name==e.name&&t.message==e.message;case m6t:case y6t:return t==e+"";case h6t:var a=o6t;case g6t:var l=r&l6t;if(a||(a=a6t),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=c6t,o.set(t,e);var u=OTe(a(t),a(e),r,i,s,o);return o.delete(t),u;case b6t:if(EP)return EP.call(t)==EP.call(e)}return!1}var E6t=1,S6t=Object.prototype,A6t=S6t.hasOwnProperty;function T6t(t,e,n,r,i,s){var o=n&E6t,a=Rae(t),l=a.length,c=Rae(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:A6t.call(e,f)))return!1}var h=s.get(t),m=s.get(e);if(h&&m)return h==e&&m==t;var y=!0;s.set(t,e),s.set(e,t);for(var w=o;++d<l;){f=a[d];var b=t[f],E=e[f];if(r)var A=o?r(E,b,f,e,t,s):r(b,E,f,t,e,s);if(!(A===void 0?b===E||i(b,E,n,r,s):A)){y=!1;break}w||(w=f=="constructor")}if(y&&!w){var x=t.constructor,T=e.constructor;x!=T&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof T=="function"&&T instanceof T)&&(y=!1)}return s.delete(t),s.delete(e),y}var k6t=1,Bae="[object Arguments]",jae="[object Array]",b_="[object Object]",C6t=Object.prototype,$ae=C6t.hasOwnProperty;function _6t(t,e,n,r,i,s){var o=du(t),a=du(e),l=o?jae:Um(t),c=a?jae:Um(e);l=l==Bae?b_:l,c=c==Bae?b_:c;var u=l==b_,d=c==b_,f=l==c;if(f&&i4(t)){if(!i4(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new Rf),o||qW(t)?OTe(t,e,n,r,i,s):x6t(t,e,l,n,r,i,s);if(!(n&k6t)){var h=u&&$ae.call(t,"__wrapped__"),m=d&&$ae.call(e,"__wrapped__");if(h||m){var y=h?t.value():t,w=m?e.value():e;return s||(s=new Rf),i(y,w,n,r,s)}}return f?(s||(s=new Rf),T6t(t,e,n,r,i,s)):!1}function YW(t,e,n,r,i){return t===e?!0:t==null||e==null||!g0(t)&&!g0(e)?t!==t&&e!==e:_6t(t,e,n,r,YW,i)}var N6t=1,I6t=2;function R6t(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var a=o[0],l=t[a],c=o[1];if(o[2]){if(l===void 0&&!(a in t))return!1}else{var u=new Rf,d;if(!(d===void 0?YW(c,l,N6t|I6t,r,u):d))return!1}}return!0}function PTe(t){return t===t&&!_0(t)}function M6t(t){for(var e=GW(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,PTe(i)]}return e}function FTe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function L6t(t){var e=M6t(t);return e.length==1&&e[0][2]?FTe(e[0][0],e[0][1]):function(n){return n===t||R6t(n,t,e)}}function D6t(t,e){return t!=null&&e in Object(t)}function O6t(t,e,n){e=ITe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=SM(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&UW(i)&&HW(o,i)&&(du(t)||r4(t)))}function P6t(t,e){return t!=null&&O6t(t,e,D6t)}var F6t=1,B6t=2;function j6t(t,e){return KW(t)&&PTe(e)?FTe(SM(t),e):function(n){var r=E_t(n,t);return r===void 0&&r===e?P6t(n,t):YW(e,r,F6t|B6t)}}function $6t(t){return function(e){return e==null?void 0:e[t]}}function z6t(t){return function(e){return RTe(e,t)}}function H6t(t){return KW(t)?$6t(SM(t)):z6t(t)}function V6t(t){return typeof t=="function"?t:t==null?$W:typeof t=="object"?du(t)?j6t(t[0],t[1]):L6t(t):H6t(t)}function U6t(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(n(s[l],l,s)===!1)break}return e}}var BTe=U6t();function W6t(t,e){return t&&BTe(t,e,GW)}function q6t(t,e){return function(n,r){if(n==null)return n;if(!O2(n))return t(n,r);for(var i=n.length,s=-1,o=Object(n);++s<i&&r(o[s],s,o)!==!1;);return n}}var G6t=q6t(W6t);function Qj(t,e,n){(n!==void 0&&!RC(t[e],n)||n===void 0&&!(e in t))&&VW(t,e,n)}function K6t(t){return g0(t)&&O2(t)}function e$(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function X6t(t){return G3t(t,_Te(t))}function Y6t(t,e,n,r,i,s,o){var a=e$(t,n),l=e$(e,n),c=o.get(l);if(c){Qj(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=du(l),h=!f&&i4(l),m=!f&&!h&&qW(l);u=l,f||h||m?du(a)?u=a:K6t(a)?u=D3t(a):h?(d=!1,u=F_t(l)):m?(d=!1,u=Z_t(l)):u=[]:N_t(l)||r4(l)?(u=a,r4(a)?u=X6t(a):(!_0(a)||zW(a))&&(u=J_t(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Qj(t,n,u)}function jTe(t,e,n,r,i){t!==e&&BTe(e,function(s,o){if(i||(i=new Rf),_0(s))Y6t(t,e,o,n,jTe,r,i);else{var a=r?r(e$(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Qj(t,o,a)}},_Te)}function Z6t(t,e){var n=-1,r=O2(t)?Array(t.length):[];return G6t(t,function(i,s,o){r[++n]=e(i,s,o)}),r}function J6t(t,e){var n=du(t)?xTe:Z6t;return n(t,V6t(e))}var DS=J3t(function(t,e,n){jTe(t,e,n)});const VT="naive-ui-style";function AM(t,e,n){if(!e)return;const r=IC(),i=pt(()=>{const{value:a}=e;if(!a)return;const l=a[t];if(l)return l}),s=zr(p0,null),o=()=>{n0(()=>{const{value:a}=n,l=`${a}${t}Rtl`;if(Ckt(l,r))return;const{value:c}=i;c&&c.style.mount({id:l,head:!0,anchorMetaName:VT,props:{bPrefix:a?`.${a}-`:void 0},ssr:r,parent:s==null?void 0:s.styleMountTarget})})};return r?o():qk(o),i}const P2={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize:Q6t,fontFamily:eNt,lineHeight:tNt}=P2,$Te=en("body",`
 margin: 0;
 font-size: ${Q6t};
 font-family: ${eNt};
 line-height: ${tNt};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[en("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function Mo(t,e,n,r,i,s){const o=IC(),a=zr(p0,null);if(n){const c=()=>{const u=s==null?void 0:s.value;n.mount({id:u===void 0?e:u+e,head:!0,props:{bPrefix:u?`.${u}-`:void 0},anchorMetaName:VT,ssr:o,parent:a==null?void 0:a.styleMountTarget}),a!=null&&a.preflightStyleDisabled||$Te.mount({id:"n-global",head:!0,anchorMetaName:VT,ssr:o,parent:a==null?void 0:a.styleMountTarget})};o?c():qk(c)}return pt(()=>{var c;const{theme:{common:u,self:d,peers:f={}}={},themeOverrides:h={},builtinThemeOverrides:m={}}=i,{common:y,peers:w}=h,{common:b=void 0,[t]:{common:E=void 0,self:A=void 0,peers:x={}}={}}=(a==null?void 0:a.mergedThemeRef.value)||{},{common:T=void 0,[t]:R={}}=(a==null?void 0:a.mergedThemeOverridesRef.value)||{},{common:k,peers:_={}}=R,N=DS({},u||E||b||r.common,T,k,y),L=DS((c=d||A||r.self)===null||c===void 0?void 0:c(N),m,R,h);return{common:N,self:L,peers:DS({},r.peers,x,f),peerOverrides:DS({},m.peers,_,w)}})}Mo.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const nNt=_r({name:"ChevronRight",render(){return ut("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ut("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),{cubicBezierEaseInOut:zae}=P2;function rNt({name:t="fade-in",enterDuration:e="0.2s",leaveDuration:n="0.2s",enterCubicBezier:r=zae,leaveCubicBezier:i=zae}={}){return[en(`&.${t}-transition-enter-active`,{transition:`all ${e} ${r}!important`}),en(`&.${t}-transition-leave-active`,{transition:`all ${n} ${i}!important`}),en(`&.${t}-transition-enter-from, &.${t}-transition-leave-to`,{opacity:0}),en(`&.${t}-transition-leave-from, &.${t}-transition-enter-to`,{opacity:1})]}const Tn={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaAvatar:"0.2",alphaProgressRail:".08",alphaInput:"0",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},iNt=Yb(Tn.neutralBase),zTe=Yb(Tn.neutralInvertBase),sNt=`rgba(${zTe.slice(0,3).join(", ")}, `;function Hae(t){return`${sNt+String(t)})`}function oa(t){const e=Array.from(zTe);return e[3]=Number(t),JAe(iNt,e)}const N0=Object.assign(Object.assign({name:"common"},P2),{baseColor:Tn.neutralBase,primaryColor:Tn.primaryDefault,primaryColorHover:Tn.primaryHover,primaryColorPressed:Tn.primaryActive,primaryColorSuppl:Tn.primarySuppl,infoColor:Tn.infoDefault,infoColorHover:Tn.infoHover,infoColorPressed:Tn.infoActive,infoColorSuppl:Tn.infoSuppl,successColor:Tn.successDefault,successColorHover:Tn.successHover,successColorPressed:Tn.successActive,successColorSuppl:Tn.successSuppl,warningColor:Tn.warningDefault,warningColorHover:Tn.warningHover,warningColorPressed:Tn.warningActive,warningColorSuppl:Tn.warningSuppl,errorColor:Tn.errorDefault,errorColorHover:Tn.errorHover,errorColorPressed:Tn.errorActive,errorColorSuppl:Tn.errorSuppl,textColorBase:Tn.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:oa(Tn.alpha4),placeholderColor:oa(Tn.alpha4),placeholderColorDisabled:oa(Tn.alpha5),iconColor:oa(Tn.alpha4),iconColorHover:f_(oa(Tn.alpha4),{lightness:.75}),iconColorPressed:f_(oa(Tn.alpha4),{lightness:.9}),iconColorDisabled:oa(Tn.alpha5),opacity1:Tn.alpha1,opacity2:Tn.alpha2,opacity3:Tn.alpha3,opacity4:Tn.alpha4,opacity5:Tn.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:oa(Number(Tn.alphaClose)),closeIconColorHover:oa(Number(Tn.alphaClose)),closeIconColorPressed:oa(Number(Tn.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:oa(Tn.alpha4),clearColorHover:f_(oa(Tn.alpha4),{lightness:.75}),clearColorPressed:f_(oa(Tn.alpha4),{lightness:.9}),scrollbarColor:Hae(Tn.alphaScrollbar),scrollbarColorHover:Hae(Tn.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:oa(Tn.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:Tn.neutralPopover,tableColor:Tn.neutralCard,cardColor:Tn.neutralCard,modalColor:Tn.neutralModal,bodyColor:Tn.neutralBody,tagColor:"#eee",avatarColor:oa(Tn.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:oa(Tn.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:Tn.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),oNt={railInsetHorizontalBottom:"auto 2px 4px 2px",railInsetHorizontalTop:"4px 2px auto 2px",railInsetVerticalRight:"2px 4px 2px auto",railInsetVerticalLeft:"2px auto 2px 4px",railColor:"transparent"};function aNt(t){const{scrollbarColor:e,scrollbarColorHover:n,scrollbarHeight:r,scrollbarWidth:i,scrollbarBorderRadius:s}=t;return Object.assign(Object.assign({},oNt),{height:r,width:i,borderRadius:s,color:e,colorHover:n})}const HTe={name:"Scrollbar",common:N0,self:aNt},lNt=Dn("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[en(">",[Dn("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 min-height: inherit;
 max-height: inherit;
 scrollbar-width: none;
 `,[en("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),en(">",[Dn("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),en(">, +",[Dn("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 background: var(--n-scrollbar-rail-color);
 -webkit-user-select: none;
 `,[lr("horizontal",`
 height: var(--n-scrollbar-height);
 `,[en(">",[Xr("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),lr("horizontal--top",`
 top: var(--n-scrollbar-rail-top-horizontal-top); 
 right: var(--n-scrollbar-rail-right-horizontal-top); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-top); 
 left: var(--n-scrollbar-rail-left-horizontal-top); 
 `),lr("horizontal--bottom",`
 top: var(--n-scrollbar-rail-top-horizontal-bottom); 
 right: var(--n-scrollbar-rail-right-horizontal-bottom); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-bottom); 
 left: var(--n-scrollbar-rail-left-horizontal-bottom); 
 `),lr("vertical",`
 width: var(--n-scrollbar-width);
 `,[en(">",[Xr("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),lr("vertical--left",`
 top: var(--n-scrollbar-rail-top-vertical-left); 
 right: var(--n-scrollbar-rail-right-vertical-left); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-left); 
 left: var(--n-scrollbar-rail-left-vertical-left); 
 `),lr("vertical--right",`
 top: var(--n-scrollbar-rail-top-vertical-right); 
 right: var(--n-scrollbar-rail-right-vertical-right); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-right); 
 left: var(--n-scrollbar-rail-left-vertical-right); 
 `),lr("disabled",[en(">",[Xr("scrollbar","pointer-events: none;")])]),en(">",[Xr("scrollbar",`
 z-index: 1;
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[rNt(),en("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),cNt=Object.assign(Object.assign({},Mo.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean,yPlacement:{type:String,default:"right"},xPlacement:{type:String,default:"bottom"}}),uNt=_r({name:"Scrollbar",props:cNt,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e,inlineThemeDisabled:n,mergedRtlRef:r}=Zp(t),i=AM("Scrollbar",r,e),s=Ve(null),o=Ve(null),a=Ve(null),l=Ve(null),c=Ve(null),u=Ve(null),d=Ve(null),f=Ve(null),h=Ve(null),m=Ve(null),y=Ve(null),w=Ve(0),b=Ve(0),E=Ve(!1),A=Ve(!1);let x=!1,T=!1,R,k,_=0,N=0,L=0,M=0;const C=aCt(),D=Mo("Scrollbar","-scrollbar",lNt,HTe,t,e),O=pt(()=>{const{value:Ie}=f,{value:qe}=u,{value:Ye}=m;return Ie===null||qe===null||Ye===null?0:Math.min(Ie,Ye*Ie/qe+Uoe(D.value.self.width)*1.5)}),$=pt(()=>`${O.value}px`),U=pt(()=>{const{value:Ie}=h,{value:qe}=d,{value:Ye}=y;return Ie===null||qe===null||Ye===null?0:Ye*Ie/qe+Uoe(D.value.self.height)*1.5}),W=pt(()=>`${U.value}px`),ce=pt(()=>{const{value:Ie}=f,{value:qe}=w,{value:Ye}=u,{value:ft}=m;if(Ie===null||Ye===null||ft===null)return 0;{const We=Ye-Ie;return We?qe/We*(ft-O.value):0}}),se=pt(()=>`${ce.value}px`),Q=pt(()=>{const{value:Ie}=h,{value:qe}=b,{value:Ye}=d,{value:ft}=y;if(Ie===null||Ye===null||ft===null)return 0;{const We=Ye-Ie;return We?qe/We*(ft-U.value):0}}),J=pt(()=>`${Q.value}px`),K=pt(()=>{const{value:Ie}=f,{value:qe}=u;return Ie!==null&&qe!==null&&qe>Ie}),re=pt(()=>{const{value:Ie}=h,{value:qe}=d;return Ie!==null&&qe!==null&&qe>Ie}),X=pt(()=>{const{trigger:Ie}=t;return Ie==="none"||E.value}),me=pt(()=>{const{trigger:Ie}=t;return Ie==="none"||A.value}),G=pt(()=>{const{container:Ie}=t;return Ie?Ie():o.value}),B=pt(()=>{const{content:Ie}=t;return Ie?Ie():a.value}),z=(Ie,qe)=>{if(!t.scrollable)return;if(typeof Ie=="number"){ie(Ie,qe??0,0,!1,"auto");return}const{left:Ye,top:ft,index:We,elSize:nt,position:bt,behavior:ct,el:Ft,debounce:tn=!0}=Ie;(Ye!==void 0||ft!==void 0)&&ie(Ye??0,ft??0,0,!1,ct),Ft!==void 0?ie(0,Ft.offsetTop,Ft.offsetHeight,tn,ct):We!==void 0&&nt!==void 0?ie(0,We*nt,nt,tn,ct):bt==="bottom"?ie(0,Number.MAX_SAFE_INTEGER,0,!1,ct):bt==="top"&&ie(0,0,0,!1,ct)},de=hCt(()=>{t.container||z({top:w.value,left:b.value})}),Y=()=>{de.isDeactivated||Pe()},ee=Ie=>{if(de.isDeactivated)return;const{onResize:qe}=t;qe&&qe(Ie),Pe()},ae=(Ie,qe)=>{if(!t.scrollable)return;const{value:Ye}=G;Ye&&(typeof Ie=="object"?Ye.scrollBy(Ie):Ye.scrollBy(Ie,qe||0))};function ie(Ie,qe,Ye,ft,We){const{value:nt}=G;if(nt){if(ft){const{scrollTop:bt,offsetHeight:ct}=nt;if(qe>bt){qe+Ye<=bt+ct||nt.scrollTo({left:Ie,top:qe+Ye-ct,behavior:We});return}}nt.scrollTo({left:Ie,top:qe,behavior:We})}}function H(){te(),ye(),Pe()}function be(){Te()}function Te(){Z(),oe()}function Z(){k!==void 0&&window.clearTimeout(k),k=window.setTimeout(()=>{A.value=!1},t.duration)}function oe(){R!==void 0&&window.clearTimeout(R),R=window.setTimeout(()=>{E.value=!1},t.duration)}function te(){R!==void 0&&window.clearTimeout(R),E.value=!0}function ye(){k!==void 0&&window.clearTimeout(k),A.value=!0}function ke(Ie){const{onScroll:qe}=t;qe&&qe(Ie),we()}function we(){const{value:Ie}=G;Ie&&(w.value=Ie.scrollTop,b.value=Ie.scrollLeft*(i!=null&&i.value?-1:1))}function Ae(){const{value:Ie}=B;Ie&&(u.value=Ie.offsetHeight,d.value=Ie.offsetWidth);const{value:qe}=G;qe&&(f.value=qe.offsetHeight,h.value=qe.offsetWidth);const{value:Ye}=c,{value:ft}=l;Ye&&(y.value=Ye.offsetWidth),ft&&(m.value=ft.offsetHeight)}function Re(){const{value:Ie}=G;Ie&&(w.value=Ie.scrollTop,b.value=Ie.scrollLeft*(i!=null&&i.value?-1:1),f.value=Ie.offsetHeight,h.value=Ie.offsetWidth,u.value=Ie.scrollHeight,d.value=Ie.scrollWidth);const{value:qe}=c,{value:Ye}=l;qe&&(y.value=qe.offsetWidth),Ye&&(m.value=Ye.offsetHeight)}function Pe(){t.scrollable&&(t.useUnifiedContainer?Re():(Ae(),we()))}function Ce(Ie){var qe;return!(!((qe=s.value)===null||qe===void 0)&&qe.contains(e4(Ie)))}function Oe(Ie){Ie.preventDefault(),Ie.stopPropagation(),T=!0,qs("mousemove",window,Fe,!0),qs("mouseup",window,$e,!0),N=b.value,L=i!=null&&i.value?window.innerWidth-Ie.clientX:Ie.clientX}function Fe(Ie){if(!T)return;R!==void 0&&window.clearTimeout(R),k!==void 0&&window.clearTimeout(k);const{value:qe}=h,{value:Ye}=d,{value:ft}=U;if(qe===null||Ye===null)return;const nt=(i!=null&&i.value?window.innerWidth-Ie.clientX-L:Ie.clientX-L)*(Ye-qe)/(qe-ft),bt=Ye-qe;let ct=N+nt;ct=Math.min(bt,ct),ct=Math.max(ct,0);const{value:Ft}=G;if(Ft){Ft.scrollLeft=ct*(i!=null&&i.value?-1:1);const{internalOnUpdateScrollLeft:tn}=t;tn&&tn(ct)}}function $e(Ie){Ie.preventDefault(),Ie.stopPropagation(),ns("mousemove",window,Fe,!0),ns("mouseup",window,$e,!0),T=!1,Pe(),Ce(Ie)&&Te()}function he(Ie){Ie.preventDefault(),Ie.stopPropagation(),x=!0,qs("mousemove",window,q,!0),qs("mouseup",window,ne,!0),_=w.value,M=Ie.clientY}function q(Ie){if(!x)return;R!==void 0&&window.clearTimeout(R),k!==void 0&&window.clearTimeout(k);const{value:qe}=f,{value:Ye}=u,{value:ft}=O;if(qe===null||Ye===null)return;const nt=(Ie.clientY-M)*(Ye-qe)/(qe-ft),bt=Ye-qe;let ct=_+nt;ct=Math.min(bt,ct),ct=Math.max(ct,0);const{value:Ft}=G;Ft&&(Ft.scrollTop=ct)}function ne(Ie){Ie.preventDefault(),Ie.stopPropagation(),ns("mousemove",window,q,!0),ns("mouseup",window,ne,!0),x=!1,Pe(),Ce(Ie)&&Te()}n0(()=>{const{value:Ie}=re,{value:qe}=K,{value:Ye}=e,{value:ft}=c,{value:We}=l;ft&&(Ie?ft.classList.remove(`${Ye}-scrollbar-rail--disabled`):ft.classList.add(`${Ye}-scrollbar-rail--disabled`)),We&&(qe?We.classList.remove(`${Ye}-scrollbar-rail--disabled`):We.classList.add(`${Ye}-scrollbar-rail--disabled`))}),Ur(()=>{t.container||Pe()}),as(()=>{R!==void 0&&window.clearTimeout(R),k!==void 0&&window.clearTimeout(k),ns("mousemove",window,q,!0),ns("mouseup",window,ne,!0)});const Ee=pt(()=>{const{common:{cubicBezierEaseInOut:Ie},self:{color:qe,colorHover:Ye,height:ft,width:We,borderRadius:nt,railInsetHorizontalTop:bt,railInsetHorizontalBottom:ct,railInsetVerticalRight:Ft,railInsetVerticalLeft:tn,railColor:Zt}}=D.value,{top:ri,right:Ne,bottom:le,left:fe}=LS(bt),{top:ve,right:He,bottom:Xe,left:it}=LS(ct),{top:Lt,right:Bt,bottom:Wt,left:Jt}=LS(i!=null&&i.value?hae(Ft):Ft),{top:qt,right:et,bottom:Ze,left:Ue}=LS(i!=null&&i.value?hae(tn):tn);return{"--n-scrollbar-bezier":Ie,"--n-scrollbar-color":qe,"--n-scrollbar-color-hover":Ye,"--n-scrollbar-border-radius":nt,"--n-scrollbar-width":We,"--n-scrollbar-height":ft,"--n-scrollbar-rail-top-horizontal-top":ri,"--n-scrollbar-rail-right-horizontal-top":Ne,"--n-scrollbar-rail-bottom-horizontal-top":le,"--n-scrollbar-rail-left-horizontal-top":fe,"--n-scrollbar-rail-top-horizontal-bottom":ve,"--n-scrollbar-rail-right-horizontal-bottom":He,"--n-scrollbar-rail-bottom-horizontal-bottom":Xe,"--n-scrollbar-rail-left-horizontal-bottom":it,"--n-scrollbar-rail-top-vertical-right":Lt,"--n-scrollbar-rail-right-vertical-right":Bt,"--n-scrollbar-rail-bottom-vertical-right":Wt,"--n-scrollbar-rail-left-vertical-right":Jt,"--n-scrollbar-rail-top-vertical-left":qt,"--n-scrollbar-rail-right-vertical-left":et,"--n-scrollbar-rail-bottom-vertical-left":Ze,"--n-scrollbar-rail-left-vertical-left":Ue,"--n-scrollbar-rail-color":Zt}}),Se=n?D2("scrollbar",void 0,Ee,t):void 0;return Object.assign(Object.assign({},{scrollTo:z,scrollBy:ae,sync:Pe,syncUnifiedContainer:Re,handleMouseEnterWrapper:H,handleMouseLeaveWrapper:be}),{mergedClsPrefix:e,rtlEnabled:i,containerScrollTop:w,wrapperRef:s,containerRef:o,contentRef:a,yRailRef:l,xRailRef:c,needYBar:K,needXBar:re,yBarSizePx:$,xBarSizePx:W,yBarTopPx:se,xBarLeftPx:J,isShowXBar:X,isShowYBar:me,isIos:C,handleScroll:ke,handleContentResize:Y,handleContainerResize:ee,handleYScrollMouseDown:he,handleXScrollMouseDown:Oe,cssVars:n?void 0:Ee,themeClass:Se==null?void 0:Se.themeClass,onRender:Se==null?void 0:Se.onRender})},render(){var t;const{$slots:e,mergedClsPrefix:n,triggerDisplayManually:r,rtlEnabled:i,internalHoistYRail:s,yPlacement:o,xPlacement:a,xScrollable:l}=this;if(!this.scrollable)return(t=e.default)===null||t===void 0?void 0:t.call(e);const c=this.trigger==="none",u=(h,m)=>ut("div",{ref:"yRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--vertical`,`${n}-scrollbar-rail--vertical--${o}`,h],"data-scrollbar-rail":!0,style:[m||"",this.verticalRailStyle],"aria-hidden":!0},ut(c?gae:Ex,c?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?ut("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),d=()=>{var h,m;return(h=this.onRender)===null||h===void 0||h.call(this),ut("div",cw(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${n}-scrollbar`,this.themeClass,i&&`${n}-scrollbar--rtl`],style:this.cssVars,onMouseenter:r?void 0:this.handleMouseEnterWrapper,onMouseleave:r?void 0:this.handleMouseLeaveWrapper}),[this.container?(m=e.default)===null||m===void 0?void 0:m.call(e):ut("div",{role:"none",ref:"containerRef",class:[`${n}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},ut(dae,{onResize:this.handleContentResize},{default:()=>ut("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${n}-scrollbar-content`,this.contentClass]},e)})),s?null:u(void 0,void 0),l&&ut("div",{ref:"xRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--horizontal`,`${n}-scrollbar-rail--horizontal--${a}`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},ut(c?gae:Ex,c?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?ut("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:i?this.xBarLeftPx:void 0,left:i?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},f=this.container?d():ut(dae,{onResize:this.handleContainerResize},{default:d});return s?ut(xn,null,f,u(this.themeClass,this.cssVars)):f}}),VTe=uNt;function Vae(t){return Array.isArray(t)?t:[t]}const t$={STOP:"STOP"};function UTe(t,e){const n=e(t);t.children!==void 0&&n!==t$.STOP&&t.children.forEach(r=>UTe(r,e))}function dNt(t,e={}){const{preserveGroup:n=!1}=e,r=[],i=n?o=>{o.isLeaf||(r.push(o.key),s(o.children))}:o=>{o.isLeaf||(o.isGroup||r.push(o.key),s(o.children))};function s(o){o.forEach(i)}return s(t),r}function fNt(t,e){const{isLeaf:n}=t;return n!==void 0?n:!e(t)}function hNt(t){return t.children}function pNt(t){return t.key}function mNt(){return!1}function gNt(t,e){const{isLeaf:n}=t;return!(n===!1&&!Array.isArray(e(t)))}function yNt(t){return t.disabled===!0}function bNt(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function wNt(t,e){if(t.isLeaf===!0){const n=e(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}function SP(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function AP(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function vNt(t,e){const n=new Set(t);return e.forEach(r=>{n.has(r)||n.add(r)}),Array.from(n)}function xNt(t,e){const n=new Set(t);return e.forEach(r=>{n.has(r)&&n.delete(r)}),Array.from(n)}function ENt(t){return(t==null?void 0:t.type)==="group"}class SNt extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ANt(t,e,n,r){return a4(e.concat(t),n,r,!1)}function TNt(t,e){const n=new Set;return t.forEach(r=>{const i=e.treeNodeMap.get(r);if(i!==void 0){let s=i.parent;for(;s!==null&&!(s.disabled||n.has(s.key));)n.add(s.key),s=s.parent}}),n}function kNt(t,e,n,r){const i=a4(e,n,r,!1),s=a4(t,n,r,!0),o=TNt(t,n),a=[];return i.forEach(l=>{(s.has(l)||o.has(l))&&a.push(l)}),a.forEach(l=>i.delete(l)),i}function TP(t,e){const{checkedKeys:n,keysToCheck:r,keysToUncheck:i,indeterminateKeys:s,cascade:o,leafOnly:a,checkStrategy:l,allowNotLoaded:c}=t;if(!o)return r!==void 0?{checkedKeys:vNt(n,r),indeterminateKeys:Array.from(s)}:i!==void 0?{checkedKeys:xNt(n,i),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:u}=e;let d;i!==void 0?d=kNt(i,n,e,c):r!==void 0?d=ANt(r,n,e,c):d=a4(n,e,c,!1);const f=l==="parent",h=l==="child"||a,m=d,y=new Set,w=Math.max.apply(null,Array.from(u.keys()));for(let b=w;b>=0;b-=1){const E=b===0,A=u.get(b);for(const x of A){if(x.isLeaf)continue;const{key:T,shallowLoaded:R}=x;if(h&&R&&x.children.forEach(L=>{!L.disabled&&!L.isLeaf&&L.shallowLoaded&&m.has(L.key)&&m.delete(L.key)}),x.disabled||!R)continue;let k=!0,_=!1,N=!0;for(const L of x.children){const M=L.key;if(!L.disabled){if(N&&(N=!1),m.has(M))_=!0;else if(y.has(M)){_=!0,k=!1;break}else if(k=!1,_)break}}k&&!N?(f&&x.children.forEach(L=>{!L.disabled&&m.has(L.key)&&m.delete(L.key)}),m.add(T)):_&&y.add(T),E&&h&&m.has(T)&&m.delete(T)}}return{checkedKeys:Array.from(m),indeterminateKeys:Array.from(y)}}function a4(t,e,n,r){const{treeNodeMap:i,getChildren:s}=e,o=new Set,a=new Set(t);return t.forEach(l=>{const c=i.get(l);c!==void 0&&UTe(c,u=>{if(u.disabled)return t$.STOP;const{key:d}=u;if(!o.has(d)&&(o.add(d),a.add(d),bNt(u.rawNode,s))){if(r)return t$.STOP;if(!n)throw new SNt}})}),a}function CNt(t,{includeGroup:e=!1,includeSelf:n=!0},r){var i;const s=r.treeNodeMap;let o=t==null?null:(i=s.get(t))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:o};if(o!=null&&o.ignored)return a.treeNode=null,a;for(;o;)!o.ignored&&(e||!o.isGroup)&&a.treeNodePath.push(o),o=o.parent;return a.treeNodePath.reverse(),n||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function _Nt(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function NNt(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i+1)%r]:i===n.length-1?null:n[i+1]}function Uae(t,e,{loop:n=!1,includeDisabled:r=!1}={}){const i=e==="prev"?INt:NNt,s={reverse:e==="prev"};let o=!1,a=null;function l(c){if(c!==null){if(c===t){if(!o)o=!0;else if(!t.disabled&&!t.isGroup){a=t;return}}else if((!c.disabled||r)&&!c.ignored&&!c.isGroup){a=c;return}if(c.isGroup){const u=ZW(c,s);u!==null?a=u:l(i(c,n))}else{const u=i(c,!1);if(u!==null)l(u);else{const d=RNt(c);d!=null&&d.isGroup?l(i(d,n)):n&&l(i(c,!0))}}}}return l(t),a}function INt(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i-1+r)%r]:i===0?null:n[i-1]}function RNt(t){return t.parent}function ZW(t,e={}){const{reverse:n=!1}=e,{children:r}=t;if(r){const{length:i}=r,s=n?i-1:0,o=n?-1:i,a=n?-1:1;for(let l=s;l!==o;l+=a){const c=r[l];if(!c.disabled&&!c.ignored)if(c.isGroup){const u=ZW(c,e);if(u!==null)return u}else return c}}return null}const MNt={getChild(){return this.ignored?null:ZW(this)},getParent(){const{parent:t}=this;return t!=null&&t.isGroup?t.getParent():t},getNext(t={}){return Uae(this,"next",t)},getPrev(t={}){return Uae(this,"prev",t)}};function LNt(t,e){const n=e?new Set(e):void 0,r=[];function i(s){s.forEach(o=>{r.push(o),!(o.isLeaf||!o.children||o.ignored)&&(o.isGroup||n===void 0||n.has(o.key))&&i(o.children)})}return i(t),r}function DNt(t,e){const n=t.key;for(;e;){if(e.key===n)return!0;e=e.parent}return!1}function WTe(t,e,n,r,i,s=null,o=0){const a=[];return t.forEach((l,c)=>{var u;_e.env.NODE_ENV!=="production"&&wNt(l,i)&&console.error("[treemate]: node",l,"is invalid");const d=Object.create(r);if(d.rawNode=l,d.siblings=a,d.level=o,d.index=c,d.isFirstChild=c===0,d.isLastChild=c+1===t.length,d.parent=s,!d.ignored){const f=i(l);Array.isArray(f)&&(d.children=WTe(f,e,n,r,i,d,o+1))}a.push(d),e.set(d.key,d),n.has(o)||n.set(o,[]),(u=n.get(o))===null||u===void 0||u.push(d)}),a}function ONt(t,e={}){var n;const r=new Map,i=new Map,{getDisabled:s=yNt,getIgnored:o=mNt,getIsGroup:a=ENt,getKey:l=pNt}=e,c=(n=e.getChildren)!==null&&n!==void 0?n:hNt,u=e.ignoreEmptyChildren?x=>{const T=c(x);return Array.isArray(T)?T.length?T:null:T}:c,d=Object.assign({get key(){return l(this.rawNode)},get disabled(){return s(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return fNt(this.rawNode,u)},get shallowLoaded(){return gNt(this.rawNode,u)},get ignored(){return o(this.rawNode)},contains(x){return DNt(this,x)}},MNt),f=WTe(t,r,i,d,u);function h(x){if(x==null)return null;const T=r.get(x);return T&&!T.isGroup&&!T.ignored?T:null}function m(x){if(x==null)return null;const T=r.get(x);return T&&!T.ignored?T:null}function y(x,T){const R=m(x);return R?R.getPrev(T):null}function w(x,T){const R=m(x);return R?R.getNext(T):null}function b(x){const T=m(x);return T?T.getParent():null}function E(x){const T=m(x);return T?T.getChild():null}const A={treeNodes:f,treeNodeMap:r,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:u,getFlattenedNodes(x){return LNt(f,x)},getNode:h,getPrev:y,getNext:w,getParent:b,getChild:E,getFirstAvailableNode(){return _Nt(f)},getPath(x,T={}){return CNt(x,T,A)},getCheckedKeys(x,T={}){const{cascade:R=!0,leafOnly:k=!1,checkStrategy:_="all",allowNotLoaded:N=!1}=T;return TP({checkedKeys:SP(x),indeterminateKeys:AP(x),cascade:R,leafOnly:k,checkStrategy:_,allowNotLoaded:N},A)},check(x,T,R={}){const{cascade:k=!0,leafOnly:_=!1,checkStrategy:N="all",allowNotLoaded:L=!1}=R;return TP({checkedKeys:SP(T),indeterminateKeys:AP(T),keysToCheck:x==null?[]:Vae(x),cascade:k,leafOnly:_,checkStrategy:N,allowNotLoaded:L},A)},uncheck(x,T,R={}){const{cascade:k=!0,leafOnly:_=!1,checkStrategy:N="all",allowNotLoaded:L=!1}=R;return TP({checkedKeys:SP(T),indeterminateKeys:AP(T),keysToUncheck:x==null?[]:Vae(x),cascade:k,leafOnly:_,checkStrategy:N,allowNotLoaded:L},A)},getNonLeafKeys(x={}){return dNt(f,x)}};return A}const{cubicBezierEaseIn:Wae,cubicBezierEaseOut:qae}=P2;function PNt({transformOrigin:t="inherit",duration:e=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:i=""}={}){return[en("&.fade-in-scale-up-transition-leave-active",{transformOrigin:t,transition:`opacity ${e} ${Wae}, transform ${e} ${Wae} ${i&&`,${i}`}`}),en("&.fade-in-scale-up-transition-enter-active",{transformOrigin:t,transition:`opacity ${e} ${qae}, transform ${e} ${qae} ${i&&`,${i}`}`}),en("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),en("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}const FNt={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function BNt(t){const{boxShadow2:e,popoverColor:n,textColor2:r,borderRadius:i,fontSize:s,dividerColor:o}=t;return Object.assign(Object.assign({},FNt),{fontSize:s,borderRadius:i,color:n,dividerColor:o,textColor:r,boxShadow:e})}const JW={name:"Popover",common:N0,peers:{Scrollbar:HTe},self:BNt},kP={top:"bottom",bottom:"top",left:"right",right:"left"},Js="var(--n-arrow-height) * 1.414",jNt=en([Dn("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[en(">",[Dn("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),L1("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[L1("scrollable",[L1("show-header-or-footer","padding: var(--n-padding);")])]),Xr("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),Xr("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),lr("scrollable, show-header-or-footer",[Xr("content",`
 padding: var(--n-padding);
 `)])]),Dn("popover-shared",`
 transform-origin: inherit;
 `,[Dn("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[Dn("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${Js});
 height: calc(${Js});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),en("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),en("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),en("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),en("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),Oc("top-start",`
 top: calc(${Js} / -2);
 left: calc(${kh("top-start")} - var(--v-offset-left));
 `),Oc("top",`
 top: calc(${Js} / -2);
 transform: translateX(calc(${Js} / -2)) rotate(45deg);
 left: 50%;
 `),Oc("top-end",`
 top: calc(${Js} / -2);
 right: calc(${kh("top-end")} + var(--v-offset-left));
 `),Oc("bottom-start",`
 bottom: calc(${Js} / -2);
 left: calc(${kh("bottom-start")} - var(--v-offset-left));
 `),Oc("bottom",`
 bottom: calc(${Js} / -2);
 transform: translateX(calc(${Js} / -2)) rotate(45deg);
 left: 50%;
 `),Oc("bottom-end",`
 bottom: calc(${Js} / -2);
 right: calc(${kh("bottom-end")} + var(--v-offset-left));
 `),Oc("left-start",`
 left: calc(${Js} / -2);
 top: calc(${kh("left-start")} - var(--v-offset-top));
 `),Oc("left",`
 left: calc(${Js} / -2);
 transform: translateY(calc(${Js} / -2)) rotate(45deg);
 top: 50%;
 `),Oc("left-end",`
 left: calc(${Js} / -2);
 bottom: calc(${kh("left-end")} + var(--v-offset-top));
 `),Oc("right-start",`
 right: calc(${Js} / -2);
 top: calc(${kh("right-start")} - var(--v-offset-top));
 `),Oc("right",`
 right: calc(${Js} / -2);
 transform: translateY(calc(${Js} / -2)) rotate(45deg);
 top: 50%;
 `),Oc("right-end",`
 right: calc(${Js} / -2);
 bottom: calc(${kh("right-end")} + var(--v-offset-top));
 `),...J6t({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(t,e)=>{const n=["right","left"].includes(e),r=n?"width":"height";return t.map(i=>{const s=i.split("-")[1]==="end",a=`calc((${`var(--v-target-${r}, 0px)`} - ${Js}) / 2)`,l=kh(i);return en(`[v-placement="${i}"] >`,[Dn("popover-shared",[lr("center-arrow",[Dn("popover-arrow",`${e}: calc(max(${a}, ${l}) ${s?"+":"-"} var(--v-offset-${n?"left":"top"}));`)])])])})})]);function kh(t){return["top","bottom"].includes(t.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function Oc(t,e){const n=t.split("-")[0],r=["top","bottom"].includes(n)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return en(`[v-placement="${t}"] >`,[Dn("popover-shared",`
 margin-${kP[n]}: var(--n-space);
 `,[lr("show-arrow",`
 margin-${kP[n]}: var(--n-space-arrow);
 `),lr("overlap",`
 margin: 0;
 `),Lkt("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${n}: 100%;
 ${kP[n]}: auto;
 ${r}
 `,[Dn("popover-arrow",e)])])])}const qTe=Object.assign(Object.assign({},Mo.props),{to:Qx.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number});function GTe({arrowClass:t,arrowStyle:e,arrowWrapperClass:n,arrowWrapperStyle:r,clsPrefix:i}){return ut("div",{key:"__popover-arrow__",style:r,class:[`${i}-popover-arrow-wrapper`,n]},ut("div",{class:[`${i}-popover-arrow`,t],style:e}))}const $Nt=_r({name:"PopoverBody",inheritAttrs:!1,props:qTe,setup(t,{slots:e,attrs:n}){const{namespaceRef:r,mergedClsPrefixRef:i,inlineThemeDisabled:s,mergedRtlRef:o}=Zp(t),a=Mo("Popover","-popover",jNt,JW,t,i),l=AM("Popover",o,i),c=Ve(null),u=zr("NPopover"),d=Ve(null),f=Ve(t.show),h=Ve(!1);n0(()=>{const{show:N}=t;N&&!r3t()&&!t.internalDeactivateImmediately&&(h.value=!0)});const m=pt(()=>{const{trigger:N,onClickoutside:L}=t,M=[],{positionManuallyRef:{value:C}}=u;return C||(N==="click"&&!L&&M.push([Xoe,R,void 0,{capture:!0}]),N==="hover"&&M.push([gCt,T])),L&&M.push([Xoe,R,void 0,{capture:!0}]),(t.displayDirective==="show"||t.animated&&h.value)&&M.push([tFe,t.show]),M}),y=pt(()=>{const{common:{cubicBezierEaseInOut:N,cubicBezierEaseIn:L,cubicBezierEaseOut:M},self:{space:C,spaceArrow:D,padding:O,fontSize:$,textColor:U,dividerColor:W,color:ce,boxShadow:se,borderRadius:Q,arrowHeight:J,arrowOffset:K,arrowOffsetVertical:re}}=a.value;return{"--n-box-shadow":se,"--n-bezier":N,"--n-bezier-ease-in":L,"--n-bezier-ease-out":M,"--n-font-size":$,"--n-text-color":U,"--n-color":ce,"--n-divider-color":W,"--n-border-radius":Q,"--n-arrow-height":J,"--n-arrow-offset":K,"--n-arrow-offset-vertical":re,"--n-padding":O,"--n-space":C,"--n-space-arrow":D}}),w=pt(()=>{const N=t.width==="trigger"?void 0:j6(t.width),L=[];N&&L.push({width:N});const{maxWidth:M,minWidth:C}=t;return M&&L.push({maxWidth:j6(M)}),C&&L.push({maxWidth:j6(C)}),s||L.push(y.value),L}),b=s?D2("popover",void 0,y,t):void 0;u.setBodyInstance({syncPosition:E}),as(()=>{u.setBodyInstance(null)}),gr($i(t,"show"),N=>{t.animated||(N?f.value=!0:f.value=!1)});function E(){var N;(N=c.value)===null||N===void 0||N.syncPosition()}function A(N){t.trigger==="hover"&&t.keepAliveOnHover&&t.show&&u.handleMouseEnter(N)}function x(N){t.trigger==="hover"&&t.keepAliveOnHover&&u.handleMouseLeave(N)}function T(N){t.trigger==="hover"&&!k().contains(e4(N))&&u.handleMouseMoveOutside(N)}function R(N){(t.trigger==="click"&&!k().contains(e4(N))||t.onClickoutside)&&u.handleClickOutside(N)}function k(){return u.getTriggerElement()}va(vM,d),va(DW,null),va(OW,null);function _(){if(b==null||b.onRender(),!(t.displayDirective==="show"||t.show||t.animated&&h.value))return null;let L;const M=u.internalRenderBodyRef.value,{value:C}=i;if(M)L=M([`${C}-popover-shared`,(l==null?void 0:l.value)&&`${C}-popover--rtl`,b==null?void 0:b.themeClass.value,t.overlap&&`${C}-popover-shared--overlap`,t.showArrow&&`${C}-popover-shared--show-arrow`,t.arrowPointToCenter&&`${C}-popover-shared--center-arrow`],d,w.value,A,x);else{const{value:D}=u.extraClassRef,{internalTrapFocus:O}=t,$=!mae(e.header)||!mae(e.footer),U=()=>{var W,ce;const se=$?ut(xn,null,$6(e.header,K=>K?ut("div",{class:[`${C}-popover__header`,t.headerClass],style:t.headerStyle},K):null),$6(e.default,K=>K?ut("div",{class:[`${C}-popover__content`,t.contentClass],style:t.contentStyle},e):null),$6(e.footer,K=>K?ut("div",{class:[`${C}-popover__footer`,t.footerClass],style:t.footerStyle},K):null)):t.scrollable?(W=e.default)===null||W===void 0?void 0:W.call(e):ut("div",{class:[`${C}-popover__content`,t.contentClass],style:t.contentStyle},e),Q=t.scrollable?ut(VTe,{themeOverrides:a.value.peerOverrides.Scrollbar,theme:a.value.peers.Scrollbar,contentClass:$?void 0:`${C}-popover__content ${(ce=t.contentClass)!==null&&ce!==void 0?ce:""}`,contentStyle:$?void 0:t.contentStyle},{default:()=>se}):se,J=t.showArrow?GTe({arrowClass:t.arrowClass,arrowStyle:t.arrowStyle,arrowWrapperClass:t.arrowWrapperClass,arrowWrapperStyle:t.arrowWrapperStyle,clsPrefix:C}):null;return[Q,J]};L=ut("div",cw({class:[`${C}-popover`,`${C}-popover-shared`,(l==null?void 0:l.value)&&`${C}-popover--rtl`,b==null?void 0:b.themeClass.value,D.map(W=>`${C}-${W}`),{[`${C}-popover--scrollable`]:t.scrollable,[`${C}-popover--show-header-or-footer`]:$,[`${C}-popover--raw`]:t.raw,[`${C}-popover-shared--overlap`]:t.overlap,[`${C}-popover-shared--show-arrow`]:t.showArrow,[`${C}-popover-shared--center-arrow`]:t.arrowPointToCenter}],ref:d,style:w.value,onKeydown:u.handleKeydown,onMouseenter:A,onMouseleave:x},n),O?ut(t3t,{active:t.show,autoFocus:!0},{default:U}):U())}return wc(L,m.value)}return{displayed:h,namespace:r,isMounted:u.isMountedRef,zIndex:u.zIndexRef,followerRef:c,adjustedTo:Qx(t),followerEnabled:f,renderContentNode:_}},render(){return ut(aTe,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===Qx.tdkey},{default:()=>this.animated?ut(Ex,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var t;(t=this.internalOnAfterLeave)===null||t===void 0||t.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),zNt=Object.keys(qTe),HNt={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function VNt(t,e,n){HNt[e].forEach(r=>{t.props?t.props=Object.assign({},t.props):t.props={};const i=t.props[r],s=n[r];i?t.props[r]=(...o)=>{i(...o),s(...o)}:t.props[r]=s})}const TM={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:Qx.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},UNt=Object.assign(Object.assign(Object.assign({},Mo.props),TM),{internalOnAfterLeave:Function,internalRenderBody:Function}),KTe=_r({name:"Popover",inheritAttrs:!1,props:UNt,slots:Object,__popover__:!0,setup(t){_e.env.NODE_ENV!=="production"&&n0(()=>{t.maxWidth!==void 0&&$v("popover","`max-width` is deprecated, please use `style` instead."),t.minWidth!==void 0&&$v("popover","`min-width` is deprecated, please use `style` instead."),t.arrow!==void 0&&$v("popover","`arrow` is deprecated, please use `showArrow` instead."),t.onHide!==void 0&&$v("popover","`on-hide` is deprecated, please use `on-update:show` instead."),t.onShow!==void 0&&$v("popover","`on-show` is deprecated, please use `on-update:show` instead.")});const e=LW(),n=Ve(null),r=pt(()=>t.show),i=Ve(t.defaultShow),s=MW(r,i),o=ou(()=>t.disabled?!1:s.value),a=()=>{if(t.disabled)return!0;const{getDisabled:$}=t;return!!($!=null&&$())},l=()=>a()?!1:s.value,c=sCt(t,["arrow","showArrow"]),u=pt(()=>t.overlap?!1:c.value);let d=null;const f=Ve(null),h=Ve(null),m=ou(()=>t.x!==void 0&&t.y!==void 0);function y($){const{"onUpdate:show":U,onUpdateShow:W,onShow:ce,onHide:se}=t;i.value=$,U&&Gu(U,$),W&&Gu(W,$),$&&ce&&Gu(ce,!0),$&&se&&Gu(se,!1)}function w(){d&&d.syncPosition()}function b(){const{value:$}=f;$&&(window.clearTimeout($),f.value=null)}function E(){const{value:$}=h;$&&(window.clearTimeout($),h.value=null)}function A(){const $=a();if(t.trigger==="focus"&&!$){if(l())return;y(!0)}}function x(){const $=a();if(t.trigger==="focus"&&!$){if(!l())return;y(!1)}}function T(){const $=a();if(t.trigger==="hover"&&!$){if(E(),f.value!==null||l())return;const U=()=>{y(!0),f.value=null},{delay:W}=t;W===0?U():f.value=window.setTimeout(U,W)}}function R(){const $=a();if(t.trigger==="hover"&&!$){if(b(),h.value!==null||!l())return;const U=()=>{y(!1),h.value=null},{duration:W}=t;W===0?U():h.value=window.setTimeout(U,W)}}function k(){R()}function _($){var U;l()&&(t.trigger==="click"&&(b(),E(),y(!1)),(U=t.onClickoutside)===null||U===void 0||U.call(t,$))}function N(){if(t.trigger==="click"&&!a()){b(),E();const $=!l();y($)}}function L($){t.internalTrapFocus&&$.key==="Escape"&&(b(),E(),y(!1))}function M($){i.value=$}function C(){var $;return($=n.value)===null||$===void 0?void 0:$.targetRef}function D($){d=$}return va("NPopover",{getTriggerElement:C,handleKeydown:L,handleMouseEnter:T,handleMouseLeave:R,handleClickOutside:_,handleMouseMoveOutside:k,setBodyInstance:D,positionManuallyRef:m,isMountedRef:e,zIndexRef:$i(t,"zIndex"),extraClassRef:$i(t,"internalExtraClass"),internalRenderBodyRef:$i(t,"internalRenderBody")}),n0(()=>{s.value&&a()&&y(!1)}),{binderInstRef:n,positionManually:m,mergedShowConsideringDisabledProp:o,uncontrolledShow:i,mergedShowArrow:u,getMergedShow:l,setShow:M,handleClick:N,handleMouseEnter:T,handleMouseLeave:R,handleFocus:A,handleBlur:x,syncPosition:w}},render(){var t;const{positionManually:e,$slots:n}=this;let r,i=!1;if(!e&&(r=s3t(n,"trigger"),r)){r=ld(r),r=r.type===lw?ut("span",[r]):r;const s={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((t=r.type)===null||t===void 0)&&t.__popover__)i=!0,r.props||(r.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),r.props.internalSyncTargetWithParent=!0,r.props.internalInheritedEventHandlers?r.props.internalInheritedEventHandlers=[s,...r.props.internalInheritedEventHandlers]:r.props.internalInheritedEventHandlers=[s];else{const{internalInheritedEventHandlers:o}=this,a=[s,...o],l={onBlur:c=>{a.forEach(u=>{u.onBlur(c)})},onFocus:c=>{a.forEach(u=>{u.onFocus(c)})},onClick:c=>{a.forEach(u=>{u.onClick(c)})},onMouseenter:c=>{a.forEach(u=>{u.onMouseenter(c)})},onMouseleave:c=>{a.forEach(u=>{u.onMouseleave(c)})}};VNt(r,o?"nested":e?"manual":this.trigger,l)}}return ut(iTe,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const s=this.getMergedShow();return[this.internalTrapFocus&&s?wc(ut("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0}}),[[oTe,{enabled:s,zIndex:this.zIndex}]]):null,e?null:ut(sTe,null,{default:()=>r}),ut($Nt,bTe(this.$props,zNt,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:s})),{default:()=>{var o,a;return(a=(o=this.$slots).default)===null||a===void 0?void 0:a.call(o)},header:()=>{var o,a;return(a=(o=this.$slots).header)===null||a===void 0?void 0:a.call(o)},footer:()=>{var o,a;return(a=(o=this.$slots).footer)===null||a===void 0?void 0:a.call(o)}})]}})}}),WNt={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,styleMountTarget:Object,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(jT("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},XTe=_r({name:"ConfigProvider",alias:["App"],props:WNt,setup(t){const e=zr(p0,null),n=pt(()=>{const{theme:y}=t;if(y===null)return;const w=e==null?void 0:e.mergedThemeRef.value;return y===void 0?w:w===void 0?y:Object.assign({},w,y)}),r=pt(()=>{const{themeOverrides:y}=t;if(y!==null){if(y===void 0)return e==null?void 0:e.mergedThemeOverridesRef.value;{const w=e==null?void 0:e.mergedThemeOverridesRef.value;return w===void 0?y:DS({},w,y)}}}),i=ou(()=>{const{namespace:y}=t;return y===void 0?e==null?void 0:e.mergedNamespaceRef.value:y}),s=ou(()=>{const{bordered:y}=t;return y===void 0?e==null?void 0:e.mergedBorderedRef.value:y}),o=pt(()=>{const{icons:y}=t;return y===void 0?e==null?void 0:e.mergedIconsRef.value:y}),a=pt(()=>{const{componentOptions:y}=t;return y!==void 0?y:e==null?void 0:e.mergedComponentPropsRef.value}),l=pt(()=>{const{clsPrefix:y}=t;return y!==void 0?y:e?e.mergedClsPrefixRef.value:Kj}),c=pt(()=>{var y;const{rtl:w}=t;if(w===void 0)return e==null?void 0:e.mergedRtlRef.value;const b={};for(const E of w)b[E.name]=$s(E),(y=E.peers)===null||y===void 0||y.forEach(A=>{A.name in b||(b[A.name]=$s(A))});return b}),u=pt(()=>t.breakpoints||(e==null?void 0:e.mergedBreakpointsRef.value)),d=t.inlineThemeDisabled||(e==null?void 0:e.inlineThemeDisabled),f=t.preflightStyleDisabled||(e==null?void 0:e.preflightStyleDisabled),h=t.styleMountTarget||(e==null?void 0:e.styleMountTarget),m=pt(()=>{const{value:y}=n,{value:w}=r,b=w&&Object.keys(w).length!==0,E=y==null?void 0:y.name;return E?b?`${E}-${FT(JSON.stringify(r.value))}`:E:b?FT(JSON.stringify(r.value)):""});return va(p0,{mergedThemeHashRef:m,mergedBreakpointsRef:u,mergedRtlRef:c,mergedIconsRef:o,mergedComponentPropsRef:a,mergedBorderedRef:s,mergedNamespaceRef:i,mergedClsPrefixRef:l,mergedLocaleRef:pt(()=>{const{locale:y}=t;if(y!==null)return y===void 0?e==null?void 0:e.mergedLocaleRef.value:y}),mergedDateLocaleRef:pt(()=>{const{dateLocale:y}=t;if(y!==null)return y===void 0?e==null?void 0:e.mergedDateLocaleRef.value:y}),mergedHljsRef:pt(()=>{const{hljs:y}=t;return y===void 0?e==null?void 0:e.mergedHljsRef.value:y}),mergedKatexRef:pt(()=>{const{katex:y}=t;return y===void 0?e==null?void 0:e.mergedKatexRef.value:y}),mergedThemeRef:n,mergedThemeOverridesRef:r,inlineThemeDisabled:d||!1,preflightStyleDisabled:f||!1,styleMountTarget:h}),{mergedClsPrefix:l,mergedBordered:s,mergedNamespace:i,mergedTheme:n,mergedThemeOverrides:r}},render(){var t,e,n,r;return this.abstract?(r=(n=this.$slots).default)===null||r===void 0?void 0:r.call(n):ut(this.as||this.tag,{class:`${this.mergedClsPrefix||Kj}-config-provider`},(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))}}),qNt={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};function GNt(t){const{primaryColor:e,textColor2:n,dividerColor:r,hoverColor:i,popoverColor:s,invertedColor:o,borderRadius:a,fontSizeSmall:l,fontSizeMedium:c,fontSizeLarge:u,fontSizeHuge:d,heightSmall:f,heightMedium:h,heightLarge:m,heightHuge:y,textColor3:w,opacityDisabled:b}=t;return Object.assign(Object.assign({},qNt),{optionHeightSmall:f,optionHeightMedium:h,optionHeightLarge:m,optionHeightHuge:y,borderRadius:a,fontSizeSmall:l,fontSizeMedium:c,fontSizeLarge:u,fontSizeHuge:d,optionTextColor:n,optionTextColorHover:n,optionTextColorActive:e,optionTextColorChildActive:e,color:s,dividerColor:r,suffixColor:n,prefixColor:n,optionColorHover:i,optionColorActive:QAe(e,{alpha:.1}),groupHeaderTextColor:w,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:o,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:e,optionColorActiveInverted:e,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:b})}const KNt={name:"Dropdown",common:N0,peers:{Popover:JW},self:GNt},XNt={padding:"8px 14px"};function YNt(t){const{borderRadius:e,boxShadow2:n,baseColor:r}=t;return Object.assign(Object.assign({},XNt),{borderRadius:e,boxShadow:n,color:JAe(r,"rgba(0, 0, 0, .85)"),textColor:r})}const ZNt={name:"Tooltip",common:N0,peers:{Popover:JW},self:YNt},JNt=Object.assign(Object.assign({},TM),Mo.props),Gae=_r({name:"Tooltip",props:JNt,slots:Object,__popover__:!0,setup(t){const{mergedClsPrefixRef:e}=Zp(t),n=Mo("Tooltip","-tooltip",void 0,ZNt,t,e),r=Ve(null);return Object.assign(Object.assign({},{syncPosition(){r.value.syncPosition()},setShow(s){r.value.setShow(s)}}),{popoverRef:r,mergedTheme:n,popoverThemeOverrides:pt(()=>n.value.self)})},render(){const{mergedTheme:t,internalExtraClass:e}=this;return ut(KTe,Object.assign(Object.assign({},this.$props),{theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:e.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),QW="n-dropdown-menu",kM="n-dropdown",Kae="n-dropdown-option",YTe=_r({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return ut("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),QNt=_r({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:t,hasSubmenuRef:e}=zr(QW),{renderLabelRef:n,labelFieldRef:r,nodePropsRef:i,renderOptionRef:s}=zr(kM);return{labelField:r,showIcon:t,hasSubmenu:e,renderLabel:n,nodeProps:i,renderOption:s}},render(){var t;const{clsPrefix:e,hasSubmenu:n,showIcon:r,nodeProps:i,renderLabel:s,renderOption:o}=this,{rawNode:a}=this.tmNode,l=ut("div",Object.assign({class:`${e}-dropdown-option`},i==null?void 0:i(a)),ut("div",{class:`${e}-dropdown-option-body ${e}-dropdown-option-body--group`},ut("div",{"data-dropdown-option":!0,class:[`${e}-dropdown-option-body__prefix`,r&&`${e}-dropdown-option-body__prefix--show-icon`]},$T(a.icon)),ut("div",{class:`${e}-dropdown-option-body__label`,"data-dropdown-option":!0},s?s(a):$T((t=a.title)!==null&&t!==void 0?t:a[this.labelField])),ut("div",{class:[`${e}-dropdown-option-body__suffix`,n&&`${e}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return o?o({node:l,option:a}):l}});function eIt(t){const{textColorBase:e,opacity1:n,opacity2:r,opacity3:i,opacity4:s,opacity5:o}=t;return{color:e,opacity1Depth:n,opacity2Depth:r,opacity3Depth:i,opacity4Depth:s,opacity5Depth:o}}const tIt={common:N0,self:eIt},nIt=Dn("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
`,[lr("color-transition",{transition:"color .3s var(--n-bezier)"}),lr("depth",{color:"var(--n-color)"},[en("svg",{opacity:"var(--n-opacity)",transition:"opacity .3s var(--n-bezier)"})]),en("svg",{height:"1em",width:"1em"})]),rIt=Object.assign(Object.assign({},Mo.props),{depth:[String,Number],size:[Number,String],color:String,component:[Object,Function]}),iIt=_r({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:rIt,setup(t){const{mergedClsPrefixRef:e,inlineThemeDisabled:n}=Zp(t),r=Mo("Icon","-icon",nIt,tIt,t,e),i=pt(()=>{const{depth:o}=t,{common:{cubicBezierEaseInOut:a},self:l}=r.value;if(o!==void 0){const{color:c,[`opacity${o}Depth`]:u}=l;return{"--n-bezier":a,"--n-color":c,"--n-opacity":u}}return{"--n-bezier":a,"--n-color":"","--n-opacity":""}}),s=n?D2("icon",pt(()=>`${t.depth||"d"}`),i,t):void 0;return{mergedClsPrefix:e,mergedStyle:pt(()=>{const{size:o,color:a}=t;return{fontSize:j6(o),color:a}}),cssVars:n?void 0:i,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var t;const{$parent:e,depth:n,mergedClsPrefix:r,component:i,onRender:s,themeClass:o}=this;return!((t=e==null?void 0:e.$options)===null||t===void 0)&&t._n_icon__&&jT("icon","don't wrap `n-icon` inside `n-icon`"),s==null||s(),ut("i",cw(this.$attrs,{role:"img",class:[`${r}-icon`,o,{[`${r}-icon--depth`]:n,[`${r}-icon--color-transition`]:n!==void 0}],style:[this.cssVars,this.mergedStyle]}),i?ut(i):this.$slots)}});function n$(t,e){return t.type==="submenu"||t.type===void 0&&t[e]!==void 0}function sIt(t){return t.type==="group"}function ZTe(t){return t.type==="divider"}function oIt(t){return t.type==="render"}const JTe=_r({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(t){const e=zr(kM),{hoverKeyRef:n,keyboardKeyRef:r,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:s,activeKeyPathRef:o,animatedRef:a,mergedShowRef:l,renderLabelRef:c,renderIconRef:u,labelFieldRef:d,childrenFieldRef:f,renderOptionRef:h,nodePropsRef:m,menuPropsRef:y}=e,w=zr(Kae,null),b=zr(QW),E=zr(vM),A=pt(()=>t.tmNode.rawNode),x=pt(()=>{const{value:W}=f;return n$(t.tmNode.rawNode,W)}),T=pt(()=>{const{disabled:W}=t.tmNode;return W}),R=pt(()=>{if(!x.value)return!1;const{key:W,disabled:ce}=t.tmNode;if(ce)return!1;const{value:se}=n,{value:Q}=r,{value:J}=i,{value:K}=s;return se!==null?K.includes(W):Q!==null?K.includes(W)&&K[K.length-1]!==W:J!==null?K.includes(W):!1}),k=pt(()=>r.value===null&&!a.value),_=uCt(R,300,k),N=pt(()=>!!(w!=null&&w.enteringSubmenuRef.value)),L=Ve(!1);va(Kae,{enteringSubmenuRef:L});function M(){L.value=!0}function C(){L.value=!1}function D(){const{parentKey:W,tmNode:ce}=t;ce.disabled||l.value&&(i.value=W,r.value=null,n.value=ce.key)}function O(){const{tmNode:W}=t;W.disabled||l.value&&n.value!==W.key&&D()}function $(W){if(t.tmNode.disabled||!l.value)return;const{relatedTarget:ce}=W;ce&&!Voe({target:ce},"dropdownOption")&&!Voe({target:ce},"scrollbarRail")&&(n.value=null)}function U(){const{value:W}=x,{tmNode:ce}=t;l.value&&!W&&!ce.disabled&&(e.doSelect(ce.key,ce.rawNode),e.doUpdateShow(!1))}return{labelField:d,renderLabel:c,renderIcon:u,siblingHasIcon:b.showIconRef,siblingHasSubmenu:b.hasSubmenuRef,menuProps:y,popoverBody:E,animated:a,mergedShowSubmenu:pt(()=>_.value&&!N.value),rawNode:A,hasSubmenu:x,pending:ou(()=>{const{value:W}=s,{key:ce}=t.tmNode;return W.includes(ce)}),childActive:ou(()=>{const{value:W}=o,{key:ce}=t.tmNode,se=W.findIndex(Q=>ce===Q);return se===-1?!1:se<W.length-1}),active:ou(()=>{const{value:W}=o,{key:ce}=t.tmNode,se=W.findIndex(Q=>ce===Q);return se===-1?!1:se===W.length-1}),mergedDisabled:T,renderOption:h,nodeProps:m,handleClick:U,handleMouseMove:O,handleMouseEnter:D,handleMouseLeave:$,handleSubmenuBeforeEnter:M,handleSubmenuAfterEnter:C}},render(){var t,e;const{animated:n,rawNode:r,mergedShowSubmenu:i,clsPrefix:s,siblingHasIcon:o,siblingHasSubmenu:a,renderLabel:l,renderIcon:c,renderOption:u,nodeProps:d,props:f,scrollable:h}=this;let m=null;if(i){const E=(t=this.menuProps)===null||t===void 0?void 0:t.call(this,r,r.children);m=ut(QTe,Object.assign({},E,{clsPrefix:s,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const y={class:[`${s}-dropdown-option-body`,this.pending&&`${s}-dropdown-option-body--pending`,this.active&&`${s}-dropdown-option-body--active`,this.childActive&&`${s}-dropdown-option-body--child-active`,this.mergedDisabled&&`${s}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},w=d==null?void 0:d(r),b=ut("div",Object.assign({class:[`${s}-dropdown-option`,w==null?void 0:w.class],"data-dropdown-option":!0},w),ut("div",cw(y,f),[ut("div",{class:[`${s}-dropdown-option-body__prefix`,o&&`${s}-dropdown-option-body__prefix--show-icon`]},[c?c(r):$T(r.icon)]),ut("div",{"data-dropdown-option":!0,class:`${s}-dropdown-option-body__label`},l?l(r):$T((e=r[this.labelField])!==null&&e!==void 0?e:r.title)),ut("div",{"data-dropdown-option":!0,class:[`${s}-dropdown-option-body__suffix`,a&&`${s}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?ut(iIt,null,{default:()=>ut(nNt,null)}):null)]),this.hasSubmenu?ut(iTe,null,{default:()=>[ut(sTe,null,{default:()=>ut("div",{class:`${s}-dropdown-offset-container`},ut(aTe,{show:this.mergedShowSubmenu,placement:this.placement,to:h&&this.popoverBody||void 0,teleportDisabled:!h},{default:()=>ut("div",{class:`${s}-dropdown-menu-wrapper`},n?ut(Ex,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>m}):m)}))})]}):null);return u?u({node:b,option:r}):b}}),aIt=_r({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:t,parentKey:e,clsPrefix:n}=this,{children:r}=t;return ut(xn,null,ut(QNt,{clsPrefix:n,tmNode:t,key:t.key}),r==null?void 0:r.map(i=>{const{rawNode:s}=i;return s.show===!1?null:ZTe(s)?ut(YTe,{clsPrefix:n,key:i.key}):i.isGroup?(jT("dropdown","`group` node is not allowed to be put in `group` node."),null):ut(JTe,{clsPrefix:n,tmNode:i,parentKey:e,key:i.key})}))}}),lIt=_r({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:t,props:e}}=this.tmNode;return ut("div",e,[t==null?void 0:t()])}}),QTe=_r({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(t){const{renderIconRef:e,childrenFieldRef:n}=zr(kM);va(QW,{showIconRef:pt(()=>{const i=e.value;return t.tmNodes.some(s=>{var o;if(s.isGroup)return(o=s.children)===null||o===void 0?void 0:o.some(({rawNode:l})=>i?i(l):l.icon);const{rawNode:a}=s;return i?i(a):a.icon})}),hasSubmenuRef:pt(()=>{const{value:i}=n;return t.tmNodes.some(s=>{var o;if(s.isGroup)return(o=s.children)===null||o===void 0?void 0:o.some(({rawNode:l})=>n$(l,i));const{rawNode:a}=s;return n$(a,i)})})});const r=Ve(null);return va(OW,null),va(DW,null),va(vM,r),{bodyRef:r}},render(){const{parentKey:t,clsPrefix:e,scrollable:n}=this,r=this.tmNodes.map(i=>{const{rawNode:s}=i;return s.show===!1?null:oIt(s)?ut(lIt,{tmNode:i,key:i.key}):ZTe(s)?ut(YTe,{clsPrefix:e,key:i.key}):sIt(s)?ut(aIt,{clsPrefix:e,tmNode:i,parentKey:t,key:i.key}):ut(JTe,{clsPrefix:e,tmNode:i,parentKey:t,key:i.key,props:s.props,scrollable:n})});return ut("div",{class:[`${e}-dropdown-menu`,n&&`${e}-dropdown-menu--scrollable`],ref:"bodyRef"},n?ut(VTe,{contentClass:`${e}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?GTe({clsPrefix:e,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),cIt=Dn("dropdown-menu",`
 transform-origin: var(--v-transform-origin);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[PNt(),Dn("dropdown-option",`
 position: relative;
 `,[en("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[en("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),Dn("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[en("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),L1("disabled",[lr("pending",`
 color: var(--n-option-text-color-hover);
 `,[Xr("prefix, suffix",`
 color: var(--n-option-text-color-hover);
 `),en("&::before","background-color: var(--n-option-color-hover);")]),lr("active",`
 color: var(--n-option-text-color-active);
 `,[Xr("prefix, suffix",`
 color: var(--n-option-text-color-active);
 `),en("&::before","background-color: var(--n-option-color-active);")]),lr("child-active",`
 color: var(--n-option-text-color-child-active);
 `,[Xr("prefix, suffix",`
 color: var(--n-option-text-color-child-active);
 `)])]),lr("disabled",`
 cursor: not-allowed;
 opacity: var(--n-option-opacity-disabled);
 `),lr("group",`
 font-size: calc(var(--n-font-size) - 1px);
 color: var(--n-group-header-text-color);
 `,[Xr("prefix",`
 width: calc(var(--n-option-prefix-width) / 2);
 `,[lr("show-icon",`
 width: calc(var(--n-option-icon-prefix-width) / 2);
 `)])]),Xr("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 z-index: 1;
 `,[lr("show-icon",`
 width: var(--n-option-icon-prefix-width);
 `),Dn("icon",`
 font-size: var(--n-option-icon-size);
 `)]),Xr("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),Xr("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 z-index: 1;
 `,[lr("has-submenu",`
 width: var(--n-option-icon-suffix-width);
 `),Dn("icon",`
 font-size: var(--n-option-icon-size);
 `)]),Dn("dropdown-menu","pointer-events: all;")]),Dn("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),Dn("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),Dn("dropdown-menu-wrapper",`
 transform-origin: var(--v-transform-origin);
 width: fit-content;
 `),en(">",[Dn("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),L1("scrollable",`
 padding: var(--n-padding);
 `),lr("scrollable",[Xr("content",`
 padding: var(--n-padding);
 `)])]),uIt={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},dIt=Object.keys(TM),fIt=Object.assign(Object.assign(Object.assign({},TM),uIt),Mo.props),eq=_r({name:"Dropdown",inheritAttrs:!1,props:fIt,setup(t){const e=Ve(!1),n=MW($i(t,"show"),e),r=pt(()=>{const{keyField:C,childrenField:D}=t;return ONt(t.options,{getKey(O){return O[C]},getDisabled(O){return O.disabled===!0},getIgnored(O){return O.type==="divider"||O.type==="render"},getChildren(O){return O[D]}})}),i=pt(()=>r.value.treeNodes),s=Ve(null),o=Ve(null),a=Ve(null),l=pt(()=>{var C,D,O;return(O=(D=(C=s.value)!==null&&C!==void 0?C:o.value)!==null&&D!==void 0?D:a.value)!==null&&O!==void 0?O:null}),c=pt(()=>r.value.getPath(l.value).keyPath),u=pt(()=>r.value.getPath(t.value).keyPath),d=ou(()=>t.keyboard&&n.value);lCt({keydown:{ArrowUp:{prevent:!0,handler:T},ArrowRight:{prevent:!0,handler:x},ArrowDown:{prevent:!0,handler:R},ArrowLeft:{prevent:!0,handler:A},Enter:{prevent:!0,handler:k},Escape:E}},d);const{mergedClsPrefixRef:f,inlineThemeDisabled:h}=Zp(t),m=Mo("Dropdown","-dropdown",cIt,KNt,t,f);va(kM,{labelFieldRef:$i(t,"labelField"),childrenFieldRef:$i(t,"childrenField"),renderLabelRef:$i(t,"renderLabel"),renderIconRef:$i(t,"renderIcon"),hoverKeyRef:s,keyboardKeyRef:o,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:c,activeKeyPathRef:u,animatedRef:$i(t,"animated"),mergedShowRef:n,nodePropsRef:$i(t,"nodeProps"),renderOptionRef:$i(t,"renderOption"),menuPropsRef:$i(t,"menuProps"),doSelect:y,doUpdateShow:w}),gr(n,C=>{!t.animated&&!C&&b()});function y(C,D){const{onSelect:O}=t;O&&Gu(O,C,D)}function w(C){const{"onUpdate:show":D,onUpdateShow:O}=t;D&&Gu(D,C),O&&Gu(O,C),e.value=C}function b(){s.value=null,o.value=null,a.value=null}function E(){w(!1)}function A(){N("left")}function x(){N("right")}function T(){N("up")}function R(){N("down")}function k(){const C=_();C!=null&&C.isLeaf&&n.value&&(y(C.key,C.rawNode),w(!1))}function _(){var C;const{value:D}=r,{value:O}=l;return!D||O===null?null:(C=D.getNode(O))!==null&&C!==void 0?C:null}function N(C){const{value:D}=l,{value:{getFirstAvailableNode:O}}=r;let $=null;if(D===null){const U=O();U!==null&&($=U.key)}else{const U=_();if(U){let W;switch(C){case"down":W=U.getNext();break;case"up":W=U.getPrev();break;case"right":W=U.getChild();break;case"left":W=U.getParent();break}W&&($=W.key)}}$!==null&&(s.value=null,o.value=$)}const L=pt(()=>{const{size:C,inverted:D}=t,{common:{cubicBezierEaseInOut:O},self:$}=m.value,{padding:U,dividerColor:W,borderRadius:ce,optionOpacityDisabled:se,[bo("optionIconSuffixWidth",C)]:Q,[bo("optionSuffixWidth",C)]:J,[bo("optionIconPrefixWidth",C)]:K,[bo("optionPrefixWidth",C)]:re,[bo("fontSize",C)]:X,[bo("optionHeight",C)]:me,[bo("optionIconSize",C)]:G}=$,B={"--n-bezier":O,"--n-font-size":X,"--n-padding":U,"--n-border-radius":ce,"--n-option-height":me,"--n-option-prefix-width":re,"--n-option-icon-prefix-width":K,"--n-option-suffix-width":J,"--n-option-icon-suffix-width":Q,"--n-option-icon-size":G,"--n-divider-color":W,"--n-option-opacity-disabled":se};return D?(B["--n-color"]=$.colorInverted,B["--n-option-color-hover"]=$.optionColorHoverInverted,B["--n-option-color-active"]=$.optionColorActiveInverted,B["--n-option-text-color"]=$.optionTextColorInverted,B["--n-option-text-color-hover"]=$.optionTextColorHoverInverted,B["--n-option-text-color-active"]=$.optionTextColorActiveInverted,B["--n-option-text-color-child-active"]=$.optionTextColorChildActiveInverted,B["--n-prefix-color"]=$.prefixColorInverted,B["--n-suffix-color"]=$.suffixColorInverted,B["--n-group-header-text-color"]=$.groupHeaderTextColorInverted):(B["--n-color"]=$.color,B["--n-option-color-hover"]=$.optionColorHover,B["--n-option-color-active"]=$.optionColorActive,B["--n-option-text-color"]=$.optionTextColor,B["--n-option-text-color-hover"]=$.optionTextColorHover,B["--n-option-text-color-active"]=$.optionTextColorActive,B["--n-option-text-color-child-active"]=$.optionTextColorChildActive,B["--n-prefix-color"]=$.prefixColor,B["--n-suffix-color"]=$.suffixColor,B["--n-group-header-text-color"]=$.groupHeaderTextColor),B}),M=h?D2("dropdown",pt(()=>`${t.size[0]}${t.inverted?"i":""}`),L,t):void 0;return{mergedClsPrefix:f,mergedTheme:m,tmNodes:i,mergedShow:n,handleAfterLeave:()=>{t.animated&&b()},doUpdateShow:w,cssVars:h?void 0:L,themeClass:M==null?void 0:M.themeClass,onRender:M==null?void 0:M.onRender}},render(){const t=(r,i,s,o,a)=>{var l;const{mergedClsPrefix:c,menuProps:u}=this;(l=this.onRender)===null||l===void 0||l.call(this);const d=(u==null?void 0:u(void 0,this.tmNodes.map(h=>h.rawNode)))||{},f={ref:i3t(i),class:[r,`${c}-dropdown`,this.themeClass],clsPrefix:c,tmNodes:this.tmNodes,style:[...s,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:o,onMouseleave:a};return ut(QTe,cw(this.$attrs,f,d))},{mergedTheme:e}=this,n={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:t,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return ut(KTe,Object.assign({},bTe(this.$props,dIt),n),{trigger:()=>{var r,i;return(i=(r=this.$slots).default)===null||i===void 0?void 0:i.call(r)}})}}),eke="n-message-api",tke="n-message-provider";function hIt(){const t=zr(eke,null);return t===null&&FW("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),t}function pIt(t){const{heightSmall:e,heightMedium:n,heightLarge:r,borderRadius:i}=t;return{color:"#eee",colorEnd:"#ddd",borderRadius:i,heightSmall:e,heightMedium:n,heightLarge:r}}const mIt={common:N0,self:pIt},gIt=en([Dn("skeleton",`
 height: 1em;
 width: 100%;
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--n-color-start);
 `),en("@keyframes skeleton-loading",`
 0% {
 background: var(--n-color-start);
 }
 40% {
 background: var(--n-color-end);
 }
 80% {
 background: var(--n-color-start);
 }
 100% {
 background: var(--n-color-start);
 }
 `)]),yIt=Object.assign(Object.assign({},Mo.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),$d=_r({name:"Skeleton",inheritAttrs:!1,props:yIt,setup(t){fCt();const{mergedClsPrefixRef:e}=Zp(t),n=Mo("Skeleton","-skeleton",gIt,mIt,t,e);return{mergedClsPrefix:e,style:pt(()=>{var r,i;const s=n.value,{common:{cubicBezierEaseInOut:o}}=s,a=s.self,{color:l,colorEnd:c,borderRadius:u}=a;let d;const{circle:f,sharp:h,round:m,width:y,height:w,size:b,text:E,animated:A}=t;b!==void 0&&(d=a[bo("height",b)]);const x=f?(r=y??w)!==null&&r!==void 0?r:d:y,T=(i=f?y??w:w)!==null&&i!==void 0?i:d;return{display:E?"inline-block":"",verticalAlign:E?"-0.125em":"",borderRadius:f?"50%":m?"4096px":h?"":u,width:typeof x=="number"?Woe(x):x,height:typeof T=="number"?Woe(T):T,animation:A?"":"none","--n-bezier":o,"--n-color-start":l,"--n-color-end":c}})}},render(){const{repeat:t,style:e,mergedClsPrefix:n,$attrs:r}=this,i=ut("div",cw({class:`${n}-skeleton`,style:e},r));return t>1?ut(xn,null,Kkt(t,null).map(s=>[i,`
`])):i}}),bIt={class:"toolbar-icon"},wIt=["innerHTML"],vIt={__name:"ToolbarButtonIcon",props:{name:{type:String,required:!0},color:{type:String,default:null},icon:{type:String,default:null}},setup(t){const e=t,n=pt(()=>{if(e.name==="color")return{backgroundColor:e.color||"#111111"};if(e.name==="highlight")return{backgroundColor:e.color||"#D6D6D6"}}),r=pt(()=>["color","highlight"].includes(e.name));return(i,s)=>(rt(),wt("div",bIt,[Pt("div",{class:Qr(["toolbar-icon__icon",[`toolbar-icon__icon--${e.name}`]]),innerHTML:t.icon},null,10,wIt),r.value?(rt(),wt("div",{key:0,class:"color-bar",style:Gn(n.value)},null,4)):Xt("",!0)]))}},xIt=or(vIt,[["__scopeId","data-v-8bc7866c"]]),EIt=["role","aria-label","onKeydown"],SIt=["data-item"],AIt={key:1,class:"button-label"},TIt={key:2},kIt=["onKeydown","id"],CIt=["placeholder","onKeydown","id"],_It=["innerHTML"],NIt={"aria-live":"polite",class:"visually-hidden"},IIt={__name:"ToolbarButton",props:{iconColor:{type:String,default:null},active:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},isWide:{type:Boolean,default:!1},toolbarItem:{type:Object,required:!0},defaultLabel:{type:String,default:null},isOverflowItem:{type:Boolean,default:!1}},emits:["buttonClick","textSubmit"],setup(t,{emit:e}){const n=e,r=t,{name:i,active:s,icon:o,label:a,hideLabel:l,iconColor:c,hasCaret:u,disabled:d,inlineTextInputVisible:f,hasInlineTextInput:h,minWidth:m,style:y,attributes:w}=r.toolbarItem,b=Ve(a),E=Ve(null),{isHighContrastMode:A}=k0(),x=()=>{h&&gi(()=>{var _,N;(_=E.value)==null||_.focus(),(N=E.value)==null||N.select()}),n("buttonClick")},T=()=>{const _=b.value,N=_.match(/^\d+(\.5)?$/)?_:Math.floor(parseFloat(_)).toString();n("textSubmit",N),b.value=N},R=pt(()=>y.value?y.value:{minWidth:r.minWidth}),k=pt(()=>s.value?dc.dropdownCaretUp:dc.dropdownCaretDown);return(_,N)=>(rt(),wt("div",{class:Qr(["toolbar-item",Ct(w).className]),style:Gn(R.value),role:t.isOverflowItem?"menuitem":"button","aria-label":Ct(w).ariaLabel,onClick:x,onKeydown:f1(mr(x,["stop"]),["enter"]),tabindex:"0"},[Pt("div",{class:Qr(["toolbar-button",{active:Ct(s),disabled:Ct(d),narrow:t.isNarrow,wide:t.isWide,"has-inline-text-input":Ct(h),"high-contrast":Ct(A)}]),"data-item":`btn-${Ct(i)||""}`},[Ct(o)?(rt(),$r(xIt,{key:0,color:Ct(c),class:"toolbar-icon",icon:Ct(o),name:Ct(i)},null,8,["color","icon","name"])):Xt("",!0),Ct(a)&&!Ct(l)&&!Ct(f)?(rt(),wt("div",AIt,ci(Ct(a)),1)):Xt("",!0),Ct(f)?(rt(),wt("span",TIt,[Ct(i)==="fontSize"?wc((rt(),wt("input",{key:0,"onUpdate:modelValue":N[0]||(N[0]=L=>b.value=L),onKeydown:f1(mr(T,["prevent"]),["enter"]),type:"text",class:Qr(["button-text-input button-text-input--font-size",{"high-contrast":Ct(A)}]),id:"inlineTextInput-"+Ct(i),autocomplete:"off",ref_key:"inlineInput",ref:E},null,42,kIt)),[[Mb,b.value]]):wc((rt(),wt("input",{key:1,"onUpdate:modelValue":N[1]||(N[1]=L=>b.value=L),placeholder:Ct(a),onKeydown:f1(mr(T,["prevent"]),["enter"]),type:"text",class:"button-text-input",id:"inlineTextInput-"+Ct(i),autocomplete:"off",ref_key:"inlineInput",ref:E},null,40,CIt)),[[Mb,b.value]])])):Xt("",!0),Ct(u)?(rt(),wt("div",{key:3,class:"dropdown-caret",innerHTML:k.value,style:Gn({opacity:Ct(d)?.6:1})},null,12,_It)):Xt("",!0),Pt("div",NIt,ci(`${Ct(w).ariaLabel} ${Ct(s)?"selected":"unset"}`),1)],10,SIt)],46,EIt))}},r$=or(IIt,[["__scopeId","data-v-54806efd"]]),RIt={class:"toolbar-separator",role:"separator","aria-label":"Toolbar separator"},MIt={__name:"ToolbarSeparator",props:{active:{type:Boolean,default:!1}},emits:["command"],setup(t,{emit:e}){const{isHighContrastMode:n}=k0(),r=()=>n.value?"#000":"#dbdbdb";return(i,s)=>(rt(),wt("div",RIt,[Pt("div",{class:"separator-inner",style:Gn({backgroundColor:r()})},null,4)]))}},LIt=or(MIt,[["__scopeId","data-v-c7e2cd4d"]]),DIt={class:"overflow-menu"},OIt={class:"overflow-menu-trigger"},PIt={key:0,class:"overflow-menu_items",role:"group"},FIt={__name:"OverflowMenu",props:{toolbarItem:{type:Object,required:!0},overflowItems:{type:Array,required:!0}},emits:["buttonClick","close"],setup(t,{emit:e}){const{proxy:n}=Io(),r=e,i=t,s=pt(()=>i.toolbarItem.expand.value),o=Ve(!1),a=pt(()=>({...i.toolbarItem,active:s.value})),l=()=>{r("buttonClick",i.toolbarItem)},c=({item:d,argument:f})=>{n.$toolbar.emitCommand({item:d,argument:f})},u=d=>{d.key==="Escape"&&s.value&&!o.value&&(d.preventDefault(),r("close"))};return Ur(()=>{document.addEventListener("keydown",u,!0)}),as(()=>{document.removeEventListener("keydown",u,!0)}),(d,f)=>(rt(),wt("div",DIt,[Pt("div",OIt,[Fn(r$,{"toolbar-item":a.value,onButtonClick:l},null,8,["toolbar-item"])]),s.value?(rt(),wt("div",PIt,[Fn(z6,{class:"superdoc-toolbar-overflow","toolbar-items":t.overflowItems,"from-overflow":"",onCommand:c,onDropdownUpdateShow:f[0]||(f[0]=h=>o.value=h)},null,8,["toolbar-items"])])):Xt("",!0)]))}},BIt=or(FIt,[["__scopeId","data-v-23c383c4"]]),jIt=["onKeydown","tabindex","data-item-id"],$It={key:0},zIt={key:0},HIt={key:0},VIt={__name:"ButtonGroup",props:{toolbarItems:{type:Array,required:!0},overflowItems:{type:Array,default:()=>[]},uiFontFamily:{type:String,default:"Arial, Helvetica, sans-serif"},position:{type:String,default:"left"},fromOverflow:{type:Boolean,default:!1}},emits:["command","item-clicked","dropdown-update-show"],setup(t,{emit:e}){const n=e,r=Ve([]),i=t,s=Ve(null),{isHighContrastMode:o}=k0(),a=window.matchMedia("(max-width: 768px)").matches,l={left:{minWidth:"120px",justifyContent:"flex-start"},right:{minWidth:"120px",justifyContent:"flex-end"},default:{flexGrow:a?0:1,justifyContent:"center"}},c=pt(()=>l[i.position]||l.default),u=M=>M.type==="button",d=M=>M.type==="dropdown",f=M=>M.type==="separator",h=M=>M.type==="overflow",m=(M,C=null)=>{n("item-clicked"),s.value=M,s.value.expand=!s.value.expand,!M.disabled.value&&n("command",{item:M,argument:C})},y=(M,C)=>{M.disabled.value||(s.value=null,n("command",{item:M,argument:C}))},w=()=>{s.value&&(s.value.expand=!1,s.value=null)},b=(M,C)=>{w();const D=M.dropdownValueKey.value?C[M.dropdownValueKey.value]:C.label;n("command",{item:M,argument:D,option:C}),M.selectedValue.value=C.key},E=M=>{var C,D;return(D=(C=M.nestedOptions)==null?void 0:C.value)!=null&&D.length?M.nestedOptions.value.map(O=>({...O,props:{...O.props,class:M.selectedValue.value===O.key?"selected":""}})):[]},A=(M,C)=>({role:"menuitem",ariaLabel:`${C.attributes.value.ariaLabel} - ${M.label}`}),x=M=>{const C=M.target,D=M.target.closest(".toolbar-item-ctn").nextElementSibling;D&&(C.setAttribute("tabindex","-1"),D.setAttribute("tabindex","0"),D.focus())},T=M=>{const C=M.target,D=M.target.closest(".toolbar-item-ctn").previousElementSibling;D&&(C.setAttribute("tabindex","-1"),D.setAttribute("tabindex","0"),D.focus())},R=M=>{const C=M.target.closest(".button-group").nextElementSibling;if(C)C.setAttribute("tabindex","0"),C.focus();else{const D=document.querySelector(".ProseMirror");D&&D.focus()}},k=M=>{const C=M.target.closest(".button-group").previousElementSibling;C&&(C.setAttribute("tabindex","0"),C.focus())},_=(M,C)=>{const D=M.target.nodeName==="INPUT"||M.target.nodeName==="TEXTAREA",O=C.name.value==="fontSize";if(!(D&&O))switch(M.preventDefault(),M.key){case"Enter":m(C,null);break;case"Escape":w();break;case"ArrowRight":w(),x(M);break;case"ArrowLeft":w(),T(M);break;case"Tab":M.shiftKey?k(M):R(M);break}},N=M=>{const C=r.value.find(D=>!D.classList.contains("disabled"));C&&(C.setAttribute("tabindex","0"),C.focus())},L=M=>{M||w(),n("dropdown-update-show",M)};return(M,C)=>(rt(),wt("div",{style:Gn(c.value),class:"button-group",role:"group",onFocus:N},[(rt(!0),wt(xn,null,Ui(t.toolbarItems,(D,O)=>{var $,U;return rt(),wt("div",{key:D.id.value,class:Qr([{narrow:D.isNarrow.value,wide:D.isWide.value,disabled:D.disabled.value},"toolbar-item-ctn"]),onKeydown:W=>_(W,D),ref_for:!0,ref_key:"toolbarItemRefs",ref:r,tabindex:O===0?0:-1,"data-item-id":D.id.value},[f(D)?(rt(),$r(LIt,{key:0,style:{width:"20px"}})):Xt("",!0),d(D)&&((U=($=D.nestedOptions)==null?void 0:$.value)!=null&&U.length)?(rt(),$r(Ct(eq),{key:1,options:E(D),trigger:D.disabled.value?null:"click",show:D.expand.value,"content-style":{fontFamily:i.uiFontFamily},size:"medium",placement:"bottom-start",class:Qr(["toolbar-button toolbar-dropdown sd-editor-toolbar-dropdown",{"high-contrast":Ct(o)}]),onSelect:(W,ce)=>b(D,ce),onUpdateShow:L,style:Gn(D.dropdownStyles.value),"menu-props":()=>({role:"menu",style:{fontFamily:i.uiFontFamily}}),"node-props":W=>A(W,D)},{default:Uc(()=>{var W;return[Fn(Ct(Gae),{trigger:"hover",disabled:!((W=D.tooltip)!=null&&W.value),"content-style":{fontFamily:i.uiFontFamily}},{trigger:Uc(()=>[Fn(r$,{"toolbar-item":D,disabled:D.disabled.value,onTextSubmit:ce=>y(D,ce),onButtonClick:ce=>m(D)},null,8,["toolbar-item","disabled","onTextSubmit","onButtonClick"])]),default:Uc(()=>[Pt("div",null,[Fp(ci(D.tooltip)+" ",1),D.disabled.value?(rt(),wt("span",$It,"(disabled)")):Xt("",!0)])]),_:2},1032,["disabled","content-style"])]}),_:2},1032,["options","trigger","show","content-style","class","onSelect","style","menu-props","node-props"])):u(D)?(rt(),$r(Ct(Gae),{key:2,trigger:"hover",class:"sd-editor-toolbar-tooltip","content-style":{fontFamily:i.uiFontFamily}},{trigger:Uc(()=>[Fn(r$,{"toolbar-item":D,"is-overflow-item":t.fromOverflow,onTextSubmit:W=>y(D,W),onButtonClick:W=>m(D)},null,8,["toolbar-item","is-overflow-item","onTextSubmit","onButtonClick"])]),default:Uc(()=>[D.tooltip?(rt(),wt("div",zIt,[Fp(ci(D.tooltip)+" ",1),D.disabled.value?(rt(),wt("span",HIt,"(disabled)")):Xt("",!0)])):Xt("",!0)]),_:2},1032,["content-style"])):Xt("",!0),h(D)&&t.overflowItems.length?(rt(),$r(BIt,{key:3,"toolbar-item":D,onButtonClick:W=>m(D),"overflow-items":t.overflowItems,onClose:w},null,8,["toolbar-item","onButtonClick","overflow-items"])):Xt("",!0)],42,jIt)}),128))],36))}},z6=or(VIt,[["__scopeId","data-v-3d5db06f"]]),UIt="Arial, Helvetica, sans-serif",WIt={__name:"Toolbar",emits:["command","toggle","select"],setup(t,{emit:e}){var m,y,w,b,E;const{proxy:n}=Io();let r=Ve(1);const i=pt(()=>{var x,T;const A=(T=(x=n==null?void 0:n.$toolbar)==null?void 0:x.config)==null?void 0:T.uiDisplayFallbackFont;return typeof A=="string"&&A.trim()?A.trim():UIt}),s=(y=(m=n.$toolbar.config)==null?void 0:m.toolbarGroups)==null?void 0:y.includes("left"),o=(b=(w=n.$toolbar.config)==null?void 0:w.toolbarGroups)==null?void 0:b.includes("right"),a=((E=n.$toolbar.config)==null?void 0:E.toolbarButtonsExclude)||[],l=A=>n.$toolbar.getToolbarItemByGroup(A).filter(x=>!a.includes(x.name.value));Ur(()=>{window.addEventListener("resize",d),window.addEventListener("keydown",c)}),Jz(()=>{window.removeEventListener("resize",d),window.removeEventListener("keydown",c)});const c=async A=>{if(A.metaKey&&A.key==="f"){const x=n.$toolbar.getToolbarItemByName("search");x&&(A.preventDefault(),x.expand.value=!0,await gi(),x.inputRef.value&&x.inputRef.value.focus())}},d=uAt(async()=>{await n.$toolbar.onToolbarResize(),r.value+=1},300),f=({item:A,argument:x,option:T})=>{n.$toolbar.emitCommand({item:A,argument:x,option:T})},h=()=>{var A,x;(x=(A=n.$toolbar.activeEditor)==null?void 0:A.commands)==null||x.restoreSelection()};return(A,x)=>(rt(),wt("div",{class:"superdoc-toolbar",key:Ct(r),role:"toolbar","aria-label":"Toolbar","data-editor-ui-surface":""},[Fn(Ct(XTe),{abstract:"","preflight-style-disabled":""},{default:Uc(()=>[Ct(s)?(rt(),$r(z6,{key:0,tabindex:"0","toolbar-items":l("left"),"ui-font-family":i.value,position:"left",onCommand:f,onItemClicked:h,class:"superdoc-toolbar-group-side"},null,8,["toolbar-items","ui-font-family"])):Xt("",!0),Fn(z6,{tabindex:"0","toolbar-items":l("center"),"overflow-items":Ct(n).$toolbar.overflowItems,"ui-font-family":i.value,position:"center",onCommand:f,onItemClicked:h},null,8,["toolbar-items","overflow-items","ui-font-family"]),Ct(o)?(rt(),$r(z6,{key:1,tabindex:"0","toolbar-items":l("right"),"ui-font-family":i.value,position:"right",onCommand:f,onItemClicked:h,class:"superdoc-toolbar-group-side"},null,8,["toolbar-items","ui-font-family"])):Xt("",!0)]),_:1})]))}},qIt=or(WIt,[["__scopeId","data-v-042a9556"]]),Xae={bold:"Bold",fontFamily:"Font",ai:"AI text generation",fontSize:"Font size",italic:"Italic",underline:"Underline",highlight:"Highlight color",strikethrough:"Strikethrough",color:"Text color",search:"Search",link:"Link",image:"Image",table:"Insert table",tableActions:"Table options",addRowBefore:"Insert row above",addRowAfter:"Insert row below",addColumnBefore:"Insert column left",addColumnAfter:"Insert column right",deleteRow:"Delete row",deleteColumn:"Delete column",deleteTable:"Delete table",removeBorders:"Remove borders",mergeCells:"Merge cells",splitCell:"Split cell",fixTables:"Fix tables",textAlign:"Alignment",bulletList:"Bullet list",numberedList:"Numbered list",indentLeft:"Left indent",indentRight:"Right indent",zoom:"Zoom",undo:"Undo",redo:"Redo",trackChanges:"Track Changes",trackChangesAccept:"Accept changes under selection",trackChangesReject:"Reject changes under selection",trackChangesOriginal:"Toggle Show Original",trackChangesFinal:"Toggle Show Final",clearFormatting:"Clear formatting",copyFormat:"Format painter",lineHeight:"Line height",formatText:"Format text",ruler:"Show or hide ruler",pageBreak:"Insert page break",documentEditingMode:"Editing",documentSuggestingMode:"Suggesting",documentViewingMode:"Viewing",documentEditingModeDescription:"Edit document directly",documentSuggestingModeDescription:"Edits become suggestions",documentViewingModeDescription:"View clean version of document only",linkedStyles:"Linked styles"},w_=t=>{if(t==null)return!1;const e=String(t).toLowerCase();return e==="0"||e==="false"||e==="off"},GIt={bold:(t={})=>w_(t.value),italic:(t={})=>w_(t.value),strike:(t={})=>w_(t.value),underline:(t={})=>{const e=t.underlineType??t.value;if(e==null)return!1;const n=String(e).toLowerCase();return n==="none"||w_(n)},color:(t={})=>{const e=t.color;return e==null?!0:String(e).toLowerCase()==="inherit"},highlight:(t={})=>{const e=t.color;if(e==null)return!0;const n=String(e).toLowerCase();return n==="transparent"||n==="none"}},KIt=(t,e={})=>{const n=GIt[t];return typeof n!="function"?!1:!!n(e)};var vk,Hr,nke,wg,s$,rke,ike,H6,ske,oke,V6,U6,o$,ake;const _A=class _A extends FV{constructor(n){var r;super();st(this,Hr);Mt(this,"config",{selector:null,toolbarGroups:["left","center","right"],role:"editor",icons:{...dc},texts:{...Xae},fonts:null,hideButtons:!0,responsiveToContainer:!1,mode:"docx",excludeItems:[],groups:null,editor:null,aiApiKey:null,aiEndpoint:null,customButtons:[]});st(this,wg,{setZoom:({item:n,argument:r})=>{r&&(n.onActivate({zoom:r}),this.emit("superdoc-command",{item:n,argument:r}),this.superdoc.superdocStore.activeZoom=parseInt(r,10))},setDocumentMode:({item:n,argument:r})=>{r&&this.emit("superdoc-command",{item:n,argument:r})},setFontSize:({item:n,argument:r})=>{pe(this,Hr,V6).call(this,{item:n,argument:r},()=>{var i;(i=this.activeEditor)==null||i.commands.setFieldAnnotationsFontSize(r,!0)})},setFontFamily:({item:n,argument:r})=>{pe(this,Hr,V6).call(this,{item:n,argument:r},()=>{var i;(i=this.activeEditor)==null||i.commands.setFieldAnnotationsFontFamily(r,!0)})},setColor:({argument:n})=>{var o,a,l;if(!n||!this.activeEditor)return;const r=n==="none",i=r?"inherit":n;(a=(o=this.activeEditor)==null?void 0:o.commands)!=null&&a.setColor&&this.activeEditor.commands.setColor(i);const s=r?null:n;(l=this.activeEditor)==null||l.commands.setFieldAnnotationsTextColor(s,!0),this.updateToolbarState()},setHighlight:({argument:n})=>{var s,o,a,l;if(!n||!this.activeEditor)return;const r=n!=="none"?n:"transparent";(o=(s=this.activeEditor)==null?void 0:s.commands)!=null&&o.setHighlight&&this.activeEditor.commands.setHighlight(r);const i=n!=="none"?n:null;(a=this.activeEditor)==null||a.commands.setFieldAnnotationsTextHighlight(i,!0),(l=this.activeEditor)==null||l.commands.setCellBackground(i),this.updateToolbarState()},toggleRuler:()=>{this.superdoc.toggleRuler(),this.updateToolbarState()},startImageUpload:async()=>{try{let r=await m2t()();if(!(r!=null&&r.file))return;const{size:i,file:s}=await SSe({file:r.file,getMaxContentSize:()=>this.activeEditor.getMaxContentSize()});if(!s)return;const o={};Jxt({view:this.activeEditor.view,editorOptions:this.activeEditor.options,id:o}),await ASe({editor:this.activeEditor,view:this.activeEditor.view,file:s,size:i,id:o})}catch(n){const r=new Error("[super-toolbar ] Image upload failed");this.emit("exception",{error:r,editor:this.activeEditor,originalError:n}),console.error(r,n)}},increaseTextIndent:({item:n,argument:r})=>{var s,o;let i=n.command;if((o=(s=this.activeEditor.commands).increaseListIndent)!=null&&o.call(s))return!0;i in this.activeEditor.commands&&this.activeEditor.commands[i](r)},decreaseTextIndent:({item:n,argument:r})=>{var s,o;let i=n.command;if((o=(s=this.activeEditor.commands).decreaseListIndent)!=null&&o.call(s))return!0;i in this.activeEditor.commands&&this.activeEditor.commands[i](r)},toggleBold:({item:n,argument:r})=>{let i=n.command;i in this.activeEditor.commands&&(this.activeEditor.commands[i](r),this.activeEditor.commands.toggleFieldAnnotationsFormat("bold",!0)),this.updateToolbarState()},toggleItalic:({item:n,argument:r})=>{let i=n.command;i in this.activeEditor.commands&&(this.activeEditor.commands[i](r),this.activeEditor.commands.toggleFieldAnnotationsFormat("italic",!0)),this.updateToolbarState()},toggleUnderline:({item:n,argument:r})=>{let i=n.command;i in this.activeEditor.commands&&(this.activeEditor.commands[i](r),this.activeEditor.commands.toggleFieldAnnotationsFormat("underline",!0)),this.updateToolbarState()},toggleLink:({item:n,argument:r})=>{let i=n.command;if(i in this.activeEditor.commands){this.activeEditor.commands[i](r);const{view:s}=this.activeEditor;let{selection:o}=s.state;this.activeEditor.options.isHeaderOrFooter&&(o=this.activeEditor.options.lastSelection);const a=o.$to.pos,l=new TextSelection(s.state.doc.resolve(a)),c=s.state.tr.setSelection(l),u=s.state.apply(c);s.updateState(u),this.activeEditor.options.isHeaderOrFooter||setTimeout(()=>{s.focus()},100)}this.updateToolbarState()},insertTable:({item:n,argument:r})=>{pe(this,Hr,V6).call(this,{item:n,argument:r})},executeTableCommand:({argument:n})=>{if(!n)return;let r=n.command;r in this.activeEditor.commands&&this.activeEditor.commands[r](n),this.updateToolbarState()}});Mt(this,"onToolbarResize",()=>{pe(this,Hr,s$).call(this,{superToolbar:this,icons:this.config.icons,texts:this.config.texts,fonts:this.config.fonts,hideButtons:this.config.hideButtons,isDev:this.isDev}),this.role==="viewer"&&pe(this,Hr,H6).call(this),this.updateToolbarState()});if(this.config={...this.config,...n},this.toolbarItems=[],this.overflowItems=[],this.documentMode=n.documentMode||"editing",this.isDev=n.isDev||!1,this.superdoc=n.superdoc,this.role=n.role||"editor",this.toolbarContainer=null,this.config.editor&&(this.config.mode=this.config.editor.options.mode),this.config.icons={...dc,...n.icons},this.config.texts={...Xae,...n.texts},this.config.hideButtons=n.hideButtons??!0,this.config.responsiveToContainer=n.responsiveToContainer??!1,this.pendingMarkCommands=[],this.stickyStoredMarks=null,this._boundEditorHandlers={transaction:null,selectionUpdate:null,focus:null},this._restoreFocusTimeoutId=null,!this.config.selector&&this.config.element&&(this.config.selector=this.config.element),this.toolbarContainer=this.findElementBySelector(this.config.selector),this.toolbarContainer){const i=(((r=this.config)==null?void 0:r.uiDisplayFallbackFont)||"").toString().trim()||"Arial, Helvetica, sans-serif";this.toolbarContainer.style.setProperty("--sd-ui-font-family",i)}pe(this,Hr,nke).call(this),pe(this,Hr,s$).call(this,{superToolbar:this,icons:this.config.icons,texts:this.config.texts,fonts:this.config.fonts,hideButtons:this.config.hideButtons,isDev:n.isDev}),!(this.config.selector&&!this.toolbarContainer)&&(this.app=fR(qIt),this.app.directive("click-outside",gU),this.app.config.globalProperties.$toolbar=this,this.toolbarContainer&&(this.toolbar=this.app.mount(this.toolbarContainer)),this.activeEditor=n.editor||null,this.updateToolbarState())}findElementBySelector(n){let r=null;return n&&(n.startsWith("#")||n.startsWith(".")?r=document.querySelector(n):r=document.getElementById(n),!r)?null:r}log(...n){console.debug("[ super-toolbar]",...n)}setZoom(n){const i=[...this.toolbarItems,...this.overflowItems].find(s=>s.name.value==="zoom");F(this,wg).setZoom({item:i,argument:n})}setActiveEditor(n){this.activeEditor&&this._boundEditorHandlers.transaction&&(this.activeEditor.off("transaction",this._boundEditorHandlers.transaction),this.activeEditor.off("selectionUpdate",this._boundEditorHandlers.selectionUpdate),this.activeEditor.off("focus",this._boundEditorHandlers.focus),this._boundEditorHandlers.transaction=null,this._boundEditorHandlers.selectionUpdate=null,this._boundEditorHandlers.focus=null),this.activeEditor=n,n&&(this._boundEditorHandlers.transaction=this.onEditorTransaction.bind(this),this._boundEditorHandlers.selectionUpdate=this.onEditorSelectionUpdate.bind(this),this._boundEditorHandlers.focus=this.onEditorFocus.bind(this),this.activeEditor.on("transaction",this._boundEditorHandlers.transaction),this.activeEditor.on("selectionUpdate",this._boundEditorHandlers.selectionUpdate),this.activeEditor.on("focus",this._boundEditorHandlers.focus))}getToolbarItemByGroup(n){return this.toolbarItems.filter(r=>{var i;return(((i=r.group)==null?void 0:i.value)||"center")===n})}getToolbarItemByName(n){return this.toolbarItems.find(r=>r.name.value===n)}updateToolbarState(){if(pe(this,Hr,ske).call(this),pe(this,Hr,rke).call(this),pe(this,Hr,ike).call(this),!this.activeEditor||this.documentMode==="viewing"){pe(this,Hr,H6).call(this);return}const{state:n}=this.activeEditor;if(!n){pe(this,Hr,H6).call(this);return}const r=n.selection,i=pe(this,Hr,oke).call(this,IT({state:n,from:r.from,to:r.to})),o=i.length>0,a=o&&RT({editor:this.activeEditor,action:"accept",trackedChanges:i}),l=o&&RT({editor:this.activeEditor,action:"reject",trackedChanges:i}),c=_F(this.activeEditor),u=mU(this.activeEditor.state),d=Ml(h=>h.type.name==="paragraph")(r),f=d?Fb(this.activeEditor,d.node,n.doc.resolve(d.pos)):null;this.toolbarItems.forEach(h=>{var E,A,x;if(h.resetDisabled(),h.name.value==="undo"&&h.setDisabled(this.undoDepth===0),h.name.value==="redo"&&h.setDisabled(this.redoDepth===0),h.name.value==="acceptTrackedChangeBySelection"&&h.setDisabled(!a),h.name.value==="rejectTrackedChangeOnSelection"&&h.setDisabled(!l),h.name.value==="linkedStyles")return this.activeEditor&&!yW(this.activeEditor).length?h.deactivate():h.activate({styleId:(f==null?void 0:f.styleId)||null});const m=c.find(T=>T.name===h.name.value),y=m?KIt(m.name,m.attrs):!1,w=y?null:m;if(w)if(w.name==="fontSize"){const T=c.filter(k=>k.name==="fontSize").map(k=>k.attrs.fontSize),R=[...new Set(T)].length>1;h.activate(w.attrs,R)}else h.activate(w.attrs);else h.deactivate();if(!w&&!y&&d&&(f!=null&&f.styleId)){const T={fontSize:"font-size",fontFamily:"font-family",bold:"bold"},R=(E=this.activeEditor.converter)==null?void 0:E.linkedStyles.find(k=>k.id===f.styleId);if(R&&R.definition&&R.definition.styles&&T[h.name.value]in R.definition.styles){const k=R.definition.styles[T[h.name.value]],_={[h.name.value]:k};h.activate(_)}}h.name.value==="textAlign"&&(f!=null&&f.justification)&&h.activate({textAlign:f.justification}),h.name.value==="lineHeight"&&(f!=null&&f.spacing?h.selectedValue.value=sb(f.spacing.line):h.selectedValue.value=""),h.name.value==="tableActions"&&(h.disabled.value=!u);const b=lu(d==null?void 0:d.node)?d.node:null;if(b){const T=b.attrs.listRendering.numberingType;(h.name.value==="list"&&T==="bullet"||h.name.value==="numberedlist"&&T!=="bullet")&&h.activate()}h.name.value==="ruler"&&((x=(A=this.superdoc)==null?void 0:A.config)!=null&&x.rulers?h.activate():h.deactivate())})}onEditorTransaction({transaction:n}){!n.docChanged&&!n.selectionSet||this.updateToolbarState()}emitCommand({item:n,argument:r,option:i}){var u,d,f;const s=(d=(u=this.activeEditor)==null?void 0:u.view)==null?void 0:d.hasFocus,o=!!(typeof s=="function"&&s.call(this.activeEditor.view)),{command:a}=n,l=this.isMarkToggle(n),c=!!(n!=null&&n.restoreEditorFocus);if(!o&&l){this.pendingMarkCommands.push({command:a,argument:r,item:n}),(f=n==null?void 0:n.activate)==null||f.call(n),this.activeEditor&&!this.activeEditor.options.isHeaderOrFooter&&this.activeEditor.focus();return}if(this.activeEditor&&!this.activeEditor.options.isHeaderOrFooter&&this.activeEditor.focus(),!!a){if(a in F(this,wg)){const h=F(this,wg)[a]({item:n,argument:r});return l&&pe(this,Hr,U6).call(this),h}if(this.activeEditor&&this.activeEditor.commands&&a in this.activeEditor.commands)this.activeEditor.commands[a](r);else if(typeof a=="function")a({item:n,argument:r,option:i});else{const h=new Error(`[super-toolbar ] Command not found: ${a}`);throw this.emit("exception",{error:h,editor:this.activeEditor}),h}l&&pe(this,Hr,U6).call(this),this.updateToolbarState(),c&&this.activeEditor&&!this.activeEditor.options.isHeaderOrFooter&&(this._restoreFocusTimeoutId=setTimeout(()=>{this._restoreFocusTimeoutId=null,!(!this.activeEditor||this.activeEditor.options.isHeaderOrFooter)&&this.activeEditor.focus()},0))}}onEditorSelectionUpdate(){if(!this.activeEditor)return;if(this.pendingMarkCommands.length){const r=this.pendingMarkCommands;this.pendingMarkCommands=[],r.forEach(({command:i,argument:s,item:o})=>{if(i)try{i in F(this,wg)?F(this,wg)[i]({item:o,argument:s}):this.activeEditor.commands&&i in this.activeEditor.commands&&this.activeEditor.commands[i](s),pe(this,Hr,ake).call(this,{command:i,argument:s})}catch(a){const l=new Error(`[super-toolbar ] Failed to execute pending command: ${i}`);this.emit("exception",{error:l,editor:this.activeEditor,originalError:a}),console.error(l,a)}}),pe(this,Hr,U6).call(this),this.updateToolbarState();return}pe(this,Hr,o$).call(this)&&this.updateToolbarState()}onEditorFocus(){if(this.pendingMarkCommands.length){this.onEditorSelectionUpdate();return}pe(this,Hr,o$).call(this)&&this.updateToolbarState()}isMarkToggle(n){var i;const r=(i=n==null?void 0:n.name)==null?void 0:i.value;return F(_A,vk).has(r)}destroy(){this._restoreFocusTimeoutId!==null&&(clearTimeout(this._restoreFocusTimeoutId),this._restoreFocusTimeoutId=null)}};vk=new WeakMap,Hr=new WeakSet,nke=function(){this.config.groups&&!Array.isArray(this.config.groups)&&Object.keys(this.config.groups).length&&(this.config.toolbarGroups=Object.keys(this.config.groups))},wg=new WeakMap,s$=function({superToolbar:n,icons:r,texts:i,fonts:s,hideButtons:o,isDev:a=!1}={}){var w;const l=document.documentElement.clientWidth,c=((w=this.toolbarContainer)==null?void 0:w.offsetWidth)??0,u=this.config.responsiveToContainer?c:l,{defaultItems:d,overflowItems:f}=ckt({superToolbar:n,toolbarIcons:r,toolbarTexts:i,toolbarFonts:s,hideButtons:o,availableWidth:u,role:this.role,isDev:a}),h=this.config.customButtons||[];h.length&&d.push(...h.map(b=>pr({...b})));let m=[...d.map(b=>b.name.value),...f.map(b=>b.name.value)];this.config.groups&&(m=Object.values(this.config.groups).flatMap(b=>b));const y=d.filter(b=>m.includes(b.name.value)).filter(b=>!this.config.excludeItems.includes(b.name.value));this.toolbarItems=y,this.overflowItems=f.filter(b=>m.includes(b.name.value))},rke=function(){if(!this.activeEditor||!this.activeEditor.converter)return;const{typeface:n="Arial",fontSizePt:r=12}=this.activeEditor.converter.getDocumentDefaultStyles()??{},i=this.toolbarItems.find(o=>o.name.value==="fontSize");i&&(i.defaultLabel.value=r);const s=this.toolbarItems.find(o=>o.name.value==="fontFamily");s&&(s.defaultLabel.value=n)},ike=function(){if(!this.activeEditor||!this.activeEditor.converter||!this.activeEditor.converter.docHiglightColors.size)return;const n=this.toolbarItems.find(a=>a.name.value==="highlight");if(!n)return;const r=VTt(),i=7,s=Array.from(this.activeEditor.converter.docHiglightColors).reduce((a,l,c)=>{const u=Math.floor(c/i);return a[u]||(a[u]=[]),r.includes(l)||a[u].push(gn(l)),a},[]),o={key:"color",type:"render",render:()=>zj(this,n,s,!0)};n.nestedOptions.value=[o]},H6=function(){this.activeEditor=null,this.toolbarItems.forEach(n=>{const{allowWithoutEditor:r}=n;r.value||n.setDisabled(!0)})},ske=function(){var n,r;if((n=this.activeEditor)!=null&&n.state)try{if(this.activeEditor.options.ydoc){const i=(r=Np.getState(this.activeEditor.state))==null?void 0:r.undoManager;this.undoDepth=(i==null?void 0:i.undoStack.length)||0,this.redoDepth=(i==null?void 0:i.redoStack.length)||0}else this.undoDepth=Bwe(this.activeEditor.state),this.redoDepth=jwe(this.activeEditor.state)}catch{this.undoDepth=0,this.redoDepth=0}},oke=function(n=[]){var i;if(!(n!=null&&n.length))return n;const r=(i=this.superdoc)==null?void 0:i.commentsStore;return r!=null&&r.getComment?n.map(s=>{const o=s.id;if(!o)return s;const a=r.getComment(o);if(!a)return s;const l=typeof a.getValues=="function"?a.getValues():a;return{...s,comment:l}}):n},V6=function({item:n,argument:r,noArgumentCallback:i=!1},s){if(!r||!this.activeEditor)return;let o=n.command;const a=n.noArgumentCommand;if(r==="none"&&this.activeEditor&&this.activeEditor.commands&&a in this.activeEditor.commands){this.activeEditor.commands[a](),typeof s=="function"&&i&&s(r),this.updateToolbarState();return}this.activeEditor&&this.activeEditor.commands&&o in this.activeEditor.commands&&(this.activeEditor.commands[o](r),typeof s=="function"&&s(r),this.updateToolbarState())},U6=function(){if(!this.activeEditor)return;const{selection:n,storedMarks:r}=this.activeEditor.state||{};n!=null&&n.empty&&(this.stickyStoredMarks=r!=null&&r.length?[...r]:null)},o$=function(){var l;if(!this.activeEditor||!((l=this.stickyStoredMarks)!=null&&l.length))return!1;const{state:n,view:r}=this.activeEditor,{selection:i,storedMarks:s}=n||{};if(!(i!=null&&i.empty)||s!=null&&s.length||!(r!=null&&r.dispatch)||!(n!=null&&n.tr)||_F(this.activeEditor).some(c=>F(_A,vk).has(c.name)))return!1;const a=n.tr.setStoredMarks(this.stickyStoredMarks);return r.dispatch(a),!0},ake=function({command:n,argument:r}){var h,m,y,w,b,E;if(!this.activeEditor||!((m=(h=this.activeEditor.state)==null?void 0:h.selection)!=null&&m.empty)||(w=(y=this.activeEditor.state)==null?void 0:y.storedMarks)!=null&&w.length||n!=="setFontSize")return;const{state:i,view:s}=this.activeEditor,o=(E=(b=i.schema)==null?void 0:b.marks)==null?void 0:E.textStyle;if(!o||!(s!=null&&s.dispatch)||!(i!=null&&i.tr))return;const[a,l]=mT(r??"");if(Number.isNaN(a))return;const c=Math.min(96,Math.max(8,Number(a))),u=l||"pt",d=o.create({fontSize:`${c}${u}`}),f=i.tr.setStoredMarks([d]);s.dispatch(f)},st(_A,vk,new Set(["bold","italic","underline","strike","highlight","color","fontSize","fontFamily"]));let i$=_A;const XIt=(t,e)=>{var c;const n=t.clientY,r=t.clientX,{view:i}=e,s=i.dom.getBoundingClientRect();let o={left:0,top:n},a=!1;r>s.right?(o.left=s.left+s.width-1,a=!0):r<s.left&&(o.left=s.left);const l=(c=i.posAtCoords(o))==null?void 0:c.pos;if(l){let u=l;if(a){const h=i.state.doc.resolve(l).textOffset,m=i.state.doc.nodeAt(l),y=m==null?void 0:m.text,w=y==null?void 0:y.charAt(h);u=m!=null&&m.isText&&w!==" "?l-1:l}const d=i.state.tr.setSelection(Vt.create(i.state.doc,u));i.dispatch(d),i.focus()}},YIt=(t,e,n)=>{if(!t)return;const r=t.state;if(!r)return;const i=_T(t);if(i&&l4(r,"link",{requireEnds:!0})){n.component=NC;const s=i.getBoundingClientRect();if(!s)return;n.position={left:`${e.clientX-s.left}px`,top:`${e.clientY-s.top+15}px`},n.props={showInput:!0},n.visible=!0}};function l4(t,e,n={}){const{requireEnds:r=!1}=n,i=t.selection.$from,s=t.selection.$to;if(r){for(let a=i.depth;a>0;a--)if(i.node(a).type.name===e)return!0;for(let a=s.depth;a>0;a--)if(s.node(a).type.name===e)return!0}else for(let a=i.depth;a>0;a--)if(i.node(a).type.name===e)return!0;const o=t.schema.marks[e];if(o){const{from:a,to:l,empty:c}=t.selection;if(r){const u=o.isInSet(i.marks()),d=o.isInSet(s.marks());if(u||d||c&&o.isInSet(t.storedMarks||i.marks()))return!0}else if(c){if(o.isInSet(t.storedMarks||i.marks()))return!0}else{let u=!1;if(t.doc.nodesBetween(a,l,d=>{if(o.isInSet(d.marks))return u=!0,!1}),u)return!0}}return!1}function UT(t,e){var s,o;if(!e)return;const n=e.state;if(!n)return;const r={left:t.clientX,top:t.clientY},i=(s=e.posAtCoords)==null?void 0:s.call(e,r);if(typeof(i==null?void 0:i.pos)=="number"){const a=n.tr.setSelection(Vt.create(n.doc,i.pos));typeof e.dispatch=="function"&&e.dispatch(a),(o=e.focus)==null||o.call(e)}}const us={addRowBefore:dp,addRowAfter:dp,addColumnBefore:dp,addColumnAfter:dp,deleteRow:ky,deleteColumn:ky,deleteTable:ky,deleteBorders:DAe,mergeCells:MAe,splitCell:RAe,fixTables:LAe,ai:NAe,link:$j,table:IAe,cut:OAe,copy:PAe,paste:FAe,addDocumentSection:dp,removeDocumentSection:ky,trackChangesAccept:ZI,trackChangesReject:IW},Ji={addRowBefore:"Insert row above",addRowAfter:"Insert row below",addColumnBefore:"Insert column left",addColumnAfter:"Insert column right",deleteRow:"Delete row",deleteColumn:"Delete column",deleteTable:"Delete table",removeBorders:"Remove borders",mergeCells:"Merge cells",splitCell:"Split cell",fixTables:"Fix tables",insertText:"Insert text",replaceText:"Replace text",insertLink:"Insert link",insertTable:"Insert table",editTable:"Edit table",cut:"Cut",copy:"Copy",paste:"Paste",removeDocumentSection:"Remove section",createDocumentSection:"Create section",trackChangesAccept:"Accept change",trackChangesReject:"Reject change"},ZIt=[{label:Ji.addRowBefore,command:"addRowBefore",icon:us.addRowBefore,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add row before"}},{label:Ji.addRowAfter,command:"addRowAfter",icon:us.addRowAfter,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add row after"}},{label:Ji.addColumnBefore,command:"addColumnBefore",icon:us.addColumnBefore,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add column before"}},{label:Ji.addColumnAfter,command:"addColumnAfter",icon:us.addColumnAfter,bottomBorder:!0,props:{"data-item":"btn-tableActions-option",ariaLabel:"Add column after"}},{label:Ji.deleteRow,command:"deleteRow",icon:us.deleteRow,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete row"}},{label:Ji.deleteColumn,command:"deleteColumn",icon:us.deleteColumn,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete column"}},{label:Ji.deleteTable,command:"deleteTable",icon:us.deleteTable,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete table"}},{label:Ji.removeBorders,command:"deleteCellAndTableBorders",icon:us.deleteBorders,bottomBorder:!0,props:{"data-item":"btn-tableActions-option",ariaLabel:"Delete cell and table borders"}},{label:Ji.mergeCells,command:"mergeCells",icon:us.mergeCells,props:{"data-item":"btn-tableActions-option",ariaLabel:"Merge cells"}},{label:Ji.splitCell,command:"splitCell",icon:us.splitCell,props:{"data-item":"btn-tableActions-option",ariaLabel:"Split cells"}},{label:Ji.fixTables,command:"fixTables",icon:us.fixTables,props:{"data-item":"btn-tableActions-option",ariaLabel:"Fix tables"}}],hl={slash:"slash",click:"click"},JIt=(t,e)=>{var i,s;const n=e.editor,r={editor:$s(e.editor)};switch(t){case"insert-text":const{state:o}=n.view,{from:a,to:l,empty:c}=o.selection,u=c?"":o.doc.textBetween(a,l);return{...r,selectedText:u,handleClose:e.closePopover||(()=>null),apiKey:(i=n.options)==null?void 0:i.aiApiKey,endpoint:(s=n.options)==null?void 0:s.aiEndpoint};case"insert-link":return r;case"insert-table":return{...r,onSelect:({rows:d,cols:f})=>{n.commands.insertTable({rows:d,cols:f}),e.closePopover()}};case"edit-table":return{...r,options:ZIt,onSelect:({command:d})=>{n.commands[d]&&n.commands[d](),e.closePopover()}};case"copy":case"paste":return{...r};default:return r}};async function CP(t,e){var T,R,k,_,N,L;if(!t)return null;const n=t.state;if(!n)return null;const{from:r,to:i,empty:s}=n.selection,o=s?"":n.doc.textBetween(r,i);let a=null,l=null;if(e&&typeof e.clientX=="number"&&typeof e.clientY=="number"){const M={left:e.clientX,top:e.clientY},C=(T=t.posAtCoords)==null?void 0:T.call(t,M);typeof(C==null?void 0:C.pos)=="number"&&(a=C.pos,l=n.doc.nodeAt(a))}a===null&&typeof r=="number"&&(a=r,l=n.doc.nodeAt(a));const c={html:null,text:null,hasContent:!0,raw:null},u=a!==null?n4t(n,a):null,d=(u==null?void 0:u.isInTable)??l4(n,"table",{requireEnds:!0}),f=(u==null?void 0:u.isInList)??t4t(n),h=(u==null?void 0:u.isInSectionNode)??l4(n,"documentSection",{requireEnds:!0}),m=((R=l==null?void 0:l.type)==null?void 0:R.name)||null,y=[];let w=null;if(e&&a!==null){const M=n.doc.resolve(a),C=$=>{y.includes($.type.name)||y.push($.type.name),!w&&($.type.name==="trackInsert"||$.type.name==="trackDelete"||$.type.name==="trackFormat")&&(w=$.attrs.id)};M.marks().forEach(C);const D=M.nodeBefore,O=M.nodeAfter;D!=null&&D.marks&&D.marks.forEach(C),O!=null&&O.marks&&O.marks.forEach(C),(k=n.storedMarks)==null||k.forEach(C)}else(_=n.storedMarks)==null||_.forEach(M=>y.push(M.type.name)),n.selection.$head.marks().forEach(M=>y.push(M.type.name));const b=y.includes("trackInsert")||y.includes("trackDelete")||y.includes("trackFormat"),E=e&&a!==null?sEt({state:n,pos:a,trackedChangeId:w}):IT({state:n,from:r,to:i}),A=a!==null?(N=t.coordsAtPos)==null?void 0:N.call(t,a):null,x=A?{x:A.left,y:A.top}:e?{x:e.clientX,y:e.clientY}:null;return{selectedText:o,hasSelection:!s,selectionStart:r,selectionEnd:i,isInTable:d,isInList:f,isInSectionNode:h,currentNodeType:m,activeMarks:y,isTrackedChange:b,trackedChangeId:w,documentMode:((L=t.options)==null?void 0:L.documentMode)||"editing",canUndo:QIt(t,n),canRedo:e4t(t,n),isEditable:t.isEditable,clipboardContent:c,cursorPosition:x,pos:a,node:l,event:e,trigger:e?"click":"slash",editor:t,trackedChanges:E}}function QIt(t,e){var n;if(typeof(t==null?void 0:t.can)=="function")try{const r=t.can();if(r&&typeof r.undo=="function")return!!r.undo()}catch(r){console.warn("[SlashMenu] Unable to determine undo availability via editor.can():",r)}if(lke(t))try{const r=(n=Np.getState(e))==null?void 0:n.undoManager;return!!r&&r.undoStack.length>0}catch(r){console.warn("[SlashMenu] Unable to determine undo availability via y-prosemirror:",r)}try{return Bwe(e)>0}catch(r){return console.warn("[SlashMenu] Unable to determine undo availability via history plugin:",r),!1}}function e4t(t,e){var n;if(typeof(t==null?void 0:t.can)=="function")try{const r=t.can();if(r&&typeof r.redo=="function")return!!r.redo()}catch(r){console.warn("[SlashMenu] Unable to determine redo availability via editor.can():",r)}if(lke(t))try{const r=(n=Np.getState(e))==null?void 0:n.undoManager;return!!r&&r.redoStack.length>0}catch(r){console.warn("[SlashMenu] Unable to determine redo availability via y-prosemirror:",r)}try{return jwe(e)>0}catch(r){return console.warn("[SlashMenu] Unable to determine redo availability via history plugin:",r),!1}}function lke(t){var e,n;return!!((e=t==null?void 0:t.options)!=null&&e.collaborationProvider&&((n=t==null?void 0:t.options)!=null&&n.ydoc))}function t4t(t){const{$from:e,$to:n,from:r,to:i}=t.selection,s=a=>{for(let l=a.depth;l>0;l--)if(lu(a.node(l)))return!0;return!1};if(s(e)||s(n))return!0;let o=!1;return t.doc.nodesBetween(r,i,a=>lu(a)?(o=!0,!1):!0),o}function n4t(t,e){try{const n=t.doc.resolve(e);let r=!1,i=!1,s=!1;for(let o=n.depth;o>0;o--){const a=n.node(o),l=a.type.name;if(!r&&lu(a)&&(r=!0),!i&&(l==="table"||l==="tableRow"||l==="tableCell"||l==="tableHeader")&&(i=!0),!s&&l==="documentSection"&&(s=!0),r&&i&&s)break}return{isInTable:i,isInList:r,isInSectionNode:s}}catch(n){return console.warn("[SlashMenu] Unable to resolve position for structural context:",n),null}}const r4t=(t,e)=>{switch(e){case"ai":return!!(t!=null&&t.isAiEnabled);default:return!0}},i4t=(t,e)=>{if(typeof t.showWhen=="function")try{return!!t.showWhen(e)}catch(n){return console.warn("[SlashMenu] showWhen error for item",t.id,":",n),!1}return!0},Yae=(t,e)=>t!=null&&t.editor?RT({editor:t.editor,action:e,trackedChanges:t.trackedChanges??[]}):!0;function _P(t,e=[],n=!0){var c,u,d;const{selectedText:r,editor:i}=t;arguments.length===1&&((c=i==null?void 0:i.options)!=null&&c.slashMenuConfig)&&(e=i.options.slashMenuConfig.items||i.options.slashMenuConfig.customItems||[],n=i.options.slashMenuConfig.includeDefaultItems!==!1);const s={...t,isInTable:t.isInTable??!1,isInSectionNode:t.isInSectionNode??!1,isTrackedChange:t.isTrackedChange??!1,clipboardContent:t.clipboardContent??{hasContent:!1},selectedText:t.selectedText??"",hasSelection:t.hasSelection??!!t.selectedText},o=[{id:"ai-content",isDefault:!0,items:[{id:"insert-text",label:r?Ji.replaceText:Ji.insertText,icon:us.ai,component:NW,isDefault:!0,action:f=>{var h;f!=null&&f.commands&&typeof((h=f.commands)==null?void 0:h.insertAiMark)=="function"&&f.commands.insertAiMark()},showWhen:f=>{var y;const{trigger:h}=f;return[hl.slash,hl.click].includes(h)&&r4t((y=f.editor)==null?void 0:y.options,"ai")}}]},{id:"track-changes",isDefault:!0,items:[{id:"track-changes-accept",icon:us.trackChangesAccept,label:Ji.trackChangesAccept,isDefault:!0,action:(f,h)=>{h!=null&&h.trackedChangeId?f.commands.acceptTrackedChangeById(h.trackedChangeId):f.commands.acceptTrackedChangeBySelection()},showWhen:f=>{const{trigger:h,isTrackedChange:m}=f;return h===hl.click&&m&&Yae(f,"accept")}},{id:"track-changes-reject",label:Ji.trackChangesReject,icon:us.trackChangesReject,isDefault:!0,action:(f,h)=>{h!=null&&h.trackedChangeId?f.commands.rejectTrackedChangeById(h.trackedChangeId):f.commands.rejectTrackedChangeOnSelection()},showWhen:f=>{const{trigger:h,isTrackedChange:m}=f;return h===hl.click&&m&&Yae(f,"reject")}}]},{id:"document-sections",isDefault:!0,items:[{id:"insert-document-section",label:Ji.createDocumentSection,icon:us.addDocumentSection,isDefault:!0,action:f=>{f.commands.createDocumentSection()},showWhen:()=>!1},{id:"remove-section",label:Ji.removeDocumentSection,icon:us.removeDocumentSection,isDefault:!0,action:f=>{f.commands.removeSectionAtSelection()},showWhen:f=>{const{trigger:h,isInSectionNode:m}=f;return h===hl.click&&m}}]},{id:"general",isDefault:!0,items:[{id:"insert-link",label:Ji.insertLink,icon:us.link,component:NC,isDefault:!0,showWhen:f=>{const{trigger:h}=f;return h===hl.click}},{id:"insert-table",label:Ji.insertTable,icon:us.table,component:jAe,isDefault:!0,showWhen:f=>{const{trigger:h,isInTable:m}=f;return[hl.slash,hl.click].includes(h)&&!m}},{id:"edit-table",label:Ji.editTable,icon:us.table,component:$Ae,isDefault:!0,showWhen:f=>{const{trigger:h,isInTable:m}=f;return[hl.slash,hl.click].includes(h)&&m}}]},{id:"clipboard",isDefault:!0,items:[{id:"cut",label:Ji.cut,icon:us.cut,isDefault:!0,action:f=>{var h;(h=f.focus)==null||h.call(f),document.execCommand("cut")},showWhen:f=>{const{trigger:h,selectedText:m}=f;return h===hl.click&&m}},{id:"copy",label:Ji.copy,icon:us.copy,isDefault:!0,action:f=>{var h;(h=f.focus)==null||h.call(f),document.execCommand("copy")},showWhen:f=>{const{trigger:h,selectedText:m}=f;return h===hl.click&&m}},{id:"paste",label:Ji.paste,icon:us.paste,isDefault:!0,action:f=>{var m;const h=(m=f.view)==null?void 0:m.dom;h&&(h.focus(),document.execCommand("paste")||console.warn("[Paste] execCommand paste failed - clipboard may be empty or inaccessible"))},showWhen:f=>{const{trigger:h}=f;return[hl.click,hl.slash].includes(h)}}]}];let a=[];if(n&&(a=[...o]),e.length>0&&e.forEach(f=>{const h=a.findIndex(m=>m.id===f.id);h!==-1?a[h].items=[...a[h].items,...f.items.map(m=>({...m,isDefault:!1}))]:a.push({...f,isDefault:!1,items:f.items.map(m=>({...m,isDefault:!1}))})}),(d=(u=i==null?void 0:i.options)==null?void 0:u.slashMenuConfig)!=null&&d.menuProvider)try{a=i.options.slashMenuConfig.menuProvider(s,a)||a}catch(f){console.warn("[SlashMenu] menuProvider error:",f)}return a.map(f=>{const h=f.items.filter(m=>i4t(m,s));return{...f,items:h}}).filter(f=>f.items.length>0)}const s4t={class:"slash-menu-items"},o4t={key:0,class:"slash-menu-divider",tabindex:"0"},a4t=["onClick"],l4t=["innerHTML"],c4t={__name:"SlashMenu",props:{editor:{type:Object,required:!0},openPopover:{type:Function,required:!0},closePopover:{type:Function,required:!0}},setup(t){const e=t,n=Ve(null),r=Ve(""),i=Ve(!1),s=Ve({left:"0px",top:"0px"}),o=Ve(null),a=Ve([]),l=Ve(null),c=Ve(null),u=()=>{var D;!((D=e.editor)!=null&&D.isEditable)&&i.value&&N({restoreCursor:!1})},d=pt(()=>{const D=[];return a.value.forEach(O=>{O.items.forEach($=>{D.push($)})}),D}),f=pt(()=>r.value?d.value.filter(D=>{var O;return(O=D.label)==null?void 0:O.toLowerCase().includes(r.value.toLowerCase())}):d.value),h=pt(()=>r.value?[{id:"search-results",items:f.value}]:a.value);gr(i,D=>{D&&gi(()=>{n.value&&n.value.focus({preventScroll:!0})})}),gr(d,D=>{D.length>0&&(l.value=D[0].id)});const m=new Map,y=(D,O)=>{D&&(m.set(O.id,{element:D,item:O}),gi(()=>{b(O.id)}))},w=D=>{const O=D.item||D.currentItem,$=document.createElement("div");if($.className="slash-menu-default-content",O.icon){const W=document.createElement("span");W.className="slash-menu-item-icon",W.innerHTML=O.icon,$.appendChild(W)}const U=document.createElement("span");return U.textContent=O.label,$.appendChild(U),$},b=async D=>{const O=m.get(D);if(!O||O.element.hasCustomContent)return;const{element:$,item:U}=O;try{c.value||(c.value=await CP(e.editor));const W={...c.value,currentItem:U},se=(U.render||w)(W);se instanceof HTMLElement&&($.innerHTML="",$.appendChild(se),$.hasCustomContent=!0)}catch(W){console.warn(`[SlashMenu] Error rendering custom item ${D}:`,W);const ce=w({...c.value||{},currentItem:U});$.innerHTML="",$.appendChild(ce),$.hasCustomContent=!0}},E=()=>{m.forEach(D=>{D.element&&(D.element.hasCustomContent=!1)}),m.clear()},A=D=>{var O,$;if(D.key==="Escape"&&i.value){D.preventDefault(),D.stopPropagation(),N(),($=(O=e.editor)==null?void 0:O.focus)==null||$.call(O);return}if(i.value&&(D.target===n.value||o.value&&o.value.contains(D.target))){const U=f.value,W=U.findIndex(ce=>ce.id===l.value);switch(D.key){case"ArrowDown":{D.preventDefault(),W<U.length-1&&(l.value=U[W+1].id);break}case"ArrowUp":{D.preventDefault(),W>0&&(l.value=U[W-1].id);break}case"Enter":{D.preventDefault();const ce=U.find(se=>se.id===l.value);ce&&_(ce);break}}}},x=D=>{if(i.value&&o.value&&!o.value.contains(D.target)){const O=D.ctrlKey&&dU();D.button===0&&!O&&UT(D,e.editor),N({restoreCursor:!1})}},T=D=>{var W,ce,se;const O=!((W=e.editor)!=null&&W.isEditable),$=(se=(ce=e.editor)==null?void 0:ce.options)==null?void 0:se.disableContextMenu,U=$2t(D);return!O&&!$&&!U},R=D=>{try{T(D)&&(D[Nxe]=!0)}catch(O){console.warn("[SlashMenu] Error in capture phase context menu handler:",O)}},k=async D=>{var W,ce,se,Q,J,K;if(!T(D))return;D.preventDefault();const O=(W=e.editor)==null?void 0:W.state,$=((ce=O==null?void 0:O.selection)==null?void 0:ce.from)!==((se=O==null?void 0:O.selection)==null?void 0:se.to);let U=!1;if($&&Number.isFinite(D.clientX)&&Number.isFinite(D.clientY)){const re=(J=(Q=e.editor)==null?void 0:Q.posAtCoords)==null?void 0:J.call(Q,{left:D.clientX,top:D.clientY});if(typeof(re==null?void 0:re.pos)=="number"){const{from:X,to:me}=O.selection;U=re.pos>=X&&re.pos<=me}}U||UT(D,e.editor);try{const re=await CP(e.editor,D);c.value=re,a.value=_P({...re,trigger:"click"}),l.value=((K=d.value[0])==null?void 0:K.id)||null,r.value="";const X=e.editor.state;if(!X)return;e.editor.dispatch(X.tr.setMeta(Bh,{type:"open",pos:(re==null?void 0:re.pos)??X.selection.from,clientX:D.clientX,clientY:D.clientY}))}catch(re){console.error("[SlashMenu] Error opening context menu:",re)}},_=async D=>{if(e.editor)if(D.action&&await D.action(e.editor,c.value),D.component){const O=o.value,$=JIt(D.id,e);let U={left:s.value.left,top:s.value.top};if(O){const W=O.getBoundingClientRect(),ce=O.closest(".super-editor");if(ce){const se=ce.getBoundingClientRect();U={left:`${W.left-se.left}px`,top:`${W.top-se.top}px`}}}e.openPopover($s(D.component),$,U),N({restoreCursor:!1})}else{const O=D.id!=="paste";N({restoreCursor:O})}},N=(D={restoreCursor:!0})=>{var W,ce;if(!e.editor)return;const O=e.editor.state;if(!O)return;const $=Bh.getState(O),U=$==null?void 0:$.anchorPos;if(e.editor.dispatch(O.tr.setMeta(Bh,{type:"close"})),D.restoreCursor&&U!==null&&U!==void 0){const se=e.editor.state.tr.setSelection(e.editor.state.selection.constructor.near(e.editor.state.doc.resolve(U)));e.editor.dispatch(se),(ce=(W=e.editor).focus)==null||ce.call(W)}E(),c.value=null,i.value=!1,r.value="",a.value=[]};let L=null,M=null,C=null;return Ur(()=>{e.editor&&(document.addEventListener("keydown",A),document.addEventListener("pointerdown",x),e.editor.on("update",u),M=async D=>{var $,U,W,ce;if(($=e.editor)!=null&&$.isEditable)if(i.value=!0,s.value=D.menuPosition,r.value="",c.value){if(a.value.length===0){const se=((W=c.value.event)==null?void 0:W.type)==="contextmenu"?"click":"slash";a.value=_P({...c.value,trigger:se}),l.value=((ce=d.value[0])==null?void 0:ce.id)||null}}else{const se=await CP(e.editor);c.value=se,a.value=_P({...se,trigger:"slash"}),l.value=((U=d.value[0])==null?void 0:U.id)||null}},e.editor.on("slashMenu:open",M),L=_T(e.editor),L&&(L.addEventListener("contextmenu",R,!0),L.addEventListener("contextmenu",k)),C=()=>{E(),i.value=!1,r.value="",c.value=null},e.editor.on("slashMenu:close",C))}),as(()=>{if(document.removeEventListener("keydown",A),document.removeEventListener("pointerdown",x),E(),e.editor)try{M&&e.editor.off("slashMenu:open",M),C&&e.editor.off("slashMenu:close",C),e.editor.off("update",u),L==null||L.removeEventListener("contextmenu",R,!0),L==null||L.removeEventListener("contextmenu",k)}catch(D){console.warn("[SlashMenu] Error during cleanup:",D)}}),(D,O)=>i.value?(rt(),wt("div",{key:0,ref_key:"menuRef",ref:o,class:"slash-menu",style:Gn(s.value),onPointerdown:O[2]||(O[2]=mr(()=>{},["stop"]))},[wc(Pt("input",{ref_key:"searchInput",ref:n,"onUpdate:modelValue":O[0]||(O[0]=$=>r.value=$),type:"text",class:"slash-menu-hidden-input",onKeydown:[A,O[1]||(O[1]=mr(()=>{},["stop"]))]},null,544),[[Mb,r.value]]),Pt("div",s4t,[(rt(!0),wt(xn,null,Ui(h.value,($,U)=>(rt(),wt(xn,{key:$.id},[U>0&&$.items.length>0?(rt(),wt("div",o4t)):Xt("",!0),(rt(!0),wt(xn,null,Ui($.items,W=>(rt(),wt("div",{key:W.id,class:Qr(["slash-menu-item",{"is-selected":W.id===l.value}]),onClick:ce=>_(W)},[Pt("div",{ref_for:!0,ref:ce=>y(ce,W),class:"slash-menu-custom-item"},[W.render?Xt("",!0):(rt(),wt(xn,{key:0},[W.icon?(rt(),wt("span",{key:0,class:"slash-menu-item-icon",innerHTML:W.icon},null,8,l4t)):Xt("",!0),Pt("span",null,ci(W.label),1)],64))],512)],10,a4t))),128))],64))),128))])],36)):Xt("",!0)}},u4t={key:0,class:"numbering"},d4t=200,GE=96,f4t="flex-end",h4t={__name:"Ruler",props:{orientation:{type:String,default:"horizontal"},length:{type:Number,default:0},editor:{type:Object,required:!0}},emits:["margin-change"],setup(t,{emit:e}){const n=e,r=t,i=Ve(null),s=Ve(null),o=Ve("#CCCCCC"),a=Ve("#2563EB66"),l=Ve(null),c=Ve(null),u=Ve(0),d=Ve(!1),f=Ve(null),h=Oi({side:"left",x:0}),m=Oi({side:"right",x:0}),y=Ve(!1),w=Ve(0);let b=0,E=null,A=null;const x=Ve(1),T=()=>{const G=r.editor;return G?typeof G.zoom=="number"&&typeof G.setZoom=="function"?G:G.presentationEditor?G.presentationEditor:null:null},R=()=>{var ee;if(!r.editor||((ee=r.editor.options)==null?void 0:ee.mode)!=="docx")return;const G=T();let B,z,de;if(G&&typeof G.getCurrentSectionPageStyles=="function"){const ae=G.getCurrentSectionPageStyles();B=ae.pageSize,z=ae.pageMargins,de=ae.sectionIndex}else{const ae=r.editor.getPageStyles();B=ae.pageSize??{width:8.5,height:11},z=ae.pageMargins??{left:1,right:1,top:1,bottom:1},de=0}if(l.value&&u.value===de)return;u.value=de,l.value=B,c.value=z;const Y=Ydt({pageSize:{width:B.width,height:B.height},pageMargins:{left:z.left,right:z.right,top:z.top??1,bottom:z.bottom??1}});h.x=Y.leftMarginPx,m.x=Y.rightMarginPx,s.value=Y},k=pt(()=>G=>{const B=x.value;return{position:"absolute",left:`${G.x*B}px`,bottom:"0",width:"1px",height:G.height,backgroundColor:"#666",pointerEvents:"none"}}),_=pt(()=>G=>{const B=G==="left"?h:m,z=x.value;return{left:`${B.x*z}px`}}),N=pt(()=>{if(!i.value)return{left:"0px",minHeight:"100%"};const G=x.value,B=i.value.parentElement,z=(B==null?void 0:B.querySelector(".super-editor"))??document.querySelector(".super-editor");if(!z)return{left:`${f.value.x*G}px`,minHeight:"100%"};const de=z.getBoundingClientRect();return{left:`${f.value.x*G}px`,minHeight:`${de.height}px`}}),L=G=>{if(!i.value)return G;const B=i.value.getBoundingClientRect(),z=x.value;return(G-B.left)/z},M=G=>{d.value=!0,O();const B=G.currentTarget.id;f.value=B==="left-margin-handle"?h:m,w.value=f.value.x,b=L(G.clientX)-f.value.x,y.value=!0},C=G=>{if(!d.value||!l.value)return;const z=L(G.clientX)-b,de=l.value.width*GE,Y=f.value.side==="left"?m.x:h.x;f.value.x=Jdt(z,f.value.side,Y,de,d4t)},D=()=>{if(d.value=!1,y.value=!1,$(),f.value&&f.value.x!==w.value){const G=U();n("margin-change",{side:f.value.side,value:G,sectionIndex:u.value})}},O=()=>{o.value=a.value},$=()=>{o.value="#CCC"},U=()=>{if(!l.value)return 0;const G=l.value.width*GE;return Zdt(f.value.x,f.value.side,G,GE)},W=pt(()=>{var de,Y;const G=((de=s.value)==null?void 0:de.widthPx)??((Y=l.value)==null?void 0:Y.width)*GE??816,B=x.value,z=G*B;return{width:`${z}px`,minWidth:`${z}px`,height:"25px",overflow:"visible",flexShrink:0}}),ce=pt(()=>{var de,Y;const G=((de=s.value)==null?void 0:de.widthPx)??((Y=l.value)==null?void 0:Y.width)*GE??816,B=x.value;return{width:`${G*B}px`,height:"25px"}}),se=pt(()=>({"--alignment":f4t,"--ruler-handle-color":o.value,"--ruler-handle-active-color":a.value})),Q=()=>{d.value||R()},J=({zoom:G})=>{x.value=G},K=()=>{const G=T();G&&typeof G.zoom=="number"?x.value=G.zoom:x.value=1},re=()=>{if(!r.editor)return;E=Q,r.editor.on("selectionUpdate",E);const G=T();G&&(A=J,G.on("zoomChange",A),K())},X=()=>{r.editor&&E&&(r.editor.off("selectionUpdate",E),E=null);const G=T();G&&A&&(G.off("zoomChange",A),A=null)},me=G=>G?typeof G.zoom=="number"&&typeof G.setZoom=="function"?G:G.presentationEditor??null:null;return gr(()=>r.editor,(G,B)=>{if(B){E&&B.off("selectionUpdate",E);const z=me(B);z&&A&&z.off("zoomChange",A)}A&&!B&&(A=null),G&&(re(),R())}),Ur(()=>{R(),re(),window.addEventListener("mousemove",C),window.addEventListener("mouseup",D)}),Gk(()=>{X(),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",D)}),(G,B)=>(rt(),wt("div",{class:"ruler-wrapper",style:Gn([W.value,se.value])},[Pt("div",{class:"ruler",ref_key:"ruler",ref:i,style:Gn(ce.value)},[Pt("div",{class:"margin-handle handle-left",id:"left-margin-handle",onMousedown:M,style:Gn(_.value("left"))},null,36),Pt("div",{class:"margin-handle handle-right",id:"right-margin-handle",onMousedown:M,style:Gn(_.value("right"))},null,36),y.value?(rt(),wt("div",{key:0,class:"vertical-indicator",style:Gn(N.value)},null,4)):Xt("",!0),s.value?(rt(!0),wt(xn,{key:1},Ui(s.value.ticks,(z,de)=>(rt(),wt("div",{key:de,class:Qr(["ruler-tick",`ruler-tick--${z.size}`]),style:Gn(k.value(z))},[z.label!==void 0?(rt(),wt("span",u4t,ci(z.label),1)):Xt("",!0)],6))),128)):Xt("",!0)],4)],4))}},Zae=or(h4t,[["__scopeId","data-v-9face03e"]]),p4t={__name:"GenericPopover",props:{editor:{type:Object,required:!0},styles:{type:Object,default:()=>({})},visible:{type:Boolean,default:!1},position:{type:Object,default:()=>({left:"0px",top:"0px"})}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=Ve(null);function s(l){i.value&&!i.value.contains(l.target)&&r("close"),UT(l,n.editor)}function o(l){l.key==="Escape"&&r("close")}gr(()=>n.visible,l=>{l?(document.addEventListener("pointerdown",s),document.addEventListener("keydown",o)):(document.removeEventListener("pointerdown",s),document.removeEventListener("keydown",o))}),Ur(()=>{n.visible&&(document.addEventListener("pointerdown",s),document.addEventListener("keydown",o))}),as(()=>{document.removeEventListener("pointerdown",s),document.removeEventListener("keydown",o)});const a=pt(()=>({left:n.position.left,top:n.position.top,...n.styles}));return(l,c)=>t.visible?(rt(),wt("div",{key:0,class:"generic-popover",style:Gn(a.value),ref_key:"popover",ref:i,onPointerdown:c[0]||(c[0]=mr(()=>{},["stop"])),onClick:c[1]||(c[1]=mr(()=>{},["stop"]))},[Che(l.$slots,"default",{},void 0,!0)],36)):Xt("",!0)}},m4t=or(p4t,[["__scopeId","data-v-22601496"]]),g4t=["data-boundary-index","data-boundary-type","onMousedown"],y4t=9,b4t=4,w4t=1e3,v4t=2e3,x4t=16,E4t=1,S4t={__name:"TableResizeOverlay",props:{editor:{type:Object,required:!0},visible:{type:Boolean,default:!1},tableElement:{type:Object,default:null}},emits:["resize-start","resize-move","resize-end","resize-success","resize-error"],setup(t,{emit:e}){const n=t,r=e,i=Ve(null),s=Ve(null),o=()=>{const C=n.editor;return C&&typeof C.zoom=="number"?C.zoom:C!=null&&C.presentationEditor&&typeof C.presentationEditor.zoom=="number"?C.presentationEditor.zoom:(console.warn("[TableResizeOverlay] getZoom: Unable to retrieve zoom from editor instance, using fallback value of 1. This may indicate the editor is not fully initialized or is not a PresentationEditor instance. Table resize handles may be misaligned."),1)},a=Ve(null),l=Ve(!1);let c=null,u=!1;function d(){if(c!==null)return;const C=()=>{m(),c=requestAnimationFrame(C)};c=requestAnimationFrame(C)}function f(){c!==null&&(cancelAnimationFrame(c),c=null)}const h=pt(()=>{if(!i.value||!n.tableElement)return{};const C=i.value;let D=C.width;return a.value&&(D=Math.max(C.width+w4t,v4t)),{position:"absolute",left:`${C.left}px`,top:`${C.top}px`,width:`${D}px`,height:`${C.height}px`,pointerEvents:a.value?"auto":"none",zIndex:10}});function m(){if(!n.tableElement){i.value=null;return}const C=n.tableElement.offsetParent,D=n.tableElement.getBoundingClientRect();if(D.width===0||D.height===0){i.value=null;return}if(C){const O=C.getBoundingClientRect(),$=D.left-O.left+(C.scrollLeft||0),U=D.top-O.top+(C.scrollTop||0);i.value={left:$,top:U,width:D.width,height:D.height}}else i.value={left:n.tableElement.offsetLeft,top:n.tableElement.offsetTop,width:D.width,height:D.height}}const y=pt(()=>{var $;if(!(($=s.value)!=null&&$.columns))return[];const C=s.value.columns,D=[];for(let U=0;U<C.length-1;U++){const W=C[U],ce=C[U+1];D.push({...W,index:U,x:ce.x,type:"inner"})}const O=C[C.length-1];return D.push({...O,index:C.length-1,x:O.x+O.w,type:"right-edge"}),D});function w(C){var U;if(C.type==="right-edge")return[{y:0,h:null}];const D=(U=s.value)==null?void 0:U.segments;if(!D||!Array.isArray(D))return[{y:0,h:null}];const O=C.index+1,$=D[O];return!$||$.length===0?[]:$.filter(W=>W&&typeof W=="object").map(W=>({y:typeof W.y=="number"?W.y:0,h:W.h!==null&&typeof W.h=="number"?W.h:null}))}function b(C,D){const O=o(),$=C.x*O,U=D.y!=null?D.y*O:null,W=D.h!=null?D.h*O:null;return{position:"absolute",left:`${$}px`,top:U!=null?`${U}px`:"0",width:`${y4t}px`,height:W!=null?`${W}px`:"100%",transform:`translateX(-${b4t}px)`,cursor:"col-resize",pointerEvents:"auto"}}const E=pt(()=>{if(!a.value||!s.value)return{display:"none"};const C=y.value[a.value.resizableBoundaryIndex];if(!C)return{display:"none"};const D=o();return{position:"absolute",left:`${(C.x+a.value.constrainedDelta)*D}px`,top:"0",width:"2px",height:"100%",backgroundColor:"#4A90E2",pointerEvents:"none",zIndex:20}});function A(){var C;if(!n.tableElement){s.value=null;return}try{const D=n.tableElement.getAttribute("data-table-boundaries");if(!D){s.value=null;return}const O=JSON.parse(D);if(!O||typeof O!="object"||!Array.isArray(O.columns)){s.value=null;return}const $=O.columns.filter(W=>typeof W=="object"&&Number.isFinite(W.i)&&W.i>=0&&Number.isFinite(W.x)&&W.x>=0&&Number.isFinite(W.w)&&W.w>0&&Number.isFinite(W.min)&&W.min>0&&(W.r===0||W.r===1)).map(W=>({i:W.i,x:Math.max(0,W.x),w:Math.max(1,W.w),min:Math.max(1,W.min),r:W.r}));if($.length===0){s.value=null,r("resize-error",{error:"Table metadata is corrupted or empty after validation",rawMetadata:D});return}const U=Array.isArray(O.segments)?O.segments:void 0;s.value={columns:$,segments:U}}catch(D){s.value=null,r("resize-error",{error:D instanceof Error?D.message:"Failed to parse table boundaries",rawMetadata:(C=n.tableElement)==null?void 0:C.getAttribute("data-table-boundaries")})}}function x(C,D){var Q,J,K;if(C.preventDefault(),C.stopPropagation(),!((Q=s.value)!=null&&Q.columns))return;const O=y.value[D];if(!O)return;const $=s.value.columns,U=O.type==="right-edge",W=$[O.index],ce=U?null:$[O.index+1];if(a.value={columnIndex:O.index,resizableBoundaryIndex:D,isRightEdge:U,initialX:C.clientX,initialWidths:$.map(re=>re.w),leftColumn:{width:W.w,minWidth:W.min},rightColumn:ce?{width:ce.w,minWidth:ce.min}:null,constrainedDelta:0},!((K=(J=n.editor)==null?void 0:J.view)!=null&&K.dom)){r("resize-error",{error:"Editor view not available"}),a.value=null;return}const se=n.editor.view.dom;se.style.pointerEvents="none";try{document.addEventListener("mousemove",k),document.addEventListener("mouseup",_),r("resize-start",{columnIndex:O.index,isRightEdge:U,initialWidths:a.value.initialWidths})}catch(re){document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_),se.style.pointerEvents="auto",a.value=null,r("resize-error",{error:re instanceof Error?re.message:String(re)})}}function T(C,D){let O,$=null;return{throttled:function(...ce){O||(C.apply(this,ce),O=!0,$=setTimeout(()=>{O=!1,$=null},D))},cancel:()=>{$!==null&&(clearTimeout($),$=null,O=!1)}}}const R=T(C=>{if(u||!a.value)return;const D=o(),$=(C.clientX-a.value.initialX)/D,U=-(a.value.leftColumn.width-a.value.leftColumn.minWidth);let W;if(a.value.isRightEdge){const se=n.tableElement.getBoundingClientRect(),Q=n.tableElement.closest(".superdoc-page");if(Q){const J=Q.getBoundingClientRect(),re=se.left-J.left,me=(J.right-re-se.right)/D;W=Math.max(0,me)}else W=1/0}else W=a.value.rightColumn.width-a.value.rightColumn.minWidth;const ce=Math.max(U,Math.min(W,$));a.value.constrainedDelta=ce,r("resize-move",{columnIndex:a.value.columnIndex,delta:ce})},x4t),k=R.throttled;function _(C){var ce,se;if(!a.value)return;const D=a.value.constrainedDelta,O=a.value.columnIndex,$=a.value.initialWidths,U=a.value.isRightEdge,W=[...$];if(W[O]=$[O]+D,U||(W[O+1]=$[O+1]-D),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_),(se=(ce=n.editor)==null?void 0:ce.view)!=null&&se.dom){const Q=n.editor.view.dom;Q.style.pointerEvents="auto"}!l.value&&Math.abs(D)>E4t&&(N(O,W),r("resize-end",{columnIndex:O,finalWidths:W,delta:D})),a.value=null}function N(C,D){var O,$;if(!(!((O=n.editor)!=null&&O.view)||!n.tableElement))try{const{state:U,dispatch:W}=n.editor.view,ce=U.tr,se=L(U,n.tableElement);if(se===null){r("resize-error",{columnIndex:C,error:"Table position not found in document"});return}const Q=U.doc.nodeAt(se);if(!Q||Q.type.name!=="table"){r("resize-error",{columnIndex:C,error:"Invalid table node at position"});return}const J=D.map(B=>pc(B)),K=J.map(B=>({col:B})),re=J.reduce((B,z)=>B+z,0),X={...Q.attrs,grid:K,tableWidth:re,userEdited:!0};ce.setNodeMarkup(se,null,X);const me=[C,C+1];M(ce,Q,se,me,D),W(ce);const G=($=n.tableElement)==null?void 0:$.getAttribute("data-sd-block-id");G&&G.trim()&&Sy.invalidate([G]),r("resize-success",{columnIndex:C,newWidths:D})}catch(U){r("resize-error",{columnIndex:C,error:U instanceof Error?U.message:String(U)})}}function L(C,D){const O=D.querySelector("[data-pm-start]");if(!O)return null;const $=O.getAttribute("data-pm-start");if(!$)return null;const U=parseInt($,10);if(!Number.isFinite(U))return null;let W=null;return C.doc.descendants((ce,se)=>{if(ce.type.name==="table"){const Q=se+ce.nodeSize;if(U>=se&&U<Q)return W=se,!1}}),W}function M(C,D,O,$,U){let W=0;D.descendants((ce,se,Q)=>{if(ce.type.name==="tableRow")return W=0,!0;if(ce.type.name==="tableCell"||ce.type.name==="tableHeader"){const{colspan:J=1}=ce.attrs;if($.some(re=>re>=W&&re<W+J)){const re=O+1+se,X=[];for(let me=0;me<J;me++){const G=W+me,B=U[G];B!==void 0&&B>0&&X.push(B)}X.length>0&&C.setNodeMarkup(re,null,{...ce.attrs,colwidth:X})}return W+=J,!1}return!0})}return gr(()=>n.tableElement,()=>{A(),m(),n.visible&&n.tableElement?d():n.tableElement||f()},{immediate:!0}),gr(()=>n.visible,C=>{C?(A(),m(),d()):(f(),a.value&&(l.value=!0,_(new MouseEvent("mouseup")),l.value=!1))}),Ur(()=>{window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),m()}),as(()=>{var C,D;u=!0,R.cancel(),f(),a.value&&(document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_),(D=(C=n.editor)==null?void 0:C.view)!=null&&D.dom&&(n.editor.view.dom.style.pointerEvents="auto")),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}),(C,D)=>t.visible&&s.value?(rt(),wt("div",{key:0,class:"superdoc-table-resize-overlay",style:Gn(h.value),onMousedown:D[0]||(D[0]=mr(()=>{},["stop"]))},[(rt(!0),wt(xn,null,Ui(y.value,(O,$)=>(rt(),wt(xn,{key:`boundary-${$}`},[(rt(!0),wt(xn,null,Ui(w(O),(U,W)=>(rt(),wt("div",{key:`handle-${O.type}-${O.index}-${W}`,class:Qr(["resize-handle",{"resize-handle--active":a.value&&a.value.resizableBoundaryIndex===$,"resize-handle--edge":O.type==="right-edge"}]),"data-boundary-index":$,"data-boundary-type":O.type,style:Gn(b(O,U)),onMousedown:ce=>x(ce,$)},null,46,g4t))),128))],64))),128)),a.value?(rt(),wt("div",{key:0,class:"resize-guideline",style:Gn(E.value)},null,4)):Xt("",!0)],36)):Xt("",!0)}},A4t=or(S4t,[["__scopeId","data-v-033805f0"]]),T4t=["data-handle-position","onMousedown"],NP=2e3,Jae=12,k4t=16,Qae=1,ele=10,C4t=15,_4t=20,N4t={__name:"ImageResizeOverlay",props:{editor:{type:Object,required:!0},visible:{type:Boolean,default:!1},imageElement:{type:Object,default:null}},emits:["resize-start","resize-move","resize-end","resize-success","resize-error"],setup(t,{emit:e}){nFe(A=>({v410b9c0c:Jae+"px",v190a595a:C4t}));function n(A){return A&&typeof A=="object"&&A.view&&typeof A.view=="object"&&A.view.dom instanceof HTMLElement&&A.view.state&&typeof A.view.dispatch=="function"}const r=t,i=e,s=Ve(null),o=Ve(null),a=Ve(!1),l=pt(()=>{if(!r.imageElement||!r.imageElement.isConnected)return{};const A=r.imageElement.getBoundingClientRect(),x=r.imageElement.closest(".super-editor");if(!x)return{position:"absolute",left:`${r.imageElement.offsetLeft}px`,top:`${r.imageElement.offsetTop}px`,width:`${A.width}px`,height:`${A.height}px`,pointerEvents:o.value?"auto":"none",zIndex:ele};const T=x.getBoundingClientRect(),R=x.scrollLeft||0,k=x.scrollTop||0,_=A.left-T.left+R,N=A.top-T.top+k;let L=A.width,M=A.height,C=0,D=0;if(o.value){const O=NP;L=A.width+O*2,M=A.height+O*2,C=-O,D=-O}return{position:"absolute",left:`${_+C}px`,top:`${N+D}px`,width:`${L}px`,height:`${M}px`,pointerEvents:o.value?"auto":"none",zIndex:ele}}),c=pt(()=>{if(!s.value||!r.imageElement)return[];const A=r.imageElement.getBoundingClientRect(),x=A.width,T=A.height,k=Jae/2,_=o.value?NP:0;return[{position:"nw",style:{left:`${_-k}px`,top:`${_-k}px`,cursor:"nwse-resize"}},{position:"ne",style:{left:`${_+x-k}px`,top:`${_-k}px`,cursor:"nesw-resize"}},{position:"sw",style:{left:`${_-k}px`,top:`${_+T-k}px`,cursor:"nesw-resize"}},{position:"se",style:{left:`${_+x-k}px`,top:`${_+T-k}px`,cursor:"nwse-resize"}}]}),u=pt(()=>{if(!o.value||!r.imageElement)return{display:"none"};const A=NP;return{position:"absolute",left:`${A}px`,top:`${A}px`,width:`${o.value.constrainedWidth}px`,height:`${o.value.constrainedHeight}px`,border:"2px solid #4A90E2",pointerEvents:"none",zIndex:_4t,boxSizing:"border-box"}});function d(){var A;if(!r.imageElement||!r.imageElement.isConnected){s.value=null;return}try{const x=r.imageElement.getAttribute("data-image-metadata");if(!x){s.value=null;return}const T=JSON.parse(x);if(!T||typeof T!="object"){s.value=null;return}const R=["originalWidth","originalHeight","maxWidth","maxHeight","aspectRatio","minWidth","minHeight"];for(const k of R)if(!Number.isFinite(T[k])||T[k]<=0){console.warn(`[ImageResizeOverlay] Invalid or missing metadata field: ${k}`),s.value=null;return}s.value=T}catch(x){s.value=null,i("resize-error",{error:x instanceof Error?x.message:"Failed to parse image metadata",rawMetadata:(A=r.imageElement)==null?void 0:A.getAttribute("data-image-metadata")})}}function f(A,x){if(A.preventDefault(),A.stopPropagation(),!n(r.editor)||!s.value||!r.imageElement)return;const T=r.imageElement.getBoundingClientRect();o.value={handle:x,initialX:A.clientX,initialY:A.clientY,initialWidth:T.width,initialHeight:T.height,aspectRatio:s.value.aspectRatio,constrainedWidth:T.width,constrainedHeight:T.height};const R=r.editor.view.dom;R.style.pointerEvents="none",document.addEventListener("mousemove",y),document.addEventListener("mouseup",b),document.addEventListener("keydown",w),i("resize-start",{blockId:r.imageElement.getAttribute("data-sd-block-id"),initialWidth:T.width,initialHeight:T.height})}function h(A,x){let T,R=null;return{throttled:function(...N){T||(A.apply(this,N),T=!0,R=setTimeout(()=>{T=!1,R=null},x))},cancel:()=>{R!==null&&(clearTimeout(R),R=null,T=!1)}}}const m=h(A=>{if(!o.value||!s.value)return;let x=A.clientX-o.value.initialX,T=A.clientY-o.value.initialY;const R=o.value.handle;R==="nw"?(x=-x,T=-T):R==="ne"?T=-T:R==="sw"&&(x=-x);const k=(o.value.initialWidth+x)/o.value.initialWidth,_=(o.value.initialHeight+T)/o.value.initialHeight,N=Math.max(k,_);let L=o.value.initialWidth*N,M=o.value.initialHeight*N;const C=s.value.minWidth,D=s.value.minHeight,O=s.value.maxWidth,$=s.value.maxHeight;L<C&&(L=C,M=L/o.value.aspectRatio),M<D&&(M=D,L=M*o.value.aspectRatio),L>O&&(L=O,M=L/o.value.aspectRatio),M>$&&(M=$,L=M*o.value.aspectRatio),o.value.constrainedWidth=L,o.value.constrainedHeight=M,i("resize-move",{blockId:r.imageElement.getAttribute("data-sd-block-id"),width:L,height:M})},k4t),y=m.throttled;function w(A){A.key==="Escape"&&o.value&&(a.value=!0,b(new MouseEvent("mouseup")),a.value=!1)}function b(A){var N,L;if(!o.value)return;const x=o.value.constrainedWidth,T=o.value.constrainedHeight,R=(N=r.imageElement)==null?void 0:N.getAttribute("data-sd-block-id");if(document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),document.removeEventListener("keydown",w),(L=r.editor)!=null&&L.view){const M=r.editor.view.dom;M&&M.style&&(M.style.pointerEvents="auto")}const k=Math.abs(x-o.value.initialWidth),_=Math.abs(T-o.value.initialHeight);!a.value&&(k>Qae||_>Qae)&&(E(R,x,T),i("resize-end",{blockId:R,finalWidth:x,finalHeight:T})),o.value=null}function E(A,x,T){if(!(!n(r.editor)||!r.imageElement)){if(!Number.isFinite(x)||!Number.isFinite(T)||x<=0||T<=0){i("resize-error",{blockId:A,error:"Invalid dimensions: width and height must be positive finite numbers"});return}try{const{state:R,dispatch:k}=r.editor.view,_=R.tr,N=r.imageElement.getAttribute("data-pm-start");if(!N){i("resize-error",{blockId:A,error:"Image position marker (data-pm-start) not found"});return}const L=parseInt(N,10);if(!Number.isFinite(L)||L<0){i("resize-error",{blockId:A,error:"Invalid image position marker"});return}const M=R.doc.nodeAt(L);if(!M||M.type.name!=="image"){i("resize-error",{blockId:A,error:"Invalid image node at position"});return}const C={...M.attrs,size:{width:Math.round(x),height:Math.round(T)}};_.setNodeMarkup(L,null,C),k(_),A&&A.trim()&&Sy.invalidate([A]),i("resize-success",{blockId:A,newWidth:x,newHeight:T})}catch(R){i("resize-error",{blockId:A,error:R instanceof Error?R.message:String(R)})}}}return gr(()=>r.imageElement,()=>{d()},{immediate:!0}),gr(()=>r.visible,A=>{A?d():o.value&&(a.value=!0,b(new MouseEvent("mouseup")),a.value=!1)}),as(()=>{var A,x;m.cancel(),o.value&&(document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),document.removeEventListener("keydown",w),(x=(A=r.editor)==null?void 0:A.view)!=null&&x.dom&&(r.editor.view.dom.style.pointerEvents="auto"))}),(A,x)=>t.visible&&s.value?(rt(),wt("div",{key:0,class:"superdoc-image-resize-overlay",style:Gn(l.value),onMousedown:x[0]||(x[0]=mr(()=>{},["stop"]))},[(rt(!0),wt(xn,null,Ui(c.value,T=>(rt(),wt("div",{key:T.position,class:Qr(["resize-handle",{"resize-handle--active":o.value&&o.value.handle===T.position,[`resize-handle--${T.position}`]:!0}]),style:Gn(T.style),"data-handle-position":T.position,onMousedown:R=>f(R,T.position)},null,46,T4t))),128)),o.value?(rt(),wt("div",{key:0,class:"resize-guideline",style:Gn(u.value)},null,4)):Xt("",!0)],36)):Xt("",!0)}},I4t=or(N4t,[["__scopeId","data-v-3ddf7f34"]]),R4t=300,M4t=10,L4t={__name:"LinkClickHandler",props:{editor:{type:Object,required:!0},openPopover:{type:Function,required:!0},closePopover:{type:Function,required:!0},popoverVisible:{type:Boolean,default:!1}},setup(t){const e=t;let n=0;const r=s=>{var d;const o=(s==null?void 0:s.detail)??{},a=o.element,l=Date.now();if(l-n<R4t)return;if(n=l,e.popoverVisible){e.closePopover();return}if(!e.editor||!e.editor.state)return;const c=_T(e.editor);if(!c)return;const u=(d=a==null?void 0:a.dataset)==null?void 0:d.pmStart;if(u!=null){const f=parseInt(u,10),h=e.editor.state,m=h.doc;if(!isNaN(f)&&f>=0&&f<=m.content.size){const y=h.tr.setSelection(Vt.create(m,f));e.editor.dispatch(y)}else console.warn(`Invalid PM position from data-pm-start: ${u}, falling back to coordinate-based positioning`),UT(o,e.editor)}else UT(o,e.editor);setTimeout(()=>{const f=e.editor.state,h=f.selection.$from,m=f.schema.marks.link,y=h.nodeAfter,w=h.nodeBefore,b=(y==null?void 0:y.marks)||[],E=(w==null?void 0:w.marks)||[],A=m&&b.some(k=>k.type===m),x=m&&E.some(k=>k.type===m),T=A||x;if(l4(f,"link",{requireEnds:!0})||T){const k=c.getBoundingClientRect();if(!k)return;e.openPopover($s(NC),{showInput:!0,editor:e.editor,closePopover:e.closePopover},{left:`${o.clientX-k.left}px`,top:`${o.clientY-k.top+15}px`})}},M4t)};let i=null;return Ur(()=>{e.editor&&(i=_T(e.editor),i&&i.addEventListener("superdoc-link-click",r))}),as(()=>{i&&i.removeEventListener("superdoc-link-click",r)}),(s,o)=>null}};function D4t(t,e){var o,a;if(!t.value||!((a=(o=e==null?void 0:e.value)==null?void 0:o.options)!=null&&a.scale)||gw(e))return;const n=e.value.options.scale,r=t.value.getBoundingClientRect(),i=t.value.querySelectorAll(".pagination-break-wrapper");let s;i.forEach(l=>{const u=(l.getBoundingClientRect().left-r.left)/n*-1+1;if(s||(s=u),u!==s){const d=u-s;l.style.transform=`translateX(${d}px)`}})}const O4t={key:2,class:"placeholder-editor"},P4t={class:"placeholder-title"},tle="application/vnd.openxmlformats-officedocument.wordprocessingml.document",nle=8,F4t=16,B4t=_r({__name:"SuperEditor",props:{documentId:{type:String,required:!1},fileSource:{type:[File,Blob],required:!1},state:{type:Object,required:!1,default:()=>null},options:{type:Object,required:!1,default:()=>({})}},emits:["editor-ready","editor-click","editor-keydown","comments-loaded","selection-update"],setup(t,{emit:e}){const n=e,r=t,i=Ve(!1),s=qm(null),o=pt(()=>s.value&&"editor"in s.value&&s.value.editor?s.value.editor:s.value),a=pt(()=>{const te=o.value;return te!=null&&te.options?!!te.options.disableContextMenu:!!r.options.disableContextMenu}),l=Ve(!!r.options.rulers),c=Ve(1);let u=null;gr(()=>r.options,te=>{const ye=te==null?void 0:te.rulers;ye&&typeof ye=="object"&&"value"in ye?l.value=!!ye.value:l.value=!!ye},{immediate:!0,deep:!0}),gr(()=>{var te;return(te=r.options)==null?void 0:te.rulerContainer},()=>{gi(()=>{A(),T()})},{immediate:!0}),gr(l,te=>{gi(()=>{te?(A(),T()):(f.value={},x())})},{immediate:!0});const d=pt(()=>{let te=816;const ye=s.value;if(ye&&"getPages"in ye&&typeof ye.getPages=="function"){const we=ye.getPages();if(Array.isArray(we)&&we.length>0)for(const Ae of we)Ae.size&&typeof Ae.size.w=="number"&&Ae.size.w>0&&(te=Math.max(te,Ae.size.w))}if(te===8.5*96&&ye&&"getPageStyles"in ye&&typeof ye.getPageStyles=="function"){const we=ye.getPageStyles();we&&typeof we=="object"&&we.pageSize&&typeof we.pageSize=="object"&&typeof we.pageSize.width=="number"&&we.pageSize.width>0&&(te=we.pageSize.width*96)}return{minWidth:`${te*c.value}px`}}),f=Ve({}),h=Ve(null);let m=null,y=null,w=null;const b=()=>{var ye,ke;const te=(ye=r.options)==null?void 0:ye.rulerContainer;return te?typeof te=="string"?(((ke=k.value)==null?void 0:ke.ownerDocument)??document).querySelector(te):te instanceof HTMLElement?te:null:null},E=()=>{const te=k.value;return te?(te.querySelector(".presentation-editor__viewport")??te).getBoundingClientRect():null},A=()=>{if(!l.value){f.value={};return}if(h.value=b(),!h.value){f.value={};return}const te=E();if(!te)return;const ye=h.value.getBoundingClientRect(),ke=Math.max(0,te.left-ye.left),we=Math.max(0,ye.right-te.right);f.value={paddingLeft:`${ke}px`,paddingRight:`${we}px`}},x=()=>{m&&(m.disconnect(),m=null),y&&(y.disconnect(),y=null)},T=()=>{if(x(),typeof ResizeObserver>"u")return;const te=k.value,ye=b();te&&(m=new ResizeObserver(()=>A()),m.observe(te)),ye&&(y=new ResizeObserver(()=>A()),y.observe(ye))},R=hIt(),k=Ve(null),_=Ve(null),N=Ve(null),L=Oi({visible:!1,position:{left:"0px",top:"0px"},component:null,props:{}}),M=()=>{var te,ye;L.visible=!1,L.component=null,L.props={},(ye=(te=o.value)==null?void 0:te.view)==null||ye.focus()},C=(te,ye,ke)=>{L.component=te,L.props=ye,L.position=ke,L.visible=!0},D=Oi({visible:!1,tableElement:null}),O=Oi({visible:!1,imageElement:null,blockId:null}),$=Oi({element:null,blockId:null,pmStart:null}),U=()=>{const te=o.value;return te&&typeof te.zoom=="number"?te.zoom:te!=null&&te.presentationEditor&&typeof te.presentationEditor.zoom=="number"?te.presentationEditor.zoom:(console.warn("[SuperEditor] getEditorZoom: Unable to retrieve zoom from editor instance, using fallback value of 1. This may indicate the editor is not fully initialized or is not a PresentationEditor instance."),1)};let W=0;const ce=(te,ye)=>{var we;if(!te||typeof te.clientX!="number"||typeof te.clientY!="number")return console.warn("[isNearColumnBoundary] Invalid event: missing clientX or clientY",te),!1;if(!ye||!(ye instanceof HTMLElement))return console.warn("[isNearColumnBoundary] Invalid tableElement: not an HTMLElement",ye),!1;const ke=ye.getAttribute("data-table-boundaries");if(!ke)return!1;try{const Ae=JSON.parse(ke);if(!Ae.columns||!Array.isArray(Ae.columns))return!1;const Re=U(),Pe=ye.getBoundingClientRect(),Ce=te.clientX-Pe.left,Oe=te.clientY-Pe.top;for(let Fe=0;Fe<Ae.columns.length;Fe++){const $e=Ae.columns[Fe];if(!$e||typeof $e!="object"){console.warn(`[isNearColumnBoundary] Invalid column at index ${Fe}: not an object`,$e);continue}if(typeof $e.x!="number"||!Number.isFinite($e.x)){console.warn(`[isNearColumnBoundary] Invalid column.x at index ${Fe}:`,$e.x);continue}if(typeof $e.w!="number"||!Number.isFinite($e.w)||$e.w<=0){console.warn(`[isNearColumnBoundary] Invalid column.w at index ${Fe}:`,$e.w);continue}const he=($e.x+$e.w)*Re;if(Math.abs(Ce-he)<=nle){const q=Fe+1,ne=(we=Ae.segments)==null?void 0:we[q];if(!ne||ne.length===0){if(Fe===Ae.columns.length-1)return!0;continue}for(const Ee of ne){const Se=(Ee.y||0)*Re,ze=Ee.h!=null?Se+Ee.h*Re:Pe.height;if(Oe>=Se&&Oe<=ze)return!0}}}return Math.abs(Ce)<=nle}catch(Ae){return console.warn("[isNearColumnBoundary] Failed to parse table boundary metadata:",Ae),!1}},se=te=>{var we,Ae;const ye=Date.now();if(ye-W<F4t||(W=ye,!_.value))return;let ke=te.target;for(;ke&&ke!==_.value;){if((we=ke.classList)!=null&&we.contains("superdoc-table-resize-overlay"))return;if((Ae=ke.classList)!=null&&Ae.contains("superdoc-table-fragment")&&ke.hasAttribute("data-table-boundaries")){ce(te,ke)?(D.visible=!0,D.tableElement=ke):(D.visible=!1,D.tableElement=null);return}ke=ke.parentElement}D.visible=!1,D.tableElement=null},Q=()=>{D.visible=!1,D.tableElement=null},J=te=>{var ke,we,Ae,Re;if(!_.value)return;if(!(te.target instanceof Element)){O.visible=!1,O.imageElement=null,O.blockId=null;return}let ye=te.target;for(;ye&&ye!==document.body;){if((ke=ye.classList)!=null&&ke.contains("superdoc-image-resize-overlay")||(we=ye.closest)!=null&&we.call(ye,".superdoc-image-resize-overlay"))return;if((Ae=ye.classList)!=null&&Ae.contains("superdoc-image-fragment")&&ye.hasAttribute("data-image-metadata")){O.visible=!0,O.imageElement=ye,O.blockId=ye.getAttribute("data-sd-block-id");return}if((Re=ye.classList)!=null&&Re.contains("superdoc-inline-image")&&ye.hasAttribute("data-image-metadata")){O.visible=!0,O.imageElement=ye,O.blockId=ye.getAttribute("data-pm-start");return}ye=ye.parentElement}O.visible=!1,O.imageElement=null,O.blockId=null},K=()=>{O.visible=!1,O.imageElement=null,O.blockId=null},re=()=>{var te,ye;(ye=(te=$.element)==null?void 0:te.classList)!=null&&ye.contains("superdoc-image-selected")&&$.element.classList.remove("superdoc-image-selected"),$.element=null,$.blockId=null,$.pmStart=null},X=(te,ye,ke)=>{$.element&&$.element!==te&&$.element.classList.remove("superdoc-image-selected"),te&&te.classList?(te.classList.add("superdoc-image-selected"),$.element=te,$.blockId=ye??null,$.pmStart=typeof ke=="number"?ke:null):re()},me=te=>{se(te),J(te)},G=()=>{Q(),K()};let B;const z=()=>{clearTimeout(B)},de=(te,ye=10,ke=500)=>{const we=te.getMap("meta"),Ae=()=>{const Re=we.get("docx");Re?(z(),H({content:Re})):ye>0?(B=setTimeout(Ae,ke),ye--):console.warn("Failed to load docx data from meta map.")};Ae()},Y=async()=>{N.value=await NF(cbe,"blank.docx",tle)},ee=async()=>{N.value||(N.value=r.fileSource),(!N.value||N.value.type!==tle)&&await Y();try{const[te,ye,ke,we]=await zf.loadXmlData(N.value);return{content:te,media:ye,mediaFiles:ke,fonts:we}}catch(te){console.debug("Error loading new file data:",te),typeof r.options.onException=="function"&&r.options.onException({error:te,editor:null})}},ae=async()=>{if(r.fileSource){let te=await ee();return te||(R.error("Unable to load the file. Please verify the .docx is valid and not password protected."),await Y(),te=await ee()),H(te)}else if(r.options.ydoc&&r.options.collaborationProvider){delete r.options.content;const te=r.options.ydoc,ye=r.options.collaborationProvider;(ye.isSynced||ye.synced?Promise.resolve():new Promise(we=>{const Ae=Re=>{Re!==!1&&(ye.off("synced",Ae),ye.off("sync",Ae),we())};ye.on("synced",Ae),ye.on("sync",Ae)})).then(async()=>{if(te.getMap("meta").has("docx"))de(te);else{r.options.isNewFile=!0;const Ae=await ee();Ae&&H(Ae)}})}},ie=()=>_W(),H=async({content:te,media:ye={},mediaFiles:ke={},fonts:we={}}={})=>{const{editorCtor:Ae,...Re}=r.options||{},Pe=Ae??zf;if(re(),s.value=new Pe({mode:"docx",element:_.value,fileSource:N.value,extensions:ie(),documentId:r.documentId,content:te,media:ye,mediaFiles:ke,fonts:we,...Re}),n("editor-ready",{editor:o.value,presentationEditor:s.value instanceof bf?s.value:null}),s.value instanceof bf){const Ce=s.value;Ce.on("imageSelected",({element:Oe,blockId:Fe,pmStart:$e})=>{X(Oe,Fe??null,$e)}),Ce.on("imageDeselected",()=>{re()}),w=()=>{var Oe,Fe,$e;if(O.visible&&O.blockId){const he=CSS.escape(O.blockId),q=(Oe=_.value)==null?void 0:Oe.querySelector(`.superdoc-image-fragment[data-sd-block-id="${he}"]`);q?O.imageElement=q:(O.visible=!1,O.imageElement=null,O.blockId=null)}if($.blockId){const he=CSS.escape($.blockId),q=(Fe=_.value)==null?void 0:Fe.querySelector(`.superdoc-image-fragment[data-sd-block-id="${he}"]`);if(q)X(q,$.blockId,$.pmStart);else{if($.pmStart!=null){const ne=`.superdoc-image-fragment[data-pm-start="${$.pmStart}"], .superdoc-inline-image[data-pm-start="${$.pmStart}"]`,Ee=($e=_.value)==null?void 0:$e.querySelector(ne);if(Ee){X(Ee,$.blockId,$.pmStart);return}}re()}}gi(()=>A())},Ce.on("layoutUpdated",w),u=({zoom:Oe})=>{c.value=Oe,gi(()=>A())},Ce.on("zoomChange",u),typeof Ce.zoom=="number"&&(c.value=Ce.zoom,gi(()=>A()))}s.value.on("paginationUpdate",()=>{var Fe;const Ce=o.value;if(gw(Ce))return;const Oe=(Fe=s.value)!=null&&Fe.editor?{value:Ce}:s;D4t(_,Oe)}),s.value.on("collaborationReady",()=>{setTimeout(()=>{i.value=!0},150)})},be=te=>{if((te.metaKey||te.ctrlKey)&&te.altKey&&te.shiftKey&&te.code==="KeyM"){const ye=document.querySelector(".superdoc-toolbar");ye&&(ye.setAttribute("tabindex","0"),ye.focus())}if((te.metaKey||te.ctrlKey)&&!te.shiftKey&&!te.altKey&&(te.key==="k"||te.key==="K")){te.preventDefault();const ye=o.value;if(!ye)return;const ke=ye.view,{state:we}=ke,Ae=k.value;if(!Ae)return;const Re=Ae.getBoundingClientRect(),Pe=ke.coordsAtPos(we.selection.head),Ce=`${Pe.left-Re.left}px`,Oe=`${Pe.bottom-Re.top+6}px`;C($s(NC),{},{left:Ce,top:Oe})}n("editor-keydown",{editor:o.value})},Te=te=>{var Ae,Re;n("editor-click",{editor:o.value});let ye=(Ae=_.value)==null?void 0:Ae.querySelector(".ProseMirror");const ke=o.value;if(!ye||!ke)return;let we=ye.contains(te.target);!we&&ke.isEditable&&((Re=ke.view)==null||Re.focus()),we&&ke.isEditable&&YIt(ke,te,L),se(te)};Ur(()=>{var te,ye;ae(),((te=r.options)!=null&&te.suppressSkeletonLoader||!((ye=r.options)!=null&&ye.collaborationProvider))&&(i.value=!0),window.addEventListener("resize",A,{passive:!0}),gi(()=>{A(),T()})});const Z=te=>{te.button===0&&(te.ctrlKey&&dU()||te.target.classList.contains("ProseMirror")||XIt(te,o.value))},oe=({side:te,value:ye})=>{var Re;const ke=o.value;if(!ke)return;const we=te==="left"?{leftInches:ye}:te==="right"?{rightInches:ye}:te==="top"?{topInches:ye}:te==="bottom"?{bottomInches:ye}:{};if(!(typeof((Re=ke.commands)==null?void 0:Re.setSectionPageMarginsAtSelection)=="function"?ke.commands.setSectionPageMarginsAtSelection(we):!1)){const Pe=ke.getPageStyles(),{pageMargins:Ce}=Pe,Oe={...Ce,[te]:ye};ke==null||ke.updatePageStyle({pageMargins:Oe})}};return as(()=>{var te;z(),re(),s.value instanceof bf&&u&&(s.value.off("zoomChange",u),u=null),s.value instanceof bf&&w&&(s.value.off("layoutUpdated",w),w=null),x(),window.removeEventListener("resize",A),(te=s.value)==null||te.destroy(),s.value=null}),(te,ye)=>(rt(),wt("div",{class:"super-editor-container",style:Gn(d.value)},[t.options.rulerContainer&&l.value&&o.value?(rt(),$r(Xz,{key:0,to:t.options.rulerContainer},[Pt("div",{class:"ruler-host",style:Gn(f.value)},[Fn(Zae,{class:"ruler superdoc-ruler",editor:o.value,onMarginChange:oe},null,8,["editor"])],4)],8,["to"])):l.value&&o.value?(rt(),wt("div",{key:1,class:"ruler-host",style:Gn(f.value)},[Fn(Zae,{class:"ruler",editor:o.value,onMarginChange:oe},null,8,["editor"])],4)):Xt("",!0),Pt("div",{class:"super-editor",ref_key:"editorWrapper",ref:k,onKeydown:be,onClick:Te,onMousedown:Z,onMousemove:me,onMouseleave:G},[Pt("div",{ref_key:"editorElem",ref:_,class:"editor-element super-editor__element",role:"presentation"},null,512),!a.value&&i.value&&o.value?(rt(),$r(c4t,{key:0,editor:o.value,popoverControls:L,openPopover:C,closePopover:M},null,8,["editor","popoverControls"])):Xt("",!0),i.value&&o.value?(rt(),$r(L4t,{key:1,editor:o.value,openPopover:C,closePopover:M,popoverVisible:L.visible},null,8,["editor","popoverVisible"])):Xt("",!0),i.value&&o.value?(rt(),$r(A4t,{key:2,editor:o.value,visible:D.visible,tableElement:D.tableElement},null,8,["editor","visible","tableElement"])):Xt("",!0),i.value&&o.value?(rt(),$r(I4t,{key:3,editor:o.value,visible:O.visible,imageElement:O.imageElement},null,8,["editor","visible","imageElement"])):Xt("",!0)],544),i.value?Xt("",!0):(rt(),wt("div",O4t,[Pt("div",P4t,[Fn(Ct($d),{text:"",style:{width:"60%"}})]),Fn(Ct($d),{text:"",repeat:6}),Fn(Ct($d),{text:"",style:{width:"60%"}}),Fn(Ct($d),{text:"",repeat:6,style:{width:"30%",display:"block",margin:"20px"}}),Fn(Ct($d),{text:"",style:{width:"60%"}}),Fn(Ct($d),{text:"",repeat:5}),Fn(Ct($d),{text:"",style:{width:"30%"}}),Fn(Ct($d),{text:"",style:{"margin-top":"50px"}}),Fn(Ct($d),{text:"",repeat:6}),Fn(Ct($d),{text:"",style:{width:"70%"}})])),o.value?(rt(),$r(m4t,{key:3,editor:o.value,visible:L.visible,position:L.position,onClose:M},{default:Uc(()=>[(rt(),$r(Ahe(L.component),R9e(Xhe({...L.props,editor:o.value,closePopover:M})),null,16))]),_:1},8,["editor","visible","position"])):Xt("",!0)],4))}}),j4t=or(B4t,[["__scopeId","data-v-f5c4f915"]]),$4t=["innerHTML"],z4t={__name:"SuperInput",props:{modelValue:{type:String},placeholder:{type:String,required:!1,default:"Type something..."},options:{type:Object,required:!1,default:()=>({})},users:{type:Array,required:!1,default:()=>[]}},emits:["update:modelValue","focus","blur"],setup(t,{emit:e}){const n=e,r=t,i=qm(),s=Ve(null),o=Ve(!1),a=({editor:h,transaction:m})=>{const y=h.getHTML();n("update:modelValue",y)},l=({editor:h,transaction:m})=>{o.value=!0,f(),n("focus",{editor:h,transaction:m})},c=({editor:h,transaction:m})=>{o.value=!1,n("blur",{editor:h,transaction:m})},u=async()=>{JSe.options.placeholder=r.placeholder||"Type something...",r.options.onTransaction=a,r.options.onFocus=l,r.options.onBlur=c,i.value=new zf({mode:"text",content:document.getElementById("currentContent"),element:s.value,extensions:PT(),users:r.users,...r.options})},d=()=>{var h,m;o.value=!0,(m=(h=i.value)==null?void 0:h.view)==null||m.focus()},f=()=>{var h;(h=i.value)==null||h.setOptions({users:r.users})};return Ur(()=>{u()}),as(()=>{var h;(h=i.value)==null||h.destroy(),i.value=null}),(h,m)=>(rt(),wt("div",{class:Qr(["super-editor super-input",{"super-input-active":o.value}]),onClick:mr(d,["stop","prevent"])},[Pt("div",{id:"currentContent",style:{display:"none"},innerHTML:t.modelValue},null,8,$4t),Pt("div",{ref_key:"editorElem",ref:s,class:"editor-element super-editor__element"},null,512)],2))}},H4t=or(z4t,[["__scopeId","data-v-a1482023"]]),V4t=Math.floor,U4t=(t,e)=>t<e?t:e,W4t=(t,e)=>t>e?t:e,cke=128,W6=127,q4t=Number.MAX_SAFE_INTEGER,G4t=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},WT=typeof TextEncoder<"u"?new TextEncoder:null,K4t=t=>WT.encode(t),X4t=WT?K4t:G4t;let xA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});xA&&xA.decode(new Uint8Array).length===1&&(xA=null);const c4=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},CM=(t,e)=>{for(;e>W6;)c4(t,cke|W6&e),e=V4t(e/128);c4(t,W6&e)},a$=new Uint8Array(3e4),Y4t=a$.length/3,Z4t=(t,e)=>{if(e.length<Y4t){const n=WT.encodeInto(e,a$).written||0;CM(t,n);for(let r=0;r<n;r++)c4(t,a$[r])}else tRt(t,X4t(e))},J4t=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;CM(t,r);for(let i=0;i<r;i++)c4(t,n.codePointAt(i))},Q4t=WT&&WT.encodeInto?Z4t:J4t,eRt=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=U4t(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(W4t(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},tRt=(t,e)=>{CM(t,e.byteLength),eRt(t,e)},uke=t=>new Error(t),nRt=uke("Unexpected end of array"),rRt=uke("Integer out of Range"),iRt=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},sRt=t=>iRt(t,tq(t)),rle=t=>t.arr[t.pos++],tq=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&W6)*n,n*=128,i<cke)return e;if(e>q4t)throw rRt}throw nRt},oRt=t=>{let e=tq(t);if(e===0)return"";{let n=String.fromCodePoint(rle(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(rle(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},aRt=t=>xA.decode(sRt(t)),ile=xA?aRt:oRt;var qT;(function(t){t[t.Token=0]="Token",t[t.PermissionDenied=1]="PermissionDenied",t[t.Authenticated=2]="Authenticated"})(qT||(qT={}));const lRt=(t,e)=>{CM(t,qT.Token),Q4t(t,e)},cRt=(t,e,n)=>{switch(tq(t)){case qT.PermissionDenied:{e(ile(t));break}case qT.Authenticated:{n(ile(t));break}}},uRt={code:1009},sle={code:4401,reason:"Unauthorized"},dRt={code:4403},ole=t=>Array.from(t.entries()).map(([e,n])=>({clientId:e,...n}));var l$;(function(t){t[t.Connecting=0]="Connecting",t[t.Open=1]="Open",t[t.Closing=2]="Closing",t[t.Closed=3]="Closed"})(l$||(l$={}));function fRt(t){return t||(t={}),{delay:t.delay===void 0?200:t.delay,initialDelay:t.initialDelay===void 0?0:t.initialDelay,minDelay:t.minDelay===void 0?0:t.minDelay,maxDelay:t.maxDelay===void 0?0:t.maxDelay,factor:t.factor===void 0?0:t.factor,maxAttempts:t.maxAttempts===void 0?3:t.maxAttempts,timeout:t.timeout===void 0?0:t.timeout,jitter:t.jitter===!0,initialJitter:t.initialJitter===!0,handleError:t.handleError===void 0?null:t.handleError,handleTimeout:t.handleTimeout===void 0?null:t.handleTimeout,beforeAttempt:t.beforeAttempt===void 0?null:t.beforeAttempt,calculateDelay:t.calculateDelay===void 0?null:t.calculateDelay}}async function IP(t){return new Promise(e=>setTimeout(e,t))}function hRt(t,e){let n=e.delay;if(n===0)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),e.maxDelay!==0&&(n=Math.min(n,e.maxDelay))),e.jitter){const r=Math.ceil(e.minDelay),i=Math.floor(n);n=Math.floor(Math.random()*(i-r+1))+r}return Math.round(n)}async function pRt(t,e){const n=fRt(e);for(const a of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const l=n[a];if(!Number.isInteger(l)||l<0)throw new Error(`Value for ${a} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||hRt;async function s(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const l=new Error("Attempt aborted");throw l.code="ATTEMPT_ABORTED",l}const a=async l=>{if(n.handleError&&await n.handleError(l,r,n),r.aborted||r.attemptsRemaining===0)throw l;r.attemptNum++;const c=i(r,n);return c&&await IP(c),s()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise((l,c)=>{const u=setTimeout(()=>{if(n.handleTimeout)try{l(n.handleTimeout(r,n))}catch(d){c(d)}else{const d=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);d.code="ATTEMPT_TIMEOUT",c(d)}},n.timeout);t(r,n).then(d=>{clearTimeout(u),l(d)}).catch(d=>{clearTimeout(u),a(d).then(l).catch(c)})}):t(r,n).catch(a)}const o=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;if(o&&await IP(o),r.attemptNum<1&&n.initialJitter){const a=i(r,n);a&&await IP(a)}return s()}var dke={};const P1=()=>new Map,fke=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},hke=()=>new Set,mRt=Array.from,gRt=String.fromCharCode,yRt=t=>t.toLowerCase(),bRt=/^\s*/g,wRt=t=>t.replace(bRt,""),vRt=/([A-Z])/g,ale=(t,e)=>wRt(t.replace(vRt,n=>`${e}${yRt(n)}`)),xRt=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},GT=typeof TextEncoder<"u"?new TextEncoder:null,ERt=t=>GT.encode(t),SRt=GT?ERt:xRt;let EA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});EA&&EA.decode(new Uint8Array).length===1&&(EA=null);const lle=t=>t===void 0?null:t;class ARt{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let pke=new ARt,nq=!0;try{typeof localStorage<"u"&&localStorage&&(pke=localStorage,nq=!1)}catch{}const mke=pke,TRt=t=>nq||addEventListener("storage",t),kRt=t=>nq||removeEventListener("storage",t),CRt=Object.keys,_Rt=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},cle=t=>CRt(t).length,NRt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),IRt=(t,e)=>t===e,SA=(t,e)=>{if(t==null||e==null)return IRt(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!SA(t.get(n),e.get(n)))return!1;break}case Object:if(cle(t)!==cle(e))return!1;for(const n in t)if(!NRt(t,n)||!SA(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!SA(t[n],e[n]))return!1;break;default:return!1}return!0},RRt=(t,e)=>e.includes(t),e2=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",gke=typeof window<"u"&&typeof document<"u"&&!e2;let zd;const MRt=()=>{if(zd===void 0)if(e2){zd=P1();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&zd.set(e,""),e=r):e!==null&&(zd.set(e,r),e=null)}e!==null&&zd.set(e,"")}else typeof location=="object"?(zd=P1(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");zd.set(`--${ale(e,"-")}`,n),zd.set(`-${ale(e,"-")}`,n)}})):zd=P1();return zd},c$=t=>MRt().has(t),u$=t=>lle(e2?dke[t.toUpperCase()]:mke.getItem(t)),LRt=t=>c$("--"+t)||u$(t)!==null;LRt("production");const ule=e2&&RRt(dke.FORCE_COLOR,["true","1","2"]);!c$("no-colors")&&(!e2||process.stdout.isTTY||ule)&&(!e2||c$("color")||ule||u$("COLORTERM")!==null||(u$("TERM")||"").includes("color"));const yke=Math.floor,DRt=(t,e)=>t<e?t:e,ORt=(t,e)=>t>e?t:e,PRt=64,u4=128,FRt=63,AA=127,bke=Number.MAX_SAFE_INTEGER;class BRt{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const rq=()=>new BRt,wke=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},iq=t=>{const e=new Uint8Array(wke(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},d4=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},_o=(t,e)=>{for(;e>AA;)d4(t,u4|AA&e),e=yke(e/128);d4(t,AA&e)},d$=new Uint8Array(3e4),jRt=d$.length/3,$Rt=(t,e)=>{if(e.length<jRt){const n=GT.encodeInto(e,d$).written||0;_o(t,n);for(let r=0;r<n;r++)d4(t,d$[r])}else F2(t,SRt(e))},zRt=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;_o(t,r);for(let i=0;i<r;i++)d4(t,n.codePointAt(i))},pd=GT&&GT.encodeInto?$Rt:zRt,HRt=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=DRt(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ORt(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},F2=(t,e)=>{_o(t,e.byteLength),HRt(t,e)},vke=t=>new Error(t),xke=vke("Unexpected end of array"),Eke=vke("Integer out of Range");let VRt=class{constructor(e){this.arr=e,this.pos=0}};const Ske=t=>new VRt(t),URt=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},_M=t=>URt(t,wb(t)),dle=t=>t.arr[t.pos++],wb=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&AA)*n,n*=128,i<u4)return e;if(e>bke)throw Eke}throw xke},WRt=t=>{let e=t.arr[t.pos++],n=e&FRt,r=64;const i=(e&PRt)>0?-1:1;if((e&u4)===0)return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&AA)*r,r*=128,e<u4)return i*n;if(n>bke)throw Eke}throw xke},qRt=t=>{let e=wb(t);if(e===0)return"";{let n=String.fromCodePoint(dle(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(dle(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},GRt=t=>EA.decode(_M(t)),NM=EA?GRt:qRt,KRt=t=>{const e=t.pos,n=NM(t);return t.pos=e,n},XRt=t=>new Uint8Array(t),YRt=(t,e,n)=>new Uint8Array(t,e,n),ZRt=t=>new Uint8Array(t),JRt=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=gRt(t[n]);return btoa(e)},QRt=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),eMt=t=>{const e=atob(t),n=XRt(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},tMt=t=>{const e=Buffer.from(t,"base64");return YRt(e.buffer,e.byteOffset,e.byteLength)},nMt=gke?JRt:QRt,rMt=gke?eMt:tMt,Ake=new Map;let iMt=class{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:rMt(n.newValue||"")}),TRt(this._onChange)}postMessage(e){mke.setItem(this.room,nMt(ZRt(e)))}close(){kRt(this._onChange)}};const sMt=typeof BroadcastChannel>"u"?iMt:BroadcastChannel,sq=t=>fke(Ake,t,()=>{const e=hke(),n=new sMt(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),oMt=(t,e)=>(sq(t).subs.add(e),e),aMt=(t,e)=>{const n=sq(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),Ake.delete(t)),r},lMt=(t,e,n=null)=>{const r=sq(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},cMt=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},t2=Date.now;let uMt=class{constructor(){this._observers=P1()}on(e,n){fke(this._observers,e,hke).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return mRt((this._observers.get(e)||P1()).values()).forEach(r=>r(...n))}destroy(){this._observers=P1()}};const RP=3e4;let dMt=class extends uMt{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=t2();this.getLocalState()!==null&&RP/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&RP<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&q6(this,r,"timeout")},yke(RP/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:t2()});const o=[],a=[],l=[],c=[];e===null?c.push(n):s==null?e!=null&&o.push(n):(a.push(n),SA(s,e)||l.push(n)),(o.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:o,updated:l,removed:c},"local"]),this.emit("update",[{added:o,updated:a,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}};const q6=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:t2()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},f$=(t,e,n=t.states)=>{const r=e.length,i=rq();_o(i,r);for(let s=0;s<r;s++){const o=e[s],a=n.get(o)||null,l=t.meta.get(o).clock;_o(i,o),_o(i,l),pd(i,JSON.stringify(a))}return iq(i)},fMt=(t,e,n)=>{const r=Ske(e),i=t2(),s=[],o=[],a=[],l=[],c=wb(r);for(let u=0;u<c;u++){const d=wb(r);let f=wb(r);const h=JSON.parse(NM(r)),m=t.meta.get(d),y=t.states.get(d),w=m===void 0?0:m.clock;(w<f||w===f&&h===null&&t.states.has(d))&&(h===null?d===t.clientID&&t.getLocalState()!=null?f++:t.states.delete(d):t.states.set(d,h),t.meta.set(d,{clock:f,lastUpdated:i}),m===void 0&&h!==null?s.push(d):m!==void 0&&h===null?l.push(d):h!==null&&(SA(h,y)||a.push(d),o.push(d)))}(s.length>0||a.length>0||l.length>0)&&t.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||o.length>0||l.length>0)&&t.emit("update",[{added:s,updated:o,removed:l},n])};class Tke{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}const hMt=t=>_Rt(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&");var wo;(function(t){t[t.Sync=0]="Sync",t[t.Awareness=1]="Awareness",t[t.Auth=2]="Auth",t[t.QueryAwareness=3]="QueryAwareness",t[t.Stateless=5]="Stateless",t[t.CLOSE=7]="CLOSE",t[t.SyncStatus=8]="SyncStatus"})(wo||(wo={}));var mo;(function(t){t.Connecting="connecting",t.Connected="connected",t.Disconnected="disconnected"})(mo||(mo={}));class G6{constructor(e){this.data=e,this.encoder=rq(),this.decoder=Ske(new Uint8Array(this.data))}peekVarString(){return KRt(this.decoder)}readVarUint(){return wb(this.decoder)}readVarString(){return NM(this.decoder)}readVarUint8Array(){return _M(this.decoder)}writeVarUint(e){return _o(this.encoder,e)}writeVarString(e){return pd(this.encoder,e)}writeVarUint8Array(e){return F2(this.encoder,e)}length(){return wke(this.encoder)}}class kke extends Tke{constructor(e){super(),this.messageQueue=[],this.configuration={url:"",document:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1,providerMap:new Map},this.webSocket=null,this.webSocketHandlers={},this.shouldConnect=!0,this.status=mo.Disconnected,this.lastMessageReceived=0,this.identifier=0,this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.closeTries=0,this.setConfiguration(e),this.configuration.WebSocketPolyfill=e.WebSocketPolyfill?e.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),typeof e.connect<"u"&&(this.shouldConnect=e.connect),this.shouldConnect&&this.connect()}async onOpen(e){this.receivedOnOpenPayload=e}async onStatus(e){this.receivedOnStatusPayload=e}attach(e){let n;return this.configuration.providerMap.set(e.configuration.name,e),this.status===mo.Disconnected&&this.shouldConnect&&(n=this.connect()),this.receivedOnOpenPayload&&e.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&e.onStatus(this.receivedOnStatusPayload),n}detach(e){this.configuration.providerMap.delete(e.configuration.name)}setConfiguration(e={}){this.configuration={...this.configuration,...e}}async connect(){if(this.status===mo.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.shouldConnect=!0;const e=()=>{let i=!1;return{retryPromise:pRt(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:o=>{(!this.shouldConnect||i)&&o.abort()}}).catch(o=>{if(o&&o.code!=="ATTEMPT_ABORTED")throw o}),cancelFunc:()=>{i=!0}}},{retryPromise:n,cancelFunc:r}=e();return this.cancelWebsocketRetry=r,n}attachWebSocketListeners(e,n){const{identifier:r}=e,i=c=>this.emit("message",c),s=c=>this.emit("close",{event:c}),o=c=>this.emit("open",c),a=c=>{n(c)};this.webSocketHandlers[r]={message:i,close:s,open:o,error:a};const l=this.webSocketHandlers[e.identifier];Object.keys(l).forEach(c=>{e.addEventListener(c,l[c])})}cleanupWebSocket(){if(!this.webSocket)return;const{identifier:e}=this.webSocket,n=this.webSocketHandlers[e];Object.keys(n).forEach(r=>{var i;(i=this.webSocket)===null||i===void 0||i.removeEventListener(r,n[r]),delete this.webSocketHandlers[e]}),this.webSocket.close(),this.webSocket=null}createWebSocketConnection(){return new Promise((e,n)=>{this.webSocket&&(this.messageQueue=[],this.cleanupWebSocket()),this.lastMessageReceived=0,this.identifier+=1;const r=new this.configuration.WebSocketPolyfill(this.url);r.binaryType="arraybuffer",r.identifier=this.identifier,this.attachWebSocketListeners(r,n),this.webSocket=r,this.status=mo.Connecting,this.emit("status",{status:mo.Connecting}),this.connectionAttempt={resolve:e,reject:n}})}onMessage(e){var n;this.resolveConnectionAttempt(),this.lastMessageReceived=t2();const i=new G6(e.data).peekVarString();(n=this.configuration.providerMap.get(i))===null||n===void 0||n.onMessage(e)}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=mo.Connected,this.emit("status",{status:mo.Connected}),this.emit("connect"),this.messageQueue.forEach(e=>this.send(e)),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var e;(e=this.connectionAttempt)===null||e===void 0||e.reject(),this.connectionAttempt=null}checkConnection(){var e;this.status===mo.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=t2()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):((e=this.webSocket)===null||e===void 0||e.close(),this.messageQueue=[])))}get serverUrl(){for(;this.configuration.url[this.configuration.url.length-1]==="/";)return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const e=hMt(this.configuration.parameters);return`${this.serverUrl}${e.length===0?"":`?${e}`}`}disconnect(){if(this.shouldConnect=!1,this.webSocket!==null)try{this.webSocket.close(),this.messageQueue=[]}catch{}}send(e){var n;((n=this.webSocket)===null||n===void 0?void 0:n.readyState)===l$.Open?this.webSocket.send(e):this.messageQueue.push(e)}onClose({event:e}){if(this.closeTries=0,this.cleanupWebSocket(),this.status===mo.Connected&&(this.status=mo.Disconnected,this.emit("status",{status:mo.Disconnected}),this.emit("disconnect",{event:e})),e.code===sle.code&&(e.reason===sle.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didnt send one. Try adding a `token` to your HocuspocusProvider configuration. Wont try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${e.reason}`),this.shouldConnect=!1),e.code===dRt.code&&!this.configuration.quiet){console.warn("[HocuspocusProvider] The provided authentication token isnt allowed to connect to this server. Will try again.");return}e.code===uRt.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${e.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),!this.shouldConnect&&this.status!==mo.Disconnected&&(this.status=mo.Disconnected,this.emit("status",{status:mo.Disconnected}),this.emit("disconnect",{event:e}))}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),this.cleanupWebSocket()}}const Cke=0,oq=1,_ke=2,pMt=(t,e)=>{_o(t,Cke);const n=Jbe(e);F2(t,n)},Nke=(t,e,n)=>{_o(t,oq),F2(t,tU(e,n))},mMt=(t,e,n)=>Nke(e,n,_M(t)),Ike=(t,e,n)=>{try{Xbe(e,_M(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},gMt=(t,e)=>{_o(t,_ke),F2(t,e)},yMt=Ike,bMt=(t,e,n,r)=>{const i=wb(t);switch(i){case Cke:mMt(t,e,n);break;case oq:Ike(t,n,r);break;case _ke:yMt(t,n,r);break;default:throw new Error("Unknown message type")}return i};class Uf{constructor(){this.encoder=rq()}get(e){return e.encoder}toUint8Array(){return iq(this.encoder)}}class fle{constructor(e){this.broadcasted=!1,this.message=e}setBroadcasted(e){return this.broadcasted=e,this}apply(e,n){const{message:r}=this,i=r.readVarUint(),s=r.length();switch(i){case wo.Sync:this.applySyncMessage(e,n);break;case wo.Awareness:this.applyAwarenessMessage(e);break;case wo.Auth:this.applyAuthMessage(e);break;case wo.QueryAwareness:this.applyQueryAwarenessMessage(e);break;case wo.Stateless:e.receiveStateless(NM(r.decoder));break;case wo.SyncStatus:this.applySyncStatusMessage(e,WRt(r.decoder)===1);break;default:throw new Error(`Cant apply message of unknown type: ${i}`)}r.length()>s+1&&(this.broadcasted?e.broadcast(Uf,{encoder:r.encoder}):e.send(Uf,{encoder:r.encoder}))}applySyncMessage(e,n){const{message:r}=this;r.writeVarUint(wo.Sync);const i=bMt(r.decoder,r.encoder,e.document,e);n&&i===oq&&(e.synced=!0)}applySyncStatusMessage(e,n){n&&e.decrementUnsyncedChanges()}applyAwarenessMessage(e){if(!e.awareness)return;const{message:n}=this;fMt(e.awareness,n.readVarUint8Array(),e)}applyAuthMessage(e){const{message:n}=this;cRt(n.decoder,e.permissionDeniedHandler.bind(e),e.authenticatedHandler.bind(e))}applyQueryAwarenessMessage(e){if(!e.awareness)return;const{message:n}=this;n.writeVarUint(wo.Awareness),n.writeVarUint8Array(f$(e.awareness,Array.from(e.awareness.getStates().keys())))}}class hle{constructor(e,n={}){this.message=new e,this.encoder=this.message.get(n)}create(){return iq(this.encoder)}send(e){e==null||e.send(this.create())}broadcast(e){lMt(e,this.create())}}class wMt extends Uf{constructor(){super(...arguments),this.type=wo.Auth,this.description="Authentication"}get(e){if(typeof e.token>"u")throw new Error("The authentication message requires `token` as an argument.");return pd(this.encoder,e.documentName),_o(this.encoder,this.type),lRt(this.encoder,e.token),this.encoder}}class v_ extends Uf{constructor(){super(...arguments),this.type=wo.Awareness,this.description="Awareness states update"}get(e){if(typeof e.awareness>"u")throw new Error("The awareness message requires awareness as an argument");if(typeof e.clients>"u")throw new Error("The awareness message requires clients as an argument");pd(this.encoder,e.documentName),_o(this.encoder,this.type);let n;return e.states===void 0?n=f$(e.awareness,e.clients):n=f$(e.awareness,e.clients,e.states),F2(this.encoder,n),this.encoder}}class vMt extends Uf{constructor(){super(...arguments),this.type=wo.CLOSE,this.description="Ask the server to close the connection"}get(e){return pd(this.encoder,e.documentName),_o(this.encoder,this.type),this.encoder}}class xMt extends Uf{constructor(){super(...arguments),this.type=wo.QueryAwareness,this.description="Queries awareness states"}get(e){return pd(this.encoder,e.documentName),_o(this.encoder,this.type),this.encoder}}class EMt extends Uf{constructor(){super(...arguments),this.type=wo.Stateless,this.description="A stateless message"}get(e){var n;return pd(this.encoder,e.documentName),_o(this.encoder,this.type),pd(this.encoder,(n=e.payload)!==null&&n!==void 0?n:""),this.encoder}}class MP extends Uf{constructor(){super(...arguments),this.type=wo.Sync,this.description="First sync step"}get(e){if(typeof e.document>"u")throw new Error("The sync step one message requires document as an argument");return pd(this.encoder,e.documentName),_o(this.encoder,this.type),pMt(this.encoder,e.document),this.encoder}}class SMt extends Uf{constructor(){super(...arguments),this.type=wo.Sync,this.description="Second sync step"}get(e){if(typeof e.document>"u")throw new Error("The sync step two message requires document as an argument");return pd(this.encoder,e.documentName),_o(this.encoder,this.type),Nke(this.encoder,e.document),this.encoder}}class AMt extends Uf{constructor(){super(...arguments),this.type=wo.Sync,this.description="A document update"}get(e){return pd(this.encoder,e.documentName),_o(this.encoder,this.type),gMt(this.encoder,e.update),this.encoder}}class TMt extends Error{constructor(){super(...arguments),this.code=1001}}class kMt extends Tke{constructor(e){var n,r,i;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1,connect:!0,preserveConnection:!0},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=mo.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=cMt(),this.intervals={forceSync:null},this.isConnected=!0,this.boundDocumentUpdateHandler=this.documentUpdateHandler.bind(this),this.boundAwarenessUpdateHandler=this.awarenessUpdateHandler.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.boundPageHide=this.pageHide.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundOnStatus=this.onStatus.bind(this),this.forwardConnect=s=>this.emit("connect",s),this.forwardOpen=s=>this.emit("open",s),this.forwardClose=s=>this.emit("close",s),this.forwardDisconnect=s=>this.emit("disconnect",s),this.forwardDestroy=s=>this.emit("destroy",s),this.setConfiguration(e),this.configuration.document=e.document?e.document:new Xf,this.configuration.awareness=e.awareness!==void 0?e.awareness:new dMt(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("open",this.forwardOpen),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("status",this.boundOnStatus),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),(n=this.awareness)===null||n===void 0||n.on("update",()=>{this.emit("awarenessUpdate",{states:ole(this.awareness.getStates())})}),(r=this.awareness)===null||r===void 0||r.on("change",()=>{this.emit("awarenessChange",{states:ole(this.awareness.getStates())})}),this.document.on("update",this.boundDocumentUpdateHandler),(i=this.awareness)===null||i===void 0||i.on("update",this.boundAwarenessUpdateHandler),this.registerEventListeners(),this.configuration.forceSyncInterval&&typeof this.configuration.forceSyncInterval=="number"&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:e}){this.status=e,this.configuration.onStatus({status:e}),this.emit("status",{status:e})}setConfiguration(e={}){if(!e.websocketProvider&&e.url){const n=e;this.configuration.websocketProvider=new kke({url:n.url,connect:n.connect,parameters:n.parameters})}this.configuration={...this.configuration,...e}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}resetUnsyncedChanges(){this.unsyncedChanges=1,this.emit("unsyncedChanges",this.unsyncedChanges)}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",this.unsyncedChanges)}decrementUnsyncedChanges(){this.unsyncedChanges-=1,this.unsyncedChanges===0&&(this.synced=!0),this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.resetUnsyncedChanges(),this.send(MP,{document:this.document,documentName:this.configuration.name})}pageHide(){this.awareness&&q6(this.awareness,[this.document.clientID],"page hide")}registerEventListeners(){typeof window>"u"||!("addEventListener"in window)||window.addEventListener("pagehide",this.boundPageHide)}sendStateless(e){this.send(EMt,{documentName:this.configuration.name,payload:e})}documentUpdateHandler(e,n){n!==this&&(this.incrementUnsyncedChanges(),this.send(AMt,{update:e,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:e,updated:n,removed:r},i){const s=e.concat(n).concat(r);this.send(v_,{awareness:this.awareness,clients:s,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(e){this.isSynced!==e&&(this.isSynced=e,this.emit("synced",{state:e}),this.emit("sync",{state:e}))}receiveStateless(e){this.emit("stateless",{payload:e})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.broadcast&&this.subscribeToBroadcastChannel(),this.configuration.websocketProvider.shouldConnect=!0,this.configuration.websocketProvider.attach(this)}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this),this.isConnected=!1,this.configuration.preserveConnection||this.configuration.websocketProvider.disconnect()}async onOpen(e){this.isAuthenticated=!1,this.isConnected=!0,this.emit("open",{event:e});let n;try{n=await this.getToken()}catch(r){this.permissionDeniedHandler(`Failed to get token: ${r}`);return}this.isAuthenticationRequired&&this.send(wMt,{token:n,documentName:this.configuration.name}),this.startSync()}async getToken(){return typeof this.configuration.token=="function"?await this.configuration.token():this.configuration.token}startSync(){this.resetUnsyncedChanges(),this.send(MP,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.awareness.getLocalState()!==null&&this.send(v_,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(e,n,r=!1){if(!this.isConnected)return;r&&this.mux(()=>{this.broadcast(e,n)});const i=new hle(e,n);this.emit("outgoingMessage",{message:i.message}),i.send(this.configuration.websocketProvider)}onMessage(e){const n=new G6(e.data),r=n.readVarString();n.writeVarString(r),this.emit("message",{event:e,message:new G6(e.data)}),new fle(n).apply(this,!0)}onClose(e){this.isAuthenticated=!1,this.synced=!1,this.awareness&&q6(this.awareness,Array.from(this.awareness.getStates().keys()).filter(n=>n!==this.document.clientID),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&(q6(this.awareness,[this.document.clientID],"provider destroy"),this.awareness.off("update",this.boundAwarenessUpdateHandler),this.awareness.destroy()),this.document.off("update",this.boundDocumentUpdateHandler),this.removeAllListeners(),this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("open",this.forwardOpen),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("status",this.boundOnStatus),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.send(vMt,{documentName:this.configuration.name}),this.disconnect(),!(typeof window>"u"||!("removeEventListener"in window))&&window.removeEventListener("pagehide",this.boundPageHide)}permissionDeniedHandler(e){this.emit("authenticationFailed",{reason:e}),this.isAuthenticated=!1,this.disconnect(),this.status=mo.Disconnected}authenticatedHandler(e){this.isAuthenticated=!0,this.authorizedScope=e,this.emit("authenticated")}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(e){this.mux(()=>{const n=new G6(e),r=n.readVarString();n.writeVarString(r),new fle(n).setBroadcasted(!0).apply(this,!1)})}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(oMt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux(()=>{this.broadcast(MP,{document:this.document,documentName:this.configuration.name}),this.broadcast(SMt,{document:this.document,documentName:this.configuration.name}),this.broadcast(xMt,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.broadcast(v_,{awareness:this.awareness,clients:[this.document.clientID],document:this.document,documentName:this.configuration.name})})}disconnectBroadcastChannel(){this.awareness&&this.send(v_,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel&&(aMt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(e,n){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new hle(e,n).broadcast(this.broadcastChannel)}setAwarenessField(e,n){if(!this.awareness)throw new TMt(`Cannot set awareness field "${e}" to ${JSON.stringify(n)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(e,n)}}crypto.getRandomValues.bind(crypto);async function CMt(t,e){const n=new uF;return t.forEach((i,s)=>{n.file(e[s],i)}),await n.generateAsync({type:"blob",compression:"DEFLATE"})}const Ko="application/vnd.openxmlformats-officedocument.wordprocessingml.document",vb="application/pdf",IM="text/html",_Mt={docx:Ko,pdf:vb,html:IM};function NMt(t){return t[1].user!==void 0}const IMt=(t,e)=>{const n=new Set;return Array.from(e.entries()).filter(NMt).filter(([,r])=>{const i=r.user.email;return n.has(i)?!1:(n.add(i),!0)}).map(([r,i])=>{const s=i.user.email;let o=t.userColorMap.get(s);return o||(o=t.config.colors[t.colorIndex%t.config.colors.length],t.userColorMap.set(s,o),t.colorIndex++),{clientId:r,...i.user,color:o}})},RMt=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},MMt=iM("Unexpected end of array"),LMt=iM("Integer out of Range");class DMt{constructor(e){this.arr=e,this.pos=0}}const Rke=t=>new DMt(t),OMt=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},RM=t=>OMt(t,Wg(t)),ple=t=>t.arr[t.pos++],Wg=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&C1)*n,n*=128,i<Bx)return e;if(e>bit)throw LMt}throw MMt},PMt=t=>{let e=Wg(t);if(e===0)return"";{let n=String.fromCodePoint(ple(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(ple(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},FMt=t=>sA.decode(RM(t)),Mke=sA?FMt:PMt,Jb=Date.now;class BMt{constructor(){this._observers=Cf()}on(e,n){return vC(this._observers,e,rM).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return xve((this._observers.get(e)||Cf()).values()).forEach(r=>r(...n))}destroy(){this._observers=Cf()}}class jMt{constructor(){this._observers=Cf()}on(e,n){vC(this._observers,e,rM).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return xve((this._observers.get(e)||Cf()).values()).forEach(r=>r(...n))}destroy(){this._observers=Cf()}}const LP=3e4;class $Mt extends jMt{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Jb();this.getLocalState()!==null&&LP/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&LP<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&aq(this,r,"timeout")},Px(LP/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Jb()});const o=[],a=[],l=[],c=[];e===null?c.push(n):s==null?e!=null&&o.push(n):(a.push(n),oA(s,e)||l.push(n)),(o.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:o,updated:l,removed:c},"local"]),this.emit("update",[{added:o,updated:a,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const aq=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Jb()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},TA=(t,e,n=t.states)=>{const r=e.length,i=ec();ts(i,r);for(let s=0;s<r;s++){const o=e[s],a=n.get(o)||null,l=t.meta.get(o).clock;ts(i,o),ts(i,l),zF(i,JSON.stringify(a))}return Sl(i)},zMt=(t,e,n)=>{const r=Rke(e),i=Jb(),s=[],o=[],a=[],l=[],c=Wg(r);for(let u=0;u<c;u++){const d=Wg(r);let f=Wg(r);const h=JSON.parse(Mke(r)),m=t.meta.get(d),y=t.states.get(d),w=m===void 0?0:m.clock;(w<f||w===f&&h===null&&t.states.has(d))&&(h===null?d===t.clientID&&t.getLocalState()!=null?f++:t.states.delete(d):t.states.set(d,h),t.meta.set(d,{clock:f,lastUpdated:i}),m===void 0&&h!==null?s.push(d):m!==void 0&&h===null?l.push(d):h!==null&&(oA(h,y)||a.push(d),o.push(d)))}(s.length>0||a.length>0||l.length>0)&&t.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||o.length>0||l.length>0)&&t.emit("update",[{added:s,updated:o,removed:l},n])};function HMt(t,e=[],n){const r={};return Object.getOwnPropertyNames(t).forEach(s=>{e.includes(s)||(r[s]=t[s])}),Object.assign(r,n)}const mle="n-form-item";function VMt(t,{defaultSize:e="medium",mergedSize:n,mergedDisabled:r}={}){const i=zr(mle,null);va(mle,null);const s=pt(n?()=>n(i):()=>{const{size:l}=t;if(l)return l;if(i){const{mergedSize:c}=i;if(c.value!==void 0)return c.value}return e}),o=pt(r?()=>r(i):()=>{const{disabled:l}=t;return l!==void 0?l:i?i.disabled.value:!1}),a=pt(()=>{const{status:l}=t;return l||(i==null?void 0:i.mergedValidationStatus.value)});return as(()=>{i&&i.restoreValidation()}),{mergedSizeRef:s,mergedDisabledRef:o,mergedStatusRef:a,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}function UMt(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function WMt(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:UMt(t,e,n)}var qMt="\\ud800-\\udfff",GMt="\\u0300-\\u036f",KMt="\\ufe20-\\ufe2f",XMt="\\u20d0-\\u20ff",YMt=GMt+KMt+XMt,ZMt="\\ufe0e\\ufe0f",JMt="\\u200d",QMt=RegExp("["+JMt+qMt+YMt+ZMt+"]");function Lke(t){return QMt.test(t)}function eLt(t){return t.split("")}var Dke="\\ud800-\\udfff",tLt="\\u0300-\\u036f",nLt="\\ufe20-\\ufe2f",rLt="\\u20d0-\\u20ff",iLt=tLt+nLt+rLt,sLt="\\ufe0e\\ufe0f",oLt="["+Dke+"]",h$="["+iLt+"]",p$="\\ud83c[\\udffb-\\udfff]",aLt="(?:"+h$+"|"+p$+")",Oke="[^"+Dke+"]",Pke="(?:\\ud83c[\\udde6-\\uddff]){2}",Fke="[\\ud800-\\udbff][\\udc00-\\udfff]",lLt="\\u200d",Bke=aLt+"?",jke="["+sLt+"]?",cLt="(?:"+lLt+"(?:"+[Oke,Pke,Fke].join("|")+")"+jke+Bke+")*",uLt=jke+Bke+cLt,dLt="(?:"+[Oke+h$+"?",h$,Pke,Fke,oLt].join("|")+")",fLt=RegExp(p$+"(?="+p$+")|"+dLt+uLt,"g");function hLt(t){return t.match(fLt)||[]}function pLt(t){return Lke(t)?hLt(t):eLt(t)}function mLt(t){return function(e){e=NTe(e);var n=Lke(e)?pLt(e):void 0,r=n?n[0]:e.charAt(0),i=n?WMt(n,1).join(""):e.slice(1);return r[t]()+i}}var gLt=mLt("toUpperCase");function lq(t,e,n){if(!e){_e.env.NODE_ENV!=="production"&&FW("use-style","No style is specified.");return}const r=IC(),i=zr(p0,null),s=()=>{const o=n.value;e.mount({id:o===void 0?t:o+t,head:!0,anchorMetaName:VT,props:{bPrefix:o?`.${o}-`:void 0},ssr:r,parent:i==null?void 0:i.styleMountTarget}),i!=null&&i.preflightStyleDisabled||$Te.mount({id:"n-global",head:!0,anchorMetaName:VT,ssr:r,parent:i==null?void 0:i.styleMountTarget})};r?s():qk(s)}const yLt=Dn("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
`,[en("svg",`
 height: 1em;
 width: 1em;
 `)]),$ke=_r({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(t){lq("-base-icon",yLt,$i(t,"clsPrefix"))},render(){return ut("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),cq=_r({name:"BaseIconSwitchTransition",setup(t,{slots:e}){const n=LW();return()=>ut(Ex,{name:"icon-switch-transition",appear:n.value},e)}});function MC(t,e){const n=_r({render(){return e()}});return _r({name:gLt(t),setup(){var r;const i=(r=zr(p0,null))===null||r===void 0?void 0:r.mergedIconsRef;return()=>{var s;const o=(s=i==null?void 0:i.value)===null||s===void 0?void 0:s[t];return o?o():ut(n,null)}}})}const bLt=MC("close",()=>ut("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},ut("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},ut("g",{fill:"currentColor","fill-rule":"nonzero"},ut("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),wLt=MC("error",()=>ut("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ut("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},ut("g",{"fill-rule":"nonzero"},ut("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),vLt=MC("info",()=>ut("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ut("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},ut("g",{"fill-rule":"nonzero"},ut("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),xLt=MC("success",()=>ut("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ut("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},ut("g",{"fill-rule":"nonzero"},ut("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),ELt=MC("warning",()=>ut("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ut("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},ut("g",{"fill-rule":"nonzero"},ut("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),{cubicBezierEaseInOut:SLt}=P2;function f4({originalTransform:t="",left:e=0,top:n=0,transition:r=`all .3s ${SLt} !important`}={}){return[en("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:`${t} scale(0.75)`,left:e,top:n,opacity:0}),en("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${t}`,left:e,top:n,opacity:1}),en("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:e,top:n,transition:r})]}const ALt=Dn("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[lr("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),en("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),L1("disabled",[en("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),en("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),en("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),en("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),en("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),lr("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),lr("round",[en("&::before",`
 border-radius: 50%;
 `)])]),TLt=_r({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(t){return lq("-base-close",ALt,$i(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:n,absolute:r,round:i,isButtonTag:s}=t;return ut(s?"button":"div",{type:s?"button":void 0,tabindex:n||!t.focusable?-1:0,"aria-disabled":n,"aria-label":"close",role:s?void 0:"button",disabled:n,class:[`${e}-base-close`,r&&`${e}-base-close--absolute`,n&&`${e}-base-close--disabled`,i&&`${e}-base-close--round`],onMousedown:a=>{t.focusable||a.preventDefault()},onClick:t.onClick},ut($ke,{clsPrefix:e},{default:()=>ut(bLt,null)}))}}}),kLt=_r({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(t,{slots:e}){function n(a){t.width?a.style.maxWidth=`${a.offsetWidth}px`:a.style.maxHeight=`${a.offsetHeight}px`,a.offsetWidth}function r(a){t.width?a.style.maxWidth="0":a.style.maxHeight="0",a.offsetWidth;const{onLeave:l}=t;l&&l()}function i(a){t.width?a.style.maxWidth="":a.style.maxHeight="";const{onAfterLeave:l}=t;l&&l()}function s(a){if(a.style.transition="none",t.width){const l=a.offsetWidth;a.style.maxWidth="0",a.offsetWidth,a.style.transition="",a.style.maxWidth=`${l}px`}else if(t.reverse)a.style.maxHeight=`${a.offsetHeight}px`,a.offsetHeight,a.style.transition="",a.style.maxHeight="0";else{const l=a.offsetHeight;a.style.maxHeight="0",a.offsetWidth,a.style.transition="",a.style.maxHeight=`${l}px`}a.offsetWidth}function o(a){var l;t.width?a.style.maxWidth="":t.reverse||(a.style.maxHeight=""),(l=t.onAfterEnter)===null||l===void 0||l.call(t)}return()=>{const{group:a,width:l,appear:c,mode:u}=t,d=a?bFe:Ex,f={name:l?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:c,onEnter:s,onAfterEnter:o,onBeforeLeave:n,onLeave:r,onAfterLeave:i};return a||(f.mode=u),ut(d,f,e)}}}),CLt=en([en("@keyframes rotator",`
 0% {
 -webkit-transform: rotate(0deg);
 transform: rotate(0deg);
 }
 100% {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }`),Dn("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[Xr("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[f4()]),Xr("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[f4({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),Xr("container",`
 animation: rotator 3s linear infinite both;
 `,[Xr("icon",`
 height: 1em;
 width: 1em;
 `)])])]),DP="1.6s",_Lt={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},NLt=_r({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},_Lt),setup(t){lq("-base-loading",CLt,$i(t,"clsPrefix"))},render(){const{clsPrefix:t,radius:e,strokeWidth:n,stroke:r,scale:i}=this,s=e/i;return ut("div",{class:`${t}-base-loading`,role:"img","aria-label":"loading"},ut(cq,null,{default:()=>this.show?ut("div",{key:"icon",class:`${t}-base-loading__transition-wrapper`},ut("div",{class:`${t}-base-loading__container`},ut("svg",{class:`${t}-base-loading__icon`,viewBox:`0 0 ${2*s} ${2*s}`,xmlns:"http://www.w3.org/2000/svg",style:{color:r}},ut("g",null,ut("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${s} ${s};270 ${s} ${s}`,begin:"0s",dur:DP,fill:"freeze",repeatCount:"indefinite"}),ut("circle",{class:`${t}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:s,cy:s,r:e-n/2,"stroke-dasharray":5.67*e,"stroke-dashoffset":18.48*e},ut("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${s} ${s};135 ${s} ${s};450 ${s} ${s}`,begin:"0s",dur:DP,fill:"freeze",repeatCount:"indefinite"}),ut("animate",{attributeName:"stroke-dashoffset",values:`${5.67*e};${1.42*e};${5.67*e}`,begin:"0s",dur:DP,fill:"freeze",repeatCount:"indefinite"})))))):ut("div",{key:"placeholder",class:`${t}-base-loading__placeholder`},this.$slots)}))}}),{cubicBezierEaseInOut:Hd,cubicBezierEaseOut:ILt,cubicBezierEaseIn:RLt}=P2;function MLt({overflow:t="hidden",duration:e=".3s",originalTransition:n="",leavingDelay:r="0s",foldPadding:i=!1,enterToProps:s=void 0,leaveToProps:o=void 0,reverse:a=!1}={}){const l=a?"leave":"enter",c=a?"enter":"leave";return[en(`&.fade-in-height-expand-transition-${c}-from,
 &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},s),{opacity:1})),en(`&.fade-in-height-expand-transition-${c}-to,
 &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},o),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),en(`&.fade-in-height-expand-transition-${c}-active`,`
 overflow: ${t};
 transition:
 max-height ${e} ${Hd} ${r},
 opacity ${e} ${ILt} ${r},
 margin-top ${e} ${Hd} ${r},
 margin-bottom ${e} ${Hd} ${r},
 padding-top ${e} ${Hd} ${r},
 padding-bottom ${e} ${Hd} ${r}
 ${n?`,${n}`:""}
 `),en(`&.fade-in-height-expand-transition-${l}-active`,`
 overflow: ${t};
 transition:
 max-height ${e} ${Hd},
 opacity ${e} ${RLt},
 margin-top ${e} ${Hd},
 margin-bottom ${e} ${Hd},
 padding-top ${e} ${Hd},
 padding-bottom ${e} ${Hd}
 ${n?`,${n}`:""}
 `)]}const LLt={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"};function DLt(t){const{baseColor:e,inputColorDisabled:n,cardColor:r,modalColor:i,popoverColor:s,textColorDisabled:o,borderColor:a,primaryColor:l,textColor2:c,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:f,borderRadiusSmall:h,lineHeight:m}=t;return Object.assign(Object.assign({},LLt),{labelLineHeight:m,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:f,borderRadius:h,color:e,colorChecked:l,colorDisabled:n,colorDisabledChecked:n,colorTableHeader:r,colorTableHeaderModal:i,colorTableHeaderPopover:s,checkMarkColor:e,checkMarkColorDisabled:o,checkMarkColorDisabledChecked:o,border:`1px solid ${a}`,borderDisabled:`1px solid ${a}`,borderDisabledChecked:`1px solid ${a}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${QAe(l,{alpha:.3})}`,textColor:c,textColorDisabled:o})}const OLt={common:N0,self:DLt},PLt="n-checkbox-group",FLt=()=>ut("svg",{viewBox:"0 0 64 64",class:"check-icon"},ut("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),BLt=()=>ut("svg",{viewBox:"0 0 100 100",class:"line-icon"},ut("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),jLt=en([Dn("checkbox",`
 font-size: var(--n-font-size);
 outline: none;
 cursor: pointer;
 display: inline-flex;
 flex-wrap: nowrap;
 align-items: flex-start;
 word-break: break-word;
 line-height: var(--n-size);
 --n-merged-color-table: var(--n-color-table);
 `,[lr("show-label","line-height: var(--n-label-line-height);"),en("&:hover",[Dn("checkbox-box",[Xr("border","border: var(--n-border-checked);")])]),en("&:focus:not(:active)",[Dn("checkbox-box",[Xr("border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),lr("inside-table",[Dn("checkbox-box",`
 background-color: var(--n-merged-color-table);
 `)]),lr("checked",[Dn("checkbox-box",`
 background-color: var(--n-color-checked);
 `,[Dn("checkbox-icon",[en(".check-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),lr("indeterminate",[Dn("checkbox-box",[Dn("checkbox-icon",[en(".check-icon",`
 opacity: 0;
 transform: scale(.5);
 `),en(".line-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),lr("checked, indeterminate",[en("&:focus:not(:active)",[Dn("checkbox-box",[Xr("border",`
 border: var(--n-border-checked);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),Dn("checkbox-box",`
 background-color: var(--n-color-checked);
 border-left: 0;
 border-top: 0;
 `,[Xr("border",{border:"var(--n-border-checked)"})])]),lr("disabled",{cursor:"not-allowed"},[lr("checked",[Dn("checkbox-box",`
 background-color: var(--n-color-disabled-checked);
 `,[Xr("border",{border:"var(--n-border-disabled-checked)"}),Dn("checkbox-icon",[en(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),Dn("checkbox-box",`
 background-color: var(--n-color-disabled);
 `,[Xr("border",`
 border: var(--n-border-disabled);
 `),Dn("checkbox-icon",[en(".check-icon, .line-icon",`
 fill: var(--n-check-mark-color-disabled);
 `)])]),Xr("label",`
 color: var(--n-text-color-disabled);
 `)]),Dn("checkbox-box-wrapper",`
 position: relative;
 width: var(--n-size);
 flex-shrink: 0;
 flex-grow: 0;
 user-select: none;
 -webkit-user-select: none;
 `),Dn("checkbox-box",`
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 height: var(--n-size);
 width: var(--n-size);
 display: inline-block;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color 0.3s var(--n-bezier);
 `,[Xr("border",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border: var(--n-border);
 `),Dn("checkbox-icon",`
 display: flex;
 align-items: center;
 justify-content: center;
 position: absolute;
 left: 1px;
 right: 1px;
 top: 1px;
 bottom: 1px;
 `,[en(".check-icon, .line-icon",`
 width: 100%;
 fill: var(--n-check-mark-color);
 opacity: 0;
 transform: scale(0.5);
 transform-origin: center;
 transition:
 fill 0.3s var(--n-bezier),
 transform 0.3s var(--n-bezier),
 opacity 0.3s var(--n-bezier),
 border-color 0.3s var(--n-bezier);
 `),f4({left:"1px",top:"1px"})])]),Xr("label",`
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 -webkit-user-select: none;
 padding: var(--n-label-padding);
 font-weight: var(--n-label-font-weight);
 `,[en("&:empty",{display:"none"})])]),Rkt(Dn("checkbox",`
 --n-merged-color-table: var(--n-color-table-modal);
 `)),Mkt(Dn("checkbox",`
 --n-merged-color-table: var(--n-color-table-popover);
 `))]),$Lt=Object.assign(Object.assign({},Mo.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),zLt=_r({name:"Checkbox",props:$Lt,setup(t){_e.env.NODE_ENV!=="production"&&n0(()=>{t.onChange&&$v("checkbox","`on-change` is deprecated, please use `on-update:checked` instead.")});const e=zr(PLt,null),n=Ve(null),{mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:s}=Zp(t),o=Ve(t.defaultChecked),a=$i(t,"checked"),l=MW(a,o),c=ou(()=>{if(e){const R=e.valueSetRef.value;return R&&t.value!==void 0?R.has(t.value):!1}else return l.value===t.checkedValue}),u=VMt(t,{mergedSize(R){const{size:k}=t;if(k!==void 0)return k;if(e){const{value:_}=e.mergedSizeRef;if(_!==void 0)return _}if(R){const{mergedSize:_}=R;if(_!==void 0)return _.value}return"medium"},mergedDisabled(R){const{disabled:k}=t;if(k!==void 0)return k;if(e){if(e.disabledRef.value)return!0;const{maxRef:{value:_},checkedCountRef:N}=e;if(_!==void 0&&N.value>=_&&!c.value)return!0;const{minRef:{value:L}}=e;if(L!==void 0&&N.value<=L&&c.value)return!0}return R?R.disabled.value:!1}}),{mergedDisabledRef:d,mergedSizeRef:f}=u,h=Mo("Checkbox","-checkbox",jLt,OLt,t,r);function m(R){if(e&&t.value!==void 0)e.toggleCheckbox(!c.value,t.value);else{const{onChange:k,"onUpdate:checked":_,onUpdateChecked:N}=t,{nTriggerFormInput:L,nTriggerFormChange:M}=u,C=c.value?t.uncheckedValue:t.checkedValue;_&&Gu(_,C,R),N&&Gu(N,C,R),k&&Gu(k,C,R),L(),M(),o.value=C}}function y(R){d.value||m(R)}function w(R){if(!d.value)switch(R.key){case" ":case"Enter":m(R)}}function b(R){switch(R.key){case" ":R.preventDefault()}}const E={focus:()=>{var R;(R=n.value)===null||R===void 0||R.focus()},blur:()=>{var R;(R=n.value)===null||R===void 0||R.blur()}},A=AM("Checkbox",s,r),x=pt(()=>{const{value:R}=f,{common:{cubicBezierEaseInOut:k},self:{borderRadius:_,color:N,colorChecked:L,colorDisabled:M,colorTableHeader:C,colorTableHeaderModal:D,colorTableHeaderPopover:O,checkMarkColor:$,checkMarkColorDisabled:U,border:W,borderFocus:ce,borderDisabled:se,borderChecked:Q,boxShadowFocus:J,textColor:K,textColorDisabled:re,checkMarkColorDisabledChecked:X,colorDisabledChecked:me,borderDisabledChecked:G,labelPadding:B,labelLineHeight:z,labelFontWeight:de,[bo("fontSize",R)]:Y,[bo("size",R)]:ee}}=h.value;return{"--n-label-line-height":z,"--n-label-font-weight":de,"--n-size":ee,"--n-bezier":k,"--n-border-radius":_,"--n-border":W,"--n-border-checked":Q,"--n-border-focus":ce,"--n-border-disabled":se,"--n-border-disabled-checked":G,"--n-box-shadow-focus":J,"--n-color":N,"--n-color-checked":L,"--n-color-table":C,"--n-color-table-modal":D,"--n-color-table-popover":O,"--n-color-disabled":M,"--n-color-disabled-checked":me,"--n-text-color":K,"--n-text-color-disabled":re,"--n-check-mark-color":$,"--n-check-mark-color-disabled":U,"--n-check-mark-color-disabled-checked":X,"--n-font-size":Y,"--n-label-padding":B}}),T=i?D2("checkbox",pt(()=>f.value[0]),x,t):void 0;return Object.assign(u,E,{rtlEnabled:A,selfRef:n,mergedClsPrefix:r,mergedDisabled:d,renderedChecked:c,mergedTheme:h,labelId:RW(),handleClick:y,handleKeyUp:w,handleKeyDown:b,cssVars:i?void 0:x,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender})},render(){var t;const{$slots:e,renderedChecked:n,mergedDisabled:r,indeterminate:i,privateInsideTable:s,cssVars:o,labelId:a,label:l,mergedClsPrefix:c,focusable:u,handleKeyUp:d,handleKeyDown:f,handleClick:h}=this;(t=this.onRender)===null||t===void 0||t.call(this);const m=$6(e.default,y=>l||y?ut("span",{class:`${c}-checkbox__label`,id:a},l||y):null);return ut("div",{ref:"selfRef",class:[`${c}-checkbox`,this.themeClass,this.rtlEnabled&&`${c}-checkbox--rtl`,n&&`${c}-checkbox--checked`,r&&`${c}-checkbox--disabled`,i&&`${c}-checkbox--indeterminate`,s&&`${c}-checkbox--inside-table`,m&&`${c}-checkbox--show-label`],tabindex:r||!u?void 0:0,role:"checkbox","aria-checked":i?"mixed":n,"aria-labelledby":a,style:o,onKeyup:d,onKeydown:f,onClick:h,onMousedown:()=>{qs("selectstart",window,y=>{y.preventDefault()},{once:!0})}},ut("div",{class:`${c}-checkbox-box-wrapper`},"",ut("div",{class:`${c}-checkbox-box`},ut(cq,null,{default:()=>this.indeterminate?ut("div",{key:"indeterminate",class:`${c}-checkbox-icon`},BLt()):ut("div",{key:"check",class:`${c}-checkbox-icon`},FLt())}),ut("div",{class:`${c}-checkbox-box__border`}))),m)}}),HLt={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"};function VLt(t){const{textColor2:e,closeIconColor:n,closeIconColorHover:r,closeIconColorPressed:i,infoColor:s,successColor:o,errorColor:a,warningColor:l,popoverColor:c,boxShadow2:u,primaryColor:d,lineHeight:f,borderRadius:h,closeColorHover:m,closeColorPressed:y}=t;return Object.assign(Object.assign({},HLt),{closeBorderRadius:h,textColor:e,textColorInfo:e,textColorSuccess:e,textColorError:e,textColorWarning:e,textColorLoading:e,color:c,colorInfo:c,colorSuccess:c,colorError:c,colorWarning:c,colorLoading:c,boxShadow:u,boxShadowInfo:u,boxShadowSuccess:u,boxShadowError:u,boxShadowWarning:u,boxShadowLoading:u,iconColor:e,iconColorInfo:s,iconColorSuccess:o,iconColorWarning:l,iconColorError:a,iconColorLoading:d,closeColorHover:m,closeColorPressed:y,closeIconColor:n,closeIconColorHover:r,closeIconColorPressed:i,closeColorHoverInfo:m,closeColorPressedInfo:y,closeIconColorInfo:n,closeIconColorHoverInfo:r,closeIconColorPressedInfo:i,closeColorHoverSuccess:m,closeColorPressedSuccess:y,closeIconColorSuccess:n,closeIconColorHoverSuccess:r,closeIconColorPressedSuccess:i,closeColorHoverError:m,closeColorPressedError:y,closeIconColorError:n,closeIconColorHoverError:r,closeIconColorPressedError:i,closeColorHoverWarning:m,closeColorPressedWarning:y,closeIconColorWarning:n,closeIconColorHoverWarning:r,closeIconColorPressedWarning:i,closeColorHoverLoading:m,closeColorPressedLoading:y,closeIconColorLoading:n,closeIconColorHoverLoading:r,closeIconColorPressedLoading:i,loadingColor:d,lineHeight:f,borderRadius:h,border:"0"})}const ULt={common:N0,self:VLt},zke={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},WLt=en([Dn("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[MLt({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),Dn("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 border: var(--n-border);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[Xr("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),Xr("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(t=>lr(`${t}-type`,[en("> *",`
 color: var(--n-icon-color-${t});
 transition: color .3s var(--n-bezier);
 `)])),en("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[f4()])]),Xr("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[en("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),en("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),Dn("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[lr("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),lr("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),lr("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),lr("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),lr("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),lr("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),qLt={info:()=>ut(vLt,null),success:()=>ut(xLt,null),warning:()=>ut(ELt,null),error:()=>ut(wLt,null),default:()=>null},GLt=_r({name:"Message",props:Object.assign(Object.assign({},zke),{render:Function}),setup(t){const{inlineThemeDisabled:e,mergedRtlRef:n}=Zp(t),{props:r,mergedClsPrefixRef:i}=zr(tke),s=AM("Message",n,i),o=Mo("Message","-message",WLt,ULt,r,i),a=pt(()=>{const{type:c}=t,{common:{cubicBezierEaseInOut:u},self:{padding:d,margin:f,maxWidth:h,iconMargin:m,closeMargin:y,closeSize:w,iconSize:b,fontSize:E,lineHeight:A,borderRadius:x,border:T,iconColorInfo:R,iconColorSuccess:k,iconColorWarning:_,iconColorError:N,iconColorLoading:L,closeIconSize:M,closeBorderRadius:C,[bo("textColor",c)]:D,[bo("boxShadow",c)]:O,[bo("color",c)]:$,[bo("closeColorHover",c)]:U,[bo("closeColorPressed",c)]:W,[bo("closeIconColor",c)]:ce,[bo("closeIconColorPressed",c)]:se,[bo("closeIconColorHover",c)]:Q}}=o.value;return{"--n-bezier":u,"--n-margin":f,"--n-padding":d,"--n-max-width":h,"--n-font-size":E,"--n-icon-margin":m,"--n-icon-size":b,"--n-close-icon-size":M,"--n-close-border-radius":C,"--n-close-size":w,"--n-close-margin":y,"--n-text-color":D,"--n-color":$,"--n-box-shadow":O,"--n-icon-color-info":R,"--n-icon-color-success":k,"--n-icon-color-warning":_,"--n-icon-color-error":N,"--n-icon-color-loading":L,"--n-close-color-hover":U,"--n-close-color-pressed":W,"--n-close-icon-color":ce,"--n-close-icon-color-pressed":se,"--n-close-icon-color-hover":Q,"--n-line-height":A,"--n-border-radius":x,"--n-border":T}}),l=e?D2("message",pt(()=>t.type[0]),a,{}):void 0;return{mergedClsPrefix:i,rtlEnabled:s,messageProviderProps:r,handleClose(){var c;(c=t.onClose)===null||c===void 0||c.call(t)},cssVars:e?void 0:a,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender,placement:r.placement}},render(){const{render:t,type:e,closable:n,content:r,mergedClsPrefix:i,cssVars:s,themeClass:o,onRender:a,icon:l,handleClose:c,showIcon:u}=this;a==null||a();let d;return ut("div",{class:[`${i}-message-wrapper`,o],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},s]},t?t(this.$props):ut("div",{class:[`${i}-message ${i}-message--${e}-type`,this.rtlEnabled&&`${i}-message--rtl`]},(d=KLt(l,e,i))&&u?ut("div",{class:`${i}-message__icon ${i}-message__icon--${e}-type`},ut(cq,null,{default:()=>d})):null,ut("div",{class:`${i}-message__content`},$T(r)),n?ut(TLt,{clsPrefix:i,class:`${i}-message__close`,onClick:c,absolute:!0}):null))}});function KLt(t,e,n){if(typeof t=="function")return t();{const r=e==="loading"?ut(NLt,{clsPrefix:n,strokeWidth:24,scale:.85}):qLt[e]();return r?ut($ke,{clsPrefix:n,key:e},{default:()=>r}):null}}const XLt=_r({name:"MessageEnvironment",props:Object.assign(Object.assign({},zke),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(t){let e=null;const n=Ve(!0);Ur(()=>{r()});function r(){const{duration:u}=t;u&&(e=window.setTimeout(o,u))}function i(u){u.currentTarget===u.target&&e!==null&&(window.clearTimeout(e),e=null)}function s(u){u.currentTarget===u.target&&r()}function o(){const{onHide:u}=t;n.value=!1,e&&(window.clearTimeout(e),e=null),u&&u()}function a(){const{onClose:u}=t;u&&u(),o()}function l(){const{onAfterLeave:u,onInternalAfterLeave:d,onAfterHide:f,internalKey:h}=t;u&&u(),d&&d(h),f&&f()}function c(){o()}return{show:n,hide:o,handleClose:a,handleAfterLeave:l,handleMouseleave:s,handleMouseenter:i,deactivate:c}},render(){return ut(kLt,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?ut(GLt,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),YLt=Object.assign(Object.assign({},Mo.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerClass:String,containerStyle:[String,Object]}),ZLt=_r({name:"MessageProvider",props:YLt,setup(t){const{mergedClsPrefixRef:e}=Zp(t),n=Ve([]),r=Ve({}),i={create(l,c){return s(l,Object.assign({type:"default"},c))},info(l,c){return s(l,Object.assign(Object.assign({},c),{type:"info"}))},success(l,c){return s(l,Object.assign(Object.assign({},c),{type:"success"}))},warning(l,c){return s(l,Object.assign(Object.assign({},c),{type:"warning"}))},error(l,c){return s(l,Object.assign(Object.assign({},c),{type:"error"}))},loading(l,c){return s(l,Object.assign(Object.assign({},c),{type:"loading"}))},destroyAll:a};va(tke,{props:t,mergedClsPrefixRef:e}),va(eke,i);function s(l,c){const u=RW(),d=Oi(Object.assign(Object.assign({},c),{content:l,key:u,destroy:()=>{var h;(h=r.value[u])===null||h===void 0||h.hide()}})),{max:f}=t;return f&&n.value.length>=f&&n.value.shift(),n.value.push(d),d}function o(l){n.value.splice(n.value.findIndex(c=>c.key===l),1),delete r.value[l]}function a(){Object.values(r.value).forEach(l=>{l.hide()})}return Object.assign({mergedClsPrefix:e,messageRefs:r,messageList:n,handleAfterLeave:o},i)},render(){var t,e,n;return ut(xn,null,(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t),this.messageList.length?ut(Xz,{to:(n=this.to)!==null&&n!==void 0?n:"body"},ut("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`,this.containerClass],key:"message-container",style:this.containerStyle},this.messageList.map(r=>ut(XLt,Object.assign({ref:i=>{i&&(this.messageRefs[r.key]=i)},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave},HMt(r,["destroy"],void 0),{duration:r.duration===void 0?this.duration:r.duration,keepAliveOnHover:r.keepAliveOnHover===void 0?this.keepAliveOnHover:r.keepAliveOnHover,closable:r.closable===void 0?this.closable:r.closable}))))):null)}});function x_(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function OP(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function JLt(){return Hke().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Hke(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const QLt=typeof Proxy=="function",eDt="devtools-plugin:setup",tDt="plugin:settings:set";let bv,m$;function nDt(){var t;return bv!==void 0||(typeof window<"u"&&window.performance?(bv=!0,m$=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(bv=!0,m$=globalThis.perf_hooks.performance):bv=!1),bv}function rDt(){return nDt()?m$.now():Date.now()}class iDt{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return rDt()}},n&&n.on(tDt,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Vke(t,e){const n=t,r=Hke(),i=JLt(),s=QLt&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(eDt,t,e);else{const o=s?new iDt(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}let OS;const KT=t=>OS=t,Uke=_e.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function Qb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Mf;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Mf||(Mf={}));const Ig=typeof window<"u",gle=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof lc=="object"&&lc.global===lc?lc:typeof globalThis=="object"?globalThis:{HTMLElement:null};function sDt(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function uq(t,e,n){const r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Gke(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function Wke(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function K6(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const X6=typeof navigator=="object"?navigator:{userAgent:""},qke=/Macintosh/.test(X6.userAgent)&&/AppleWebKit/.test(X6.userAgent)&&!/Safari/.test(X6.userAgent),Gke=Ig?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!qke?oDt:"msSaveOrOpenBlob"in X6?aDt:lDt:()=>{};function oDt(t,e="download",n){const r=document.createElement("a");r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?Wke(r.href)?uq(t,e,n):(r.target="_blank",K6(r)):K6(r)):(r.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(r.href)},4e4),setTimeout(function(){K6(r)},0))}function aDt(t,e="download",n){if(typeof t=="string")if(Wke(t))uq(t,e,n);else{const r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){K6(r)})}else navigator.msSaveOrOpenBlob(sDt(t,n),e)}function lDt(t,e,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return uq(t,e,n);const i=t.type==="application/octet-stream",s=/constructor/i.test(String(gle.HTMLElement))||"safari"in gle,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s||qke)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw r=null,new Error("Wrong reader.result type");l=o?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=l:location.assign(l),r=null},a.readAsDataURL(t)}else{const a=URL.createObjectURL(t);r?r.location.assign(a):location.href=a,r=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function vo(t,e){const n=" "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function dq(t){return"_a"in t&&"install"in t}function Kke(){if(!("clipboard"in navigator))return vo("Your browser doesn't support the Clipboard API","error"),!0}function Xke(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(vo('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function cDt(t){if(!Kke())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),vo("Global state copied to clipboard.")}catch(e){if(Xke(e))return;vo("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function uDt(t){if(!Kke())try{Yke(t,JSON.parse(await navigator.clipboard.readText())),vo("Global state pasted from clipboard.")}catch(e){if(Xke(e))return;vo("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function dDt(t){try{Gke(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){vo("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let Ch;function fDt(){Ch||(Ch=document.createElement("input"),Ch.type="file",Ch.accept=".json");function t(){return new Promise((e,n)=>{Ch.onchange=async()=>{const r=Ch.files;if(!r)return e(null);const i=r.item(0);return e(i?{text:await i.text(),file:i}:null)},Ch.oncancel=()=>e(null),Ch.onerror=n,Ch.click()})}return t}async function hDt(t){try{const n=await fDt()();if(!n)return;const{text:r,file:i}=n;Yke(t,JSON.parse(r)),vo(`Global state imported from "${i.name}".`)}catch(e){vo("Failed to import the state from JSON. Check the console for more details.","error"),console.error(e)}}function Yke(t,e){for(const n in e){const r=t.state.value[n];r?Object.assign(r,e[n]):t.state.value[n]=e[n]}}function Iu(t){return{_custom:{display:t}}}const Zke=" Pinia (root)",Y6="_root";function pDt(t){return dq(t)?{id:Y6,label:Zke}:{id:t.$id,label:t.$id}}function mDt(t){if(dq(t)){const n=Array.from(t._s.keys()),r=t._s;return{state:n.map(s=>({editable:!0,key:s,value:t.state.value[s]})),getters:n.filter(s=>r.get(s)._getters).map(s=>{const o=r.get(s);return{editable:!1,key:s,value:o._getters.reduce((a,l)=>(a[l]=o[l],a),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function gDt(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Iu(t.type),key:Iu(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function yDt(t){switch(t){case Mf.direct:return"mutation";case Mf.patchFunction:return"$patch";case Mf.patchObject:return"$patch";default:return"unknown"}}let t1=!0;const Z6=[],fy="pinia:mutations",ga="pinia",{assign:bDt}=Object,h4=t=>" "+t;function wDt(t,e){Vke({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Z6,app:t},n=>{typeof n.now!="function"&&vo("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:fy,label:"Pinia ",color:15064968}),n.addInspector({id:ga,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{cDt(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await uDt(e),n.sendInspectorTree(ga),n.sendInspectorState(ga)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{dDt(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await hDt(e),n.sendInspectorTree(ga),n.sendInspectorState(ga)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:r=>{const i=e._s.get(r);i?typeof i.$reset!="function"?vo(`Cannot reset "${r}" store because it doesn't have a "$reset" method implemented.`,"warn"):(i.$reset(),vo(`Store "${r}" reset.`)):vo(`Cannot reset "${r}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((r,i)=>{const s=r.componentInstance&&r.componentInstance.proxy;if(s&&s._pStores){const o=r.componentInstance.proxy._pStores;Object.values(o).forEach(a=>{r.instanceData.state.push({type:h4(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:Pn(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,c)=>(l[c]=a.$state[c],l),{})}),a._getters&&a._getters.length&&r.instanceData.state.push({type:h4(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,c)=>{try{l[c]=a[c]}catch(u){l[c]=u}return l},{})})})}}),n.on.getInspectorTree(r=>{if(r.app===t&&r.inspectorId===ga){let i=[e];i=i.concat(Array.from(e._s.values())),r.rootNodes=(r.filter?i.filter(s=>"$id"in s?s.$id.toLowerCase().includes(r.filter.toLowerCase()):Zke.toLowerCase().includes(r.filter.toLowerCase())):i).map(pDt)}}),globalThis.$pinia=e,n.on.getInspectorState(r=>{if(r.app===t&&r.inspectorId===ga){const i=r.nodeId===Y6?e:e._s.get(r.nodeId);if(!i)return;i&&(r.nodeId!==Y6&&(globalThis.$store=Pn(i)),r.state=mDt(i))}}),n.on.editInspectorState((r,i)=>{if(r.app===t&&r.inspectorId===ga){const s=r.nodeId===Y6?e:e._s.get(r.nodeId);if(!s)return vo(`store "${r.nodeId}" not found`,"error");const{path:o}=r;dq(s)?o.unshift("state"):(o.length!==1||!s._customProperties.has(o[0])||o[0]in s.$state)&&o.unshift("$state"),t1=!1,r.set(s,o,r.state.value),t1=!0}}),n.on.editComponentState(r=>{if(r.type.startsWith("")){const i=r.type.replace(/^\s*/,""),s=e._s.get(i);if(!s)return vo(`store "${i}" not found`,"error");const{path:o}=r;if(o[0]!=="state")return vo(`Invalid path for store "${i}":
${o}
Only state can be modified.`);o[0]="$state",t1=!1,r.set(s,o,r.state.value),t1=!0}})})}function vDt(t,e){Z6.includes(h4(e.$id))||Z6.push(h4(e.$id)),Vke({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Z6,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const r=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:o,onError:a,name:l,args:c})=>{const u=Jke++;n.addTimelineEvent({layerId:fy,event:{time:r(),title:" "+l,subtitle:"start",data:{store:Iu(e.$id),action:Iu(l),args:c},groupId:u}}),o(d=>{Rg=void 0,n.addTimelineEvent({layerId:fy,event:{time:r(),title:" "+l,subtitle:"end",data:{store:Iu(e.$id),action:Iu(l),args:c,result:d},groupId:u}})}),a(d=>{Rg=void 0,n.addTimelineEvent({layerId:fy,event:{time:r(),logType:"error",title:" "+l,subtitle:"end",data:{store:Iu(e.$id),action:Iu(l),args:c,error:d},groupId:u}})})},!0),e._customProperties.forEach(o=>{gr(()=>Ct(e[o]),(a,l)=>{n.notifyComponentUpdate(),n.sendInspectorState(ga),t1&&n.addTimelineEvent({layerId:fy,event:{time:r(),title:"Change",subtitle:o,data:{newValue:a,oldValue:l},groupId:Rg}})},{deep:!0})}),e.$subscribe(({events:o,type:a},l)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(ga),!t1)return;const c={time:r(),title:yDt(a),data:bDt({store:Iu(e.$id)},gDt(o)),groupId:Rg};a===Mf.patchFunction?c.subtitle="":a===Mf.patchObject?c.subtitle="":o&&!Array.isArray(o)&&(c.subtitle=o.type),o&&(c.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:o}}),n.addTimelineEvent({layerId:fy,event:c})},{detached:!0,flush:"sync"});const i=e._hotUpdate;e._hotUpdate=$s(o=>{i(o),n.addTimelineEvent({layerId:fy,event:{time:r(),title:" "+e.$id,subtitle:"HMR update",data:{store:Iu(e.$id),info:Iu("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(ga),n.sendInspectorState(ga)});const{$dispose:s}=e;e.$dispose=()=>{s(),n.notifyComponentUpdate(),n.sendInspectorTree(ga),n.sendInspectorState(ga),n.getSettings().logStoreChanges&&vo(`Disposed "${e.$id}" store `)},n.notifyComponentUpdate(),n.sendInspectorTree(ga),n.sendInspectorState(ga),n.getSettings().logStoreChanges&&vo(`"${e.$id}" store installed `)})}let Jke=0,Rg;function yle(t,e,n){const r=e.reduce((i,s)=>(i[s]=Pn(t)[s],i),{});for(const i in r)t[i]=function(){const s=Jke,o=n?new Proxy(t,{get(...l){return Rg=s,Reflect.get(...l)},set(...l){return Rg=s,Reflect.set(...l)}}):t;Rg=s;const a=r[i].apply(o,arguments);return Rg=void 0,a}}function xDt({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(e._isOptionsAPI=!!n.state,!e._p._testing){yle(e,Object.keys(n.actions),e._isOptionsAPI);const r=e._hotUpdate;Pn(e)._hotUpdate=function(i){r.apply(this,arguments),yle(e,Object.keys(i._hmrPayload.actions),!!e._isOptionsAPI)}}vDt(t,e)}}function EDt(){const t=Lfe(!0),e=t.run(()=>Ve({}));let n=[],r=[];const i=$s({install(s){KT(i),i._a=s,s.provide(Uke,i),s.config.globalProperties.$pinia=i,_e.env.NODE_ENV!=="production"&&_e.env.NODE_ENV!=="test"&&Ig&&wDt(s,i),r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return _e.env.NODE_ENV!=="production"&&_e.env.NODE_ENV!=="test"&&Ig&&typeof Proxy<"u"&&i.use(xDt),i}function Qke(t,e){for(const n in e){const r=e[n];if(!(n in t))continue;const i=t[n];Qb(i)&&Qb(r)&&!di(r)&&!tu(r)?t[n]=Qke(i,r):t[n]=r}return t}const eCe=()=>{};function ble(t,e,n,r=eCe){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Dfe()&&z9e(i),i}function wv(t,...e){t.slice().forEach(n=>{n(...e)})}const SDt=t=>t(),wle=Symbol(),PP=Symbol();function g$(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];Qb(i)&&Qb(r)&&t.hasOwnProperty(n)&&!di(r)&&!tu(r)?t[n]=g$(i,r):t[n]=r}return t}const ADt=_e.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function TDt(t){return!Qb(t)||!t.hasOwnProperty(ADt)}const{assign:Pc}=Object;function vle(t){return!!(di(t)&&t.effect)}function xle(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){!a&&(_e.env.NODE_ENV==="production"||!r)&&(n.state.value[t]=i?i():{});const u=_e.env.NODE_ENV!=="production"&&r?JZ(Ve(i?i():{}).value):JZ(n.state.value[t]);return Pc(u,s,Object.keys(o||{}).reduce((d,f)=>(_e.env.NODE_ENV!=="production"&&f in u&&console.warn(`[]: A getter cannot have the same name as another state property. Rename one of them. Found with "${f}" in store "${t}".`),d[f]=$s(pt(()=>{KT(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=y$(t,c,e,n,r,!0),l}function y$(t,e,n={},r,i,s){let o;const a=Pc({actions:{}},n);if(_e.env.NODE_ENV!=="production"&&!r._e.active)throw new Error("Pinia destroyed");const l={deep:!0};_e.env.NODE_ENV!=="production"&&(l.onTrigger=L=>{c?h=L:c==!1&&!k._hotUpdating&&(Array.isArray(h)?h.push(L):console.error(" debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let c,u,d=[],f=[],h;const m=r.state.value[t];!s&&!m&&(_e.env.NODE_ENV==="production"||!i)&&(r.state.value[t]={});const y=Ve({});let w;function b(L){let M;c=u=!1,_e.env.NODE_ENV!=="production"&&(h=[]),typeof L=="function"?(L(r.state.value[t]),M={type:Mf.patchFunction,storeId:t,events:h}):(g$(r.state.value[t],L),M={type:Mf.patchObject,payload:L,storeId:t,events:h});const C=w=Symbol();gi().then(()=>{w===C&&(c=!0)}),u=!0,wv(d,M,r.state.value[t])}const E=s?function(){const{state:M}=n,C=M?M():{};this.$patch(D=>{Pc(D,C)})}:_e.env.NODE_ENV!=="production"?()=>{throw new Error(`: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:eCe;function A(){o.stop(),d=[],f=[],r._s.delete(t)}const x=(L,M="")=>{if(wle in L)return L[PP]=M,L;const C=function(){KT(r);const D=Array.from(arguments),O=[],$=[];function U(se){O.push(se)}function W(se){$.push(se)}wv(f,{args:D,name:C[PP],store:k,after:U,onError:W});let ce;try{ce=L.apply(this&&this.$id===t?this:k,D)}catch(se){throw wv($,se),se}return ce instanceof Promise?ce.then(se=>(wv(O,se),se)).catch(se=>(wv($,se),Promise.reject(se))):(wv(O,ce),ce)};return C[wle]=!0,C[PP]=M,C},T=$s({actions:{},getters:{},state:[],hotState:y}),R={_p:r,$id:t,$onAction:ble.bind(null,f),$patch:b,$reset:E,$subscribe(L,M={}){const C=ble(d,L,M.detached,()=>D()),D=o.run(()=>gr(()=>r.state.value[t],O=>{(M.flush==="sync"?u:c)&&L({storeId:t,type:Mf.direct,events:h},O)},Pc({},l,M)));return C},$dispose:A},k=Oi(_e.env.NODE_ENV!=="production"||_e.env.NODE_ENV!=="production"&&_e.env.NODE_ENV!=="test"&&Ig?Pc({_hmrPayload:T,_customProperties:$s(new Set)},R):R);r._s.set(t,k);const N=(r._a&&r._a.runWithContext||SDt)(()=>r._e.run(()=>(o=Lfe()).run(()=>e({action:x}))));for(const L in N){const M=N[L];if(di(M)&&!vle(M)||tu(M))_e.env.NODE_ENV!=="production"&&i?x_(y.value,L,$i(N,L)):s||(m&&TDt(M)&&(di(M)?M.value=m[L]:g$(M,m[L])),r.state.value[t][L]=M),_e.env.NODE_ENV!=="production"&&T.state.push(L);else if(typeof M=="function"){const C=_e.env.NODE_ENV!=="production"&&i?M:x(M,L);N[L]=C,_e.env.NODE_ENV!=="production"&&(T.actions[L]=M),a.actions[L]=M}else _e.env.NODE_ENV!=="production"&&vle(M)&&(T.getters[L]=s?n.getters[L]:M,Ig&&(N._getters||(N._getters=$s([]))).push(L))}if(Pc(k,N),Pc(Pn(k),N),Object.defineProperty(k,"$state",{get:()=>_e.env.NODE_ENV!=="production"&&i?y.value:r.state.value[t],set:L=>{if(_e.env.NODE_ENV!=="production"&&i)throw new Error("cannot set hotState");b(M=>{Pc(M,L)})}}),_e.env.NODE_ENV!=="production"&&(k._hotUpdate=$s(L=>{k._hotUpdating=!0,L._hmrPayload.state.forEach(M=>{if(M in k.$state){const C=L.$state[M],D=k.$state[M];typeof C=="object"&&Qb(C)&&Qb(D)?Qke(C,D):L.$state[M]=D}x_(k,M,$i(L.$state,M))}),Object.keys(k.$state).forEach(M=>{M in L.$state||OP(k,M)}),c=!1,u=!1,r.state.value[t]=$i(L._hmrPayload,"hotState"),u=!0,gi().then(()=>{c=!0});for(const M in L._hmrPayload.actions){const C=L[M];x_(k,M,x(C,M))}for(const M in L._hmrPayload.getters){const C=L._hmrPayload.getters[M],D=s?pt(()=>(KT(r),C.call(k,k))):C;x_(k,M,D)}Object.keys(k._hmrPayload.getters).forEach(M=>{M in L._hmrPayload.getters||OP(k,M)}),Object.keys(k._hmrPayload.actions).forEach(M=>{M in L._hmrPayload.actions||OP(k,M)}),k._hmrPayload=L._hmrPayload,k._getters=L._getters,k._hotUpdating=!1})),_e.env.NODE_ENV!=="production"&&_e.env.NODE_ENV!=="test"&&Ig){const L={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(M=>{Object.defineProperty(k,M,Pc({value:k[M]},L))})}return r._p.forEach(L=>{if(_e.env.NODE_ENV!=="production"&&_e.env.NODE_ENV!=="test"&&Ig){const M=o.run(()=>L({store:k,app:r._a,pinia:r,options:a}));Object.keys(M||{}).forEach(C=>k._customProperties.add(C)),Pc(k,M)}else Pc(k,o.run(()=>L({store:k,app:r._a,pinia:r,options:a})))}),_e.env.NODE_ENV!=="production"&&k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),m&&s&&n.hydrate&&n.hydrate(k.$state,m),c=!0,u=!0,k}function fq(t,e,n){let r,i;const s=typeof e=="function";if(typeof t=="string")r=t,i=s?n:e;else if(i=t,r=t.id,_e.env.NODE_ENV!=="production"&&typeof r!="string")throw new Error('[]: "defineStore()" must be passed a store id as its first argument.');function o(a,l){const c=i7e();if(a=(_e.env.NODE_ENV==="test"&&OS&&OS._testing?null:a)||(c?zr(Uke,null):null),a&&KT(a),_e.env.NODE_ENV!=="production"&&!OS)throw new Error(`[]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);a=OS,a._s.has(r)||(s?y$(r,e,i,a):xle(r,i,a),_e.env.NODE_ENV!=="production"&&(o._pinia=a));const u=a._s.get(r);if(_e.env.NODE_ENV!=="production"&&l){const d="__hot:"+r,f=s?y$(d,e,i,a,!0):xle(d,Pc({},i),a,!0);l._hotUpdate(f),delete a.state.value[d],a._s.delete(d)}if(_e.env.NODE_ENV!=="production"&&Ig){const d=Io();if(d&&d.proxy&&!l){const f=d.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[r]=u}}return u}return o.$id=r,o}function md(t){{const e=Pn(t),n={};for(const r in e){const i=e[r];i.effect?n[r]=pt({get:()=>t[r],set(s){t[r]=s}}):(di(i)||tu(i))&&(n[r]=$i(t,r))}return n}}const kA=t=>{if(!t)return null;if(typeof File=="function"&&t instanceof File)return t;if(typeof Blob=="function"&&t instanceof Blob){if(typeof File=="function"){const n=t.name||"document";return new File([t],n,{type:t.type})}return t}return t.originFileObj?kA(t.originFileObj):t.file?kA(t.file):t.raw?kA(t.raw):null},Ele=(t="")=>{const e=String(t).toLowerCase();return e.endsWith(".docx")?Ko:e.endsWith(".pdf")?vb:e.endsWith(".html")||e.endsWith(".htm")?IM:e.endsWith(".md")||e.endsWith(".markdown")?"text/markdown":""},PS=t=>{const e=kA(t);if(e){const n=e.name||t&&t.name||"document";return{type:e.type||Ele(n)||Ko,data:e,name:n,isNewFile:!0}}if(t&&typeof t=="object"&&"data"in t){const n=kA(t.data);if(n){const r=t.type||n.type||Ele(n.name)||Ko;return{...t,type:r,data:n,name:t.name||n.name||"document"}}}return t};function kDt(t,e){const n=t.itemid,r=t,s=e!==null&&typeof e=="object"?Oi({...e}):Ve(e),o=Ve(null);return gr(s,(l,c)=>{const u={fieldId:n.value,changeTime:Date.now(),oldValue:c,newValue:l,originalField:r};o.value=u}),{value:s}}function CDt(t){const e=Ve(t.itemid),n=Ve(t.itemicon),r=Ve(t.itemiconpack),i=Ve(t.itemdisplaylabel),s=t.itemlinkvalue,o=t.itemplaceholdertext;Ve([]);const{value:a}=kDt(t,s),l=Ve(t.itemtype),c=Ve(t.itemfieldtype),u=t,d=Oi({fontFamily:t.fontfamily||"Arial",fontSize:t.font_size||"12pt",originalFontSize:t.original_font_size||"12pt"}),f=Ve(t.logicrules),h=Ve(!1),m=Oi({}),y={SELECT:NDt,IMAGEINPUT:_Dt,CHECKBOXINPUT:IDt};l.value in y&&Object.assign(m,y[l.value](t));const w=Ve(t.itemformat),b=t.valueGetter;return{id:e,icon:n,iconPack:r,label:i,placeholder:o,fieldType:l,fieldSubType:c,value:a,format:w,logicRules:f,hidden:h,originalJSON:u,fieldStyle:d,valueGetter:b,...m}}function _Dt(t){const e=Ve(t.fontfamily),n=Ve(t.iteminputtype);return{fontfamily:e,iteminputtype:n}}function NDt(t){return{options:Ve(t.itemoptions)}}function IDt(t){const e=Ve(t.itemoptions);return e.value&&(e.value=e.value.map(n=>({label:n.itemdisplaylabel,value:n.itemlinkvalue,checked:n.ischecked,id:n.itemid,annotationId:n.annotationId}))),{options:e}}const tCe=new Map;class RDt{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:Est(n.newValue||"")}),est(this._onChange)}postMessage(e){Tve.setItem(this.room,Cve(yst(e)))}close(){tst(this._onChange)}}const MDt=typeof BroadcastChannel>"u"?RDt:BroadcastChannel,hq=t=>vC(tCe,t,()=>{const e=rM(),n=new MDt(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),LDt=(t,e)=>(hq(t).subs.add(e),e),DDt=(t,e)=>{const n=hq(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),tCe.delete(t)),r},zv=(t,e,n=null)=>{const r=hq(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},nCe=0,pq=1,rCe=2,b$=(t,e)=>{ts(t,nCe);const n=Jbe(e);kf(t,n)},iCe=(t,e,n)=>{ts(t,pq),kf(t,tU(e,n))},ODt=(t,e,n)=>iCe(e,n,RM(t)),sCe=(t,e,n)=>{try{Xbe(e,RM(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},PDt=(t,e)=>{ts(t,rCe),kf(t,e)},FDt=sCe,BDt=(t,e,n,r)=>{const i=Wg(t);switch(i){case nCe:ODt(t,e,n);break;case pq:sCe(t,n,r);break;case rCe:FDt(t,n,r);break;default:throw new Error("Unknown message type")}return i},jDt=0,$Dt=(t,e,n)=>{switch(Wg(t)){case jDt:n(e,Mke(t))}},zDt=t=>Hit(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&"),Ny=0,oCe=3,F1=1,HDt=2,LC=[];LC[Ny]=(t,e,n,r,i)=>{ts(t,Ny);const s=BDt(e,t,n.doc,n);r&&s===pq&&!n.synced&&(n.synced=!0)};LC[oCe]=(t,e,n,r,i)=>{ts(t,F1),kf(t,TA(n.awareness,Array.from(n.awareness.getStates().keys())))};LC[F1]=(t,e,n,r,i)=>{zMt(n.awareness,RM(e),n)};LC[HDt]=(t,e,n,r,i)=>{$Dt(e,n.doc,(s,o)=>VDt(n,o))};const Sle=3e4,VDt=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),aCe=(t,e,n)=>{const r=Rke(e),i=ec(),s=Wg(r),o=t.messageHandlers[s];return o?o(i,r,t,n,s):console.error("Unable to compute message"),i},w$=(t,e,n)=>{e===t.ws&&(t.emit("connection-close",[n,t]),t.ws=null,e.close(),t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,aq(t.awareness,Array.from(t.awareness.getStates().keys()).filter(r=>r!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(lCe,_p(hit(2,t.wsUnsuccessfulReconnects)*100,t.maxBackoffTime),t))},lCe=t=>{if(t.shouldConnect&&t.ws===null){const e=new t._WS(t.url,t.protocols);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=Jb();const r=aCe(t,new Uint8Array(n.data),!0);kU(r)>1&&e.send(Sl(r))},e.onerror=n=>{t.emit("connection-error",[n,t])},e.onclose=n=>{w$(t,e,n)},e.onopen=()=>{t.wsLastMessageReceived=Jb(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=ec();if(ts(n,Ny),b$(n,t.doc),e.send(Sl(n)),t.awareness.getLocalState()!==null){const r=ec();ts(r,F1),kf(r,TA(t.awareness,[t.doc.clientID])),e.send(Sl(r))}},t.emit("status",[{status:"connecting"}])}},FP=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&zv(t.bcChannel,e,t)};class UDt extends BMt{constructor(e,n,r,{connect:i=!0,awareness:s=new $Mt(r),params:o={},protocols:a=[],WebSocketPolyfill:l=WebSocket,resyncInterval:c=-1,maxBackoffTime:u=2500,disableBc:d=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+n,this.maxBackoffTime=u,this.params=o,this.protocols=a,this.roomname=n,this.doc=r,this._WS=l,this.awareness=s,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=d,this.wsUnsuccessfulReconnects=0,this.messageHandlers=LC.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,c>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const f=ec();ts(f,Ny),b$(f,r),this.ws.send(Sl(f))}},c)),this._bcSubscriber=(f,h)=>{if(h!==this){const m=aCe(this,new Uint8Array(f),!1);kU(m)>1&&zv(this.bcChannel,Sl(m),this)}},this._updateHandler=(f,h)=>{if(h!==this){const m=ec();ts(m,Ny),PDt(m,f),FP(this,Sl(m))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:f,updated:h,removed:m},y)=>{const w=f.concat(h).concat(m),b=ec();ts(b,F1),kf(b,TA(s,w)),FP(this,Sl(b))},this._exitHandler=()=>{aq(this.awareness,[r.clientID],"app closed")},l0&&typeof _e<"u"&&_e.on("exit",this._exitHandler),s.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&Sle<Jb()-this.wsLastMessageReceived&&w$(this,this.ws,null)},Sle/10),i&&this.connect()}get url(){const e=zDt(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),l0&&typeof _e<"u"&&_e.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(LDt(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=ec();ts(e,Ny),b$(e,this.doc),zv(this.bcChannel,Sl(e),this);const n=ec();ts(n,Ny),iCe(n,this.doc),zv(this.bcChannel,Sl(n),this);const r=ec();ts(r,oCe),zv(this.bcChannel,Sl(r),this);const i=ec();ts(i,F1),kf(i,TA(this.awareness,[this.doc.clientID])),zv(this.bcChannel,Sl(i),this)}disconnectBc(){const e=ec();ts(e,F1),kf(e,TA(this.awareness,[this.doc.clientID],new Map)),FP(this,Sl(e)),this.bcconnected&&(DDt(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&w$(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(lCe(this),this.connectBc())}}function mq(t,{changes:e={},states:n}){const{added:r=[],removed:i=[]}=e,o={states:IMt(t,n),added:r,removed:i,superdoc:t};t.emit("awareness-update",o)}function cCe({config:t,user:e,documentId:n,socket:r,superdocInstance:i}){console.warn("[superdoc] Internal provider creation is deprecated. Pass { ydoc, provider } to modules.collaboration instead."),t.providerType||(t.providerType="superdoc");const s={hocuspocus:()=>qDt({config:t,user:e,documentId:n,socket:r,superdocInstance:i}),superdoc:()=>WDt({config:t,user:e,documentId:n,superdocInstance:i})};if(!s)throw new Error(`Provider type ${t.providerType} is not supported.`);return s[t.providerType]()}function WDt({config:t,user:e,documentId:n,superdocInstance:r}){const i=new Xf({gc:!1}),s={params:{...t.params}},o=new UDt(t.url,n,i,s);return o.awareness.setLocalStateField("user",e),o.awareness.on("update",(a={})=>mq(r,{changes:a,states:o.awareness.getStates()})),{provider:o,ydoc:i}}function qDt({config:t,user:e,documentId:n,socket:r,superdocInstance:i}){const s=new Xf({gc:!1}),o={websocketProvider:r,document:s,name:n,token:t.token||"",preserveConnection:!1,onAuthenticationFailed:()=>GDt(n),onConnect:()=>KDt(i,n),onDisconnect:()=>XDt(i,n),onDestroy:()=>YDt(i,n)},a=new kMt(o);return a.setAwarenessField("user",e),a.on("awarenessUpdate",l=>mq(i,{states:l.states})),{provider:a,ydoc:s}}const GDt=(t,e)=>{console.warn(" [superdoc] Authentication failed",t,"document",e)},KDt=(t,e)=>{console.warn(" [superdoc] Connected -- ",e)},XDt=(t,e)=>{console.warn(" [superdoc] Disconnected",e)},YDt=(t,e)=>{console.warn(" [superdoc] Destroyed",e)};function ZDt(t,e,n){const r=t.awareness;if(!r){console.warn("[superdoc] External provider missing awareness property");return}n&&r.setLocalStateField&&r.setLocalStateField("user",n),r.on("change",(i={})=>{mq(e,{changes:i,states:r.getStates()})})}const JDt=(t,e,n,r)=>{const{comment:i}=n,s=new o0(Object.entries(i));e.transact(()=>{t.push([s])},{user:r})},Ale=(t,e,n,r)=>{const{comment:i}=n,s=new o0(Object.entries(i)),o=uCe(t,i);o!==-1&&e.transact(()=>{t.delete(o,1),t.insert(o,[s])},{user:r})},QDt=(t,e,n,r)=>{const{comment:i}=n,s=uCe(t,i);s!==-1&&e.transact(()=>{t.delete(s,1)},{user:r})},uCe=(t,e)=>t.toJSON().findIndex(r=>r.commentId===e.commentId),Tle=t=>{if(!t.config.modules.comments||!t.provider)return;const e=()=>{const r=t.commentsStore.commentsParentElement,i=t.commentsStore.editorCommentIds;t.commentsStore.handleEditorLocationsUpdate(r,i),t.commentsStore.hasSyncedCollaborationComments=!0,t.provider.off("synced",e)};t.provider.on("synced",e);const n=t.ydoc.getArray("comments");n.observe(r=>{const i=t.config.user,{user:s={}}=r.transaction.origin;if(i.name===s.name&&i.email===s.email)return;const o=n.toJSON(),a=new Set,l=[];o.forEach(c=>{a.has(c.commentId)||(a.add(c.commentId),l.push(c))}),t.commentsStore.commentsList=l.map(c=>Mg(c))})},e8t=t=>{const{isInternal:e}=t.config,n=`${t.config.superdocId}-superdoc`;if(!t.config.superdocId)return;const r=e?n:`${n}-external`,i={config:t.config.modules.collaboration,user:t.config.user,documentId:r,socket:t.config.socket,superdocInstance:t},{provider:s,ydoc:o}=cCe(i);return{ydoc:o,provider:s}},t8t=t=>{const e=[];return t.config.documents.forEach(n=>{t.config.user.color=t.colors[0];const r={config:t.config.modules.collaboration,user:t.config.user,documentId:n.id,socket:t.config.socket,superdocInstance:t},{provider:i,ydoc:s}=cCe(r);n.provider=i,n.socket=t.config.socket,n.ydoc=s,n.role=t.config.role,e.push(n)}),e},J6=(t,e)=>{if(!t.isCollaborative||!t.config.modules.comments)return;const n=t.ydoc.getArray("comments"),r=t.config.user;switch(e.type){case"add":JDt(n,t.ydoc,e,r);break;case"update":Ale(n,t.ydoc,e,r);break;case"resolved":Ale(n,t.ydoc,e,r);break;case"deleted":QDt(n,t.ydoc,e,r);break}};function n1(t){const e=Ve(t.documentId),n=Ve(t.page),r=Oi(t.selectionBounds||{}),i=Ve(t.source),s=()=>`${e.value}-page-${n.value}`;return{documentId:e,page:n,selectionBounds:r,source:i,getValues:()=>({documentId:e.value,page:n.value,selectionBounds:Pn(r),source:i.value}),getContainerId:s,getContainerLocation:l=>{if(!l)return{top:0,left:0};const c=l.getBoundingClientRect(),u=document.getElementById(s());let d={top:0,left:0};return u&&(d=u.getBoundingClientRect()),{top:Number((d.top-c.top).toFixed(3)),left:Number((d.left-c.left).toFixed(3))}}}}function Mg(t){var J;const e=Ve(t.uid),n=t.commentId||Ts(),r=t.importedId,i=t.parentCommentId,s=t.fileId,o=t.fileType,a=t.createdAtVersionNumber,l=Ve(t.isInternal!==void 0?t.isInternal:!0),c=Ve([]),u=Ve(null),d=Ve(t.isFocused||!1),f=t.creatorEmail,h=t.creatorName,m=t.creatorImage,y=t.createdTime||Date.now(),w=Ve(t.importedAuthor||null),b=t.docxCommentJSON||null,E=Ve(t.commentText||""),A=t.selection?n1(t.selection):n1({documentId:s,page:1,selectionBounds:{}}),x=(J=t.selection)!=null&&J.selectionBounds?{...t.selection.selectionBounds}:{top:0,left:0,right:0,bottom:0},T=Ve(t.trackedChange),R=Ve(t.trackedChangeType||null),k=Ve(t.trackedChangeText||null),_=Ve(t.deletedText||null),N=Ve(t.resolvedTime||null),L=Ve(t.resolvedByEmail||null),M=Ve(t.resolvedByName||null),C=({email:K,name:re,superdoc:X})=>{var G,B,z,de;if(N.value)return;if(N.value=Date.now(),L.value=K,M.value=re,T.value){const Y={type:yf.RESOLVED,comment:Q()};se(X,Y),(B=(G=X.activeEditor)==null?void 0:G.commands)==null||B.resolveComment({commentId:n,importedId:r});return}const me={type:yf.RESOLVED,comment:Q()};se(X,me),(de=(z=X.activeEditor)==null?void 0:z.commands)==null||de.resolveComment({commentId:n,importedId:r})},D=({isInternal:K,superdoc:re})=>{const X=l.value;if(X===K)return;l.value=K;const me={type:yf.UPDATE,changes:[{key:"isInternal",value:K,previousValue:X}],comment:Q()};se(re,me);const G=re.activeEditor;G&&G.commands.setCommentInternal({commentId:n,importedId:r,isInternal:K})},O=K=>{const{activeEditor:re}=K;re==null||re.commands.setActiveComment({commentId:n,importedId:r})},$=({text:K,superdoc:re,suppressUpdate:X})=>{if(E.value=K,c.value=U(K),X)return;const me={type:yf.UPDATE,changes:[{key:"text",value:K}],comment:Q()};se(re,me)},U=K=>{const me=[...new DOMParser().parseFromString(K,"text/html").querySelectorAll('span[data-type="mention"]')],G=[];return me.forEach(B=>{G.some(de=>{const Y=de.email===B.getAttribute("email"),ee=de.name===B.getAttribute("name");return Y&&ee})||G.push({name:B.getAttribute("name"),email:B.getAttribute("email")})}),G},W=(K,re)=>{var G;A.source="super-editor";const X=(G=re==null?void 0:re.getBoundingClientRect())==null?void 0:G.top,me={top:K.top-X,left:K.left,right:K.right,bottom:K.bottom-X};A.selectionBounds=me},ce=()=>w.value?{name:w.value.name||"(Imported)",email:w.value.email}:{name:h,email:f,image:m},se=(K,re)=>{K.emit("comments-update",re),J6(K,re)},Q=()=>({uid:e.value,commentId:n,importedId:r,parentCommentId:i,fileId:s,fileType:o,mentions:c.value.map(K=>({...K,name:K.name?K.name:K.email})),createdAtVersionNumber:a,creatorEmail:f,creatorName:h,creatorImage:m,createdTime:y,importedAuthor:w.value,docxCommentJSON:b,isInternal:l.value,commentText:E.value,selection:A?A.getValues():null,trackedChange:T.value,trackedChangeText:k.value,trackedChangeType:R.value,deletedText:_.value,resolvedTime:N.value,resolvedByEmail:L.value,resolvedByName:M.value});return Oi({uid:e,commentId:n,importedId:r,parentCommentId:i,fileId:s,fileType:o,mentions:c,commentElement:u,isFocused:d,creatorEmail:f,creatorName:h,creatorImage:m,createdTime:y,isInternal:l,commentText:E,selection:A,floatingPosition:x,trackedChange:T,deletedText:_,trackedChangeType:R,trackedChangeText:k,resolvedTime:N,resolvedByEmail:L,resolvedByName:M,importedAuthor:w,docxCommentJSON:b,setText:$,getValues:Q,resolveComment:C,setIsInternal:D,setActive:O,updatePosition:W,getCommentUser:ce})}function n8t(t,e){var se;const n=t.id,r=_(t),i=t.data,s=e,o=t.state,a=t.role,l=t.html,c=t.markdown,u=Ve(null),d=Ve([]),f=Ve(!1),h=Ve(e.rulers),m=qm(t.ydoc),y=qm(t.provider),w=qm(t.socket),b=Ve(t.isNewFile),E=qm(null),A=Q=>E.value=Q,x=()=>E.value,T=qm(null),R=Q=>T.value=Q,k=()=>T.value;function _({type:Q,data:J}){if(J!=null&&J.type)return J.type;if(Q)return _Mt[Q]||Q;throw new Error("Document type not specified")}const N=()=>{$.value=O.value,O.value=[]},L=()=>{O.value=$.value,console.debug("[superdoc] Restored comments:",O.value)},M=Ve(t.fields||[]),C=Ve(((se=t.fields)==null?void 0:se.map(Q=>CDt(Q)))||[]),D=Ve(t.annotations||[]),O=Ve(U()),$=Ve(O.value);function U(){var Q;return s.modules.comments?((Q=t.conversations)==null?void 0:Q.map(J=>Mg(J)))||[]:[]}const W=Ve(null);return{id:n,data:i,html:l,markdown:c,type:r,config:s,state:o,role:a,core:W,ydoc:m,provider:y,socket:w,isNewFile:b,container:u,pageContainers:d,isReady:f,rulers:h,rawFields:M,fields:C,annotations:D,conversations:O,setEditor:A,getEditor:x,setPresentationEditor:R,getPresentationEditor:k,removeComments:N,restoreComments:L,removeConversation:Q=>{const J=O.value.findIndex(K=>K.conversationId===Q);J>-1&&O.value.splice(J,1)}}}const Qf=fq("superdoc",()=>{const t=Ve(null);let e=null;const n=em(),r=Ve([]),i=Ve([]),s=Oi({}),o=Ve([]),a=Ve(100),l=Ve(!1),c=Ve(!1),u=Ve([]),d=Oi({name:null,email:null}),f=Oi({}),h=Ve(null),m=Ve({left:0,top:0,width:0,height:0,source:null}),y=()=>{r.value=[],i.value=[],Object.assign(s,{}),o.value=[],l.value=!1,d.name=null,d.email=null,Object.assign(f,{}),h.value=null},w=Oi({scrollTop:0,scrollLeft:0}),b=M=>{e=typeof M=="function"?M:null},E=M=>{var D;const C=e||((D=t.value)==null?void 0:D.onException);typeof C=="function"&&C(M)},A=async M=>{y(),t.value=M;const{documents:C,modules:D,user:O,users:$}=M;if(o.value=$||[],Object.assign(d,O),Object.assign(f,D),Object.prototype.hasOwnProperty.call(f,"comments")||(f.comments={}),!(C!=null&&C.length)&&!M.modules.collaboration){const U=await NF(cbe,"blank.docx",Ko),W={type:Ko,data:U,name:"blank.docx",isNewFile:!0};M.html&&(W.html=M.html),M.markdown&&(W.markdown=M.markdown),C.push(W)}await x(C),l.value=!0},x=async(M=[])=>{if(!M)return[];for(let C of M){if(!C){E({error:new Error("Received empty document entry during initialization."),stage:"document-init",document:C}),console.warn("[superdoc] Skipping empty document entry.");continue}try{let D=await R(C);if(!D){E({error:new Error("Document could not be initialized with the provided configuration."),stage:"document-init",document:C}),console.warn("[superdoc] Skipping document due to invalid configuration:",C);continue}const O=n8t(D,t.value);r.value.push(O)}catch(D){E({error:D,stage:"document-init",document:C}),console.warn("[superdoc] Error initializing document:",C,"with error:",D,"Skipping document.")}}},T=(M,C,D)=>new File([M],C,{type:D}),R=async M=>{var C,D;if(M=PS(M),(C=t.value)!=null&&C.html&&(M.html=t.value.html),!M.data&&M.url&&!M.type&&(M.type=Ko),(D=t.value)!=null&&D.modules.collaboration&&!M.isNewFile)return{...M,data:null,url:null};if(M.data instanceof File){let O=M.name;const $=M.type===Ko?".docx":M.type===vb?".pdf":".bin";if(O?O.includes(".")||(O=`${O}${$}`):O=`document${$}`,M.data.name!==O){const U=T(M.data,O,M.data.type||M.type);return{...M,name:O,data:U}}return M.name?M:{...M,name:O}}else if(M.data instanceof Blob){let O=M.name;O||(O=`document${M.type===Ko?".docx":M.type===vb?".pdf":".bin"}`);const $=T(M.data,O,M.data.type||M.type);return{...M,data:$}}else{if(M.data)return M;if(M.url&&M.type){M.type.toLowerCase()==="docx"?M.type=Ko:M.type.toLowerCase()==="pdf"&&(M.type=vb);const O=await NF(M.url,M.name||"document",M.type);return{...M,data:O}}}return null},k=pt(()=>{for(let M of r.value.filter(C=>C.type==="pdf"))if(!M.isReady)return!1;return!0}),_=M=>r.value.find(C=>C.id===M);return{commentsStore:n,documents:r,documentBounds:i,pages:s,documentUsers:o,users:u,activeZoom:a,documentScroll:w,isInternal:c,selectionPosition:m,activeSelection:h,isReady:l,user:d,modules:f,areDocumentsReady:k,init:A,setExceptionHandler:b,reset:y,handlePageReady:(M,C,D)=>{s[M]||(s[M]=[]),s[M].push({page:C,containerBounds:D});const O=_(M);O&&O.pageContainers.push({page:C,containerBounds:D})},getDocument:_,getPageBounds:(M,C)=>{const D=s[M];if(!D)return;const O=D.find(ce=>ce.page==C);if(!O||!O.container)return;const $=O.container.getBoundingClientRect(),{height:U}=$;return{top:U*(C-1)}}}}),r8t=t=>{const e={trackInsert:"insertedMark",trackDelete:"deletionMark",trackFormat:"formatMark"},n=[];for(let r=0;r<t.length;r++){const i=t[r],s=t[r+1],o=e[i.mark.type.name];if(i&&s&&i.to===s.from&&i.mark.attrs.id===s.mark.attrs.id){const a=e[s.mark.type.name];n.push({from:i.from,to:s.to,[o]:i,[a]:s}),r++}else n.push({from:i.from,to:i.to,[o]:i})}return n},em=fq("comments",()=>{const t=Qf(),e=Oi({name:"comments",readOnly:!1,allowResolve:!0,showResolved:!1}),n=Oi({documentMode:"editing",commentsVisible:!1,trackChangesVisible:!1}),r=!1,i={},s=yf,o=Ve(!1),a=Ve(!1),l=Ve(null),c=Ve(!1),u=Ve(null),d=Ve(null),f=Ve([]),h=Ve([]),m=new Set([]),y=Ve(!0),w=Ve(""),b=Ve([]),E=Ve(!1),A=Ve([]),x=Ve({}),T=Ve(!1),R=Ve(0),k=Ve([]),_=Ve([]),N=Ve(!1),L=Ve(!1),M=Ve([]),C=Ve(null),D=pt(()=>n.documentMode==="viewing"),O=(Ae={})=>{var Pe;const Re={...e,...Ae};Object.assign(e,Re),y.value=e.suppressInternalExternal||!1,Ae.comments&&Ae.comments.length&&(b.value=((Pe=Ae.comments)==null?void 0:Pe.map(Ce=>Mg(Ce)))||[])},$=Ae=>Ae==null?null:b.value.find(Re=>Re.commentId==Ae||Re.importedId==Ae),U=Ae=>Ae!=null&&Ae.parentCommentId?$(Ae.parentCommentId):Ae,W=Ae=>{if(!D.value)return!0;const Re=U(Ae);return!Re&&(Ae!=null&&Ae.parentCommentId)?!1:!!(Re!=null&&Re.trackedChange)?n.trackChangesVisible:n.commentsVisible},ce=(Ae,Re)=>{var Ce,Oe;if(Re==null){u.value=null,Ae.activeEditor&&((Ce=Ae.activeEditor.commands)==null||Ce.setActiveComment({commentId:null}));return}const Pe=$(Re);Pe&&(u.value=Pe.commentId),Ae.activeEditor&&((Oe=Ae.activeEditor.commands)==null||Oe.setActiveComment({commentId:u.value}))},se=({superdoc:Ae,params:Re})=>{const{event:Pe,changeId:Ce,trackedChangeText:Oe,trackedChangeType:Fe,deletedText:$e,authorEmail:he,authorImage:q,date:ne,author:Ee,importedAuthor:Se,documentId:ze,coords:Ie}=Re,qe=B({documentId:ze,commentId:Ce,trackedChange:!0,trackedChangeText:Oe,trackedChangeType:Fe,deletedText:$e,createdTime:ne,creatorName:Ee,creatorEmail:he,creatorImage:q,isInternal:!1,importedAuthor:Se,selection:{selectionBounds:Ie}});if(Pe==="add")Y({superdoc:Ae,comment:qe});else if(Pe==="update"){const Ye=b.value.find(We=>We.commentId===Ce);if(!Ye)return;Ye.trackedChangeText=Oe,$e&&(Ye.deletedText=$e);const ft={type:s.UPDATE,comment:Ye.getValues()};J6(Ae,ft),Q(Ce,ft,Ae)}},Q=(Ae,Re,Pe,Ce=1e3)=>{i[Ae]&&clearTimeout(i[Ae]),i[Ae]=setTimeout(()=>{Pe&&Pe.emit("comments-update",Re),delete i[Ae]},Ce)},J=Ae=>{var Ce,Oe;const Re={type:s.PENDING};Ae.emit("comments-update",Re);const Pe={...t.activeSelection};Pe.selectionBounds={...Pe.selectionBounds},(Ce=t.selectionPosition)!=null&&Ce.source&&(t.selectionPosition.source=null),C.value=B({selection:Pe,documentId:Pe.documentId,parentCommentId:null}),Ae.config.isInternal||(C.value.isInternal=!1),(Oe=Ae.activeEditor)!=null&&Oe.commands&&Ae.activeEditor.commands.insertComment({...C.value.getValues(),commentId:"pending",skipEmit:!0}),C.value.selection.source==="super-editor"&&t.selectionPosition&&(t.selectionPosition.source="super-editor"),u.value=C.value.commentID},K=pt(()=>{const Ae=[],Re=[],Pe=new Map;b.value.forEach(Fe=>{W(Fe)&&(Fe.resolvedTime?Re.push(Fe):!Fe.parentCommentId&&!Fe.resolvedTime?Ae.push({...Fe}):Fe.parentCommentId&&(Pe.has(Fe.parentCommentId)||Pe.set(Fe.parentCommentId,[]),Pe.get(Fe.parentCommentId).push(Fe)))});const Ce=Ae.sort((Fe,$e)=>Fe.createdTime-$e.createdTime),Oe=Re.sort((Fe,$e)=>Fe.createdTime-$e.createdTime);return{parentComments:Ce,resolvedComments:Oe}}),re=Ae=>m.includes(Ae),X=pt(()=>t.documents),me=pt(()=>e),G=(Ae,Re)=>{const Pe=Ae.getContainerLocation(Re),Ce=Pe.top+Ae.selectionBounds.top,Oe=Pe.left+Ae.selectionBounds.left;return{top:Ce,left:Oe}},B=({selection:Ae,documentId:Re,parentCommentId:Pe,...Ce})=>z({selection:Ae,documentId:Re,parentCommentId:Pe,...Ce}),z=({selection:Ae,documentId:Re,parentCommentId:Pe,...Ce})=>{let Oe;return Re?Oe=t.getDocument(Re):Ae&&(Oe=t.getDocument(Ae.documentId)),Oe||(Oe=t.documents[0]),Mg({fileId:Oe.id,fileType:Oe.type,parentCommentId:Pe,creatorEmail:t.user.email,creatorName:t.user.name,creatorImage:t.user.image,commentText:w.value,selection:Ae,...Ce})},de=Ae=>{var Re;w.value="",C.value=null,u.value=null,t.selectionPosition=null,(Re=Ae.activeEditor)==null||Re.commands.removeComment({commentId:"pending"})},Y=({superdoc:Ae,comment:Re,skipEditorUpdate:Pe=!1})=>{var $e,he,q;let Ce=b.value.find(ne=>ne.commentId===u.value);Ce||(Ce=Re);const Oe=Mg(Re.getValues());if(C.value?Oe.setText({text:w.value,suppressUpdate:!0}):Oe.setText({text:Re.commentText,suppressUpdate:!0}),Oe.selection.source=(he=($e=C.value)==null?void 0:$e.selection)==null?void 0:he.source,Ce){const ne=Ce.isInternal;Oe.isInternal=ne}Ae.config.isInternal||(Oe.isInternal=!1),b.value.push(Oe),de(Ae),!Pe&&!Re.trackedChange&&((q=Ae.activeEditor)!=null&&q.commands)&&!Re.parentCommentId&&Ae.activeEditor.commands.insertComment({...Oe.getValues(),skipEmit:!0});const Fe={type:s.ADD,comment:Oe.getValues()};J6(Ae,Fe),Ae.emit("comments-update",Fe)},ee=({commentId:Ae,superdoc:Re})=>{var ne,Ee;const Pe=b.value.findIndex(Se=>Se.commentId===Ae),Ce=b.value[Pe],{commentId:Oe,importedId:Fe}=Ce,{fileId:$e}=Ce;(Ee=(ne=Re.activeEditor)==null?void 0:ne.commands)==null||Ee.removeComment({commentId:Oe,importedId:Fe}),b.value.splice(Pe,1);const he=b.value.filter(Se=>Se.parentCommentId===Oe).map(Se=>Se.commentId||Se.importedId);b.value=b.value.filter(Se=>!he.includes(Se.commentId));const q={type:s.DELETED,comment:Ce.getValues(),changes:[{key:"deleted",commentId:Oe,fileId:$e}]};Re.emit("comments-update",q),J6(Re,q)},ae=Ae=>{de(Ae)},ie=async({superdoc:Ae,editor:Re,comments:Pe,documentId:Ce})=>{const Oe=t.getDocument(Ce);Pe.forEach(Fe=>{if(!we(Fe.textJson)&&!Fe.trackedChange)return;const he=Fe.creatorName.replace("(imported)",""),q=`${he} (imported)`,ne=Mg({fileId:Ce,fileType:Oe.type,docxCommentJSON:Fe.textJson,commentId:Fe.commentId,isInternal:!1,parentCommentId:Fe.parentCommentId,creatorName:he,createdTime:Fe.createdTime,creatorEmail:Fe.creatorEmail,importedAuthor:{name:q,email:Fe.creatorEmail},commentText:we(Fe.textJson),resolvedTime:Fe.isDone?Date.now():null,resolvedByEmail:Fe.isDone?Fe.creatorEmail:null,resolvedByName:Fe.isDone?q:null,trackedChange:Fe.trackedChange||!1,trackedChangeText:Fe.trackedChangeText,trackedChangeType:Fe.trackedChangeType,deletedText:Fe.trackedDeletedText});Y({superdoc:Ae,comment:ne})}),setTimeout(()=>{H(Re)},0)},H=Ae=>{let Re=uM(Ae.state);const Pe=r8t(Re),{tr:Ce}=Ae.view.state,{dispatch:Oe}=Ae.view;Pe.forEach(({insertedMark:Fe,deletionMark:$e,formatMark:he},q)=>{console.debug(`Create comment for track change: ${q}`);const ne=b.value.find(Se=>Se.commentId===(Fe==null?void 0:Fe.mark.attrs.id)||Se.commentId===($e==null?void 0:$e.mark.attrs.id)||Se.commentId===(he==null?void 0:he.mark.attrs.id)),Ee=Re.length===q+1;if(ne){Ee&&Ce.setMeta(Zi,{type:"force"});return}if(Fe||$e||he){const Se={...Fe&&{insertedMark:Fe.mark},...$e&&{deletionMark:$e.mark},...he&&{formatMark:he.mark}};Ee&&Ce.setMeta(Zi,{type:"force"}),Ce.setMeta(Zi,{type:"forceTrackChanges"}),Ce.setMeta(Ps,Se)}Oe(Ce)})},be=()=>{const Ae=[];return b.value.forEach(Re=>{const Pe=Re.getValues(),Ce=Pe.commentText,Oe=Pe.docxCommentJSON||Te(Ce);Ae.push({...Pe,commentJSON:Oe})}),Ae},Te=Ae=>new zf({mode:"text",isHeadless:!0,content:Ae,extensions:PT()}).getJSON().content[0],Z=Ae=>{x.value=Ae||{}},oe=()=>{x.value={}},te=pt(()=>{var Re;return(Re=K.value)==null?void 0:Re.parentComments.filter(Pe=>!Pe.resolvedTime).filter(Pe=>{var $e;const Ce=Object.keys(x.value);if((($e=Pe.selection)==null?void 0:$e.source)!=="super-editor")return!0;const Fe=Pe.commentId||Pe.importedId;return Ce.includes(Fe)})}),ye=({documentMode:Ae,commentsVisible:Re,trackChangesVisible:Pe}={})=>{typeof Ae=="string"&&(n.documentMode=Ae),typeof Re=="boolean"&&(n.commentsVisible=Re),typeof Pe=="boolean"&&(n.trackChangesVisible=Pe)},ke=Ae=>{if(!Ae||typeof Ae!="object")return Ae;const Re=Oe=>Array.isArray(Oe)?Oe.filter(Boolean).map(Fe=>({...Fe,attrs:Fe!=null&&Fe.attrs?{...Fe.attrs}:void 0})):void 0,Pe=Oe=>Oe&&typeof Oe=="object"?{...Oe}:void 0;if(!Array.isArray(Ae.content))return{type:Ae.type,...Ae.text!==void 0?{text:Ae.text}:{},...Ae.attrs?{attrs:Pe(Ae.attrs)}:{},...Ae.marks?{marks:Re(Ae.marks)}:{}};const Ce=Ae.content.map(Oe=>ke(Oe)).flat().filter(Boolean);return Ae.type==="run"?Ce:{type:Ae.type,...Ae.attrs?{attrs:Pe(Ae.attrs)}:{},...Ae.marks?{marks:Re(Ae.marks)}:{},content:Ce}},we=Ae=>{var Re;if((Re=Ae.content)!=null&&Re.length)try{const Pe=ke(Ae),Ce=Array.isArray(Pe)?Pe[0]:Pe;return Ce.content.length?new zf({mode:"text",isHeadless:!0,content:Ce,loadFromSchema:!0,extensions:PT()}).getHTML():null}catch(Pe){console.warn("Failed to convert comment",Pe);return}};return{COMMENT_EVENTS:s,isDebugging:r,hasInitializedComments:o,hasSyncedCollaborationComments:a,editingCommentId:d,activeComment:u,commentDialogs:f,overlappingComments:h,overlappedIds:m,suppressInternalExternal:y,pendingComment:C,currentCommentText:w,commentsList:b,isCommentsListVisible:E,generalCommentIds:M,editorCommentIds:A,commentsParentElement:l,editorCommentPositions:x,hasInitializedLocations:c,isCommentHighlighted:T,floatingCommentsOffset:R,sortedConversations:k,visibleConversations:_,skipSelectionUpdate:N,isFloatingCommentsReady:L,getConfig:me,documentsWithConverations:X,getGroupedComments:K,getFloatingComments:te,init:O,setViewingVisibility:ye,getComment:$,setActiveComment:ce,getCommentLocation:G,hasOverlapId:re,getPendingComment:B,showAddComment:J,addComment:Y,cancelComment:ae,deleteComment:ee,removePendingComment:de,processLoadedDocxComments:ie,translateCommentsForExport:be,handleEditorLocationsUpdate:Z,clearEditorCommentPositions:oe,handleTrackedChangeUpdate:se}}),i8t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM625 177L497 305c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L591 143c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>',s8t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"/></svg>',fp={comment:kAe,caretDown:_Ae,internal:i8t,external:s8t,markDone:ZI,acceptChange:ZI,rejectChange:IW,overflow:CAe},o8t={class:"user-container"},a8t=["src"],l8t={key:1,class:"user-bg"},c8t={__name:"Avatar",props:{user:{type:Object,required:!0}},setup(t){const e=(n,r)=>!n&&!r?void 0:(n==null?void 0:n.substring(0,1))||(r==null?void 0:r.substring(0,1))||null;return(n,r)=>(rt(),wt("div",o8t,[t.user.image?(rt(),wt("img",{key:0,class:"user-bg",src:t.user.image.startsWith("http")?t.user.image:`data:image/png;base64,${t.user.image}`},null,8,a8t)):(rt(),wt("span",l8t,ci(e(t.user.name,t.user.email)),1))]))}},u8t=or(c8t,[["__scopeId","data-v-53e13009"]]),d8t="Arial, Helvetica, sans-serif";function gq(){const t=Io();return{uiFontFamily:pt(()=>{var r,i,s;const n=(s=(i=(r=t==null?void 0:t.proxy)==null?void 0:r.$superdoc)==null?void 0:i.config)==null?void 0:s.uiDisplayFallbackFont;return typeof n=="string"&&n.trim()?n.trim():d8t})}}const f8t={class:"comment-option"},h8t=["innerHTML"],p8t={class:"option-state"},m8t=["innerHTML"],g8t={__name:"InternalDropdown",props:{state:{type:String,required:!1},isDisabled:{type:Boolean,default:!1}},emits:["select"],setup(t,{emit:e}){const n=e,r=t,{uiFontFamily:i}=gq(),s=f=>()=>ut("div",{innerHTML:f,class:"internal-dropdown__item-icon"}),o=[{label:"Internal",key:"internal",icon:s(fp.internal),iconString:fp.internal,backgroundColor:"#CDE6E6"},{label:"External",key:"external",icon:s(fp.external),iconString:fp.external,backgroundColor:"#F5CFDA"}],a=pt(()=>{var f;return(f=o.find(h=>h.key===u.value))==null?void 0:f.label}),l=pt(()=>{if(!r.state)return{};const f=o.find(m=>m.key===u.value);if(!f)return{};const h={backgroundColor:f.backgroundColor};return r.isDisabled&&(h.opacity=.5,h.cursor="default"),h}),c=(f,h=!1)=>{var m;u.value=f,d.value=(m=o.find(y=>y.key===f))==null?void 0:m.iconString,!h&&n("select",f)},u=Ve(r.state),d=Ve(null);return gr(()=>r.state,f=>{c(f)}),Ur(()=>{c(r.state,!0)}),(f,h)=>(rt(),wt("div",{class:"internal-dropdown",style:Gn(l.value)},[Fn(Ct(eq),{trigger:"click",options:o,onSelect:h[0]||(h[0]=m=>c(m)),disabled:t.isDisabled,"content-style":{fontFamily:Ct(i)}},{default:Uc(()=>[Pt("div",f8t,[Pt("div",{class:"active-icon",innerHTML:d.value},null,8,h8t),Pt("div",p8t,ci(a.value),1),Pt("div",{class:"dropdown-caret",innerHTML:Ct(fp).caretDown},null,8,m8t)])]),_:1},8,["disabled","content-style"])],4))}},y8t=or(g8t,[["__scopeId","data-v-8b9e3b75"]]);function b8t(t){const e=new Date(t),n=e.getHours(),r=e.getMinutes(),i=n>=12?"PM":"AM",s=n%12||12,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],l=e.getDate();return`${`${s}:${r.toString().padStart(2,"0")}${i}`} ${a} ${l}`}const pa=Object.freeze({RESOLVE_OWN:"RESOLVE_OWN",RESOLVE_OTHER:"RESOLVE_OTHER",REJECT_OWN:"REJECT_OWN",REJECT_OTHER:"REJECT_OTHER",COMMENTS_OVERFLOW_OWN:"COMMENTS_OVERFLOW",COMMENTS_OVERFLOW_OTHER:"COMMENTS_OVERFLOW_OTHER",COMMENTS_DELETE_OWN:"COMMENTS_DELETE_OWN",COMMENTS_DELETE_OTHER:"COMMENTS_DELETE_OTHER",UPLOAD_VERSION:"UPLOAD_VERSION",VERSION_HISTORY:"VERSION_HISTORY"}),Ls=Object.freeze({EDITOR:"editor",SUGGESTER:"suggester",VIEWER:"viewer"}),w8t=Object.freeze({[pa.RESOLVE_OWN]:{internal:[Ls.EDITOR],external:[Ls.EDITOR]},[pa.RESOLVE_OTHER]:{internal:[Ls.EDITOR],external:[]},[pa.REJECT_OWN]:{internal:[Ls.EDITOR,Ls.SUGGESTER],external:[Ls.EDITOR,Ls.SUGGESTER]},[pa.REJECT_OTHER]:{internal:[Ls.EDITOR],external:[]},[pa.COMMENTS_OVERFLOW_OWN]:{internal:[Ls.EDITOR,Ls.SUGGESTER],external:[Ls.EDITOR,Ls.SUGGESTER]},[pa.COMMENTS_OVERFLOW_OTHER]:{internal:[Ls.EDITOR],external:[]},[pa.COMMENTS_DELETE_OWN]:{internal:[Ls.EDITOR,Ls.SUGGESTER],external:[Ls.EDITOR,Ls.SUGGESTER]},[pa.COMMENTS_DELETE_OTHER]:{internal:[Ls.EDITOR],external:[]},[pa.UPLOAD_VERSION]:{internal:[Ls.EDITOR],external:[]},[pa.VERSION_HISTORY]:{internal:[Ls.EDITOR],external:[]}}),v8t=(t={})=>{var e,n,r,i,s,o;if(typeof t.permissionResolver=="function")return t.permissionResolver;if((i=(r=(n=(e=t.superdoc)==null?void 0:e.config)==null?void 0:n.modules)==null?void 0:r.comments)!=null&&i.permissionResolver){const a=t.superdoc.config.modules.comments.permissionResolver;if(typeof a=="function")return a}return typeof((o=(s=t.superdoc)==null?void 0:s.config)==null?void 0:o.permissionResolver)=="function"?t.superdoc.config.permissionResolver:null},x8t=(t,e,n)=>{var i,s;const r=n?"internal":"external";return((s=(i=w8t[t])==null?void 0:i[r])==null?void 0:s.includes(e))??!1},hy=(t,e,n,r={})=>{var a,l;const i=x8t(t,e,n),s=v8t(r);if(typeof s!="function")return i;const o=s({permission:t,role:e,isInternal:n,defaultDecision:i,comment:r.comment??null,currentUser:r.currentUser??((l=(a=r.superdoc)==null?void 0:a.config)==null?void 0:l.user)??null,superdoc:r.superdoc??null,trackedChange:r.trackedChange??null});return typeof o=="boolean"?o:i},E8t={class:"card-section comment-header"},S8t={class:"comment-header-left"},A8t={class:"user-info"},T8t={class:"user-name"},k8t={key:0,class:"user-timestamp"},C8t={class:"overflow-menu"},_8t=["innerHTML"],N8t=["innerHTML"],I8t=["innerHTML"],R8t={__name:"CommentHeader",props:{timestamp:{type:Number,required:!1},config:{type:Object,required:!0},comment:{type:Object,required:!1},isPendingInput:{type:Boolean,required:!1,default:!1}},emits:["resolve","reject","overflow-select"],setup(t,{emit:e}){const n=e,r=em(),i=t,{proxy:s}=Io(),o=s.$superdoc.config.role,a=s.$superdoc.config.isInternal,l=i.comment.creatorEmail===s.$superdoc.config.user.email,{uiFontFamily:c}=gq(),u=Object.freeze({edit:{label:"Edit",key:"edit"},delete:{label:"Delete",key:"delete"}}),d=pt(()=>!(!i.comment||i.comment.resolvedTime||r.pendingComment||i.isPendingInput)),f=pt(()=>{if(!d.value||i.comment.parentCommentId)return!1;const x={comment:i.comment,currentUser:s.$superdoc.config.user,superdoc:s.$superdoc};return l||i.comment.trackedChange?hy(pa.RESOLVE_OWN,o,a,x):hy(pa.RESOLVE_OTHER,o,a,x)}),h=pt(()=>{if(!d.value||!i.comment.trackedChange)return!1;const x={comment:i.comment,currentUser:s.$superdoc.config.user,superdoc:s.$superdoc};return l||i.comment.trackedChange?hy(pa.REJECT_OWN,o,a,x):hy(pa.REJECT_OTHER,o,a,x)}),m=pt(()=>!(!d.value||i.comment.trackedChange||i.isPendingInput||y.value.length===0)),y=pt(()=>{if(!d.value)return!1;const x=[],T=new Set;i.comment.creatorEmail===s.$superdoc.config.user.email&&T.add("edit");const R=i.comment.creatorEmail===s.$superdoc.config.user.email,k={comment:i.comment,currentUser:s.$superdoc.config.user,superdoc:s.$superdoc};return(R&&hy(pa.COMMENTS_DELETE_OWN,o,a,k)||!R&&hy(pa.COMMENTS_DELETE_OTHER,o,a,k))&&T.add("delete"),T.forEach(_=>x.push(u[_])),x}),w=()=>n("resolve"),b=()=>n("reject"),E=x=>n("overflow-select",x),A=pt(()=>i.isPendingInput?s.$superdoc.config.user:i.comment.getCommentUser());return(x,T)=>(rt(),wt("div",E8t,[Pt("div",S8t,[Fn(u8t,{user:A.value,class:"avatar"},null,8,["user"]),Pt("div",A8t,[Pt("div",T8t,ci(A.value.name),1),i.comment.createdTime?(rt(),wt("div",k8t,ci(Ct(b8t)(i.comment.createdTime)),1)):Xt("",!0)])]),Pt("div",C8t,[f.value?(rt(),wt("div",{key:0,class:"overflow-menu__icon",innerHTML:Ct(fp).markDone,onClick:mr(w,["stop","prevent"])},null,8,_8t)):Xt("",!0),h.value?(rt(),wt("div",{key:1,class:"overflow-menu__icon",innerHTML:Ct(fp).rejectChange,onClick:mr(b,["stop","prevent"])},null,8,N8t)):Xt("",!0),m.value?(rt(),$r(Ct(eq),{key:2,trigger:"click",options:y.value,onSelect:E,"content-style":{fontFamily:Ct(c)}},{default:Uc(()=>[Pt("div",{class:"overflow-menu__icon",onClick:T[0]||(T[0]=mr(()=>{},["stop","prevent"]))},[Pt("div",{class:"overflow-icon",innerHTML:Ct(fp).overflow},null,8,I8t)])]),_:1},8,["options","content-style"])):Xt("",!0)])]))}},dCe=or(R8t,[["__scopeId","data-v-5e404f08"]]),M8t={class:"input-section"},L8t={__name:"CommentInput",props:{users:{type:Array,required:!1,default:()=>[]},config:{type:Object,required:!0},isFocused:{type:Boolean,default:!1},includeHeader:{type:Boolean,default:!0},comment:{type:Object,required:!1}},emits:["focus"],setup(t,{emit:e}){const n=e;Qf();const r=em(),{currentCommentText:i}=md(r),s=o=>n("focus",o);return(o,a)=>(rt(),wt("div",M8t,[t.includeHeader?(rt(),$r(dCe,{key:0,config:t.config,comment:t.comment,"is-pending-input":!0},null,8,["config","comment"])):Xt("",!0),Pt("div",{class:Qr(["comment-entry",{"sd-input-active":t.isFocused}])},[Fn(Ct(H4t),{class:"superdoc-field",placeholder:"Add a comment",modelValue:Ct(i),"onUpdate:modelValue":a[0]||(a[0]=l=>di(i)?i.value=l:null),users:t.users,onFocus:a[1]||(a[1]=l=>s(!0)),onBlur:a[2]||(a[2]=l=>s(!1))},null,8,["modelValue","users"])],2)]))}},kle=or(L8t,[["__scopeId","data-v-5e1f953a"]]),D8t={key:0,class:"existing-internal-input"},O8t={key:0,class:"card-section comment-body"},P8t={class:"tracked-change"},F8t={class:"tracked-change"},B8t={key:0},j8t={class:"tracked-change-text"},$8t={key:1},z8t={class:"tracked-change-text"},H8t={key:2},V8t={class:"tracked-change-text"},U8t={key:1,class:"card-section comment-body"},W8t=["innerHTML"],q8t={key:1,class:"comment"},G8t={key:2,class:"comment-editing"},K8t={class:"comment-footer"},X8t=["onClick"],Y8t=["onClick"],Z8t={key:2,class:"comment-separator"},J8t={key:1},Q8t={key:0,class:"comment-footer"},eOt=["disabled"],tOt={__name:"CommentDialog",props:{comment:{type:Object,required:!0},autoFocus:{type:Boolean,default:!1},parent:{type:Object,required:!1}},emits:["click-outside","ready","dialog-exit"],setup(t,{emit:e}){const n=e,r=t,{proxy:i}=Io();i.$superdoc.config.role,r.comment.email;const s=Qf(),o=em(),{addComment:a,cancelComment:l,deleteComment:c,removePendingComment:u}=o,{suppressInternalExternal:d,getConfig:f,activeComment:h,floatingCommentsOffset:m,pendingComment:y,currentCommentText:w,isDebugging:b,editingCommentId:E,editorCommentPositions:A,isCommentHighlighted:x}=md(o),{activeZoom:T}=md(s),R=Ve(!0);Ve(!1);const k=Ve(null),_=Ve(null),N=pt(()=>h.value===r.comment.commentId),L=pt(()=>!f.readOnly&&N.value&&!r.comment.resolvedTime&&E.value!==r.comment.commentId),M=pt(()=>Y=>C.value&&Y===D.value.length-1?!0:D.value.length>1&&Y!==D.value.length-1),C=pt(()=>!f.readOnly&&N.value&&!r.comment.resolvedTime&&E.value!==r.comment.commentId),D=pt(()=>{const Y=r.comment;return o.commentsList.filter(ee=>{const ae=ee.parentCommentId===Y.commentId,ie=ee.commentId===r.comment.commentId;return ae||ie}).sort((ee,ae)=>ee.commentId===r.comment.commentId&&ee.createdTime-ae.createdTime)}),O=pt(()=>r.comment.resolvedTime?!0:f.value.readOnly),$=pt(()=>Y=>E.value===Y.commentId),U=pt(()=>i.$superdoc.config.isInternal?!d.value&&!r.comment.trackedChange:!1),W=pt(()=>w.value&&w.value!=="<p></p>"),ce=()=>{var ee;const Y=i.$superdoc.activeEditor;if(r.comment.resolvedTime||(h.value=r.comment.commentId,r.comment.setActive(i.$superdoc)),Y){const ae=r.comment.resolvedTime?r.comment.commentId:r.comment.importedId||r.comment.commentId;(ee=Y.commands)==null||ee.setCursorById(ae)}},se=Y=>{["n-dropdown-option-body__label","sd-editor-comment-highlight","sd-editor-tracked-change-highlight","track-insert","track-insert-dec","track-delete","track-delete-dec","track-format","track-format-dec"].some(ae=>Y.target.classList.contains(ae))||x.value||(h.value===r.comment.commentId&&(m.value=0,n("dialog-exit")),h.value=null,o.setActiveComment(i.$superdoc,h.value),x.value=!1)},Q=()=>{const Y={documentId:r.comment.fileId,isInternal:y.value?y.value.isInternal:R.value,parentCommentId:y.value?null:r.comment.commentId};if(y.value){const ae=y.value.selection.getValues();Y.selection=ae}const ee=o.getPendingComment(Y);a({superdoc:i.$superdoc,comment:ee})},J=()=>{r.comment.trackedChange?(r.comment.resolveComment({email:s.user.email,name:s.user.name,superdoc:i.$superdoc}),i.$superdoc.activeEditor.commands.rejectTrackedChangeById(r.comment.commentId)):o.deleteComment({superdoc:i.$superdoc,commentId:r.comment.commentId}),gi(()=>{o.lastUpdate=new Date,h.value=null,o.setActiveComment(i.$superdoc,h.value)})},K=()=>{r.comment.trackedChange&&i.$superdoc.activeEditor.commands.acceptTrackedChangeById(r.comment.commentId),r.comment.resolveComment({email:s.user.email,name:s.user.name,superdoc:i.$superdoc}),gi(()=>{o.lastUpdate=new Date,h.value=null,o.setActiveComment(i.$superdoc,h.value)})},re=(Y,ee)=>{switch(Y){case"edit":w.value=ee.commentText,h.value=ee.commentId,E.value=ee.commentId,o.setActiveComment(i.$superdoc,h.value);break;case"delete":c({superdoc:i.$superdoc,commentId:ee.commentId});break}},X=Y=>{E.value=null,Y.setText({text:w.value,superdoc:i.$superdoc}),u(i.$superdoc)},me=Y=>{const ee=!!y.value,ae=Y.toLowerCase()==="internal";ee?y.value.isInternal=ae:r.comment.setIsInternal({isInternal:ae,superdoc:i.$superdoc})},G=pt(()=>{var ee;const Y={};if(r.comment,N.value&&(Y.backgroundColor="white",Y.zIndex=50),y.value&&y.value.commentId===r.comment.commentId){const ae=Math.max(96,((ee=y.value.selection)==null?void 0:ee.selectionBounds.top)-50);Y.position="absolute",Y.top=ae+"px"}return Y}),B=Y=>typeof Y=="string"?new Date(Y).getTime():Y,z=Y=>{E.value=null,l(i.$superdoc)},de=pt(()=>{const Y=i.$superdoc.users;return r.comment.isInternal===!0?Y.filter(ee=>{var ae;return((ae=ee.access)==null?void 0:ae.role)==="internal"}):Y});return Ur(()=>{r.autoFocus&&gi(()=>ce()),gi(()=>{const Y=r.comment.importedId!==void 0?r.comment.importedId:r.comment.commentId;n("ready",{commentId:Y,elementRef:_})})}),(Y,ee)=>{const ae=The("click-outside");return wc((rt(),wt("div",{class:Qr(["comments-dialog",{"is-active":N.value,"is-resolved":r.comment.resolvedTime}]),onClick:mr(ce,["stop","prevent"]),style:Gn(G.value),ref_key:"commentDialogElement",ref:_,role:"dialog"},[U.value?(rt(),wt("div",D8t,[Fn(y8t,{onClick:ee[0]||(ee[0]=mr(()=>{},["stop","prevent"])),class:"internal-dropdown","is-disabled":O.value,state:t.comment.isInternal?"internal":"external",onSelect:me},null,8,["is-disabled","state"])])):Xt("",!0),(rt(!0),wt(xn,null,Ui(D.value,(ie,H)=>{var be;return rt(),wt("div",{key:H,class:"conversation-item"},[Fn(dCe,{config:Ct(f),timestamp:B(ie.createdTime),comment:ie,onResolve:K,onReject:J,onOverflowSelect:Te=>re(Te,ie)},null,8,["config","timestamp","comment","onOverflowSelect"]),ie.trackedChange?(rt(),wt("div",O8t,[Pt("div",P8t,[Pt("div",F8t,[ie.trackedChangeType==="trackFormat"?(rt(),wt("div",B8t,[ee[2]||(ee[2]=Pt("span",{class:"change-type"},"Format: ",-1)),Pt("span",j8t,ci(ie.trackedChangeText),1)])):Xt("",!0),ie.trackedChangeText&&ie.trackedChangeType!=="trackFormat"?(rt(),wt("div",$8t,[ee[3]||(ee[3]=Pt("span",{class:"change-type"},"Added: ",-1)),Pt("span",z8t,ci(ie.trackedChangeText),1)])):Xt("",!0),ie.deletedText&&ie.trackedChangeType!=="trackFormat"?(rt(),wt("div",H8t,[ee[4]||(ee[4]=Pt("span",{class:"change-type"},"Deleted: ",-1)),Pt("span",V8t,ci(ie.deletedText),1)])):Xt("",!0)])])])):Xt("",!0),ie.trackedChange?Xt("",!0):(rt(),wt("div",U8t,[!Ct(b)&&!$.value(ie)?(rt(),wt("div",{key:0,class:"comment",innerHTML:ie.commentText},null,8,W8t)):Ct(b)&&!$.value(ie)?(rt(),wt("div",q8t,ci((be=Ct(A)[ie.importedId!==void 0?ie.importedId:ie.commentId])==null?void 0:be.bounds),1)):(rt(),wt("div",G8t,[Fn(kle,{users:de.value,config:Ct(f),"include-header":!1,comment:ie},null,8,["users","config","comment"]),Pt("div",K8t,[Pt("button",{class:"sd-button",onClick:mr(Te=>z(),["stop","prevent"])},"Cancel",8,X8t),Pt("button",{class:"sd-button primary",onClick:mr(Te=>X(ie),["stop","prevent"])},"Update",8,Y8t)])]))])),M.value(H)?(rt(),wt("div",Z8t)):Xt("",!0)])}),128)),C.value&&!Ct(f).readOnly?(rt(),wt("div",J8t,[Fn(kle,{ref_key:"commentInput",ref:k,users:de.value,config:Ct(f),comment:r.comment},null,8,["users","config","comment"]),L.value&&!Ct(f).readOnly?(rt(),wt("div",Q8t,[Pt("button",{class:"sd-button",onClick:ee[1]||(ee[1]=mr((...ie)=>Ct(l)&&Ct(l)(...ie),["stop","prevent"]))},"Cancel"),Pt("button",{class:Qr(["sd-button primary",{disabled:!W.value}]),onClick:mr(Q,["stop","prevent"]),disabled:!W.value}," Comment ",10,eOt)])):Xt("",!0)])):Xt("",!0)],6)),[[ae,se]])}}},XT=or(tOt,[["__scopeId","data-v-d50fd675"]]),nOt={class:"comments-list"},rOt={key:0},iOt={class:"comment-item"},sOt={key:1},oOt={class:"comment-item"},aOt={__name:"commentsList",props:{showMainComments:{type:Boolean,default:!0},showResolvedComments:{type:Boolean,default:!0}},setup(t){const e=t;Qf();const n=em(),{COMMENT_EVENTS:r}=n,{commentsList:i,getGroupedComments:s,isCommentsListVisible:o}=md(n),{proxy:a}=Io(),l=pt(()=>{var c,u;return e.showResolvedComments&&((u=(c=s.value)==null?void 0:c.resolvedComments)==null?void 0:u.length)>0});return Ur(()=>{o.value=!0}),as(()=>{o.value=!1}),(c,u)=>(rt(),wt("div",nOt,[t.showMainComments?(rt(),wt("div",rOt,[(rt(!0),wt(xn,null,Ui(Ct(s).parentComments,d=>(rt(),wt("div",iOt,[Fn(XT,{comment:d},null,8,["comment"])]))),256))])):Xt("",!0),l.value?(rt(),wt("div",sOt,[u[0]||(u[0]=Pt("div",{class:"comment-title"},"Resolved",-1)),(rt(!0),wt(xn,null,Ui(Ct(s).resolvedComments,d=>(rt(),wt("div",oOt,[Fn(XT,{comment:d},null,8,["comment"])]))),256))])):Xt("",!0)]))}},lOt=or(aOt,[["__scopeId","data-v-12d3e3dd"]]);class cOt extends FV{constructor(n,r){super();Mt(this,"element");Mt(this,"config",{comments:[],element:null,commentsStore:null});this.config={...this.config,...n},this.element=this.config.element,this.app=null,this.superdoc=r,this.open()}createVueApp(){this.app=fR(lOt),this.app.directive("click-outside",gU),this.app.config.globalProperties.$superdoc=this.superdoc,!this.element&&this.config.selector&&(this.element=document.getElementById(this.config.selector)),this.container=this.app.mount(this.element)}close(){this.app&&(this.app.unmount(),this.app=null,this.container=null,this.element=null)}open(){this.app||this.createVueApp()}}const uOt={class:"comments-container",id:"commentsContainer"},dOt={class:"comments-layer"},fOt=["onClick","data-id"],hOt={__name:"CommentsLayer",props:{user:{type:Object,required:!0},parent:{type:Object,required:!0}},emits:["highlight-click"],setup(t,{expose:e,emit:n}){const r=Qf(),i=em(),{COMMENT_EVENTS:s}=i,{documentsWithConverations:o,activeComment:a,floatingCommentsOffset:l,getGroupedComments:c}=md(i),{documents:u,activeZoom:d}=md(r),{proxy:f}=Io(),h=n,m=t,y=x=>{const T={creatorEmail:m.user.email,creatorName:m.user.name,documentId:x.documentId,selection:x,isFocused:!0},R=x.selectionBounds;if(R.top>R.bottom){const N=R.top;R.top=R.bottom,R.bottom=N}if(R.left>R.right){const N=R.left;R.left=R.right,R.right=N}x.selectionBounds=R;const k=u.value.find(N=>N.id===x.documentId),_=Mg(T);a.value=_.commentId,k.conversations.push(_),f.$superdoc.emit("comments-update",{type:s.NEW,comment:_.getValues()})},w=x=>{const{selection:T,commentId:R}=x,k=T.getContainerLocation(m.parent),_=x.selection.selectionBounds;(parseFloat(_.top)+k.top)*d.value;const N="#078383",L="#B1124B";let M="33";a.value===R&&(M="66");let C=x.isInternal?N:L;return C+=M,{position:"absolute",top:parseFloat(_.top)+"px",left:_.left+"px",width:_.right-_.left+"px",height:_.bottom-_.top+"px",backgroundColor:C,pointerEvents:x.suppressClick?"none":"auto"}},b=x=>{l.value=x.selection.selectionBounds.top},E=(x,T)=>{x.isFocused=!0,a.value=x.commentId,x.setActive(f.$superdoc),h("highlight-click",x)},A=pt(()=>{var x;return(x=c.value)==null?void 0:x.parentComments.filter(T=>{var R;return T.selection&&((R=T.selection.selectionBounds)==null?void 0:R.top)}).filter(T=>!T.resolvedTime).filter(T=>{var R;return((R=T.selection)==null?void 0:R.source)!=="super-editor"})});return gr(a,x=>{if(!x)return;const T=document.querySelector(`[data-id="${x}"]`);T==null||T.scrollIntoView({behavior:"smooth",block:"center"})}),e({addCommentEntry:y,activateComment:E,setFloatingCommentOffset:b}),(x,T)=>(rt(),wt("div",uOt,[Pt("div",dOt,[(rt(!0),wt(xn,null,Ui(A.value,R=>(rt(),wt("div",{class:"sd-comment-anchor sd-highlight",onClick:mr(k=>E(R),["stop","prevent"]),"data-id":R.commentId,style:Gn(w(R))},null,12,fOt))),256))])]))}},pOt=or(hOt,[["__scopeId","data-v-7d21d613"]]),mOt={class:"sidebar-container calculation-container"},gOt=["id"],yOt={__name:"FloatingComments",props:{currentDocument:{type:Object,required:!0},parent:{type:Object,required:!0}},setup(t){const e=t;Qf();const n=em(),{getFloatingComments:r,hasInitializedLocations:i,activeComment:s,commentsList:o,editorCommentPositions:a}=md(n),l=Ve(null),c=Ve([]),u=Ve(!1),d=Ve(0),f=Ve(0),h=Ve(null),m=pt(()=>b=>l.value?typeof b.top!="number"||isNaN(b.top)?{display:"none"}:{top:`${b.top}px`}:{top:"0px"}),y=b=>{if(!b)return;const{elementRef:E,commentId:A}=b;E&&gi(()=>{var C,D;const x=A;if(c.value.some(O=>O.id==x))return;const T=r.value.find(O=>O.commentId===x||O.importedId==x),R=x||(T==null?void 0:T.importedId),k=a.value[R],_=(k==null?void 0:k.bounds)||{};if(e.currentDocument.type==="application/pdf"&&Object.entries((C=T.selection)==null?void 0:C.selectionBounds).forEach(([O,$])=>{_[O]=Number($)}),!_)return;const N=(D=E.value)==null?void 0:D.getBoundingClientRect(),L=Number(_.top);if(!Number.isFinite(L))return;const M={id:x,top:L,height:N.height,commentRef:T,elementRef:E,pageIndex:(k==null?void 0:k.pageIndex)??0};c.value.push(M)})},w=async()=>{const b=c.value.reduce((E,A)=>{const x=A.pageIndex??0;return E[x]||(E[x]=[]),E[x].push(A),E},{});Object.values(b).forEach(E=>{E.sort((A,x)=>A.top-x.top).forEach((A,x,T)=>{if(x===0)return;const R=T[x-1],k=R.top+R.height+15;A.top<k&&(A.top=k)})}),await gi(),u.value=!0};return n0(()=>{h.value&&(clearTimeout(h.value),h.value=null);const b=r.value.length,E=c.value.length;b===0||E===0||gi(w)}),gr(s,(b,E)=>{gi(()=>{if(!s.value)return d.value=0;const A=n.getComment(s.value);if(!A)return d.value=0;const x=A.commentId||A.importedId,T=c.value.find(_=>_.id===x);if(!T)return d.value=0;const R=A.selection.selectionBounds.top,k=T.top;l.value.getBoundingClientRect(),d.value=R-k,setTimeout(()=>{var _;(_=T.elementRef.value)==null||_.scrollIntoView({behavior:"smooth",block:"center"})},200)})}),as(()=>{h.value&&(clearTimeout(h.value),h.value=null)}),(b,E)=>(rt(),wt("div",{class:"section-wrapper",ref_key:"floatingCommentsContainer",ref:l},[Pt("div",mOt,[(rt(!0),wt(xn,null,Ui(Ct(r),A=>(rt(),wt("div",{key:A.commentId||A.importedId},[Pt("div",{id:A.commentId||A.importedId,class:"measure-comment"},[(rt(),$r(XT,{onReady:y,key:A.commentId+f.value,class:"floating-comment",parent:t.parent,comment:A},null,8,["parent","comment"]))],8,gOt)]))),128))]),u.value?(rt(),wt("div",{key:0,class:"sidebar-container",style:Gn({top:d.value+"px"})},[(rt(!0),wt(xn,null,Ui(c.value,A=>(rt(),wt("div",{key:A.id,style:Gn(m.value(A)),class:"floating-comment"},[(rt(),$r(XT,{key:A.id+f.value,class:"floating-comment",parent:t.parent,comment:A.commentRef},null,8,["parent","comment"]))],4))),128))],4)):Xt("",!0)],512))}},bOt=or(yOt,[["__scopeId","data-v-1402ce8c"]]),wOt={__name:"TextField",props:{field:{type:Object,required:!0},isEditing:{type:Boolean,required:!1,default:!1},styleOverride:{type:Object,required:!1,default:()=>({})}},setup(t){const e=t,n=pt(()=>{const r={...e.styleOverride};return e.isEditing&&(r.backgroundColor="#FFF"),r});return(r,i)=>(rt(),wt("div",{class:"text-field",style:Gn(n.value)},ci(t.field.value||t.field.placeholder),5))}},vOt=or(wOt,[["__scopeId","data-v-f3984d30"]]),xOt=["innerHTML"],EOt={__name:"ParagraphField",props:{field:{type:Object,required:!0},isEditing:{type:Boolean,required:!1,default:!1},styleOverride:{type:Object,required:!1,default:()=>({})}},setup(t){const e=pt(()=>({fontSize:"11pt"}));return(n,r)=>t.field.value?(rt(),wt("div",{key:0,class:"paragraph-field",innerHTML:t.field.value},null,8,xOt)):(rt(),wt("span",{key:1,style:Gn(e.value)},ci(t.field.placeholder||t.field.label),5))}},SOt=or(EOt,[["__scopeId","data-v-ce5a87b3"]]),AOt=["src"],TOt={key:1},kOt={__name:"ImageField",props:{field:{type:Object,required:!0},isEditing:{type:Boolean,required:!1,default:!1},styleOverride:{type:Object,required:!1,default:()=>({})},optionId:{type:String,required:!0},noStyle:{type:Boolean,required:!1,default:!1}},setup(t){const e=t,n=pt(()=>{var i,s;return{maxHeight:(i=e.styleOverride.coordinates)==null?void 0:i.minHeight,maxWidth:(s=e.styleOverride.coordinates)==null?void 0:s.minWidth}}),r=pt(()=>{if(e.field.valueGetter&&typeof e.field.valueGetter=="function")return e.field.valueGetter({annotationId:e.optionId});if(typeof e.field.value=="string")return e.field.value});return(i,s)=>(rt(),wt("div",{class:"image-field",style:Gn(n.value)},[t.field.value&&r.value?(rt(),wt("img",{key:0,src:r.value,alt:"image",style:Gn(n.value)},null,12,AOt)):t.noStyle?Xt("",!0):(rt(),wt("span",TOt,ci(t.field.placeholder||t.field.label),1))],4))}},Cle=or(kOt,[["__scopeId","data-v-7dd69850"]]),COt={class:"checkbox-container"},_Ot={__name:"CheckboxField",props:{field:{type:Object,required:!0},isEditing:{type:Boolean,required:!1,default:!1},optionId:{type:String,required:!0},styleOverride:{type:Object,required:!1,default:()=>({})}},setup(t){const e=t,n=pt(()=>{const i=e.field.options.find(s=>s.annotationId.includes(e.optionId));return i==null?void 0:i.checked}),r=pt(()=>{var l,c,u,d;const s=Number.parseFloat(((c=(l=e.styleOverride)==null?void 0:l.coordinates)==null?void 0:c.minWidth)||0)-2+"px",o=Number.parseFloat(((d=(u=e.styleOverride)==null?void 0:u.coordinates)==null?void 0:d.minHeight)||0)-2+"px",a=parseFloat(s)+"pt";return{width:s,height:o,fontSize:a}});return(i,s)=>(rt(),wt("div",COt,[e.isEditing?(rt(),$r(Ct(zLt),{key:0,checked:n.value,disabled:!e.isEditing},null,8,["checked","disabled"])):(rt(),wt("div",{key:1,class:"checkbox-preview",style:Gn(r.value)},ci(n.value?"x":""),5))]))}},NOt=or(_Ot,[["__scopeId","data-v-a135a0a5"]]),IOt={key:0},ROt={__name:"SelectField",props:{field:{type:Object,required:!0},fieldStyle:{type:Object,required:!1,default:()=>({})},styleOverride:{type:Object,required:!1,default:()=>({})}},setup(t){const e=t,n=pt(()=>{if(!e.isEditing)return{...e.styleOverride}});return(r,i)=>(rt(),wt("div",{style:Gn(n.value),class:"select-container"},[e.isEditing?Xt("",!0):(rt(),wt("div",IOt,ci(t.field.value||t.field.placeholder),1))],4))}},MOt=or(ROt,[["__scopeId","data-v-1e49d9b3"]]),_le=(t,e)=>{const n=10**e;return Math.floor(t*n)/n},LOt=fq("hrbr-fields",()=>{const t=Qf(),{documents:e}=md(t),n=Oi({name:"hrbr-fields"}),r=Object.freeze({TEXTINPUT:$s(vOt),HTMLINPUT:$s(SOt),SELECT:$s(MOt),CHECKBOXINPUT:$s(NOt),SIGNATUREINPUT:$s(Cle),IMAGEINPUT:$s(Cle)}),i=(a,l)=>{const c=e.value.find(d=>d.id===a);if(!c)return;const u=c.fields.find(d=>d.id===l);if(u)return u},s=pt(()=>{const a=[];return e.value.forEach(l=>{const{id:c,annotations:u}=l,d=l.container;if(!d)return;const f=d.getBoundingClientRect(),h=l.pageContainers;!f||!h||u.forEach(m=>{const{itemid:y,page:w,nostyle:b}=m;let E=m.pageannotation;m.itemfieldtype==="CHECKBOXINPUT"&&(E=m.annotationid);const{x1:A,y1:x,x2:T,y2:R}=m,k={x1:A,y1:x,x2:T,y2:R},_=document.getElementById(`${c}-page-${w+1}`);if(!_)return;const N=_.getBoundingClientRect(),L=l.pageContainers.find(W=>W.page===w),M=N.height/L.containerBounds.originalHeight,C=N.bottom-f.top,D=N.left-f.left,O=o(k,M,C,D),$={fontSize:_le(m.original_font_size*M,2)+"pt",fontFamily:m.fontfamily||"Arial",originalFontSize:_le(m.original_font_size*M,2),coordinates:O},U={documentId:c,fieldId:y,page:w,annotationId:E,originalAnnotationId:m.originalannotationid,coordinates:O,style:$,nostyle:b??!1};a.push(U)})}),a}),o=(a,l,c,u)=>{const{x1:d,y1:f,x2:h,y2:m}=a,y=d*l,w=f*l,b=h*l,E=m*l;return{top:`${c-E}px`,left:`${y+u}px`,minWidth:`${b-y}px`,minHeight:`${E-w}px`}};return{hrbrFieldsConfig:n,fieldComponentsMap:r,getAnnotations:s,getField:i}}),DOt={class:"main-container"},OOt={__name:"HrbrFieldsLayer",props:{fields:{type:Object,required:!0}},setup(t){const e=LOt(),{getAnnotations:n}=md(e),{fieldComponentsMap:r,getField:i}=e,s=pt(()=>a=>{const{coordinates:l,field:c}=a;if(["TEXTINPUT","SELECT"].includes(c.fieldType)){const h=l.top.split("px")[0]-4;l.top=`${h}px`}if(["HTMLINPUT"].includes(c.fieldType)){const m=l.minWidth.split("px")[0]/1.3362445414847162;l.width=`${m}px`}return{position:"absolute",...l,lineHeight:1}}),o=pt(()=>{const a=[];return n.value.forEach(l=>{const c=i(l.documentId,l.fieldId);c&&a.push({...l,field:c})}),a});return(a,l)=>(rt(),wt("div",DOt,[(rt(!0),wt(xn,null,Ui(o.value,c=>(rt(),wt("div",{style:Gn(s.value(c)),class:Qr(["field-container",{"field-container--no-style":c.nostyle}])},[(rt(),$r(Ahe(Ct(r)[c.field.fieldType]),{class:"field-component",field:c.field,"style-override":c.style,"option-id":c.originalAnnotationId,"no-style":c.nostyle,"is-editing":!1},null,8,["field","style-override","option-id","no-style"]))],6))),256))]))}},POt=or(OOt,[["__scopeId","data-v-22e6ae02"]]),FOt={class:"superdoc-html-viewer"},BOt={class:"superdoc-html-viewer__document"},jOt=["innerHTML"],$Ot={__name:"HtmlViewer",props:{fileSource:{type:[File,Blob],required:!0},documentId:{type:String,required:!0}},emits:["ready","selection-change"],setup(t,{emit:e}){const n=t,r=Ve(""),i=e,s=()=>{const l=window.getSelection();console.debug("selection from html viewer",l),i("selection-change",l)},o=l=>new Promise((c,u)=>{const d=new FileReader;d.onload=f=>{const h=f.target.result;c(h)},d.onerror=f=>u(f),d.readAsText(l)}),a=async()=>{try{const l=await o(n.fileSource);r.value=l,i("ready",n.documentId)}catch(l){i("error",l),console.error("Error loading document",l)}};return Ur(()=>{a()}),(l,c)=>(rt(),wt("div",FOt,[Pt("div",BOt,[Pt("div",{class:"superdoc-html-viewer__content",innerHTML:r.value,onMouseup:s},null,40,jOt)])]))}},zOt=or($Ot,[["__scopeId","data-v-da3494ba"]]),HOt={class:"ai-highlight-container",id:"aiHighlightContainer"},VOt={__name:"AiLayer",props:{editor:{type:Object,required:!1,default:null}},setup(t,{expose:e}){const n=t,r=Qf(),i=Ve(null),s=()=>{const c=r.activeSelection.selectionBounds;return{position:"absolute",top:parseFloat(c.top)+"px",left:c.left+"px",width:c.right-c.left+"px",height:c.bottom-c.top+"px",backgroundColor:"#6366f133",pointerEvents:"none"}};return e({addAiHighlight:()=>{if(n.editor&&!n.editor.isDestroyed)n.editor.commands.insertAiMark();else if(i.value&&!i.value.hasChildNodes()){const c=document.createElement("div");c.className="ai-highlight-anchor sd-highlight",Object.assign(c.style,s()),i.value.appendChild(c)}},removeAiHighlight:()=>{n.editor&&!n.editor.isDestroyed&&n.editor.commands.removeAiMark(),i.value&&(i.value.innerHTML="")},updateAiHighlight:()=>{if(n.editor&&!n.editor.isDestroyed)n.editor.commands.updateAiHighlightStyle("sd-ai-highlight-pulse");else if(i.value){const c=i.value.querySelectorAll(".ai-highlight-anchor");Array.from(c).forEach(u=>{u.classList.add("sd-ai-highlight-pulse")})}}}),(c,u)=>(rt(),wt("div",HOt,[Pt("div",{class:"ai-highlight-layer",ref_key:"highlightLayer",ref:i},null,512)]))}},UOt=or(VOt,[["__scopeId","data-v-497b8118"]]);function WOt(t){return{selectedText:pt(()=>{const n=t.value;return!n||!n.state?"":n.state.doc.textBetween(n.state.selection.from,n.state.selection.to," ")})}}function qOt({activeEditorRef:t}){const e=Ve(!1),n=Ve(!1),r=Oi({top:0,left:0}),i=Ve(null),s=()=>{const c=t.value;if(!c||c.isDestroyed){console.error("[useAi] Editor not available");return}try{const{view:u}=c,{selection:d}=u.state;d.empty||c.commands.insertAiMark();let f;try{f=u.coordsAtPos(d.$head.pos)}catch{const h=window.getSelection();if(h.rangeCount>0){const y=h.getRangeAt(0).getBoundingClientRect();f={top:y.top,left:y.left}}else{const m=u.dom.getBoundingClientRect();f={top:m.top+50,left:m.left+50}}}r.top=f.top+30+"px",r.left=f.left+"px",n.value=!0}catch(u){console.error("[useAi] Error displaying AIWriter:",u);try{const f=t.value.view.dom.getBoundingClientRect();r.top=f.top+100+"px",r.left=f.left+100+"px",n.value=!0}catch(d){console.error("[useAi] Failed to get fallback position:",d)}}};return{showAiLayer:e,showAiWriter:n,aiWriterPosition:r,aiLayer:i,initAiLayer:(c=!0)=>{e.value=c},showAiWriterAtCursor:s,handleAiWriterClose:()=>{n.value=!1},handleAiToolClick:()=>{const c=t.value;if(!c||c.isDestroyed){console.error("[useAi] Editor not available");return}c.commands.insertAiMark(),s()}}}const Nle=Ve(!1);function fCe(){return{isHighContrastMode:Nle,setHighContrastMode:e=>{Nle.value=e}}}const GOt=["innerHTML"],KOt={class:"superdoc__document document"},XOt={key:0,class:"superdoc__right-sidebar right-sidebar"},YOt={class:"floating-comments"},ZOt={__name:"SuperDoc",emits:["selection-update"],setup(t,{emit:e}){var Ze;const n=$Pe(()=>ju(()=>import("./PdfViewer-CihMmpz1.es-Dw5JMpCu.js"),[])),r=Qf(),i=em(),{documents:s,isReady:o,areDocumentsReady:a,selectionPosition:l,activeSelection:c,activeZoom:u}=md(r),{handlePageReady:d,modules:f,user:h,getDocument:m}=r,{getConfig:y,documentsWithConverations:w,commentsList:b,pendingComment:E,activeComment:A,skipSelectionUpdate:x,commentsByDocument:T,isCommentsListVisible:R,isFloatingCommentsReady:k,generalCommentIds:_,getFloatingComments:N,hasSyncedCollaborationComments:L,editorCommentPositions:M,hasInitializedLocations:C,isCommentHighlighted:D}=md(i),{showAddComment:O,handleEditorLocationsUpdate:$,handleTrackedChangeUpdate:U,addComment:W,getComment:ce,COMMENT_EVENTS:se}=i,{proxy:Q}=Io();i.proxy=Q;const{isHighContrastMode:J}=fCe(),{uiFontFamily:K}=gq(),re=()=>{var Ue,at;return((at=(Ue=Q==null?void 0:Q.$superdoc)==null?void 0:Ue.config)==null?void 0:at.documentMode)==="viewing"},X=pt(()=>{var Ue,at,vt;return re()&&((vt=(at=(Ue=Q==null?void 0:Q.$superdoc)==null?void 0:Ue.config)==null?void 0:at.comments)==null?void 0:vt.visible)===!0}),me=pt(()=>{var Ue,at,vt;return re()&&((vt=(at=(Ue=Q==null?void 0:Q.$superdoc)==null?void 0:Ue.config)==null?void 0:at.trackChanges)==null?void 0:vt.visible)===!0}),G=pt(()=>re()?X.value||me.value:!0),B=pt(()=>{const Ue=f.comments;return Ue===!1||Ue==null?null:Ue}),z=pt(()=>({"--sd-ui-font-family":K.value})),de=Ve(null),Y=Ve(null),ee=Oi({top:null,right:"-25px",zIndex:101}),ae=pt(()=>Q.$superdoc.activeEditor),{selectedText:ie}=WOt(ae),{showAiLayer:H,showAiWriter:be,aiWriterPosition:Te,aiLayer:Z,initAiLayer:oe,handleAiWriterClose:te,handleAiToolClick:ye}=qOt({activeEditorRef:ae}),ke=Ve(null),we=((Ze=Q.$superdoc.config.modules)==null?void 0:Ze.pdf)||{},Ae=(Ue,at)=>{const vt=m(Ue);vt.isReady=!0,vt.container=at,a.value&&(Q.$superdoc.config.collaboration||(o.value=!0)),k.value=!0,C.value=!0,Q.$superdoc.broadcastPdfDocumentReady()},Re=Ue=>{const at={comments:()=>O(Q.$superdoc),ai:()=>ye()};Ue in at&&at[Ue](c.value,l.value),c.value=null,ee.top=null},Pe=Ue=>{E.value},Ce=()=>ee.top=null,Oe=Ue=>{Ue.target.classList.contains("n-dropdown-option-body__label")||i.removePendingComment(Q.$superdoc)},Fe=({editor:Ue,comments:at,replacedFile:vt})=>{(Ue.options.shouldLoadComments||vt)&&gi(()=>{i.processLoadedDocxComments({superdoc:Q.$superdoc,editor:Ue,comments:at,documentId:Ue.options.documentId})})},$e=({editor:Ue})=>{var at;(at=Q.$superdoc)==null||at.broadcastEditorBeforeCreate(Ue)},he=({editor:Ue})=>{const{documentId:at}=Ue.options;m(at).setEditor(Ue),Q.$superdoc.setActiveEditor(Ue),Q.$superdoc.broadcastEditorCreate(Ue),oe(!0)},q=({editor:Ue,presentationEditor:at})=>{var $t;if(!at)return;const{documentId:vt}=Ue.options,Dt=m(vt);Dt&&Dt.setPresentationEditor(at),($t=at.setContextMenuDisabled)==null||$t.call(at,Q.$superdoc.config.disableContextMenu),at.onTelemetry(Hn=>{Q.$superdoc.captureLayoutPipelineEvent(Hn)}),at.on("commentPositions",({positions:Hn})=>{var sn,Jn;const dn=(sn=Q.$superdoc.config.modules)==null?void 0:sn.comments;if(!dn||dn===!1||!Hn||Object.keys(Hn).length===0)return;if(!G.value){(Jn=i.clearEditorCommentPositions)==null||Jn.call(i);return}const bn=at.getCommentBounds(Hn,de.value);$(bn)})},ne=()=>{Q.$superdoc.broadcastEditorDestroy()},Ee=({editor:Ue})=>{Q.$superdoc.setActiveEditor(Ue)},Se=({editor:Ue,isLocked:at,lockedBy:vt})=>{Q.$superdoc.lockSuperdoc(at,vt)},ze=({editor:Ue})=>{Q.$superdoc.emit("editor-update",{editor:Ue})},Ie=({editor:Ue,transaction:at})=>{var pn,Nn,Pr,gs,On,Wr,mn,Wi,ur,ki;if(x.value){x.value=!1,re()&&Xe();return}if(re()){Xe();return}const{documentId:vt}=Ue.options,Dt=at==null?void 0:at.selection,$t=((pn=Ue.state)==null?void 0:pn.selection)??((Pr=(Nn=Ue.view)==null?void 0:Nn.state)==null?void 0:Pr.selection),Hn=(Dt==null?void 0:Dt.$from)&&(Dt==null?void 0:Dt.$to)&&Dt||$t||Dt;if(!Hn)return;const{$from:dn,$to:bn}=Hn;if(!dn||!bn)return;const sn=((Wr=(On=(gs=Ue.state)==null?void 0:gs.doc)==null?void 0:On.content)==null?void 0:Wr.size)??((ki=(ur=(Wi=(mn=Ue.view)==null?void 0:mn.state)==null?void 0:Wi.doc)==null?void 0:ur.content)==null?void 0:ki.size)??Number.POSITIVE_INFINITY;if(dn.pos>sn||bn.pos>sn){it({x:null,y:null,source:"super-editor"});return}if(dn.pos===bn.pos&&it({x:null,y:null,source:"super-editor"}),!de.value)return;const Jn=bf.getInstance(vt);if(!Jn){const{view:ii}=Ue,_s=th=>{try{return ii.coordsAtPos(th)}catch(jl){return console.warn("[superdoc] Ignoring selection coords error",jl),null}},si=_s(dn.pos),gu=_s(bn.pos);if(!si||!gu)return;const rl=de.value.getBoundingClientRect(),eh=Math.max(96,si.top-rl.top),Sd=gu.bottom-rl.top,Ad={top:eh,left:si.left,right:gu.left,bottom:Sd},yu=n1({selectionBounds:Ad,page:1,documentId:vt,source:"super-editor"});He(yu);return}const Rn=Jn.getSelectionBounds(dn.pos,bn.pos,de.value);if(Rn){const{bounds:ii,pageIndex:_s}=Rn;it({startX:ii.left,startY:ii.top,x:ii.right,y:ii.bottom,source:"super-editor"});const si=n1({selectionBounds:{...ii},page:_s+1,documentId:vt,source:"super-editor"});He(si);return}const{view:lt}=Ue,jt=ii=>{try{return lt.coordsAtPos(ii)}catch(_s){return console.warn("[superdoc] Ignoring selection coords error",_s),null}},cn=jt(dn.pos),gt=jt(bn.pos);if(!cn||!gt)return;const Vn=de.value.getBoundingClientRect(),Xn=Math.max(96,cn.top-Vn.top),Un=gt.bottom-Vn.top,zn={top:Xn,left:cn.left,right:gt.left,bottom:Un},zt=n1({selectionBounds:zn,page:1,documentId:vt,source:"super-editor"});He(zt)},qe=({editor:Ue})=>{Q.$superdoc.emit("collaboration-ready",{editor:Ue}),gi(()=>{o.value=!0;const vt=new URLSearchParams(window.location.search).get("commentId");vt&&Ne(vt)})},Ye=({error:Ue,editor:at})=>{Q.$superdoc.emit("content-error",{error:Ue,editor:at})},ft=({error:Ue,editor:at})=>{Q.$superdoc.emit("exception",{error:Ue,editor:at})},We=Ue=>{Q.$superdoc.emit("list-definitions-change",Ue)},nt=Ue=>{var $t,Hn,dn,bn,sn,Jn;const at=((dn=(Hn=($t=Q.$superdoc).listeners)==null?void 0:Hn.call($t,"fonts-resolved"))==null?void 0:dn.length)>0?Q.$superdoc.listeners("fonts-resolved")[0]:null,vt=Q.$superdoc.config.useLayoutEngine!==!1;return{isDebug:Q.$superdoc.config.isDebug||!1,documentId:Ue.id,user:Q.$superdoc.user,users:Q.$superdoc.users,colors:Q.$superdoc.colors,role:Q.$superdoc.config.role,html:Ue.html,markdown:Ue.markdown,documentMode:Q.$superdoc.config.documentMode,rulers:Ue.rulers,rulerContainer:Q.$superdoc.config.rulerContainer,isInternal:Q.$superdoc.config.isInternal,annotations:Q.$superdoc.config.annotations,isCommentsEnabled:!!B.value,isAiEnabled:(bn=Q.$superdoc.config.modules)==null?void 0:bn.ai,slashMenuConfig:(sn=Q.$superdoc.config.modules)==null?void 0:sn.slashMenu,editorCtor:vt?bf:void 0,onBeforeCreate:$e,onCreate:he,onDestroy:ne,onFocus:Ee,onDocumentLocked:Se,onUpdate:ze,onSelectionUpdate:Ie,onCollaborationReady:qe,onContentError:Ye,onException:ft,onCommentsLoaded:Fe,onCommentsUpdate:ct,onCommentLocationsUpdate:Rn=>bt(Ue,Rn),onListDefinitionsChange:We,onFontsResolved:at,onTransaction:Ft,ydoc:Ue.ydoc,collaborationProvider:Ue.provider||null,isNewFile:Ue.isNewFile||!1,handleImageUpload:Q.$superdoc.config.handleImageUpload,telemetry:Q.$superdoc.telemetry,externalExtensions:Q.$superdoc.config.editorExtensions||[],suppressDefaultDocxStyles:Q.$superdoc.config.suppressDefaultDocxStyles,disableContextMenu:Q.$superdoc.config.disableContextMenu,jsonOverride:Q.$superdoc.config.jsonOverride,layoutEngineOptions:vt?{...Q.$superdoc.config.layoutEngineOptions||{},debugLabel:((Jn=Q.$superdoc.config.layoutEngineOptions)==null?void 0:Jn.debugLabel)??Ue.name??Ue.id,zoom:(u.value??100)/100,emitCommentPositionsInViewing:re()&&G.value,enableCommentsInViewing:X.value}:void 0,permissionResolver:(Rn={})=>Q.$superdoc.canPerformPermission({role:Q.$superdoc.config.role,isInternal:Q.$superdoc.config.isInternal,...Rn})}},bt=(Ue,{allCommentIds:at,allCommentPositions:vt}={})=>{var dn,bn;const Dt=(dn=Q.$superdoc.config.modules)==null?void 0:dn.comments;if(!Dt||Dt===!1)return;if(!G.value){(bn=i.clearEditorCommentPositions)==null||bn.call(i);return}const $t=bf.getInstance(Ue.id);if(!$t){$(vt,at);return}const Hn=$t.getCommentBounds(vt,de.value);$(Hn,at)},ct=(Ue={})=>{var $t,Hn,dn;let{activeCommentId:at,type:vt,comment:Dt}=Ue;if(se!=null&&se.ADD&&vt===se.ADD&&Dt){!Dt.commentText&&Dt.text&&(Dt.commentText=Dt.text);const bn=($t=Q.$superdoc)==null?void 0:$t.user;bn&&(Dt.creatorName||(Dt.creatorName=bn.name),Dt.creatorEmail||(Dt.creatorEmail=bn.email)),Dt.createdTime||(Dt.createdTime=Date.now());const sn=Dt.documentId||((dn=(Hn=s.value)==null?void 0:Hn[0])==null?void 0:dn.id);!Dt.documentId&&sn&&(Dt.documentId=sn),!Dt.fileId&&sn&&(Dt.fileId=sn);const Jn=Dt.commentId||Dt.importedId;if(Jn&&!ce(Jn)){const Rn=Mg(Dt);W({superdoc:Q.$superdoc,comment:Rn,skipEditorUpdate:!0})}!at&&Jn&&(at=Jn)}vt==="trackedChange"&&U({superdoc:Q.$superdoc,params:Ue}),gi(()=>{E.value||(i.setActiveComment(Q.$superdoc,at),D.value=!0)}),typeof Q.$superdoc.config.onCommentsUpdate=="function"&&Q.$superdoc.config.onCommentsUpdate(Ue)},Ft=({editor:Ue,transaction:at,duration:vt})=>{typeof Q.$superdoc.config.onTransaction=="function"&&Q.$superdoc.config.onTransaction({editor:Ue,transaction:at,duration:vt})},tn=pt(()=>!!B.value),Zt=pt(()=>{var Ue;return G.value?E.value||((Ue=N.value)==null?void 0:Ue.length)>0&&o.value&&de.value&&tn.value&&!R.value:!1}),ri=pt(()=>{var Ue;return tn.value?l.value&&ee.top&&!((Ue=y.value)!=null&&Ue.readOnly):!1});pt(()=>{var Ue;return tn.value?!((Ue=y.value)!=null&&Ue.readOnly)&&l.value:!1}),gr(Zt,Ue=>{Q.$superdoc.broadcastSidebarToggle(Ue)});const Ne=Ue=>{var Dt,$t;const at=($t=(Dt=Q.$superdoc.config)==null?void 0:Dt.modules)==null?void 0:$t.comments;if(!at||at===!1)return;const vt=document.querySelector(`[data-thread-id=${Ue}]`);vt&&(vt.scrollIntoView({behavior:"smooth",block:"start"}),i.setActiveComment(Q.$superdoc,Ue))};Ur(()=>{const Ue=B.value;Ue&&!Ue.readOnly&&document.addEventListener("mousedown",Pe)}),as(()=>{document.removeEventListener("mousedown",Pe)});const le=Ve(null),fe=Ve(!1),ve=pt(()=>{if(!l.value||l.value.source==="super-editor")return{x:null,y:null};const Ue=l.value.top,at=l.value.left,vt=l.value.right,Dt=l.value.bottom;return{zIndex:500,borderRadius:"4px",top:Ue+"px",left:at+"px",height:Math.abs(Ue-Dt)+"px",width:Math.abs(at-vt)+"px"}}),He=Ue=>{if(re()){Xe();return}if(!Ue.selectionBounds||!tn.value)return;Xe();const at=window.matchMedia("(max-width: 768px)").matches;if(it({startX:Ue.selectionBounds.left,startY:Ue.selectionBounds.top,x:Ue.selectionBounds.right,y:Ue.selectionBounds.bottom,source:Ue.source}),!l.value)return;const vt=Math.abs(l.value.left-l.value.right)>5,Dt=Math.abs(l.value.top-l.value.bottom)>5;if(!vt||!Dt){le.value.style.pointerEvents="none",Xe();return}c.value=Ue;let $t=Ue.selectionBounds.top;ee.top=$t+"px",ee.right=at?"0":"-25px"},Xe=()=>{l.value=null,ee.top=null},it=({startX:Ue,startY:at,x:vt,y:Dt,source:$t})=>{if(!(typeof Ue=="number"||typeof at=="number")&&!(typeof vt=="number"||typeof Dt=="number")){Xe();return}if(!l.value){if(at==null||Ue==null)return;l.value={top:at,left:Ue,right:Ue,bottom:at,startX:Ue,startY:at,source:$t}}if(typeof Ue=="number"&&(l.value.startX=Ue),typeof at=="number"&&(l.value.startY=at),typeof Dt=="number"){const bn=l.value.startY;Dt<bn?l.value.top=Dt:l.value.bottom=Dt}if(typeof vt=="number"){const bn=l.value.startX;vt<bn?l.value.left=vt:l.value.right=vt}},Lt=Ue=>{Xe(),le.value.style.pointerEvents="auto",gi(()=>{fe.value=!0;const at=Ue.offsetY/(u.value/100),vt=Ue.offsetX/(u.value/100);it({startX:vt,startY:at}),le.value.addEventListener("mousemove",Bt)})},Bt=Ue=>{if(!fe.value)return;const at=Ue.offsetY/(u.value/100),vt=Ue.offsetX/(u.value/100);it({x:vt,y:at})},Wt=Ue=>{if(!fe.value||(le.value.removeEventListener("mousemove",Bt),!l.value))return;const at=n1({selectionBounds:{top:l.value.top,left:l.value.left,right:l.value.right,bottom:l.value.bottom},documentId:s.value[0].id});He(at),le.value.style.pointerEvents="none"},Jt=pt(()=>{var at;const Ue=(at=Q.$superdoc.config.modules)==null?void 0:at.comments;return!Ue||Ue===!1?!1:!Ue.readOnly}),qt=(Ue,at)=>{Ue.documentMarginsLastChange=at.pageMargins},et=Ue=>{tn.value&&(Xe(),fe.value=!0,Lt(Ue))};return gr(()=>u.value,Ue=>{Q.$superdoc.config.useLayoutEngine!==!1&&bf.setGlobalZoom((Ue??100)/100)}),gr(N,()=>{C.value=!1,gi(()=>{C.value=!0})}),(Ue,at)=>{const vt=The("click-outside");return rt(),$r(Ct(XTe),{abstract:"","preflight-style-disabled":""},{default:Uc(()=>{var Dt,$t,Hn,dn,bn;return[Pt("div",{class:Qr(["superdoc",{"superdoc--with-sidebar":Zt.value,"high-contrast":Ct(J)}]),style:Gn(z.value)},[Pt("div",{class:"superdoc__layers layers",ref_key:"layers",ref:de,role:"group"},[ri.value?(rt(),wt("div",{key:0,class:"superdoc__tools tools",style:Gn(ee)},[Pt("div",{class:"tools-item","data-id":"is-tool",onMousedown:at[0]||(at[0]=mr(sn=>Re("comments"),["stop","prevent"]))},[Pt("div",{class:"superdoc__tools-icon",innerHTML:Ct(fp).comment},null,8,GOt)],32),Ct(Q).$superdoc.config.modules.ai?(rt(),wt("div",{key:0,class:"tools-item","data-id":"is-tool",onMousedown:at[1]||(at[1]=mr(sn=>Re("ai"),["stop","prevent"]))},[...at[3]||(at[3]=[Pt("div",{class:"superdoc__tools-icon ai-tool"},null,-1)])],32)):Xt("",!0)],4)):Xt("",!0),Pt("div",KOt,[tn.value?(rt(),wt("div",{key:0,class:"superdoc__selection-layer selection-layer",onMousedown:Lt,onMouseup:Wt,ref_key:"selectionLayer",ref:le},[Ct(l)&&Jt.value?(rt(),wt("div",{key:0,style:Gn(ve.value),class:"superdoc__temp-selection temp-selection sd-highlight sd-initial-highlight"},null,4)):Xt("",!0)],544)):Xt("",!0),"hrbr-fields"in Ct(f)&&de.value?(rt(),$r(POt,{key:1,fields:Ct(f)["hrbr-fields"],class:"superdoc__comments-layer comments-layer",style:{"z-index":"2"},ref_key:"hrbrFieldsLayer",ref:ke},null,8,["fields"])):Xt("",!0),de.value?(rt(),$r(pOt,{key:2,class:"superdoc__comments-layer comments-layer",style:{"z-index":"3"},ref_key:"commentsLayer",ref:Y,parent:de.value,user:Ct(h),onHighlightClick:Ce},null,8,["parent","user"])):Xt("",!0),Ct(H)?(rt(),$r(UOt,{key:3,class:"ai-layer",style:{"z-index":"4"},ref_key:"aiLayer",ref:Z,editor:Ct(Q).$superdoc.activeEditor},null,8,["editor"])):Xt("",!0),(rt(!0),wt(xn,null,Ui(Ct(s),sn=>(rt(),wt("div",{class:"superdoc__sub-document sub-document",key:sn.id},[sn.type===Ct(vb)?(rt(),$r(Ct(n),{key:0,"document-data":sn,config:Ct(we),onSelectionChange:He,onReady:Ae,onPageLoaded:Ct(d),onBypassSelection:et},null,8,["document-data","config","onPageLoaded"])):Xt("",!0),Fn(Ct(ZLt),null,{default:Uc(()=>[sn.type===Ct(Ko)?(rt(),$r(Ct(j4t),{key:0,"file-source":sn.data,state:sn.state,"document-id":sn.id,options:{...nt(sn),rulers:sn.rulers},onEditorReady:q,onPageMarginsChange:Jn=>qt(sn,Jn)},null,8,["file-source","state","document-id","options","onPageMarginsChange"])):Xt("",!0)]),_:2},1024),sn.type===Ct(IM)?(rt(),$r(zOt,{key:1,onReady:at[2]||(at[2]=Jn=>Ae(Jn,null)),onSelectionChange:He,"file-source":sn.data,"document-id":sn.id},null,8,["file-source","document-id"])):Xt("",!0)]))),128))])],512),Zt.value?(rt(),wt("div",XOt,[Ct(E)?wc((rt(),$r(XT,{key:0,comment:Ct(E),"auto-focus":!0,"is-floating":!0},null,8,["comment"])),[[vt,Oe]]):Xt("",!0),Pt("div",YOt,[Ct(C)&&Ct(N).length>0?(rt(!0),wt(xn,{key:0},Ui(Ct(w),sn=>(rt(),$r(bOt,{parent:de.value,"current-document":sn},null,8,["parent","current-document"]))),256)):Xt("",!0)])])):Xt("",!0),Ct(be)?(rt(),wt("div",{key:1,class:"ai-writer-container",style:Gn(Ct(Te))},[Fn(Ct(NW),{"selected-text":Ct(ie),"handle-close":Ct(te),editor:Ct(Q).$superdoc.activeEditor,"api-key":($t=(Dt=Ct(Q).$superdoc.toolbar)==null?void 0:Dt.config)==null?void 0:$t.aiApiKey,endpoint:(bn=(dn=(Hn=Ct(Q).$superdoc.config)==null?void 0:Hn.modules)==null?void 0:dn.ai)==null?void 0:bn.endpoint},null,8,["selected-text","handle-close","editor","api-key","endpoint"])],4)):Xt("",!0)],6)]}),_:1})}}},JOt=or(ZOt,[["__scopeId","data-v-78737564"]]),QOt=()=>{const t=fR(JOt),e=EDt();t.use(e),t.directive("click-outside",gU);const n=Qf(),r=em(),i=fCe();return{app:t,pinia:e,superdocStore:n,commentsStore:r,highContrastModeStore:i}},e9t={docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pdf:"application/pdf",zip:"application/zip",html:"text/html",txt:"text/plain;charset=utf-8",json:"application/json"},t9t=t=>!t||typeof t.toLowerCase!="function"?"application/octet-stream":e9t[t.toLowerCase()]||"application/octet-stream",n9t=(t,e)=>{if(t instanceof Blob)return t;const n=t9t(e);if(t instanceof ArrayBuffer)return new Blob([t],{type:n});if(ArrayBuffer.isView(t)){const{buffer:r,byteOffset:i,byteLength:s}=t,o=r.slice(i,i+s);return new Blob([o],{type:n})}if(typeof t=="string")return new Blob([t],{type:n});throw t==null?new TypeError("createDownload requires a Blob, ArrayBuffer, or ArrayBufferView."):new TypeError(`Cannot create download from value of type ${typeof t}`)},Ile=(t,e,n)=>{const r=n9t(t,n);if(typeof URL>"u"||typeof URL.createObjectURL!="function"||typeof document>"u"||typeof document.createElement!="function")return r;const i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=`${e}.${n}`;const o=document.body&&typeof document.body.appendChild=="function";return o&&document.body.appendChild(s),s.click(),o&&document.body.removeChild(s),typeof URL.revokeObjectURL=="function"&&setTimeout(()=>URL.revokeObjectURL(i),0),r},Rle=t=>{const e=t.toLowerCase();return e.endsWith(".docx")?t.slice(0,-5):e.endsWith(".pdf")?t.slice(0,-4):t},BP=Object.freeze({name:"Default SuperDoc user",email:null});var xk,qn,pCe,mCe,gCe,yCe,bCe,wCe,Kd,vCe,Q6,xCe,v$,x$,E$,ECe,S$;class hCe extends FV{constructor(n){super();st(this,qn);st(this,xk,!1);Mt(this,"version");Mt(this,"users");Mt(this,"ydoc");Mt(this,"provider");Mt(this,"config",{superdocId:null,selector:"#superdoc",documentMode:"editing",role:"editor",document:{},documents:[],format:null,editorExtensions:[],colors:[],user:{name:null,email:null},users:[],modules:{},permissionResolver:null,title:"SuperDoc",conversations:[],isInternal:!1,comments:{visible:!1},trackChanges:{visible:!1},toolbar:null,toolbarGroups:["left","center","right"],toolbarIcons:{},toolbarTexts:{},uiDisplayFallbackFont:"Arial, Helvetica, sans-serif",isDev:!1,telemetry:null,onEditorBeforeCreate:()=>null,onEditorCreate:()=>null,onEditorDestroy:()=>null,onContentError:()=>null,onReady:()=>null,onCommentsUpdate:()=>null,onAwarenessUpdate:()=>null,onLocked:()=>null,onPdfDocumentReady:()=>null,onSidebarToggle:()=>null,onCollaborationReady:()=>null,onEditorUpdate:()=>null,onCommentsListChange:()=>null,onException:()=>null,onListDefinitionsChange:()=>null,onTransaction:()=>null,onFontsResolved:null,handleImageUpload:null,disableContextMenu:!1,useLayoutEngine:!0});pe(this,qn,pCe).call(this,n)}get requiredNumberOfEditors(){return this.superdocStore.documents.filter(n=>n.type===Ko).length}get state(){return{documents:this.superdocStore.documents,users:this.users}}get element(){return typeof this.config.selector=="string"?document.querySelector(this.config.selector):this.config.selector}addSharedUser(n){this.users.some(r=>r.email===n.email)||this.users.push(n)}removeSharedUser(n){this.users=this.users.filter(r=>r.email!==n)}onContentError({error:n,editor:r}){const{documentId:i}=r.options,s=this.superdocStore.documents.find(o=>o.id===i);this.config.onContentError({error:n,editor:r,documentId:s.id,file:s.data})}broadcastPdfDocumentReady(){this.emit("pdf-document-ready")}broadcastReady(){this.readyEditors===this.requiredNumberOfEditors&&this.emit("ready",{superdoc:this})}broadcastEditorBeforeCreate(n){this.emit("editorBeforeCreate",{editor:n})}broadcastEditorCreate(n){this.readyEditors++,this.broadcastReady(),this.emit("editorCreate",{editor:n})}broadcastEditorDestroy(){this.emit("editorDestroy")}broadcastSidebarToggle(n){this.emit("sidebar-toggle",n)}setActiveEditor(n){this.activeEditor=n,this.toolbar&&(this.activeEditor.toolbar=this.toolbar,this.toolbar.setActiveEditor(n))}toggleRuler(){this.config.rulers=!this.config.rulers,this.superdocStore.documents.forEach(n=>{n.rulers=this.config.rulers})}canPerformPermission({permission:n,role:r=this.config.role,isInternal:i=this.config.isInternal,comment:s=null,trackedChange:o=null}={}){var u;if(!n)return!1;let a=s??(o==null?void 0:o.comment)??null;const l=(o==null?void 0:o.commentId)||(o==null?void 0:o.id);if(!a&&l&&((u=this.commentsStore)!=null&&u.getComment)){const d=this.commentsStore.getComment(l);a=d!=null&&d.getValues?d.getValues():d}const c={superdoc:this,currentUser:this.config.user,comment:a??null,trackedChange:o??null};return hy(n,r,i,c)}addCommentsList(n){var r,i,s;!((i=(r=this.config)==null?void 0:r.modules)!=null&&i.comments)||this.config.role==="viewer"||(n&&(this.config.modules.comments.element=n),this.commentsList=new cOt((s=this.config.modules)==null?void 0:s.comments,this),this.config.onCommentsListChange&&this.config.onCommentsListChange({isRendered:!0}))}removeCommentsList(){this.commentsList&&(this.commentsList.close(),this.commentsList=null,this.config.onCommentsListChange&&this.config.onCommentsListChange({isRendered:!1}))}setDisableContextMenu(n=!0){var i,s;const r=!!n;this.config.disableContextMenu!==r&&(this.config.disableContextMenu=r,(s=(i=this.superdocStore)==null?void 0:i.documents)==null||s.forEach(o=>{var c,u;const a=(c=o.getPresentationEditor)==null?void 0:c.call(o);a!=null&&a.setContextMenuDisabled&&a.setContextMenuDisabled(r);const l=(u=o.getEditor)==null?void 0:u.call(o);l!=null&&l.setOptions&&l.setOptions({disableContextMenu:r})}))}onToolbarCommand({item:n,argument:r}){n.command==="setDocumentMode"?this.setDocumentMode(r):n.command==="setZoom"&&(this.superdocStore.activeZoom=r)}setDocumentMode(n){if(!n)return;n=n.toLowerCase(),this.config.documentMode=n,pe(this,qn,E$).call(this);const r={viewing:()=>pe(this,qn,x$).call(this),editing:()=>pe(this,qn,xCe).call(this),suggesting:()=>pe(this,qn,v$).call(this)};r[n]&&r[n]()}setTrackedChangesPreferences(n){var i,s;const r=n&&Object.keys(n).length?{...n}:void 0;this.config.layoutEngineOptions||(this.config.layoutEngineOptions={}),this.config.layoutEngineOptions.trackedChanges=r,(s=(i=this.superdocStore)==null?void 0:i.documents)==null||s.forEach(o=>{const a=typeof o.getPresentationEditor=="function"?o.getPresentationEditor():null;a!=null&&a.setTrackedChangesOverrides&&a.setTrackedChangesOverrides(r)})}search(n){var r;return(r=this.activeEditor)==null?void 0:r.commands.search(n)}goToSearchResult(n){var r;return(r=this.activeEditor)==null?void 0:r.commands.goToSearchResult(n)}setLocked(n=!0){this.config.documents.forEach(r=>{const i=r.ydoc.getMap("meta");r.ydoc.transact(()=>{i.set("locked",n),i.set("lockedBy",this.user)})})}getHTML(n={}){const r=[];return this.superdocStore.documents.forEach(i=>{const s=i.getEditor();s&&r.push(s)}),r.map(i=>i.getHTML(n))}lockSuperdoc(n=!1,r){this.isLocked=n,this.lockedBy=r,pe(this,qn,Kd).call(this," [superdoc] Locking superdoc:",n,r,`


`),this.emit("locked",{isLocked:n,lockedBy:r})}async export({exportType:n=["docx"],commentsType:r="external",exportedName:i,additionalFiles:s=[],additionalFileNames:o=[],isFinalDoc:a=!1,triggerDownload:l=!0,fieldsHighlightColor:c=null}={}){const u=Rle(i||this.config.title),d=await this.exportEditorsToDOCX({commentsType:r,isFinalDoc:a,fieldsHighlightColor:c}),f=[...s],h=[...o];if(n.includes("docx")&&d.forEach(y=>{f.push(y),h.push(`${u}.docx`)}),f.length===1)return l?Ile(f[0],u,n[0]):f[0];const m=await CMt(f,h);return l?Ile(m,u,"zip"):m}async exportEditorsToDOCX({commentsType:n,isFinalDoc:r,fieldsHighlightColor:i}={}){const s=[];n!=="clean"&&this.commentsStore&&typeof this.commentsStore.translateCommentsForExport=="function"&&s.push(...this.commentsStore.translateCommentsForExport());const o=this.superdocStore.documents.map(async l=>{if(!l||l.type!==Ko)return null;const c=typeof l.getEditor=="function"?l.getEditor():null,u=()=>!l.data||l.data.type&&l.data.type!==Ko?null:l.data;if(!c)return u();try{const d=await c.exportDocx({isFinalDoc:r,comments:s,commentsType:n,fieldsHighlightColor:i});if(d)return d}catch(d){this.emit("exception",{error:d,document:l})}return u()});return(await Promise.all(o)).filter(Boolean)}async save(){const n=[pe(this,qn,ECe).call(this)];pe(this,qn,Kd).call(this," [superdoc] Saving superdoc");const r=await Promise.all(n);return pe(this,qn,Kd).call(this," [superdoc] Save complete:",r),r}destroy(){je(this,xk,!0),pe(this,qn,S$).call(this),this.app&&(pe(this,qn,Kd).call(this,"[superdoc] Unmounting app"),this.superdocStore.reset(),this.app.unmount(),this.removeAllListeners(),delete this.app.config.globalProperties.$config,delete this.app.config.globalProperties.$superdoc)}focus(){this.activeEditor?this.activeEditor.focus():this.superdocStore.documents.find(n=>{const r=n.getEditor();r&&r.focus()})}setHighContrastMode(n){this.activeEditor&&(this.activeEditor.setHighContrastMode(n),this.highContrastModeStore.setHighContrastMode(n))}captureLayoutPipelineEvent(n){this.emit("layout-pipeline",n),typeof this.config.onLayoutPipelineEvent=="function"&&this.config.onLayoutPipelineEvent(n)}}xk=new WeakMap,qn=new WeakSet,pCe=async function(n){var i;this.config={...this.config,...n},!this.config.comments||typeof this.config.comments!="object"?this.config.comments={visible:!1}:typeof this.config.comments.visible!="boolean"&&(this.config.comments.visible=!1),!this.config.trackChanges||typeof this.config.trackChanges!="object"?this.config.trackChanges={visible:!1}:typeof this.config.trackChanges.visible!="boolean"&&(this.config.trackChanges.visible=!1);const r=this.config.user;if(!r||typeof r!="object"?this.config.user={...BP}:(this.config.user={...BP,...r},this.config.user.name||(this.config.user.name=BP.name)),this.config.layoutEngineOptions||(this.config.layoutEngineOptions={}),!this.config.layoutEngineOptions.trackedChanges){const s=this.config.documentMode==="viewing",o=s&&((i=this.config.trackChanges)==null?void 0:i.visible)===!0;this.config.layoutEngineOptions.trackedChanges={mode:s?o?"review":"original":"review",enabled:!0}}if(this.config.modules=this.config.modules||{},Object.prototype.hasOwnProperty.call(this.config.modules,"comments")||(this.config.modules.comments={}),this.config.colors=RMt(this.config.colors),this.userColorMap=new Map,this.colorIndex=0,this.version="1.4.0",pe(this,qn,Kd).call(this," [superdoc] Using SuperDoc version:",this.version),this.superdocId=n.superdocId||Ts(),this.colors=this.config.colors,pe(this,qn,gCe).call(this),await pe(this,qn,wCe).call(this,this.config.modules),F(this,xk)){pe(this,qn,S$).call(this);return}if(this.config.cspNonce&&pe(this,qn,mCe).call(this),pe(this,qn,yCe).call(this),pe(this,qn,bCe).call(this),this.user=this.config.user,this.users=this.config.users||[],this.socket=null,this.isDev=this.config.isDev||!1,this.activeEditor=null,this.comments=[],!this.config.selector)throw new Error("SuperDoc: selector is required");this.app.mount(this.config.selector),this.readyEditors=0,this.isLocked=this.config.isLocked||!1,this.lockedBy=this.config.lockedBy||null,pe(this,qn,vCe).call(this)},mCe=function(){const n=this.config.cspNonce,r=document.createElement;document.createElement=function(i){const s=r.call(this,i);return i.toLowerCase()==="style"&&s.setAttribute("nonce",n),s}},gCe=function(){var l,c;const n=this.config.document,r=!!n&&typeof n=="object"&&((l=Object.keys(this.config.document))==null?void 0:l.length),i=!!n&&typeof n=="string"&&n.length>0,s=!!n&&typeof File=="function"&&n instanceof File,o=!!n&&n instanceof Blob&&!(n instanceof File),a=this.config.documents&&((c=this.config.documents)==null?void 0:c.length);if(r&&a&&console.warn(" [superdoc] You can only provide one of document or documents"),r){const u=PS(this.config.document);this.config.documents=[{id:Ts(),...u}]}else if(i)this.config.documents=[{id:Ts(),type:Ko,url:this.config.document,name:"document.docx",isNewFile:!0}];else if(s){const u=PS(this.config.document);this.config.documents=[{id:Ts(),...u}]}else if(o){const u=PS(this.config.document);this.config.documents=[{id:Ts(),...u}]}Array.isArray(this.config.documents)&&this.config.documents.length>0&&(this.config.documents=this.config.documents.map(u=>{const d=PS(u);if(!d||typeof d!="object")return d;const f=typeof d=="object"&&"id"in d&&d.id||u&&typeof u=="object"&&"id"in u&&u.id;return{...d,id:f||Ts()}}))},yCe=function(){const{app:n,pinia:r,superdocStore:i,commentsStore:s,highContrastModeStore:o}=QOt();this.app=n,this.pinia=r,this.app.config.globalProperties.$config=this.config,this.app.config.globalProperties.$documentMode=this.config.documentMode,this.app.config.globalProperties.$superdoc=this,this.superdocStore=i,this.commentsStore=s,this.highContrastModeStore=o,typeof this.superdocStore.setExceptionHandler=="function"&&this.superdocStore.setExceptionHandler(l=>this.emit("exception",l)),this.superdocStore.init(this.config);const a=this.config.modules.comments;this.commentsStore.init(a&&a!==!1?a:{}),pe(this,qn,E$).call(this)},bCe=function(){this.on("editorBeforeCreate",this.config.onEditorBeforeCreate),this.on("editorCreate",this.config.onEditorCreate),this.on("editorDestroy",this.config.onEditorDestroy),this.on("ready",this.config.onReady),this.on("comments-update",this.config.onCommentsUpdate),this.on("awareness-update",this.config.onAwarenessUpdate),this.on("locked",this.config.onLocked),this.on("pdf-document-ready",this.config.onPdfDocumentReady),this.on("sidebar-toggle",this.config.onSidebarToggle),this.on("collaboration-ready",this.config.onCollaborationReady),this.on("editor-update",this.config.onEditorUpdate),this.on("content-error",this.onContentError),this.on("exception",this.config.onException),this.on("list-definitions-change",this.config.onListDefinitionsChange),this.config.onFontsResolved&&this.on("fonts-resolved",this.config.onFontsResolved)},wCe=async function({collaboration:n,comments:r={}}={}){if(!n)return this.config.documents;this.isCollaborative=!0;const{ydoc:i,provider:s}=n;if(i&&s)return this.ydoc=i,this.provider=s,ZDt(s,this,this.config.user),(!this.config.documents||this.config.documents.length===0)&&(this.config.documents=[{id:Ts(),type:Ko,name:"document.docx"}]),this.config.documents.forEach(a=>{a.ydoc=i,a.provider=s,a.role=this.config.role}),Tle(this),this.config.documents;n.providerType==="hocuspocus"&&(this.config.socket=new kke({url:n.url}));const o=t8t(this);if(r.useInternalExternalComments&&!r.suppressInternalExternalComments){const{ydoc:a,provider:l}=e8t(this);this.ydoc=a,this.provider=l}else this.ydoc=o[0].ydoc,this.provider=o[0].provider;return Tle(this),o},Kd=function(...n){(console.debug?console.debug:console.log)("  [superdoc]",...n)},vCe=function(){var s,o,a,l,c,u,d,f,h,m,y,w,b,E,A,x,T,R,k;const n=((s=this.config.modules)==null?void 0:s.toolbar)||{};this.toolbarElement=((a=(o=this.config.modules)==null?void 0:o.toolbar)==null?void 0:a.selector)||this.config.toolbar,this.toolbar=null;const r=[...n.excludeItems||[]];this.config.rulers||r.push("ruler");const i={selector:this.toolbarElement||null,isDev:this.isDev||!1,toolbarGroups:((c=(l=this.config.modules)==null?void 0:l.toolbar)==null?void 0:c.groups)||this.config.toolbarGroups,role:this.config.role,icons:((d=(u=this.config.modules)==null?void 0:u.toolbar)==null?void 0:d.icons)||this.config.toolbarIcons,texts:((h=(f=this.config.modules)==null?void 0:f.toolbar)==null?void 0:h.texts)||this.config.toolbarTexts,fonts:((y=(m=this.config.modules)==null?void 0:m.toolbar)==null?void 0:y.fonts)||null,hideButtons:((b=(w=this.config.modules)==null?void 0:w.toolbar)==null?void 0:b.hideButtons)??!0,responsiveToContainer:((A=(E=this.config.modules)==null?void 0:E.toolbar)==null?void 0:A.responsiveToContainer)??!1,documentMode:this.config.documentMode,superdoc:this,aiApiKey:(T=(x=this.config.modules)==null?void 0:x.ai)==null?void 0:T.apiKey,aiEndpoint:(k=(R=this.config.modules)==null?void 0:R.ai)==null?void 0:k.endpoint,uiDisplayFallbackFont:this.config.uiDisplayFallbackFont,...n,excludeItems:r};this.toolbar=new i$(i),this.toolbar.on("superdoc-command",this.onToolbarCommand.bind(this)),this.toolbar.on("exception",this.config.onException),this.once("editorCreate",()=>this.toolbar.updateToolbarState())},Q6=function(n,r){const i=typeof n.getPresentationEditor=="function"?n.getPresentationEditor():null;if(i){i.setDocumentMode(r);return}const s=typeof n.getEditor=="function"?n.getEditor():null;s&&s.setDocumentMode(r)},xCe=function(){var n;if(this.config.role!=="editor")return pe(this,qn,v$).call(this);if(this.superdocStore.documents.length>0){const r=(n=this.superdocStore.documents[0])==null?void 0:n.getEditor();r&&this.setActiveEditor(r)}this.setTrackedChangesPreferences({mode:"review",enabled:!0}),this.superdocStore.documents.forEach(r=>{r.restoreComments(),pe(this,qn,Q6).call(this,r,"editing")}),this.toolbar&&(this.toolbar.documentMode="editing",this.toolbar.updateToolbarState())},v$=function(){var n;if(!["editor","suggester"].includes(this.config.role))return pe(this,qn,x$).call(this);if(this.superdocStore.documents.length>0){const r=(n=this.superdocStore.documents[0])==null?void 0:n.getEditor();r&&this.setActiveEditor(r)}this.setTrackedChangesPreferences({mode:"review",enabled:!0}),this.superdocStore.documents.forEach(r=>{r.restoreComments(),pe(this,qn,Q6).call(this,r,"suggesting")}),this.toolbar&&(this.toolbar.documentMode="suggesting",this.toolbar.updateToolbarState())},x$=function(){var i,s,o,a;this.toolbar.activeEditor=null;const n=((i=this.config.comments)==null?void 0:i.visible)===!0,r=((s=this.config.trackChanges)==null?void 0:s.visible)===!0;this.setTrackedChangesPreferences(r?{mode:"review",enabled:!0}:{mode:"original",enabled:!0}),!n&&!r&&((a=(o=this.commentsStore)==null?void 0:o.clearEditorCommentPositions)==null||a.call(o)),this.superdocStore.documents.forEach(l=>{n||r?l.restoreComments():l.removeComments(),pe(this,qn,Q6).call(this,l,"viewing")}),this.toolbar&&(this.toolbar.documentMode="viewing",this.toolbar.updateToolbarState())},E$=function(){var a,l,c,u;const n=((a=this.config.comments)==null?void 0:a.visible)===!0,r=((l=this.config.trackChanges)==null?void 0:l.visible)===!0,i=this.config.documentMode==="viewing",s=n||r;(c=this.commentsStore)!=null&&c.setViewingVisibility&&this.commentsStore.setViewingVisibility({documentMode:this.config.documentMode,commentsVisible:n,trackChangesVisible:r});const o=(u=this.superdocStore)==null?void 0:u.documents;Array.isArray(o)&&o.length>0&&o.forEach(d=>{const f=typeof d.getPresentationEditor=="function"?d.getPresentationEditor():null;f!=null&&f.setViewingCommentOptions&&f.setViewingCommentOptions({emitCommentPositionsInViewing:i&&s,enableCommentsInViewing:i&&n})})},ECe=async function(){return pe(this,qn,Kd).call(this," [superdoc] Triggering collaboration saves"),new Promise(n=>{this.superdocStore.documents.forEach((r,i)=>{if(pe(this,qn,Kd).call(this,`Before reset - Doc ${i}: pending = ${this.pendingCollaborationSaves}`),this.pendingCollaborationSaves=0,r.ydoc){this.pendingCollaborationSaves++,pe(this,qn,Kd).call(this,`After increment - Doc ${i}: pending = ${this.pendingCollaborationSaves}`);const s=r.ydoc.getMap("meta");s.observe(o=>{o.changes.keys.has("immediate-save-finished")&&(this.pendingCollaborationSaves--,this.pendingCollaborationSaves<=0&&n())}),s.set("immediate-save",!0)}}),pe(this,qn,Kd).call(this,`FINAL pending = ${this.pendingCollaborationSaves}, but we have ${this.superdocStore.documents.filter(r=>r.ydoc).length} docs!`)})},S$=function(){var n,r,i,s,o,a;(n=this.config.socket)==null||n.cancelWebsocketRetry(),(r=this.config.socket)==null||r.disconnect(),(i=this.config.socket)==null||i.destroy(),(s=this.ydoc)==null||s.destroy(),(o=this.provider)==null||o.disconnect(),(a=this.provider)==null||a.destroy(),this.config.documents.forEach(l=>{var c,u,d;(c=l.provider)==null||c.disconnect(),(u=l.provider)==null||u.destroy(),(d=l.ydoc)==null||d.destroy()})},Mt(hCe,"allowedTypes",[Ko,vb,IM]);const SCe=({fileUrl:t,planId:e,planTitle:n,onClose:r,onSaveSuccess:i,collectionName:s,storageFolder:o="plans"})=>{const a=De.useRef(null),l=De.useRef(null),c=De.useRef(null),[u,d]=De.useState(!0),[f,h]=De.useState(!1),[m,y]=De.useState(null),[w,b]=De.useState(null),[E,A]=De.useState(!1),{user:x}=Bl();De.useEffect(()=>{(async()=>{if(x)try{const N=Bn(Kt,"users",x.id),L=await Ku(N);L.exists()&&L.data().signatureUrl&&b(L.data().signatureUrl)}catch(N){console.error("Error fetching signature:",N)}})()},[x]);const T=_=>{try{const L=decodeURIComponent(_).match(/\/o\/(.+?)\?/);return L&&L[1]?Rl(Ya,L[1]):Rl(Ya,_)}catch{return null}};De.useEffect(()=>((async()=>{if(!(!a.current||!l.current))try{d(!0),y(null);let N;const L=T(t);if(L)try{N=await WOe(L)}catch(C){console.log("getBlob failed, trying fetch...",C);const D=await fetch(t,{mode:"cors"});if(!D.ok)throw new Error("Khng th ti file");N=await D.blob()}else{const C=await fetch(t);if(!C.ok)throw new Error("Khng th ti file");N=await C.blob()}const M=new File([N],`${n}.docx`,{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});c.current=new hCe({selector:"#superdoc-editor",toolbar:"#superdoc-toolbar",document:M,documentMode:"editing",rulers:!0,onReady:()=>{console.log("SuperDoc is ready"),d(!1)},onError:C=>{console.error("SuperDoc error:",C),y("Li khi khi to trnh son tho"),d(!1)}})}catch(N){console.error("Error initializing SuperDoc:",N),y("Khng th ti file. Vui lng th li."),d(!1)}})(),()=>{var N,L;if(c.current)try{(L=(N=c.current).destroy)==null||L.call(N)}catch(M){console.log("SuperDoc cleanup:",M)}}),[t,n]);const R=async()=>{if(c.current){h(!0);try{const _=await c.current.exportDocx();if(!_)throw new Error("Khng th xut file");const N=Date.now(),L=n.replace(/[^a-zA-Z0-9]/g,"_"),M=`${o}/${N}_${L}.docx`,C=Rl(Ya,M);await Qc(C,_,{contentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});const D=await eu(C),O=Bn(Kt,s,e);await Qi(O,{url:D,lastModified:new Date().toISOString()}),console.log("Saved successfully:",D),i(D),h(!1),r()}catch(_){console.error("Error saving:",_),h(!1),alert("Li khi lu file: "+_.message)}}},k=async()=>{if(!w||!c.current){alert("Bn cha c ch k. Vui lng vo Thng tin ti khon  ti ln ch k.");return}A(!0);try{const N=await(await fetch(w)).blob(),L=new FileReader;L.onloadend=()=>{var C;const M=L.result;(C=c.current)!=null&&C.insertImage?c.current.insertImage(M,{width:150,height:60}):(console.log("insertImage method not available, trying alternative"),alert("Chc nng chn ch k ang c cp nht.")),A(!1)},L.onerror=()=>{console.error("Error reading signature image"),alert("Li khi chn ch k!"),A(!1)},L.readAsDataURL(N)}catch(_){console.error("Error inserting signature:",_),alert("Li khi chn ch k!"),A(!1)}};return v.jsxs("div",{className:"fixed inset-0 z-[70] flex flex-col bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md flex-shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:u?v.jsx(Vu,{className:"h-6 w-6 animate-spin"}):v.jsx(sr,{className:"h-6 w-6"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"font-semibold text-lg",children:n}),v.jsx("p",{className:"text-xs text-blue-100 opacity-80",children:"SuperDoc Editor"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("button",{onClick:k,disabled:E||u||!w,className:`px-4 py-2 rounded font-medium flex items-center gap-2 transition-colors disabled:opacity-50 ${w?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:w?"Chn ch k vo v tr con tr":"Bn cha c ch k. Vui lng vo Thng tin ti khon  ti ln.",children:[E?v.jsx(Vu,{className:"h-4 w-4 animate-spin"}):v.jsx(Uo,{className:"h-4 w-4"}),"Chn ch k"]}),v.jsxs("button",{onClick:R,disabled:f||u,className:"px-4 py-2 bg-white text-blue-700 rounded hover:bg-blue-50 font-medium flex items-center gap-2 transition-colors disabled:opacity-50",children:[f?v.jsx(Vu,{className:"h-4 w-4 animate-spin"}):v.jsx(l2,{className:"h-4 w-4"}),f?"ang lu...":"Lu li"]}),v.jsx("button",{onClick:r,className:"p-2 hover:bg-blue-500 rounded-full transition-colors",title:"ng editor",children:v.jsx(hs,{className:"h-6 w-6"})})]})]}),v.jsx("div",{id:"superdoc-toolbar",ref:l,className:"border-b border-gray-200 bg-gray-50 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 relative",children:[u&&v.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:[v.jsx(Vu,{className:"h-12 w-12 text-blue-500 animate-spin mb-4"}),v.jsx("p",{className:"text-gray-600 font-medium",children:"ang ti ti liu..."})]}),m&&v.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white z-10",children:[v.jsx("div",{className:"p-4 bg-red-100 rounded-full mb-4",children:v.jsx(hs,{className:"h-12 w-12 text-red-500"})}),v.jsx("p",{className:"text-red-600 font-medium mb-4",children:m}),v.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"ng"})]}),v.jsx("div",{id:"superdoc-editor",ref:a,className:"h-full w-full",style:{minHeight:"100%"}})]})]})},r9t=()=>{var Ft,tn,Zt,ri,Ne,le,fe;const t=fu(),{user:e}=Bl(),{addToast:n}=bd(),[r,i]=Qle(),[s,o]=De.useState(null),[a,l]=De.useState(!1),[c,u]=De.useState(null),[d,f]=De.useState([]),[h,m]=De.useState([]);De.useEffect(()=>{const ve=No(Ai(Kt,"plans"),m2("uploadDate","desc")),He=Of(ve,Xe=>{const it=[],Lt=[];Xe.forEach(Bt=>{const Wt=Bt.data(),Jt={id:Bt.id,...Wt};Wt.type==="plan"?it.push(Jt):Lt.push(Jt)}),f(it),m(Lt)});return()=>He()},[]),De.useEffect(()=>{const ve=r.get("fileId"),He=r.get("highlight");if(ve&&He==="true"){o(ve);const Xe=d.find(Bt=>Bt.id===ve),it=h.find(Bt=>Bt.id===ve),Lt=Xe||it;if(Lt){w(Lt),E(!0);const Bt=document.getElementById(`file-${ve}`);Bt&&Bt.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{o(null)},3e3),i({},{replace:!0})}}},[r,d,h,i]);const[y,w]=De.useState(null),[b,E]=De.useState(!1),[A,x]=De.useState(!1),[T,R]=De.useState(""),k=De.useRef(null),[_,N]=De.useState(null),[L,M]=De.useState(""),[C,D]=De.useState(!1),[O,$]=De.useState(null),[U,W]=De.useState(!1),[ce,se]=De.useState(null),[Q,J]=De.useState({type:"plan",name:"",date:"",status:"draft"}),[K,re]=De.useState(!1),[X,me]=De.useState(null),[G,B]=De.useState(!1),[z,de]=De.useState(null),[Y,ee]=De.useState(""),[ae,ie]=De.useState(!1),[H,be]=De.useState(null),Te=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="vice_head_teacher"||(e==null?void 0:e.role)==="teacher",Z=ve=>{if(!e)return!1;const He=ve,Xe=He.uploaderId&&He.uploaderId===e.id,it=ve.uploader===e.fullName;return Xe||it},oe=ve=>{var Lt,Bt;if(!e)return!1;const He=Z(ve),Xe=((Lt=ve.approval)==null?void 0:Lt.status)==="needs_revision",it=(((Bt=ve.comments)==null?void 0:Bt.length)||0)>0;return He&&(Xe||it)},te=ve=>{const He=ve,Xe=He.fileType,it=He.url||"",Lt=it.includes(".docx")||it.includes(".doc"),Bt=Xe==="word"||Xe==="docx"||Lt;return console.log("[isWordFile] Checking:",{fileType:Xe,url:it.substring(0,50)+"...",hasWordExtension:Lt,result:Bt}),Bt},ye=(ve,He)=>{He.stopPropagation(),be(ve),ie(!0)},ke=()=>{n("Lu thnh cng","Ti liu  c cp nht.","success")},we=ve=>e?["principal","admin"].includes(e.role):!1,Ae=async ve=>{if(e)try{const He=Bn(Kt,"plans",ve.id);await Qi(He,{approval:{status:"approved",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString()}}),n(" duyt",` duyt h s "${ve.title}".`,"success"),await Vc("system",e,{type:"group",name:` duyt: ${ve.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:ve.uploaderId}})}catch(He){console.error("Error approving plan:",He),n("Li","Khng th duyt h s. Vui lng th li.","error")}},Re=async ve=>{if(!(!e||ve.uploaderId!==e.id)&&window.confirm("Bn c chc chn mun CHT bin bn ny? Sau khi cht s hin th trng thi ' cht'."))try{const He=Bn(Kt,"plans",ve.id);await Qi(He,{status:"finalized"}),n(" cht bin bn","Bin bn hp  c chuyn sang trng thi  cht.","success")}catch(He){console.error("Error finalizing minute:",He),n("Li","Khng th cht bin bn. Vui lng th li.","error")}},Pe=ve=>{de(ve),ee(""),B(!0)},Ce=async()=>{if(!(!e||!z))try{const ve=Bn(Kt,"plans",z.id),He={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:Y||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},Xe={status:"needs_revision",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString(),rejectionReason:Y};await Qi(ve,{approval:Xe,comments:px(He),commentCount:(z.commentCount||0)+1}),y&&y.id===z.id&&w({...y,approval:Xe,comments:[...y.comments||[],He],commentCount:(y.commentCount||0)+1}),n(" gi yu cu sa",` yu cu sa li h s "${z.title}".`,"success"),await Vc("comment",e,{type:"group",name:`Yu cu sa: ${z.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${z.id}&highlight=true`,extraInfo:{uploaderId:z.uploaderId}}),B(!1),de(null),ee("")}catch(ve){console.error("Error requesting revision:",ve),n("Li","Khng th gi yu cu sa. Vui lng th li.","error")}};De.useEffect(()=>{var ve;b&&((ve=k.current)==null||ve.scrollIntoView({behavior:"smooth"}))},[b,y]);const Oe=ve=>{w(ve),E(!0)},Fe=ve=>{if(!e)return!1;const He=ve,Xe=He.uploaderId&&He.uploaderId===e.id,it=ve.uploader===e.fullName;return Xe||it},$e=(ve,He)=>{He.stopPropagation(),me(ve),re(!0)},he=async()=>{if(X&&!Fe(X)){n("Khng c quyn","Bn khng th xa ti liu ca ngi khc.","error"),re(!1);return}if(X)try{await sw(Bn(Kt,"plans",X.id)),n(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),re(!1),me(null),(y==null?void 0:y.id)===X.id&&(E(!1),w(null))}catch(ve){console.error("Error deleting document: ",ve),n("Li","Khng th xa h s. Vui lng th li.","error")}},q=async ve=>{var Xe;if(ve.preventDefault(),!T.trim()||!y||!e||!oe(y))return;const He={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:T,timestamp:new Date().toISOString(),type:"response"};try{const it=Bn(Kt,"plans",y.id);await Qi(it,{approval:{...y.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:px(He),commentCount:(y.commentCount||0)+1}),R(""),n(" gi phn hi","Phn hi ca bn  c gi. H s chuyn sang trng thi ch duyt.","success");const Lt=(Xe=y.approval)==null?void 0:Xe.reviewerId;Lt&&Lt!==e.id&&await Vc("comment",e,{type:"group",name:`Phn hi t ${e.fullName}: ${y.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${y.id}&highlight=true`,extraInfo:{uploaderId:Lt}})}catch(it){console.error("Error adding response: ",it),n("Li","Khng th gi phn hi.","error")}},ne=ve=>{$(ve),D(!0)},Ee=async()=>{var ve,He;if(!(!e||!O||!y))try{const Xe=Bn(Kt,"plans",y.id),it=y.comments.filter(Jt=>Jt.id!==O.id),Lt={comments:it,commentCount:it.length};let Bt=(ve=y.approval)==null?void 0:ve.status,Wt=(He=y.approval)==null?void 0:He.rejectionReason;O.type==="request"&&Bt==="needs_revision"&&(Bt="pending",Wt=void 0,Lt["approval.status"]="pending",Lt["approval.rejectionReason"]=m7(),n(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),await Qi(Xe,Lt),y&&w({...y,comments:it,commentCount:it.length,approval:{...y.approval,status:Bt,rejectionReason:Wt}}),n(" xa","Ni dung  c xa.","success"),D(!1),$(null)}catch(Xe){console.error("Error deleting comment:",Xe),n("Li","Khng th xa ni dung.","error")}},Se=ve=>{u(ve),l(!0)},ze=async()=>{if(c)try{const ve=Bn(Kt,"plans",c.id);await Qi(ve,{"approval.status":"pending","approval.rejectionReason":m7(),"approval.reviewedAt":new Date().toISOString()}),y&&y.id===c.id&&w({...y,approval:{...y.approval,status:"pending",rejectionReason:void 0}}),n(" hon tc","Yu cu sa  c xa.","success"),l(!1),u(null)}catch(ve){console.error("Error deleting active revision:",ve),n("Li","Khng th xa yu cu.","error")}},Ie=async ve=>{var Xe,it;const He=prompt("Nhp ni dung yu cu sa mi:",(Xe=ve.approval)==null?void 0:Xe.rejectionReason);if(!(He===null||He===((it=ve.approval)==null?void 0:it.rejectionReason))){if(!He.trim()){alert("Ni dung khng c  trng!");return}try{const Lt=Bn(Kt,"plans",ve.id);await Qi(Lt,{"approval.rejectionReason":He,"approval.reviewedAt":new Date().toISOString()}),y&&y.id===ve.id&&w({...y,approval:{...y.approval,rejectionReason:He}}),n("Thnh cng"," cp nht yu cu sa.","success")}catch(Lt){console.error("Error editing active revision:",Lt),n("Li","Khng th cp nht yu cu.","error")}}},qe=async(ve,He)=>{if(!(!e||!L.trim()))try{const Xe=Bn(Kt,"plans",He.id),it=He.comments.map(Lt=>Lt.id===ve?{...Lt,content:L,editedAt:new Date().toISOString()}:Lt);await Qi(Xe,{comments:it}),n(" cp nht","Gp   c chnh sa.","success"),N(null),M(""),await Vc("comment",e,{type:"group",name:` sa gp : ${He.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:He.uploaderId}})}catch(Xe){console.error("Error editing comment:",Xe),n("Li","Khng th chnh sa gp .","error")}},Ye=ve=>{N(ve.id),M(ve.content)},ft=()=>{J({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),se(null),W(!0)},We=ve=>{if(ve.preventDefault(),ve.dataTransfer.files&&ve.dataTransfer.files[0]){const He=ve.dataTransfer.files[0];se(He),Q.name||J(Xe=>({...Xe,name:He.name.split(".")[0]}))}},nt=ve=>{if(ve.target.files&&ve.target.files[0]){const He=ve.target.files[0];se(He),Q.name||J(Xe=>({...Xe,name:He.name.split(".")[0]}))}},bt=async()=>{if(!(!ce&&!Q.name))try{let ve="#",He="word";if(ce){const it=Rl(Ya,`plans/${Date.now()}_${ce.name}`);await Qc(it,ce),ve=await eu(it),He=ce.name.endsWith("pdf")?"pdf":"word"}const Xe={...Q,title:Q.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploaderId:(e==null?void 0:e.id)||"",uploaderRole:(e==null?void 0:e.role)||"teacher",uploadDate:new Date().toISOString(),viewers:[],commentCount:0,comments:[],fileType:He,url:ve,approval:{status:"pending"}};await ow(Ai(Kt,"plans"),Xe),n("Ti ln thnh cng",` lu h s: ${Q.name} (${Q.type==="plan"?"K hoch":"Bin bn"})`,"success"),W(!1),e&&await Vc("upload",e,{type:"group",name:Q.name,targetPath:"/to-chuyen-mon-ke-hoach"})}catch(ve){console.error("Error adding document: ",ve),n("Li","Khng th lu h s. Vui lng th li.","error")}},ct=(ve=!1)=>{if(!y)return null;const He=y.url;if(He&&He!=="#"){const Xe=g2(He);return Xe==="EXCEL_NO_PREVIEW"?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[v.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:v.jsx(sr,{className:"h-16 w-16 text-green-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),v.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),v.jsxs("a",{href:He,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[v.jsx(hc,{className:"h-5 w-5"}),"Ti xung file"]})]}):v.jsx("div",{className:"w-full h-full",children:v.jsx("iframe",{src:Xe,className:"w-full h-full border-0",title:"Document Preview"})})}else return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return v.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[v.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[v.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>t("/"),children:"Dashboard"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/"),children:[v.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:v.jsx(sr,{className:"h-6 w-6"})}),"H s T Chuyn Mn"]}),v.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),Te&&v.jsxs("button",{onClick:ft,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-5 py-2.5 rounded-lg shadow-md transition-all font-medium",children:[v.jsx(So,{className:"h-4 w-4"}),v.jsx("span",{children:"Ti ln Bin bn/K hoch"})]})]})]})}),v.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10 pb-20",children:[v.jsxs("section",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),v.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",v.jsx(Hu,{className:"h-3 w-3"})]})]}),v.jsxs("div",{className:"grid gap-4",children:[d.map(ve=>{var He,Xe,it,Lt,Bt;return v.jsx("div",{id:`file-${ve.id}`,onClick:()=>Oe(ve),className:`bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition-all cursor-pointer group
                           ${s===ve.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-100 hover:border-orange-200"}
                        `,children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:v.jsx(sr,{className:"h-6 w-6"})}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors",children:ve.title}),((He=ve.approval)==null?void 0:He.status)==="pending"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase",children:[v.jsx(T_,{className:"h-3 w-3"})," Ch duyt"]}),((Xe=ve.approval)==null?void 0:Xe.status)==="approved"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[v.jsx(Fm,{className:"h-3 w-3"}),"  duyt"]}),(((it=ve.approval)==null?void 0:it.status)==="rejected"||((Lt=ve.approval)==null?void 0:Lt.status)==="needs_revision")&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-orange-100 text-orange-700 uppercase",title:ve.approval.rejectionReason,children:[v.jsx(Uo,{className:"h-3 w-3"})," Cn sa"]})]}),v.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(vv,{className:"h-3 w-3"})," ",ve.uploader]}),v.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(T_,{className:"h-3 w-3"})," ",new Date(ve.uploadDate).toLocaleDateString("vi-VN")]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[we()&&((Bt=ve.approval)==null?void 0:Bt.status)==="pending"&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:Wt=>{Wt.stopPropagation(),Ae(ve)},className:"px-3 py-1.5 text-xs font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[v.jsx(Fm,{className:"h-3.5 w-3.5"})," Duyt"]}),v.jsxs("button",{onClick:Wt=>{Wt.stopPropagation(),Pe(ve)},className:"px-3 py-1.5 text-xs font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[v.jsx(Uo,{className:"h-3.5 w-3.5"})," Yu cu sa"]})]}),v.jsxs("div",{className:"flex -space-x-2",children:[ve.viewers.map((Wt,Jt)=>v.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs font-medium text-gray-600",children:Wt},Jt)),ve.viewers.length>0&&v.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[10px] text-gray-400",children:"+"})]}),v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[v.jsx(RA,{className:"h-4 w-4"}),v.jsx("span",{className:"text-xs font-medium",children:ve.commentCount})]})})]})]})},ve.id)}),d.length===0&&v.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400",children:[v.jsx(sr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"Cha c k hoch no."]})]})]}),v.jsxs("section",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp T"}),v.jsx("div",{className:"flex gap-2",children:v.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded-md text-gray-500 hover:text-orange-600 shadow-sm",children:v.jsx(N6e,{className:"h-4 w-4"})})})]}),v.jsxs("div",{className:"relative border-l-2 border-gray-200 ml-3 md:ml-6 space-y-8 pb-4",children:[h.map(ve=>{var He,Xe,it,Lt,Bt,Wt,Jt;return v.jsxs("div",{className:"relative pl-8 md:pl-10",children:[v.jsx("div",{className:"absolute -left-[9px] top-0 h-5 w-5 rounded-full bg-white border-4 border-orange-200"}),v.jsx("div",{className:"absolute -left-2 top-7 md:top-1 md:-left-24 w-20 md:text-right",children:v.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(ve.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})}),v.jsxs("div",{id:`file-${ve.id}`,onClick:()=>Oe(ve),className:`bg-white rounded-lg border p-4 hover:shadow-md transition-all cursor-pointer group relative pr-10
                              ${s===ve.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-200 hover:border-orange-300"}
                           `,children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ve.status==="finalized"?v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[v.jsx(Fm,{className:"h-3 w-3"}),"  cht"]}):v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 uppercase animate-pulse",children:[v.jsx(Nl,{className:"h-3 w-3"})," ang tho lun"]}),((He=ve.approval)==null?void 0:He.status)==="pending"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-50 text-amber-600 border border-amber-200",children:[v.jsx(T_,{className:"h-3 w-3"})," Ch duyt"]}),((Xe=ve.approval)==null?void 0:Xe.status)==="approved"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-50 text-green-600 border border-green-200",children:[v.jsx(Fm,{className:"h-3 w-3"}),"  duyt"]}),(((it=ve.approval)==null?void 0:it.status)==="rejected"||((Lt=ve.approval)==null?void 0:Lt.status)==="needs_revision")&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-orange-50 text-orange-600 border border-orange-200",title:ve.approval.rejectionReason,children:[v.jsx(Uo,{className:"h-3 w-3"})," Cn sa"]})]}),we()&&((Bt=ve.approval)==null?void 0:Bt.status)==="pending"&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:qt=>{qt.stopPropagation(),Ae(ve)},className:"px-2 py-1 text-[10px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[v.jsx(Fm,{className:"h-3 w-3"})," Duyt"]}),v.jsxs("button",{onClick:qt=>{qt.stopPropagation(),Pe(ve)},className:"px-2 py-1 text-[10px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[v.jsx(Uo,{className:"h-3 w-3"})," Yu cu sa"]})]})]}),v.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3 group-hover:text-orange-700",children:ve.title}),(((Wt=ve.approval)==null?void 0:Wt.status)==="rejected"||((Jt=ve.approval)==null?void 0:Jt.status)==="needs_revision")&&ve.approval.rejectionReason&&v.jsxs("div",{className:"mb-3 text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded border border-orange-100",children:[v.jsx("span",{className:"font-semibold",children:"Yu cu sa:"})," ",ve.approval.rejectionReason]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-100 group-hover:bg-orange-50 group-hover:border-orange-100 transition-colors",children:[ve.fileType==="word"?v.jsx(sr,{className:"h-4 w-4 text-blue-600"}):v.jsx(M$,{className:"h-4 w-4 text-red-500"}),v.jsxs("span",{className:"text-xs text-gray-600 font-medium truncate max-w-[150px]",children:["Bien_ban_hop_",ve.date,".",ve.fileType==="word"?"docx":"pdf"]})]}),v.jsxs("span",{className:"text-xs font-bold text-orange-600 opacity-0 group-hover:opacity-100 transition-opacity flex items-center",children:["Chi tit ",v.jsx(Hu,{className:"h-3 w-3"})]})]}),v.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[Fe(ve)&&ve.status!=="finalized"&&v.jsx("button",{onClick:qt=>{qt.stopPropagation(),Re(ve)},className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Cht bin bn",children:v.jsx(Sb,{className:"h-4 w-4"})}),Fe(ve)&&v.jsx("button",{onClick:qt=>$e(ve,qt),className:"p-1.5 text-gray-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa ti liu",children:v.jsx(Xo,{className:"h-4 w-4"})})]})]})]},ve.id)}),h.length===0&&v.jsx("div",{className:"pl-10 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})]})]}),K&&X&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',X.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>re(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:he,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),G&&z&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6",children:[v.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Uo,{className:"h-8 w-8 text-amber-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu sa li?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn ang yu cu chnh sa cho ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',z.title,'"']})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:Y,onChange:ve=>ee(ve.target.value)})]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>{B(!1),de(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsxs("button",{onClick:Ce,disabled:!Y.trim(),className:"px-4 py-2 text-sm font-bold text-white bg-amber-500 rounded-lg hover:bg-amber-600 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx(ix,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),b&&y&&v.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[v.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>E(!1)}),v.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-start bg-orange-50/30 flex-shrink-0",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-1 block",children:y.type==="plan"?"K hoch":"Bin bn hp"}),v.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:y.title})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[y&&te(y)&&Z(y)&&v.jsxs("button",{onClick:ve=>ye(y,ve),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors flex items-center gap-1",title:"Chnh sa file Word",children:[v.jsx(Uo,{className:"h-5 w-5"}),v.jsx("span",{className:"text-xs font-medium hidden md:inline",children:"Chnh sa"})]}),y.type==="minute"&&Fe(y)&&y.status!=="finalized"&&v.jsxs("button",{onClick:()=>Re(y),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex items-center gap-1",title:"Cht bin bn",children:[v.jsx(Sb,{className:"h-5 w-5"}),v.jsx("span",{className:"text-xs font-medium hidden md:inline",children:"Cht"})]}),v.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-5 w-5"})}),Fe(y)&&v.jsx("button",{onClick:ve=>$e(y,ve),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti liu",children:v.jsx(Xo,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>E(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:v.jsx(hs,{className:"h-5 w-5"})})]})]}),v.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[v.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[v.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:v.jsx("button",{onClick:()=>x(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-orange-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:v.jsx(S4,{className:"h-4 w-4"})})}),v.jsx("div",{className:"flex-1 w-full h-full",children:ct(!1)})]}),v.jsxs("div",{className:"w-full md:w-96 bg-gray-50 border-l border-gray-200 flex flex-col h-1/2 md:h-full flex-shrink-0",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:y.author||"Khng r"})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(y.uploadDate||y.createdAt||Date.now()).toLocaleDateString("vi-VN")})]})]}),v.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 shadow-sm flex items-center gap-2",children:[v.jsx(RA,{className:"h-5 w-5 text-gray-500"}),v.jsx("h3",{className:"font-bold text-gray-800",children:"Lch s Yu cu & Phn hi"})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 font-sans",children:[((Ft=y.approval)==null?void 0:Ft.status)==="needs_revision"&&((tn=y.approval)==null?void 0:tn.rejectionReason)&&!((Zt=y.comments)!=null&&Zt.length&&y.comments[y.comments.length-1].type==="request"&&y.comments[y.comments.length-1].content===y.approval.rejectionReason)&&v.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 group relative",children:v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsxs("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1 flex items-center gap-1",children:[v.jsx(Nl,{className:"h-3 w-3"})," Yu cu sa hin ti"]}),v.jsx("p",{className:"text-sm text-amber-900",children:y.approval.rejectionReason})]}),we()&&v.jsxs("div",{className:"flex gap-1 ml-2",children:[v.jsx("button",{onClick:()=>Ie(y),className:"p-1 text-amber-700 hover:bg-amber-100 rounded transition-colors",title:"Sa ni dung yu cu",children:v.jsx(Uo,{className:"h-3 w-3"})}),v.jsx("button",{onClick:()=>Se(y),className:"p-1 text-amber-700 hover:bg-amber-100 hover:text-red-600 rounded transition-colors",title:"Hy b yu cu ny",children:v.jsx(Xo,{className:"h-3 w-3"})})]})]})}),!y.comments||y.comments.length===0?v.jsxs("div",{className:"text-center py-10 text-gray-400",children:[v.jsx("div",{className:"bg-gray-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:v.jsx(sc,{className:"h-6 w-6 text-gray-300"})}),v.jsx("p",{className:"text-sm",children:"Cha c lch s chnh sa no."})]}):y.comments.map(ve=>v.jsxs("div",{className:`flex gap-3 ${ve.type==="response"?"flex-row-reverse":""}`,children:[v.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold text-white shadow-sm
                                          ${ve.type==="request"?"bg-amber-500":"bg-blue-500"}
                                       `,children:ve.userName.charAt(0)}),v.jsx("div",{className:"flex-1 max-w-[85%] space-y-1",children:v.jsxs("div",{className:`p-3 rounded-2xl shadow-sm text-sm relative group
                                             ${ve.type==="request"?"bg-amber-50 border border-amber-100 text-gray-800 rounded-tl-none":ve.type==="response"?"bg-blue-50 border border-blue-100 text-gray-800 rounded-tr-none":"bg-white border border-gray-200 text-gray-600"}
                                          `,children:[v.jsxs("div",{className:"flex justify-between items-start mb-1",children:[v.jsxs("span",{className:`text-xs font-bold ${ve.type==="request"?"text-amber-700":"text-blue-700"}`,children:[ve.userName,ve.type==="request"&&v.jsx("span",{className:"ml-1 text-[10px] bg-amber-200 px-1 rounded text-amber-800",children:"Yu cu sa"})]}),ve.userId===(e==null?void 0:e.id)&&v.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity absolute right-2 top-2 bg-white/50 rounded-lg p-0.5 backdrop-blur-sm",children:[v.jsx("button",{onClick:()=>Ye(ve),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",title:"Sa",children:v.jsx(Uo,{className:"h-3 w-3"})}),v.jsx("button",{onClick:()=>ne(ve),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",title:"Xa",children:v.jsx(Xo,{className:"h-3 w-3"})})]})]}),_===ve.id?v.jsxs("div",{className:"mt-2",children:[v.jsx("textarea",{className:"w-full text-sm border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none",value:L,onChange:He=>M(He.target.value),rows:2}),v.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[v.jsx("button",{onClick:()=>N(null),className:"text-xs px-2 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Hy"}),v.jsx("button",{onClick:()=>qe(ve.id,y),className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lu"})]})]}):v.jsx("p",{className:"whitespace-pre-wrap",children:ve.content}),v.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[new Date(ve.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," - ",new Date(ve.timestamp).toLocaleDateString("vi-VN"),ve.editedAt&&v.jsx("span",{className:"italic ml-1",children:"( sa)"})]})]})})]},ve.id)),v.jsx("div",{ref:k})]}),v.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:((ri=y.approval)==null?void 0:ri.status)==="needs_revision"&&oe(y)?v.jsxs("form",{onSubmit:q,className:"flex gap-2 relative",children:[v.jsx("input",{type:"text",value:T,onChange:ve=>R(ve.target.value),placeholder:"Nhp phn hi/gii trnh ca bn...",className:"flex-1 bg-gray-50 border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all shadow-sm"}),v.jsx("button",{type:"submit",disabled:!T.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-4 py-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center justify-center",children:v.jsx(ix,{className:"h-5 w-5"})})]}):((Ne=y.approval)==null?void 0:Ne.status)==="pending"&&we()?v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>Ae(y),className:"flex-1 bg-green-500 hover:bg-green-600 text-white rounded-xl px-4 py-3 font-bold shadow-sm transition-all flex items-center justify-center gap-2",children:[v.jsx(Fm,{className:"h-5 w-5"})," Duyt ngay"]}),v.jsxs("button",{onClick:()=>Pe(y),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white rounded-xl px-4 py-3 font-bold shadow-sm transition-all flex items-center justify-center gap-2",children:[v.jsx(Uo,{className:"h-5 w-5"})," Yu cu sa"]})]}):v.jsx("div",{className:"text-center text-xs text-gray-500 bg-gray-50 p-2 rounded-lg border border-dashed border-gray-200",children:((le=y.approval)==null?void 0:le.status)==="approved"?"H s  c duyt. Khng th chnh sa thm.":!oe(y)&&((fe=y.approval)==null?void 0:fe.status)==="needs_revision"?"ang ch tc gi phn hi...":"H s ang ch x l."})})]})]})]})]}),U&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[v.jsx(So,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),v.jsx("button",{onClick:()=>W(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsxs("div",{className:"p-6 space-y-5",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[v.jsx("button",{onClick:()=>J({...Q,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${Q.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),v.jsx("button",{onClick:()=>J({...Q,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${Q.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:Q.name,onChange:ve=>J({...Q,name:ve.target.value})})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Q.type==="minute"?"Ngy hp":"Thi gian p dng"}),v.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:Q.date,onChange:ve=>J({...Q,date:ve.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),v.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:Q.status,onChange:ve=>J({...Q,status:ve.target.value}),children:[v.jsx("option",{value:"draft",children:" ang tho lun"}),v.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),v.jsxs("div",{onDrop:We,onDragOver:ve=>ve.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${ce?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[v.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:nt,accept:".pdf,.doc,.docx"}),ce?v.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[v.jsx(sc,{className:"h-10 w-10 text-orange-600 mb-2"}),v.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:ce.name}),v.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(ce.size/1024).toFixed(0)," KB -  sn sng"]})]}):v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:v.jsx(E4,{className:"h-8 w-8"})}),v.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",v.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{onClick:bt,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[v.jsx(So,{className:"h-4 w-4"})," Lu h s"]})]})]})}),ae&&H&&v.jsx(SCe,{fileUrl:H.url,planId:H.id,planTitle:H.title,collectionName:"plans",storageFolder:"plans",onClose:()=>{ie(!1),be(null)},onSaveSuccess:ke}),C&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Xo,{className:"h-6 w-6 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xa gp ?"}),v.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Bn c chc chn mun xa gp  ny khng? Hnh ng ny khng th hon tc."}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:Ee,className:"px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa gp "})]})]})})}),a&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-6 w-6 text-amber-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hy yu cu sa?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa yu cu sa ny? ",v.jsx("br",{}),"H s s quay v trng thi ",v.jsx("span",{className:"font-bold text-blue-600",children:"'Ch duyt'"}),"."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Khng xa"}),v.jsx("button",{onClick:ze,className:"px-4 py-2 text-sm font-bold text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors",children:"ng  xa"})]})]})})})]})},i9t=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],A$=()=>{const t=new Date,e=t.getMonth()+1,n=t.getFullYear();return e>=9?n:n-1},Mle=()=>{const t=A$(),e=t+1;return[{id:"m9",name:`Thng 09/${t}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${t}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${t}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${t}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${e}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${e}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${e}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${e}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${e}`,fileCount:0,files:[]}]},Lle=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],s9t=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],o9t=()=>{var He,Xe,it,Lt,Bt,Wt,Jt,qt;const{classId:t}=U5e(),e=fu(),[n,r]=Qle(),{user:i}=Bl(),{addToast:s}=bd(),[o,a]=De.useState(null),l=(et,Ze,Ue)=>{if(!et)return!1;const at=Hn=>Hn.toLowerCase().trim().replace(/\s+/g," "),vt=at(et),Dt=at(Ze),$t=Ue?at(Ue):"";return vt===Dt||vt===$t||$t&&vt.includes($t)||$t&&$t.includes(vt)?!0:(console.log("[matchesClassScope] No match:",{scope:et,classId:Ze,className:Ue,normalizedScope:vt,normalizedName:$t}),!1)},[c,u]=De.useState(null),[d,f]=De.useState(Mle()),[h,m]=De.useState([]),[y,w]=De.useState(!0),[b,E]=De.useState("students"),[A,x]=De.useState("week"),[T,R]=De.useState("m11"),[k,_]=De.useState("all"),[N,L]=De.useState(""),[M,C]=De.useState(null),[D,O]=De.useState(!1),[$,U]=De.useState(!1),[W,ce]=De.useState(""),se=De.useRef(null),[Q,J]=De.useState(!1),[K,re]=De.useState(null),[X,me]=De.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[G,B]=De.useState(!1),[z,de]=De.useState(null),[Y,ee]=De.useState(!1),[ae,ie]=De.useState(null),[H,be]=De.useState(""),[Te,Z]=De.useState(!1),[oe,te]=De.useState(null),[ye,ke]=De.useState(null),[we,Ae]=De.useState(!1),[Re,Pe]=De.useState(null),Ce=et=>{if(!i)return!1;const Ze=et,Ue=Ze.uploaderId&&Ze.uploaderId===i.id,at=Ze.uploader===i.fullName;return Ue||at},Oe=et=>{const Ze=et,Ue=Ze.type,at=Ze.url||"",vt=at.includes(".docx")||at.includes(".doc");return Ue==="word"||Ue==="docx"||vt},Fe=(et,Ze)=>{Ze.stopPropagation(),te(et),Z(!0)},$e=()=>{s("Lu thnh cng","Ti liu  c cp nht.","success")},he=et=>{var dn,bn,sn,Jn,Rn;if(!i)return!1;const Ze=et,Ue=Ze.uploaderId===i.id,at=((dn=Ze.uploader)==null?void 0:dn.toLowerCase())===((bn=i.fullName)==null?void 0:bn.toLowerCase()),vt=Ue||at,Dt=((sn=Ze.approval)==null?void 0:sn.status)==="needs_revision",$t=(((Jn=Ze.comments)==null?void 0:Jn.length)||0)>0,Hn=vt&&(Dt||$t);return console.log("[canRespond]",{fileName:et.name,uploaderId:Ze.uploaderId,userId:i.id,uploader:Ze.uploader,userFullName:i.fullName,isOwnerById:Ue,isOwnerByName:at,isOwner:vt,approvalStatus:(Rn=Ze.approval)==null?void 0:Rn.status,hasComments:$t,result:Hn}),Hn},q=et=>{var at,vt;if(!i)return!1;const Ze=et.uploaderId===i.id,Ue=((at=et.uploader)==null?void 0:at.toLowerCase())===((vt=i.fullName)==null?void 0:vt.toLowerCase());return Ze||Ue},ne=et=>i?et.userId===i.id:!1,Ee=async()=>{if(!(!ye||!M||!i))try{const et=Bn(Kt,"class_files",M.id),Ue=(M.comments||[]).map(at=>at.id===ye.id?{...at,content:ye.content,editedAt:new Date().toISOString()}:at);await Qi(et,{comments:Ue}),C({...M,comments:Ue}),ke(null),s(" cp nht gp ","Ni dung gp   c lu.","success")}catch(et){console.error("Error editing comment:",et),s("Li","Khng th cp nht gp .","error")}},Se=async()=>{var et,Ze;if(!(!Re||!M||!i))try{const Ue=Bn(Kt,"class_files",M.id),vt=(M.comments||[]).filter(dn=>dn.id!==Re.id),Dt={comments:vt,commentCount:vt.length,hasNewComments:vt.length>0};let $t=(et=M.approval)==null?void 0:et.status,Hn=(Ze=M.approval)==null?void 0:Ze.rejectionReason;Re.type==="request"&&$t==="needs_revision"&&($t="pending",Hn=void 0,Dt["approval.status"]="pending",Dt["approval.rejectionReason"]=m7(),s(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),Re.type==="response"&&vt.some(bn=>bn.type==="request")&&$t==="pending"&&($t="needs_revision",Dt["approval.status"]="needs_revision",s(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Qi(Ue,Dt),C({...M,comments:vt,commentCount:vt.length,hasNewComments:vt.length>0,approval:{...M.approval,status:$t,rejectionReason:Hn}}),Ae(!1),Pe(null),s(" xa gp ","Gp   c xa thnh cng.","success")}catch(Ue){console.error("Error deleting comment:",Ue),s("Li","Khng th xa gp .","error")}},ze=et=>{if(!i)return!1;const Ze=et.uploaderRole;return Ze&&["head_teacher","vice_head_teacher"].includes(i.role)?Ze==="teacher":!1},Ie=et=>{let Ze=[...et];if(N.trim()){const Ue=N.toLowerCase().trim();Ze=Ze.filter(at=>{var vt,Dt;return((vt=at.name)==null?void 0:vt.toLowerCase().includes(Ue))||((Dt=at.uploader)==null?void 0:Dt.toLowerCase().includes(Ue))})}switch(k){case"new":const Ue=new Date;Ue.setDate(Ue.getDate()-7),Ze=Ze.filter(at=>new Date(at.date)>=Ue).sort((at,vt)=>new Date(vt.date).getTime()-new Date(at.date).getTime());break;case"unread":Ze=Ze.filter(at=>at.comments&&at.comments.length>0||at.hasNewComments);break;case"all":default:Ze=Ze.sort((at,vt)=>new Date(vt.date).getTime()-new Date(at.date).getTime());break}return Ze},qe=async et=>{if(i)try{const Ze=Bn(Kt,"class_files",et.id);await Qi(Ze,{approval:{status:"approved",reviewerId:i.id,reviewerName:i.fullName,reviewerRole:i.role,reviewedAt:new Date().toISOString()}}),s(" duyt h s",`H s "${et.name}"  c ph duyt.`,"success");const Ue=`/class/${t}`;await Vc("system",i,{type:"class",name:` duyt: ${et.name}`,targetPath:Ue,extraInfo:{uploaderId:et.uploaderId}})}catch(Ze){console.error("Error approving file:",Ze),s("Li","Khng th duyt h s. Vui lng th li.","error")}},Ye=et=>{ie(et),be(""),ee(!0)},ft=async()=>{if(!(!i||!ae))try{const et=Bn(Kt,"class_files",ae.id),Ze={id:Date.now().toString(),userId:i.id,userName:i.fullName,userRole:i.role,content:H||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},Ue={status:"needs_revision",reviewerId:i.id,reviewerName:i.fullName,reviewerRole:i.role,reviewedAt:new Date().toISOString(),rejectionReason:H};await Qi(et,{approval:Ue,comments:px(Ze),commentCount:(ae.commentCount||0)+1}),M&&M.id===ae.id&&C({...M,approval:Ue,comments:[...M.comments||[],Ze],commentCount:(M.commentCount||0)+1}),s(" gi yu cu sa",` yu cu sa li h s "${ae.name}".`,"success");const at=`/class/${t}?fileId=${ae.id}&highlight=true`;await Vc("comment",i,{type:"class",name:`Yu cu sa: ${ae.name}`,targetPath:at,extraInfo:{uploaderId:ae.uploaderId,classId:t}}),ee(!1),ie(null),be("")}catch(et){console.error("Error requesting revision:",et),s("Li","Khng th gi yu cu sa. Vui lng th li.","error")}},We=async et=>{var Ue;if(et.preventDefault(),!W.trim()||!M||!i||!he(M))return;const Ze={id:Date.now().toString(),userId:i.id,userName:i.fullName,userRole:i.role,content:W,timestamp:new Date().toISOString(),type:"response"};try{const at=Bn(Kt,"class_files",M.id);await Qi(at,{approval:{...M.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:px(Ze),commentCount:(M.commentCount||0)+1}),C({...M,approval:{...M.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:[...M.comments||[],Ze],commentCount:(M.commentCount||0)+1}),ce(""),s(" gi phn hi","Phn hi  c gi. H s chuyn sang trng thi ch duyt.","success");const vt=(Ue=M.approval)==null?void 0:Ue.reviewerId;if(vt&&vt!==i.id){const Dt=`/class/${t}?fileId=${M.id}&highlight=true`;await Vc("comment",i,{type:"class",name:`Phn hi t ${i.fullName}: ${M.name}`,targetPath:Dt,extraInfo:{uploaderId:vt}})}}catch(at){console.error("Error adding response:",at),s("Li","Khng th gi phn hi.","error")}};if(De.useEffect(()=>{if(!t)return;(async()=>{try{const Ze=Bn(Kt,"classes",t),Ue=await Ku(Ze);let at=null,vt=[];if(Ue.exists())at=Ue.data();else{console.warn("Class not found in Firestore, checking Mock...");const Dt=i9t.find($t=>$t.id===t);Dt&&(at=Dt)}if(at){console.log("[ClassRecords] Class data loaded:",{classId:t,className:at.name,currentUser:i==null?void 0:i.fullName,userScope:i==null?void 0:i.accessScope,userRole:i==null?void 0:i.role});const Dt=$t=>$t.toLowerCase().trim().replace(/\s+/g," ");try{const $t=No(Ai(Kt,"users"),au("role","in",["teacher","head_teacher","vice_head_teacher"])),dn=(await Xu($t)).docs.map(Rn=>Rn.data()),bn=new Set,sn=Dt(t),Jn=Dt(at.name);dn.forEach(Rn=>{if(!Rn.accessScope)return;const lt=Dt(Rn.accessScope);(lt===sn||lt===Jn||Jn.includes(lt)||lt.includes(Jn))&&bn.add(Rn.fullName)}),vt=Array.from(bn),console.log("[ClassRecords] Found teachers from DB:",vt),vt.length===0&&(console.warn("[ClassRecords] No teacher found for class:",t),vt=["Cha phn cng"])}catch($t){console.error("Error fetching teacher details:",$t),vt=["Cha phn cng"]}u({id:t,...at,teachers:vt,teacher:vt.join(", ")})}}catch(Ze){console.error("Error fetching class:",Ze)}finally{w(!1)}})()},[t]),De.useEffect(()=>{if(!t)return;const et=No(Ai(Kt,"class_files"),au("classId","==",t)),Ze=Of(et,Ue=>{const at=Ue.docs.map($t=>({id:$t.id,...$t.data()}));m(at),console.log("[ClassRecords] Fetched files from Firestore:",at.length),at.forEach($t=>console.log(`  - ${$t.name} | month: "${$t.month}" | type: ${$t.planType}`));const Dt=Mle().map($t=>{const Hn=at.filter(dn=>{if((dn.category||"plan")!=="plan")return!1;let sn=!1;const Jn=$t.id.replace("m",""),Rn=String(dn.month||"").replace("m","");return parseInt(Jn,10)===parseInt(Rn,10)&&(sn=!0),!!sn});return{...$t,files:Hn,fileCount:Hn.length}});console.log("[ClassRecords] Grouped files into folders:",Dt.map($t=>`${$t.name}: ${$t.fileCount} files`)),f(Dt)});return()=>Ze()},[t]),De.useEffect(()=>{!i||y||i.role==="teacher"&&c&&!l(i.accessScope,t,c.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:i.accessScope,classId:t,className:c.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[i,t,e,c,y]),De.useEffect(()=>{const et=n.get("fileId"),Ze=n.get("highlight");if(console.log("[ClassRecords] URL Params:",{fileId:et,highlight:Ze,allFilesCount:h.length}),et&&h.length>0){const Ue=h.find(at=>at.id===et);if(Ue){console.log("[ClassRecords] Found target file:",Ue.name,"category:",Ue.category);const at=Ue.category||"plan";at==="plan"?(E("plan"),x("week")):at==="assessment"?E("assessment"):at==="students"?E("students"):at==="steam"&&E("steam");const vt=d.find(Dt=>Dt.files.some($t=>$t.id===et));if(vt&&(console.log("[ClassRecords] Auto-expanding folder:",vt.id),R(vt.id)),Ze==="true"){a(et);const Dt=setTimeout(()=>{a(null)},3e3);return C(Ue),O(!0),r({},{replace:!0}),()=>clearTimeout(Dt)}}else console.warn("[ClassRecords] File not found:",et)}},[n,r,d,h]),y)return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!c)return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),v.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const nt=((i==null?void 0:i.role)==="teacher"||(i==null?void 0:i.role)==="head_teacher"||(i==null?void 0:i.role)==="vice_head_teacher")&&l(i.accessScope,t,c==null?void 0:c.name);console.log("[ClassRecords] Upload permission:",{canUpload:nt,userRole:i==null?void 0:i.role,userScope:i==null?void 0:i.accessScope,classId:t,className:c==null?void 0:c.name});const bt=(et,Ze)=>{Ze.stopPropagation(),C(et),O(!0)},ct=(et,Ze,Ue)=>{Ue.stopPropagation(),de({file:et,folderId:Ze}),B(!0)},Ft=async()=>{if(z)try{console.log("[DELETE] Attempting to delete file:",{fileId:z.file.id,fileName:z.file.name,classId:t}),await sw(Bn(Kt,"class_files",z.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),s(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(et){console.error("[DELETE] Error deleting file:",et),console.error("[DELETE] Error code:",et.code),console.error("[DELETE] Error message:",et.message);let Ze="Vui lng th li sau.";et.code==="permission-denied"&&(Ze="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),s("Li khi xa ti liu",Ze,"error")}finally{B(!1),de(null)}},tn=et=>{R(T===et?null:et)},Zt=et=>{switch(et){case"word":return v.jsx(sr,{className:"h-5 w-5 text-blue-600"});case"excel":return v.jsx(sr,{className:"h-5 w-5 text-green-600"});case"pdf":return v.jsx(sr,{className:"h-5 w-5 text-red-600"});default:return v.jsx(sr,{className:"h-5 w-5 text-gray-400"})}},ri=()=>{me({area:b,planType:A,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),re(null),J(!0)},Ne=et=>{if(et.preventDefault(),et.dataTransfer.files&&et.dataTransfer.files[0]){const Ze=et.dataTransfer.files[0];re(Ze),X.name||me(Ue=>({...Ue,name:Ze.name.split(".")[0]}))}},le=et=>{if(et.target.files&&et.target.files[0]){const Ze=et.target.files[0];re(Ze),X.name||me(Ue=>({...Ue,name:Ze.name.split(".")[0]}))}},fe=async()=>{var et,Ze;if(!(!K||!X.name||!i))try{const Ue=Rl(Ya,`class-files/${t}/${Date.now()}_${K.name}`);await Qc(Ue,K);const at=await eu(Ue),vt={name:X.name,type:((et=K.name.split(".").pop())==null?void 0:et.toLowerCase())||"other",url:at,uploader:i.fullName,uploaderId:i.id,uploaderRole:i.role,date:new Date().toISOString(),classId:t,month:X.month,monthName:((Ze=Lle.find(Dt=>Dt.value===X.month))==null?void 0:Ze.label)||"Thng khc",hasNewComments:!1,commentCount:0,comments:[],createdAt:fLe(),planType:X.planType,week:X.week,category:X.area,approval:{status:"pending"}};await ow(Ai(Kt,"class_files"),vt),s("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),Vc("upload",i,{type:"class",name:X.name,targetPath:`/class/${t}`,extraInfo:{classId:t}}),J(!1)}catch(Ue){console.error("Error uploading file:",Ue),s("Li khi ti ln","Vui lng th li sau.","error")}},ve=(et=!1)=>{if(!M)return null;if(M.url&&M.url!=="#"){const Ze=g2(M.url);return Ze==="EXCEL_NO_PREVIEW"?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[v.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:v.jsx(sr,{className:"h-16 w-16 text-green-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),v.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),v.jsxs("a",{href:M.url,download:M.name,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[v.jsx(hc,{className:"h-5 w-5"}),"Ti xung file"]})]}):v.jsx("div",{className:"w-full h-full",children:v.jsx("iframe",{src:Ze,className:"w-full h-full border-0",title:"Document Preview"})})}else return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[v.jsx(sr,{className:"h-16 w-16 mb-4 text-gray-400"}),v.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),v.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return v.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[v.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[v.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[v.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),v.jsx(Hu,{className:"h-3 w-3"}),v.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),v.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[v.jsxs("div",{className:"flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>e("/"),children:[v.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm",children:v.jsx("span",{className:"text-2xl font-bold text-amber-600",children:((He=c==null?void 0:c.name)==null?void 0:He.split(" ").pop())||"?"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(c==null?void 0:c.name)||"Lp hc"}),v.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(rce,{className:"h-4 w-4"})," GVCN:"]}),c!=null&&c.teachers&&c.teachers.length>1?v.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.teachers.map((et,Ze)=>v.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:et},Ze))}):v.jsx("span",{className:"font-semibold text-gray-700",children:(c==null?void 0:c.teacher)||"Cha cp nht"})]})]})]}),nt&&v.jsxs("button",{onClick:ri,className:"flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-xl shadow-md shadow-amber-200 transition-all font-bold transform hover:-translate-y-0.5",children:[v.jsx(So,{className:"h-5 w-5"}),v.jsx("span",{children:"Ti ln h s lp"})]})]})]}),v.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:v.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[v.jsxs("button",{onClick:()=>E("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${b==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[v.jsx(aY,{className:"h-4 w-4"}),"DANH SCH LP",b==="students"&&v.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),v.jsxs("button",{onClick:()=>E("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${b==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[v.jsx(sr,{className:"h-4 w-4"}),"K HOCH GIO DC",b==="plan"&&v.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),v.jsxs("button",{onClick:()=>E("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${b==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[v.jsx(nY,{className:"h-4 w-4"}),"NH GI TR",b==="assessment"&&v.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),v.jsxs("button",{onClick:()=>E("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${b==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[v.jsx(sY,{className:"h-4 w-4"}),"D N STEAM",b==="steam"&&v.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),v.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>_("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${k==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),v.jsx("button",{onClick:()=>_("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${k==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),v.jsxs("button",{onClick:()=>_("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${k==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[v.jsx(Xy,{className:"h-3 w-3"})," C gp "]})]}),v.jsxs("div",{className:"relative",children:[v.jsx(tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),v.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",value:N,onChange:et=>L(et.target.value),className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),b==="plan"&&v.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[v.jsx("button",{onClick:()=>x("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),v.jsx("button",{onClick:()=>x("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),v.jsx("button",{onClick:()=>x("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),v.jsxs("div",{className:"space-y-4",children:[b==="plan"&&v.jsxs(v.Fragment,{children:[A==="year"&&v.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[v.jsx(oY,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",A$()," - ",A$()+1]}),(()=>{let et=d.flatMap(Ze=>Ze.files).filter(Ze=>Ze.planType==="year");return et=Ie(et),et.length===0?v.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:et.map(Ze=>v.jsxs("div",{onClick:Ue=>bt(Ze,Ue),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Zt(Ze.type),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-bold text-gray-800 truncate",children:Ze.name}),v.jsx("p",{className:"text-xs text-gray-500",children:new Date(Ze.date).toLocaleDateString("vi-VN")})]}),v.jsx("button",{onClick:Ue=>ct(Ze,"year",Ue),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:v.jsx(Xo,{className:"h-4 w-4"})})]},Ze.id))})})()]}),(A==="month"||A==="week")&&v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(et=>{let Ze=et.files.filter(vt=>A==="month"?vt.planType==="month":A==="week"?vt.planType==="week"||!vt.planType:!1);Ze=Ie(Ze);const Ue=Ze.length,at=T===et.id;return v.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[v.jsxs("div",{onClick:()=>tn(et.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${at?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`p-3 rounded-lg ${at?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:v.jsx(oY,{className:"h-6 w-6"})}),v.jsxs("div",{children:[v.jsx("h3",{className:`font-bold ${at?"text-amber-900":"text-gray-700"}`,children:et.name}),v.jsxs("p",{className:"text-xs text-gray-500",children:[Ue," ",A==="month"?"K hoch thng":"K hoch tun"]})]})]}),v.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${at?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:v.jsx(Hu,{className:"h-5 w-5"})})]}),at&&v.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[Ze.map(vt=>{var Dt,$t,Hn,dn,bn,sn,Jn;return v.jsxs("div",{onClick:Rn=>{o===vt.id&&a(null),bt(vt,Rn)},className:`flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all ${o===vt.id?"border-red-400 bg-red-50 animate-pulse ring-2 ring-red-300":"border-gray-100"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[Zt(vt.type),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:vt.name}),((Dt=vt.approval)==null?void 0:Dt.status)==="pending"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700",children:[v.jsx(T_,{className:"h-2.5 w-2.5"})," Ch duyt"]}),(($t=vt.approval)==null?void 0:$t.status)==="approved"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700",children:[v.jsx(Fm,{className:"h-2.5 w-2.5"}),"  duyt"]}),((Hn=vt.approval)==null?void 0:Hn.status)==="needs_revision"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse",children:[v.jsx(uNe,{className:"h-2.5 w-2.5"})," Cn sa"]}),((dn=vt.approval)==null?void 0:dn.status)==="responded"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700",children:[v.jsx(Xy,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((bn=vt.approval)==null?void 0:bn.status)==="rejected"&&v.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700",title:vt.approval.rejectionReason,children:[v.jsx(tce,{className:"h-2.5 w-2.5"})," T chi"]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[v.jsx(Eb,{className:"h-3 w-3"})," ",new Date(vt.date).toLocaleDateString("vi-VN"),A==="week"&&vt.week&&v.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",vt.week]})]}),((sn=vt.approval)==null?void 0:sn.status)==="rejected"&&vt.approval.rejectionReason&&v.jsxs("div",{className:"mt-1 text-[10px] text-red-600",children:[v.jsx("span",{className:"font-semibold",children:"L do:"})," ",vt.approval.rejectionReason]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[ze(vt)&&((Jn=vt.approval)==null?void 0:Jn.status)==="pending"&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:Rn=>{Rn.stopPropagation(),qe(vt)},className:"px-2 py-1 text-[9px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[v.jsx(Fm,{className:"h-3 w-3"})," Duyt"]}),v.jsxs("button",{onClick:Rn=>{Rn.stopPropagation(),ie(vt),be(""),ee(!0)},className:"px-2 py-1 text-[9px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[v.jsx(Uo,{className:"h-3 w-3"})," Yu cu sa"]})]}),vt.hasNewComments&&v.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[v.jsx(Xy,{className:"h-3 w-3"}),"Gp  mi"]}),q(vt)&&v.jsx("button",{onClick:Rn=>ct(vt,et.id,Rn),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:v.jsx(Xo,{className:"h-4 w-4"})})]})]},vt.id)}),Ze.length===0&&v.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},et.id)})})]}),b==="students"&&v.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[v.jsx(aY,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{let et=h.filter(Ze=>Ze.category==="students");return et=Ie(et),console.log("[Student List Tab] Total files:",h.length,"Student files:",et.length),console.log("[Student List Tab] All file categories:",h.map(Ze=>({name:Ze.name,category:Ze.category}))),et.length===0?v.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:et.map(Ze=>v.jsxs("div",{onClick:Ue=>bt(Ze,Ue),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Zt(Ze.type),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-bold text-gray-800 truncate",children:Ze.name}),v.jsx("p",{className:"text-xs text-gray-500",children:new Date(Ze.date).toLocaleDateString("vi-VN")})]}),q(Ze)&&v.jsx("button",{onClick:Ue=>ct(Ze,"students",Ue),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:v.jsx(Xo,{className:"h-4 w-4"})})]},Ze.id))})})()]}),b==="assessment"&&v.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[v.jsx(nY,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),v.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),v.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),b==="steam"&&v.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[v.jsx(sY,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),v.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),v.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),D&&M&&v.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[v.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>O(!1)}),v.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-amber-50 flex-shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-white rounded-lg border border-amber-100 shadow-sm",children:Zt(M.type)}),v.jsxs("div",{children:[v.jsx("span",{className:"text-[10px] font-bold text-amber-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),v.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:M.name})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[M&&Oe(M)&&Ce(M)&&v.jsxs("button",{onClick:et=>Fe(M,et),className:"p-2 text-gray-500 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors flex items-center gap-1",title:"Chnh sa file Word",children:[v.jsx(Uo,{className:"h-5 w-5"}),v.jsx("span",{className:"text-xs font-medium hidden md:inline",children:"Chnh sa"})]}),v.jsx("a",{href:M.url,target:"_blank",rel:"noopener noreferrer",download:M.name,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:v.jsx(hc,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>O(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]})]}),v.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[v.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[v.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:v.jsx("button",{onClick:()=>U(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-amber-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:v.jsx(S4,{className:"h-4 w-4"})})}),v.jsx("div",{className:"flex-1 w-full h-full",children:ve(!1)})]}),v.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:M.uploader})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),v.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(M.date).toLocaleDateString("vi-VN")})]})]}),v.jsxs("div",{className:"w-full bg-gray-50 flex flex-col flex-1",children:[v.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 shadow-sm flex items-center gap-2",children:[v.jsx(RA,{className:"h-5 w-5 text-gray-500"}),v.jsx("h3",{className:"font-bold text-gray-800",children:"Lch s Yu cu & Phn hi"})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 font-sans",children:[((Xe=M.approval)==null?void 0:Xe.status)==="needs_revision"&&((it=M.approval)==null?void 0:it.rejectionReason)&&!((((Lt=M.comments)==null?void 0:Lt.length)||0)>0&&M.comments[M.comments.length-1].type==="request"&&M.comments[M.comments.length-1].content===M.approval.rejectionReason)&&v.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:[v.jsxs("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1 flex items-center gap-1",children:[v.jsx(Nl,{className:"h-3 w-3"})," Yu cu sa hin ti"]}),v.jsx("p",{className:"text-sm text-amber-900",children:M.approval.rejectionReason})]}),v.jsxs("div",{className:"space-y-4",children:[(M.comments||[]).length>0?(M.comments||[]).map(et=>{var Ze;return v.jsxs("div",{className:`flex gap-3 ${et.type==="response"?"flex-row-reverse":""}`,children:[v.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 text-white shadow-sm
                                          ${et.type==="request"?"bg-amber-500":et.type==="response"?"bg-blue-500":"bg-gray-400"}`,children:((Ze=et.userName)==null?void 0:Ze.charAt(0))||"U"}),v.jsx("div",{className:"flex-1 max-w-[85%] space-y-1",children:v.jsxs("div",{className:`p-3 rounded-2xl shadow-sm text-sm relative group
                                             ${et.type==="request"?"bg-amber-50 border border-amber-100 text-gray-800 rounded-tl-none":et.type==="response"?"bg-blue-50 border border-blue-100 text-gray-800 rounded-tr-none":"bg-white border border-gray-200 text-gray-600"}`,children:[v.jsxs("div",{className:"flex justify-between items-start mb-1",children:[v.jsxs("span",{className:`text-xs font-bold ${et.type==="request"?"text-amber-700":et.type==="response"?"text-blue-700":"text-gray-700"}`,children:[et.userName,et.type==="request"&&v.jsx("span",{className:"ml-1 text-[10px] bg-amber-200 px-1 rounded text-amber-800",children:"Yu cu sa"}),et.type==="response"&&v.jsx("span",{className:"ml-1 text-[10px] bg-blue-200 px-1 rounded text-blue-800",children:"Phn hi"})]}),ne(et)&&v.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity absolute right-2 top-2 bg-white/50 rounded-lg p-0.5 backdrop-blur-sm",children:[v.jsx("button",{onClick:()=>ke({id:et.id,content:et.content}),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",title:"Sa",children:v.jsx(Uo,{className:"h-3 w-3"})}),v.jsx("button",{onClick:()=>{Pe(et),Ae(!0)},className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",title:"Xa",children:v.jsx(Xo,{className:"h-3 w-3"})})]})]}),(ye==null?void 0:ye.id)===et.id?v.jsxs("div",{className:"space-y-2 mt-2",children:[v.jsx("textarea",{value:ye.content,onChange:Ue=>ke({...ye,content:Ue.target.value}),className:"w-full text-sm border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none",rows:2}),v.jsxs("div",{className:"flex gap-2 justify-end",children:[v.jsx("button",{onClick:()=>ke(null),className:"text-xs px-2 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Hy"}),v.jsx("button",{onClick:Ee,className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lu"})]})]}):v.jsx("p",{className:"whitespace-pre-wrap",children:et.content}),v.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[new Date(et.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," - ",new Date(et.timestamp).toLocaleDateString("vi-VN"),et.editedAt&&v.jsx("span",{className:"italic ml-1",children:"( sa)"})]})]})})]},et.id)}):v.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[v.jsx(sc,{className:"h-10 w-10 mb-2 opacity-50"}),v.jsx("span",{className:"text-xs italic",children:"Cha c lch s chnh sa no."})]}),v.jsx("div",{ref:se})]})]}),v.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:((Bt=M.approval)==null?void 0:Bt.status)==="needs_revision"&&he(M)?v.jsxs("form",{onSubmit:We,className:"flex gap-2 relative",children:[v.jsx("input",{type:"text",value:W,onChange:et=>ce(et.target.value),placeholder:"Nhp phn hi/gii trnh ca bn...",className:"flex-1 bg-gray-50 border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all shadow-sm"}),v.jsx("button",{type:"submit",disabled:!W.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-4 py-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center justify-center",children:v.jsx(ix,{className:"h-5 w-5"})})]}):((Wt=M.approval)==null?void 0:Wt.status)==="pending"&&ze(M)?v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>qe(M),className:"px-4 py-2 text-sm font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1.5",children:[v.jsx(sc,{className:"h-4 w-4"})," Duyt"]}),v.jsxs("button",{onClick:()=>Ye(M),className:"px-4 py-2 text-sm font-bold text-amber-600 bg-white border border-amber-300 hover:bg-amber-50 rounded-lg transition-colors shadow-sm flex items-center gap-1.5",children:[v.jsx(Uo,{className:"h-4 w-4"})," Yu cu sa li"]})]}):v.jsx("div",{className:"text-center text-xs text-gray-500 bg-gray-50 p-2 rounded-lg border border-dashed border-gray-200",children:((Jt=M.approval)==null?void 0:Jt.status)==="approved"?"H s  c duyt. Khng th chnh sa thm.":!he(M)&&((qt=M.approval)==null?void 0:qt.status)==="needs_revision"?"ang ch tc gi phn hi...":"H s ang ch x l."})})]})]})]})]})]}),$&&M&&v.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[v.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:v.jsx(sr,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:M.name}),v.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:v.jsx(T4,{className:"h-5 w-5"})}),v.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:v.jsx(A4,{className:"h-5 w-5"})}),v.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),v.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]})]}),v.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:ve(!0)})]}),G&&z&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Nl,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',z.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsx("button",{onClick:Ft,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),Y&&ae&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:v.jsxs("div",{className:"p-6",children:[v.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(Uo,{className:"h-8 w-8 text-amber-600"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu gio vin sa li?"}),v.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp yu cu chnh sa h s ",v.jsxs("span",{className:"font-semibold text-gray-800",children:['"',ae.name,'"']})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:H,onChange:et=>be(et.target.value)})]}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:()=>{ee(!1),ie(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),v.jsxs("button",{onClick:ft,disabled:!H.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx(ix,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),Q&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[v.jsx(So,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),v.jsx("button",{onClick:()=>J(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:v.jsx(hs,{className:"h-6 w-6"})})]}),v.jsxs("div",{className:"p-6 space-y-5",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),v.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(et=>v.jsx("button",{onClick:()=>me({...X,area:et.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${X.area===et.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:et.label},et.id))})]}),X.area==="plan"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),v.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(et=>v.jsx("button",{onClick:()=>me({...X,planType:et.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${X.planType===et.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:et.label},et.id))})]}),X.area!=="students"&&(X.area!=="plan"||X.planType!=="year")&&v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),v.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:X.month,onChange:et=>me({...X,month:et.target.value}),children:Lle.map(et=>v.jsx("option",{value:et.value,children:et.label},et.value))})]}),(X.area!=="plan"||X.planType==="week")&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),v.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:X.week,onChange:et=>me({...X,week:et.target.value}),children:s9t.map(et=>v.jsx("option",{value:et.value,children:et.label},et.value))})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[X.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:X.name,onChange:et=>me({...X,name:et.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),v.jsxs("div",{onDrop:Ne,onDragOver:et=>et.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${K?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[v.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:le}),K?v.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[v.jsx(sc,{className:"h-10 w-10 text-amber-600 mb-2"}),v.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:K.name}),v.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(K.size/1024).toFixed(0)," KB -  sn sng"]})]}):v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:v.jsx(E4,{className:"h-8 w-8"})}),v.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",v.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),v.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:X.note,onChange:et=>me({...X,note:et.target.value})})]})]}),v.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),v.jsxs("button",{onClick:fe,disabled:!K||!X.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx(So,{className:"h-4 w-4"})," Lu h s"]})]})]})}),we&&Re&&v.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 p-4 animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:v.jsx(Xo,{className:"h-6 w-6 text-red-500"})}),v.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Xa gp "}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."})]}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm text-gray-700 italic",children:['"',Re.content.substring(0,100),Re.content.length>100?"...":"",'"']}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>{Ae(!1),Pe(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Hy"}),v.jsx("button",{onClick:Se,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors",children:"Xa"})]})]})}),Te&&oe&&v.jsx(SCe,{fileUrl:oe.url,planId:oe.id,planTitle:oe.name,collectionName:"class_files",storageFolder:"class_files",onClose:()=>{Z(!1),te(null)},onSaveSuccess:$e})]})},a9t=()=>{const t=fu(),{login:e,isAuthenticated:n}=Bl();De.useEffect(()=>{n&&t("/")},[n,t]),De.useEffect(()=>{(async()=>{try{const A=Bn(Kt,"app_settings","login_background"),x=await Ku(A);x.exists()&&x.data().imageUrl&&w(x.data().imageUrl)}catch(A){console.error("Error fetching background:",A)}})()},[]);const[r,i]=De.useState(""),[s,o]=De.useState("");De.useEffect(()=>{(async()=>{try{const A=Bn(Kt,"app_settings","system_logo"),x=await Ku(A);x.exists()&&x.data().imageUrl&&i(x.data().imageUrl);const T=Bn(Kt,"app_settings","certification_logo"),R=await Ku(T);R.exists()&&R.data().imageUrl&&o(R.data().imageUrl)}catch(A){console.error("Error fetching logo:",A)}})()},[]);const[a,l]=De.useState(!1),[c,u]=De.useState(!1),[d,f]=De.useState(""),[h,m]=De.useState({username:"",password:""}),[y,w]=De.useState("/login-background.jpg"),b=async E=>{E.preventDefault(),u(!0),f("");const A=await e(h.username,h.password);u(!1),A||f("Tn ng nhp hoc mt khu khng ng.")};return v.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 z-0",children:v.jsx("img",{src:y,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),v.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:v.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:r?v.jsx("img",{src:r,alt:"Logo",className:"h-12 w-12 object-contain"}):v.jsx(L$,{className:"h-12 w-12 text-blue-900"})}),v.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:lce}),v.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),v.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),v.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),d&&v.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[v.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),d]}),v.jsxs("form",{onSubmit:b,className:"space-y-5",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(hp,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),v.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:h.username,onChange:E=>m({...h,username:E.target.value})})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Sb,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),v.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:h.password,onChange:E=>m({...h,password:E.target.value})}),v.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>l(!a),children:a?v.jsx(VP,{className:"h-5 w-5"}):v.jsx(IA,{className:"h-5 w-5"})})]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),v.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),v.jsx("div",{className:"text-sm",children:v.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),v.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:c?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):v.jsxs(v.Fragment,{children:["ng nhp",v.jsx(tN,{className:"h-4 w-4"})]})})]}),v.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[v.jsx(sce,{className:"h-3 w-3"}),v.jsxs("span",{children:["H tr k thut: ",v.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:v.jsx("div",{className:"text-center",children:v.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),s&&v.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:v.jsx("img",{src:s,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},l9t=()=>v.jsx(XOe,{children:v.jsx(JOe,{children:v.jsx(N_e,{children:v.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[v.jsx(t9e,{}),v.jsx("main",{className:"flex-grow",children:v.jsxs(s_e,{children:[v.jsx(Vd,{path:"/",element:v.jsx(r9e,{})}),v.jsx(Vd,{path:"/login",element:v.jsx(a9t,{})}),v.jsx(Vd,{path:"/van-ban-chi-dao",element:v.jsx(s9e,{})}),v.jsx(Vd,{path:"/van-ban-truong",element:v.jsx(o9e,{})}),v.jsx(Vd,{path:"/quan-tri-he-thong",element:v.jsx(l9e,{})}),v.jsx(Vd,{path:"/to-van-phong-ke-hoach",element:v.jsx(m9e,{})}),v.jsx(Vd,{path:"/to-van-phong-thuc-don",element:v.jsx(y9e,{})}),v.jsx(Vd,{path:"/to-chuyen-mon-ke-hoach",element:v.jsx(r9t,{})}),v.jsx(Vd,{path:"/class/:classId",element:v.jsx(o9t,{})})]})})]})})})}),ACe=document.getElementById("root");if(!ACe)throw new Error("Could not find root element to mount to");const c9t=h5e.createRoot(ACe);c9t.render(v.jsx(cf.StrictMode,{children:v.jsx(l9t,{})}));export{n1 as A,Dn as B,rNt as C,lr as D,NLt as N,Ex as T,or as _,Gk as a,rt as b,wt as c,Pt as d,Xt as e,Fn as f,oH as g,Ct as h,_r as i,ut as j,$v as k,Zp as l,Mo as m,N0 as n,Ur as o,_e as p,en as q,Ve as r,md as s,pt as t,Qf as u,Woe as v,n0 as w,bo as x,D2 as y,sCt as z};
