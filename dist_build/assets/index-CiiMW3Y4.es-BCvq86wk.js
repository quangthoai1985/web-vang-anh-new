import{v as B,t as De,c as me,p as We,E as Le,S as Ve}from"./index-CSaZZzfe.es-Q4IY_rj9.js";const ye=-1,O=0,v=1,E=2,z=3,D=4,W=5,L=6,be=7,we=8,X=typeof self=="object"?self:globalThis,He=(e,t)=>{const n=(i,l)=>(e.set(l,i),i),r=i=>{if(e.has(i))return e.get(i);const[l,s]=t[i];switch(l){case O:case ye:return n(s,i);case v:{const c=n([],i);for(const o of s)c.push(r(o));return c}case E:{const c=n({},i);for(const[o,a]of s)c[r(o)]=r(a);return c}case z:return n(new Date(s),i);case D:{const{source:c,flags:o}=s;return n(new RegExp(c,o),i)}case W:{const c=n(new Map,i);for(const[o,a]of s)c.set(r(o),r(a));return c}case L:{const c=n(new Set,i);for(const o of s)c.add(r(o));return c}case be:{const{name:c,message:o}=s;return n(new X[c](o),i)}case we:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:c}=new Uint8Array(s);return n(new DataView(c),s)}}return n(new X[l](s),i)};return r},K=e=>He(new Map,e)(0),b="",{toString:Ye}={},{keys:Je}=Object,k=e=>{const t=typeof e;if(t!=="object"||!e)return[O,t];const n=Ye.call(e).slice(8,-1);switch(n){case"Array":return[v,b];case"Object":return[E,b];case"Date":return[z,b];case"RegExp":return[D,b];case"Map":return[W,b];case"Set":return[L,b];case"DataView":return[v,n]}return n.includes("Array")?[v,n]:n.includes("Error")?[be,n]:[E,n]},I=([e,t])=>e===O&&(t==="function"||t==="symbol"),_e=(e,t,n,r)=>{const i=(s,c)=>{const o=r.push(s)-1;return n.set(c,o),o},l=s=>{if(n.has(s))return n.get(s);let[c,o]=k(s);switch(c){case O:{let u=s;switch(o){case"bigint":c=we,u=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);u=null;break;case"undefined":return i([ye],s)}return i([c,u],s)}case v:{if(o){let d=s;return o==="DataView"?d=new Uint8Array(s.buffer):o==="ArrayBuffer"&&(d=new Uint8Array(s)),i([o,[...d]],s)}const u=[],p=i([c,u],s);for(const d of s)u.push(l(d));return p}case E:{if(o)switch(o){case"BigInt":return i([o,s.toString()],s);case"Boolean":case"Number":case"String":return i([o,s.valueOf()],s)}if(t&&"toJSON"in s)return l(s.toJSON());const u=[],p=i([c,u],s);for(const d of Je(s))(e||!I(k(s[d])))&&u.push([l(d),l(s[d])]);return p}case z:return i([c,s.toISOString()],s);case D:{const{source:u,flags:p}=s;return i([c,{source:u,flags:p}],s)}case W:{const u=[],p=i([c,u],s);for(const[d,y]of s)(e||!(I(k(d))||I(k(y))))&&u.push([l(d),l(y)]);return p}case L:{const u=[],p=i([c,u],s);for(const d of s)(e||!I(k(d)))&&u.push(l(d));return p}}const{message:a}=s;return i([c,{name:o,message:a}],s)};return l},Q=(e,{json:t,lossy:n}={})=>{const r=[];return _e(!(t||n),!!t,new Map,r)(e),r},xe=typeof structuredClone=="function"?((e,t)=>t&&("json"in t||"lossy"in t)?K(Q(e,t)):structuredClone(e)):(e,t)=>K(Q(e,t)),V=(function(e,t,n,r,i){const l=m(t);return ke(e)?l.call(i,e,n,r):!1}),m=(function(e){if(e==null)return Ke;if(typeof e=="string")return Xe(e);if(typeof e=="object")return Ge(e);if(typeof e=="function")return H(e);throw new Error("Expected function, string, or array as `test`")});function Ge(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=m(e[n]);return H(r);function r(...i){let l=-1;for(;++l<t.length;)if(t[l].apply(this,i))return!0;return!1}}function Xe(e){return H(t);function t(n){return n.tagName===e}}function H(e){return t;function t(n,r,i){return!!(ke(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ke(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function ke(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const Se=m(function(e){return e.tagName==="audio"||e.tagName==="canvas"||e.tagName==="embed"||e.tagName==="iframe"||e.tagName==="img"||e.tagName==="math"||e.tagName==="object"||e.tagName==="picture"||e.tagName==="svg"||e.tagName==="video"}),Qe=/[ \t\n\f\r]/g;function ve(e){return typeof e=="object"?e.type==="text"?Z(e.value):!1:Z(e)}function Z(e){return e.replace(Qe,"")===""}const Ze=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],et=["button","input","select","textarea"],tt=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],nt={},Y=me(["comment","doctype"]);function rt(e,t){Ne(e,{collapse:ut((t||nt).newlines?ot:at),whitespace:"normal"})}function Ne(e,t){if("children"in e){const n={...t};return(e.type==="root"||Te(e))&&(n.before=!0,n.after=!0),n.whitespace=pt(e,t),lt(e,n)}if(e.type==="text"){if(t.whitespace==="normal")return it(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:Y(e),stripAtStart:!1,remove:!1}}function it(e,t){const n=t.collapse(e.value),r={ignore:!1,stripAtStart:!1,remove:!1};let i=0,l=n.length;return t.before&&ee(n.charAt(0))&&i++,i!==l&&ee(n.charAt(l-1))&&(t.after?l--:r.stripAtStart=!0),i===l?r.remove=!0:e.value=n.slice(i,l),r}function lt(e,t){let n=t.before;const r=t.after,i=e.children;let l=i.length,s=-1;for(;++s<l;){const c=Ne(i[s],{...t,after:Ae(i,s,r),before:n});c.remove?(i.splice(s,1),s--,l--):c.ignore||(n=c.stripAtStart),Ie(i[s])&&(n=!1)}return{ignore:!1,stripAtStart:!!(n||r),remove:!1}}function Ae(e,t,n){for(;++t<e.length;){const r=e[t];let i=st(r);if(i===void 0&&"children"in r&&!ct(r)&&(i=Ae(r.children,-1)),typeof i=="boolean")return i}return n}function st(e){if(e.type==="element"){if(Ie(e))return!1;if(Te(e))return!0}else if(e.type==="text"){if(!ve(e))return!1}else if(!Y(e))return!1}function Ie(e){return Se(e)||V(e,et)}function Te(e){return V(e,Ze)}function ct(e){return!!(e.type==="element"&&e.properties.hidden)||Y(e)||V(e,tt)}function ee(e){return e===" "||e===`
`}function ot(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function at(){return" "}function ut(e){return t;function t(n){return String(n).replace(/[\t\n\v\f\r ]+/g,e)}}function pt(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}function ft(e){return function(t){rt(t,e)}}const ht=Ce("end"),dt=Ce("start");function Ce(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function gt(e){const t=dt(e),n=ht(e);if(t&&n)return{start:t,end:n}}function mt(e,t){const n=t.properties||{},r=e.all(t),i={type:"link",url:e.resolve(String(n.href||"")||null),title:n.title?String(n.title):null,children:r};return e.patch(t,i),i}function yt(e,t){e.baseFound||(e.frozenBaseUrl=String(t.properties&&t.properties.href||"")||void 0,e.baseFound=!0)}function bt(e,t){const n={type:"blockquote",children:e.toFlow(e.all(t))};return e.patch(t,n),n}function wt(e,t){const n={type:"break"};return e.patch(t,n),n}const te=(function(e,t,n){const r=me(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),ne=/\n/g,re=/[\t ]+/g,$=m("br"),ie=m(It),xt=m("p"),le=m("tr"),kt=m(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",At,Tt]),Be=m(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function N(e,t){const n={},r="children"in e?e.children:[],i=Be(e),l=Me(e,{whitespace:n.whitespace||"normal"}),s=[];(e.type==="text"||e.type==="comment")&&s.push(...Oe(e,{breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<r.length;)s.push(...Ee(r[c],e,{whitespace:l,breakBefore:c?void 0:i,breakAfter:c<r.length-1?$(r[c+1]):i}));const o=[];let a;for(c=-1;++c<s.length;){const u=s[c];typeof u=="number"?a!==void 0&&u>a&&(a=u):u&&(a!==void 0&&a>-1&&o.push(`
`.repeat(a)||" "),a=-1,o.push(u))}return o.join("")}function Ee(e,t,n){return e.type==="element"?St(e,t,n):e.type==="text"?n.whitespace==="normal"?Oe(e,n):vt(e):[]}function St(e,t,n){const r=Me(e,n),i=e.children||[];let l=-1,s=[];if(kt(e))return s;let c,o;for($(e)||le(e)&&te(t,e,le)?o=`
`:xt(e)?(c=2,o=2):Be(e)&&(c=1,o=1);++l<i.length;)s=s.concat(Ee(i[l],e,{whitespace:r,breakBefore:l?void 0:c,breakAfter:l<i.length-1?$(i[l+1]):o}));return ie(e)&&te(t,e,ie)&&s.push("	"),c&&s.unshift(c),o&&s.push(o),s}function Oe(e,t){const n=String(e.value),r=[],i=[];let l=0;for(;l<=n.length;){ne.lastIndex=l;const o=ne.exec(n),a=o&&"index"in o?o.index:n.length;r.push(Nt(n.slice(l,a).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),l===0?t.breakBefore:!0,a===n.length?t.breakAfter:!0)),l=a+1}let s=-1,c;for(;++s<r.length;)r[s].charCodeAt(r[s].length-1)===8203||s<r.length-1&&r[s+1].charCodeAt(0)===8203?(i.push(r[s]),c=void 0):r[s]?(typeof c=="number"&&i.push(c),i.push(r[s]),c=0):(s===0||s===r.length-1)&&i.push(0);return i}function vt(e){return[String(e.value)]}function Nt(e,t,n){const r=[];let i=0,l;for(;i<e.length;){re.lastIndex=i;const s=re.exec(e);l=s?s.index:e.length,!i&&!l&&s&&!t&&r.push(""),i!==l&&r.push(e.slice(i,l)),i=s?l+s[0].length:l}return i!==l&&!n&&r.push(""),r.join(" ")}function Me(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function At(e){return!!(e.properties||{}).hidden}function It(e){return e.tagName==="td"||e.tagName==="th"}function Tt(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function Ct(e){const t=String(e);let n=t.length;for(;n>0;){const r=t.codePointAt(n-1);if(r!==void 0&&(r===10||r===13))n--;else break}return t.slice(0,n)}const j="language-";function T(e,t){const n=t.children;let r=-1,i,l;if(t.tagName==="pre")for(;++r<n.length;){const c=n[r];if(c.type==="element"&&c.tagName==="code"&&c.properties&&c.properties.className&&Array.isArray(c.properties.className)){i=c.properties.className;break}}if(i){for(r=-1;++r<i.length;)if(String(i[r]).slice(0,j.length)===j){l=String(i[r]).slice(j.length);break}}const s={type:"code",lang:l||null,meta:null,value:Ct(N(t))};return e.patch(t,s),s}function Bt(e,t){const n={type:"html",value:"<!--"+t.value+"-->"};return e.patch(t,n),n}function P(e,t){const r={type:"delete",children:e.all(t)};return e.patch(t,r),r}function J(e){let t=-1;if(e.length>1){for(;++t<e.length;)if(e[t].spread)return!0}return!1}function Et(e,t){const n=[],r=[];let i=-1;for(;++i<t.children.length;){const c=t.children[i];c.type==="element"&&c.tagName==="div"?n.push(...c.children):n.push(c)}let l={definitions:[],titles:[]};for(i=-1;++i<n.length;){const c=n[i];if(c.type==="element"&&c.tagName==="dt"){const o=n[i-1];o&&o.type==="element"&&o.tagName==="dd"&&(r.push(l),l={definitions:[],titles:[]}),l.titles.push(c)}else l.definitions.push(c)}r.push(l),i=-1;const s=[];for(;++i<r.length;){const c=[...se(e,r[i].titles),...se(e,r[i].definitions)];c.length>0&&s.push({type:"listItem",spread:c.length>1,checked:null,children:c})}if(s.length>0){const c={type:"list",ordered:!1,start:null,spread:J(s),children:s};return e.patch(t,c),c}}function se(e,t){const n=e.all({type:"root",children:t}),r=e.toSpecificContent(n,Ot);return r.length===0?[]:r.length===1?r[0].children:[{type:"list",ordered:!1,start:null,spread:J(r),children:r}]}function Ot(){return{type:"listItem",spread:!1,checked:null,children:[]}}function C(e,t){const r={type:"emphasis",children:e.all(t)};return e.patch(t,r),r}function _(e){let t=0,n=e.length;for(;t<n&&e[t].type==="break";)t++;for(;n>t&&e[n-1].type==="break";)n--;return t===0&&n===e.length?e:e.slice(t,n)}function w(e,t){const n=Number(t.tagName.charAt(1))||1,r=_(e.all(t)),i={type:"heading",depth:n,children:r};return e.patch(t,i),i}function Mt(e,t){const n={type:"thematicBreak"};return e.patch(t,n),n}function Rt(e,t){const n=t.properties||{},r=String(n.src||""),i=String(n.title||"");if(r&&i){const l={type:"link",title:null,url:e.resolve(r),children:[{type:"text",value:i}]};return e.patch(t,l),l}}function ce(e,t){const n=t.properties||{},r={type:"image",url:e.resolve(String(n.src||"")||null),title:n.title?String(n.title):null,alt:n.alt?String(n.alt):""};return e.patch(t,r),r}function S(e,t){const n={type:"inlineCode",value:N(t)};return e.patch(t,n),n}function Re(e,t){const n=[],r=[],i=t||e.properties||{},l=je(e),s=Math.min(Number.parseInt(String(i.size),10),0)||(i.multiple?4:1);let c=-1;for(;++c<l.length;){const u=l[c];u&&u.properties&&u.properties.selected&&n.push(u)}const o=n.length>0?n:l,a=Math.min(o.length,s);for(c=-1;++c<a;){const u=o[c],p=u.properties||{},d=N(u),y=d||String(p.label||""),x=String(p.value||"")||d;r.push([x,y===x?void 0:y])}return r}function je(e){const t=[];let n=-1;for(;++n<e.children.length;){const r=e.children[n];"children"in r&&Array.isArray(r.children)&&t.push(...je(r)),r.type==="element"&&r.tagName==="option"&&(!r.properties||!r.properties.disabled)&&t.push(r)}return t}const jt="[x]",Pt="[ ]";function Ut(e,t){const n=t.properties||{},r=String(n.value||n.placeholder||"");if(n.disabled||n.type==="hidden"||n.type==="file")return;if(n.type==="checkbox"||n.type==="radio"){const o={type:"text",value:n.checked?e.options.checked||jt:e.options.unchecked||Pt};return e.patch(t,o),o}if(n.type==="image"){const o=n.alt||r;if(o){const a={type:"image",url:e.resolve(String(n.src||"")||null),title:String(n.title||"")||null,alt:String(o)};return e.patch(t,a),a}return}let i=[];if(r)i=[[r,void 0]];else if(n.type!=="button"&&n.type!=="file"&&n.type!=="password"&&n.type!=="reset"&&n.type!=="submit"&&n.list){const o=String(n.list),a=e.elementById.get(o);a&&a.tagName==="datalist"&&(i=Re(a,n))}if(i.length===0)return;if(n.type==="password"&&(i[0]=["•".repeat(i[0][0].length),void 0]),n.type==="email"||n.type==="url"){const o=[];let a=-1;for(;++a<i.length;){const u=e.resolve(i[a][0]),p={type:"link",title:null,url:n.type==="email"?"mailto:"+u:u,children:[{type:"text",value:i[a][1]||u}]};o.push(p),a!==i.length-1&&o.push({type:"text",value:", "})}return o}const l=[];let s=-1;for(;++s<i.length;)l.push(i[s][1]?i[s][1]+" ("+i[s][0]+")":i[s][0]);const c={type:"text",value:l.join(", ")};return e.patch(t,c),c}const qt={}.hasOwnProperty;function Ft(e,t){const n=e.type==="element"&&qt.call(e.properties,t)&&e.properties[t];return n!=null&&n!==!1}const $t=new Set(["pingback","prefetch","stylesheet"]);function zt(e){if(e.type!=="element"||e.tagName!=="link")return!1;if(e.properties.itemProp)return!0;const t=e.properties.rel;let n=-1;if(!Array.isArray(t)||t.length===0)return!1;for(;++n<t.length;)if(!$t.has(String(t[n])))return!1;return!0}const Dt=m(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),Wt=m("meta");function Pe(e){return!!(e.type==="text"||Dt(e)||Se(e)||zt(e)||Wt(e)&&Ft(e,"itemProp"))}function U(e,t){const{rest:n,checkbox:r}=qe(t),i=r?!!r.properties.checked:null,l=Ue(n),s=e.toFlow(e.all(n)),c={type:"listItem",spread:l,checked:i,children:s};return e.patch(t,c),c}function Ue(e){let t=-1,n=!1;for(;++t<e.children.length;){const r=e.children[t];if(r.type==="element"){if(Pe(r))continue;if(r.tagName==="p"||n||Ue(r))return!0;n=!0}}return!1}function qe(e){const t=e.children[0];if(t&&t.type==="element"&&t.tagName==="input"&&t.properties&&(t.properties.type==="checkbox"||t.properties.type==="radio")){const n={...e,children:e.children.slice(1)};return{checkbox:t,rest:n}}if(t&&t.type==="element"&&t.tagName==="p"){const{checkbox:n,rest:r}=qe(t);if(n){const i={...e,children:[r,...e.children.slice(1)]};return{checkbox:n,rest:i}}}return{checkbox:void 0,rest:e}}function q(e,t){const n=t.tagName==="ol",r=e.toSpecificContent(e.all(t),Lt);let i=null;n&&(i=t.properties&&t.properties.start?Number.parseInt(String(t.properties.start),10):1);const l={type:"list",ordered:n,start:i,spread:J(r),children:r};return e.patch(t,l),l}function Lt(){return{type:"listItem",spread:!1,checked:null,children:[]}}function M(e){let t=-1;for(;++t<e.length;){const n=e[t];if(!ze(n)||"children"in n&&M(n.children))return!0}return!1}function Fe(e){return $e(e,t,function(n){return n});function t(n){return n.every(function(r){return r.type==="text"?ve(r.value):!1})?[]:[{type:"paragraph",children:_(n)}]}}function Vt(e){return $e(e.children,t,n);function t(r){const i=F(e);return i.children=r,[i]}function n(r){if("children"in r&&"children"in e){const i=F(e),l=F(r);return i.children=r.children,l.children.push(i),l}return{...r}}}function $e(e,t,n){const r=Ht(e),i=[];let l=[],s=-1;for(;++s<r.length;){const c=r[s];ze(c)?l.push(c):(l.length>0&&(i.push(...t(l)),l=[]),i.push(n(c)))}return l.length>0&&(i.push(...t(l)),l=[]),i}function Ht(e){const t=[];let n=-1;for(;++n<e.length;){const r=e[n];(r.type==="delete"||r.type==="link")&&M(r.children)?t.push(...Vt(r)):t.push(r)}return t}function ze(e){const t=e.data&&e.data.hName;return t?Pe({type:"element",tagName:t,properties:{},children:[]}):We(e)}function F(e){return xe({...e,children:[]})}function oe(e,t){const n=t.properties||{},r=t.tagName==="video"?String(n.poster||""):"";let i=String(n.src||""),l=-1,s=!1,c=e.all(t);if(B({type:"root",children:c},function(p){if(p.type==="link")return s=!0,Le}),s||M(c))return c;for(;!i&&++l<t.children.length;){const p=t.children[l];p.type==="element"&&p.tagName==="source"&&p.properties&&(i=String(p.properties.src||""))}if(r){const p={type:"image",title:null,url:e.resolve(r),alt:De(c)};e.patch(t,p),c=[p]}const a=c,u={type:"link",title:n.title?String(n.title):null,url:e.resolve(i),children:a};return e.patch(t,u),u}function ae(e,t){const n=_(e.all(t));if(n.length>0){const r={type:"paragraph",children:n};return e.patch(t,r),r}}const Yt=['"'];function Jt(e,t){const n=e.options.quotes||Yt;e.qNesting++;const r=e.all(t);e.qNesting--;const i=n[e.qNesting%n.length],l=r[0],s=r[r.length-1],c=i.charAt(0),o=i.length>1?i.charAt(1):i;return l&&l.type==="text"?l.value=c+l.value:r.unshift({type:"text",value:c}),s&&s.type==="text"?s.value+=o:r.push({type:"text",value:o}),r}function _t(e,t){let n=e.all(t);(e.options.document||M(n))&&(n=Fe(n));const r={type:"root",children:n};return e.patch(t,r),r}function Gt(e,t){const n=Re(t);let r=-1;const i=[];for(;++r<n.length;){const l=n[r];i.push(l[1]?l[1]+" ("+l[0]+")":l[0])}if(i.length>0){const l={type:"text",value:i.join(", ")};return e.patch(t,l),l}}function ue(e,t){const r={type:"strong",children:e.all(t)};return e.patch(t,r),r}function pe(e,t){const r={type:"tableCell",children:e.all(t)};if(e.patch(t,r),t.properties){const i=t.properties.rowSpan,l=t.properties.colSpan;if(i||l){const s=r.data||(r.data={});i&&(s.hastUtilToMdastTemporaryRowSpan=i),l&&(s.hastUtilToMdastTemporaryColSpan=l)}}return r}function Xt(e,t){const r={type:"tableRow",children:e.toSpecificContent(e.all(t),Kt)};return e.patch(t,r),r}function Kt(){return{type:"tableCell",children:[]}}function Qt(e,t){if(e.inTable){const a={type:"text",value:N(t)};return e.patch(t,a),a}e.inTable=!0;const{align:n,headless:r}=Zt(t),i=e.toSpecificContent(e.all(t),fe);r&&i.unshift(fe());let l=-1;for(;++l<i.length;){const a=i[l],u=e.toSpecificContent(a.children,en);a.children=u}let s=1;for(l=-1;++l<i.length;){const a=i[l].children;let u=-1;for(;++u<a.length;){const p=a[u];if(p.data){const d=p.data,y=Number.parseInt(String(d.hastUtilToMdastTemporaryColSpan),10)||1,x=Number.parseInt(String(d.hastUtilToMdastTemporaryRowSpan),10)||1;if(y>1||x>1){let A=l-1;for(;++A<l+x;){let R=u-1;for(;++R<u+y&&i[A];){const G=[];(A!==l||R!==u)&&G.push({type:"tableCell",children:[]}),i[A].children.splice(R,0,...G)}}}"hastUtilToMdastTemporaryColSpan"in p.data&&delete p.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in p.data&&delete p.data.hastUtilToMdastTemporaryRowSpan,Object.keys(p.data).length===0&&delete p.data}}a.length>s&&(s=a.length)}for(l=-1;++l<i.length;){const a=i[l].children;let u=a.length-1;for(;++u<s;)a.push({type:"tableCell",children:[]})}let c=n.length-1;for(;++c<s;)n.push(null);e.inTable=!1;const o={type:"table",align:n,children:i};return e.patch(t,o),o}function Zt(e){const t={align:[null],headless:!0};let n=0,r=0;return B(e,function(i){if(i.type==="element"){if(i.tagName==="table"&&e!==i)return Ve;if((i.tagName==="th"||i.tagName==="td")&&i.properties){if(!t.align[r]){const l=String(i.properties.align||"")||null;(l==="center"||l==="left"||l==="right"||l===null)&&(t.align[r]=l)}t.headless&&n<2&&i.tagName==="th"&&(t.headless=!1),r++}else i.tagName==="thead"?t.headless=!1:i.tagName==="tr"&&(n++,r=0)}}),t}function en(){return{type:"tableCell",children:[]}}function fe(){return{type:"tableRow",children:[]}}function tn(e,t){const n={type:"text",value:t.value};return e.patch(t,n),n}function nn(e,t){const n={type:"text",value:N(t)};return e.patch(t,n),n}function rn(e,t){const n={type:"text",value:"​"};return e.patch(t,n),n}const ln={comment:Bt,doctype:h,root:_t,text:tn},sn={applet:h,area:h,basefont:h,bgsound:h,caption:h,col:h,colgroup:h,command:h,content:h,datalist:h,dialog:h,element:h,embed:h,frame:h,frameset:h,isindex:h,keygen:h,link:h,math:h,menu:h,menuitem:h,meta:h,nextid:h,noembed:h,noframes:h,optgroup:h,option:h,param:h,script:h,shadow:h,source:h,spacer:h,style:h,svg:h,template:h,title:h,track:h,abbr:f,acronym:f,bdi:f,bdo:f,big:f,blink:f,button:f,canvas:f,cite:f,data:f,details:f,dfn:f,font:f,ins:f,label:f,map:f,marquee:f,meter:f,nobr:f,noscript:f,object:f,output:f,progress:f,rb:f,rbc:f,rp:f,rt:f,rtc:f,ruby:f,slot:f,small:f,span:f,sup:f,sub:f,tbody:f,tfoot:f,thead:f,time:f,address:g,article:g,aside:g,body:g,center:g,div:g,fieldset:g,figcaption:g,figure:g,form:g,footer:g,header:g,hgroup:g,html:g,legend:g,main:g,multicol:g,nav:g,picture:g,section:g,a:mt,audio:oe,b:ue,base:yt,blockquote:bt,br:wt,code:S,dir:q,dl:Et,dt:U,dd:U,del:P,em:C,h1:w,h2:w,h3:w,h4:w,h5:w,h6:w,hr:Mt,i:C,iframe:Rt,img:ce,image:ce,input:Ut,kbd:S,li:U,listing:T,mark:C,ol:q,p:ae,plaintext:T,pre:T,q:Jt,s:P,samp:S,select:Gt,strike:P,strong:ue,summary:ae,table:Qt,td:pe,textarea:nn,th:pe,tr:Xt,tt:S,u:C,ul:q,var:S,video:oe,wbr:rn,xmp:T};function f(e,t){return e.all(t)}function g(e,t){return e.toFlow(e.all(t))}function h(){}const he={}.hasOwnProperty;function cn(e){return{all:on,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...sn,...e.handlers},inTable:!1,nodeHandlers:{...ln,...e.nodeHandlers},one:an,options:e,patch:un,qNesting:0,resolve:pn,toFlow:fn,toSpecificContent:hn}}function on(e){const t=e.children||[],n=[];let r=-1;for(;++r<t.length;){const i=t[r],l=this.one(i,e);Array.isArray(l)?n.push(...l):l&&n.push(l)}return n}function an(e,t){if(e.type==="element"){if(e.properties&&e.properties.dataMdast==="ignore")return;if(he.call(this.handlers,e.tagName))return this.handlers[e.tagName](this,e,t)||void 0}else if(he.call(this.nodeHandlers,e.type))return this.nodeHandlers[e.type](this,e,t)||void 0;if("value"in e&&typeof e.value=="string"){const n={type:"text",value:e.value};return this.patch(e,n),n}if("children"in e)return this.all(e)}function un(e,t){e.position&&(t.position=gt(e))}function pn(e){const t=this.frozenBaseUrl;return e==null?"":t?String(new URL(e,t)):e}function fn(e){return Fe(e)}function hn(e,t){const n=t(),r=[];let i=[],l=-1;for(;++l<e.length;){const c=e[l];if(s(c))i.length>0&&(c.children.unshift(...i),i=[]),r.push(c);else{const o=c;i.push(o)}}if(i.length>0){let c=r[r.length-1];c||(c=t(),r.push(c)),c.children.push(...i),i=[]}return r;function s(c){return c.type===n.type}}const dn={};function de(e,t){const n=xe(e),r=t||dn,i=ft({newlines:r.newlines===!0}),l=cn(r);let s;i(n),B(n,function(o){if(o&&o.type==="element"&&o.properties){const a=String(o.properties.id||"")||void 0;a&&!l.elementById.has(a)&&l.elementById.set(a,o)}});const c=l.one(n,void 0);return c?Array.isArray(c)?s={type:"root",children:c}:s=c:s={type:"root",children:[]},B(s,function(o,a,u){if(o.type==="text"&&a!==void 0&&u){const p=u.children[a-1];if(p&&p.type===o.type)return p.value+=o.value,u.children.splice(a,1),p.position&&o.position&&(p.position.end=o.position.end),a-1;if(o.value=o.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),u&&(u.type==="heading"||u.type==="paragraph"||u.type==="root")&&(a||(o.value=o.value.replace(/^[\t ]+/,"")),a===u.children.length-1&&(o.value=o.value.replace(/[\t ]+$/,""))),!o.value)return u.children.splice(a,1),a}}),s}const ge={document:!0};function mn(e,t){return e&&"run"in e?async function(n,r){const i=de(n,{...ge,...t});await e.run(i,r)}:function(n){return de(n,{...ge,...e})}}export{mn as default};
