(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function bw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Eg={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function k2(){if(uv)return Ac;uv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return Ac.Fragment=e,Ac.jsx=n,Ac.jsxs=n,Ac}var hv;function D2(){return hv||(hv=1,Eg.exports=k2()),Eg.exports}var l=D2(),jg={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function O2(){if(dv)return Me;dv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=T&&k[T]||k["@@iterator"],typeof k=="function"?k:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,L={};function J(k,F,he){this.props=k,this.context=F,this.refs=L,this.updater=he||B}J.prototype.isReactComponent={},J.prototype.setState=function(k,F){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,F,"setState")},J.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function te(){}te.prototype=J.prototype;function G(k,F,he){this.props=k,this.context=F,this.refs=L,this.updater=he||B}var X=G.prototype=new te;X.constructor=G,H(X,J.prototype),X.isPureReactComponent=!0;var de=Array.isArray;function pe(){}var j={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function A(k,F,he){var Q=he.ref;return{$$typeof:s,type:k,key:F,ref:Q!==void 0?Q:null,props:he}}function P(k,F){return A(k.type,F,k.props)}function O(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function M(k){var F={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return F[he]})}var I=/\/+/g;function De(k,F){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):F.toString(36)}function Pe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(pe,pe):(k.status="pending",k.then(function(F){k.status==="pending"&&(k.status="fulfilled",k.value=F)},function(F){k.status==="pending"&&(k.status="rejected",k.reason=F)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ee(k,F,he,Q,me){var z=typeof k;(z==="undefined"||z==="boolean")&&(k=null);var D=!1;if(k===null)D=!0;else switch(z){case"bigint":case"string":case"number":D=!0;break;case"object":switch(k.$$typeof){case s:case e:D=!0;break;case b:return D=k._init,ee(D(k._payload),F,he,Q,me)}}if(D)return me=me(k),D=Q===""?"."+De(k,0):Q,de(me)?(he="",D!=null&&(he=D.replace(I,"$&/")+"/"),ee(me,F,he,"",function(Le){return Le})):me!=null&&(O(me)&&(me=P(me,he+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(I,"$&/")+"/")+D)),F.push(me)),1;D=0;var se=Q===""?".":Q+":";if(de(k))for(var fe=0;fe<k.length;fe++)Q=k[fe],z=se+De(Q,fe),D+=ee(Q,F,he,z,me);else if(fe=C(k),typeof fe=="function")for(k=fe.call(k),fe=0;!(Q=k.next()).done;)Q=Q.value,z=se+De(Q,fe++),D+=ee(Q,F,he,z,me);else if(z==="object"){if(typeof k.then=="function")return ee(Pe(k),F,he,Q,me);throw F=String(k),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return D}function ae(k,F,he){if(k==null)return k;var Q=[],me=0;return ee(k,Q,"","",function(z){return F.call(he,z,me++)}),Q}function xe(k){if(k._status===-1){var F=k._result;F=F(),F.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=F)}if(k._status===1)return k._result.default;throw k._result}var Re=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},ue={map:ae,forEach:function(k,F,he){ae(k,function(){F.apply(this,arguments)},he)},count:function(k){var F=0;return ae(k,function(){F++}),F},toArray:function(k){return ae(k,function(F){return F})||[]},only:function(k){if(!O(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Me.Activity=w,Me.Children=ue,Me.Component=J,Me.Fragment=n,Me.Profiler=o,Me.PureComponent=G,Me.StrictMode=a,Me.Suspense=y,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Me.__COMPILER_RUNTIME={__proto__:null,c:function(k){return j.H.useMemoCache(k)}},Me.cache=function(k){return function(){return k.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(k,F,he){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Q=H({},k.props),me=k.key;if(F!=null)for(z in F.key!==void 0&&(me=""+F.key),F)!N.call(F,z)||z==="key"||z==="__self"||z==="__source"||z==="ref"&&F.ref===void 0||(Q[z]=F[z]);var z=arguments.length-2;if(z===1)Q.children=he;else if(1<z){for(var D=Array(z),se=0;se<z;se++)D[se]=arguments[se+2];Q.children=D}return A(k.type,me,Q)},Me.createContext=function(k){return k={$$typeof:h,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Me.createElement=function(k,F,he){var Q,me={},z=null;if(F!=null)for(Q in F.key!==void 0&&(z=""+F.key),F)N.call(F,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(me[Q]=F[Q]);var D=arguments.length-2;if(D===1)me.children=he;else if(1<D){for(var se=Array(D),fe=0;fe<D;fe++)se[fe]=arguments[fe+2];me.children=se}if(k&&k.defaultProps)for(Q in D=k.defaultProps,D)me[Q]===void 0&&(me[Q]=D[Q]);return A(k,z,me)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(k){return{$$typeof:g,render:k}},Me.isValidElement=O,Me.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:xe}},Me.memo=function(k,F){return{$$typeof:p,type:k,compare:F===void 0?null:F}},Me.startTransition=function(k){var F=j.T,he={};j.T=he;try{var Q=k(),me=j.S;me!==null&&me(he,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(pe,Re)}catch(z){Re(z)}finally{F!==null&&he.types!==null&&(F.types=he.types),j.T=F}},Me.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Me.use=function(k){return j.H.use(k)},Me.useActionState=function(k,F,he){return j.H.useActionState(k,F,he)},Me.useCallback=function(k,F){return j.H.useCallback(k,F)},Me.useContext=function(k){return j.H.useContext(k)},Me.useDebugValue=function(){},Me.useDeferredValue=function(k,F){return j.H.useDeferredValue(k,F)},Me.useEffect=function(k,F){return j.H.useEffect(k,F)},Me.useEffectEvent=function(k){return j.H.useEffectEvent(k)},Me.useId=function(){return j.H.useId()},Me.useImperativeHandle=function(k,F,he){return j.H.useImperativeHandle(k,F,he)},Me.useInsertionEffect=function(k,F){return j.H.useInsertionEffect(k,F)},Me.useLayoutEffect=function(k,F){return j.H.useLayoutEffect(k,F)},Me.useMemo=function(k,F){return j.H.useMemo(k,F)},Me.useOptimistic=function(k,F){return j.H.useOptimistic(k,F)},Me.useReducer=function(k,F,he){return j.H.useReducer(k,F,he)},Me.useRef=function(k){return j.H.useRef(k)},Me.useState=function(k){return j.H.useState(k)},Me.useSyncExternalStore=function(k,F,he){return j.H.useSyncExternalStore(k,F,he)},Me.useTransition=function(){return j.H.useTransition()},Me.version="19.2.0",Me}var fv;function Dp(){return fv||(fv=1,jg.exports=O2()),jg.exports}var R=Dp();const ir=bw(R);var Sg={exports:{}},Cc={},Ag={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function M2(){return mv||(mv=1,(function(s){function e(ee,ae){var xe=ee.length;ee.push(ae);e:for(;0<xe;){var Re=xe-1>>>1,ue=ee[Re];if(0<o(ue,ae))ee[Re]=ae,ee[xe]=ue,xe=Re;else break e}}function n(ee){return ee.length===0?null:ee[0]}function a(ee){if(ee.length===0)return null;var ae=ee[0],xe=ee.pop();if(xe!==ae){ee[0]=xe;e:for(var Re=0,ue=ee.length,k=ue>>>1;Re<k;){var F=2*(Re+1)-1,he=ee[F],Q=F+1,me=ee[Q];if(0>o(he,xe))Q<ue&&0>o(me,he)?(ee[Re]=me,ee[Q]=xe,Re=Q):(ee[Re]=he,ee[F]=xe,Re=F);else if(Q<ue&&0>o(me,xe))ee[Re]=me,ee[Q]=xe,Re=Q;else break e}}return ae}function o(ee,ae){var xe=ee.sortIndex-ae.sortIndex;return xe!==0?xe:ee.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var y=[],p=[],b=1,w=null,T=3,C=!1,B=!1,H=!1,L=!1,J=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function X(ee){for(var ae=n(p);ae!==null;){if(ae.callback===null)a(p);else if(ae.startTime<=ee)a(p),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=n(p)}}function de(ee){if(H=!1,X(ee),!B)if(n(y)!==null)B=!0,pe||(pe=!0,M());else{var ae=n(p);ae!==null&&Pe(de,ae.startTime-ee)}}var pe=!1,j=-1,N=5,A=-1;function P(){return L?!0:!(s.unstable_now()-A<N)}function O(){if(L=!1,pe){var ee=s.unstable_now();A=ee;var ae=!0;try{e:{B=!1,H&&(H=!1,te(j),j=-1),C=!0;var xe=T;try{t:{for(X(ee),w=n(y);w!==null&&!(w.expirationTime>ee&&P());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,T=w.priorityLevel;var ue=Re(w.expirationTime<=ee);if(ee=s.unstable_now(),typeof ue=="function"){w.callback=ue,X(ee),ae=!0;break t}w===n(y)&&a(y),X(ee)}else a(y);w=n(y)}if(w!==null)ae=!0;else{var k=n(p);k!==null&&Pe(de,k.startTime-ee),ae=!1}}break e}finally{w=null,T=xe,C=!1}ae=void 0}}finally{ae?M():pe=!1}}}var M;if(typeof G=="function")M=function(){G(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,De=I.port2;I.port1.onmessage=O,M=function(){De.postMessage(null)}}else M=function(){J(O,0)};function Pe(ee,ae){j=J(function(){ee(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var xe=T;T=ae;try{return ee()}finally{T=xe}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var xe=T;T=ee;try{return ae()}finally{T=xe}},s.unstable_scheduleCallback=function(ee,ae,xe){var Re=s.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Re+xe:Re):xe=Re,ee){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=xe+ue,ee={id:b++,callback:ae,priorityLevel:ee,startTime:xe,expirationTime:ue,sortIndex:-1},xe>Re?(ee.sortIndex=xe,e(p,ee),n(y)===null&&ee===n(p)&&(H?(te(j),j=-1):H=!0,Pe(de,xe-Re))):(ee.sortIndex=ue,e(y,ee),B||C||(B=!0,pe||(pe=!0,M()))),ee},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(ee){var ae=T;return function(){var xe=T;T=ae;try{return ee.apply(this,arguments)}finally{T=xe}}}})(Cg)),Cg}var gv;function V2(){return gv||(gv=1,Ag.exports=M2()),Ag.exports}var Rg={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function P2(){if(pv)return pn;pv=1;var s=Dp();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:y,containerInfo:p,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,pn.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,b)},pn.flushSync=function(y){var p=h.T,b=a.p;try{if(h.T=null,a.p=2,y)return y()}finally{h.T=p,a.p=b,a.d.f()}},pn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(y,p))},pn.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},pn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:C}):b==="script"&&a.d.X(y,{crossOrigin:w,integrity:T,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);a.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(y)},pn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);a.d.L(y,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pn.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=g(p.as,p.crossOrigin);a.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(y)},pn.requestFormReset=function(y){a.d.r(y)},pn.unstable_batchedUpdates=function(y,p){return y(p)},pn.useFormState=function(y,p,b){return h.H.useFormState(y,p,b)},pn.useFormStatus=function(){return h.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var yv;function L2(){if(yv)return Rg.exports;yv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rg.exports=P2(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function U2(){if(xv)return Cc;xv=1;var s=V2(),e=Dp(),n=L2();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(a(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var i=t,c=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return y(f),t;if(m===c)return y(f),r;m=m.sibling}throw Error(a(188))}if(i.return!==c.return)i=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===i){v=!0,i=f,c=m;break}if(E===c){v=!0,c=f,i=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===i){v=!0,i=m,c=f;break}if(E===c){v=!0,c=m,i=f;break}E=E.sibling}if(!v)throw Error(a(189))}}if(i.alternate!==c)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),G=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function De(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case J:return"Profiler";case L:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case G:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case X:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return r=t.displayName||null,r!==null?r:De(t.type)||"Memo";case N:r=t._payload,t=t._init;try{return De(t(r))}catch{}}return null}var Pe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Re=[],ue=-1;function k(t){return{current:t}}function F(t){0>ue||(t.current=Re[ue],Re[ue]=null,ue--)}function he(t,r){ue++,Re[ue]=t.current,t.current=r}var Q=k(null),me=k(null),z=k(null),D=k(null);function se(t,r){switch(he(z,r),he(me,t),he(Q,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Db(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Db(r),t=Ob(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}F(Q),he(Q,t)}function fe(){F(Q),F(me),F(z)}function Le(t){t.memoizedState!==null&&he(D,t);var r=Q.current,i=Ob(r,t.type);r!==i&&(he(me,t),he(Q,i))}function st(t){me.current===t&&(F(Q),F(me)),D.current===t&&(F(D),Tc._currentValue=xe)}var Zt,Qt;function _n(t){if(Zt===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Zt=r&&r[1]||"",Qt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+t+Qt}var ge=!1;function we(t,r){if(!t||ge)return"";ge=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var W=ne}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(ne){W=ne}t.call(oe.prototype)}}else{try{throw Error()}catch(ne){W=ne}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&W&&typeof ne.stack=="string")return[ne.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var V=v.split(`
`),Y=E.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===Y.length)for(c=V.length-1,f=Y.length-1;1<=c&&0<=f&&V[c]!==Y[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==Y[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==Y[f]){var re=`
`+V[c].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=c&&0<=f);break}}}finally{ge=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?_n(i):""}function Je(t,r){switch(t.tag){case 26:case 27:case 5:return _n(t.type);case 16:return _n("Lazy");case 13:return t.child!==r&&r!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return we(t.type,!1);case 11:return we(t.type.render,!1);case 1:return we(t.type,!0);case 31:return _n("Activity");default:return""}}function ot(t){try{var r="",i=null;do r+=Je(t,i),i=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ae=Object.prototype.hasOwnProperty,qe=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Tr=s.unstable_shouldYield,Er=s.unstable_requestPaint,Yt=s.unstable_now,Wn=s.unstable_getCurrentPriorityLevel,ys=s.unstable_ImmediatePriority,Pn=s.unstable_UserBlockingPriority,Ln=s.unstable_NormalPriority,Af=s.unstable_LowPriority,_u=s.unstable_IdlePriority,wu=s.log,Nu=s.unstable_setDisableYieldValue,xs=null,ln=null;function Jn(t){if(typeof wu=="function"&&Nu(t),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(xs,t)}catch{}}var kt=Math.clz32?Math.clz32:Eu,Tu=Math.log,il=Math.LN2;function Eu(t){return t>>>=0,t===0?32:31-(Tu(t)/il|0)|0}var Ps=256,fi=262144,Pt=4194304;function Ls(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Us(t,r,i){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=Ls(c):(v&=E,v!==0?f=Ls(v):i||(i=E&~t,i!==0&&(f=Ls(i))))):(E=c&~m,E!==0?f=Ls(E):v!==0?f=Ls(v):i||(i=c&~t,i!==0&&(f=Ls(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function bs(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Cf(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(){var t=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),t}function zs(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function mi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rf(t,r,i,c,f,m){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var E=t.entanglements,V=t.expirationTimes,Y=t.hiddenUpdates;for(i=v&~i;0<i;){var re=31-kt(i),oe=1<<re;E[re]=0,V[re]=-1;var W=Y[re];if(W!==null)for(Y[re]=null,re=0;re<W.length;re++){var ne=W[re];ne!==null&&(ne.lane&=-536870913)}i&=~oe}c!==0&&gi(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~r))}function gi(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-kt(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|i&261930}function Co(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var c=31-kt(i),f=1<<c;f&r|t[c]&r&&(t[c]|=r),i&=~f}}function Ro(t,r){var i=r&-r;return i=(i&42)!==0?1:pi(i),(i&(t.suspendedLanes|r))!==0?0:i}function pi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function jr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Su(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:sv(t.type))}function vs(t,r){var i=ae.p;try{return ae.p=t,r()}finally{ae.p=i}}var _s=Math.random().toString(36).slice(2),Lt="__reactFiber$"+_s,en="__reactProps$"+_s,Bs="__reactContainer$"+_s,ll="__reactEvents$"+_s,If="__reactListeners$"+_s,Au="__reactHandles$"+_s,Cu="__reactResources$"+_s,Hs="__reactMarker$"+_s;function ol(t){delete t[Lt],delete t[en],delete t[ll],delete t[If],delete t[Au]}function qs(t){var r=t[Lt];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Bs]||i[Lt]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Bb(t);t!==null;){if(i=t[Lt])return i;t=Bb(t)}return r}t=i,i=t.parentNode}return null}function Zn(t){if(t=t[Lt]||t[Bs]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Un(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function Fs(t){var r=t[Cu];return r||(r=t[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(t){t[Hs]=!0}var Io=new Set,ko={};function Gs(t,r){Ks(t,r),Ks(t+"Capture",r)}function Ks(t,r){for(ko[t]=r,t=0;t<r.length;t++)Io.add(r[t])}var Do=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oo={},Mo={};function Ru(t){return Ae.call(Mo,t)?!0:Ae.call(Oo,t)?!1:Do.test(t)?Mo[t]=!0:(Oo[t]=!0,!1)}function cl(t,r,i){if(Ru(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function zn(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function zt(t,r,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+c)}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function da(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Vo(t,r,i){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){i=""+v,m.call(this,v)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ct(t){if(!t._valueTracker){var r=da(t)?"checked":"value";t._valueTracker=Vo(t,r,""+t[r])}}function yi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return t&&(c=da(t)?t.checked?"true":"false":t.value),t=c,t!==i?(r.setValue(t),!0):!1}function $s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var xi=/[\n"\\]/g;function jn(t){return t.replace(xi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ul(t,r,i,c,f,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+tn(r)):t.value!==""+tn(r)&&(t.value=""+tn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Po(t,v,tn(r)):i!=null?Po(t,v,tn(i)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+tn(E):t.removeAttribute("name")}function Iu(t,r,i,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ct(t);return}i=i!=null?""+tn(i):"",r=r!=null?""+tn(r):i,E||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=E?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ct(t)}function Po(t,r,i){r==="number"&&$s(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function fa(t,r,i,c){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&c&&(t[i].defaultSelected=!0)}else{for(i=""+tn(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function ku(t,r,i){if(r!=null&&(r=""+tn(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+tn(i):""}function ma(t,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(a(92));if(Pe(c)){if(1<c.length)throw Error(a(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=tn(r),t.defaultValue=i,c=t.textContent,c===i&&c!==""&&c!==null&&(t.value=c),ct(t)}function Sn(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Du=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lo(t,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,i):typeof i!="number"||i===0||Du.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Uo(t,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&i[f]!==c&&Lo(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Lo(t,m,r[m])}function hl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ga=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(t){return ga.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ws(){}var zo=null;function es(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pa=null,Qs=null;function bi(t){var r=Zn(t);if(r&&(t=r.stateNode)){var i=t[en]||null;e:switch(t=r.stateNode,r.type){case"input":if(ul(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+jn(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==t&&c.form===t.form){var f=c[en]||null;if(!f)throw Error(a(90));ul(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===t.form&&yi(c)}break e;case"textarea":ku(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&fa(t,!!i.multiple,r,!1)}}}var fl=!1;function ya(t,r,i){if(fl)return t(r,i);fl=!0;try{var c=t(r);return c}finally{if(fl=!1,(pa!==null||Qs!==null)&&(Sh(),pa&&(r=pa,t=Qs,Qs=pa=null,bi(r),t)))for(r=0;r<t.length;r++)bi(t[r])}}function Ns(t,r){var i=t.stateNode;if(i===null)return null;var c=i[en]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vi=!1;if(ts)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){vi=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{vi=!1}var Ys=null,Bo=null,_i=null;function Ho(){if(_i)return _i;var t,r=Bo,i=r.length,c,f="value"in Ys?Ys.value:Ys.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var v=i-t;for(c=1;c<=v&&r[i-c]===f[m-c];c++);return _i=f.slice(t,1<c?1-c:void 0)}function wi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Sr(){return!0}function Ts(){return!1}function on(t){function r(i,c,f,m,v){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(i=t[E],this[E]=i?i(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sr:Ts,this.isPropagationStopped=Ts,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),r}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=on(Ar),xa=w({},Ar,{view:0,detail:0}),qo=on(xa),ba,ml,Ws,gl=w({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ws&&(Ws&&t.type==="mousemove"?(ba=t.screenX-Ws.screenX,ml=t.screenY-Ws.screenY):ml=ba=0,Ws=t),ba)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),Fo=on(gl),Ni=w({},gl,{dataTransfer:0}),Mu=on(Ni),Vu=w({},xa,{relatedTarget:0}),Ti=on(Vu),Go=w({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=on(Go),pl=w({},Ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lu=on(pl),Uu=w({},Ar,{data:0}),Js=on(Uu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Hu[t])?!!r[t]:!1}function va(){return qu}var wn=w({},xa,{key:function(t){if(t.key){var r=zu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=wi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(t){return t.type==="keypress"?wi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fu=on(wn),Gu=w({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=on(Gu),d=w({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),x=on(d),_=w({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=on(_),K=w({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=on(K),ye=w({},Ar,{newState:0,oldState:0}),Ue=on(ye),Dt=[9,13,27,32],rt=ts&&"CompositionEvent"in window,Nt=null;ts&&"documentMode"in document&&(Nt=document.documentMode);var ns=ts&&"TextEvent"in window&&!Nt,Zs=ts&&(!rt||Nt&&8<Nt&&11>=Nt),Es=" ",js=!1;function Ei(t,r){switch(t){case"keyup":return Dt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xl=!1;function nE(t,r){switch(t){case"compositionend":return yl(r);case"keypress":return r.which!==32?null:(js=!0,Es);case"textInput":return t=r.data,t===Es&&js?null:t;default:return null}}function sE(t,r){if(xl)return t==="compositionend"||!rt&&Ei(t,r)?(t=Ho(),_i=Bo=Ys=null,xl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Zs&&r.locale!=="ko"?null:r.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F0(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!rE[t.type]:r==="textarea"}function G0(t,r,i,c){pa?Qs?Qs.push(c):Qs=[c]:pa=c,r=Oh(r,"onChange"),0<r.length&&(i=new Xs("onChange","change",null,i,c),t.push({event:i,listeners:r}))}var Ko=null,$o=null;function aE(t){Sb(t,0)}function Ku(t){var r=Un(t);if(yi(r))return t}function K0(t,r){if(t==="change")return r}var $0=!1;if(ts){var kf;if(ts){var Df="oninput"in document;if(!Df){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Df=typeof Q0.oninput=="function"}kf=Df}else kf=!1;$0=kf&&(!document.documentMode||9<document.documentMode)}function Y0(){Ko&&(Ko.detachEvent("onpropertychange",X0),$o=Ko=null)}function X0(t){if(t.propertyName==="value"&&Ku($o)){var r=[];G0(r,$o,t,es(t)),ya(aE,r)}}function iE(t,r,i){t==="focusin"?(Y0(),Ko=r,$o=i,Ko.attachEvent("onpropertychange",X0)):t==="focusout"&&Y0()}function lE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku($o)}function oE(t,r){if(t==="click")return Ku(r)}function cE(t,r){if(t==="input"||t==="change")return Ku(r)}function uE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Bn=typeof Object.is=="function"?Object.is:uE;function Qo(t,r){if(Bn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!Ae.call(r,f)||!Bn(t[f],r[f]))return!1}return!0}function W0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J0(t,r){var i=W0(t);t=0;for(var c;i;){if(i.nodeType===3){if(c=t+i.textContent.length,t<=r&&c>=r)return{node:i,offset:r-t};t=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=W0(i)}}function Z0(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Z0(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ey(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=$s(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=$s(t.document)}return r}function Of(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var hE=ts&&"documentMode"in document&&11>=document.documentMode,bl=null,Mf=null,Yo=null,Vf=!1;function ty(t,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vf||bl==null||bl!==$s(c)||(c=bl,"selectionStart"in c&&Of(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Yo&&Qo(Yo,c)||(Yo=c,c=Oh(Mf,"onSelect"),0<c.length&&(r=new Xs("onSelect","select",null,r,i),t.push({event:r,listeners:c}),r.target=bl)))}function ji(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var vl={animationend:ji("Animation","AnimationEnd"),animationiteration:ji("Animation","AnimationIteration"),animationstart:ji("Animation","AnimationStart"),transitionrun:ji("Transition","TransitionRun"),transitionstart:ji("Transition","TransitionStart"),transitioncancel:ji("Transition","TransitionCancel"),transitionend:ji("Transition","TransitionEnd")},Pf={},ny={};ts&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Si(t){if(Pf[t])return Pf[t];if(!vl[t])return t;var r=vl[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in ny)return Pf[t]=r[i];return t}var sy=Si("animationend"),ry=Si("animationiteration"),ay=Si("animationstart"),dE=Si("transitionrun"),fE=Si("transitionstart"),mE=Si("transitioncancel"),iy=Si("transitionend"),ly=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Ss(t,r){ly.set(t,r),Gs(r,[t])}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ss=[],_l=0,Uf=0;function Qu(){for(var t=_l,r=Uf=_l=0;r<t;){var i=ss[r];ss[r++]=null;var c=ss[r];ss[r++]=null;var f=ss[r];ss[r++]=null;var m=ss[r];if(ss[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&oy(i,f,m)}}function Yu(t,r,i,c){ss[_l++]=t,ss[_l++]=r,ss[_l++]=i,ss[_l++]=c,Uf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function zf(t,r,i,c){return Yu(t,r,i,c),Xu(t)}function Ai(t,r){return Yu(t,null,null,r),Xu(t)}function oy(t,r,i){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,c=m.alternate,c!==null&&(c.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-kt(i),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=i|536870912),m):null}function Xu(t){if(50<yc)throw yc=0,Ym=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var wl={};function gE(t,r,i,c){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,r,i,c){return new gE(t,r,i,c)}function Bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rr(t,r){var i=t.alternate;return i===null?(i=Hn(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function cy(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wu(t,r,i,c,f,m){var v=0;if(c=t,typeof t=="function")Bf(t)&&(v=1);else if(typeof t=="string")v=v2(t,i,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Hn(31,i,r,f),t.elementType=A,t.lanes=m,t;case H:return Ci(i.children,f,m,r);case L:v=8,f|=24;break;case J:return t=Hn(12,i,r,f|2),t.elementType=J,t.lanes=m,t;case de:return t=Hn(13,i,r,f),t.elementType=de,t.lanes=m,t;case pe:return t=Hn(19,i,r,f),t.elementType=pe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G:v=10;break e;case te:v=9;break e;case X:v=11;break e;case j:v=14;break e;case N:v=16,c=null;break e}v=29,i=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Hn(v,i,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Ci(t,r,i,c){return t=Hn(7,t,c,r),t.lanes=i,t}function Hf(t,r,i){return t=Hn(6,t,null,r),t.lanes=i,t}function uy(t){var r=Hn(18,null,null,0);return r.stateNode=t,r}function qf(t,r,i){return r=Hn(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var hy=new WeakMap;function rs(t,r){if(typeof t=="object"&&t!==null){var i=hy.get(t);return i!==void 0?i:(r={value:t,source:r,stack:ot(r)},hy.set(t,r),r)}return{value:t,source:r,stack:ot(r)}}var Nl=[],Tl=0,Ju=null,Xo=0,as=[],is=0,_a=null,er=1,tr="";function Ir(t,r){Nl[Tl++]=Xo,Nl[Tl++]=Ju,Ju=t,Xo=r}function dy(t,r,i){as[is++]=er,as[is++]=tr,as[is++]=_a,_a=t;var c=er;t=tr;var f=32-kt(c)-1;c&=~(1<<f),i+=1;var m=32-kt(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,er=1<<32-kt(r)+f|i<<f|c,tr=m+t}else er=1<<m|i<<f|c,tr=t}function Ff(t){t.return!==null&&(Ir(t,1),dy(t,1,0))}function Gf(t){for(;t===Ju;)Ju=Nl[--Tl],Nl[Tl]=null,Xo=Nl[--Tl],Nl[Tl]=null;for(;t===_a;)_a=as[--is],as[is]=null,tr=as[--is],as[is]=null,er=as[--is],as[is]=null}function fy(t,r){as[is++]=er,as[is++]=tr,as[is++]=_a,er=r.id,tr=r.overflow,_a=t}var cn=null,bt=null,Ze=!1,wa=null,ls=!1,Kf=Error(a(519));function Na(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wo(rs(r,t)),Kf}function my(t){var r=t.stateNode,i=t.type,c=t.memoizedProps;switch(r[Lt]=t,r[en]=c,i){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<bc.length;i++)Ge(bc[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),Iu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),ma(r,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||Ib(r.textContent,i)?(c.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),c.onScroll!=null&&Ge("scroll",r),c.onScrollEnd!=null&&Ge("scrollend",r),c.onClick!=null&&(r.onclick=ws),r=!0):r=!1,r||Na(t,!0)}function gy(t){for(cn=t.return;cn;)switch(cn.tag){case 5:case 31:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:cn=cn.return}}function El(t){if(t!==cn)return!1;if(!Ze)return gy(t),Ze=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||ug(t.type,t.memoizedProps)),i=!i),i&&bt&&Na(t),gy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=zb(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=zb(t)}else r===27?(r=bt,Pa(t.type)?(t=gg,gg=null,bt=t):bt=r):bt=cn?cs(t.stateNode.nextSibling):null;return!0}function Ri(){bt=cn=null,Ze=!1}function $f(){var t=wa;return t!==null&&(In===null?In=t:In.push.apply(In,t),wa=null),t}function Wo(t){wa===null?wa=[t]:wa.push(t)}var Qf=k(null),Ii=null,kr=null;function Ta(t,r,i){he(Qf,r._currentValue),r._currentValue=i}function Dr(t){t._currentValue=Qf.current,F(Qf)}function Yf(t,r,i){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===i)break;t=t.return}}function Xf(t,r,i,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var V=0;V<r.length;V++)if(E.context===r[V]){m.lanes|=i,E=m.alternate,E!==null&&(E.lanes|=i),Yf(m.return,i,t),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=i,m=v.alternate,m!==null&&(m.lanes|=i),Yf(v,i,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function jl(t,r,i,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var E=f.type;Bn(f.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(f===D.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Tc):t=[Tc])}f=f.return}t!==null&&Xf(r,t,i,c),r.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!Bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ki(t){Ii=t,kr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return py(Ii,t)}function eh(t,r){return Ii===null&&ki(t),py(t,r)}function py(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},kr===null){if(t===null)throw Error(a(308));kr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else kr=kr.next=r;return i}var pE=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},yE=s.unstable_scheduleCallback,xE=s.unstable_NormalPriority,Bt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new pE,data:new Map,refCount:0}}function Jo(t){t.refCount--,t.refCount===0&&yE(xE,function(){t.controller.abort()})}var Zo=null,Jf=0,Sl=0,Al=null;function bE(t,r){if(Zo===null){var i=Zo=[];Jf=0,Sl=tg(),Al={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Jf++,r.then(yy,yy),r}function yy(){if(--Jf===0&&Zo!==null){Al!==null&&(Al.status="fulfilled");var t=Zo;Zo=null,Sl=0,Al=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function vE(t,r){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var xy=ee.S;ee.S=function(t,r){tb=Yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&bE(t,r),xy!==null&&xy(t,r)};var Di=k(null);function Zf(){var t=Di.current;return t!==null?t:yt.pooledCache}function th(t,r){r===null?he(Di,Di.current):he(Di,r.pool)}function by(){var t=Zf();return t===null?null:{parent:Bt._currentValue,pool:t}}var Cl=Error(a(460)),em=Error(a(474)),nh=Error(a(542)),sh={then:function(){}};function vy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _y(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(ws,ws),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ny(t),t;default:if(typeof r.status=="string")r.then(ws,ws);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ny(t),t}throw Mi=r,Cl}}function Oi(t){try{var r=t._init;return r(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Mi=i,Cl):i}}var Mi=null;function wy(){if(Mi===null)throw Error(a(459));var t=Mi;return Mi=null,t}function Ny(t){if(t===Cl||t===nh)throw Error(a(483))}var Rl=null,ec=0;function rh(t){var r=ec;return ec+=1,Rl===null&&(Rl=[]),_y(Rl,t,r)}function tc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ah(t,r){throw r.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Ty(t){function r(q,U){if(t){var $=q.deletions;$===null?(q.deletions=[U],q.flags|=16):$.push(U)}}function i(q,U){if(!t)return null;for(;U!==null;)r(q,U),U=U.sibling;return null}function c(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function f(q,U){return q=Rr(q,U),q.index=0,q.sibling=null,q}function m(q,U,$){return q.index=$,t?($=q.alternate,$!==null?($=$.index,$<U?(q.flags|=67108866,U):$):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function v(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function E(q,U,$,ie){return U===null||U.tag!==6?(U=Hf($,q.mode,ie),U.return=q,U):(U=f(U,$),U.return=q,U)}function V(q,U,$,ie){var je=$.type;return je===H?re(q,U,$.props.children,ie,$.key):U!==null&&(U.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===N&&Oi(je)===U.type)?(U=f(U,$.props),tc(U,$),U.return=q,U):(U=Wu($.type,$.key,$.props,null,q.mode,ie),tc(U,$),U.return=q,U)}function Y(q,U,$,ie){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=qf($,q.mode,ie),U.return=q,U):(U=f(U,$.children||[]),U.return=q,U)}function re(q,U,$,ie,je){return U===null||U.tag!==7?(U=Ci($,q.mode,ie,je),U.return=q,U):(U=f(U,$),U.return=q,U)}function oe(q,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Hf(""+U,q.mode,$),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case C:return $=Wu(U.type,U.key,U.props,null,q.mode,$),tc($,U),$.return=q,$;case B:return U=qf(U,q.mode,$),U.return=q,U;case N:return U=Oi(U),oe(q,U,$)}if(Pe(U)||M(U))return U=Ci(U,q.mode,$,null),U.return=q,U;if(typeof U.then=="function")return oe(q,rh(U),$);if(U.$$typeof===G)return oe(q,eh(q,U),$);ah(q,U)}return null}function W(q,U,$,ie){var je=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return je!==null?null:E(q,U,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return $.key===je?V(q,U,$,ie):null;case B:return $.key===je?Y(q,U,$,ie):null;case N:return $=Oi($),W(q,U,$,ie)}if(Pe($)||M($))return je!==null?null:re(q,U,$,ie,null);if(typeof $.then=="function")return W(q,U,rh($),ie);if($.$$typeof===G)return W(q,U,eh(q,$),ie);ah(q,$)}return null}function ne(q,U,$,ie,je){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get($)||null,E(U,q,""+ie,je);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return q=q.get(ie.key===null?$:ie.key)||null,V(U,q,ie,je);case B:return q=q.get(ie.key===null?$:ie.key)||null,Y(U,q,ie,je);case N:return ie=Oi(ie),ne(q,U,$,ie,je)}if(Pe(ie)||M(ie))return q=q.get($)||null,re(U,q,ie,je,null);if(typeof ie.then=="function")return ne(q,U,$,rh(ie),je);if(ie.$$typeof===G)return ne(q,U,$,eh(U,ie),je);ah(U,ie)}return null}function _e(q,U,$,ie){for(var je=null,tt=null,Te=U,Be=U=0,Qe=null;Te!==null&&Be<$.length;Be++){Te.index>Be?(Qe=Te,Te=null):Qe=Te.sibling;var nt=W(q,Te,$[Be],ie);if(nt===null){Te===null&&(Te=Qe);break}t&&Te&&nt.alternate===null&&r(q,Te),U=m(nt,U,Be),tt===null?je=nt:tt.sibling=nt,tt=nt,Te=Qe}if(Be===$.length)return i(q,Te),Ze&&Ir(q,Be),je;if(Te===null){for(;Be<$.length;Be++)Te=oe(q,$[Be],ie),Te!==null&&(U=m(Te,U,Be),tt===null?je=Te:tt.sibling=Te,tt=Te);return Ze&&Ir(q,Be),je}for(Te=c(Te);Be<$.length;Be++)Qe=ne(Te,q,Be,$[Be],ie),Qe!==null&&(t&&Qe.alternate!==null&&Te.delete(Qe.key===null?Be:Qe.key),U=m(Qe,U,Be),tt===null?je=Qe:tt.sibling=Qe,tt=Qe);return t&&Te.forEach(function(Ha){return r(q,Ha)}),Ze&&Ir(q,Be),je}function Ce(q,U,$,ie){if($==null)throw Error(a(151));for(var je=null,tt=null,Te=U,Be=U=0,Qe=null,nt=$.next();Te!==null&&!nt.done;Be++,nt=$.next()){Te.index>Be?(Qe=Te,Te=null):Qe=Te.sibling;var Ha=W(q,Te,nt.value,ie);if(Ha===null){Te===null&&(Te=Qe);break}t&&Te&&Ha.alternate===null&&r(q,Te),U=m(Ha,U,Be),tt===null?je=Ha:tt.sibling=Ha,tt=Ha,Te=Qe}if(nt.done)return i(q,Te),Ze&&Ir(q,Be),je;if(Te===null){for(;!nt.done;Be++,nt=$.next())nt=oe(q,nt.value,ie),nt!==null&&(U=m(nt,U,Be),tt===null?je=nt:tt.sibling=nt,tt=nt);return Ze&&Ir(q,Be),je}for(Te=c(Te);!nt.done;Be++,nt=$.next())nt=ne(Te,q,Be,nt.value,ie),nt!==null&&(t&&nt.alternate!==null&&Te.delete(nt.key===null?Be:nt.key),U=m(nt,U,Be),tt===null?je=nt:tt.sibling=nt,tt=nt);return t&&Te.forEach(function(I2){return r(q,I2)}),Ze&&Ir(q,Be),je}function gt(q,U,$,ie){if(typeof $=="object"&&$!==null&&$.type===H&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case C:e:{for(var je=$.key;U!==null;){if(U.key===je){if(je=$.type,je===H){if(U.tag===7){i(q,U.sibling),ie=f(U,$.props.children),ie.return=q,q=ie;break e}}else if(U.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===N&&Oi(je)===U.type){i(q,U.sibling),ie=f(U,$.props),tc(ie,$),ie.return=q,q=ie;break e}i(q,U);break}else r(q,U);U=U.sibling}$.type===H?(ie=Ci($.props.children,q.mode,ie,$.key),ie.return=q,q=ie):(ie=Wu($.type,$.key,$.props,null,q.mode,ie),tc(ie,$),ie.return=q,q=ie)}return v(q);case B:e:{for(je=$.key;U!==null;){if(U.key===je)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){i(q,U.sibling),ie=f(U,$.children||[]),ie.return=q,q=ie;break e}else{i(q,U);break}else r(q,U);U=U.sibling}ie=qf($,q.mode,ie),ie.return=q,q=ie}return v(q);case N:return $=Oi($),gt(q,U,$,ie)}if(Pe($))return _e(q,U,$,ie);if(M($)){if(je=M($),typeof je!="function")throw Error(a(150));return $=je.call($),Ce(q,U,$,ie)}if(typeof $.then=="function")return gt(q,U,rh($),ie);if($.$$typeof===G)return gt(q,U,eh(q,$),ie);ah(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(i(q,U.sibling),ie=f(U,$),ie.return=q,q=ie):(i(q,U),ie=Hf($,q.mode,ie),ie.return=q,q=ie),v(q)):i(q,U)}return function(q,U,$,ie){try{ec=0;var je=gt(q,U,$,ie);return Rl=null,je}catch(Te){if(Te===Cl||Te===nh)throw Te;var tt=Hn(29,Te,null,q.mode);return tt.lanes=ie,tt.return=q,tt}finally{}}}var Vi=Ty(!0),Ey=Ty(!1),Ea=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sa(t,r,i){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Xu(t),oy(t,null,i),r}return Yu(t,c,r,i),Xu(t)}function nc(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Co(t,i)}}function sm(t,r){var i=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var rm=!1;function sc(){if(rm){var t=Al;if(t!==null)throw t}}function rc(t,r,i,c){rm=!1;var f=t.updateQueue;Ea=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var V=E,Y=V.next;V.next=null,v===null?m=Y:v.next=Y,v=V;var re=t.alternate;re!==null&&(re=re.updateQueue,E=re.lastBaseUpdate,E!==v&&(E===null?re.firstBaseUpdate=Y:E.next=Y,re.lastBaseUpdate=V))}if(m!==null){var oe=f.baseState;v=0,re=Y=V=null,E=m;do{var W=E.lane&-536870913,ne=W!==E.lane;if(ne?($e&W)===W:(c&W)===W){W!==0&&W===Sl&&(rm=!0),re!==null&&(re=re.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var _e=t,Ce=E;W=r;var gt=i;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){oe=_e.call(gt,oe,W);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,W=typeof _e=="function"?_e.call(gt,oe,W):_e,W==null)break e;oe=w({},oe,W);break e;case 2:Ea=!0}}W=E.callback,W!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[W]:ne.push(W))}else ne={lane:W,tag:E.tag,payload:E.payload,callback:E.callback,next:null},re===null?(Y=re=ne,V=oe):re=re.next=ne,v|=W;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ne=E,E=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);re===null&&(V=oe),f.baseState=V,f.firstBaseUpdate=Y,f.lastBaseUpdate=re,m===null&&(f.shared.lanes=0),ka|=v,t.lanes=v,t.memoizedState=oe}}function jy(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function Sy(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)jy(i[t],r)}var Il=k(null),ih=k(0);function Ay(t,r){t=Hr,he(ih,t),he(Il,r),Hr=t|r.baseLanes}function am(){he(ih,Hr),he(Il,Il.current)}function im(){Hr=ih.current,F(Il),F(ih)}var qn=k(null),os=null;function Aa(t){var r=t.alternate;he(Ot,Ot.current&1),he(qn,t),os===null&&(r===null||Il.current!==null||r.memoizedState!==null)&&(os=t)}function lm(t){he(Ot,Ot.current),he(qn,t),os===null&&(os=t)}function Cy(t){t.tag===22?(he(Ot,Ot.current),he(qn,t),os===null&&(os=t)):Ca()}function Ca(){he(Ot,Ot.current),he(qn,qn.current)}function Fn(t){F(qn),os===t&&(os=null),F(Ot)}var Ot=k(0);function lh(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||fg(i)||mg(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Or=0,ze=null,ft=null,Ht=null,oh=!1,kl=!1,Pi=!1,ch=0,ac=0,Dl=null,_E=0;function St(){throw Error(a(321))}function om(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!Bn(t[i],r[i]))return!1;return!0}function cm(t,r,i,c,f,m){return Or=m,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?dx:Tm,Pi=!1,m=i(c,f),Pi=!1,kl&&(m=Iy(r,i,c,f)),Ry(t),m}function Ry(t){ee.H=oc;var r=ft!==null&&ft.next!==null;if(Or=0,Ht=ft=ze=null,oh=!1,ac=0,Dl=null,r)throw Error(a(300));t===null||qt||(t=t.dependencies,t!==null&&Zu(t)&&(qt=!0))}function Iy(t,r,i,c){ze=t;var f=0;do{if(kl&&(Dl=null),ac=0,kl=!1,25<=f)throw Error(a(301));if(f+=1,Ht=ft=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=fx,m=r(i,c)}while(kl);return m}function wE(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?ic(r):r,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(ze.flags|=1024),r}function um(){var t=ch!==0;return ch=0,t}function hm(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function dm(t){if(oh){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}oh=!1}Or=0,Ht=ft=ze=null,kl=!1,ac=ch=0,Dl=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ze.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Mt(){if(ft===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=Ht===null?ze.memoizedState:Ht.next;if(r!==null)Ht=r,ft=t;else{if(t===null)throw ze.alternate===null?Error(a(467)):Error(a(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ht===null?ze.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(t){var r=ac;return ac+=1,Dl===null&&(Dl=[]),t=_y(Dl,t,r),r=ze,(Ht===null?r.memoizedState:Ht.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?dx:Tm),t}function hh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ic(t);if(t.$$typeof===G)return un(t)}throw Error(a(438,String(t)))}function fm(t){var r=null,i=ze.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=uh(),ze.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),c=0;c<t;c++)i[c]=P;return r.index++,i}function Mr(t,r){return typeof r=="function"?r(t):r}function dh(t){var r=Mt();return mm(r,ft,t)}function mm(t,r,i){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var E=v=null,V=null,Y=r,re=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?($e&oe)===oe:(Or&oe)===oe){var W=Y.revertLane;if(W===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===Sl&&(re=!0);else if((Or&W)===W){Y=Y.next,W===Sl&&(re=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(E=V=oe,v=m):V=V.next=oe,ze.lanes|=W,ka|=W;oe=Y.action,Pi&&i(m,oe),m=Y.hasEagerState?Y.eagerState:i(m,oe)}else W={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(E=V=W,v=m):V=V.next=W,ze.lanes|=oe,ka|=oe;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?v=m:V.next=E,!Bn(m,t.memoizedState)&&(qt=!0,re&&(i=Al,i!==null)))throw i;t.memoizedState=m,t.baseState=v,t.baseQueue=V,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function gm(t){var r=Mt(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var c=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);Bn(m,r.memoizedState)||(qt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,c]}function ky(t,r,i){var c=ze,f=Mt(),m=Ze;if(m){if(i===void 0)throw Error(a(407));i=i()}else i=r();var v=!Bn((ft||f).memoizedState,i);if(v&&(f.memoizedState=i,qt=!0),f=f.queue,xm(My.bind(null,c,f,t),[t]),f.getSnapshot!==r||v||Ht!==null&&Ht.memoizedState.tag&1){if(c.flags|=2048,Ol(9,{destroy:void 0},Oy.bind(null,c,f,i,r),null),yt===null)throw Error(a(349));m||(Or&127)!==0||Dy(c,r,i)}return i}function Dy(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=ze.updateQueue,r===null?(r=uh(),ze.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function Oy(t,r,i,c){r.value=i,r.getSnapshot=c,Vy(r)&&Py(t)}function My(t,r,i){return i(function(){Vy(r)&&Py(t)})}function Vy(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!Bn(t,i)}catch{return!0}}function Py(t){var r=Ai(t,2);r!==null&&kn(r,t,2)}function pm(t){var r=Nn();if(typeof t=="function"){var i=t;if(t=i(),Pi){Jn(!0);try{i()}finally{Jn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:t},r}function Ly(t,r,i,c){return t.baseState=i,mm(t,ft,typeof c=="function"?c:Mr)}function NE(t,r,i,c,f){if(gh(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};ee.T!==null?i(!0):m.isTransition=!1,c(m),i=r.pending,i===null?(m.next=r.pending=m,Uy(r,m)):(m.next=i.next,r.pending=i.next=m)}}function Uy(t,r){var i=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=ee.T,v={};ee.T=v;try{var E=i(f,c),V=ee.S;V!==null&&V(v,E),zy(t,r,E)}catch(Y){ym(t,r,Y)}finally{m!==null&&v.types!==null&&(m.types=v.types),ee.T=m}}else try{m=i(f,c),zy(t,r,m)}catch(Y){ym(t,r,Y)}}function zy(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){By(t,r,c)},function(c){return ym(t,r,c)}):By(t,r,i)}function By(t,r,i){r.status="fulfilled",r.value=i,Hy(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,Uy(t,i)))}function ym(t,r,i){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,Hy(r),r=r.next;while(r!==c)}t.action=null}function Hy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function qy(t,r){return r}function Fy(t,r){if(Ze){var i=yt.formState;if(i!==null){e:{var c=ze;if(Ze){if(bt){t:{for(var f=bt,m=ls;f.nodeType!==8;){if(!m){f=null;break t}if(f=cs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){bt=cs(f.nextSibling),c=f.data==="F!";break e}}Na(c)}c=!1}c&&(r=i[0])}}return i=Nn(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qy,lastRenderedState:r},i.queue=c,i=cx.bind(null,ze,c),c.dispatch=i,c=pm(!1),m=Nm.bind(null,ze,!1,c.queue),c=Nn(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,i=NE.bind(null,ze,f,m,i),f.dispatch=i,c.memoizedState=t,[r,i,!1]}function Gy(t){var r=Mt();return Ky(r,ft,t)}function Ky(t,r,i){if(r=mm(t,r,qy)[0],t=dh(Mr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=ic(r)}catch(v){throw v===Cl?nh:v}else c=r;r=Mt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(ze.flags|=2048,Ol(9,{destroy:void 0},TE.bind(null,f,i),null)),[c,m,t]}function TE(t,r){t.action=r}function $y(t){var r=Mt(),i=ft;if(i!==null)return Ky(r,i,t);Mt(),r=r.memoizedState,i=Mt();var c=i.queue.dispatch;return i.memoizedState=t,[r,c,!1]}function Ol(t,r,i,c){return t={tag:t,create:i,deps:c,inst:r,next:null},r=ze.updateQueue,r===null&&(r=uh(),ze.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(c=i.next,i.next=t,t.next=c,r.lastEffect=t),t}function Qy(){return Mt().memoizedState}function fh(t,r,i,c){var f=Nn();ze.flags|=t,f.memoizedState=Ol(1|r,{destroy:void 0},i,c===void 0?null:c)}function mh(t,r,i,c){var f=Mt();c=c===void 0?null:c;var m=f.memoizedState.inst;ft!==null&&c!==null&&om(c,ft.memoizedState.deps)?f.memoizedState=Ol(r,m,i,c):(ze.flags|=t,f.memoizedState=Ol(1|r,m,i,c))}function Yy(t,r){fh(8390656,8,t,r)}function xm(t,r){mh(2048,8,t,r)}function EE(t){ze.flags|=4;var r=ze.updateQueue;if(r===null)r=uh(),ze.updateQueue=r,r.events=[t];else{var i=r.events;i===null?r.events=[t]:i.push(t)}}function Xy(t){var r=Mt().memoizedState;return EE({ref:r,nextImpl:t}),function(){if((at&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Wy(t,r){return mh(4,2,t,r)}function Jy(t,r){return mh(4,4,t,r)}function Zy(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ex(t,r,i){i=i!=null?i.concat([t]):null,mh(4,4,Zy.bind(null,r,t),i)}function bm(){}function tx(t,r){var i=Mt();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&om(r,c[1])?c[0]:(i.memoizedState=[t,r],t)}function nx(t,r){var i=Mt();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&om(r,c[1]))return c[0];if(c=t(),Pi){Jn(!0);try{t()}finally{Jn(!1)}}return i.memoizedState=[c,r],c}function vm(t,r,i){return i===void 0||(Or&1073741824)!==0&&($e&261930)===0?t.memoizedState=r:(t.memoizedState=i,t=sb(),ze.lanes|=t,ka|=t,i)}function sx(t,r,i,c){return Bn(i,r)?i:Il.current!==null?(t=vm(t,i,c),Bn(t,r)||(qt=!0),t):(Or&42)===0||(Or&1073741824)!==0&&($e&261930)===0?(qt=!0,t.memoizedState=i):(t=sb(),ze.lanes|=t,ka|=t,r)}function rx(t,r,i,c,f){var m=ae.p;ae.p=m!==0&&8>m?m:8;var v=ee.T,E={};ee.T=E,Nm(t,!1,r,i);try{var V=f(),Y=ee.S;if(Y!==null&&Y(E,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var re=vE(V,c);lc(t,r,re,$n(t))}else lc(t,r,c,$n(t))}catch(oe){lc(t,r,{then:function(){},status:"rejected",reason:oe},$n())}finally{ae.p=m,v!==null&&E.types!==null&&(v.types=E.types),ee.T=v}}function jE(){}function _m(t,r,i,c){if(t.tag!==5)throw Error(a(476));var f=ax(t).queue;rx(t,f,r,xe,i===null?jE:function(){return ix(t),i(c)})}function ax(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:xe},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ix(t){var r=ax(t);r.next===null&&(r=t.alternate.memoizedState),lc(t,r.next.queue,{},$n())}function wm(){return un(Tc)}function lx(){return Mt().memoizedState}function ox(){return Mt().memoizedState}function SE(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=$n();t=ja(i);var c=Sa(r,t,i);c!==null&&(kn(c,r,i),nc(c,r,i)),r={cache:Wf()},t.payload=r;return}r=r.return}}function AE(t,r,i){var c=$n();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},gh(t)?ux(r,i):(i=zf(t,r,i,c),i!==null&&(kn(i,t,c),hx(i,r,c)))}function cx(t,r,i){var c=$n();lc(t,r,i,c)}function lc(t,r,i,c){var f={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(gh(t))ux(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,E=m(v,i);if(f.hasEagerState=!0,f.eagerState=E,Bn(E,v))return Yu(t,r,f,0),yt===null&&Qu(),!1}catch{}finally{}if(i=zf(t,r,f,c),i!==null)return kn(i,t,c),hx(i,r,c),!0}return!1}function Nm(t,r,i,c){if(c={lane:2,revertLane:tg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gh(t)){if(r)throw Error(a(479))}else r=zf(t,i,c,2),r!==null&&kn(r,t,2)}function gh(t){var r=t.alternate;return t===ze||r!==null&&r===ze}function ux(t,r){kl=oh=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function hx(t,r,i){if((i&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Co(t,i)}}var oc={readContext:un,use:hh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};oc.useEffectEvent=St;var dx={readContext:un,use:hh,useCallback:function(t,r){return Nn().memoizedState=[t,r===void 0?null:r],t},useContext:un,useEffect:Yy,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,fh(4194308,4,Zy.bind(null,r,t),i)},useLayoutEffect:function(t,r){return fh(4194308,4,t,r)},useInsertionEffect:function(t,r){fh(4,2,t,r)},useMemo:function(t,r){var i=Nn();r=r===void 0?null:r;var c=t();if(Pi){Jn(!0);try{t()}finally{Jn(!1)}}return i.memoizedState=[c,r],c},useReducer:function(t,r,i){var c=Nn();if(i!==void 0){var f=i(r);if(Pi){Jn(!0);try{i(r)}finally{Jn(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=AE.bind(null,ze,t),[c.memoizedState,t]},useRef:function(t){var r=Nn();return t={current:t},r.memoizedState=t},useState:function(t){t=pm(t);var r=t.queue,i=cx.bind(null,ze,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:bm,useDeferredValue:function(t,r){var i=Nn();return vm(i,t,r)},useTransition:function(){var t=pm(!1);return t=rx.bind(null,ze,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var c=ze,f=Nn();if(Ze){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),yt===null)throw Error(a(349));($e&127)!==0||Dy(c,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,Yy(My.bind(null,c,m,t),[t]),c.flags|=2048,Ol(9,{destroy:void 0},Oy.bind(null,c,m,i,r),null),i},useId:function(){var t=Nn(),r=yt.identifierPrefix;if(Ze){var i=tr,c=er;i=(c&~(1<<32-kt(c)-1)).toString(32)+i,r="_"+r+"R_"+i,i=ch++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=_E++,r="_"+r+"r_"+i.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:wm,useFormState:Fy,useActionState:Fy,useOptimistic:function(t){var r=Nn();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Nm.bind(null,ze,!0,i),i.dispatch=r,[t,r]},useMemoCache:fm,useCacheRefresh:function(){return Nn().memoizedState=SE.bind(null,ze)},useEffectEvent:function(t){var r=Nn(),i={impl:t};return r.memoizedState=i,function(){if((at&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},Tm={readContext:un,use:hh,useCallback:tx,useContext:un,useEffect:xm,useImperativeHandle:ex,useInsertionEffect:Wy,useLayoutEffect:Jy,useMemo:nx,useReducer:dh,useRef:Qy,useState:function(){return dh(Mr)},useDebugValue:bm,useDeferredValue:function(t,r){var i=Mt();return sx(i,ft.memoizedState,t,r)},useTransition:function(){var t=dh(Mr)[0],r=Mt().memoizedState;return[typeof t=="boolean"?t:ic(t),r]},useSyncExternalStore:ky,useId:lx,useHostTransitionStatus:wm,useFormState:Gy,useActionState:Gy,useOptimistic:function(t,r){var i=Mt();return Ly(i,ft,t,r)},useMemoCache:fm,useCacheRefresh:ox};Tm.useEffectEvent=Xy;var fx={readContext:un,use:hh,useCallback:tx,useContext:un,useEffect:xm,useImperativeHandle:ex,useInsertionEffect:Wy,useLayoutEffect:Jy,useMemo:nx,useReducer:gm,useRef:Qy,useState:function(){return gm(Mr)},useDebugValue:bm,useDeferredValue:function(t,r){var i=Mt();return ft===null?vm(i,t,r):sx(i,ft.memoizedState,t,r)},useTransition:function(){var t=gm(Mr)[0],r=Mt().memoizedState;return[typeof t=="boolean"?t:ic(t),r]},useSyncExternalStore:ky,useId:lx,useHostTransitionStatus:wm,useFormState:$y,useActionState:$y,useOptimistic:function(t,r){var i=Mt();return ft!==null?Ly(i,ft,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:fm,useCacheRefresh:ox};fx.useEffectEvent=Xy;function Em(t,r,i,c){r=t.memoizedState,i=i(c,r),i=i==null?r:w({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var jm={enqueueSetState:function(t,r,i){t=t._reactInternals;var c=$n(),f=ja(c);f.payload=r,i!=null&&(f.callback=i),r=Sa(t,f,c),r!==null&&(kn(r,t,c),nc(r,t,c))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var c=$n(),f=ja(c);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=Sa(t,f,c),r!==null&&(kn(r,t,c),nc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=$n(),c=ja(i);c.tag=2,r!=null&&(c.callback=r),r=Sa(t,c,i),r!==null&&(kn(r,t,i),nc(r,t,i))}};function mx(t,r,i,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!Qo(i,c)||!Qo(f,m):!0}function gx(t,r,i,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==t&&jm.enqueueReplaceState(r,r.state,null)}function Li(t,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(t=t.defaultProps){i===r&&(i=w({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function px(t){$u(t)}function yx(t){console.error(t)}function xx(t){$u(t)}function ph(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function bx(t,r,i){try{var c=t.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Sm(t,r,i){return i=ja(i),i.tag=3,i.payload={element:null},i.callback=function(){ph(t,r)},i}function vx(t){return t=ja(t),t.tag=3,t}function _x(t,r,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){bx(r,i,c)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){bx(r,i,c),typeof f!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function CE(t,r,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&jl(r,i,f,!0),i=qn.current,i!==null){switch(i.tag){case 31:case 13:return os===null?Ah():i.alternate===null&&At===0&&(At=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===sh?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),Jm(t,c,f)),!1;case 22:return i.flags|=65536,c===sh?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),Jm(t,c,f)),!1}throw Error(a(435,i.tag))}return Jm(t,c,f),Ah(),!1}if(Ze)return r=qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Kf&&(t=Error(a(422),{cause:c}),Wo(rs(t,i)))):(c!==Kf&&(r=Error(a(423),{cause:c}),Wo(rs(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=rs(c,i),f=Sm(t.stateNode,c,f),sm(t,f),At!==4&&(At=2)),!1;var m=Error(a(520),{cause:c});if(m=rs(m,i),pc===null?pc=[m]:pc.push(m),At!==4&&(At=2),r===null)return!0;c=rs(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Sm(i.stateNode,c,t),sm(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Da===null||!Da.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=vx(f),_x(f,t,i,c),sm(i,f),!1}i=i.return}while(i!==null);return!1}var Am=Error(a(461)),qt=!1;function hn(t,r,i,c){r.child=t===null?Ey(r,null,i,c):Vi(r,t.child,i,c)}function wx(t,r,i,c,f){i=i.render;var m=r.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return ki(r),c=cm(t,r,i,v,m,f),E=um(),t!==null&&!qt?(hm(t,r,f),Vr(t,r,f)):(Ze&&E&&Ff(r),r.flags|=1,hn(t,r,c,f),r.child)}function Nx(t,r,i,c,f){if(t===null){var m=i.type;return typeof m=="function"&&!Bf(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Tx(t,r,m,c,f)):(t=Wu(i.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Vm(t,f)){var v=m.memoizedProps;if(i=i.compare,i=i!==null?i:Qo,i(v,c)&&t.ref===r.ref)return Vr(t,r,f)}return r.flags|=1,t=Rr(m,c),t.ref=r.ref,t.return=r,r.child=t}function Tx(t,r,i,c,f){if(t!==null){var m=t.memoizedProps;if(Qo(m,c)&&t.ref===r.ref)if(qt=!1,r.pendingProps=c=m,Vm(t,f))(t.flags&131072)!==0&&(qt=!0);else return r.lanes=t.lanes,Vr(t,r,f)}return Cm(t,r,i,c,f)}function Ex(t,r,i,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return jx(t,r,m,i,c)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&th(r,m!==null?m.cachePool:null),m!==null?Ay(r,m):am(),Cy(r);else return c=r.lanes=536870912,jx(t,r,m!==null?m.baseLanes|i:i,i,c)}else m!==null?(th(r,m.cachePool),Ay(r,m),Ca(),r.memoizedState=null):(t!==null&&th(r,null),am(),Ca());return hn(t,r,f,i),r.child}function cc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function jx(t,r,i,c,f){var m=Zf();return m=m===null?null:{parent:Bt._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},t!==null&&th(r,null),am(),Cy(r),t!==null&&jl(t,r,c,!0),r.childLanes=f,null}function yh(t,r){return r=bh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Sx(t,r,i){return Vi(r,t.child,null,i),t=yh(r,r.pendingProps),t.flags|=2,Fn(r),r.memoizedState=null,t}function RE(t,r,i){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ze){if(c.mode==="hidden")return t=yh(r,c),r.lanes=536870912,cc(null,t);if(lm(r),(t=bt)?(t=Ub(t,ls),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_a!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},i=uy(t),i.return=r,r.child=i,cn=r,bt=null)):t=null,t===null)throw Na(r);return r.lanes=536870912,null}return yh(r,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(lm(r),f)if(r.flags&256)r.flags&=-257,r=Sx(t,r,i);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(qt||jl(t,r,i,!1),f=(i&t.childLanes)!==0,qt||f){if(c=yt,c!==null&&(v=Ro(c,i),v!==0&&v!==m.retryLane))throw m.retryLane=v,Ai(t,v),kn(c,t,v),Am;Ah(),r=Sx(t,r,i)}else t=m.treeContext,bt=cs(v.nextSibling),cn=r,Ze=!0,wa=null,ls=!1,t!==null&&fy(r,t),r=yh(r,c),r.flags|=4096;return r}return t=Rr(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function xh(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Cm(t,r,i,c,f){return ki(r),i=cm(t,r,i,c,void 0,f),c=um(),t!==null&&!qt?(hm(t,r,f),Vr(t,r,f)):(Ze&&c&&Ff(r),r.flags|=1,hn(t,r,i,f),r.child)}function Ax(t,r,i,c,f,m){return ki(r),r.updateQueue=null,i=Iy(r,c,i,f),Ry(t),c=um(),t!==null&&!qt?(hm(t,r,m),Vr(t,r,m)):(Ze&&c&&Ff(r),r.flags|=1,hn(t,r,i,m),r.child)}function Cx(t,r,i,c,f){if(ki(r),r.stateNode===null){var m=wl,v=i.contextType;typeof v=="object"&&v!==null&&(m=un(v)),m=new i(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=jm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},tm(r),v=i.contextType,m.context=typeof v=="object"&&v!==null?un(v):wl,m.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Em(r,i,v,c),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&jm.enqueueReplaceState(m,m.state,null),rc(r,c,m,f),sc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var E=r.memoizedProps,V=Li(i,E);m.props=V;var Y=m.context,re=i.contextType;v=wl,typeof re=="object"&&re!==null&&(v=un(re));var oe=i.getDerivedStateFromProps;re=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Y!==v)&&gx(r,m,c,v),Ea=!1;var W=r.memoizedState;m.state=W,rc(r,c,m,f),sc(),Y=r.memoizedState,E||W!==Y||Ea?(typeof oe=="function"&&(Em(r,i,oe,c),Y=r.memoizedState),(V=Ea||mx(r,i,V,c,W,Y,v))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),m.props=c,m.state=Y,m.context=v,c=V):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,nm(t,r),v=r.memoizedProps,re=Li(i,v),m.props=re,oe=r.pendingProps,W=m.context,Y=i.contextType,V=wl,typeof Y=="object"&&Y!==null&&(V=un(Y)),E=i.getDerivedStateFromProps,(Y=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==oe||W!==V)&&gx(r,m,c,V),Ea=!1,W=r.memoizedState,m.state=W,rc(r,c,m,f),sc();var ne=r.memoizedState;v!==oe||W!==ne||Ea||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof E=="function"&&(Em(r,i,E,c),ne=r.memoizedState),(re=Ea||mx(r,i,re,c,W,ne,V)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ne,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ne,V)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ne),m.props=c,m.state=ne,m.context=V,c=re):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,xh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=Vi(r,t.child,null,f),r.child=Vi(r,null,i,f)):hn(t,r,i,f),r.memoizedState=m.state,t=r.child):t=Vr(t,r,f),t}function Rx(t,r,i,c){return Ri(),r.flags|=256,hn(t,r,i,c),r.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Im(t){return{baseLanes:t,cachePool:by()}}function km(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Kn),t}function Ix(t,r,i){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ze){if(f?Aa(r):Ca(),(t=bt)?(t=Ub(t,ls),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_a!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},i=uy(t),i.return=r,r.child=i,cn=r,bt=null)):t=null,t===null)throw Na(r);return mg(t)?r.lanes=32:r.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Ca(),f=r.mode,E=bh({mode:"hidden",children:E},f),c=Ci(c,f,i,null),E.return=r,c.return=r,E.sibling=c,r.child=E,c=r.child,c.memoizedState=Im(i),c.childLanes=km(t,v,i),r.memoizedState=Rm,cc(null,c)):(Aa(r),Dm(r,E))}var V=t.memoizedState;if(V!==null&&(E=V.dehydrated,E!==null)){if(m)r.flags&256?(Aa(r),r.flags&=-257,r=Om(t,r,i)):r.memoizedState!==null?(Ca(),r.child=t.child,r.flags|=128,r=null):(Ca(),E=c.fallback,f=r.mode,c=bh({mode:"visible",children:c.children},f),E=Ci(E,f,i,null),E.flags|=2,c.return=r,E.return=r,c.sibling=E,r.child=c,Vi(r,t.child,null,i),c=r.child,c.memoizedState=Im(i),c.childLanes=km(t,v,i),r.memoizedState=Rm,r=cc(null,c));else if(Aa(r),mg(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var Y=v.dgst;v=Y,c=Error(a(419)),c.stack="",c.digest=v,Wo({value:c,source:null,stack:null}),r=Om(t,r,i)}else if(qt||jl(t,r,i,!1),v=(i&t.childLanes)!==0,qt||v){if(v=yt,v!==null&&(c=Ro(v,i),c!==0&&c!==V.retryLane))throw V.retryLane=c,Ai(t,c),kn(v,t,c),Am;fg(E)||Ah(),r=Om(t,r,i)}else fg(E)?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,bt=cs(E.nextSibling),cn=r,Ze=!0,wa=null,ls=!1,t!==null&&fy(r,t),r=Dm(r,c.children),r.flags|=4096);return r}return f?(Ca(),E=c.fallback,f=r.mode,V=t.child,Y=V.sibling,c=Rr(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Y!==null?E=Rr(Y,E):(E=Ci(E,f,i,null),E.flags|=2),E.return=r,c.return=r,c.sibling=E,r.child=c,cc(null,c),c=r.child,E=t.child.memoizedState,E===null?E=Im(i):(f=E.cachePool,f!==null?(V=Bt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=by(),E={baseLanes:E.baseLanes|i,cachePool:f}),c.memoizedState=E,c.childLanes=km(t,v,i),r.memoizedState=Rm,cc(t.child,c)):(Aa(r),i=t.child,t=i.sibling,i=Rr(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=i,r.memoizedState=null,i)}function Dm(t,r){return r=bh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function bh(t,r){return t=Hn(22,t,null,r),t.lanes=0,t}function Om(t,r,i){return Vi(r,t.child,null,i),t=Dm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function kx(t,r,i){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Yf(t.return,r,i)}function Mm(t,r,i,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=i,v.tailMode=f,v.treeForkCount=m)}function Dx(t,r,i){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=Ot.current,E=(v&2)!==0;if(E?(v=v&1|2,r.flags|=128):v&=1,he(Ot,v),hn(t,r,c,i),c=Ze?Xo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kx(t,i,r);else if(t.tag===19)kx(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&lh(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Mm(r,!1,f,i,m,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&lh(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Mm(r,!0,i,null,m,c);break;case"together":Mm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Vr(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),ka|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(jl(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,i=Rr(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=Rr(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Vm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function IE(t,r,i){switch(r.tag){case 3:se(r,r.stateNode.containerInfo),Ta(r,Bt,t.memoizedState.cache),Ri();break;case 27:case 5:Le(r);break;case 4:se(r,r.stateNode.containerInfo);break;case 10:Ta(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,lm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Aa(r),r.flags|=128,null):(i&r.child.childLanes)!==0?Ix(t,r,i):(Aa(r),t=Vr(t,r,i),t!==null?t.sibling:null);Aa(r);break;case 19:var f=(t.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(jl(t,r,i,!1),c=(i&r.childLanes)!==0),f){if(c)return Dx(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(Ot,Ot.current),c)break;return null;case 22:return r.lanes=0,Ex(t,r,i,r.pendingProps);case 24:Ta(r,Bt,t.memoizedState.cache)}return Vr(t,r,i)}function Ox(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)qt=!0;else{if(!Vm(t,i)&&(r.flags&128)===0)return qt=!1,IE(t,r,i);qt=(t.flags&131072)!==0}else qt=!1,Ze&&(r.flags&1048576)!==0&&dy(r,Xo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=Oi(r.elementType),r.type=t,typeof t=="function")Bf(t)?(c=Li(t,c),r.tag=1,r=Cx(null,r,t,c,i)):(r.tag=0,r=Cm(null,r,t,c,i));else{if(t!=null){var f=t.$$typeof;if(f===X){r.tag=11,r=wx(null,r,t,c,i);break e}else if(f===j){r.tag=14,r=Nx(null,r,t,c,i);break e}}throw r=De(t)||t,Error(a(306,r,""))}}return r;case 0:return Cm(t,r,r.type,r.pendingProps,i);case 1:return c=r.type,f=Li(c,r.pendingProps),Cx(t,r,c,f,i);case 3:e:{if(se(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,nm(t,r),rc(r,c,null,i);var v=r.memoizedState;if(c=v.cache,Ta(r,Bt,c),c!==m.cache&&Xf(r,[Bt],i,!0),sc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Rx(t,r,c,i);break e}else if(c!==f){f=rs(Error(a(424)),r),Wo(f),r=Rx(t,r,c,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=cs(t.firstChild),cn=r,Ze=!0,wa=null,ls=!0,i=Ey(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ri(),c===f){r=Vr(t,r,i);break e}hn(t,r,c,i)}r=r.child}return r;case 26:return xh(t,r),t===null?(i=Gb(r.type,null,r.pendingProps,null))?r.memoizedState=i:Ze||(i=r.type,t=r.pendingProps,c=Mh(z.current).createElement(i),c[Lt]=r,c[en]=t,dn(c,i,t),Ut(c),r.stateNode=c):r.memoizedState=Gb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Le(r),t===null&&Ze&&(c=r.stateNode=Hb(r.type,r.pendingProps,z.current),cn=r,ls=!0,f=bt,Pa(r.type)?(gg=f,bt=cs(c.firstChild)):bt=f),hn(t,r,r.pendingProps.children,i),xh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ze&&((f=c=bt)&&(c=l2(c,r.type,r.pendingProps,ls),c!==null?(r.stateNode=c,cn=r,bt=cs(c.firstChild),ls=!1,f=!0):f=!1),f||Na(r)),Le(r),f=r.type,m=r.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,ug(f,m)?c=null:v!==null&&ug(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=cm(t,r,wE,null,null,i),Tc._currentValue=f),xh(t,r),hn(t,r,c,i),r.child;case 6:return t===null&&Ze&&((t=i=bt)&&(i=o2(i,r.pendingProps,ls),i!==null?(r.stateNode=i,cn=r,bt=null,t=!0):t=!1),t||Na(r)),null;case 13:return Ix(t,r,i);case 4:return se(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Vi(r,null,c,i):hn(t,r,c,i),r.child;case 11:return wx(t,r,r.type,r.pendingProps,i);case 7:return hn(t,r,r.pendingProps,i),r.child;case 8:return hn(t,r,r.pendingProps.children,i),r.child;case 12:return hn(t,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,Ta(r,r.type,c.value),hn(t,r,c.children,i),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ki(r),f=un(f),c=c(f),r.flags|=1,hn(t,r,c,i),r.child;case 14:return Nx(t,r,r.type,r.pendingProps,i);case 15:return Tx(t,r,r.type,r.pendingProps,i);case 19:return Dx(t,r,i);case 31:return RE(t,r,i);case 22:return Ex(t,r,i,r.pendingProps);case 24:return ki(r),c=un(Bt),t===null?(f=Zf(),f===null&&(f=yt,m=Wf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:c,cache:f},tm(r),Ta(r,Bt,f)):((t.lanes&i)!==0&&(nm(t,r),rc(r,null,null,i),sc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ta(r,Bt,c)):(c=m.cache,Ta(r,Bt,c),c!==f.cache&&Xf(r,[Bt],i,!0))),hn(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Pr(t){t.flags|=4}function Pm(t,r,i,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(lb())t.flags|=8192;else throw Mi=sh,em}else t.flags&=-16777217}function Mx(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xb(r))if(lb())t.flags|=8192;else throw Mi=sh,em}function vh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ju():536870912,t.lanes|=r,Ll|=r)}function uc(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,c=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=i,r}function kE(t,r,i){var c=r.pendingProps;switch(Gf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return i=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Dr(Bt),fe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(El(r)?Pr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,$f())),vt(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Pr(r),m!==null?(vt(r),Mx(r,m)):(vt(r),Pm(r,f,null,c,i))):m?m!==t.memoizedState?(Pr(r),vt(r),Mx(r,m)):(vt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&Pr(r),vt(r),Pm(r,f,t,c,i)),null;case 27:if(st(r),i=z.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Pr(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return vt(r),null}t=Q.current,El(r)?my(r):(t=Hb(f,c,i),r.stateNode=t,Pr(r))}return vt(r),null;case 5:if(st(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Pr(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return vt(r),null}if(m=Q.current,El(r))my(r);else{var v=Mh(z.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Lt]=r,m[en]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(dn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Pr(r)}}return vt(r),Pm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,i),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&Pr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=z.current,El(r)){if(t=r.stateNode,i=r.memoizedProps,c=null,f=cn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Lt]=r,t=!!(t.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Ib(t.nodeValue,i)),t||Na(r,!0)}else t=Mh(t).createTextNode(c),t[Lt]=r,r.stateNode=t}return vt(r),null;case 31:if(i=r.memoizedState,t===null||t.memoizedState!==null){if(c=El(r),i!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Lt]=r}else Ri(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),t=!1}else i=$f(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return r.flags&256?(Fn(r),r):(Fn(r),null);if((r.flags&128)!==0)throw Error(a(558))}return vt(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=El(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Lt]=r}else Ri(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),f=!1}else f=$f(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Fn(r),r):(Fn(r),null)}return Fn(r),(r.flags&128)!==0?(r.lanes=i,r):(i=c!==null,t=t!==null&&t.memoizedState!==null,i&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),i!==t&&i&&(r.child.flags|=8192),vh(r,r.updateQueue),vt(r),null);case 4:return fe(),t===null&&ag(r.stateNode.containerInfo),vt(r),null;case 10:return Dr(r.type),vt(r),null;case 19:if(F(Ot),c=r.memoizedState,c===null)return vt(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)uc(c,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=lh(t),m!==null){for(r.flags|=128,uc(c,!1),t=m.updateQueue,r.updateQueue=t,vh(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)cy(i,t),i=i.sibling;return he(Ot,Ot.current&1|2),Ze&&Ir(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Yt()>Eh&&(r.flags|=128,f=!0,uc(c,!1),r.lanes=4194304)}else{if(!f)if(t=lh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,vh(r,t),uc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Ze)return vt(r),null}else 2*Yt()-c.renderingStartTime>Eh&&i!==536870912&&(r.flags|=128,f=!0,uc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Yt(),t.sibling=null,i=Ot.current,he(Ot,f?i&1|2:i&1),Ze&&Ir(r,c.treeForkCount),t):(vt(r),null);case 22:case 23:return Fn(r),im(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),i=r.updateQueue,i!==null&&vh(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),t!==null&&F(Di),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),Dr(Bt),vt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function DE(t,r){switch(Gf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Dr(Bt),fe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return st(r),null;case 31:if(r.memoizedState!==null){if(Fn(r),r.alternate===null)throw Error(a(340));Ri()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Fn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ri()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return F(Ot),null;case 4:return fe(),null;case 10:return Dr(r.type),null;case 22:case 23:return Fn(r),im(),t!==null&&F(Di),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Dr(Bt),null;case 25:return null;default:return null}}function Vx(t,r){switch(Gf(r),r.tag){case 3:Dr(Bt),fe();break;case 26:case 27:case 5:st(r);break;case 4:fe();break;case 31:r.memoizedState!==null&&Fn(r);break;case 13:Fn(r);break;case 19:F(Ot);break;case 10:Dr(r.type);break;case 22:case 23:Fn(r),im(),t!==null&&F(Di);break;case 24:Dr(Bt)}}function hc(t,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&t)===t){c=void 0;var m=i.create,v=i.inst;c=m(),v.destroy=c}i=i.next}while(i!==f)}}catch(E){ht(r,r.return,E)}}function Ra(t,r,i){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=r;var V=i,Y=E;try{Y()}catch(re){ht(f,V,re)}}}c=c.next}while(c!==m)}}catch(re){ht(r,r.return,re)}}function Px(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{Sy(r,i)}catch(c){ht(t,t.return,c)}}}function Lx(t,r,i){i.props=Li(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(c){ht(t,r,c)}}function dc(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof i=="function"?t.refCleanup=i(c):i.current=c}}catch(f){ht(t,r,f)}}function nr(t,r){var i=t.ref,c=t.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){ht(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ht(t,r,f)}else i.current=null}function Ux(t){var r=t.type,i=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){ht(t,t.return,f)}}function Lm(t,r,i){try{var c=t.stateNode;t2(c,t.type,i,r),c[en]=r}catch(f){ht(t,t.return,f)}}function zx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Pa(t.type)||t.tag===4}function Um(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Pa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=ws));else if(c!==4&&(c===27&&Pa(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(zm(t,r,i),t=t.sibling;t!==null;)zm(t,r,i),t=t.sibling}function _h(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(c!==4&&(c===27&&Pa(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(_h(t,r,i),t=t.sibling;t!==null;)_h(t,r,i),t=t.sibling}function Bx(t){var r=t.stateNode,i=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);dn(r,c,i),r[Lt]=t,r[en]=i}catch(m){ht(t,t.return,m)}}var Lr=!1,Ft=!1,Bm=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,nn=null;function OE(t,r){if(t=t.containerInfo,og=Hh,t=ey(t),Of(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var v=0,E=-1,V=-1,Y=0,re=0,oe=t,W=null;t:for(;;){for(var ne;oe!==i||f!==0&&oe.nodeType!==3||(E=v+f),oe!==m||c!==0&&oe.nodeType!==3||(V=v+c),oe.nodeType===3&&(v+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)W=oe,oe=ne;for(;;){if(oe===t)break t;if(W===i&&++Y===f&&(E=v),W===m&&++re===c&&(V=v),(ne=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ne}i=E===-1||V===-1?null:{start:E,end:V}}else i=null}i=i||{start:0,end:0}}else i=null;for(cg={focusedElem:t,selectionRange:i},Hh=!1,nn=r;nn!==null;)if(r=nn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,nn=t;else for(;nn!==null;){switch(r=nn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,c=i.stateNode;try{var _e=Li(i.type,f);t=c.getSnapshotBeforeUpdate(_e,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){ht(i,i.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)dg(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,nn=t;break}nn=r.return}}function qx(t,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:zr(t,i),c&4&&hc(5,i);break;case 1:if(zr(t,i),c&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(v){ht(i,i.return,v)}else{var f=Li(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ht(i,i.return,v)}}c&64&&Px(i),c&512&&dc(i,i.return);break;case 3:if(zr(t,i),c&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Sy(t,r)}catch(v){ht(i,i.return,v)}}break;case 27:r===null&&c&4&&Bx(i);case 26:case 5:zr(t,i),r===null&&c&4&&Ux(i),c&512&&dc(i,i.return);break;case 12:zr(t,i);break;case 31:zr(t,i),c&4&&Kx(t,i);break;case 13:zr(t,i),c&4&&$x(t,i),c&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=qE.bind(null,i),c2(t,i))));break;case 22:if(c=i.memoizedState!==null||Lr,!c){r=r!==null&&r.memoizedState!==null||Ft,f=Lr;var m=Ft;Lr=c,(Ft=r)&&!m?Br(t,i,(i.subtreeFlags&8772)!==0):zr(t,i),Lr=f,Ft=m}break;case 30:break;default:zr(t,i)}}function Fx(t){var r=t.alternate;r!==null&&(t.alternate=null,Fx(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ol(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,An=!1;function Ur(t,r,i){for(i=i.child;i!==null;)Gx(t,r,i),i=i.sibling}function Gx(t,r,i){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(xs,i)}catch{}switch(i.tag){case 26:Ft||nr(i,r),Ur(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ft||nr(i,r);var c=Tt,f=An;Pa(i.type)&&(Tt=i.stateNode,An=!1),Ur(t,r,i),_c(i.stateNode),Tt=c,An=f;break;case 5:Ft||nr(i,r);case 6:if(c=Tt,f=An,Tt=null,Ur(t,r,i),Tt=c,An=f,Tt!==null)if(An)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(i.stateNode)}catch(m){ht(i,r,m)}else try{Tt.removeChild(i.stateNode)}catch(m){ht(i,r,m)}break;case 18:Tt!==null&&(An?(t=Tt,Pb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Kl(t)):Pb(Tt,i.stateNode));break;case 4:c=Tt,f=An,Tt=i.stateNode.containerInfo,An=!0,Ur(t,r,i),Tt=c,An=f;break;case 0:case 11:case 14:case 15:Ra(2,i,r),Ft||Ra(4,i,r),Ur(t,r,i);break;case 1:Ft||(nr(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Lx(i,r,c)),Ur(t,r,i);break;case 21:Ur(t,r,i);break;case 22:Ft=(c=Ft)||i.memoizedState!==null,Ur(t,r,i),Ft=c;break;default:Ur(t,r,i)}}function Kx(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kl(t)}catch(i){ht(r,r.return,i)}}}function $x(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(i){ht(r,r.return,i)}}function ME(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Hx),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Hx),r;default:throw Error(a(435,t.tag))}}function wh(t,r){var i=ME(t);r.forEach(function(c){if(!i.has(c)){i.add(c);var f=FE.bind(null,t,c);c.then(f,f)}})}function Cn(t,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],m=t,v=r,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Pa(E.type)){Tt=E.stateNode,An=!1;break e}break;case 5:Tt=E.stateNode,An=!1;break e;case 3:case 4:Tt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(Tt===null)throw Error(a(160));Gx(m,v,f),Tt=null,An=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Qx(r,t),r=r.sibling}var As=null;function Qx(t,r){var i=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(r,t),Rn(t),c&4&&(Ra(3,t,t.return),hc(3,t),Ra(5,t,t.return));break;case 1:Cn(r,t),Rn(t),c&512&&(Ft||i===null||nr(i,i.return)),c&64&&Lr&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=As;if(Cn(r,t),Rn(t),c&512&&(Ft||i===null||nr(i,i.return)),c&4){var m=i!==null?i.memoizedState:null;if(c=t.memoizedState,i===null)if(c===null)if(t.stateNode===null){e:{c=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Hs]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),dn(m,c,i),m[Lt]=t,Ut(m),c=m;break e;case"link":var v=Qb("link","href",f).get(c+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),dn(m,c,i),f.head.appendChild(m);break;case"meta":if(v=Qb("meta","content",f).get(c+(i.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}m=f.createElement(c),dn(m,c,i),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Lt]=t,Ut(m),c=m}t.stateNode=c}else Yb(f,t.type,t.stateNode);else t.stateNode=$b(f,c,t.memoizedProps);else m!==c?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,c===null?Yb(f,t.type,t.stateNode):$b(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Lm(t,t.memoizedProps,i.memoizedProps)}break;case 27:Cn(r,t),Rn(t),c&512&&(Ft||i===null||nr(i,i.return)),i!==null&&c&4&&Lm(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Cn(r,t),Rn(t),c&512&&(Ft||i===null||nr(i,i.return)),t.flags&32){f=t.stateNode;try{Sn(f,"")}catch(_e){ht(t,t.return,_e)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,Lm(t,f,i!==null?i.memoizedProps:f)),c&1024&&(Bm=!0);break;case 6:if(Cn(r,t),Rn(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,i=t.stateNode;try{i.nodeValue=c}catch(_e){ht(t,t.return,_e)}}break;case 3:if(Lh=null,f=As,As=Vh(r.containerInfo),Cn(r,t),As=f,Rn(t),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch(_e){ht(t,t.return,_e)}Bm&&(Bm=!1,Yx(t));break;case 4:c=As,As=Vh(t.stateNode.containerInfo),Cn(r,t),Rn(t),As=c;break;case 12:Cn(r,t),Rn(t);break;case 31:Cn(r,t),Rn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 13:Cn(r,t),Rn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Th=Yt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 22:f=t.memoizedState!==null;var V=i!==null&&i.memoizedState!==null,Y=Lr,re=Ft;if(Lr=Y||f,Ft=re||V,Cn(r,t),Ft=re,Lr=Y,Rn(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||V||Lr||Ft||Ui(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){V=i=r;try{if(m=V.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=V.stateNode;var oe=V.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;E.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(_e){ht(V,V.return,_e)}}}else if(r.tag===6){if(i===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(_e){ht(V,V.return,_e)}}}else if(r.tag===18){if(i===null){V=r;try{var ne=V.stateNode;f?Lb(ne,!0):Lb(V.stateNode,!1)}catch(_e){ht(V,V.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,wh(t,i))));break;case 19:Cn(r,t),Rn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 30:break;case 21:break;default:Cn(r,t),Rn(t)}}function Rn(t){var r=t.flags;if(r&2){try{for(var i,c=t.return;c!==null;){if(zx(c)){i=c;break}c=c.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,m=Um(t);_h(t,m,f);break;case 5:var v=i.stateNode;i.flags&32&&(Sn(v,""),i.flags&=-33);var E=Um(t);_h(t,E,v);break;case 3:case 4:var V=i.stateNode.containerInfo,Y=Um(t);zm(t,Y,V);break;default:throw Error(a(161))}}catch(re){ht(t,t.return,re)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Yx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Yx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function zr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)qx(t,r.alternate,r),r=r.sibling}function Ui(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ra(4,r,r.return),Ui(r);break;case 1:nr(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&Lx(r,r.return,i),Ui(r);break;case 27:_c(r.stateNode);case 26:case 5:nr(r,r.return),Ui(r);break;case 22:r.memoizedState===null&&Ui(r);break;case 30:Ui(r);break;default:Ui(r)}t=t.sibling}}function Br(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:Br(f,m,i),hc(4,m);break;case 1:if(Br(f,m,i),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){ht(c,c.return,Y)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)jy(V[f],E)}catch(Y){ht(c,c.return,Y)}}i&&v&64&&Px(m),dc(m,m.return);break;case 27:Bx(m);case 26:case 5:Br(f,m,i),i&&c===null&&v&4&&Ux(m),dc(m,m.return);break;case 12:Br(f,m,i);break;case 31:Br(f,m,i),i&&v&4&&Kx(f,m);break;case 13:Br(f,m,i),i&&v&4&&$x(f,m);break;case 22:m.memoizedState===null&&Br(f,m,i),dc(m,m.return);break;case 30:break;default:Br(f,m,i)}r=r.sibling}}function Hm(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Jo(i))}function qm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Jo(t))}function Cs(t,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xx(t,r,i,c),r=r.sibling}function Xx(t,r,i,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Cs(t,r,i,c),f&2048&&hc(9,r);break;case 1:Cs(t,r,i,c);break;case 3:Cs(t,r,i,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Jo(t)));break;case 12:if(f&2048){Cs(t,r,i,c),t=r.stateNode;try{var m=r.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){ht(r,r.return,V)}}else Cs(t,r,i,c);break;case 31:Cs(t,r,i,c);break;case 13:Cs(t,r,i,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?Cs(t,r,i,c):fc(t,r):m._visibility&2?Cs(t,r,i,c):(m._visibility|=2,Ml(t,r,i,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Hm(v,r);break;case 24:Cs(t,r,i,c),f&2048&&qm(r.alternate,r);break;default:Cs(t,r,i,c)}}function Ml(t,r,i,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,v=r,E=i,V=c,Y=v.flags;switch(v.tag){case 0:case 11:case 15:Ml(m,v,E,V,f),hc(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?Ml(m,v,E,V,f):fc(m,v):(re._visibility|=2,Ml(m,v,E,V,f)),f&&Y&2048&&Hm(v.alternate,v);break;case 24:Ml(m,v,E,V,f),f&&Y&2048&&qm(v.alternate,v);break;default:Ml(m,v,E,V,f)}r=r.sibling}}function fc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,c=r,f=c.flags;switch(c.tag){case 22:fc(i,c),f&2048&&Hm(c.alternate,c);break;case 24:fc(i,c),f&2048&&qm(c.alternate,c);break;default:fc(i,c)}r=r.sibling}}var mc=8192;function Vl(t,r,i){if(t.subtreeFlags&mc)for(t=t.child;t!==null;)Wx(t,r,i),t=t.sibling}function Wx(t,r,i){switch(t.tag){case 26:Vl(t,r,i),t.flags&mc&&t.memoizedState!==null&&_2(i,As,t.memoizedState,t.memoizedProps);break;case 5:Vl(t,r,i);break;case 3:case 4:var c=As;As=Vh(t.stateNode.containerInfo),Vl(t,r,i),As=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=mc,mc=16777216,Vl(t,r,i),mc=c):Vl(t,r,i));break;default:Vl(t,r,i)}}function Jx(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function gc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];nn=c,eb(c,t)}Jx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zx(t),t=t.sibling}function Zx(t){switch(t.tag){case 0:case 11:case 15:gc(t),t.flags&2048&&Ra(9,t,t.return);break;case 3:gc(t);break;case 12:gc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Nh(t)):gc(t);break;default:gc(t)}}function Nh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];nn=c,eb(c,t)}Jx(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ra(8,r,r.return),Nh(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Nh(r));break;default:Nh(r)}t=t.sibling}}function eb(t,r){for(;nn!==null;){var i=nn;switch(i.tag){case 0:case 11:case 15:Ra(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Jo(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,nn=c;else e:for(i=t;nn!==null;){c=nn;var f=c.sibling,m=c.return;if(Fx(c),c===i){nn=null;break e}if(f!==null){f.return=m,nn=f;break e}nn=m}}}var VE={getCacheForType:function(t){var r=un(Bt),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i},cacheSignal:function(){return un(Bt).controller.signal}},PE=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,Fe=null,$e=0,ut=0,Gn=null,Ia=!1,Pl=!1,Fm=!1,Hr=0,At=0,ka=0,zi=0,Gm=0,Kn=0,Ll=0,pc=null,In=null,Km=!1,Th=0,tb=0,Eh=1/0,jh=null,Da=null,Xt=0,Oa=null,Ul=null,qr=0,$m=0,Qm=null,nb=null,yc=0,Ym=null;function $n(){return(at&2)!==0&&$e!==0?$e&-$e:ee.T!==null?tg():Su()}function sb(){if(Kn===0)if(($e&536870912)===0||Ze){var t=fi;fi<<=1,(fi&3932160)===0&&(fi=262144),Kn=t}else Kn=536870912;return t=qn.current,t!==null&&(t.flags|=32),Kn}function kn(t,r,i){(t===yt&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(zl(t,0),Ma(t,$e,Kn,!1)),mi(t,i),((at&2)===0||t!==yt)&&(t===yt&&((at&2)===0&&(zi|=i),At===4&&Ma(t,$e,Kn,!1)),sr(t))}function rb(t,r,i){if((at&6)!==0)throw Error(a(327));var c=!i&&(r&127)===0&&(r&t.expiredLanes)===0||bs(t,r),f=c?zE(t,r):Wm(t,r,!0),m=c;do{if(f===0){Pl&&!c&&Ma(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!LE(i)){f=Wm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var E=t;f=pc;var V=E.current.memoizedState.isDehydrated;if(V&&(zl(E,v).flags|=256),v=Wm(E,v,!1),v!==2){if(Fm&&!V){E.errorRecoveryDisabledLanes|=m,zi|=m,f=4;break e}m=In,In=f,m!==null&&(In===null?In=m:In.push.apply(In,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){zl(t,0),Ma(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Ma(c,r,Kn,!Ia);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=Th+300-Yt(),10<f)){if(Ma(c,r,Kn,!Ia),Us(c,0,!0)!==0)break e;qr=r,c.timeoutHandle=Mb(ab.bind(null,c,i,In,jh,Km,r,Kn,zi,Ll,Ia,m,"Throttled",-0,0),f);break e}ab(c,i,In,jh,Km,r,Kn,zi,Ll,Ia,m,null,-0,0)}}break}while(!0);sr(t)}function ab(t,r,i,c,f,m,v,E,V,Y,re,oe,W,ne){if(t.timeoutHandle=-1,oe=r.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ws},Wx(r,m,oe);var _e=(m&62914560)===m?Th-Yt():(m&4194048)===m?tb-Yt():0;if(_e=w2(oe,_e),_e!==null){qr=m,t.cancelPendingCommit=_e(fb.bind(null,t,r,m,i,c,f,v,E,V,re,oe,null,W,ne)),Ma(t,m,v,!Y);return}}fb(t,r,m,i,c,f,v,E,V)}function LE(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],m=f.getSnapshot;f=f.value;try{if(!Bn(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ma(t,r,i,c){r&=~Gm,r&=~zi,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-kt(f),v=1<<m;c[m]=-1,f&=~v}i!==0&&gi(t,i,r)}function Sh(){return(at&6)===0?(xc(0),!1):!0}function Xm(){if(Fe!==null){if(ut===0)var t=Fe.return;else t=Fe,kr=Ii=null,dm(t),Rl=null,ec=0,t=Fe;for(;t!==null;)Vx(t.alternate,t),t=t.return;Fe=null}}function zl(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,r2(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),qr=0,Xm(),yt=t,Fe=i=Rr(t.current,null),$e=r,ut=0,Gn=null,Ia=!1,Pl=bs(t,r),Fm=!1,Ll=Kn=Gm=zi=ka=At=0,In=pc=null,Km=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-kt(c),m=1<<f;r|=t[f],c&=~m}return Hr=r,Qu(),i}function ib(t,r){ze=null,ee.H=oc,r===Cl||r===nh?(r=wy(),ut=3):r===em?(r=wy(),ut=4):ut=r===Am?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Gn=r,Fe===null&&(At=1,ph(t,rs(r,t.current)))}function lb(){var t=qn.current;return t===null?!0:($e&4194048)===$e?os===null:($e&62914560)===$e||($e&536870912)!==0?t===os:!1}function ob(){var t=ee.H;return ee.H=oc,t===null?oc:t}function cb(){var t=ee.A;return ee.A=VE,t}function Ah(){At=4,Ia||($e&4194048)!==$e&&qn.current!==null||(Pl=!0),(ka&134217727)===0&&(zi&134217727)===0||yt===null||Ma(yt,$e,Kn,!1)}function Wm(t,r,i){var c=at;at|=2;var f=ob(),m=cb();(yt!==t||$e!==r)&&(jh=null,zl(t,r)),r=!1;var v=At;e:do try{if(ut!==0&&Fe!==null){var E=Fe,V=Gn;switch(ut){case 8:Xm(),v=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(r=!0);var Y=ut;if(ut=0,Gn=null,Bl(t,E,V,Y),i&&Pl){v=0;break e}break;default:Y=ut,ut=0,Gn=null,Bl(t,E,V,Y)}}UE(),v=At;break}catch(re){ib(t,re)}while(!0);return r&&t.shellSuspendCounter++,kr=Ii=null,at=c,ee.H=f,ee.A=m,Fe===null&&(yt=null,$e=0,Qu()),v}function UE(){for(;Fe!==null;)ub(Fe)}function zE(t,r){var i=at;at|=2;var c=ob(),f=cb();yt!==t||$e!==r?(jh=null,Eh=Yt()+500,zl(t,r)):Pl=bs(t,r);e:do try{if(ut!==0&&Fe!==null){r=Fe;var m=Gn;t:switch(ut){case 1:ut=0,Gn=null,Bl(t,r,m,1);break;case 2:case 9:if(vy(m)){ut=0,Gn=null,hb(r);break}r=function(){ut!==2&&ut!==9||yt!==t||(ut=7),sr(t)},m.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:vy(m)?(ut=0,Gn=null,hb(r)):(ut=0,Gn=null,Bl(t,r,m,7));break;case 5:var v=null;switch(Fe.tag){case 26:v=Fe.memoizedState;case 5:case 27:var E=Fe;if(v?Xb(v):E.stateNode.complete){ut=0,Gn=null;var V=E.sibling;if(V!==null)Fe=V;else{var Y=E.return;Y!==null?(Fe=Y,Ch(Y)):Fe=null}break t}}ut=0,Gn=null,Bl(t,r,m,5);break;case 6:ut=0,Gn=null,Bl(t,r,m,6);break;case 8:Xm(),At=6;break e;default:throw Error(a(462))}}BE();break}catch(re){ib(t,re)}while(!0);return kr=Ii=null,ee.H=c,ee.A=f,at=i,Fe!==null?0:(yt=null,$e=0,Qu(),At)}function BE(){for(;Fe!==null&&!Tr();)ub(Fe)}function ub(t){var r=Ox(t.alternate,t,Hr);t.memoizedProps=t.pendingProps,r===null?Ch(t):Fe=r}function hb(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=Ax(i,r,r.pendingProps,r.type,void 0,$e);break;case 11:r=Ax(i,r,r.pendingProps,r.type.render,r.ref,$e);break;case 5:dm(r);default:Vx(i,r),r=Fe=cy(r,Hr),r=Ox(i,r,Hr)}t.memoizedProps=t.pendingProps,r===null?Ch(t):Fe=r}function Bl(t,r,i,c){kr=Ii=null,dm(r),Rl=null,ec=0;var f=r.return;try{if(CE(t,f,r,i,$e)){At=1,ph(t,rs(i,t.current)),Fe=null;return}}catch(m){if(f!==null)throw Fe=f,m;At=1,ph(t,rs(i,t.current)),Fe=null;return}r.flags&32768?(Ze||c===1?t=!0:Pl||($e&536870912)!==0?t=!1:(Ia=t=!0,(c===2||c===9||c===3||c===6)&&(c=qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),db(r,t)):Ch(r)}function Ch(t){var r=t;do{if((r.flags&32768)!==0){db(r,Ia);return}t=r.return;var i=kE(r.alternate,r,Hr);if(i!==null){Fe=i;return}if(r=r.sibling,r!==null){Fe=r;return}Fe=r=t}while(r!==null);At===0&&(At=5)}function db(t,r){do{var i=DE(t.alternate,t);if(i!==null){i.flags&=32767,Fe=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){Fe=t;return}Fe=t=i}while(t!==null);At=6,Fe=null}function fb(t,r,i,c,f,m,v,E,V){t.cancelPendingCommit=null;do Rh();while(Xt!==0);if((at&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Uf,Rf(t,i,m,v,E,V),t===yt&&(Fe=yt=null,$e=0),Ul=r,Oa=t,qr=i,$m=m,Qm=f,nb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,GE(Ln,function(){return xb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,f=ae.p,ae.p=2,v=at,at|=4;try{OE(t,r,i)}finally{at=v,ae.p=f,ee.T=c}}Xt=1,mb(),gb(),pb()}}function mb(){if(Xt===1){Xt=0;var t=Oa,r=Ul,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=ee.T,ee.T=null;var c=ae.p;ae.p=2;var f=at;at|=4;try{Qx(r,t);var m=cg,v=ey(t.containerInfo),E=m.focusedElem,V=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&Z0(E.ownerDocument.documentElement,E)){if(V!==null&&Of(E)){var Y=V.start,re=V.end;if(re===void 0&&(re=Y),"selectionStart"in E)E.selectionStart=Y,E.selectionEnd=Math.min(re,E.value.length);else{var oe=E.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ne=W.getSelection(),_e=E.textContent.length,Ce=Math.min(V.start,_e),gt=V.end===void 0?Ce:Math.min(V.end,_e);!ne.extend&&Ce>gt&&(v=gt,gt=Ce,Ce=v);var q=J0(E,Ce),U=J0(E,gt);if(q&&U&&(ne.rangeCount!==1||ne.anchorNode!==q.node||ne.anchorOffset!==q.offset||ne.focusNode!==U.node||ne.focusOffset!==U.offset)){var $=oe.createRange();$.setStart(q.node,q.offset),ne.removeAllRanges(),Ce>gt?(ne.addRange($),ne.extend(U.node,U.offset)):($.setEnd(U.node,U.offset),ne.addRange($))}}}}for(oe=[],ne=E;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<oe.length;E++){var ie=oe[E];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Hh=!!og,cg=og=null}finally{at=f,ae.p=c,ee.T=i}}t.current=r,Xt=2}}function gb(){if(Xt===2){Xt=0;var t=Oa,r=Ul,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=ee.T,ee.T=null;var c=ae.p;ae.p=2;var f=at;at|=4;try{qx(t,r.alternate,r)}finally{at=f,ae.p=c,ee.T=i}}Xt=3}}function pb(){if(Xt===4||Xt===3){Xt=0,Er();var t=Oa,r=Ul,i=qr,c=nb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,Ul=Oa=null,yb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Da=null),jr(i),r=r.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(xs,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,f=ae.p,ae.p=2,ee.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{ee.T=r,ae.p=f}}(qr&3)!==0&&Rh(),sr(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===Ym?yc++:(yc=0,Ym=t):yc=0,xc(0)}}function yb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Jo(r)))}function Rh(){return mb(),gb(),pb(),xb()}function xb(){if(Xt!==5)return!1;var t=Oa,r=$m;$m=0;var i=jr(qr),c=ee.T,f=ae.p;try{ae.p=32>i?32:i,ee.T=null,i=Qm,Qm=null;var m=Oa,v=qr;if(Xt=0,Ul=Oa=null,qr=0,(at&6)!==0)throw Error(a(331));var E=at;if(at|=4,Zx(m.current),Xx(m,m.current,v,i),at=E,xc(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(xs,m)}catch{}return!0}finally{ae.p=f,ee.T=c,yb(t,r)}}function bb(t,r,i){r=rs(i,r),r=Sm(t.stateNode,r,2),t=Sa(t,r,2),t!==null&&(mi(t,2),sr(t))}function ht(t,r,i){if(t.tag===3)bb(t,t,i);else for(;r!==null;){if(r.tag===3){bb(r,t,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Da===null||!Da.has(c))){t=rs(i,t),i=vx(2),c=Sa(r,i,2),c!==null&&(_x(i,c,r,t),mi(c,2),sr(c));break}}r=r.return}}function Jm(t,r,i){var c=t.pingCache;if(c===null){c=t.pingCache=new PE;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(i)||(Fm=!0,f.add(i),t=HE.bind(null,t,r,i),r.then(t,t))}function HE(t,r,i){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,yt===t&&($e&i)===i&&(At===4||At===3&&($e&62914560)===$e&&300>Yt()-Th?(at&2)===0&&zl(t,0):Gm|=i,Ll===$e&&(Ll=0)),sr(t)}function vb(t,r){r===0&&(r=ju()),t=Ai(t,r),t!==null&&(mi(t,r),sr(t))}function qE(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),vb(t,i)}function FE(t,r){var i=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),vb(t,i)}function GE(t,r){return qe(t,r)}var Ih=null,Hl=null,Zm=!1,kh=!1,eg=!1,Va=0;function sr(t){t!==Hl&&t.next===null&&(Hl===null?Ih=Hl=t:Hl=Hl.next=t),kh=!0,Zm||(Zm=!0,$E())}function xc(t,r){if(!eg&&kh){eg=!0;do for(var i=!1,c=Ih;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-kt(42|t)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Tb(c,m))}else m=$e,m=Us(c,c===yt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||bs(c,m)||(i=!0,Tb(c,m));c=c.next}while(i);eg=!1}}function KE(){_b()}function _b(){kh=Zm=!1;var t=0;Va!==0&&s2()&&(t=Va);for(var r=Yt(),i=null,c=Ih;c!==null;){var f=c.next,m=wb(c,r);m===0?(c.next=null,i===null?Ih=f:i.next=f,f===null&&(Hl=i)):(i=c,(t!==0||(m&3)!==0)&&(kh=!0)),c=f}Xt!==0&&Xt!==5||xc(t),Va!==0&&(Va=0)}function wb(t,r){for(var i=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-kt(m),E=1<<v,V=f[v];V===-1?((E&i)===0||(E&c)!==0)&&(f[v]=Cf(E,r)):V<=r&&(t.expiredLanes|=E),m&=~E}if(r=yt,i=$e,i=Us(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,i===0||t===r&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ke(c),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||bs(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(c!==null&&Ke(c),jr(i)){case 2:case 8:i=Pn;break;case 32:i=Ln;break;case 268435456:i=_u;break;default:i=Ln}return c=Nb.bind(null,t),i=qe(i,c),t.callbackPriority=r,t.callbackNode=i,r}return c!==null&&c!==null&&Ke(c),t.callbackPriority=2,t.callbackNode=null,2}function Nb(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Rh()&&t.callbackNode!==i)return null;var c=$e;return c=Us(t,t===yt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(rb(t,c,r),wb(t,Yt()),t.callbackNode!=null&&t.callbackNode===i?Nb.bind(null,t):null)}function Tb(t,r){if(Rh())return null;rb(t,r,!0)}function $E(){a2(function(){(at&6)!==0?qe(ys,KE):_b()})}function tg(){if(Va===0){var t=Sl;t===0&&(t=Ps,Ps<<=1,(Ps&261888)===0&&(Ps=256)),Va=t}return Va}function Eb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:dl(""+t)}function jb(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function QE(t,r,i,c,f){if(r==="submit"&&i&&i.stateNode===f){var m=Eb((f[en]||null).action),v=c.submitter;v&&(r=(r=v[en]||null)?Eb(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var E=new Xs("action","action",null,c,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Va!==0){var V=v?jb(f,v):new FormData(f);_m(i,{pending:!0,data:V,method:f.method,action:m},null,V)}}else typeof m=="function"&&(E.preventDefault(),V=v?jb(f,v):new FormData(f),_m(i,{pending:!0,data:V,method:f.method,action:m},m,V))},currentTarget:f}]})}}for(var ng=0;ng<Lf.length;ng++){var sg=Lf[ng],YE=sg.toLowerCase(),XE=sg[0].toUpperCase()+sg.slice(1);Ss(YE,"on"+XE)}Ss(sy,"onAnimationEnd"),Ss(ry,"onAnimationIteration"),Ss(ay,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(dE,"onTransitionRun"),Ss(fE,"onTransitionStart"),Ss(mE,"onTransitionCancel"),Ss(iy,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bc));function Sb(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var c=t[i],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var E=c[v],V=E.instance,Y=E.currentTarget;if(E=E.listener,V!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(re){$u(re)}f.currentTarget=null,m=V}else for(v=0;v<c.length;v++){if(E=c[v],V=E.instance,Y=E.currentTarget,E=E.listener,V!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(re){$u(re)}f.currentTarget=null,m=V}}}}function Ge(t,r){var i=r[ll];i===void 0&&(i=r[ll]=new Set);var c=t+"__bubble";i.has(c)||(Ab(r,t,2,!1),i.add(c))}function rg(t,r,i){var c=0;r&&(c|=4),Ab(i,t,c,r)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function ag(t){if(!t[Dh]){t[Dh]=!0,Io.forEach(function(i){i!=="selectionchange"&&(WE.has(i)||rg(i,!1,t),rg(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Dh]||(r[Dh]=!0,rg("selectionchange",!1,r))}}function Ab(t,r,i,c){switch(sv(r)){case 2:var f=E2;break;case 8:f=j2;break;default:f=vg}i=f.bind(null,r,i,t),f=void 0,!vi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function ig(t,r,i,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=qs(E),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){c=m=v;continue e}E=E.parentNode}}c=c.return}ya(function(){var Y=m,re=es(i),oe=[];e:{var W=ly.get(t);if(W!==void 0){var ne=Xs,_e=t;switch(t){case"keypress":if(wi(i)===0)break e;case"keydown":case"keyup":ne=Fu;break;case"focusin":_e="focus",ne=Ti;break;case"focusout":_e="blur",ne=Ti;break;case"beforeblur":case"afterblur":ne=Ti;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=x;break;case sy:case ry:case ay:ne=Pu;break;case iy:ne=S;break;case"scroll":case"scrollend":ne=qo;break;case"wheel":ne=Z;break;case"copy":case"cut":case"paste":ne=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Cr;break;case"toggle":case"beforetoggle":ne=Ue}var Ce=(r&4)!==0,gt=!Ce&&(t==="scroll"||t==="scrollend"),q=Ce?W!==null?W+"Capture":null:W;Ce=[];for(var U=Y,$;U!==null;){var ie=U;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||q===null||(ie=Ns(U,q),ie!=null&&Ce.push(vc(U,ie,$))),gt)break;U=U.return}0<Ce.length&&(W=new ne(W,_e,null,i,re),oe.push({event:W,listeners:Ce}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",W&&i!==zo&&(_e=i.relatedTarget||i.fromElement)&&(qs(_e)||_e[Bs]))break e;if((ne||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(_e=i.relatedTarget||i.toElement,ne=Y,_e=_e?qs(_e):null,_e!==null&&(gt=u(_e),Ce=_e.tag,_e!==gt||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(ne=null,_e=Y),ne!==_e)){if(Ce=Fo,ie="onMouseLeave",q="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=Cr,ie="onPointerLeave",q="onPointerEnter",U="pointer"),gt=ne==null?W:Un(ne),$=_e==null?W:Un(_e),W=new Ce(ie,U+"leave",ne,i,re),W.target=gt,W.relatedTarget=$,ie=null,qs(re)===Y&&(Ce=new Ce(q,U+"enter",_e,i,re),Ce.target=$,Ce.relatedTarget=gt,ie=Ce),gt=ie,ne&&_e)t:{for(Ce=JE,q=ne,U=_e,$=0,ie=q;ie;ie=Ce(ie))$++;ie=0;for(var je=U;je;je=Ce(je))ie++;for(;0<$-ie;)q=Ce(q),$--;for(;0<ie-$;)U=Ce(U),ie--;for(;$--;){if(q===U||U!==null&&q===U.alternate){Ce=q;break t}q=Ce(q),U=Ce(U)}Ce=null}else Ce=null;ne!==null&&Cb(oe,W,ne,Ce,!1),_e!==null&&gt!==null&&Cb(oe,gt,_e,Ce,!0)}}e:{if(W=Y?Un(Y):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var tt=K0;else if(F0(W))if($0)tt=cE;else{tt=lE;var Te=iE}else ne=W.nodeName,!ne||ne.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&hl(Y.elementType)&&(tt=K0):tt=oE;if(tt&&(tt=tt(t,Y))){G0(oe,tt,i,re);break e}Te&&Te(t,W,Y),t==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Po(W,"number",W.value)}switch(Te=Y?Un(Y):window,t){case"focusin":(F0(Te)||Te.contentEditable==="true")&&(bl=Te,Mf=Y,Yo=null);break;case"focusout":Yo=Mf=bl=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,ty(oe,i,re);break;case"selectionchange":if(hE)break;case"keydown":case"keyup":ty(oe,i,re)}var Be;if(rt)e:{switch(t){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else xl?Ei(t,i)&&(Qe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Qe="onCompositionStart");Qe&&(Zs&&i.locale!=="ko"&&(xl||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&xl&&(Be=Ho()):(Ys=re,Bo="value"in Ys?Ys.value:Ys.textContent,xl=!0)),Te=Oh(Y,Qe),0<Te.length&&(Qe=new Js(Qe,t,null,i,re),oe.push({event:Qe,listeners:Te}),Be?Qe.data=Be:(Be=yl(i),Be!==null&&(Qe.data=Be)))),(Be=ns?nE(t,i):sE(t,i))&&(Qe=Oh(Y,"onBeforeInput"),0<Qe.length&&(Te=new Js("onBeforeInput","beforeinput",null,i,re),oe.push({event:Te,listeners:Qe}),Te.data=Be)),QE(oe,t,Y,i,re)}Sb(oe,r)})}function vc(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Oh(t,r){for(var i=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ns(t,i),f!=null&&c.unshift(vc(t,f,m)),f=Ns(t,r),f!=null&&c.push(vc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function JE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Cb(t,r,i,c,f){for(var m=r._reactName,v=[];i!==null&&i!==c;){var E=i,V=E.alternate,Y=E.stateNode;if(E=E.tag,V!==null&&V===c)break;E!==5&&E!==26&&E!==27||Y===null||(V=Y,f?(Y=Ns(i,m),Y!=null&&v.unshift(vc(i,Y,V))):f||(Y=Ns(i,m),Y!=null&&v.push(vc(i,Y,V)))),i=i.return}v.length!==0&&t.push({event:r,listeners:v})}var ZE=/\r\n?/g,e2=/\u0000|\uFFFD/g;function Rb(t){return(typeof t=="string"?t:""+t).replace(ZE,`
`).replace(e2,"")}function Ib(t,r){return r=Rb(r),Rb(t)===r}function mt(t,r,i,c,f,m){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Sn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Sn(t,""+c);break;case"className":zn(t,"class",c);break;case"tabIndex":zn(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(t,i,c);break;case"style":Uo(t,c,m);break;case"data":if(r!=="object"){zn(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=dl(""+c),t.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&mt(t,r,"name",f.name,f,null),mt(t,r,"formEncType",f.formEncType,f,null),mt(t,r,"formMethod",f.formMethod,f,null),mt(t,r,"formTarget",f.formTarget,f,null)):(mt(t,r,"encType",f.encType,f,null),mt(t,r,"method",f.method,f,null),mt(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=dl(""+c),t.setAttribute(i,c);break;case"onClick":c!=null&&(t.onclick=ws);break;case"onScroll":c!=null&&Ge("scroll",t);break;case"onScrollEnd":c!=null&&Ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}i=dl(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""+c):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":c===!0?t.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,c):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(i,c):t.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(i):t.setAttribute(i,c);break;case"popover":Ge("beforetoggle",t),Ge("toggle",t),cl(t,"popover",c);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":cl(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ou.get(i)||i,cl(t,i,c))}}function lg(t,r,i,c,f,m){switch(i){case"style":Uo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof c=="string"?Sn(t,c):(typeof c=="number"||typeof c=="bigint")&&Sn(t,""+c);break;case"onScroll":c!=null&&Ge("scroll",t);break;case"onScrollEnd":c!=null&&Ge("scrollend",t);break;case"onClick":c!=null&&(t.onclick=ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ko.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[en]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,c,f);break e}i in t?t[i]=c:c===!0?t.setAttribute(i,""):cl(t,i,c)}}}function dn(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",t),Ge("load",t);var c=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var v=i[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:mt(t,r,m,v,i,null)}}f&&mt(t,r,"srcSet",i.srcSet,i,null),c&&mt(t,r,"src",i.src,i,null);return;case"input":Ge("invalid",t);var E=m=v=f=null,V=null,Y=null;for(c in i)if(i.hasOwnProperty(c)){var re=i[c];if(re!=null)switch(c){case"name":f=re;break;case"type":v=re;break;case"checked":V=re;break;case"defaultChecked":Y=re;break;case"value":m=re;break;case"defaultValue":E=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,r));break;default:mt(t,r,c,re,i,null)}}Iu(t,m,E,V,Y,v,f,!1);return;case"select":Ge("invalid",t),c=v=m=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:mt(t,r,f,E,i,null)}r=m,i=v,t.multiple=!!c,r!=null?fa(t,!!c,r,!1):i!=null&&fa(t,!!c,i,!0);return;case"textarea":Ge("invalid",t),m=f=c=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:mt(t,r,v,E,i,null)}ma(t,c,f,m);return;case"option":for(V in i)if(i.hasOwnProperty(V)&&(c=i[V],c!=null))switch(V){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(t,r,V,c,i,null)}return;case"dialog":Ge("beforetoggle",t),Ge("toggle",t),Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":Ge("load",t);break;case"video":case"audio":for(c=0;c<bc.length;c++)Ge(bc[c],t);break;case"image":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"embed":case"source":case"link":Ge("error",t),Ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in i)if(i.hasOwnProperty(Y)&&(c=i[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:mt(t,r,Y,c,i,null)}return;default:if(hl(r)){for(re in i)i.hasOwnProperty(re)&&(c=i[re],c!==void 0&&lg(t,r,re,c,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(c=i[E],c!=null&&mt(t,r,E,c,i,null))}function t2(t,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,V=null,Y=null,re=null;for(ne in i){var oe=i[ne];if(i.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":V=oe;default:c.hasOwnProperty(ne)||mt(t,r,ne,null,c,oe)}}for(var W in c){var ne=c[W];if(oe=i[W],c.hasOwnProperty(W)&&(ne!=null||oe!=null))switch(W){case"type":m=ne;break;case"name":f=ne;break;case"checked":Y=ne;break;case"defaultChecked":re=ne;break;case"value":v=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,r));break;default:ne!==oe&&mt(t,r,W,ne,c,oe)}}ul(t,v,E,V,Y,re,m,f);return;case"select":ne=v=E=W=null;for(m in i)if(V=i[m],i.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":ne=V;default:c.hasOwnProperty(m)||mt(t,r,m,null,c,V)}for(f in c)if(m=c[f],V=i[f],c.hasOwnProperty(f)&&(m!=null||V!=null))switch(f){case"value":W=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==V&&mt(t,r,f,m,c,V)}r=E,i=v,c=ne,W!=null?fa(t,!!i,W,!1):!!c!=!!i&&(r!=null?fa(t,!!i,r,!0):fa(t,!!i,i?[]:"",!1));return;case"textarea":ne=W=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:mt(t,r,E,null,c,f)}for(v in c)if(f=c[v],m=i[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":W=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&mt(t,r,v,f,c,m)}ku(t,W,ne);return;case"option":for(var _e in i)if(W=i[_e],i.hasOwnProperty(_e)&&W!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:mt(t,r,_e,null,c,W)}for(V in c)if(W=c[V],ne=i[V],c.hasOwnProperty(V)&&W!==ne&&(W!=null||ne!=null))switch(V){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:mt(t,r,V,W,c,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in i)W=i[Ce],i.hasOwnProperty(Ce)&&W!=null&&!c.hasOwnProperty(Ce)&&mt(t,r,Ce,null,c,W);for(Y in c)if(W=c[Y],ne=i[Y],c.hasOwnProperty(Y)&&W!==ne&&(W!=null||ne!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,r));break;default:mt(t,r,Y,W,c,ne)}return;default:if(hl(r)){for(var gt in i)W=i[gt],i.hasOwnProperty(gt)&&W!==void 0&&!c.hasOwnProperty(gt)&&lg(t,r,gt,void 0,c,W);for(re in c)W=c[re],ne=i[re],!c.hasOwnProperty(re)||W===ne||W===void 0&&ne===void 0||lg(t,r,re,W,c,ne);return}}for(var q in i)W=i[q],i.hasOwnProperty(q)&&W!=null&&!c.hasOwnProperty(q)&&mt(t,r,q,null,c,W);for(oe in c)W=c[oe],ne=i[oe],!c.hasOwnProperty(oe)||W===ne||W==null&&ne==null||mt(t,r,oe,W,c,ne)}function kb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function n2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var f=i[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&kb(v)){for(v=0,E=f.responseEnd,c+=1;c<i.length;c++){var V=i[c],Y=V.startTime;if(Y>E)break;var re=V.transferSize,oe=V.initiatorType;re&&kb(oe)&&(V=V.responseEnd,v+=re*(V<E?1:(E-Y)/(V-Y)))}if(--c,r+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var og=null,cg=null;function Mh(t){return t.nodeType===9?t:t.ownerDocument}function Db(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ob(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function ug(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hg=null;function s2(){var t=window.event;return t&&t.type==="popstate"?t===hg?!1:(hg=t,!0):(hg=null,!1)}var Mb=typeof setTimeout=="function"?setTimeout:void 0,r2=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,a2=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(t){return Vb.resolve(null).then(t).catch(i2)}:Mb;function i2(t){setTimeout(function(){throw t})}function Pa(t){return t==="head"}function Pb(t,r){var i=r,c=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(c===0){t.removeChild(f),Kl(r);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")_c(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,_c(i);for(var m=i.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Hs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=v}}else i==="body"&&_c(t.ownerDocument.body);i=f}while(i);Kl(r)}function Lb(t,r){var i=t;t=0;do{var c=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=c}while(i)}function dg(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":dg(i),ol(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function l2(t,r,i,c){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Hs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=cs(t.nextSibling),t===null)break}return null}function o2(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=cs(t.nextSibling),t===null))return null;return t}function Ub(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=cs(t.nextSibling),t===null))return null;return t}function fg(t){return t.data==="$?"||t.data==="$~"}function mg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function c2(t,r){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||i.readyState!=="loading")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function cs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var gg=null;function zb(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(r===0)return cs(t.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}t=t.nextSibling}return null}function Bb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return t;r--}else i!=="/$"&&i!=="/&"||r++}t=t.previousSibling}return null}function Hb(t,r,i){switch(r=Mh(i),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function _c(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ol(t)}var us=new Map,qb=new Set;function Vh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fr=ae.d;ae.d={f:u2,r:h2,D:d2,C:f2,L:m2,m:g2,X:y2,S:p2,M:x2};function u2(){var t=Fr.f(),r=Sh();return t||r}function h2(t){var r=Zn(t);r!==null&&r.tag===5&&r.type==="form"?ix(r):Fr.r(t)}var ql=typeof document>"u"?null:document;function Fb(t,r,i){var c=ql;if(c&&typeof r=="string"&&r){var f=jn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),qb.has(f)||(qb.add(f),t={rel:t,crossOrigin:i,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),dn(r,"link",t),Ut(r),c.head.appendChild(r)))}}function d2(t){Fr.D(t),Fb("dns-prefetch",t,null)}function f2(t,r){Fr.C(t,r),Fb("preconnect",t,r)}function m2(t,r,i){Fr.L(t,r,i);var c=ql;if(c&&t&&r){var f='link[rel="preload"][as="'+jn(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+jn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+jn(i.imageSizes)+'"]')):f+='[href="'+jn(t)+'"]';var m=f;switch(r){case"style":m=Fl(t);break;case"script":m=Gl(t)}us.has(m)||(t=w({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),us.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(wc(m))||r==="script"&&c.querySelector(Nc(m))||(r=c.createElement("link"),dn(r,"link",t),Ut(r),c.head.appendChild(r)))}}function g2(t,r){Fr.m(t,r);var i=ql;if(i&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+jn(c)+'"][href="'+jn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Gl(t)}if(!us.has(m)&&(t=w({rel:"modulepreload",href:t},r),us.set(m,t),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Nc(m)))return}c=i.createElement("link"),dn(c,"link",t),Ut(c),i.head.appendChild(c)}}}function p2(t,r,i){Fr.S(t,r,i);var c=ql;if(c&&t){var f=Fs(c).hoistableStyles,m=Fl(t);r=r||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(wc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},i),(i=us.get(m))&&pg(t,i);var V=v=c.createElement("link");Ut(V),dn(V,"link",t),V._p=new Promise(function(Y,re){V.onload=Y,V.onerror=re}),V.addEventListener("load",function(){E.loading|=1}),V.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ph(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function y2(t,r){Fr.X(t,r);var i=ql;if(i&&t){var c=Fs(i).hoistableScripts,f=Gl(t),m=c.get(f);m||(m=i.querySelector(Nc(f)),m||(t=w({src:t,async:!0},r),(r=us.get(f))&&yg(t,r),m=i.createElement("script"),Ut(m),dn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function x2(t,r){Fr.M(t,r);var i=ql;if(i&&t){var c=Fs(i).hoistableScripts,f=Gl(t),m=c.get(f);m||(m=i.querySelector(Nc(f)),m||(t=w({src:t,async:!0,type:"module"},r),(r=us.get(f))&&yg(t,r),m=i.createElement("script"),Ut(m),dn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Gb(t,r,i,c){var f=(f=z.current)?Vh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Fl(i.href),i=Fs(f).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Fl(i.href);var m=Fs(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(wc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),us.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},us.set(t,i),m||b2(f,t,i,v.state))),r&&c===null)throw Error(a(528,""));return v}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Gl(i),i=Fs(f).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Fl(t){return'href="'+jn(t)+'"'}function wc(t){return'link[rel="stylesheet"]['+t+"]"}function Kb(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function b2(t,r,i,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),dn(r,"link",i),Ut(r),t.head.appendChild(r))}function Gl(t){return'[src="'+jn(t)+'"]'}function Nc(t){return"script[async]"+t}function $b(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+jn(i.href)+'"]');if(c)return r.instance=c,Ut(c),c;var f=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Ut(c),dn(c,"style",f),Ph(c,i.precedence,t),r.instance=c;case"stylesheet":f=Fl(i.href);var m=t.querySelector(wc(f));if(m)return r.state.loading|=4,r.instance=m,Ut(m),m;c=Kb(i),(f=us.get(f))&&pg(c,f),m=(t.ownerDocument||t).createElement("link"),Ut(m);var v=m;return v._p=new Promise(function(E,V){v.onload=E,v.onerror=V}),dn(m,"link",c),r.state.loading|=4,Ph(m,i.precedence,t),r.instance=m;case"script":return m=Gl(i.src),(f=t.querySelector(Nc(m)))?(r.instance=f,Ut(f),f):(c=i,(f=us.get(m))&&(c=w({},i),yg(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ut(f),dn(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Ph(c,i.precedence,t));return r.instance}function Ph(t,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===r)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function pg(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function yg(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Lh=null;function Qb(t,r,i){if(Lh===null){var c=new Map,f=Lh=new Map;f.set(i,c)}else f=Lh,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(t))return c;for(c.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[Hs]||m[Lt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=t+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function Yb(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function v2(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Xb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function _2(t,r,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Fl(c.href),m=r.querySelector(wc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Uh.bind(t),r.then(t,t)),i.state.loading|=4,i.instance=m,Ut(m);return}m=r.ownerDocument||r,c=Kb(c),(f=us.get(f))&&pg(c,f),m=m.createElement("link"),Ut(m);var v=m;v._p=new Promise(function(E,V){v.onload=E,v.onerror=V}),dn(m,"link",c),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Uh.bind(t),r.addEventListener("load",i),r.addEventListener("error",i))}}var xg=0;function w2(t,r){return t.stylesheets&&t.count===0&&Bh(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var c=setTimeout(function(){if(t.stylesheets&&Bh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&xg===0&&(xg=62500*n2());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>xg?50:800)+r);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zh=null;function Bh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zh=new Map,r.forEach(N2,t),zh=null,Uh.call(t))}function N2(t,r){if(!(r.state.loading&4)){var i=zh.get(t);if(i)var c=i.get(null);else{i=new Map,zh.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),c=v)}c&&i.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=i.get(v)||c,m===c&&i.set(null,f),i.set(v,f),this.count++,c=Uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Tc={$$typeof:G,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function T2(t,r,i,c,f,m,v,E,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Wb(t,r,i,c,f,m,v,E,V,Y,re,oe){return t=new T2(t,r,i,v,V,Y,re,oe,E),r=1,m===!0&&(r|=24),m=Hn(3,null,null,r),t.current=m,m.stateNode=t,r=Wf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:i,cache:r},tm(m),t}function Jb(t){return t?(t=wl,t):wl}function Zb(t,r,i,c,f,m){f=Jb(f),c.context===null?c.context=f:c.pendingContext=f,c=ja(r),c.payload={element:i},m=m===void 0?null:m,m!==null&&(c.callback=m),i=Sa(t,c,r),i!==null&&(kn(i,t,r),nc(i,t,r))}function ev(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function bg(t,r){ev(t,r),(t=t.alternate)&&ev(t,r)}function tv(t){if(t.tag===13||t.tag===31){var r=Ai(t,67108864);r!==null&&kn(r,t,67108864),bg(t,67108864)}}function nv(t){if(t.tag===13||t.tag===31){var r=$n();r=pi(r);var i=Ai(t,r);i!==null&&kn(i,t,r),bg(t,r)}}var Hh=!0;function E2(t,r,i,c){var f=ee.T;ee.T=null;var m=ae.p;try{ae.p=2,vg(t,r,i,c)}finally{ae.p=m,ee.T=f}}function j2(t,r,i,c){var f=ee.T;ee.T=null;var m=ae.p;try{ae.p=8,vg(t,r,i,c)}finally{ae.p=m,ee.T=f}}function vg(t,r,i,c){if(Hh){var f=_g(c);if(f===null)ig(t,r,c,qh,i),rv(t,c);else if(A2(f,t,r,i,c))c.stopPropagation();else if(rv(t,c),r&4&&-1<S2.indexOf(t)){for(;f!==null;){var m=Zn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ls(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var V=1<<31-kt(v);E.entanglements[1]|=V,v&=~V}sr(m),(at&6)===0&&(Eh=Yt()+500,xc(0))}}break;case 31:case 13:E=Ai(m,2),E!==null&&kn(E,m,2),Sh(),bg(m,2)}if(m=_g(c),m===null&&ig(t,r,c,qh,i),m===f)break;f=m}f!==null&&c.stopPropagation()}else ig(t,r,c,null,i)}}function _g(t){return t=es(t),wg(t)}var qh=null;function wg(t){if(qh=null,t=qs(t),t!==null){var r=u(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=h(r),t!==null)return t;t=null}else if(i===31){if(t=g(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return qh=t,null}function sv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wn()){case ys:return 2;case Pn:return 8;case Ln:case Af:return 32;case _u:return 268435456;default:return 32}default:return 32}}var Ng=!1,La=null,Ua=null,za=null,Ec=new Map,jc=new Map,Ba=[],S2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rv(t,r){switch(t){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Ec.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(r.pointerId)}}function Sc(t,r,i,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Zn(r),r!==null&&tv(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function A2(t,r,i,c,f){switch(r){case"focusin":return La=Sc(La,t,r,i,c,f),!0;case"dragenter":return Ua=Sc(Ua,t,r,i,c,f),!0;case"mouseover":return za=Sc(za,t,r,i,c,f),!0;case"pointerover":var m=f.pointerId;return Ec.set(m,Sc(Ec.get(m)||null,t,r,i,c,f)),!0;case"gotpointercapture":return m=f.pointerId,jc.set(m,Sc(jc.get(m)||null,t,r,i,c,f)),!0}return!1}function av(t){var r=qs(t.target);if(r!==null){var i=u(r);if(i!==null){if(r=i.tag,r===13){if(r=h(i),r!==null){t.blockedOn=r,vs(t.priority,function(){nv(i)});return}}else if(r===31){if(r=g(i),r!==null){t.blockedOn=r,vs(t.priority,function(){nv(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=_g(t.nativeEvent);if(i===null){i=t.nativeEvent;var c=new i.constructor(i.type,i);zo=c,i.target.dispatchEvent(c),zo=null}else return r=Zn(i),r!==null&&tv(r),t.blockedOn=i,!1;r.shift()}return!0}function iv(t,r,i){Fh(t)&&i.delete(r)}function C2(){Ng=!1,La!==null&&Fh(La)&&(La=null),Ua!==null&&Fh(Ua)&&(Ua=null),za!==null&&Fh(za)&&(za=null),Ec.forEach(iv),jc.forEach(iv)}function Gh(t,r){t.blockedOn===r&&(t.blockedOn=null,Ng||(Ng=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,C2)))}var Kh=null;function lv(t){Kh!==t&&(Kh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Kh===t&&(Kh=null);for(var r=0;r<t.length;r+=3){var i=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(wg(c||i)===null)continue;break}var m=Zn(i);m!==null&&(t.splice(r,3),r-=3,_m(m,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function Kl(t){function r(V){return Gh(V,t)}La!==null&&Gh(La,t),Ua!==null&&Gh(Ua,t),za!==null&&Gh(za,t),Ec.forEach(r),jc.forEach(r);for(var i=0;i<Ba.length;i++){var c=Ba[i];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ba.length&&(i=Ba[0],i.blockedOn===null);)av(i),i.blockedOn===null&&Ba.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],m=i[c+1],v=f[en]||null;if(typeof m=="function")v||lv(i);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[en]||null)E=v.formAction;else if(wg(f)!==null)continue}else E=v.action;typeof E=="function"?i[c+1]=E:(i.splice(c,3),c-=3),lv(i)}}}function ov(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Tg(t){this._internalRoot=t}$h.prototype.render=Tg.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,c=$n();Zb(i,c,t,r,null,null)},$h.prototype.unmount=Tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Zb(t.current,2,null,t,null,null),Sh(),r[Bs]=null}};function $h(t){this._internalRoot=t}$h.prototype.unstable_scheduleHydration=function(t){if(t){var r=Su();t={blockedOn:null,target:t,priority:r};for(var i=0;i<Ba.length&&r!==0&&r<Ba[i].priority;i++);Ba.splice(i,0,t),i===0&&av(t)}};var cv=e.version;if(cv!=="19.2.0")throw Error(a(527,cv,"19.2.0"));ae.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var R2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{xs=Qh.inject(R2),ln=Qh}catch{}}return Cc.createRoot=function(t,r){if(!o(t))throw Error(a(299));var i=!1,c="",f=px,m=yx,v=xx;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Wb(t,1,!1,null,null,i,c,null,f,m,v,ov),t[Bs]=r.current,ag(t),new Tg(r)},Cc.hydrateRoot=function(t,r,i){if(!o(t))throw Error(a(299));var c=!1,f="",m=px,v=yx,E=xx,V=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(V=i.formState)),r=Wb(t,1,!0,r,i??null,c,f,V,m,v,E,ov),r.context=Jb(null),i=r.current,c=$n(),c=pi(c),f=ja(c),f.callback=null,Sa(i,f,c),i=c,r.current.lanes=i,mi(r,i),sr(r),t[Bs]=r.current,ag(t),new $h(r)},Cc.version="19.2.0",Cc}var bv;function z2(){if(bv)return Sg.exports;bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sg.exports=U2(),Sg.exports}var B2=z2();const H2=bw(B2);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vv="popstate";function q2(s={}){function e(o,u){let{pathname:h="/",search:g="",hash:y=""}=Ji(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Xg("",{pathname:h,search:g,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let y=o.location.href,p=y.indexOf("#");g=p===-1?y:y.slice(0,p)}return g+"#"+(typeof u=="string"?u:Qc(u))}function a(o,u){ms(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return G2(e,n,a,s)}function Et(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ms(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F2(){return Math.random().toString(36).substring(2,10)}function _v(s,e){return{usr:s.state,key:s.key,idx:e}}function Xg(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ji(e):e,state:n,key:e&&e.key||a||F2()}}function Qc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ji(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function G2(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,h=o.history,g="POP",y=null,p=b();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function b(){return(h.state||{idx:null}).idx}function w(){g="POP";let L=b(),J=L==null?null:L-p;p=L,y&&y({action:g,location:H.location,delta:J})}function T(L,J){g="PUSH";let te=Xg(H.location,L,J);n&&n(te,L),p=b()+1;let G=_v(te,p),X=H.createHref(te);try{h.pushState(G,"",X)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(X)}u&&y&&y({action:g,location:H.location,delta:1})}function C(L,J){g="REPLACE";let te=Xg(H.location,L,J);n&&n(te,L),p=b();let G=_v(te,p),X=H.createHref(te);h.replaceState(G,"",X),u&&y&&y({action:g,location:H.location,delta:0})}function B(L){return K2(L)}let H={get action(){return g},get location(){return s(o,h)},listen(L){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(vv,w),y=L,()=>{o.removeEventListener(vv,w),y=null}},createHref(L){return e(o,L)},createURL:B,encodeLocation(L){let J=B(L);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:T,replace:C,go(L){return h.go(L)}};return H}function K2(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Qc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function vw(s,e,n="/"){return $2(s,e,n,!1)}function $2(s,e,n,a){let o=typeof e=="string"?Ji(e):e,u=sa(o.pathname||"/",n);if(u==null)return null;let h=_w(s);Q2(h);let g=null;for(let y=0;g==null&&y<h.length;++y){let p=aj(u);g=sj(h[y],p,a)}return g}function _w(s,e=[],n=[],a="",o=!1){let u=(h,g,y=o,p)=>{let b={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&y)return;Et(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let w=Wr([a,b.relativePath]),T=n.concat(b);h.children&&h.children.length>0&&(Et(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),_w(h.children,e,T,w,y)),!(h.path==null&&!h.index)&&e.push({path:w,score:tj(w,h.index),routesMeta:T})};return s.forEach((h,g)=>{var y;if(h.path===""||!((y=h.path)!=null&&y.includes("?")))u(h,g);else for(let p of ww(h.path))u(h,g,!0,p)}),e}function ww(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let h=ww(a.join("/")),g=[];return g.push(...h.map(y=>y===""?u:[u,y].join("/"))),o&&g.push(...h),g.map(y=>s.startsWith("/")&&y===""?"/":y)}function Q2(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:nj(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var Y2=/^:[\w-]+$/,X2=3,W2=2,J2=1,Z2=10,ej=-2,wv=s=>s==="*";function tj(s,e){let n=s.split("/"),a=n.length;return n.some(wv)&&(a+=ej),e&&(a+=W2),n.filter(o=>!wv(o)).reduce((o,u)=>o+(Y2.test(u)?X2:u===""?J2:Z2),a)}function nj(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function sj(s,e,n=!1){let{routesMeta:a}=s,o={},u="/",h=[];for(let g=0;g<a.length;++g){let y=a[g],p=g===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=xd({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},b),T=y.route;if(!w&&p&&n&&!a[a.length-1].route.index&&(w=xd({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Wr([u,w.pathname]),pathnameBase:uj(Wr([u,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(u=Wr([u,w.pathnameBase]))}return h}function xd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=rj(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:w},T)=>{if(b==="*"){let B=g[T]||"";h=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const C=g[T];return w&&!C?p[b]=void 0:p[b]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:s}}function rj(s,e=!1,n=!0){ms(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,y)=>(a.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function aj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ms(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function sa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var ij=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lj=s=>ij.test(s);function oj(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?Ji(s):s,u;if(n)if(lj(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),ms(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=Nv(n.substring(1),"/"):u=Nv(n,e)}else u=e;return{pathname:u,search:hj(a),hash:dj(o)}}function Nv(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ig(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cj(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nw(s){let e=cj(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Tw(s,e,n,a=!1){let o;typeof s=="string"?o=Ji(s):(o={...s},Et(!o.pathname||!o.pathname.includes("?"),Ig("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),Ig("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),Ig("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,g;if(h==null)g=n;else{let w=e.length-1;if(!a&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}g=w>=0?e[w]:"/"}let y=oj(o,g),p=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(p||b)&&(y.pathname+="/"),y}var Wr=s=>s.join("/").replace(/\/\/+/g,"/"),uj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),hj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,dj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function fj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ew=["POST","PUT","PATCH","DELETE"];new Set(Ew);var mj=["GET",...Ew];new Set(mj);var vo=R.createContext(null);vo.displayName="DataRouter";var Bd=R.createContext(null);Bd.displayName="DataRouterState";R.createContext(!1);var jw=R.createContext({isTransitioning:!1});jw.displayName="ViewTransition";var gj=R.createContext(new Map);gj.displayName="Fetchers";var pj=R.createContext(null);pj.displayName="Await";var vr=R.createContext(null);vr.displayName="Navigation";var au=R.createContext(null);au.displayName="Location";var _r=R.createContext({outlet:null,matches:[],isDataRoute:!1});_r.displayName="Route";var Op=R.createContext(null);Op.displayName="RouteError";function yj(s,{relative:e}={}){Et(iu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=R.useContext(vr),{hash:o,pathname:u,search:h}=lu(s,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:Wr([n,u])),a.createHref({pathname:g,search:h,hash:o})}function iu(){return R.useContext(au)!=null}function li(){return Et(iu(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(au).location}var Sw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Aw(s){R.useContext(vr).static||R.useLayoutEffect(s)}function Ms(){let{isDataRoute:s}=R.useContext(_r);return s?Ij():xj()}function xj(){Et(iu(),"useNavigate() may be used only in the context of a <Router> component.");let s=R.useContext(vo),{basename:e,navigator:n}=R.useContext(vr),{matches:a}=R.useContext(_r),{pathname:o}=li(),u=JSON.stringify(Nw(a)),h=R.useRef(!1);return Aw(()=>{h.current=!0}),R.useCallback((y,p={})=>{if(ms(h.current,Sw),!h.current)return;if(typeof y=="number"){n.go(y);return}let b=Tw(y,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Wr([e,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[e,n,u,o,s])}R.createContext(null);function bj(){let{matches:s}=R.useContext(_r),e=s[s.length-1];return e?e.params:{}}function lu(s,{relative:e}={}){let{matches:n}=R.useContext(_r),{pathname:a}=li(),o=JSON.stringify(Nw(n));return R.useMemo(()=>Tw(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function vj(s,e){return Cw(s,e)}function Cw(s,e,n,a,o){var te;Et(iu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=R.useContext(vr),{matches:h}=R.useContext(_r),g=h[h.length-1],y=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let G=w&&w.path||"";Rw(p,!w||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=li(),C;if(e){let G=typeof e=="string"?Ji(e):e;Et(b==="/"||((te=G.pathname)==null?void 0:te.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${G.pathname}" was given in the \`location\` prop.`),C=G}else C=T;let B=C.pathname||"/",H=B;if(b!=="/"){let G=b.replace(/^\//,"").split("/");H="/"+B.replace(/^\//,"").split("/").slice(G.length).join("/")}let L=vw(s,{pathname:H});ms(w||L!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ms(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=Ej(L&&L.map(G=>Object.assign({},G,{params:Object.assign({},y,G.params),pathname:Wr([b,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?b:Wr([b,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),h,n,a,o);return e&&J?R.createElement(au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},J):J}function _j(){let s=Rj(),e=fj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,h)}var wj=R.createElement(_j,null),Nj=class extends R.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?R.createElement(_r.Provider,{value:this.props.routeContext},R.createElement(Op.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tj({routeContext:s,match:e,children:n}){let a=R.useContext(vo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(_r.Provider,{value:s},n)}function Ej(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n==null?void 0:n.errors;if(h!=null){let b=u.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);Et(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,y=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=b),w.route.id){let{loaderData:T,errors:C}=n,B=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||B){g=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}let p=n&&a?(b,w)=>{var T,C;a(b,{location:n.location,params:((C=(T=n.matches)==null?void 0:T[0])==null?void 0:C.params)??{},errorInfo:w})}:void 0;return u.reduceRight((b,w,T)=>{let C,B=!1,H=null,L=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,H=w.route.errorElement||wj,g&&(y<0&&T===0?(Rw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,L=null):y===T&&(B=!0,L=w.route.hydrateFallbackElement||null)));let J=e.concat(u.slice(0,T+1)),te=()=>{let G;return C?G=H:B?G=L:w.route.Component?G=R.createElement(w.route.Component,null):w.route.element?G=w.route.element:G=b,R.createElement(Tj,{match:w,routeContext:{outlet:b,matches:J,isDataRoute:n!=null},children:G})};return n&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?R.createElement(Nj,{location:n.location,revalidation:n.revalidation,component:H,error:C,children:te(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:p}):te()},null)}function Mp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jj(s){let e=R.useContext(vo);return Et(e,Mp(s)),e}function Sj(s){let e=R.useContext(Bd);return Et(e,Mp(s)),e}function Aj(s){let e=R.useContext(_r);return Et(e,Mp(s)),e}function Vp(s){let e=Aj(s),n=e.matches[e.matches.length-1];return Et(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Cj(){return Vp("useRouteId")}function Rj(){var a;let s=R.useContext(Op),e=Sj("useRouteError"),n=Vp("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[n]}function Ij(){let{router:s}=jj("useNavigate"),e=Vp("useNavigate"),n=R.useRef(!1);return Aw(()=>{n.current=!0}),R.useCallback(async(o,u={})=>{ms(n.current,Sw),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Tv={};function Rw(s,e,n){!e&&!Tv[s]&&(Tv[s]=!0,ms(!1,n))}R.memo(kj);function kj({routes:s,future:e,state:n,unstable_onError:a}){return Cw(s,void 0,n,a,e)}function rr(s){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dj({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1}){Et(!iu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=R.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=Ji(n));let{pathname:y="/",search:p="",hash:b="",state:w=null,key:T="default"}=n,C=R.useMemo(()=>{let B=sa(y,h);return B==null?null:{location:{pathname:B,search:p,hash:b,state:w,key:T},navigationType:a}},[h,y,p,b,w,T,a]);return ms(C!=null,`<Router basename="${h}"> is not able to match the URL "${y}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:R.createElement(vr.Provider,{value:g},R.createElement(au.Provider,{children:e,value:C}))}function Oj({children:s,location:e}){return vj(Wg(s),e)}function Wg(s,e=[]){let n=[];return R.Children.forEach(s,(a,o)=>{if(!R.isValidElement(a))return;let u=[...e,o];if(a.type===R.Fragment){n.push.apply(n,Wg(a.props.children,u));return}Et(a.type===rr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=Wg(a.props.children,u)),n.push(h)}),n}var rd="get",ad="application/x-www-form-urlencoded";function Hd(s){return s!=null&&typeof s.tagName=="string"}function Mj(s){return Hd(s)&&s.tagName.toLowerCase()==="button"}function Vj(s){return Hd(s)&&s.tagName.toLowerCase()==="form"}function Pj(s){return Hd(s)&&s.tagName.toLowerCase()==="input"}function Lj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Uj(s,e){return s.button===0&&(!e||e==="_self")&&!Lj(s)}var Yh=null;function zj(){if(Yh===null)try{new FormData(document.createElement("form"),0),Yh=!1}catch{Yh=!0}return Yh}var Bj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kg(s){return s!=null&&!Bj.has(s)?(ms(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ad}"`),null):s}function Hj(s,e){let n,a,o,u,h;if(Vj(s)){let g=s.getAttribute("action");a=g?sa(g,e):null,n=s.getAttribute("method")||rd,o=kg(s.getAttribute("enctype"))||ad,u=new FormData(s)}else if(Mj(s)||Pj(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||g.getAttribute("action");if(a=y?sa(y,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||rd,o=kg(s.getAttribute("formenctype"))||kg(g.getAttribute("enctype"))||ad,u=new FormData(g,s),!zj()){let{name:p,type:b,value:w}=s;if(b==="image"){let T=p?`${p}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else p&&u.append(p,w)}}else{if(Hd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rd,a=null,o=ad,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function qj(s,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&sa(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function Fj(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Gj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Kj(s,e,n){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await Fj(u,n);return h.links?h.links():[]}return[]}));return Xj(a.flat(1).filter(Gj).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ev(s,e,n,a,o,u){let h=(y,p)=>n[p]?y.route.id!==n[p].route.id:!0,g=(y,p)=>{var b;return n[p].pathname!==y.pathname||((b=n[p].route.path)==null?void 0:b.endsWith("*"))&&n[p].params["*"]!==y.params["*"]};return u==="assets"?e.filter((y,p)=>h(y,p)||g(y,p)):u==="data"?e.filter((y,p)=>{var w;let b=a.routes[y.route.id];if(!b||!b.hasLoader)return!1;if(h(y,p)||g(y,p))return!0;if(y.route.shouldRevalidate){let T=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function $j(s,e,{includeHydrateFallback:n}={}){return Qj(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Qj(s){return[...new Set(s)]}function Yj(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function Xj(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(Yj(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function Iw(){let s=R.useContext(vo);return Pp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Wj(){let s=R.useContext(Bd);return Pp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Lp=R.createContext(void 0);Lp.displayName="FrameworkContext";function kw(){let s=R.useContext(Lp);return Pp(s,"You must render this element inside a <HydratedRouter> element"),s}function Jj(s,e){let n=R.useContext(Lp),[a,o]=R.useState(!1),[u,h]=R.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:p,onMouseLeave:b,onTouchStart:w}=e,T=R.useRef(null);R.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let H=J=>{J.forEach(te=>{h(te.isIntersecting)})},L=new IntersectionObserver(H,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[s]),R.useEffect(()=>{if(a){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[a]);let C=()=>{o(!0)},B=()=>{o(!1),h(!1)};return n?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Rc(g,C),onBlur:Rc(y,B),onMouseEnter:Rc(p,C),onMouseLeave:Rc(b,B),onTouchStart:Rc(w,C)}]:[!1,T,{}]}function Rc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function Zj({page:s,...e}){let{router:n}=Iw(),a=R.useMemo(()=>vw(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?R.createElement(tS,{page:s,matches:a,...e}):null}function eS(s){let{manifest:e,routeModules:n}=kw(),[a,o]=R.useState([]);return R.useEffect(()=>{let u=!1;return Kj(s,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,n]),a}function tS({page:s,matches:e,...n}){let a=li(),{manifest:o,routeModules:u}=kw(),{basename:h}=Iw(),{loaderData:g,matches:y}=Wj(),p=R.useMemo(()=>Ev(s,e,y,o,a,"data"),[s,e,y,o,a]),b=R.useMemo(()=>Ev(s,e,y,o,a,"assets"),[s,e,y,o,a]),w=R.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,H=!1;if(e.forEach(J=>{var G;let te=o.routes[J.route.id];!te||!te.hasLoader||(!p.some(X=>X.route.id===J.route.id)&&J.route.id in g&&((G=u[J.route.id])!=null&&G.shouldRevalidate)||te.hasClientLoader?H=!0:B.add(J.route.id))}),B.size===0)return[];let L=qj(s,h,"data");return H&&B.size>0&&L.searchParams.set("_routes",e.filter(J=>B.has(J.route.id)).map(J=>J.route.id).join(",")),[L.pathname+L.search]},[h,g,a,o,p,e,s,u]),T=R.useMemo(()=>$j(b,o),[b,o]),C=eS(b);return R.createElement(R.Fragment,null,w.map(B=>R.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),T.map(B=>R.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),C.map(({key:B,link:H})=>R.createElement("link",{key:B,nonce:n.nonce,...H})))}function nS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dw&&(window.__reactRouterVersion="7.9.6")}catch{}function sS({basename:s,children:e,window:n}){let a=R.useRef();a.current==null&&(a.current=q2({window:n,v5Compat:!0}));let o=a.current,[u,h]=R.useState({action:o.action,location:o.location}),g=R.useCallback(y=>{R.startTransition(()=>h(y))},[h]);return R.useLayoutEffect(()=>o.listen(g),[o,g]),R.createElement(Dj,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var Ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mw=R.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:h,state:g,target:y,to:p,preventScrollReset:b,viewTransition:w,...T},C){let{basename:B}=R.useContext(vr),H=typeof p=="string"&&Ow.test(p),L,J=!1;if(typeof p=="string"&&H&&(L=p,Dw))try{let A=new URL(window.location.href),P=p.startsWith("//")?new URL(A.protocol+p):new URL(p),O=sa(P.pathname,B);P.origin===A.origin&&O!=null?p=O+P.search+P.hash:J=!0}catch{ms(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=yj(p,{relative:o}),[G,X,de]=Jj(a,T),pe=lS(p,{replace:h,state:g,target:y,preventScrollReset:b,relative:o,viewTransition:w});function j(A){e&&e(A),A.defaultPrevented||pe(A)}let N=R.createElement("a",{...T,...de,href:L||te,onClick:J||u?e:j,ref:nS(C,X),target:y,"data-discover":!H&&n==="render"?"true":void 0});return G&&!H?R.createElement(R.Fragment,null,N,R.createElement(Zj,{page:te})):N});Mw.displayName="Link";var rS=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:h,viewTransition:g,children:y,...p},b){let w=lu(h,{relative:p.relative}),T=li(),C=R.useContext(Bd),{navigator:B,basename:H}=R.useContext(vr),L=C!=null&&dS(w)&&g===!0,J=B.encodeLocation?B.encodeLocation(w).pathname:w.pathname,te=T.pathname,G=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(te=te.toLowerCase(),G=G?G.toLowerCase():null,J=J.toLowerCase()),G&&H&&(G=sa(G,H)||G);const X=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let de=te===J||!o&&te.startsWith(J)&&te.charAt(X)==="/",pe=G!=null&&(G===J||!o&&G.startsWith(J)&&G.charAt(J.length)==="/"),j={isActive:de,isPending:pe,isTransitioning:L},N=de?e:void 0,A;typeof a=="function"?A=a(j):A=[a,de?"active":null,pe?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(j):u;return R.createElement(Mw,{...p,"aria-current":N,className:A,ref:b,style:P,to:h,viewTransition:g},typeof y=="function"?y(j):y)});rS.displayName="NavLink";var aS=R.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:h=rd,action:g,onSubmit:y,relative:p,preventScrollReset:b,viewTransition:w,...T},C)=>{let B=uS(),H=hS(g,{relative:p}),L=h.toLowerCase()==="get"?"get":"post",J=typeof g=="string"&&Ow.test(g),te=G=>{if(y&&y(G),G.defaultPrevented)return;G.preventDefault();let X=G.nativeEvent.submitter,de=(X==null?void 0:X.getAttribute("formmethod"))||h;B(X||G.currentTarget,{fetcherKey:e,method:de,navigate:n,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:w})};return R.createElement("form",{ref:C,method:L,action:H,onSubmit:a?y:te,...T,"data-discover":!J&&s==="render"?"true":void 0})});aS.displayName="Form";function iS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vw(s){let e=R.useContext(vo);return Et(e,iS(s)),e}function lS(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:h}={}){let g=Ms(),y=li(),p=lu(s,{relative:u});return R.useCallback(b=>{if(Uj(b,e)){b.preventDefault();let w=n!==void 0?n:Qc(y)===Qc(p);g(s,{replace:w,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[y,g,p,n,a,e,s,o,u,h])}var oS=0,cS=()=>`__${String(++oS)}__`;function uS(){let{router:s}=Vw("useSubmit"),{basename:e}=R.useContext(vr),n=Cj();return R.useCallback(async(a,o={})=>{let{action:u,method:h,encType:g,formData:y,body:p}=Hj(a,e);if(o.navigate===!1){let b=o.fetcherKey||cS();await s.fetch(b,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function hS(s,{relative:e}={}){let{basename:n}=R.useContext(vr),a=R.useContext(_r);Et(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...lu(s||".",{relative:e})},h=li();if(s==null){u.search=h.search;let g=new URLSearchParams(u.search),y=g.getAll("index");if(y.some(b=>b==="")){g.delete("index"),y.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Wr([n,u.pathname])),Qc(u)}function dS(s,{relative:e}={}){let n=R.useContext(jw);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Vw("useViewTransitionState"),o=lu(s,{relative:e});if(!n.isTransitioning)return!1;let u=sa(n.currentLocation.pathname,a)||n.currentLocation.pathname,h=sa(n.nextLocation.pathname,a)||n.nextLocation.pathname;return xd(o.pathname,h)!=null||xd(o.pathname,u)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),jv=s=>{const e=mS(s);return e.charAt(0).toUpperCase()+e.slice(1)},Pw=(...s)=>s.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),gS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=R.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:h,...g},y)=>R.createElement("svg",{ref:y,...pS,width:e,height:e,stroke:s,strokeWidth:a?Number(n)*24/Number(e):n,className:Pw("lucide",o),...!u&&!gS(g)&&{"aria-hidden":"true"},...g},[...h.map(([p,b])=>R.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(s,e)=>{const n=R.forwardRef(({className:a,...o},u)=>R.createElement(yS,{ref:u,iconNode:e,className:Pw(`lucide-${fS(jv(s))}`,`lucide-${s}`,a),...o}));return n.displayName=jv(s),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Up=Ne("arrow-left",xS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bd=Ne("arrow-right",bS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Sv=Ne("baby",vS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],wS=Ne("banknote",_S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Av=Ne("bell",NS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ES=Ne("book-open",TS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Jg=Ne("briefcase",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Lc=Ne("building-2",SS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ki=Ne("calendar",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],RS=Ne("chart-pie",CS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uc=Ne("check",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],DS=Ne("chevron-down",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rs=Ne("chevron-right",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ks=Ne("circle-alert",MS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lr=Ne("circle-check-big",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LS=Ne("circle-check",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],zS=Ne("circle-user",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],HS=Ne("circle-x",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],FS=Ne("clock",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],qd=Ne("cloud-upload",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xn=Ne("download",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zg=Ne("eye-off",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yc=Ne("eye",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Lw=Ne("file-spreadsheet",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],He=Ne("file-text",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],zp=Ne("file",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Cv=Ne("flask-conical",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],eA=Ne("folder-open",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Rv=Ne("folder",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sA=Ne("funnel",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Bp=Ne("graduation-cap",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Dg=Ne("image",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],lA=Ne("landmark",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uw=Ne("layout-grid",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Iv=Ne("list",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zw=Ne("loader-circle",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ao=Ne("lock",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fA=Ne("log-out",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gA=Ne("mail",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Fd=Ne("maximize-2",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ga=Ne("message-circle",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],vd=Ne("message-square",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vA=Ne("phone",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],io=Ne("plus",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],NA=Ne("refresh-ccw",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Bw=Ne("rotate-ccw",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gd=Ne("save",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Hw=Ne("school",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zi=Ne("search",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Kd=Ne("send",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RA=Ne("settings",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Jl=Ne("shield-check",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Og=Ne("square-check-big",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lo=Ne("square-pen",DA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],MA=Ne("stethoscope",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cr=Ne("trash-2",VA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rn=Ne("upload",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zl=Ne("user",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$l=Ne("users",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ep=Ne("utensils",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wt=Ne("x",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],$d=Ne("zoom-in",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Qd=Ne("zoom-out",qA),FA=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:Jl,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],qw="TRC D LIU TRNG MU GIO VNG ANH",GA="modulepreload",KA=function(s){return"/"+s},kv={},zc=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),y=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(n.map(p=>{if(p=KA(p),p in kv)return;kv[p]=!0;const b=p.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":GA,b||(T.as="script"),T.crossOrigin="",T.href=p,y&&T.setAttribute("nonce",y),document.head.appendChild(T),b)return new Promise((C,B)=>{T.addEventListener("load",C),T.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},$A=()=>{};var Dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},QA=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],y=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,y=o+2<s.length,p=y?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let T=(g&15)<<2|p>>6,C=p&63;y||(C=64,h||(T=64)),a.push(n[b],n[w],n[T],n[C])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Fw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):QA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new YA;const T=u<<2|g>>4;if(a.push(T),p!==64){const C=g<<4&240|p>>2;if(a.push(C),w!==64){const B=p<<6&192|w;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class YA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(s){const e=Fw(s);return Gw.encodeByteArray(e,!0)},_d=function(s){return XA(s).replace(/\./g,"")},Kw=function(s){try{return Gw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>WA().__FIREBASE_DEFAULTS__,ZA=()=>{if(typeof process>"u"||typeof Dv>"u")return;const s=Dv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},eC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Kw(s[1]);return e&&JSON.parse(e)},Yd=()=>{try{return $A()||JA()||ZA()||eC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$w=s=>{var e,n;return(n=(e=Yd())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Hp=s=>{const e=$w(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},Qw=()=>{var s;return(s=Yd())==null?void 0:s.config},Yw=s=>{var e;return(e=Yd())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xd(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_d(JSON.stringify(n)),_d(JSON.stringify(h)),""].join(".")}const Bc={};function nC(){const s={prod:[],emulator:[]};for(const e of Object.keys(Bc))Bc[e]?s.emulator.push(e):s.prod.push(e);return s}function sC(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Ov=!1;function Wd(s,e){if(typeof window>"u"||typeof document>"u"||!wr(window.location.host)||Bc[s]===e||Bc[s]||Ov)return;Bc[s]=e;function n(T){return`__firebase__banner__${T}`}const a="__firebase__banner",u=nC().prod.length>0;function h(){const T=document.getElementById(a);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ov=!0,h()},T}function b(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=sC(a),C=n("text"),B=document.getElementById(C)||document.createElement("span"),H=n("learnmore"),L=document.getElementById(H)||document.createElement("a"),J=n("preprendIcon"),te=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;g(G),b(L,H);const X=p();y(te,J),G.append(te,B,L,X),document.body.appendChild(G)}u?(B.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function aC(){var e;const s=(e=Yd())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function oC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cC(){const s=vn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uC(){return!aC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hC(){try{return typeof indexedDB=="object"}catch{return!1}}function dC(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="FirebaseError";class Vs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=fC,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?mC(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Vs(o,g,a)}}function mC(s,e){return s.replace(gC,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const gC=/\{\$([^}]+)}/g;function pC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Wa(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(Mv(u)&&Mv(h)){if(!Wa(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Mv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function kc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Dc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function yC(s,e){const n=new xC(s,e);return n.subscribe.bind(n)}class xC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");bC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Mg),o.error===void 0&&(o.error=Mg),o.complete===void 0&&(o.complete=Mg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bC(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(s){return s&&s._delegate?s._delegate:s}class ra{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new tC;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wC(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:_C(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _C(s){return s===Bi?void 0:s}function wC(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const TC={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},EC=Ye.INFO,jC={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},SC=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=jC[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=EC,this._logHandler=SC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const AC=(s,e)=>e.some(n=>s instanceof n);let Vv,Pv;function CC(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RC(){return Pv||(Pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,tp=new WeakMap,Jw=new WeakMap,Vg=new WeakMap,Fp=new WeakMap;function IC(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n($a(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,s)}).catch(()=>{}),Fp.set(e,s),e}function kC(s){if(tp.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});tp.set(s,e)}let np={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return tp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Jw.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $a(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function DC(s){np=s(np)}function OC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(Pg(this),e,...n);return Jw.set(a,e.sort?e.sort():[e]),$a(a)}:RC().includes(s)?function(...e){return s.apply(Pg(this),e),$a(Ww.get(this))}:function(...e){return $a(s.apply(Pg(this),e))}}function MC(s){return typeof s=="function"?OC(s):(s instanceof IDBTransaction&&kC(s),AC(s,CC())?new Proxy(s,np):s)}function $a(s){if(s instanceof IDBRequest)return IC(s);if(Vg.has(s))return Vg.get(s);const e=MC(s);return e!==s&&(Vg.set(s,e),Fp.set(e,s)),e}const Pg=s=>Fp.get(s);function VC(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=$a(h);return a&&h.addEventListener("upgradeneeded",y=>{a($a(h.result),y.oldVersion,y.newVersion,$a(h.transaction),y)}),n&&h.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const PC=["get","getKey","getAll","getAllKeys","count"],LC=["put","add","delete","clear"],Lg=new Map;function Lv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Lg.get(e))return Lg.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=LC.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||PC.includes(n)))return;const u=async function(h,...g){const y=this.transaction(h,o?"readwrite":"readonly");let p=y.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&y.done]))[0]};return Lg.set(e,u),u}DC(s=>({...s,get:(e,n,a)=>Lv(e,n)||s.get(e,n,a),has:(e,n)=>!!Lv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zC(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function zC(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",Uv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new qp("@firebase/app"),BC="@firebase/app-compat",HC="@firebase/analytics-compat",qC="@firebase/analytics",FC="@firebase/app-check-compat",GC="@firebase/app-check",KC="@firebase/auth",$C="@firebase/auth-compat",QC="@firebase/database",YC="@firebase/data-connect",XC="@firebase/database-compat",WC="@firebase/functions",JC="@firebase/functions-compat",ZC="@firebase/installations",e4="@firebase/installations-compat",t4="@firebase/messaging",n4="@firebase/messaging-compat",s4="@firebase/performance",r4="@firebase/performance-compat",a4="@firebase/remote-config",i4="@firebase/remote-config-compat",l4="@firebase/storage",o4="@firebase/storage-compat",c4="@firebase/firestore",u4="@firebase/ai",h4="@firebase/firestore-compat",d4="firebase",f4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",m4={[sp]:"fire-core",[BC]:"fire-core-compat",[qC]:"fire-analytics",[HC]:"fire-analytics-compat",[GC]:"fire-app-check",[FC]:"fire-app-check-compat",[KC]:"fire-auth",[$C]:"fire-auth-compat",[QC]:"fire-rtdb",[YC]:"fire-data-connect",[XC]:"fire-rtdb-compat",[WC]:"fire-fn",[JC]:"fire-fn-compat",[ZC]:"fire-iid",[e4]:"fire-iid-compat",[t4]:"fire-fcm",[n4]:"fire-fcm-compat",[s4]:"fire-perf",[r4]:"fire-perf-compat",[a4]:"fire-rc",[i4]:"fire-rc-compat",[l4]:"fire-gcs",[o4]:"fire-gcs-compat",[c4]:"fire-fst",[h4]:"fire-fst-compat",[u4]:"fire-vertex","fire-js":"fire-js",[d4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Map,ap=new Map,ip=new Map;function zv(s,e){try{s.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ja(s){const e=s.name;if(ip.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,s);for(const n of oo.values())zv(n,s);for(const n of ap.values())zv(n,s);return!0}function uu(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function On(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qa=new ou("app","Firebase",g4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=f4;function Gp(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:rp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Qa.create("bad-app-name",{appName:String(o)});if(n||(n=Qw()),!n)throw Qa.create("no-options");const u=oo.get(o);if(u){if(Wa(n,u.options)&&Wa(a,u.config))return u;throw Qa.create("duplicate-app",{appName:o})}const h=new NC(o);for(const y of ip.values())h.addComponent(y);const g=new p4(n,a,h);return oo.set(o,g),g}function Jd(s=rp){const e=oo.get(s);if(!e&&s===rp&&Qw())return Gp();if(!e)throw Qa.create("no-app",{appName:s});return e}async function y4(s){let e=!1;const n=s.name;oo.has(n)?(e=!0,oo.delete(n)):ap.has(n)&&s.decRefCount()<=0&&(ap.delete(n),e=!0),e&&(await Promise.all(s.container.getProviders().map(a=>a.delete())),s.isDeleted=!0)}function ds(s,e,n){let a=m4[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(h.join(" "));return}Ja(new ra(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",b4=1,Xc="firebase-heartbeat-store";let Ug=null;function Zw(){return Ug||(Ug=VC(x4,b4,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Xc)}catch(n){console.warn(n)}}}}).catch(s=>{throw Qa.create("idb-open",{originalErrorMessage:s.message})})),Ug}async function v4(s){try{const n=(await Zw()).transaction(Xc),a=await n.objectStore(Xc).get(e1(s));return await n.done,a}catch(e){if(e instanceof Vs)aa.warn(e.message);else{const n=Qa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});aa.warn(n.message)}}}async function Bv(s,e){try{const a=(await Zw()).transaction(Xc,"readwrite");await a.objectStore(Xc).put(e,e1(s)),await a.done}catch(n){if(n instanceof Vs)aa.warn(n.message);else{const a=Qa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});aa.warn(a.message)}}}function e1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=1024,w4=30;class N4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E4(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Hv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>w4){const h=j4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){aa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hv(),{heartbeatsToSend:a,unsentEntries:o}=T4(this._heartbeatsCache.heartbeats),u=_d(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return aa.warn(n),""}}}function Hv(){return new Date().toISOString().substring(0,10)}function T4(s,e=_4){const n=[];let a=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),qv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),qv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class E4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hC()?dC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function qv(s){return _d(JSON.stringify({version:2,heartbeats:s})).length}function j4(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(s){Ja(new ra("platform-logger",e=>new UC(e),"PRIVATE")),Ja(new ra("heartbeat",e=>new N4(e),"PRIVATE")),ds(sp,Uv,s),ds(sp,Uv,"esm2020"),ds("fire-js","")}S4("");var A4="firebase",C4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(A4,C4,"app");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ya,t1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function A(){}A.prototype=N.prototype,j.F=N.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(P,O,M){for(var I=Array(arguments.length-2),De=2;De<arguments.length;De++)I[De-2]=arguments[De];return N.prototype[O].apply(P,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,N,A){A||(A=0);const P=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)P[O]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(O=0;O<16;++O)P[O]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=j.g[0],A=j.g[1],O=j.g[2];let M=j.g[3],I;I=N+(M^A&(O^M))+P[0]+3614090360&4294967295,N=A+(I<<7&4294967295|I>>>25),I=M+(O^N&(A^O))+P[1]+3905402710&4294967295,M=N+(I<<12&4294967295|I>>>20),I=O+(A^M&(N^A))+P[2]+606105819&4294967295,O=M+(I<<17&4294967295|I>>>15),I=A+(N^O&(M^N))+P[3]+3250441966&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(M^A&(O^M))+P[4]+4118548399&4294967295,N=A+(I<<7&4294967295|I>>>25),I=M+(O^N&(A^O))+P[5]+1200080426&4294967295,M=N+(I<<12&4294967295|I>>>20),I=O+(A^M&(N^A))+P[6]+2821735955&4294967295,O=M+(I<<17&4294967295|I>>>15),I=A+(N^O&(M^N))+P[7]+4249261313&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(M^A&(O^M))+P[8]+1770035416&4294967295,N=A+(I<<7&4294967295|I>>>25),I=M+(O^N&(A^O))+P[9]+2336552879&4294967295,M=N+(I<<12&4294967295|I>>>20),I=O+(A^M&(N^A))+P[10]+4294925233&4294967295,O=M+(I<<17&4294967295|I>>>15),I=A+(N^O&(M^N))+P[11]+2304563134&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(M^A&(O^M))+P[12]+1804603682&4294967295,N=A+(I<<7&4294967295|I>>>25),I=M+(O^N&(A^O))+P[13]+4254626195&4294967295,M=N+(I<<12&4294967295|I>>>20),I=O+(A^M&(N^A))+P[14]+2792965006&4294967295,O=M+(I<<17&4294967295|I>>>15),I=A+(N^O&(M^N))+P[15]+1236535329&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(O^M&(A^O))+P[1]+4129170786&4294967295,N=A+(I<<5&4294967295|I>>>27),I=M+(A^O&(N^A))+P[6]+3225465664&4294967295,M=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(M^N))+P[11]+643717713&4294967295,O=M+(I<<14&4294967295|I>>>18),I=A+(M^N&(O^M))+P[0]+3921069994&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^M&(A^O))+P[5]+3593408605&4294967295,N=A+(I<<5&4294967295|I>>>27),I=M+(A^O&(N^A))+P[10]+38016083&4294967295,M=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(M^N))+P[15]+3634488961&4294967295,O=M+(I<<14&4294967295|I>>>18),I=A+(M^N&(O^M))+P[4]+3889429448&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^M&(A^O))+P[9]+568446438&4294967295,N=A+(I<<5&4294967295|I>>>27),I=M+(A^O&(N^A))+P[14]+3275163606&4294967295,M=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(M^N))+P[3]+4107603335&4294967295,O=M+(I<<14&4294967295|I>>>18),I=A+(M^N&(O^M))+P[8]+1163531501&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^M&(A^O))+P[13]+2850285829&4294967295,N=A+(I<<5&4294967295|I>>>27),I=M+(A^O&(N^A))+P[2]+4243563512&4294967295,M=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(M^N))+P[7]+1735328473&4294967295,O=M+(I<<14&4294967295|I>>>18),I=A+(M^N&(O^M))+P[12]+2368359562&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(A^O^M)+P[5]+4294588738&4294967295,N=A+(I<<4&4294967295|I>>>28),I=M+(N^A^O)+P[8]+2272392833&4294967295,M=N+(I<<11&4294967295|I>>>21),I=O+(M^N^A)+P[11]+1839030562&4294967295,O=M+(I<<16&4294967295|I>>>16),I=A+(O^M^N)+P[14]+4259657740&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^M)+P[1]+2763975236&4294967295,N=A+(I<<4&4294967295|I>>>28),I=M+(N^A^O)+P[4]+1272893353&4294967295,M=N+(I<<11&4294967295|I>>>21),I=O+(M^N^A)+P[7]+4139469664&4294967295,O=M+(I<<16&4294967295|I>>>16),I=A+(O^M^N)+P[10]+3200236656&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^M)+P[13]+681279174&4294967295,N=A+(I<<4&4294967295|I>>>28),I=M+(N^A^O)+P[0]+3936430074&4294967295,M=N+(I<<11&4294967295|I>>>21),I=O+(M^N^A)+P[3]+3572445317&4294967295,O=M+(I<<16&4294967295|I>>>16),I=A+(O^M^N)+P[6]+76029189&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^M)+P[9]+3654602809&4294967295,N=A+(I<<4&4294967295|I>>>28),I=M+(N^A^O)+P[12]+3873151461&4294967295,M=N+(I<<11&4294967295|I>>>21),I=O+(M^N^A)+P[15]+530742520&4294967295,O=M+(I<<16&4294967295|I>>>16),I=A+(O^M^N)+P[2]+3299628645&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(O^(A|~M))+P[0]+4096336452&4294967295,N=A+(I<<6&4294967295|I>>>26),I=M+(A^(N|~O))+P[7]+1126891415&4294967295,M=N+(I<<10&4294967295|I>>>22),I=O+(N^(M|~A))+P[14]+2878612391&4294967295,O=M+(I<<15&4294967295|I>>>17),I=A+(M^(O|~N))+P[5]+4237533241&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~M))+P[12]+1700485571&4294967295,N=A+(I<<6&4294967295|I>>>26),I=M+(A^(N|~O))+P[3]+2399980690&4294967295,M=N+(I<<10&4294967295|I>>>22),I=O+(N^(M|~A))+P[10]+4293915773&4294967295,O=M+(I<<15&4294967295|I>>>17),I=A+(M^(O|~N))+P[1]+2240044497&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~M))+P[8]+1873313359&4294967295,N=A+(I<<6&4294967295|I>>>26),I=M+(A^(N|~O))+P[15]+4264355552&4294967295,M=N+(I<<10&4294967295|I>>>22),I=O+(N^(M|~A))+P[6]+2734768916&4294967295,O=M+(I<<15&4294967295|I>>>17),I=A+(M^(O|~N))+P[13]+1309151649&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~M))+P[4]+4149444226&4294967295,N=A+(I<<6&4294967295|I>>>26),I=M+(A^(N|~O))+P[11]+3174756917&4294967295,M=N+(I<<10&4294967295|I>>>22),I=O+(N^(M|~A))+P[2]+718787259&4294967295,O=M+(I<<15&4294967295|I>>>17),I=A+(M^(O|~N))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+O&4294967295,j.g[3]=j.g[3]+M&4294967295}a.prototype.v=function(j,N){N===void 0&&(N=j.length);const A=N-this.blockSize,P=this.C;let O=this.h,M=0;for(;M<N;){if(O==0)for(;M<=A;)o(this,j,M),M+=this.blockSize;if(typeof j=="string"){for(;M<N;)if(P[O++]=j.charCodeAt(M++),O==this.blockSize){o(this,P),O=0;break}}else for(;M<N;)if(P[O++]=j[M++],O==this.blockSize){o(this,P),O=0;break}}this.h=O,this.o+=N},a.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)j[N++]=this.g[A]>>>P&255;return j};function u(j,N){var A=g;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=N(j)}function h(j,N){this.h=N;const A=[];let P=!0;for(let O=j.length-1;O>=0;O--){const M=j[O]|0;P&&M==N||(A[O]=M,P=!1)}this.g=A}var g={};function y(j){return-128<=j&&j<128?u(j,function(N){return new h([N|0],N<0?-1:0)}):new h([j|0],j<0?-1:0)}function p(j){if(isNaN(j)||!isFinite(j))return w;if(j<0)return L(p(-j));const N=[];let A=1;for(let P=0;j>=A;P++)N[P]=j/A|0,A*=4294967296;return new h(N,0)}function b(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return L(b(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(N,8));let P=w;for(let M=0;M<j.length;M+=8){var O=Math.min(8,j.length-M);const I=parseInt(j.substring(M,M+O),N);O<8?(O=p(Math.pow(N,O)),P=P.j(O).add(p(I))):(P=P.j(A),P=P.add(p(I)))}return P}var w=y(0),T=y(1),C=y(16777216);s=h.prototype,s.m=function(){if(H(this))return-L(this).m();let j=0,N=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);j+=(P>=0?P:4294967296+P)*N,N*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(B(this))return"0";if(H(this))return"-"+L(this).toString(j);const N=p(Math.pow(j,6));var A=this;let P="";for(;;){const O=X(A,N).g;A=J(A,O.j(N));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=O,B(A))return M+P;for(;M.length<6;)M="0"+M;P=M+P}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function B(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function H(j){return j.h==-1}s.l=function(j){return j=J(this,j),H(j)?-1:B(j)?0:1};function L(j){const N=j.g.length,A=[];for(let P=0;P<N;P++)A[P]=~j.g[P];return new h(A,~j.h).add(T)}s.abs=function(){return H(this)?L(this):this},s.add=function(j){const N=Math.max(this.g.length,j.g.length),A=[];let P=0;for(let O=0;O<=N;O++){let M=P+(this.i(O)&65535)+(j.i(O)&65535),I=(M>>>16)+(this.i(O)>>>16)+(j.i(O)>>>16);P=I>>>16,M&=65535,I&=65535,A[O]=I<<16|M}return new h(A,A[A.length-1]&-2147483648?-1:0)};function J(j,N){return j.add(L(N))}s.j=function(j){if(B(this)||B(j))return w;if(H(this))return H(j)?L(this).j(L(j)):L(L(this).j(j));if(H(j))return L(this.j(L(j)));if(this.l(C)<0&&j.l(C)<0)return p(this.m()*j.m());const N=this.g.length+j.g.length,A=[];for(var P=0;P<2*N;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<j.g.length;O++){const M=this.i(P)>>>16,I=this.i(P)&65535,De=j.i(O)>>>16,Pe=j.i(O)&65535;A[2*P+2*O]+=I*Pe,te(A,2*P+2*O),A[2*P+2*O+1]+=M*Pe,te(A,2*P+2*O+1),A[2*P+2*O+1]+=I*De,te(A,2*P+2*O+1),A[2*P+2*O+2]+=M*De,te(A,2*P+2*O+2)}for(j=0;j<N;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=N;j<2*N;j++)A[j]=0;return new h(A,0)};function te(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function G(j,N){this.g=j,this.h=N}function X(j,N){if(B(N))throw Error("division by zero");if(B(j))return new G(w,w);if(H(j))return N=X(L(j),N),new G(L(N.g),L(N.h));if(H(N))return N=X(j,L(N)),new G(L(N.g),N.h);if(j.g.length>30){if(H(j)||H(N))throw Error("slowDivide_ only works with positive integers.");for(var A=T,P=N;P.l(j)<=0;)A=de(A),P=de(P);var O=pe(A,1),M=pe(P,1);for(P=pe(P,2),A=pe(A,2);!B(P);){var I=M.add(P);I.l(j)<=0&&(O=O.add(A),M=I),P=pe(P,1),A=pe(A,1)}return N=J(j,O.j(N)),new G(O,N)}for(O=w;j.l(N)>=0;){for(A=Math.max(1,Math.floor(j.m()/N.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),M=p(A),I=M.j(N);H(I)||I.l(j)>0;)A-=P,M=p(A),I=M.j(N);B(M)&&(M=T),O=O.add(M),j=J(j,I)}return new G(O,j)}s.B=function(j){return X(this,j).h},s.and=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)&j.i(P);return new h(A,this.h&j.h)},s.or=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)|j.i(P);return new h(A,this.h|j.h)},s.xor=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)^j.i(P);return new h(A,this.h^j.h)};function de(j){const N=j.g.length+1,A=[];for(let P=0;P<N;P++)A[P]=j.i(P)<<1|j.i(P-1)>>>31;return new h(A,j.h)}function pe(j,N){const A=N>>5;N%=32;const P=j.g.length-A,O=[];for(let M=0;M<P;M++)O[M]=N>0?j.i(M+A)>>>N|j.i(M+A+1)<<32-N:j.i(M+A);return new h(O,j.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,t1=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=b,Ya=h}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var n1,Oc,s1,id,lp,r1,a1,i1;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var x=0;x<d.length;++x){var _=d[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=n(this);function o(d,x){if(x)e:{var _=a;d=d.split(".");for(var S=0;S<d.length-1;S++){var K=d[S];if(!(K in _))break e;_=_[K]}d=d[d.length-1],S=_[d],x=x(S),x!=S&&x!=null&&e(_,d,{configurable:!0,writable:!0,value:x})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(x){var _=[],S;for(S in x)Object.prototype.hasOwnProperty.call(x,S)&&_.push([S,x[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function y(d,x,_){return d.call.apply(d.bind,arguments)}function p(d,x,_){return p=y,p.apply(null,arguments)}function b(d,x){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function w(d,x){function _(){}_.prototype=x.prototype,d.Z=x.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(S,K,Z){for(var ye=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ye[Ue-2]=arguments[Ue];return x.prototype[K].apply(S,ye)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const x=d.length;if(x>0){const _=Array(x);for(let S=0;S<x;S++)_[S]=d[S];return _}return[]}function B(d,x){for(let S=1;S<arguments.length;S++){const K=arguments[S];var _=typeof K;if(_=_!="object"?_:K?Array.isArray(K)?"array":_:"null",_=="array"||_=="object"&&typeof K.length=="number"){_=d.length||0;const Z=K.length||0;d.length=_+Z;for(let ye=0;ye<Z;ye++)d[_+ye]=K[ye]}else d.push(K)}}class H{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function L(d){h.setTimeout(()=>{throw d},0)}function J(){var d=j;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class te{constructor(){this.h=this.g=null}add(x,_){const S=G.get();S.set(x,_),this.h?this.h.next=S:this.g=S,this.h=S}}var G=new H(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,j=new te,N=()=>{const d=Promise.resolve(void 0);de=()=>{d.then(A)}};function A(){for(var d;d=J();){try{d.h.call(d.g)}catch(_){L(_)}var x=G;x.j(d),x.h<100&&(x.h++,d.next=x.g,x.g=d)}pe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,x),h.removeEventListener("test",_,x)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function De(d,x){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,x)}w(De,O),De.prototype.init=function(d,x){const _=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget,x||(_=="mouseover"?x=d.fromElement:_=="mouseout"&&(x=d.toElement)),this.relatedTarget=x,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ae(d,x,_,S,K){this.listener=d,this.proxy=null,this.src=x,this.type=_,this.capture=!!S,this.ha=K,this.key=++ee,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Re(d,x,_){for(const S in d)x.call(_,d[S],S,d)}function ue(d,x){for(const _ in d)x.call(void 0,d[_],_,d)}function k(d){const x={};for(const _ in d)x[_]=d[_];return x}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(d,x){let _,S;for(let K=1;K<arguments.length;K++){S=arguments[K];for(_ in S)d[_]=S[_];for(let Z=0;Z<F.length;Z++)_=F[Z],Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])}}function Q(d){this.src=d,this.g={},this.h=0}Q.prototype.add=function(d,x,_,S,K){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const ye=z(d,x,S,K);return ye>-1?(x=d[ye],_||(x.fa=!1)):(x=new ae(x,this.src,Z,!!S,K),x.fa=_,d.push(x)),x};function me(d,x){const _=x.type;if(_ in d.g){var S=d.g[_],K=Array.prototype.indexOf.call(S,x,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(S,K,1),Z&&(xe(x),d.g[_].length==0&&(delete d.g[_],d.h--))}}function z(d,x,_,S){for(let K=0;K<d.length;++K){const Z=d[K];if(!Z.da&&Z.listener==x&&Z.capture==!!_&&Z.ha==S)return K}return-1}var D="closure_lm_"+(Math.random()*1e6|0),se={};function fe(d,x,_,S,K){if(Array.isArray(x)){for(let Z=0;Z<x.length;Z++)fe(d,x[Z],_,S,K);return null}return _=ot(_),d&&d[Pe]?d.J(x,_,g(S)?!!S.capture:!1,K):Le(d,x,_,!1,S,K)}function Le(d,x,_,S,K,Z){if(!x)throw Error("Invalid event type");const ye=g(K)?!!K.capture:!!K;let Ue=we(d);if(Ue||(d[D]=Ue=new Q(d)),_=Ue.add(x,_,S,ye,Z),_.proxy)return _;if(S=st(),_.proxy=S,S.src=d,S.listener=_,d.addEventListener)M||(K=ye),K===void 0&&(K=!1),d.addEventListener(x.toString(),S,K);else if(d.attachEvent)d.attachEvent(_n(x.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function d(_){return x.call(d.src,d.listener,_)}const x=ge;return d}function Zt(d,x,_,S,K){if(Array.isArray(x))for(var Z=0;Z<x.length;Z++)Zt(d,x[Z],_,S,K);else S=g(S)?!!S.capture:!!S,_=ot(_),d&&d[Pe]?(d=d.i,Z=String(x).toString(),Z in d.g&&(x=d.g[Z],_=z(x,_,S,K),_>-1&&(xe(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete d.g[Z],d.h--)))):d&&(d=we(d))&&(x=d.g[x.toString()],d=-1,x&&(d=z(x,_,S,K)),(_=d>-1?x[d]:null)&&Qt(_))}function Qt(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[Pe])me(x.i,d);else{var _=d.type,S=d.proxy;x.removeEventListener?x.removeEventListener(_,S,d.capture):x.detachEvent?x.detachEvent(_n(_),S):x.addListener&&x.removeListener&&x.removeListener(S),(_=we(x))?(me(_,d),_.h==0&&(_.src=null,x[D]=null)):xe(d)}}}function _n(d){return d in se?se[d]:se[d]="on"+d}function ge(d,x){if(d.da)d=!0;else{x=new De(x,this);const _=d.listener,S=d.ha||d.src;d.fa&&Qt(d),d=_.call(S,x)}return d}function we(d){return d=d[D],d instanceof Q?d:null}var Je="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(d){return typeof d=="function"?d:(d[Je]||(d[Je]=function(x){return d.handleEvent(x)}),d[Je])}function Ae(){P.call(this),this.i=new Q(this),this.M=this,this.G=null}w(Ae,P),Ae.prototype[Pe]=!0,Ae.prototype.removeEventListener=function(d,x,_,S){Zt(this,d,x,_,S)};function qe(d,x){var _,S=d.G;if(S)for(_=[];S;S=S.G)_.push(S);if(d=d.M,S=x.type||x,typeof x=="string")x=new O(x,d);else if(x instanceof O)x.target=x.target||d;else{var K=x;x=new O(S,d),he(x,K)}K=!0;let Z,ye;if(_)for(ye=_.length-1;ye>=0;ye--)Z=x.g=_[ye],K=Ke(Z,S,!0,x)&&K;if(Z=x.g=d,K=Ke(Z,S,!0,x)&&K,K=Ke(Z,S,!1,x)&&K,_)for(ye=0;ye<_.length;ye++)Z=x.g=_[ye],K=Ke(Z,S,!1,x)&&K}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var d=this.i;for(const x in d.g){const _=d.g[x];for(let S=0;S<_.length;S++)xe(_[S]);delete d.g[x],d.h--}}this.G=null},Ae.prototype.J=function(d,x,_,S){return this.i.add(String(d),x,!1,_,S)},Ae.prototype.K=function(d,x,_,S){return this.i.add(String(d),x,!0,_,S)};function Ke(d,x,_,S){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();let K=!0;for(let Z=0;Z<x.length;++Z){const ye=x[Z];if(ye&&!ye.da&&ye.capture==_){const Ue=ye.listener,Dt=ye.ha||ye.src;ye.fa&&me(d.i,ye),K=Ue.call(Dt,S)!==!1&&K}}return K&&!S.defaultPrevented}function Tr(d,x){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:h.setTimeout(d,x||0)}function Er(d){d.g=Tr(()=>{d.g=null,d.i&&(d.i=!1,Er(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Yt extends P{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(d){P.call(this),this.h=d,this.g={}}w(Wn,P);var ys=[];function Pn(d){Re(d.g,function(x,_){this.g.hasOwnProperty(_)&&Qt(x)},d),d.g={}}Wn.prototype.N=function(){Wn.Z.N.call(this),Pn(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=h.JSON.stringify,Af=h.JSON.parse,_u=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function wu(){}function Nu(){}var xs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){O.call(this,"d")}w(ln,O);function Jn(){O.call(this,"c")}w(Jn,O);var kt={},Tu=null;function il(){return Tu=Tu||new Ae}kt.Ia="serverreachability";function Eu(d){O.call(this,kt.Ia,d)}w(Eu,O);function Ps(d){const x=il();qe(x,new Eu(x))}kt.STAT_EVENT="statevent";function fi(d,x){O.call(this,kt.STAT_EVENT,d),this.stat=x}w(fi,O);function Pt(d){const x=il();qe(x,new fi(x,d))}kt.Ja="timingevent";function Ls(d,x){O.call(this,kt.Ja,d),this.size=x}w(Ls,O);function Us(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},x)}function bs(){this.g=!0}bs.prototype.ua=function(){this.g=!1};function Cf(d,x,_,S,K,Z){d.info(function(){if(d.g)if(Z){var ye="",Ue=Z.split("&");for(let rt=0;rt<Ue.length;rt++){var Dt=Ue[rt].split("=");if(Dt.length>1){const Nt=Dt[0];Dt=Dt[1];const ns=Nt.split("_");ye=ns.length>=2&&ns[1]=="type"?ye+(Nt+"="+Dt+"&"):ye+(Nt+"=redacted&")}}}else ye=null;else ye=Z;return"XMLHTTP REQ ("+S+") [attempt "+K+"]: "+x+`
`+_+`
`+ye})}function ju(d,x,_,S,K,Z,ye){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+K+"]: "+x+`
`+_+`
`+Z+" "+ye})}function zs(d,x,_,S){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+Rf(d,_)+(S?" "+S:"")})}function mi(d,x){d.info(function(){return"TIMEOUT: "+x})}bs.prototype.info=function(){};function Rf(d,x){if(!d.g)return x;if(!x)return null;try{const Z=JSON.parse(x);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var _=Z[d];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var K=S[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ye=1;ye<S.length;ye++)S[ye]=""}}}}return Ln(Z)}catch{return x}}var gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Co={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ro;function pi(){}w(pi,wu),pi.prototype.g=function(){return new XMLHttpRequest},Ro=new pi;function jr(d){return encodeURIComponent(String(d))}function Su(d){var x=1;d=d.split(":");const _=[];for(;x>0&&d.length;)_.push(d.shift()),x--;return d.length&&_.push(d.join(":")),_}function vs(d,x,_,S){this.j=d,this.i=x,this.l=_,this.S=S||1,this.V=new Wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _s}function _s(){this.i=null,this.g="",this.h=!1}var Lt={},en={};function Bs(d,x,_){d.M=1,d.A=yi(zt(x)),d.u=_,d.R=!0,ll(d,null)}function ll(d,x){d.F=Date.now(),Hs(d),d.B=zt(d.A);var _=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),hl(_.i,"t",S),d.C=0,_=d.j.L,d.h=new _s,d.g=Hu(d.j,_?x:null,!d.u),d.P>0&&(d.O=new Yt(p(d.Y,d,d.g),d.P)),x=d.V,_=d.g,S=d.ba;var K="readystatechange";Array.isArray(K)||(K&&(ys[0]=K.toString()),K=ys);for(let Z=0;Z<K.length;Z++){const ye=fe(_,K[Z],S||x.handleEvent,!1,x.h||x);if(!ye)break;x.g[ye.key]=ye}x=d.J?k(d.J):{},d.u?(d.v||(d.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,x)):(d.v="GET",d.g.ea(d.B,d.v,null,x)),Ps(),Cf(d.i,d.v,d.B,d.l,d.S,d.u)}vs.prototype.ba=function(d){d=d.target;const x=this.O;x&&Ts(d)==3?x.j():this.Y(d)},vs.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Ts(this.g),Dt=this.g.ya(),rt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Ue!=4||Dt==7||(Dt==8||rt<=0?Ps(3):Ps(2)),qs(this);var x=this.g.ca();this.X=x;var _=If(this);if(this.o=x==200,ju(this.i,this.v,this.B,this.l,this.S,Ue,x),this.o){if(this.U&&!this.L){t:{if(this.g){var S,K=this.g;if((S=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var Z=S;break t}}Z=null}if(d=Z)zs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,d);else{this.o=!1,this.m=3,Pt(12),Un(this),Zn(this);break e}}if(this.R){d=!0;let Nt;for(;!this.K&&this.C<_.length;)if(Nt=Cu(this,_),Nt==en){Ue==4&&(this.m=4,Pt(14),d=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Lt){this.m=4,Pt(15),zs(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else zs(this.i,this.l,Nt,null),Fs(this,Nt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||_.length!=0||this.h.h||(this.m=1,Pt(16),d=!1),this.o=this.o&&d,!d)zs(this.i,this.l,_,"[Invalid Chunked Response]"),Un(this),Zn(this);else if(_.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Go(ye),ye.P=!0,Pt(11))}}else zs(this.i,this.l,_,null),Fs(this,_);Ue==4&&Un(this),this.o&&!this.K&&(Ue==4?Lu(this.j,this):(this.o=!1,Hs(this)))}else Ar(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Un(this),Zn(this)}}}catch{}finally{}};function If(d){if(!Au(d))return d.g.la();const x=on(d.g);if(x==="")return"";let _="";const S=x.length,K=Ts(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Un(d),Zn(d),"";d.h.i=new h.TextDecoder}for(let Z=0;Z<S;Z++)d.h.h=!0,_+=d.h.i.decode(x[Z],{stream:!(K&&Z==S-1)});return x.length=0,d.h.g+=_,d.C=0,d.h.g}function Au(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Cu(d,x){var _=d.C,S=x.indexOf(`
`,_);return S==-1?en:(_=Number(x.substring(_,S)),isNaN(_)?Lt:(S+=1,S+_>x.length?en:(x=x.slice(S,S+_),d.C=S+_,x)))}vs.prototype.cancel=function(){this.K=!0,Un(this)};function Hs(d){d.T=Date.now()+d.H,ol(d,d.H)}function ol(d,x){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Us(p(d.aa,d),x)}function qs(d){d.D&&(h.clearTimeout(d.D),d.D=null)}vs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(mi(this.i,this.B),this.M!=2&&(Ps(),Pt(17)),Un(this),this.m=2,Zn(this)):ol(this,this.T-d)};function Zn(d){d.j.I==0||d.K||Lu(d.j,d)}function Un(d){qs(d);var x=d.O;x&&typeof x.dispose=="function"&&x.dispose(),d.O=null,Pn(d.V),d.g&&(x=d.g,d.g=null,x.abort(),x.dispose())}function Fs(d,x){try{var _=d.j;if(_.I!=0&&(_.g==d||Ks(_.h,d))){if(!d.L&&Ks(_.h,d)&&_.I==3){try{var S=_.Ba.g.parse(x)}catch{S=null}if(Array.isArray(S)&&S.length==3){var K=S;if(K[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)pl(_),ba(_);else break e;Ti(_),Pt(18)}}else _.xa=K[1],0<_.xa-_.K&&K[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Us(p(_.Va,_),6e3));Gs(_.h)<=1&&_.ta&&(_.ta=void 0)}else Js(_,11)}else if((d.L||_.g==d)&&pl(_),!I(x))for(K=_.Ba.g.parse(x),x=0;x<K.length;x++){let rt=K[x];const Nt=rt[0];if(!(Nt<=_.K))if(_.K=Nt,rt=rt[1],_.I==2)if(rt[0]=="c"){_.M=rt[1],_.ba=rt[2];const ns=rt[3];ns!=null&&(_.ka=ns,_.j.info("VER="+_.ka));const Zs=rt[4];Zs!=null&&(_.za=Zs,_.j.info("SVER="+_.za));const Es=rt[5];Es!=null&&typeof Es=="number"&&Es>0&&(S=1.5*Es,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const js=d.g;if(js){const Ei=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var Z=S.h;Z.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Do(Z,Z.h),Z.h=null))}if(S.G){const yl=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(S.wa=yl,ct(S.J,S.G,yl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var ye=d;if(S.na=Bu(S,S.L?S.ba:null,S.W),ye.L){Oo(S.h,ye);var Ue=ye,Dt=S.O;Dt&&(Ue.H=Dt),Ue.D&&(qs(Ue),Hs(Ue)),S.g=ye}else Vu(S);_.i.length>0&&Ws(_)}else rt[0]!="stop"&&rt[0]!="close"||Js(_,7);else _.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Js(_,7):qo(_):rt[0]!="noop"&&_.l&&_.l.qa(rt),_.A=0)}}Ps(4)}catch{}}var Ut=class{constructor(d,x){this.g=d,this.map=x}};function Io(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ko(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gs(d){return d.h?1:d.g?d.g.size:0}function Ks(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function Do(d,x){d.g?d.g.add(x):d.h=x}function Oo(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}Io.prototype.cancel=function(){if(this.i=Mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Mo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const _ of d.g.values())x=x.concat(_.G);return x}return C(d.i)}var Ru=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cl(d,x){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const S=d[_].indexOf("=");let K,Z=null;S>=0?(K=d[_].substring(0,S),Z=d[_].substring(S+1)):K=d[_],x(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function zn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;d instanceof zn?(this.l=d.l,tn(this,d.j),this.o=d.o,this.g=d.g,da(this,d.u),this.h=d.h,Vo(this,Ou(d.i)),this.m=d.m):d&&(x=String(d).match(Ru))?(this.l=!1,tn(this,x[1]||"",!0),this.o=$s(x[2]||""),this.g=$s(x[3]||"",!0),da(this,x[4]),this.h=$s(x[5]||"",!0),Vo(this,x[6]||"",!0),this.m=$s(x[7]||"")):(this.l=!1,this.i=new ma(null,this.l))}zn.prototype.toString=function(){const d=[];var x=this.j;x&&d.push(xi(x,ul,!0),":");var _=this.g;return(_||x=="file")&&(d.push("//"),(x=this.o)&&d.push(xi(x,ul,!0),"@"),d.push(jr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(xi(_,_.charAt(0)=="/"?Po:Iu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",xi(_,ku)),d.join("")},zn.prototype.resolve=function(d){const x=zt(this);let _=!!d.j;_?tn(x,d.j):_=!!d.o,_?x.o=d.o:_=!!d.g,_?x.g=d.g:_=d.u!=null;var S=d.h;if(_)da(x,d.u);else if(_=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var K=x.h.lastIndexOf("/");K!=-1&&(S=x.h.slice(0,K+1)+S)}if(K=S,K==".."||K==".")S="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){S=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let ye=0;ye<K.length;){const Ue=K[ye++];Ue=="."?S&&ye==K.length&&Z.push(""):Ue==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),S&&ye==K.length&&Z.push("")):(Z.push(Ue),S=!0)}S=Z.join("/")}else S=K}return _?x.h=S:_=d.i.toString()!=="",_?Vo(x,Ou(d.i)):_=!!d.m,_&&(x.m=d.m),x};function zt(d){return new zn(d)}function tn(d,x,_){d.j=_?$s(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function da(d,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);d.u=x}else d.u=null}function Vo(d,x,_){x instanceof ma?(d.i=x,dl(d.i,d.l)):(_||(x=xi(x,fa)),d.i=new ma(x,d.l))}function ct(d,x,_){d.i.set(x,_)}function yi(d){return ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function $s(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function xi(d,x,_){return typeof d=="string"?(d=encodeURI(d).replace(x,jn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ul=/[#\/\?@]/g,Iu=/[#\?:]/g,Po=/[#\?]/g,fa=/[#\?@]/g,ku=/#/g;function ma(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Sn(d){d.g||(d.g=new Map,d.h=0,d.i&&cl(d.i,function(x,_){d.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}s=ma.prototype,s.add=function(d,x){Sn(this),this.i=null,d=ga(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(x),this.h+=1,this};function Du(d,x){Sn(d),x=ga(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function Lo(d,x){return Sn(d),x=ga(d,x),d.g.has(x)}s.forEach=function(d,x){Sn(this),this.g.forEach(function(_,S){_.forEach(function(K){d.call(x,K,S,this)},this)},this)};function Uo(d,x){Sn(d);let _=[];if(typeof x=="string")Lo(d,x)&&(_=_.concat(d.g.get(ga(d,x))));else for(d=Array.from(d.g.values()),x=0;x<d.length;x++)_=_.concat(d[x]);return _}s.set=function(d,x){return Sn(this),this.i=null,d=ga(this,d),Lo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},s.get=function(d,x){return d?(d=Uo(this,d),d.length>0?String(d[0]):x):x};function hl(d,x,_){Du(d,x),_.length>0&&(d.i=null,d.g.set(ga(d,x),C(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(let S=0;S<x.length;S++){var _=x[S];const K=jr(_);_=Uo(this,_);for(let Z=0;Z<_.length;Z++){let ye=K;_[Z]!==""&&(ye+="="+jr(_[Z])),d.push(ye)}}return this.i=d.join("&")};function Ou(d){const x=new ma;return x.i=d.i,d.g&&(x.g=new Map(d.g),x.h=d.h),x}function ga(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function dl(d,x){x&&!d.j&&(Sn(d),d.i=null,d.g.forEach(function(_,S){const K=S.toLowerCase();S!=K&&(Du(this,S),hl(this,K,_))},d)),d.j=x}function ws(d,x){const _=new bs;if(h.Image){const S=new Image;S.onload=b(es,_,"TestLoadImage: loaded",!0,x,S),S.onerror=b(es,_,"TestLoadImage: error",!1,x,S),S.onabort=b(es,_,"TestLoadImage: abort",!1,x,S),S.ontimeout=b(es,_,"TestLoadImage: timeout",!1,x,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else x(!1)}function zo(d,x){const _=new bs,S=new AbortController,K=setTimeout(()=>{S.abort(),es(_,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:S.signal}).then(Z=>{clearTimeout(K),Z.ok?es(_,"TestPingServer: ok",!0,x):es(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),es(_,"TestPingServer: error",!1,x)})}function es(d,x,_,S,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),S(_)}catch{}}function pa(){this.g=new _u}function Qs(d){this.i=d.Sb||null,this.h=d.ab||!1}w(Qs,wu),Qs.prototype.g=function(){return new bi(this.i,this.h)};function bi(d,x){Ae.call(this),this.H=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(bi,Ae),s=bi.prototype,s.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=x,this.readyState=1,Ns(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(x.body=d),(this.H||h).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fl(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function fl(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?ya(this):Ns(this),this.readyState==3&&fl(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,ya(this))},s.Na=function(d){this.g&&(this.response=d,ya(this))},s.ga=function(){this.g&&ya(this)};function ya(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ns(d)}s.setRequestHeader=function(d,x){this.A.append(d,x)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=x.next();return d.join(`\r
`)};function Ns(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ts(d){let x="";return Re(d,function(_,S){x+=S,x+=":",x+=_,x+=`\r
`}),x}function vi(d,x,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=ts(_),typeof d=="string"?_!=null&&jr(_):ct(d,x,_))}function dt(d){Ae.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(dt,Ae);var Ys=/^https?$/i,Bo=["POST","PUT"];s=dt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,x,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ro.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(Z){_i(this,Z);return}if(d=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var K in S)_.set(K,S[K]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())_.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Bo,x,void 0)>=0)||S||K||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ye]of _)this.g.setRequestHeader(Z,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){_i(this,Z)}};function _i(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.o=5,Ho(d),Sr(d)}function Ho(d){d.A||(d.A=!0,qe(d,"complete"),qe(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,qe(this,"complete"),qe(this,"abort"),Sr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),dt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?wi(this):this.Xa())},s.Xa=function(){wi(this)};function wi(d){if(d.h&&typeof u<"u"){if(d.v&&Ts(d)==4)setTimeout(d.Ca.bind(d),0);else if(qe(d,"readystatechange"),Ts(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var S;if(S=Z===0){let ye=String(d.D).match(Ru)[1]||null;!ye&&h.self&&h.self.location&&(ye=h.self.location.protocol.slice(0,-1)),S=!Ys.test(ye?ye.toLowerCase():"")}_=S}if(_)qe(d,"complete"),qe(d,"success");else{d.o=6;try{var K=Ts(d)>2?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.ca()+"]",Ho(d)}}finally{Sr(d)}}}}function Sr(d,x){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,x||qe(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ts(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Ts(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),Af(x)}};function on(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ar(d){const x={};d=(d.g&&Ts(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(I(d[S]))continue;var _=Su(d[S]);const K=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=x[K]||[];x[K]=Z,Z.push(_)}ue(x,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(d,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||x}function xa(d){this.za=0,this.i=[],this.j=new bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xs("baseRetryDelayMs",5e3,d),this.Za=Xs("retryDelaySeedMs",1e4,d),this.Ta=Xs("forwardChannelMaxRetries",2,d),this.va=Xs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Io(d&&d.concurrentRequestLimit),this.Ba=new pa,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=xa.prototype,s.ka=8,s.I=1,s.connect=function(d,x,_,S){Pt(0),this.W=d,this.H=x||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Bu(this,null,this.W),Ws(this)};function qo(d){if(ml(d),d.I==3){var x=d.V++,_=zt(d.J);if(ct(_,"SID",d.M),ct(_,"RID",x),ct(_,"TYPE","terminate"),Ni(d,_),x=new vs(d,d.j,x),x.M=2,x.A=yi(zt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=x.A,_=!0),_||(x.g=Hu(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Hs(x)}zu(d)}function ba(d){d.g&&(Go(d),d.g.cancel(),d.g=null)}function ml(d){ba(d),d.v&&(h.clearTimeout(d.v),d.v=null),pl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Ws(d){if(!ko(d.h)&&!d.m){d.m=!0;var x=d.Ea;de||N(),pe||(de(),pe=!0),j.add(x,d),d.D=0}}function gl(d,x){return Gs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=x.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Us(p(d.Ea,d,x),Uu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const K=new vs(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=k(Z),he(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(x+=S,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=Mu(this,K,x),_=zt(this.J),ct(_,"RID",d),ct(_,"CVER",22),this.G&&ct(_,"X-HTTP-Session-Id",this.G),Ni(this,_),Z&&(this.R?x="headers="+jr(ts(Z))+"&"+x:this.u&&vi(_,this.u,Z)),Do(this.h,K),this.Ra&&ct(_,"TYPE","init"),this.S?(ct(_,"$req",x),ct(_,"SID","null"),K.U=!0,Bs(K,_,null)):Bs(K,_,x),this.I=2}}else this.I==3&&(d?Fo(this,d):this.i.length==0||ko(this.h)||Fo(this))};function Fo(d,x){var _;x?_=x.l:_=d.V++;const S=zt(d.J);ct(S,"SID",d.M),ct(S,"RID",_),ct(S,"AID",d.K),Ni(d,S),d.u&&d.o&&vi(S,d.u,d.o),_=new vs(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),x&&(d.i=x.G.concat(d.i)),x=Mu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Do(d.h,_),Bs(_,S,x)}function Ni(d,x){d.H&&Re(d.H,function(_,S){ct(x,S,_)}),d.l&&Re({},function(_,S){ct(x,S,_)})}function Mu(d,x,_){_=Math.min(d.i.length,_);const S=d.l?p(d.l.Ka,d.l,d):null;e:{var K=d.i;let Ue=-1;for(;;){const Dt=["count="+_];Ue==-1?_>0?(Ue=K[0].g,Dt.push("ofs="+Ue)):Ue=0:Dt.push("ofs="+Ue);let rt=!0;for(let Nt=0;Nt<_;Nt++){var Z=K[Nt].g;const ns=K[Nt].map;if(Z-=Ue,Z<0)Ue=Math.max(0,K[Nt].g-100),rt=!1;else try{Z="req"+Z+"_"||"";try{var ye=ns instanceof Map?ns:Object.entries(ns);for(const[Zs,Es]of ye){let js=Es;g(Es)&&(js=Ln(Es)),Dt.push(Z+Zs+"="+encodeURIComponent(js))}}catch(Zs){throw Dt.push(Z+"type="+encodeURIComponent("_badmap")),Zs}}catch{S&&S(ns)}}if(rt){ye=Dt.join("&");break e}}ye=void 0}return d=d.i.splice(0,_),x.G=d,ye}function Vu(d){if(!d.g&&!d.v){d.Y=1;var x=d.Da;de||N(),pe||(de(),pe=!0),j.add(x,d),d.A=0}}function Ti(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Us(p(d.Da,d),Uu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Us(p(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),ba(this),Pu(this))};function Go(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Pu(d){d.g=new vs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var x=zt(d.na);ct(x,"RID","rpc"),ct(x,"SID",d.M),ct(x,"AID",d.K),ct(x,"CI",d.F?"0":"1"),!d.F&&d.ia&&ct(x,"TO",d.ia),ct(x,"TYPE","xmlhttp"),Ni(d,x),d.u&&d.o&&vi(x,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=yi(zt(x)),_.u=null,_.R=!0,ll(_,d)}s.Va=function(){this.C!=null&&(this.C=null,ba(this),Ti(this),Pt(19))};function pl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Lu(d,x){var _=null;if(d.g==x){pl(d),Go(d),d.g=null;var S=2}else if(Ks(d.h,x))_=x.G,Oo(d.h,x),S=1;else return;if(d.I!=0){if(x.o)if(S==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var K=d.D;S=il(),qe(S,new Ls(S,_)),Ws(d)}else Vu(d);else if(K=x.m,K==3||K==0&&x.X>0||!(S==1&&gl(d,x)||S==2&&Ti(d)))switch(_&&_.length>0&&(x=d.h,x.i=x.i.concat(_)),K){case 1:Js(d,5);break;case 4:Js(d,10);break;case 3:Js(d,6);break;default:Js(d,2)}}}function Uu(d,x){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*x}function Js(d,x){if(d.j.info("Error code "+x),x==2){var _=p(d.bb,d),S=d.Ua;const K=!S;S=new zn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||tn(S,"https"),yi(S),K?ws(S.toString(),_):zo(S.toString(),_)}else Pt(2);d.I=0,d.l&&d.l.pa(x),zu(d),ml(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function zu(d){if(d.I=0,d.ja=[],d.l){const x=Mo(d.h);(x.length!=0||d.i.length!=0)&&(B(d.ja,x),B(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function Bu(d,x,_){var S=_ instanceof zn?zt(_):new zn(_);if(S.g!="")x&&(S.g=x+"."+S.g),da(S,S.u);else{var K=h.location;S=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;const Z=new zn(null);S&&tn(Z,S),x&&(Z.g=x),K&&da(Z,K),_&&(Z.h=_),S=Z}return _=d.G,x=d.wa,_&&x&&ct(S,_,x),ct(S,"VER",d.ka),Ni(d,S),S}function Hu(d,x,_){if(x&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Aa&&!d.ma?new dt(new Qs({ab:_})):new dt(d.ma),x.Fa(d.L),x}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}s=qu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function va(){}va.prototype.g=function(d,x){return new wn(d,x)};function wn(d,x){Ae.call(this),this.g=new xa(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(d?d["X-WebChannel-Client-Profile"]=x.sa:d={"X-WebChannel-Client-Profile":x.sa}),this.g.U=d,(d=x&&x.Qb)&&!I(d)&&(this.g.u=d),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!I(x)&&(this.g.G=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new Cr(this)}w(wn,Ae),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){qo(this.g)},wn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=Ln(d),d=_);x.i.push(new Ut(x.Ya++,d)),x.I==3&&Ws(x)},wn.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,wn.Z.N.call(this)};function Fu(d){ln.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const _ in x){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}w(Fu,ln);function Gu(){Jn.call(this),this.status=1}w(Gu,Jn);function Cr(d){this.g=d}w(Cr,qu),Cr.prototype.ra=function(){qe(this.g,"a")},Cr.prototype.qa=function(d){qe(this.g,new Fu(d))},Cr.prototype.pa=function(d){qe(this.g,new Gu)},Cr.prototype.oa=function(){qe(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,i1=function(){return new va},a1=function(){return il()},r1=kt,lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,id=gi,Co.COMPLETE="complete",s1=Co,Nu.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Oc=Nu,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,n1=dt}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore",Kv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new qp("@firebase/firestore");function Ql(){return $i.logLevel}function ve(s,...e){if($i.logLevel<=Ye.DEBUG){const n=e.map(Kp);$i.debug(`Firestore (${_o}): ${s}`,...n)}}function ia(s,...e){if($i.logLevel<=Ye.ERROR){const n=e.map(Kp);$i.error(`Firestore (${_o}): ${s}`,...n)}}function co(s,...e){if($i.logLevel<=Ye.WARN){const n=e.map(Kp);$i.warn(`Firestore (${_o}): ${s}`,...n)}}function Kp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,l1(s,a,n)}function l1(s,e,n){let a=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw ia(a),new Error(a)}function lt(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||l1(e,o,a)}function Ve(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xn.UNAUTHENTICATED)))}shutdown(){}}class I4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class k4{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let a=this.i;const o=y=>this.i!==a?(a=this.i,n(y)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(lt(typeof a.accessToken=="string",31837,{l:a}),new o1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class D4{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O4{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new D4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const a=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=V4(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function Xe(s,e){return s<e?-1:s>e?1:0}function op(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return zg(o)===zg(u)?Xe(o,u):zg(o)?1:-1}return Xe(s.length,e.length)}const P4=55296,L4=57343;function zg(s){const e=s.charCodeAt(0);return e>=P4&&e<=L4}function uo(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="__name__";class ar{constructor(e,n,a){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&ke(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=ar.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Xe(e.length,n.length)}static compareSegments(e,n){const a=ar.isNumericId(e),o=ar.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?ar.extractNumericId(e).compare(ar.extractNumericId(n)):op(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ya.fromString(e.substring(4,e.length-2))}}class xt extends ar{construct(e,n,a){return new xt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new xt(n)}static emptyPath(){return new xt([])}}const U4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends ar{construct(e,n,a){return new mn(e,n,a)}static isValidIdentifier(e){return U4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qv}static keyField(){return new mn([Qv])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(xt.fromString(e))}static fromName(e){return new Se(xt.fromString(e).popFirst(5))}static empty(){return new Se(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(s,e,n){if(!n)throw new be(le.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function z4(s,e,n,a){if(e===!0&&a===!0)throw new be(le.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Yv(s){if(!Se.isDocumentKey(s))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Xv(s){if(Se.isDocumentKey(s))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function u1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Zd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ke(12329,{type:typeof s})}function Vn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(s);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(s,e){const n={typeString:s};return e&&(n.value=e),n}function hu(s,e){if(!u1(s))throw new be(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new be(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=-62135596800,Jv=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Jv);return new _t(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wv)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jv}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:$t("string",_t._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new _t(0,0))}static max(){return new Oe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;function B4(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(a===1e9?new _t(n+1,0):new _t(n,a));return new Za(o,Se.empty(),e)}function H4(s){return new Za(s.readTime,s.key,Wc)}class Za{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Za(Oe.min(),Se.empty(),Wc)}static max(){return new Za(Oe.max(),Se.empty(),Wc)}}function q4(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(s.documentKey,e.documentKey),n!==0?n:Xe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(s){if(s.code!==le.FAILED_PRECONDITION||s.message!==F4)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,a)=>{n(e)}))}static reject(e){return new ce(((n,a)=>{a(e)}))}static waitFor(e){return new ce(((n,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(y=>a(y)))})),h=!0,u===o&&n()}))}static or(e){let n=ce.resolve(!1);for(const a of e)n=n.next((o=>o?ce.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ce(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;n(e[p]).next((b=>{h[p]=b,++g,g===u&&a(h)}),(b=>o(b)))}}))}static doWhile(e,n){return new ce(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function K4(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function No(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=-1;function tf(s){return s==null}function wd(s){return s===0&&1/s==-1/0}function $4(s){return typeof s=="number"&&Number.isInteger(s)&&!wd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="";function Q4(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Zv(e)),e=Y4(s.get(n),e);return Zv(e)}function Y4(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case h1:n+="";break;default:n+=u}}return n}function Zv(s){return s+h1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function oi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function d1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??fn.RED,this.left=o??fn.EMPTY,this.right=u??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new fn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return fn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new Jt(mn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new f1("Invalid base64 string: "+u):u}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const X4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(s){if(lt(!!s,39018),typeof s=="string"){let e=0;const n=X4.exec(s);if(lt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Vt(s.seconds),nanos:Vt(s.nanos)}}function Vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ti(s){return typeof s=="string"?gn.fromBase64String(s):gn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="server_timestamp",g1="__type__",p1="__previous_value__",y1="__local_write_time__";function Yp(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[g1])==null?void 0:a.stringValue)===m1}function nf(s){const e=s.mapValue.fields[p1];return Yp(e)?nf(e):e}function Jc(s){const e=ei(s.mapValue.fields[y1].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n,a,o,u,h,g,y,p,b){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=b}}const Nd="(default)";class Zc{constructor(e,n){this.projectId=e,this.database=n||Nd}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="__type__",J4="__max__",Jh={mapValue:{}},b1="__vector__",Td="value";function ni(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Yp(s)?4:eR(s)?9007199254740991:Z4(s)?10:11:ke(28295,{value:s})}function xr(s,e){if(s===e)return!0;const n=ni(s);if(n!==ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Jc(s).isEqual(Jc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ei(o.timestampValue),g=ei(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return ti(o.bytesValue).isEqual(ti(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Vt(o.geoPointValue.latitude)===Vt(u.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Vt(o.integerValue)===Vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Vt(o.doubleValue),g=Vt(u.doubleValue);return h===g?wd(h)===wd(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return uo(s.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(e_(h)!==e_(g))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(g[y]===void 0||!xr(h[y],g[y])))return!1;return!0})(s,e);default:return ke(52216,{left:s})}}function eu(s,e){return(s.values||[]).find((n=>xr(n,e)))!==void 0}function ho(s,e){if(s===e)return 0;const n=ni(s),a=ni(e);if(n!==a)return Xe(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=Vt(u.integerValue||u.doubleValue),y=Vt(h.integerValue||h.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return n_(s.timestampValue,e.timestampValue);case 4:return n_(Jc(s),Jc(e));case 5:return op(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=ti(u),y=ti(h);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),y=h.split("/");for(let p=0;p<g.length&&p<y.length;p++){const b=Xe(g[p],y[p]);if(b!==0)return b}return Xe(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=Xe(Vt(u.latitude),Vt(h.latitude));return g!==0?g:Xe(Vt(u.longitude),Vt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return s_(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var T,C,B,H;const g=u.fields||{},y=h.fields||{},p=(T=g[Td])==null?void 0:T.arrayValue,b=(C=y[Td])==null?void 0:C.arrayValue,w=Xe(((B=p==null?void 0:p.values)==null?void 0:B.length)||0,((H=b==null?void 0:b.values)==null?void 0:H.length)||0);return w!==0?w:s_(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Jh.mapValue&&h===Jh.mapValue)return 0;if(u===Jh.mapValue)return 1;if(h===Jh.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=h.fields||{},b=Object.keys(p);y.sort(),b.sort();for(let w=0;w<y.length&&w<b.length;++w){const T=op(y[w],b[w]);if(T!==0)return T;const C=ho(g[y[w]],p[b[w]]);if(C!==0)return C}return Xe(y.length,b.length)})(s.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function n_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Xe(s,e);const n=ei(s),a=ei(e),o=Xe(n.seconds,a.seconds);return o!==0?o:Xe(n.nanos,a.nanos)}function s_(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=ho(n[o],a[o]);if(u)return u}return Xe(n.length,a.length)}function fo(s){return cp(s)}function cp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=ei(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ti(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Se.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=cp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${cp(n.fields[h])}`;return o+"}"})(s.mapValue):ke(61005,{value:s})}function ld(s){switch(ni(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(s);return e?16+ld(e):16;case 5:return 2*s.stringValue.length;case 6:return ti(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+ld(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return oi(a.fields,((u,h)=>{o+=u.length+ld(h)})),o})(s.mapValue);default:throw ke(13486,{value:s})}}function r_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function up(s){return!!s&&"integerValue"in s}function Xp(s){return!!s&&"arrayValue"in s}function a_(s){return!!s&&"nullValue"in s}function i_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function od(s){return!!s&&"mapValue"in s}function Z4(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[x1])==null?void 0:a.stringValue)===b1}function Hc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return oi(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Hc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hc(s.arrayValue.values[n]);return e}return{...s}}function eR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===J4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(n)}setAll(e){let n=mn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=Hc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];od(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){oi(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new Mn(Hc(this.value))}}function v1(s){const e=[];return oi(s.fields,((n,a)=>{const o=new mn([n]);if(od(a)){const u=v1(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,a,o,u,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new bn(e,0,Oe.min(),Oe.min(),Oe.min(),Mn.empty(),0)}static newFoundDocument(e,n,a,o){return new bn(e,1,n,Oe.min(),a,o,0)}static newNoDocument(e,n){return new bn(e,2,n,Oe.min(),Oe.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Oe.min(),Oe.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n){this.position=e,this.inclusive=n}}function l_(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=Se.comparator(Se.fromName(h.referenceValue),n.key):a=ho(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function o_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!xr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{}class Kt extends _1{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new sR(e,n,a):n==="array-contains"?new iR(e,a):n==="in"?new lR(e,a):n==="not-in"?new oR(e,a):n==="array-contains-any"?new cR(e,a):new Kt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new rR(e,a):new aR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ho(n,this.value)):n!==null&&ni(this.value)===ni(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ds extends _1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ds(e,n)}matches(e){return w1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function w1(s){return s.op==="and"}function N1(s){return nR(s)&&w1(s)}function nR(s){for(const e of s.filters)if(e instanceof Ds)return!1;return!0}function hp(s){if(s instanceof Kt)return s.field.canonicalString()+s.op.toString()+fo(s.value);if(N1(s))return s.filters.map((e=>hp(e))).join(",");{const e=s.filters.map((n=>hp(n))).join(",");return`${s.op}(${e})`}}function T1(s,e){return s instanceof Kt?(function(a,o){return o instanceof Kt&&a.op===o.op&&a.field.isEqual(o.field)&&xr(a.value,o.value)})(s,e):s instanceof Ds?(function(a,o){return o instanceof Ds&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&T1(h,o.filters[g])),!0):!1})(s,e):void ke(19439)}function E1(s){return s instanceof Kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`})(s):s instanceof Ds?(function(n){return n.op.toString()+" {"+n.getFilters().map(E1).join(" ,")+"}"})(s):"Filter"}class sR extends Kt{constructor(e,n,a){super(e,n,a),this.key=Se.fromName(a.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends Kt{constructor(e,n){super(e,"in",n),this.keys=j1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class aR extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=j1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function j1(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>Se.fromName(a.referenceValue)))}class iR extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&eu(n.arrayValue,this.value)}}class lR extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}}class oR extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eu(this.value.arrayValue,n)}}class cR extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>eu(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function c_(s,e=null,n=[],a=[],o=null,u=null,h=null){return new uR(s,e,n,a,o,u,h)}function Wp(s){const e=Ve(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>hp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),tf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>fo(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>fo(a))).join(",")),e.Te=n}return e.Te}function Jp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!tR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!T1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!o_(s.startAt,e.startAt)&&o_(s.endAt,e.endAt)}function dp(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,a=[],o=[],u=null,h="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hR(s,e,n,a,o,u,h,g){return new To(s,e,n,a,o,u,h,g)}function sf(s){return new To(s)}function u_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function S1(s){return s.collectionGroup!==null}function qc(s){const e=Ve(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Jt(mn.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new tu(u,a))})),n.has(mn.keyField().canonicalString())||e.Ie.push(new tu(mn.keyField(),a))}return e.Ie}function ur(s){const e=Ve(s);return e.Ee||(e.Ee=dR(e,qc(s))),e.Ee}function dR(s,e){if(s.limitType==="F")return c_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new tu(o.field,u)}));const n=s.endAt?new Ed(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Ed(s.startAt.position,s.startAt.inclusive):null;return c_(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function fp(s,e){const n=s.filters.concat([e]);return new To(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function mp(s,e,n){return new To(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function rf(s,e){return Jp(ur(s),ur(e))&&s.limitType===e.limitType}function A1(s){return`${Wp(ur(s))}|lt:${s.limitType}`}function Yl(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>E1(o))).join(", ")}]`),tf(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>fo(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>fo(o))).join(",")),`Target(${a})`})(ur(s))}; limitType=${s.limitType})`}function af(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Se.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of qc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,y){const p=l_(h,g,y);return h.inclusive?p<=0:p<0})(a.startAt,qc(a),o)||a.endAt&&!(function(h,g,y){const p=l_(h,g,y);return h.inclusive?p>=0:p>0})(a.endAt,qc(a),o))})(s,e)}function fR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function C1(s){return(e,n)=>{let a=!1;for(const o of qc(s)){const u=mR(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function mR(s,e,n){const a=s.field.isKeyField()?Se.comparator(e.key,n.key):(function(u,h,g){const y=h.data.field(u),p=g.data.field(u);return y!==null&&p!==null?ho(y,p):ke(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ke(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return d1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new jt(Se.comparator);function la(){return gR}const R1=new jt(Se.comparator);function Mc(...s){let e=R1;for(const n of s)e=e.insert(n.key,n);return e}function I1(s){let e=R1;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function Hi(){return Fc()}function k1(){return Fc()}function Fc(){return new tl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const pR=new jt(Se.comparator),yR=new Jt(Se.comparator);function We(...s){let e=yR;for(const n of s)e=e.add(n);return e}const xR=new Jt(Xe);function bR(){return xR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function D1(s){return{integerValue:""+s}}function vR(s,e){return $4(e)?D1(e):Zp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function _R(s,e,n){return s instanceof nu?(function(o,u){const h={fields:{[g1]:{stringValue:m1},[y1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Yp(u)&&(u=nf(u)),u&&(h.fields[p1]=u),{mapValue:h}})(n,e):s instanceof mo?M1(s,e):s instanceof su?V1(s,e):(function(o,u){const h=O1(o,u),g=h_(h)+h_(o.Ae);return up(h)&&up(o.Ae)?D1(g):Zp(o.serializer,g)})(s,e)}function wR(s,e,n){return s instanceof mo?M1(s,e):s instanceof su?V1(s,e):n}function O1(s,e){return s instanceof jd?(function(a){return up(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class nu extends lf{}class mo extends lf{constructor(e){super(),this.elements=e}}function M1(s,e){const n=P1(e);for(const a of s.elements)n.some((o=>xr(o,a)))||n.push(a);return{arrayValue:{values:n}}}class su extends lf{constructor(e){super(),this.elements=e}}function V1(s,e){let n=P1(e);for(const a of s.elements)n=n.filter((o=>!xr(o,a)));return{arrayValue:{values:n}}}class jd extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function h_(s){return Vt(s.integerValue||s.doubleValue)}function P1(s){return Xp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.field=e,this.transform=n}}function NR(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof mo&&o instanceof mo||a instanceof su&&o instanceof su?uo(a.elements,o.elements,xr):a instanceof jd&&o instanceof jd?xr(a.Ae,o.Ae):a instanceof nu&&o instanceof nu})(s.transform,e.transform)}class TR{constructor(e,n){this.version=e,this.transformResults=n}}class fs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class of{}function U1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new e0(s.key,fs.none()):new du(s.key,s.data,fs.none());{const n=s.data,a=Mn.empty();let o=new Jt(mn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new ci(s.key,a,new Qn(o.toArray()),fs.none())}}function ER(s,e,n){s instanceof du?(function(o,u,h){const g=o.value.clone(),y=f_(o.fieldTransforms,u,h.transformResults);g.setAll(y),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof ci?(function(o,u,h){if(!cd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=f_(o.fieldTransforms,u,h.transformResults),y=u.data;y.setAll(z1(o)),y.setAll(g),u.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Gc(s,e,n,a){return s instanceof du?(function(u,h,g,y){if(!cd(u.precondition,h))return g;const p=u.value.clone(),b=m_(u.fieldTransforms,y,h);return p.setAll(b),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(s,e,n,a):s instanceof ci?(function(u,h,g,y){if(!cd(u.precondition,h))return g;const p=m_(u.fieldTransforms,y,h),b=h.data;return b.setAll(z1(u)),b.setAll(p),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,a):(function(u,h,g){return cd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function jR(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=O1(a.transform,o||null);u!=null&&(n===null&&(n=Mn.empty()),n.set(a.field,u))}return n||null}function d_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&uo(a,o,((u,h)=>NR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class du extends of{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ci extends of{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function z1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function f_(s,e,n){const a=new Map;lt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,wR(h,g,n[o]))}return a}function m_(s,e,n){const a=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);a.set(o.field,_R(u,h,e))}return a}class e0 extends of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SR extends of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ER(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Gc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Gc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=k1();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const y=U1(h,g);y!==null&&a.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Oe.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),We())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,((n,a)=>d_(n,a)))&&uo(this.baseMutations,e.baseMutations,((n,a)=>d_(n,a)))}}class t0{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){lt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return pR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new t0(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,et;function IR(s){switch(s){case le.OK:return ke(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return ke(15467,{code:s})}}function B1(s){if(s===void 0)return ia("GRPC error has no .code"),le.UNKNOWN;switch(s){case Gt.OK:return le.OK;case Gt.CANCELLED:return le.CANCELLED;case Gt.UNKNOWN:return le.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return le.INTERNAL;case Gt.UNAVAILABLE:return le.UNAVAILABLE;case Gt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Gt.NOT_FOUND:return le.NOT_FOUND;case Gt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Gt.ABORTED:return le.ABORTED;case Gt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Gt.DATA_LOSS:return le.DATA_LOSS;default:return ke(39323,{code:s})}}(et=Gt||(Gt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Ya([4294967295,4294967295],0);function g_(s){const e=kR().encode(s),n=new t1;return n.update(e),new Uint8Array(n.digest())}function p_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ya([n,a],0),new Ya([o,u],0)]}class n0{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(a<0)throw new Vc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ya.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(Ya.fromNumber(a)));return o.compare(DR)===1&&(o=new Ya([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g_(e),[a,o]=p_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new n0(u,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=g_(e),[a,o]=p_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new cf(Oe.min(),o,new jt(Xe),la(),We())}}class fu{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new fu(a,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class H1{constructor(e,n){this.targetId=e,this.Ce=n}}class q1{constructor(e,n,a=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class y_{constructor(){this.ve=0,this.Fe=x_(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),n=We(),a=We();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:ke(38017,{changeType:u})}})),new fu(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=x_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OR{constructor(e){this.Ge=e,this.ze=new Map,this.je=la(),this.Je=Zh(),this.He=Zh(),this.Ye=new jt(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(dp(u))if(a===0){const h=new Se(u.path);this.et(n,h,bn.newNoDocument(h,Oe.min()))}else lt(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),y=g?this.ct(g,e,h):1;if(y!==0){this.it(n);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=ti(a).toUint8Array()}catch(y){if(y instanceof f1)return co("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new n0(h,o,u)}catch(y){return co(y instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&dp(g.target)){const y=new Se(g.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,bn.newNoDocument(y,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let a=We();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new cf(e,n,this.Ye,this.je,a);return this.je=la(),this.Je=Zh(),this.He=Zh(),this.Ye=new jt(Xe),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new y_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zh(){return new jt(Se.comparator)}function x_(){return new jt(Se.comparator)}const MR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class LR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gp(s,e){return s.useProto3Json||tf(e)?e:{value:e}}function Sd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function UR(s,e){return Sd(s,e.toTimestamp())}function hr(s){return lt(!!s,49232),Oe.fromTimestamp((function(n){const a=ei(n);return new _t(a.seconds,a.nanos)})(s))}function s0(s,e){return pp(s,e).canonicalString()}function pp(s,e){const n=(function(o){return new xt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function G1(s){const e=xt.fromString(s);return lt(X1(e),10190,{key:e.toString()}),e}function yp(s,e){return s0(s.databaseId,e.path)}function Bg(s,e){const n=G1(e);if(n.get(1)!==s.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Se($1(n))}function K1(s,e){return s0(s.databaseId,e)}function zR(s){const e=G1(s);return e.length===4?xt.emptyPath():$1(e)}function xp(s){return new xt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $1(s){return lt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function b_(s,e,n){return{name:yp(s,e),fields:n.value.mapValue.fields}}function BR(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(lt(b===void 0||typeof b=="string",58123),gn.fromBase64String(b||"")):(lt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),gn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(p){const b=p.code===void 0?le.UNKNOWN:B1(p.code);return new be(b,p.message||"")})(h);n=new q1(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Bg(s,a.document.name),u=hr(a.document.updateTime),h=a.document.createTime?hr(a.document.createTime):Oe.min(),g=new Mn({mapValue:{fields:a.document.fields}}),y=bn.newFoundDocument(o,u,h,g),p=a.targetIds||[],b=a.removedTargetIds||[];n=new ud(p,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Bg(s,a.document),u=a.readTime?hr(a.readTime):Oe.min(),h=bn.newNoDocument(o,u),g=a.removedTargetIds||[];n=new ud([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Bg(s,a.document),u=a.removedTargetIds||[];n=new ud([],u,o,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new RR(o,u),g=a.targetId;n=new H1(g,h)}}return n}function HR(s,e){let n;if(e instanceof du)n={update:b_(s,e.key,e.value)};else if(e instanceof e0)n={delete:yp(s,e.key)};else if(e instanceof ci)n={update:b_(s,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof SR))return ke(16599,{Vt:e.type});n={verify:yp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof mo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof su)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof jd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw ke(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:UR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ke(27497)})(s,e.precondition)),n}function qR(s,e){return s&&s.length>0?(lt(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?hr(o.updateTime):hr(u);return h.isEqual(Oe.min())&&(h=hr(u)),new TR(h,o.transformResults||[])})(n,e)))):[]}function FR(s,e){return{documents:[K1(s,e.path)]}}function GR(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=K1(s,o);const u=(function(p){if(p.length!==0)return Y1(Ds.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:Xl(T.field),direction:QR(T.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=gp(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function KR(s){let e=zR(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){lt(a===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const T=Q1(w);return T instanceof Ds&&N1(T)?T.getFilters():[T]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((T=>(function(B){return new tu(Wl(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let T;return T=typeof w=="object"?w.value:w,tf(T)?null:T})(n.limit));let y=null;n.startAt&&(y=(function(w){const T=!!w.before,C=w.values||[];return new Ed(C,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(w){const T=!w.before,C=w.values||[];return new Ed(C,T)})(n.endAt)),hR(e,o,h,u,g,"F",y,p)}function $R(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Wl(n.unaryFilter.field);return Kt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Wl(n.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Wl(n.unaryFilter.field);return Kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Wl(n.unaryFilter.field);return Kt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Kt.create(Wl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ds.create(n.compositeFilter.filters.map((a=>Q1(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(s):ke(30097,{filter:s})}function QR(s){return MR[s]}function YR(s){return VR[s]}function XR(s){return PR[s]}function Xl(s){return{fieldPath:s.canonicalString()}}function Wl(s){return mn.fromServerFormat(s.fieldPath)}function Y1(s){return s instanceof Kt?(function(n){if(n.op==="=="){if(i_(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NAN"}};if(a_(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i_(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NAN"}};if(a_(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(n.field),op:YR(n.op),value:n.value}}})(s):s instanceof Ds?(function(n){const a=n.getFilters().map((o=>Y1(o)));return a.length===1?a[0]:{compositeFilter:{op:XR(n.op),filters:a}}})(s):ke(54877,{filter:s})}function WR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function X1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,a,o,u=Oe.min(),h=Oe.min(),g=gn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.yt=e}}function ZR(s){const e=KR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.Cn=new t5}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Za.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Za.min())}updateCollectionGroup(e,n,a){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class t5{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Jt(xt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Jt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W1=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(W1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new go(0)}static cr(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="LruGarbageCollector",n5=1048576;function w_([s,e],[n,a]){const o=Xe(s,n);return o===0?Xe(e,a):o}class s5{constructor(e){this.Ir=e,this.buffer=new Jt(w_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();w_(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r5{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(__,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){No(n)?ve(__,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.Vr(3e5)}))}}class a5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(ef.ce);const a=new s5(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(v_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,u,h,g,y,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,n)))).next((w=>(u=w,y=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(p=Date.now(),Ql()<=Ye.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${w} documents in `+(p-y)+`ms
Total Duration: ${p-b}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function i5(s,e){return new a5(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.changes=new tl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ce.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Gc(a.mutation,o,Qn.empty(),_t.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,We()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=We()){const o=Hi();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=Mc();return u.forEach(((g,y)=>{h=h.insert(g,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=Hi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,We())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let u=la();const h=Fc(),g=(function(){return Fc()})();return n.forEach(((y,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof ci)?u=u.insert(p.key,p):b!==void 0?(h.set(p.key,b.mutation.getFieldMask()),Gc(b.mutation,p,b.mutation.getFieldMask(),_t.now())):h.set(p.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((p,b)=>h.set(p,b))),n.forEach(((p,b)=>g.set(p,new o5(b,h.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Fc();let o=new jt(((h,g)=>h-g)),u=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((y=>{const p=n.get(y);if(p===null)return;let b=a.get(y)||Qn.empty();b=g.applyToLocalView(p,b),a.set(y,b);const w=(o.get(g.batchId)||We()).add(y);o=o.insert(g.batchId,w)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,b=y.value,w=k1();b.forEach((T=>{if(!u.has(T)){const C=U1(n.get(T),a.get(T));C!==null&&w.set(T,C),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ce.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):S1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ce.resolve(Hi());let g=Wc,y=u;return h.next((p=>ce.forEach(p,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?ce.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{y=y.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,y,p,We()))).next((b=>({batchId:g,changes:I1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((a=>{let o=Mc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=Mc();return this.indexManager.getCollectionParents(e,u).next((g=>ce.forEach(g,(y=>{const p=(function(w,T){return new To(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((b=>{b.forEach(((w,T)=>{h=h.insert(w,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((y,p)=>{const b=p.getKey();h.get(b)===null&&(h=h.insert(b,bn.newInvalidDocument(b)))}));let g=Mc();return h.forEach(((y,p)=>{const b=u.get(y);b!==void 0&&Gc(b.mutation,p,Qn.empty(),_t.now()),af(n,p)&&(g=g.insert(y,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:ZR(o.bundledQuery),readTime:hr(o.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(){this.overlays=new jt(Se.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Hi();return ce.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.St(e,n,u)})),ce.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),ce.resolve()}getOverlaysForCollection(e,n,a){const o=Hi(),u=n.length+1,h=new Se(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>a&&o.set(y.getKey(),y)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new jt(((p,b)=>p-b));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>a){let b=u.get(p.largestBatchId);b===null&&(b=Hi(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=Hi(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return ce.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new CR(n,a));let u=this.qr.get(n);u===void 0&&(u=We(),this.qr.set(n,u)),this.qr.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.Qr=new Jt(sn.$r),this.Ur=new Jt(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new sn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new sn(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Se(new xt([])),a=new sn(n,e),o=new sn(n,e+1),u=[];return this.Ur.forEachInRange([a,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new xt([])),a=new sn(n,e),o=new sn(n,e+1);let u=We();return this.Ur.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new sn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class sn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(sn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new AR(u,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new sn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(h)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),u=o<0?0:o;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Qp:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Jt(Xe);return n.forEach((o=>{const u=new sn(o,0),h=new sn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{a=a.add(g.Yr)}))})),ce.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Se.isDocumentKey(u)||(u=u.child(""));const h=new sn(new Se(u),0);let g=new Jt(Xe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(y.Yr)),!0)}),h),ce.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ce.forEach(n.mutations,(o=>{const u=new sn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new sn(n,0),o=this.Zr.firstAfterOrEqual(a);return ce.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.ri=e,this.docs=(function(){return new jt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ce.resolve(a?a.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let a=la();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():bn.newInvalidDocument(o))})),ce.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=la();const h=n.path,g=new Se(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:b}}=y.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||q4(H4(b),a)<=0||(o.has(b.key)||af(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ce.resolve(u)}getAllFromCollectionGroup(e,n,a,o){ke(9500)}ii(e,n){return ce.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new g5(this)}getSize(e){return ce.resolve(this.size)}}class g5 extends l5{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.persistence=e,this.si=new tl((n=>Wp(n)),Jp),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new r0,this.targetCount=0,this.ai=go.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ce.waitFor(u).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ce.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ce.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ce.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ce.resolve(a)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.ui={},this.overlays={},this.ci=new ef(0),this.li=!1,this.li=!0,this.hi=new d5,this.referenceDelegate=e(this),this.Pi=new p5(this),this.indexManager=new e5,this.remoteDocumentCache=(function(o){return new m5(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new JR(n),this.Ii=new u5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new f5(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){ve("MemoryPersistence","Starting transaction:",e);const o=new y5(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ce.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class y5 extends G4{constructor(e){super(),this.currentSequenceNumber=e}}class a0{constructor(e){this.persistence=e,this.Ri=new r0,this.Vi=null}static mi(e){return new a0(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ce.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(a=>{const o=Se.fromPath(a);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ad{constructor(e,n){this.persistence=e,this.pi=new tl((a=>Q4(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=i5(this,n)}static mi(e,n){return new Ad(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ce.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?ce.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(a++,u.removeEntry(h,Oe.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ld(e.data.value)),n}br(e,n,a){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ce.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=We(),o=We();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new i0(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uC()?8:K4(vn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new x5;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(Ql()<=Ye.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(Ql()<=Ye.DEBUG&&ve("QueryEngine","Query:",Yl(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Ql()<=Ye.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):ce.resolve())}ys(e,n){if(u_(n))return ce.resolve(null);let a=ur(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=mp(n,null,"F"),a=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=We(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((y=>{const p=this.Ds(n,g);return this.Cs(n,p,h,y.readTime)?this.ys(e,mp(n,null,"F")):this.vs(e,p,n,y)}))))})))))}ws(e,n,a,o){return u_(n)||o.isEqual(Oe.min())?ce.resolve(null):this.ps.getDocuments(e,a).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,a,o)?ce.resolve(null):(Ql()<=Ye.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Yl(n)),this.vs(e,h,n,B4(o,Wc)).next((g=>g)))}))}Ds(e,n){let a=new Jt(C1(e));return n.forEach(((o,u)=>{af(e,u)&&(a=a.add(u))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,a){return Ql()<=Ye.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Yl(n)),this.ps.getDocumentsMatchingQuery(e,n,Za.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="LocalStore",v5=3e8;class _5{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new jt(Xe),this.xs=new tl((u=>Wp(u)),Jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function w5(s,e,n,a){return new _5(s,e,n,a)}async function Z1(s,e){const n=Ve(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let y=We();for(const p of o){h.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}return n.localDocuments.getDocuments(a,y).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:g})))}))}))}function N5(s,e){const n=Ve(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,p,b){const w=p.batch,T=w.keys();let C=ce.resolve();return T.forEach((B=>{C=C.next((()=>b.getEntry(y,B))).next((H=>{const L=p.docVersions.get(B);lt(L!==null,48541),H.version.compareTo(L)<0&&(w.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),b.addEntry(H)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(y,w)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let y=We();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function eN(s){const e=Ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function T5(s,e){const n=Ve(s),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,w)=>{const T=o.get(w);if(!T)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,w))));let C=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(gn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,a)),o=o.insert(w,C),(function(H,L,J){return H.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=v5?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(T,C,b)&&g.push(n.Pi.updateTargetData(u,C))}));let y=la(),p=We();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(E5(u,h,e.documentUpdates).next((b=>{y=b.ks,p=b.qs}))),!a.isEqual(Oe.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(b)}return ce.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,p))).next((()=>y))})).then((u=>(n.Ms=o,u)))}function E5(s,e,n){let a=We(),o=We();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=la();return n.forEach(((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Oe.min())?(e.removeEntry(g,y.readTime),h=h.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),h=h.insert(g,y)):ve(l0,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function j5(s,e){const n=Ve(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Qp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function S5(s,e){const n=Ve(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((u=>u?(o=u,ce.resolve(o)):n.Pi.allocateTargetId(a).next((h=>(o=new Ka(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function bp(s,e,n){const a=Ve(s),o=a.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!No(h))throw h;ve(l0,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function N_(s,e,n){const a=Ve(s);let o=Oe.min(),u=We();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,p,b){const w=Ve(y),T=w.xs.get(b);return T!==void 0?ce.resolve(w.Ms.get(T)):w.Pi.getTargetData(p,b)})(a,h,ur(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(h,g.targetId).next((y=>{u=y}))})).next((()=>a.Fs.getDocumentsMatchingQuery(h,e,n?o:Oe.min(),n?u:We()))).next((g=>(A5(a,fR(e),g),{documents:g,Qs:u})))))}function A5(s,e,n){let a=s.Os.get(e)||Oe.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Os.set(e,a)}class T_{constructor(){this.activeTargetIds=bR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C5{constructor(){this.Mo=new T_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T_,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="ConnectivityMonitor";class j_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(E_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(E_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function vp(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="RestConnection",I5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,u){const h=vp(),g=this.zo(e,n.toUriEncodedString());ve(Hg,`Sending RPC '${e}' ${h}:`,g,a);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:p}=new URL(g),b=wr(p);return this.Jo(e,g,y,a,b).then((w=>(ve(Hg,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw co(Hg,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,n,a,o,u,h){return this.Go(e,n,a,o,u)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const a=I5[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class O5 extends k5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,u){const h=vp();return new Promise(((g,y)=>{const p=new n1;p.setWithCredentials(!0),p.listenOnce(s1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case id.NO_ERROR:const w=p.getResponseJson();ve(yn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case id.TIMEOUT:ve(yn,`RPC '${e}' ${h} timed out`),y(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:const T=p.getStatus();if(ve(yn,`RPC '${e}' ${h} failed with status:`,T,"response text:",p.getResponseText()),T>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const B=C==null?void 0:C.error;if(B&&B.status&&B.message){const H=(function(J){const te=J.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(te)>=0?te:le.UNKNOWN})(B.status);y(new be(H,B.message))}else y(new be(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new be(le.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(yn,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(o);ve(yn,`RPC '${e}' ${h} sending request:`,o),p.send(n,"POST",b,a,15)}))}T_(e,n,a){const o=vp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=i1(),g=a1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,a),y.encodeInitMessageHeaders=!0;const b=u.join("");ve(yn,`Creating RPC '${e}' stream ${o}: ${b}`,y);const w=h.createWebChannel(b,y);this.I_(w);let T=!1,C=!1;const B=new D5({Yo:L=>{C?ve(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(ve(yn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ve(yn,`RPC '${e}' stream ${o} sending:`,L),w.send(L))},Zo:()=>w.close()}),H=(L,J,te)=>{L.listen(J,(G=>{try{te(G)}catch(X){setTimeout((()=>{throw X}),0)}}))};return H(w,Oc.EventType.OPEN,(()=>{C||(ve(yn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),H(w,Oc.EventType.CLOSE,(()=>{C||(C=!0,ve(yn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(w))})),H(w,Oc.EventType.ERROR,(L=>{C||(C=!0,co(yn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),B.a_(new be(le.UNAVAILABLE,"The operation could not be completed")))})),H(w,Oc.EventType.MESSAGE,(L=>{var J;if(!C){const te=L.data[0];lt(!!te,16349);const G=te,X=(G==null?void 0:G.error)||((J=G[0])==null?void 0:J.error);if(X){ve(yn,`RPC '${e}' stream ${o} received error:`,X);const de=X.status;let pe=(function(A){const P=Gt[A];if(P!==void 0)return B1(P)})(de),j=X.message;pe===void 0&&(pe=le.INTERNAL,j="Unknown error status: "+de+" with message "+X.message),C=!0,B.a_(new be(pe,j)),w.close()}else ve(yn,`RPC '${e}' stream ${o} received:`,te),B.u_(te)}})),H(g,r1.STAT_EVENT,(L=>{L.stat===lp.PROXY?ve(yn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===lp.NOPROXY&&ve(yn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(s){return new LR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="PersistentStream";class nN{constructor(e,n,a,o,u,h,g,y){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(ia(n.toString()),ia("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new be(le.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(S_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(S_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class M5 extends nN{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BR(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Oe.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Oe.min():h.readTime?hr(h.readTime):Oe.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=xp(this.serializer),n.addTarget=(function(u,h){let g;const y=h.target;if(g=dp(y)?{documents:FR(u,y)}:{query:GR(u,y).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=F1(u,h.resumeToken);const p=gp(u,h.expectedCount);p!==null&&(g.expectedCount=p)}else if(h.snapshotVersion.compareTo(Oe.min())>0){g.readTime=Sd(u,h.snapshotVersion.toTimestamp());const p=gp(u,h.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=$R(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.q_(n)}}class V5 extends nN{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qR(e.writeResults,e.commitTime),a=hr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=xp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>HR(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{}class L5 extends P5{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,pp(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(le.UNKNOWN,u.toString())}))}Ho(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,pp(n,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new be(le.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class U5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ia(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class z5{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{a.enqueueAndForget((async()=>{nl(this)&&(ve(Qi,"Restarting streams for network reachability change."),await(async function(y){const p=Ve(y);p.Ea.add(4),await mu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await hf(p)})(this))}))})),this.Ra=new U5(a,o)}}async function hf(s){if(nl(s))for(const e of s.da)await e(!0)}async function mu(s){for(const e of s.da)await e(!1)}function sN(s,e){const n=Ve(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),h0(n)?u0(n):Eo(n).O_()&&c0(n,e))}function o0(s,e){const n=Ve(s),a=Eo(n);n.Ia.delete(e),a.O_()&&rN(n,e),n.Ia.size===0&&(a.O_()?a.L_():nl(n)&&n.Ra.set("Unknown"))}function c0(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eo(s).Y_(e)}function rN(s,e){s.Va.Ue(e),Eo(s).Z_(e)}function u0(s){s.Va=new OR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Eo(s).start(),s.Ra.ua()}function h0(s){return nl(s)&&!Eo(s).x_()&&s.Ia.size>0}function nl(s){return Ve(s).Ea.size===0}function aN(s){s.Va=void 0}async function B5(s){s.Ra.set("Online")}async function H5(s){s.Ia.forEach(((e,n)=>{c0(s,e)}))}async function q5(s,e){aN(s),h0(s)?(s.Ra.ha(e),u0(s)):s.Ra.set("Unknown")}async function F5(s,e,n){if(s.Ra.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){ve(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cd(s,a)}else if(e instanceof ud?s.Va.Ze(e):e instanceof H1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Oe.min()))try{const a=await eN(s.localStore);n.compareTo(a)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(y.resumeToken,h))}})),g.targetMismatches.forEach(((y,p)=>{const b=u.Ia.get(y);if(!b)return;u.Ia.set(y,b.withResumeToken(gn.EMPTY_BYTE_STRING,b.snapshotVersion)),rN(u,y);const w=new Ka(b.target,y,p,b.sequenceNumber);c0(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){ve(Qi,"Failed to raise snapshot:",a),await Cd(s,a)}}async function Cd(s,e,n){if(!No(e))throw e;s.Ea.add(1),await mu(s),s.Ra.set("Offline"),n||(n=()=>eN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve(Qi,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await hf(s)}))}function iN(s,e){return e().catch((n=>Cd(s,n,e)))}async function df(s){const e=Ve(s),n=si(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qp;for(;G5(e);)try{const o=await j5(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,K5(e,o)}catch(o){await Cd(e,o)}lN(e)&&oN(e)}function G5(s){return nl(s)&&s.Ta.length<10}function K5(s,e){s.Ta.push(e);const n=si(s);n.O_()&&n.X_&&n.ea(e.mutations)}function lN(s){return nl(s)&&!si(s).x_()&&s.Ta.length>0}function oN(s){si(s).start()}async function $5(s){si(s).ra()}async function Q5(s){const e=si(s);for(const n of s.Ta)e.ea(n.mutations)}async function Y5(s,e,n){const a=s.Ta.shift(),o=t0.from(a,e,n);await iN(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await df(s)}async function X5(s,e){e&&si(s).X_&&await(async function(a,o){if((function(h){return IR(h)&&h!==le.ABORTED})(o.code)){const u=a.Ta.shift();si(a).B_(),await iN(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await df(a)}})(s,e),lN(s)&&oN(s)}async function A_(s,e){const n=Ve(s);n.asyncQueue.verifyOperationInProgress(),ve(Qi,"RemoteStore received new credentials");const a=nl(n);n.Ea.add(3),await mu(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await hf(n)}async function W5(s,e){const n=Ve(s);e?(n.Ea.delete(2),await hf(n)):e||(n.Ea.add(2),await mu(n),n.Ra.set("Unknown"))}function Eo(s){return s.ma||(s.ma=(function(n,a,o){const u=Ve(n);return u.sa(),new M5(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:B5.bind(null,s),t_:H5.bind(null,s),r_:q5.bind(null,s),H_:F5.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),h0(s)?u0(s):s.Ra.set("Unknown")):(await s.ma.stop(),aN(s))}))),s.ma}function si(s){return s.fa||(s.fa=(function(n,a,o){const u=Ve(n);return u.sa(),new V5(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:$5.bind(null,s),r_:X5.bind(null,s),ta:Q5.bind(null,s),na:Y5.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await df(s)):(await s.fa.stop(),s.Ta.length>0&&(ve(Qi,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,g=new d0(e,n,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f0(s,e){if(ia("AsyncQueue",`${e}: ${s}`),No(s))return new be(le.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Se.comparator(n.key,a.key):(n,a)=>Se.comparator(n.key,a.key),this.keyedMap=Mc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new to;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.ga=new jt(Se.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class po{constructor(e,n,a,o,u,h,g,y,p){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new po(e,n,to.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Z5{constructor(){this.queries=R_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Ve(n),u=o.queries;o.queries=R_(),u.forEach(((h,g)=>{for(const y of g.Sa)y.onError(a)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function R_(){return new tl((s=>A1(s)),rf)}async function m0(s,e){const n=Ve(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new J5,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=f0(h,`Initialization of query '${Yl(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&p0(n)}async function g0(s,e){const n=Ve(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function eI(s,e){const n=Ve(s);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(a=!0);h.wa=o}}a&&p0(n)}function tI(s,e,n){const a=Ve(s),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);a.queries.delete(e)}function p0(s){s.Ca.forEach((e=>{e.next()}))}var _p,I_;(I_=_p||(_p={})).Ma="default",I_.Cache="cache";class y0{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new po(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.key=e}}class uN{constructor(e){this.key=e}}class nI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=C1(e),this.tu=new to(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new C_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const T=o.get(b),C=af(this.query,w)?w:null,B=!!T&&this.mutatedKeys.has(T.key),H=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;T&&C?T.data.isEqual(C.data)?B!==H&&(a.track({type:3,doc:C}),L=!0):this.su(T,C)||(a.track({type:2,doc:C}),L=!0,(y&&this.eu(C,y)>0||p&&this.eu(C,p)<0)&&(g=!0)):!T&&C?(a.track({type:0,doc:C}),L=!0):T&&!C&&(a.track({type:1,doc:T}),L=!0,(y||p)&&(g=!0)),L&&(C?(h=h.add(C),u=H?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:h,iu:a,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,w)=>(function(C,B){const H=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:L})}};return H(C)-H(B)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,h.length!==0||p?{snapshot:new po(this.query,e.tu,u,h,e.mutatedKeys,y===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new uN(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new cN(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=We();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const x0="SyncEngine";class sI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class rI{constructor(e){this.key=e,this.hu=!1}}class aI{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new tl((g=>A1(g)),rf),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Se.comparator),this.Au=new Map,this.Ru=new r0,this.Vu={},this.mu=new Map,this.fu=go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iI(s,e,n=!0){const a=pN(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await hN(a,e,n,!0),o}async function lI(s,e){const n=pN(s);await hN(n,e,!0,!1)}async function hN(s,e,n,a){const o=await S5(s.localStore,ur(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await oI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&sN(s.remoteStore,o),g}async function oI(s,e,n,a,o){s.pu=(w,T,C)=>(async function(H,L,J,te){let G=L.view.ru(J);G.Cs&&(G=await N_(H.localStore,L.query,!1).then((({documents:j})=>L.view.ru(j,G))));const X=te&&te.targetChanges.get(L.targetId),de=te&&te.targetMismatches.get(L.targetId)!=null,pe=L.view.applyChanges(G,H.isPrimaryClient,X,de);return D_(H,L.targetId,pe.au),pe.snapshot})(s,w,T,C);const u=await N_(s.localStore,e,!0),h=new nI(e,u.Qs),g=h.ru(u.documents),y=fu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),p=h.applyChanges(g,s.isPrimaryClient,y);D_(s,n,p.au);const b=new sI(e,n,h);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function cI(s,e,n){const a=Ve(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!rf(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await bp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&o0(a.remoteStore,o.targetId),wp(a,o.targetId)})).catch(wo)):(wp(a,o.targetId),await bp(a.localStore,o.targetId,!0))}async function uI(s,e){const n=Ve(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),o0(n.remoteStore,a.targetId))}async function hI(s,e,n){const a=xI(s);try{const o=await(function(h,g){const y=Ve(h),p=_t.now(),b=g.reduce(((C,B)=>C.add(B.key)),We());let w,T;return y.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let B=la(),H=We();return y.Ns.getEntries(C,b).next((L=>{B=L,B.forEach(((J,te)=>{te.isValidDocument()||(H=H.add(J))}))})).next((()=>y.localDocuments.getOverlayedDocuments(C,B))).next((L=>{w=L;const J=[];for(const te of g){const G=jR(te,w.get(te.key).overlayedDocument);G!=null&&J.push(new ci(te.key,G,v1(G.value.mapValue),fs.exists(!0)))}return y.mutationQueue.addMutationBatch(C,p,J,g)})).next((L=>{T=L;const J=L.applyToLocalDocumentSet(w,H);return y.documentOverlayCache.saveOverlays(C,L.batchId,J)}))})).then((()=>({batchId:T.batchId,changes:I1(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,y){let p=h.Vu[h.currentUser.toKey()];p||(p=new jt(Xe)),p=p.insert(g,y),h.Vu[h.currentUser.toKey()]=p})(a,o.batchId,n),await gu(a,o.changes),await df(a.remoteStore)}catch(o){const u=f0(o,"Failed to persist write");n.reject(u)}}async function dN(s,e){const n=Ve(s);try{const a=await T5(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?lt(h.hu,14607):o.removedDocuments.size>0&&(lt(h.hu,42227),h.hu=!1))})),await gu(n,a,e)}catch(a){await wo(a)}}function k_(s,e,n){const a=Ve(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const y=Ve(h);y.onlineState=g;let p=!1;y.queries.forEach(((b,w)=>{for(const T of w.Sa)T.va(g)&&(p=!0)})),p&&p0(y)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function dI(s,e,n){const a=Ve(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new jt(Se.comparator);h=h.insert(u,bn.newNoDocument(u,Oe.min()));const g=We().add(u),y=new cf(Oe.min(),new Map,new jt(Xe),h,g);await dN(a,y),a.du=a.du.remove(u),a.Au.delete(e),b0(a)}else await bp(a.localStore,e,!1).then((()=>wp(a,e,n))).catch(wo)}async function fI(s,e){const n=Ve(s),a=e.batch.batchId;try{const o=await N5(n.localStore,e);mN(n,a,null),fN(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await gu(n,o)}catch(o){await wo(o)}}async function mI(s,e,n){const a=Ve(s);try{const o=await(function(h,g){const y=Ve(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return y.mutationQueue.lookupMutationBatch(p,g).next((w=>(lt(w!==null,37113),b=w.keys(),y.mutationQueue.removeMutationBatch(p,w)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>y.localDocuments.getDocuments(p,b)))}))})(a.localStore,e);mN(a,e,n),fN(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await gu(a,o)}catch(o){await wo(o)}}function fN(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function mN(s,e,n){const a=Ve(s);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function wp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||gN(s,a)}))}function gN(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(o0(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),b0(s))}function D_(s,e,n){for(const a of n)a instanceof cN?(s.Ru.addReference(a.key,e),gI(s,a)):a instanceof uN?(ve(x0,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||gN(s,a.key)):ke(19791,{wu:a})}function gI(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(ve(x0,"New document in limbo: "+n),s.Eu.add(a),b0(s))}function b0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Se(xt.fromString(e)),a=s.fu.next();s.Au.set(a,new rI(n)),s.du=s.du.insert(n,a),sN(s.remoteStore,new Ka(ur(sf(n.path)),a,"TargetPurposeLimboResolution",ef.ce))}}async function gu(s,e,n){const a=Ve(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,y)=>{h.push(a.pu(y,e,n).then((p=>{var b;if((p||n)&&a.isPrimaryClient){const w=p?!p.fromCache:(b=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:b.current;a.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(p){o.push(p);const w=i0.As(y.targetId,p);u.push(w)}})))})),await Promise.all(h),a.Pu.H_(o),await(async function(y,p){const b=Ve(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ce.forEach(p,(T=>ce.forEach(T.Es,(C=>b.persistence.referenceDelegate.addReference(w,T.targetId,C))).next((()=>ce.forEach(T.ds,(C=>b.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))))))}catch(w){if(!No(w))throw w;ve(l0,"Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const C=b.Ms.get(T),B=C.snapshotVersion,H=C.withLastLimboFreeSnapshotVersion(B);b.Ms=b.Ms.insert(T,H)}}})(a.localStore,u))}async function pI(s,e){const n=Ve(s);if(!n.currentUser.isEqual(e)){ve(x0,"User change. New user:",e.toKey());const a=await Z1(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new be(le.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await gu(n,a.Ls)}}function yI(s,e){const n=Ve(s),a=n.Au.get(e);if(a&&a.hu)return We().add(a.key);{let o=We();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function pN(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dI.bind(null,e),e.Pu.H_=eI.bind(null,e.eventManager),e.Pu.yu=tI.bind(null,e.eventManager),e}function xI(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mI.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return w5(this.persistence,new b5,e.initialUser,this.serializer)}Cu(e){return new J1(a0.mi,this.serializer)}Du(e){return new C5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class bI extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){lt(this.persistence.referenceDelegate instanceof Ad,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new r5(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new J1((a=>Ad.mi(a,n)),this.serializer)}}class Np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>k_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=pI.bind(null,this.syncEngine),await W5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z5})()}createDatastore(e){const n=uf(e.databaseInfo.databaseId),a=(function(u){return new O5(u)})(e.databaseInfo);return(function(u,h,g,y){return new L5(u,h,g,y)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,g){return new z5(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>k_(this.syncEngine,n,0)),(function(){return j_.v()?new j_:new R5})())}createSyncEngine(e,n){return(function(o,u,h,g,y,p,b){const w=new aI(o,u,h,g,y,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ve(o);ve(Qi,"RemoteStore shutting down."),u.Ea.add(5),await mu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Np.provider={build:()=>new Np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ia("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="FirestoreClient";class vI{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=$p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{ve(ri,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ve(ri,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=f0(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Fg(s,e){s.asyncQueue.verifyOperationInProgress(),ve(ri,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Z1(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function O_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await _I(s);ve(ri,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>A_(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>A_(e.remoteStore,o))),s._onlineComponents=e}async function _I(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(ri,"Using user provided OfflineComponentProvider");try{await Fg(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await Fg(s,new Rd)}}else ve(ri,"Using default OfflineComponentProvider"),await Fg(s,new bI(void 0));return s._offlineComponents}async function yN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(ri,"Using user provided OnlineComponentProvider"),await O_(s,s._uninitializedComponentsProvider._online)):(ve(ri,"Using default OnlineComponentProvider"),await O_(s,new Np))),s._onlineComponents}function wI(s){return yN(s).then((e=>e.syncEngine))}async function Id(s){const e=await yN(s),n=e.eventManager;return n.onListen=iI.bind(null,e.syncEngine),n.onUnlisten=cI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uI.bind(null,e.syncEngine),n}function NI(s,e,n={}){const a=new Jr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,y,p){const b=new v0({next:T=>{b.Nu(),h.enqueueAndForget((()=>g0(u,w)));const C=T.docs.has(g);!C&&T.fromCache?p.reject(new be(le.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&y&&y.source==="server"?p.reject(new be(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new y0(sf(g.path),b,{includeMetadataChanges:!0,qa:!0});return m0(u,w)})(await Id(s),s.asyncQueue,e,n,a))),a.promise}function TI(s,e,n={}){const a=new Jr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,y,p){const b=new v0({next:T=>{b.Nu(),h.enqueueAndForget((()=>g0(u,w))),T.fromCache&&y.source==="server"?p.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new y0(g,b,{includeMetadataChanges:!0,qa:!0});return m0(u,w)})(await Id(s),s.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firestore.googleapis.com",V_=!0;class P_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=V_}else this.host=e.host,this.ssl=e.ssl??V_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n5)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xN(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new R4;switch(a.type){case"firstParty":return new O4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=M_.get(n);a&&(ve("ComponentProvider","Removing Datastore"),M_.delete(n),a.terminate())})(this),Promise.resolve()}}function EI(s,e,n,a={}){var p;s=Vn(s,ff);const o=wr(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Xd(`https://${g}`),Wd("Firestore",!0)),u.host!==bN&&u.host!==g&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:a};if(!Wa(y,h)&&(s._setSettings(y),a.mockUserToken)){let b,w;if(typeof a.mockUserToken=="string")b=a.mockUserToken,w=xn.MOCK_USER;else{b=Xw(a.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new xn(T)}s._authCredentials=new I4(new o1(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class Ct{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(hu(n,Ct._jsonSchema))return new Ct(e,a||null,new Se(xt.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:$t("string",Ct._jsonSchemaVersion),referencePath:$t("string")};class Xa extends ui{constructor(e,n,a){super(e,n,sf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Se(e))}withConverter(e){return new Xa(this.firestore,e,this._path)}}function wt(s,e,...n){if(s=pt(s),c1("collection","path",e),s instanceof ff){const a=xt.fromString(e,...n);return Xv(a),new Xa(s,null,a)}{if(!(s instanceof Ct||s instanceof Xa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(xt.fromString(e,...n));return Xv(a),new Xa(s.firestore,null,a)}}function it(s,e,...n){if(s=pt(s),arguments.length===1&&(e=$p.newId()),c1("doc","path",e),s instanceof ff){const a=xt.fromString(e,...n);return Yv(a),new Ct(s,null,new Se(a))}{if(!(s instanceof Ct||s instanceof Xa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(xt.fromString(e,...n));return Yv(a),new Ct(s.firestore,s instanceof Xa?s.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="AsyncQueue";class U_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tN(this,"async_queue_retry"),this._c=()=>{const a=qg();a&&ve(L_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!No(e))throw e;ve(L_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ia("INTERNAL UNHANDLED ERROR: ",z_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=d0.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ke(47125,{Pc:z_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function z_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s){return(function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class oa extends ff{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new U_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U_(e),this._firestoreClient=void 0,await e}}}function jI(s,e){const n=typeof s=="object"?s:Jd(),a=typeof s=="string"?s:Nd,o=uu(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Hp("firestore");u&&EI(o,...u)}return o}function mf(s){if(s._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||SI(s),s._firestoreClient}function SI(s){var a,o,u;const e=s._freezeSettings(),n=(function(g,y,p,b){return new W4(g,y,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,xN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new vI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hs(gn.fromBase64String(e))}catch(n){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hs(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,hs._jsonSchema))return hs.fromBase64String(e.bytes)}}hs._jsonSchemaVersion="firestore/bytes/1.0",hs._jsonSchema={type:$t("string",hs._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:$t("string",dr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new fr(e.vectorValues);throw new be(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:$t("string",fr._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=/^__.*__$/;class CI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class vN{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new ci(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _N(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:s})}}class pf{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_N(this.Ac)&&AI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||uf(e)}Cc(e,n,a,o=!1){return new pf({Ac:e,methodName:n,Dc:a,path:mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(s){const e=s._freezeSettings(),n=uf(s._databaseId);return new RI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function wN(s,e,n,a,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);N0("Data must be an object, but it was:",h,a);const g=NN(a,h);let y,p;if(u.merge)y=new Qn(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const T=Tp(e,w,n);if(!h.contains(T))throw new be(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);EN(b,T)||b.push(T)}y=new Qn(b),p=h.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,p=h.fieldTransforms;return new CI(new Mn(g),y,p)}class xf extends pu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function II(s,e,n){return new pf({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _0 extends pu{_toFieldTransform(e){return new L1(e.path,new nu)}isEqual(e){return e instanceof _0}}class w0 extends pu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=II(this,e,!0),a=this.vc.map((u=>jo(u,n))),o=new mo(a);return new L1(e.path,o)}isEqual(e){return e instanceof w0&&Wa(this.vc,e.vc)}}function kI(s,e,n,a){const o=s.Cc(1,e,n);N0("Data must be an object, but it was:",o,a);const u=[],h=Mn.empty();oi(a,((y,p)=>{const b=T0(e,y,n);p=pt(p);const w=o.yc(b);if(p instanceof xf)u.push(b);else{const T=jo(p,w);T!=null&&(u.push(b),h.set(b,T))}}));const g=new Qn(u);return new vN(h,g,o.fieldTransforms)}function DI(s,e,n,a,o,u){const h=s.Cc(1,e,n),g=[Tp(e,a,n)],y=[o];if(u.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)g.push(Tp(e,u[T])),y.push(u[T+1]);const p=[],b=Mn.empty();for(let T=g.length-1;T>=0;--T)if(!EN(p,g[T])){const C=g[T];let B=y[T];B=pt(B);const H=h.yc(C);if(B instanceof xf)p.push(C);else{const L=jo(B,H);L!=null&&(p.push(C),b.set(C,L))}}const w=new Qn(p);return new vN(b,w,h.fieldTransforms)}function OI(s,e,n,a=!1){return jo(n,s.Cc(a?4:3,e))}function jo(s,e){if(TN(s=pt(s)))return N0("Unsupported field value:",e,s),NN(s,e);if(s instanceof pu)return(function(a,o){if(!_N(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let y=jo(g,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=pt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return vR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=_t.fromDate(a);return{timestampValue:Sd(o.serializer,u)}}if(a instanceof _t){const u=new _t(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Sd(o.serializer,u)}}if(a instanceof dr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof hs)return{bytesValue:F1(o.serializer,a._byteString)};if(a instanceof Ct){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:s0(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof fr)return(function(h,g){return{mapValue:{fields:{[x1]:{stringValue:b1},[Td]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return Zp(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Zd(a)}`)})(s,e)}function NN(s,e){const n={};return d1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(s,((a,o)=>{const u=jo(o,e.mc(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function TN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof _t||s instanceof dr||s instanceof hs||s instanceof Ct||s instanceof pu||s instanceof fr)}function N0(s,e,n){if(!TN(n)||!u1(n)){const a=Zd(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Tp(s,e,n){if((e=pt(e))instanceof gf)return e._internalPath;if(typeof e=="string")return T0(s,e);throw kd("Field path arguments must be of type string or ",s,!1,void 0,n)}const MI=new RegExp("[~\\*/\\[\\]]");function T0(s,e,n){if(e.search(MI)>=0)throw kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new gf(...e.split("."))._internalPath}catch{throw kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function kd(s,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||h)&&(y+=" (found",u&&(y+=` in field ${a}`),h&&(y+=` in document ${o}`),y+=")"),new be(le.INVALID_ARGUMENT,g+s+y)}function EN(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VI extends jN{data(){return super.data()}}function bf(s,e){return typeof e=="string"?T0(s,e):e instanceof gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E0{}class AN extends E0{}function an(s,e,...n){let a=[];e instanceof E0&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((y=>y instanceof j0)).length,g=u.filter((y=>y instanceof vf)).length;if(h>1||h>0&&g>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class vf extends AN{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new vf(e,n,a)}_apply(e){const n=this._parse(e);return CN(e._query,n),new ui(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=yf(e.firestore);return(function(u,h,g,y,p,b,w){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){q_(w,b);const B=[];for(const H of w)B.push(H_(y,u,H));T={arrayValue:{values:B}}}else T=H_(y,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||q_(w,b),T=OI(g,h,w,b==="in"||b==="not-in");return Kt.create(p,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gs(s,e,n){const a=e,o=bf("where",s);return vf._create(o,a,n)}class j0 extends E0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new j0(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Ds.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const y of g)CN(h,y),h=fp(h,y)})(e._query,n),new ui(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S0 extends AN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S0(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tu(u,h)})(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new To(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function So(s,e="asc"){const n=e,a=bf("orderBy",s);return S0._create(a,n)}function H_(s,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S1(e)&&n.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(xt.fromString(n));if(!Se.isDocumentKey(a))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return r_(s,new Se(a))}if(n instanceof Ct)return r_(s,n._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(n)}.`)}function q_(s,e){if(!Array.isArray(s)||s.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CN(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PI{convertValue(e,n="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return oi(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){var a,o,u;const n=(u=(o=(a=e.fields)==null?void 0:a[Td].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>Vt(h.doubleValue)));return new fr(n)}convertGeoPoint(e){return new dr(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=nf(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const n=ei(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=xt.fromString(e);lt(X1(a),9688,{name:e});const o=new Zc(a.get(1),a.get(3)),u=new Se(a.popFirst(5));return o.isEqual(n)||ia(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s,e,n){let a;return a=s?s.toFirestore(e):e,a}class Pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qi extends jN{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(bf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:$t("string",qi._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class hd extends qi{data(e={}){return super.data(e)}}class Fi{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new hd(this._firestore,this._userDataWriter,a.key,a,new Pc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const y=new hd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new hd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:LI(g.type),doc:y,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(s){s=Vn(s,Ct);const e=Vn(s.firestore,oa);return NI(mf(e),s._key).then((n=>IN(e,s,n)))}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:$t("string",Fi._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class A0 extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function ai(s){s=Vn(s,ui);const e=Vn(s.firestore,oa),n=mf(e),a=new A0(e);return SN(s._query),TI(n,s._query).then((o=>new Fi(e,a,s,o)))}function dd(s,e,n){s=Vn(s,Ct);const a=Vn(s.firestore,oa),o=RN(s.converter,e);return _f(a,[wN(yf(a),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,fs.none())])}function ca(s,e,n,...a){s=Vn(s,Ct);const o=Vn(s.firestore,oa),u=yf(o);let h;return h=typeof(e=pt(e))=="string"||e instanceof gf?DI(u,"updateDoc",s._key,e,n,a):kI(u,"updateDoc",s._key,e),_f(o,[h.toMutation(s._key,fs.exists(!0))])}function sl(s){return _f(Vn(s.firestore,oa),[new e0(s._key,fs.none())])}function rl(s,e){const n=Vn(s.firestore,oa),a=it(s),o=RN(s.converter,e);return _f(n,[wN(yf(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,fs.exists(!1))]).then((()=>a))}function br(s,...e){var y,p,b;s=pt(s);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||B_(e[a])||(n=e[a++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(B_(e[a])){const w=e[a];e[a]=(y=w.next)==null?void 0:y.bind(w),e[a+1]=(p=w.error)==null?void 0:p.bind(w),e[a+2]=(b=w.complete)==null?void 0:b.bind(w)}let u,h,g;if(s instanceof Ct)h=Vn(s.firestore,oa),g=sf(s._key.path),u={next:w=>{e[a]&&e[a](IN(h,s,w))},error:e[a+1],complete:e[a+2]};else{const w=Vn(s,ui);h=Vn(w.firestore,oa),g=w._query;const T=new A0(h);u={next:C=>{e[a]&&e[a](new Fi(h,T,w,C))},error:e[a+1],complete:e[a+2]},SN(s._query)}return(function(T,C,B,H){const L=new v0(H),J=new y0(C,L,B);return T.asyncQueue.enqueueAndForget((async()=>m0(await Id(T),J))),()=>{L.Nu(),T.asyncQueue.enqueueAndForget((async()=>g0(await Id(T),J)))}})(mf(h),g,o,u)}function _f(s,e){return(function(a,o){const u=new Jr;return a.asyncQueue.enqueueAndForget((async()=>hI(await wI(a),o,u))),u.promise})(mf(s),e)}function IN(s,e,n){const a=n.docs.get(e._key),o=new A0(s);return new qi(s,o,e._key,a,new Pc(n.hasPendingWrites,n.fromCache),e.converter)}function UI(){return new _0("serverTimestamp")}function C0(...s){return new w0("arrayUnion",s)}(function(e,n=!0){(function(o){_o=o})(el),Ja(new ra("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new oa(new k4(a.getProvider("auth-internal")),new M4(h,a.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(p.options.projectId,b)})(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),ds(Gv,Kv,e),ds(Gv,Kv,"esm2020")})();function kN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DN=kN,ON=new ou("auth","Firebase",kN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new qp("@firebase/auth");function zI(s,...e){Dd.logLevel<=Ye.WARN&&Dd.warn(`Auth (${el}): ${s}`,...e)}function fd(s,...e){Dd.logLevel<=Ye.ERROR&&Dd.error(`Auth (${el}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(s,...e){throw R0(s,...e)}function gr(s,...e){return R0(s,...e)}function MN(s,e,n){const a={...DN(),[e]:n};return new ou("auth","Firebase",a).create(e,{appName:s.name})}function Zr(s){return MN(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R0(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return ON.create(s,...e)}function Ie(s,e,...n){if(!s)throw R0(e,...n)}function Yr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fd(e),new Error(e)}function ua(s,e){s||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function BI(){return F_()==="http:"||F_()==="https:"}function F_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BI()||lC()||"connection"in navigator)?navigator.onLine:!0}function qI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ua(n>e,"Short delay should be less than long delay!"),this.isMobile=rC()||oC()}get(){return HI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(s,e){ua(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KI=new yu(3e4,6e4);function hi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ha(s,e,n,a,o={}){return PN(s,o,async()=>{let u={},h={};a&&(e==="GET"?h=a:u={body:JSON.stringify(a)});const g=cu({key:s.config.apiKey,...h}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:y,...u};return iC()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&wr(s.emulatorConfig.host)&&(p.credentials="include"),VN.fetch()(await LN(s,s.config.apiHost,n,g),p)})}async function PN(s,e,n){s._canInitEmulator=!1;const a={...FI,...e};try{const o=new QI(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw td(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(s,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw td(s,"email-already-in-use",h);if(y==="USER_DISABLED")throw td(s,"user-disabled",h);const b=a[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw MN(s,b,p);Os(s,b)}}catch(o){if(o instanceof Vs)throw o;Os(s,"network-request-failed",{message:String(o)})}}async function xu(s,e,n,a,o={}){const u=await ha(s,e,n,a,o);return"mfaPendingCredential"in u&&Os(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function LN(s,e,n,a){const o=`${e}${n}?${a}`,u=s,h=u.config.emulator?I0(s.config,o):`${s.config.apiScheme}://${o}`;return GI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function $I(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(gr(this.auth,"network-request-failed")),KI.get())})}}function td(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=gr(s,e,a);return o.customData._tokenResponse=n,o}function G_(s){return s!==void 0&&s.enterprise!==void 0}class YI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $I(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XI(s,e){return ha(s,"GET","/v2/recaptchaConfig",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(s,e){return ha(s,"POST","/v1/accounts:delete",e)}async function Od(s,e){return ha(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UN(s,e=!1){const n=pt(s),a=await n.getIdToken(e),o=k0(a);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:Kc(Gg(o.auth_time)),issuedAtTime:Kc(Gg(o.iat)),expirationTime:Kc(Gg(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Gg(s){return Number(s)*1e3}function k0(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kw(n);return o?JSON.parse(o):(fd("Failed to decode base64 JWT payload"),null)}catch(o){return fd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function K_(s){const e=k0(s);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Vs&&JI(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function JI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(s){var w;const e=s.auth,n=await s.getIdToken(),a=await yo(s,Od(e,{idToken:n}));Ie(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?BN(o.providerUserInfo):[],h=ek(s.providerData,u),g=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),p=g?y:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new jp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function zN(s){const e=pt(s);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ek(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function BN(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(s,e){const n=await PN(s,{},async()=>{const a=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await LN(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:a};return s.emulatorConfig&&wr(s.emulatorConfig.host)&&(y.credentials="include"),VN.fetch()(h,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nk(s,e){return ha(s,"POST","/v2/accounts:revokeToken",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=K_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await tk(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,h=new no;return a&&(Ie(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(s,e){Ie(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Is{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new ZI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await yo(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UN(this,e)}reload(){return zN(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Md(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Zr(this.auth));const e=await this.getIdToken();return await yo(this,WI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:C,providerData:B,stsTokenManager:H}=n;Ie(w&&H,e,"internal-error");const L=no.fromJSON(this.name,H);Ie(typeof w=="string",e,"internal-error"),qa(a,e.name),qa(o,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof C=="boolean",e,"internal-error"),qa(u,e.name),qa(h,e.name),qa(g,e.name),qa(y,e.name),qa(p,e.name),qa(b,e.name);const J=new Is({uid:w,auth:e,email:o,emailVerified:T,displayName:a,isAnonymous:C,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:L,createdAt:p,lastLoginAt:b});return B&&Array.isArray(B)&&(J.providerData=B.map(te=>({...te}))),y&&(J._redirectEventId=y),J}static async _fromIdTokenResponse(e,n,a=!1){const o=new no;o.updateFromServerResponse(n);const u=new Is({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Md(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?BN(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new no;g.updateFromIdToken(a);const y=new Is({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;function Xr(s){ua(s instanceof Function,"Expected a class definition");let e=$_.get(s);return e?(ua(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,$_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HN.type="NONE";const Sp=HN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(s,e,n){return`firebase:${s}:${e}:${n}`}class so{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=md(this.userKey,o.apiKey,u),this.fullPersistenceKey=md("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Od(this.auth,{idToken:e}).catch(()=>{});return n?Is._fromGetAccountInfoResponse(this.auth,n,e):null}return Is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new so(Xr(Sp),e,a);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Xr(Sp);const h=md(a,e.config.apiKey,e.name);let g=null;for(const p of n)try{const b=await p._get(h);if(b){let w;if(typeof b=="string"){const T=await Od(e,{idToken:b}).catch(()=>{});if(!T)break;w=await Is._fromGetAccountInfoResponse(e,T,b)}else w=Is._fromJSON(e,b);p!==u&&(g=w),u=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new so(u,e,a):(u=y[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new so(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QN(e))return"Blackberry";if(YN(e))return"Webos";if(FN(e))return"Safari";if((e.includes("chrome/")||GN(e))&&!e.includes("edge/"))return"Chrome";if($N(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function qN(s=vn()){return/firefox\//i.test(s)}function FN(s=vn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GN(s=vn()){return/crios\//i.test(s)}function KN(s=vn()){return/iemobile/i.test(s)}function $N(s=vn()){return/android/i.test(s)}function QN(s=vn()){return/blackberry/i.test(s)}function YN(s=vn()){return/webos/i.test(s)}function D0(s=vn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function sk(s=vn()){var e;return D0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function rk(){return cC()&&document.documentMode===10}function XN(s=vn()){return D0(s)||$N(s)||YN(s)||QN(s)||/windows phone/i.test(s)||KN(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(s,e=[]){let n;switch(s){case"Browser":n=Q_(vn());break;case"Worker":n=`${Q_(vn())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((h,g)=>{try{const y=e(u);h(y)}catch(y){g(y)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(s,e={}){return ha(s,"GET","/v2/passwordPolicy",hi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=6;class ok{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ON,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Od(this,{idToken:e}),a=await Is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(On(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===g)&&(y!=null&&y.user)&&(a=y.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(h){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Zr(this));const n=e?pt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ik(this),n=new ok(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await nk(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,a,o);return()=>{h=!0,y()}}else{const y=e.addObserver(n);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function al(s){return pt(s)}class Y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=yC(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uk(s){wf=s}function JN(s){return wf.loadJS(s)}function hk(){return wf.recaptchaEnterpriseScript}function dk(){return wf.gapiScript}function fk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class mk{constructor(){this.enterprise=new gk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const pk="recaptcha-enterprise",ZN="NO_RECAPTCHA";class yk{constructor(e){this.type=pk,this.auth=al(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{XI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new YI(y);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,h(p.siteKey)}}).catch(y=>{g(y)})})}function o(u,h,g){const y=window.grecaptcha;G_(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(p=>{h(p)}).catch(()=>{h(ZN)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mk().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{a(this.auth).then(g=>{if(!n&&G_(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=hk();y.length!==0&&(y+=g),JN(y).then(()=>{o(g,u,h)}).catch(p=>{h(p)})}}).catch(g=>{h(g)})})}}async function X_(s,e,n,a=!1,o=!1){const u=new yk(s);let h;if(o)h=ZN;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Ap(s,e,n,a,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await X_(s,e,n,n==="getOobCode");return a(s,h)}else return a(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await X_(s,e,n,n==="getOobCode");return a(s,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(s,e){const n=uu(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Wa(u,e??{}))return o;Os(o,"already-initialized")}return n.initialize({options:e})}function xk(s,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function tT(s,e,n){const a=al(s);Ie(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=nT(e),{host:h,port:g}=bk(e),y=g===null?"":`:${g}`,p={url:`${u}//${h}${y}/`},b=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Ie(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ie(Wa(p,a.config.emulator)&&Wa(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,wr(h)?(Xd(`${u}//${h}${y}`),Wd("Auth",!0)):vk()}function nT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function bk(s){const e=nT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:W_(a.substr(u.length+1))}}else{const[u,h]=a.split(":");return{host:u,port:W_(h)}}}function W_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function vk(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,n){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function _k(s,e){return ha(s,"POST","/v1/accounts:update",e)}async function wk(s,e){return ha(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(s,e){return xu(s,"POST","/v1/accounts:signInWithPassword",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(s,e){return xu(s,"POST","/v1/accounts:signInWithEmailLink",hi(s,e))}async function Ek(s,e){return xu(s,"POST","/v1/accounts:signInWithEmailLink",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Nf{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new xo(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new xo(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ap(e,n,"signInWithPassword",Nk);case"emailLink":return Tk(e,{email:this._email,oobCode:this._password});default:Os(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ap(e,a,"signUpPassword",wk);case"emailLink":return Ek(e,{idToken:n,email:this._email,oobCode:this._password});default:Os(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(s,e){return xu(s,"POST","/v1/accounts:signInWithIdp",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="http://localhost";class ii extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Os("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const h=new ii(a,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,ro(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:jk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ak(s){const e=kc(Dc(s)).link,n=e?kc(Dc(e)).deep_link_id:null,a=kc(Dc(s)).deep_link_id;return(a?kc(Dc(a)).link:null)||a||n||e||s}class Tf{constructor(e){const n=kc(Dc(e)),a=n.apiKey??null,o=n.oobCode??null,u=Sk(n.mode??null);Ie(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ak(e);try{return new Tf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return xo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Tf.parseLink(n);return Ie(a,"argument-error"),xo._fromEmailAndCode(e,a.code,a.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends sT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends bu{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Kr.credential(n,a)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends bu{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends bu{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Qr.credential(n,a)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(s,e){return xu(s,"POST","/v1/accounts:signUp",hi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Is._fromIdTokenResponse(e,a,o),h=J_(a);return new Yi({user:u,providerId:h,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=J_(a);return new Yi({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function J_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Vs{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Vd(e,n,a,o)}}function rT(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(s,u,e,a):u})}async function Rk(s,e,n=!1){const a=await yo(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Yi._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(s,e,n=!1){const{auth:a}=s;if(On(a.app))return Promise.reject(Zr(a));const o="reauthenticate";try{const u=await yo(s,rT(a,o,e,s),n);Ie(u.idToken,a,"internal-error");const h=k0(u.idToken);Ie(h,a,"internal-error");const{sub:g}=h;return Ie(s.uid===g,a,"user-mismatch"),Yi._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Os(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(s,e,n=!1){if(On(s.app))return Promise.reject(Zr(s));const a="signIn",o=await rT(s,a,e),u=await Yi._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(u.user),u}async function lT(s,e){return iT(al(s),e)}async function oT(s,e){return aT(pt(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(s){const e=al(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uT(s,e,n){if(On(s.app))return Promise.reject(Zr(s));const a=al(s),h=await Ap(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ck).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&cT(s),y}),g=await Yi._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function hT(s,e,n){return On(s.app)?Promise.reject(Zr(s)):lT(pt(s),di.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&cT(s),a})}function dT(s,e){return Ik(pt(s),null,e)}async function Ik(s,e,n){const{auth:a}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const h=await yo(s,_k(a,u));await s._updateTokensIfNecessary(h,!0)}function fT(s,e,n,a){return pt(s).onIdTokenChanged(e,n,a)}function mT(s,e,n){return pt(s).beforeAuthStateChanged(e,n)}function gT(s,e,n,a){return pt(s).onAuthStateChanged(e,n,a)}function pT(s){return pt(s).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=1e3,Dk=10;class xT extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,y)=>{this.notifyListeners(h,y)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(a);!n&&this.localCache[a]===h||this.notifyListeners(a,h)},u=this.storage.getItem(a);rk()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Dk):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},kk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xT.type="LOCAL";const bT=xT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vT.type="SESSION";const O0=vT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Ef(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(h).map(async p=>p(n.origin,u)),y=await Ok(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,y)=>{const p=M0("",20);o.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},a);h={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(T.data.response);break;default:clearTimeout(b),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function Vk(s){pr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function Pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lk(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function Uk(){return _T()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebaseLocalStorageDb",zk=1,Ld="firebaseLocalStorage",NT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jf(s,e){return s.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function Bk(){const s=indexedDB.deleteDatabase(wT);return new vu(s).toPromise()}function Cp(){const s=indexedDB.open(wT,zk);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Ld,{keyPath:NT})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Ld)?e(a):(a.close(),await Bk(),e(await Cp()))})})}async function Z_(s,e,n){const a=jf(s,!0).put({[NT]:e,value:n});return new vu(a).toPromise()}async function Hk(s,e){const n=jf(s,!1).get(e),a=await new vu(n).toPromise();return a===void 0?null:a.value}function ew(s,e){const n=jf(s,!0).delete(e);return new vu(n).toPromise()}const qk=800,Fk=3;class TT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>Fk)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(Uk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new Mk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await Z_(e,Pd,"1"),await ew(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>Z_(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>Hk(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ew(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=jf(o,!1).getAll();return new vu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TT.type="LOCAL";const ET=TT;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(s,e){return e?Xr(e):(Ie(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Kk(s){return iT(s.auth,new V0(s),s.bypassAuthState)}function $k(s){const{auth:e,user:n}=s;return Ie(n,e,"internal-error"),aT(n,new V0(s),s.bypassAuthState)}async function Qk(s){const{auth:e,user:n}=s;return Ie(n,e,"internal-error"),Rk(n,new V0(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kk;case"linkViaPopup":case"linkViaRedirect":return Qk;case"reauthViaPopup":case"reauthViaRedirect":return $k;default:Os(this.auth,"internal-error")}}resolve(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new yu(2e3,1e4);class eo extends jT{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ua(this.filter.length===1,"Popup operations only handle one event");const e=M0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yk.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="pendingRedirect",gd=new Map;class Wk extends jT{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=gd.get(this.auth._key());if(!e){try{const a=await Jk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}gd.set(this.auth._key(),e)}return this.bypassAuthState||gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jk(s,e){const n=t6(e),a=e6(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function Zk(s,e){gd.set(s._key(),e)}function e6(s){return Xr(s._redirectPersistence)}function t6(s){return md(Xk,s.config.apiKey,s.name)}async function n6(s,e,n=!1){if(On(s.app))return Promise.reject(Zr(s));const a=al(s),o=Gk(a,e),h=await new Wk(a,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=600*1e3;class r6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!ST(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s6&&this.cachedEventUids.clear(),this.cachedEventUids.has(tw(e))}saveEventToCache(e){this.cachedEventUids.add(tw(e)),this.lastProcessedEventTime=Date.now()}}function tw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function ST({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function a6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ST(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(s,e={}){return ha(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o6=/^https?/;async function c6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await i6(s);for(const n of e)try{if(u6(n))return}catch{}Os(s,"unauthorized-domain")}function u6(s){const e=Ep(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===a}if(!o6.test(n))return!1;if(l6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new yu(3e4,6e4);function nw(){const s=pr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function d6(s){return new Promise((e,n)=>{var o,u,h;function a(){nw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nw(),n(gr(s,"network-request-failed"))},timeout:h6.get()})}if((u=(o=pr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=pr().gapi)!=null&&h.load)a();else{const g=fk("iframefcb");return pr()[g]=()=>{gapi.load?a():n(gr(s,"network-request-failed"))},JN(`${dk()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw pd=null,e})}let pd=null;function f6(s){return pd=pd||d6(s),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new yu(5e3,15e3),g6="__/auth/iframe",p6="emulator/auth/iframe",y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b6(s){const e=s.config;Ie(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?I0(e,p6):`https://${s.config.authDomain}/${g6}`,a={apiKey:e.apiKey,appName:s.name,v:el},o=x6.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${cu(a).slice(1)}`}async function v6(s){const e=await f6(s),n=pr().gapi;return Ie(n,s,"internal-error"),e.open({where:document.body,url:b6(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y6,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const h=gr(s,"network-request-failed"),g=pr().setTimeout(()=>{u(h)},m6.get());function y(){pr().clearTimeout(g),o(a)}a.ping(y).then(y,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w6=500,N6=600,T6="_blank",E6="http://localhost";class sw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j6(s,e,n,a=w6,o=N6){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const y={..._6,width:a.toString(),height:o.toString(),top:u,left:h},p=vn().toLowerCase();n&&(g=GN(p)?T6:n),qN(p)&&(e=e||E6,y.scrollbars="yes");const b=Object.entries(y).reduce((T,[C,B])=>`${T}${C}=${B},`,"");if(sk(p)&&g!=="_self")return S6(e||"",g),new sw(null);const w=window.open(e||"",g,b);Ie(w,s,"popup-blocked");try{w.focus()}catch{}return new sw(w)}function S6(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="__/auth/handler",C6="emulator/auth/handler",R6=encodeURIComponent("fac");async function rw(s,e,n,a,o,u){Ie(s.config.authDomain,s,"auth-domain-config-required"),Ie(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:el,eventId:o};if(e instanceof sT){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",pC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof bu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const y=await s._getAppCheckToken(),p=y?`#${R6}=${encodeURIComponent(y)}`:"";return`${I6(s)}?${cu(g).slice(1)}${p}`}function I6({config:s}){return s.emulator?I0(s,C6):`https://${s.authDomain}/${A6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class k6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O0,this._completeRedirectFn=n6,this._overrideRedirectResult=Zk}async _openPopup(e,n,a,o){var h;ua((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await rw(e,n,a,Ep(),o);return j6(e,u,M0())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await rw(e,n,a,Ep(),o);return Vk(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ua(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await v6(e),a=new r6(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kg,{type:Kg},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Kg];u!==void 0&&n(!!u),Os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XN()||FN()||D0()}}const AT=k6;var aw="@firebase/auth",iw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M6(s){Ja(new ra("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const y={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WN(s)},p=new ck(a,o,u,y);return xk(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Ja(new ra("auth-internal",e=>{const n=al(e.getProvider("auth").getImmediate());return(a=>new D6(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(aw,iw,O6(s)),ds(aw,iw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=300,P6=Yw("authIdTokenMaxAge")||V6;let lw=null;const L6=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>P6)return;const o=n==null?void 0:n.token;lw!==o&&(lw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ru(s=Jd()){const e=uu(s,"auth");if(e.isInitialized())return e.getImmediate();const n=eT(s,{popupRedirectResolver:AT,persistence:[ET,bT,O0]}),a=Yw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const h=L6(u.toString());mT(n,h,()=>h(n.currentUser)),fT(n,g=>h(g))}}const o=$w("auth");return o&&tT(n,`http://${o}`),n}function U6(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}uk({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=gr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",U6().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M6("Browser");const z6=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Tf,AuthCredential:Nf,EmailAuthCredential:xo,EmailAuthProvider:di,FacebookAuthProvider:Gr,GithubAuthProvider:$r,GoogleAuthProvider:Kr,OAuthCredential:ii,TwitterAuthProvider:Qr,beforeAuthStateChanged:mT,browserLocalPersistence:bT,browserPopupRedirectResolver:AT,browserSessionPersistence:O0,connectAuthEmulator:tT,createUserWithEmailAndPassword:uT,getAuth:ru,getIdTokenResult:UN,inMemoryPersistence:Sp,indexedDBLocalPersistence:ET,initializeAuth:eT,onAuthStateChanged:gT,onIdTokenChanged:fT,prodErrorMap:DN,reauthenticateWithCredential:oT,reload:zN,signInWithCredential:lT,signInWithEmailAndPassword:hT,signOut:pT,updatePassword:dT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="type.googleapis.com/google.protobuf.Int64Value",H6="type.googleapis.com/google.protobuf.UInt64Value";function CT(s,e){const n={};for(const a in s)s.hasOwnProperty(a)&&(n[a]=e(s[a]));return n}function Ud(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>Ud(e));if(typeof s=="function"||typeof s=="object")return CT(s,e=>Ud(e));throw new Error("Data cannot be encoded in JSON: "+s)}function bo(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case B6:case H6:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>bo(e)):typeof s=="function"||typeof s=="object"?CT(s,e=>bo(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class En extends Vs{constructor(e,n,a){super(`${P0}/${e}`,n||""),this.details=a,Object.setPrototypeOf(this,En.prototype)}}function q6(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function zd(s,e){let n=q6(s),a=n,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!ow[h])return new En("internal","internal");n=ow[h],a=h}const g=u.message;typeof g=="string"&&(a=g),o=u.details,o!==void 0&&(o=bo(o))}}catch{}return n==="ok"?null:new En(n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,On(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o==null||o.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="us-central1",G6=/^data: (.*?)(?:\n|$)/;function K6(s){let e=null;return{promise:new Promise((n,a)=>{e=setTimeout(()=>{a(new En("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class $6{constructor(e,n,a,o,u=Rp,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new F6(e,n,a,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Rp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Q6(s,e,n){const a=wr(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${n}`,a&&(Xd(s.emulatorOrigin+"/backends"),Wd("Functions",!0))}function Y6(s,e,n){const a=o=>W6(s,e,o,n||{});return a.stream=(o,u)=>Z6(s,e,o,u),a}function RT(s){return s.emulatorOrigin&&wr(s.emulatorOrigin)?"include":void 0}async function X6(s,e,n,a,o){n["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(e),headers:n,credentials:RT(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function IT(s,e){const n={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(n.Authorization="Bearer "+a.authToken),a.messagingToken&&(n["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=a.appCheckToken),n}function W6(s,e,n,a){const o=s._url(e);return J6(s,o,n,a)}async function J6(s,e,n,a){n=Ud(n);const o={data:n},u=await IT(s,a),h=a.timeout||7e4,g=K6(h),y=await Promise.race([X6(e,o,u,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!y)throw new En("cancelled","Firebase Functions instance was deleted.");const p=zd(y.status,y.json);if(p)throw p;if(!y.json)throw new En("internal","Response is not valid JSON object.");let b=y.json.data;if(typeof b>"u"&&(b=y.json.result),typeof b>"u")throw new En("internal","Response is missing data field.");return{data:bo(b)}}function Z6(s,e,n,a){const o=s._url(e);return eD(s,o,n,a||{})}async function eD(s,e,n,a){var T;n=Ud(n);const o={data:n},u=await IT(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:a==null?void 0:a.signal,credentials:RT(s)})}catch(C){if(C instanceof Error&&C.name==="AbortError"){const H=new En("cancelled","Request was cancelled.");return{data:Promise.reject(H),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(H)}}}}}}const B=zd(0,null);return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}let g,y;const p=new Promise((C,B)=>{g=C,y=B});(T=a==null?void 0:a.signal)==null||T.addEventListener("abort",()=>{const C=new En("cancelled","Request was cancelled.");y(C)});const b=h.body.getReader(),w=tD(b,g,y,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const C=w.getReader();return{async next(){const{value:B,done:H}=await C.read();return{value:B,done:H}},async return(){return await C.cancel(),{done:!0,value:void 0}}}}},data:p}}function tD(s,e,n,a){const o=(h,g)=>{const y=h.match(G6);if(!y)return;const p=y[1];try{const b=JSON.parse(p);if("result"in b){e(bo(b.result));return}if("message"in b){g.enqueue(bo(b.message));return}if("error"in b){const w=zd(0,b);g.error(w),n(w);return}}catch(b){if(b instanceof En){g.error(b),n(b);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return y();async function y(){if(a!=null&&a.aborted){const p=new En("cancelled","Request was cancelled");return h.error(p),n(p),Promise.resolve()}try{const{value:p,done:b}=await s.read();if(b){g.trim()&&o(g.trim(),h),h.close();return}if(a!=null&&a.aborted){const T=new En("cancelled","Request was cancelled");h.error(T),n(T),await s.cancel();return}g+=u.decode(p,{stream:!0});const w=g.split(`
`);g=w.pop()||"";for(const T of w)T.trim()&&o(T.trim(),h);return y()}catch(p){const b=p instanceof En?p:zd(0,null);h.error(b),n(b)}}},cancel(){return s.cancel()}})}const cw="@firebase/functions",uw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="auth-internal",sD="app-check-internal",rD="messaging-internal";function aD(s){const e=(n,{instanceIdentifier:a})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(nD),h=n.getProvider(rD),g=n.getProvider(sD);return new $6(o,u,h,g,a)};Ja(new ra(P0,e,"PUBLIC").setMultipleInstances(!0)),ds(cw,uw,s),ds(cw,uw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(s=Jd(),e=Rp){const a=uu(pt(s),P0).getImmediate({identifier:e}),o=Hp("functions");return o&&DT(a,...o),a}function DT(s,e,n){Q6(pt(s),e,n)}function iD(s,e,n){return Y6(pt(s),e,n)}aD();const OT=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:En,connectFunctionsEmulator:DT,getFunctions:kT,httpsCallable:iD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebasestorage.googleapis.com",VT="storageBucket",lD=120*1e3,oD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends Vs{constructor(e,n,a=0){super($g(e),`Firebase Storage: ${n} (${$g(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function $g(s){return"storage/"+s}function L0(){const s="An unknown error occurred, please check the error payload for server response.";return new It(Rt.UNKNOWN,s)}function cD(s){return new It(Rt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function uD(s){return new It(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hD(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(Rt.UNAUTHENTICATED,s)}function dD(){return new It(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fD(s){return new It(Rt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function mD(){return new It(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gD(){return new It(Rt.CANCELED,"User canceled the upload/download.")}function pD(s){return new It(Rt.INVALID_URL,"Invalid URL '"+s+"'.")}function yD(s){return new It(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function xD(){return new It(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VT+"' property when initializing the app?")}function bD(){return new It(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vD(){return new It(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _D(s){return new It(Rt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ip(s){return new It(Rt.INVALID_ARGUMENT,s)}function PT(){return new It(Rt.APP_DELETED,"The Firebase app was deleted.")}function wD(s){return new It(Rt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $c(s,e){return new It(Rt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Ic(s){throw new It(Rt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(a.path==="")return a;throw yD(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+o+h,"i"),y={bucket:1,path:3};function p(X){X.path_=decodeURIComponent(X.path)}const b="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${b}/b/${o}/o${T}`,"i"),B={bucket:1,path:3},H=n===MT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",J=new RegExp(`^https?://${H}/${o}/${L}`,"i"),G=[{regex:g,indices:y,postModify:u},{regex:C,indices:B,postModify:p},{regex:J,indices:{bucket:1,path:2},postModify:p}];for(let X=0;X<G.length;X++){const de=G[X],pe=de.regex.exec(e);if(pe){const j=pe[de.indices.bucket];let N=pe[de.indices.path];N||(N=""),a=new Yn(j,N),de.postModify(a);break}}if(a==null)throw pD(e);return a}}class ND{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(s,e,n){let a=1,o=null,u=null,h=!1,g=0;function y(){return g===2}let p=!1;function b(...L){p||(p=!0,e.apply(null,L))}function w(L){o=setTimeout(()=>{o=null,s(C,y())},L)}function T(){u&&clearTimeout(u)}function C(L,...J){if(p){T();return}if(L){T(),b.call(null,L,...J);return}if(y()||h){T(),b.call(null,L,...J);return}a<64&&(a*=2);let G;g===1?(g=2,G=0):G=(a+Math.random())*1e3,w(G)}let B=!1;function H(L){B||(B=!0,T(),!p&&(o!==null?(L||(g=2),clearTimeout(o),w(0)):L||(g=1)))}return w(0),u=setTimeout(()=>{h=!0,H(!0)},n),H}function ED(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(s){return s!==void 0}function SD(s){return typeof s=="object"&&!Array.isArray(s)}function U0(s){return typeof s=="string"||s instanceof String}function hw(s){return z0()&&s instanceof Blob}function z0(){return typeof Blob<"u"}function dw(s,e,n,a){if(a<e)throw Ip(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw Ip(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function LT(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var Gi;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Gi||(Gi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,a,o,u,h,g,y,p,b,w,T=!0,C=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=y,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,H)=>{this.resolve_=B,this.reject_=H,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new nd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=g=>{const y=g.loaded,p=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,p)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const g=u.getErrorCode()===Gi.NO_ERROR,y=u.getStatus();if(!g||AD(y,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Gi.ABORT;a(!1,new nd(!1,null,b));return}const p=this.successCodes_.indexOf(y)!==-1;a(!0,new nd(p,u))})},n=(a,o)=>{const u=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(g,g.getResponse());jD(y)?u(y):u()}catch(y){h(y)}else if(g!==null){const y=L0();y.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,y)):h(y)}else if(o.canceled){const y=this.appDelete_?PT():gD();h(y)}else{const y=mD();h(y)}};this.canceled_?n(!1,new nd(!1,null,!0)):this.backoffId_=TD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ED(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nd{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function RD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function ID(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function DD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function OD(s,e,n,a,o,u,h=!0,g=!1){const y=LT(s.urlParams),p=s.url+y,b=Object.assign({},s.headers);return kD(b,e),RD(b,n),ID(b,u),DD(b,a),new CD(p,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VD(...s){const e=MD();if(e!==void 0){const n=new e;for(let a=0;a<s.length;a++)n.append(s[a]);return n.getBlob()}else{if(z0())return new Blob(s);throw new It(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PD(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(s){if(typeof atob>"u")throw _D("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qg{constructor(e,n){this.data=e,this.contentType=n||null}}function UD(s,e){switch(s){case or.RAW:return new Qg(UT(e));case or.BASE64:case or.BASE64URL:return new Qg(zT(s,e));case or.DATA_URL:return new Qg(BD(e),HD(e))}throw L0()}function UT(s){const e=[];for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=a,h=s.charCodeAt(++n);a=65536|(u&1023)<<10|h&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function zD(s){let e;try{e=decodeURIComponent(s)}catch{throw $c(or.DATA_URL,"Malformed data URL.")}return UT(e)}function zT(s,e){switch(s){case or.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw $c(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw $c(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LD(e)}catch(o){throw o.message.includes("polyfill")?o:$c(s,"Invalid character found")}const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}class BT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw $c(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=qD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function BD(s){const e=new BT(s);return e.base64?zT(or.BASE64,e.rest):zD(e.rest)}function HD(s){return new BT(s).contentType}function qD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){let a=0,o="";hw(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(hw(this.data_)){const a=this.data_,o=PD(a,e,n);return o===null?null:new Fa(o)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new Fa(a,!0)}}static getBlob(...e){if(z0()){const n=e.map(a=>a instanceof Fa?a.data_:a);return new Fa(VD.apply(null,n))}else{const n=e.map(h=>U0(h)?UD(or.RAW,h).data:h.data_);let a=0;n.forEach(h=>{a+=h.byteLength});const o=new Uint8Array(a);let u=0;return n.forEach(h=>{for(let g=0;g<h.length;g++)o[u++]=h[g]}),new Fa(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(s){let e;try{e=JSON.parse(s)}catch{return null}return SD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function GD(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function qT(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(s,e){return e}class Tn{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||KD}}let sd=null;function $D(s){return!U0(s)||s.length<2?s:qT(s)}function FT(){if(sd)return sd;const s=[];s.push(new Tn("bucket")),s.push(new Tn("generation")),s.push(new Tn("metageneration")),s.push(new Tn("name","fullPath",!0));function e(u,h){return $D(h)}const n=new Tn("name");n.xform=e,s.push(n);function a(u,h){return h!==void 0?Number(h):h}const o=new Tn("size");return o.xform=a,s.push(o),s.push(new Tn("timeCreated")),s.push(new Tn("updated")),s.push(new Tn("md5Hash",null,!0)),s.push(new Tn("cacheControl",null,!0)),s.push(new Tn("contentDisposition",null,!0)),s.push(new Tn("contentEncoding",null,!0)),s.push(new Tn("contentLanguage",null,!0)),s.push(new Tn("contentType",null,!0)),s.push(new Tn("metadata","customMetadata",!0)),sd=s,sd}function QD(s,e){function n(){const a=s.bucket,o=s.fullPath,u=new Yn(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function YD(s,e,n){const a={};a.type="file";const o=n.length;for(let u=0;u<o;u++){const h=n[u];a[h.local]=h.xform(a,e[h.server])}return QD(a,s),a}function GT(s,e,n){const a=HT(e);return a===null?null:YD(s,a,n)}function XD(s,e,n,a){const o=HT(e);if(o===null||!U0(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(p=>{const b=s.bucket,w=s.fullPath,T="/b/"+h(b)+"/o/"+h(w),C=B0(T,n,a),B=LT({alt:"media",token:p});return C+B})[0]}function WD(s,e){const n={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class KT{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(s){if(!s)throw L0()}function JD(s,e){function n(a,o){const u=GT(s,o,e);return $T(u!==null),u}return n}function ZD(s,e){function n(a,o){const u=GT(s,o,e);return $T(u!==null),XD(u,o,s.host,s._protocol)}return n}function QT(s){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=dD():o=hD():n.getStatus()===402?o=uD(s.bucket):n.getStatus()===403?o=fD(s.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function e3(s){const e=QT(s);function n(a,o){let u=e(a,o);return a.getStatus()===404&&(u=cD(s.path)),u.serverResponse=o.serverResponse,u}return n}function t3(s,e,n){const a=e.fullServerUrl(),o=B0(a,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,g=new KT(o,u,ZD(s,n),h);return g.errorHandler=e3(e),g}function n3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function s3(s,e,n){const a=Object.assign({},n);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=n3(null,e)),a}function r3(s,e,n,a,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function g(){let G="";for(let X=0;X<2;X++)G=G+Math.random().toString().slice(2);return G}const y=g();h["Content-Type"]="multipart/related; boundary="+y;const p=s3(e,a,o),b=WD(p,n),w="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+y+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+y+"--",C=Fa.getBlob(w,a,T);if(C===null)throw bD();const B={name:p.fullPath},H=B0(u,s.host,s._protocol),L="POST",J=s.maxUploadRetryTime,te=new KT(H,L,JD(s,n),J);return te.urlParams=B,te.headers=h,te.body=C.uploadData(),te.errorHandler=QT(e),te}class a3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o,u){if(this.sent_)throw Ic("cannot .send() more than once");if(wr(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i3 extends a3{initXhr(){this.xhr_.responseType="text"}}function YT(){return new i3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xi(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qT(this._location.path)}get storage(){return this._service}get parent(){const e=FD(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new Xi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wD(e)}}function l3(s,e,n){s._throwIfRoot("uploadBytes");const a=r3(s.storage,s._location,FT(),new Fa(e,!0),n);return s.storage.makeRequestWithTokens(a,YT).then(o=>({metadata:o,ref:s}))}function o3(s){s._throwIfRoot("getDownloadURL");const e=t3(s.storage,s._location,FT());return s.storage.makeRequestWithTokens(e,YT).then(n=>{if(n===null)throw vD();return n})}function c3(s,e){const n=GD(s._location.path,e),a=new Yn(s._location.bucket,n);return new Xi(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(s){return/^[A-Za-z]+:\/\//.test(s)}function h3(s,e){return new Xi(s,e)}function XT(s,e){if(s instanceof H0){const n=s;if(n._bucket==null)throw xD();const a=new Xi(n,n._bucket);return e!=null?XT(a,e):a}else return e!==void 0?c3(s,e):s}function d3(s,e){if(e&&u3(e)){if(s instanceof H0)return h3(s,e);throw Ip("To use ref(service, url), the first argument must be a Storage instance.")}else return XT(s,e)}function fw(s,e){const n=e==null?void 0:e[VT];return n==null?null:Yn.makeFromBucketSpec(n,s)}function f3(s,e,n,a={}){s.host=`${e}:${n}`;const o=wr(e);o&&(Xd(`https://${s.host}/b`),Wd("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:Xw(u,s.app.options.projectId))}class H0{constructor(e,n,a,o,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=MT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lD,this._maxUploadRetryTime=oD,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=fw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=fw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xi(this,e)}_makeRequest(e,n,a,o,u=!0){if(this._deleted)return new ND(PT());{const h=OD(e,this._appId,a,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const mw="@firebase/storage",gw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="storage";function ea(s,e,n){return s=pt(s),l3(s,e,n)}function ta(s){return s=pt(s),o3(s)}function na(s,e){return s=pt(s),d3(s,e)}function m3(s=Jd(),e){s=pt(s);const a=uu(s,WT).getImmediate({identifier:e}),o=Hp("storage");return o&&g3(a,...o),a}function g3(s,e,n,a={}){f3(s,e,n,a)}function p3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new H0(n,a,o,e,el)}function y3(){Ja(new ra(WT,p3,"PUBLIC").setMultipleInstances(!0)),ds(mw,gw,""),ds(mw,gw,"esm2020")}y3();const q0={apiKey:"AIzaSyDKGE2qdxuV9ugYga8Luw3QzYRwvD3xM5o",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},Sf=Gp(q0),Ee=jI(Sf),yd=ru(Sf),x3=kT(Sf),yr=m3(Sf),JT=Object.freeze(Object.defineProperty({__proto__:null,auth:yd,db:Ee,firebaseConfig:q0,functions:x3,storage:yr},Symbol.toStringTag,{value:"Module"})),ZT=R.createContext(void 0),b3=({children:s})=>{const[e,n]=R.useState(null),[a,o]=R.useState(!0);R.useEffect(()=>{const g=gT(yd,async y=>{if(y)try{const p=it(Ee,"users",y.uid),b=await mr(p);if(b.exists())n({id:b.id,...b.data()});else if(y.email){const w=an(wt(Ee,"users"),gs("email","==",y.email)),T=await ai(w);if(T.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),n(null);else{const C=T.docs[0].data();n({id:T.docs[0].id,...C})}}else n(null)}catch(p){console.error("Error fetching user data:",p),n(null)}else n(null);o(!1)});return()=>g()},[]);const u=async(g,y)=>{try{if(!y)throw new Error("Password is required for Firebase Auth");let p=g;if(!g.includes("@"))try{const{httpsCallable:b}=await zc(async()=>{const{httpsCallable:H}=await Promise.resolve().then(()=>OT);return{httpsCallable:H}},[]),{functions:w}=await zc(async()=>{const{functions:H}=await Promise.resolve().then(()=>JT);return{functions:H}},void 0);p=(await b(w,"getEmailByUsername")({username:g})).data.email}catch(b){console.error("Username lookup failed:",b);const w=an(wt(Ee,"users"),gs("username","==",g)),T=await ai(w);if(T.empty)return console.error("Username not found"),!1;const C=T.docs[0].data();C.email&&(p=C.email)}return await hT(yd,p,y),!0}catch(p){return console.error("Login failed:",p),!1}},h=async()=>{try{await pT(yd),n(null)}catch(g){console.error("Logout failed:",g)}};return l.jsx(ZT.Provider,{value:{user:e,login:u,logout:h,isAuthenticated:!!e,loading:a},children:!a&&s})},ps=()=>{const s=R.useContext(ZT);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},eE=R.createContext(void 0),v3=({toasts:s,removeToast:e})=>l.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:s.map(n=>l.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[l.jsxs("div",{className:"p-4 flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:l.jsx(Uc,{className:"h-4 w-4 text-green-600"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900",children:n.message}),n.subMessage&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.subMessage})]}),l.jsx("button",{onClick:()=>e(n.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Wt,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"h-1 w-full bg-gray-100",children:l.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),l.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},n.id))}),_3=s=>{const e=new Date(s),a=Math.floor((new Date().getTime()-e.getTime())/1e3);return a<60?"Va xong":a<3600?`${Math.floor(a/60)} pht trc`:a<86400?`${Math.floor(a/3600)} gi trc`:`${Math.floor(a/86400)} ngy trc`},w3=({children:s})=>{const{user:e}=ps(),[n,a]=R.useState([]),[o,u]=R.useState([]);R.useEffect(()=>{const w=setTimeout(()=>{h("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(w)},[]),R.useEffect(()=>{if(!e){u([]);return}const w=an(wt(Ee,"notifications"),gs("receivers","array-contains",e.id),So("createdAt","desc")),T=br(w,C=>{const B=C.docs.map(H=>{var J;const L=H.data();return{id:H.id,type:L.type,user:L.senderName,avatar:L.senderAvatar,content:L.message.replace(L.senderName,"").trim(),time:_3(L.createdAt),isRead:L.isRead,fileType:(J=L.metadata)==null?void 0:J.fileType,targetPath:L.targetPath}});u(B)});return()=>T()},[e]);const h=(w,T="",C="success")=>{const B=Date.now().toString();a(H=>[...H,{id:B,message:w,subMessage:T,type:C}]),setTimeout(()=>{a(H=>H.filter(L=>L.id!==B))},3e3)},g=w=>{a(T=>T.filter(C=>C.id!==w))},y=async w=>{u(T=>T.map(C=>C.id===w?{...C,isRead:!0}:C));try{const T=it(Ee,"notifications",w);await ca(T,{isRead:!0})}catch(T){console.error("Error marking notification as read:",T)}},p=async()=>{u(T=>T.map(C=>({...C,isRead:!0}))),o.filter(T=>!T.isRead).map(T=>T.id).forEach(async T=>{try{await ca(it(Ee,"notifications",T),{isRead:!0})}catch(C){console.error(C)}})},b=o.filter(w=>!w.isRead).length;return l.jsxs(eE.Provider,{value:{addToast:h,notifications:o,markAsRead:y,markAllAsRead:p,unreadCount:b},children:[s,l.jsx(v3,{toasts:n,removeToast:g})]})},Nr=()=>{const s=R.useContext(eE);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},N3=({isOpen:s,onClose:e})=>{const[n,a]=R.useState(""),[o,u]=R.useState(""),[h,g]=R.useState(""),[y,p]=R.useState(!1),[b,w]=R.useState(!1),[T,C]=R.useState(!1),{addToast:B}=Nr();if(!s)return null;const H=async L=>{if(L.preventDefault(),o!==h){B("Mt khu mi khng khp!","error");return}if(o.length<6){B("Mt khu mi phi c t nht 6 k t.","error");return}C(!0);try{const te=ru().currentUser;if(te&&te.email){const G=di.credential(te.email,n);await oT(te,G),await dT(te,o),B("i mt khu thnh cng!","success"),e(),a(""),u(""),g("")}else B("Khng tm thy thng tin ngi dng.","error")}catch(J){console.error("Error changing password:",J),J.code==="auth/wrong-password"?B("Mt khu hin ti khng ng.","error"):J.code==="auth/too-many-requests"?B("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):B(`Li: ${J.message}`,"error")}finally{C(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(ao,{className:"h-5 w-5"}),"i mt khu"]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6",children:l.jsxs("form",{onSubmit:H,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:y?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:n,onChange:L=>a(L.target.value),placeholder:"Nhp mt khu hin ti..."}),l.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:y?l.jsx(Zg,{className:"h-4 w-4"}):l.jsx(Yc,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:b?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:L=>u(L.target.value),placeholder:"Nhp mt khu mi..."}),l.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:b?l.jsx(Zg,{className:"h-4 w-4"}):l.jsx(Yc,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),l.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:h,onChange:L=>g(L.target.value),placeholder:"Nhp li mt khu mi..."})]}),l.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsx("button",{type:"submit",disabled:T,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:T?l.jsxs(l.Fragment,{children:[l.jsx(zw,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Gd,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},T3=()=>{const s=li(),e=Ms(),{user:n,logout:a}=ps(),{notifications:o,unreadCount:u,markAllAsRead:h,markAsRead:g}=Nr(),[y,p]=R.useState(!1),[b,w]=R.useState(!1),[T,C]=R.useState(!1),[B,H]=R.useState(""),[L,J]=R.useState(""),te=R.useRef(null),G=R.useRef(null);if(R.useEffect(()=>{const N=A=>{te.current&&!te.current.contains(A.target)&&p(!1),G.current&&!G.current.contains(A.target)&&w(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]),R.useEffect(()=>{(async()=>{try{const A=it(Ee,"app_settings","system_logo"),P=await mr(A);P.exists()&&P.data().imageUrl&&H(P.data().imageUrl);const O=it(Ee,"app_settings","certification_logo"),M=await mr(O);M.exists()&&M.data().imageUrl&&J(M.data().imageUrl)}catch(A){console.error("Error fetching logo:",A)}})()},[]),s.pathname==="/login")return null;const X=async()=>{await a(),e("/login")},de=N=>N?N.charAt(0).toUpperCase():"U",pe=N=>{switch(N){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},j=N=>{switch(N){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return l.jsxs("header",{className:`sticky top-0 z-50 w-full ${j(n==null?void 0:n.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-20",children:[l.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[l.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:B?l.jsx("img",{src:B,alt:"Logo",className:"h-8 w-8 object-contain"}):l.jsx(Bp,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:qw}),l.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),L&&l.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:l.jsx("img",{src:L,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[l.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[l.jsx(Zi,{className:"h-5 w-5 text-white/70"}),l.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),l.jsxs("div",{className:"relative",ref:G,children:[l.jsxs("button",{onClick:()=>w(!b),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${u>0?"animate-wiggle":""}`,children:[l.jsx(Av,{className:`h-6 w-6 ${b?"text-white":""} group-hover:scale-110 transition-transform`}),u>0&&l.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:u})]}),b&&l.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[l.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),u>0&&l.jsxs("button",{onClick:h,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[l.jsx(Uc,{className:"h-3 w-3"})," nh du  c"]})]}),l.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[o.map(N=>l.jsxs("div",{onClick:()=>{g(N.id),N.targetPath&&(e(N.targetPath),w(!1))},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${N.isRead?"bg-white":"bg-blue-50/40"}`,children:[l.jsxs("div",{className:"flex-shrink-0 pt-1",children:[N.avatar?l.jsx("img",{src:N.avatar,alt:N.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):l.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${N.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:de(N.user)}),l.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[N.type==="upload"&&l.jsx(He,{className:"h-3 w-3 text-emerald-500"}),N.type==="comment"&&l.jsx(Ga,{className:"h-3 w-3 text-blue-500"})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[l.jsx("span",{className:"font-bold",children:N.user})," ",N.content]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-400 font-medium",children:N.time}),N.fileType&&l.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:N.fileType}),!N.isRead&&l.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},N.id)),o.length===0&&l.jsxs("div",{className:"p-8 text-center text-gray-400",children:[l.jsx(Av,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),l.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),l.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:l.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),l.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:te,children:[l.jsxs("button",{onClick:()=>p(!y),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${y?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[l.jsxs("div",{className:"relative",children:[n!=null&&n.avatar?l.jsx("img",{src:n.avatar,alt:n.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):l.jsx("div",{className:`h-9 w-9 rounded-full ${pe(n==null?void 0:n.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:n?de(n.fullName):l.jsx(zS,{className:"h-6 w-6"})}),l.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),n?l.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[l.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:n.fullName}),l.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:n.roleLabel})]}):l.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:l.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),l.jsx(DS,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${y?"rotate-180":""}`})]}),y&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[l.jsx("p",{className:"text-sm font-bold text-gray-900",children:(n==null?void 0:n.fullName)||"Khch"}),l.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.roleLabel})]}),l.jsxs("div",{className:"p-1.5",children:[l.jsxs("button",{onClick:()=>p(!1),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:l.jsx(Zl,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),l.jsxs("button",{onClick:()=>{p(!1),C(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:l.jsx(RA,{className:"h-4 w-4"})}),"i mt khu"]})]}),l.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),l.jsx("div",{className:"p-1.5",children:l.jsxs("button",{onClick:X,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:l.jsx(fA,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),l.jsx(N3,{isOpen:T,onClose:()=>C(!1)})]})},E3=({data:s,onClick:e})=>{const{id:n,title:a,description:o,icon:u,colorClass:h,bgClass:g,hoverClass:y,stats:p}=s;return l.jsxs("div",{onClick:()=>e(n),className:`
        group relative overflow-hidden rounded-2xl border border-gray-100 bg-white p-8 shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-2 hover:shadow-xl
        ${y}
      `,children:[l.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${g} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),l.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:`mb-6 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${g} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:l.jsx(u,{className:`h-8 w-8 ${h}`})}),l.jsx("h3",{className:"mb-3 text-2xl font-bold text-gray-800 group-hover:text-gray-900 tracking-tight",children:a}),l.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:o})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[p&&l.jsx("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all",children:p}),l.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",l.jsx(bd,{className:"h-4 w-4"})]})]})]})]})},j3=()=>{var h;const s=Ms(),{user:e,isAuthenticated:n}=ps(),[a,o]=ir.useState([]);if(R.useEffect(()=>{const g=an(wt(Ee,"classes")),y=br(g,async p=>{const b=p.docs.map(L=>({id:L.id,...L.data()})),w=an(wt(Ee,"users"),gs("role","in",["teacher","head_teacher"])),C=(await ai(w)).docs.map(L=>L.data()),B=L=>L.toLowerCase().trim().replace(/\s+/g," "),H=b.map(L=>{const J=new Set,te=B(L.id),G=B(L.name);C.forEach(de=>{if(!de.accessScope)return;const pe=B(de.accessScope);(pe===te||pe===G||G.includes(pe)||pe.includes(G))&&J.add(de.fullName)});const X=Array.from(J);return{...L,teachers:X.length>0?X:["Cha phn cng"],teacher:X.length>0?X.join(", "):"Cha phn cng"}});H.sort((L,J)=>L.name.localeCompare(J.name)),o(H)});return()=>y()},[]),R.useEffect(()=>{n||s("/login")},[n,s]),!e)return null;const u=g=>{var y;if(g==="van-ban-chi-dao")s("/van-ban-chi-dao");else if(g==="van-ban-truong")s("/van-ban-truong");else if(g==="quan-tri-he-thong")s("/quan-tri-he-thong");else if(g==="to-van-phong-ke-hoach")s("/to-van-phong-ke-hoach");else if(g==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}s("/to-van-phong-thuc-don")}else if(g==="to-chuyen-mon-ke-hoach")s("/to-chuyen-mon-ke-hoach");else if(g.startsWith("class-")){const p=g.replace("class-","");if(e.role==="teacher"){const b=a.find(T=>T.id===p),w=(y=e.accessScope)==null?void 0:y.toLowerCase().trim();if(b&&w!==p.toLowerCase()&&w!==b.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}s(`/class/${p}`)}else console.log(`Navigating to category: ${g}`),alert(`ang truy cp vo phn h: ${g} (ang pht trin)`)};return l.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 pt-8 pb-8 mb-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Uw,{className:"h-5 w-5 text-yellow-500"}),l.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),l.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["Xin cho c: ",e.fullName]}),l.jsxs("p",{className:"text-gray-500 mt-1",children:["Vai tr: ",l.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",l.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 xl:gap-8",children:[l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),l.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(eA,{className:"h-7 w-7"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors",children:"QUN L VN BN CHUNG"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),l.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 mt-2",children:[l.jsxs("div",{onClick:()=>s("/van-ban-chi-dao"),className:"bg-white p-6 cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:l.jsx(lA,{className:"h-6 w-6"})}),l.jsx(bd,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),l.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-blue-700",children:"Vn bn Cp trn"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"S/B GD"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"UBND"})]})]}),l.jsxs("div",{onClick:()=>s("/van-ban-truong"),className:"bg-white p-6 cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:l.jsx(Hw,{className:"h-6 w-6"})}),l.jsx(bd,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),l.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-emerald-700",children:"Vn bn Ni b"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"K hoch"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Quyt nh"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),l.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(Jg,{className:"h-7 w-7"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors",children:"T VN PHNG"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row border-t border-indigo-50 mt-4",children:[l.jsxs("div",{onClick:()=>u("to-van-phong-ke-hoach"),className:"flex-1 p-6 cursor-pointer hover:bg-indigo-50/60 transition-colors border-b sm:border-b-0 sm:border-r border-indigo-50 group/item",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg shadow-sm",children:l.jsx(He,{className:"h-5 w-5"})})}),l.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-indigo-700",children:"K HOCH & BO CO"}),l.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"K hoch ti chnh, Y t, Hot ng chung"})]}),l.jsxs("div",{onClick:()=>u("to-van-phong-thuc-don"),className:"flex-1 p-6 cursor-pointer hover:bg-purple-50/60 transition-colors group/item",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:l.jsx(ep,{className:"h-5 w-5"})})}),l.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-purple-700",children:"THC N & BN TR"}),l.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),l.jsxs("div",{className:"p-8 pb-2 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(Bp,{className:"h-8 w-8"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors",children:"T CHUYN MN"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),l.jsx("div",{className:"px-6 pb-4 relative z-10",children:l.jsxs("div",{onClick:()=>u("to-chuyen-mon-ke-hoach"),className:"flex items-center justify-between p-3 rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg text-amber-600 shadow-sm",children:l.jsx(ES,{className:"h-5 w-5"})}),l.jsx("div",{children:l.jsx("h4",{className:"text-sm font-bold text-gray-800 group-hover/plan:text-amber-700",children:"K hoch T & Bin bn"})})]}),l.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50/50 border-t border-amber-100 p-6 pt-4",children:[l.jsx("div",{className:"mb-4",children:l.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-3",children:"LP HC CA TI"})}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.map(g=>{var y;if(e.role==="teacher"){const p=(y=e.accessScope)==null?void 0:y.toLowerCase().trim(),b=g.id.toLowerCase(),w=g.name.toLowerCase();if(p!==b&&p!==w)return null}return l.jsxs("button",{onClick:()=>u(`class-${g.id}`),className:"relative group/btn flex flex-col items-center justify-center py-2 px-1 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all",children:[l.jsx("span",{className:"text-xs font-bold text-gray-700 group-hover/btn:text-amber-800",children:g.name}),g.newFiles>0&&l.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},g.id)})})]})]}),(e.role==="admin"||e.role==="vice_principal"&&((h=e.permissions)==null?void 0:h.includes("access_system_admin")))&&FA.map(g=>l.jsx(E3,{data:g,onClick:u},g.id))]})})]})},S3=s=>{try{const e=new URL(s),n=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>n.endsWith(o))}catch{const n=s.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>n.endsWith(o))}},Ao=s=>!s||s==="#"?"#":s.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":S3(s)?`https://docs.google.com/viewer?url=${encodeURIComponent(s)}&embedded=true`:s,Yg=({children:s,colorClass:e})=>l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),A3=()=>{var me;const s=Ms(),{addToast:e}=Nr(),[n,a]=R.useState([]),[o,u]=R.useState(""),[h,g]=R.useState("Tt c"),{user:y}=ps(),p=(me=y==null?void 0:y.permissions)==null?void 0:me.includes("manage_documents"),[b,w]=R.useState(null),[T,C]=R.useState(!1),[B,H]=R.useState(!1),[L,J]=R.useState(!1),[te,G]=R.useState(!1),[X,de]=R.useState(null),[pe,j]=R.useState(1),[N,A]=R.useState({}),[P,O]=R.useState(null),[M,I]=R.useState("");ir.useEffect(()=>{const z=an(wt(Ee,"directive_documents"),So("ngayBanHanh","desc")),D=br(z,se=>{const fe=[];se.forEach(Le=>{fe.push({id:Le.id,...Le.data()})}),a(fe)});return()=>D()},[]);const De=R.useMemo(()=>n.filter(z=>{const D=z.trichYeu.toLowerCase().includes(o.toLowerCase())||z.soKyHieu.toLowerCase().includes(o.toLowerCase()),se=h==="Tt c"||z.coQuanBanHanh===h;return D&&se}),[n,o,h]),Pe=z=>{de(z),G(!0)},ee=async()=>{if(X){try{await sl(it(Ee,"directive_documents",X.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(z){console.error("Error deleting document:",z),e("Li xa ti liu","Khng th xa ti liu ny.","error")}G(!1),de(null)}},ae=z=>{w(z),j(1),C(!0)},xe=()=>{A({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),O(null),I(""),J(!1),H(!0)},Re=z=>{A({...z}),J(!0),O(null),I(z.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),H(!0)},ue=z=>{if(z.target.files&&z.target.files[0]){const D=z.target.files[0];O(D),I(D.name)}},k=z=>{z.fileDinhKemUrl&&z.fileDinhKemUrl!=="#"?window.open(z.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},F=()=>{O(null),I("")},he=async z=>{if(z.preventDefault(),!(!N.trichYeu||!N.soKyHieu))try{let D=N.fileDinhKemUrl||"#";if(P){const se=na(yr,`directive_documents/${Date.now()}_${P.name}`),fe=await ea(se,P);D=await ta(fe.ref)}else!M&&!N.fileDinhKemUrl&&(D="#");L&&N.id?(await ca(it(Ee,"directive_documents",N.id),{...N,fileDinhKemUrl:D}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await rl(wt(Ee,"directive_documents"),{...N,fileDinhKemUrl:D,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),H(!1)}catch(D){console.error("Error saving document:",D),e("Li lu d liu","Khng th lu vn bn ny.","error")}},Q=z=>{switch(z){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[l.jsx(Up,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(He,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CH O"})]})]}),p&&l.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[l.jsx(io,{className:"h-5 w-5"}),l.jsx("span",{children:"Thm vn bn mi"})]})]}),l.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(z=>l.jsx("button",{onClick:()=>g(z),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${h===z?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:z},z))}),l.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:l.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Zi,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:z=>u(z.target.value)})]})})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:De.length>0?De.map(z=>l.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>ae(z),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:l.jsx(He,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:z.trichYeu}),z.tomTatNoiDung&&l.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:z.tomTatNoiDung})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:z.soKyHieu}),l.jsx(Yg,{colorClass:"bg-yellow-100 text-yellow-800",children:z.loaiVanBan})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lc,{className:"h-3 w-3"}),l.jsx("span",{className:Q(z.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:z.coQuanBanHanh})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ki,{className:"h-3 w-3"}),new Date(z.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:D=>D.stopPropagation(),children:[l.jsx("button",{onClick:()=>ae(z),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:l.jsx(Yc,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>k(z),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-4 w-4"})}),p&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Re(z),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:l.jsx(lo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Pe(z),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:l.jsx(cr,{className:"h-4 w-4"})})]})]})})]},z.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(He,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("span",{children:["Hin th ",De.length," vn bn"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),te&&X&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',X.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),T&&b&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(He,{className:"h-5 w-5"})," Chi tit vn bn"]}),l.jsx("button",{onClick:()=>C(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),"   ",l.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[l.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[l.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:b.trichYeu}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.jsx(Yg,{colorClass:"bg-blue-100 text-blue-800",children:b.coQuanBanHanh}),l.jsx(Yg,{colorClass:"bg-yellow-100 text-yellow-800",children:b.loaiVanBan}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[l.jsx(Ki,{className:"h-3 w-3"})," ",new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),l.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:b.soKyHieu})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),l.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Lc,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),l.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:b.coQuanBanHanh})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:b.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),l.jsxs("button",{onClick:()=>k(b),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[l.jsx(Xn,{className:"h-4 w-4"})," Ti v my"]})]})]}),l.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[l.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[l.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),l.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>j(z=>Math.max(.5,z-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:l.jsx(Qd,{className:"h-4 w-4"})}),l.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(pe*100),"%"]}),l.jsx("button",{onClick:()=>j(z=>Math.min(2,z+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:l.jsx($d,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),l.jsx("button",{onClick:()=>j(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:l.jsx(Bw,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:l.jsx("div",{className:"absolute inset-0 w-full h-full",children:b.fileDinhKemUrl&&b.fileDinhKemUrl!=="#"?l.jsx("iframe",{src:Ao(b.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[L?l.jsx(lo,{className:"h-5 w-5"}):l.jsx(io,{className:"h-5 w-5"}),L?"Cp nht vn bn":"Thm vn bn mi"]}),l.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"documentForm",onSubmit:he,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:N.trichYeu||"",onChange:z=>A({...N,trichYeu:z.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:N.soKyHieu||"",onChange:z=>A({...N,soKyHieu:z.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:N.ngayBanHanh||"",onChange:z=>A({...N,ngayBanHanh:z.target.value})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:N.coQuanBanHanh||"B GD&T",onChange:z=>A({...N,coQuanBanHanh:z.target.value}),children:[l.jsx("option",{value:"B GD&T",children:"B GD&T"}),l.jsx("option",{value:"S GD&T",children:"S GD&T"}),l.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),l.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:N.loaiVanBan||"Cng vn",onChange:z=>A({...N,loaiVanBan:z.target.value}),children:[l.jsx("option",{value:"Cng vn",children:"Cng vn"}),l.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),l.jsx("option",{value:"Thng bo",children:"Thng bo"}),l.jsx("option",{value:"K hoch",children:"K hoch"}),l.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),l.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:N.tomTatNoiDung||"",onChange:z=>A({...N,tomTatNoiDung:z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),M?l.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:l.jsx(He,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:M}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(lr,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),l.jsx("button",{type:"button",onClick:F,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:l.jsx(Wt,{className:"h-5 w-5"})})]}):l.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ue}),l.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),l.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[l.jsx(rn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),l.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[l.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:l.jsx("span",{children:"Ti file ln"})}),l.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[l.jsx(Gd,{className:"h-4 w-4"})," ",L?"Lu thay i":"To mi"]})]})]})})]})},pw=({children:s,colorClass:e})=>l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),C3=()=>{var me;const s=Ms(),{addToast:e}=Nr(),[n,a]=R.useState([]),[o,u]=R.useState(""),[h,g]=R.useState("Tt c"),{user:y}=ps(),p=(me=y==null?void 0:y.permissions)==null?void 0:me.includes("manage_documents"),[b,w]=R.useState(null),[T,C]=R.useState(!1),[B,H]=R.useState(!1),[L,J]=R.useState(!1),[te,G]=R.useState(!1),[X,de]=R.useState(null),[pe,j]=R.useState(1),[N,A]=R.useState({}),[P,O]=R.useState(null),[M,I]=R.useState("");ir.useEffect(()=>{const z=an(wt(Ee,"school_documents"),So("ngayBanHanh","desc")),D=br(z,se=>{const fe=[];se.forEach(Le=>{fe.push({id:Le.id,...Le.data()})}),a(fe)});return()=>D()},[]);const De=R.useMemo(()=>n.filter(z=>{const D=z.trichYeu.toLowerCase().includes(o.toLowerCase())||z.soKyHieu.toLowerCase().includes(o.toLowerCase()),se=h==="Tt c"||z.loaiVanBan===h;return D&&se}),[n,o,h]),Pe=z=>{de(z),G(!0)},ee=async()=>{if(X){try{await sl(it(Ee,"school_documents",X.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(z){console.error("Error deleting document:",z),e("Li xa ti liu","Khng th xa ti liu ny.","error")}G(!1),de(null)}},ae=z=>{w(z),j(1),C(!0)},xe=()=>{A({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),O(null),I(""),J(!1),H(!0)},Re=z=>{A({...z}),J(!0),O(null),I(z.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),H(!0)},ue=z=>{if(z.target.files&&z.target.files[0]){const D=z.target.files[0];O(D),I(D.name)}},k=z=>{z.fileDinhKemUrl&&z.fileDinhKemUrl!=="#"?window.open(z.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},F=()=>{O(null),I("")},he=async z=>{if(z.preventDefault(),!(!N.trichYeu||!N.soKyHieu))try{let D=N.fileDinhKemUrl||"#";if(P){const se=na(yr,`school_documents/${Date.now()}_${P.name}`),fe=await ea(se,P);D=await ta(fe.ref)}else!M&&!N.fileDinhKemUrl&&(D="#");L&&N.id?(await ca(it(Ee,"school_documents",N.id),{...N,fileDinhKemUrl:D}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await rl(wt(Ee,"school_documents"),{...N,fileDinhKemUrl:D,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),H(!1)}catch(D){console.error("Error saving document:",D),e("Li lu d liu","Khng th lu vn bn ny.","error")}},Q=z=>{switch(z){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[l.jsx(Up,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(Lc,{className:"h-6 w-6 text-emerald-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CA TRNG"})]})]}),p&&l.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[l.jsx(io,{className:"h-5 w-5"}),l.jsx("span",{children:"Thm vn bn mi"})]})]}),l.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(z=>l.jsx("button",{onClick:()=>g(z),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${h===z?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:z},z))}),l.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:l.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Zi,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:z=>u(z.target.value)})]})})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:De.length>0?De.map(z=>l.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>ae(z),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:l.jsx(He,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:z.trichYeu}),z.tomTatNoiDung&&l.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:z.tomTatNoiDung})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:z.soKyHieu}),l.jsx(pw,{colorClass:Q(z.loaiVanBan),children:z.loaiVanBan})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lc,{className:"h-3 w-3"}),l.jsx("span",{children:z.coQuanBanHanh})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ki,{className:"h-3 w-3"}),new Date(z.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:D=>D.stopPropagation(),children:[l.jsx("button",{onClick:()=>ae(z),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:l.jsx(Yc,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>k(z),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-4 w-4"})}),p&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Re(z),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:l.jsx(lo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Pe(z),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:l.jsx(cr,{className:"h-4 w-4"})})]})]})})]},z.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(He,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("span",{children:["Hin th ",De.length," vn bn"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),te&&X&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',X.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),T&&b&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(He,{className:"h-5 w-5"})," Chi tit vn bn"]}),l.jsx("button",{onClick:()=>C(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[l.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[l.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:b.trichYeu}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.jsx(pw,{colorClass:Q(b.loaiVanBan),children:b.loaiVanBan}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[l.jsx(Ki,{className:"h-3 w-3"})," ",new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),l.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:b.soKyHieu})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),l.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Lc,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),l.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:b.coQuanBanHanh})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:b.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),l.jsxs("button",{onClick:()=>k(b),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[l.jsx(Xn,{className:"h-4 w-4"})," Ti v my"]})]})]}),l.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[l.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[l.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),l.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>j(z=>Math.max(.5,z-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:l.jsx(Qd,{className:"h-4 w-4"})}),l.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(pe*100),"%"]}),l.jsx("button",{onClick:()=>j(z=>Math.min(2,z+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:l.jsx($d,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),l.jsx("button",{onClick:()=>j(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:l.jsx(Bw,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:l.jsx("div",{className:"absolute inset-0 w-full h-full",children:b.fileDinhKemUrl&&b.fileDinhKemUrl!=="#"?l.jsx("iframe",{src:Ao(b.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[L?l.jsx(lo,{className:"h-5 w-5"}):l.jsx(io,{className:"h-5 w-5"}),L?"Cp nht vn bn":"Thm vn bn mi"]}),l.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"documentForm",onSubmit:he,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:N.trichYeu||"",onChange:z=>A({...N,trichYeu:z.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:N.soKyHieu||"",onChange:z=>A({...N,soKyHieu:z.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:N.ngayBanHanh||"",onChange:z=>A({...N,ngayBanHanh:z.target.value})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:N.coQuanBanHanh||"Ban Gim Hiu",onChange:z=>A({...N,coQuanBanHanh:z.target.value}),children:[l.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),l.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),l.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),l.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),l.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:N.loaiVanBan||"K hoch",onChange:z=>A({...N,loaiVanBan:z.target.value}),children:[l.jsx("option",{value:"K hoch",children:"K hoch"}),l.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),l.jsx("option",{value:"Thng bo",children:"Thng bo"}),l.jsx("option",{value:"Bo co",children:"Bo co"}),l.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),l.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:N.tomTatNoiDung||"",onChange:z=>A({...N,tomTatNoiDung:z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),M?l.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:l.jsx(He,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:M}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(lr,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),l.jsx("button",{type:"button",onClick:F,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:l.jsx(Wt,{className:"h-5 w-5"})})]}):l.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ue}),l.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),l.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[l.jsx(rn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),l.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[l.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:l.jsx("span",{children:"Ti file ln"})}),l.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[l.jsx(Gd,{className:"h-4 w-4"})," ",L?"Lu thay i":"To mi"]})]})]})})]})},R3=()=>{const{user:s}=ps(),{addToast:e}=Nr(),[n,a]=R.useState(""),[o,u]=R.useState(""),[h,g]=R.useState(null),[y,p]=R.useState(!1),[b,w]=R.useState(""),[T,C]=R.useState(""),[B,H]=R.useState(null),[L,J]=R.useState(!1),[te,G]=R.useState("/login-background.jpg"),[X,de]=R.useState(""),[pe,j]=R.useState(null),[N,A]=R.useState(!1),[P,O]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const F=it(Ee,"app_settings","login_background"),he=await mr(F);he.exists()&&he.data().imageUrl&&G(he.data().imageUrl);const Q=it(Ee,"app_settings","system_logo"),me=await mr(Q);me.exists()&&me.data().imageUrl&&a(me.data().imageUrl);const z=it(Ee,"app_settings","certification_logo"),D=await mr(z);D.exists()&&D.data().imageUrl&&w(D.data().imageUrl)}catch(F){console.error("Error fetching settings:",F)}finally{O(!1)}})()},[]);const M=k=>{if(k.target.files&&k.target.files[0]){const F=k.target.files[0];if(!F.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(F.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}g(F),u(URL.createObjectURL(F))}},I=async()=>{if(!(!h||!s)){p(!0);try{const k=Date.now(),F=na(yr,`app_settings/system-logo-${k}.png`);await ea(F,h);const he=await ta(F);await dd(it(Ee,"app_settings","system_logo"),{imageUrl:he,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),a(he),u(""),g(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(k){console.error("Error uploading logo:",k),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{p(!1)}}},De=()=>{u(""),g(null)},Pe=k=>{if(k.target.files&&k.target.files[0]){const F=k.target.files[0];if(!F.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(F.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}H(F),C(URL.createObjectURL(F))}},ee=async()=>{if(!(!B||!s)){J(!0);try{const k=Date.now(),F=na(yr,`app_settings/cert-logo-${k}.png`);await ea(F,B);const he=await ta(F);await dd(it(Ee,"app_settings","certification_logo"),{imageUrl:he,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),w(he),C(""),H(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(k){console.error("Error uploading cert logo:",k),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{J(!1)}}},ae=()=>{C(""),H(null)},xe=k=>{if(k.target.files&&k.target.files[0]){const F=k.target.files[0];if(!F.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(F.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}j(F),de(URL.createObjectURL(F))}},Re=async()=>{if(!(!pe||!s)){A(!0);try{const k=Date.now(),F=na(yr,`app_settings/login-background-${k}.jpg`);await ea(F,pe);const he=await ta(F);await dd(it(Ee,"app_settings","login_background"),{imageUrl:he,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),G(he),de(""),j(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(k){console.error("Error uploading:",k),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{A(!1)}}},ue=()=>{de(""),j(null)};return P?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:l.jsx(Dg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Uc,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),l.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:n?l.jsx("img",{src:n,alt:"Current Logo",className:"h-32 w-32 object-contain"}):l.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(rn,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),o&&l.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:l.jsx("img",{src:o,alt:"Preview",className:"h-24 w-24 object-contain"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:I,disabled:!h||y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:y?"ang ti...":"Lu Logo"}),o&&l.jsx("button",{onClick:De,disabled:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),l.jsx("hr",{className:"border-gray-200"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:l.jsx(Dg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Uc,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),l.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:b?l.jsx("img",{src:b,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):l.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(rn,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsx("input",{type:"file",accept:"image/*",onChange:Pe,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),T&&l.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:l.jsx("img",{src:T,alt:"Preview",className:"h-24 w-24 object-contain"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ee,disabled:!B||L,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:L?"ang ti...":"Lu Logo"}),T&&l.jsx("button",{onClick:ae,disabled:L,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),l.jsx("hr",{className:"border-gray-200"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:l.jsx(Dg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Uc,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:l.jsx("img",{src:te,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(rn,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),l.jsx("input",{type:"file",accept:"image/*",onChange:xe,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),l.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(ks,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),X&&l.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),l.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:l.jsx("img",{src:X,alt:"Preview",className:"w-full h-64 object-contain"})})]}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{onClick:Re,disabled:!pe||N,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:N?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):l.jsxs(l.Fragment,{children:[l.jsx(rn,{className:"h-4 w-4"}),"Lu v p dng"]})}),X&&l.jsxs("button",{onClick:ue,disabled:N,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[l.jsx(NA,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx(ks,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-sm text-amber-800",children:[l.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[l.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),l.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),l.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),l.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},I3=()=>{var F,he,Q,me,z;const s=Ms(),{user:e}=ps(),{addToast:n}=Nr(),[a,o]=R.useState("users"),[u,h]=ir.useState([]),[g,y]=ir.useState({}),[p,b]=ir.useState({});ir.useEffect(()=>{var D;e&&(e.role==="admin"||(D=e.permissions)!=null&&D.includes("access_system_admin")||(n("Bn khng c quyn truy cp khu vc ny.","error"),s("/")))},[e,s,n]);const[w,T]=R.useState([]),[C,B]=R.useState(""),[H,L]=R.useState("Tt c"),[J,te]=R.useState(!1),[G,X]=R.useState(!1),[de,pe]=R.useState(!1),[j,N]=R.useState({}),[A,P]=R.useState(""),[O,M]=R.useState(!1);ir.useEffect(()=>{const D=an(wt(Ee,"classes")),se=br(D,fe=>{const Le=fe.docs.map(Qt=>({id:Qt.id,...Qt.data()}));Le.sort((Qt,_n)=>Qt.name.localeCompare(_n.name)),h(Le);const st={},Zt={};Le.forEach(Qt=>{st[Qt.name]=Qt.id,Zt[Qt.id]=Qt.name}),y(st),b(Zt)});return()=>se()},[]),ir.useEffect(()=>{const D=an(wt(Ee,"users")),se=br(D,fe=>{const Le=[];fe.forEach(st=>{Le.push({id:st.id,...st.data()})}),T(Le)});return()=>se()},[]);const I=R.useMemo(()=>w.filter(D=>{const se=D.fullName.toLowerCase().includes(C.toLowerCase())||D.username.toLowerCase().includes(C.toLowerCase())||D.email.toLowerCase().includes(C.toLowerCase()),fe=H==="Tt c"||D.group===H;return se&&fe}),[w,C,H]),De=async D=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await sl(it(Ee,"users",D))}catch(se){console.error("Error deleting user:",se),n("Khng th xa ngi dng. Vui lng th li.","error")}},Pe=()=>{N({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:u.length>0?u[0].id:"choi",permissions:[]}),P(""),X(!1),pe(!1),te(!0)},ee=D=>{N({...D}),X(!0),pe(!1),P(""),te(!0)},ae=D=>{const se=D.target.value;let fe="",Le=j.group,st="teacher";se==="Hiu Trng"?(fe="Ton h thng",Le="Ban Gim Hiu",st="admin"):se==="Ph Hiu Trng"?(fe="Ton trng",Le="Ban Gim Hiu",st="vice_principal"):se==="T trng chuyn mn"?(fe="Ton b T chuyn mn",Le="T Chuyn Mn",st="head_teacher"):se==="T ph chuyn mn"?(fe="Ton b T chuyn mn",Le="T Chuyn Mn",st="vice_head_teacher"):se==="Gio vin"?(fe=u.length>0?u[0].id:"choi",Le="T Chuyn Mn",st="teacher"):se==="T trng t vn phng"?(fe="Ton b T Vn phng",Le="T Vn Phng",st="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(se)&&(fe="Khng gian T Vn phng",Le="T Vn Phng",st="staff"),N({...j,role:st,roleLabel:se,accessScope:fe,group:Le,permissions:j.permissions||[]})},xe=async D=>{if(D.preventDefault(),!(!j.username||!j.fullName||!j.email)){M(!0);try{if(G&&j.id){const se=Object.fromEntries(Object.entries(j).filter(([fe,Le])=>Le!==void 0));if(await ca(it(Ee,"users",j.id),se),de&&A)if(e&&j.id===e.id){const{updatePassword:fe}=await zc(async()=>{const{updatePassword:st}=await Promise.resolve().then(()=>z6);return{updatePassword:st}},void 0),Le=ru();Le.currentUser&&(await fe(Le.currentUser,A),n(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:fe}=await zc(async()=>{const{httpsCallable:Zt}=await Promise.resolve().then(()=>OT);return{httpsCallable:Zt}},void 0),{functions:Le}=await zc(async()=>{const{functions:Zt}=await Promise.resolve().then(()=>JT);return{functions:Zt}},void 0),st=fe(Le,"adminResetPassword");n("ang gi yu cu i mt khu...","info"),await st({targetUserId:j.id,newPassword:A}),n(` i mt khu cho user ${j.username} thnh cng!`,"success")}catch(fe){console.error("Error calling adminResetPassword:",fe),n(`Li i mt khu: ${fe.message}`,"error")}else n("Cp nht thng tin h s thnh cng!","success")}else{let se="";try{const fe=Gp(q0,"SecondaryApp"),Le=ru(fe);se=(await uT(Le,j.email,A)).user.uid,await y4(fe)}catch(fe){console.error("Auth creation error:",fe),fe.code==="auth/email-already-in-use"?n("Email ny  c s dng bi ti khon khc.","error"):n(`Li to ti khon Auth: ${fe.message}`,"error"),M(!1);return}await dd(it(Ee,"users",se),{...j,id:se,createdAt:new Date().toISOString()}),n(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}te(!1)}catch(se){console.error("Error saving user:",se),n("Li khi lu d liu.","error")}finally{M(!1)}}},Re=async D=>{const se=w.find(fe=>fe.id===D);if(se)try{const fe=se.status==="active"?"inactive":"active";await ca(it(Ee,"users",D),{status:fe}),n(` ${fe==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(fe){console.error("Error updating status:",fe),n("Khng th cp nht trng thi.","error")}},ue=D=>D.includes("Hiu Trng")||D.includes("Admin")?"bg-red-100 text-red-700 border-red-200":D.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":D.includes("T trng")||D.includes("T ph")||D.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",k=()=>{const D=j.role||"";return D==="admin"?l.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[l.jsx(Jl,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[l.jsx(ks,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):D==="vice_principal"?l.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[l.jsx(Jl,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[l.jsx(ks,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):D==="head_teacher"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx($l,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),l.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:j.accessScope||"",onChange:se=>N({...j,accessScope:se.target.value}),children:[l.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(se=>l.jsx("option",{value:se.id,children:se.name},se.id))]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(lr,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):D==="vice_head_teacher"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx($l,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),l.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:j.accessScope||"",onChange:se=>N({...j,accessScope:se.target.value}),children:[l.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(se=>l.jsx("option",{value:se.id,children:se.name},se.id))]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(lr,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):D==="teacher"?l.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[l.jsx(Hw,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),l.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:j.accessScope||"",onChange:se=>N({...j,accessScope:se.target.value}),children:u.map(se=>l.jsx("option",{value:se.id,children:se.name},se.id))})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),l.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):D==="office_head"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx($l,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(lr,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):l.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[l.jsx(Jg,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),l.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Og,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Og,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[l.jsx(Up,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:l.jsx(Jl,{className:"h-6 w-6 text-slate-700"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),l.jsx("div",{className:"mt-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>o("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx($l,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),l.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Jl,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),a==="users"&&l.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(D=>l.jsx("button",{onClick:()=>L(D),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${H===D?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:D},D))}),l.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[l.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Zi,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:C,onChange:D=>B(D.target.value)})]}),l.jsxs("button",{onClick:Pe,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[l.jsx(io,{className:"h-5 w-5"}),l.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="users"?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),l.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),l.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.length>0?I.map(D=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:l.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:l.jsx(Zl,{className:"h-6 w-6"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.fullName}),l.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Zl,{className:"h-3 w-3"})," ",D.username]}),l.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(gA,{className:"h-3 w-3"})," ",D.email]})]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${ue(D.roleLabel)}`,children:D.roleLabel}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx($l,{className:"h-3 w-3"})," ",D.group]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[l.jsx(Jg,{className:"h-4 w-4 text-gray-400"}),p[D.accessScope]||D.accessScope]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("button",{onClick:()=>Re(D.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${D.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:D.status==="active"?l.jsxs(l.Fragment,{children:[l.jsx(lr,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):l.jsxs(l.Fragment,{children:[l.jsx(HS,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",children:[l.jsx("button",{onClick:()=>ee(D),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:l.jsx(lo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>De(D.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:l.jsx(cr,{className:"h-4 w-4"})})]})})]},D.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Zl,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:l.jsxs("span",{children:["Tng s ",I.length," ngi dng"]})})]})}):l.jsx(R3,{})}),J&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[G?l.jsx(lo,{className:"h-5 w-5"}):l.jsx(io,{className:"h-5 w-5"}),G?"Cp nht thng tin":"To ti khon mi"]}),l.jsx("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"userForm",onSubmit:xe,className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[l.jsx(Zl,{className:"h-4 w-4"})," Thng tin ti khon"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,disabled:G,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${G?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:j.username||"",onChange:D=>N({...j,username:D.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:j.email||"",onChange:D=>N({...j,email:D.target.value})})]})]}),G?l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),l.jsx("button",{type:"button",onClick:()=>pe(!de),className:"text-xs text-blue-600 hover:underline font-medium",children:de?"Hy i mt khu":"Reset mt khu"})]}),de&&l.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[l.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:A,onChange:D=>P(D.target.value)}),l.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):l.jsxs("div",{className:"mt-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"password",required:!G,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:A,onChange:D=>P(D.target.value)}),l.jsx(ao,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:j.fullName||"",onChange:D=>N({...j,fullName:D.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:j.group||"T Chuyn Mn",onChange:D=>N({...j,group:D.target.value}),children:[l.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),l.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),l.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:j.roleLabel||"Gio vin",onChange:ae,children:[l.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),l.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),l.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),l.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),l.jsx("option",{value:"Gio vin",children:"Gio vin"}),l.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),l.jsx("option",{value:"K ton",children:"K ton"}),l.jsx("option",{value:"Vn th",children:"Vn th"}),l.jsx("option",{value:"Y t",children:"Y t"}),l.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),k(),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[l.jsx(Og,{className:"h-4 w-4"})," Quyn hn b sung"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((F=j.permissions)==null?void 0:F.includes("manage_documents"))||!1,onChange:D=>{const se=j.permissions||[];D.target.checked?N({...j,permissions:[...se,"manage_documents"]}):N({...j,permissions:se.filter(fe=>fe!=="manage_documents")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),l.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((he=j.permissions)==null?void 0:he.includes("manage_office_docs"))||!1,onChange:D=>{const se=j.permissions||[];D.target.checked?N({...j,permissions:[...se,"manage_office_docs"]}):N({...j,permissions:se.filter(fe=>fe!=="manage_office_docs")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),l.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((Q=j.permissions)==null?void 0:Q.includes("manage_boarding_docs"))||!1,onChange:D=>{const se=j.permissions||[];D.target.checked?N({...j,permissions:[...se,"manage_boarding_docs"]}):N({...j,permissions:se.filter(fe=>fe!=="manage_boarding_docs")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),l.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((me=j.permissions)==null?void 0:me.includes("manage_plans"))||!1,onChange:D=>{const se=j.permissions||[];D.target.checked?N({...j,permissions:[...se,"manage_plans"]}):N({...j,permissions:se.filter(fe=>fe!=="manage_plans")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),l.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((z=j.permissions)==null?void 0:z.includes("access_system_admin"))||!1,onChange:D=>{const se=j.permissions||[];D.target.checked?N({...j,permissions:[...se,"access_system_admin"]}):N({...j,permissions:se.filter(fe=>fe!=="access_system_admin")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),l.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsx("button",{type:"submit",form:"userForm",disabled:O,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:O?l.jsxs(l.Fragment,{children:[l.jsx(zw,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Gd,{className:"h-4 w-4"})," ",G?"Lu thay i":"To ti khon"]})})]})]})})]})},k3=async()=>{const s=an(wt(Ee,"users"),gs("role","==","admin"));return(await ai(s)).docs.map(n=>n.id)},D3=async()=>{const s=an(wt(Ee,"users"),gs("role","==","head_teacher"));return(await ai(s)).docs.map(n=>n.id)},O3=async s=>{const e=an(wt(Ee,"users"),gs("role","==","teacher"),gs("group","==",s));return(await ai(e)).docs.map(a=>a.id)},M3=async s=>{const e=an(wt(Ee,"users"),gs("role","==","teacher"),gs("accessScope","==",s));return(await ai(e)).docs.map(a=>a.id)},Wi=async(s,e,n)=>{var a,o;try{let u=[];const h=await k3();if(n.type==="office"){if(s==="upload"&&e.role==="staff"&&(u=[...h]),s==="comment"){const y=(a=n.extraInfo)==null?void 0:a.uploaderId;y&&u.push(y),u=[...u,...h]}}else if(n.type==="class"){const y=(o=n.extraInfo)==null?void 0:o.classId;if(s==="upload"&&e.role==="teacher"){const p=await D3();u=[...h,...p]}else s==="comment"&&(e.role==="admin"||e.role==="head_teacher")&&y&&(u=[...await M3(y)])}else if(n.type==="group"){if(s==="upload"&&e.role==="head_teacher"){const y=e.group;if(y){const p=await O3(y);u=[...h,...p]}else u=[...h]}}else n.type==="boarding"&&e.role==="staff"&&(u=[...h]);if(u=u.filter(y=>y!==e.id),u=[...new Set(u)],u.length===0){console.log("No receivers for this notification. Skipping.");return}const g={senderId:e.id,senderName:e.name||e.role,senderAvatar:e.avatar||"",targetPath:n.targetPath,message:`${s==="upload"?" ti ln":" gp  vo"} ${n.name||"ti liu"}`,type:s,isRead:!1,createdAt:new Date().toISOString(),receivers:u,metadata:{fileName:n.name}};await rl(wt(Ee,"notifications"),g),console.log(`Notification sent to ${u.length} users.`)}catch(u){console.error("Error creating notification:",u)}},V3=s=>{switch(s){case"excel":return l.jsx(Lw,{className:"h-6 w-6 text-green-600"});case"word":return l.jsx(He,{className:"h-6 w-6 text-blue-600"});case"pdf":return l.jsx(zp,{className:"h-6 w-6 text-red-600"});default:return l.jsx(He,{className:"h-6 w-6 text-gray-500"})}},P3=()=>{var me,z;const s=Ms(),{user:e}=ps(),{addToast:n}=Nr(),[a,o]=R.useState([]),[u,h]=R.useState("all"),[g,y]=R.useState(""),[p,b]=R.useState(null),[w,T]=R.useState(!1),[C,B]=R.useState(""),[H,L]=R.useState(!1),J=R.useRef(null),[te,G]=R.useState(!1),[X,de]=R.useState(null),[pe,j]=R.useState({name:"",category:"general",note:""}),[N,A]=R.useState(!1),[P,O]=R.useState(null),M=e,I=R.useMemo(()=>p?a.find(D=>D.id===p.id)||p:null,[a,p]);R.useEffect(()=>{const D=an(wt(Ee,"office_docs"),So("uploadDate","desc")),se=br(D,fe=>{const Le=[];fe.forEach(st=>{const Zt=st.data();Le.push({id:st.id,...Zt,comments:Zt.comments||[]})}),o(Le)});return()=>se()},[]);const De=a.filter(D=>{const se=u==="all"||D.category===u,fe=D.name.toLowerCase().includes(g.toLowerCase())||D.uploader.name.toLowerCase().includes(g.toLowerCase());return se&&fe});R.useEffect(()=>{var D;w&&((D=J.current)==null||D.scrollIntoView({behavior:"smooth"}))},[I==null?void 0:I.comments,w]);const Pe=D=>{b(D),T(!0)},ee=(D,se)=>{se.stopPropagation(),O(D),A(!0)},ae=async()=>{if(P)try{await sl(it(Ee,"office_docs",P.id)),n(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),A(!1),O(null),(p==null?void 0:p.id)===P.id&&(T(!1),b(null))}catch(D){console.error("Error deleting document: ",D),n("Li","Khng th xa h s.","error")}},xe=async D=>{if(D.preventDefault(),!C.trim()||!I||!M)return;const se={id:Date.now().toString(),userId:M.id,userName:M.fullName,userRole:M.role,content:C,timestamp:new Date().toISOString()};try{const fe=it(Ee,"office_docs",I.id);await ca(fe,{comments:C0(se)}),B(""),n(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),M&&await Wi("comment",M,{type:"office",name:I.name,targetPath:"/office-documents",extraInfo:{uploaderId:I.uploader.id}})}catch(fe){console.error("Error adding comment: ",fe),n("Li","Khng th gi bnh lun.","error")}},Re=D=>{switch(D){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},ue=()=>{j({name:"",category:u==="all"?"general":u,note:""}),de(null),G(!0)},k=D=>{if(D.preventDefault(),D.dataTransfer.files&&D.dataTransfer.files[0]){const se=D.dataTransfer.files[0];de(se),pe.name||j(fe=>({...fe,name:se.name.split(".")[0]}))}},F=D=>{if(D.target.files&&D.target.files[0]){const se=D.target.files[0];de(se),pe.name||j(fe=>({...fe,name:se.name.split(".")[0]}))}},he=async()=>{if(X)try{let D="#";const se=na(yr,`office_docs/${Date.now()}_${X.name}`);await ea(se,X),D=await ta(se);const fe={...pe,uploader:{id:(M==null?void 0:M.id)||"unknown",name:(M==null?void 0:M.fullName)||"n danh",avatar:(M==null?void 0:M.avatar)||"",role:(M==null?void 0:M.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),comments:[],type:X.name.split(".").pop()||"file",fileType:X.name.split(".").pop()||"file",fileUrl:D};await rl(wt(Ee,"office_docs"),fe),n("Ti ln thnh cng!",` lu h s: ${pe.name}`,"success"),G(!1)}catch(D){console.error("Error adding document: ",D),n("Li","Khng th ti ln h s.","error")}},Q=(D=!1)=>{if(!I)return null;const se=I.fileUrl;if(se&&se!=="#"){const fe=Ao(se);return fe==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(He,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:se,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(Xn,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:fe,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[l.jsx("div",{className:"bg-white border-b border-teal-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[l.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{children:"T Vn phng"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-teal-100 rounded-lg text-teal-700",children:l.jsx(He,{className:"h-6 w-6"})}),"Kho K hoch & Bo co"]}),(((me=e==null?void 0:e.permissions)==null?void 0:me.includes("manage_documents"))||((z=e==null?void 0:e.permissions)==null?void 0:z.includes("manage_office_docs")))&&l.jsxs("button",{onClick:ue,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-md transition-colors font-medium",children:[l.jsx(rn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[l.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),l.jsxs("nav",{className:"space-y-1",children:[l.jsxs("button",{onClick:()=>h("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${u==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),l.jsxs("button",{onClick:()=>h("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(wS,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),l.jsxs("button",{onClick:()=>h("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(MA,{className:"h-4 w-4"}),"Y t & Bn tr"]}),l.jsxs("button",{onClick:()=>h("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(He,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[l.jsxs("div",{className:"mb-6 flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 max-w-md shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:[l.jsx(Zi,{className:"h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:g,onChange:D=>y(D.target.value)})]}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:De.map(D=>l.jsxs("tr",{onClick:()=>Pe(D),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:V3(D.type)}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:D.name}),l.jsx("div",{className:"text-xs text-gray-500",children:Re(D.category)})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:D.uploader.name.charAt(0)}),l.jsxs("div",{className:"ml-3",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.uploader.name}),l.jsx("div",{className:"text-xs text-gray-500",children:D.uploader.role})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(D.uploadDate).toLocaleDateString("vi-VN")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(D.comments||[]).length>0?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[l.jsx(vd,{className:"w-3 h-3 mr-1"}),(D.comments||[]).length," Gp  mi"]}):l.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:se=>se.stopPropagation(),children:[l.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:l.jsx(Xn,{className:"h-4 w-4"})}),l.jsx("button",{onClick:se=>ee(D,se),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:l.jsx(cr,{className:"h-4 w-4"})})]})})]},D.id))})]})})]})]}),N&&P&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',P.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),w&&I&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>T(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:Re(I.category)}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:I.name})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:l.jsx(Wt,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>L(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Fd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:Q(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:I.uploader.name})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(I.uploadDate).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(vd,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),l.jsxs("div",{className:"space-y-4 mb-4",children:[(I.comments||[]).length>0?(I.comments||[]).map(D=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:D.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:D.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:D.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800",children:D.content})]})]},D.id)):l.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),l.jsx("div",{ref:J})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("form",{onSubmit:xe,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:C,onChange:D=>B(D.target.value)}),l.jsx("button",{type:"submit",disabled:!C.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:l.jsx(Kd,{className:"h-4 w-4"})})]})})]})]})]})]}),te&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(rn,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),l.jsx("button",{onClick:()=>G(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:pe.name,onChange:D=>j({...pe,name:D.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:pe.category,onChange:D=>j({...pe,category:D.target.value}),children:[l.jsx("option",{value:"general",children:"Hnh chnh chung"}),l.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),l.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:k,onDragOver:D=>D.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${X?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:F}),X?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(lr,{className:"h-10 w-10 text-teal-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:X.name}),l.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(X.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${pe.category==="finance"?"bg-green-100 text-green-600":pe.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:l.jsx(qd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),l.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:pe.note,onChange:D=>j({...pe,note:D.target.value})})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:he,disabled:!X,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(rn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},L3=({type:s})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(s){case"excel":return l.jsx(Lw,{className:`${e} text-green-600`});case"pdf":return l.jsx(zp,{className:`${e} text-red-500`});case"word":return l.jsx(He,{className:`${e} text-blue-600`});default:return l.jsx(He,{className:`${e} text-gray-400`})}},U3=()=>{const s=Ms(),{user:e}=ps(),{addToast:n}=Nr(),[a,o]=R.useState([]),[u,h]=R.useState("menu"),[g,y]=R.useState(""),[p,b]=R.useState(null),[w,T]=R.useState(!1),[C,B]=R.useState(""),H=R.useRef(null),[L,J]=R.useState(!1),[te,G]=R.useState(null),[X,de]=R.useState({type:"menu",startDate:"",endDate:"",name:""}),[pe,j]=R.useState(!1),[N,A]=R.useState(null),[P,O]=R.useState(!1),M=e;R.useEffect(()=>{const Q=an(wt(Ee,"boarding_docs"),So("uploadDate","desc")),me=br(Q,z=>{const D=[];z.forEach(se=>{D.push({id:se.id,...se.data()})}),o(D)});return()=>me()},[]);const I=a.filter(Q=>{const me=Q.category===u,z=Q.name.toLowerCase().includes(g.toLowerCase());return me&&z});R.useEffect(()=>{var Q;w&&((Q=H.current)==null||Q.scrollIntoView({behavior:"smooth"}))},[p==null?void 0:p.comments,w]),R.useEffect(()=>{if(X.type==="menu"&&X.startDate&&X.endDate){const Q=new Date(X.startDate);new Date(X.endDate);const me=new Date(Q.getFullYear(),0,1),z=Math.floor((Q.getTime()-me.getTime())/(1440*60*1e3)),D=Math.ceil((Q.getDay()+1+z)/7);de(se=>({...se,name:`Thc n Tun ${D} - Thng ${Q.getMonth()+1}`}))}},[X.startDate,X.endDate,X.type]);const De=Q=>{b(Q),T(!0)},Pe=(Q,me)=>{me&&me.stopPropagation(),A(Q),j(!0)},ee=async()=>{if(N)try{await sl(it(Ee,"boarding_docs",N.id)),n(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),j(!1),A(null),(p==null?void 0:p.id)===N.id&&(T(!1),b(null))}catch(Q){console.error("Error deleting document: ",Q),n("Li","Khng th xa h s.","error")}},ae=async Q=>{if(Q.preventDefault(),!C.trim()||!p||!M)return;const me={id:Date.now().toString(),userId:M.id,userName:M.fullName,userRole:M.role,content:C,timestamp:new Date().toISOString()};try{const z=it(Ee,"boarding_docs",p.id);await ca(z,{comments:C0(me)});const D={...p,comments:[...p.comments,me]};b(D),B(""),n(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await Wi("comment",M,{type:"boarding",name:p.name,targetPath:"/boarding-menu"})}catch(z){console.error("Error adding comment: ",z),n("Li","Khng th gi bnh lun.","error")}},xe=Q=>{switch(Q){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},Re=()=>{de({type:u==="menu"?"menu":u==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),G(null),J(!0)},ue=Q=>{if(Q.preventDefault(),Q.dataTransfer.files&&Q.dataTransfer.files[0]){const me=Q.dataTransfer.files[0];G(me),!X.name&&X.type!=="menu"&&de(z=>({...z,name:me.name.split(".")[0]}))}},k=Q=>{if(Q.target.files&&Q.target.files[0]){const me=Q.target.files[0];G(me),!X.name&&X.type!=="menu"&&de(z=>({...z,name:me.name.split(".")[0]}))}},F=async()=>{if(te)try{const Q=na(yr,`boarding_docs/${Date.now()}_${te.name}`),me=await ea(Q,te),z=await ta(me.ref),D={...X,uploader:{id:(M==null?void 0:M.id)||"unknown",name:(M==null?void 0:M.fullName)||"n danh",avatar:(M==null?void 0:M.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:te.name.split(".").pop()||"file",category:u,fileUrl:z};await rl(wt(Ee,"boarding_docs"),D),n("Ti ln thnh cng!",` lu h s: ${X.name}`,"success"),J(!1),M&&await Wi("upload",M,{type:"boarding",name:X.name,targetPath:"/boarding-menu"})}catch(Q){console.error("Error adding document: ",Q),n("Li","Khng th ti ln h s.","error")}},he=(Q=!1)=>{if(!p)return null;if(p.fileUrl&&p.fileUrl!=="#"){const me=Ao(p.fileUrl);return me==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(He,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:p.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(Xn,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:me,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[l.jsx("div",{className:"bg-white border-b border-emerald-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[l.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{children:"T Vn phng"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-700",children:l.jsx(ep,{className:"h-6 w-6"})}),"Qun l Bn tr & Dinh dng"]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[l.jsx(ao,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),l.jsxs("button",{onClick:Re,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5",children:[l.jsx(rn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[l.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),l.jsxs("nav",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>h("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(ep,{className:"h-4 w-4"}),"Thc n Tun"]}),l.jsxs("button",{onClick:()=>h("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(Jl,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),l.jsxs("button",{onClick:()=>h("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(RS,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800",children:xe(u)}),l.jsxs("div",{className:"relative",children:[l.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:g,onChange:Q=>y(Q.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64 bg-white shadow-sm"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[I.map(Q=>l.jsxs("div",{onClick:()=>De(Q),className:"group bg-white rounded-2xl border border-gray-100 p-6 shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),l.jsx(L3,{type:Q.type}),l.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:Q.name}),l.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["ng bi ",l.jsx("span",{className:"font-medium text-gray-700",children:Q.uploader.name})]}),l.jsxs("div",{className:"w-full pt-4 border-t border-gray-50 flex items-center justify-between mt-auto relative z-10",children:[l.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[l.jsx(Ki,{className:"h-3 w-3"}),new Date(Q.uploadDate).toLocaleDateString("vi-VN")]}),l.jsxs("div",{className:"flex items-center gap-1",children:[Q.comments.length>0&&l.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded-full mr-1",children:[l.jsx(Ga,{className:"h-3 w-3"}),Q.comments.length]}),l.jsx("button",{onClick:me=>Pe(Q,me),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:l.jsx(cr,{className:"h-4 w-4"})})]})]})]},Q.id)),I.length===0&&l.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[l.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:l.jsx(He,{className:"h-8 w-8 text-gray-300"})}),l.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),pe&&N&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',N.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),w&&p&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>T(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:l.jsx(He,{className:"h-5 w-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:p.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p.fileUrl&&p.fileUrl!=="#"?window.open(p.fileUrl,"_blank"):n("Khng c file","Ti liu ny khng c file nh km.","warning")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>O(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Fd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:he(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:p.uploader.name})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(p.uploadDate).toLocaleDateString("vi-VN")})]}),p.category==="menu"&&p.startDate&&p.endDate&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[l.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[l.jsx(Ki,{className:"h-3 w-3"}),l.jsx("span",{children:new Date(p.startDate).toLocaleDateString("vi-VN")}),l.jsx("span",{children:""}),l.jsx("span",{children:new Date(p.endDate).toLocaleDateString("vi-VN")})]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Ga,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),l.jsxs("div",{className:"space-y-4",children:[p.comments&&p.comments.length>0?p.comments.map(Q=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:Q.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:Q.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:Q.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:Q.content}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(Q.timestamp).toLocaleString("vi-VN")})]})]},Q.id)):l.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[l.jsx(Ga,{className:"h-10 w-10 mb-2 opacity-50"}),l.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),l.jsx("div",{ref:H})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[l.jsxs("form",{onSubmit:ae,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:C,onChange:Q=>B(Q.target.value)}),l.jsx("button",{type:"submit",disabled:!C.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:l.jsx(Kd,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[l.jsx(ao,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]}),P&&p&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:l.jsx(He,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:p.name}),l.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:l.jsx(Qd,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:l.jsx($d,{className:"h-5 w-5"})}),l.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),l.jsx("button",{onClick:()=>O(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:he(!0)})]}),L&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(rn,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),l.jsx("button",{onClick:()=>J(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(Q=>l.jsx("button",{onClick:()=>de(me=>({...me,type:Q.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${X.type===Q.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:Q.label},Q.id))})]}),X.type==="menu"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:X.startDate,onChange:Q=>de({...X,startDate:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:X.endDate,onChange:Q=>de({...X,endDate:Q.target.value})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:X.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:X.name,onChange:Q=>de({...X,name:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:ue,onDragOver:Q=>Q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${te?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:k}),te?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(lr,{className:"h-10 w-10 text-emerald-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:te.name}),l.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(te.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:l.jsx(qd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:F,disabled:!te,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(rn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},z3=()=>{const s=Ms(),{user:e}=ps(),{addToast:n}=Nr(),[a,o]=R.useState([]),[u,h]=R.useState([]);R.useEffect(()=>{const ue=an(wt(Ee,"plans"),So("uploadDate","desc")),k=br(ue,F=>{const he=[],Q=[];F.forEach(me=>{const z=me.data(),D={id:me.id,...z};z.type==="plan"?he.push(D):Q.push(D)}),o(he),h(Q)});return()=>k()},[]);const[g,y]=R.useState(null),[p,b]=R.useState(!1),[w,T]=R.useState(!1),[C,B]=R.useState(""),H=R.useRef(null),[L,J]=R.useState(!1),[te,G]=R.useState(null),[X,de]=R.useState({type:"plan",name:"",date:"",status:"draft"}),[pe,j]=R.useState(!1),[N,A]=R.useState(null),P=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="teacher";R.useEffect(()=>{var ue;p&&((ue=H.current)==null||ue.scrollIntoView({behavior:"smooth"}))},[p,g]);const O=ue=>{y(ue),b(!0)},M=(ue,k)=>{k.stopPropagation(),A(ue),j(!0)},I=async()=>{if(N)try{await sl(it(Ee,"plans",N.id)),n(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),j(!1),A(null),(g==null?void 0:g.id)===N.id&&(b(!1),y(null))}catch(ue){console.error("Error deleting document: ",ue),n("Li","Khng th xa h s. Vui lng th li.","error")}},De=async ue=>{if(ue.preventDefault(),!C.trim()||!g||!e)return;const k={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:C,timestamp:new Date().toISOString()};try{const F=it(Ee,"plans",g.id);await ca(F,{comments:C0(k),commentCount:(g.commentCount||0)+1}),B(""),n(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),await Wi("comment",e,{type:"group",name:g.title,targetPath:"/professional-group-plans"})}catch(F){console.error("Error adding comment: ",F),n("Li","Khng th gi gp .","error")}},Pe=()=>{de({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),G(null),J(!0)},ee=ue=>{if(ue.preventDefault(),ue.dataTransfer.files&&ue.dataTransfer.files[0]){const k=ue.dataTransfer.files[0];G(k),X.name||de(F=>({...F,name:k.name.split(".")[0]}))}},ae=ue=>{if(ue.target.files&&ue.target.files[0]){const k=ue.target.files[0];G(k),X.name||de(F=>({...F,name:k.name.split(".")[0]}))}},xe=async()=>{if(!(!te&&!X.name))try{let ue="#",k="word";if(te){const he=na(yr,`plans/${Date.now()}_${te.name}`);await ea(he,te),ue=await ta(he),k=te.name.endsWith("pdf")?"pdf":"word"}const F={...X,title:X.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploadDate:new Date().toISOString(),viewers:[],commentCount:0,comments:[],fileType:k,url:ue};await rl(wt(Ee,"plans"),F),n("Ti ln thnh cng",` lu h s: ${X.name} (${X.type==="plan"?"K hoch":"Bin bn"})`,"success"),J(!1),e&&await Wi("upload",e,{type:"group",name:X.name,targetPath:"/professional-group-plans"})}catch(ue){console.error("Error adding document: ",ue),n("Li","Khng th lu h s. Vui lng th li.","error")}},Re=(ue=!1)=>{if(!g)return null;const k=g.url;if(k&&k!=="#"){const F=Ao(k);return F==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(He,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:k,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(Xn,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:F,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[l.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[l.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:l.jsx(He,{className:"h-6 w-6"})}),"H s T Chuyn Mn"]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),P&&l.jsxs("button",{onClick:Pe,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-5 py-2.5 rounded-lg shadow-md transition-all font-medium",children:[l.jsx(rn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln Bin bn/K hoch"})]})]})]})}),l.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10 pb-20",children:[l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),l.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",l.jsx(Rs,{className:"h-3 w-3"})]})]}),l.jsxs("div",{className:"grid gap-4",children:[a.map(ue=>l.jsx("div",{onClick:()=>O(ue),className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md hover:border-orange-200 transition-all cursor-pointer group",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:l.jsx(He,{className:"h-6 w-6"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors",children:ue.title}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx($l,{className:"h-3 w-3"})," ",ue.uploader]}),l.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(FS,{className:"h-3 w-3"})," ",new Date(ue.uploadDate).toLocaleDateString("vi-VN")]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex -space-x-2",children:[ue.viewers.map((k,F)=>l.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs font-medium text-gray-600",children:k},F)),ue.viewers.length>0&&l.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[10px] text-gray-400",children:"+"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[l.jsx(vd,{className:"h-4 w-4"}),l.jsx("span",{className:"text-xs font-medium",children:ue.commentCount})]}),l.jsx("button",{onClick:k=>M(ue,k),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors z-10",children:l.jsx(cr,{className:"h-4 w-4"})})]})]})]})},ue.id)),a.length===0&&l.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400",children:[l.jsx(He,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"Cha c k hoch no."]})]})]}),l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp T"}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded-md text-gray-500 hover:text-orange-600 shadow-sm",children:l.jsx(sA,{className:"h-4 w-4"})})})]}),l.jsxs("div",{className:"relative border-l-2 border-gray-200 ml-3 md:ml-6 space-y-8 pb-4",children:[u.map(ue=>l.jsxs("div",{className:"relative pl-8 md:pl-10",children:[l.jsx("div",{className:"absolute -left-[9px] top-0 h-5 w-5 rounded-full bg-white border-4 border-orange-200"}),l.jsx("div",{className:"absolute -left-2 top-7 md:top-1 md:-left-24 w-20 md:text-right",children:l.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(ue.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})}),l.jsxs("div",{onClick:()=>O(ue),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer group relative pr-10",children:[l.jsx("div",{className:"flex justify-between items-start mb-2",children:l.jsx("div",{className:"flex items-center gap-2",children:ue.status==="finalized"?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[l.jsx(LS,{className:"h-3 w-3"}),"  cht"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 uppercase animate-pulse",children:[l.jsx(ks,{className:"h-3 w-3"})," ang tho lun"]})})}),l.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3 group-hover:text-orange-700",children:ue.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-100 group-hover:bg-orange-50 group-hover:border-orange-100 transition-colors",children:[ue.fileType==="word"?l.jsx(He,{className:"h-4 w-4 text-blue-600"}):l.jsx(zp,{className:"h-4 w-4 text-red-500"}),l.jsxs("span",{className:"text-xs text-gray-600 font-medium truncate max-w-[150px]",children:["Bien_ban_hop_",ue.date,".",ue.fileType==="word"?"docx":"pdf"]})]}),l.jsxs("span",{className:"text-xs font-bold text-orange-600 opacity-0 group-hover:opacity-100 transition-opacity flex items-center",children:["Chi tit ",l.jsx(Rs,{className:"h-3 w-3"})]})]}),l.jsx("button",{onClick:k=>M(ue,k),className:"absolute top-2 right-2 p-1.5 text-gray-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors z-10",children:l.jsx(cr,{className:"h-4 w-4"})})]})]},ue.id)),u.length===0&&l.jsx("div",{className:"pl-10 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})]})]}),pe&&N&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',N.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),p&&g&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>b(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-start bg-orange-50/30 flex-shrink-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-1 block",children:g.type==="plan"?"K hoch":"Bin bn hp"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:g.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:l.jsx(Wt,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>T(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-orange-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Fd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:Re(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:g.uploader})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(g.uploadDate).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(vd,{className:"h-4 w-4 text-orange-500"}),"  kin ch o & Gp "]}),l.jsxs("div",{className:"space-y-4 mb-4",children:[g.comments&&g.comments.length>0?g.comments.map(ue=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-red-100 text-red-700 border border-red-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:ue.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:ue.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:ue.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800",children:ue.content})]})]},ue.id)):l.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),l.jsx("div",{ref:H})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("form",{onSubmit:De,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung ch o...",value:C,onChange:ue=>B(ue.target.value)}),l.jsx("button",{type:"submit",disabled:!C.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:l.jsx(Kd,{className:"h-4 w-4"})})]})})]})]})]})]}),L&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(rn,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),l.jsx("button",{onClick:()=>J(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>de({...X,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${X.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),l.jsx("button",{onClick:()=>de({...X,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${X.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:X.name,onChange:ue=>de({...X,name:ue.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:X.type==="minute"?"Ngy hp":"Thi gian p dng"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:X.date,onChange:ue=>de({...X,date:ue.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:X.status,onChange:ue=>de({...X,status:ue.target.value}),children:[l.jsx("option",{value:"draft",children:" ang tho lun"}),l.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:ee,onDragOver:ue=>ue.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${te?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ae,accept:".pdf,.doc,.docx"}),te?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(lr,{className:"h-10 w-10 text-orange-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:te.name}),l.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(te.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:l.jsx(qd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:xe,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[l.jsx(rn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},B3=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],kp=()=>{const s=new Date,e=s.getMonth()+1,n=s.getFullYear();return e>=9?n:n-1},yw=()=>{const s=kp(),e=s+1;return[{id:"m9",name:`Thng 09/${s}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${s}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${s}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${s}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${e}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${e}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${e}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${e}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${e}`,fileCount:0,files:[]}]},xw=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],H3=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],q3=()=>{var _n;const{classId:s}=bj(),e=Ms(),{user:n}=ps(),{addToast:a}=Nr(),o=(ge,we,Je)=>{if(!ge)return!1;const ot=Tr=>Tr.toLowerCase().trim().replace(/\s+/g," "),Ae=ot(ge),qe=ot(we),Ke=Je?ot(Je):"";return Ae===qe||Ae===Ke||Ke&&Ae.includes(Ke)||Ke&&Ke.includes(Ae)?!0:(console.log("[matchesClassScope] No match:",{scope:ge,classId:we,className:Je,normalizedScope:Ae,normalizedName:Ke}),!1)},[u,h]=R.useState(null),[g,y]=R.useState(yw()),[p,b]=R.useState([]),[w,T]=R.useState(!0),[C,B]=R.useState("students"),[H,L]=R.useState("week"),[J,te]=R.useState("m11"),[G,X]=R.useState("all"),[de,pe]=R.useState(null),[j,N]=R.useState(!1),[A,P]=R.useState(!1),[O,M]=R.useState(""),[I,De]=R.useState(!1),[Pe,ee]=R.useState(null),[ae,xe]=R.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[Re,ue]=R.useState(!1),[k,F]=R.useState(null);if(R.useEffect(()=>{if(!s)return;(async()=>{try{const we=it(Ee,"classes",s),Je=await mr(we);let ot=null,Ae=[];if(Je.exists())ot=Je.data();else{console.warn("Class not found in Firestore, checking Mock...");const qe=B3.find(Ke=>Ke.id===s);qe&&(ot=qe)}if(ot){console.log("[ClassRecords] Class data loaded:",{classId:s,className:ot.name,currentUser:n==null?void 0:n.fullName,userScope:n==null?void 0:n.accessScope,userRole:n==null?void 0:n.role});const qe=Ke=>Ke.toLowerCase().trim().replace(/\s+/g," ");try{const Ke=an(wt(Ee,"users"),gs("role","in",["teacher","head_teacher","vice_head_teacher"])),Er=(await ai(Ke)).docs.map(Pn=>Pn.data()),Yt=new Set,Wn=qe(s),ys=qe(ot.name);Er.forEach(Pn=>{if(!Pn.accessScope)return;const Ln=qe(Pn.accessScope);(Ln===Wn||Ln===ys||ys.includes(Ln)||Ln.includes(ys))&&Yt.add(Pn.fullName)}),Ae=Array.from(Yt),console.log("[ClassRecords] Found teachers from DB:",Ae),Ae.length===0&&(console.warn("[ClassRecords] No teacher found for class:",s),Ae=["Cha phn cng"])}catch(Ke){console.error("Error fetching teacher details:",Ke),Ae=["Cha phn cng"]}h({id:s,...ot,teachers:Ae,teacher:Ae.join(", ")})}}catch(we){console.error("Error fetching class:",we)}finally{T(!1)}})()},[s]),R.useEffect(()=>{if(!s)return;const ge=an(wt(Ee,"class_files"),gs("classId","==",s)),we=br(ge,Je=>{const ot=Je.docs.map(Ke=>({id:Ke.id,...Ke.data()}));b(ot),console.log("[ClassRecords] Fetched files from Firestore:",ot.length),ot.forEach(Ke=>console.log(`  - ${Ke.name} | month: "${Ke.month}" | type: ${Ke.planType}`));const qe=yw().map(Ke=>{const Tr=ot.filter(Er=>{if((Er.category||"plan")!=="plan")return!1;let Wn=!1;const ys=Ke.id.replace("m",""),Pn=String(Er.month||"").replace("m","");return parseInt(ys,10)===parseInt(Pn,10)&&(Wn=!0),!!Wn});return{...Ke,files:Tr,fileCount:Tr.length}});console.log("[ClassRecords] Grouped files into folders:",qe.map(Ke=>`${Ke.name}: ${Ke.fileCount} files`)),y(qe)});return()=>we()},[s]),R.useEffect(()=>{!n||w||n.role==="teacher"&&u&&!o(n.accessScope,s,u.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:n.accessScope,classId:s,className:u.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[n,s,e,u,w]),w)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!u)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),l.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const he=((n==null?void 0:n.role)==="teacher"||(n==null?void 0:n.role)==="head_teacher"||(n==null?void 0:n.role)==="vice_head_teacher")&&o(n.accessScope,s,u==null?void 0:u.name);console.log("[ClassRecords] Upload permission:",{canUpload:he,userRole:n==null?void 0:n.role,userScope:n==null?void 0:n.accessScope,classId:s,className:u==null?void 0:u.name});const Q=(ge,we)=>{we.stopPropagation(),pe(ge),N(!0)},me=(ge,we,Je)=>{Je.stopPropagation(),F({file:ge,folderId:we}),ue(!0)},z=async()=>{if(k)try{console.log("[DELETE] Attempting to delete file:",{fileId:k.file.id,fileName:k.file.name,classId:s}),await sl(it(Ee,"class_files",k.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),a(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(ge){console.error("[DELETE] Error deleting file:",ge),console.error("[DELETE] Error code:",ge.code),console.error("[DELETE] Error message:",ge.message);let we="Vui lng th li sau.";ge.code==="permission-denied"&&(we="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),a("Li khi xa ti liu",we,"error")}finally{ue(!1),F(null)}},D=ge=>{te(J===ge?null:ge)},se=ge=>{switch(ge){case"word":return l.jsx(He,{className:"h-5 w-5 text-blue-600"});case"excel":return l.jsx(He,{className:"h-5 w-5 text-green-600"});case"pdf":return l.jsx(He,{className:"h-5 w-5 text-red-600"});default:return l.jsx(He,{className:"h-5 w-5 text-gray-400"})}},fe=()=>{xe({area:C,planType:H,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),ee(null),De(!0)},Le=ge=>{if(ge.preventDefault(),ge.dataTransfer.files&&ge.dataTransfer.files[0]){const we=ge.dataTransfer.files[0];ee(we),ae.name||xe(Je=>({...Je,name:we.name.split(".")[0]}))}},st=ge=>{if(ge.target.files&&ge.target.files[0]){const we=ge.target.files[0];ee(we),ae.name||xe(Je=>({...Je,name:we.name.split(".")[0]}))}},Zt=async()=>{var ge,we;if(!(!Pe||!ae.name||!n))try{const Je=na(yr,`class-files/${s}/${Date.now()}_${Pe.name}`);await ea(Je,Pe);const ot=await ta(Je),Ae={name:ae.name,type:((ge=Pe.name.split(".").pop())==null?void 0:ge.toLowerCase())||"other",url:ot,uploader:n.fullName,date:new Date().toISOString(),classId:s,month:ae.month,monthName:((we=xw.find(qe=>qe.value===ae.month))==null?void 0:we.label)||"Thng khc",hasNewComments:!1,commentCount:0,createdAt:UI(),planType:ae.planType,week:ae.week,category:ae.area};await rl(wt(Ee,"class_files"),Ae),a("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),Wi("upload",n,{type:"class",name:ae.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),De(!1)}catch(Je){console.error("Error uploading file:",Je),a("Li khi ti ln","Vui lng th li sau.","error")}},Qt=(ge=!1)=>{if(!de)return null;if(de.url&&de.url!=="#"){const we=Ao(de.url);return we==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(He,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:de.url,download:de.name,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(Xn,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:we,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[l.jsx(He,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[l.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[l.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),l.jsx(Rs,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>e("/"),children:[l.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm",children:l.jsx("span",{className:"text-2xl font-bold text-amber-600",children:((_n=u==null?void 0:u.name)==null?void 0:_n.split(" ").pop())||"?"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(u==null?void 0:u.name)||"Lp hc"}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Uw,{className:"h-4 w-4"})," GVCN:"]}),u!=null&&u.teachers&&u.teachers.length>1?l.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.teachers.map((ge,we)=>l.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:ge},we))}):l.jsx("span",{className:"font-semibold text-gray-700",children:(u==null?void 0:u.teacher)||"Cha cp nht"})]})]})]}),he&&l.jsxs("button",{onClick:fe,className:"flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-xl shadow-md shadow-amber-200 transition-all font-bold transform hover:-translate-y-0.5",children:[l.jsx(rn,{className:"h-5 w-5"}),l.jsx("span",{children:"Ti ln h s lp"})]})]})]}),l.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:l.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[l.jsxs("button",{onClick:()=>B("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${C==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Iv,{className:"h-4 w-4"}),"DANH SCH LP",C==="students"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${C==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(He,{className:"h-4 w-4"}),"K HOCH GIO DC",C==="plan"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${C==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Sv,{className:"h-4 w-4"}),"NH GI TR",C==="assessment"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${C==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Cv,{className:"h-4 w-4"}),"D N STEAM",C==="steam"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),l.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>X("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${G==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),l.jsx("button",{onClick:()=>X("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${G==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),l.jsxs("button",{onClick:()=>X("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${G==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[l.jsx(Ga,{className:"h-3 w-3"})," C gp "]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),C==="plan"&&l.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[l.jsx("button",{onClick:()=>L("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),l.jsx("button",{onClick:()=>L("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),l.jsx("button",{onClick:()=>L("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),l.jsxs("div",{className:"space-y-4",children:[C==="plan"&&l.jsxs(l.Fragment,{children:[H==="year"&&l.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Rv,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",kp()," - ",kp()+1]}),(()=>{const ge=g.flatMap(we=>we.files).filter(we=>we.planType==="year");return ge.length===0?l.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ge.map(we=>l.jsxs("div",{onClick:Je=>Q(we,Je),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[se(we.type),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-800 truncate",children:we.name}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(we.date).toLocaleDateString("vi-VN")})]}),l.jsx("button",{onClick:Je=>me(we,"year",Je),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(cr,{className:"h-4 w-4"})})]},we.id))})})()]}),(H==="month"||H==="week")&&l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(ge=>{const we=ge.files.filter(Ae=>H==="month"?Ae.planType==="month":H==="week"?Ae.planType==="week"||!Ae.planType:!1),Je=we.length,ot=J===ge.id;return l.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[l.jsxs("div",{onClick:()=>D(ge.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${ot?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-3 rounded-lg ${ot?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:l.jsx(Rv,{className:"h-6 w-6"})}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${ot?"text-amber-900":"text-gray-700"}`,children:ge.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[Je," ",H==="month"?"K hoch thng":"K hoch tun"]})]})]}),l.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${ot?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:l.jsx(Rs,{className:"h-5 w-5"})})]}),ot&&l.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[we.map(Ae=>l.jsxs("div",{onClick:qe=>Q(Ae,qe),className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[se(Ae.type),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:Ae.name}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(Ki,{className:"h-3 w-3"})," ",new Date(Ae.date).toLocaleDateString("vi-VN"),H==="week"&&Ae.week&&l.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",Ae.week]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[Ae.hasNewComments&&l.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[l.jsx(Ga,{className:"h-3 w-3"}),"Gp  mi"]}),l.jsx("button",{onClick:qe=>me(Ae,ge.id,qe),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(cr,{className:"h-4 w-4"})})]})]},Ae.id)),we.length===0&&l.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},ge.id)})})]}),C==="students"&&l.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Iv,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{const ge=p.filter(we=>we.category==="students");return console.log("[Student List Tab] Total files:",p.length,"Student files:",ge.length),console.log("[Student List Tab] All file categories:",p.map(we=>({name:we.name,category:we.category}))),ge.length===0?l.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ge.map(we=>l.jsxs("div",{onClick:Je=>Q(we,Je),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[se(we.type),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-800 truncate",children:we.name}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(we.date).toLocaleDateString("vi-VN")})]}),l.jsx("button",{onClick:Je=>me(we,"students",Je),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(cr,{className:"h-4 w-4"})})]},we.id))})})()]}),C==="assessment"&&l.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[l.jsx(Sv,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),l.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),C==="steam"&&l.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[l.jsx(Cv,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),l.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),j&&de&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>N(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-amber-50 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg border border-amber-100 shadow-sm",children:se(de.type)}),l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-amber-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:de.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",download:de.name,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(Xn,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>P(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-amber-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Fd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:Qt(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:de.uploader})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(de.date).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Ga,{className:"h-4 w-4 text-amber-500"}),"Gp  chuyn mn"]}),l.jsx("div",{className:"space-y-4",children:de.hasNewComments?l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-red-100 text-red-700 border border-red-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:"H"}),l.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Hiu Trng"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"Ban Gim Hiu"})]}),l.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:"C Lan lu  b sung thm hot ng ngoi tri cho ch  ny nh. Phn mc tiu cn r rng hn theo chun  tui."}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Va xong"})]})]}):l.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[l.jsx(Ga,{className:"h-10 w-10 mb-2 opacity-50"}),l.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]})})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:O,onChange:ge=>M(ge.target.value)}),l.jsx("button",{onClick:()=>{!O.trim()||!n||!de||(a(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),Wi("comment",n,{type:"class",name:de.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),M(""))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 transition-all",children:l.jsx(Kd,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[l.jsx(ao,{className:"h-2.5 w-2.5"})," Ch ni b BGH v GVCN xem c."]})]})]})]})]})]}),A&&de&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:l.jsx(He,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:de.name}),l.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:l.jsx(Qd,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:l.jsx($d,{className:"h-5 w-5"})}),l.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),l.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:Qt(!0)})]}),Re&&k&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ks,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',k.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>ue(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:z,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),I&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(rn,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),l.jsx("button",{onClick:()=>De(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(Wt,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),l.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(ge=>l.jsx("button",{onClick:()=>xe({...ae,area:ge.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${ae.area===ge.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ge.label},ge.id))})]}),ae.area==="plan"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),l.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(ge=>l.jsx("button",{onClick:()=>xe({...ae,planType:ge.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${ae.planType===ge.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ge.label},ge.id))})]}),ae.area!=="students"&&(ae.area!=="plan"||ae.planType!=="year")&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),l.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:ae.month,onChange:ge=>xe({...ae,month:ge.target.value}),children:xw.map(ge=>l.jsx("option",{value:ge.value,children:ge.label},ge.value))})]}),(ae.area!=="plan"||ae.planType==="week")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),l.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:ae.week,onChange:ge=>xe({...ae,week:ge.target.value}),children:H3.map(ge=>l.jsx("option",{value:ge.value,children:ge.label},ge.value))})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ae.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:ae.name,onChange:ge=>xe({...ae,name:ge.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:Le,onDragOver:ge=>ge.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Pe?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:st}),Pe?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(lr,{className:"h-10 w-10 text-amber-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:Pe.name}),l.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(Pe.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:l.jsx(qd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),l.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:ae.note,onChange:ge=>xe({...ae,note:ge.target.value})})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>De(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:Zt,disabled:!Pe||!ae.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(rn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},F3=()=>{const s=Ms(),{login:e,isAuthenticated:n}=ps();R.useEffect(()=>{n&&s("/")},[n,s]),R.useEffect(()=>{(async()=>{try{const G=it(Ee,"app_settings","login_background"),X=await mr(G);X.exists()&&X.data().imageUrl&&L(X.data().imageUrl)}catch(G){console.error("Error fetching background:",G)}})()},[]);const[a,o]=R.useState(""),[u,h]=R.useState("");R.useEffect(()=>{(async()=>{try{const G=it(Ee,"app_settings","system_logo"),X=await mr(G);X.exists()&&X.data().imageUrl&&o(X.data().imageUrl);const de=it(Ee,"app_settings","certification_logo"),pe=await mr(de);pe.exists()&&pe.data().imageUrl&&h(pe.data().imageUrl)}catch(G){console.error("Error fetching logo:",G)}})()},[]);const[g,y]=R.useState(!1),[p,b]=R.useState(!1),[w,T]=R.useState(""),[C,B]=R.useState({username:"",password:""}),[H,L]=R.useState("/login-background.jpg"),J=async te=>{te.preventDefault(),b(!0),T("");const G=await e(C.username,C.password);b(!1),G||T("Tn ng nhp hoc mt khu khng ng.")};return l.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("img",{src:H,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),l.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:l.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:a?l.jsx("img",{src:a,alt:"Logo",className:"h-12 w-12 object-contain"}):l.jsx(Bp,{className:"h-12 w-12 text-blue-900"})}),l.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:qw}),l.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),w&&l.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),w]}),l.jsxs("form",{onSubmit:J,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Zl,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),l.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:C.username,onChange:te=>B({...C,username:te.target.value})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(ao,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),l.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:C.password,onChange:te=>B({...C,password:te.target.value})}),l.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>y(!g),children:g?l.jsx(Zg,{className:"h-5 w-5"}):l.jsx(Yc,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),l.jsx("div",{className:"text-sm",children:l.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),l.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):l.jsxs(l.Fragment,{children:["ng nhp",l.jsx(bd,{className:"h-4 w-4"})]})})]}),l.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[l.jsx(vA,{className:"h-3 w-3"}),l.jsxs("span",{children:["H tr k thut: ",l.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),u&&l.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:l.jsx("img",{src:u,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},G3=()=>l.jsx(b3,{children:l.jsx(w3,{children:l.jsx(sS,{children:l.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[l.jsx(T3,{}),l.jsx("main",{className:"flex-grow",children:l.jsxs(Oj,{children:[l.jsx(rr,{path:"/",element:l.jsx(j3,{})}),l.jsx(rr,{path:"/login",element:l.jsx(F3,{})}),l.jsx(rr,{path:"/van-ban-chi-dao",element:l.jsx(A3,{})}),l.jsx(rr,{path:"/van-ban-truong",element:l.jsx(C3,{})}),l.jsx(rr,{path:"/quan-tri-he-thong",element:l.jsx(I3,{})}),l.jsx(rr,{path:"/to-van-phong-ke-hoach",element:l.jsx(P3,{})}),l.jsx(rr,{path:"/to-van-phong-thuc-don",element:l.jsx(U3,{})}),l.jsx(rr,{path:"/to-chuyen-mon-ke-hoach",element:l.jsx(z3,{})}),l.jsx(rr,{path:"/class/:classId",element:l.jsx(q3,{})})]})})]})})})}),tE=document.getElementById("root");if(!tE)throw new Error("Could not find root element to mount to");const K3=H2.createRoot(tE);K3.render(l.jsx(ir.StrictMode,{children:l.jsx(G3,{})}));
