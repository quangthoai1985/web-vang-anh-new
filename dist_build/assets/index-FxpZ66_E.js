(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Aw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cg={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function zE(){if(xv)return Mc;xv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return Mc.Fragment=e,Mc.jsx=n,Mc.jsxs=n,Mc}var yv;function BE(){return yv||(yv=1,Cg.exports=zE()),Cg.exports}var l=BE(),Rg={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function HE(){if(bv)return Ue;bv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,U={};function J(L,re,ge){this.props=L,this.context=re,this.refs=U,this.updater=ge||B}J.prototype.isReactComponent={},J.prototype.setState=function(L,re){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,re,"setState")},J.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ne(){}ne.prototype=J.prototype;function q(L,re,ge){this.props=L,this.context=re,this.refs=U,this.updater=ge||B}var Y=q.prototype=new ne;Y.constructor=q,H(Y,J.prototype),Y.isPureReactComponent=!0;var de=Array.isArray;function pe(){}var j={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function A(L,re,ge){var Q=ge.ref;return{$$typeof:s,type:L,key:re,ref:Q!==void 0?Q:null,props:ge}}function P(L,re){return A(L.type,re,L.props)}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function D(L){var re={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ge){return re[ge]})}var I=/\/+/g;function Ce(L,re){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):re.toString(36)}function Ve(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(pe,pe):(L.status="pending",L.then(function(re){L.status==="pending"&&(L.status="fulfilled",L.value=re)},function(re){L.status==="pending"&&(L.status="rejected",L.reason=re)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function te(L,re,ge,Q,me){var M=typeof L;(M==="undefined"||M==="boolean")&&(L=null);var k=!1;if(L===null)k=!0;else switch(M){case"bigint":case"string":case"number":k=!0;break;case"object":switch(L.$$typeof){case s:case e:k=!0;break;case b:return k=L._init,te(k(L._payload),re,ge,Q,me)}}if(k)return me=me(L),k=Q===""?"."+Ce(L,0):Q,de(me)?(ge="",k!=null&&(ge=k.replace(I,"$&/")+"/"),te(me,re,ge,"",function(W){return W})):me!=null&&(O(me)&&(me=P(me,ge+(me.key==null||L&&L.key===me.key?"":(""+me.key).replace(I,"$&/")+"/")+k)),re.push(me)),1;k=0;var Z=Q===""?".":Q+":";if(de(L))for(var he=0;he<L.length;he++)Q=L[he],M=Z+Ce(Q,he),k+=te(Q,re,ge,M,me);else if(he=R(L),typeof he=="function")for(L=he.call(L),he=0;!(Q=L.next()).done;)Q=Q.value,M=Z+Ce(Q,he++),k+=te(Q,re,ge,M,me);else if(M==="object"){if(typeof L.then=="function")return te(Ve(L),re,ge,Q,me);throw re=String(L),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return k}function ie(L,re,ge){if(L==null)return L;var Q=[],me=0;return te(L,Q,"","",function(M){return re.call(ge,M,me++)}),Q}function ye(L){if(L._status===-1){var re=L._result;re=re(),re.then(function(ge){(L._status===0||L._status===-1)&&(L._status=1,L._result=ge)},function(ge){(L._status===0||L._status===-1)&&(L._status=2,L._result=ge)}),L._status===-1&&(L._status=0,L._result=re)}if(L._status===1)return L._result.default;throw L._result}var Re=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Me={map:ie,forEach:function(L,re,ge){ie(L,function(){re.apply(this,arguments)},ge)},count:function(L){var re=0;return ie(L,function(){re++}),re},toArray:function(L){return ie(L,function(re){return re})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ue.Activity=w,Ue.Children=Me,Ue.Component=J,Ue.Fragment=n,Ue.Profiler=o,Ue.PureComponent=q,Ue.StrictMode=a,Ue.Suspense=x,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(L){return j.H.useMemoCache(L)}},Ue.cache=function(L){return function(){return L.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(L,re,ge){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Q=H({},L.props),me=L.key;if(re!=null)for(M in re.key!==void 0&&(me=""+re.key),re)!N.call(re,M)||M==="key"||M==="__self"||M==="__source"||M==="ref"&&re.ref===void 0||(Q[M]=re[M]);var M=arguments.length-2;if(M===1)Q.children=ge;else if(1<M){for(var k=Array(M),Z=0;Z<M;Z++)k[Z]=arguments[Z+2];Q.children=k}return A(L.type,me,Q)},Ue.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Ue.createElement=function(L,re,ge){var Q,me={},M=null;if(re!=null)for(Q in re.key!==void 0&&(M=""+re.key),re)N.call(re,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(me[Q]=re[Q]);var k=arguments.length-2;if(k===1)me.children=ge;else if(1<k){for(var Z=Array(k),he=0;he<k;he++)Z[he]=arguments[he+2];me.children=Z}if(L&&L.defaultProps)for(Q in k=L.defaultProps,k)me[Q]===void 0&&(me[Q]=k[Q]);return A(L,M,me)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(L){return{$$typeof:g,render:L}},Ue.isValidElement=O,Ue.lazy=function(L){return{$$typeof:b,_payload:{_status:-1,_result:L},_init:ye}},Ue.memo=function(L,re){return{$$typeof:p,type:L,compare:re===void 0?null:re}},Ue.startTransition=function(L){var re=j.T,ge={};j.T=ge;try{var Q=L(),me=j.S;me!==null&&me(ge,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(pe,Re)}catch(M){Re(M)}finally{re!==null&&ge.types!==null&&(re.types=ge.types),j.T=re}},Ue.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ue.use=function(L){return j.H.use(L)},Ue.useActionState=function(L,re,ge){return j.H.useActionState(L,re,ge)},Ue.useCallback=function(L,re){return j.H.useCallback(L,re)},Ue.useContext=function(L){return j.H.useContext(L)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(L,re){return j.H.useDeferredValue(L,re)},Ue.useEffect=function(L,re){return j.H.useEffect(L,re)},Ue.useEffectEvent=function(L){return j.H.useEffectEvent(L)},Ue.useId=function(){return j.H.useId()},Ue.useImperativeHandle=function(L,re,ge){return j.H.useImperativeHandle(L,re,ge)},Ue.useInsertionEffect=function(L,re){return j.H.useInsertionEffect(L,re)},Ue.useLayoutEffect=function(L,re){return j.H.useLayoutEffect(L,re)},Ue.useMemo=function(L,re){return j.H.useMemo(L,re)},Ue.useOptimistic=function(L,re){return j.H.useOptimistic(L,re)},Ue.useReducer=function(L,re,ge){return j.H.useReducer(L,re,ge)},Ue.useRef=function(L){return j.H.useRef(L)},Ue.useState=function(L){return j.H.useState(L)},Ue.useSyncExternalStore=function(L,re,ge){return j.H.useSyncExternalStore(L,re,ge)},Ue.useTransition=function(){return j.H.useTransition()},Ue.version="19.2.0",Ue}var vv;function Lp(){return vv||(vv=1,Rg.exports=HE()),Rg.exports}var C=Lp();const fr=Aw(C);var Ig={exports:{}},Vc={},kg={exports:{}},Dg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function FE(){return _v||(_v=1,(function(s){function e(te,ie){var ye=te.length;te.push(ie);e:for(;0<ye;){var Re=ye-1>>>1,Me=te[Re];if(0<o(Me,ie))te[Re]=ie,te[ye]=Me,ye=Re;else break e}}function n(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var ie=te[0],ye=te.pop();if(ye!==ie){te[0]=ye;e:for(var Re=0,Me=te.length,L=Me>>>1;Re<L;){var re=2*(Re+1)-1,ge=te[re],Q=re+1,me=te[Q];if(0>o(ge,ye))Q<Me&&0>o(me,ge)?(te[Re]=me,te[Q]=ye,Re=Q):(te[Re]=ge,te[re]=ye,Re=re);else if(Q<Me&&0>o(me,ye))te[Re]=me,te[Q]=ye,Re=Q;else break e}}return ie}function o(te,ie){var ye=te.sortIndex-ie.sortIndex;return ye!==0?ye:te.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var x=[],p=[],b=1,w=null,T=3,R=!1,B=!1,H=!1,U=!1,J=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Y(te){for(var ie=n(p);ie!==null;){if(ie.callback===null)a(p);else if(ie.startTime<=te)a(p),ie.sortIndex=ie.expirationTime,e(x,ie);else break;ie=n(p)}}function de(te){if(H=!1,Y(te),!B)if(n(x)!==null)B=!0,pe||(pe=!0,D());else{var ie=n(p);ie!==null&&Ve(de,ie.startTime-te)}}var pe=!1,j=-1,N=5,A=-1;function P(){return U?!0:!(s.unstable_now()-A<N)}function O(){if(U=!1,pe){var te=s.unstable_now();A=te;var ie=!0;try{e:{B=!1,H&&(H=!1,ne(j),j=-1),R=!0;var ye=T;try{t:{for(Y(te),w=n(x);w!==null&&!(w.expirationTime>te&&P());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,T=w.priorityLevel;var Me=Re(w.expirationTime<=te);if(te=s.unstable_now(),typeof Me=="function"){w.callback=Me,Y(te),ie=!0;break t}w===n(x)&&a(x),Y(te)}else a(x);w=n(x)}if(w!==null)ie=!0;else{var L=n(p);L!==null&&Ve(de,L.startTime-te),ie=!1}}break e}finally{w=null,T=ye,R=!1}ie=void 0}}finally{ie?D():pe=!1}}}var D;if(typeof q=="function")D=function(){q(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ce=I.port2;I.port1.onmessage=O,D=function(){Ce.postMessage(null)}}else D=function(){J(O,0)};function Ve(te,ie){j=J(function(){te(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(te){switch(T){case 1:case 2:case 3:var ie=3;break;default:ie=T}var ye=T;T=ie;try{return te()}finally{T=ye}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(te,ie){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ye=T;T=te;try{return ie()}finally{T=ye}},s.unstable_scheduleCallback=function(te,ie,ye){var Re=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Re+ye:Re):ye=Re,te){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ye+Me,te={id:b++,callback:ie,priorityLevel:te,startTime:ye,expirationTime:Me,sortIndex:-1},ye>Re?(te.sortIndex=ye,e(p,te),n(x)===null&&te===n(p)&&(H?(ne(j),j=-1):H=!0,Ve(de,ye-Re))):(te.sortIndex=Me,e(x,te),B||R||(B=!0,pe||(pe=!0,D()))),te},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(te){var ie=T;return function(){var ye=T;T=ie;try{return te.apply(this,arguments)}finally{T=ye}}}})(Dg)),Dg}var wv;function qE(){return wv||(wv=1,kg.exports=FE()),kg.exports}var Og={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function GE(){if(Nv)return Nn;Nv=1;var s=Lp();function e(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(x,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:x,containerInfo:p,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Nn.createPortal=function(x,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(x,p,null,b)},Nn.flushSync=function(x){var p=h.T,b=a.p;try{if(h.T=null,a.p=2,x)return x()}finally{h.T=p,a.p=b,a.d.f()}},Nn.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(x,p))},Nn.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},Nn.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:R}):b==="script"&&a.d.X(x,{crossOrigin:w,integrity:T,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Nn.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);a.d.M(x,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(x)},Nn.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);a.d.L(x,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Nn.preloadModule=function(x,p){if(typeof x=="string")if(p){var b=g(p.as,p.crossOrigin);a.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(x)},Nn.requestFormReset=function(x){a.d.r(x)},Nn.unstable_batchedUpdates=function(x,p){return x(p)},Nn.useFormState=function(x,p,b){return h.H.useFormState(x,p,b)},Nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var Tv;function KE(){if(Tv)return Og.exports;Tv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Og.exports=GE(),Og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function $E(){if(Ev)return Vc;Ev=1;var s=qE(),e=Lp(),n=KE();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(a(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var i=t,c=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return x(f),t;if(m===c)return x(f),r;m=m.sibling}throw Error(a(188))}if(i.return!==c.return)i=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===i){v=!0,i=f,c=m;break}if(E===c){v=!0,c=f,i=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===i){v=!0,i=m,c=f;break}if(E===c){v=!0,c=m,i=f;break}E=E.sibling}if(!v)throw Error(a(189))}}if(i.alternate!==c)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case J:return"Profiler";case U:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case q:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case Y:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return r=t.displayName||null,r!==null?r:Ce(t.type)||"Memo";case N:r=t._payload,t=t._init;try{return Ce(t(r))}catch{}}return null}var Ve=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Re=[],Me=-1;function L(t){return{current:t}}function re(t){0>Me||(t.current=Re[Me],Re[Me]=null,Me--)}function ge(t,r){Me++,Re[Me]=t.current,t.current=r}var Q=L(null),me=L(null),M=L(null),k=L(null);function Z(t,r){switch(ge(M,r),ge(me,t),ge(Q,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?zb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=zb(r),t=Bb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(Q),ge(Q,t)}function he(){re(Q),re(me),re(M)}function W(t){t.memoizedState!==null&&ge(k,t);var r=Q.current,i=Bb(r,t.type);r!==i&&(ge(me,t),ge(Q,i))}function _e(t){me.current===t&&(re(Q),re(me)),k.current===t&&(re(k),Ic._currentValue=ye)}var ke,Ge;function ht(t){if(ke===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);ke=r&&r[1]||"",Ge=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+t+Ge}var ln=!1;function wt(t,r){if(!t||ln)return"";ln=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(se){var X=se}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(se){X=se}t.call(ce.prototype)}}else{try{throw Error()}catch(se){X=se}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(se){if(se&&X&&typeof se.stack=="string")return[se.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var V=v.split(`
`),$=E.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===$.length)for(c=V.length-1,f=$.length-1;1<=c&&0<=f&&V[c]!==$[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==$[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==$[f]){var ae=`
`+V[c].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=c&&0<=f);break}}}finally{ln=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?ht(i):""}function rs(t,r){switch(t.tag){case 26:case 27:case 5:return ht(t.type);case 16:return ht("Lazy");case 13:return t.child!==r&&r!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return wt(t.type,!1);case 11:return wt(t.type.render,!1);case 1:return wt(t.type,!0);case 31:return ht("Activity");default:return""}}function Hs(t){try{var r="",i=null;do r+=rs(t,i),i=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Dt=Object.prototype.hasOwnProperty,Ut=s.unstable_scheduleCallback,Fs=s.unstable_cancelCallback,Mo=s.unstable_shouldYield,yi=s.unstable_requestPaint,on=s.unstable_now,fe=s.unstable_getCurrentPriorityLevel,ve=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,rt=s.unstable_NormalPriority,Pe=s.unstable_LowPriority,zt=s.unstable_IdlePriority,tt=s.log,qn=s.unstable_setDisableYieldValue,nn=null,At=null;function Tt(t){if(typeof tt=="function"&&qn(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(nn,t)}catch{}}var bt=Math.clz32?Math.clz32:ku,as=Math.log,Ns=Math.LN2;function ku(t){return t>>>=0,t===0?32:31-(as(t)/Ns|0)|0}var qs=256,bi=262144,Gt=4194304;function Gs(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ks(t,r,i){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=Gs(c):(v&=E,v!==0?f=Gs(v):i||(i=E&~t,i!==0&&(f=Gs(i))))):(E=c&~m,E!==0?f=Gs(E):v!==0?f=Gs(v):i||(i=c&~t,i!==0&&(f=Gs(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function Ts(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Df(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Du(){var t=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),t}function $s(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function vi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Of(t,r,i,c,f,m){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var E=t.entanglements,V=t.expirationTimes,$=t.hiddenUpdates;for(i=v&~i;0<i;){var ae=31-bt(i),ce=1<<ae;E[ae]=0,V[ae]=-1;var X=$[ae];if(X!==null)for($[ae]=null,ae=0;ae<X.length;ae++){var se=X[ae];se!==null&&(se.lane&=-536870913)}i&=~ce}c!==0&&_i(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~r))}function _i(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-bt(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|i&261930}function Vo(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var c=31-bt(i),f=1<<c;f&r|t[c]&r&&(t[c]|=r),i&=~f}}function Po(t,r){var i=r&-r;return i=(i&42)!==0?1:wi(i),(i&(t.suspendedLanes|r))!==0?0:i}function wi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Dr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ou(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:uv(t.type))}function Es(t,r){var i=ie.p;try{return ie.p=t,r()}finally{ie.p=i}}var js=Math.random().toString(36).slice(2),Kt="__reactFiber$"+js,cn="__reactProps$"+js,Qs="__reactContainer$"+js,fl="__reactEvents$"+js,Mf="__reactListeners$"+js,Mu="__reactHandles$"+js,Vu="__reactResources$"+js,Ys="__reactMarker$"+js;function ml(t){delete t[Kt],delete t[cn],delete t[fl],delete t[Mf],delete t[Mu]}function Xs(t){var r=t[Kt];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Qs]||i[Kt]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Qb(t);t!==null;){if(i=t[Kt])return i;t=Qb(t)}return r}t=i,i=t.parentNode}return null}function is(t){if(t=t[Kt]||t[Qs]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Gn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function Ws(t){var r=t[Vu];return r||(r=t[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function $t(t){t[Ys]=!0}var Lo=new Set,Uo={};function Js(t,r){Zs(t,r),Zs(t+"Capture",r)}function Zs(t,r){for(Uo[t]=r,t=0;t<r.length;t++)Lo.add(r[t])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bo={},Ho={};function Pu(t){return Dt.call(Ho,t)?!0:Dt.call(Bo,t)?!1:zo.test(t)?Ho[t]=!0:(Bo[t]=!0,!1)}function gl(t,r,i){if(Pu(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Kn(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function Qt(t,r,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+c)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ya(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Fo(t,r,i){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){i=""+v,m.call(this,v)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function dt(t){if(!t._valueTracker){var r=ya(t)?"checked":"value";t._valueTracker=Fo(t,r,""+t[r])}}function Ni(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return t&&(c=ya(t)?t.checked?"true":"false":t.value),t=c,t!==i?(r.setValue(t),!0):!1}function er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ti=/[\n"\\]/g;function On(t){return t.replace(Ti,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function pl(t,r,i,c,f,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+un(r)):t.value!==""+un(r)&&(t.value=""+un(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?qo(t,v,un(r)):i!=null?qo(t,v,un(i)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+un(E):t.removeAttribute("name")}function Lu(t,r,i,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){dt(t);return}i=i!=null?""+un(i):"",r=r!=null?""+un(r):i,E||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=E?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),dt(t)}function qo(t,r,i){r==="number"&&er(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function ba(t,r,i,c){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&c&&(t[i].defaultSelected=!0)}else{for(i=""+un(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Uu(t,r,i){if(r!=null&&(r=""+un(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+un(i):""}function va(t,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(a(92));if(Ve(c)){if(1<c.length)throw Error(a(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=un(r),t.defaultValue=i,c=t.textContent,c===i&&c!==""&&c!==null&&(t.value=c),dt(t)}function Mn(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Go(t,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,i):typeof i!="number"||i===0||zu.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Ko(t,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&i[f]!==c&&Go(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Go(t,m,r[m])}function xl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(t){return _a.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ss(){}var $o=null;function ls(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wa=null,tr=null;function Ei(t){var r=is(t);if(r&&(t=r.stateNode)){var i=t[cn]||null;e:switch(t=r.stateNode,r.type){case"input":if(pl(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+On(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==t&&c.form===t.form){var f=c[cn]||null;if(!f)throw Error(a(90));pl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===t.form&&Ni(c)}break e;case"textarea":Uu(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&ba(t,!!i.multiple,r,!1)}}}var bl=!1;function Na(t,r,i){if(bl)return t(r,i);bl=!0;try{var c=t(r);return c}finally{if(bl=!1,(wa!==null||tr!==null)&&(Oh(),wa&&(r=wa,t=tr,tr=wa=null,Ei(r),t)))for(r=0;r<t.length;r++)Ei(t[r])}}function As(t,r){var i=t.stateNode;if(i===null)return null;var c=i[cn]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ji=!1;if(os)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){ji=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{ji=!1}var nr=null,Qo=null,Si=null;function Yo(){if(Si)return Si;var t,r=Qo,i=r.length,c,f="value"in nr?nr.value:nr.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var v=i-t;for(c=1;c<=v&&r[i-c]===f[m-c];c++);return Si=f.slice(t,1<c?1-c:void 0)}function Ai(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Or(){return!0}function Cs(){return!1}function gn(t){function r(i,c,f,m,v){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(i=t[E],this[E]=i?i(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Or:Cs,this.isPropagationStopped=Cs,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),r}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=gn(Mr),Ta=w({},Mr,{view:0,detail:0}),Xo=gn(Ta),Ea,vl,rr,_l=w({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ja,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rr&&(rr&&t.type==="mousemove"?(Ea=t.screenX-rr.screenX,vl=t.screenY-rr.screenY):vl=Ea=0,rr=t),Ea)},movementY:function(t){return"movementY"in t?t.movementY:vl}}),Wo=gn(_l),Ci=w({},_l,{dataTransfer:0}),Hu=gn(Ci),Fu=w({},Ta,{relatedTarget:0}),Ri=gn(Fu),Jo=w({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=gn(Jo),wl=w({},Mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gu=gn(wl),Ku=w({},Mr,{data:0}),ar=gn(Ku),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Yu[t])?!!r[t]:!1}function ja(){return Xu}var An=w({},Ta,{key:function(t){if(t.key){var r=$u[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ja,charCode:function(t){return t.type==="keypress"?Ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wu=gn(An),Ju=w({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=gn(Ju),d=w({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ja}),y=gn(d),_=w({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=gn(_),G=w({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=gn(G),xe=w({},Mr,{newState:0,oldState:0}),Be=gn(xe),Bt=[9,13,27,32],lt=os&&"CompositionEvent"in window,Ct=null;os&&"documentMode"in document&&(Ct=document.documentMode);var cs=os&&"TextEvent"in window&&!Ct,ir=os&&(!lt||Ct&&8<Ct&&11>=Ct),Rs=" ",Is=!1;function Ii(t,r){switch(t){case"keyup":return Bt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tl=!1;function u2(t,r){switch(t){case"compositionend":return Nl(r);case"keypress":return r.which!==32?null:(Is=!0,Rs);case"textInput":return t=r.data,t===Rs&&Is?null:t;default:return null}}function h2(t,r){if(Tl)return t==="compositionend"||!lt&&Ii(t,r)?(t=Yo(),Si=Qo=nr=null,Tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ir&&r.locale!=="ko"?null:r.data;default:return null}}var d2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!d2[t.type]:r==="textarea"}function J0(t,r,i,c){wa?tr?tr.push(c):tr=[c]:wa=c,r=Bh(r,"onChange"),0<r.length&&(i=new sr("onChange","change",null,i,c),t.push({event:i,listeners:r}))}var Zo=null,ec=null;function f2(t){Ob(t,0)}function Zu(t){var r=Gn(t);if(Ni(r))return t}function Z0(t,r){if(t==="change")return r}var ex=!1;if(os){var Vf;if(os){var Pf="oninput"in document;if(!Pf){var tx=document.createElement("div");tx.setAttribute("oninput","return;"),Pf=typeof tx.oninput=="function"}Vf=Pf}else Vf=!1;ex=Vf&&(!document.documentMode||9<document.documentMode)}function nx(){Zo&&(Zo.detachEvent("onpropertychange",sx),ec=Zo=null)}function sx(t){if(t.propertyName==="value"&&Zu(ec)){var r=[];J0(r,ec,t,ls(t)),Na(f2,r)}}function m2(t,r,i){t==="focusin"?(nx(),Zo=r,ec=i,Zo.attachEvent("onpropertychange",sx)):t==="focusout"&&nx()}function g2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(ec)}function p2(t,r){if(t==="click")return Zu(r)}function x2(t,r){if(t==="input"||t==="change")return Zu(r)}function y2(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var $n=typeof Object.is=="function"?Object.is:y2;function tc(t,r){if($n(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!Dt.call(r,f)||!$n(t[f],r[f]))return!1}return!0}function rx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ax(t,r){var i=rx(t);t=0;for(var c;i;){if(i.nodeType===3){if(c=t+i.textContent.length,t<=r&&c>=r)return{node:i,offset:r-t};t=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=rx(i)}}function ix(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ix(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function lx(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=er(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=er(t.document)}return r}function Lf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var b2=os&&"documentMode"in document&&11>=document.documentMode,El=null,Uf=null,nc=null,zf=!1;function ox(t,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;zf||El==null||El!==er(c)||(c=El,"selectionStart"in c&&Lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nc&&tc(nc,c)||(nc=c,c=Bh(Uf,"onSelect"),0<c.length&&(r=new sr("onSelect","select",null,r,i),t.push({event:r,listeners:c}),r.target=El)))}function ki(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var jl={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Bf={},cx={};os&&(cx=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Di(t){if(Bf[t])return Bf[t];if(!jl[t])return t;var r=jl[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in cx)return Bf[t]=r[i];return t}var ux=Di("animationend"),hx=Di("animationiteration"),dx=Di("animationstart"),v2=Di("transitionrun"),_2=Di("transitionstart"),w2=Di("transitioncancel"),fx=Di("transitionend"),mx=new Map,Hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hf.push("scrollEnd");function ks(t,r){mx.set(t,r),Js(r,[t])}var eh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},us=[],Sl=0,Ff=0;function th(){for(var t=Sl,r=Ff=Sl=0;r<t;){var i=us[r];us[r++]=null;var c=us[r];us[r++]=null;var f=us[r];us[r++]=null;var m=us[r];if(us[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&gx(i,f,m)}}function nh(t,r,i,c){us[Sl++]=t,us[Sl++]=r,us[Sl++]=i,us[Sl++]=c,Ff|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function qf(t,r,i,c){return nh(t,r,i,c),sh(t)}function Oi(t,r){return nh(t,null,null,r),sh(t)}function gx(t,r,i){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,c=m.alternate,c!==null&&(c.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-bt(i),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=i|536870912),m):null}function sh(t){if(50<Tc)throw Tc=0,Zm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Al={};function N2(t,r,i,c){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,r,i,c){return new N2(t,r,i,c)}function Gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pr(t,r){var i=t.alternate;return i===null?(i=Qn(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function px(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function rh(t,r,i,c,f,m){var v=0;if(c=t,typeof t=="function")Gf(t)&&(v=1);else if(typeof t=="string")v=AE(t,i,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Qn(31,i,r,f),t.elementType=A,t.lanes=m,t;case H:return Mi(i.children,f,m,r);case U:v=8,f|=24;break;case J:return t=Qn(12,i,r,f|2),t.elementType=J,t.lanes=m,t;case de:return t=Qn(13,i,r,f),t.elementType=de,t.lanes=m,t;case pe:return t=Qn(19,i,r,f),t.elementType=pe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:v=10;break e;case ne:v=9;break e;case Y:v=11;break e;case j:v=14;break e;case N:v=16,c=null;break e}v=29,i=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Qn(v,i,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Mi(t,r,i,c){return t=Qn(7,t,c,r),t.lanes=i,t}function Kf(t,r,i){return t=Qn(6,t,null,r),t.lanes=i,t}function xx(t){var r=Qn(18,null,null,0);return r.stateNode=t,r}function $f(t,r,i){return r=Qn(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var yx=new WeakMap;function hs(t,r){if(typeof t=="object"&&t!==null){var i=yx.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Hs(r)},yx.set(t,r),r)}return{value:t,source:r,stack:Hs(r)}}var Cl=[],Rl=0,ah=null,sc=0,ds=[],fs=0,Sa=null,lr=1,or="";function Lr(t,r){Cl[Rl++]=sc,Cl[Rl++]=ah,ah=t,sc=r}function bx(t,r,i){ds[fs++]=lr,ds[fs++]=or,ds[fs++]=Sa,Sa=t;var c=lr;t=or;var f=32-bt(c)-1;c&=~(1<<f),i+=1;var m=32-bt(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,lr=1<<32-bt(r)+f|i<<f|c,or=m+t}else lr=1<<m|i<<f|c,or=t}function Qf(t){t.return!==null&&(Lr(t,1),bx(t,1,0))}function Yf(t){for(;t===ah;)ah=Cl[--Rl],Cl[Rl]=null,sc=Cl[--Rl],Cl[Rl]=null;for(;t===Sa;)Sa=ds[--fs],ds[fs]=null,or=ds[--fs],ds[fs]=null,lr=ds[--fs],ds[fs]=null}function vx(t,r){ds[fs++]=lr,ds[fs++]=or,ds[fs++]=Sa,lr=r.id,or=r.overflow,Sa=t}var pn=null,Et=null,nt=!1,Aa=null,ms=!1,Xf=Error(a(519));function Ca(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rc(hs(r,t)),Xf}function _x(t){var r=t.stateNode,i=t.type,c=t.memoizedProps;switch(r[Kt]=t,r[cn]=c,i){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<jc.length;i++)$e(jc[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":$e("invalid",r),Lu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$e("invalid",r);break;case"textarea":$e("invalid",r),va(r,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||Lb(r.textContent,i)?(c.popover!=null&&($e("beforetoggle",r),$e("toggle",r)),c.onScroll!=null&&$e("scroll",r),c.onScrollEnd!=null&&$e("scrollend",r),c.onClick!=null&&(r.onclick=Ss),r=!0):r=!1,r||Ca(t,!0)}function wx(t){for(pn=t.return;pn;)switch(pn.tag){case 5:case 31:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:pn=pn.return}}function Il(t){if(t!==pn)return!1;if(!nt)return wx(t),nt=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||mg(t.type,t.memoizedProps)),i=!i),i&&Et&&Ca(t),wx(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Et=$b(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Et=$b(t)}else r===27?(r=Et,Fa(t.type)?(t=bg,bg=null,Et=t):Et=r):Et=pn?ps(t.stateNode.nextSibling):null;return!0}function Vi(){Et=pn=null,nt=!1}function Wf(){var t=Aa;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),Aa=null),t}function rc(t){Aa===null?Aa=[t]:Aa.push(t)}var Jf=L(null),Pi=null,Ur=null;function Ra(t,r,i){ge(Jf,r._currentValue),r._currentValue=i}function zr(t){t._currentValue=Jf.current,re(Jf)}function Zf(t,r,i){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===i)break;t=t.return}}function em(t,r,i,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var V=0;V<r.length;V++)if(E.context===r[V]){m.lanes|=i,E=m.alternate,E!==null&&(E.lanes|=i),Zf(m.return,i,t),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=i,m=v.alternate,m!==null&&(m.lanes|=i),Zf(v,i,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function kl(t,r,i,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var E=f.type;$n(f.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(f===k.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ic):t=[Ic])}f=f.return}t!==null&&em(r,t,i,c),r.flags|=262144}function ih(t){for(t=t.firstContext;t!==null;){if(!$n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Li(t){Pi=t,Ur=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xn(t){return Nx(Pi,t)}function lh(t,r){return Pi===null&&Li(t),Nx(t,r)}function Nx(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},Ur===null){if(t===null)throw Error(a(308));Ur=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ur=Ur.next=r;return i}var T2=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},E2=s.unstable_scheduleCallback,j2=s.unstable_NormalPriority,Yt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new T2,data:new Map,refCount:0}}function ac(t){t.refCount--,t.refCount===0&&E2(j2,function(){t.controller.abort()})}var ic=null,nm=0,Dl=0,Ol=null;function S2(t,r){if(ic===null){var i=ic=[];nm=0,Dl=ag(),Ol={status:"pending",value:void 0,then:function(c){i.push(c)}}}return nm++,r.then(Tx,Tx),r}function Tx(){if(--nm===0&&ic!==null){Ol!==null&&(Ol.status="fulfilled");var t=ic;ic=null,Dl=0,Ol=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function A2(t,r){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var Ex=te.S;te.S=function(t,r){ob=on(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&S2(t,r),Ex!==null&&Ex(t,r)};var Ui=L(null);function sm(){var t=Ui.current;return t!==null?t:vt.pooledCache}function oh(t,r){r===null?ge(Ui,Ui.current):ge(Ui,r.pool)}function jx(){var t=sm();return t===null?null:{parent:Yt._currentValue,pool:t}}var Ml=Error(a(460)),rm=Error(a(474)),ch=Error(a(542)),uh={then:function(){}};function Sx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ax(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(Ss,Ss),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Rx(t),t;default:if(typeof r.status=="string")r.then(Ss,Ss);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Rx(t),t}throw Bi=r,Ml}}function zi(t){try{var r=t._init;return r(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Bi=i,Ml):i}}var Bi=null;function Cx(){if(Bi===null)throw Error(a(459));var t=Bi;return Bi=null,t}function Rx(t){if(t===Ml||t===ch)throw Error(a(483))}var Vl=null,lc=0;function hh(t){var r=lc;return lc+=1,Vl===null&&(Vl=[]),Ax(Vl,t,r)}function oc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function dh(t,r){throw r.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Ix(t){function r(F,z){if(t){var K=F.deletions;K===null?(F.deletions=[z],F.flags|=16):K.push(z)}}function i(F,z){if(!t)return null;for(;z!==null;)r(F,z),z=z.sibling;return null}function c(F){for(var z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function f(F,z){return F=Pr(F,z),F.index=0,F.sibling=null,F}function m(F,z,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<z?(F.flags|=67108866,z):K):(F.flags|=67108866,z)):(F.flags|=1048576,z)}function v(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function E(F,z,K,le){return z===null||z.tag!==6?(z=Kf(K,F.mode,le),z.return=F,z):(z=f(z,K),z.return=F,z)}function V(F,z,K,le){var Se=K.type;return Se===H?ae(F,z,K.props.children,le,K.key):z!==null&&(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&zi(Se)===z.type)?(z=f(z,K.props),oc(z,K),z.return=F,z):(z=rh(K.type,K.key,K.props,null,F.mode,le),oc(z,K),z.return=F,z)}function $(F,z,K,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=$f(K,F.mode,le),z.return=F,z):(z=f(z,K.children||[]),z.return=F,z)}function ae(F,z,K,le,Se){return z===null||z.tag!==7?(z=Mi(K,F.mode,le,Se),z.return=F,z):(z=f(z,K),z.return=F,z)}function ce(F,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Kf(""+z,F.mode,K),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return K=rh(z.type,z.key,z.props,null,F.mode,K),oc(K,z),K.return=F,K;case B:return z=$f(z,F.mode,K),z.return=F,z;case N:return z=zi(z),ce(F,z,K)}if(Ve(z)||D(z))return z=Mi(z,F.mode,K,null),z.return=F,z;if(typeof z.then=="function")return ce(F,hh(z),K);if(z.$$typeof===q)return ce(F,lh(F,z),K);dh(F,z)}return null}function X(F,z,K,le){var Se=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Se!==null?null:E(F,z,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===Se?V(F,z,K,le):null;case B:return K.key===Se?$(F,z,K,le):null;case N:return K=zi(K),X(F,z,K,le)}if(Ve(K)||D(K))return Se!==null?null:ae(F,z,K,le,null);if(typeof K.then=="function")return X(F,z,hh(K),le);if(K.$$typeof===q)return X(F,z,lh(F,K),le);dh(F,K)}return null}function se(F,z,K,le,Se){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return F=F.get(K)||null,E(z,F,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case R:return F=F.get(le.key===null?K:le.key)||null,V(z,F,le,Se);case B:return F=F.get(le.key===null?K:le.key)||null,$(z,F,le,Se);case N:return le=zi(le),se(F,z,K,le,Se)}if(Ve(le)||D(le))return F=F.get(K)||null,ae(z,F,le,Se,null);if(typeof le.then=="function")return se(F,z,K,hh(le),Se);if(le.$$typeof===q)return se(F,z,K,lh(z,le),Se);dh(z,le)}return null}function Te(F,z,K,le){for(var Se=null,at=null,je=z,Fe=z=0,Xe=null;je!==null&&Fe<K.length;Fe++){je.index>Fe?(Xe=je,je=null):Xe=je.sibling;var it=X(F,je,K[Fe],le);if(it===null){je===null&&(je=Xe);break}t&&je&&it.alternate===null&&r(F,je),z=m(it,z,Fe),at===null?Se=it:at.sibling=it,at=it,je=Xe}if(Fe===K.length)return i(F,je),nt&&Lr(F,Fe),Se;if(je===null){for(;Fe<K.length;Fe++)je=ce(F,K[Fe],le),je!==null&&(z=m(je,z,Fe),at===null?Se=je:at.sibling=je,at=je);return nt&&Lr(F,Fe),Se}for(je=c(je);Fe<K.length;Fe++)Xe=se(je,F,Fe,K[Fe],le),Xe!==null&&(t&&Xe.alternate!==null&&je.delete(Xe.key===null?Fe:Xe.key),z=m(Xe,z,Fe),at===null?Se=Xe:at.sibling=Xe,at=Xe);return t&&je.forEach(function(Qa){return r(F,Qa)}),nt&&Lr(F,Fe),Se}function Ie(F,z,K,le){if(K==null)throw Error(a(151));for(var Se=null,at=null,je=z,Fe=z=0,Xe=null,it=K.next();je!==null&&!it.done;Fe++,it=K.next()){je.index>Fe?(Xe=je,je=null):Xe=je.sibling;var Qa=X(F,je,it.value,le);if(Qa===null){je===null&&(je=Xe);break}t&&je&&Qa.alternate===null&&r(F,je),z=m(Qa,z,Fe),at===null?Se=Qa:at.sibling=Qa,at=Qa,je=Xe}if(it.done)return i(F,je),nt&&Lr(F,Fe),Se;if(je===null){for(;!it.done;Fe++,it=K.next())it=ce(F,it.value,le),it!==null&&(z=m(it,z,Fe),at===null?Se=it:at.sibling=it,at=it);return nt&&Lr(F,Fe),Se}for(je=c(je);!it.done;Fe++,it=K.next())it=se(je,F,Fe,it.value,le),it!==null&&(t&&it.alternate!==null&&je.delete(it.key===null?Fe:it.key),z=m(it,z,Fe),at===null?Se=it:at.sibling=it,at=it);return t&&je.forEach(function(UE){return r(F,UE)}),nt&&Lr(F,Fe),Se}function yt(F,z,K,le){if(typeof K=="object"&&K!==null&&K.type===H&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var Se=K.key;z!==null;){if(z.key===Se){if(Se=K.type,Se===H){if(z.tag===7){i(F,z.sibling),le=f(z,K.props.children),le.return=F,F=le;break e}}else if(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&zi(Se)===z.type){i(F,z.sibling),le=f(z,K.props),oc(le,K),le.return=F,F=le;break e}i(F,z);break}else r(F,z);z=z.sibling}K.type===H?(le=Mi(K.props.children,F.mode,le,K.key),le.return=F,F=le):(le=rh(K.type,K.key,K.props,null,F.mode,le),oc(le,K),le.return=F,F=le)}return v(F);case B:e:{for(Se=K.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){i(F,z.sibling),le=f(z,K.children||[]),le.return=F,F=le;break e}else{i(F,z);break}else r(F,z);z=z.sibling}le=$f(K,F.mode,le),le.return=F,F=le}return v(F);case N:return K=zi(K),yt(F,z,K,le)}if(Ve(K))return Te(F,z,K,le);if(D(K)){if(Se=D(K),typeof Se!="function")throw Error(a(150));return K=Se.call(K),Ie(F,z,K,le)}if(typeof K.then=="function")return yt(F,z,hh(K),le);if(K.$$typeof===q)return yt(F,z,lh(F,K),le);dh(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(i(F,z.sibling),le=f(z,K),le.return=F,F=le):(i(F,z),le=Kf(K,F.mode,le),le.return=F,F=le),v(F)):i(F,z)}return function(F,z,K,le){try{lc=0;var Se=yt(F,z,K,le);return Vl=null,Se}catch(je){if(je===Ml||je===ch)throw je;var at=Qn(29,je,null,F.mode);return at.lanes=le,at.return=F,at}finally{}}}var Hi=Ix(!0),kx=Ix(!1),Ia=!1;function am(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ka(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Da(t,r,i){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=sh(t),gx(t,null,i),r}return nh(t,c,r,i),sh(t)}function cc(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Vo(t,i)}}function lm(t,r){var i=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var om=!1;function uc(){if(om){var t=Ol;if(t!==null)throw t}}function hc(t,r,i,c){om=!1;var f=t.updateQueue;Ia=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var V=E,$=V.next;V.next=null,v===null?m=$:v.next=$,v=V;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==v&&(E===null?ae.firstBaseUpdate=$:E.next=$,ae.lastBaseUpdate=V))}if(m!==null){var ce=f.baseState;v=0,ae=$=V=null,E=m;do{var X=E.lane&-536870913,se=X!==E.lane;if(se?(Ye&X)===X:(c&X)===X){X!==0&&X===Dl&&(om=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=t,Ie=E;X=r;var yt=i;switch(Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){ce=Te.call(yt,ce,X);break e}ce=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,X=typeof Te=="function"?Te.call(yt,ce,X):Te,X==null)break e;ce=w({},ce,X);break e;case 2:Ia=!0}}X=E.callback,X!==null&&(t.flags|=64,se&&(t.flags|=8192),se=f.callbacks,se===null?f.callbacks=[X]:se.push(X))}else se={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?($=ae=se,V=ce):ae=ae.next=se,v|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;se=E,E=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);ae===null&&(V=ce),f.baseState=V,f.firstBaseUpdate=$,f.lastBaseUpdate=ae,m===null&&(f.shared.lanes=0),La|=v,t.lanes=v,t.memoizedState=ce}}function Dx(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function Ox(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Dx(i[t],r)}var Pl=L(null),fh=L(0);function Mx(t,r){t=Yr,ge(fh,t),ge(Pl,r),Yr=t|r.baseLanes}function cm(){ge(fh,Yr),ge(Pl,Pl.current)}function um(){Yr=fh.current,re(Pl),re(fh)}var Yn=L(null),gs=null;function Oa(t){var r=t.alternate;ge(Ht,Ht.current&1),ge(Yn,t),gs===null&&(r===null||Pl.current!==null||r.memoizedState!==null)&&(gs=t)}function hm(t){ge(Ht,Ht.current),ge(Yn,t),gs===null&&(gs=t)}function Vx(t){t.tag===22?(ge(Ht,Ht.current),ge(Yn,t),gs===null&&(gs=t)):Ma()}function Ma(){ge(Ht,Ht.current),ge(Yn,Yn.current)}function Xn(t){re(Yn),gs===t&&(gs=null),re(Ht)}var Ht=L(0);function mh(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||xg(i)||yg(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Br=0,He=null,pt=null,Xt=null,gh=!1,Ll=!1,Fi=!1,ph=0,dc=0,Ul=null,C2=0;function Ot(){throw Error(a(321))}function dm(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!$n(t[i],r[i]))return!1;return!0}function fm(t,r,i,c,f,m){return Br=m,He=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=t===null||t.memoizedState===null?by:Am,Fi=!1,m=i(c,f),Fi=!1,Ll&&(m=Lx(r,i,c,f)),Px(t),m}function Px(t){te.H=gc;var r=pt!==null&&pt.next!==null;if(Br=0,Xt=pt=He=null,gh=!1,dc=0,Ul=null,r)throw Error(a(300));t===null||Wt||(t=t.dependencies,t!==null&&ih(t)&&(Wt=!0))}function Lx(t,r,i,c){He=t;var f=0;do{if(Ll&&(Ul=null),dc=0,Ll=!1,25<=f)throw Error(a(301));if(f+=1,Xt=pt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=vy,m=r(i,c)}while(Ll);return m}function R2(){var t=te.H,r=t.useState()[0];return r=typeof r.then=="function"?fc(r):r,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(He.flags|=1024),r}function mm(){var t=ph!==0;return ph=0,t}function gm(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function pm(t){if(gh){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gh=!1}Br=0,Xt=pt=He=null,Ll=!1,dc=ph=0,Ul=null}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?He.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Ft(){if(pt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var r=Xt===null?He.memoizedState:Xt.next;if(r!==null)Xt=r,pt=t;else{if(t===null)throw He.alternate===null?Error(a(467)):Error(a(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Xt===null?He.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(t){var r=dc;return dc+=1,Ul===null&&(Ul=[]),t=Ax(Ul,t,r),r=He,(Xt===null?r.memoizedState:Xt.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?by:Am),t}function yh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fc(t);if(t.$$typeof===q)return xn(t)}throw Error(a(438,String(t)))}function xm(t){var r=null,i=He.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=He.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=xh(),He.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),c=0;c<t;c++)i[c]=P;return r.index++,i}function Hr(t,r){return typeof r=="function"?r(t):r}function bh(t){var r=Ft();return ym(r,pt,t)}function ym(t,r,i){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var E=v=null,V=null,$=r,ae=!1;do{var ce=$.lane&-536870913;if(ce!==$.lane?(Ye&ce)===ce:(Br&ce)===ce){var X=$.revertLane;if(X===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ce===Dl&&(ae=!0);else if((Br&X)===X){$=$.next,X===Dl&&(ae=!0);continue}else ce={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(E=V=ce,v=m):V=V.next=ce,He.lanes|=X,La|=X;ce=$.action,Fi&&i(m,ce),m=$.hasEagerState?$.eagerState:i(m,ce)}else X={lane:ce,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(E=V=X,v=m):V=V.next=X,He.lanes|=ce,La|=ce;$=$.next}while($!==null&&$!==r);if(V===null?v=m:V.next=E,!$n(m,t.memoizedState)&&(Wt=!0,ae&&(i=Ol,i!==null)))throw i;t.memoizedState=m,t.baseState=v,t.baseQueue=V,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function bm(t){var r=Ft(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var c=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);$n(m,r.memoizedState)||(Wt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,c]}function Ux(t,r,i){var c=He,f=Ft(),m=nt;if(m){if(i===void 0)throw Error(a(407));i=i()}else i=r();var v=!$n((pt||f).memoizedState,i);if(v&&(f.memoizedState=i,Wt=!0),f=f.queue,wm(Hx.bind(null,c,f,t),[t]),f.getSnapshot!==r||v||Xt!==null&&Xt.memoizedState.tag&1){if(c.flags|=2048,zl(9,{destroy:void 0},Bx.bind(null,c,f,i,r),null),vt===null)throw Error(a(349));m||(Br&127)!==0||zx(c,r,i)}return i}function zx(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=He.updateQueue,r===null?(r=xh(),He.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function Bx(t,r,i,c){r.value=i,r.getSnapshot=c,Fx(r)&&qx(t)}function Hx(t,r,i){return i(function(){Fx(r)&&qx(t)})}function Fx(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!$n(t,i)}catch{return!0}}function qx(t){var r=Oi(t,2);r!==null&&zn(r,t,2)}function vm(t){var r=Cn();if(typeof t=="function"){var i=t;if(t=i(),Fi){Tt(!0);try{i()}finally{Tt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:t},r}function Gx(t,r,i,c){return t.baseState=i,ym(t,pt,typeof c=="function"?c:Hr)}function I2(t,r,i,c,f){if(wh(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};te.T!==null?i(!0):m.isTransition=!1,c(m),i=r.pending,i===null?(m.next=r.pending=m,Kx(r,m)):(m.next=i.next,r.pending=i.next=m)}}function Kx(t,r){var i=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=te.T,v={};te.T=v;try{var E=i(f,c),V=te.S;V!==null&&V(v,E),$x(t,r,E)}catch($){_m(t,r,$)}finally{m!==null&&v.types!==null&&(m.types=v.types),te.T=m}}else try{m=i(f,c),$x(t,r,m)}catch($){_m(t,r,$)}}function $x(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){Qx(t,r,c)},function(c){return _m(t,r,c)}):Qx(t,r,i)}function Qx(t,r,i){r.status="fulfilled",r.value=i,Yx(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,Kx(t,i)))}function _m(t,r,i){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,Yx(r),r=r.next;while(r!==c)}t.action=null}function Yx(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Xx(t,r){return r}function Wx(t,r){if(nt){var i=vt.formState;if(i!==null){e:{var c=He;if(nt){if(Et){t:{for(var f=Et,m=ms;f.nodeType!==8;){if(!m){f=null;break t}if(f=ps(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Et=ps(f.nextSibling),c=f.data==="F!";break e}}Ca(c)}c=!1}c&&(r=i[0])}}return i=Cn(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xx,lastRenderedState:r},i.queue=c,i=py.bind(null,He,c),c.dispatch=i,c=vm(!1),m=Sm.bind(null,He,!1,c.queue),c=Cn(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,i=I2.bind(null,He,f,m,i),f.dispatch=i,c.memoizedState=t,[r,i,!1]}function Jx(t){var r=Ft();return Zx(r,pt,t)}function Zx(t,r,i){if(r=ym(t,r,Xx)[0],t=bh(Hr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=fc(r)}catch(v){throw v===Ml?ch:v}else c=r;r=Ft();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(He.flags|=2048,zl(9,{destroy:void 0},k2.bind(null,f,i),null)),[c,m,t]}function k2(t,r){t.action=r}function ey(t){var r=Ft(),i=pt;if(i!==null)return Zx(r,i,t);Ft(),r=r.memoizedState,i=Ft();var c=i.queue.dispatch;return i.memoizedState=t,[r,c,!1]}function zl(t,r,i,c){return t={tag:t,create:i,deps:c,inst:r,next:null},r=He.updateQueue,r===null&&(r=xh(),He.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(c=i.next,i.next=t,t.next=c,r.lastEffect=t),t}function ty(){return Ft().memoizedState}function vh(t,r,i,c){var f=Cn();He.flags|=t,f.memoizedState=zl(1|r,{destroy:void 0},i,c===void 0?null:c)}function _h(t,r,i,c){var f=Ft();c=c===void 0?null:c;var m=f.memoizedState.inst;pt!==null&&c!==null&&dm(c,pt.memoizedState.deps)?f.memoizedState=zl(r,m,i,c):(He.flags|=t,f.memoizedState=zl(1|r,m,i,c))}function ny(t,r){vh(8390656,8,t,r)}function wm(t,r){_h(2048,8,t,r)}function D2(t){He.flags|=4;var r=He.updateQueue;if(r===null)r=xh(),He.updateQueue=r,r.events=[t];else{var i=r.events;i===null?r.events=[t]:i.push(t)}}function sy(t){var r=Ft().memoizedState;return D2({ref:r,nextImpl:t}),function(){if((ot&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function ry(t,r){return _h(4,2,t,r)}function ay(t,r){return _h(4,4,t,r)}function iy(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ly(t,r,i){i=i!=null?i.concat([t]):null,_h(4,4,iy.bind(null,r,t),i)}function Nm(){}function oy(t,r){var i=Ft();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&dm(r,c[1])?c[0]:(i.memoizedState=[t,r],t)}function cy(t,r){var i=Ft();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&dm(r,c[1]))return c[0];if(c=t(),Fi){Tt(!0);try{t()}finally{Tt(!1)}}return i.memoizedState=[c,r],c}function Tm(t,r,i){return i===void 0||(Br&1073741824)!==0&&(Ye&261930)===0?t.memoizedState=r:(t.memoizedState=i,t=ub(),He.lanes|=t,La|=t,i)}function uy(t,r,i,c){return $n(i,r)?i:Pl.current!==null?(t=Tm(t,i,c),$n(t,r)||(Wt=!0),t):(Br&42)===0||(Br&1073741824)!==0&&(Ye&261930)===0?(Wt=!0,t.memoizedState=i):(t=ub(),He.lanes|=t,La|=t,r)}function hy(t,r,i,c,f){var m=ie.p;ie.p=m!==0&&8>m?m:8;var v=te.T,E={};te.T=E,Sm(t,!1,r,i);try{var V=f(),$=te.S;if($!==null&&$(E,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=A2(V,c);mc(t,r,ae,Zn(t))}else mc(t,r,c,Zn(t))}catch(ce){mc(t,r,{then:function(){},status:"rejected",reason:ce},Zn())}finally{ie.p=m,v!==null&&E.types!==null&&(v.types=E.types),te.T=v}}function O2(){}function Em(t,r,i,c){if(t.tag!==5)throw Error(a(476));var f=dy(t).queue;hy(t,f,r,ye,i===null?O2:function(){return fy(t),i(c)})}function dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:ye},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function fy(t){var r=dy(t);r.next===null&&(r=t.alternate.memoizedState),mc(t,r.next.queue,{},Zn())}function jm(){return xn(Ic)}function my(){return Ft().memoizedState}function gy(){return Ft().memoizedState}function M2(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Zn();t=ka(i);var c=Da(r,t,i);c!==null&&(zn(c,r,i),cc(c,r,i)),r={cache:tm()},t.payload=r;return}r=r.return}}function V2(t,r,i){var c=Zn();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},wh(t)?xy(r,i):(i=qf(t,r,i,c),i!==null&&(zn(i,t,c),yy(i,r,c)))}function py(t,r,i){var c=Zn();mc(t,r,i,c)}function mc(t,r,i,c){var f={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(wh(t))xy(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,E=m(v,i);if(f.hasEagerState=!0,f.eagerState=E,$n(E,v))return nh(t,r,f,0),vt===null&&th(),!1}catch{}finally{}if(i=qf(t,r,f,c),i!==null)return zn(i,t,c),yy(i,r,c),!0}return!1}function Sm(t,r,i,c){if(c={lane:2,revertLane:ag(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wh(t)){if(r)throw Error(a(479))}else r=qf(t,i,c,2),r!==null&&zn(r,t,2)}function wh(t){var r=t.alternate;return t===He||r!==null&&r===He}function xy(t,r){Ll=gh=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function yy(t,r,i){if((i&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Vo(t,i)}}var gc={readContext:xn,use:yh,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};gc.useEffectEvent=Ot;var by={readContext:xn,use:yh,useCallback:function(t,r){return Cn().memoizedState=[t,r===void 0?null:r],t},useContext:xn,useEffect:ny,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,vh(4194308,4,iy.bind(null,r,t),i)},useLayoutEffect:function(t,r){return vh(4194308,4,t,r)},useInsertionEffect:function(t,r){vh(4,2,t,r)},useMemo:function(t,r){var i=Cn();r=r===void 0?null:r;var c=t();if(Fi){Tt(!0);try{t()}finally{Tt(!1)}}return i.memoizedState=[c,r],c},useReducer:function(t,r,i){var c=Cn();if(i!==void 0){var f=i(r);if(Fi){Tt(!0);try{i(r)}finally{Tt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=V2.bind(null,He,t),[c.memoizedState,t]},useRef:function(t){var r=Cn();return t={current:t},r.memoizedState=t},useState:function(t){t=vm(t);var r=t.queue,i=py.bind(null,He,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:Nm,useDeferredValue:function(t,r){var i=Cn();return Tm(i,t,r)},useTransition:function(){var t=vm(!1);return t=hy.bind(null,He,t.queue,!0,!1),Cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var c=He,f=Cn();if(nt){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),vt===null)throw Error(a(349));(Ye&127)!==0||zx(c,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,ny(Hx.bind(null,c,m,t),[t]),c.flags|=2048,zl(9,{destroy:void 0},Bx.bind(null,c,m,i,r),null),i},useId:function(){var t=Cn(),r=vt.identifierPrefix;if(nt){var i=or,c=lr;i=(c&~(1<<32-bt(c)-1)).toString(32)+i,r="_"+r+"R_"+i,i=ph++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=C2++,r="_"+r+"r_"+i.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:jm,useFormState:Wx,useActionState:Wx,useOptimistic:function(t){var r=Cn();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Sm.bind(null,He,!0,i),i.dispatch=r,[t,r]},useMemoCache:xm,useCacheRefresh:function(){return Cn().memoizedState=M2.bind(null,He)},useEffectEvent:function(t){var r=Cn(),i={impl:t};return r.memoizedState=i,function(){if((ot&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},Am={readContext:xn,use:yh,useCallback:oy,useContext:xn,useEffect:wm,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:bh,useRef:ty,useState:function(){return bh(Hr)},useDebugValue:Nm,useDeferredValue:function(t,r){var i=Ft();return uy(i,pt.memoizedState,t,r)},useTransition:function(){var t=bh(Hr)[0],r=Ft().memoizedState;return[typeof t=="boolean"?t:fc(t),r]},useSyncExternalStore:Ux,useId:my,useHostTransitionStatus:jm,useFormState:Jx,useActionState:Jx,useOptimistic:function(t,r){var i=Ft();return Gx(i,pt,t,r)},useMemoCache:xm,useCacheRefresh:gy};Am.useEffectEvent=sy;var vy={readContext:xn,use:yh,useCallback:oy,useContext:xn,useEffect:wm,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:bm,useRef:ty,useState:function(){return bm(Hr)},useDebugValue:Nm,useDeferredValue:function(t,r){var i=Ft();return pt===null?Tm(i,t,r):uy(i,pt.memoizedState,t,r)},useTransition:function(){var t=bm(Hr)[0],r=Ft().memoizedState;return[typeof t=="boolean"?t:fc(t),r]},useSyncExternalStore:Ux,useId:my,useHostTransitionStatus:jm,useFormState:ey,useActionState:ey,useOptimistic:function(t,r){var i=Ft();return pt!==null?Gx(i,pt,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:xm,useCacheRefresh:gy};vy.useEffectEvent=sy;function Cm(t,r,i,c){r=t.memoizedState,i=i(c,r),i=i==null?r:w({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Rm={enqueueSetState:function(t,r,i){t=t._reactInternals;var c=Zn(),f=ka(c);f.payload=r,i!=null&&(f.callback=i),r=Da(t,f,c),r!==null&&(zn(r,t,c),cc(r,t,c))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var c=Zn(),f=ka(c);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=Da(t,f,c),r!==null&&(zn(r,t,c),cc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Zn(),c=ka(i);c.tag=2,r!=null&&(c.callback=r),r=Da(t,c,i),r!==null&&(zn(r,t,i),cc(r,t,i))}};function _y(t,r,i,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!tc(i,c)||!tc(f,m):!0}function wy(t,r,i,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==t&&Rm.enqueueReplaceState(r,r.state,null)}function qi(t,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(t=t.defaultProps){i===r&&(i=w({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function Ny(t){eh(t)}function Ty(t){console.error(t)}function Ey(t){eh(t)}function Nh(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function jy(t,r,i){try{var c=t.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Im(t,r,i){return i=ka(i),i.tag=3,i.payload={element:null},i.callback=function(){Nh(t,r)},i}function Sy(t){return t=ka(t),t.tag=3,t}function Ay(t,r,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){jy(r,i,c)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){jy(r,i,c),typeof f!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function P2(t,r,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&kl(r,i,f,!0),i=Yn.current,i!==null){switch(i.tag){case 31:case 13:return gs===null?Mh():i.alternate===null&&Mt===0&&(Mt=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===uh?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),ng(t,c,f)),!1;case 22:return i.flags|=65536,c===uh?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),ng(t,c,f)),!1}throw Error(a(435,i.tag))}return ng(t,c,f),Mh(),!1}if(nt)return r=Yn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Xf&&(t=Error(a(422),{cause:c}),rc(hs(t,i)))):(c!==Xf&&(r=Error(a(423),{cause:c}),rc(hs(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=hs(c,i),f=Im(t.stateNode,c,f),lm(t,f),Mt!==4&&(Mt=2)),!1;var m=Error(a(520),{cause:c});if(m=hs(m,i),Nc===null?Nc=[m]:Nc.push(m),Mt!==4&&(Mt=2),r===null)return!0;c=hs(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Im(i.stateNode,c,t),lm(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ua===null||!Ua.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Sy(f),Ay(f,t,i,c),lm(i,f),!1}i=i.return}while(i!==null);return!1}var km=Error(a(461)),Wt=!1;function yn(t,r,i,c){r.child=t===null?kx(r,null,i,c):Hi(r,t.child,i,c)}function Cy(t,r,i,c,f){i=i.render;var m=r.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return Li(r),c=fm(t,r,i,v,m,f),E=mm(),t!==null&&!Wt?(gm(t,r,f),Fr(t,r,f)):(nt&&E&&Qf(r),r.flags|=1,yn(t,r,c,f),r.child)}function Ry(t,r,i,c,f){if(t===null){var m=i.type;return typeof m=="function"&&!Gf(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Iy(t,r,m,c,f)):(t=rh(i.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!zm(t,f)){var v=m.memoizedProps;if(i=i.compare,i=i!==null?i:tc,i(v,c)&&t.ref===r.ref)return Fr(t,r,f)}return r.flags|=1,t=Pr(m,c),t.ref=r.ref,t.return=r,r.child=t}function Iy(t,r,i,c,f){if(t!==null){var m=t.memoizedProps;if(tc(m,c)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=c=m,zm(t,f))(t.flags&131072)!==0&&(Wt=!0);else return r.lanes=t.lanes,Fr(t,r,f)}return Dm(t,r,i,c,f)}function ky(t,r,i,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return Dy(t,r,m,i,c)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&oh(r,m!==null?m.cachePool:null),m!==null?Mx(r,m):cm(),Vx(r);else return c=r.lanes=536870912,Dy(t,r,m!==null?m.baseLanes|i:i,i,c)}else m!==null?(oh(r,m.cachePool),Mx(r,m),Ma(),r.memoizedState=null):(t!==null&&oh(r,null),cm(),Ma());return yn(t,r,f,i),r.child}function pc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Dy(t,r,i,c,f){var m=sm();return m=m===null?null:{parent:Yt._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},t!==null&&oh(r,null),cm(),Vx(r),t!==null&&kl(t,r,c,!0),r.childLanes=f,null}function Th(t,r){return r=jh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Oy(t,r,i){return Hi(r,t.child,null,i),t=Th(r,r.pendingProps),t.flags|=2,Xn(r),r.memoizedState=null,t}function L2(t,r,i){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(nt){if(c.mode==="hidden")return t=Th(r,c),r.lanes=536870912,pc(null,t);if(hm(r),(t=Et)?(t=Kb(t,ms),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Sa!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},i=xx(t),i.return=r,r.child=i,pn=r,Et=null)):t=null,t===null)throw Ca(r);return r.lanes=536870912,null}return Th(r,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(hm(r),f)if(r.flags&256)r.flags&=-257,r=Oy(t,r,i);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(Wt||kl(t,r,i,!1),f=(i&t.childLanes)!==0,Wt||f){if(c=vt,c!==null&&(v=Po(c,i),v!==0&&v!==m.retryLane))throw m.retryLane=v,Oi(t,v),zn(c,t,v),km;Mh(),r=Oy(t,r,i)}else t=m.treeContext,Et=ps(v.nextSibling),pn=r,nt=!0,Aa=null,ms=!1,t!==null&&vx(r,t),r=Th(r,c),r.flags|=4096;return r}return t=Pr(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Eh(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Dm(t,r,i,c,f){return Li(r),i=fm(t,r,i,c,void 0,f),c=mm(),t!==null&&!Wt?(gm(t,r,f),Fr(t,r,f)):(nt&&c&&Qf(r),r.flags|=1,yn(t,r,i,f),r.child)}function My(t,r,i,c,f,m){return Li(r),r.updateQueue=null,i=Lx(r,c,i,f),Px(t),c=mm(),t!==null&&!Wt?(gm(t,r,m),Fr(t,r,m)):(nt&&c&&Qf(r),r.flags|=1,yn(t,r,i,m),r.child)}function Vy(t,r,i,c,f){if(Li(r),r.stateNode===null){var m=Al,v=i.contextType;typeof v=="object"&&v!==null&&(m=xn(v)),m=new i(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Rm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},am(r),v=i.contextType,m.context=typeof v=="object"&&v!==null?xn(v):Al,m.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Cm(r,i,v,c),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Rm.enqueueReplaceState(m,m.state,null),hc(r,c,m,f),uc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var E=r.memoizedProps,V=qi(i,E);m.props=V;var $=m.context,ae=i.contextType;v=Al,typeof ae=="object"&&ae!==null&&(v=xn(ae));var ce=i.getDerivedStateFromProps;ae=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==v)&&wy(r,m,c,v),Ia=!1;var X=r.memoizedState;m.state=X,hc(r,c,m,f),uc(),$=r.memoizedState,E||X!==$||Ia?(typeof ce=="function"&&(Cm(r,i,ce,c),$=r.memoizedState),(V=Ia||_y(r,i,V,c,X,$,v))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=$),m.props=c,m.state=$,m.context=v,c=V):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,im(t,r),v=r.memoizedProps,ae=qi(i,v),m.props=ae,ce=r.pendingProps,X=m.context,$=i.contextType,V=Al,typeof $=="object"&&$!==null&&(V=xn($)),E=i.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ce||X!==V)&&wy(r,m,c,V),Ia=!1,X=r.memoizedState,m.state=X,hc(r,c,m,f),uc();var se=r.memoizedState;v!==ce||X!==se||Ia||t!==null&&t.dependencies!==null&&ih(t.dependencies)?(typeof E=="function"&&(Cm(r,i,E,c),se=r.memoizedState),(ae=Ia||_y(r,i,ae,c,X,se,V)||t!==null&&t.dependencies!==null&&ih(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,se,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,se,V)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=se),m.props=c,m.state=se,m.context=V,c=ae):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,Eh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=Hi(r,t.child,null,f),r.child=Hi(r,null,i,f)):yn(t,r,i,f),r.memoizedState=m.state,t=r.child):t=Fr(t,r,f),t}function Py(t,r,i,c){return Vi(),r.flags|=256,yn(t,r,i,c),r.child}var Om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mm(t){return{baseLanes:t,cachePool:jx()}}function Vm(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Jn),t}function Ly(t,r,i){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Ht.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(nt){if(f?Oa(r):Ma(),(t=Et)?(t=Kb(t,ms),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Sa!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},i=xx(t),i.return=r,r.child=i,pn=r,Et=null)):t=null,t===null)throw Ca(r);return yg(t)?r.lanes=32:r.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Ma(),f=r.mode,E=jh({mode:"hidden",children:E},f),c=Mi(c,f,i,null),E.return=r,c.return=r,E.sibling=c,r.child=E,c=r.child,c.memoizedState=Mm(i),c.childLanes=Vm(t,v,i),r.memoizedState=Om,pc(null,c)):(Oa(r),Pm(r,E))}var V=t.memoizedState;if(V!==null&&(E=V.dehydrated,E!==null)){if(m)r.flags&256?(Oa(r),r.flags&=-257,r=Lm(t,r,i)):r.memoizedState!==null?(Ma(),r.child=t.child,r.flags|=128,r=null):(Ma(),E=c.fallback,f=r.mode,c=jh({mode:"visible",children:c.children},f),E=Mi(E,f,i,null),E.flags|=2,c.return=r,E.return=r,c.sibling=E,r.child=c,Hi(r,t.child,null,i),c=r.child,c.memoizedState=Mm(i),c.childLanes=Vm(t,v,i),r.memoizedState=Om,r=pc(null,c));else if(Oa(r),yg(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var $=v.dgst;v=$,c=Error(a(419)),c.stack="",c.digest=v,rc({value:c,source:null,stack:null}),r=Lm(t,r,i)}else if(Wt||kl(t,r,i,!1),v=(i&t.childLanes)!==0,Wt||v){if(v=vt,v!==null&&(c=Po(v,i),c!==0&&c!==V.retryLane))throw V.retryLane=c,Oi(t,c),zn(v,t,c),km;xg(E)||Mh(),r=Lm(t,r,i)}else xg(E)?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,Et=ps(E.nextSibling),pn=r,nt=!0,Aa=null,ms=!1,t!==null&&vx(r,t),r=Pm(r,c.children),r.flags|=4096);return r}return f?(Ma(),E=c.fallback,f=r.mode,V=t.child,$=V.sibling,c=Pr(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,$!==null?E=Pr($,E):(E=Mi(E,f,i,null),E.flags|=2),E.return=r,c.return=r,c.sibling=E,r.child=c,pc(null,c),c=r.child,E=t.child.memoizedState,E===null?E=Mm(i):(f=E.cachePool,f!==null?(V=Yt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=jx(),E={baseLanes:E.baseLanes|i,cachePool:f}),c.memoizedState=E,c.childLanes=Vm(t,v,i),r.memoizedState=Om,pc(t.child,c)):(Oa(r),i=t.child,t=i.sibling,i=Pr(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=i,r.memoizedState=null,i)}function Pm(t,r){return r=jh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function jh(t,r){return t=Qn(22,t,null,r),t.lanes=0,t}function Lm(t,r,i){return Hi(r,t.child,null,i),t=Pm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Uy(t,r,i){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Zf(t.return,r,i)}function Um(t,r,i,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=i,v.tailMode=f,v.treeForkCount=m)}function zy(t,r,i){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=Ht.current,E=(v&2)!==0;if(E?(v=v&1|2,r.flags|=128):v&=1,ge(Ht,v),yn(t,r,c,i),c=nt?sc:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uy(t,i,r);else if(t.tag===19)Uy(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&mh(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Um(r,!1,f,i,m,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&mh(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Um(r,!0,i,null,m,c);break;case"together":Um(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Fr(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),La|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(kl(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,i=Pr(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=Pr(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function zm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ih(t)))}function U2(t,r,i){switch(r.tag){case 3:Z(r,r.stateNode.containerInfo),Ra(r,Yt,t.memoizedState.cache),Vi();break;case 27:case 5:W(r);break;case 4:Z(r,r.stateNode.containerInfo);break;case 10:Ra(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Oa(r),r.flags|=128,null):(i&r.child.childLanes)!==0?Ly(t,r,i):(Oa(r),t=Fr(t,r,i),t!==null?t.sibling:null);Oa(r);break;case 19:var f=(t.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(kl(t,r,i,!1),c=(i&r.childLanes)!==0),f){if(c)return zy(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ge(Ht,Ht.current),c)break;return null;case 22:return r.lanes=0,ky(t,r,i,r.pendingProps);case 24:Ra(r,Yt,t.memoizedState.cache)}return Fr(t,r,i)}function By(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)Wt=!0;else{if(!zm(t,i)&&(r.flags&128)===0)return Wt=!1,U2(t,r,i);Wt=(t.flags&131072)!==0}else Wt=!1,nt&&(r.flags&1048576)!==0&&bx(r,sc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=zi(r.elementType),r.type=t,typeof t=="function")Gf(t)?(c=qi(t,c),r.tag=1,r=Vy(null,r,t,c,i)):(r.tag=0,r=Dm(null,r,t,c,i));else{if(t!=null){var f=t.$$typeof;if(f===Y){r.tag=11,r=Cy(null,r,t,c,i);break e}else if(f===j){r.tag=14,r=Ry(null,r,t,c,i);break e}}throw r=Ce(t)||t,Error(a(306,r,""))}}return r;case 0:return Dm(t,r,r.type,r.pendingProps,i);case 1:return c=r.type,f=qi(c,r.pendingProps),Vy(t,r,c,f,i);case 3:e:{if(Z(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,im(t,r),hc(r,c,null,i);var v=r.memoizedState;if(c=v.cache,Ra(r,Yt,c),c!==m.cache&&em(r,[Yt],i,!0),uc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Py(t,r,c,i);break e}else if(c!==f){f=hs(Error(a(424)),r),rc(f),r=Py(t,r,c,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Et=ps(t.firstChild),pn=r,nt=!0,Aa=null,ms=!0,i=kx(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Vi(),c===f){r=Fr(t,r,i);break e}yn(t,r,c,i)}r=r.child}return r;case 26:return Eh(t,r),t===null?(i=Jb(r.type,null,r.pendingProps,null))?r.memoizedState=i:nt||(i=r.type,t=r.pendingProps,c=Hh(M.current).createElement(i),c[Kt]=r,c[cn]=t,bn(c,i,t),$t(c),r.stateNode=c):r.memoizedState=Jb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return W(r),t===null&&nt&&(c=r.stateNode=Yb(r.type,r.pendingProps,M.current),pn=r,ms=!0,f=Et,Fa(r.type)?(bg=f,Et=ps(c.firstChild)):Et=f),yn(t,r,r.pendingProps.children,i),Eh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&nt&&((f=c=Et)&&(c=gE(c,r.type,r.pendingProps,ms),c!==null?(r.stateNode=c,pn=r,Et=ps(c.firstChild),ms=!1,f=!0):f=!1),f||Ca(r)),W(r),f=r.type,m=r.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,mg(f,m)?c=null:v!==null&&mg(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=fm(t,r,R2,null,null,i),Ic._currentValue=f),Eh(t,r),yn(t,r,c,i),r.child;case 6:return t===null&&nt&&((t=i=Et)&&(i=pE(i,r.pendingProps,ms),i!==null?(r.stateNode=i,pn=r,Et=null,t=!0):t=!1),t||Ca(r)),null;case 13:return Ly(t,r,i);case 4:return Z(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Hi(r,null,c,i):yn(t,r,c,i),r.child;case 11:return Cy(t,r,r.type,r.pendingProps,i);case 7:return yn(t,r,r.pendingProps,i),r.child;case 8:return yn(t,r,r.pendingProps.children,i),r.child;case 12:return yn(t,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,Ra(r,r.type,c.value),yn(t,r,c.children,i),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,Li(r),f=xn(f),c=c(f),r.flags|=1,yn(t,r,c,i),r.child;case 14:return Ry(t,r,r.type,r.pendingProps,i);case 15:return Iy(t,r,r.type,r.pendingProps,i);case 19:return zy(t,r,i);case 31:return L2(t,r,i);case 22:return ky(t,r,i,r.pendingProps);case 24:return Li(r),c=xn(Yt),t===null?(f=sm(),f===null&&(f=vt,m=tm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:c,cache:f},am(r),Ra(r,Yt,f)):((t.lanes&i)!==0&&(im(t,r),hc(r,null,null,i),uc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ra(r,Yt,c)):(c=m.cache,Ra(r,Yt,c),c!==f.cache&&em(r,[Yt],i,!0))),yn(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function qr(t){t.flags|=4}function Bm(t,r,i,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(mb())t.flags|=8192;else throw Bi=uh,rm}else t.flags&=-16777217}function Hy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sv(r))if(mb())t.flags|=8192;else throw Bi=uh,rm}function Sh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Du():536870912,t.lanes|=r,ql|=r)}function xc(t,r){if(!nt)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,c=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=i,r}function z2(t,r,i){var c=r.pendingProps;switch(Yf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return jt(r),null;case 3:return i=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),zr(Yt),he(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Il(r)?qr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),jt(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(qr(r),m!==null?(jt(r),Hy(r,m)):(jt(r),Bm(r,f,null,c,i))):m?m!==t.memoizedState?(qr(r),jt(r),Hy(r,m)):(jt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&qr(r),jt(r),Bm(r,f,t,c,i)),null;case 27:if(_e(r),i=M.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&qr(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return jt(r),null}t=Q.current,Il(r)?_x(r):(t=Yb(f,c,i),r.stateNode=t,qr(r))}return jt(r),null;case 5:if(_e(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&qr(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return jt(r),null}if(m=Q.current,Il(r))_x(r);else{var v=Hh(M.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Kt]=r,m[cn]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(bn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&qr(r)}}return jt(r),Bm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,i),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&qr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=M.current,Il(r)){if(t=r.stateNode,i=r.memoizedProps,c=null,f=pn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Kt]=r,t=!!(t.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Lb(t.nodeValue,i)),t||Ca(r,!0)}else t=Hh(t).createTextNode(c),t[Kt]=r,r.stateNode=t}return jt(r),null;case 31:if(i=r.memoizedState,t===null||t.memoizedState!==null){if(c=Il(r),i!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Kt]=r}else Vi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),t=!1}else i=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return r.flags&256?(Xn(r),r):(Xn(r),null);if((r.flags&128)!==0)throw Error(a(558))}return jt(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Il(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Kt]=r}else Vi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),f=!1}else f=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Xn(r),r):(Xn(r),null)}return Xn(r),(r.flags&128)!==0?(r.lanes=i,r):(i=c!==null,t=t!==null&&t.memoizedState!==null,i&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),i!==t&&i&&(r.child.flags|=8192),Sh(r,r.updateQueue),jt(r),null);case 4:return he(),t===null&&cg(r.stateNode.containerInfo),jt(r),null;case 10:return zr(r.type),jt(r),null;case 19:if(re(Ht),c=r.memoizedState,c===null)return jt(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)xc(c,!1);else{if(Mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=mh(t),m!==null){for(r.flags|=128,xc(c,!1),t=m.updateQueue,r.updateQueue=t,Sh(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)px(i,t),i=i.sibling;return ge(Ht,Ht.current&1|2),nt&&Lr(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&on()>kh&&(r.flags|=128,f=!0,xc(c,!1),r.lanes=4194304)}else{if(!f)if(t=mh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,Sh(r,t),xc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!nt)return jt(r),null}else 2*on()-c.renderingStartTime>kh&&i!==536870912&&(r.flags|=128,f=!0,xc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=on(),t.sibling=null,i=Ht.current,ge(Ht,f?i&1|2:i&1),nt&&Lr(r,c.treeForkCount),t):(jt(r),null);case 22:case 23:return Xn(r),um(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(jt(r),r.subtreeFlags&6&&(r.flags|=8192)):jt(r),i=r.updateQueue,i!==null&&Sh(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),t!==null&&re(Ui),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),zr(Yt),jt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function B2(t,r){switch(Yf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return zr(Yt),he(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return _e(r),null;case 31:if(r.memoizedState!==null){if(Xn(r),r.alternate===null)throw Error(a(340));Vi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Xn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Vi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return re(Ht),null;case 4:return he(),null;case 10:return zr(r.type),null;case 22:case 23:return Xn(r),um(),t!==null&&re(Ui),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return zr(Yt),null;case 25:return null;default:return null}}function Fy(t,r){switch(Yf(r),r.tag){case 3:zr(Yt),he();break;case 26:case 27:case 5:_e(r);break;case 4:he();break;case 31:r.memoizedState!==null&&Xn(r);break;case 13:Xn(r);break;case 19:re(Ht);break;case 10:zr(r.type);break;case 22:case 23:Xn(r),um(),t!==null&&re(Ui);break;case 24:zr(Yt)}}function yc(t,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&t)===t){c=void 0;var m=i.create,v=i.inst;c=m(),v.destroy=c}i=i.next}while(i!==f)}}catch(E){mt(r,r.return,E)}}function Va(t,r,i){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=r;var V=i,$=E;try{$()}catch(ae){mt(f,V,ae)}}}c=c.next}while(c!==m)}}catch(ae){mt(r,r.return,ae)}}function qy(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{Ox(r,i)}catch(c){mt(t,t.return,c)}}}function Gy(t,r,i){i.props=qi(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(c){mt(t,r,c)}}function bc(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof i=="function"?t.refCleanup=i(c):i.current=c}}catch(f){mt(t,r,f)}}function cr(t,r){var i=t.ref,c=t.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){mt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){mt(t,r,f)}else i.current=null}function Ky(t){var r=t.type,i=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){mt(t,t.return,f)}}function Hm(t,r,i){try{var c=t.stateNode;cE(c,t.type,i,r),c[cn]=r}catch(f){mt(t,t.return,f)}}function $y(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fa(t.type)||t.tag===4}function Fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$y(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qm(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Ss));else if(c!==4&&(c===27&&Fa(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(qm(t,r,i),t=t.sibling;t!==null;)qm(t,r,i),t=t.sibling}function Ah(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(c!==4&&(c===27&&Fa(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Ah(t,r,i),t=t.sibling;t!==null;)Ah(t,r,i),t=t.sibling}function Qy(t){var r=t.stateNode,i=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);bn(r,c,i),r[Kt]=t,r[cn]=i}catch(m){mt(t,t.return,m)}}var Gr=!1,Jt=!1,Gm=!1,Yy=typeof WeakSet=="function"?WeakSet:Set,hn=null;function H2(t,r){if(t=t.containerInfo,dg=Yh,t=lx(t),Lf(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var v=0,E=-1,V=-1,$=0,ae=0,ce=t,X=null;t:for(;;){for(var se;ce!==i||f!==0&&ce.nodeType!==3||(E=v+f),ce!==m||c!==0&&ce.nodeType!==3||(V=v+c),ce.nodeType===3&&(v+=ce.nodeValue.length),(se=ce.firstChild)!==null;)X=ce,ce=se;for(;;){if(ce===t)break t;if(X===i&&++$===f&&(E=v),X===m&&++ae===c&&(V=v),(se=ce.nextSibling)!==null)break;ce=X,X=ce.parentNode}ce=se}i=E===-1||V===-1?null:{start:E,end:V}}else i=null}i=i||{start:0,end:0}}else i=null;for(fg={focusedElem:t,selectionRange:i},Yh=!1,hn=r;hn!==null;)if(r=hn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,hn=t;else for(;hn!==null;){switch(r=hn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,c=i.stateNode;try{var Te=qi(i.type,f);t=c.getSnapshotBeforeUpdate(Te,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){mt(i,i.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)pg(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,hn=t;break}hn=r.return}}function Xy(t,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:$r(t,i),c&4&&yc(5,i);break;case 1:if($r(t,i),c&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(v){mt(i,i.return,v)}else{var f=qi(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){mt(i,i.return,v)}}c&64&&qy(i),c&512&&bc(i,i.return);break;case 3:if($r(t,i),c&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Ox(t,r)}catch(v){mt(i,i.return,v)}}break;case 27:r===null&&c&4&&Qy(i);case 26:case 5:$r(t,i),r===null&&c&4&&Ky(i),c&512&&bc(i,i.return);break;case 12:$r(t,i);break;case 31:$r(t,i),c&4&&Zy(t,i);break;case 13:$r(t,i),c&4&&eb(t,i),c&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=W2.bind(null,i),xE(t,i))));break;case 22:if(c=i.memoizedState!==null||Gr,!c){r=r!==null&&r.memoizedState!==null||Jt,f=Gr;var m=Jt;Gr=c,(Jt=r)&&!m?Qr(t,i,(i.subtreeFlags&8772)!==0):$r(t,i),Gr=f,Jt=m}break;case 30:break;default:$r(t,i)}}function Wy(t){var r=t.alternate;r!==null&&(t.alternate=null,Wy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ml(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,Vn=!1;function Kr(t,r,i){for(i=i.child;i!==null;)Jy(t,r,i),i=i.sibling}function Jy(t,r,i){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(nn,i)}catch{}switch(i.tag){case 26:Jt||cr(i,r),Kr(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Jt||cr(i,r);var c=Rt,f=Vn;Fa(i.type)&&(Rt=i.stateNode,Vn=!1),Kr(t,r,i),Ac(i.stateNode),Rt=c,Vn=f;break;case 5:Jt||cr(i,r);case 6:if(c=Rt,f=Vn,Rt=null,Kr(t,r,i),Rt=c,Vn=f,Rt!==null)if(Vn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(i.stateNode)}catch(m){mt(i,r,m)}else try{Rt.removeChild(i.stateNode)}catch(m){mt(i,r,m)}break;case 18:Rt!==null&&(Vn?(t=Rt,qb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Jl(t)):qb(Rt,i.stateNode));break;case 4:c=Rt,f=Vn,Rt=i.stateNode.containerInfo,Vn=!0,Kr(t,r,i),Rt=c,Vn=f;break;case 0:case 11:case 14:case 15:Va(2,i,r),Jt||Va(4,i,r),Kr(t,r,i);break;case 1:Jt||(cr(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Gy(i,r,c)),Kr(t,r,i);break;case 21:Kr(t,r,i);break;case 22:Jt=(c=Jt)||i.memoizedState!==null,Kr(t,r,i),Jt=c;break;default:Kr(t,r,i)}}function Zy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Jl(t)}catch(i){mt(r,r.return,i)}}}function eb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jl(t)}catch(i){mt(r,r.return,i)}}function F2(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Yy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Yy),r;default:throw Error(a(435,t.tag))}}function Ch(t,r){var i=F2(t);r.forEach(function(c){if(!i.has(c)){i.add(c);var f=J2.bind(null,t,c);c.then(f,f)}})}function Pn(t,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],m=t,v=r,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Fa(E.type)){Rt=E.stateNode,Vn=!1;break e}break;case 5:Rt=E.stateNode,Vn=!1;break e;case 3:case 4:Rt=E.stateNode.containerInfo,Vn=!0;break e}E=E.return}if(Rt===null)throw Error(a(160));Jy(m,v,f),Rt=null,Vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)tb(r,t),r=r.sibling}var Ds=null;function tb(t,r){var i=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Pn(r,t),Ln(t),c&4&&(Va(3,t,t.return),yc(3,t),Va(5,t,t.return));break;case 1:Pn(r,t),Ln(t),c&512&&(Jt||i===null||cr(i,i.return)),c&64&&Gr&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=Ds;if(Pn(r,t),Ln(t),c&512&&(Jt||i===null||cr(i,i.return)),c&4){var m=i!==null?i.memoizedState:null;if(c=t.memoizedState,i===null)if(c===null)if(t.stateNode===null){e:{c=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ys]||m[Kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),bn(m,c,i),m[Kt]=t,$t(m),c=m;break e;case"link":var v=tv("link","href",f).get(c+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),bn(m,c,i),f.head.appendChild(m);break;case"meta":if(v=tv("meta","content",f).get(c+(i.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}m=f.createElement(c),bn(m,c,i),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Kt]=t,$t(m),c=m}t.stateNode=c}else nv(f,t.type,t.stateNode);else t.stateNode=ev(f,c,t.memoizedProps);else m!==c?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,c===null?nv(f,t.type,t.stateNode):ev(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Hm(t,t.memoizedProps,i.memoizedProps)}break;case 27:Pn(r,t),Ln(t),c&512&&(Jt||i===null||cr(i,i.return)),i!==null&&c&4&&Hm(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Pn(r,t),Ln(t),c&512&&(Jt||i===null||cr(i,i.return)),t.flags&32){f=t.stateNode;try{Mn(f,"")}catch(Te){mt(t,t.return,Te)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,Hm(t,f,i!==null?i.memoizedProps:f)),c&1024&&(Gm=!0);break;case 6:if(Pn(r,t),Ln(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,i=t.stateNode;try{i.nodeValue=c}catch(Te){mt(t,t.return,Te)}}break;case 3:if(Gh=null,f=Ds,Ds=Fh(r.containerInfo),Pn(r,t),Ds=f,Ln(t),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Jl(r.containerInfo)}catch(Te){mt(t,t.return,Te)}Gm&&(Gm=!1,nb(t));break;case 4:c=Ds,Ds=Fh(t.stateNode.containerInfo),Pn(r,t),Ln(t),Ds=c;break;case 12:Pn(r,t),Ln(t);break;case 31:Pn(r,t),Ln(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ch(t,c)));break;case 13:Pn(r,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ih=on()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ch(t,c)));break;case 22:f=t.memoizedState!==null;var V=i!==null&&i.memoizedState!==null,$=Gr,ae=Jt;if(Gr=$||f,Jt=ae||V,Pn(r,t),Jt=ae,Gr=$,Ln(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||V||Gr||Jt||Gi(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){V=i=r;try{if(m=V.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=V.stateNode;var ce=V.memoizedProps.style,X=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){mt(V,V.return,Te)}}}else if(r.tag===6){if(i===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(Te){mt(V,V.return,Te)}}}else if(r.tag===18){if(i===null){V=r;try{var se=V.stateNode;f?Gb(se,!0):Gb(V.stateNode,!1)}catch(Te){mt(V,V.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Ch(t,i))));break;case 19:Pn(r,t),Ln(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ch(t,c)));break;case 30:break;case 21:break;default:Pn(r,t),Ln(t)}}function Ln(t){var r=t.flags;if(r&2){try{for(var i,c=t.return;c!==null;){if($y(c)){i=c;break}c=c.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,m=Fm(t);Ah(t,m,f);break;case 5:var v=i.stateNode;i.flags&32&&(Mn(v,""),i.flags&=-33);var E=Fm(t);Ah(t,E,v);break;case 3:case 4:var V=i.stateNode.containerInfo,$=Fm(t);qm(t,$,V);break;default:throw Error(a(161))}}catch(ae){mt(t,t.return,ae)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function nb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;nb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function $r(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Xy(t,r.alternate,r),r=r.sibling}function Gi(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Va(4,r,r.return),Gi(r);break;case 1:cr(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&Gy(r,r.return,i),Gi(r);break;case 27:Ac(r.stateNode);case 26:case 5:cr(r,r.return),Gi(r);break;case 22:r.memoizedState===null&&Gi(r);break;case 30:Gi(r);break;default:Gi(r)}t=t.sibling}}function Qr(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(f,m,i),yc(4,m);break;case 1:if(Qr(f,m,i),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){mt(c,c.return,$)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Dx(V[f],E)}catch($){mt(c,c.return,$)}}i&&v&64&&qy(m),bc(m,m.return);break;case 27:Qy(m);case 26:case 5:Qr(f,m,i),i&&c===null&&v&4&&Ky(m),bc(m,m.return);break;case 12:Qr(f,m,i);break;case 31:Qr(f,m,i),i&&v&4&&Zy(f,m);break;case 13:Qr(f,m,i),i&&v&4&&eb(f,m);break;case 22:m.memoizedState===null&&Qr(f,m,i),bc(m,m.return);break;case 30:break;default:Qr(f,m,i)}r=r.sibling}}function Km(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&ac(i))}function $m(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t))}function Os(t,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)sb(t,r,i,c),r=r.sibling}function sb(t,r,i,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Os(t,r,i,c),f&2048&&yc(9,r);break;case 1:Os(t,r,i,c);break;case 3:Os(t,r,i,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t)));break;case 12:if(f&2048){Os(t,r,i,c),t=r.stateNode;try{var m=r.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){mt(r,r.return,V)}}else Os(t,r,i,c);break;case 31:Os(t,r,i,c);break;case 13:Os(t,r,i,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?Os(t,r,i,c):vc(t,r):m._visibility&2?Os(t,r,i,c):(m._visibility|=2,Bl(t,r,i,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Km(v,r);break;case 24:Os(t,r,i,c),f&2048&&$m(r.alternate,r);break;default:Os(t,r,i,c)}}function Bl(t,r,i,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,v=r,E=i,V=c,$=v.flags;switch(v.tag){case 0:case 11:case 15:Bl(m,v,E,V,f),yc(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&2?Bl(m,v,E,V,f):vc(m,v):(ae._visibility|=2,Bl(m,v,E,V,f)),f&&$&2048&&Km(v.alternate,v);break;case 24:Bl(m,v,E,V,f),f&&$&2048&&$m(v.alternate,v);break;default:Bl(m,v,E,V,f)}r=r.sibling}}function vc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,c=r,f=c.flags;switch(c.tag){case 22:vc(i,c),f&2048&&Km(c.alternate,c);break;case 24:vc(i,c),f&2048&&$m(c.alternate,c);break;default:vc(i,c)}r=r.sibling}}var _c=8192;function Hl(t,r,i){if(t.subtreeFlags&_c)for(t=t.child;t!==null;)rb(t,r,i),t=t.sibling}function rb(t,r,i){switch(t.tag){case 26:Hl(t,r,i),t.flags&_c&&t.memoizedState!==null&&CE(i,Ds,t.memoizedState,t.memoizedProps);break;case 5:Hl(t,r,i);break;case 3:case 4:var c=Ds;Ds=Fh(t.stateNode.containerInfo),Hl(t,r,i),Ds=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=_c,_c=16777216,Hl(t,r,i),_c=c):Hl(t,r,i));break;default:Hl(t,r,i)}}function ab(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function wc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];hn=c,lb(c,t)}ab(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ib(t),t=t.sibling}function ib(t){switch(t.tag){case 0:case 11:case 15:wc(t),t.flags&2048&&Va(9,t,t.return);break;case 3:wc(t);break;case 12:wc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Rh(t)):wc(t);break;default:wc(t)}}function Rh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];hn=c,lb(c,t)}ab(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Va(8,r,r.return),Rh(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Rh(r));break;default:Rh(r)}t=t.sibling}}function lb(t,r){for(;hn!==null;){var i=hn;switch(i.tag){case 0:case 11:case 15:Va(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ac(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,hn=c;else e:for(i=t;hn!==null;){c=hn;var f=c.sibling,m=c.return;if(Wy(c),c===i){hn=null;break e}if(f!==null){f.return=m,hn=f;break e}hn=m}}}var q2={getCacheForType:function(t){var r=xn(Yt),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i},cacheSignal:function(){return xn(Yt).controller.signal}},G2=typeof WeakMap=="function"?WeakMap:Map,ot=0,vt=null,Ke=null,Ye=0,ft=0,Wn=null,Pa=!1,Fl=!1,Qm=!1,Yr=0,Mt=0,La=0,Ki=0,Ym=0,Jn=0,ql=0,Nc=null,Un=null,Xm=!1,Ih=0,ob=0,kh=1/0,Dh=null,Ua=null,sn=0,za=null,Gl=null,Xr=0,Wm=0,Jm=null,cb=null,Tc=0,Zm=null;function Zn(){return(ot&2)!==0&&Ye!==0?Ye&-Ye:te.T!==null?ag():Ou()}function ub(){if(Jn===0)if((Ye&536870912)===0||nt){var t=bi;bi<<=1,(bi&3932160)===0&&(bi=262144),Jn=t}else Jn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Jn}function zn(t,r,i){(t===vt&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(Kl(t,0),Ba(t,Ye,Jn,!1)),vi(t,i),((ot&2)===0||t!==vt)&&(t===vt&&((ot&2)===0&&(Ki|=i),Mt===4&&Ba(t,Ye,Jn,!1)),ur(t))}function hb(t,r,i){if((ot&6)!==0)throw Error(a(327));var c=!i&&(r&127)===0&&(r&t.expiredLanes)===0||Ts(t,r),f=c?Q2(t,r):tg(t,r,!0),m=c;do{if(f===0){Fl&&!c&&Ba(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!K2(i)){f=tg(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var E=t;f=Nc;var V=E.current.memoizedState.isDehydrated;if(V&&(Kl(E,v).flags|=256),v=tg(E,v,!1),v!==2){if(Qm&&!V){E.errorRecoveryDisabledLanes|=m,Ki|=m,f=4;break e}m=Un,Un=f,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Kl(t,0),Ba(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Ba(c,r,Jn,!Pa);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=Ih+300-on(),10<f)){if(Ba(c,r,Jn,!Pa),Ks(c,0,!0)!==0)break e;Xr=r,c.timeoutHandle=Hb(db.bind(null,c,i,Un,Dh,Xm,r,Jn,Ki,ql,Pa,m,"Throttled",-0,0),f);break e}db(c,i,Un,Dh,Xm,r,Jn,Ki,ql,Pa,m,null,-0,0)}}break}while(!0);ur(t)}function db(t,r,i,c,f,m,v,E,V,$,ae,ce,X,se){if(t.timeoutHandle=-1,ce=r.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ss},rb(r,m,ce);var Te=(m&62914560)===m?Ih-on():(m&4194048)===m?ob-on():0;if(Te=RE(ce,Te),Te!==null){Xr=m,t.cancelPendingCommit=Te(vb.bind(null,t,r,m,i,c,f,v,E,V,ae,ce,null,X,se)),Ba(t,m,v,!$);return}}vb(t,r,m,i,c,f,v,E,V)}function K2(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],m=f.getSnapshot;f=f.value;try{if(!$n(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ba(t,r,i,c){r&=~Ym,r&=~Ki,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-bt(f),v=1<<m;c[m]=-1,f&=~v}i!==0&&_i(t,i,r)}function Oh(){return(ot&6)===0?(Ec(0),!1):!0}function eg(){if(Ke!==null){if(ft===0)var t=Ke.return;else t=Ke,Ur=Pi=null,pm(t),Vl=null,lc=0,t=Ke;for(;t!==null;)Fy(t.alternate,t),t=t.return;Ke=null}}function Kl(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,dE(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Xr=0,eg(),vt=t,Ke=i=Pr(t.current,null),Ye=r,ft=0,Wn=null,Pa=!1,Fl=Ts(t,r),Qm=!1,ql=Jn=Ym=Ki=La=Mt=0,Un=Nc=null,Xm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-bt(c),m=1<<f;r|=t[f],c&=~m}return Yr=r,th(),i}function fb(t,r){He=null,te.H=gc,r===Ml||r===ch?(r=Cx(),ft=3):r===rm?(r=Cx(),ft=4):ft=r===km?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Wn=r,Ke===null&&(Mt=1,Nh(t,hs(r,t.current)))}function mb(){var t=Yn.current;return t===null?!0:(Ye&4194048)===Ye?gs===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?t===gs:!1}function gb(){var t=te.H;return te.H=gc,t===null?gc:t}function pb(){var t=te.A;return te.A=q2,t}function Mh(){Mt=4,Pa||(Ye&4194048)!==Ye&&Yn.current!==null||(Fl=!0),(La&134217727)===0&&(Ki&134217727)===0||vt===null||Ba(vt,Ye,Jn,!1)}function tg(t,r,i){var c=ot;ot|=2;var f=gb(),m=pb();(vt!==t||Ye!==r)&&(Dh=null,Kl(t,r)),r=!1;var v=Mt;e:do try{if(ft!==0&&Ke!==null){var E=Ke,V=Wn;switch(ft){case 8:eg(),v=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(r=!0);var $=ft;if(ft=0,Wn=null,$l(t,E,V,$),i&&Fl){v=0;break e}break;default:$=ft,ft=0,Wn=null,$l(t,E,V,$)}}$2(),v=Mt;break}catch(ae){fb(t,ae)}while(!0);return r&&t.shellSuspendCounter++,Ur=Pi=null,ot=c,te.H=f,te.A=m,Ke===null&&(vt=null,Ye=0,th()),v}function $2(){for(;Ke!==null;)xb(Ke)}function Q2(t,r){var i=ot;ot|=2;var c=gb(),f=pb();vt!==t||Ye!==r?(Dh=null,kh=on()+500,Kl(t,r)):Fl=Ts(t,r);e:do try{if(ft!==0&&Ke!==null){r=Ke;var m=Wn;t:switch(ft){case 1:ft=0,Wn=null,$l(t,r,m,1);break;case 2:case 9:if(Sx(m)){ft=0,Wn=null,yb(r);break}r=function(){ft!==2&&ft!==9||vt!==t||(ft=7),ur(t)},m.then(r,r);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Sx(m)?(ft=0,Wn=null,yb(r)):(ft=0,Wn=null,$l(t,r,m,7));break;case 5:var v=null;switch(Ke.tag){case 26:v=Ke.memoizedState;case 5:case 27:var E=Ke;if(v?sv(v):E.stateNode.complete){ft=0,Wn=null;var V=E.sibling;if(V!==null)Ke=V;else{var $=E.return;$!==null?(Ke=$,Vh($)):Ke=null}break t}}ft=0,Wn=null,$l(t,r,m,5);break;case 6:ft=0,Wn=null,$l(t,r,m,6);break;case 8:eg(),Mt=6;break e;default:throw Error(a(462))}}Y2();break}catch(ae){fb(t,ae)}while(!0);return Ur=Pi=null,te.H=c,te.A=f,ot=i,Ke!==null?0:(vt=null,Ye=0,th(),Mt)}function Y2(){for(;Ke!==null&&!Mo();)xb(Ke)}function xb(t){var r=By(t.alternate,t,Yr);t.memoizedProps=t.pendingProps,r===null?Vh(t):Ke=r}function yb(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=My(i,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=My(i,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:pm(r);default:Fy(i,r),r=Ke=px(r,Yr),r=By(i,r,Yr)}t.memoizedProps=t.pendingProps,r===null?Vh(t):Ke=r}function $l(t,r,i,c){Ur=Pi=null,pm(r),Vl=null,lc=0;var f=r.return;try{if(P2(t,f,r,i,Ye)){Mt=1,Nh(t,hs(i,t.current)),Ke=null;return}}catch(m){if(f!==null)throw Ke=f,m;Mt=1,Nh(t,hs(i,t.current)),Ke=null;return}r.flags&32768?(nt||c===1?t=!0:Fl||(Ye&536870912)!==0?t=!1:(Pa=t=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),bb(r,t)):Vh(r)}function Vh(t){var r=t;do{if((r.flags&32768)!==0){bb(r,Pa);return}t=r.return;var i=z2(r.alternate,r,Yr);if(i!==null){Ke=i;return}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=t}while(r!==null);Mt===0&&(Mt=5)}function bb(t,r){do{var i=B2(t.alternate,t);if(i!==null){i.flags&=32767,Ke=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=i}while(t!==null);Mt=6,Ke=null}function vb(t,r,i,c,f,m,v,E,V){t.cancelPendingCommit=null;do Ph();while(sn!==0);if((ot&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Ff,Of(t,i,m,v,E,V),t===vt&&(Ke=vt=null,Ye=0),Gl=r,za=t,Xr=i,Wm=m,Jm=f,cb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Z2(rt,function(){return Eb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,f=ie.p,ie.p=2,v=ot,ot|=4;try{H2(t,r,i)}finally{ot=v,ie.p=f,te.T=c}}sn=1,_b(),wb(),Nb()}}function _b(){if(sn===1){sn=0;var t=za,r=Gl,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=te.T,te.T=null;var c=ie.p;ie.p=2;var f=ot;ot|=4;try{tb(r,t);var m=fg,v=lx(t.containerInfo),E=m.focusedElem,V=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&ix(E.ownerDocument.documentElement,E)){if(V!==null&&Lf(E)){var $=V.start,ae=V.end;if(ae===void 0&&(ae=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(ae,E.value.length);else{var ce=E.ownerDocument||document,X=ce&&ce.defaultView||window;if(X.getSelection){var se=X.getSelection(),Te=E.textContent.length,Ie=Math.min(V.start,Te),yt=V.end===void 0?Ie:Math.min(V.end,Te);!se.extend&&Ie>yt&&(v=yt,yt=Ie,Ie=v);var F=ax(E,Ie),z=ax(E,yt);if(F&&z&&(se.rangeCount!==1||se.anchorNode!==F.node||se.anchorOffset!==F.offset||se.focusNode!==z.node||se.focusOffset!==z.offset)){var K=ce.createRange();K.setStart(F.node,F.offset),se.removeAllRanges(),Ie>yt?(se.addRange(K),se.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),se.addRange(K))}}}}for(ce=[],se=E;se=se.parentNode;)se.nodeType===1&&ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ce.length;E++){var le=ce[E];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Yh=!!dg,fg=dg=null}finally{ot=f,ie.p=c,te.T=i}}t.current=r,sn=2}}function wb(){if(sn===2){sn=0;var t=za,r=Gl,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=te.T,te.T=null;var c=ie.p;ie.p=2;var f=ot;ot|=4;try{Xy(t,r.alternate,r)}finally{ot=f,ie.p=c,te.T=i}}sn=3}}function Nb(){if(sn===4||sn===3){sn=0,yi();var t=za,r=Gl,i=Xr,c=cb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?sn=5:(sn=0,Gl=za=null,Tb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ua=null),Dr(i),r=r.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(nn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=te.T,f=ie.p,ie.p=2,te.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{te.T=r,ie.p=f}}(Xr&3)!==0&&Ph(),ur(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===Zm?Tc++:(Tc=0,Zm=t):Tc=0,Ec(0)}}function Tb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ac(r)))}function Ph(){return _b(),wb(),Nb(),Eb()}function Eb(){if(sn!==5)return!1;var t=za,r=Wm;Wm=0;var i=Dr(Xr),c=te.T,f=ie.p;try{ie.p=32>i?32:i,te.T=null,i=Jm,Jm=null;var m=za,v=Xr;if(sn=0,Gl=za=null,Xr=0,(ot&6)!==0)throw Error(a(331));var E=ot;if(ot|=4,ib(m.current),sb(m,m.current,v,i),ot=E,Ec(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(nn,m)}catch{}return!0}finally{ie.p=f,te.T=c,Tb(t,r)}}function jb(t,r,i){r=hs(i,r),r=Im(t.stateNode,r,2),t=Da(t,r,2),t!==null&&(vi(t,2),ur(t))}function mt(t,r,i){if(t.tag===3)jb(t,t,i);else for(;r!==null;){if(r.tag===3){jb(r,t,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ua===null||!Ua.has(c))){t=hs(i,t),i=Sy(2),c=Da(r,i,2),c!==null&&(Ay(i,c,r,t),vi(c,2),ur(c));break}}r=r.return}}function ng(t,r,i){var c=t.pingCache;if(c===null){c=t.pingCache=new G2;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(i)||(Qm=!0,f.add(i),t=X2.bind(null,t,r,i),r.then(t,t))}function X2(t,r,i){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,vt===t&&(Ye&i)===i&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>on()-Ih?(ot&2)===0&&Kl(t,0):Ym|=i,ql===Ye&&(ql=0)),ur(t)}function Sb(t,r){r===0&&(r=Du()),t=Oi(t,r),t!==null&&(vi(t,r),ur(t))}function W2(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),Sb(t,i)}function J2(t,r){var i=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Sb(t,i)}function Z2(t,r){return Ut(t,r)}var Lh=null,Ql=null,sg=!1,Uh=!1,rg=!1,Ha=0;function ur(t){t!==Ql&&t.next===null&&(Ql===null?Lh=Ql=t:Ql=Ql.next=t),Uh=!0,sg||(sg=!0,tE())}function Ec(t,r){if(!rg&&Uh){rg=!0;do for(var i=!1,c=Lh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-bt(42|t)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Ib(c,m))}else m=Ye,m=Ks(c,c===vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Ts(c,m)||(i=!0,Ib(c,m));c=c.next}while(i);rg=!1}}function eE(){Ab()}function Ab(){Uh=sg=!1;var t=0;Ha!==0&&hE()&&(t=Ha);for(var r=on(),i=null,c=Lh;c!==null;){var f=c.next,m=Cb(c,r);m===0?(c.next=null,i===null?Lh=f:i.next=f,f===null&&(Ql=i)):(i=c,(t!==0||(m&3)!==0)&&(Uh=!0)),c=f}sn!==0&&sn!==5||Ec(t),Ha!==0&&(Ha=0)}function Cb(t,r){for(var i=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-bt(m),E=1<<v,V=f[v];V===-1?((E&i)===0||(E&c)!==0)&&(f[v]=Df(E,r)):V<=r&&(t.expiredLanes|=E),m&=~E}if(r=vt,i=Ye,i=Ks(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,i===0||t===r&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Fs(c),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Ts(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(c!==null&&Fs(c),Dr(i)){case 2:case 8:i=et;break;case 32:i=rt;break;case 268435456:i=zt;break;default:i=rt}return c=Rb.bind(null,t),i=Ut(i,c),t.callbackPriority=r,t.callbackNode=i,r}return c!==null&&c!==null&&Fs(c),t.callbackPriority=2,t.callbackNode=null,2}function Rb(t,r){if(sn!==0&&sn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Ph()&&t.callbackNode!==i)return null;var c=Ye;return c=Ks(t,t===vt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(hb(t,c,r),Cb(t,on()),t.callbackNode!=null&&t.callbackNode===i?Rb.bind(null,t):null)}function Ib(t,r){if(Ph())return null;hb(t,r,!0)}function tE(){fE(function(){(ot&6)!==0?Ut(ve,eE):Ab()})}function ag(){if(Ha===0){var t=Dl;t===0&&(t=qs,qs<<=1,(qs&261888)===0&&(qs=256)),Ha=t}return Ha}function kb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yl(""+t)}function Db(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function nE(t,r,i,c,f){if(r==="submit"&&i&&i.stateNode===f){var m=kb((f[cn]||null).action),v=c.submitter;v&&(r=(r=v[cn]||null)?kb(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var E=new sr("action","action",null,c,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ha!==0){var V=v?Db(f,v):new FormData(f);Em(i,{pending:!0,data:V,method:f.method,action:m},null,V)}}else typeof m=="function"&&(E.preventDefault(),V=v?Db(f,v):new FormData(f),Em(i,{pending:!0,data:V,method:f.method,action:m},m,V))},currentTarget:f}]})}}for(var ig=0;ig<Hf.length;ig++){var lg=Hf[ig],sE=lg.toLowerCase(),rE=lg[0].toUpperCase()+lg.slice(1);ks(sE,"on"+rE)}ks(ux,"onAnimationEnd"),ks(hx,"onAnimationIteration"),ks(dx,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(v2,"onTransitionRun"),ks(_2,"onTransitionStart"),ks(w2,"onTransitionCancel"),ks(fx,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Js("onBeforeInput",["compositionend","keypress","textInput","paste"]),Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function Ob(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var c=t[i],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var E=c[v],V=E.instance,$=E.currentTarget;if(E=E.listener,V!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(ae){eh(ae)}f.currentTarget=null,m=V}else for(v=0;v<c.length;v++){if(E=c[v],V=E.instance,$=E.currentTarget,E=E.listener,V!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(ae){eh(ae)}f.currentTarget=null,m=V}}}}function $e(t,r){var i=r[fl];i===void 0&&(i=r[fl]=new Set);var c=t+"__bubble";i.has(c)||(Mb(r,t,2,!1),i.add(c))}function og(t,r,i){var c=0;r&&(c|=4),Mb(i,t,c,r)}var zh="_reactListening"+Math.random().toString(36).slice(2);function cg(t){if(!t[zh]){t[zh]=!0,Lo.forEach(function(i){i!=="selectionchange"&&(aE.has(i)||og(i,!1,t),og(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[zh]||(r[zh]=!0,og("selectionchange",!1,r))}}function Mb(t,r,i,c){switch(uv(r)){case 2:var f=DE;break;case 8:f=OE;break;default:f=Tg}i=f.bind(null,r,i,t),f=void 0,!ji||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function ug(t,r,i,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=Xs(E),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){c=m=v;continue e}E=E.parentNode}}c=c.return}Na(function(){var $=m,ae=ls(i),ce=[];e:{var X=mx.get(t);if(X!==void 0){var se=sr,Te=t;switch(t){case"keypress":if(Ai(i)===0)break e;case"keydown":case"keyup":se=Wu;break;case"focusin":Te="focus",se=Ri;break;case"focusout":Te="blur",se=Ri;break;case"beforeblur":case"afterblur":se=Ri;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=y;break;case ux:case hx:case dx:se=qu;break;case fx:se=S;break;case"scroll":case"scrollend":se=Xo;break;case"wheel":se=ee;break;case"copy":case"cut":case"paste":se=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Vr;break;case"toggle":case"beforetoggle":se=Be}var Ie=(r&4)!==0,yt=!Ie&&(t==="scroll"||t==="scrollend"),F=Ie?X!==null?X+"Capture":null:X;Ie=[];for(var z=$,K;z!==null;){var le=z;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||F===null||(le=As(z,F),le!=null&&Ie.push(Sc(z,le,K))),yt)break;z=z.return}0<Ie.length&&(X=new se(X,Te,null,i,ae),ce.push({event:X,listeners:Ie}))}}if((r&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",X&&i!==$o&&(Te=i.relatedTarget||i.fromElement)&&(Xs(Te)||Te[Qs]))break e;if((se||X)&&(X=ae.window===ae?ae:(X=ae.ownerDocument)?X.defaultView||X.parentWindow:window,se?(Te=i.relatedTarget||i.toElement,se=$,Te=Te?Xs(Te):null,Te!==null&&(yt=u(Te),Ie=Te.tag,Te!==yt||Ie!==5&&Ie!==27&&Ie!==6)&&(Te=null)):(se=null,Te=$),se!==Te)){if(Ie=Wo,le="onMouseLeave",F="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=Vr,le="onPointerLeave",F="onPointerEnter",z="pointer"),yt=se==null?X:Gn(se),K=Te==null?X:Gn(Te),X=new Ie(le,z+"leave",se,i,ae),X.target=yt,X.relatedTarget=K,le=null,Xs(ae)===$&&(Ie=new Ie(F,z+"enter",Te,i,ae),Ie.target=K,Ie.relatedTarget=yt,le=Ie),yt=le,se&&Te)t:{for(Ie=iE,F=se,z=Te,K=0,le=F;le;le=Ie(le))K++;le=0;for(var Se=z;Se;Se=Ie(Se))le++;for(;0<K-le;)F=Ie(F),K--;for(;0<le-K;)z=Ie(z),le--;for(;K--;){if(F===z||z!==null&&F===z.alternate){Ie=F;break t}F=Ie(F),z=Ie(z)}Ie=null}else Ie=null;se!==null&&Vb(ce,X,se,Ie,!1),Te!==null&&yt!==null&&Vb(ce,yt,Te,Ie,!0)}}e:{if(X=$?Gn($):window,se=X.nodeName&&X.nodeName.toLowerCase(),se==="select"||se==="input"&&X.type==="file")var at=Z0;else if(W0(X))if(ex)at=x2;else{at=g2;var je=m2}else se=X.nodeName,!se||se.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&xl($.elementType)&&(at=Z0):at=p2;if(at&&(at=at(t,$))){J0(ce,at,i,ae);break e}je&&je(t,X,$),t==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&qo(X,"number",X.value)}switch(je=$?Gn($):window,t){case"focusin":(W0(je)||je.contentEditable==="true")&&(El=je,Uf=$,nc=null);break;case"focusout":nc=Uf=El=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,ox(ce,i,ae);break;case"selectionchange":if(b2)break;case"keydown":case"keyup":ox(ce,i,ae)}var Fe;if(lt)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Tl?Ii(t,i)&&(Xe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Xe="onCompositionStart");Xe&&(ir&&i.locale!=="ko"&&(Tl||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Tl&&(Fe=Yo()):(nr=ae,Qo="value"in nr?nr.value:nr.textContent,Tl=!0)),je=Bh($,Xe),0<je.length&&(Xe=new ar(Xe,t,null,i,ae),ce.push({event:Xe,listeners:je}),Fe?Xe.data=Fe:(Fe=Nl(i),Fe!==null&&(Xe.data=Fe)))),(Fe=cs?u2(t,i):h2(t,i))&&(Xe=Bh($,"onBeforeInput"),0<Xe.length&&(je=new ar("onBeforeInput","beforeinput",null,i,ae),ce.push({event:je,listeners:Xe}),je.data=Fe)),nE(ce,t,$,i,ae)}Ob(ce,r)})}function Sc(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Bh(t,r){for(var i=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=As(t,i),f!=null&&c.unshift(Sc(t,f,m)),f=As(t,r),f!=null&&c.push(Sc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function iE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vb(t,r,i,c,f){for(var m=r._reactName,v=[];i!==null&&i!==c;){var E=i,V=E.alternate,$=E.stateNode;if(E=E.tag,V!==null&&V===c)break;E!==5&&E!==26&&E!==27||$===null||(V=$,f?($=As(i,m),$!=null&&v.unshift(Sc(i,$,V))):f||($=As(i,m),$!=null&&v.push(Sc(i,$,V)))),i=i.return}v.length!==0&&t.push({event:r,listeners:v})}var lE=/\r\n?/g,oE=/\u0000|\uFFFD/g;function Pb(t){return(typeof t=="string"?t:""+t).replace(lE,`
`).replace(oE,"")}function Lb(t,r){return r=Pb(r),Pb(t)===r}function xt(t,r,i,c,f,m){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Mn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Mn(t,""+c);break;case"className":Kn(t,"class",c);break;case"tabIndex":Kn(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Kn(t,i,c);break;case"style":Ko(t,c,m);break;case"data":if(r!=="object"){Kn(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=yl(""+c),t.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&xt(t,r,"name",f.name,f,null),xt(t,r,"formEncType",f.formEncType,f,null),xt(t,r,"formMethod",f.formMethod,f,null),xt(t,r,"formTarget",f.formTarget,f,null)):(xt(t,r,"encType",f.encType,f,null),xt(t,r,"method",f.method,f,null),xt(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=yl(""+c),t.setAttribute(i,c);break;case"onClick":c!=null&&(t.onclick=Ss);break;case"onScroll":c!=null&&$e("scroll",t);break;case"onScrollEnd":c!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}i=yl(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""+c):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":c===!0?t.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,c):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(i,c):t.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(i):t.setAttribute(i,c);break;case"popover":$e("beforetoggle",t),$e("toggle",t),gl(t,"popover",c);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":gl(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bu.get(i)||i,gl(t,i,c))}}function hg(t,r,i,c,f,m){switch(i){case"style":Ko(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof c=="string"?Mn(t,c):(typeof c=="number"||typeof c=="bigint")&&Mn(t,""+c);break;case"onScroll":c!=null&&$e("scroll",t);break;case"onScrollEnd":c!=null&&$e("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[cn]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,c,f);break e}i in t?t[i]=c:c===!0?t.setAttribute(i,""):gl(t,i,c)}}}function bn(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var c=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var v=i[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:xt(t,r,m,v,i,null)}}f&&xt(t,r,"srcSet",i.srcSet,i,null),c&&xt(t,r,"src",i.src,i,null);return;case"input":$e("invalid",t);var E=m=v=f=null,V=null,$=null;for(c in i)if(i.hasOwnProperty(c)){var ae=i[c];if(ae!=null)switch(c){case"name":f=ae;break;case"type":v=ae;break;case"checked":V=ae;break;case"defaultChecked":$=ae;break;case"value":m=ae;break;case"defaultValue":E=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,r));break;default:xt(t,r,c,ae,i,null)}}Lu(t,m,E,V,$,v,f,!1);return;case"select":$e("invalid",t),c=v=m=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:xt(t,r,f,E,i,null)}r=m,i=v,t.multiple=!!c,r!=null?ba(t,!!c,r,!1):i!=null&&ba(t,!!c,i,!0);return;case"textarea":$e("invalid",t),m=f=c=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:xt(t,r,v,E,i,null)}va(t,c,f,m);return;case"option":for(V in i)if(i.hasOwnProperty(V)&&(c=i[V],c!=null))switch(V){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:xt(t,r,V,c,i,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(c=0;c<jc.length;c++)$e(jc[c],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(c=i[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:xt(t,r,$,c,i,null)}return;default:if(xl(r)){for(ae in i)i.hasOwnProperty(ae)&&(c=i[ae],c!==void 0&&hg(t,r,ae,c,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(c=i[E],c!=null&&xt(t,r,E,c,i,null))}function cE(t,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,V=null,$=null,ae=null;for(se in i){var ce=i[se];if(i.hasOwnProperty(se)&&ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":V=ce;default:c.hasOwnProperty(se)||xt(t,r,se,null,c,ce)}}for(var X in c){var se=c[X];if(ce=i[X],c.hasOwnProperty(X)&&(se!=null||ce!=null))switch(X){case"type":m=se;break;case"name":f=se;break;case"checked":$=se;break;case"defaultChecked":ae=se;break;case"value":v=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,r));break;default:se!==ce&&xt(t,r,X,se,c,ce)}}pl(t,v,E,V,$,ae,m,f);return;case"select":se=v=E=X=null;for(m in i)if(V=i[m],i.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":se=V;default:c.hasOwnProperty(m)||xt(t,r,m,null,c,V)}for(f in c)if(m=c[f],V=i[f],c.hasOwnProperty(f)&&(m!=null||V!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==V&&xt(t,r,f,m,c,V)}r=E,i=v,c=se,X!=null?ba(t,!!i,X,!1):!!c!=!!i&&(r!=null?ba(t,!!i,r,!0):ba(t,!!i,i?[]:"",!1));return;case"textarea":se=X=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:xt(t,r,E,null,c,f)}for(v in c)if(f=c[v],m=i[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":X=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&xt(t,r,v,f,c,m)}Uu(t,X,se);return;case"option":for(var Te in i)if(X=i[Te],i.hasOwnProperty(Te)&&X!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":t.selected=!1;break;default:xt(t,r,Te,null,c,X)}for(V in c)if(X=c[V],se=i[V],c.hasOwnProperty(V)&&X!==se&&(X!=null||se!=null))switch(V){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:xt(t,r,V,X,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in i)X=i[Ie],i.hasOwnProperty(Ie)&&X!=null&&!c.hasOwnProperty(Ie)&&xt(t,r,Ie,null,c,X);for($ in c)if(X=c[$],se=i[$],c.hasOwnProperty($)&&X!==se&&(X!=null||se!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,r));break;default:xt(t,r,$,X,c,se)}return;default:if(xl(r)){for(var yt in i)X=i[yt],i.hasOwnProperty(yt)&&X!==void 0&&!c.hasOwnProperty(yt)&&hg(t,r,yt,void 0,c,X);for(ae in c)X=c[ae],se=i[ae],!c.hasOwnProperty(ae)||X===se||X===void 0&&se===void 0||hg(t,r,ae,X,c,se);return}}for(var F in i)X=i[F],i.hasOwnProperty(F)&&X!=null&&!c.hasOwnProperty(F)&&xt(t,r,F,null,c,X);for(ce in c)X=c[ce],se=i[ce],!c.hasOwnProperty(ce)||X===se||X==null&&se==null||xt(t,r,ce,X,c,se)}function Ub(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var f=i[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&Ub(v)){for(v=0,E=f.responseEnd,c+=1;c<i.length;c++){var V=i[c],$=V.startTime;if($>E)break;var ae=V.transferSize,ce=V.initiatorType;ae&&Ub(ce)&&(V=V.responseEnd,v+=ae*(V<E?1:(E-$)/(V-$)))}if(--c,r+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dg=null,fg=null;function Hh(t){return t.nodeType===9?t:t.ownerDocument}function zb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function mg(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gg=null;function hE(){var t=window.event;return t&&t.type==="popstate"?t===gg?!1:(gg=t,!0):(gg=null,!1)}var Hb=typeof setTimeout=="function"?setTimeout:void 0,dE=typeof clearTimeout=="function"?clearTimeout:void 0,Fb=typeof Promise=="function"?Promise:void 0,fE=typeof queueMicrotask=="function"?queueMicrotask:typeof Fb<"u"?function(t){return Fb.resolve(null).then(t).catch(mE)}:Hb;function mE(t){setTimeout(function(){throw t})}function Fa(t){return t==="head"}function qb(t,r){var i=r,c=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(c===0){t.removeChild(f),Jl(r);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")Ac(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Ac(i);for(var m=i.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Ys]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=v}}else i==="body"&&Ac(t.ownerDocument.body);i=f}while(i);Jl(r)}function Gb(t,r){var i=t;t=0;do{var c=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=c}while(i)}function pg(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":pg(i),ml(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function gE(t,r,i,c){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Ys])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ps(t.nextSibling),t===null)break}return null}function pE(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ps(t.nextSibling),t===null))return null;return t}function Kb(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ps(t.nextSibling),t===null))return null;return t}function xg(t){return t.data==="$?"||t.data==="$~"}function yg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function xE(t,r){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||i.readyState!=="loading")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function ps(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var bg=null;function $b(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(r===0)return ps(t.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}t=t.nextSibling}return null}function Qb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return t;r--}else i!=="/$"&&i!=="/&"||r++}t=t.previousSibling}return null}function Yb(t,r,i){switch(r=Hh(i),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ac(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ml(t)}var xs=new Map,Xb=new Set;function Fh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Wr=ie.d;ie.d={f:yE,r:bE,D:vE,C:_E,L:wE,m:NE,X:EE,S:TE,M:jE};function yE(){var t=Wr.f(),r=Oh();return t||r}function bE(t){var r=is(t);r!==null&&r.tag===5&&r.type==="form"?fy(r):Wr.r(t)}var Yl=typeof document>"u"?null:document;function Wb(t,r,i){var c=Yl;if(c&&typeof r=="string"&&r){var f=On(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Xb.has(f)||(Xb.add(f),t={rel:t,crossOrigin:i,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),bn(r,"link",t),$t(r),c.head.appendChild(r)))}}function vE(t){Wr.D(t),Wb("dns-prefetch",t,null)}function _E(t,r){Wr.C(t,r),Wb("preconnect",t,r)}function wE(t,r,i){Wr.L(t,r,i);var c=Yl;if(c&&t&&r){var f='link[rel="preload"][as="'+On(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+On(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+On(i.imageSizes)+'"]')):f+='[href="'+On(t)+'"]';var m=f;switch(r){case"style":m=Xl(t);break;case"script":m=Wl(t)}xs.has(m)||(t=w({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),xs.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Cc(m))||r==="script"&&c.querySelector(Rc(m))||(r=c.createElement("link"),bn(r,"link",t),$t(r),c.head.appendChild(r)))}}function NE(t,r){Wr.m(t,r);var i=Yl;if(i&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+On(c)+'"][href="'+On(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Wl(t)}if(!xs.has(m)&&(t=w({rel:"modulepreload",href:t},r),xs.set(m,t),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Rc(m)))return}c=i.createElement("link"),bn(c,"link",t),$t(c),i.head.appendChild(c)}}}function TE(t,r,i){Wr.S(t,r,i);var c=Yl;if(c&&t){var f=Ws(c).hoistableStyles,m=Xl(t);r=r||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(Cc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},i),(i=xs.get(m))&&vg(t,i);var V=v=c.createElement("link");$t(V),bn(V,"link",t),V._p=new Promise(function($,ae){V.onload=$,V.onerror=ae}),V.addEventListener("load",function(){E.loading|=1}),V.addEventListener("error",function(){E.loading|=2}),E.loading|=4,qh(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function EE(t,r){Wr.X(t,r);var i=Yl;if(i&&t){var c=Ws(i).hoistableScripts,f=Wl(t),m=c.get(f);m||(m=i.querySelector(Rc(f)),m||(t=w({src:t,async:!0},r),(r=xs.get(f))&&_g(t,r),m=i.createElement("script"),$t(m),bn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function jE(t,r){Wr.M(t,r);var i=Yl;if(i&&t){var c=Ws(i).hoistableScripts,f=Wl(t),m=c.get(f);m||(m=i.querySelector(Rc(f)),m||(t=w({src:t,async:!0,type:"module"},r),(r=xs.get(f))&&_g(t,r),m=i.createElement("script"),$t(m),bn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Jb(t,r,i,c){var f=(f=M.current)?Fh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Xl(i.href),i=Ws(f).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Xl(i.href);var m=Ws(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(Cc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),xs.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},xs.set(t,i),m||SE(f,t,i,v.state))),r&&c===null)throw Error(a(528,""));return v}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wl(i),i=Ws(f).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Xl(t){return'href="'+On(t)+'"'}function Cc(t){return'link[rel="stylesheet"]['+t+"]"}function Zb(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function SE(t,r,i,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),bn(r,"link",i),$t(r),t.head.appendChild(r))}function Wl(t){return'[src="'+On(t)+'"]'}function Rc(t){return"script[async]"+t}function ev(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+On(i.href)+'"]');if(c)return r.instance=c,$t(c),c;var f=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),$t(c),bn(c,"style",f),qh(c,i.precedence,t),r.instance=c;case"stylesheet":f=Xl(i.href);var m=t.querySelector(Cc(f));if(m)return r.state.loading|=4,r.instance=m,$t(m),m;c=Zb(i),(f=xs.get(f))&&vg(c,f),m=(t.ownerDocument||t).createElement("link"),$t(m);var v=m;return v._p=new Promise(function(E,V){v.onload=E,v.onerror=V}),bn(m,"link",c),r.state.loading|=4,qh(m,i.precedence,t),r.instance=m;case"script":return m=Wl(i.src),(f=t.querySelector(Rc(m)))?(r.instance=f,$t(f),f):(c=i,(f=xs.get(m))&&(c=w({},i),_g(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),$t(f),bn(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,qh(c,i.precedence,t));return r.instance}function qh(t,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===r)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function vg(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function _g(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gh=null;function tv(t,r,i){if(Gh===null){var c=new Map,f=Gh=new Map;f.set(i,c)}else f=Gh,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(t))return c;for(c.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[Ys]||m[Kt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=t+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function nv(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function AE(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function CE(t,r,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Xl(c.href),m=r.querySelector(Cc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Kh.bind(t),r.then(t,t)),i.state.loading|=4,i.instance=m,$t(m);return}m=r.ownerDocument||r,c=Zb(c),(f=xs.get(f))&&vg(c,f),m=m.createElement("link"),$t(m);var v=m;v._p=new Promise(function(E,V){v.onload=E,v.onerror=V}),bn(m,"link",c),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Kh.bind(t),r.addEventListener("load",i),r.addEventListener("error",i))}}var wg=0;function RE(t,r){return t.stylesheets&&t.count===0&&Qh(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var c=setTimeout(function(){if(t.stylesheets&&Qh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&wg===0&&(wg=62500*uE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>wg?50:800)+r);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $h=null;function Qh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$h=new Map,r.forEach(IE,t),$h=null,Kh.call(t))}function IE(t,r){if(!(r.state.loading&4)){var i=$h.get(t);if(i)var c=i.get(null);else{i=new Map,$h.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),c=v)}c&&i.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=i.get(v)||c,m===c&&i.set(null,f),i.set(v,f),this.count++,c=Kh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Ic={$$typeof:q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function kE(t,r,i,c,f,m,v,E,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$s(0),this.hiddenUpdates=$s(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function rv(t,r,i,c,f,m,v,E,V,$,ae,ce){return t=new kE(t,r,i,v,V,$,ae,ce,E),r=1,m===!0&&(r|=24),m=Qn(3,null,null,r),t.current=m,m.stateNode=t,r=tm(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:i,cache:r},am(m),t}function av(t){return t?(t=Al,t):Al}function iv(t,r,i,c,f,m){f=av(f),c.context===null?c.context=f:c.pendingContext=f,c=ka(r),c.payload={element:i},m=m===void 0?null:m,m!==null&&(c.callback=m),i=Da(t,c,r),i!==null&&(zn(i,t,r),cc(i,t,r))}function lv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Ng(t,r){lv(t,r),(t=t.alternate)&&lv(t,r)}function ov(t){if(t.tag===13||t.tag===31){var r=Oi(t,67108864);r!==null&&zn(r,t,67108864),Ng(t,67108864)}}function cv(t){if(t.tag===13||t.tag===31){var r=Zn();r=wi(r);var i=Oi(t,r);i!==null&&zn(i,t,r),Ng(t,r)}}var Yh=!0;function DE(t,r,i,c){var f=te.T;te.T=null;var m=ie.p;try{ie.p=2,Tg(t,r,i,c)}finally{ie.p=m,te.T=f}}function OE(t,r,i,c){var f=te.T;te.T=null;var m=ie.p;try{ie.p=8,Tg(t,r,i,c)}finally{ie.p=m,te.T=f}}function Tg(t,r,i,c){if(Yh){var f=Eg(c);if(f===null)ug(t,r,c,Xh,i),hv(t,c);else if(VE(f,t,r,i,c))c.stopPropagation();else if(hv(t,c),r&4&&-1<ME.indexOf(t)){for(;f!==null;){var m=is(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Gs(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var V=1<<31-bt(v);E.entanglements[1]|=V,v&=~V}ur(m),(ot&6)===0&&(kh=on()+500,Ec(0))}}break;case 31:case 13:E=Oi(m,2),E!==null&&zn(E,m,2),Oh(),Ng(m,2)}if(m=Eg(c),m===null&&ug(t,r,c,Xh,i),m===f)break;f=m}f!==null&&c.stopPropagation()}else ug(t,r,c,null,i)}}function Eg(t){return t=ls(t),jg(t)}var Xh=null;function jg(t){if(Xh=null,t=Xs(t),t!==null){var r=u(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=h(r),t!==null)return t;t=null}else if(i===31){if(t=g(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Xh=t,null}function uv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case ve:return 2;case et:return 8;case rt:case Pe:return 32;case zt:return 268435456;default:return 32}default:return 32}}var Sg=!1,qa=null,Ga=null,Ka=null,kc=new Map,Dc=new Map,$a=[],ME="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(t,r){switch(t){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":kc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(r.pointerId)}}function Oc(t,r,i,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=is(r),r!==null&&ov(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function VE(t,r,i,c,f){switch(r){case"focusin":return qa=Oc(qa,t,r,i,c,f),!0;case"dragenter":return Ga=Oc(Ga,t,r,i,c,f),!0;case"mouseover":return Ka=Oc(Ka,t,r,i,c,f),!0;case"pointerover":var m=f.pointerId;return kc.set(m,Oc(kc.get(m)||null,t,r,i,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Dc.set(m,Oc(Dc.get(m)||null,t,r,i,c,f)),!0}return!1}function dv(t){var r=Xs(t.target);if(r!==null){var i=u(r);if(i!==null){if(r=i.tag,r===13){if(r=h(i),r!==null){t.blockedOn=r,Es(t.priority,function(){cv(i)});return}}else if(r===31){if(r=g(i),r!==null){t.blockedOn=r,Es(t.priority,function(){cv(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=Eg(t.nativeEvent);if(i===null){i=t.nativeEvent;var c=new i.constructor(i.type,i);$o=c,i.target.dispatchEvent(c),$o=null}else return r=is(i),r!==null&&ov(r),t.blockedOn=i,!1;r.shift()}return!0}function fv(t,r,i){Wh(t)&&i.delete(r)}function PE(){Sg=!1,qa!==null&&Wh(qa)&&(qa=null),Ga!==null&&Wh(Ga)&&(Ga=null),Ka!==null&&Wh(Ka)&&(Ka=null),kc.forEach(fv),Dc.forEach(fv)}function Jh(t,r){t.blockedOn===r&&(t.blockedOn=null,Sg||(Sg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,PE)))}var Zh=null;function mv(t){Zh!==t&&(Zh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zh===t&&(Zh=null);for(var r=0;r<t.length;r+=3){var i=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(jg(c||i)===null)continue;break}var m=is(i);m!==null&&(t.splice(r,3),r-=3,Em(m,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function Jl(t){function r(V){return Jh(V,t)}qa!==null&&Jh(qa,t),Ga!==null&&Jh(Ga,t),Ka!==null&&Jh(Ka,t),kc.forEach(r),Dc.forEach(r);for(var i=0;i<$a.length;i++){var c=$a[i];c.blockedOn===t&&(c.blockedOn=null)}for(;0<$a.length&&(i=$a[0],i.blockedOn===null);)dv(i),i.blockedOn===null&&$a.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],m=i[c+1],v=f[cn]||null;if(typeof m=="function")v||mv(i);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[cn]||null)E=v.formAction;else if(jg(f)!==null)continue}else E=v.action;typeof E=="function"?i[c+1]=E:(i.splice(c,3),c-=3),mv(i)}}}function gv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Ag(t){this._internalRoot=t}ed.prototype.render=Ag.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,c=Zn();iv(i,c,t,r,null,null)},ed.prototype.unmount=Ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;iv(t.current,2,null,t,null,null),Oh(),r[Qs]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ou();t={blockedOn:null,target:t,priority:r};for(var i=0;i<$a.length&&r!==0&&r<$a[i].priority;i++);$a.splice(i,0,t),i===0&&dv(t)}};var pv=e.version;if(pv!=="19.2.0")throw Error(a(527,pv,"19.2.0"));ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var LE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{nn=td.inject(LE),At=td}catch{}}return Vc.createRoot=function(t,r){if(!o(t))throw Error(a(299));var i=!1,c="",f=Ny,m=Ty,v=Ey;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=rv(t,1,!1,null,null,i,c,null,f,m,v,gv),t[Qs]=r.current,cg(t),new Ag(r)},Vc.hydrateRoot=function(t,r,i){if(!o(t))throw Error(a(299));var c=!1,f="",m=Ny,v=Ty,E=Ey,V=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(V=i.formState)),r=rv(t,1,!0,r,i??null,c,f,V,m,v,E,gv),r.context=av(null),i=r.current,c=Zn(),c=wi(c),f=ka(c),f.callback=null,Da(i,f,c),i=c,r.current.lanes=i,vi(r,i),ur(r),t[Qs]=r.current,cg(t),new ed(r)},Vc.version="19.2.0",Vc}var jv;function QE(){if(jv)return Ig.exports;jv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ig.exports=$E(),Ig.exports}var YE=QE();const XE=Aw(YE);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sv="popstate";function WE(s={}){function e(o,u){let{pathname:h="/",search:g="",hash:x=""}=al(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),tp("",{pathname:h,search:g,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let x=o.location.href,p=x.indexOf("#");g=p===-1?x:x.slice(0,p)}return g+"#"+(typeof u=="string"?u:tu(u))}function a(o,u){vs(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return ZE(e,n,a,s)}function It(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function vs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JE(){return Math.random().toString(36).substring(2,10)}function Av(s,e){return{usr:s.state,key:s.key,idx:e}}function tp(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?al(e):e,state:n,key:e&&e.key||a||JE()}}function tu({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function al(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function ZE(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,h=o.history,g="POP",x=null,p=b();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function b(){return(h.state||{idx:null}).idx}function w(){g="POP";let U=b(),J=U==null?null:U-p;p=U,x&&x({action:g,location:H.location,delta:J})}function T(U,J){g="PUSH";let ne=tp(H.location,U,J);n&&n(ne,U),p=b()+1;let q=Av(ne,p),Y=H.createHref(ne);try{h.pushState(q,"",Y)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(Y)}u&&x&&x({action:g,location:H.location,delta:1})}function R(U,J){g="REPLACE";let ne=tp(H.location,U,J);n&&n(ne,U),p=b();let q=Av(ne,p),Y=H.createHref(ne);h.replaceState(q,"",Y),u&&x&&x({action:g,location:H.location,delta:0})}function B(U){return ej(U)}let H={get action(){return g},get location(){return s(o,h)},listen(U){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(Sv,w),x=U,()=>{o.removeEventListener(Sv,w),x=null}},createHref(U){return e(o,U)},createURL:B,encodeLocation(U){let J=B(U);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:T,replace:R,go(U){return h.go(U)}};return H}function ej(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),It(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:tu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function Cw(s,e,n="/"){return tj(s,e,n,!1)}function tj(s,e,n,a){let o=typeof e=="string"?al(e):e,u=ha(o.pathname||"/",n);if(u==null)return null;let h=Rw(s);nj(h);let g=null;for(let x=0;g==null&&x<h.length;++x){let p=fj(u);g=hj(h[x],p,a)}return g}function Rw(s,e=[],n=[],a="",o=!1){let u=(h,g,x=o,p)=>{let b={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&x)return;It(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let w=aa([a,b.relativePath]),T=n.concat(b);h.children&&h.children.length>0&&(It(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Rw(h.children,e,T,w,x)),!(h.path==null&&!h.index)&&e.push({path:w,score:cj(w,h.index),routesMeta:T})};return s.forEach((h,g)=>{var x;if(h.path===""||!((x=h.path)!=null&&x.includes("?")))u(h,g);else for(let p of Iw(h.path))u(h,g,!0,p)}),e}function Iw(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let h=Iw(a.join("/")),g=[];return g.push(...h.map(x=>x===""?u:[u,x].join("/"))),o&&g.push(...h),g.map(x=>s.startsWith("/")&&x===""?"/":x)}function nj(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:uj(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var sj=/^:[\w-]+$/,rj=3,aj=2,ij=1,lj=10,oj=-2,Cv=s=>s==="*";function cj(s,e){let n=s.split("/"),a=n.length;return n.some(Cv)&&(a+=oj),e&&(a+=aj),n.filter(o=>!Cv(o)).reduce((o,u)=>o+(sj.test(u)?rj:u===""?ij:lj),a)}function uj(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function hj(s,e,n=!1){let{routesMeta:a}=s,o={},u="/",h=[];for(let g=0;g<a.length;++g){let x=a[g],p=g===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=jd({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},b),T=x.route;if(!w&&p&&n&&!a[a.length-1].route.index&&(w=jd({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:aa([u,w.pathname]),pathnameBase:yj(aa([u,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(u=aa([u,w.pathnameBase]))}return h}function jd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=dj(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:w},T)=>{if(b==="*"){let B=g[T]||"";h=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const R=g[T];return w&&!R?p[b]=void 0:p[b]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:s}}function dj(s,e=!1,n=!0){vs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,x)=>(a.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function fj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ha(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var mj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gj=s=>mj.test(s);function pj(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?al(s):s,u;if(n)if(gj(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),vs(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=Rv(n.substring(1),"/"):u=Rv(n,e)}else u=e;return{pathname:u,search:bj(a),hash:vj(o)}}function Rv(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Mg(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xj(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kw(s){let e=xj(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Dw(s,e,n,a=!1){let o;typeof s=="string"?o=al(s):(o={...s},It(!o.pathname||!o.pathname.includes("?"),Mg("?","pathname","search",o)),It(!o.pathname||!o.pathname.includes("#"),Mg("#","pathname","hash",o)),It(!o.search||!o.search.includes("#"),Mg("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,g;if(h==null)g=n;else{let w=e.length-1;if(!a&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}g=w>=0?e[w]:"/"}let x=pj(o,g),p=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(p||b)&&(x.pathname+="/"),x}var aa=s=>s.join("/").replace(/\/\/+/g,"/"),yj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),bj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,vj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function _j(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ow=["POST","PUT","PATCH","DELETE"];new Set(Ow);var wj=["GET",...Ow];new Set(wj);var jo=C.createContext(null);jo.displayName="DataRouter";var Yd=C.createContext(null);Yd.displayName="DataRouterState";C.createContext(!1);var Mw=C.createContext({isTransitioning:!1});Mw.displayName="ViewTransition";var Nj=C.createContext(new Map);Nj.displayName="Fetchers";var Tj=C.createContext(null);Tj.displayName="Await";var Cr=C.createContext(null);Cr.displayName="Navigation";var du=C.createContext(null);du.displayName="Location";var Rr=C.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var Up=C.createContext(null);Up.displayName="RouteError";function Ej(s,{relative:e}={}){It(fu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=C.useContext(Cr),{hash:o,pathname:u,search:h}=mu(s,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:aa([n,u])),a.createHref({pathname:g,search:h,hash:o})}function fu(){return C.useContext(du)!=null}function di(){return It(fu(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(du).location}var Vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pw(s){C.useContext(Cr).static||C.useLayoutEffect(s)}function zs(){let{isDataRoute:s}=C.useContext(Rr);return s?Uj():jj()}function jj(){It(fu(),"useNavigate() may be used only in the context of a <Router> component.");let s=C.useContext(jo),{basename:e,navigator:n}=C.useContext(Cr),{matches:a}=C.useContext(Rr),{pathname:o}=di(),u=JSON.stringify(kw(a)),h=C.useRef(!1);return Pw(()=>{h.current=!0}),C.useCallback((x,p={})=>{if(vs(h.current,Vw),!h.current)return;if(typeof x=="number"){n.go(x);return}let b=Dw(x,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:aa([e,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[e,n,u,o,s])}C.createContext(null);function Sj(){let{matches:s}=C.useContext(Rr),e=s[s.length-1];return e?e.params:{}}function mu(s,{relative:e}={}){let{matches:n}=C.useContext(Rr),{pathname:a}=di(),o=JSON.stringify(kw(n));return C.useMemo(()=>Dw(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function Aj(s,e){return Lw(s,e)}function Lw(s,e,n,a,o){var ne;It(fu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=C.useContext(Cr),{matches:h}=C.useContext(Rr),g=h[h.length-1],x=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let q=w&&w.path||"";Uw(p,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let T=di(),R;if(e){let q=typeof e=="string"?al(e):e;It(b==="/"||((ne=q.pathname)==null?void 0:ne.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${q.pathname}" was given in the \`location\` prop.`),R=q}else R=T;let B=R.pathname||"/",H=B;if(b!=="/"){let q=b.replace(/^\//,"").split("/");H="/"+B.replace(/^\//,"").split("/").slice(q.length).join("/")}let U=Cw(s,{pathname:H});vs(w||U!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),vs(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=Dj(U&&U.map(q=>Object.assign({},q,{params:Object.assign({},x,q.params),pathname:aa([b,u.encodeLocation?u.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?b:aa([b,u.encodeLocation?u.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),h,n,a,o);return e&&J?C.createElement(du.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},J):J}function Cj(){let s=Lj(),e=_j(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:u},"ErrorBoundary")," or"," ",C.createElement("code",{style:u},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,h)}var Rj=C.createElement(Cj,null),Ij=class extends C.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?C.createElement(Rr.Provider,{value:this.props.routeContext},C.createElement(Up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kj({routeContext:s,match:e,children:n}){let a=C.useContext(jo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Rr.Provider,{value:s},n)}function Dj(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n==null?void 0:n.errors;if(h!=null){let b=u.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);It(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,x=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(x=b),w.route.id){let{loaderData:T,errors:R}=n,B=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!R||R[w.route.id]===void 0);if(w.route.lazy||B){g=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}let p=n&&a?(b,w)=>{var T,R;a(b,{location:n.location,params:((R=(T=n.matches)==null?void 0:T[0])==null?void 0:R.params)??{},errorInfo:w})}:void 0;return u.reduceRight((b,w,T)=>{let R,B=!1,H=null,U=null;n&&(R=h&&w.route.id?h[w.route.id]:void 0,H=w.route.errorElement||Rj,g&&(x<0&&T===0?(Uw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,U=null):x===T&&(B=!0,U=w.route.hydrateFallbackElement||null)));let J=e.concat(u.slice(0,T+1)),ne=()=>{let q;return R?q=H:B?q=U:w.route.Component?q=C.createElement(w.route.Component,null):w.route.element?q=w.route.element:q=b,C.createElement(kj,{match:w,routeContext:{outlet:b,matches:J,isDataRoute:n!=null},children:q})};return n&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?C.createElement(Ij,{location:n.location,revalidation:n.revalidation,component:H,error:R,children:ne(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:p}):ne()},null)}function zp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oj(s){let e=C.useContext(jo);return It(e,zp(s)),e}function Mj(s){let e=C.useContext(Yd);return It(e,zp(s)),e}function Vj(s){let e=C.useContext(Rr);return It(e,zp(s)),e}function Bp(s){let e=Vj(s),n=e.matches[e.matches.length-1];return It(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Pj(){return Bp("useRouteId")}function Lj(){var a;let s=C.useContext(Up),e=Mj("useRouteError"),n=Bp("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[n]}function Uj(){let{router:s}=Oj("useNavigate"),e=Bp("useNavigate"),n=C.useRef(!1);return Pw(()=>{n.current=!0}),C.useCallback(async(o,u={})=>{vs(n.current,Vw),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Iv={};function Uw(s,e,n){!e&&!Iv[s]&&(Iv[s]=!0,vs(!1,n))}C.memo(zj);function zj({routes:s,future:e,state:n,unstable_onError:a}){return Lw(s,void 0,n,a,e)}function hr(s){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bj({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1}){It(!fu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=al(n));let{pathname:x="/",search:p="",hash:b="",state:w=null,key:T="default"}=n,R=C.useMemo(()=>{let B=ha(x,h);return B==null?null:{location:{pathname:B,search:p,hash:b,state:w,key:T},navigationType:a}},[h,x,p,b,w,T,a]);return vs(R!=null,`<Router basename="${h}"> is not able to match the URL "${x}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:C.createElement(Cr.Provider,{value:g},C.createElement(du.Provider,{children:e,value:R}))}function Hj({children:s,location:e}){return Aj(np(s),e)}function np(s,e=[]){let n=[];return C.Children.forEach(s,(a,o)=>{if(!C.isValidElement(a))return;let u=[...e,o];if(a.type===C.Fragment){n.push.apply(n,np(a.props.children,u));return}It(a.type===hr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=np(a.props.children,u)),n.push(h)}),n}var hd="get",dd="application/x-www-form-urlencoded";function Xd(s){return s!=null&&typeof s.tagName=="string"}function Fj(s){return Xd(s)&&s.tagName.toLowerCase()==="button"}function qj(s){return Xd(s)&&s.tagName.toLowerCase()==="form"}function Gj(s){return Xd(s)&&s.tagName.toLowerCase()==="input"}function Kj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $j(s,e){return s.button===0&&(!e||e==="_self")&&!Kj(s)}var nd=null;function Qj(){if(nd===null)try{new FormData(document.createElement("form"),0),nd=!1}catch{nd=!0}return nd}var Yj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vg(s){return s!=null&&!Yj.has(s)?(vs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):s}function Xj(s,e){let n,a,o,u,h;if(qj(s)){let g=s.getAttribute("action");a=g?ha(g,e):null,n=s.getAttribute("method")||hd,o=Vg(s.getAttribute("enctype"))||dd,u=new FormData(s)}else if(Fj(s)||Gj(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=s.getAttribute("formaction")||g.getAttribute("action");if(a=x?ha(x,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||hd,o=Vg(s.getAttribute("formenctype"))||Vg(g.getAttribute("enctype"))||dd,u=new FormData(g,s),!Qj()){let{name:p,type:b,value:w}=s;if(b==="image"){let T=p?`${p}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else p&&u.append(p,w)}}else{if(Xd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,a=null,o=dd,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Wj(s,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&ha(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function Jj(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function eS(s,e,n){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await Jj(u,n);return h.links?h.links():[]}return[]}));return rS(a.flat(1).filter(Zj).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function kv(s,e,n,a,o,u){let h=(x,p)=>n[p]?x.route.id!==n[p].route.id:!0,g=(x,p)=>{var b;return n[p].pathname!==x.pathname||((b=n[p].route.path)==null?void 0:b.endsWith("*"))&&n[p].params["*"]!==x.params["*"]};return u==="assets"?e.filter((x,p)=>h(x,p)||g(x,p)):u==="data"?e.filter((x,p)=>{var w;let b=a.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(h(x,p)||g(x,p))return!0;if(x.route.shouldRevalidate){let T=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function tS(s,e,{includeHydrateFallback:n}={}){return nS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function nS(s){return[...new Set(s)]}function sS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function rS(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(sS(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function zw(){let s=C.useContext(jo);return Hp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function aS(){let s=C.useContext(Yd);return Hp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Fp=C.createContext(void 0);Fp.displayName="FrameworkContext";function Bw(){let s=C.useContext(Fp);return Hp(s,"You must render this element inside a <HydratedRouter> element"),s}function iS(s,e){let n=C.useContext(Fp),[a,o]=C.useState(!1),[u,h]=C.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:p,onMouseLeave:b,onTouchStart:w}=e,T=C.useRef(null);C.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let H=J=>{J.forEach(ne=>{h(ne.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return T.current&&U.observe(T.current),()=>{U.disconnect()}}},[s]),C.useEffect(()=>{if(a){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[a]);let R=()=>{o(!0)},B=()=>{o(!1),h(!1)};return n?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Pc(g,R),onBlur:Pc(x,B),onMouseEnter:Pc(p,R),onMouseLeave:Pc(b,B),onTouchStart:Pc(w,R)}]:[!1,T,{}]}function Pc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function lS({page:s,...e}){let{router:n}=zw(),a=C.useMemo(()=>Cw(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?C.createElement(cS,{page:s,matches:a,...e}):null}function oS(s){let{manifest:e,routeModules:n}=Bw(),[a,o]=C.useState([]);return C.useEffect(()=>{let u=!1;return eS(s,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,n]),a}function cS({page:s,matches:e,...n}){let a=di(),{manifest:o,routeModules:u}=Bw(),{basename:h}=zw(),{loaderData:g,matches:x}=aS(),p=C.useMemo(()=>kv(s,e,x,o,a,"data"),[s,e,x,o,a]),b=C.useMemo(()=>kv(s,e,x,o,a,"assets"),[s,e,x,o,a]),w=C.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,H=!1;if(e.forEach(J=>{var q;let ne=o.routes[J.route.id];!ne||!ne.hasLoader||(!p.some(Y=>Y.route.id===J.route.id)&&J.route.id in g&&((q=u[J.route.id])!=null&&q.shouldRevalidate)||ne.hasClientLoader?H=!0:B.add(J.route.id))}),B.size===0)return[];let U=Wj(s,h,"data");return H&&B.size>0&&U.searchParams.set("_routes",e.filter(J=>B.has(J.route.id)).map(J=>J.route.id).join(",")),[U.pathname+U.search]},[h,g,a,o,p,e,s,u]),T=C.useMemo(()=>tS(b,o),[b,o]),R=oS(b);return C.createElement(C.Fragment,null,w.map(B=>C.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),T.map(B=>C.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),R.map(({key:B,link:H})=>C.createElement("link",{key:B,nonce:n.nonce,...H})))}function uS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hw&&(window.__reactRouterVersion="7.9.6")}catch{}function hS({basename:s,children:e,window:n}){let a=C.useRef();a.current==null&&(a.current=WE({window:n,v5Compat:!0}));let o=a.current,[u,h]=C.useState({action:o.action,location:o.location}),g=C.useCallback(x=>{C.startTransition(()=>h(x))},[h]);return C.useLayoutEffect(()=>o.listen(g),[o,g]),C.createElement(Bj,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var Fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qw=C.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:h,state:g,target:x,to:p,preventScrollReset:b,viewTransition:w,...T},R){let{basename:B}=C.useContext(Cr),H=typeof p=="string"&&Fw.test(p),U,J=!1;if(typeof p=="string"&&H&&(U=p,Hw))try{let A=new URL(window.location.href),P=p.startsWith("//")?new URL(A.protocol+p):new URL(p),O=ha(P.pathname,B);P.origin===A.origin&&O!=null?p=O+P.search+P.hash:J=!0}catch{vs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=Ej(p,{relative:o}),[q,Y,de]=iS(a,T),pe=gS(p,{replace:h,state:g,target:x,preventScrollReset:b,relative:o,viewTransition:w});function j(A){e&&e(A),A.defaultPrevented||pe(A)}let N=C.createElement("a",{...T,...de,href:U||ne,onClick:J||u?e:j,ref:uS(R,Y),target:x,"data-discover":!H&&n==="render"?"true":void 0});return q&&!H?C.createElement(C.Fragment,null,N,C.createElement(lS,{page:ne})):N});qw.displayName="Link";var dS=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:h,viewTransition:g,children:x,...p},b){let w=mu(h,{relative:p.relative}),T=di(),R=C.useContext(Yd),{navigator:B,basename:H}=C.useContext(Cr),U=R!=null&&vS(w)&&g===!0,J=B.encodeLocation?B.encodeLocation(w).pathname:w.pathname,ne=T.pathname,q=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(ne=ne.toLowerCase(),q=q?q.toLowerCase():null,J=J.toLowerCase()),q&&H&&(q=ha(q,H)||q);const Y=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let de=ne===J||!o&&ne.startsWith(J)&&ne.charAt(Y)==="/",pe=q!=null&&(q===J||!o&&q.startsWith(J)&&q.charAt(J.length)==="/"),j={isActive:de,isPending:pe,isTransitioning:U},N=de?e:void 0,A;typeof a=="function"?A=a(j):A=[a,de?"active":null,pe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(j):u;return C.createElement(qw,{...p,"aria-current":N,className:A,ref:b,style:P,to:h,viewTransition:g},typeof x=="function"?x(j):x)});dS.displayName="NavLink";var fS=C.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:h=hd,action:g,onSubmit:x,relative:p,preventScrollReset:b,viewTransition:w,...T},R)=>{let B=yS(),H=bS(g,{relative:p}),U=h.toLowerCase()==="get"?"get":"post",J=typeof g=="string"&&Fw.test(g),ne=q=>{if(x&&x(q),q.defaultPrevented)return;q.preventDefault();let Y=q.nativeEvent.submitter,de=(Y==null?void 0:Y.getAttribute("formmethod"))||h;B(Y||q.currentTarget,{fetcherKey:e,method:de,navigate:n,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:w})};return C.createElement("form",{ref:R,method:U,action:H,onSubmit:a?x:ne,...T,"data-discover":!J&&s==="render"?"true":void 0})});fS.displayName="Form";function mS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gw(s){let e=C.useContext(jo);return It(e,mS(s)),e}function gS(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:h}={}){let g=zs(),x=di(),p=mu(s,{relative:u});return C.useCallback(b=>{if($j(b,e)){b.preventDefault();let w=n!==void 0?n:tu(x)===tu(p);g(s,{replace:w,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[x,g,p,n,a,e,s,o,u,h])}var pS=0,xS=()=>`__${String(++pS)}__`;function yS(){let{router:s}=Gw("useSubmit"),{basename:e}=C.useContext(Cr),n=Pj();return C.useCallback(async(a,o={})=>{let{action:u,method:h,encType:g,formData:x,body:p}=Xj(a,e);if(o.navigate===!1){let b=o.fetcherKey||xS();await s.fetch(b,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function bS(s,{relative:e}={}){let{basename:n}=C.useContext(Cr),a=C.useContext(Rr);It(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...mu(s||".",{relative:e})},h=di();if(s==null){u.search=h.search;let g=new URLSearchParams(u.search),x=g.getAll("index");if(x.some(b=>b==="")){g.delete("index"),x.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:aa([n,u.pathname])),tu(u)}function vS(s,{relative:e}={}){let n=C.useContext(Mw);It(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Gw("useViewTransitionState"),o=mu(s,{relative:e});if(!n.isTransitioning)return!1;let u=ha(n.currentLocation.pathname,a)||n.currentLocation.pathname,h=ha(n.nextLocation.pathname,a)||n.nextLocation.pathname;return jd(o.pathname,h)!=null||jd(o.pathname,u)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),Dv=s=>{const e=wS(s);return e.charAt(0).toUpperCase()+e.slice(1)},Kw=(...s)=>s.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),NS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=C.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:h,...g},x)=>C.createElement("svg",{ref:x,...TS,width:e,height:e,stroke:s,strokeWidth:a?Number(n)*24/Number(e):n,className:Kw("lucide",o),...!u&&!NS(g)&&{"aria-hidden":"true"},...g},[...h.map(([p,b])=>C.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(s,e)=>{const n=C.forwardRef(({className:a,...o},u)=>C.createElement(ES,{ref:u,iconNode:e,className:Kw(`lucide-${_S(Dv(s))}`,`lucide-${s}`,a),...o}));return n.displayName=Dv(s),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qp=Ee("arrow-left",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Sd=Ee("arrow-right",SS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Ov=Ee("baby",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],RS=Ee("banknote",CS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Mv=Ee("bell",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],DS=Ee("book-open",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],sp=Ee("briefcase",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Gc=Ee("building-2",MS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zi=Ee("calendar",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],LS=Ee("chart-pie",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Kc=Ee("check",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],BS=Ee("chevron-down",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ms=Ee("chevron-right",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ps=Ee("circle-alert",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mr=Ee("circle-check-big",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qi=Ee("circle-check",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$S=Ee("circle-user",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Jr=Ee("circle-x",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fd=Ee("clock",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Wd=Ee("cloud-upload",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vv=Ee("database",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ns=Ee("download",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rp=Ee("eye-off",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nu=Ee("eye",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],$w=Ee("file-spreadsheet",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qe=Ee("file-text",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Gp=Ee("file",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Pv=Ee("flask-conical",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],iA=Ee("folder-open",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Lv=Ee("folder",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cA=Ee("funnel",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Kp=Ee("graduation-cap",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Pg=Ee("image",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],fA=Ee("landmark",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Qw=Ee("layout-grid",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Uv=Ee("list",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$p=Ee("loader-circle",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ho=Ee("lock",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bA=Ee("log-out",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_A=Ee("mail",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Jd=Ee("maximize-2",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Wa=Ee("message-circle",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ad=Ee("message-square",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],jA=Ee("phone",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fo=Ee("plus",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],CA=Ee("refresh-ccw",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yw=Ee("rotate-ccw",RA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zd=Ee("save",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Xw=Ee("school",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],il=Ee("search",DA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ef=Ee("send",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],VA=Ee("settings",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ro=Ee("shield-check",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Lg=Ee("square-check-big",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mo=Ee("square-pen",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],BA=Ee("stethoscope",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pr=Ee("trash-2",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fn=Ee("upload",FA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ao=Ee("user",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zl=Ee("users",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ap=Ee("utensils",KA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rn=Ee("x",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],tf=Ee("zoom-in",QA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nf=Ee("zoom-out",YA),XA=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:ro,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],Ww="TRC D LIU TRNG MU GIO VNG ANH",WA="modulepreload",JA=function(s){return"/"+s},zv={},$c=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(n.map(p=>{if(p=JA(p),p in zv)return;zv[p]=!0;const b=p.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":WA,b||(T.as="script"),T.crossOrigin="",T.href=p,x&&T.setAttribute("nonce",x),document.head.appendChild(T),b)return new Promise((R,B)=>{T.addEventListener("load",R),T.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},ZA=()=>{};var Bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eC=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],x=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const u=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,x=o+2<s.length,p=x?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let T=(g&15)<<2|p>>6,R=p&63;x||(R=64,h||(T=64)),a.push(n[b],n[w],n[T],n[R])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Jw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):eC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new tC;const T=u<<2|g>>4;if(a.push(T),p!==64){const R=g<<4&240|p>>2;if(a.push(R),w!==64){const B=p<<6&192|w;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(s){const e=Jw(s);return Zw.encodeByteArray(e,!0)},Cd=function(s){return nC(s).replace(/\./g,"")},e1=function(s){try{return Zw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=()=>sC().__FIREBASE_DEFAULTS__,aC=()=>{if(typeof process>"u"||typeof Bv>"u")return;const s=Bv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},iC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&e1(s[1]);return e&&JSON.parse(e)},sf=()=>{try{return ZA()||rC()||aC()||iC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},t1=s=>{var e,n;return(n=(e=sf())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Qp=s=>{const e=t1(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},n1=()=>{var s;return(s=sf())==null?void 0:s.config},s1=s=>{var e;return(e=sf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rf(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Cd(JSON.stringify(n)),Cd(JSON.stringify(h)),""].join(".")}const Qc={};function oC(){const s={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?s.emulator.push(e):s.prod.push(e);return s}function cC(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Hv=!1;function af(s,e){if(typeof window>"u"||typeof document>"u"||!Ir(window.location.host)||Qc[s]===e||Qc[s]||Hv)return;Qc[s]=e;function n(T){return`__firebase__banner__${T}`}const a="__firebase__banner",u=oC().prod.length>0;function h(){const T=document.getElementById(a);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function x(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Hv=!0,h()},T}function b(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=cC(a),R=n("text"),B=document.getElementById(R)||document.createElement("span"),H=n("learnmore"),U=document.getElementById(H)||document.createElement("a"),J=n("preprendIcon"),ne=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;g(q),b(U,H);const Y=p();x(ne,J),q.append(ne,B,U,Y),document.body.appendChild(q)}u?(B.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function hC(){var e;const s=(e=sf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function mC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gC(){const s=Sn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function pC(){return!hC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xC(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="FirebaseError";class Bs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=bC,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?vC(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Bs(o,g,a)}}function vC(s,e){return s.replace(_C,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const _C=/\{\$([^}]+)}/g;function wC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function si(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(Fv(u)&&Fv(h)){if(!si(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Fv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Uc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function zc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function NC(s,e){const n=new TC(s,e);return n.subscribe.bind(n)}class TC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");EC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Ug),o.error===void 0&&(o.error=Ug),o.complete===void 0&&(o.complete=Ug);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EC(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(s){return s&&s._delegate?s._delegate:s}class da{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new lC;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AC(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:SC(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SC(s){return s===$i?void 0:s}function AC(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(We||(We={}));const RC={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},IC=We.INFO,kC={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},DC=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=kC[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=IC,this._logHandler=DC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const OC=(s,e)=>e.some(n=>s instanceof n);let qv,Gv;function MC(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VC(){return Gv||(Gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,ip=new WeakMap,i1=new WeakMap,zg=new WeakMap,Xp=new WeakMap;function PC(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Za(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&a1.set(n,s)}).catch(()=>{}),Xp.set(e,s),e}function LC(s){if(ip.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});ip.set(s,e)}let lp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return ip.get(s);if(e==="objectStoreNames")return s.objectStoreNames||i1.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Za(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function UC(s){lp=s(lp)}function zC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(Bg(this),e,...n);return i1.set(a,e.sort?e.sort():[e]),Za(a)}:VC().includes(s)?function(...e){return s.apply(Bg(this),e),Za(a1.get(this))}:function(...e){return Za(s.apply(Bg(this),e))}}function BC(s){return typeof s=="function"?zC(s):(s instanceof IDBTransaction&&LC(s),OC(s,MC())?new Proxy(s,lp):s)}function Za(s){if(s instanceof IDBRequest)return PC(s);if(zg.has(s))return zg.get(s);const e=BC(s);return e!==s&&(zg.set(s,e),Xp.set(e,s)),e}const Bg=s=>Xp.get(s);function HC(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=Za(h);return a&&h.addEventListener("upgradeneeded",x=>{a(Za(h.result),x.oldVersion,x.newVersion,Za(h.transaction),x)}),n&&h.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),g.then(x=>{u&&x.addEventListener("close",()=>u()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const FC=["get","getKey","getAll","getAllKeys","count"],qC=["put","add","delete","clear"],Hg=new Map;function Kv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Hg.get(e))return Hg.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=qC.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||FC.includes(n)))return;const u=async function(h,...g){const x=this.transaction(h,o?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&x.done]))[0]};return Hg.set(e,u),u}UC(s=>({...s,get:(e,n,a)=>Kv(e,n)||s.get(e,n,a),has:(e,n)=>!!Kv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KC(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function KC(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",$v="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Yp("@firebase/app"),$C="@firebase/app-compat",QC="@firebase/analytics-compat",YC="@firebase/analytics",XC="@firebase/app-check-compat",WC="@firebase/app-check",JC="@firebase/auth",ZC="@firebase/auth-compat",eR="@firebase/database",tR="@firebase/data-connect",nR="@firebase/database-compat",sR="@firebase/functions",rR="@firebase/functions-compat",aR="@firebase/installations",iR="@firebase/installations-compat",lR="@firebase/messaging",oR="@firebase/messaging-compat",cR="@firebase/performance",uR="@firebase/performance-compat",hR="@firebase/remote-config",dR="@firebase/remote-config-compat",fR="@firebase/storage",mR="@firebase/storage-compat",gR="@firebase/firestore",pR="@firebase/ai",xR="@firebase/firestore-compat",yR="firebase",bR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",vR={[op]:"fire-core",[$C]:"fire-core-compat",[YC]:"fire-analytics",[QC]:"fire-analytics-compat",[WC]:"fire-app-check",[XC]:"fire-app-check-compat",[JC]:"fire-auth",[ZC]:"fire-auth-compat",[eR]:"fire-rtdb",[tR]:"fire-data-connect",[nR]:"fire-rtdb-compat",[sR]:"fire-fn",[rR]:"fire-fn-compat",[aR]:"fire-iid",[iR]:"fire-iid-compat",[lR]:"fire-fcm",[oR]:"fire-fcm-compat",[cR]:"fire-perf",[uR]:"fire-perf-compat",[hR]:"fire-rc",[dR]:"fire-rc-compat",[fR]:"fire-gcs",[mR]:"fire-gcs-compat",[gR]:"fire-fst",[xR]:"fire-fst-compat",[pR]:"fire-vertex","fire-js":"fire-js",[yR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Map,up=new Map,hp=new Map;function Qv(s,e){try{s.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ri(s){const e=s.name;if(hp.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,s);for(const n of go.values())Qv(n,s);for(const n of up.values())Qv(n,s);return!0}function xu(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Hn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new gu("app","Firebase",_R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=bR;function Wp(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:cp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ei.create("bad-app-name",{appName:String(o)});if(n||(n=n1()),!n)throw ei.create("no-options");const u=go.get(o);if(u){if(si(n,u.options)&&si(a,u.config))return u;throw ei.create("duplicate-app",{appName:o})}const h=new CC(o);for(const x of hp.values())h.addComponent(x);const g=new wR(n,a,h);return go.set(o,g),g}function lf(s=cp){const e=go.get(s);if(!e&&s===cp&&n1())return Wp();if(!e)throw ei.create("no-app",{appName:s});return e}async function NR(s){let e=!1;const n=s.name;go.has(n)?(e=!0,go.delete(n)):up.has(n)&&s.decRefCount()<=0&&(up.delete(n),e=!0),e&&(await Promise.all(s.container.getProviders().map(a=>a.delete())),s.isDeleted=!0)}function bs(s,e,n){let a=vR[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(h.join(" "));return}ri(new da(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebase-heartbeat-database",ER=1,su="firebase-heartbeat-store";let Fg=null;function l1(){return Fg||(Fg=HC(TR,ER,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(su)}catch(n){console.warn(n)}}}}).catch(s=>{throw ei.create("idb-open",{originalErrorMessage:s.message})})),Fg}async function jR(s){try{const n=(await l1()).transaction(su),a=await n.objectStore(su).get(o1(s));return await n.done,a}catch(e){if(e instanceof Bs)fa.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(n.message)}}}async function Yv(s,e){try{const a=(await l1()).transaction(su,"readwrite");await a.objectStore(su).put(e,o1(s)),await a.done}catch(n){if(n instanceof Bs)fa.warn(n.message);else{const a=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fa.warn(a.message)}}}function o1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1024,AR=30;class CR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IR(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Xv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>AR){const h=kR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){fa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xv(),{heartbeatsToSend:a,unsentEntries:o}=RR(this._heartbeatsCache.heartbeats),u=Cd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fa.warn(n),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function RR(s,e=SR){const n=[];let a=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Wv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Wv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class IR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xC()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Wv(s){return Cd(JSON.stringify({version:2,heartbeats:s})).length}function kR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(s){ri(new da("platform-logger",e=>new GC(e),"PRIVATE")),ri(new da("heartbeat",e=>new CR(e),"PRIVATE")),bs(op,$v,s),bs(op,$v,"esm2020"),bs("fire-js","")}DR("");var OR="firebase",MR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(OR,MR,"app");var Jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,c1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function A(){}A.prototype=N.prototype,j.F=N.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(P,O,D){for(var I=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)I[Ce-2]=arguments[Ce];return N.prototype[O].apply(P,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,N,A){A||(A=0);const P=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)P[O]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(O=0;O<16;++O)P[O]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=j.g[0],A=j.g[1],O=j.g[2];let D=j.g[3],I;I=N+(D^A&(O^D))+P[0]+3614090360&4294967295,N=A+(I<<7&4294967295|I>>>25),I=D+(O^N&(A^O))+P[1]+3905402710&4294967295,D=N+(I<<12&4294967295|I>>>20),I=O+(A^D&(N^A))+P[2]+606105819&4294967295,O=D+(I<<17&4294967295|I>>>15),I=A+(N^O&(D^N))+P[3]+3250441966&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(D^A&(O^D))+P[4]+4118548399&4294967295,N=A+(I<<7&4294967295|I>>>25),I=D+(O^N&(A^O))+P[5]+1200080426&4294967295,D=N+(I<<12&4294967295|I>>>20),I=O+(A^D&(N^A))+P[6]+2821735955&4294967295,O=D+(I<<17&4294967295|I>>>15),I=A+(N^O&(D^N))+P[7]+4249261313&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(D^A&(O^D))+P[8]+1770035416&4294967295,N=A+(I<<7&4294967295|I>>>25),I=D+(O^N&(A^O))+P[9]+2336552879&4294967295,D=N+(I<<12&4294967295|I>>>20),I=O+(A^D&(N^A))+P[10]+4294925233&4294967295,O=D+(I<<17&4294967295|I>>>15),I=A+(N^O&(D^N))+P[11]+2304563134&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(D^A&(O^D))+P[12]+1804603682&4294967295,N=A+(I<<7&4294967295|I>>>25),I=D+(O^N&(A^O))+P[13]+4254626195&4294967295,D=N+(I<<12&4294967295|I>>>20),I=O+(A^D&(N^A))+P[14]+2792965006&4294967295,O=D+(I<<17&4294967295|I>>>15),I=A+(N^O&(D^N))+P[15]+1236535329&4294967295,A=O+(I<<22&4294967295|I>>>10),I=N+(O^D&(A^O))+P[1]+4129170786&4294967295,N=A+(I<<5&4294967295|I>>>27),I=D+(A^O&(N^A))+P[6]+3225465664&4294967295,D=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(D^N))+P[11]+643717713&4294967295,O=D+(I<<14&4294967295|I>>>18),I=A+(D^N&(O^D))+P[0]+3921069994&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^D&(A^O))+P[5]+3593408605&4294967295,N=A+(I<<5&4294967295|I>>>27),I=D+(A^O&(N^A))+P[10]+38016083&4294967295,D=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(D^N))+P[15]+3634488961&4294967295,O=D+(I<<14&4294967295|I>>>18),I=A+(D^N&(O^D))+P[4]+3889429448&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^D&(A^O))+P[9]+568446438&4294967295,N=A+(I<<5&4294967295|I>>>27),I=D+(A^O&(N^A))+P[14]+3275163606&4294967295,D=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(D^N))+P[3]+4107603335&4294967295,O=D+(I<<14&4294967295|I>>>18),I=A+(D^N&(O^D))+P[8]+1163531501&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(O^D&(A^O))+P[13]+2850285829&4294967295,N=A+(I<<5&4294967295|I>>>27),I=D+(A^O&(N^A))+P[2]+4243563512&4294967295,D=N+(I<<9&4294967295|I>>>23),I=O+(N^A&(D^N))+P[7]+1735328473&4294967295,O=D+(I<<14&4294967295|I>>>18),I=A+(D^N&(O^D))+P[12]+2368359562&4294967295,A=O+(I<<20&4294967295|I>>>12),I=N+(A^O^D)+P[5]+4294588738&4294967295,N=A+(I<<4&4294967295|I>>>28),I=D+(N^A^O)+P[8]+2272392833&4294967295,D=N+(I<<11&4294967295|I>>>21),I=O+(D^N^A)+P[11]+1839030562&4294967295,O=D+(I<<16&4294967295|I>>>16),I=A+(O^D^N)+P[14]+4259657740&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^D)+P[1]+2763975236&4294967295,N=A+(I<<4&4294967295|I>>>28),I=D+(N^A^O)+P[4]+1272893353&4294967295,D=N+(I<<11&4294967295|I>>>21),I=O+(D^N^A)+P[7]+4139469664&4294967295,O=D+(I<<16&4294967295|I>>>16),I=A+(O^D^N)+P[10]+3200236656&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^D)+P[13]+681279174&4294967295,N=A+(I<<4&4294967295|I>>>28),I=D+(N^A^O)+P[0]+3936430074&4294967295,D=N+(I<<11&4294967295|I>>>21),I=O+(D^N^A)+P[3]+3572445317&4294967295,O=D+(I<<16&4294967295|I>>>16),I=A+(O^D^N)+P[6]+76029189&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(A^O^D)+P[9]+3654602809&4294967295,N=A+(I<<4&4294967295|I>>>28),I=D+(N^A^O)+P[12]+3873151461&4294967295,D=N+(I<<11&4294967295|I>>>21),I=O+(D^N^A)+P[15]+530742520&4294967295,O=D+(I<<16&4294967295|I>>>16),I=A+(O^D^N)+P[2]+3299628645&4294967295,A=O+(I<<23&4294967295|I>>>9),I=N+(O^(A|~D))+P[0]+4096336452&4294967295,N=A+(I<<6&4294967295|I>>>26),I=D+(A^(N|~O))+P[7]+1126891415&4294967295,D=N+(I<<10&4294967295|I>>>22),I=O+(N^(D|~A))+P[14]+2878612391&4294967295,O=D+(I<<15&4294967295|I>>>17),I=A+(D^(O|~N))+P[5]+4237533241&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~D))+P[12]+1700485571&4294967295,N=A+(I<<6&4294967295|I>>>26),I=D+(A^(N|~O))+P[3]+2399980690&4294967295,D=N+(I<<10&4294967295|I>>>22),I=O+(N^(D|~A))+P[10]+4293915773&4294967295,O=D+(I<<15&4294967295|I>>>17),I=A+(D^(O|~N))+P[1]+2240044497&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~D))+P[8]+1873313359&4294967295,N=A+(I<<6&4294967295|I>>>26),I=D+(A^(N|~O))+P[15]+4264355552&4294967295,D=N+(I<<10&4294967295|I>>>22),I=O+(N^(D|~A))+P[6]+2734768916&4294967295,O=D+(I<<15&4294967295|I>>>17),I=A+(D^(O|~N))+P[13]+1309151649&4294967295,A=O+(I<<21&4294967295|I>>>11),I=N+(O^(A|~D))+P[4]+4149444226&4294967295,N=A+(I<<6&4294967295|I>>>26),I=D+(A^(N|~O))+P[11]+3174756917&4294967295,D=N+(I<<10&4294967295|I>>>22),I=O+(N^(D|~A))+P[2]+718787259&4294967295,O=D+(I<<15&4294967295|I>>>17),I=A+(D^(O|~N))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+O&4294967295,j.g[3]=j.g[3]+D&4294967295}a.prototype.v=function(j,N){N===void 0&&(N=j.length);const A=N-this.blockSize,P=this.C;let O=this.h,D=0;for(;D<N;){if(O==0)for(;D<=A;)o(this,j,D),D+=this.blockSize;if(typeof j=="string"){for(;D<N;)if(P[O++]=j.charCodeAt(D++),O==this.blockSize){o(this,P),O=0;break}}else for(;D<N;)if(P[O++]=j[D++],O==this.blockSize){o(this,P),O=0;break}}this.h=O,this.o+=N},a.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)j[N++]=this.g[A]>>>P&255;return j};function u(j,N){var A=g;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=N(j)}function h(j,N){this.h=N;const A=[];let P=!0;for(let O=j.length-1;O>=0;O--){const D=j[O]|0;P&&D==N||(A[O]=D,P=!1)}this.g=A}var g={};function x(j){return-128<=j&&j<128?u(j,function(N){return new h([N|0],N<0?-1:0)}):new h([j|0],j<0?-1:0)}function p(j){if(isNaN(j)||!isFinite(j))return w;if(j<0)return U(p(-j));const N=[];let A=1;for(let P=0;j>=A;P++)N[P]=j/A|0,A*=4294967296;return new h(N,0)}function b(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return U(b(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(N,8));let P=w;for(let D=0;D<j.length;D+=8){var O=Math.min(8,j.length-D);const I=parseInt(j.substring(D,D+O),N);O<8?(O=p(Math.pow(N,O)),P=P.j(O).add(p(I))):(P=P.j(A),P=P.add(p(I)))}return P}var w=x(0),T=x(1),R=x(16777216);s=h.prototype,s.m=function(){if(H(this))return-U(this).m();let j=0,N=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);j+=(P>=0?P:4294967296+P)*N,N*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(B(this))return"0";if(H(this))return"-"+U(this).toString(j);const N=p(Math.pow(j,6));var A=this;let P="";for(;;){const O=Y(A,N).g;A=J(A,O.j(N));let D=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=O,B(A))return D+P;for(;D.length<6;)D="0"+D;P=D+P}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function B(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function H(j){return j.h==-1}s.l=function(j){return j=J(this,j),H(j)?-1:B(j)?0:1};function U(j){const N=j.g.length,A=[];for(let P=0;P<N;P++)A[P]=~j.g[P];return new h(A,~j.h).add(T)}s.abs=function(){return H(this)?U(this):this},s.add=function(j){const N=Math.max(this.g.length,j.g.length),A=[];let P=0;for(let O=0;O<=N;O++){let D=P+(this.i(O)&65535)+(j.i(O)&65535),I=(D>>>16)+(this.i(O)>>>16)+(j.i(O)>>>16);P=I>>>16,D&=65535,I&=65535,A[O]=I<<16|D}return new h(A,A[A.length-1]&-2147483648?-1:0)};function J(j,N){return j.add(U(N))}s.j=function(j){if(B(this)||B(j))return w;if(H(this))return H(j)?U(this).j(U(j)):U(U(this).j(j));if(H(j))return U(this.j(U(j)));if(this.l(R)<0&&j.l(R)<0)return p(this.m()*j.m());const N=this.g.length+j.g.length,A=[];for(var P=0;P<2*N;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<j.g.length;O++){const D=this.i(P)>>>16,I=this.i(P)&65535,Ce=j.i(O)>>>16,Ve=j.i(O)&65535;A[2*P+2*O]+=I*Ve,ne(A,2*P+2*O),A[2*P+2*O+1]+=D*Ve,ne(A,2*P+2*O+1),A[2*P+2*O+1]+=I*Ce,ne(A,2*P+2*O+1),A[2*P+2*O+2]+=D*Ce,ne(A,2*P+2*O+2)}for(j=0;j<N;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=N;j<2*N;j++)A[j]=0;return new h(A,0)};function ne(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function q(j,N){this.g=j,this.h=N}function Y(j,N){if(B(N))throw Error("division by zero");if(B(j))return new q(w,w);if(H(j))return N=Y(U(j),N),new q(U(N.g),U(N.h));if(H(N))return N=Y(j,U(N)),new q(U(N.g),N.h);if(j.g.length>30){if(H(j)||H(N))throw Error("slowDivide_ only works with positive integers.");for(var A=T,P=N;P.l(j)<=0;)A=de(A),P=de(P);var O=pe(A,1),D=pe(P,1);for(P=pe(P,2),A=pe(A,2);!B(P);){var I=D.add(P);I.l(j)<=0&&(O=O.add(A),D=I),P=pe(P,1),A=pe(A,1)}return N=J(j,O.j(N)),new q(O,N)}for(O=w;j.l(N)>=0;){for(A=Math.max(1,Math.floor(j.m()/N.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),D=p(A),I=D.j(N);H(I)||I.l(j)>0;)A-=P,D=p(A),I=D.j(N);B(D)&&(D=T),O=O.add(D),j=J(j,I)}return new q(O,j)}s.B=function(j){return Y(this,j).h},s.and=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)&j.i(P);return new h(A,this.h&j.h)},s.or=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)|j.i(P);return new h(A,this.h|j.h)},s.xor=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let P=0;P<N;P++)A[P]=this.i(P)^j.i(P);return new h(A,this.h^j.h)};function de(j){const N=j.g.length+1,A=[];for(let P=0;P<N;P++)A[P]=j.i(P)<<1|j.i(P-1)>>>31;return new h(A,j.h)}function pe(j,N){const A=N>>5;N%=32;const P=j.g.length-A,O=[];for(let D=0;D<P;D++)O[D]=N>0?j.i(D+A)>>>N|j.i(D+A+1)<<32-N:j.i(D+A);return new h(O,j.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,c1=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=b,ti=h}).apply(typeof Jv<"u"?Jv:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u1,Bc,h1,md,dp,d1,f1,m1;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=n(this);function o(d,y){if(y)e:{var _=a;d=d.split(".");for(var S=0;S<d.length-1;S++){var G=d[S];if(!(G in _))break e;_=_[G]}d=d[d.length-1],S=_[d],y=y(S),y!=S&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function x(d,y,_){return d.call.apply(d.bind,arguments)}function p(d,y,_){return p=x,p.apply(null,arguments)}function b(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function w(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(S,G,ee){for(var xe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)xe[Be-2]=arguments[Be];return y.prototype[G].apply(S,xe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const y=d.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=d[S];return _}return[]}function B(d,y){for(let S=1;S<arguments.length;S++){const G=arguments[S];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=d.length||0;const ee=G.length||0;d.length=_+ee;for(let xe=0;xe<ee;xe++)d[_+xe]=G[xe]}else d.push(G)}}class H{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(d){h.setTimeout(()=>{throw d},0)}function J(){var d=j;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,_){const S=q.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var q=new H(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,j=new ne,N=()=>{const d=Promise.resolve(void 0);de=()=>{d.then(A)}};function A(){for(var d;d=J();){try{d.h.call(d.g)}catch(_){U(_)}var y=q;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}pe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function Ce(d,y){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(Ce,O),Ce.prototype.init=function(d,y){const _=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),te=0;function ie(d,y,_,S,G){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=G,this.key=++te,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Re(d,y,_){for(const S in d)y.call(_,d[S],S,d)}function Me(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function L(d){const y={};for(const _ in d)y[_]=d[_];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(d,y){let _,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(_ in S)d[_]=S[_];for(let ee=0;ee<re.length;ee++)_=re[ee],Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])}}function Q(d){this.src=d,this.g={},this.h=0}Q.prototype.add=function(d,y,_,S,G){const ee=d.toString();d=this.g[ee],d||(d=this.g[ee]=[],this.h++);const xe=M(d,y,S,G);return xe>-1?(y=d[xe],_||(y.fa=!1)):(y=new ie(y,this.src,ee,!!S,G),y.fa=_,d.push(y)),y};function me(d,y){const _=y.type;if(_ in d.g){var S=d.g[_],G=Array.prototype.indexOf.call(S,y,void 0),ee;(ee=G>=0)&&Array.prototype.splice.call(S,G,1),ee&&(ye(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function M(d,y,_,S){for(let G=0;G<d.length;++G){const ee=d[G];if(!ee.da&&ee.listener==y&&ee.capture==!!_&&ee.ha==S)return G}return-1}var k="closure_lm_"+(Math.random()*1e6|0),Z={};function he(d,y,_,S,G){if(Array.isArray(y)){for(let ee=0;ee<y.length;ee++)he(d,y[ee],_,S,G);return null}return _=Hs(_),d&&d[Ve]?d.J(y,_,g(S)?!!S.capture:!1,G):W(d,y,_,!1,S,G)}function W(d,y,_,S,G,ee){if(!y)throw Error("Invalid event type");const xe=g(G)?!!G.capture:!!G;let Be=wt(d);if(Be||(d[k]=Be=new Q(d)),_=Be.add(y,_,S,xe,ee),_.proxy)return _;if(S=_e(),_.proxy=S,S.src=d,S.listener=_,d.addEventListener)D||(G=xe),G===void 0&&(G=!1),d.addEventListener(y.toString(),S,G);else if(d.attachEvent)d.attachEvent(ht(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _e(){function d(_){return y.call(d.src,d.listener,_)}const y=ln;return d}function ke(d,y,_,S,G){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)ke(d,y[ee],_,S,G);else S=g(S)?!!S.capture:!!S,_=Hs(_),d&&d[Ve]?(d=d.i,ee=String(y).toString(),ee in d.g&&(y=d.g[ee],_=M(y,_,S,G),_>-1&&(ye(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[ee],d.h--)))):d&&(d=wt(d))&&(y=d.g[y.toString()],d=-1,y&&(d=M(y,_,S,G)),(_=d>-1?y[d]:null)&&Ge(_))}function Ge(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ve])me(y.i,d);else{var _=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(_,S,d.capture):y.detachEvent?y.detachEvent(ht(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=wt(y))?(me(_,d),_.h==0&&(_.src=null,y[k]=null)):ye(d)}}}function ht(d){return d in Z?Z[d]:Z[d]="on"+d}function ln(d,y){if(d.da)d=!0;else{y=new Ce(y,this);const _=d.listener,S=d.ha||d.src;d.fa&&Ge(d),d=_.call(S,y)}return d}function wt(d){return d=d[k],d instanceof Q?d:null}var rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hs(d){return typeof d=="function"?d:(d[rs]||(d[rs]=function(y){return d.handleEvent(y)}),d[rs])}function Dt(){P.call(this),this.i=new Q(this),this.M=this,this.G=null}w(Dt,P),Dt.prototype[Ve]=!0,Dt.prototype.removeEventListener=function(d,y,_,S){ke(this,d,y,_,S)};function Ut(d,y){var _,S=d.G;if(S)for(_=[];S;S=S.G)_.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new O(y,d);else if(y instanceof O)y.target=y.target||d;else{var G=y;y=new O(S,d),ge(y,G)}G=!0;let ee,xe;if(_)for(xe=_.length-1;xe>=0;xe--)ee=y.g=_[xe],G=Fs(ee,S,!0,y)&&G;if(ee=y.g=d,G=Fs(ee,S,!0,y)&&G,G=Fs(ee,S,!1,y)&&G,_)for(xe=0;xe<_.length;xe++)ee=y.g=_[xe],G=Fs(ee,S,!1,y)&&G}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let S=0;S<_.length;S++)ye(_[S]);delete d.g[y],d.h--}}this.G=null},Dt.prototype.J=function(d,y,_,S){return this.i.add(String(d),y,!1,_,S)},Dt.prototype.K=function(d,y,_,S){return this.i.add(String(d),y,!0,_,S)};function Fs(d,y,_,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let ee=0;ee<y.length;++ee){const xe=y[ee];if(xe&&!xe.da&&xe.capture==_){const Be=xe.listener,Bt=xe.ha||xe.src;xe.fa&&me(d.i,xe),G=Be.call(Bt,S)!==!1&&G}}return G&&!S.defaultPrevented}function Mo(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(d,y||0)}function yi(d){d.g=Mo(()=>{d.g=null,d.i&&(d.i=!1,yi(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class on extends P{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:yi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(d){P.call(this),this.h=d,this.g={}}w(fe,P);var ve=[];function et(d){Re(d.g,function(y,_){this.g.hasOwnProperty(_)&&Ge(y)},d),d.g={}}fe.prototype.N=function(){fe.Z.N.call(this),et(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=h.JSON.stringify,Pe=h.JSON.parse,zt=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function tt(){}function qn(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function At(){O.call(this,"d")}w(At,O);function Tt(){O.call(this,"c")}w(Tt,O);var bt={},as=null;function Ns(){return as=as||new Dt}bt.Ia="serverreachability";function ku(d){O.call(this,bt.Ia,d)}w(ku,O);function qs(d){const y=Ns();Ut(y,new ku(y))}bt.STAT_EVENT="statevent";function bi(d,y){O.call(this,bt.STAT_EVENT,d),this.stat=y}w(bi,O);function Gt(d){const y=Ns();Ut(y,new bi(y,d))}bt.Ja="timingevent";function Gs(d,y){O.call(this,bt.Ja,d),this.size=y}w(Gs,O);function Ks(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function Ts(){this.g=!0}Ts.prototype.ua=function(){this.g=!1};function Df(d,y,_,S,G,ee){d.info(function(){if(d.g)if(ee){var xe="",Be=ee.split("&");for(let lt=0;lt<Be.length;lt++){var Bt=Be[lt].split("=");if(Bt.length>1){const Ct=Bt[0];Bt=Bt[1];const cs=Ct.split("_");xe=cs.length>=2&&cs[1]=="type"?xe+(Ct+"="+Bt+"&"):xe+(Ct+"=redacted&")}}}else xe=null;else xe=ee;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+`
`+_+`
`+xe})}function Du(d,y,_,S,G,ee,xe){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+`
`+_+`
`+ee+" "+xe})}function $s(d,y,_,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Of(d,_)+(S?" "+S:"")})}function vi(d,y){d.info(function(){return"TIMEOUT: "+y})}Ts.prototype.info=function(){};function Of(d,y){if(!d.g)return y;if(!y)return null;try{const ee=JSON.parse(y);if(ee){for(d=0;d<ee.length;d++)if(Array.isArray(ee[d])){var _=ee[d];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let xe=1;xe<S.length;xe++)S[xe]=""}}}}return rt(ee)}catch{return y}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Po;function wi(){}w(wi,tt),wi.prototype.g=function(){return new XMLHttpRequest},Po=new wi;function Dr(d){return encodeURIComponent(String(d))}function Ou(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function Es(d,y,_,S){this.j=d,this.i=y,this.l=_,this.S=S||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new js}function js(){this.i=null,this.g="",this.h=!1}var Kt={},cn={};function Qs(d,y,_){d.M=1,d.A=Ni(Qt(y)),d.u=_,d.R=!0,fl(d,null)}function fl(d,y){d.F=Date.now(),Ys(d),d.B=Qt(d.A);var _=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),xl(_.i,"t",S),d.C=0,_=d.j.L,d.h=new js,d.g=Yu(d.j,_?y:null,!d.u),d.P>0&&(d.O=new on(p(d.Y,d,d.g),d.P)),y=d.V,_=d.g,S=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(ve[0]=G.toString()),G=ve);for(let ee=0;ee<G.length;ee++){const xe=he(_,G[ee],S||y.handleEvent,!1,y.h||y);if(!xe)break;y.g[xe.key]=xe}y=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),qs(),Df(d.i,d.v,d.B,d.l,d.S,d.u)}Es.prototype.ba=function(d){d=d.target;const y=this.O;y&&Cs(d)==3?y.j():this.Y(d)},Es.prototype.Y=function(d){try{if(d==this.g)e:{const Be=Cs(this.g),Bt=this.g.ya(),lt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||Be!=4||Bt==7||(Bt==8||lt<=0?qs(3):qs(2)),Xs(this);var y=this.g.ca();this.X=y;var _=Mf(this);if(this.o=y==200,Du(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var ee=S;break t}}ee=null}if(d=ee)$s(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ws(this,d);else{this.o=!1,this.m=3,Gt(12),Gn(this),is(this);break e}}if(this.R){d=!0;let Ct;for(;!this.K&&this.C<_.length;)if(Ct=Vu(this,_),Ct==cn){Be==4&&(this.m=4,Gt(14),d=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Kt){this.m=4,Gt(15),$s(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else $s(this.i,this.l,Ct,null),Ws(this,Ct);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||_.length!=0||this.h.h||(this.m=1,Gt(16),d=!1),this.o=this.o&&d,!d)$s(this.i,this.l,_,"[Invalid Chunked Response]"),Gn(this),is(this);else if(_.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Jo(xe),xe.P=!0,Gt(11))}}else $s(this.i,this.l,_,null),Ws(this,_);Be==4&&Gn(this),this.o&&!this.K&&(Be==4?Gu(this.j,this):(this.o=!1,Ys(this)))}else Mr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Gt(12)):(this.m=0,Gt(13)),Gn(this),is(this)}}}catch{}finally{}};function Mf(d){if(!Mu(d))return d.g.la();const y=gn(d.g);if(y==="")return"";let _="";const S=y.length,G=Cs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Gn(d),is(d),"";d.h.i=new h.TextDecoder}for(let ee=0;ee<S;ee++)d.h.h=!0,_+=d.h.i.decode(y[ee],{stream:!(G&&ee==S-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function Mu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vu(d,y){var _=d.C,S=y.indexOf(`
`,_);return S==-1?cn:(_=Number(y.substring(_,S)),isNaN(_)?Kt:(S+=1,S+_>y.length?cn:(y=y.slice(S,S+_),d.C=S+_,y)))}Es.prototype.cancel=function(){this.K=!0,Gn(this)};function Ys(d){d.T=Date.now()+d.H,ml(d,d.H)}function ml(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ks(p(d.aa,d),y)}function Xs(d){d.D&&(h.clearTimeout(d.D),d.D=null)}Es.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(vi(this.i,this.B),this.M!=2&&(qs(),Gt(17)),Gn(this),this.m=2,is(this)):ml(this,this.T-d)};function is(d){d.j.I==0||d.K||Gu(d.j,d)}function Gn(d){Xs(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,et(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Ws(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||Zs(_.h,d))){if(!d.L&&Zs(_.h,d)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)wl(_),Ea(_);else break e;Ri(_),Gt(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ks(p(_.Va,_),6e3));Js(_.h)<=1&&_.ta&&(_.ta=void 0)}else ar(_,11)}else if((d.L||_.g==d)&&wl(_),!I(y))for(G=_.Ba.g.parse(y),y=0;y<G.length;y++){let lt=G[y];const Ct=lt[0];if(!(Ct<=_.K))if(_.K=Ct,lt=lt[1],_.I==2)if(lt[0]=="c"){_.M=lt[1],_.ba=lt[2];const cs=lt[3];cs!=null&&(_.ka=cs,_.j.info("VER="+_.ka));const ir=lt[4];ir!=null&&(_.za=ir,_.j.info("SVER="+_.za));const Rs=lt[5];Rs!=null&&typeof Rs=="number"&&Rs>0&&(S=1.5*Rs,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Is=d.g;if(Is){const Ii=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var ee=S.h;ee.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(zo(ee,ee.h),ee.h=null))}if(S.G){const Nl=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(S.wa=Nl,dt(S.J,S.G,Nl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var xe=d;if(S.na=Qu(S,S.L?S.ba:null,S.W),xe.L){Bo(S.h,xe);var Be=xe,Bt=S.O;Bt&&(Be.H=Bt),Be.D&&(Xs(Be),Ys(Be)),S.g=xe}else Fu(S);_.i.length>0&&rr(_)}else lt[0]!="stop"&&lt[0]!="close"||ar(_,7);else _.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?ar(_,7):Xo(_):lt[0]!="noop"&&_.l&&_.l.qa(lt),_.A=0)}}qs(4)}catch{}}var $t=class{constructor(d,y){this.g=d,this.map=y}};function Lo(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Js(d){return d.h?1:d.g?d.g.size:0}function Zs(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function zo(d,y){d.g?d.g.add(y):d.h=y}function Bo(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Lo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ho(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return R(d.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const S=d[_].indexOf("=");let G,ee=null;S>=0?(G=d[_].substring(0,S),ee=d[_].substring(S+1)):G=d[_],y(G,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Kn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Kn?(this.l=d.l,un(this,d.j),this.o=d.o,this.g=d.g,ya(this,d.u),this.h=d.h,Fo(this,Bu(d.i)),this.m=d.m):d&&(y=String(d).match(Pu))?(this.l=!1,un(this,y[1]||"",!0),this.o=er(y[2]||""),this.g=er(y[3]||"",!0),ya(this,y[4]),this.h=er(y[5]||"",!0),Fo(this,y[6]||"",!0),this.m=er(y[7]||"")):(this.l=!1,this.i=new va(null,this.l))}Kn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Ti(y,pl,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Ti(y,pl,!0),"@"),d.push(Dr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(Ti(_,_.charAt(0)=="/"?qo:Lu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",Ti(_,Uu)),d.join("")},Kn.prototype.resolve=function(d){const y=Qt(this);let _=!!d.j;_?un(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var S=d.h;if(_)ya(y,d.u);else if(_=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=y.h.lastIndexOf("/");G!=-1&&(S=y.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const ee=[];for(let xe=0;xe<G.length;){const Be=G[xe++];Be=="."?S&&xe==G.length&&ee.push(""):Be==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),S&&xe==G.length&&ee.push("")):(ee.push(Be),S=!0)}S=ee.join("/")}else S=G}return _?y.h=S:_=d.i.toString()!=="",_?Fo(y,Bu(d.i)):_=!!d.m,_&&(y.m=d.m),y};function Qt(d){return new Kn(d)}function un(d,y,_){d.j=_?er(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ya(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Fo(d,y,_){y instanceof va?(d.i=y,yl(d.i,d.l)):(_||(y=Ti(y,ba)),d.i=new va(y,d.l))}function dt(d,y,_){d.i.set(y,_)}function Ni(d){return dt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function er(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ti(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,On),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function On(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pl=/[#\/\?@]/g,Lu=/[#\?:]/g,qo=/[#\?]/g,ba=/[#\?@]/g,Uu=/#/g;function va(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&gl(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=va.prototype,s.add=function(d,y){Mn(this),this.i=null,d=_a(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function zu(d,y){Mn(d),y=_a(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Go(d,y){return Mn(d),y=_a(d,y),d.g.has(y)}s.forEach=function(d,y){Mn(this),this.g.forEach(function(_,S){_.forEach(function(G){d.call(y,G,S,this)},this)},this)};function Ko(d,y){Mn(d);let _=[];if(typeof y=="string")Go(d,y)&&(_=_.concat(d.g.get(_a(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}s.set=function(d,y){return Mn(this),this.i=null,d=_a(this,d),Go(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=Ko(this,d),d.length>0?String(d[0]):y):y};function xl(d,y,_){zu(d,y),_.length>0&&(d.i=null,d.g.set(_a(d,y),R(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const G=Dr(_);_=Ko(this,_);for(let ee=0;ee<_.length;ee++){let xe=G;_[ee]!==""&&(xe+="="+Dr(_[ee])),d.push(xe)}}return this.i=d.join("&")};function Bu(d){const y=new va;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function _a(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function yl(d,y){y&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(_,S){const G=S.toLowerCase();S!=G&&(zu(this,S),xl(this,G,_))},d)),d.j=y}function Ss(d,y){const _=new Ts;if(h.Image){const S=new Image;S.onload=b(ls,_,"TestLoadImage: loaded",!0,y,S),S.onerror=b(ls,_,"TestLoadImage: error",!1,y,S),S.onabort=b(ls,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(ls,_,"TestLoadImage: timeout",!1,y,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function $o(d,y){const _=new Ts,S=new AbortController,G=setTimeout(()=>{S.abort(),ls(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(ee=>{clearTimeout(G),ee.ok?ls(_,"TestPingServer: ok",!0,y):ls(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),ls(_,"TestPingServer: error",!1,y)})}function ls(d,y,_,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(_)}catch{}}function wa(){this.g=new zt}function tr(d){this.i=d.Sb||null,this.h=d.ab||!1}w(tr,tt),tr.prototype.g=function(){return new Ei(this.i,this.h)};function Ei(d,y){Dt.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ei,Dt),s=Ei.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,As(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bl(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function bl(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Na(this):As(this),this.readyState==3&&bl(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Na(this))},s.Na=function(d){this.g&&(this.response=d,Na(this))},s.ga=function(){this.g&&Na(this)};function Na(d){d.readyState=4,d.l=null,d.j=null,d.B=null,As(d)}s.setRequestHeader=function(d,y){this.A.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function As(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function os(d){let y="";return Re(d,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function ji(d,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=os(_),typeof d=="string"?_!=null&&Dr(_):dt(d,y,_))}function gt(d){Dt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(gt,Dt);var nr=/^https?$/i,Qo=["POST","PUT"];s=gt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Po.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(ee){Si(this,ee);return}if(d=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)_.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const ee of S.keys())_.set(ee,S.get(ee));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Qo,y,void 0)>=0)||S||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,xe]of _)this.g.setRequestHeader(ee,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ee){Si(this,ee)}};function Si(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,Yo(d),Or(d)}function Yo(d){d.A||(d.A=!0,Ut(d,"complete"),Ut(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ut(this,"complete"),Ut(this,"abort"),Or(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),gt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ai(this):this.Xa())},s.Xa=function(){Ai(this)};function Ai(d){if(d.h&&typeof u<"u"){if(d.v&&Cs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ut(d,"readystatechange"),Cs(d)==4){d.h=!1;try{const ee=d.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ee===0){let xe=String(d.D).match(Pu)[1]||null;!xe&&h.self&&h.self.location&&(xe=h.self.location.protocol.slice(0,-1)),S=!nr.test(xe?xe.toLowerCase():"")}_=S}if(_)Ut(d,"complete"),Ut(d,"success");else{d.o=6;try{var G=Cs(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",Yo(d)}}finally{Or(d)}}}}function Or(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||Ut(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Cs(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Cs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Pe(y)}};function gn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Mr(d){const y={};d=(d.g&&Cs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(I(d[S]))continue;var _=Ou(d[S]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=y[G]||[];y[G]=ee,ee.push(_)}Me(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function Ta(d){this.za=0,this.i=[],this.j=new Ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,d),this.Za=sr("retryDelaySeedMs",1e4,d),this.Ta=sr("forwardChannelMaxRetries",2,d),this.va=sr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Lo(d&&d.concurrentRequestLimit),this.Ba=new wa,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ta.prototype,s.ka=8,s.I=1,s.connect=function(d,y,_,S){Gt(0),this.W=d,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Qu(this,null,this.W),rr(this)};function Xo(d){if(vl(d),d.I==3){var y=d.V++,_=Qt(d.J);if(dt(_,"SID",d.M),dt(_,"RID",y),dt(_,"TYPE","terminate"),Ci(d,_),y=new Es(d,d.j,y),y.M=2,y.A=Ni(Qt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=Yu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ys(y)}$u(d)}function Ea(d){d.g&&(Jo(d),d.g.cancel(),d.g=null)}function vl(d){Ea(d),d.v&&(h.clearTimeout(d.v),d.v=null),wl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function rr(d){if(!Uo(d.h)&&!d.m){d.m=!0;var y=d.Ea;de||N(),pe||(de(),pe=!0),j.add(y,d),d.D=0}}function _l(d,y){return Js(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ks(p(d.Ea,d,y),Ku(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new Es(this,this.j,d);let ee=this.o;if(this.U&&(ee?(ee=L(ee),ge(ee,this.U)):ee=this.U),this.u!==null||this.R||(G.J=ee,ee=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Hu(this,G,y),_=Qt(this.J),dt(_,"RID",d),dt(_,"CVER",22),this.G&&dt(_,"X-HTTP-Session-Id",this.G),Ci(this,_),ee&&(this.R?y="headers="+Dr(os(ee))+"&"+y:this.u&&ji(_,this.u,ee)),zo(this.h,G),this.Ra&&dt(_,"TYPE","init"),this.S?(dt(_,"$req",y),dt(_,"SID","null"),G.U=!0,Qs(G,_,null)):Qs(G,_,y),this.I=2}}else this.I==3&&(d?Wo(this,d):this.i.length==0||Uo(this.h)||Wo(this))};function Wo(d,y){var _;y?_=y.l:_=d.V++;const S=Qt(d.J);dt(S,"SID",d.M),dt(S,"RID",_),dt(S,"AID",d.K),Ci(d,S),d.u&&d.o&&ji(S,d.u,d.o),_=new Es(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Hu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),zo(d.h,_),Qs(_,S,y)}function Ci(d,y){d.H&&Re(d.H,function(_,S){dt(y,S,_)}),d.l&&Re({},function(_,S){dt(y,S,_)})}function Hu(d,y,_){_=Math.min(d.i.length,_);const S=d.l?p(d.l.Ka,d.l,d):null;e:{var G=d.i;let Be=-1;for(;;){const Bt=["count="+_];Be==-1?_>0?(Be=G[0].g,Bt.push("ofs="+Be)):Be=0:Bt.push("ofs="+Be);let lt=!0;for(let Ct=0;Ct<_;Ct++){var ee=G[Ct].g;const cs=G[Ct].map;if(ee-=Be,ee<0)Be=Math.max(0,G[Ct].g-100),lt=!1;else try{ee="req"+ee+"_"||"";try{var xe=cs instanceof Map?cs:Object.entries(cs);for(const[ir,Rs]of xe){let Is=Rs;g(Rs)&&(Is=rt(Rs)),Bt.push(ee+ir+"="+encodeURIComponent(Is))}}catch(ir){throw Bt.push(ee+"type="+encodeURIComponent("_badmap")),ir}}catch{S&&S(cs)}}if(lt){xe=Bt.join("&");break e}}xe=void 0}return d=d.i.splice(0,_),y.G=d,xe}function Fu(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;de||N(),pe||(de(),pe=!0),j.add(y,d),d.A=0}}function Ri(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ks(p(d.Da,d),Ku(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ks(p(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Gt(10),Ea(this),qu(this))};function Jo(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function qu(d){d.g=new Es(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Qt(d.na);dt(y,"RID","rpc"),dt(y,"SID",d.M),dt(y,"AID",d.K),dt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&dt(y,"TO",d.ia),dt(y,"TYPE","xmlhttp"),Ci(d,y),d.u&&d.o&&ji(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Ni(Qt(y)),_.u=null,_.R=!0,fl(_,d)}s.Va=function(){this.C!=null&&(this.C=null,Ea(this),Ri(this),Gt(19))};function wl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Gu(d,y){var _=null;if(d.g==y){wl(d),Jo(d),d.g=null;var S=2}else if(Zs(d.h,y))_=y.G,Bo(d.h,y),S=1;else return;if(d.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var G=d.D;S=Ns(),Ut(S,new Gs(S,_)),rr(d)}else Fu(d);else if(G=y.m,G==3||G==0&&y.X>0||!(S==1&&_l(d,y)||S==2&&Ri(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),G){case 1:ar(d,5);break;case 4:ar(d,10);break;case 3:ar(d,6);break;default:ar(d,2)}}}function Ku(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function ar(d,y){if(d.j.info("Error code "+y),y==2){var _=p(d.bb,d),S=d.Ua;const G=!S;S=new Kn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||un(S,"https"),Ni(S),G?Ss(S.toString(),_):$o(S.toString(),_)}else Gt(2);d.I=0,d.l&&d.l.pa(y),$u(d),vl(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function $u(d){if(d.I=0,d.ja=[],d.l){const y=Ho(d.h);(y.length!=0||d.i.length!=0)&&(B(d.ja,y),B(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function Qu(d,y,_){var S=_ instanceof Kn?Qt(_):new Kn(_);if(S.g!="")y&&(S.g=y+"."+S.g),ya(S,S.u);else{var G=h.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const ee=new Kn(null);S&&un(ee,S),y&&(ee.g=y),G&&ya(ee,G),_&&(ee.h=_),S=ee}return _=d.G,y=d.wa,_&&y&&dt(S,_,y),dt(S,"VER",d.ka),Ci(d,S),S}function Yu(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new gt(new tr({ab:_})):new gt(d.ma),y.Fa(d.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}s=Xu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ja(){}ja.prototype.g=function(d,y){return new An(d,y)};function An(d,y){Dt.call(this),this.g=new Ta(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!I(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Vr(this)}w(An,Dt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Xo(this.g)},An.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=rt(d),d=_);y.i.push(new $t(y.Ya++,d)),y.I==3&&rr(y)},An.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,An.Z.N.call(this)};function Wu(d){At.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(Wu,At);function Ju(){Tt.call(this),this.status=1}w(Ju,Tt);function Vr(d){this.g=d}w(Vr,Xu),Vr.prototype.ra=function(){Ut(this.g,"a")},Vr.prototype.qa=function(d){Ut(this.g,new Wu(d))},Vr.prototype.pa=function(d){Ut(this.g,new Ju)},Vr.prototype.oa=function(){Ut(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,m1=function(){return new ja},f1=function(){return Ns()},d1=bt,dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,md=_i,Vo.COMPLETE="complete",h1=Vo,qn.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,Bc=qn,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,u1=gt}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const Zv="@firebase/firestore",e_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new Yp("@firebase/firestore");function eo(){return el.logLevel}function we(s,...e){if(el.logLevel<=We.DEBUG){const n=e.map(Jp);el.debug(`Firestore (${So}): ${s}`,...n)}}function ma(s,...e){if(el.logLevel<=We.ERROR){const n=e.map(Jp);el.error(`Firestore (${So}): ${s}`,...n)}}function po(s,...e){if(el.logLevel<=We.WARN){const n=e.map(Jp);el.warn(`Firestore (${So}): ${s}`,...n)}}function Jp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,g1(s,a,n)}function g1(s,e,n){let a=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw ma(a),new Error(a)}function ct(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||g1(e,o,a)}function ze(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class PR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LR{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let a=this.i;const o=x=>this.i!==a?(a=this.i,n(x)):Promise.resolve();let u=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ia,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},g=x=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((x=>g(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?g(x):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ia)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ct(typeof a.accessToken=="string",31837,{l:a}),new p1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class UR{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zR{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new UR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class t_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const a=u=>{u.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,we("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new t_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new t_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=HR(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function Je(s,e){return s<e?-1:s>e?1:0}function fp(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return qg(o)===qg(u)?Je(o,u):qg(o)?1:-1}return Je(s.length,e.length)}const FR=55296,qR=57343;function qg(s){const e=s.charCodeAt(0);return e>=FR&&e<=qR}function xo(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="__name__";class dr{constructor(e,n,a){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Oe(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=dr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Je(e.length,n.length)}static compareSegments(e,n){const a=dr.isNumericId(e),o=dr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?dr.extractNumericId(e).compare(dr.extractNumericId(n)):fp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class Nt extends dr{construct(e,n,a){return new Nt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(oe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Nt(n)}static emptyPath(){return new Nt([])}}const GR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends dr{construct(e,n,a){return new _n(e,n,a)}static isValidIdentifier(e){return GR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n_}static keyField(){return new _n([n_])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new be(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new be(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new be(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new be(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Nt.fromString(e))}static fromName(e){return new Ae(Nt.fromString(e).popFirst(5))}static empty(){return new Ae(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(s,e,n){if(!n)throw new be(oe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function KR(s,e,n,a){if(e===!0&&a===!0)throw new be(oe.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function s_(s){if(!Ae.isDocumentKey(s))throw new be(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function r_(s){if(Ae.isDocumentKey(s))throw new be(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function y1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function of(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Oe(12329,{type:typeof s})}function kn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new be(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(s);throw new be(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(s,e){const n={typeString:s};return e&&(n.value=e),n}function yu(s,e){if(!y1(s))throw new be(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new be(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=-62135596800,i_=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*i_);return new St(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<a_)throw new be(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i_}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:tn("string",St._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new St(0,0))}static max(){return new Le(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function $R(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(a===1e9?new St(n+1,0):new St(n,a));return new ai(o,Ae.empty(),e)}function QR(s){return new ai(s.readTime,s.key,ru)}class ai{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ai(Le.min(),Ae.empty(),ru)}static max(){return new ai(Le.max(),Ae.empty(),ru)}}function YR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(s.documentKey,e.documentKey),n!==0?n:Je(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(s){if(s.code!==oe.FAILED_PRECONDITION||s.message!==XR)throw s;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,a)=>{n(e)}))}static reject(e){return new ue(((n,a)=>{a(e)}))}static waitFor(e){return new ue(((n,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(x=>a(x)))})),h=!0,u===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const a of e)n=n.next((o=>o?ue.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ue(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let x=0;x<u;x++){const p=x;n(e[p]).next((b=>{h[p]=b,++g,g===u&&a(h)}),(b=>o(b)))}}))}static doWhile(e,n){return new ue(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function JR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Co(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-1;function uf(s){return s==null}function Rd(s){return s===0&&1/s==-1/0}function ZR(s){return typeof s=="number"&&Number.isInteger(s)&&!Rd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="";function e4(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=l_(e)),e=t4(s.get(n),e);return l_(e)}function t4(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case b1:n+="";break;default:n+=u}}return n}function l_(s){return s+b1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function fi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function v1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||vn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??vn.RED,this.left=o??vn.EMPTY,this.right=u??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new vn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return vn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class c_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new es([])}unionWith(e){let n=new an(_n.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new _1("Invalid base64 string: "+u):u}})(e);return new wn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const n4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(s){if(ct(!!s,39018),typeof s=="string"){let e=0;const n=n4.exec(s);if(ct(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:qt(s.seconds),nanos:qt(s.nanos)}}function qt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function li(s){return typeof s=="string"?wn.fromBase64String(s):wn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="server_timestamp",N1="__type__",T1="__previous_value__",E1="__local_write_time__";function t0(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[N1])==null?void 0:a.stringValue)===w1}function hf(s){const e=s.mapValue.fields[T1];return t0(e)?hf(e):e}function au(s){const e=ii(s.mapValue.fields[E1].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,a,o,u,h,g,x,p,b){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=b}}const Id="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="__type__",r4="__max__",ad={mapValue:{}},S1="__vector__",kd="value";function oi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?t0(s)?4:i4(s)?9007199254740991:a4(s)?10:11:Oe(28295,{value:s})}function Er(s,e){if(s===e)return!0;const n=oi(s);if(n!==oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return au(s).isEqual(au(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ii(o.timestampValue),g=ii(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return li(o.bytesValue).isEqual(li(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return qt(o.geoPointValue.latitude)===qt(u.geoPointValue.latitude)&&qt(o.geoPointValue.longitude)===qt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return qt(o.integerValue)===qt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=qt(o.doubleValue),g=qt(u.doubleValue);return h===g?Rd(h)===Rd(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return xo(s.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(o_(h)!==o_(g))return!1;for(const x in h)if(h.hasOwnProperty(x)&&(g[x]===void 0||!Er(h[x],g[x])))return!1;return!0})(s,e);default:return Oe(52216,{left:s})}}function lu(s,e){return(s.values||[]).find((n=>Er(n,e)))!==void 0}function yo(s,e){if(s===e)return 0;const n=oi(s),a=oi(e);if(n!==a)return Je(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=qt(u.integerValue||u.doubleValue),x=qt(h.integerValue||h.doubleValue);return g<x?-1:g>x?1:g===x?0:isNaN(g)?isNaN(x)?0:-1:1})(s,e);case 3:return u_(s.timestampValue,e.timestampValue);case 4:return u_(au(s),au(e));case 5:return fp(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=li(u),x=li(h);return g.compareTo(x)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),x=h.split("/");for(let p=0;p<g.length&&p<x.length;p++){const b=Je(g[p],x[p]);if(b!==0)return b}return Je(g.length,x.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=Je(qt(u.latitude),qt(h.latitude));return g!==0?g:Je(qt(u.longitude),qt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return h_(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var T,R,B,H;const g=u.fields||{},x=h.fields||{},p=(T=g[kd])==null?void 0:T.arrayValue,b=(R=x[kd])==null?void 0:R.arrayValue,w=Je(((B=p==null?void 0:p.values)==null?void 0:B.length)||0,((H=b==null?void 0:b.values)==null?void 0:H.length)||0);return w!==0?w:h_(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ad.mapValue&&h===ad.mapValue)return 0;if(u===ad.mapValue)return 1;if(h===ad.mapValue)return-1;const g=u.fields||{},x=Object.keys(g),p=h.fields||{},b=Object.keys(p);x.sort(),b.sort();for(let w=0;w<x.length&&w<b.length;++w){const T=fp(x[w],b[w]);if(T!==0)return T;const R=yo(g[x[w]],p[b[w]]);if(R!==0)return R}return Je(x.length,b.length)})(s.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function u_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Je(s,e);const n=ii(s),a=ii(e),o=Je(n.seconds,a.seconds);return o!==0?o:Je(n.nanos,a.nanos)}function h_(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=yo(n[o],a[o]);if(u)return u}return Je(n.length,a.length)}function bo(s){return mp(s)}function mp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=ii(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return li(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ae.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=mp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${mp(n.fields[h])}`;return o+"}"})(s.mapValue):Oe(61005,{value:s})}function gd(s){switch(oi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hf(s);return e?16+gd(e):16;case 5:return 2*s.stringValue.length;case 6:return li(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+gd(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return fi(a.fields,((u,h)=>{o+=u.length+gd(h)})),o})(s.mapValue);default:throw Oe(13486,{value:s})}}function d_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function gp(s){return!!s&&"integerValue"in s}function n0(s){return!!s&&"arrayValue"in s}function f_(s){return!!s&&"nullValue"in s}function m_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function pd(s){return!!s&&"mapValue"in s}function a4(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[j1])==null?void 0:a.stringValue)===S1}function Yc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return fi(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Yc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(s.arrayValue.values[n]);return e}return{...s}}function i4(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===r4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=_n.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const x=this.getFieldsMap(n);this.applyChanges(x,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=Yc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];pd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){fi(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new Fn(Yc(this.value))}}function A1(s){const e=[];return fi(s.fields,((n,a)=>{const o=new _n([n]);if(pd(a)){const u=A1(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,a,o,u,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new jn(e,0,Le.min(),Le.min(),Le.min(),Fn.empty(),0)}static newFoundDocument(e,n,a,o){return new jn(e,1,n,Le.min(),a,o,0)}static newNoDocument(e,n){return new jn(e,2,n,Le.min(),Le.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new jn(e,3,n,Le.min(),Le.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function g_(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=Ae.comparator(Ae.fromName(h.referenceValue),n.key):a=yo(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function p_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Er(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function l4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{}class en extends C1{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new c4(e,n,a):n==="array-contains"?new d4(e,a):n==="in"?new f4(e,a):n==="not-in"?new m4(e,a):n==="array-contains-any"?new g4(e,a):new en(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new u4(e,a):new h4(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yo(n,this.value)):n!==null&&oi(this.value)===oi(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends C1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ls(e,n)}matches(e){return R1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function R1(s){return s.op==="and"}function I1(s){return o4(s)&&R1(s)}function o4(s){for(const e of s.filters)if(e instanceof Ls)return!1;return!0}function pp(s){if(s instanceof en)return s.field.canonicalString()+s.op.toString()+bo(s.value);if(I1(s))return s.filters.map((e=>pp(e))).join(",");{const e=s.filters.map((n=>pp(n))).join(",");return`${s.op}(${e})`}}function k1(s,e){return s instanceof en?(function(a,o){return o instanceof en&&a.op===o.op&&a.field.isEqual(o.field)&&Er(a.value,o.value)})(s,e):s instanceof Ls?(function(a,o){return o instanceof Ls&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&k1(h,o.filters[g])),!0):!1})(s,e):void Oe(19439)}function D1(s){return s instanceof en?(function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`})(s):s instanceof Ls?(function(n){return n.op.toString()+" {"+n.getFilters().map(D1).join(" ,")+"}"})(s):"Filter"}class c4 extends en{constructor(e,n,a){super(e,n,a),this.key=Ae.fromName(a.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class u4 extends en{constructor(e,n){super(e,"in",n),this.keys=O1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class h4 extends en{constructor(e,n){super(e,"not-in",n),this.keys=O1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function O1(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>Ae.fromName(a.referenceValue)))}class d4 extends en{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n0(n)&&lu(n.arrayValue,this.value)}}class f4 extends en{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class m4 extends en{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lu(this.value.arrayValue,n)}}class g4 extends en{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>lu(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function x_(s,e=null,n=[],a=[],o=null,u=null,h=null){return new p4(s,e,n,a,o,u,h)}function s0(s){const e=ze(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>pp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>bo(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>bo(a))).join(",")),e.Te=n}return e.Te}function r0(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!l4(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!k1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!p_(s.startAt,e.startAt)&&p_(s.endAt,e.endAt)}function xp(s){return Ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,a=[],o=[],u=null,h="F",g=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function x4(s,e,n,a,o,u,h,g){return new Ro(s,e,n,a,o,u,h,g)}function df(s){return new Ro(s)}function y_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function M1(s){return s.collectionGroup!==null}function Xc(s){const e=ze(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new an(_n.comparator);return h.filters.forEach((x=>{x.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new ou(u,a))})),n.has(_n.keyField().canonicalString())||e.Ie.push(new ou(_n.keyField(),a))}return e.Ie}function xr(s){const e=ze(s);return e.Ee||(e.Ee=y4(e,Xc(s))),e.Ee}function y4(s,e){if(s.limitType==="F")return x_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ou(o.field,u)}));const n=s.endAt?new Dd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Dd(s.startAt.position,s.startAt.inclusive):null;return x_(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function yp(s,e){const n=s.filters.concat([e]);return new Ro(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function bp(s,e,n){return new Ro(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function ff(s,e){return r0(xr(s),xr(e))&&s.limitType===e.limitType}function V1(s){return`${s0(xr(s))}|lt:${s.limitType}`}function to(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>D1(o))).join(", ")}]`),uf(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>bo(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>bo(o))).join(",")),`Target(${a})`})(xr(s))}; limitType=${s.limitType})`}function mf(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ae.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of Xc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,x){const p=g_(h,g,x);return h.inclusive?p<=0:p<0})(a.startAt,Xc(a),o)||a.endAt&&!(function(h,g,x){const p=g_(h,g,x);return h.inclusive?p>=0:p>0})(a.endAt,Xc(a),o))})(s,e)}function b4(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function P1(s){return(e,n)=>{let a=!1;for(const o of Xc(s)){const u=v4(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function v4(s,e,n){const a=s.field.isKeyField()?Ae.comparator(e.key,n.key):(function(u,h,g){const x=h.data.field(u),p=g.data.field(u);return x!==null&&p!==null?yo(x,p):Oe(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Oe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return v1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new kt(Ae.comparator);function ga(){return _4}const L1=new kt(Ae.comparator);function Hc(...s){let e=L1;for(const n of s)e=e.insert(n.key,n);return e}function U1(s){let e=L1;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function Yi(){return Wc()}function z1(){return Wc()}function Wc(){return new ol((s=>s.toString()),((s,e)=>s.isEqual(e)))}const w4=new kt(Ae.comparator),N4=new an(Ae.comparator);function Ze(...s){let e=N4;for(const n of s)e=e.add(n);return e}const T4=new an(Je);function E4(){return T4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function B1(s){return{integerValue:""+s}}function j4(s,e){return ZR(e)?B1(e):a0(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function S4(s,e,n){return s instanceof cu?(function(o,u){const h={fields:{[N1]:{stringValue:w1},[E1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&t0(u)&&(u=hf(u)),u&&(h.fields[T1]=u),{mapValue:h}})(n,e):s instanceof vo?F1(s,e):s instanceof uu?q1(s,e):(function(o,u){const h=H1(o,u),g=b_(h)+b_(o.Ae);return gp(h)&&gp(o.Ae)?B1(g):a0(o.serializer,g)})(s,e)}function A4(s,e,n){return s instanceof vo?F1(s,e):s instanceof uu?q1(s,e):n}function H1(s,e){return s instanceof Od?(function(a){return gp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class cu extends gf{}class vo extends gf{constructor(e){super(),this.elements=e}}function F1(s,e){const n=G1(e);for(const a of s.elements)n.some((o=>Er(o,a)))||n.push(a);return{arrayValue:{values:n}}}class uu extends gf{constructor(e){super(),this.elements=e}}function q1(s,e){let n=G1(e);for(const a of s.elements)n=n.filter((o=>!Er(o,a)));return{arrayValue:{values:n}}}class Od extends gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function b_(s){return qt(s.integerValue||s.doubleValue)}function G1(s){return n0(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.field=e,this.transform=n}}function C4(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof vo&&o instanceof vo||a instanceof uu&&o instanceof uu?xo(a.elements,o.elements,Er):a instanceof Od&&o instanceof Od?Er(a.Ae,o.Ae):a instanceof cu&&o instanceof cu})(s.transform,e.transform)}class R4{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class pf{}function $1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new xf(s.key,Dn.none()):new bu(s.key,s.data,Dn.none());{const n=s.data,a=Fn.empty();let o=new an(_n.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new mi(s.key,a,new es(o.toArray()),Dn.none())}}function I4(s,e,n){s instanceof bu?(function(o,u,h){const g=o.value.clone(),x=__(o.fieldTransforms,u,h.transformResults);g.setAll(x),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof mi?(function(o,u,h){if(!xd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=__(o.fieldTransforms,u,h.transformResults),x=u.data;x.setAll(Q1(o)),x.setAll(g),u.convertToFoundDocument(h.version,x).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Jc(s,e,n,a){return s instanceof bu?(function(u,h,g,x){if(!xd(u.precondition,h))return g;const p=u.value.clone(),b=w_(u.fieldTransforms,x,h);return p.setAll(b),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(s,e,n,a):s instanceof mi?(function(u,h,g,x){if(!xd(u.precondition,h))return g;const p=w_(u.fieldTransforms,x,h),b=h.data;return b.setAll(Q1(u)),b.setAll(p),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,a):(function(u,h,g){return xd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function k4(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=H1(a.transform,o||null);u!=null&&(n===null&&(n=Fn.empty()),n.set(a.field,u))}return n||null}function v_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&xo(a,o,((u,h)=>C4(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class bu extends pf{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mi extends pf{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Q1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function __(s,e,n){const a=new Map;ct(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,A4(h,g,n[o]))}return a}function w_(s,e,n){const a=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);a.set(o.field,S4(u,h,e))}return a}class xf extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D4 extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&I4(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Jc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Jc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=z1();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const x=$1(h,g);x!==null&&a.set(o.key,x),h.isValidDocument()||h.convertToNoDocument(Le.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((n,a)=>v_(n,a)))&&xo(this.baseMutations,e.baseMutations,((n,a)=>v_(n,a)))}}class i0{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){ct(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return w4})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new i0(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,st;function P4(s){switch(s){case oe.OK:return Oe(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Oe(15467,{code:s})}}function Y1(s){if(s===void 0)return ma("GRPC error has no .code"),oe.UNKNOWN;switch(s){case Zt.OK:return oe.OK;case Zt.CANCELLED:return oe.CANCELLED;case Zt.UNKNOWN:return oe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return oe.INTERNAL;case Zt.UNAVAILABLE:return oe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return oe.NOT_FOUND;case Zt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Zt.ABORTED:return oe.ABORTED;case Zt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Zt.DATA_LOSS:return oe.DATA_LOSS;default:return Oe(39323,{code:s})}}(st=Zt||(Zt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new ti([4294967295,4294967295],0);function N_(s){const e=L4().encode(s),n=new c1;return n.update(e),new Uint8Array(n.digest())}function T_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ti([n,a],0),new ti([o,u],0)]}class l0{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Fc(`Invalid padding: ${n}`);if(a<0)throw new Fc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ti.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(ti.fromNumber(a)));return o.compare(U4)===1&&(o=new ti([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=N_(e),[a,o]=T_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new l0(u,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=N_(e),[a,o]=T_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new yf(Le.min(),o,new kt(Je),ga(),Ze())}}class vu{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new vu(a,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class X1{constructor(e,n){this.targetId=e,this.Ce=n}}class W1{constructor(e,n,a=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class E_{constructor(){this.ve=0,this.Fe=j_(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),a=Ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Oe(38017,{changeType:u})}})),new vu(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=j_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class z4{constructor(e){this.Ge=e,this.ze=new Map,this.je=ga(),this.Je=id(),this.He=id(),this.Ye=new kt(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(xp(u))if(a===0){const h=new Ae(u.path);this.et(n,h,jn.newNoDocument(h,Le.min()))}else ct(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),x=g?this.ct(g,e,h):1;if(x!==0){this.it(n);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=li(a).toUint8Array()}catch(x){if(x instanceof _1)return po("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{g=new l0(h,o,u)}catch(x){return po(x instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&xp(g.target)){const x=new Ae(g.target.path);this.It(x).has(h)||this.Et(h,x)||this.et(h,x,jn.newNoDocument(x,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let a=Ze();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new yf(e,n,this.Ye,this.je,a);return this.je=ga(),this.Je=id(),this.He=id(),this.Ye=new kt(Je),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new E_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new an(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new an(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function id(){return new kt(Ae.comparator)}function j_(){return new kt(Ae.comparator)}const B4={asc:"ASCENDING",desc:"DESCENDING"},H4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class q4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(s,e){return s.useProto3Json||uf(e)?e:{value:e}}function Md(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function G4(s,e){return Md(s,e.toTimestamp())}function yr(s){return ct(!!s,49232),Le.fromTimestamp((function(n){const a=ii(n);return new St(a.seconds,a.nanos)})(s))}function o0(s,e){return _p(s,e).canonicalString()}function _p(s,e){const n=(function(o){return new Nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Z1(s){const e=Nt.fromString(s);return ct(rN(e),10190,{key:e.toString()}),e}function wp(s,e){return o0(s.databaseId,e.path)}function Gg(s,e){const n=Z1(e);if(n.get(1)!==s.databaseId.projectId)throw new be(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new be(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ae(tN(n))}function eN(s,e){return o0(s.databaseId,e)}function K4(s){const e=Z1(s);return e.length===4?Nt.emptyPath():tN(e)}function Np(s){return new Nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function tN(s){return ct(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function S_(s,e,n){return{name:wp(s,e),fields:n.value.mapValue.fields}}function $4(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Oe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(ct(b===void 0||typeof b=="string",58123),wn.fromBase64String(b||"")):(ct(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),wn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(p){const b=p.code===void 0?oe.UNKNOWN:Y1(p.code);return new be(b,p.message||"")})(h);n=new W1(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Gg(s,a.document.name),u=yr(a.document.updateTime),h=a.document.createTime?yr(a.document.createTime):Le.min(),g=new Fn({mapValue:{fields:a.document.fields}}),x=jn.newFoundDocument(o,u,h,g),p=a.targetIds||[],b=a.removedTargetIds||[];n=new yd(p,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Gg(s,a.document),u=a.readTime?yr(a.readTime):Le.min(),h=jn.newNoDocument(o,u),g=a.removedTargetIds||[];n=new yd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Gg(s,a.document),u=a.removedTargetIds||[];n=new yd([],u,o,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new V4(o,u),g=a.targetId;n=new X1(g,h)}}return n}function Q4(s,e){let n;if(e instanceof bu)n={update:S_(s,e.key,e.value)};else if(e instanceof xf)n={delete:wp(s,e.key)};else if(e instanceof mi)n={update:S_(s,e.key,e.data),updateMask:s5(e.fieldMask)};else{if(!(e instanceof D4))return Oe(16599,{Vt:e.type});n={verify:wp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof cu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof vo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof uu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Od)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Oe(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:G4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Oe(27497)})(s,e.precondition)),n}function Y4(s,e){return s&&s.length>0?(ct(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?yr(o.updateTime):yr(u);return h.isEqual(Le.min())&&(h=yr(u)),new R4(h,o.transformResults||[])})(n,e)))):[]}function X4(s,e){return{documents:[eN(s,e.path)]}}function W4(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=eN(s,o);const u=(function(p){if(p.length!==0)return sN(Ls.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:no(T.field),direction:e5(T.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=vp(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function J4(s){let e=K4(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){ct(a===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const T=nN(w);return T instanceof Ls&&I1(T)?T.getFilters():[T]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((T=>(function(B){return new ou(so(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let T;return T=typeof w=="object"?w.value:w,uf(T)?null:T})(n.limit));let x=null;n.startAt&&(x=(function(w){const T=!!w.before,R=w.values||[];return new Dd(R,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(w){const T=!w.before,R=w.values||[];return new Dd(R,T)})(n.endAt)),x4(e,o,h,u,g,"F",x,p)}function Z4(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nN(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=so(n.unaryFilter.field);return en.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=so(n.unaryFilter.field);return en.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=so(n.unaryFilter.field);return en.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=so(n.unaryFilter.field);return en.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(s):s.fieldFilter!==void 0?(function(n){return en.create(so(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ls.create(n.compositeFilter.filters.map((a=>nN(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(n.compositeFilter.op))})(s):Oe(30097,{filter:s})}function e5(s){return B4[s]}function t5(s){return H4[s]}function n5(s){return F4[s]}function no(s){return{fieldPath:s.canonicalString()}}function so(s){return _n.fromServerFormat(s.fieldPath)}function sN(s){return s instanceof en?(function(n){if(n.op==="=="){if(m_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(f_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(f_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:t5(n.op),value:n.value}}})(s):s instanceof Ls?(function(n){const a=n.getFilters().map((o=>sN(o)));return a.length===1?a[0]:{compositeFilter:{op:n5(n.op),filters:a}}})(s):Oe(54877,{filter:s})}function s5(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,a,o,u=Le.min(),h=Le.min(),g=wn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=x}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.yt=e}}function a5(s){const e=J4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.Cn=new l5}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(ai.min())}updateCollectionGroup(e,n,a){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class l5{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new an(Nt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new an(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aN=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(aN,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _o(0)}static cr(){return new _o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LruGarbageCollector",o5=1048576;function R_([s,e],[n,a]){const o=Je(s,n);return o===0?Je(e,a):o}class c5{constructor(e){this.Ir=e,this.buffer=new an(R_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();R_(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u5{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(C_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Co(n)?we(C_,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)}))}}class h5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(cf.ce);const a=new c5(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(A_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,u,h,g,x,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,n)))).next((w=>(u=w,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(p=Date.now(),eo()<=We.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(x-g)+`ms
	Removed ${w} documents in `+(p-x)+`ms
Total Duration: ${p-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function d5(s,e){return new h5(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.changes=new ol((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ue.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Jc(a.mutation,o,es.empty(),St.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Ze()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Ze()){const o=Yi();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=Hc();return u.forEach(((g,x)=>{h=h.insert(g,x.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=Yi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Ze())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let u=ga();const h=Wc(),g=(function(){return Wc()})();return n.forEach(((x,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof mi)?u=u.insert(p.key,p):b!==void 0?(h.set(p.key,b.mutation.getFieldMask()),Jc(b.mutation,p,b.mutation.getFieldMask(),St.now())):h.set(p.key,es.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((p,b)=>h.set(p,b))),n.forEach(((p,b)=>g.set(p,new m5(b,h.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Wc();let o=new kt(((h,g)=>h-g)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((x=>{const p=n.get(x);if(p===null)return;let b=a.get(x)||es.empty();b=g.applyToLocalView(p,b),a.set(x,b);const w=(o.get(g.batchId)||Ze()).add(x);o=o.insert(g.batchId,w)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const x=g.getNext(),p=x.key,b=x.value,w=z1();b.forEach((T=>{if(!u.has(T)){const R=$1(n.get(T),a.get(T));R!==null&&w.set(T,R),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ue.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(h){return Ae.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ue.resolve(Yi());let g=ru,x=u;return h.next((p=>ue.forEach(p,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{x=x.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,x,p,Ze()))).next((b=>({batchId:g,changes:U1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((a=>{let o=Hc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=Hc();return this.indexManager.getCollectionParents(e,u).next((g=>ue.forEach(g,(x=>{const p=(function(w,T){return new Ro(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((b=>{b.forEach(((w,T)=>{h=h.insert(w,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((x,p)=>{const b=p.getKey();h.get(b)===null&&(h=h.insert(b,jn.newInvalidDocument(b)))}));let g=Hc();return h.forEach(((x,p)=>{const b=u.get(x);b!==void 0&&Jc(b.mutation,p,es.empty(),St.now()),mf(n,p)&&(g=g.insert(x,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:yr(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:a5(o.bundledQuery),readTime:yr(o.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.overlays=new kt(Ae.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Yi();return ue.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.St(e,n,u)})),ue.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),ue.resolve()}getOverlaysForCollection(e,n,a){const o=Yi(),u=n.length+1,h=new Ae(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const x=g.getNext().value,p=x.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&x.largestBatchId>a&&o.set(x.getKey(),x)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new kt(((p,b)=>p-b));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>a){let b=u.get(p.largestBatchId);b===null&&(b=Yi(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=Yi(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return ue.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new M4(n,a));let u=this.qr.get(n);u===void 0&&(u=Ze(),this.qr.set(n,u)),this.qr.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Qr=new an(dn.$r),this.Ur=new an(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new dn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new dn(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Ae(new Nt([])),a=new dn(n,e),o=new dn(n,e+1),u=[];return this.Ur.forEachInRange([a,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new Nt([])),a=new dn(n,e),o=new dn(n,e+1);let u=Ze();return this.Ur.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new dn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class dn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new an(dn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new O4(u,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new dn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(h)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?e0:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new dn(n,0),o=new dn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new an(Je);return n.forEach((o=>{const u=new dn(o,0),h=new dn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{a=a.add(g.Yr)}))})),ue.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Ae.isDocumentKey(u)||(u=u.child(""));const h=new dn(new Ae(u),0);let g=new an(Je);return this.Zr.forEachWhile((x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(x.Yr)),!0)}),h),ue.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ue.forEach(n.mutations,(o=>{const u=new dn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new dn(n,0),o=this.Zr.firstAfterOrEqual(a);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.ri=e,this.docs=(function(){return new kt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ue.resolve(a?a.document.mutableCopy():jn.newInvalidDocument(n))}getEntries(e,n){let a=ga();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():jn.newInvalidDocument(o))})),ue.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=ga();const h=n.path,g=new Ae(h.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(g);for(;x.hasNext();){const{key:p,value:{document:b}}=x.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||YR(QR(b),a)<=0||(o.has(b.key)||mf(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Oe(9500)}ii(e,n){return ue.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new _5(this)}getSize(e){return ue.resolve(this.size)}}class _5 extends f5{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.persistence=e,this.si=new ol((n=>s0(n)),r0),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new c0,this.targetCount=0,this.ai=_o.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ue.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ue.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ue.resolve(a)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n){this.ui={},this.overlays={},this.ci=new cf(0),this.li=!1,this.li=!0,this.hi=new y5,this.referenceDelegate=e(this),this.Pi=new w5(this),this.indexManager=new i5,this.remoteDocumentCache=(function(o){return new v5(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new r5(n),this.Ii=new p5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new b5(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){we("MemoryPersistence","Starting transaction:",e);const o=new N5(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ue.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class N5 extends WR{constructor(e){super(),this.currentSequenceNumber=e}}class u0{constructor(e){this.persistence=e,this.Ri=new c0,this.Vi=null}static mi(e){return new u0(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ue.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(a=>{const o=Ae.fromPath(a);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new ol((a=>e4(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=d5(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?ue.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(a++,u.removeEntry(h,Le.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gd(e.data.value)),n}br(e,n,a){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ue.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=Ze(),o=Ze();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new h0(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pC()?8:JR(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new T5;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(eo()<=We.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(eo()<=We.DEBUG&&we("QueryEngine","Query:",to(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(eo()<=We.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):ue.resolve())}ys(e,n){if(y_(n))return ue.resolve(null);let a=xr(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=bp(n,null,"F"),a=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=Ze(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((x=>{const p=this.Ds(n,g);return this.Cs(n,p,h,x.readTime)?this.ys(e,bp(n,null,"F")):this.vs(e,p,n,x)}))))})))))}ws(e,n,a,o){return y_(n)||o.isEqual(Le.min())?ue.resolve(null):this.ps.getDocuments(e,a).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,a,o)?ue.resolve(null):(eo()<=We.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),to(n)),this.vs(e,h,n,$R(o,ru)).next((g=>g)))}))}Ds(e,n){let a=new an(P1(e));return n.forEach(((o,u)=>{mf(e,u)&&(a=a.add(u))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,a){return eo()<=We.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",to(n)),this.ps.getDocumentsMatchingQuery(e,n,ai.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LocalStore",j5=3e8;class S5{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new kt(Je),this.xs=new ol((u=>s0(u)),r0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function A5(s,e,n,a){return new S5(s,e,n,a)}async function lN(s,e){const n=ze(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let x=Ze();for(const p of o){h.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}return n.localDocuments.getDocuments(a,x).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:g})))}))}))}function C5(s,e){const n=ze(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,x,p,b){const w=p.batch,T=w.keys();let R=ue.resolve();return T.forEach((B=>{R=R.next((()=>b.getEntry(x,B))).next((H=>{const U=p.docVersions.get(B);ct(U!==null,48541),H.version.compareTo(U)<0&&(w.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),b.addEntry(H)))}))})),R.next((()=>g.mutationQueue.removeMutationBatch(x,w)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let x=Ze();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(x=x.add(g.batch.mutations[p].key));return x})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function oN(s){const e=ze(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function R5(s,e){const n=ze(s),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,w)=>{const T=o.get(w);if(!T)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,w))));let R=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(wn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,a)),o=o.insert(w,R),(function(H,U,J){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=j5?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(T,R,b)&&g.push(n.Pi.updateTargetData(u,R))}));let x=ga(),p=Ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(I5(u,h,e.documentUpdates).next((b=>{x=b.ks,p=b.qs}))),!a.isEqual(Le.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(b)}return ue.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,x,p))).next((()=>x))})).then((u=>(n.Ms=o,u)))}function I5(s,e,n){let a=Ze(),o=Ze();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=ga();return n.forEach(((g,x)=>{const p=u.get(g);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),x.isNoDocument()&&x.version.isEqual(Le.min())?(e.removeEntry(g,x.readTime),h=h.insert(g,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),h=h.insert(g,x)):we(d0,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",x.version)})),{ks:h,qs:o}}))}function k5(s,e){const n=ze(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=e0),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function D5(s,e){const n=ze(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((u=>u?(o=u,ue.resolve(o)):n.Pi.allocateTargetId(a).next((h=>(o=new Ja(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function Tp(s,e,n){const a=ze(s),o=a.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Co(h))throw h;we(d0,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function I_(s,e,n){const a=ze(s);let o=Le.min(),u=Ze();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(x,p,b){const w=ze(x),T=w.xs.get(b);return T!==void 0?ue.resolve(w.Ms.get(T)):w.Pi.getTargetData(p,b)})(a,h,xr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(h,g.targetId).next((x=>{u=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(h,e,n?o:Le.min(),n?u:Ze()))).next((g=>(O5(a,b4(e),g),{documents:g,Qs:u})))))}function O5(s,e,n){let a=s.Os.get(e)||Le.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Os.set(e,a)}class k_{constructor(){this.activeTargetIds=E4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M5{constructor(){this.Mo=new k_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new k_,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="ConnectivityMonitor";class O_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(D_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(D_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function Ep(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",P5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Id?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,u){const h=Ep(),g=this.zo(e,n.toUriEncodedString());we(Kg,`Sending RPC '${e}' ${h}:`,g,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,u);const{host:p}=new URL(g),b=Ir(p);return this.Jo(e,g,x,a,b).then((w=>(we(Kg,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw po(Kg,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,n,a,o,u,h){return this.Go(e,n,a,o,u)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const a=P5[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class z5 extends L5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,u){const h=Ep();return new Promise(((g,x)=>{const p=new u1;p.setWithCredentials(!0),p.listenOnce(h1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case md.NO_ERROR:const w=p.getResponseJson();we(Tn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case md.TIMEOUT:we(Tn,`RPC '${e}' ${h} timed out`),x(new be(oe.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const T=p.getStatus();if(we(Tn,`RPC '${e}' ${h} failed with status:`,T,"response text:",p.getResponseText()),T>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const B=R==null?void 0:R.error;if(B&&B.status&&B.message){const H=(function(J){const ne=J.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ne)>=0?ne:oe.UNKNOWN})(B.status);x(new be(H,B.message))}else x(new be(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new be(oe.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{we(Tn,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(o);we(Tn,`RPC '${e}' ${h} sending request:`,o),p.send(n,"POST",b,a,15)}))}T_(e,n,a){const o=Ep(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=m1(),g=f1(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,n,a),x.encodeInitMessageHeaders=!0;const b=u.join("");we(Tn,`Creating RPC '${e}' stream ${o}: ${b}`,x);const w=h.createWebChannel(b,x);this.I_(w);let T=!1,R=!1;const B=new U5({Yo:U=>{R?we(Tn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(T||(we(Tn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),we(Tn,`RPC '${e}' stream ${o} sending:`,U),w.send(U))},Zo:()=>w.close()}),H=(U,J,ne)=>{U.listen(J,(q=>{try{ne(q)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return H(w,Bc.EventType.OPEN,(()=>{R||(we(Tn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),H(w,Bc.EventType.CLOSE,(()=>{R||(R=!0,we(Tn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(w))})),H(w,Bc.EventType.ERROR,(U=>{R||(R=!0,po(Tn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),B.a_(new be(oe.UNAVAILABLE,"The operation could not be completed")))})),H(w,Bc.EventType.MESSAGE,(U=>{var J;if(!R){const ne=U.data[0];ct(!!ne,16349);const q=ne,Y=(q==null?void 0:q.error)||((J=q[0])==null?void 0:J.error);if(Y){we(Tn,`RPC '${e}' stream ${o} received error:`,Y);const de=Y.status;let pe=(function(A){const P=Zt[A];if(P!==void 0)return Y1(P)})(de),j=Y.message;pe===void 0&&(pe=oe.INTERNAL,j="Unknown error status: "+de+" with message "+Y.message),R=!0,B.a_(new be(pe,j)),w.close()}else we(Tn,`RPC '${e}' stream ${o} received:`,ne),B.u_(ne)}})),H(g,d1.STAT_EVENT,(U=>{U.stat===dp.PROXY?we(Tn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===dp.NOPROXY&&we(Tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function $g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(s){return new q4(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="PersistentStream";class uN{constructor(e,n,a,o,u,h,g,x){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new be(oe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(M_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(we(M_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class B5 extends uN{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$4(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Le.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Le.min():h.readTime?yr(h.readTime):Le.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Np(this.serializer),n.addTarget=(function(u,h){let g;const x=h.target;if(g=xp(x)?{documents:X4(u,x)}:{query:W4(u,x).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=J1(u,h.resumeToken);const p=vp(u,h.expectedCount);p!==null&&(g.expectedCount=p)}else if(h.snapshotVersion.compareTo(Le.min())>0){g.readTime=Md(u,h.snapshotVersion.toTimestamp());const p=vp(u,h.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=Z4(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Np(this.serializer),n.removeTarget=e,this.q_(n)}}class H5 extends uN{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Y4(e.writeResults,e.commitTime),a=yr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Np(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>Q4(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{}class q5 extends F5{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,_p(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(oe.UNKNOWN,u.toString())}))}Ho(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,_p(n,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new be(oe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class G5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="RemoteStore";class K5{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{a.enqueueAndForget((async()=>{cl(this)&&(we(tl,"Restarting streams for network reachability change."),await(async function(x){const p=ze(x);p.Ea.add(4),await _u(p),p.Ra.set("Unknown"),p.Ea.delete(4),await vf(p)})(this))}))})),this.Ra=new G5(a,o)}}async function vf(s){if(cl(s))for(const e of s.da)await e(!0)}async function _u(s){for(const e of s.da)await e(!1)}function hN(s,e){const n=ze(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),p0(n)?g0(n):Io(n).O_()&&m0(n,e))}function f0(s,e){const n=ze(s),a=Io(n);n.Ia.delete(e),a.O_()&&dN(n,e),n.Ia.size===0&&(a.O_()?a.L_():cl(n)&&n.Ra.set("Unknown"))}function m0(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(s).Y_(e)}function dN(s,e){s.Va.Ue(e),Io(s).Z_(e)}function g0(s){s.Va=new z4({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Io(s).start(),s.Ra.ua()}function p0(s){return cl(s)&&!Io(s).x_()&&s.Ia.size>0}function cl(s){return ze(s).Ea.size===0}function fN(s){s.Va=void 0}async function $5(s){s.Ra.set("Online")}async function Q5(s){s.Ia.forEach(((e,n)=>{m0(s,e)}))}async function Y5(s,e){fN(s),p0(s)?(s.Ra.ha(e),g0(s)):s.Ra.set("Unknown")}async function X5(s,e,n){if(s.Ra.set("Online"),e instanceof W1&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){we(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Pd(s,a)}else if(e instanceof yd?s.Va.Ze(e):e instanceof X1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Le.min()))try{const a=await oN(s.localStore);n.compareTo(a)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(x.resumeToken,h))}})),g.targetMismatches.forEach(((x,p)=>{const b=u.Ia.get(x);if(!b)return;u.Ia.set(x,b.withResumeToken(wn.EMPTY_BYTE_STRING,b.snapshotVersion)),dN(u,x);const w=new Ja(b.target,x,p,b.sequenceNumber);m0(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){we(tl,"Failed to raise snapshot:",a),await Pd(s,a)}}async function Pd(s,e,n){if(!Co(e))throw e;s.Ea.add(1),await _u(s),s.Ra.set("Offline"),n||(n=()=>oN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{we(tl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await vf(s)}))}function mN(s,e){return e().catch((n=>Pd(s,n,e)))}async function _f(s){const e=ze(s),n=ci(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e0;for(;W5(e);)try{const o=await k5(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,J5(e,o)}catch(o){await Pd(e,o)}gN(e)&&pN(e)}function W5(s){return cl(s)&&s.Ta.length<10}function J5(s,e){s.Ta.push(e);const n=ci(s);n.O_()&&n.X_&&n.ea(e.mutations)}function gN(s){return cl(s)&&!ci(s).x_()&&s.Ta.length>0}function pN(s){ci(s).start()}async function Z5(s){ci(s).ra()}async function eI(s){const e=ci(s);for(const n of s.Ta)e.ea(n.mutations)}async function tI(s,e,n){const a=s.Ta.shift(),o=i0.from(a,e,n);await mN(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await _f(s)}async function nI(s,e){e&&ci(s).X_&&await(async function(a,o){if((function(h){return P4(h)&&h!==oe.ABORTED})(o.code)){const u=a.Ta.shift();ci(a).B_(),await mN(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await _f(a)}})(s,e),gN(s)&&pN(s)}async function V_(s,e){const n=ze(s);n.asyncQueue.verifyOperationInProgress(),we(tl,"RemoteStore received new credentials");const a=cl(n);n.Ea.add(3),await _u(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vf(n)}async function sI(s,e){const n=ze(s);e?(n.Ea.delete(2),await vf(n)):e||(n.Ea.add(2),await _u(n),n.Ra.set("Unknown"))}function Io(s){return s.ma||(s.ma=(function(n,a,o){const u=ze(n);return u.sa(),new B5(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:$5.bind(null,s),t_:Q5.bind(null,s),r_:Y5.bind(null,s),H_:X5.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),p0(s)?g0(s):s.Ra.set("Unknown")):(await s.ma.stop(),fN(s))}))),s.ma}function ci(s){return s.fa||(s.fa=(function(n,a,o){const u=ze(n);return u.sa(),new H5(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z5.bind(null,s),r_:nI.bind(null,s),ta:eI.bind(null,s),na:tI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await _f(s)):(await s.fa.stop(),s.Ta.length>0&&(we(tl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,g=new x0(e,n,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(s,e){if(ma("AsyncQueue",`${e}: ${s}`),Co(s))return new be(oe.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ae.comparator(n.key,a.key):(n,a)=>Ae.comparator(n.key,a.key),this.keyedMap=Hc(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new lo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ga=new kt(Ae.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class wo{constructor(e,n,a,o,u,h,g,x,p){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new wo(e,n,lo.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aI{constructor(){this.queries=L_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=ze(n),u=o.queries;o.queries=L_(),u.forEach(((h,g)=>{for(const x of g.Sa)x.onError(a)}))})(this,new be(oe.ABORTED,"Firestore shutting down"))}}function L_(){return new ol((s=>V1(s)),ff)}async function b0(s,e){const n=ze(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new rI,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=y0(h,`Initialization of query '${to(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&_0(n)}async function v0(s,e){const n=ze(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function iI(s,e){const n=ze(s);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(a=!0);h.wa=o}}a&&_0(n)}function lI(s,e,n){const a=ze(s),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);a.queries.delete(e)}function _0(s){s.Ca.forEach((e=>{e.next()}))}var jp,U_;(U_=jp||(jp={})).Ma="default",U_.Cache="cache";class w0{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new wo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.key=e}}class yN{constructor(e){this.key=e}}class oI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=P1(e),this.tu=new lo(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new P_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const T=o.get(b),R=mf(this.query,w)?w:null,B=!!T&&this.mutatedKeys.has(T.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;T&&R?T.data.isEqual(R.data)?B!==H&&(a.track({type:3,doc:R}),U=!0):this.su(T,R)||(a.track({type:2,doc:R}),U=!0,(x&&this.eu(R,x)>0||p&&this.eu(R,p)<0)&&(g=!0)):!T&&R?(a.track({type:0,doc:R}),U=!0):T&&!R&&(a.track({type:1,doc:T}),U=!0,(x||p)&&(g=!0)),U&&(R?(h=h.add(R),u=H?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:h,iu:a,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,w)=>(function(R,B){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:U})}};return H(R)-H(B)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,h.length!==0||p?{snapshot:new wo(this.query,e.tu,u,h,e.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new yN(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new xN(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const N0="SyncEngine";class cI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class uI{constructor(e){this.key=e,this.hu=!1}}class hI{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ol((g=>V1(g)),ff),this.Iu=new Map,this.Eu=new Set,this.du=new kt(Ae.comparator),this.Au=new Map,this.Ru=new c0,this.Vu={},this.mu=new Map,this.fu=_o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dI(s,e,n=!0){const a=TN(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await bN(a,e,n,!0),o}async function fI(s,e){const n=TN(s);await bN(n,e,!0,!1)}async function bN(s,e,n,a){const o=await D5(s.localStore,xr(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await mI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&hN(s.remoteStore,o),g}async function mI(s,e,n,a,o){s.pu=(w,T,R)=>(async function(H,U,J,ne){let q=U.view.ru(J);q.Cs&&(q=await I_(H.localStore,U.query,!1).then((({documents:j})=>U.view.ru(j,q))));const Y=ne&&ne.targetChanges.get(U.targetId),de=ne&&ne.targetMismatches.get(U.targetId)!=null,pe=U.view.applyChanges(q,H.isPrimaryClient,Y,de);return B_(H,U.targetId,pe.au),pe.snapshot})(s,w,T,R);const u=await I_(s.localStore,e,!0),h=new oI(e,u.Qs),g=h.ru(u.documents),x=vu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),p=h.applyChanges(g,s.isPrimaryClient,x);B_(s,n,p.au);const b=new cI(e,n,h);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function gI(s,e,n){const a=ze(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!ff(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Tp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&f0(a.remoteStore,o.targetId),Sp(a,o.targetId)})).catch(Ao)):(Sp(a,o.targetId),await Tp(a.localStore,o.targetId,!0))}async function pI(s,e){const n=ze(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),f0(n.remoteStore,a.targetId))}async function xI(s,e,n){const a=TI(s);try{const o=await(function(h,g){const x=ze(h),p=St.now(),b=g.reduce(((R,B)=>R.add(B.key)),Ze());let w,T;return x.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let B=ga(),H=Ze();return x.Ns.getEntries(R,b).next((U=>{B=U,B.forEach(((J,ne)=>{ne.isValidDocument()||(H=H.add(J))}))})).next((()=>x.localDocuments.getOverlayedDocuments(R,B))).next((U=>{w=U;const J=[];for(const ne of g){const q=k4(ne,w.get(ne.key).overlayedDocument);q!=null&&J.push(new mi(ne.key,q,A1(q.value.mapValue),Dn.exists(!0)))}return x.mutationQueue.addMutationBatch(R,p,J,g)})).next((U=>{T=U;const J=U.applyToLocalDocumentSet(w,H);return x.documentOverlayCache.saveOverlays(R,U.batchId,J)}))})).then((()=>({batchId:T.batchId,changes:U1(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,x){let p=h.Vu[h.currentUser.toKey()];p||(p=new kt(Je)),p=p.insert(g,x),h.Vu[h.currentUser.toKey()]=p})(a,o.batchId,n),await wu(a,o.changes),await _f(a.remoteStore)}catch(o){const u=y0(o,"Failed to persist write");n.reject(u)}}async function vN(s,e){const n=ze(s);try{const a=await R5(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ct(h.hu,14607):o.removedDocuments.size>0&&(ct(h.hu,42227),h.hu=!1))})),await wu(n,a,e)}catch(a){await Ao(a)}}function z_(s,e,n){const a=ze(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const x=ze(h);x.onlineState=g;let p=!1;x.queries.forEach(((b,w)=>{for(const T of w.Sa)T.va(g)&&(p=!0)})),p&&_0(x)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function yI(s,e,n){const a=ze(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new kt(Ae.comparator);h=h.insert(u,jn.newNoDocument(u,Le.min()));const g=Ze().add(u),x=new yf(Le.min(),new Map,new kt(Je),h,g);await vN(a,x),a.du=a.du.remove(u),a.Au.delete(e),T0(a)}else await Tp(a.localStore,e,!1).then((()=>Sp(a,e,n))).catch(Ao)}async function bI(s,e){const n=ze(s),a=e.batch.batchId;try{const o=await C5(n.localStore,e);wN(n,a,null),_N(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await wu(n,o)}catch(o){await Ao(o)}}async function vI(s,e,n){const a=ze(s);try{const o=await(function(h,g){const x=ze(h);return x.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return x.mutationQueue.lookupMutationBatch(p,g).next((w=>(ct(w!==null,37113),b=w.keys(),x.mutationQueue.removeMutationBatch(p,w)))).next((()=>x.mutationQueue.performConsistencyCheck(p))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>x.localDocuments.getDocuments(p,b)))}))})(a.localStore,e);wN(a,e,n),_N(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await wu(a,o)}catch(o){await Ao(o)}}function _N(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function wN(s,e,n){const a=ze(s);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Sp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||NN(s,a)}))}function NN(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(f0(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),T0(s))}function B_(s,e,n){for(const a of n)a instanceof xN?(s.Ru.addReference(a.key,e),_I(s,a)):a instanceof yN?(we(N0,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||NN(s,a.key)):Oe(19791,{wu:a})}function _I(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(we(N0,"New document in limbo: "+n),s.Eu.add(a),T0(s))}function T0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ae(Nt.fromString(e)),a=s.fu.next();s.Au.set(a,new uI(n)),s.du=s.du.insert(n,a),hN(s.remoteStore,new Ja(xr(df(n.path)),a,"TargetPurposeLimboResolution",cf.ce))}}async function wu(s,e,n){const a=ze(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,x)=>{h.push(a.pu(x,e,n).then((p=>{var b;if((p||n)&&a.isPrimaryClient){const w=p?!p.fromCache:(b=n==null?void 0:n.targetChanges.get(x.targetId))==null?void 0:b.current;a.sharedClientState.updateQueryState(x.targetId,w?"current":"not-current")}if(p){o.push(p);const w=h0.As(x.targetId,p);u.push(w)}})))})),await Promise.all(h),a.Pu.H_(o),await(async function(x,p){const b=ze(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ue.forEach(p,(T=>ue.forEach(T.Es,(R=>b.persistence.referenceDelegate.addReference(w,T.targetId,R))).next((()=>ue.forEach(T.ds,(R=>b.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))))))}catch(w){if(!Co(w))throw w;we(d0,"Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const R=b.Ms.get(T),B=R.snapshotVersion,H=R.withLastLimboFreeSnapshotVersion(B);b.Ms=b.Ms.insert(T,H)}}})(a.localStore,u))}async function wI(s,e){const n=ze(s);if(!n.currentUser.isEqual(e)){we(N0,"User change. New user:",e.toKey());const a=await lN(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((x=>{x.reject(new be(oe.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await wu(n,a.Ls)}}function NI(s,e){const n=ze(s),a=n.Au.get(e);if(a&&a.hu)return Ze().add(a.key);{let o=Ze();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function TN(s){const e=ze(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yI.bind(null,e),e.Pu.H_=iI.bind(null,e.eventManager),e.Pu.yu=lI.bind(null,e.eventManager),e}function TI(s){const e=ze(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vI.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return A5(this.persistence,new E5,e.initialUser,this.serializer)}Cu(e){return new iN(u0.mi,this.serializer)}Du(e){return new M5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class EI extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof Vd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new u5(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new iN((a=>Vd.mi(a,n)),this.serializer)}}class Ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>z_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=wI.bind(null,this.syncEngine),await sI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aI})()}createDatastore(e){const n=bf(e.databaseInfo.databaseId),a=(function(u){return new z5(u)})(e.databaseInfo);return(function(u,h,g,x){return new q5(u,h,g,x)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,g){return new K5(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>z_(this.syncEngine,n,0)),(function(){return O_.v()?new O_:new V5})())}createSyncEngine(e,n){return(function(o,u,h,g,x,p,b){const w=new hI(o,u,h,g,x,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=ze(o);we(tl,"RemoteStore shutting down."),u.Ea.add(5),await _u(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class jI{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=Zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{we(ui,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(we(ui,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=y0(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Qg(s,e){s.asyncQueue.verifyOperationInProgress(),we(ui,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await lN(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function H_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await SI(s);we(ui,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>V_(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>V_(e.remoteStore,o))),s._onlineComponents=e}async function SI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){we(ui,"Using user provided OfflineComponentProvider");try{await Qg(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await Qg(s,new Ld)}}else we(ui,"Using default OfflineComponentProvider"),await Qg(s,new EI(void 0));return s._offlineComponents}async function EN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(we(ui,"Using user provided OnlineComponentProvider"),await H_(s,s._uninitializedComponentsProvider._online)):(we(ui,"Using default OnlineComponentProvider"),await H_(s,new Ap))),s._onlineComponents}function AI(s){return EN(s).then((e=>e.syncEngine))}async function Ud(s){const e=await EN(s),n=e.eventManager;return n.onListen=dI.bind(null,e.syncEngine),n.onUnlisten=gI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pI.bind(null,e.syncEngine),n}function CI(s,e,n={}){const a=new ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,x,p){const b=new E0({next:T=>{b.Nu(),h.enqueueAndForget((()=>v0(u,w)));const R=T.docs.has(g);!R&&T.fromCache?p.reject(new be(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&x&&x.source==="server"?p.reject(new be(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new w0(df(g.path),b,{includeMetadataChanges:!0,qa:!0});return b0(u,w)})(await Ud(s),s.asyncQueue,e,n,a))),a.promise}function RI(s,e,n={}){const a=new ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,x,p){const b=new E0({next:T=>{b.Nu(),h.enqueueAndForget((()=>v0(u,w))),T.fromCache&&x.source==="server"?p.reject(new be(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new w0(g,b,{includeMetadataChanges:!0,qa:!0});return b0(u,w)})(await Ud(s),s.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firestore.googleapis.com",q_=!0;class G_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SN,this.ssl=q_}else this.host=e.host,this.ssl=e.ssl??q_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o5)throw new be(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jN(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new VR;switch(a.type){case"firstParty":return new zR(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=F_.get(n);a&&(we("ComponentProvider","Removing Datastore"),F_.delete(n),a.terminate())})(this),Promise.resolve()}}function II(s,e,n,a={}){var p;s=kn(s,wf);const o=Ir(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(rf(`https://${g}`),af("Firestore",!0)),u.host!==SN&&u.host!==g&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:g,ssl:o,emulatorOptions:a};if(!si(x,h)&&(s._setSettings(x),a.mockUserToken)){let b,w;if(typeof a.mockUserToken=="string")b=a.mockUserToken,w=En.MOCK_USER;else{b=r1(a.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new be(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new En(T)}s._authCredentials=new PR(new p1(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class Vt{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(yu(n,Vt._jsonSchema))return new Vt(e,a||null,new Ae(Nt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:tn("string",Vt._jsonSchemaVersion),referencePath:tn("string")};class ni extends gi{constructor(e,n,a){super(e,n,df(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Ae(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function _t(s,e,...n){if(s=ut(s),x1("collection","path",e),s instanceof wf){const a=Nt.fromString(e,...n);return r_(a),new ni(s,null,a)}{if(!(s instanceof Vt||s instanceof ni))throw new be(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Nt.fromString(e,...n));return r_(a),new ni(s.firestore,null,a)}}function Qe(s,e,...n){if(s=ut(s),arguments.length===1&&(e=Zp.newId()),x1("doc","path",e),s instanceof wf){const a=Nt.fromString(e,...n);return s_(a),new Vt(s,null,new Ae(a))}{if(!(s instanceof Vt||s instanceof ni))throw new be(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Nt.fromString(e,...n));return s_(a),new Vt(s.firestore,s instanceof ni?s.converter:null,new Ae(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="AsyncQueue";class $_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cN(this,"async_queue_retry"),this._c=()=>{const a=$g();a&&we(K_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=$g();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$g();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Co(e))throw e;we(K_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",Q_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=x0.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:Q_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Q_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(s){return(function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class jr extends wf{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new $_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $_(e),this._firestoreClient=void 0,await e}}}function kI(s,e){const n=typeof s=="object"?s:lf(),a=typeof s=="string"?s:Id,o=xu(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Qp("firestore");u&&II(o,...u)}return o}function Nu(s){if(s._terminated)throw new be(oe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||DI(s),s._firestoreClient}function DI(s){var a,o,u;const e=s._freezeSettings(),n=(function(g,x,p,b){return new s4(g,x,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,jN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new jI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const x=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(x),_online:x}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(wn.fromBase64String(e))}catch(n){throw new be(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ys._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,ys._jsonSchema))return ys.fromBase64String(e.bytes)}}ys._jsonSchemaVersion="firestore/bytes/1.0",ys._jsonSchema={type:tn("string",ys._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(yu(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:tn("string",br._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vr(e.vectorValues);throw new be(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:tn("string",vr._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=/^__.*__$/;class MI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}class AN{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:s})}}class Nf{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CN(this.Ac)&&OI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||bf(e)}Cc(e,n,a,o=!1){return new Nf({Ac:e,methodName:n,Dc:a,path:_n.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ju(s){const e=s._freezeSettings(),n=bf(s._databaseId);return new VI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function j0(s,e,n,a,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);C0("Data must be an object, but it was:",h,a);const g=kN(a,h);let x,p;if(u.merge)x=new es(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const T=Cp(e,w,n);if(!h.contains(T))throw new be(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);ON(b,T)||b.push(T)}x=new es(b),p=h.fieldTransforms.filter((w=>x.covers(w.field)))}else x=null,p=h.fieldTransforms;return new MI(new Fn(g),x,p)}class Tf extends Eu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function PI(s,e,n){return new Nf({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S0 extends Eu{_toFieldTransform(e){return new K1(e.path,new cu)}isEqual(e){return e instanceof S0}}class A0 extends Eu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=PI(this,e,!0),a=this.vc.map((u=>ko(u,n))),o=new vo(a);return new K1(e.path,o)}isEqual(e){return e instanceof A0&&si(this.vc,e.vc)}}function RN(s,e,n,a){const o=s.Cc(1,e,n);C0("Data must be an object, but it was:",o,a);const u=[],h=Fn.empty();fi(a,((x,p)=>{const b=R0(e,x,n);p=ut(p);const w=o.yc(b);if(p instanceof Tf)u.push(b);else{const T=ko(p,w);T!=null&&(u.push(b),h.set(b,T))}}));const g=new es(u);return new AN(h,g,o.fieldTransforms)}function IN(s,e,n,a,o,u){const h=s.Cc(1,e,n),g=[Cp(e,a,n)],x=[o];if(u.length%2!=0)throw new be(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)g.push(Cp(e,u[T])),x.push(u[T+1]);const p=[],b=Fn.empty();for(let T=g.length-1;T>=0;--T)if(!ON(p,g[T])){const R=g[T];let B=x[T];B=ut(B);const H=h.yc(R);if(B instanceof Tf)p.push(R);else{const U=ko(B,H);U!=null&&(p.push(R),b.set(R,U))}}const w=new es(p);return new AN(b,w,h.fieldTransforms)}function LI(s,e,n,a=!1){return ko(n,s.Cc(a?4:3,e))}function ko(s,e){if(DN(s=ut(s)))return C0("Unsupported field value:",e,s),kN(s,e);if(s instanceof Eu)return(function(a,o){if(!CN(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let x=ko(g,o.wc(h));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=ut(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return j4(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=St.fromDate(a);return{timestampValue:Md(o.serializer,u)}}if(a instanceof St){const u=new St(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Md(o.serializer,u)}}if(a instanceof br)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ys)return{bytesValue:J1(o.serializer,a._byteString)};if(a instanceof Vt){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:o0(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof vr)return(function(h,g){return{mapValue:{fields:{[j1]:{stringValue:S1},[kd]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return a0(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${of(a)}`)})(s,e)}function kN(s,e){const n={};return v1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(s,((a,o)=>{const u=ko(o,e.mc(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function DN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof St||s instanceof br||s instanceof ys||s instanceof Vt||s instanceof Eu||s instanceof vr)}function C0(s,e,n){if(!DN(n)||!y1(n)){const a=of(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Cp(s,e,n){if((e=ut(e))instanceof Tu)return e._internalPath;if(typeof e=="string")return R0(s,e);throw zd("Field path arguments must be of type string or ",s,!1,void 0,n)}const UI=new RegExp("[~\\*/\\[\\]]");function R0(s,e,n){if(e.search(UI)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Tu(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function zd(s,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let x="";return(u||h)&&(x+=" (found",u&&(x+=` in field ${a}`),h&&(x+=` in document ${o}`),x+=")"),new be(oe.INVALID_ARGUMENT,g+s+x)}function ON(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zI extends MN{data(){return super.data()}}function Ef(s,e){return typeof e=="string"?R0(s,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new be(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I0{}class PN extends I0{}function mn(s,e,...n){let a=[];e instanceof I0&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((x=>x instanceof k0)).length,g=u.filter((x=>x instanceof jf)).length;if(h>1||h>0&&g>0)throw new be(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class jf extends PN{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new jf(e,n,a)}_apply(e){const n=this._parse(e);return LN(e._query,n),new gi(e.firestore,e.converter,yp(e._query,n))}_parse(e){const n=ju(e.firestore);return(function(u,h,g,x,p,b,w){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new be(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){W_(w,b);const B=[];for(const H of w)B.push(X_(x,u,H));T={arrayValue:{values:B}}}else T=X_(x,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||W_(w,b),T=LI(g,h,w,b==="in"||b==="not-in");return en.create(p,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _s(s,e,n){const a=e,o=Ef("where",s);return jf._create(o,a,n)}class k0 extends I0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new k0(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Ls.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const x of g)LN(h,x),h=yp(h,x)})(e._query,n),new gi(e.firestore,e.converter,yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class D0 extends PN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new D0(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new be(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(u,h)})(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Ro(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Do(s,e="asc"){const n=e,a=Ef("orderBy",s);return D0._create(a,n)}function X_(s,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new be(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M1(e)&&n.indexOf("/")!==-1)throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Nt.fromString(n));if(!Ae.isDocumentKey(a))throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return d_(s,new Ae(a))}if(n instanceof Vt)return d_(s,n._key);throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function W_(s,e){if(!Array.isArray(s)||s.length===0)throw new be(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LN(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BI{convertValue(e,n="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return fi(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){var a,o,u;const n=(u=(o=(a=e.fields)==null?void 0:a[kd].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>qt(h.doubleValue)));return new vr(n)}convertGeoPoint(e){return new br(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=hf(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=ii(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Nt.fromString(e);ct(rN(a),9688,{name:e});const o=new iu(a.get(1),a.get(3)),u=new Ae(a.popFirst(5));return o.isEqual(n)||ma(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xi extends MN{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Ef("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:tn("string",Xi._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class bd extends Xi{data(e={}){return super.data(e)}}class Wi{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new qc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new bd(this._firestore,this._userDataWriter,a.key,a,new qc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const x=new bd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new qc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:x,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const x=new bd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new qc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:HI(g.type),doc:x,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(s){s=kn(s,Vt);const e=kn(s.firestore,jr);return CI(Nu(e),s._key).then((n=>UN(e,s,n)))}Wi._jsonSchemaVersion="firestore/querySnapshot/1.0",Wi._jsonSchema={type:tn("string",Wi._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class M0 extends BI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function Sr(s){s=kn(s,gi);const e=kn(s.firestore,jr),n=Nu(e),a=new M0(e);return VN(s._query),RI(n,s._query).then((o=>new Wi(e,a,s,o)))}function vd(s,e,n){s=kn(s,Vt);const a=kn(s.firestore,jr),o=O0(s.converter,e,n);return Su(a,[j0(ju(a),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Dn.none())])}function ss(s,e,n,...a){s=kn(s,Vt);const o=kn(s.firestore,jr),u=ju(o);let h;return h=typeof(e=ut(e))=="string"||e instanceof Tu?IN(u,"updateDoc",s._key,e,n,a):RN(u,"updateDoc",s._key,e),Su(o,[h.toMutation(s._key,Dn.exists(!0))])}function ul(s){return Su(kn(s.firestore,jr),[new xf(s._key,Dn.none())])}function hl(s,e){const n=kn(s.firestore,jr),a=Qe(s),o=O0(s.converter,e);return Su(n,[j0(ju(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Dn.exists(!1))]).then((()=>a))}function Ar(s,...e){var x,p,b;s=ut(s);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Y_(e[a])||(n=e[a++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Y_(e[a])){const w=e[a];e[a]=(x=w.next)==null?void 0:x.bind(w),e[a+1]=(p=w.error)==null?void 0:p.bind(w),e[a+2]=(b=w.complete)==null?void 0:b.bind(w)}let u,h,g;if(s instanceof Vt)h=kn(s.firestore,jr),g=df(s._key.path),u={next:w=>{e[a]&&e[a](UN(h,s,w))},error:e[a+1],complete:e[a+2]};else{const w=kn(s,gi);h=kn(w.firestore,jr),g=w._query;const T=new M0(h);u={next:R=>{e[a]&&e[a](new Wi(h,T,w,R))},error:e[a+1],complete:e[a+2]},VN(s._query)}return(function(T,R,B,H){const U=new E0(H),J=new w0(R,U,B);return T.asyncQueue.enqueueAndForget((async()=>b0(await Ud(T),J))),()=>{U.Nu(),T.asyncQueue.enqueueAndForget((async()=>v0(await Ud(T),J)))}})(Nu(h),g,o,u)}function Su(s,e){return(function(a,o){const u=new ia;return a.asyncQueue.enqueueAndForget((async()=>xI(await AI(a),o,u))),u.promise})(Nu(s),e)}function UN(s,e,n){const a=n.docs.get(e._key),o=new M0(s);return new Xi(s,o,e._key,a,new qc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ju(e)}set(e,n,a){this._verifyNotCommitted();const o=Yg(e,this._firestore),u=O0(o.converter,n,a),h=j0(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,a);return this._mutations.push(h.toMutation(o._key,Dn.none())),this}update(e,n,a,...o){this._verifyNotCommitted();const u=Yg(e,this._firestore);let h;return h=typeof(n=ut(n))=="string"||n instanceof Tu?IN(this._dataReader,"WriteBatch.update",u._key,n,a,o):RN(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yg(e,this._firestore);return this._mutations=this._mutations.concat(new xf(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yg(s,e){if((s=ut(s)).firestore!==e)throw new be(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function qI(){return new S0("serverTimestamp")}function V0(...s){return new A0("arrayUnion",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(s){return Nu(s=kn(s,jr)),new FI(s,(e=>Su(s,e)))}(function(e,n=!0){(function(o){So=o})(ll),ri(new da("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new jr(new LR(a.getProvider("auth-internal")),new BR(h,a.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(p.options.projectId,b)})(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),bs(Zv,e_,e),bs(Zv,e_,"esm2020")})();function zN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BN=zN,HN=new gu("auth","Firebase",zN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Yp("@firebase/auth");function GI(s,...e){Bd.logLevel<=We.WARN&&Bd.warn(`Auth (${ll}): ${s}`,...e)}function _d(s,...e){Bd.logLevel<=We.ERROR&&Bd.error(`Auth (${ll}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(s,...e){throw P0(s,...e)}function wr(s,...e){return P0(s,...e)}function FN(s,e,n){const a={...BN(),[e]:n};return new gu("auth","Firebase",a).create(e,{appName:s.name})}function la(s){return FN(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P0(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return HN.create(s,...e)}function De(s,e,...n){if(!s)throw P0(e,...n)}function sa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw _d(e),new Error(e)}function pa(s,e){s||sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function KI(){return Z_()==="http:"||Z_()==="https:"}function Z_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KI()||fC()||"connection"in navigator)?navigator.onLine:!0}function QI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=uC()||mC()}get(){return $I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(s,e){pa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WI=new Au(3e4,6e4);function pi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function xa(s,e,n,a,o={}){return GN(s,o,async()=>{let u={},h={};a&&(e==="GET"?h=a:u={body:JSON.stringify(a)});const g=pu({key:s.config.apiKey,...h}).slice(1),x=await s._getAdditionalHeaders();x["Content-Type"]="application/json",s.languageCode&&(x["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:x,...u};return dC()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Ir(s.emulatorConfig.host)&&(p.credentials="include"),qN.fetch()(await KN(s,s.config.apiHost,n,g),p)})}async function GN(s,e,n){s._canInitEmulator=!1;const a={...YI,...e};try{const o=new ZI(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw od(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[x,p]=g.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(s,"credential-already-in-use",h);if(x==="EMAIL_EXISTS")throw od(s,"email-already-in-use",h);if(x==="USER_DISABLED")throw od(s,"user-disabled",h);const b=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw FN(s,b,p);Us(s,b)}}catch(o){if(o instanceof Bs)throw o;Us(s,"network-request-failed",{message:String(o)})}}async function Cu(s,e,n,a,o={}){const u=await xa(s,e,n,a,o);return"mfaPendingCredential"in u&&Us(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function KN(s,e,n,a){const o=`${e}${n}?${a}`,u=s,h=u.config.emulator?L0(s.config,o):`${s.config.apiScheme}://${o}`;return XI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function JI(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(wr(this.auth,"network-request-failed")),WI.get())})}}function od(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=wr(s,e,a);return o.customData._tokenResponse=n,o}function ew(s){return s!==void 0&&s.enterprise!==void 0}class ek{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tk(s,e){return xa(s,"GET","/v2/recaptchaConfig",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(s,e){return xa(s,"POST","/v1/accounts:delete",e)}async function Hd(s,e){return xa(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $N(s,e=!1){const n=ut(s),a=await n.getIdToken(e),o=U0(a);De(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:Zc(Xg(o.auth_time)),issuedAtTime:Zc(Xg(o.iat)),expirationTime:Zc(Xg(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Xg(s){return Number(s)*1e3}function U0(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const o=e1(n);return o?JSON.parse(o):(_d("Failed to decode base64 JWT payload"),null)}catch(o){return _d("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function tw(s){const e=U0(s);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Bs&&sk(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function sk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(s){var w;const e=s.auth,n=await s.getIdToken(),a=await No(s,Hd(e,{idToken:n}));De(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?YN(o.providerUserInfo):[],h=ak(s.providerData,u),g=s.isAnonymous,x=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),p=g?x:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ip(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function QN(s){const e=ut(s);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ak(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function YN(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(s,e){const n=await GN(s,{},async()=>{const a=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await KN(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:g,body:a};return s.emulatorConfig&&Ir(s.emulatorConfig.host)&&(x.credentials="include"),qN.fetch()(h,x)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lk(s,e){return xa(s,"POST","/v2/accounts:revokeToken",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=tw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await ik(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,h=new oo;return a&&(De(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),o&&(De(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(De(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(s,e){De(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Vs{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new rk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ip(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $N(this,e)}reload(){return QN(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(la(this.auth));const e=await this.getIdToken();return await No(this,nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,x=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:R,providerData:B,stsTokenManager:H}=n;De(w&&H,e,"internal-error");const U=oo.fromJSON(this.name,H);De(typeof w=="string",e,"internal-error"),Ya(a,e.name),Ya(o,e.name),De(typeof T=="boolean",e,"internal-error"),De(typeof R=="boolean",e,"internal-error"),Ya(u,e.name),Ya(h,e.name),Ya(g,e.name),Ya(x,e.name),Ya(p,e.name),Ya(b,e.name);const J=new Vs({uid:w,auth:e,email:o,emailVerified:T,displayName:a,isAnonymous:R,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:U,createdAt:p,lastLoginAt:b});return B&&Array.isArray(B)&&(J.providerData=B.map(ne=>({...ne}))),x&&(J._redirectEventId=x),J}static async _fromIdTokenResponse(e,n,a=!1){const o=new oo;o.updateFromServerResponse(n);const u=new Vs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Fd(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];De(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?YN(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new oo;g.updateFromIdToken(a);const x=new Vs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ip(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;function ra(s){pa(s instanceof Function,"Expected a class definition");let e=nw.get(s);return e?(pa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,nw.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XN.type="NONE";const kp=XN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(s,e,n){return`firebase:${s}:${e}:${n}`}class co{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=wd(this.userKey,o.apiKey,u),this.fullPersistenceKey=wd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hd(this.auth,{idToken:e}).catch(()=>{});return n?Vs._fromGetAccountInfoResponse(this.auth,n,e):null}return Vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new co(ra(kp),e,a);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||ra(kp);const h=wd(a,e.config.apiKey,e.name);let g=null;for(const p of n)try{const b=await p._get(h);if(b){let w;if(typeof b=="string"){const T=await Hd(e,{idToken:b}).catch(()=>{});if(!T)break;w=await Vs._fromGetAccountInfoResponse(e,T,b)}else w=Vs._fromJSON(e,b);p!==u&&(g=w),u=p;break}}catch{}const x=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new co(u,e,a):(u=x[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new co(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nT(e))return"Blackberry";if(sT(e))return"Webos";if(JN(e))return"Safari";if((e.includes("chrome/")||ZN(e))&&!e.includes("edge/"))return"Chrome";if(tT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function WN(s=Sn()){return/firefox\//i.test(s)}function JN(s=Sn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZN(s=Sn()){return/crios\//i.test(s)}function eT(s=Sn()){return/iemobile/i.test(s)}function tT(s=Sn()){return/android/i.test(s)}function nT(s=Sn()){return/blackberry/i.test(s)}function sT(s=Sn()){return/webos/i.test(s)}function z0(s=Sn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function ok(s=Sn()){var e;return z0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function ck(){return gC()&&document.documentMode===10}function rT(s=Sn()){return z0(s)||tT(s)||sT(s)||nT(s)||/windows phone/i.test(s)||eT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(s,e=[]){let n;switch(s){case"Browser":n=sw(Sn());break;case"Worker":n=`${sw(Sn())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((h,g)=>{try{const x=e(u);h(x)}catch(x){g(x)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(s,e={}){return xa(s,"GET","/v2/passwordPolicy",pi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=6;class fk{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rw(this),this.idTokenSubscription=new rw(this),this.beforeStateQueue=new uk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ra(n)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hd(this,{idToken:e}),a=await Vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Hn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,x=await this.tryRedirectSignIn(e);(!h||h===g)&&(x!=null&&x.user)&&(a=x.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(h){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(la(this));const n=e?ut(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(la(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(la(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hk(this),n=new fk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await lk(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ra(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[ra(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const x=e.addObserver(n,a,o);return()=>{h=!0,x()}}else{const x=e.addObserver(n);return()=>{h=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&GI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function dl(s){return ut(s)}class rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=NC(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gk(s){Sf=s}function iT(s){return Sf.loadJS(s)}function pk(){return Sf.recaptchaEnterpriseScript}function xk(){return Sf.gapiScript}function yk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class bk{constructor(){this.enterprise=new vk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _k="recaptcha-enterprise",lT="NO_RECAPTCHA";class wk{constructor(e){this.type=_k,this.auth=dl(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{tk(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new ek(x);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,h(p.siteKey)}}).catch(x=>{g(x)})})}function o(u,h,g){const x=window.grecaptcha;ew(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(p=>{h(p)}).catch(()=>{h(lT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bk().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{a(this.auth).then(g=>{if(!n&&ew(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let x=pk();x.length!==0&&(x+=g),iT(x).then(()=>{o(g,u,h)}).catch(p=>{h(p)})}}).catch(g=>{h(g)})})}}async function aw(s,e,n,a=!1,o=!1){const u=new wk(s);let h;if(o)h=lT;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const x=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const x=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Dp(s,e,n,a,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await aw(s,e,n,n==="getOobCode");return a(s,h)}else return a(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await aw(s,e,n,n==="getOobCode");return a(s,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(s,e){const n=xu(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(si(u,e??{}))return o;Us(o,"already-initialized")}return n.initialize({options:e})}function Nk(s,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(ra);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function cT(s,e,n){const a=dl(s);De(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=uT(e),{host:h,port:g}=Tk(e),x=g===null?"":`:${g}`,p={url:`${u}//${h}${x}/`},b=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){De(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),De(si(p,a.config.emulator)&&si(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,Ir(h)?(rf(`${u}//${h}${x}`),af("Auth",!0)):Ek()}function uT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Tk(s){const e=uT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:iw(a.substr(u.length+1))}}else{const[u,h]=a.split(":");return{host:u,port:iw(h)}}}function iw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Ek(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,n){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}async function jk(s,e){return xa(s,"POST","/v1/accounts:update",e)}async function Sk(s,e){return xa(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(s,e){return Cu(s,"POST","/v1/accounts:signInWithPassword",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(s,e){return Cu(s,"POST","/v1/accounts:signInWithEmailLink",pi(s,e))}async function Rk(s,e){return Cu(s,"POST","/v1/accounts:signInWithEmailLink",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Af{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new To(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new To(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dp(e,n,"signInWithPassword",Ak);case"emailLink":return Ck(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dp(e,a,"signUpPassword",Sk);case"emailLink":return Rk(e,{idToken:n,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(s,e){return Cu(s,"POST","/v1/accounts:signInWithIdp",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="http://localhost";class hi extends Af{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const h=new hi(a,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,uo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:Ik,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dk(s){const e=Uc(zc(s)).link,n=e?Uc(zc(e)).deep_link_id:null,a=Uc(zc(s)).deep_link_id;return(a?Uc(zc(a)).link:null)||a||n||e||s}class Cf{constructor(e){const n=Uc(zc(e)),a=n.apiKey??null,o=n.oobCode??null,u=kk(n.mode??null);De(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Dk(e);try{return new Cf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.providerId=xi.PROVIDER_ID}static credential(e,n){return To._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Cf.parseLink(n);return De(a,"argument-error"),To._fromEmailAndCode(e,a.code,a.tenantId)}}xi.PROVIDER_ID="password";xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends hT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Ru{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ea.credential(n,a)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Ru{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Ru{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return na.credential(n,a)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(s,e){return Cu(s,"POST","/v1/accounts:signUp",pi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Vs._fromIdTokenResponse(e,a,o),h=lw(a);return new nl({user:u,providerId:h,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=lw(a);return new nl({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function lw(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Bs{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new qd(e,n,a,o)}}function dT(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(s,u,e,a):u})}async function Mk(s,e,n=!1){const a=await No(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return nl._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(s,e,n=!1){const{auth:a}=s;if(Hn(a.app))return Promise.reject(la(a));const o="reauthenticate";try{const u=await No(s,dT(a,o,e,s),n);De(u.idToken,a,"internal-error");const h=U0(u.idToken);De(h,a,"internal-error");const{sub:g}=h;return De(s.uid===g,a,"user-mismatch"),nl._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Us(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(s,e,n=!1){if(Hn(s.app))return Promise.reject(la(s));const a="signIn",o=await dT(s,a,e),u=await nl._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(u.user),u}async function gT(s,e){return mT(dl(s),e)}async function pT(s,e){return fT(ut(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(s){const e=dl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yT(s,e,n){if(Hn(s.app))return Promise.reject(la(s));const a=dl(s),h=await Dp(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ok).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&xT(s),x}),g=await nl._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function bT(s,e,n){return Hn(s.app)?Promise.reject(la(s)):gT(ut(s),xi.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&xT(s),a})}function vT(s,e){return Vk(ut(s),null,e)}async function Vk(s,e,n){const{auth:a}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const h=await No(s,jk(a,u));await s._updateTokensIfNecessary(h,!0)}function _T(s,e,n,a){return ut(s).onIdTokenChanged(e,n,a)}function wT(s,e,n){return ut(s).beforeAuthStateChanged(e,n)}function NT(s,e,n,a){return ut(s).onAuthStateChanged(e,n,a)}function TT(s){return ut(s).signOut()}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=1e3,Lk=10;class jT extends ET{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,x)=>{this.notifyListeners(h,x)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(a);!n&&this.localCache[a]===h||this.notifyListeners(a,h)},u=this.storage.getItem(a);ck()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Lk):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jT.type="LOCAL";const ST=jT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends ET{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AT.type="SESSION";const B0=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Rf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(h).map(async p=>p(n.origin,u)),x=await Uk(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:x})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,x)=>{const p=H0("",20);o.port1.start();const b=setTimeout(()=>{x(new Error("unsupported_event"))},a);h={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(T.data.response);break;default:clearTimeout(b),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function Bk(s){Nr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function Hk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fk(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function qk(){return CT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="firebaseLocalStorageDb",Gk=1,Kd="firebaseLocalStorage",IT="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function If(s,e){return s.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function Kk(){const s=indexedDB.deleteDatabase(RT);return new Iu(s).toPromise()}function Op(){const s=indexedDB.open(RT,Gk);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Kd,{keyPath:IT})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Kd)?e(a):(a.close(),await Kk(),e(await Op()))})})}async function ow(s,e,n){const a=If(s,!0).put({[IT]:e,value:n});return new Iu(a).toPromise()}async function $k(s,e){const n=If(s,!1).get(e),a=await new Iu(n).toPromise();return a===void 0?null:a.value}function cw(s,e){const n=If(s,!0).delete(e);return new Iu(n).toPromise()}const Qk=800,Yk=3;class kT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>Yk)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(qk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await Hk(),!this.activeServiceWorker)return;this.sender=new zk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await ow(e,Gd,"1"),await cw(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>ow(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>$k(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=If(o,!1).getAll();return new Iu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kT.type="LOCAL";const DT=kT;new Au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(s,e){return e?ra(e):(De(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends Af{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Wk(s){return mT(s.auth,new F0(s),s.bypassAuthState)}function Jk(s){const{auth:e,user:n}=s;return De(n,e,"internal-error"),fT(n,new F0(s),s.bypassAuthState)}async function Zk(s){const{auth:e,user:n}=s;return De(n,e,"internal-error"),Mk(n,new F0(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const x={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(x))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wk;case"linkViaPopup":case"linkViaRedirect":return Zk;case"reauthViaPopup":case"reauthViaRedirect":return Jk;default:Us(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new Au(2e3,1e4);class io extends OT{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=H0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e6.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="pendingRedirect",Nd=new Map;class n6 extends OT{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const a=await s6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s6(s,e){const n=i6(e),a=a6(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function r6(s,e){Nd.set(s._key(),e)}function a6(s){return ra(s._redirectPersistence)}function i6(s){return wd(t6,s.config.apiKey,s.name)}async function l6(s,e,n=!1){if(Hn(s.app))return Promise.reject(la(s));const a=dl(s),o=Xk(a,e),h=await new n6(a,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=600*1e3;class c6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!MT(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(wr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o6&&this.cachedEventUids.clear(),this.cachedEventUids.has(uw(e))}saveEventToCache(e){this.cachedEventUids.add(uw(e)),this.lastProcessedEventTime=Date.now()}}function uw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function MT({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function u6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(s,e={}){return xa(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f6=/^https?/;async function m6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await h6(s);for(const n of e)try{if(g6(n))return}catch{}Us(s,"unauthorized-domain")}function g6(s){const e=Rp(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===a}if(!f6.test(n))return!1;if(d6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new Au(3e4,6e4);function hw(){const s=Nr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function x6(s){return new Promise((e,n)=>{var o,u,h;function a(){hw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hw(),n(wr(s,"network-request-failed"))},timeout:p6.get()})}if((u=(o=Nr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=Nr().gapi)!=null&&h.load)a();else{const g=yk("iframefcb");return Nr()[g]=()=>{gapi.load?a():n(wr(s,"network-request-failed"))},iT(`${xk()}?onload=${g}`).catch(x=>n(x))}}).catch(e=>{throw Td=null,e})}let Td=null;function y6(s){return Td=Td||x6(s),Td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new Au(5e3,15e3),v6="__/auth/iframe",_6="emulator/auth/iframe",w6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T6(s){const e=s.config;De(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?L0(e,_6):`https://${s.config.authDomain}/${v6}`,a={apiKey:e.apiKey,appName:s.name,v:ll},o=N6.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${pu(a).slice(1)}`}async function E6(s){const e=await y6(s),n=Nr().gapi;return De(n,s,"internal-error"),e.open({where:document.body,url:T6(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w6,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const h=wr(s,"network-request-failed"),g=Nr().setTimeout(()=>{u(h)},b6.get());function x(){Nr().clearTimeout(g),o(a)}a.ping(x).then(x,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S6=500,A6=600,C6="_blank",R6="http://localhost";class dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I6(s,e,n,a=S6,o=A6){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const x={...j6,width:a.toString(),height:o.toString(),top:u,left:h},p=Sn().toLowerCase();n&&(g=ZN(p)?C6:n),WN(p)&&(e=e||R6,x.scrollbars="yes");const b=Object.entries(x).reduce((T,[R,B])=>`${T}${R}=${B},`,"");if(ok(p)&&g!=="_self")return k6(e||"",g),new dw(null);const w=window.open(e||"",g,b);De(w,s,"popup-blocked");try{w.focus()}catch{}return new dw(w)}function k6(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="__/auth/handler",O6="emulator/auth/handler",M6=encodeURIComponent("fac");async function fw(s,e,n,a,o,u){De(s.config.authDomain,s,"auth-domain-config-required"),De(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:ll,eventId:o};if(e instanceof hT){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",wC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof Ru){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const x=await s._getAppCheckToken(),p=x?`#${M6}=${encodeURIComponent(x)}`:"";return`${V6(s)}?${pu(g).slice(1)}${p}`}function V6({config:s}){return s.emulator?L0(s,O6):`https://${s.authDomain}/${D6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="webStorageSupport";class P6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B0,this._completeRedirectFn=l6,this._overrideRedirectResult=r6}async _openPopup(e,n,a,o){var h;pa((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await fw(e,n,a,Rp(),o);return I6(e,u,H0())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await fw(e,n,a,Rp(),o);return Bk(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(pa(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await E6(e),a=new c6(e);return n.register("authEvent",o=>(De(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wg,{type:Wg},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Wg];u!==void 0&&n(!!u),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rT()||JN()||z0()}}const VT=P6;var mw="@firebase/auth",gw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z6(s){ri(new da("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;De(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aT(s)},p=new mk(a,o,u,x);return Nk(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),ri(new da("auth-internal",e=>{const n=dl(e.getProvider("auth").getImmediate());return(a=>new L6(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(mw,gw,U6(s)),bs(mw,gw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=300,H6=s1("authIdTokenMaxAge")||B6;let pw=null;const F6=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>H6)return;const o=n==null?void 0:n.token;pw!==o&&(pw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hu(s=lf()){const e=xu(s,"auth");if(e.isInitialized())return e.getImmediate();const n=oT(s,{popupRedirectResolver:VT,persistence:[DT,ST,B0]}),a=s1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const h=F6(u.toString());wT(n,h,()=>h(n.currentUser)),_T(n,g=>h(g))}}const o=t1("auth");return o&&cT(n,`http://${o}`),n}function q6(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}gk({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=wr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",q6().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z6("Browser");const G6=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Cf,AuthCredential:Af,EmailAuthCredential:To,EmailAuthProvider:xi,FacebookAuthProvider:Zr,GithubAuthProvider:ta,GoogleAuthProvider:ea,OAuthCredential:hi,TwitterAuthProvider:na,beforeAuthStateChanged:wT,browserLocalPersistence:ST,browserPopupRedirectResolver:VT,browserSessionPersistence:B0,connectAuthEmulator:cT,createUserWithEmailAndPassword:yT,getAuth:hu,getIdTokenResult:$N,inMemoryPersistence:kp,indexedDBLocalPersistence:DT,initializeAuth:oT,onAuthStateChanged:NT,onIdTokenChanged:_T,prodErrorMap:BN,reauthenticateWithCredential:pT,reload:QN,signInWithCredential:gT,signInWithEmailAndPassword:bT,signOut:TT,updatePassword:vT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="type.googleapis.com/google.protobuf.Int64Value",$6="type.googleapis.com/google.protobuf.UInt64Value";function PT(s,e){const n={};for(const a in s)s.hasOwnProperty(a)&&(n[a]=e(s[a]));return n}function $d(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>$d(e));if(typeof s=="function"||typeof s=="object")return PT(s,e=>$d(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Eo(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case K6:case $6:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Eo(e)):typeof s=="function"||typeof s=="object"?PT(s,e=>Eo(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class In extends Bs{constructor(e,n,a){super(`${q0}/${e}`,n||""),this.details=a,Object.setPrototypeOf(this,In.prototype)}}function Q6(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Qd(s,e){let n=Q6(s),a=n,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!xw[h])return new In("internal","internal");n=xw[h],a=h}const g=u.message;typeof g=="string"&&(a=g),o=u.details,o!==void 0&&(o=Eo(o))}}catch{}return n==="ok"?null:new In(n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o==null||o.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="us-central1",X6=/^data: (.*?)(?:\n|$)/;function W6(s){let e=null;return{promise:new Promise((n,a)=>{e=setTimeout(()=>{a(new In("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class J6{constructor(e,n,a,o,u=Mp,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Y6(e,n,a,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Mp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Z6(s,e,n){const a=Ir(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${n}`,a&&(rf(s.emulatorOrigin+"/backends"),af("Functions",!0))}function e3(s,e,n){const a=o=>n3(s,e,o,n||{});return a.stream=(o,u)=>r3(s,e,o,u),a}function LT(s){return s.emulatorOrigin&&Ir(s.emulatorOrigin)?"include":void 0}async function t3(s,e,n,a,o){n["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(e),headers:n,credentials:LT(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function UT(s,e){const n={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(n.Authorization="Bearer "+a.authToken),a.messagingToken&&(n["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=a.appCheckToken),n}function n3(s,e,n,a){const o=s._url(e);return s3(s,o,n,a)}async function s3(s,e,n,a){n=$d(n);const o={data:n},u=await UT(s,a),h=a.timeout||7e4,g=W6(h),x=await Promise.race([t3(e,o,u,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!x)throw new In("cancelled","Firebase Functions instance was deleted.");const p=Qd(x.status,x.json);if(p)throw p;if(!x.json)throw new In("internal","Response is not valid JSON object.");let b=x.json.data;if(typeof b>"u"&&(b=x.json.result),typeof b>"u")throw new In("internal","Response is missing data field.");return{data:Eo(b)}}function r3(s,e,n,a){const o=s._url(e);return a3(s,o,n,a||{})}async function a3(s,e,n,a){var T;n=$d(n);const o={data:n},u=await UT(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:a==null?void 0:a.signal,credentials:LT(s)})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const H=new In("cancelled","Request was cancelled.");return{data:Promise.reject(H),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(H)}}}}}}const B=Qd(0,null);return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}let g,x;const p=new Promise((R,B)=>{g=R,x=B});(T=a==null?void 0:a.signal)==null||T.addEventListener("abort",()=>{const R=new In("cancelled","Request was cancelled.");x(R)});const b=h.body.getReader(),w=i3(b,g,x,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const R=w.getReader();return{async next(){const{value:B,done:H}=await R.read();return{value:B,done:H}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:p}}function i3(s,e,n,a){const o=(h,g)=>{const x=h.match(X6);if(!x)return;const p=x[1];try{const b=JSON.parse(p);if("result"in b){e(Eo(b.result));return}if("message"in b){g.enqueue(Eo(b.message));return}if("error"in b){const w=Qd(0,b);g.error(w),n(w);return}}catch(b){if(b instanceof In){g.error(b),n(b);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return x();async function x(){if(a!=null&&a.aborted){const p=new In("cancelled","Request was cancelled");return h.error(p),n(p),Promise.resolve()}try{const{value:p,done:b}=await s.read();if(b){g.trim()&&o(g.trim(),h),h.close();return}if(a!=null&&a.aborted){const T=new In("cancelled","Request was cancelled");h.error(T),n(T),await s.cancel();return}g+=u.decode(p,{stream:!0});const w=g.split(`
`);g=w.pop()||"";for(const T of w)T.trim()&&o(T.trim(),h);return x()}catch(p){const b=p instanceof In?p:Qd(0,null);h.error(b),n(b)}}},cancel(){return s.cancel()}})}const yw="@firebase/functions",bw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="auth-internal",o3="app-check-internal",c3="messaging-internal";function u3(s){const e=(n,{instanceIdentifier:a})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(l3),h=n.getProvider(c3),g=n.getProvider(o3);return new J6(o,u,h,g,a)};ri(new da(q0,e,"PUBLIC").setMultipleInstances(!0)),bs(yw,bw,s),bs(yw,bw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(s=lf(),e=Mp){const a=xu(ut(s),q0).getImmediate({identifier:e}),o=Qp("functions");return o&&BT(a,...o),a}function BT(s,e,n){Z6(ut(s),e,n)}function h3(s,e,n){return e3(ut(s),e,n)}u3();const HT=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:In,connectFunctionsEmulator:BT,getFunctions:zT,httpsCallable:h3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="firebasestorage.googleapis.com",qT="storageBucket",d3=120*1e3,f3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt extends Bs{constructor(e,n,a=0){super(Jg(e),`Firebase Storage: ${n} (${Jg(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pt||(Pt={}));function Jg(s){return"storage/"+s}function G0(){const s="An unknown error occurred, please check the error payload for server response.";return new Lt(Pt.UNKNOWN,s)}function m3(s){return new Lt(Pt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function g3(s){return new Lt(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function p3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Lt(Pt.UNAUTHENTICATED,s)}function x3(){return new Lt(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function y3(s){return new Lt(Pt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function b3(){return new Lt(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v3(){return new Lt(Pt.CANCELED,"User canceled the upload/download.")}function _3(s){return new Lt(Pt.INVALID_URL,"Invalid URL '"+s+"'.")}function w3(s){return new Lt(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function N3(){return new Lt(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qT+"' property when initializing the app?")}function T3(){return new Lt(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function E3(){return new Lt(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function j3(s){return new Lt(Pt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vp(s){return new Lt(Pt.INVALID_ARGUMENT,s)}function GT(){return new Lt(Pt.APP_DELETED,"The Firebase app was deleted.")}function S3(s){return new Lt(Pt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eu(s,e){return new Lt(Pt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Lc(s){throw new Lt(Pt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=ts.makeFromUrl(e,n)}catch{return new ts(e,"")}if(a.path==="")return a;throw w3(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+o+h,"i"),x={bucket:1,path:3};function p(Y){Y.path_=decodeURIComponent(Y.path)}const b="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${w}/${b}/b/${o}/o${T}`,"i"),B={bucket:1,path:3},H=n===FT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",J=new RegExp(`^https?://${H}/${o}/${U}`,"i"),q=[{regex:g,indices:x,postModify:u},{regex:R,indices:B,postModify:p},{regex:J,indices:{bucket:1,path:2},postModify:p}];for(let Y=0;Y<q.length;Y++){const de=q[Y],pe=de.regex.exec(e);if(pe){const j=pe[de.indices.bucket];let N=pe[de.indices.path];N||(N=""),a=new ts(j,N),de.postModify(a);break}}if(a==null)throw _3(e);return a}}class A3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(s,e,n){let a=1,o=null,u=null,h=!1,g=0;function x(){return g===2}let p=!1;function b(...U){p||(p=!0,e.apply(null,U))}function w(U){o=setTimeout(()=>{o=null,s(R,x())},U)}function T(){u&&clearTimeout(u)}function R(U,...J){if(p){T();return}if(U){T(),b.call(null,U,...J);return}if(x()||h){T(),b.call(null,U,...J);return}a<64&&(a*=2);let q;g===1?(g=2,q=0):q=(a+Math.random())*1e3,w(q)}let B=!1;function H(U){B||(B=!0,T(),!p&&(o!==null?(U||(g=2),clearTimeout(o),w(0)):U||(g=1)))}return w(0),u=setTimeout(()=>{h=!0,H(!0)},n),H}function R3(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(s){return s!==void 0}function k3(s){return typeof s=="object"&&!Array.isArray(s)}function K0(s){return typeof s=="string"||s instanceof String}function vw(s){return $0()&&s instanceof Blob}function $0(){return typeof Blob<"u"}function _w(s,e,n,a){if(a<e)throw Vp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw Vp(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function KT(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ji;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Ji||(Ji={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,a,o,u,h,g,x,p,b,w,T=!0,R=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=x,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,H)=>{this.resolve_=B,this.reject_=H,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new cd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=g=>{const x=g.loaded,p=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,p)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const g=u.getErrorCode()===Ji.NO_ERROR,x=u.getStatus();if(!g||D3(x,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Ji.ABORT;a(!1,new cd(!1,null,b));return}const p=this.successCodes_.indexOf(x)!==-1;a(!0,new cd(p,u))})},n=(a,o)=>{const u=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const x=this.callback_(g,g.getResponse());I3(x)?u(x):u()}catch(x){h(x)}else if(g!==null){const x=G0();x.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,x)):h(x)}else if(o.canceled){const x=this.appDelete_?GT():v3();h(x)}else{const x=b3();h(x)}};this.canceled_?n(!1,new cd(!1,null,!0)):this.backoffId_=C3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cd{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function M3(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function V3(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P3(s,e){e&&(s["X-Firebase-GMPID"]=e)}function L3(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function U3(s,e,n,a,o,u,h=!0,g=!1){const x=KT(s.urlParams),p=s.url+x,b=Object.assign({},s.headers);return P3(b,e),M3(b,n),V3(b,u),L3(b,a),new O3(p,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function B3(...s){const e=z3();if(e!==void 0){const n=new e;for(let a=0;a<s.length;a++)n.append(s[a]);return n.getBlob()}else{if($0())return new Blob(s);throw new Lt(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function H3(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(s){if(typeof atob>"u")throw j3("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zg{constructor(e,n){this.data=e,this.contentType=n||null}}function q3(s,e){switch(s){case gr.RAW:return new Zg($T(e));case gr.BASE64:case gr.BASE64URL:return new Zg(QT(s,e));case gr.DATA_URL:return new Zg(K3(e),$3(e))}throw G0()}function $T(s){const e=[];for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=a,h=s.charCodeAt(++n);a=65536|(u&1023)<<10|h&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function G3(s){let e;try{e=decodeURIComponent(s)}catch{throw eu(gr.DATA_URL,"Malformed data URL.")}return $T(e)}function QT(s,e){switch(s){case gr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw eu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw eu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=F3(e)}catch(o){throw o.message.includes("polyfill")?o:eu(s,"Invalid character found")}const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}class YT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw eu(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=Q3(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function K3(s){const e=new YT(s);return e.base64?QT(gr.BASE64,e.rest):G3(e.rest)}function $3(s){return new YT(s).contentType}function Q3(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){let a=0,o="";vw(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(vw(this.data_)){const a=this.data_,o=H3(a,e,n);return o===null?null:new Xa(o)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new Xa(a,!0)}}static getBlob(...e){if($0()){const n=e.map(a=>a instanceof Xa?a.data_:a);return new Xa(B3.apply(null,n))}else{const n=e.map(h=>K0(h)?q3(gr.RAW,h).data:h.data_);let a=0;n.forEach(h=>{a+=h.byteLength});const o=new Uint8Array(a);let u=0;return n.forEach(h=>{for(let g=0;g<h.length;g++)o[u++]=h[g]}),new Xa(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(s){let e;try{e=JSON.parse(s)}catch{return null}return k3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function X3(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function WT(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(s,e){return e}class Rn{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||W3}}let ud=null;function J3(s){return!K0(s)||s.length<2?s:WT(s)}function JT(){if(ud)return ud;const s=[];s.push(new Rn("bucket")),s.push(new Rn("generation")),s.push(new Rn("metageneration")),s.push(new Rn("name","fullPath",!0));function e(u,h){return J3(h)}const n=new Rn("name");n.xform=e,s.push(n);function a(u,h){return h!==void 0?Number(h):h}const o=new Rn("size");return o.xform=a,s.push(o),s.push(new Rn("timeCreated")),s.push(new Rn("updated")),s.push(new Rn("md5Hash",null,!0)),s.push(new Rn("cacheControl",null,!0)),s.push(new Rn("contentDisposition",null,!0)),s.push(new Rn("contentEncoding",null,!0)),s.push(new Rn("contentLanguage",null,!0)),s.push(new Rn("contentType",null,!0)),s.push(new Rn("metadata","customMetadata",!0)),ud=s,ud}function Z3(s,e){function n(){const a=s.bucket,o=s.fullPath,u=new ts(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function eD(s,e,n){const a={};a.type="file";const o=n.length;for(let u=0;u<o;u++){const h=n[u];a[h.local]=h.xform(a,e[h.server])}return Z3(a,s),a}function ZT(s,e,n){const a=XT(e);return a===null?null:eD(s,a,n)}function tD(s,e,n,a){const o=XT(e);if(o===null||!K0(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(p=>{const b=s.bucket,w=s.fullPath,T="/b/"+h(b)+"/o/"+h(w),R=Q0(T,n,a),B=KT({alt:"media",token:p});return R+B})[0]}function nD(s,e){const n={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class e2{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(s){if(!s)throw G0()}function sD(s,e){function n(a,o){const u=ZT(s,o,e);return t2(u!==null),u}return n}function rD(s,e){function n(a,o){const u=ZT(s,o,e);return t2(u!==null),tD(u,o,s.host,s._protocol)}return n}function n2(s){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=x3():o=p3():n.getStatus()===402?o=g3(s.bucket):n.getStatus()===403?o=y3(s.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function aD(s){const e=n2(s);function n(a,o){let u=e(a,o);return a.getStatus()===404&&(u=m3(s.path)),u.serverResponse=o.serverResponse,u}return n}function iD(s,e,n){const a=e.fullServerUrl(),o=Q0(a,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,g=new e2(o,u,rD(s,n),h);return g.errorHandler=aD(e),g}function lD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function oD(s,e,n){const a=Object.assign({},n);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=lD(null,e)),a}function cD(s,e,n,a,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function g(){let q="";for(let Y=0;Y<2;Y++)q=q+Math.random().toString().slice(2);return q}const x=g();h["Content-Type"]="multipart/related; boundary="+x;const p=oD(e,a,o),b=nD(p,n),w="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+x+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+x+"--",R=Xa.getBlob(w,a,T);if(R===null)throw T3();const B={name:p.fullPath},H=Q0(u,s.host,s._protocol),U="POST",J=s.maxUploadRetryTime,ne=new e2(H,U,sD(s,n),J);return ne.urlParams=B,ne.headers=h,ne.body=R.uploadData(),ne.errorHandler=n2(e),ne}class uD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ji.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ji.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ji.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o,u){if(this.sent_)throw Lc("cannot .send() more than once");if(Ir(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hD extends uD{initXhr(){this.xhr_.responseType="text"}}function s2(){return new hD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this._service=e,n instanceof ts?this._location=n:this._location=ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sl(e,n)}get root(){const e=new ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WT(this._location.path)}get storage(){return this._service}get parent(){const e=Y3(this._location.path);if(e===null)return null;const n=new ts(this._location.bucket,e);return new sl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw S3(e)}}function dD(s,e,n){s._throwIfRoot("uploadBytes");const a=cD(s.storage,s._location,JT(),new Xa(e,!0),n);return s.storage.makeRequestWithTokens(a,s2).then(o=>({metadata:o,ref:s}))}function fD(s){s._throwIfRoot("getDownloadURL");const e=iD(s.storage,s._location,JT());return s.storage.makeRequestWithTokens(e,s2).then(n=>{if(n===null)throw E3();return n})}function mD(s,e){const n=X3(s._location.path,e),a=new ts(s._location.bucket,n);return new sl(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(s){return/^[A-Za-z]+:\/\//.test(s)}function pD(s,e){return new sl(s,e)}function r2(s,e){if(s instanceof Y0){const n=s;if(n._bucket==null)throw N3();const a=new sl(n,n._bucket);return e!=null?r2(a,e):a}else return e!==void 0?mD(s,e):s}function xD(s,e){if(e&&gD(e)){if(s instanceof Y0)return pD(s,e);throw Vp("To use ref(service, url), the first argument must be a Storage instance.")}else return r2(s,e)}function ww(s,e){const n=e==null?void 0:e[qT];return n==null?null:ts.makeFromBucketSpec(n,s)}function yD(s,e,n,a={}){s.host=`${e}:${n}`;const o=Ir(e);o&&(rf(`https://${s.host}/b`),af("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:r1(u,s.app.options.projectId))}class Y0{constructor(e,n,a,o,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=FT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d3,this._maxUploadRetryTime=f3,this._requests=new Set,o!=null?this._bucket=ts.makeFromBucketSpec(o,this._host):this._bucket=ww(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ts.makeFromBucketSpec(this._url,e):this._bucket=ww(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sl(this,e)}_makeRequest(e,n,a,o,u=!0){if(this._deleted)return new A3(GT());{const h=U3(e,this._appId,a,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const Nw="@firebase/storage",Tw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="storage";function oa(s,e,n){return s=ut(s),dD(s,e,n)}function ca(s){return s=ut(s),fD(s)}function ua(s,e){return s=ut(s),xD(s,e)}function bD(s=lf(),e){s=ut(s);const a=xu(s,a2).getImmediate({identifier:e}),o=Qp("storage");return o&&vD(a,...o),a}function vD(s,e,n,a={}){yD(s,e,n,a)}function _D(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Y0(n,a,o,e,ll)}function wD(){ri(new da(a2,_D,"PUBLIC").setMultipleInstances(!0)),bs(Nw,Tw,""),bs(Nw,Tw,"esm2020")}wD();const X0={apiKey:"AIzaSyAfqqFbf2AVCOOm8Trm57qTSpWoAk-Jbx4",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},kf=Wp(X0),Ne=kI(kf),Ed=hu(kf),ND=zT(kf),Tr=bD(kf),i2=Object.freeze(Object.defineProperty({__proto__:null,auth:Ed,db:Ne,firebaseConfig:X0,functions:ND,storage:Tr},Symbol.toStringTag,{value:"Module"})),l2=C.createContext(void 0),TD=({children:s})=>{const[e,n]=C.useState(null),[a,o]=C.useState(!0);C.useEffect(()=>{const g=NT(Ed,async x=>{if(x)try{const p=Qe(Ne,"users",x.uid),b=await _r(p);if(b.exists())n({id:b.id,...b.data()});else if(x.email){const w=mn(_t(Ne,"users"),_s("email","==",x.email)),T=await Sr(w);if(T.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),n(null);else{const R=T.docs[0].data();n({id:T.docs[0].id,...R})}}else n(null)}catch(p){console.error("Error fetching user data:",p),n(null)}else n(null);o(!1)});return()=>g()},[]);const u=async(g,x)=>{try{if(!x)throw new Error("Password is required for Firebase Auth");let p=g;if(!g.includes("@"))try{const{httpsCallable:b}=await $c(async()=>{const{httpsCallable:H}=await Promise.resolve().then(()=>HT);return{httpsCallable:H}},[]),{functions:w}=await $c(async()=>{const{functions:H}=await Promise.resolve().then(()=>i2);return{functions:H}},void 0);p=(await b(w,"getEmailByUsername")({username:g})).data.email}catch(b){console.error("Username lookup failed:",b);const w=mn(_t(Ne,"users"),_s("username","==",g)),T=await Sr(w);if(T.empty)return console.error("Username not found"),!1;const R=T.docs[0].data();R.email&&(p=R.email)}return await bT(Ed,p,x),!0}catch(p){return console.error("Login failed:",p),!1}},h=async()=>{try{await TT(Ed),n(null)}catch(g){console.error("Logout failed:",g)}};return l.jsx(l2.Provider,{value:{user:e,login:u,logout:h,isAuthenticated:!!e,loading:a},children:!a&&s})},ws=()=>{const s=C.useContext(l2);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},o2=C.createContext(void 0),ED=({toasts:s,removeToast:e})=>l.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:s.map(n=>l.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[l.jsxs("div",{className:"p-4 flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:l.jsx(Kc,{className:"h-4 w-4 text-green-600"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900",children:n.message}),n.subMessage&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.subMessage})]}),l.jsx("button",{onClick:()=>e(n.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(rn,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"h-1 w-full bg-gray-100",children:l.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),l.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},n.id))}),jD=s=>{const e=new Date(s),a=Math.floor((new Date().getTime()-e.getTime())/1e3);return a<60?"Va xong":a<3600?`${Math.floor(a/60)} pht trc`:a<86400?`${Math.floor(a/3600)} gi trc`:`${Math.floor(a/86400)} ngy trc`},SD=({children:s})=>{const{user:e}=ws(),[n,a]=C.useState([]),[o,u]=C.useState([]);C.useEffect(()=>{const w=setTimeout(()=>{h("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(w)},[]),C.useEffect(()=>{if(!e){u([]);return}const w=mn(_t(Ne,"notifications"),_s("receivers","array-contains",e.id),Do("createdAt","desc")),T=Ar(w,R=>{const B=R.docs.map(H=>{var J;const U=H.data();return{id:H.id,type:U.type,user:U.senderName,avatar:U.senderAvatar,content:U.message.replace(U.senderName,"").trim(),time:jD(U.createdAt),isRead:U.isRead,fileType:(J=U.metadata)==null?void 0:J.fileType,targetPath:U.targetPath}});u(B)});return()=>T()},[e]);const h=(w,T="",R="success")=>{const B=Date.now().toString();a(H=>[...H,{id:B,message:w,subMessage:T,type:R}]),setTimeout(()=>{a(H=>H.filter(U=>U.id!==B))},3e3)},g=w=>{a(T=>T.filter(R=>R.id!==w))},x=async w=>{u(T=>T.map(R=>R.id===w?{...R,isRead:!0}:R));try{const T=Qe(Ne,"notifications",w);await ss(T,{isRead:!0})}catch(T){console.error("Error marking notification as read:",T)}},p=async()=>{u(T=>T.map(R=>({...R,isRead:!0}))),o.filter(T=>!T.isRead).map(T=>T.id).forEach(async T=>{try{await ss(Qe(Ne,"notifications",T),{isRead:!0})}catch(R){console.error(R)}})},b=o.filter(w=>!w.isRead).length;return l.jsxs(o2.Provider,{value:{addToast:h,notifications:o,markAsRead:x,markAllAsRead:p,unreadCount:b},children:[s,l.jsx(ED,{toasts:n,removeToast:g})]})},kr=()=>{const s=C.useContext(o2);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},AD=({isOpen:s,onClose:e})=>{const[n,a]=C.useState(""),[o,u]=C.useState(""),[h,g]=C.useState(""),[x,p]=C.useState(!1),[b,w]=C.useState(!1),[T,R]=C.useState(!1),{addToast:B}=kr();if(!s)return null;const H=async U=>{if(U.preventDefault(),o!==h){B("Mt khu mi khng khp!","error");return}if(o.length<6){B("Mt khu mi phi c t nht 6 k t.","error");return}R(!0);try{const ne=hu().currentUser;if(ne&&ne.email){const q=xi.credential(ne.email,n);await pT(ne,q),await vT(ne,o),B("i mt khu thnh cng!","success"),e(),a(""),u(""),g("")}else B("Khng tm thy thng tin ngi dng.","error")}catch(J){console.error("Error changing password:",J),J.code==="auth/wrong-password"?B("Mt khu hin ti khng ng.","error"):J.code==="auth/too-many-requests"?B("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):B(`Li: ${J.message}`,"error")}finally{R(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(ho,{className:"h-5 w-5"}),"i mt khu"]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6",children:l.jsxs("form",{onSubmit:H,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:x?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:n,onChange:U=>a(U.target.value),placeholder:"Nhp mt khu hin ti..."}),l.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:x?l.jsx(rp,{className:"h-4 w-4"}):l.jsx(nu,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:b?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:U=>u(U.target.value),placeholder:"Nhp mt khu mi..."}),l.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:b?l.jsx(rp,{className:"h-4 w-4"}):l.jsx(nu,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),l.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:h,onChange:U=>g(U.target.value),placeholder:"Nhp li mt khu mi..."})]}),l.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsx("button",{type:"submit",disabled:T,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:T?l.jsxs(l.Fragment,{children:[l.jsx($p,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Zd,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},CD=()=>{const s=di(),e=zs(),{user:n,logout:a}=ws(),{notifications:o,unreadCount:u,markAllAsRead:h,markAsRead:g}=kr(),[x,p]=C.useState(!1),[b,w]=C.useState(!1),[T,R]=C.useState(!1),[B,H]=C.useState(""),[U,J]=C.useState(""),ne=C.useRef(null),q=C.useRef(null);if(C.useEffect(()=>{const N=A=>{ne.current&&!ne.current.contains(A.target)&&p(!1),q.current&&!q.current.contains(A.target)&&w(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]),C.useEffect(()=>{(async()=>{try{const A=Qe(Ne,"app_settings","system_logo"),P=await _r(A);P.exists()&&P.data().imageUrl&&H(P.data().imageUrl);const O=Qe(Ne,"app_settings","certification_logo"),D=await _r(O);D.exists()&&D.data().imageUrl&&J(D.data().imageUrl)}catch(A){console.error("Error fetching logo:",A)}})()},[]),s.pathname==="/login")return null;const Y=async()=>{await a(),e("/login")},de=N=>N?N.charAt(0).toUpperCase():"U",pe=N=>{switch(N){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},j=N=>{switch(N){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return l.jsxs("header",{className:`sticky top-0 z-50 w-full ${j(n==null?void 0:n.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-20",children:[l.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[l.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:B?l.jsx("img",{src:B,alt:"Logo",className:"h-8 w-8 object-contain"}):l.jsx(Kp,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:Ww}),l.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),U&&l.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:l.jsx("img",{src:U,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[l.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[l.jsx(il,{className:"h-5 w-5 text-white/70"}),l.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),l.jsxs("div",{className:"relative",ref:q,children:[l.jsxs("button",{onClick:()=>w(!b),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${u>0?"animate-wiggle":""}`,children:[l.jsx(Mv,{className:`h-6 w-6 ${b?"text-white":""} group-hover:scale-110 transition-transform`}),u>0&&l.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:u})]}),b&&l.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[l.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),u>0&&l.jsxs("button",{onClick:h,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[l.jsx(Kc,{className:"h-3 w-3"})," nh du  c"]})]}),l.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[o.map(N=>l.jsxs("div",{onClick:()=>{g(N.id),N.targetPath&&(e(N.targetPath),w(!1))},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${N.isRead?"bg-white":"bg-blue-50/40"}`,children:[l.jsxs("div",{className:"flex-shrink-0 pt-1",children:[N.avatar?l.jsx("img",{src:N.avatar,alt:N.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):l.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${N.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:de(N.user)}),l.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[N.type==="upload"&&l.jsx(qe,{className:"h-3 w-3 text-emerald-500"}),N.type==="comment"&&l.jsx(Wa,{className:"h-3 w-3 text-blue-500"})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[l.jsx("span",{className:"font-bold",children:N.user})," ",N.content]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-400 font-medium",children:N.time}),N.fileType&&l.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:N.fileType}),!N.isRead&&l.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},N.id)),o.length===0&&l.jsxs("div",{className:"p-8 text-center text-gray-400",children:[l.jsx(Mv,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),l.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),l.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:l.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),l.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:ne,children:[l.jsxs("button",{onClick:()=>p(!x),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${x?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[l.jsxs("div",{className:"relative",children:[n!=null&&n.avatar?l.jsx("img",{src:n.avatar,alt:n.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):l.jsx("div",{className:`h-9 w-9 rounded-full ${pe(n==null?void 0:n.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:n?de(n.fullName):l.jsx($S,{className:"h-6 w-6"})}),l.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),n?l.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[l.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:n.fullName}),l.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:n.roleLabel})]}):l.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:l.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),l.jsx(BS,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${x?"rotate-180":""}`})]}),x&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[l.jsx("p",{className:"text-sm font-bold text-gray-900",children:(n==null?void 0:n.fullName)||"Khch"}),l.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.roleLabel})]}),l.jsxs("div",{className:"p-1.5",children:[l.jsxs("button",{onClick:()=>p(!1),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:l.jsx(ao,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),l.jsxs("button",{onClick:()=>{p(!1),R(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:l.jsx(VA,{className:"h-4 w-4"})}),"i mt khu"]})]}),l.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),l.jsx("div",{className:"p-1.5",children:l.jsxs("button",{onClick:Y,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[l.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:l.jsx(bA,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),l.jsx(AD,{isOpen:T,onClose:()=>R(!1)})]})},RD=({data:s,onClick:e})=>{const{id:n,title:a,description:o,icon:u,colorClass:h,bgClass:g,hoverClass:x,stats:p}=s;return l.jsxs("div",{onClick:()=>e(n),className:`
        group relative overflow-hidden rounded-2xl border border-gray-100 bg-white p-8 shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-2 hover:shadow-xl
        ${x}
      `,children:[l.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${g} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),l.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:`mb-6 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${g} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:l.jsx(u,{className:`h-8 w-8 ${h}`})}),l.jsx("h3",{className:"mb-3 text-2xl font-bold text-gray-800 group-hover:text-gray-900 tracking-tight",children:a}),l.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:o})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[p&&l.jsx("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all",children:p}),l.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",l.jsx(Sd,{className:"h-4 w-4"})]})]})]})]})},ID=()=>{var h;const s=zs(),{user:e,isAuthenticated:n}=ws(),[a,o]=fr.useState([]);if(C.useEffect(()=>{const g=mn(_t(Ne,"classes")),x=Ar(g,async p=>{const b=p.docs.map(U=>({id:U.id,...U.data()})),w=mn(_t(Ne,"users"),_s("role","in",["teacher","head_teacher"])),R=(await Sr(w)).docs.map(U=>U.data()),B=U=>U.toLowerCase().trim().replace(/\s+/g," "),H=b.map(U=>{const J=new Set,ne=B(U.id),q=B(U.name);R.forEach(de=>{if(!de.accessScope)return;const pe=B(de.accessScope);(pe===ne||pe===q||q.includes(pe)||pe.includes(q))&&J.add(de.fullName)});const Y=Array.from(J);return{...U,teachers:Y.length>0?Y:["Cha phn cng"],teacher:Y.length>0?Y.join(", "):"Cha phn cng"}});H.sort((U,J)=>U.name.localeCompare(J.name)),o(H)});return()=>x()},[]),C.useEffect(()=>{n||s("/login")},[n,s]),!e)return null;const u=g=>{var x;if(g==="van-ban-chi-dao")s("/van-ban-chi-dao");else if(g==="van-ban-truong")s("/van-ban-truong");else if(g==="quan-tri-he-thong")s("/quan-tri-he-thong");else if(g==="to-van-phong-ke-hoach")s("/to-van-phong-ke-hoach");else if(g==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}s("/to-van-phong-thuc-don")}else if(g==="to-chuyen-mon-ke-hoach")s("/to-chuyen-mon-ke-hoach");else if(g.startsWith("class-")){const p=g.replace("class-","");if(e.role==="teacher"){const b=a.find(T=>T.id===p),w=(x=e.accessScope)==null?void 0:x.toLowerCase().trim();if(b&&w!==p.toLowerCase()&&w!==b.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}s(`/class/${p}`)}else console.log(`Navigating to category: ${g}`),alert(`ang truy cp vo phn h: ${g} (ang pht trin)`)};return l.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 pt-8 pb-8 mb-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Qw,{className:"h-5 w-5 text-yellow-500"}),l.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),l.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["Xin cho c: ",e.fullName]}),l.jsxs("p",{className:"text-gray-500 mt-1",children:["Vai tr: ",l.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",l.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 xl:gap-8",children:[l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),l.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(iA,{className:"h-7 w-7"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors",children:"QUN L VN BN CHUNG"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),l.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 mt-2",children:[l.jsxs("div",{onClick:()=>s("/van-ban-chi-dao"),className:"bg-white p-6 cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:l.jsx(fA,{className:"h-6 w-6"})}),l.jsx(Sd,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),l.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-blue-700",children:"Vn bn Cp trn"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"S/B GD"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"UBND"})]})]}),l.jsxs("div",{onClick:()=>s("/van-ban-truong"),className:"bg-white p-6 cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:l.jsx(Xw,{className:"h-6 w-6"})}),l.jsx(Sd,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),l.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-emerald-700",children:"Vn bn Ni b"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"K hoch"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Quyt nh"}),l.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),l.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(sp,{className:"h-7 w-7"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors",children:"T VN PHNG"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row border-t border-indigo-50 mt-4",children:[l.jsxs("div",{onClick:()=>u("to-van-phong-ke-hoach"),className:"flex-1 p-6 cursor-pointer hover:bg-indigo-50/60 transition-colors border-b sm:border-b-0 sm:border-r border-indigo-50 group/item",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg shadow-sm",children:l.jsx(qe,{className:"h-5 w-5"})})}),l.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-indigo-700",children:"K HOCH & BO CO"}),l.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"K hoch ti chnh, Y t, Hot ng chung"})]}),l.jsxs("div",{onClick:()=>u("to-van-phong-thuc-don"),className:"flex-1 p-6 cursor-pointer hover:bg-purple-50/60 transition-colors group/item",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:l.jsx(ap,{className:"h-5 w-5"})})}),l.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-purple-700",children:"THC N & BN TR"}),l.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col",children:[l.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),l.jsxs("div",{className:"p-8 pb-2 relative z-10",children:[l.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:l.jsx(Kp,{className:"h-8 w-8"})}),l.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors",children:"T CHUYN MN"}),l.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),l.jsx("div",{className:"px-6 pb-4 relative z-10",children:l.jsxs("div",{onClick:()=>u("to-chuyen-mon-ke-hoach"),className:"flex items-center justify-between p-3 rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg text-amber-600 shadow-sm",children:l.jsx(DS,{className:"h-5 w-5"})}),l.jsx("div",{children:l.jsx("h4",{className:"text-sm font-bold text-gray-800 group-hover/plan:text-amber-700",children:"K hoch T & Bin bn"})})]}),l.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50/50 border-t border-amber-100 p-6 pt-4",children:[l.jsx("div",{className:"mb-4",children:l.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-3",children:"LP HC CA TI"})}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.map(g=>{var x;if(e.role==="teacher"){const p=(x=e.accessScope)==null?void 0:x.toLowerCase().trim(),b=g.id.toLowerCase(),w=g.name.toLowerCase();if(p!==b&&p!==w)return null}return l.jsxs("button",{onClick:()=>u(`class-${g.id}`),className:"relative group/btn flex flex-col items-center justify-center py-2 px-1 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all",children:[l.jsx("span",{className:"text-xs font-bold text-gray-700 group-hover/btn:text-amber-800",children:g.name}),g.newFiles>0&&l.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},g.id)})})]})]}),(e.role==="admin"||e.role==="vice_principal"&&((h=e.permissions)==null?void 0:h.includes("access_system_admin")))&&XA.map(g=>l.jsx(RD,{data:g,onClick:u},g.id))]})})]})},kD=s=>{try{const e=new URL(s),n=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>n.endsWith(o))}catch{const n=s.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>n.endsWith(o))}},Oo=s=>!s||s==="#"?"#":s.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":kD(s)?`https://docs.google.com/viewer?url=${encodeURIComponent(s)}&embedded=true`:s,ep=({children:s,colorClass:e})=>l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),DD=()=>{var me;const s=zs(),{addToast:e}=kr(),[n,a]=C.useState([]),[o,u]=C.useState(""),[h,g]=C.useState("Tt c"),{user:x}=ws(),p=(me=x==null?void 0:x.permissions)==null?void 0:me.includes("manage_documents"),[b,w]=C.useState(null),[T,R]=C.useState(!1),[B,H]=C.useState(!1),[U,J]=C.useState(!1),[ne,q]=C.useState(!1),[Y,de]=C.useState(null),[pe,j]=C.useState(1),[N,A]=C.useState({}),[P,O]=C.useState(null),[D,I]=C.useState("");fr.useEffect(()=>{const M=mn(_t(Ne,"directive_documents"),Do("ngayBanHanh","desc")),k=Ar(M,Z=>{const he=[];Z.forEach(W=>{he.push({id:W.id,...W.data()})}),a(he)});return()=>k()},[]);const Ce=C.useMemo(()=>n.filter(M=>{const k=M.trichYeu.toLowerCase().includes(o.toLowerCase())||M.soKyHieu.toLowerCase().includes(o.toLowerCase()),Z=h==="Tt c"||M.coQuanBanHanh===h;return k&&Z}),[n,o,h]),Ve=M=>{de(M),q(!0)},te=async()=>{if(Y){try{await ul(Qe(Ne,"directive_documents",Y.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(M){console.error("Error deleting document:",M),e("Li xa ti liu","Khng th xa ti liu ny.","error")}q(!1),de(null)}},ie=M=>{w(M),j(1),R(!0)},ye=()=>{A({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),O(null),I(""),J(!1),H(!0)},Re=M=>{A({...M}),J(!0),O(null),I(M.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),H(!0)},Me=M=>{if(M.target.files&&M.target.files[0]){const k=M.target.files[0];O(k),I(k.name)}},L=M=>{M.fileDinhKemUrl&&M.fileDinhKemUrl!=="#"?window.open(M.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},re=()=>{O(null),I("")},ge=async M=>{if(M.preventDefault(),!(!N.trichYeu||!N.soKyHieu))try{let k=N.fileDinhKemUrl||"#";if(P){const Z=ua(Tr,`directive_documents/${Date.now()}_${P.name}`),he=await oa(Z,P);k=await ca(he.ref)}else!D&&!N.fileDinhKemUrl&&(k="#");U&&N.id?(await ss(Qe(Ne,"directive_documents",N.id),{...N,fileDinhKemUrl:k}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await hl(_t(Ne,"directive_documents"),{...N,fileDinhKemUrl:k,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),H(!1)}catch(k){console.error("Error saving document:",k),e("Li lu d liu","Khng th lu vn bn ny.","error")}},Q=M=>{switch(M){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[l.jsx(qp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(qe,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CH O"})]})]}),p&&l.jsxs("button",{onClick:ye,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[l.jsx(fo,{className:"h-5 w-5"}),l.jsx("span",{children:"Thm vn bn mi"})]})]}),l.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(M=>l.jsx("button",{onClick:()=>g(M),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${h===M?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:M},M))}),l.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:l.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(il,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:M=>u(M.target.value)})]})})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.length>0?Ce.map(M=>l.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>ie(M),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:l.jsx(qe,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:M.trichYeu}),M.tomTatNoiDung&&l.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:M.tomTatNoiDung})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:M.soKyHieu}),l.jsx(ep,{colorClass:"bg-yellow-100 text-yellow-800",children:M.loaiVanBan})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Gc,{className:"h-3 w-3"}),l.jsx("span",{className:Q(M.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:M.coQuanBanHanh})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Zi,{className:"h-3 w-3"}),new Date(M.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:k=>k.stopPropagation(),children:[l.jsx("button",{onClick:()=>ie(M),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:l.jsx(nu,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>L(M),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-4 w-4"})}),p&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Re(M),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:l.jsx(mo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Ve(M),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:l.jsx(pr,{className:"h-4 w-4"})})]})]})})]},M.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(qe,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("span",{children:["Hin th ",Ce.length," vn bn"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),ne&&Y&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Y.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),T&&b&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(qe,{className:"h-5 w-5"})," Chi tit vn bn"]}),l.jsx("button",{onClick:()=>R(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:l.jsx(rn,{className:"h-6 w-6"})})]}),"   ",l.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[l.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[l.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:b.trichYeu}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.jsx(ep,{colorClass:"bg-blue-100 text-blue-800",children:b.coQuanBanHanh}),l.jsx(ep,{colorClass:"bg-yellow-100 text-yellow-800",children:b.loaiVanBan}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[l.jsx(Zi,{className:"h-3 w-3"})," ",new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),l.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:b.soKyHieu})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),l.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Gc,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),l.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:b.coQuanBanHanh})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:b.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),l.jsxs("button",{onClick:()=>L(b),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[l.jsx(ns,{className:"h-4 w-4"})," Ti v my"]})]})]}),l.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[l.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[l.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),l.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>j(M=>Math.max(.5,M-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:l.jsx(nf,{className:"h-4 w-4"})}),l.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(pe*100),"%"]}),l.jsx("button",{onClick:()=>j(M=>Math.min(2,M+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:l.jsx(tf,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),l.jsx("button",{onClick:()=>j(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:l.jsx(Yw,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:l.jsx("div",{className:"absolute inset-0 w-full h-full",children:b.fileDinhKemUrl&&b.fileDinhKemUrl!=="#"?l.jsx("iframe",{src:Oo(b.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[U?l.jsx(mo,{className:"h-5 w-5"}):l.jsx(fo,{className:"h-5 w-5"}),U?"Cp nht vn bn":"Thm vn bn mi"]}),l.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"documentForm",onSubmit:ge,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:N.trichYeu||"",onChange:M=>A({...N,trichYeu:M.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:N.soKyHieu||"",onChange:M=>A({...N,soKyHieu:M.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:N.ngayBanHanh||"",onChange:M=>A({...N,ngayBanHanh:M.target.value})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:N.coQuanBanHanh||"B GD&T",onChange:M=>A({...N,coQuanBanHanh:M.target.value}),children:[l.jsx("option",{value:"B GD&T",children:"B GD&T"}),l.jsx("option",{value:"S GD&T",children:"S GD&T"}),l.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),l.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:N.loaiVanBan||"Cng vn",onChange:M=>A({...N,loaiVanBan:M.target.value}),children:[l.jsx("option",{value:"Cng vn",children:"Cng vn"}),l.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),l.jsx("option",{value:"Thng bo",children:"Thng bo"}),l.jsx("option",{value:"K hoch",children:"K hoch"}),l.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),l.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:N.tomTatNoiDung||"",onChange:M=>A({...N,tomTatNoiDung:M.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),D?l.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:l.jsx(qe,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:D}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(mr,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),l.jsx("button",{type:"button",onClick:re,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:l.jsx(rn,{className:"h-5 w-5"})})]}):l.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Me}),l.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),l.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[l.jsx(fn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),l.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[l.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:l.jsx("span",{children:"Ti file ln"})}),l.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[l.jsx(Zd,{className:"h-4 w-4"})," ",U?"Lu thay i":"To mi"]})]})]})})]})},Ew=({children:s,colorClass:e})=>l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),OD=()=>{var me;const s=zs(),{addToast:e}=kr(),[n,a]=C.useState([]),[o,u]=C.useState(""),[h,g]=C.useState("Tt c"),{user:x}=ws(),p=(me=x==null?void 0:x.permissions)==null?void 0:me.includes("manage_documents"),[b,w]=C.useState(null),[T,R]=C.useState(!1),[B,H]=C.useState(!1),[U,J]=C.useState(!1),[ne,q]=C.useState(!1),[Y,de]=C.useState(null),[pe,j]=C.useState(1),[N,A]=C.useState({}),[P,O]=C.useState(null),[D,I]=C.useState("");fr.useEffect(()=>{const M=mn(_t(Ne,"school_documents"),Do("ngayBanHanh","desc")),k=Ar(M,Z=>{const he=[];Z.forEach(W=>{he.push({id:W.id,...W.data()})}),a(he)});return()=>k()},[]);const Ce=C.useMemo(()=>n.filter(M=>{const k=M.trichYeu.toLowerCase().includes(o.toLowerCase())||M.soKyHieu.toLowerCase().includes(o.toLowerCase()),Z=h==="Tt c"||M.loaiVanBan===h;return k&&Z}),[n,o,h]),Ve=M=>{de(M),q(!0)},te=async()=>{if(Y){try{await ul(Qe(Ne,"school_documents",Y.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(M){console.error("Error deleting document:",M),e("Li xa ti liu","Khng th xa ti liu ny.","error")}q(!1),de(null)}},ie=M=>{w(M),j(1),R(!0)},ye=()=>{A({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),O(null),I(""),J(!1),H(!0)},Re=M=>{A({...M}),J(!0),O(null),I(M.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),H(!0)},Me=M=>{if(M.target.files&&M.target.files[0]){const k=M.target.files[0];O(k),I(k.name)}},L=M=>{M.fileDinhKemUrl&&M.fileDinhKemUrl!=="#"?window.open(M.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},re=()=>{O(null),I("")},ge=async M=>{if(M.preventDefault(),!(!N.trichYeu||!N.soKyHieu))try{let k=N.fileDinhKemUrl||"#";if(P){const Z=ua(Tr,`school_documents/${Date.now()}_${P.name}`),he=await oa(Z,P);k=await ca(he.ref)}else!D&&!N.fileDinhKemUrl&&(k="#");U&&N.id?(await ss(Qe(Ne,"school_documents",N.id),{...N,fileDinhKemUrl:k}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await hl(_t(Ne,"school_documents"),{...N,fileDinhKemUrl:k,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),H(!1)}catch(k){console.error("Error saving document:",k),e("Li lu d liu","Khng th lu vn bn ny.","error")}},Q=M=>{switch(M){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[l.jsx(qp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(Gc,{className:"h-6 w-6 text-emerald-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CA TRNG"})]})]}),p&&l.jsxs("button",{onClick:ye,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[l.jsx(fo,{className:"h-5 w-5"}),l.jsx("span",{children:"Thm vn bn mi"})]})]}),l.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(M=>l.jsx("button",{onClick:()=>g(M),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${h===M?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:M},M))}),l.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:l.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(il,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:M=>u(M.target.value)})]})})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),l.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.length>0?Ce.map(M=>l.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>ie(M),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:l.jsx(qe,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:M.trichYeu}),M.tomTatNoiDung&&l.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:M.tomTatNoiDung})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:M.soKyHieu}),l.jsx(Ew,{colorClass:Q(M.loaiVanBan),children:M.loaiVanBan})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Gc,{className:"h-3 w-3"}),l.jsx("span",{children:M.coQuanBanHanh})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Zi,{className:"h-3 w-3"}),new Date(M.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:k=>k.stopPropagation(),children:[l.jsx("button",{onClick:()=>ie(M),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:l.jsx(nu,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>L(M),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-4 w-4"})}),p&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Re(M),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:l.jsx(mo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Ve(M),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:l.jsx(pr,{className:"h-4 w-4"})})]})]})})]},M.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(qe,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("span",{children:["Hin th ",Ce.length," vn bn"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),l.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),ne&&Y&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Y.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),T&&b&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[l.jsx(qe,{className:"h-5 w-5"})," Chi tit vn bn"]}),l.jsx("button",{onClick:()=>R(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[l.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[l.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:b.trichYeu}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.jsx(Ew,{colorClass:Q(b.loaiVanBan),children:b.loaiVanBan}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[l.jsx(Zi,{className:"h-3 w-3"})," ",new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),l.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:b.soKyHieu})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),l.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Gc,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),l.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:b.coQuanBanHanh})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:b.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),l.jsxs("button",{onClick:()=>L(b),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[l.jsx(ns,{className:"h-4 w-4"})," Ti v my"]})]})]}),l.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[l.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[l.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),l.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>j(M=>Math.max(.5,M-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:l.jsx(nf,{className:"h-4 w-4"})}),l.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(pe*100),"%"]}),l.jsx("button",{onClick:()=>j(M=>Math.min(2,M+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:l.jsx(tf,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),l.jsx("button",{onClick:()=>j(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:l.jsx(Yw,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:l.jsx("div",{className:"absolute inset-0 w-full h-full",children:b.fileDinhKemUrl&&b.fileDinhKemUrl!=="#"?l.jsx("iframe",{src:Oo(b.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[U?l.jsx(mo,{className:"h-5 w-5"}):l.jsx(fo,{className:"h-5 w-5"}),U?"Cp nht vn bn":"Thm vn bn mi"]}),l.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"documentForm",onSubmit:ge,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:N.trichYeu||"",onChange:M=>A({...N,trichYeu:M.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:N.soKyHieu||"",onChange:M=>A({...N,soKyHieu:M.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:N.ngayBanHanh||"",onChange:M=>A({...N,ngayBanHanh:M.target.value})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:N.coQuanBanHanh||"Ban Gim Hiu",onChange:M=>A({...N,coQuanBanHanh:M.target.value}),children:[l.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),l.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),l.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),l.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),l.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:N.loaiVanBan||"K hoch",onChange:M=>A({...N,loaiVanBan:M.target.value}),children:[l.jsx("option",{value:"K hoch",children:"K hoch"}),l.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),l.jsx("option",{value:"Thng bo",children:"Thng bo"}),l.jsx("option",{value:"Bo co",children:"Bo co"}),l.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),l.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:N.tomTatNoiDung||"",onChange:M=>A({...N,tomTatNoiDung:M.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),D?l.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:l.jsx(qe,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:D}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(mr,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),l.jsx("button",{type:"button",onClick:re,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:l.jsx(rn,{className:"h-5 w-5"})})]}):l.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Me}),l.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),l.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[l.jsx(fn,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),l.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[l.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:l.jsx("span",{children:"Ti file ln"})}),l.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[l.jsx(Zd,{className:"h-4 w-4"})," ",U?"Lu thay i":"To mi"]})]})]})})]})},MD=()=>{const{user:s}=ws(),{addToast:e}=kr(),[n,a]=C.useState(""),[o,u]=C.useState(""),[h,g]=C.useState(null),[x,p]=C.useState(!1),[b,w]=C.useState(""),[T,R]=C.useState(""),[B,H]=C.useState(null),[U,J]=C.useState(!1),[ne,q]=C.useState("/login-background.jpg"),[Y,de]=C.useState(""),[pe,j]=C.useState(null),[N,A]=C.useState(!1),[P,O]=C.useState(!0),[D,I]=C.useState(!1),[Ce,Ve]=C.useState(null),te=async()=>{if(s){I(!0),Ve(null);try{let M=0,k=0;const Z=await Sr(_t(Ne,"plans")),he=J_(Ne);Z.forEach(ke=>{const Ge=ke.data();if(!Ge.approval||!Ge.approval.status){const ht=Qe(Ne,"plans",ke.id);he.update(ht,{approval:{status:"pending"},uploaderRole:Ge.uploaderRole||"teacher"}),M++}}),M>0&&await he.commit();const W=await Sr(_t(Ne,"class_files")),_e=J_(Ne);W.forEach(ke=>{const Ge=ke.data();if(!Ge.approval||!Ge.approval.status){const ht=Qe(Ne,"class_files",ke.id);_e.update(ht,{approval:{status:"pending"},uploaderRole:Ge.uploaderRole||"teacher"}),k++}}),k>0&&await _e.commit(),Ve({plans:M,classFiles:k}),M>0||k>0?e("Migration hon thnh!",` cp nht ${M} k hoch v ${k} h s lp.`,"success"):e("Khng c g  cp nht","Tt c ti liu  c trng thi duyt.","success")}catch(M){console.error("Migration error:",M),e("Li Migration","Khng th cp nht d liu. Xem console  bit chi tit.","error")}finally{I(!1)}}};C.useEffect(()=>{(async()=>{try{const k=Qe(Ne,"app_settings","login_background"),Z=await _r(k);Z.exists()&&Z.data().imageUrl&&q(Z.data().imageUrl);const he=Qe(Ne,"app_settings","system_logo"),W=await _r(he);W.exists()&&W.data().imageUrl&&a(W.data().imageUrl);const _e=Qe(Ne,"app_settings","certification_logo"),ke=await _r(_e);ke.exists()&&ke.data().imageUrl&&w(ke.data().imageUrl)}catch(k){console.error("Error fetching settings:",k)}finally{O(!1)}})()},[]);const ie=M=>{if(M.target.files&&M.target.files[0]){const k=M.target.files[0];if(!k.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(k.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}g(k),u(URL.createObjectURL(k))}},ye=async()=>{if(!(!h||!s)){p(!0);try{const M=Date.now(),k=ua(Tr,`app_settings/system-logo-${M}.png`);await oa(k,h);const Z=await ca(k);await vd(Qe(Ne,"app_settings","system_logo"),{imageUrl:Z,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),a(Z),u(""),g(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(M){console.error("Error uploading logo:",M),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{p(!1)}}},Re=()=>{u(""),g(null)},Me=M=>{if(M.target.files&&M.target.files[0]){const k=M.target.files[0];if(!k.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(k.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}H(k),R(URL.createObjectURL(k))}},L=async()=>{if(!(!B||!s)){J(!0);try{const M=Date.now(),k=ua(Tr,`app_settings/cert-logo-${M}.png`);await oa(k,B);const Z=await ca(k);await vd(Qe(Ne,"app_settings","certification_logo"),{imageUrl:Z,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),w(Z),R(""),H(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(M){console.error("Error uploading cert logo:",M),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{J(!1)}}},re=()=>{R(""),H(null)},ge=M=>{if(M.target.files&&M.target.files[0]){const k=M.target.files[0];if(!k.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(k.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}j(k),de(URL.createObjectURL(k))}},Q=async()=>{if(!(!pe||!s)){A(!0);try{const M=Date.now(),k=ua(Tr,`app_settings/login-background-${M}.jpg`);await oa(k,pe);const Z=await ca(k);await vd(Qe(Ne,"app_settings","login_background"),{imageUrl:Z,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),q(Z),de(""),j(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(M){console.error("Error uploading:",M),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{A(!1)}}},me=()=>{de(""),j(null)};return P?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-amber-600 rounded-lg",children:l.jsx(Vv,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Migration: Thm Trng Thi Duyt"}),l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Cp nht cc ti liu c (K hoch T CM v H s Lp) vi trng thi "Ch duyt"  kch hot chc nng ph duyt mi.',l.jsx("br",{}),l.jsx("span",{className:"text-amber-700 font-medium",children:"Lu : Ch cn chy mt ln. Cc ti liu  c trng thi s khng b nh hng."})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:te,disabled:D,className:"flex items-center gap-2 px-6 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:D?l.jsxs(l.Fragment,{children:[l.jsx($p,{className:"h-4 w-4 animate-spin"}),"ang x l..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Vv,{className:"h-4 w-4"}),"Chy Migration"]})}),Ce&&l.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:["  cp nht: ",l.jsx("span",{className:"font-bold",children:Ce.plans})," k hoch, ",l.jsx("span",{className:"font-bold",children:Ce.classFiles})," h s lp"]})]})]})]})})}),l.jsx("hr",{className:"border-gray-200"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:l.jsx(Pg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Kc,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),l.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:n?l.jsx("img",{src:n,alt:"Current Logo",className:"h-32 w-32 object-contain"}):l.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(fn,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsx("input",{type:"file",accept:"image/*",onChange:ie,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),o&&l.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:l.jsx("img",{src:o,alt:"Preview",className:"h-24 w-24 object-contain"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ye,disabled:!h||x,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:x?"ang ti...":"Lu Logo"}),o&&l.jsx("button",{onClick:Re,disabled:x,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),l.jsx("hr",{className:"border-gray-200"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:l.jsx(Pg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Kc,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),l.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:b?l.jsx("img",{src:b,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):l.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(fn,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsx("input",{type:"file",accept:"image/*",onChange:Me,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),T&&l.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:l.jsx("img",{src:T,alt:"Preview",className:"h-24 w-24 object-contain"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:L,disabled:!B||U,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:U?"ang ti...":"Lu Logo"}),T&&l.jsx("button",{onClick:re,disabled:U,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),l.jsx("hr",{className:"border-gray-200"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:l.jsx(Pg,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(Kc,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:l.jsx("img",{src:ne,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[l.jsx(fn,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),l.jsx("input",{type:"file",accept:"image/*",onChange:ge,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),l.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Ps,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),Y&&l.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),l.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:l.jsx("img",{src:Y,alt:"Preview",className:"w-full h-64 object-contain"})})]}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{onClick:Q,disabled:!pe||N,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:N?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):l.jsxs(l.Fragment,{children:[l.jsx(fn,{className:"h-4 w-4"}),"Lu v p dng"]})}),Y&&l.jsxs("button",{onClick:me,disabled:N,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[l.jsx(CA,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Ps,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-sm text-amber-800",children:[l.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[l.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),l.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),l.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),l.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},VD=()=>{var re,ge,Q,me,M;const s=zs(),{user:e}=ws(),{addToast:n}=kr(),[a,o]=C.useState("users"),[u,h]=fr.useState([]),[g,x]=fr.useState({}),[p,b]=fr.useState({});fr.useEffect(()=>{var k;e&&(e.role==="admin"||(k=e.permissions)!=null&&k.includes("access_system_admin")||(n("Bn khng c quyn truy cp khu vc ny.","error"),s("/")))},[e,s,n]);const[w,T]=C.useState([]),[R,B]=C.useState(""),[H,U]=C.useState("Tt c"),[J,ne]=C.useState(!1),[q,Y]=C.useState(!1),[de,pe]=C.useState(!1),[j,N]=C.useState({}),[A,P]=C.useState(""),[O,D]=C.useState(!1);fr.useEffect(()=>{const k=mn(_t(Ne,"classes")),Z=Ar(k,he=>{const W=he.docs.map(Ge=>({id:Ge.id,...Ge.data()}));W.sort((Ge,ht)=>Ge.name.localeCompare(ht.name)),h(W);const _e={},ke={};W.forEach(Ge=>{_e[Ge.name]=Ge.id,ke[Ge.id]=Ge.name}),x(_e),b(ke)});return()=>Z()},[]),fr.useEffect(()=>{const k=mn(_t(Ne,"users")),Z=Ar(k,he=>{const W=[];he.forEach(_e=>{W.push({id:_e.id,..._e.data()})}),T(W)});return()=>Z()},[]);const I=C.useMemo(()=>w.filter(k=>{const Z=k.fullName.toLowerCase().includes(R.toLowerCase())||k.username.toLowerCase().includes(R.toLowerCase())||k.email.toLowerCase().includes(R.toLowerCase()),he=H==="Tt c"||k.group===H;return Z&&he}),[w,R,H]),Ce=async k=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await ul(Qe(Ne,"users",k))}catch(Z){console.error("Error deleting user:",Z),n("Khng th xa ngi dng. Vui lng th li.","error")}},Ve=()=>{N({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:u.length>0?u[0].id:"choi",permissions:[]}),P(""),Y(!1),pe(!1),ne(!0)},te=k=>{N({...k}),Y(!0),pe(!1),P(""),ne(!0)},ie=k=>{const Z=k.target.value;let he="",W=j.group,_e="teacher";Z==="Hiu Trng"?(he="Ton h thng",W="Ban Gim Hiu",_e="admin"):Z==="Ph Hiu Trng"?(he="Ton trng",W="Ban Gim Hiu",_e="vice_principal"):Z==="T trng chuyn mn"?(he="Ton b T chuyn mn",W="T Chuyn Mn",_e="head_teacher"):Z==="T ph chuyn mn"?(he="Ton b T chuyn mn",W="T Chuyn Mn",_e="vice_head_teacher"):Z==="Gio vin"?(he=u.length>0?u[0].id:"choi",W="T Chuyn Mn",_e="teacher"):Z==="T trng t vn phng"?(he="Ton b T Vn phng",W="T Vn Phng",_e="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(Z)&&(he="Khng gian T Vn phng",W="T Vn Phng",_e="staff"),N({...j,role:_e,roleLabel:Z,accessScope:he,group:W,permissions:j.permissions||[]})},ye=async k=>{if(k.preventDefault(),!(!j.username||!j.fullName||!j.email)){D(!0);try{if(q&&j.id){const Z=Object.fromEntries(Object.entries(j).filter(([he,W])=>W!==void 0));if(await ss(Qe(Ne,"users",j.id),Z),de&&A)if(e&&j.id===e.id){const{updatePassword:he}=await $c(async()=>{const{updatePassword:_e}=await Promise.resolve().then(()=>G6);return{updatePassword:_e}},void 0),W=hu();W.currentUser&&(await he(W.currentUser,A),n(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:he}=await $c(async()=>{const{httpsCallable:ke}=await Promise.resolve().then(()=>HT);return{httpsCallable:ke}},void 0),{functions:W}=await $c(async()=>{const{functions:ke}=await Promise.resolve().then(()=>i2);return{functions:ke}},void 0),_e=he(W,"adminResetPassword");n("ang gi yu cu i mt khu...","info"),await _e({targetUserId:j.id,newPassword:A}),n(` i mt khu cho user ${j.username} thnh cng!`,"success")}catch(he){console.error("Error calling adminResetPassword:",he),n(`Li i mt khu: ${he.message}`,"error")}else n("Cp nht thng tin h s thnh cng!","success")}else{let Z="";try{const he=Wp(X0,"SecondaryApp"),W=hu(he);Z=(await yT(W,j.email,A)).user.uid,await NR(he)}catch(he){console.error("Auth creation error:",he),he.code==="auth/email-already-in-use"?n("Email ny  c s dng bi ti khon khc.","error"):n(`Li to ti khon Auth: ${he.message}`,"error"),D(!1);return}await vd(Qe(Ne,"users",Z),{...j,id:Z,createdAt:new Date().toISOString()}),n(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}ne(!1)}catch(Z){console.error("Error saving user:",Z),n("Li khi lu d liu.","error")}finally{D(!1)}}},Re=async k=>{const Z=w.find(he=>he.id===k);if(Z)try{const he=Z.status==="active"?"inactive":"active";await ss(Qe(Ne,"users",k),{status:he}),n(` ${he==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(he){console.error("Error updating status:",he),n("Khng th cp nht trng thi.","error")}},Me=k=>k.includes("Hiu Trng")||k.includes("Admin")?"bg-red-100 text-red-700 border-red-200":k.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":k.includes("T trng")||k.includes("T ph")||k.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",L=()=>{const k=j.role||"";return k==="admin"?l.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[l.jsx(ro,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[l.jsx(Ps,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):k==="vice_principal"?l.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[l.jsx(ro,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[l.jsx(Ps,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):k==="head_teacher"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx(Zl,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),l.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:j.accessScope||"",onChange:Z=>N({...j,accessScope:Z.target.value}),children:[l.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(Z=>l.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(mr,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):k==="vice_head_teacher"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx(Zl,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),l.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:j.accessScope||"",onChange:Z=>N({...j,accessScope:Z.target.value}),children:[l.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(Z=>l.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(mr,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):k==="teacher"?l.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[l.jsx(Xw,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),l.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:j.accessScope||"",onChange:Z=>N({...j,accessScope:Z.target.value}),children:u.map(Z=>l.jsx("option",{value:Z.id,children:Z.name},Z.id))})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),l.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):k==="office_head"?l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[l.jsx(Zl,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[l.jsx(mr,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):l.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[l.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[l.jsx(sp,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),l.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),l.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lg,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lg,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return l.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"bg-white border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[l.jsx(qp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:l.jsx(ro,{className:"h-6 w-6 text-slate-700"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),l.jsx("div",{className:"mt-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>o("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Zl,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),l.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(ro,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),a==="users"&&l.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[l.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(k=>l.jsx("button",{onClick:()=>U(k),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${H===k?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:k},k))}),l.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[l.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(il,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:R,onChange:k=>B(k.target.value)})]}),l.jsxs("button",{onClick:Ve,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[l.jsx(fo,{className:"h-5 w-5"}),l.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="users"?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),l.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),l.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.length>0?I.map(k=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:l.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:l.jsx(ao,{className:"h-6 w-6"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.fullName}),l.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(ao,{className:"h-3 w-3"})," ",k.username]}),l.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(_A,{className:"h-3 w-3"})," ",k.email]})]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[l.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${Me(k.roleLabel)}`,children:k.roleLabel}),l.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Zl,{className:"h-3 w-3"})," ",k.group]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[l.jsx(sp,{className:"h-4 w-4 text-gray-400"}),p[k.accessScope]||k.accessScope]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("button",{onClick:()=>Re(k.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${k.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:k.status==="active"?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):l.jsxs(l.Fragment,{children:[l.jsx(Jr,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:l.jsxs("div",{className:"flex justify-center items-center gap-2",children:[l.jsx("button",{onClick:()=>te(k),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:l.jsx(mo,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Ce(k.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:l.jsx(pr,{className:"h-4 w-4"})})]})})]},k.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(ao,{className:"h-12 w-12 text-gray-300 mb-3"}),l.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),l.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:l.jsxs("span",{children:["Tng s ",I.length," ngi dng"]})})]})}):l.jsx(MD,{})}),J&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[l.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[q?l.jsx(mo,{className:"h-5 w-5"}):l.jsx(fo,{className:"h-5 w-5"}),q?"Cp nht thng tin":"To ti khon mi"]}),l.jsx("button",{onClick:()=>ne(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsxs("form",{id:"userForm",onSubmit:ye,className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[l.jsx(ao,{className:"h-4 w-4"})," Thng tin ti khon"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,disabled:q,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${q?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:j.username||"",onChange:k=>N({...j,username:k.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:j.email||"",onChange:k=>N({...j,email:k.target.value})})]})]}),q?l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),l.jsx("button",{type:"button",onClick:()=>pe(!de),className:"text-xs text-blue-600 hover:underline font-medium",children:de?"Hy i mt khu":"Reset mt khu"})]}),de&&l.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[l.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:A,onChange:k=>P(k.target.value)}),l.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):l.jsxs("div",{className:"mt-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"password",required:!q,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:A,onChange:k=>P(k.target.value)}),l.jsx(ho,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:j.fullName||"",onChange:k=>N({...j,fullName:k.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:j.group||"T Chuyn Mn",onChange:k=>N({...j,group:k.target.value}),children:[l.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),l.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),l.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),l.jsx("option",{value:"Khc",children:"Khc"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:j.roleLabel||"Gio vin",onChange:ie,children:[l.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),l.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),l.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),l.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),l.jsx("option",{value:"Gio vin",children:"Gio vin"}),l.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),l.jsx("option",{value:"K ton",children:"K ton"}),l.jsx("option",{value:"Vn th",children:"Vn th"}),l.jsx("option",{value:"Y t",children:"Y t"}),l.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),L(),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[l.jsx(Lg,{className:"h-4 w-4"})," Quyn hn b sung"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((re=j.permissions)==null?void 0:re.includes("manage_documents"))||!1,onChange:k=>{const Z=j.permissions||[];k.target.checked?N({...j,permissions:[...Z,"manage_documents"]}):N({...j,permissions:Z.filter(he=>he!=="manage_documents")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),l.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((ge=j.permissions)==null?void 0:ge.includes("manage_office_docs"))||!1,onChange:k=>{const Z=j.permissions||[];k.target.checked?N({...j,permissions:[...Z,"manage_office_docs"]}):N({...j,permissions:Z.filter(he=>he!=="manage_office_docs")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),l.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((Q=j.permissions)==null?void 0:Q.includes("manage_boarding_docs"))||!1,onChange:k=>{const Z=j.permissions||[];k.target.checked?N({...j,permissions:[...Z,"manage_boarding_docs"]}):N({...j,permissions:Z.filter(he=>he!=="manage_boarding_docs")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),l.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((me=j.permissions)==null?void 0:me.includes("manage_plans"))||!1,onChange:k=>{const Z=j.permissions||[];k.target.checked?N({...j,permissions:[...Z,"manage_plans"]}):N({...j,permissions:Z.filter(he=>he!=="manage_plans")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),l.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:"relative flex items-center",children:l.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((M=j.permissions)==null?void 0:M.includes("access_system_admin"))||!1,onChange:k=>{const Z=j.permissions||[];k.target.checked?N({...j,permissions:[...Z,"access_system_admin"]}):N({...j,permissions:Z.filter(he=>he!=="access_system_admin")})}})}),l.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),l.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsx("button",{type:"submit",form:"userForm",disabled:O,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:O?l.jsxs(l.Fragment,{children:[l.jsx($p,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Zd,{className:"h-4 w-4"})," ",q?"Lu thay i":"To ti khon"]})})]})]})})]})},PD=async()=>{const s=mn(_t(Ne,"users"),_s("role","==","admin"));return(await Sr(s)).docs.map(n=>n.id)},LD=async()=>{const s=mn(_t(Ne,"users"),_s("role","==","head_teacher"));return(await Sr(s)).docs.map(n=>n.id)},UD=async s=>{const e=mn(_t(Ne,"users"),_s("role","==","teacher"),_s("group","==",s));return(await Sr(e)).docs.map(a=>a.id)},zD=async s=>{const e=mn(_t(Ne,"users"),_s("role","==","teacher"),_s("accessScope","==",s));return(await Sr(e)).docs.map(a=>a.id)},rl=async(s,e,n)=>{var a,o;try{let u=[];const h=await PD();if(n.type==="office"){if(s==="upload"&&e.role==="staff"&&(u=[...h]),s==="comment"){const x=(a=n.extraInfo)==null?void 0:a.uploaderId;x&&u.push(x),u=[...u,...h]}}else if(n.type==="class"){const x=(o=n.extraInfo)==null?void 0:o.classId;if(s==="upload"&&e.role==="teacher"){const p=await LD();u=[...h,...p]}else s==="comment"&&(e.role==="admin"||e.role==="head_teacher")&&x&&(u=[...await zD(x)])}else if(n.type==="group"){if(s==="upload"&&e.role==="head_teacher"){const x=e.group;if(x){const p=await UD(x);u=[...h,...p]}else u=[...h]}}else n.type==="boarding"&&e.role==="staff"&&(u=[...h]);if(u=u.filter(x=>x!==e.id),u=[...new Set(u)],u.length===0){console.log("No receivers for this notification. Skipping.");return}const g={senderId:e.id,senderName:e.name||e.role,senderAvatar:e.avatar||"",targetPath:n.targetPath,message:`${s==="upload"?" ti ln":" gp  vo"} ${n.name||"ti liu"}`,type:s,isRead:!1,createdAt:new Date().toISOString(),receivers:u,metadata:{fileName:n.name}};await hl(_t(Ne,"notifications"),g),console.log(`Notification sent to ${u.length} users.`)}catch(u){console.error("Error creating notification:",u)}},BD=s=>{switch(s){case"excel":return l.jsx($w,{className:"h-6 w-6 text-green-600"});case"word":return l.jsx(qe,{className:"h-6 w-6 text-blue-600"});case"pdf":return l.jsx(Gp,{className:"h-6 w-6 text-red-600"});default:return l.jsx(qe,{className:"h-6 w-6 text-gray-500"})}},HD=()=>{var me,M;const s=zs(),{user:e}=ws(),{addToast:n}=kr(),[a,o]=C.useState([]),[u,h]=C.useState("all"),[g,x]=C.useState(""),[p,b]=C.useState(null),[w,T]=C.useState(!1),[R,B]=C.useState(""),[H,U]=C.useState(!1),J=C.useRef(null),[ne,q]=C.useState(!1),[Y,de]=C.useState(null),[pe,j]=C.useState({name:"",category:"general",note:""}),[N,A]=C.useState(!1),[P,O]=C.useState(null),D=e,I=C.useMemo(()=>p?a.find(k=>k.id===p.id)||p:null,[a,p]);C.useEffect(()=>{const k=mn(_t(Ne,"office_docs"),Do("uploadDate","desc")),Z=Ar(k,he=>{const W=[];he.forEach(_e=>{const ke=_e.data();W.push({id:_e.id,...ke,comments:ke.comments||[]})}),o(W)});return()=>Z()},[]);const Ce=a.filter(k=>{const Z=u==="all"||k.category===u,he=k.name.toLowerCase().includes(g.toLowerCase())||k.uploader.name.toLowerCase().includes(g.toLowerCase());return Z&&he});C.useEffect(()=>{var k;w&&((k=J.current)==null||k.scrollIntoView({behavior:"smooth"}))},[I==null?void 0:I.comments,w]);const Ve=k=>{b(k),T(!0)},te=(k,Z)=>{Z.stopPropagation(),O(k),A(!0)},ie=async()=>{if(P)try{await ul(Qe(Ne,"office_docs",P.id)),n(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),A(!1),O(null),(p==null?void 0:p.id)===P.id&&(T(!1),b(null))}catch(k){console.error("Error deleting document: ",k),n("Li","Khng th xa h s.","error")}},ye=async k=>{if(k.preventDefault(),!R.trim()||!I||!D)return;const Z={id:Date.now().toString(),userId:D.id,userName:D.fullName,userRole:D.role,content:R,timestamp:new Date().toISOString()};try{const he=Qe(Ne,"office_docs",I.id);await ss(he,{comments:V0(Z)}),B(""),n(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),D&&await rl("comment",D,{type:"office",name:I.name,targetPath:"/office-documents",extraInfo:{uploaderId:I.uploader.id}})}catch(he){console.error("Error adding comment: ",he),n("Li","Khng th gi bnh lun.","error")}},Re=k=>{switch(k){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},Me=()=>{j({name:"",category:u==="all"?"general":u,note:""}),de(null),q(!0)},L=k=>{if(k.preventDefault(),k.dataTransfer.files&&k.dataTransfer.files[0]){const Z=k.dataTransfer.files[0];de(Z),pe.name||j(he=>({...he,name:Z.name.split(".")[0]}))}},re=k=>{if(k.target.files&&k.target.files[0]){const Z=k.target.files[0];de(Z),pe.name||j(he=>({...he,name:Z.name.split(".")[0]}))}},ge=async()=>{if(Y)try{let k="#";const Z=ua(Tr,`office_docs/${Date.now()}_${Y.name}`);await oa(Z,Y),k=await ca(Z);const he={...pe,uploader:{id:(D==null?void 0:D.id)||"unknown",name:(D==null?void 0:D.fullName)||"n danh",avatar:(D==null?void 0:D.avatar)||"",role:(D==null?void 0:D.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),comments:[],type:Y.name.split(".").pop()||"file",fileType:Y.name.split(".").pop()||"file",fileUrl:k};await hl(_t(Ne,"office_docs"),he),n("Ti ln thnh cng!",` lu h s: ${pe.name}`,"success"),q(!1)}catch(k){console.error("Error adding document: ",k),n("Li","Khng th ti ln h s.","error")}},Q=(k=!1)=>{if(!I)return null;const Z=I.fileUrl;if(Z&&Z!=="#"){const he=Oo(Z);return he==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(qe,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:Z,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(ns,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:he,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[l.jsx("div",{className:"bg-white border-b border-teal-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[l.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{children:"T Vn phng"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-teal-100 rounded-lg text-teal-700",children:l.jsx(qe,{className:"h-6 w-6"})}),"Kho K hoch & Bo co"]}),(((me=e==null?void 0:e.permissions)==null?void 0:me.includes("manage_documents"))||((M=e==null?void 0:e.permissions)==null?void 0:M.includes("manage_office_docs")))&&l.jsxs("button",{onClick:Me,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-md transition-colors font-medium",children:[l.jsx(fn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[l.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),l.jsxs("nav",{className:"space-y-1",children:[l.jsxs("button",{onClick:()=>h("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${u==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),l.jsxs("button",{onClick:()=>h("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(RS,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),l.jsxs("button",{onClick:()=>h("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(BA,{className:"h-4 w-4"}),"Y t & Bn tr"]}),l.jsxs("button",{onClick:()=>h("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${u==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(qe,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[l.jsxs("div",{className:"mb-6 flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 max-w-md shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:[l.jsx(il,{className:"h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:g,onChange:k=>x(k.target.value)})]}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.map(k=>l.jsxs("tr",{onClick:()=>Ve(k),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:BD(k.type)}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:k.name}),l.jsx("div",{className:"text-xs text-gray-500",children:Re(k.category)})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:k.uploader.name.charAt(0)}),l.jsxs("div",{className:"ml-3",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.uploader.name}),l.jsx("div",{className:"text-xs text-gray-500",children:k.uploader.role})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(k.uploadDate).toLocaleDateString("vi-VN")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(k.comments||[]).length>0?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[l.jsx(Ad,{className:"w-3 h-3 mr-1"}),(k.comments||[]).length," Gp  mi"]}):l.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:Z=>Z.stopPropagation(),children:[l.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:l.jsx(ns,{className:"h-4 w-4"})}),l.jsx("button",{onClick:Z=>te(k,Z),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:l.jsx(pr,{className:"h-4 w-4"})})]})})]},k.id))})]})})]})]}),N&&P&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',P.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),w&&I&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>T(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:Re(I.category)}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:I.name})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:l.jsx(rn,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>U(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Jd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:Q(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:I.uploader.name})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(I.uploadDate).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Ad,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),l.jsxs("div",{className:"space-y-4 mb-4",children:[(I.comments||[]).length>0?(I.comments||[]).map(k=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:k.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:k.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:k.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800",children:k.content})]})]},k.id)):l.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),l.jsx("div",{ref:J})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("form",{onSubmit:ye,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:R,onChange:k=>B(k.target.value)}),l.jsx("button",{type:"submit",disabled:!R.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:l.jsx(ef,{className:"h-4 w-4"})})]})})]})]})]})]}),ne&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(fn,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),l.jsx("button",{onClick:()=>q(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:pe.name,onChange:k=>j({...pe,name:k.target.value})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:pe.category,onChange:k=>j({...pe,category:k.target.value}),children:[l.jsx("option",{value:"general",children:"Hnh chnh chung"}),l.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),l.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:L,onDragOver:k=>k.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Y?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:re}),Y?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(mr,{className:"h-10 w-10 text-teal-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:Y.name}),l.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(Y.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${pe.category==="finance"?"bg-green-100 text-green-600":pe.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:l.jsx(Wd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),l.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:pe.note,onChange:k=>j({...pe,note:k.target.value})})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:ge,disabled:!Y,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(fn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},FD=({type:s})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(s){case"excel":return l.jsx($w,{className:`${e} text-green-600`});case"pdf":return l.jsx(Gp,{className:`${e} text-red-500`});case"word":return l.jsx(qe,{className:`${e} text-blue-600`});default:return l.jsx(qe,{className:`${e} text-gray-400`})}},qD=()=>{const s=zs(),{user:e}=ws(),{addToast:n}=kr(),[a,o]=C.useState([]),[u,h]=C.useState("menu"),[g,x]=C.useState(""),[p,b]=C.useState(null),[w,T]=C.useState(!1),[R,B]=C.useState(""),H=C.useRef(null),[U,J]=C.useState(!1),[ne,q]=C.useState(null),[Y,de]=C.useState({type:"menu",startDate:"",endDate:"",name:""}),[pe,j]=C.useState(!1),[N,A]=C.useState(null),[P,O]=C.useState(!1),D=e;C.useEffect(()=>{const Q=mn(_t(Ne,"boarding_docs"),Do("uploadDate","desc")),me=Ar(Q,M=>{const k=[];M.forEach(Z=>{k.push({id:Z.id,...Z.data()})}),o(k)});return()=>me()},[]);const I=a.filter(Q=>{const me=Q.category===u,M=Q.name.toLowerCase().includes(g.toLowerCase());return me&&M});C.useEffect(()=>{var Q;w&&((Q=H.current)==null||Q.scrollIntoView({behavior:"smooth"}))},[p==null?void 0:p.comments,w]),C.useEffect(()=>{if(Y.type==="menu"&&Y.startDate&&Y.endDate){const Q=new Date(Y.startDate);new Date(Y.endDate);const me=new Date(Q.getFullYear(),0,1),M=Math.floor((Q.getTime()-me.getTime())/(1440*60*1e3)),k=Math.ceil((Q.getDay()+1+M)/7);de(Z=>({...Z,name:`Thc n Tun ${k} - Thng ${Q.getMonth()+1}`}))}},[Y.startDate,Y.endDate,Y.type]);const Ce=Q=>{b(Q),T(!0)},Ve=(Q,me)=>{me&&me.stopPropagation(),A(Q),j(!0)},te=async()=>{if(N)try{await ul(Qe(Ne,"boarding_docs",N.id)),n(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),j(!1),A(null),(p==null?void 0:p.id)===N.id&&(T(!1),b(null))}catch(Q){console.error("Error deleting document: ",Q),n("Li","Khng th xa h s.","error")}},ie=async Q=>{if(Q.preventDefault(),!R.trim()||!p||!D)return;const me={id:Date.now().toString(),userId:D.id,userName:D.fullName,userRole:D.role,content:R,timestamp:new Date().toISOString()};try{const M=Qe(Ne,"boarding_docs",p.id);await ss(M,{comments:V0(me)});const k={...p,comments:[...p.comments,me]};b(k),B(""),n(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await rl("comment",D,{type:"boarding",name:p.name,targetPath:"/boarding-menu"})}catch(M){console.error("Error adding comment: ",M),n("Li","Khng th gi bnh lun.","error")}},ye=Q=>{switch(Q){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},Re=()=>{de({type:u==="menu"?"menu":u==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),q(null),J(!0)},Me=Q=>{if(Q.preventDefault(),Q.dataTransfer.files&&Q.dataTransfer.files[0]){const me=Q.dataTransfer.files[0];q(me),!Y.name&&Y.type!=="menu"&&de(M=>({...M,name:me.name.split(".")[0]}))}},L=Q=>{if(Q.target.files&&Q.target.files[0]){const me=Q.target.files[0];q(me),!Y.name&&Y.type!=="menu"&&de(M=>({...M,name:me.name.split(".")[0]}))}},re=async()=>{if(ne)try{const Q=ua(Tr,`boarding_docs/${Date.now()}_${ne.name}`),me=await oa(Q,ne),M=await ca(me.ref),k={...Y,uploader:{id:(D==null?void 0:D.id)||"unknown",name:(D==null?void 0:D.fullName)||"n danh",avatar:(D==null?void 0:D.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:ne.name.split(".").pop()||"file",category:u,fileUrl:M};await hl(_t(Ne,"boarding_docs"),k),n("Ti ln thnh cng!",` lu h s: ${Y.name}`,"success"),J(!1),D&&await rl("upload",D,{type:"boarding",name:Y.name,targetPath:"/boarding-menu"})}catch(Q){console.error("Error adding document: ",Q),n("Li","Khng th ti ln h s.","error")}},ge=(Q=!1)=>{if(!p)return null;if(p.fileUrl&&p.fileUrl!=="#"){const me=Oo(p.fileUrl);return me==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(qe,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:p.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(ns,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:me,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[l.jsx("div",{className:"bg-white border-b border-emerald-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[l.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{children:"T Vn phng"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-700",children:l.jsx(ap,{className:"h-6 w-6"})}),"Qun l Bn tr & Dinh dng"]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[l.jsx(ho,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),l.jsxs("button",{onClick:Re,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5",children:[l.jsx(fn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[l.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),l.jsxs("nav",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>h("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(ap,{className:"h-4 w-4"}),"Thc n Tun"]}),l.jsxs("button",{onClick:()=>h("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(ro,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),l.jsxs("button",{onClick:()=>h("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[l.jsx(LS,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),l.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800",children:ye(u)}),l.jsxs("div",{className:"relative",children:[l.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:g,onChange:Q=>x(Q.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64 bg-white shadow-sm"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[I.map(Q=>l.jsxs("div",{onClick:()=>Ce(Q),className:"group bg-white rounded-2xl border border-gray-100 p-6 shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),l.jsx(FD,{type:Q.type}),l.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:Q.name}),l.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["ng bi ",l.jsx("span",{className:"font-medium text-gray-700",children:Q.uploader.name})]}),l.jsxs("div",{className:"w-full pt-4 border-t border-gray-50 flex items-center justify-between mt-auto relative z-10",children:[l.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[l.jsx(Zi,{className:"h-3 w-3"}),new Date(Q.uploadDate).toLocaleDateString("vi-VN")]}),l.jsxs("div",{className:"flex items-center gap-1",children:[Q.comments.length>0&&l.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded-full mr-1",children:[l.jsx(Wa,{className:"h-3 w-3"}),Q.comments.length]}),l.jsx("button",{onClick:me=>Ve(Q,me),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:l.jsx(pr,{className:"h-4 w-4"})})]})]})]},Q.id)),I.length===0&&l.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[l.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:l.jsx(qe,{className:"h-8 w-8 text-gray-300"})}),l.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),pe&&N&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',N.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),w&&p&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>T(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:l.jsx(qe,{className:"h-5 w-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:p.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p.fileUrl&&p.fileUrl!=="#"?window.open(p.fileUrl,"_blank"):n("Khng c file","Ti liu ny khng c file nh km.","warning")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>O(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Jd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:ge(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:p.uploader.name})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(p.uploadDate).toLocaleDateString("vi-VN")})]}),p.category==="menu"&&p.startDate&&p.endDate&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[l.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[l.jsx(Zi,{className:"h-3 w-3"}),l.jsx("span",{children:new Date(p.startDate).toLocaleDateString("vi-VN")}),l.jsx("span",{children:""}),l.jsx("span",{children:new Date(p.endDate).toLocaleDateString("vi-VN")})]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Wa,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),l.jsxs("div",{className:"space-y-4",children:[p.comments&&p.comments.length>0?p.comments.map(Q=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:Q.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:Q.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:Q.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:Q.content}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(Q.timestamp).toLocaleString("vi-VN")})]})]},Q.id)):l.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[l.jsx(Wa,{className:"h-10 w-10 mb-2 opacity-50"}),l.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),l.jsx("div",{ref:H})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[l.jsxs("form",{onSubmit:ie,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:R,onChange:Q=>B(Q.target.value)}),l.jsx("button",{type:"submit",disabled:!R.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:l.jsx(ef,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[l.jsx(ho,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]}),P&&p&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:l.jsx(qe,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:p.name}),l.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:l.jsx(nf,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:l.jsx(tf,{className:"h-5 w-5"})}),l.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),l.jsx("button",{onClick:()=>O(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:ge(!0)})]}),U&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(fn,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),l.jsx("button",{onClick:()=>J(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(Q=>l.jsx("button",{onClick:()=>de(me=>({...me,type:Q.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${Y.type===Q.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:Q.label},Q.id))})]}),Y.type==="menu"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:Y.startDate,onChange:Q=>de({...Y,startDate:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:Y.endDate,onChange:Q=>de({...Y,endDate:Q.target.value})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:Y.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:Y.name,onChange:Q=>de({...Y,name:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:Me,onDragOver:Q=>Q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${ne?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:L}),ne?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(mr,{className:"h-10 w-10 text-emerald-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:ne.name}),l.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(ne.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:l.jsx(Wd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:re,disabled:!ne,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(fn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},GD=()=>{const s=zs(),{user:e}=ws(),{addToast:n}=kr(),[a,o]=C.useState([]),[u,h]=C.useState([]);C.useEffect(()=>{const W=mn(_t(Ne,"plans"),Do("uploadDate","desc")),_e=Ar(W,ke=>{const Ge=[],ht=[];ke.forEach(ln=>{const wt=ln.data(),rs={id:ln.id,...wt};wt.type==="plan"?Ge.push(rs):ht.push(rs)}),o(Ge),h(ht)});return()=>_e()},[]);const[g,x]=C.useState(null),[p,b]=C.useState(!1),[w,T]=C.useState(!1),[R,B]=C.useState(""),H=C.useRef(null),[U,J]=C.useState(!1),[ne,q]=C.useState(null),[Y,de]=C.useState({type:"plan",name:"",date:"",status:"draft"}),[pe,j]=C.useState(!1),[N,A]=C.useState(null),[P,O]=C.useState(!1),[D,I]=C.useState(null),[Ce,Ve]=C.useState(""),te=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="vice_head_teacher"||(e==null?void 0:e.role)==="teacher",ie=W=>{if(!e)return!1;const _e=W.uploaderRole;return _e?e.role==="vice_principal"?["head_teacher","vice_head_teacher"].includes(_e):["head_teacher","vice_head_teacher"].includes(e.role)?_e==="teacher":!1:!1},ye=async W=>{if(e)try{const _e=Qe(Ne,"plans",W.id);await ss(_e,{approval:{status:"approved",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString()}}),n(" duyt k hoch",`K hoch "${W.title}"  c ph duyt.`,"success")}catch(_e){console.error("Error approving plan:",_e),n("Li","Khng th duyt k hoch. Vui lng th li.","error")}},Re=W=>{I(W),Ve(""),O(!0)},Me=async()=>{if(!(!e||!D))try{const W=Qe(Ne,"plans",D.id);await ss(W,{approval:{status:"rejected",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString(),rejectionReason:Ce||"Khng t yu cu"}}),n(" t chi k hoch",`K hoch "${D.title}"  b t chi.`,"warning"),O(!1),I(null),Ve("")}catch(W){console.error("Error rejecting plan:",W),n("Li","Khng th t chi k hoch. Vui lng th li.","error")}};C.useEffect(()=>{var W;p&&((W=H.current)==null||W.scrollIntoView({behavior:"smooth"}))},[p,g]);const L=W=>{x(W),b(!0)},re=(W,_e)=>{_e.stopPropagation(),A(W),j(!0)},ge=async()=>{if(N)try{await ul(Qe(Ne,"plans",N.id)),n(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),j(!1),A(null),(g==null?void 0:g.id)===N.id&&(b(!1),x(null))}catch(W){console.error("Error deleting document: ",W),n("Li","Khng th xa h s. Vui lng th li.","error")}},Q=async W=>{if(W.preventDefault(),!R.trim()||!g||!e)return;const _e={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:R,timestamp:new Date().toISOString()};try{const ke=Qe(Ne,"plans",g.id);await ss(ke,{comments:V0(_e),commentCount:(g.commentCount||0)+1}),B(""),n(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),await rl("comment",e,{type:"group",name:g.title,targetPath:"/professional-group-plans"})}catch(ke){console.error("Error adding comment: ",ke),n("Li","Khng th gi gp .","error")}},me=()=>{de({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),q(null),J(!0)},M=W=>{if(W.preventDefault(),W.dataTransfer.files&&W.dataTransfer.files[0]){const _e=W.dataTransfer.files[0];q(_e),Y.name||de(ke=>({...ke,name:_e.name.split(".")[0]}))}},k=W=>{if(W.target.files&&W.target.files[0]){const _e=W.target.files[0];q(_e),Y.name||de(ke=>({...ke,name:_e.name.split(".")[0]}))}},Z=async()=>{if(!(!ne&&!Y.name))try{let W="#",_e="word";if(ne){const Ge=ua(Tr,`plans/${Date.now()}_${ne.name}`);await oa(Ge,ne),W=await ca(Ge),_e=ne.name.endsWith("pdf")?"pdf":"word"}const ke={...Y,title:Y.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploaderRole:(e==null?void 0:e.role)||"teacher",uploadDate:new Date().toISOString(),viewers:[],commentCount:0,comments:[],fileType:_e,url:W,approval:{status:"pending"}};await hl(_t(Ne,"plans"),ke),n("Ti ln thnh cng",` lu h s: ${Y.name} (${Y.type==="plan"?"K hoch":"Bin bn"})`,"success"),J(!1),e&&await rl("upload",e,{type:"group",name:Y.name,targetPath:"/professional-group-plans"})}catch(W){console.error("Error adding document: ",W),n("Li","Khng th lu h s. Vui lng th li.","error")}},he=(W=!1)=>{if(!g)return null;const _e=g.url;if(_e&&_e!=="#"){const ke=Oo(_e);return ke==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(qe,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:_e,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(ns,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:ke,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[l.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[l.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>s("/"),children:"Dashboard"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[l.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:l.jsx(qe,{className:"h-6 w-6"})}),"H s T Chuyn Mn"]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),te&&l.jsxs("button",{onClick:me,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-5 py-2.5 rounded-lg shadow-md transition-all font-medium",children:[l.jsx(fn,{className:"h-4 w-4"}),l.jsx("span",{children:"Ti ln Bin bn/K hoch"})]})]})]})}),l.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10 pb-20",children:[l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),l.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",l.jsx(Ms,{className:"h-3 w-3"})]})]}),l.jsxs("div",{className:"grid gap-4",children:[a.map(W=>{var _e,ke,Ge,ht,ln;return l.jsx("div",{onClick:()=>L(W),className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md hover:border-orange-200 transition-all cursor-pointer group",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:l.jsx(qe,{className:"h-6 w-6"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors",children:W.title}),((_e=W.approval)==null?void 0:_e.status)==="pending"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase",children:[l.jsx(fd,{className:"h-3 w-3"})," Ch duyt"]}),((ke=W.approval)==null?void 0:ke.status)==="approved"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[l.jsx(Qi,{className:"h-3 w-3"}),"  duyt"]}),((Ge=W.approval)==null?void 0:Ge.status)==="rejected"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-red-100 text-red-700 uppercase",title:W.approval.rejectionReason,children:[l.jsx(Jr,{className:"h-3 w-3"})," T chi"]})]}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Zl,{className:"h-3 w-3"})," ",W.uploader]}),l.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(fd,{className:"h-3 w-3"})," ",new Date(W.uploadDate).toLocaleDateString("vi-VN")]})]}),((ht=W.approval)==null?void 0:ht.status)==="rejected"&&W.approval.rejectionReason&&l.jsxs("div",{className:"mt-2 text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[l.jsx("span",{className:"font-semibold",children:"L do:"})," ",W.approval.rejectionReason]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[ie(W)&&((ln=W.approval)==null?void 0:ln.status)==="pending"&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:wt=>{wt.stopPropagation(),ye(W)},className:"px-3 py-1.5 text-xs font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[l.jsx(Qi,{className:"h-3.5 w-3.5"})," Duyt"]}),l.jsxs("button",{onClick:wt=>{wt.stopPropagation(),Re(W)},className:"px-3 py-1.5 text-xs font-bold text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[l.jsx(Jr,{className:"h-3.5 w-3.5"})," T chi"]})]}),l.jsxs("div",{className:"flex -space-x-2",children:[W.viewers.map((wt,rs)=>l.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs font-medium text-gray-600",children:wt},rs)),W.viewers.length>0&&l.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[10px] text-gray-400",children:"+"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[l.jsx(Ad,{className:"h-4 w-4"}),l.jsx("span",{className:"text-xs font-medium",children:W.commentCount})]}),l.jsx("button",{onClick:wt=>re(W,wt),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors z-10",children:l.jsx(pr,{className:"h-4 w-4"})})]})]})]})},W.id)}),a.length===0&&l.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400",children:[l.jsx(qe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"Cha c k hoch no."]})]})]}),l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp T"}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded-md text-gray-500 hover:text-orange-600 shadow-sm",children:l.jsx(cA,{className:"h-4 w-4"})})})]}),l.jsxs("div",{className:"relative border-l-2 border-gray-200 ml-3 md:ml-6 space-y-8 pb-4",children:[u.map(W=>{var _e,ke,Ge,ht,ln;return l.jsxs("div",{className:"relative pl-8 md:pl-10",children:[l.jsx("div",{className:"absolute -left-[9px] top-0 h-5 w-5 rounded-full bg-white border-4 border-orange-200"}),l.jsx("div",{className:"absolute -left-2 top-7 md:top-1 md:-left-24 w-20 md:text-right",children:l.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(W.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})}),l.jsxs("div",{onClick:()=>L(W),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer group relative pr-10",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[W.status==="finalized"?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[l.jsx(Qi,{className:"h-3 w-3"}),"  cht"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 uppercase animate-pulse",children:[l.jsx(Ps,{className:"h-3 w-3"})," ang tho lun"]}),((_e=W.approval)==null?void 0:_e.status)==="pending"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-50 text-amber-600 border border-amber-200",children:[l.jsx(fd,{className:"h-3 w-3"})," Ch duyt"]}),((ke=W.approval)==null?void 0:ke.status)==="approved"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-50 text-green-600 border border-green-200",children:[l.jsx(Qi,{className:"h-3 w-3"}),"  duyt"]}),((Ge=W.approval)==null?void 0:Ge.status)==="rejected"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-red-50 text-red-600 border border-red-200",title:W.approval.rejectionReason,children:[l.jsx(Jr,{className:"h-3 w-3"})," T chi"]})]}),ie(W)&&((ht=W.approval)==null?void 0:ht.status)==="pending"&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:wt=>{wt.stopPropagation(),ye(W)},className:"px-2 py-1 text-[10px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[l.jsx(Qi,{className:"h-3 w-3"})," Duyt"]}),l.jsxs("button",{onClick:wt=>{wt.stopPropagation(),Re(W)},className:"px-2 py-1 text-[10px] font-bold text-white bg-red-500 hover:bg-red-600 rounded transition-colors flex items-center gap-0.5",children:[l.jsx(Jr,{className:"h-3 w-3"})," T chi"]})]})]}),l.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3 group-hover:text-orange-700",children:W.title}),((ln=W.approval)==null?void 0:ln.status)==="rejected"&&W.approval.rejectionReason&&l.jsxs("div",{className:"mb-3 text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[l.jsx("span",{className:"font-semibold",children:"L do:"})," ",W.approval.rejectionReason]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-100 group-hover:bg-orange-50 group-hover:border-orange-100 transition-colors",children:[W.fileType==="word"?l.jsx(qe,{className:"h-4 w-4 text-blue-600"}):l.jsx(Gp,{className:"h-4 w-4 text-red-500"}),l.jsxs("span",{className:"text-xs text-gray-600 font-medium truncate max-w-[150px]",children:["Bien_ban_hop_",W.date,".",W.fileType==="word"?"docx":"pdf"]})]}),l.jsxs("span",{className:"text-xs font-bold text-orange-600 opacity-0 group-hover:opacity-100 transition-opacity flex items-center",children:["Chi tit ",l.jsx(Ms,{className:"h-3 w-3"})]})]}),l.jsx("button",{onClick:wt=>re(W,wt),className:"absolute top-2 right-2 p-1.5 text-gray-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors z-10",children:l.jsx(pr,{className:"h-4 w-4"})})]})]},W.id)}),u.length===0&&l.jsx("div",{className:"pl-10 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})]})]}),pe&&N&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',N.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ge,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),P&&D&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Jr,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Xc nhn t chi k hoch?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp t chi k hoch ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',D.title,'"']})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["L do t chi ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all resize-none",rows:3,placeholder:"Nhp l do t chi  ngi gi bit cn chnh sa g...",value:Ce,onChange:W=>Ve(W.target.value)})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>{O(!1),I(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:Me,disabled:!Ce.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Xc nhn t chi"})]})]})})}),p&&g&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>b(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-start bg-orange-50/30 flex-shrink-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-1 block",children:g.type==="plan"?"K hoch":"Bin bn hp"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:g.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:l.jsx(rn,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>T(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-orange-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Jd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:he(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:g.uploader})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(g.uploadDate).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Ad,{className:"h-4 w-4 text-orange-500"}),"  kin ch o & Gp "]}),l.jsxs("div",{className:"space-y-4 mb-4",children:[g.comments&&g.comments.length>0?g.comments.map(W=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-red-100 text-red-700 border border-red-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:W.userName.charAt(0)}),l.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:W.userName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:W.userRole})]}),l.jsx("p",{className:"text-sm text-gray-800",children:W.content})]})]},W.id)):l.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),l.jsx("div",{ref:H})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("form",{onSubmit:Q,className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung ch o...",value:R,onChange:W=>B(W.target.value)}),l.jsx("button",{type:"submit",disabled:!R.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:l.jsx(ef,{className:"h-4 w-4"})})]})})]})]})]})]}),U&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(fn,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),l.jsx("button",{onClick:()=>J(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>de({...Y,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${Y.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),l.jsx("button",{onClick:()=>de({...Y,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${Y.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:Y.name,onChange:W=>de({...Y,name:W.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Y.type==="minute"?"Ngy hp":"Thi gian p dng"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:Y.date,onChange:W=>de({...Y,date:W.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:Y.status,onChange:W=>de({...Y,status:W.target.value}),children:[l.jsx("option",{value:"draft",children:" ang tho lun"}),l.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:M,onDragOver:W=>W.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${ne?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:k,accept:".pdf,.doc,.docx"}),ne?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(mr,{className:"h-10 w-10 text-orange-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:ne.name}),l.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(ne.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:l.jsx(Wd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[l.jsx(fn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},KD=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],Pp=()=>{const s=new Date,e=s.getMonth()+1,n=s.getFullYear();return e>=9?n:n-1},jw=()=>{const s=Pp(),e=s+1;return[{id:"m9",name:`Thng 09/${s}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${s}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${s}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${s}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${e}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${e}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${e}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${e}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${e}`,fileCount:0,files:[]}]},Sw=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],$D=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],QD=()=>{var on;const{classId:s}=Sj(),e=zs(),{user:n}=ws(),{addToast:a}=kr(),o=(fe,ve,et)=>{if(!fe)return!1;const rt=qn=>qn.toLowerCase().trim().replace(/\s+/g," "),Pe=rt(fe),zt=rt(ve),tt=et?rt(et):"";return Pe===zt||Pe===tt||tt&&Pe.includes(tt)||tt&&tt.includes(Pe)?!0:(console.log("[matchesClassScope] No match:",{scope:fe,classId:ve,className:et,normalizedScope:Pe,normalizedName:tt}),!1)},[u,h]=C.useState(null),[g,x]=C.useState(jw()),[p,b]=C.useState([]),[w,T]=C.useState(!0),[R,B]=C.useState("students"),[H,U]=C.useState("week"),[J,ne]=C.useState("m11"),[q,Y]=C.useState("all"),[de,pe]=C.useState(null),[j,N]=C.useState(!1),[A,P]=C.useState(!1),[O,D]=C.useState(""),[I,Ce]=C.useState(!1),[Ve,te]=C.useState(null),[ie,ye]=C.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[Re,Me]=C.useState(!1),[L,re]=C.useState(null),[ge,Q]=C.useState(!1),[me,M]=C.useState(null),[k,Z]=C.useState(""),he=fe=>{if(!n)return!1;const ve=fe.uploaderRole;return ve&&["head_teacher","vice_head_teacher"].includes(n.role)?ve==="teacher":!1},W=async fe=>{if(n)try{const ve=Qe(Ne,"class_files",fe.id);await ss(ve,{approval:{status:"approved",reviewerId:n.id,reviewerName:n.fullName,reviewerRole:n.role,reviewedAt:new Date().toISOString()}}),a(" duyt h s",`H s "${fe.name}"  c ph duyt.`,"success")}catch(ve){console.error("Error approving file:",ve),a("Li","Khng th duyt h s. Vui lng th li.","error")}},_e=(fe,ve)=>{ve.stopPropagation(),M(fe),Z(""),Q(!0)},ke=async()=>{if(!(!n||!me))try{const fe=Qe(Ne,"class_files",me.id);await ss(fe,{approval:{status:"rejected",reviewerId:n.id,reviewerName:n.fullName,reviewerRole:n.role,reviewedAt:new Date().toISOString(),rejectionReason:k||"Khng t yu cu"}}),a(" t chi h s",`H s "${me.name}"  b t chi.`,"warning"),Q(!1),M(null),Z("")}catch(fe){console.error("Error rejecting file:",fe),a("Li","Khng th t chi h s. Vui lng th li.","error")}};if(C.useEffect(()=>{if(!s)return;(async()=>{try{const ve=Qe(Ne,"classes",s),et=await _r(ve);let rt=null,Pe=[];if(et.exists())rt=et.data();else{console.warn("Class not found in Firestore, checking Mock...");const zt=KD.find(tt=>tt.id===s);zt&&(rt=zt)}if(rt){console.log("[ClassRecords] Class data loaded:",{classId:s,className:rt.name,currentUser:n==null?void 0:n.fullName,userScope:n==null?void 0:n.accessScope,userRole:n==null?void 0:n.role});const zt=tt=>tt.toLowerCase().trim().replace(/\s+/g," ");try{const tt=mn(_t(Ne,"users"),_s("role","in",["teacher","head_teacher","vice_head_teacher"])),nn=(await Sr(tt)).docs.map(as=>as.data()),At=new Set,Tt=zt(s),bt=zt(rt.name);nn.forEach(as=>{if(!as.accessScope)return;const Ns=zt(as.accessScope);(Ns===Tt||Ns===bt||bt.includes(Ns)||Ns.includes(bt))&&At.add(as.fullName)}),Pe=Array.from(At),console.log("[ClassRecords] Found teachers from DB:",Pe),Pe.length===0&&(console.warn("[ClassRecords] No teacher found for class:",s),Pe=["Cha phn cng"])}catch(tt){console.error("Error fetching teacher details:",tt),Pe=["Cha phn cng"]}h({id:s,...rt,teachers:Pe,teacher:Pe.join(", ")})}}catch(ve){console.error("Error fetching class:",ve)}finally{T(!1)}})()},[s]),C.useEffect(()=>{if(!s)return;const fe=mn(_t(Ne,"class_files"),_s("classId","==",s)),ve=Ar(fe,et=>{const rt=et.docs.map(tt=>({id:tt.id,...tt.data()}));b(rt),console.log("[ClassRecords] Fetched files from Firestore:",rt.length),rt.forEach(tt=>console.log(`  - ${tt.name} | month: "${tt.month}" | type: ${tt.planType}`));const zt=jw().map(tt=>{const qn=rt.filter(nn=>{if((nn.category||"plan")!=="plan")return!1;let Tt=!1;const bt=tt.id.replace("m",""),as=String(nn.month||"").replace("m","");return parseInt(bt,10)===parseInt(as,10)&&(Tt=!0),!!Tt});return{...tt,files:qn,fileCount:qn.length}});console.log("[ClassRecords] Grouped files into folders:",zt.map(tt=>`${tt.name}: ${tt.fileCount} files`)),x(zt)});return()=>ve()},[s]),C.useEffect(()=>{!n||w||n.role==="teacher"&&u&&!o(n.accessScope,s,u.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:n.accessScope,classId:s,className:u.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[n,s,e,u,w]),w)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!u)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),l.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const Ge=((n==null?void 0:n.role)==="teacher"||(n==null?void 0:n.role)==="head_teacher"||(n==null?void 0:n.role)==="vice_head_teacher")&&o(n.accessScope,s,u==null?void 0:u.name);console.log("[ClassRecords] Upload permission:",{canUpload:Ge,userRole:n==null?void 0:n.role,userScope:n==null?void 0:n.accessScope,classId:s,className:u==null?void 0:u.name});const ht=(fe,ve)=>{ve.stopPropagation(),pe(fe),N(!0)},ln=(fe,ve,et)=>{et.stopPropagation(),re({file:fe,folderId:ve}),Me(!0)},wt=async()=>{if(L)try{console.log("[DELETE] Attempting to delete file:",{fileId:L.file.id,fileName:L.file.name,classId:s}),await ul(Qe(Ne,"class_files",L.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),a(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(fe){console.error("[DELETE] Error deleting file:",fe),console.error("[DELETE] Error code:",fe.code),console.error("[DELETE] Error message:",fe.message);let ve="Vui lng th li sau.";fe.code==="permission-denied"&&(ve="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),a("Li khi xa ti liu",ve,"error")}finally{Me(!1),re(null)}},rs=fe=>{ne(J===fe?null:fe)},Hs=fe=>{switch(fe){case"word":return l.jsx(qe,{className:"h-5 w-5 text-blue-600"});case"excel":return l.jsx(qe,{className:"h-5 w-5 text-green-600"});case"pdf":return l.jsx(qe,{className:"h-5 w-5 text-red-600"});default:return l.jsx(qe,{className:"h-5 w-5 text-gray-400"})}},Dt=()=>{ye({area:R,planType:H,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),te(null),Ce(!0)},Ut=fe=>{if(fe.preventDefault(),fe.dataTransfer.files&&fe.dataTransfer.files[0]){const ve=fe.dataTransfer.files[0];te(ve),ie.name||ye(et=>({...et,name:ve.name.split(".")[0]}))}},Fs=fe=>{if(fe.target.files&&fe.target.files[0]){const ve=fe.target.files[0];te(ve),ie.name||ye(et=>({...et,name:ve.name.split(".")[0]}))}},Mo=async()=>{var fe,ve;if(!(!Ve||!ie.name||!n))try{const et=ua(Tr,`class-files/${s}/${Date.now()}_${Ve.name}`);await oa(et,Ve);const rt=await ca(et),Pe={name:ie.name,type:((fe=Ve.name.split(".").pop())==null?void 0:fe.toLowerCase())||"other",url:rt,uploader:n.fullName,uploaderRole:n.role,date:new Date().toISOString(),classId:s,month:ie.month,monthName:((ve=Sw.find(zt=>zt.value===ie.month))==null?void 0:ve.label)||"Thng khc",hasNewComments:!1,commentCount:0,createdAt:qI(),planType:ie.planType,week:ie.week,category:ie.area,approval:{status:"pending"}};await hl(_t(Ne,"class_files"),Pe),a("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),rl("upload",n,{type:"class",name:ie.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),Ce(!1)}catch(et){console.error("Error uploading file:",et),a("Li khi ti ln","Vui lng th li sau.","error")}},yi=(fe=!1)=>{if(!de)return null;if(de.url&&de.url!=="#"){const ve=Oo(de.url);return ve==="EXCEL_NO_PREVIEW"?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[l.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:l.jsx(qe,{className:"h-16 w-16 text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),l.jsxs("a",{href:de.url,download:de.name,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[l.jsx(ns,{className:"h-5 w-5"}),"Ti xung file"]})]}):l.jsx("div",{className:"w-full h-full",children:l.jsx("iframe",{src:ve,className:"w-full h-full border-0",title:"Document Preview"})})}else return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[l.jsx(qe,{className:"h-16 w-16 mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),l.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return l.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[l.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[l.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),l.jsx(Ms,{className:"h-3 w-3"}),l.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>e("/"),children:[l.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm",children:l.jsx("span",{className:"text-2xl font-bold text-amber-600",children:((on=u==null?void 0:u.name)==null?void 0:on.split(" ").pop())||"?"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(u==null?void 0:u.name)||"Lp hc"}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Qw,{className:"h-4 w-4"})," GVCN:"]}),u!=null&&u.teachers&&u.teachers.length>1?l.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.teachers.map((fe,ve)=>l.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:fe},ve))}):l.jsx("span",{className:"font-semibold text-gray-700",children:(u==null?void 0:u.teacher)||"Cha cp nht"})]})]})]}),Ge&&l.jsxs("button",{onClick:Dt,className:"flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-xl shadow-md shadow-amber-200 transition-all font-bold transform hover:-translate-y-0.5",children:[l.jsx(fn,{className:"h-5 w-5"}),l.jsx("span",{children:"Ti ln h s lp"})]})]})]}),l.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:l.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[l.jsxs("button",{onClick:()=>B("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${R==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Uv,{className:"h-4 w-4"}),"DANH SCH LP",R==="students"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${R==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(qe,{className:"h-4 w-4"}),"K HOCH GIO DC",R==="plan"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${R==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Ov,{className:"h-4 w-4"}),"NH GI TR",R==="assessment"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),l.jsxs("button",{onClick:()=>B("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${R==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx(Pv,{className:"h-4 w-4"}),"D N STEAM",R==="steam"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),l.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>Y("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${q==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),l.jsx("button",{onClick:()=>Y("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${q==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),l.jsxs("button",{onClick:()=>Y("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${q==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[l.jsx(Wa,{className:"h-3 w-3"})," C gp "]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),R==="plan"&&l.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[l.jsx("button",{onClick:()=>U("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),l.jsx("button",{onClick:()=>U("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),l.jsx("button",{onClick:()=>U("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${H==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),l.jsxs("div",{className:"space-y-4",children:[R==="plan"&&l.jsxs(l.Fragment,{children:[H==="year"&&l.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Lv,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",Pp()," - ",Pp()+1]}),(()=>{const fe=g.flatMap(ve=>ve.files).filter(ve=>ve.planType==="year");return fe.length===0?l.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fe.map(ve=>l.jsxs("div",{onClick:et=>ht(ve,et),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Hs(ve.type),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-800 truncate",children:ve.name}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(ve.date).toLocaleDateString("vi-VN")})]}),l.jsx("button",{onClick:et=>ln(ve,"year",et),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(pr,{className:"h-4 w-4"})})]},ve.id))})})()]}),(H==="month"||H==="week")&&l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(fe=>{const ve=fe.files.filter(Pe=>H==="month"?Pe.planType==="month":H==="week"?Pe.planType==="week"||!Pe.planType:!1),et=ve.length,rt=J===fe.id;return l.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[l.jsxs("div",{onClick:()=>rs(fe.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${rt?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-3 rounded-lg ${rt?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:l.jsx(Lv,{className:"h-6 w-6"})}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${rt?"text-amber-900":"text-gray-700"}`,children:fe.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[et," ",H==="month"?"K hoch thng":"K hoch tun"]})]})]}),l.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${rt?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:l.jsx(Ms,{className:"h-5 w-5"})})]}),rt&&l.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[ve.map(Pe=>{var zt,tt,qn,nn,At;return l.jsxs("div",{onClick:Tt=>ht(Pe,Tt),className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[Hs(Pe.type),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:Pe.name}),((zt=Pe.approval)==null?void 0:zt.status)==="pending"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700",children:[l.jsx(fd,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((tt=Pe.approval)==null?void 0:tt.status)==="approved"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700",children:[l.jsx(Qi,{className:"h-2.5 w-2.5"}),"  duyt"]}),((qn=Pe.approval)==null?void 0:qn.status)==="rejected"&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700",title:Pe.approval.rejectionReason,children:[l.jsx(Jr,{className:"h-2.5 w-2.5"})," T chi"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(Zi,{className:"h-3 w-3"})," ",new Date(Pe.date).toLocaleDateString("vi-VN"),H==="week"&&Pe.week&&l.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",Pe.week]})]}),((nn=Pe.approval)==null?void 0:nn.status)==="rejected"&&Pe.approval.rejectionReason&&l.jsxs("div",{className:"mt-1 text-[10px] text-red-600",children:[l.jsx("span",{className:"font-semibold",children:"L do:"})," ",Pe.approval.rejectionReason]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[he(Pe)&&((At=Pe.approval)==null?void 0:At.status)==="pending"&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:Tt=>{Tt.stopPropagation(),W(Pe)},className:"px-2 py-1 text-[9px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[l.jsx(Qi,{className:"h-3 w-3"})," Duyt"]}),l.jsxs("button",{onClick:Tt=>_e(Pe,Tt),className:"px-2 py-1 text-[9px] font-bold text-white bg-red-500 hover:bg-red-600 rounded transition-colors flex items-center gap-0.5",children:[l.jsx(Jr,{className:"h-3 w-3"})," T chi"]})]}),Pe.hasNewComments&&l.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[l.jsx(Wa,{className:"h-3 w-3"}),"Gp  mi"]}),l.jsx("button",{onClick:Tt=>ln(Pe,fe.id,Tt),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(pr,{className:"h-4 w-4"})})]})]},Pe.id)}),ve.length===0&&l.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},fe.id)})})]}),R==="students"&&l.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Uv,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{const fe=p.filter(ve=>ve.category==="students");return console.log("[Student List Tab] Total files:",p.length,"Student files:",fe.length),console.log("[Student List Tab] All file categories:",p.map(ve=>({name:ve.name,category:ve.category}))),fe.length===0?l.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fe.map(ve=>l.jsxs("div",{onClick:et=>ht(ve,et),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Hs(ve.type),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-800 truncate",children:ve.name}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(ve.date).toLocaleDateString("vi-VN")})]}),l.jsx("button",{onClick:et=>ln(ve,"students",et),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:l.jsx(pr,{className:"h-4 w-4"})})]},ve.id))})})()]}),R==="assessment"&&l.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[l.jsx(Ov,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),l.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),R==="steam"&&l.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[l.jsx(Pv,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),l.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),j&&de&&l.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>N(!1)}),l.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-amber-50 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg border border-amber-100 shadow-sm",children:Hs(de.type)}),l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-bold text-amber-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),l.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:de.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",download:de.name,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:l.jsx(ns,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[l.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:l.jsx("button",{onClick:()=>P(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-amber-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:l.jsx(Jd,{className:"h-4 w-4"})})}),l.jsx("div",{className:"flex-1 w-full h-full",children:yi(!1)})]}),l.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:de.uploader})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),l.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(de.date).toLocaleDateString("vi-VN")})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[l.jsx(Wa,{className:"h-4 w-4 text-amber-500"}),"Gp  chuyn mn"]}),l.jsx("div",{className:"space-y-4",children:de.hasNewComments?l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-red-100 text-red-700 border border-red-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:"H"}),l.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[l.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Hiu Trng"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"Ban Gim Hiu"})]}),l.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:"C Lan lu  b sung thm hot ng ngoi tri cho ch  ny nh. Phn mc tiu cn r rng hn theo chun  tui."}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Va xong"})]})]}):l.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[l.jsx(Wa,{className:"h-10 w-10 mb-2 opacity-50"}),l.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]})})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:O,onChange:fe=>D(fe.target.value)}),l.jsx("button",{onClick:()=>{!O.trim()||!n||!de||(a(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),rl("comment",n,{type:"class",name:de.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),D(""))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 transition-all",children:l.jsx(ef,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[l.jsx(ho,{className:"h-2.5 w-2.5"})," Ch ni b BGH v GVCN xem c."]})]})]})]})]})]}),A&&de&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:l.jsx(qe,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:de.name}),l.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:l.jsx(nf,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:l.jsx(tf,{className:"h-5 w-5"})}),l.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),l.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:yi(!0)})]}),Re&&L&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ps,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',L.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>Me(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:wt,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),ge&&me&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Jr,{className:"h-8 w-8 text-red-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Xc nhn t chi h s?"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp t chi h s ",l.jsxs("span",{className:"font-semibold text-gray-800",children:['"',me.name,'"']})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["L do t chi ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all resize-none",rows:3,placeholder:"Nhp l do t chi  gio vin bit cn chnh sa g...",value:k,onChange:fe=>Z(fe.target.value)})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>{Q(!1),M(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),l.jsx("button",{onClick:ke,disabled:!k.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Xc nhn t chi"})]})]})})}),I&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(fn,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),l.jsx("button",{onClick:()=>Ce(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:l.jsx(rn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),l.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(fe=>l.jsx("button",{onClick:()=>ye({...ie,area:fe.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${ie.area===fe.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:fe.label},fe.id))})]}),ie.area==="plan"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),l.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(fe=>l.jsx("button",{onClick:()=>ye({...ie,planType:fe.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${ie.planType===fe.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:fe.label},fe.id))})]}),ie.area!=="students"&&(ie.area!=="plan"||ie.planType!=="year")&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),l.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:ie.month,onChange:fe=>ye({...ie,month:fe.target.value}),children:Sw.map(fe=>l.jsx("option",{value:fe.value,children:fe.label},fe.value))})]}),(ie.area!=="plan"||ie.planType==="week")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),l.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:ie.week,onChange:fe=>ye({...ie,week:fe.target.value}),children:$D.map(fe=>l.jsx("option",{value:fe.value,children:fe.label},fe.value))})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ie.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:ie.name,onChange:fe=>ye({...ie,name:fe.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),l.jsxs("div",{onDrop:Ut,onDragOver:fe=>fe.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Ve?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[l.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Fs}),Ve?l.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[l.jsx(mr,{className:"h-10 w-10 text-amber-600 mb-2"}),l.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:Ve.name}),l.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(Ve.size/1024).toFixed(0)," KB -  sn sng"]})]}):l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:l.jsx(Wd,{className:"h-8 w-8"})}),l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",l.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),l.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:ie.note,onChange:fe=>ye({...ie,note:fe.target.value})})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>Ce(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),l.jsxs("button",{onClick:Mo,disabled:!Ve||!ie.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(fn,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},YD=()=>{const s=zs(),{login:e,isAuthenticated:n}=ws();C.useEffect(()=>{n&&s("/")},[n,s]),C.useEffect(()=>{(async()=>{try{const q=Qe(Ne,"app_settings","login_background"),Y=await _r(q);Y.exists()&&Y.data().imageUrl&&U(Y.data().imageUrl)}catch(q){console.error("Error fetching background:",q)}})()},[]);const[a,o]=C.useState(""),[u,h]=C.useState("");C.useEffect(()=>{(async()=>{try{const q=Qe(Ne,"app_settings","system_logo"),Y=await _r(q);Y.exists()&&Y.data().imageUrl&&o(Y.data().imageUrl);const de=Qe(Ne,"app_settings","certification_logo"),pe=await _r(de);pe.exists()&&pe.data().imageUrl&&h(pe.data().imageUrl)}catch(q){console.error("Error fetching logo:",q)}})()},[]);const[g,x]=C.useState(!1),[p,b]=C.useState(!1),[w,T]=C.useState(""),[R,B]=C.useState({username:"",password:""}),[H,U]=C.useState("/login-background.jpg"),J=async ne=>{ne.preventDefault(),b(!0),T("");const q=await e(R.username,R.password);b(!1),q||T("Tn ng nhp hoc mt khu khng ng.")};return l.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("img",{src:H,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),l.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:l.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:a?l.jsx("img",{src:a,alt:"Logo",className:"h-12 w-12 object-contain"}):l.jsx(Kp,{className:"h-12 w-12 text-blue-900"})}),l.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:Ww}),l.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),w&&l.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),w]}),l.jsxs("form",{onSubmit:J,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(ao,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),l.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:R.username,onChange:ne=>B({...R,username:ne.target.value})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(ho,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),l.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:R.password,onChange:ne=>B({...R,password:ne.target.value})}),l.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>x(!g),children:g?l.jsx(rp,{className:"h-5 w-5"}):l.jsx(nu,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),l.jsx("div",{className:"text-sm",children:l.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),l.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):l.jsxs(l.Fragment,{children:["ng nhp",l.jsx(Sd,{className:"h-4 w-4"})]})})]}),l.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[l.jsx(jA,{className:"h-3 w-3"}),l.jsxs("span",{children:["H tr k thut: ",l.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),u&&l.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:l.jsx("img",{src:u,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},XD=()=>l.jsx(TD,{children:l.jsx(SD,{children:l.jsx(hS,{children:l.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[l.jsx(CD,{}),l.jsx("main",{className:"flex-grow",children:l.jsxs(Hj,{children:[l.jsx(hr,{path:"/",element:l.jsx(ID,{})}),l.jsx(hr,{path:"/login",element:l.jsx(YD,{})}),l.jsx(hr,{path:"/van-ban-chi-dao",element:l.jsx(DD,{})}),l.jsx(hr,{path:"/van-ban-truong",element:l.jsx(OD,{})}),l.jsx(hr,{path:"/quan-tri-he-thong",element:l.jsx(VD,{})}),l.jsx(hr,{path:"/to-van-phong-ke-hoach",element:l.jsx(HD,{})}),l.jsx(hr,{path:"/to-van-phong-thuc-don",element:l.jsx(qD,{})}),l.jsx(hr,{path:"/to-chuyen-mon-ke-hoach",element:l.jsx(GD,{})}),l.jsx(hr,{path:"/class/:classId",element:l.jsx(QD,{})})]})})]})})})}),c2=document.getElementById("root");if(!c2)throw new Error("Could not find root element to mount to");const WD=XE.createRoot(c2);WD.render(l.jsx(fr.StrictMode,{children:l.jsx(XD,{})}));
