(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function k_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ig={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function XE(){if(wv)return Kc;wv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return Kc.Fragment=e,Kc.jsx=t,Kc.jsxs=t,Kc}var _v;function WE(){return _v||(_v=1,Ig.exports=XE()),Ig.exports}var i=WE(),kg={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function JE(){if(Nv)return Je;Nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),N=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=N&&P[N]||P["@@iterator"],typeof P=="function"?P:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,z={};function D(P,ne,xe){this.props=P,this.context=ne,this.refs=z,this.updater=xe||U}D.prototype.isReactComponent={},D.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},D.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Z(){}Z.prototype=D.prototype;function Q(P,ne,xe){this.props=P,this.context=ne,this.refs=z,this.updater=xe||U}var ae=Q.prototype=new Z;ae.constructor=Q,$(ae,D.prototype),ae.isPureReactComponent=!0;var me=Array.isArray;function ye(){}var S={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function A(P,ne,xe){var G=xe.ref;return{$$typeof:s,type:P,key:ne,ref:G!==void 0?G:null,props:xe}}function M(P,ne){return A(P.type,ne,P.props)}function k(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function O(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(xe){return ne[xe]})}var R=/\/+/g;function _e(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):ne.toString(36)}function Pe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ye,ye):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function H(P,ne,xe,G,pe){var Y=typeof P;(Y==="undefined"||Y==="boolean")&&(P=null);var V=!1;if(P===null)V=!0;else switch(Y){case"bigint":case"string":case"number":V=!0;break;case"object":switch(P.$$typeof){case s:case e:V=!0;break;case b:return V=P._init,H(V(P._payload),ne,xe,G,pe)}}if(V)return pe=pe(P),V=G===""?"."+_e(P,0):G,me(pe)?(xe="",V!=null&&(xe=V.replace(R,"$&/")+"/"),H(pe,ne,xe,"",function(Ie){return Ie})):pe!=null&&(k(pe)&&(pe=M(pe,xe+(pe.key==null||P&&P.key===pe.key?"":(""+pe.key).replace(R,"$&/")+"/")+V)),ne.push(pe)),1;V=0;var q=G===""?".":G+":";if(me(P))for(var le=0;le<P.length;le++)G=P[le],Y=q+_e(G,le),V+=H(G,ne,xe,Y,pe);else if(le=I(P),typeof le=="function")for(P=le.call(P),le=0;!(G=P.next()).done;)G=G.value,Y=q+_e(G,le++),V+=H(G,ne,xe,Y,pe);else if(Y==="object"){if(typeof P.then=="function")return H(Pe(P),ne,xe,G,pe);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return V}function ge(P,ne,xe){if(P==null)return P;var G=[],pe=0;return H(P,G,"","",function(Y){return ne.call(xe,Y,pe++)}),G}function Se(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(xe){(P._status===0||P._status===-1)&&(P._status=1,P._result=xe)},function(xe){(P._status===0||P._status===-1)&&(P._status=2,P._result=xe)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var Ue=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ge={map:ge,forEach:function(P,ne,xe){ge(P,function(){ne.apply(this,arguments)},xe)},count:function(P){var ne=0;return ge(P,function(){ne++}),ne},toArray:function(P){return ge(P,function(ne){return ne})||[]},only:function(P){if(!k(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Je.Activity=_,Je.Children=Ge,Je.Component=D,Je.Fragment=t,Je.Profiler=o,Je.PureComponent=Q,Je.StrictMode=a,Je.Suspense=x,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Je.__COMPILER_RUNTIME={__proto__:null,c:function(P){return S.H.useMemoCache(P)}},Je.cache=function(P){return function(){return P.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(P,ne,xe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var G=$({},P.props),pe=P.key;if(ne!=null)for(Y in ne.key!==void 0&&(pe=""+ne.key),ne)!j.call(ne,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&ne.ref===void 0||(G[Y]=ne[Y]);var Y=arguments.length-2;if(Y===1)G.children=xe;else if(1<Y){for(var V=Array(Y),q=0;q<Y;q++)V[q]=arguments[q+2];G.children=V}return A(P.type,pe,G)},Je.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Je.createElement=function(P,ne,xe){var G,pe={},Y=null;if(ne!=null)for(G in ne.key!==void 0&&(Y=""+ne.key),ne)j.call(ne,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(pe[G]=ne[G]);var V=arguments.length-2;if(V===1)pe.children=xe;else if(1<V){for(var q=Array(V),le=0;le<V;le++)q[le]=arguments[le+2];pe.children=q}if(P&&P.defaultProps)for(G in V=P.defaultProps,V)pe[G]===void 0&&(pe[G]=V[G]);return A(P,Y,pe)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(P){return{$$typeof:g,render:P}},Je.isValidElement=k,Je.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:Se}},Je.memo=function(P,ne){return{$$typeof:p,type:P,compare:ne===void 0?null:ne}},Je.startTransition=function(P){var ne=S.T,xe={};S.T=xe;try{var G=P(),pe=S.S;pe!==null&&pe(xe,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(ye,Ue)}catch(Y){Ue(Y)}finally{ne!==null&&xe.types!==null&&(ne.types=xe.types),S.T=ne}},Je.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Je.use=function(P){return S.H.use(P)},Je.useActionState=function(P,ne,xe){return S.H.useActionState(P,ne,xe)},Je.useCallback=function(P,ne){return S.H.useCallback(P,ne)},Je.useContext=function(P){return S.H.useContext(P)},Je.useDebugValue=function(){},Je.useDeferredValue=function(P,ne){return S.H.useDeferredValue(P,ne)},Je.useEffect=function(P,ne){return S.H.useEffect(P,ne)},Je.useEffectEvent=function(P){return S.H.useEffectEvent(P)},Je.useId=function(){return S.H.useId()},Je.useImperativeHandle=function(P,ne,xe){return S.H.useImperativeHandle(P,ne,xe)},Je.useInsertionEffect=function(P,ne){return S.H.useInsertionEffect(P,ne)},Je.useLayoutEffect=function(P,ne){return S.H.useLayoutEffect(P,ne)},Je.useMemo=function(P,ne){return S.H.useMemo(P,ne)},Je.useOptimistic=function(P,ne){return S.H.useOptimistic(P,ne)},Je.useReducer=function(P,ne,xe){return S.H.useReducer(P,ne,xe)},Je.useRef=function(P){return S.H.useRef(P)},Je.useState=function(P){return S.H.useState(P)},Je.useSyncExternalStore=function(P,ne,xe){return S.H.useSyncExternalStore(P,ne,xe)},Je.useTransition=function(){return S.H.useTransition()},Je.version="19.2.0",Je}var Tv;function Bp(){return Tv||(Tv=1,kg.exports=JE()),kg.exports}var E=Bp();const Hr=k_(E);var Dg={exports:{}},Yc={},Og={exports:{}},Mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function ZE(){return Ev||(Ev=1,(function(s){function e(H,ge){var Se=H.length;H.push(ge);e:for(;0<Se;){var Ue=Se-1>>>1,Ge=H[Ue];if(0<o(Ge,ge))H[Ue]=ge,H[Se]=Ge,Se=Ue;else break e}}function t(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var ge=H[0],Se=H.pop();if(Se!==ge){H[0]=Se;e:for(var Ue=0,Ge=H.length,P=Ge>>>1;Ue<P;){var ne=2*(Ue+1)-1,xe=H[ne],G=ne+1,pe=H[G];if(0>o(xe,Se))G<Ge&&0>o(pe,xe)?(H[Ue]=pe,H[G]=Se,Ue=G):(H[Ue]=xe,H[ne]=Se,Ue=ne);else if(G<Ge&&0>o(pe,Se))H[Ue]=pe,H[G]=Se,Ue=G;else break e}}return ge}function o(H,ge){var Se=H.sortIndex-ge.sortIndex;return Se!==0?Se:H.id-ge.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var x=[],p=[],b=1,_=null,N=3,I=!1,U=!1,$=!1,z=!1,D=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ae(H){for(var ge=t(p);ge!==null;){if(ge.callback===null)a(p);else if(ge.startTime<=H)a(p),ge.sortIndex=ge.expirationTime,e(x,ge);else break;ge=t(p)}}function me(H){if($=!1,ae(H),!U)if(t(x)!==null)U=!0,ye||(ye=!0,O());else{var ge=t(p);ge!==null&&Pe(me,ge.startTime-H)}}var ye=!1,S=-1,j=5,A=-1;function M(){return z?!0:!(s.unstable_now()-A<j)}function k(){if(z=!1,ye){var H=s.unstable_now();A=H;var ge=!0;try{e:{U=!1,$&&($=!1,Z(S),S=-1),I=!0;var Se=N;try{t:{for(ae(H),_=t(x);_!==null&&!(_.expirationTime>H&&M());){var Ue=_.callback;if(typeof Ue=="function"){_.callback=null,N=_.priorityLevel;var Ge=Ue(_.expirationTime<=H);if(H=s.unstable_now(),typeof Ge=="function"){_.callback=Ge,ae(H),ge=!0;break t}_===t(x)&&a(x),ae(H)}else a(x);_=t(x)}if(_!==null)ge=!0;else{var P=t(p);P!==null&&Pe(me,P.startTime-H),ge=!1}}break e}finally{_=null,N=Se,I=!1}ge=void 0}}finally{ge?O():ye=!1}}}var O;if(typeof Q=="function")O=function(){Q(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,_e=R.port2;R.port1.onmessage=k,O=function(){_e.postMessage(null)}}else O=function(){D(k,0)};function Pe(H,ge){S=D(function(){H(s.unstable_now())},ge)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(H){switch(N){case 1:case 2:case 3:var ge=3;break;default:ge=N}var Se=N;N=ge;try{return H()}finally{N=Se}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(H,ge){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Se=N;N=H;try{return ge()}finally{N=Se}},s.unstable_scheduleCallback=function(H,ge,Se){var Ue=s.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ue+Se:Ue):Se=Ue,H){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Se+Ge,H={id:b++,callback:ge,priorityLevel:H,startTime:Se,expirationTime:Ge,sortIndex:-1},Se>Ue?(H.sortIndex=Se,e(p,H),t(x)===null&&H===t(p)&&($?(Z(S),S=-1):$=!0,Pe(me,Se-Ue))):(H.sortIndex=Ge,e(x,H),U||I||(U=!0,ye||(ye=!0,O()))),H},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(H){var ge=N;return function(){var Se=N;N=ge;try{return H.apply(this,arguments)}finally{N=Se}}}})(Mg)),Mg}var jv;function ej(){return jv||(jv=1,Og.exports=ZE()),Og.exports}var Vg={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function tj(){if(Sv)return Qn;Sv=1;var s=Bp();function e(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(x,p,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:x,containerInfo:p,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Qn.createPortal=function(x,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(x,p,null,b)},Qn.flushSync=function(x){var p=h.T,b=a.p;try{if(h.T=null,a.p=2,x)return x()}finally{h.T=p,a.p=b,a.d.f()}},Qn.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(x,p))},Qn.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},Qn.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var b=p.as,_=g(b,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:N,fetchPriority:I}):b==="script"&&a.d.X(x,{crossOrigin:_,integrity:N,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qn.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);a.d.M(x,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(x)},Qn.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,_=g(b,p.crossOrigin);a.d.L(x,b,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qn.preloadModule=function(x,p){if(typeof x=="string")if(p){var b=g(p.as,p.crossOrigin);a.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(x)},Qn.requestFormReset=function(x){a.d.r(x)},Qn.unstable_batchedUpdates=function(x,p){return x(p)},Qn.useFormState=function(x,p,b){return h.H.useFormState(x,p,b)},Qn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Qn.version="19.2.0",Qn}var Cv;function nj(){if(Cv)return Vg.exports;Cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vg.exports=tj(),Vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function sj(){if(Av)return Yc;Av=1;var s=ej(),e=Bp(),t=nj();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function x(n){if(u(n)!==n)throw Error(a(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(a(188));return r!==n?null:n}for(var l=n,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return x(f),n;if(m===c)return x(f),r;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,T=f.child;T;){if(T===l){v=!0,l=f,c=m;break}if(T===c){v=!0,c=f,l=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===l){v=!0,l=m,c=f;break}if(T===c){v=!0,c=m,l=f;break}T=T.sibling}if(!v)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,N=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function _e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case D:return"Profiler";case z:return"StrictMode";case me:return"Suspense";case ye:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case Q:return n.displayName||"Context";case Z:return(n._context.displayName||"Context")+".Consumer";case ae:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return r=n.displayName||null,r!==null?r:_e(n.type)||"Memo";case j:r=n._payload,n=n._init;try{return _e(n(r))}catch{}}return null}var Pe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ue=[],Ge=-1;function P(n){return{current:n}}function ne(n){0>Ge||(n.current=Ue[Ge],Ue[Ge]=null,Ge--)}function xe(n,r){Ge++,Ue[Ge]=n.current,n.current=r}var G=P(null),pe=P(null),Y=P(null),V=P(null);function q(n,r){switch(xe(Y,r),xe(pe,n),xe(G,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?qb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=qb(r),n=Gb(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(G),xe(G,n)}function le(){ne(G),ne(pe),ne(Y)}function Ie(n){n.memoizedState!==null&&xe(V,n);var r=G.current,l=Gb(r,n.type);r!==l&&(xe(pe,n),xe(G,l))}function Ne(n){pe.current===n&&(ne(G),ne(pe)),V.current===n&&(ne(V),Fc._currentValue=Se)}var Ae,Ve;function et(n){if(Ae===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Ae=r&&r[1]||"",Ve=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+n+Ve}var vt=!1;function Xt(n,r){if(!n||vt)return"";vt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var te=re}Reflect.construct(n,[],he)}else{try{he.call()}catch(re){te=re}n.call(he.prototype)}}else{try{throw Error()}catch(re){te=re}(he=n())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var L=v.split(`
`),J=T.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===J.length)for(c=L.length-1,f=J.length-1;1<=c&&0<=f&&L[c]!==J[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==J[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==J[f]){var ie=`
`+L[c].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=c&&0<=f);break}}}finally{vt=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?et(l):""}function Pt(n,r){switch(n.tag){case 26:case 27:case 5:return et(n.type);case 16:return et("Lazy");case 13:return n.child!==r&&r!==null?et("Suspense Fallback"):et("Suspense");case 19:return et("SuspenseList");case 0:case 15:return Xt(n.type,!1);case 11:return Xt(n.type.render,!1);case 1:return Xt(n.type,!0);case 31:return et("Activity");default:return""}}function Tn(n){try{var r="",l=null;do r+=Pt(n,l),l=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Nt=Object.prototype.hasOwnProperty,qt=s.unstable_scheduleCallback,kn=s.unstable_cancelCallback,ts=s.unstable_shouldYield,hs=s.unstable_requestPaint,tn=s.unstable_now,Fe=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,pt=s.unstable_UserBlockingPriority,Ut=s.unstable_NormalPriority,on=s.unstable_LowPriority,Dn=s.unstable_IdlePriority,On=s.log,$n=s.unstable_setDisableYieldValue,Gt=null,kt=null;function mn(n){if(typeof On=="function"&&$n(n),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Gt,n)}catch{}}var Tt=Math.clz32?Math.clz32:jr,zs=Math.log,Mn=Math.LN2;function jr(n){return n>>>=0,n===0?32:31-(zs(n)/Mn|0)|0}var ds=256,lr=262144,Bt=4194304;function fs(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ms(n,r,l){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~m,c!==0?f=fs(c):(v&=T,v!==0?f=fs(v):l||(l=T&~n,l!==0&&(f=fs(l))))):(T=c&~m,T!==0?f=fs(T):v!==0?f=fs(v):l||(l=c&~n,l!==0&&(f=fs(l)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:f}function ns(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Pi(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(){var n=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),n}function ee(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function oe(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Te(n,r,l,c,f,m){var v=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var T=n.entanglements,L=n.expirationTimes,J=n.hiddenUpdates;for(l=v&~l;0<l;){var ie=31-Tt(l),he=1<<ie;T[ie]=0,L[ie]=-1;var te=J[ie];if(te!==null)for(J[ie]=null,ie=0;ie<te.length;ie++){var re=te[ie];re!==null&&(re.lane&=-536870913)}l&=~he}c!==0&&je(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~r))}function je(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Tt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function be(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var c=31-Tt(l),f=1<<c;f&r|n[c]&r&&(n[c]|=r),l&=~f}}function Ye(n,r){var l=r&-r;return l=(l&42)!==0?1:qe(l),(l&(n.suspendedLanes|r))!==0?0:l}function qe(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function at(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Et(){var n=ge.p;return n!==0?n:(n=window.event,n===void 0?32:mv(n.type))}function xt(n,r){var l=ge.p;try{return ge.p=n,r()}finally{ge.p=l}}var B=Math.random().toString(36).slice(2),fe="__reactFiber$"+B,ve="__reactProps$"+B,Le="__reactContainer$"+B,Me="__reactEvents$"+B,rt="__reactListeners$"+B,Dt="__reactHandles$"+B,Vn="__reactResources$"+B,$t="__reactMarker$"+B;function or(n){delete n[fe],delete n[ve],delete n[Me],delete n[rt],delete n[Dt]}function Kn(n){var r=n[fe];if(r)return r;for(var l=n.parentNode;l;){if(r=l[Le]||l[fe]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=Jb(n);n!==null;){if(l=n[fe])return l;n=Jb(n)}return r}n=l,l=n.parentNode}return null}function ss(n){if(n=n[fe]||n[Le]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Yn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Bs(n){var r=n[Vn];return r||(r=n[Vn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gn(n){n[$t]=!0}var Xo=new Set,Wo={};function Sr(n,r){Cr(n,r),Cr(n+"Capture",r)}function Cr(n,r){for(Wo[n]=r,n=0;n<r.length;n++)Xo.add(r[n])}var Jo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},ec={};function Xu(n){return Nt.call(ec,n)?!0:Nt.call(Zo,n)?!1:Jo.test(n)?ec[n]=!0:(Zo[n]=!0,!1)}function Al(n,r,l){if(Xu(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function js(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function pn(n,r,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+c)}}function Cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pa(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tc(n,r,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ct(n){if(!n._valueTracker){var r=Pa(n)?"checked":"value";n._valueTracker=tc(n,r,""+n[r])}}function Ui(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return n&&(c=Pa(n)?n.checked?"true":"false":n.value),n=c,n!==l?(r.setValue(n),!0):!1}function Ar(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var zi=/[\n"\\]/g;function gs(n){return n.replace(zi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Rl(n,r,l,c,f,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Cn(r)):n.value!==""+Cn(r)&&(n.value=""+Cn(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?nc(n,v,Cn(r)):l!=null?nc(n,v,Cn(l)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Cn(T):n.removeAttribute("name")}function Wu(n,r,l,c,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ct(n);return}l=l!=null?""+Cn(l):"",r=r!=null?""+Cn(r):l,T||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ct(n)}function nc(n,r,l){r==="number"&&Ar(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Ua(n,r,l,c){if(n=n.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=r.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+Cn(l),r=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Ju(n,r,l){if(r!=null&&(r=""+Cn(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+Cn(l):""}function za(n,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(a(92));if(Pe(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Cn(r),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),Ct(n)}function ps(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var Zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(n,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,l):typeof l!="number"||l===0||Zu.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function rc(n,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&l[f]!==c&&sc(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&sc(n,m,r[m])}function Il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ba=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(n){return Ba.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function cr(){}var ac=null;function Hs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ha=null,Rr=null;function Bi(n){var r=ss(n);if(r&&(n=r.stateNode)){var l=n[ve]||null;e:switch(n=r.stateNode,r.type){case"input":if(Rl(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+gs(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==n&&c.form===n.form){var f=c[ve]||null;if(!f)throw Error(a(90));Rl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===n.form&&Ui(c)}break e;case"textarea":Ju(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ua(n,!!l.multiple,r,!1)}}}var Dl=!1;function Fa(n,r,l){if(Dl)return n(r,l);Dl=!0;try{var c=n(r);return c}finally{if(Dl=!1,(Ha!==null||Rr!==null)&&(Kh(),Ha&&(r=Ha,n=Rr,Rr=Ha=null,Bi(r),n)))for(r=0;r<n.length;r++)Bi(n[r])}}function ur(n,r){var l=n.stateNode;if(l===null)return null;var c=l[ve]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hi=!1;if(Fs)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Hi=!1}var Ir=null,ic=null,Fi=null;function lc(){if(Fi)return Fi;var n,r=ic,l=r.length,c,f="value"in Ir?Ir.value:Ir.textContent,m=f.length;for(n=0;n<l&&r[n]===f[n];n++);var v=l-n;for(c=1;c<=v&&r[l-c]===f[m-c];c++);return Fi=f.slice(n,1<c?1-c:void 0)}function qi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function sa(){return!0}function hr(){return!1}function Ln(n){function r(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(l=n[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?sa:hr,this.isPropagationStopped=hr,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),r}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=Ln(ra),qa=_({},ra,{view:0,detail:0}),oc=Ln(qa),Ga,Ol,Dr,Ml=_({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(Ga=n.screenX-Dr.screenX,Ol=n.screenY-Dr.screenY):Ol=Ga=0,Dr=n),Ga)},movementY:function(n){return"movementY"in n?n.movementY:Ol}}),cc=Ln(Ml),Gi=_({},Ml,{dataTransfer:0}),th=Ln(Gi),nh=_({},qa,{relatedTarget:0}),$i=Ln(nh),uc=_({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),sh=Ln(uc),Vl=_({},ra,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rh=Ln(Vl),ah=_({},ra,{data:0}),Or=Ln(ah),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=oh[n])?!!r[n]:!1}function $a(){return ch}var rs=_({},qa,{key:function(n){if(n.key){var r=ih[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(n){return n.type==="keypress"?qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uh=Ln(rs),hh=_({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=Ln(hh),d=_({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),y=Ln(d),w=_({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Ln(w),X=_({},Ml,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),se=Ln(X),Ee=_({},ra,{newState:0,oldState:0}),tt=Ln(Ee),cn=[9,13,27,32],wt=Fs&&"CompositionEvent"in window,Wt=null;Fs&&"documentMode"in document&&(Wt=document.documentMode);var qs=Fs&&"TextEvent"in window&&!Wt,Mr=Fs&&(!wt||Wt&&8<Wt&&11>=Wt),dr=" ",fr=!1;function Ki(n,r){switch(n){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ll(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pl=!1;function vT(n,r){switch(n){case"compositionend":return Ll(r);case"keypress":return r.which!==32?null:(fr=!0,dr);case"textInput":return n=r.data,n===dr&&fr?null:n;default:return null}}function wT(n,r){if(Pl)return n==="compositionend"||!wt&&Ki(n,r)?(n=lc(),Fi=ic=Ir=null,Pl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Mr&&r.locale!=="ko"?null:r.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tx(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_T[n.type]:r==="textarea"}function nx(n,r,l,c){Ha?Rr?Rr.push(c):Rr=[c]:Ha=c,r=ed(r,"onChange"),0<r.length&&(l=new kr("onChange","change",null,l,c),n.push({event:l,listeners:r}))}var hc=null,dc=null;function NT(n){Pb(n,0)}function dh(n){var r=Yn(n);if(Ui(r))return n}function sx(n,r){if(n==="change")return r}var rx=!1;if(Fs){var Pf;if(Fs){var Uf="oninput"in document;if(!Uf){var ax=document.createElement("div");ax.setAttribute("oninput","return;"),Uf=typeof ax.oninput=="function"}Pf=Uf}else Pf=!1;rx=Pf&&(!document.documentMode||9<document.documentMode)}function ix(){hc&&(hc.detachEvent("onpropertychange",lx),dc=hc=null)}function lx(n){if(n.propertyName==="value"&&dh(dc)){var r=[];nx(r,dc,n,Hs(n)),Fa(NT,r)}}function TT(n,r,l){n==="focusin"?(ix(),hc=r,dc=l,hc.attachEvent("onpropertychange",lx)):n==="focusout"&&ix()}function ET(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return dh(dc)}function jT(n,r){if(n==="click")return dh(r)}function ST(n,r){if(n==="input"||n==="change")return dh(r)}function CT(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ss=typeof Object.is=="function"?Object.is:CT;function fc(n,r){if(Ss(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!Nt.call(r,f)||!Ss(n[f],r[f]))return!1}return!0}function ox(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cx(n,r){var l=ox(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=r&&c>=r)return{node:l,offset:r-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ox(l)}}function ux(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ux(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function hx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ar(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=Ar(n.document)}return r}function zf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var AT=Fs&&"documentMode"in document&&11>=document.documentMode,Ul=null,Bf=null,mc=null,Hf=!1;function dx(n,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hf||Ul==null||Ul!==Ar(c)||(c=Ul,"selectionStart"in c&&zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),mc&&fc(mc,c)||(mc=c,c=ed(Bf,"onSelect"),0<c.length&&(r=new kr("onSelect","select",null,r,l),n.push({event:r,listeners:c}),r.target=Ul)))}function Yi(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var zl={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},Ff={},fx={};Fs&&(fx=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function Qi(n){if(Ff[n])return Ff[n];if(!zl[n])return n;var r=zl[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in fx)return Ff[n]=r[l];return n}var mx=Qi("animationend"),gx=Qi("animationiteration"),px=Qi("animationstart"),RT=Qi("transitionrun"),IT=Qi("transitionstart"),kT=Qi("transitioncancel"),xx=Qi("transitionend"),yx=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function mr(n,r){yx.set(n,r),Sr(r,[n])}var fh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Gs=[],Bl=0,Gf=0;function mh(){for(var n=Bl,r=Gf=Bl=0;r<n;){var l=Gs[r];Gs[r++]=null;var c=Gs[r];Gs[r++]=null;var f=Gs[r];Gs[r++]=null;var m=Gs[r];if(Gs[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&bx(l,f,m)}}function gh(n,r,l,c){Gs[Bl++]=n,Gs[Bl++]=r,Gs[Bl++]=l,Gs[Bl++]=c,Gf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function $f(n,r,l,c){return gh(n,r,l,c),ph(n)}function Xi(n,r){return gh(n,null,null,r),ph(n)}function bx(n,r,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=n.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Tt(l),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=l|536870912),m):null}function ph(n){if(50<Vc)throw Vc=0,tg=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Hl={};function DT(n,r,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(n,r,l,c){return new DT(n,r,l,c)}function Kf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ia(n,r){var l=n.alternate;return l===null?(l=Cs(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function vx(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function xh(n,r,l,c,f,m){var v=0;if(c=n,typeof n=="function")Kf(n)&&(v=1);else if(typeof n=="string")v=PE(n,l,G.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=Cs(31,l,r,f),n.elementType=A,n.lanes=m,n;case $:return Wi(l.children,f,m,r);case z:v=8,f|=24;break;case D:return n=Cs(12,l,r,f|2),n.elementType=D,n.lanes=m,n;case me:return n=Cs(13,l,r,f),n.elementType=me,n.lanes=m,n;case ye:return n=Cs(19,l,r,f),n.elementType=ye,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:v=10;break e;case Z:v=9;break e;case ae:v=11;break e;case S:v=14;break e;case j:v=16,c=null;break e}v=29,l=Error(a(130,n===null?"null":typeof n,"")),c=null}return r=Cs(v,l,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function Wi(n,r,l,c){return n=Cs(7,n,c,r),n.lanes=l,n}function Yf(n,r,l){return n=Cs(6,n,null,r),n.lanes=l,n}function wx(n){var r=Cs(18,null,null,0);return r.stateNode=n,r}function Qf(n,r,l){return r=Cs(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var _x=new WeakMap;function $s(n,r){if(typeof n=="object"&&n!==null){var l=_x.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Tn(r)},_x.set(n,r),r)}return{value:n,source:r,stack:Tn(r)}}var Fl=[],ql=0,yh=null,gc=0,Ks=[],Ys=0,Ka=null,Vr=1,Lr="";function la(n,r){Fl[ql++]=gc,Fl[ql++]=yh,yh=n,gc=r}function Nx(n,r,l){Ks[Ys++]=Vr,Ks[Ys++]=Lr,Ks[Ys++]=Ka,Ka=n;var c=Vr;n=Lr;var f=32-Tt(c)-1;c&=~(1<<f),l+=1;var m=32-Tt(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Vr=1<<32-Tt(r)+f|l<<f|c,Lr=m+n}else Vr=1<<m|l<<f|c,Lr=n}function Xf(n){n.return!==null&&(la(n,1),Nx(n,1,0))}function Wf(n){for(;n===yh;)yh=Fl[--ql],Fl[ql]=null,gc=Fl[--ql],Fl[ql]=null;for(;n===Ka;)Ka=Ks[--Ys],Ks[Ys]=null,Lr=Ks[--Ys],Ks[Ys]=null,Vr=Ks[--Ys],Ks[Ys]=null}function Tx(n,r){Ks[Ys++]=Vr,Ks[Ys++]=Lr,Ks[Ys++]=Ka,Vr=r.id,Lr=r.overflow,Ka=n}var Pn=null,Kt=null,mt=!1,Ya=null,Qs=!1,Jf=Error(a(519));function Qa(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pc($s(r,n)),Jf}function Ex(n){var r=n.stateNode,l=n.type,c=n.memoizedProps;switch(r[fe]=n,r[ve]=c,l){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(l=0;l<Pc.length;l++)ot(Pc[l],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":ot("invalid",r),Wu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ot("invalid",r);break;case"textarea":ot("invalid",r),za(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Hb(r.textContent,l)?(c.popover!=null&&(ot("beforetoggle",r),ot("toggle",r)),c.onScroll!=null&&ot("scroll",r),c.onScrollEnd!=null&&ot("scrollend",r),c.onClick!=null&&(r.onclick=cr),r=!0):r=!1,r||Qa(n,!0)}function jx(n){for(Pn=n.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Pn=Pn.return}}function Gl(n){if(n!==Pn)return!1;if(!mt)return jx(n),mt=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||pg(n.type,n.memoizedProps)),l=!l),l&&Kt&&Qa(n),jx(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Kt=Wb(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Kt=Wb(n)}else r===27?(r=Kt,ci(n.type)?(n=wg,wg=null,Kt=n):Kt=r):Kt=Pn?Ws(n.stateNode.nextSibling):null;return!0}function Ji(){Kt=Pn=null,mt=!1}function Zf(){var n=Ya;return n!==null&&(vs===null?vs=n:vs.push.apply(vs,n),Ya=null),n}function pc(n){Ya===null?Ya=[n]:Ya.push(n)}var em=P(null),Zi=null,oa=null;function Xa(n,r,l){xe(em,r._currentValue),r._currentValue=l}function ca(n){n._currentValue=em.current,ne(em)}function tm(n,r,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===l)break;n=n.return}}function nm(n,r,l,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var L=0;L<r.length;L++)if(T.context===r[L]){m.lanes|=l,T=m.alternate,T!==null&&(T.lanes|=l),tm(m.return,l,n),c||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),tm(v,l,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function $l(n,r,l,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var T=f.type;Ss(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===V.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Fc):n=[Fc])}f=f.return}n!==null&&nm(r,n,l,c),r.flags|=262144}function bh(n){for(n=n.firstContext;n!==null;){if(!Ss(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function el(n){Zi=n,oa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Un(n){return Sx(Zi,n)}function vh(n,r){return Zi===null&&el(n),Sx(n,r)}function Sx(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},oa===null){if(n===null)throw Error(a(308));oa=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else oa=oa.next=r;return l}var OT=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},MT=s.unstable_scheduleCallback,VT=s.unstable_NormalPriority,xn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new OT,data:new Map,refCount:0}}function xc(n){n.refCount--,n.refCount===0&&MT(VT,function(){n.controller.abort()})}var yc=null,rm=0,Kl=0,Yl=null;function LT(n,r){if(yc===null){var l=yc=[];rm=0,Kl=lg(),Yl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return rm++,r.then(Cx,Cx),r}function Cx(){if(--rm===0&&yc!==null){Yl!==null&&(Yl.status="fulfilled");var n=yc;yc=null,Kl=0,Yl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function PT(n,r){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<l.length;f++)(0,l[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Ax=H.S;H.S=function(n,r){db=tn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&LT(n,r),Ax!==null&&Ax(n,r)};var tl=P(null);function am(){var n=tl.current;return n!==null?n:zt.pooledCache}function wh(n,r){r===null?xe(tl,tl.current):xe(tl,r.pool)}function Rx(){var n=am();return n===null?null:{parent:xn._currentValue,pool:n}}var Ql=Error(a(460)),im=Error(a(474)),_h=Error(a(542)),Nh={then:function(){}};function Ix(n){return n=n.status,n==="fulfilled"||n==="rejected"}function kx(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(cr,cr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ox(n),n;default:if(typeof r.status=="string")r.then(cr,cr);else{if(n=zt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ox(n),n}throw sl=r,Ql}}function nl(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(sl=l,Ql):l}}var sl=null;function Dx(){if(sl===null)throw Error(a(459));var n=sl;return sl=null,n}function Ox(n){if(n===Ql||n===_h)throw Error(a(483))}var Xl=null,bc=0;function Th(n){var r=bc;return bc+=1,Xl===null&&(Xl=[]),kx(Xl,n,r)}function vc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Eh(n,r){throw r.$$typeof===N?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Mx(n){function r(K,F){if(n){var W=K.deletions;W===null?(K.deletions=[F],K.flags|=16):W.push(F)}}function l(K,F){if(!n)return null;for(;F!==null;)r(K,F),F=F.sibling;return null}function c(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function f(K,F){return K=ia(K,F),K.index=0,K.sibling=null,K}function m(K,F,W){return K.index=W,n?(W=K.alternate,W!==null?(W=W.index,W<F?(K.flags|=67108866,F):W):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function v(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function T(K,F,W,ce){return F===null||F.tag!==6?(F=Yf(W,K.mode,ce),F.return=K,F):(F=f(F,W),F.return=K,F)}function L(K,F,W,ce){var ze=W.type;return ze===$?ie(K,F,W.props.children,ce,W.key):F!==null&&(F.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===j&&nl(ze)===F.type)?(F=f(F,W.props),vc(F,W),F.return=K,F):(F=xh(W.type,W.key,W.props,null,K.mode,ce),vc(F,W),F.return=K,F)}function J(K,F,W,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=Qf(W,K.mode,ce),F.return=K,F):(F=f(F,W.children||[]),F.return=K,F)}function ie(K,F,W,ce,ze){return F===null||F.tag!==7?(F=Wi(W,K.mode,ce,ze),F.return=K,F):(F=f(F,W),F.return=K,F)}function he(K,F,W){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Yf(""+F,K.mode,W),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return W=xh(F.type,F.key,F.props,null,K.mode,W),vc(W,F),W.return=K,W;case U:return F=Qf(F,K.mode,W),F.return=K,F;case j:return F=nl(F),he(K,F,W)}if(Pe(F)||O(F))return F=Wi(F,K.mode,W,null),F.return=K,F;if(typeof F.then=="function")return he(K,Th(F),W);if(F.$$typeof===Q)return he(K,vh(K,F),W);Eh(K,F)}return null}function te(K,F,W,ce){var ze=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ze!==null?null:T(K,F,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return W.key===ze?L(K,F,W,ce):null;case U:return W.key===ze?J(K,F,W,ce):null;case j:return W=nl(W),te(K,F,W,ce)}if(Pe(W)||O(W))return ze!==null?null:ie(K,F,W,ce,null);if(typeof W.then=="function")return te(K,F,Th(W),ce);if(W.$$typeof===Q)return te(K,F,vh(K,W),ce);Eh(K,W)}return null}function re(K,F,W,ce,ze){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(W)||null,T(F,K,""+ce,ze);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:return K=K.get(ce.key===null?W:ce.key)||null,L(F,K,ce,ze);case U:return K=K.get(ce.key===null?W:ce.key)||null,J(F,K,ce,ze);case j:return ce=nl(ce),re(K,F,W,ce,ze)}if(Pe(ce)||O(ce))return K=K.get(W)||null,ie(F,K,ce,ze,null);if(typeof ce.then=="function")return re(K,F,W,Th(ce),ze);if(ce.$$typeof===Q)return re(K,F,W,vh(F,ce),ze);Eh(F,ce)}return null}function De(K,F,W,ce){for(var ze=null,yt=null,Oe=F,st=F=0,ut=null;Oe!==null&&st<W.length;st++){Oe.index>st?(ut=Oe,Oe=null):ut=Oe.sibling;var bt=te(K,Oe,W[st],ce);if(bt===null){Oe===null&&(Oe=ut);break}n&&Oe&&bt.alternate===null&&r(K,Oe),F=m(bt,F,st),yt===null?ze=bt:yt.sibling=bt,yt=bt,Oe=ut}if(st===W.length)return l(K,Oe),mt&&la(K,st),ze;if(Oe===null){for(;st<W.length;st++)Oe=he(K,W[st],ce),Oe!==null&&(F=m(Oe,F,st),yt===null?ze=Oe:yt.sibling=Oe,yt=Oe);return mt&&la(K,st),ze}for(Oe=c(Oe);st<W.length;st++)ut=re(Oe,K,st,W[st],ce),ut!==null&&(n&&ut.alternate!==null&&Oe.delete(ut.key===null?st:ut.key),F=m(ut,F,st),yt===null?ze=ut:yt.sibling=ut,yt=ut);return n&&Oe.forEach(function(mi){return r(K,mi)}),mt&&la(K,st),ze}function Ke(K,F,W,ce){if(W==null)throw Error(a(151));for(var ze=null,yt=null,Oe=F,st=F=0,ut=null,bt=W.next();Oe!==null&&!bt.done;st++,bt=W.next()){Oe.index>st?(ut=Oe,Oe=null):ut=Oe.sibling;var mi=te(K,Oe,bt.value,ce);if(mi===null){Oe===null&&(Oe=ut);break}n&&Oe&&mi.alternate===null&&r(K,Oe),F=m(mi,F,st),yt===null?ze=mi:yt.sibling=mi,yt=mi,Oe=ut}if(bt.done)return l(K,Oe),mt&&la(K,st),ze;if(Oe===null){for(;!bt.done;st++,bt=W.next())bt=he(K,bt.value,ce),bt!==null&&(F=m(bt,F,st),yt===null?ze=bt:yt.sibling=bt,yt=bt);return mt&&la(K,st),ze}for(Oe=c(Oe);!bt.done;st++,bt=W.next())bt=re(Oe,K,st,bt.value,ce),bt!==null&&(n&&bt.alternate!==null&&Oe.delete(bt.key===null?st:bt.key),F=m(bt,F,st),yt===null?ze=bt:yt.sibling=bt,yt=bt);return n&&Oe.forEach(function(QE){return r(K,QE)}),mt&&la(K,st),ze}function Lt(K,F,W,ce){if(typeof W=="object"&&W!==null&&W.type===$&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case I:e:{for(var ze=W.key;F!==null;){if(F.key===ze){if(ze=W.type,ze===$){if(F.tag===7){l(K,F.sibling),ce=f(F,W.props.children),ce.return=K,K=ce;break e}}else if(F.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===j&&nl(ze)===F.type){l(K,F.sibling),ce=f(F,W.props),vc(ce,W),ce.return=K,K=ce;break e}l(K,F);break}else r(K,F);F=F.sibling}W.type===$?(ce=Wi(W.props.children,K.mode,ce,W.key),ce.return=K,K=ce):(ce=xh(W.type,W.key,W.props,null,K.mode,ce),vc(ce,W),ce.return=K,K=ce)}return v(K);case U:e:{for(ze=W.key;F!==null;){if(F.key===ze)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){l(K,F.sibling),ce=f(F,W.children||[]),ce.return=K,K=ce;break e}else{l(K,F);break}else r(K,F);F=F.sibling}ce=Qf(W,K.mode,ce),ce.return=K,K=ce}return v(K);case j:return W=nl(W),Lt(K,F,W,ce)}if(Pe(W))return De(K,F,W,ce);if(O(W)){if(ze=O(W),typeof ze!="function")throw Error(a(150));return W=ze.call(W),Ke(K,F,W,ce)}if(typeof W.then=="function")return Lt(K,F,Th(W),ce);if(W.$$typeof===Q)return Lt(K,F,vh(K,W),ce);Eh(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,F!==null&&F.tag===6?(l(K,F.sibling),ce=f(F,W),ce.return=K,K=ce):(l(K,F),ce=Yf(W,K.mode,ce),ce.return=K,K=ce),v(K)):l(K,F)}return function(K,F,W,ce){try{bc=0;var ze=Lt(K,F,W,ce);return Xl=null,ze}catch(Oe){if(Oe===Ql||Oe===_h)throw Oe;var yt=Cs(29,Oe,null,K.mode);return yt.lanes=ce,yt.return=K,yt}finally{}}}var rl=Mx(!0),Vx=Mx(!1),Wa=!1;function lm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function om(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ja(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Za(n,r,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=ph(n),bx(n,null,l),r}return gh(n,c,r,l),ph(n)}function wc(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,be(n,l)}}function cm(n,r){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var um=!1;function _c(){if(um){var n=Yl;if(n!==null)throw n}}function Nc(n,r,l,c){um=!1;var f=n.updateQueue;Wa=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var L=T,J=L.next;L.next=null,v===null?m=J:v.next=J,v=L;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==v&&(T===null?ie.firstBaseUpdate=J:T.next=J,ie.lastBaseUpdate=L))}if(m!==null){var he=f.baseState;v=0,ie=J=L=null,T=m;do{var te=T.lane&-536870913,re=te!==T.lane;if(re?(ct&te)===te:(c&te)===te){te!==0&&te===Kl&&(um=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var De=n,Ke=T;te=r;var Lt=l;switch(Ke.tag){case 1:if(De=Ke.payload,typeof De=="function"){he=De.call(Lt,he,te);break e}he=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ke.payload,te=typeof De=="function"?De.call(Lt,he,te):De,te==null)break e;he=_({},he,te);break e;case 2:Wa=!0}}te=T.callback,te!==null&&(n.flags|=64,re&&(n.flags|=8192),re=f.callbacks,re===null?f.callbacks=[te]:re.push(te))}else re={lane:te,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(J=ie=re,L=he):ie=ie.next=re,v|=te;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;re=T,T=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);ie===null&&(L=he),f.baseState=L,f.firstBaseUpdate=J,f.lastBaseUpdate=ie,m===null&&(f.shared.lanes=0),ri|=v,n.lanes=v,n.memoizedState=he}}function Lx(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function Px(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Lx(l[n],r)}var Wl=P(null),jh=P(0);function Ux(n,r){n=ya,xe(jh,n),xe(Wl,r),ya=n|r.baseLanes}function hm(){xe(jh,ya),xe(Wl,Wl.current)}function dm(){ya=jh.current,ne(Wl),ne(jh)}var As=P(null),Xs=null;function ei(n){var r=n.alternate;xe(un,un.current&1),xe(As,n),Xs===null&&(r===null||Wl.current!==null||r.memoizedState!==null)&&(Xs=n)}function fm(n){xe(un,un.current),xe(As,n),Xs===null&&(Xs=n)}function zx(n){n.tag===22?(xe(un,un.current),xe(As,n),Xs===null&&(Xs=n)):ti()}function ti(){xe(un,un.current),xe(As,As.current)}function Rs(n){ne(As),Xs===n&&(Xs=null),ne(un)}var un=P(0);function Sh(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||bg(l)||vg(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ua=0,nt=null,Mt=null,yn=null,Ch=!1,Jl=!1,al=!1,Ah=0,Tc=0,Zl=null,UT=0;function nn(){throw Error(a(321))}function mm(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Ss(n[l],r[l]))return!1;return!0}function gm(n,r,l,c,f,m){return ua=m,nt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=n===null||n.memoizedState===null?Ny:Rm,al=!1,m=l(c,f),al=!1,Jl&&(m=Hx(r,l,c,f)),Bx(n),m}function Bx(n){H.H=Sc;var r=Mt!==null&&Mt.next!==null;if(ua=0,yn=Mt=nt=null,Ch=!1,Tc=0,Zl=null,r)throw Error(a(300));n===null||bn||(n=n.dependencies,n!==null&&bh(n)&&(bn=!0))}function Hx(n,r,l,c){nt=n;var f=0;do{if(Jl&&(Zl=null),Tc=0,Jl=!1,25<=f)throw Error(a(301));if(f+=1,yn=Mt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=Ty,m=r(l,c)}while(Jl);return m}function zT(){var n=H.H,r=n.useState()[0];return r=typeof r.then=="function"?Ec(r):r,n=n.useState()[0],(Mt!==null?Mt.memoizedState:null)!==n&&(nt.flags|=1024),r}function pm(){var n=Ah!==0;return Ah=0,n}function xm(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function ym(n){if(Ch){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ch=!1}ua=0,yn=Mt=nt=null,Jl=!1,Tc=Ah=0,Zl=null}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?nt.memoizedState=yn=n:yn=yn.next=n,yn}function hn(){if(Mt===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=Mt.next;var r=yn===null?nt.memoizedState:yn.next;if(r!==null)yn=r,Mt=n;else{if(n===null)throw nt.alternate===null?Error(a(467)):Error(a(310));Mt=n,n={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},yn===null?nt.memoizedState=yn=n:yn=yn.next=n}return yn}function Rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(n){var r=Tc;return Tc+=1,Zl===null&&(Zl=[]),n=kx(Zl,n,r),r=nt,(yn===null?r.memoizedState:yn.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?Ny:Rm),n}function Ih(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ec(n);if(n.$$typeof===Q)return Un(n)}throw Error(a(438,String(n)))}function bm(n){var r=null,l=nt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=nt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Rh(),nt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),c=0;c<n;c++)l[c]=M;return r.index++,l}function ha(n,r){return typeof r=="function"?r(n):r}function kh(n){var r=hn();return vm(r,Mt,n)}function vm(n,r,l){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var T=v=null,L=null,J=r,ie=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(ct&he)===he:(ua&he)===he){var te=J.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Kl&&(ie=!0);else if((ua&te)===te){J=J.next,te===Kl&&(ie=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(T=L=he,v=m):L=L.next=he,nt.lanes|=te,ri|=te;he=J.action,al&&l(m,he),m=J.hasEagerState?J.eagerState:l(m,he)}else te={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(T=L=te,v=m):L=L.next=te,nt.lanes|=he,ri|=he;J=J.next}while(J!==null&&J!==r);if(L===null?v=m:L.next=T,!Ss(m,n.memoizedState)&&(bn=!0,ie&&(l=Yl,l!==null)))throw l;n.memoizedState=m,n.baseState=v,n.baseQueue=L,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function wm(n){var r=hn(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Ss(m,r.memoizedState)||(bn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function Fx(n,r,l){var c=nt,f=hn(),m=mt;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=r();var v=!Ss((Mt||f).memoizedState,l);if(v&&(f.memoizedState=l,bn=!0),f=f.queue,Tm($x.bind(null,c,f,n),[n]),f.getSnapshot!==r||v||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,eo(9,{destroy:void 0},Gx.bind(null,c,f,l,r),null),zt===null)throw Error(a(349));m||(ua&127)!==0||qx(c,r,l)}return l}function qx(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=nt.updateQueue,r===null?(r=Rh(),nt.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function Gx(n,r,l,c){r.value=l,r.getSnapshot=c,Kx(r)&&Yx(n)}function $x(n,r,l){return l(function(){Kx(r)&&Yx(n)})}function Kx(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Ss(n,l)}catch{return!0}}function Yx(n){var r=Xi(n,2);r!==null&&ws(r,n,2)}function _m(n){var r=as();if(typeof n=="function"){var l=n;if(n=l(),al){mn(!0);try{l()}finally{mn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},r}function Qx(n,r,l,c){return n.baseState=l,vm(n,Mt,typeof c=="function"?c:ha)}function BT(n,r,l,c,f){if(Mh(n))throw Error(a(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};H.T!==null?l(!0):m.isTransition=!1,c(m),l=r.pending,l===null?(m.next=r.pending=m,Xx(r,m)):(m.next=l.next,r.pending=l.next=m)}}function Xx(n,r){var l=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=H.T,v={};H.T=v;try{var T=l(f,c),L=H.S;L!==null&&L(v,T),Wx(n,r,T)}catch(J){Nm(n,r,J)}finally{m!==null&&v.types!==null&&(m.types=v.types),H.T=m}}else try{m=l(f,c),Wx(n,r,m)}catch(J){Nm(n,r,J)}}function Wx(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Jx(n,r,c)},function(c){return Nm(n,r,c)}):Jx(n,r,l)}function Jx(n,r,l){r.status="fulfilled",r.value=l,Zx(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,Xx(n,l)))}function Nm(n,r,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Zx(r),r=r.next;while(r!==c)}n.action=null}function Zx(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function ey(n,r){return r}function ty(n,r){if(mt){var l=zt.formState;if(l!==null){e:{var c=nt;if(mt){if(Kt){t:{for(var f=Kt,m=Qs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ws(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Kt=Ws(f.nextSibling),c=f.data==="F!";break e}}Qa(c)}c=!1}c&&(r=l[0])}}return l=as(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:r},l.queue=c,l=vy.bind(null,nt,c),c.dispatch=l,c=_m(!1),m=Am.bind(null,nt,!1,c.queue),c=as(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,l=BT.bind(null,nt,f,m,l),f.dispatch=l,c.memoizedState=n,[r,l,!1]}function ny(n){var r=hn();return sy(r,Mt,n)}function sy(n,r,l){if(r=vm(n,r,ey)[0],n=kh(ha)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ec(r)}catch(v){throw v===Ql?_h:v}else c=r;r=hn();var f=r.queue,m=f.dispatch;return l!==r.memoizedState&&(nt.flags|=2048,eo(9,{destroy:void 0},HT.bind(null,f,l),null)),[c,m,n]}function HT(n,r){n.action=r}function ry(n){var r=hn(),l=Mt;if(l!==null)return sy(r,l,n);hn(),r=r.memoizedState,l=hn();var c=l.queue.dispatch;return l.memoizedState=n,[r,c,!1]}function eo(n,r,l,c){return n={tag:n,create:l,deps:c,inst:r,next:null},r=nt.updateQueue,r===null&&(r=Rh(),nt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,r.lastEffect=n),n}function ay(){return hn().memoizedState}function Dh(n,r,l,c){var f=as();nt.flags|=n,f.memoizedState=eo(1|r,{destroy:void 0},l,c===void 0?null:c)}function Oh(n,r,l,c){var f=hn();c=c===void 0?null:c;var m=f.memoizedState.inst;Mt!==null&&c!==null&&mm(c,Mt.memoizedState.deps)?f.memoizedState=eo(r,m,l,c):(nt.flags|=n,f.memoizedState=eo(1|r,m,l,c))}function iy(n,r){Dh(8390656,8,n,r)}function Tm(n,r){Oh(2048,8,n,r)}function FT(n){nt.flags|=4;var r=nt.updateQueue;if(r===null)r=Rh(),nt.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function ly(n){var r=hn().memoizedState;return FT({ref:r,nextImpl:n}),function(){if((_t&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function oy(n,r){return Oh(4,2,n,r)}function cy(n,r){return Oh(4,4,n,r)}function uy(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function hy(n,r,l){l=l!=null?l.concat([n]):null,Oh(4,4,uy.bind(null,r,n),l)}function Em(){}function dy(n,r){var l=hn();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&mm(r,c[1])?c[0]:(l.memoizedState=[n,r],n)}function fy(n,r){var l=hn();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&mm(r,c[1]))return c[0];if(c=n(),al){mn(!0);try{n()}finally{mn(!1)}}return l.memoizedState=[c,r],c}function jm(n,r,l){return l===void 0||(ua&1073741824)!==0&&(ct&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=mb(),nt.lanes|=n,ri|=n,l)}function my(n,r,l,c){return Ss(l,r)?l:Wl.current!==null?(n=jm(n,l,c),Ss(n,r)||(bn=!0),n):(ua&42)===0||(ua&1073741824)!==0&&(ct&261930)===0?(bn=!0,n.memoizedState=l):(n=mb(),nt.lanes|=n,ri|=n,r)}function gy(n,r,l,c,f){var m=ge.p;ge.p=m!==0&&8>m?m:8;var v=H.T,T={};H.T=T,Am(n,!1,r,l);try{var L=f(),J=H.S;if(J!==null&&J(T,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=PT(L,c);jc(n,r,ie,Ds(n))}else jc(n,r,c,Ds(n))}catch(he){jc(n,r,{then:function(){},status:"rejected",reason:he},Ds())}finally{ge.p=m,v!==null&&T.types!==null&&(v.types=T.types),H.T=v}}function qT(){}function Sm(n,r,l,c){if(n.tag!==5)throw Error(a(476));var f=py(n).queue;gy(n,f,r,Se,l===null?qT:function(){return xy(n),l(c)})}function py(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:Se},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function xy(n){var r=py(n);r.next===null&&(r=n.alternate.memoizedState),jc(n,r.next.queue,{},Ds())}function Cm(){return Un(Fc)}function yy(){return hn().memoizedState}function by(){return hn().memoizedState}function GT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ds();n=Ja(l);var c=Za(r,n,l);c!==null&&(ws(c,r,l),wc(c,r,l)),r={cache:sm()},n.payload=r;return}r=r.return}}function $T(n,r,l){var c=Ds();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mh(n)?wy(r,l):(l=$f(n,r,l,c),l!==null&&(ws(l,n,c),_y(l,r,c)))}function vy(n,r,l){var c=Ds();jc(n,r,l,c)}function jc(n,r,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mh(n))wy(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,T=m(v,l);if(f.hasEagerState=!0,f.eagerState=T,Ss(T,v))return gh(n,r,f,0),zt===null&&mh(),!1}catch{}finally{}if(l=$f(n,r,f,c),l!==null)return ws(l,n,c),_y(l,r,c),!0}return!1}function Am(n,r,l,c){if(c={lane:2,revertLane:lg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Mh(n)){if(r)throw Error(a(479))}else r=$f(n,l,c,2),r!==null&&ws(r,n,2)}function Mh(n){var r=n.alternate;return n===nt||r!==null&&r===nt}function wy(n,r){Jl=Ch=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function _y(n,r,l){if((l&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,be(n,l)}}var Sc={readContext:Un,use:Ih,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};Sc.useEffectEvent=nn;var Ny={readContext:Un,use:Ih,useCallback:function(n,r){return as().memoizedState=[n,r===void 0?null:r],n},useContext:Un,useEffect:iy,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,Dh(4194308,4,uy.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Dh(4194308,4,n,r)},useInsertionEffect:function(n,r){Dh(4,2,n,r)},useMemo:function(n,r){var l=as();r=r===void 0?null:r;var c=n();if(al){mn(!0);try{n()}finally{mn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(n,r,l){var c=as();if(l!==void 0){var f=l(r);if(al){mn(!0);try{l(r)}finally{mn(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=$T.bind(null,nt,n),[c.memoizedState,n]},useRef:function(n){var r=as();return n={current:n},r.memoizedState=n},useState:function(n){n=_m(n);var r=n.queue,l=vy.bind(null,nt,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:Em,useDeferredValue:function(n,r){var l=as();return jm(l,n,r)},useTransition:function(){var n=_m(!1);return n=gy.bind(null,nt,n.queue,!0,!1),as().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var c=nt,f=as();if(mt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),zt===null)throw Error(a(349));(ct&127)!==0||qx(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,iy($x.bind(null,c,m,n),[n]),c.flags|=2048,eo(9,{destroy:void 0},Gx.bind(null,c,m,l,r),null),l},useId:function(){var n=as(),r=zt.identifierPrefix;if(mt){var l=Lr,c=Vr;l=(c&~(1<<32-Tt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Ah++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=UT++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Cm,useFormState:ty,useActionState:ty,useOptimistic:function(n){var r=as();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Am.bind(null,nt,!0,l),l.dispatch=r,[n,r]},useMemoCache:bm,useCacheRefresh:function(){return as().memoizedState=GT.bind(null,nt)},useEffectEvent:function(n){var r=as(),l={impl:n};return r.memoizedState=l,function(){if((_t&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Rm={readContext:Un,use:Ih,useCallback:dy,useContext:Un,useEffect:Tm,useImperativeHandle:hy,useInsertionEffect:oy,useLayoutEffect:cy,useMemo:fy,useReducer:kh,useRef:ay,useState:function(){return kh(ha)},useDebugValue:Em,useDeferredValue:function(n,r){var l=hn();return my(l,Mt.memoizedState,n,r)},useTransition:function(){var n=kh(ha)[0],r=hn().memoizedState;return[typeof n=="boolean"?n:Ec(n),r]},useSyncExternalStore:Fx,useId:yy,useHostTransitionStatus:Cm,useFormState:ny,useActionState:ny,useOptimistic:function(n,r){var l=hn();return Qx(l,Mt,n,r)},useMemoCache:bm,useCacheRefresh:by};Rm.useEffectEvent=ly;var Ty={readContext:Un,use:Ih,useCallback:dy,useContext:Un,useEffect:Tm,useImperativeHandle:hy,useInsertionEffect:oy,useLayoutEffect:cy,useMemo:fy,useReducer:wm,useRef:ay,useState:function(){return wm(ha)},useDebugValue:Em,useDeferredValue:function(n,r){var l=hn();return Mt===null?jm(l,n,r):my(l,Mt.memoizedState,n,r)},useTransition:function(){var n=wm(ha)[0],r=hn().memoizedState;return[typeof n=="boolean"?n:Ec(n),r]},useSyncExternalStore:Fx,useId:yy,useHostTransitionStatus:Cm,useFormState:ry,useActionState:ry,useOptimistic:function(n,r){var l=hn();return Mt!==null?Qx(l,Mt,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:bm,useCacheRefresh:by};Ty.useEffectEvent=ly;function Im(n,r,l,c){r=n.memoizedState,l=l(c,r),l=l==null?r:_({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var km={enqueueSetState:function(n,r,l){n=n._reactInternals;var c=Ds(),f=Ja(c);f.payload=r,l!=null&&(f.callback=l),r=Za(n,f,c),r!==null&&(ws(r,n,c),wc(r,n,c))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var c=Ds(),f=Ja(c);f.tag=1,f.payload=r,l!=null&&(f.callback=l),r=Za(n,f,c),r!==null&&(ws(r,n,c),wc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Ds(),c=Ja(l);c.tag=2,r!=null&&(c.callback=r),r=Za(n,c,l),r!==null&&(ws(r,n,l),wc(r,n,l))}};function Ey(n,r,l,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!fc(l,c)||!fc(f,m):!0}function jy(n,r,l,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==n&&km.enqueueReplaceState(r,r.state,null)}function il(n,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(n=n.defaultProps){l===r&&(l=_({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function Sy(n){fh(n)}function Cy(n){console.error(n)}function Ay(n){fh(n)}function Vh(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ry(n,r,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Dm(n,r,l){return l=Ja(l),l.tag=3,l.payload={element:null},l.callback=function(){Vh(n,r)},l}function Iy(n){return n=Ja(n),n.tag=3,n}function ky(n,r,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Ry(r,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Ry(r,l,c),typeof f!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function KT(n,r,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&$l(r,l,f,!0),l=As.current,l!==null){switch(l.tag){case 31:case 13:return Xs===null?Yh():l.alternate===null&&sn===0&&(sn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Nh?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),rg(n,c,f)),!1;case 22:return l.flags|=65536,c===Nh?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),rg(n,c,f)),!1}throw Error(a(435,l.tag))}return rg(n,c,f),Yh(),!1}if(mt)return r=As.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Jf&&(n=Error(a(422),{cause:c}),pc($s(n,l)))):(c!==Jf&&(r=Error(a(423),{cause:c}),pc($s(r,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=$s(c,l),f=Dm(n.stateNode,c,f),cm(n,f),sn!==4&&(sn=2)),!1;var m=Error(a(520),{cause:c});if(m=$s(m,l),Mc===null?Mc=[m]:Mc.push(m),sn!==4&&(sn=2),r===null)return!0;c=$s(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=Dm(l.stateNode,c,n),cm(l,n),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ai===null||!ai.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Iy(f),ky(f,n,l,c),cm(l,f),!1}l=l.return}while(l!==null);return!1}var Om=Error(a(461)),bn=!1;function zn(n,r,l,c){r.child=n===null?Vx(r,null,l,c):rl(r,n.child,l,c)}function Dy(n,r,l,c,f){l=l.render;var m=r.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return el(r),c=gm(n,r,l,v,m,f),T=pm(),n!==null&&!bn?(xm(n,r,f),da(n,r,f)):(mt&&T&&Xf(r),r.flags|=1,zn(n,r,c,f),r.child)}function Oy(n,r,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!Kf(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,My(n,r,m,c,f)):(n=xh(l.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Hm(n,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:fc,l(v,c)&&n.ref===r.ref)return da(n,r,f)}return r.flags|=1,n=ia(m,c),n.ref=r.ref,n.return=r,r.child=n}function My(n,r,l,c,f){if(n!==null){var m=n.memoizedProps;if(fc(m,c)&&n.ref===r.ref)if(bn=!1,r.pendingProps=c=m,Hm(n,f))(n.flags&131072)!==0&&(bn=!0);else return r.lanes=n.lanes,da(n,r,f)}return Mm(n,r,l,c,f)}function Vy(n,r,l,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return Ly(n,r,m,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&wh(r,m!==null?m.cachePool:null),m!==null?Ux(r,m):hm(),zx(r);else return c=r.lanes=536870912,Ly(n,r,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(wh(r,m.cachePool),Ux(r,m),ti(),r.memoizedState=null):(n!==null&&wh(r,null),hm(),ti());return zn(n,r,f,l),r.child}function Cc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ly(n,r,l,c,f){var m=am();return m=m===null?null:{parent:xn._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},n!==null&&wh(r,null),hm(),zx(r),n!==null&&$l(n,r,c,!0),r.childLanes=f,null}function Lh(n,r){return r=Uh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Py(n,r,l){return rl(r,n.child,null,l),n=Lh(r,r.pendingProps),n.flags|=2,Rs(r),r.memoizedState=null,n}function YT(n,r,l){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(mt){if(c.mode==="hidden")return n=Lh(r,c),r.lanes=536870912,Cc(null,n);if(fm(r),(n=Kt)?(n=Xb(n,Qs),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Ka!==null?{id:Vr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},l=wx(n),l.return=r,r.child=l,Pn=r,Kt=null)):n=null,n===null)throw Qa(r);return r.lanes=536870912,null}return Lh(r,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(fm(r),f)if(r.flags&256)r.flags&=-257,r=Py(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(bn||$l(n,r,l,!1),f=(l&n.childLanes)!==0,bn||f){if(c=zt,c!==null&&(v=Ye(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,Xi(n,v),ws(c,n,v),Om;Yh(),r=Py(n,r,l)}else n=m.treeContext,Kt=Ws(v.nextSibling),Pn=r,mt=!0,Ya=null,Qs=!1,n!==null&&Tx(r,n),r=Lh(r,c),r.flags|=4096;return r}return n=ia(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ph(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function Mm(n,r,l,c,f){return el(r),l=gm(n,r,l,c,void 0,f),c=pm(),n!==null&&!bn?(xm(n,r,f),da(n,r,f)):(mt&&c&&Xf(r),r.flags|=1,zn(n,r,l,f),r.child)}function Uy(n,r,l,c,f,m){return el(r),r.updateQueue=null,l=Hx(r,c,l,f),Bx(n),c=pm(),n!==null&&!bn?(xm(n,r,m),da(n,r,m)):(mt&&c&&Xf(r),r.flags|=1,zn(n,r,l,m),r.child)}function zy(n,r,l,c,f){if(el(r),r.stateNode===null){var m=Hl,v=l.contextType;typeof v=="object"&&v!==null&&(m=Un(v)),m=new l(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=km,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},lm(r),v=l.contextType,m.context=typeof v=="object"&&v!==null?Un(v):Hl,m.state=r.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Im(r,l,v,c),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&km.enqueueReplaceState(m,m.state,null),Nc(r,c,m,f),_c(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var T=r.memoizedProps,L=il(l,T);m.props=L;var J=m.context,ie=l.contextType;v=Hl,typeof ie=="object"&&ie!==null&&(v=Un(ie));var he=l.getDerivedStateFromProps;ie=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||J!==v)&&jy(r,m,c,v),Wa=!1;var te=r.memoizedState;m.state=te,Nc(r,c,m,f),_c(),J=r.memoizedState,T||te!==J||Wa?(typeof he=="function"&&(Im(r,l,he,c),J=r.memoizedState),(L=Wa||Ey(r,l,L,c,te,J,v))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),m.props=c,m.state=J,m.context=v,c=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,om(n,r),v=r.memoizedProps,ie=il(l,v),m.props=ie,he=r.pendingProps,te=m.context,J=l.contextType,L=Hl,typeof J=="object"&&J!==null&&(L=Un(J)),T=l.getDerivedStateFromProps,(J=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==he||te!==L)&&jy(r,m,c,L),Wa=!1,te=r.memoizedState,m.state=te,Nc(r,c,m,f),_c();var re=r.memoizedState;v!==he||te!==re||Wa||n!==null&&n.dependencies!==null&&bh(n.dependencies)?(typeof T=="function"&&(Im(r,l,T,c),re=r.memoizedState),(ie=Wa||Ey(r,l,ie,c,te,re,L)||n!==null&&n.dependencies!==null&&bh(n.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,re,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,re,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=re),m.props=c,m.state=re,m.context=L,c=ie):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Ph(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=rl(r,n.child,null,f),r.child=rl(r,null,l,f)):zn(n,r,l,f),r.memoizedState=m.state,n=r.child):n=da(n,r,f),n}function By(n,r,l,c){return Ji(),r.flags|=256,zn(n,r,l,c),r.child}var Vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lm(n){return{baseLanes:n,cachePool:Rx()}}function Pm(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=ks),n}function Hy(n,r,l){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(un.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(mt){if(f?ei(r):ti(),(n=Kt)?(n=Xb(n,Qs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Ka!==null?{id:Vr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},l=wx(n),l.return=r,r.child=l,Pn=r,Kt=null)):n=null,n===null)throw Qa(r);return vg(n)?r.lanes=32:r.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(ti(),f=r.mode,T=Uh({mode:"hidden",children:T},f),c=Wi(c,f,l,null),T.return=r,c.return=r,T.sibling=c,r.child=T,c=r.child,c.memoizedState=Lm(l),c.childLanes=Pm(n,v,l),r.memoizedState=Vm,Cc(null,c)):(ei(r),Um(r,T))}var L=n.memoizedState;if(L!==null&&(T=L.dehydrated,T!==null)){if(m)r.flags&256?(ei(r),r.flags&=-257,r=zm(n,r,l)):r.memoizedState!==null?(ti(),r.child=n.child,r.flags|=128,r=null):(ti(),T=c.fallback,f=r.mode,c=Uh({mode:"visible",children:c.children},f),T=Wi(T,f,l,null),T.flags|=2,c.return=r,T.return=r,c.sibling=T,r.child=c,rl(r,n.child,null,l),c=r.child,c.memoizedState=Lm(l),c.childLanes=Pm(n,v,l),r.memoizedState=Vm,r=Cc(null,c));else if(ei(r),vg(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var J=v.dgst;v=J,c=Error(a(419)),c.stack="",c.digest=v,pc({value:c,source:null,stack:null}),r=zm(n,r,l)}else if(bn||$l(n,r,l,!1),v=(l&n.childLanes)!==0,bn||v){if(v=zt,v!==null&&(c=Ye(v,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,Xi(n,c),ws(v,n,c),Om;bg(T)||Yh(),r=zm(n,r,l)}else bg(T)?(r.flags|=192,r.child=n.child,r=null):(n=L.treeContext,Kt=Ws(T.nextSibling),Pn=r,mt=!0,Ya=null,Qs=!1,n!==null&&Tx(r,n),r=Um(r,c.children),r.flags|=4096);return r}return f?(ti(),T=c.fallback,f=r.mode,L=n.child,J=L.sibling,c=ia(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,J!==null?T=ia(J,T):(T=Wi(T,f,l,null),T.flags|=2),T.return=r,c.return=r,c.sibling=T,r.child=c,Cc(null,c),c=r.child,T=n.child.memoizedState,T===null?T=Lm(l):(f=T.cachePool,f!==null?(L=xn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Rx(),T={baseLanes:T.baseLanes|l,cachePool:f}),c.memoizedState=T,c.childLanes=Pm(n,v,l),r.memoizedState=Vm,Cc(n.child,c)):(ei(r),l=n.child,n=l.sibling,l=ia(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=l,r.memoizedState=null,l)}function Um(n,r){return r=Uh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Uh(n,r){return n=Cs(22,n,null,r),n.lanes=0,n}function zm(n,r,l){return rl(r,n.child,null,l),n=Um(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Fy(n,r,l){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),tm(n.return,r,l)}function Bm(n,r,l,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function qy(n,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=un.current,T=(v&2)!==0;if(T?(v=v&1|2,r.flags|=128):v&=1,xe(un,v),zn(n,r,c,l),c=mt?gc:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Fy(n,l,r);else if(n.tag===19)Fy(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=r.child,f=null;l!==null;)n=l.alternate,n!==null&&Sh(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),Bm(r,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Sh(n)===null){r.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Bm(r,!0,l,null,m,c);break;case"together":Bm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function da(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),ri|=r.lanes,(l&r.childLanes)===0)if(n!==null){if($l(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,l=ia(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=ia(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function Hm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&bh(n)))}function QT(n,r,l){switch(r.tag){case 3:q(r,r.stateNode.containerInfo),Xa(r,xn,n.memoizedState.cache),Ji();break;case 27:case 5:Ie(r);break;case 4:q(r,r.stateNode.containerInfo);break;case 10:Xa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,fm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ei(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Hy(n,r,l):(ei(r),n=da(n,r,l),n!==null?n.sibling:null);ei(r);break;case 19:var f=(n.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||($l(n,r,l,!1),c=(l&r.childLanes)!==0),f){if(c)return qy(n,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),xe(un,un.current),c)break;return null;case 22:return r.lanes=0,Vy(n,r,l,r.pendingProps);case 24:Xa(r,xn,n.memoizedState.cache)}return da(n,r,l)}function Gy(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)bn=!0;else{if(!Hm(n,l)&&(r.flags&128)===0)return bn=!1,QT(n,r,l);bn=(n.flags&131072)!==0}else bn=!1,mt&&(r.flags&1048576)!==0&&Nx(r,gc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=nl(r.elementType),r.type=n,typeof n=="function")Kf(n)?(c=il(n,c),r.tag=1,r=zy(null,r,n,c,l)):(r.tag=0,r=Mm(null,r,n,c,l));else{if(n!=null){var f=n.$$typeof;if(f===ae){r.tag=11,r=Dy(null,r,n,c,l);break e}else if(f===S){r.tag=14,r=Oy(null,r,n,c,l);break e}}throw r=_e(n)||n,Error(a(306,r,""))}}return r;case 0:return Mm(n,r,r.type,r.pendingProps,l);case 1:return c=r.type,f=il(c,r.pendingProps),zy(n,r,c,f,l);case 3:e:{if(q(r,r.stateNode.containerInfo),n===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,om(n,r),Nc(r,c,null,l);var v=r.memoizedState;if(c=v.cache,Xa(r,xn,c),c!==m.cache&&nm(r,[xn],l,!0),_c(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=By(n,r,c,l);break e}else if(c!==f){f=$s(Error(a(424)),r),pc(f),r=By(n,r,c,l);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Kt=Ws(n.firstChild),Pn=r,mt=!0,Ya=null,Qs=!0,l=Vx(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ji(),c===f){r=da(n,r,l);break e}zn(n,r,c,l)}r=r.child}return r;case 26:return Ph(n,r),n===null?(l=nv(r.type,null,r.pendingProps,null))?r.memoizedState=l:mt||(l=r.type,n=r.pendingProps,c=td(Y.current).createElement(l),c[fe]=r,c[ve]=n,Bn(c,l,n),gn(c),r.stateNode=c):r.memoizedState=nv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ie(r),n===null&&mt&&(c=r.stateNode=Zb(r.type,r.pendingProps,Y.current),Pn=r,Qs=!0,f=Kt,ci(r.type)?(wg=f,Kt=Ws(c.firstChild)):Kt=f),zn(n,r,r.pendingProps.children,l),Ph(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&mt&&((f=c=Kt)&&(c=EE(c,r.type,r.pendingProps,Qs),c!==null?(r.stateNode=c,Pn=r,Kt=Ws(c.firstChild),Qs=!1,f=!0):f=!1),f||Qa(r)),Ie(r),f=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,pg(f,m)?c=null:v!==null&&pg(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=gm(n,r,zT,null,null,l),Fc._currentValue=f),Ph(n,r),zn(n,r,c,l),r.child;case 6:return n===null&&mt&&((n=l=Kt)&&(l=jE(l,r.pendingProps,Qs),l!==null?(r.stateNode=l,Pn=r,Kt=null,n=!0):n=!1),n||Qa(r)),null;case 13:return Hy(n,r,l);case 4:return q(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=rl(r,null,c,l):zn(n,r,c,l),r.child;case 11:return Dy(n,r,r.type,r.pendingProps,l);case 7:return zn(n,r,r.pendingProps,l),r.child;case 8:return zn(n,r,r.pendingProps.children,l),r.child;case 12:return zn(n,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Xa(r,r.type,c.value),zn(n,r,c.children,l),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,el(r),f=Un(f),c=c(f),r.flags|=1,zn(n,r,c,l),r.child;case 14:return Oy(n,r,r.type,r.pendingProps,l);case 15:return My(n,r,r.type,r.pendingProps,l);case 19:return qy(n,r,l);case 31:return YT(n,r,l);case 22:return Vy(n,r,l,r.pendingProps);case 24:return el(r),c=Un(xn),n===null?(f=am(),f===null&&(f=zt,m=sm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),r.memoizedState={parent:c,cache:f},lm(r),Xa(r,xn,f)):((n.lanes&l)!==0&&(om(n,r),Nc(r,null,null,l),_c()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Xa(r,xn,c)):(c=m.cache,Xa(r,xn,c),c!==f.cache&&nm(r,[xn],l,!0))),zn(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function fa(n){n.flags|=4}function Fm(n,r,l,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(yb())n.flags|=8192;else throw sl=Nh,im}else n.flags&=-16777217}function $y(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!lv(r))if(yb())n.flags|=8192;else throw sl=Nh,im}function zh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?na():536870912,n.lanes|=r,ro|=r)}function Ac(n,r){if(!mt)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Yt(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(r)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,r}function XT(n,r,l){var c=r.pendingProps;switch(Wf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(r),null;case 1:return Yt(r),null;case 3:return l=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ca(xn),le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Gl(r)?fa(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Zf())),Yt(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(fa(r),m!==null?(Yt(r),$y(r,m)):(Yt(r),Fm(r,f,null,c,l))):m?m!==n.memoizedState?(fa(r),Yt(r),$y(r,m)):(Yt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&fa(r),Yt(r),Fm(r,f,n,c,l)),null;case 27:if(Ne(r),l=Y.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&fa(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Yt(r),null}n=G.current,Gl(r)?Ex(r):(n=Zb(f,c,l),r.stateNode=n,fa(r))}return Yt(r),null;case 5:if(Ne(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&fa(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Yt(r),null}if(m=G.current,Gl(r))Ex(r);else{var v=td(Y.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[fe]=r,m[ve]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(Bn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&fa(r)}}return Yt(r),Fm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&fa(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(n=Y.current,Gl(r)){if(n=r.stateNode,l=r.memoizedProps,c=null,f=Pn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[fe]=r,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Hb(n.nodeValue,l)),n||Qa(r,!0)}else n=td(n).createTextNode(c),n[fe]=r,r.stateNode=n}return Yt(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(c=Gl(r),l!==null){if(n===null){if(!c)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[fe]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yt(r),n=!1}else l=Zf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(Rs(r),r):(Rs(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Yt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Gl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[fe]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yt(r),f=!1}else f=Zf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Rs(r),r):(Rs(r),null)}return Rs(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),zh(r,r.updateQueue),Yt(r),null);case 4:return le(),n===null&&hg(r.stateNode.containerInfo),Yt(r),null;case 10:return ca(r.type),Yt(r),null;case 19:if(ne(un),c=r.memoizedState,c===null)return Yt(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)Ac(c,!1);else{if(sn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Sh(n),m!==null){for(r.flags|=128,Ac(c,!1),n=m.updateQueue,r.updateQueue=n,zh(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)vx(l,n),l=l.sibling;return xe(un,un.current&1|2),mt&&la(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&tn()>Gh&&(r.flags|=128,f=!0,Ac(c,!1),r.lanes=4194304)}else{if(!f)if(n=Sh(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,zh(r,n),Ac(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!mt)return Yt(r),null}else 2*tn()-c.renderingStartTime>Gh&&l!==536870912&&(r.flags|=128,f=!0,Ac(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=tn(),n.sibling=null,l=un.current,xe(un,f?l&1|2:l&1),mt&&la(r,c.treeForkCount),n):(Yt(r),null);case 22:case 23:return Rs(r),dm(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(Yt(r),r.subtreeFlags&6&&(r.flags|=8192)):Yt(r),l=r.updateQueue,l!==null&&zh(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),n!==null&&ne(tl),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ca(xn),Yt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function WT(n,r){switch(Wf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ca(xn),le(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ne(r),null;case 31:if(r.memoizedState!==null){if(Rs(r),r.alternate===null)throw Error(a(340));Ji()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Rs(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ji()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ne(un),null;case 4:return le(),null;case 10:return ca(r.type),null;case 22:case 23:return Rs(r),dm(),n!==null&&ne(tl),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ca(xn),null;case 25:return null;default:return null}}function Ky(n,r){switch(Wf(r),r.tag){case 3:ca(xn),le();break;case 26:case 27:case 5:Ne(r);break;case 4:le();break;case 31:r.memoizedState!==null&&Rs(r);break;case 13:Rs(r);break;case 19:ne(un);break;case 10:ca(r.type);break;case 22:case 23:Rs(r),dm(),n!==null&&ne(tl);break;case 24:ca(xn)}}function Rc(n,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&n)===n){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(T){Rt(r,r.return,T)}}function ni(n,r,l){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=r;var L=l,J=T;try{J()}catch(ie){Rt(f,L,ie)}}}c=c.next}while(c!==m)}}catch(ie){Rt(r,r.return,ie)}}function Yy(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{Px(r,l)}catch(c){Rt(n,n.return,c)}}}function Qy(n,r,l){l.props=il(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){Rt(n,r,c)}}function Ic(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(f){Rt(n,r,f)}}function Pr(n,r){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){Rt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Rt(n,r,f)}else l.current=null}function Xy(n){var r=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){Rt(n,n.return,f)}}function qm(n,r,l){try{var c=n.stateNode;bE(c,n.type,l,r),c[ve]=r}catch(f){Rt(n,n.return,f)}}function Wy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ci(n.type)||n.tag===4}function Gm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ci(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $m(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=cr));else if(c!==4&&(c===27&&ci(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for($m(n,r,l),n=n.sibling;n!==null;)$m(n,r,l),n=n.sibling}function Bh(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(c!==4&&(c===27&&ci(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Bh(n,r,l),n=n.sibling;n!==null;)Bh(n,r,l),n=n.sibling}function Jy(n){var r=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Bn(r,c,l),r[fe]=n,r[ve]=l}catch(m){Rt(n,n.return,m)}}var ma=!1,vn=!1,Km=!1,Zy=typeof WeakSet=="function"?WeakSet:Set,An=null;function JT(n,r){if(n=n.containerInfo,mg=od,n=hx(n),zf(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,T=-1,L=-1,J=0,ie=0,he=n,te=null;t:for(;;){for(var re;he!==l||f!==0&&he.nodeType!==3||(T=v+f),he!==m||c!==0&&he.nodeType!==3||(L=v+c),he.nodeType===3&&(v+=he.nodeValue.length),(re=he.firstChild)!==null;)te=he,he=re;for(;;){if(he===n)break t;if(te===l&&++J===f&&(T=v),te===m&&++ie===c&&(L=v),(re=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=re}l=T===-1||L===-1?null:{start:T,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(gg={focusedElem:n,selectionRange:l},od=!1,An=r;An!==null;)if(r=An,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,An=n;else for(;An!==null;){switch(r=An,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=r,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var De=il(l.type,f);n=c.getSnapshotBeforeUpdate(De,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ke){Rt(l,l.return,Ke)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)yg(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":yg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,An=n;break}An=r.return}}function eb(n,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:pa(n,l),c&4&&Rc(5,l);break;case 1:if(pa(n,l),c&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(v){Rt(l,l.return,v)}else{var f=il(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Rt(l,l.return,v)}}c&64&&Yy(l),c&512&&Ic(l,l.return);break;case 3:if(pa(n,l),c&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Px(n,r)}catch(v){Rt(l,l.return,v)}}break;case 27:r===null&&c&4&&Jy(l);case 26:case 5:pa(n,l),r===null&&c&4&&Xy(l),c&512&&Ic(l,l.return);break;case 12:pa(n,l);break;case 31:pa(n,l),c&4&&sb(n,l);break;case 13:pa(n,l),c&4&&rb(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=lE.bind(null,l),SE(n,l))));break;case 22:if(c=l.memoizedState!==null||ma,!c){r=r!==null&&r.memoizedState!==null||vn,f=ma;var m=vn;ma=c,(vn=r)&&!m?xa(n,l,(l.subtreeFlags&8772)!==0):pa(n,l),ma=f,vn=m}break;case 30:break;default:pa(n,l)}}function tb(n){var r=n.alternate;r!==null&&(n.alternate=null,tb(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&or(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Jt=null,xs=!1;function ga(n,r,l){for(l=l.child;l!==null;)nb(n,r,l),l=l.sibling}function nb(n,r,l){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Gt,l)}catch{}switch(l.tag){case 26:vn||Pr(l,r),ga(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:vn||Pr(l,r);var c=Jt,f=xs;ci(l.type)&&(Jt=l.stateNode,xs=!1),ga(n,r,l),zc(l.stateNode),Jt=c,xs=f;break;case 5:vn||Pr(l,r);case 6:if(c=Jt,f=xs,Jt=null,ga(n,r,l),Jt=c,xs=f,Jt!==null)if(xs)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(l.stateNode)}catch(m){Rt(l,r,m)}else try{Jt.removeChild(l.stateNode)}catch(m){Rt(l,r,m)}break;case 18:Jt!==null&&(xs?(n=Jt,Yb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),fo(n)):Yb(Jt,l.stateNode));break;case 4:c=Jt,f=xs,Jt=l.stateNode.containerInfo,xs=!0,ga(n,r,l),Jt=c,xs=f;break;case 0:case 11:case 14:case 15:ni(2,l,r),vn||ni(4,l,r),ga(n,r,l);break;case 1:vn||(Pr(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Qy(l,r,c)),ga(n,r,l);break;case 21:ga(n,r,l);break;case 22:vn=(c=vn)||l.memoizedState!==null,ga(n,r,l),vn=c;break;default:ga(n,r,l)}}function sb(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{fo(n)}catch(l){Rt(r,r.return,l)}}}function rb(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fo(n)}catch(l){Rt(r,r.return,l)}}function ZT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Zy),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Zy),r;default:throw Error(a(435,n.tag))}}function Hh(n,r){var l=ZT(n);r.forEach(function(c){if(!l.has(c)){l.add(c);var f=oE.bind(null,n,c);c.then(f,f)}})}function ys(n,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=n,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ci(T.type)){Jt=T.stateNode,xs=!1;break e}break;case 5:Jt=T.stateNode,xs=!1;break e;case 3:case 4:Jt=T.stateNode.containerInfo,xs=!0;break e}T=T.return}if(Jt===null)throw Error(a(160));nb(m,v,f),Jt=null,xs=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)ab(r,n),r=r.sibling}var gr=null;function ab(n,r){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ys(r,n),bs(n),c&4&&(ni(3,n,n.return),Rc(3,n),ni(5,n,n.return));break;case 1:ys(r,n),bs(n),c&512&&(vn||l===null||Pr(l,l.return)),c&64&&ma&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=gr;if(ys(r,n),bs(n),c&512&&(vn||l===null||Pr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[$t]||m[fe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Bn(m,c,l),m[fe]=n,gn(m),c=m;break e;case"link":var v=av("link","href",f).get(c+(l.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(c),Bn(m,c,l),f.head.appendChild(m);break;case"meta":if(v=av("meta","content",f).get(c+(l.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(T,1);break t}}m=f.createElement(c),Bn(m,c,l),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[fe]=n,gn(m),c=m}n.stateNode=c}else iv(f,n.type,n.stateNode);else n.stateNode=rv(f,c,n.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?iv(f,n.type,n.stateNode):rv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&qm(n,n.memoizedProps,l.memoizedProps)}break;case 27:ys(r,n),bs(n),c&512&&(vn||l===null||Pr(l,l.return)),l!==null&&c&4&&qm(n,n.memoizedProps,l.memoizedProps);break;case 5:if(ys(r,n),bs(n),c&512&&(vn||l===null||Pr(l,l.return)),n.flags&32){f=n.stateNode;try{ps(f,"")}catch(De){Rt(n,n.return,De)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,qm(n,f,l!==null?l.memoizedProps:f)),c&1024&&(Km=!0);break;case 6:if(ys(r,n),bs(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(De){Rt(n,n.return,De)}}break;case 3:if(rd=null,f=gr,gr=nd(r.containerInfo),ys(r,n),gr=f,bs(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{fo(r.containerInfo)}catch(De){Rt(n,n.return,De)}Km&&(Km=!1,ib(n));break;case 4:c=gr,gr=nd(n.stateNode.containerInfo),ys(r,n),bs(n),gr=c;break;case 12:ys(r,n),bs(n);break;case 31:ys(r,n),bs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Hh(n,c)));break;case 13:ys(r,n),bs(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(qh=tn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Hh(n,c)));break;case 22:f=n.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,J=ma,ie=vn;if(ma=J||f,vn=ie||L,ys(r,n),vn=ie,ma=J,bs(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(l===null||L||ma||vn||ll(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=L.stateNode;var he=L.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;T.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){Rt(L,L.return,De)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(De){Rt(L,L.return,De)}}}else if(r.tag===18){if(l===null){L=r;try{var re=L.stateNode;f?Qb(re,!0):Qb(L.stateNode,!1)}catch(De){Rt(L,L.return,De)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Hh(n,l))));break;case 19:ys(r,n),bs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Hh(n,c)));break;case 30:break;case 21:break;default:ys(r,n),bs(n)}}function bs(n){var r=n.flags;if(r&2){try{for(var l,c=n.return;c!==null;){if(Wy(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,m=Gm(n);Bh(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(ps(v,""),l.flags&=-33);var T=Gm(n);Bh(n,T,v);break;case 3:case 4:var L=l.stateNode.containerInfo,J=Gm(n);$m(n,J,L);break;default:throw Error(a(161))}}catch(ie){Rt(n,n.return,ie)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ib(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;ib(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function pa(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)eb(n,r.alternate,r),r=r.sibling}function ll(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ni(4,r,r.return),ll(r);break;case 1:Pr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Qy(r,r.return,l),ll(r);break;case 27:zc(r.stateNode);case 26:case 5:Pr(r,r.return),ll(r);break;case 22:r.memoizedState===null&&ll(r);break;case 30:ll(r);break;default:ll(r)}n=n.sibling}}function xa(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:xa(f,m,l),Rc(4,m);break;case 1:if(xa(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){Rt(c,c.return,J)}if(c=m,f=c.updateQueue,f!==null){var T=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Lx(L[f],T)}catch(J){Rt(c,c.return,J)}}l&&v&64&&Yy(m),Ic(m,m.return);break;case 27:Jy(m);case 26:case 5:xa(f,m,l),l&&c===null&&v&4&&Xy(m),Ic(m,m.return);break;case 12:xa(f,m,l);break;case 31:xa(f,m,l),l&&v&4&&sb(f,m);break;case 13:xa(f,m,l),l&&v&4&&rb(f,m);break;case 22:m.memoizedState===null&&xa(f,m,l),Ic(m,m.return);break;case 30:break;default:xa(f,m,l)}r=r.sibling}}function Ym(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&xc(l))}function Qm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&xc(n))}function pr(n,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lb(n,r,l,c),r=r.sibling}function lb(n,r,l,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:pr(n,r,l,c),f&2048&&Rc(9,r);break;case 1:pr(n,r,l,c);break;case 3:pr(n,r,l,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&xc(n)));break;case 12:if(f&2048){pr(n,r,l,c),n=r.stateNode;try{var m=r.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){Rt(r,r.return,L)}}else pr(n,r,l,c);break;case 31:pr(n,r,l,c);break;case 13:pr(n,r,l,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?pr(n,r,l,c):kc(n,r):m._visibility&2?pr(n,r,l,c):(m._visibility|=2,to(n,r,l,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Ym(v,r);break;case 24:pr(n,r,l,c),f&2048&&Qm(r.alternate,r);break;default:pr(n,r,l,c)}}function to(n,r,l,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,v=r,T=l,L=c,J=v.flags;switch(v.tag){case 0:case 11:case 15:to(m,v,T,L,f),Rc(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?to(m,v,T,L,f):kc(m,v):(ie._visibility|=2,to(m,v,T,L,f)),f&&J&2048&&Ym(v.alternate,v);break;case 24:to(m,v,T,L,f),f&&J&2048&&Qm(v.alternate,v);break;default:to(m,v,T,L,f)}r=r.sibling}}function kc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,c=r,f=c.flags;switch(c.tag){case 22:kc(l,c),f&2048&&Ym(c.alternate,c);break;case 24:kc(l,c),f&2048&&Qm(c.alternate,c);break;default:kc(l,c)}r=r.sibling}}var Dc=8192;function no(n,r,l){if(n.subtreeFlags&Dc)for(n=n.child;n!==null;)ob(n,r,l),n=n.sibling}function ob(n,r,l){switch(n.tag){case 26:no(n,r,l),n.flags&Dc&&n.memoizedState!==null&&UE(l,gr,n.memoizedState,n.memoizedProps);break;case 5:no(n,r,l);break;case 3:case 4:var c=gr;gr=nd(n.stateNode.containerInfo),no(n,r,l),gr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Dc,Dc=16777216,no(n,r,l),Dc=c):no(n,r,l));break;default:no(n,r,l)}}function cb(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Oc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];An=c,hb(c,n)}cb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ub(n),n=n.sibling}function ub(n){switch(n.tag){case 0:case 11:case 15:Oc(n),n.flags&2048&&ni(9,n,n.return);break;case 3:Oc(n);break;case 12:Oc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Fh(n)):Oc(n);break;default:Oc(n)}}function Fh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];An=c,hb(c,n)}cb(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ni(8,r,r.return),Fh(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Fh(r));break;default:Fh(r)}n=n.sibling}}function hb(n,r){for(;An!==null;){var l=An;switch(l.tag){case 0:case 11:case 15:ni(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,An=c;else e:for(l=n;An!==null;){c=An;var f=c.sibling,m=c.return;if(tb(c),c===l){An=null;break e}if(f!==null){f.return=m,An=f;break e}An=m}}}var eE={getCacheForType:function(n){var r=Un(xn),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return Un(xn).controller.signal}},tE=typeof WeakMap=="function"?WeakMap:Map,_t=0,zt=null,lt=null,ct=0,At=0,Is=null,si=!1,so=!1,Xm=!1,ya=0,sn=0,ri=0,ol=0,Wm=0,ks=0,ro=0,Mc=null,vs=null,Jm=!1,qh=0,db=0,Gh=1/0,$h=null,ai=null,En=0,ii=null,ao=null,ba=0,Zm=0,eg=null,fb=null,Vc=0,tg=null;function Ds(){return(_t&2)!==0&&ct!==0?ct&-ct:H.T!==null?lg():Et()}function mb(){if(ks===0)if((ct&536870912)===0||mt){var n=lr;lr<<=1,(lr&3932160)===0&&(lr=262144),ks=n}else ks=536870912;return n=As.current,n!==null&&(n.flags|=32),ks}function ws(n,r,l){(n===zt&&(At===2||At===9)||n.cancelPendingCommit!==null)&&(io(n,0),li(n,ct,ks,!1)),oe(n,l),((_t&2)===0||n!==zt)&&(n===zt&&((_t&2)===0&&(ol|=l),sn===4&&li(n,ct,ks,!1)),Ur(n))}function gb(n,r,l){if((_t&6)!==0)throw Error(a(327));var c=!l&&(r&127)===0&&(r&n.expiredLanes)===0||ns(n,r),f=c?rE(n,r):sg(n,r,!0),m=c;do{if(f===0){so&&!c&&li(n,r,0,!1);break}else{if(l=n.current.alternate,m&&!nE(l)){f=sg(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=n;f=Mc;var L=T.current.memoizedState.isDehydrated;if(L&&(io(T,v).flags|=256),v=sg(T,v,!1),v!==2){if(Xm&&!L){T.errorRecoveryDisabledLanes|=m,ol|=m,f=4;break e}m=vs,vs=f,m!==null&&(vs===null?vs=m:vs.push.apply(vs,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){io(n,0),li(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:li(c,r,ks,!si);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=qh+300-tn(),10<f)){if(li(c,r,ks,!si),ms(c,0,!0)!==0)break e;ba=r,c.timeoutHandle=$b(pb.bind(null,c,l,vs,$h,Jm,r,ks,ol,ro,si,m,"Throttled",-0,0),f);break e}pb(c,l,vs,$h,Jm,r,ks,ol,ro,si,m,null,-0,0)}}break}while(!0);Ur(n)}function pb(n,r,l,c,f,m,v,T,L,J,ie,he,te,re){if(n.timeoutHandle=-1,he=r.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cr},ob(r,m,he);var De=(m&62914560)===m?qh-tn():(m&4194048)===m?db-tn():0;if(De=zE(he,De),De!==null){ba=m,n.cancelPendingCommit=De(Tb.bind(null,n,r,m,l,c,f,v,T,L,ie,he,null,te,re)),li(n,m,v,!J);return}}Tb(n,r,m,l,c,f,v,T,L)}function nE(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Ss(m(),f))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function li(n,r,l,c){r&=~Wm,r&=~ol,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Tt(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&je(n,l,r)}function Kh(){return(_t&6)===0?(Lc(0),!1):!0}function ng(){if(lt!==null){if(At===0)var n=lt.return;else n=lt,oa=Zi=null,ym(n),Xl=null,bc=0,n=lt;for(;n!==null;)Ky(n.alternate,n),n=n.return;lt=null}}function io(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,_E(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),ba=0,ng(),zt=n,lt=l=ia(n.current,null),ct=r,At=0,Is=null,si=!1,so=ns(n,r),Xm=!1,ro=ks=Wm=ol=ri=sn=0,vs=Mc=null,Jm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Tt(c),m=1<<f;r|=n[f],c&=~m}return ya=r,mh(),l}function xb(n,r){nt=null,H.H=Sc,r===Ql||r===_h?(r=Dx(),At=3):r===im?(r=Dx(),At=4):At=r===Om?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Is=r,lt===null&&(sn=1,Vh(n,$s(r,n.current)))}function yb(){var n=As.current;return n===null?!0:(ct&4194048)===ct?Xs===null:(ct&62914560)===ct||(ct&536870912)!==0?n===Xs:!1}function bb(){var n=H.H;return H.H=Sc,n===null?Sc:n}function vb(){var n=H.A;return H.A=eE,n}function Yh(){sn=4,si||(ct&4194048)!==ct&&As.current!==null||(so=!0),(ri&134217727)===0&&(ol&134217727)===0||zt===null||li(zt,ct,ks,!1)}function sg(n,r,l){var c=_t;_t|=2;var f=bb(),m=vb();(zt!==n||ct!==r)&&($h=null,io(n,r)),r=!1;var v=sn;e:do try{if(At!==0&&lt!==null){var T=lt,L=Is;switch(At){case 8:ng(),v=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(r=!0);var J=At;if(At=0,Is=null,lo(n,T,L,J),l&&so){v=0;break e}break;default:J=At,At=0,Is=null,lo(n,T,L,J)}}sE(),v=sn;break}catch(ie){xb(n,ie)}while(!0);return r&&n.shellSuspendCounter++,oa=Zi=null,_t=c,H.H=f,H.A=m,lt===null&&(zt=null,ct=0,mh()),v}function sE(){for(;lt!==null;)wb(lt)}function rE(n,r){var l=_t;_t|=2;var c=bb(),f=vb();zt!==n||ct!==r?($h=null,Gh=tn()+500,io(n,r)):so=ns(n,r);e:do try{if(At!==0&&lt!==null){r=lt;var m=Is;t:switch(At){case 1:At=0,Is=null,lo(n,r,m,1);break;case 2:case 9:if(Ix(m)){At=0,Is=null,_b(r);break}r=function(){At!==2&&At!==9||zt!==n||(At=7),Ur(n)},m.then(r,r);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:Ix(m)?(At=0,Is=null,_b(r)):(At=0,Is=null,lo(n,r,m,7));break;case 5:var v=null;switch(lt.tag){case 26:v=lt.memoizedState;case 5:case 27:var T=lt;if(v?lv(v):T.stateNode.complete){At=0,Is=null;var L=T.sibling;if(L!==null)lt=L;else{var J=T.return;J!==null?(lt=J,Qh(J)):lt=null}break t}}At=0,Is=null,lo(n,r,m,5);break;case 6:At=0,Is=null,lo(n,r,m,6);break;case 8:ng(),sn=6;break e;default:throw Error(a(462))}}aE();break}catch(ie){xb(n,ie)}while(!0);return oa=Zi=null,H.H=c,H.A=f,_t=l,lt!==null?0:(zt=null,ct=0,mh(),sn)}function aE(){for(;lt!==null&&!ts();)wb(lt)}function wb(n){var r=Gy(n.alternate,n,ya);n.memoizedProps=n.pendingProps,r===null?Qh(n):lt=r}function _b(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=Uy(l,r,r.pendingProps,r.type,void 0,ct);break;case 11:r=Uy(l,r,r.pendingProps,r.type.render,r.ref,ct);break;case 5:ym(r);default:Ky(l,r),r=lt=vx(r,ya),r=Gy(l,r,ya)}n.memoizedProps=n.pendingProps,r===null?Qh(n):lt=r}function lo(n,r,l,c){oa=Zi=null,ym(r),Xl=null,bc=0;var f=r.return;try{if(KT(n,f,r,l,ct)){sn=1,Vh(n,$s(l,n.current)),lt=null;return}}catch(m){if(f!==null)throw lt=f,m;sn=1,Vh(n,$s(l,n.current)),lt=null;return}r.flags&32768?(mt||c===1?n=!0:so||(ct&536870912)!==0?n=!1:(si=n=!0,(c===2||c===9||c===3||c===6)&&(c=As.current,c!==null&&c.tag===13&&(c.flags|=16384))),Nb(r,n)):Qh(r)}function Qh(n){var r=n;do{if((r.flags&32768)!==0){Nb(r,si);return}n=r.return;var l=XT(r.alternate,r,ya);if(l!==null){lt=l;return}if(r=r.sibling,r!==null){lt=r;return}lt=r=n}while(r!==null);sn===0&&(sn=5)}function Nb(n,r){do{var l=WT(n.alternate,n);if(l!==null){l.flags&=32767,lt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){lt=n;return}lt=n=l}while(n!==null);sn=6,lt=null}function Tb(n,r,l,c,f,m,v,T,L){n.cancelPendingCommit=null;do Xh();while(En!==0);if((_t&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Gf,Te(n,l,m,v,T,L),n===zt&&(lt=zt=null,ct=0),ao=r,ii=n,ba=l,Zm=m,eg=f,fb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,cE(Ut,function(){return Ab(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,f=ge.p,ge.p=2,v=_t,_t|=4;try{JT(n,r,l)}finally{_t=v,ge.p=f,H.T=c}}En=1,Eb(),jb(),Sb()}}function Eb(){if(En===1){En=0;var n=ii,r=ao,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var c=ge.p;ge.p=2;var f=_t;_t|=4;try{ab(r,n);var m=gg,v=hx(n.containerInfo),T=m.focusedElem,L=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&ux(T.ownerDocument.documentElement,T)){if(L!==null&&zf(T)){var J=L.start,ie=L.end;if(ie===void 0&&(ie=J),"selectionStart"in T)T.selectionStart=J,T.selectionEnd=Math.min(ie,T.value.length);else{var he=T.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var re=te.getSelection(),De=T.textContent.length,Ke=Math.min(L.start,De),Lt=L.end===void 0?Ke:Math.min(L.end,De);!re.extend&&Ke>Lt&&(v=Lt,Lt=Ke,Ke=v);var K=cx(T,Ke),F=cx(T,Lt);if(K&&F&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var W=he.createRange();W.setStart(K.node,K.offset),re.removeAllRanges(),Ke>Lt?(re.addRange(W),re.extend(F.node,F.offset)):(W.setEnd(F.node,F.offset),re.addRange(W))}}}}for(he=[],re=T;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<he.length;T++){var ce=he[T];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}od=!!mg,gg=mg=null}finally{_t=f,ge.p=c,H.T=l}}n.current=r,En=2}}function jb(){if(En===2){En=0;var n=ii,r=ao,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var c=ge.p;ge.p=2;var f=_t;_t|=4;try{eb(n,r.alternate,r)}finally{_t=f,ge.p=c,H.T=l}}En=3}}function Sb(){if(En===4||En===3){En=0,hs();var n=ii,r=ao,l=ba,c=fb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?En=5:(En=0,ao=ii=null,Cb(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ai=null),at(l),r=r.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Gt,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=H.T,f=ge.p,ge.p=2,H.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var T=c[v];m(T.value,{componentStack:T.stack})}}finally{H.T=r,ge.p=f}}(ba&3)!==0&&Xh(),Ur(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===tg?Vc++:(Vc=0,tg=n):Vc=0,Lc(0)}}function Cb(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,xc(r)))}function Xh(){return Eb(),jb(),Sb(),Ab()}function Ab(){if(En!==5)return!1;var n=ii,r=Zm;Zm=0;var l=at(ba),c=H.T,f=ge.p;try{ge.p=32>l?32:l,H.T=null,l=eg,eg=null;var m=ii,v=ba;if(En=0,ao=ii=null,ba=0,(_t&6)!==0)throw Error(a(331));var T=_t;if(_t|=4,ub(m.current),lb(m,m.current,v,l),_t=T,Lc(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Gt,m)}catch{}return!0}finally{ge.p=f,H.T=c,Cb(n,r)}}function Rb(n,r,l){r=$s(l,r),r=Dm(n.stateNode,r,2),n=Za(n,r,2),n!==null&&(oe(n,2),Ur(n))}function Rt(n,r,l){if(n.tag===3)Rb(n,n,l);else for(;r!==null;){if(r.tag===3){Rb(r,n,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ai===null||!ai.has(c))){n=$s(l,n),l=Iy(2),c=Za(r,l,2),c!==null&&(ky(l,c,r,n),oe(c,2),Ur(c));break}}r=r.return}}function rg(n,r,l){var c=n.pingCache;if(c===null){c=n.pingCache=new tE;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(Xm=!0,f.add(l),n=iE.bind(null,n,r,l),r.then(n,n))}function iE(n,r,l){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,zt===n&&(ct&l)===l&&(sn===4||sn===3&&(ct&62914560)===ct&&300>tn()-qh?(_t&2)===0&&io(n,0):Wm|=l,ro===ct&&(ro=0)),Ur(n)}function Ib(n,r){r===0&&(r=na()),n=Xi(n,r),n!==null&&(oe(n,r),Ur(n))}function lE(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Ib(n,l)}function oE(n,r){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Ib(n,l)}function cE(n,r){return qt(n,r)}var Wh=null,oo=null,ag=!1,Jh=!1,ig=!1,oi=0;function Ur(n){n!==oo&&n.next===null&&(oo===null?Wh=oo=n:oo=oo.next=n),Jh=!0,ag||(ag=!0,hE())}function Lc(n,r){if(!ig&&Jh){ig=!0;do for(var l=!1,c=Wh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,T=c.pingedLanes;m=(1<<31-Tt(42|n)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Mb(c,m))}else m=ct,m=ms(c,c===zt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ns(c,m)||(l=!0,Mb(c,m));c=c.next}while(l);ig=!1}}function uE(){kb()}function kb(){Jh=ag=!1;var n=0;oi!==0&&wE()&&(n=oi);for(var r=tn(),l=null,c=Wh;c!==null;){var f=c.next,m=Db(c,r);m===0?(c.next=null,l===null?Wh=f:l.next=f,f===null&&(oo=l)):(l=c,(n!==0||(m&3)!==0)&&(Jh=!0)),c=f}En!==0&&En!==5||Lc(n),oi!==0&&(oi=0)}function Db(n,r){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-Tt(m),T=1<<v,L=f[v];L===-1?((T&l)===0||(T&c)!==0)&&(f[v]=Pi(T,r)):L<=r&&(n.expiredLanes|=T),m&=~T}if(r=zt,l=ct,l=ms(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===r&&(At===2||At===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&kn(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||ns(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(c!==null&&kn(c),at(l)){case 2:case 8:l=pt;break;case 32:l=Ut;break;case 268435456:l=Dn;break;default:l=Ut}return c=Ob.bind(null,n),l=qt(l,c),n.callbackPriority=r,n.callbackNode=l,r}return c!==null&&c!==null&&kn(c),n.callbackPriority=2,n.callbackNode=null,2}function Ob(n,r){if(En!==0&&En!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Xh()&&n.callbackNode!==l)return null;var c=ct;return c=ms(n,n===zt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(gb(n,c,r),Db(n,tn()),n.callbackNode!=null&&n.callbackNode===l?Ob.bind(null,n):null)}function Mb(n,r){if(Xh())return null;gb(n,r,!0)}function hE(){NE(function(){(_t&6)!==0?qt($e,uE):kb()})}function lg(){if(oi===0){var n=Kl;n===0&&(n=ds,ds<<=1,(ds&261888)===0&&(ds=256)),oi=n}return oi}function Vb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:kl(""+n)}function Lb(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function dE(n,r,l,c,f){if(r==="submit"&&l&&l.stateNode===f){var m=Vb((f[ve]||null).action),v=c.submitter;v&&(r=(r=v[ve]||null)?Vb(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var T=new kr("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(oi!==0){var L=v?Lb(f,v):new FormData(f);Sm(l,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(T.preventDefault(),L=v?Lb(f,v):new FormData(f),Sm(l,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var og=0;og<qf.length;og++){var cg=qf[og],fE=cg.toLowerCase(),mE=cg[0].toUpperCase()+cg.slice(1);mr(fE,"on"+mE)}mr(mx,"onAnimationEnd"),mr(gx,"onAnimationIteration"),mr(px,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(RT,"onTransitionRun"),mr(IT,"onTransitionStart"),mr(kT,"onTransitionCancel"),mr(xx,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function Pb(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var T=c[v],L=T.instance,J=T.currentTarget;if(T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=J;try{m(f)}catch(ie){fh(ie)}f.currentTarget=null,m=L}else for(v=0;v<c.length;v++){if(T=c[v],L=T.instance,J=T.currentTarget,T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=J;try{m(f)}catch(ie){fh(ie)}f.currentTarget=null,m=L}}}}function ot(n,r){var l=r[Me];l===void 0&&(l=r[Me]=new Set);var c=n+"__bubble";l.has(c)||(Ub(r,n,2,!1),l.add(c))}function ug(n,r,l){var c=0;r&&(c|=4),Ub(l,n,c,r)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function hg(n){if(!n[Zh]){n[Zh]=!0,Xo.forEach(function(l){l!=="selectionchange"&&(gE.has(l)||ug(l,!1,n),ug(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Zh]||(r[Zh]=!0,ug("selectionchange",!1,r))}}function Ub(n,r,l,c){switch(mv(r)){case 2:var f=FE;break;case 8:f=qE;break;default:f=jg}l=f.bind(null,r,l,n),f=void 0,!Hi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,l,{capture:!0,passive:f}):n.addEventListener(r,l,!0):f!==void 0?n.addEventListener(r,l,{passive:f}):n.addEventListener(r,l,!1)}function dg(n,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=c.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Kn(T),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){c=m=v;continue e}T=T.parentNode}}c=c.return}Fa(function(){var J=m,ie=Hs(l),he=[];e:{var te=yx.get(n);if(te!==void 0){var re=kr,De=n;switch(n){case"keypress":if(qi(l)===0)break e;case"keydown":case"keyup":re=uh;break;case"focusin":De="focus",re=$i;break;case"focusout":De="blur",re=$i;break;case"beforeblur":case"afterblur":re=$i;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=y;break;case mx:case gx:case px:re=sh;break;case xx:re=C;break;case"scroll":case"scrollend":re=oc;break;case"wheel":re=se;break;case"copy":case"cut":case"paste":re=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=aa;break;case"toggle":case"beforetoggle":re=tt}var Ke=(r&4)!==0,Lt=!Ke&&(n==="scroll"||n==="scrollend"),K=Ke?te!==null?te+"Capture":null:te;Ke=[];for(var F=J,W;F!==null;){var ce=F;if(W=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||W===null||K===null||(ce=ur(F,K),ce!=null&&Ke.push(Uc(F,ce,W))),Lt)break;F=F.return}0<Ke.length&&(te=new re(te,De,null,l,ie),he.push({event:te,listeners:Ke}))}}if((r&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",te&&l!==ac&&(De=l.relatedTarget||l.fromElement)&&(Kn(De)||De[Le]))break e;if((re||te)&&(te=ie.window===ie?ie:(te=ie.ownerDocument)?te.defaultView||te.parentWindow:window,re?(De=l.relatedTarget||l.toElement,re=J,De=De?Kn(De):null,De!==null&&(Lt=u(De),Ke=De.tag,De!==Lt||Ke!==5&&Ke!==27&&Ke!==6)&&(De=null)):(re=null,De=J),re!==De)){if(Ke=cc,ce="onMouseLeave",K="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Ke=aa,ce="onPointerLeave",K="onPointerEnter",F="pointer"),Lt=re==null?te:Yn(re),W=De==null?te:Yn(De),te=new Ke(ce,F+"leave",re,l,ie),te.target=Lt,te.relatedTarget=W,ce=null,Kn(ie)===J&&(Ke=new Ke(K,F+"enter",De,l,ie),Ke.target=W,Ke.relatedTarget=Lt,ce=Ke),Lt=ce,re&&De)t:{for(Ke=pE,K=re,F=De,W=0,ce=K;ce;ce=Ke(ce))W++;ce=0;for(var ze=F;ze;ze=Ke(ze))ce++;for(;0<W-ce;)K=Ke(K),W--;for(;0<ce-W;)F=Ke(F),ce--;for(;W--;){if(K===F||F!==null&&K===F.alternate){Ke=K;break t}K=Ke(K),F=Ke(F)}Ke=null}else Ke=null;re!==null&&zb(he,te,re,Ke,!1),De!==null&&Lt!==null&&zb(he,Lt,De,Ke,!0)}}e:{if(te=J?Yn(J):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var yt=sx;else if(tx(te))if(rx)yt=ST;else{yt=ET;var Oe=TT}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&Il(J.elementType)&&(yt=sx):yt=jT;if(yt&&(yt=yt(n,J))){nx(he,yt,l,ie);break e}Oe&&Oe(n,te,J),n==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&nc(te,"number",te.value)}switch(Oe=J?Yn(J):window,n){case"focusin":(tx(Oe)||Oe.contentEditable==="true")&&(Ul=Oe,Bf=J,mc=null);break;case"focusout":mc=Bf=Ul=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,dx(he,l,ie);break;case"selectionchange":if(AT)break;case"keydown":case"keyup":dx(he,l,ie)}var st;if(wt)e:{switch(n){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Pl?Ki(n,l)&&(ut="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ut="onCompositionStart");ut&&(Mr&&l.locale!=="ko"&&(Pl||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Pl&&(st=lc()):(Ir=ie,ic="value"in Ir?Ir.value:Ir.textContent,Pl=!0)),Oe=ed(J,ut),0<Oe.length&&(ut=new Or(ut,n,null,l,ie),he.push({event:ut,listeners:Oe}),st?ut.data=st:(st=Ll(l),st!==null&&(ut.data=st)))),(st=qs?vT(n,l):wT(n,l))&&(ut=ed(J,"onBeforeInput"),0<ut.length&&(Oe=new Or("onBeforeInput","beforeinput",null,l,ie),he.push({event:Oe,listeners:ut}),Oe.data=st)),dE(he,n,J,l,ie)}Pb(he,r)})}function Uc(n,r,l){return{instance:n,listener:r,currentTarget:l}}function ed(n,r){for(var l=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ur(n,l),f!=null&&c.unshift(Uc(n,f,m)),f=ur(n,r),f!=null&&c.push(Uc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function pE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function zb(n,r,l,c,f){for(var m=r._reactName,v=[];l!==null&&l!==c;){var T=l,L=T.alternate,J=T.stateNode;if(T=T.tag,L!==null&&L===c)break;T!==5&&T!==26&&T!==27||J===null||(L=J,f?(J=ur(l,m),J!=null&&v.unshift(Uc(l,J,L))):f||(J=ur(l,m),J!=null&&v.push(Uc(l,J,L)))),l=l.return}v.length!==0&&n.push({event:r,listeners:v})}var xE=/\r\n?/g,yE=/\u0000|\uFFFD/g;function Bb(n){return(typeof n=="string"?n:""+n).replace(xE,`
`).replace(yE,"")}function Hb(n,r){return r=Bb(r),Bb(n)===r}function Vt(n,r,l,c,f,m){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||ps(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&ps(n,""+c);break;case"className":js(n,"class",c);break;case"tabIndex":js(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":js(n,l,c);break;case"style":rc(n,c,m);break;case"data":if(r!=="object"){js(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=kl(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&Vt(n,r,"name",f.name,f,null),Vt(n,r,"formEncType",f.formEncType,f,null),Vt(n,r,"formMethod",f.formMethod,f,null),Vt(n,r,"formTarget",f.formTarget,f,null)):(Vt(n,r,"encType",f.encType,f,null),Vt(n,r,"method",f.method,f,null),Vt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=kl(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=cr);break;case"onScroll":c!=null&&ot("scroll",n);break;case"onScrollEnd":c!=null&&ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=kl(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":ot("beforetoggle",n),ot("toggle",n),Al(n,"popover",c);break;case"xlinkActuate":pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Al(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=eh.get(l)||l,Al(n,l,c))}}function fg(n,r,l,c,f,m){switch(l){case"style":rc(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof c=="string"?ps(n,c):(typeof c=="number"||typeof c=="bigint")&&ps(n,""+c);break;case"onScroll":c!=null&&ot("scroll",n);break;case"onScrollEnd":c!=null&&ot("scrollend",n);break;case"onClick":c!=null&&(n.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),r=l.slice(2,f?l.length-7:void 0),m=n[ve]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,c,f);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Al(n,l,c)}}}function Bn(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",n),ot("load",n);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Vt(n,r,m,v,l,null)}}f&&Vt(n,r,"srcSet",l.srcSet,l,null),c&&Vt(n,r,"src",l.src,l,null);return;case"input":ot("invalid",n);var T=m=v=f=null,L=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":f=ie;break;case"type":v=ie;break;case"checked":L=ie;break;case"defaultChecked":J=ie;break;case"value":m=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,r));break;default:Vt(n,r,c,ie,l,null)}}Wu(n,m,T,L,J,v,f,!1);return;case"select":ot("invalid",n),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:Vt(n,r,f,T,l,null)}r=m,l=v,n.multiple=!!c,r!=null?Ua(n,!!c,r,!1):l!=null&&Ua(n,!!c,l,!0);return;case"textarea":ot("invalid",n),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(T=l[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Vt(n,r,v,T,l,null)}za(n,c,f,m);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Vt(n,r,L,c,l,null)}return;case"dialog":ot("beforetoggle",n),ot("toggle",n),ot("cancel",n),ot("close",n);break;case"iframe":case"object":ot("load",n);break;case"video":case"audio":for(c=0;c<Pc.length;c++)ot(Pc[c],n);break;case"image":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"embed":case"source":case"link":ot("error",n),ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Vt(n,r,J,c,l,null)}return;default:if(Il(r)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&fg(n,r,ie,c,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(c=l[T],c!=null&&Vt(n,r,T,c,l,null))}function bE(n,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,L=null,J=null,ie=null;for(re in l){var he=l[re];if(l.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":L=he;default:c.hasOwnProperty(re)||Vt(n,r,re,null,c,he)}}for(var te in c){var re=c[te];if(he=l[te],c.hasOwnProperty(te)&&(re!=null||he!=null))switch(te){case"type":m=re;break;case"name":f=re;break;case"checked":J=re;break;case"defaultChecked":ie=re;break;case"value":v=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,r));break;default:re!==he&&Vt(n,r,te,re,c,he)}}Rl(n,v,T,L,J,ie,m,f);return;case"select":re=v=T=te=null;for(m in l)if(L=l[m],l.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":re=L;default:c.hasOwnProperty(m)||Vt(n,r,m,null,c,L)}for(f in c)if(m=c[f],L=l[f],c.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==L&&Vt(n,r,f,m,c,L)}r=T,l=v,c=re,te!=null?Ua(n,!!l,te,!1):!!c!=!!l&&(r!=null?Ua(n,!!l,r,!0):Ua(n,!!l,l?[]:"",!1));return;case"textarea":re=te=null;for(T in l)if(f=l[T],l.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Vt(n,r,T,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":te=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Vt(n,r,v,f,c,m)}Ju(n,te,re);return;case"option":for(var De in l)if(te=l[De],l.hasOwnProperty(De)&&te!=null&&!c.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:Vt(n,r,De,null,c,te)}for(L in c)if(te=c[L],re=l[L],c.hasOwnProperty(L)&&te!==re&&(te!=null||re!=null))switch(L){case"selected":n.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Vt(n,r,L,te,c,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in l)te=l[Ke],l.hasOwnProperty(Ke)&&te!=null&&!c.hasOwnProperty(Ke)&&Vt(n,r,Ke,null,c,te);for(J in c)if(te=c[J],re=l[J],c.hasOwnProperty(J)&&te!==re&&(te!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,r));break;default:Vt(n,r,J,te,c,re)}return;default:if(Il(r)){for(var Lt in l)te=l[Lt],l.hasOwnProperty(Lt)&&te!==void 0&&!c.hasOwnProperty(Lt)&&fg(n,r,Lt,void 0,c,te);for(ie in c)te=c[ie],re=l[ie],!c.hasOwnProperty(ie)||te===re||te===void 0&&re===void 0||fg(n,r,ie,te,c,re);return}}for(var K in l)te=l[K],l.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&Vt(n,r,K,null,c,te);for(he in c)te=c[he],re=l[he],!c.hasOwnProperty(he)||te===re||te==null&&re==null||Vt(n,r,he,te,c,re)}function Fb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,T=f.duration;if(m&&T&&Fb(v)){for(v=0,T=f.responseEnd,c+=1;c<l.length;c++){var L=l[c],J=L.startTime;if(J>T)break;var ie=L.transferSize,he=L.initiatorType;ie&&Fb(he)&&(L=L.responseEnd,v+=ie*(L<T?1:(T-J)/(L-J)))}if(--c,r+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var mg=null,gg=null;function td(n){return n.nodeType===9?n:n.ownerDocument}function qb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gb(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function pg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xg=null;function wE(){var n=window.event;return n&&n.type==="popstate"?n===xg?!1:(xg=n,!0):(xg=null,!1)}var $b=typeof setTimeout=="function"?setTimeout:void 0,_E=typeof clearTimeout=="function"?clearTimeout:void 0,Kb=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Kb<"u"?function(n){return Kb.resolve(null).then(n).catch(TE)}:$b;function TE(n){setTimeout(function(){throw n})}function ci(n){return n==="head"}function Yb(n,r){var l=r,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(f),fo(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")zc(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,zc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[$t]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&zc(n.ownerDocument.body);l=f}while(l);fo(r)}function Qb(n,r){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function yg(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":yg(l),or(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function EE(n,r,l,c){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[$t])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ws(n.nextSibling),n===null)break}return null}function jE(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ws(n.nextSibling),n===null))return null;return n}function Xb(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Ws(n.nextSibling),n===null))return null;return n}function bg(n){return n.data==="$?"||n.data==="$~"}function vg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function SE(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ws(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var wg=null;function Wb(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return Ws(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function Jb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function Zb(n,r,l){switch(r=td(l),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function zc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);or(n)}var Js=new Map,ev=new Set;function nd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var va=ge.d;ge.d={f:CE,r:AE,D:RE,C:IE,L:kE,m:DE,X:ME,S:OE,M:VE};function CE(){var n=va.f(),r=Kh();return n||r}function AE(n){var r=ss(n);r!==null&&r.tag===5&&r.type==="form"?xy(r):va.r(n)}var co=typeof document>"u"?null:document;function tv(n,r,l){var c=co;if(c&&typeof r=="string"&&r){var f=gs(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),ev.has(f)||(ev.add(f),n={rel:n,crossOrigin:l,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Bn(r,"link",n),gn(r),c.head.appendChild(r)))}}function RE(n){va.D(n),tv("dns-prefetch",n,null)}function IE(n,r){va.C(n,r),tv("preconnect",n,r)}function kE(n,r,l){va.L(n,r,l);var c=co;if(c&&n&&r){var f='link[rel="preload"][as="'+gs(r)+'"]';r==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+gs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+gs(l.imageSizes)+'"]')):f+='[href="'+gs(n)+'"]';var m=f;switch(r){case"style":m=uo(n);break;case"script":m=ho(n)}Js.has(m)||(n=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),Js.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Bc(m))||r==="script"&&c.querySelector(Hc(m))||(r=c.createElement("link"),Bn(r,"link",n),gn(r),c.head.appendChild(r)))}}function DE(n,r){va.m(n,r);var l=co;if(l&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+gs(c)+'"][href="'+gs(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ho(n)}if(!Js.has(m)&&(n=_({rel:"modulepreload",href:n},r),Js.set(m,n),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hc(m)))return}c=l.createElement("link"),Bn(c,"link",n),gn(c),l.head.appendChild(c)}}}function OE(n,r,l){va.S(n,r,l);var c=co;if(c&&n){var f=Bs(c).hoistableStyles,m=uo(n);r=r||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(Bc(m)))T.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},l),(l=Js.get(m))&&_g(n,l);var L=v=c.createElement("link");gn(L),Bn(L,"link",n),L._p=new Promise(function(J,ie){L.onload=J,L.onerror=ie}),L.addEventListener("load",function(){T.loading|=1}),L.addEventListener("error",function(){T.loading|=2}),T.loading|=4,sd(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function ME(n,r){va.X(n,r);var l=co;if(l&&n){var c=Bs(l).hoistableScripts,f=ho(n),m=c.get(f);m||(m=l.querySelector(Hc(f)),m||(n=_({src:n,async:!0},r),(r=Js.get(f))&&Ng(n,r),m=l.createElement("script"),gn(m),Bn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function VE(n,r){va.M(n,r);var l=co;if(l&&n){var c=Bs(l).hoistableScripts,f=ho(n),m=c.get(f);m||(m=l.querySelector(Hc(f)),m||(n=_({src:n,async:!0,type:"module"},r),(r=Js.get(f))&&Ng(n,r),m=l.createElement("script"),gn(m),Bn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function nv(n,r,l,c){var f=(f=Y.current)?nd(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=uo(l.href),l=Bs(f).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=uo(l.href);var m=Bs(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Bc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Js.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Js.set(n,l),m||LE(f,n,l,v.state))),r&&c===null)throw Error(a(528,""));return v}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ho(l),l=Bs(f).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function uo(n){return'href="'+gs(n)+'"'}function Bc(n){return'link[rel="stylesheet"]['+n+"]"}function sv(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function LE(n,r,l,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Bn(r,"link",l),gn(r),n.head.appendChild(r))}function ho(n){return'[src="'+gs(n)+'"]'}function Hc(n){return"script[async]"+n}function rv(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+gs(l.href)+'"]');if(c)return r.instance=c,gn(c),c;var f=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),gn(c),Bn(c,"style",f),sd(c,l.precedence,n),r.instance=c;case"stylesheet":f=uo(l.href);var m=n.querySelector(Bc(f));if(m)return r.state.loading|=4,r.instance=m,gn(m),m;c=sv(l),(f=Js.get(f))&&_g(c,f),m=(n.ownerDocument||n).createElement("link"),gn(m);var v=m;return v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Bn(m,"link",c),r.state.loading|=4,sd(m,l.precedence,n),r.instance=m;case"script":return m=ho(l.src),(f=n.querySelector(Hc(m)))?(r.instance=f,gn(f),f):(c=l,(f=Js.get(m))&&(c=_({},l),Ng(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),gn(f),Bn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,sd(c,l.precedence,n));return r.instance}function sd(n,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function _g(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Ng(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var rd=null;function av(n,r,l){if(rd===null){var c=new Map,f=rd=new Map;f.set(l,c)}else f=rd,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var m=l[f];if(!(m[$t]||m[fe]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=n+v;var T=c.get(v);T?T.push(m):c.set(v,[m])}}return c}function iv(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function PE(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function lv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function UE(n,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=uo(c.href),m=r.querySelector(Bc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=ad.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=m,gn(m);return}m=r.ownerDocument||r,c=sv(c),(f=Js.get(f))&&_g(c,f),m=m.createElement("link"),gn(m);var v=m;v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Bn(m,"link",c),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=ad.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var Tg=0;function zE(n,r){return n.stylesheets&&n.count===0&&ld(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&ld(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&Tg===0&&(Tg=62500*vE());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ld(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Tg?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function ad(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function ld(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,r.forEach(BE,n),id=null,ad.call(n))}function BE(n,r){if(!(r.state.loading&4)){var l=id.get(n);if(l)var c=l.get(null);else{l=new Map,id.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=ad.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Fc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function HE(n,r,l,c,f,m,v,T,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ee(0),this.hiddenUpdates=ee(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function ov(n,r,l,c,f,m,v,T,L,J,ie,he){return n=new HE(n,r,l,v,L,J,ie,he,T),r=1,m===!0&&(r|=24),m=Cs(3,null,null,r),n.current=m,m.stateNode=n,r=sm(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:r},lm(m),n}function cv(n){return n?(n=Hl,n):Hl}function uv(n,r,l,c,f,m){f=cv(f),c.context===null?c.context=f:c.pendingContext=f,c=Ja(r),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Za(n,c,r),l!==null&&(ws(l,n,r),wc(l,n,r))}function hv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Eg(n,r){hv(n,r),(n=n.alternate)&&hv(n,r)}function dv(n){if(n.tag===13||n.tag===31){var r=Xi(n,67108864);r!==null&&ws(r,n,67108864),Eg(n,67108864)}}function fv(n){if(n.tag===13||n.tag===31){var r=Ds();r=qe(r);var l=Xi(n,r);l!==null&&ws(l,n,r),Eg(n,r)}}var od=!0;function FE(n,r,l,c){var f=H.T;H.T=null;var m=ge.p;try{ge.p=2,jg(n,r,l,c)}finally{ge.p=m,H.T=f}}function qE(n,r,l,c){var f=H.T;H.T=null;var m=ge.p;try{ge.p=8,jg(n,r,l,c)}finally{ge.p=m,H.T=f}}function jg(n,r,l,c){if(od){var f=Sg(c);if(f===null)dg(n,r,c,cd,l),gv(n,c);else if($E(f,n,r,l,c))c.stopPropagation();else if(gv(n,c),r&4&&-1<GE.indexOf(n)){for(;f!==null;){var m=ss(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=fs(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var L=1<<31-Tt(v);T.entanglements[1]|=L,v&=~L}Ur(m),(_t&6)===0&&(Gh=tn()+500,Lc(0))}}break;case 31:case 13:T=Xi(m,2),T!==null&&ws(T,m,2),Kh(),Eg(m,2)}if(m=Sg(c),m===null&&dg(n,r,c,cd,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else dg(n,r,c,null,l)}}function Sg(n){return n=Hs(n),Cg(n)}var cd=null;function Cg(n){if(cd=null,n=Kn(n),n!==null){var r=u(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=h(r),n!==null)return n;n=null}else if(l===31){if(n=g(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return cd=n,null}function mv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case $e:return 2;case pt:return 8;case Ut:case on:return 32;case Dn:return 268435456;default:return 32}default:return 32}}var Ag=!1,ui=null,hi=null,di=null,qc=new Map,Gc=new Map,fi=[],GE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gv(n,r){switch(n){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":qc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(r.pointerId)}}function $c(n,r,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=ss(r),r!==null&&dv(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function $E(n,r,l,c,f){switch(r){case"focusin":return ui=$c(ui,n,r,l,c,f),!0;case"dragenter":return hi=$c(hi,n,r,l,c,f),!0;case"mouseover":return di=$c(di,n,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return qc.set(m,$c(qc.get(m)||null,n,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Gc.set(m,$c(Gc.get(m)||null,n,r,l,c,f)),!0}return!1}function pv(n){var r=Kn(n.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=h(l),r!==null){n.blockedOn=r,xt(n.priority,function(){fv(l)});return}}else if(r===31){if(r=g(l),r!==null){n.blockedOn=r,xt(n.priority,function(){fv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ud(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Sg(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);ac=c,l.target.dispatchEvent(c),ac=null}else return r=ss(l),r!==null&&dv(r),n.blockedOn=l,!1;r.shift()}return!0}function xv(n,r,l){ud(n)&&l.delete(r)}function KE(){Ag=!1,ui!==null&&ud(ui)&&(ui=null),hi!==null&&ud(hi)&&(hi=null),di!==null&&ud(di)&&(di=null),qc.forEach(xv),Gc.forEach(xv)}function hd(n,r){n.blockedOn===r&&(n.blockedOn=null,Ag||(Ag=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,KE)))}var dd=null;function yv(n){dd!==n&&(dd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){dd===n&&(dd=null);for(var r=0;r<n.length;r+=3){var l=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(Cg(c||l)===null)continue;break}var m=ss(l);m!==null&&(n.splice(r,3),r-=3,Sm(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function fo(n){function r(L){return hd(L,n)}ui!==null&&hd(ui,n),hi!==null&&hd(hi,n),di!==null&&hd(di,n),qc.forEach(r),Gc.forEach(r);for(var l=0;l<fi.length;l++){var c=fi[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<fi.length&&(l=fi[0],l.blockedOn===null);)pv(l),l.blockedOn===null&&fi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[ve]||null;if(typeof m=="function")v||yv(l);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[ve]||null)T=v.formAction;else if(Cg(f)!==null)continue}else T=v.action;typeof T=="function"?l[c+1]=T:(l.splice(c,3),c-=3),yv(l)}}}function bv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Rg(n){this._internalRoot=n}fd.prototype.render=Rg.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,c=Ds();uv(l,c,n,r,null,null)},fd.prototype.unmount=Rg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;uv(n.current,2,null,n,null,null),Kh(),r[Le]=null}};function fd(n){this._internalRoot=n}fd.prototype.unstable_scheduleHydration=function(n){if(n){var r=Et();n={blockedOn:null,target:n,priority:r};for(var l=0;l<fi.length&&r!==0&&r<fi[l].priority;l++);fi.splice(l,0,n),l===0&&pv(n)}};var vv=e.version;if(vv!=="19.2.0")throw Error(a(527,vv,"19.2.0"));ge.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var YE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Gt=md.inject(YE),kt=md}catch{}}return Yc.createRoot=function(n,r){if(!o(n))throw Error(a(299));var l=!1,c="",f=Sy,m=Cy,v=Ay;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=ov(n,1,!1,null,null,l,c,null,f,m,v,bv),n[Le]=r.current,hg(n),new Rg(r)},Yc.hydrateRoot=function(n,r,l){if(!o(n))throw Error(a(299));var c=!1,f="",m=Sy,v=Cy,T=Ay,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=ov(n,1,!0,r,l??null,c,f,L,m,v,T,bv),r.context=cv(null),l=r.current,c=Ds(),c=qe(c),f=Ja(c),f.callback=null,Za(l,f,c),l=c,r.current.lanes=l,oe(r,l),Ur(r),n[Le]=r.current,hg(n),new fd(r)},Yc.version="19.2.0",Yc}var Rv;function rj(){if(Rv)return Dg.exports;Rv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dg.exports=sj(),Dg.exports}var aj=rj();const ij=k_(aj);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iv="popstate";function lj(s={}){function e(o,u){let{pathname:h="/",search:g="",hash:x=""}=wl(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),rp("",{pathname:h,search:g,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let h=o.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let x=o.location.href,p=x.indexOf("#");g=p===-1?x:x.slice(0,p)}return g+"#"+(typeof u=="string"?u:gu(u))}function a(o,u){Us(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return cj(e,t,a,s)}function Zt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Us(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oj(){return Math.random().toString(36).substring(2,10)}function kv(s,e){return{usr:s.state,key:s.key,idx:e}}function rp(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?wl(e):e,state:t,key:e&&e.key||a||oj()}}function gu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function wl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function cj(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,h=o.history,g="POP",x=null,p=b();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function b(){return(h.state||{idx:null}).idx}function _(){g="POP";let z=b(),D=z==null?null:z-p;p=z,x&&x({action:g,location:$.location,delta:D})}function N(z,D){g="PUSH";let Z=rp($.location,z,D);t&&t(Z,z),p=b()+1;let Q=kv(Z,p),ae=$.createHref(Z);try{h.pushState(Q,"",ae)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(ae)}u&&x&&x({action:g,location:$.location,delta:1})}function I(z,D){g="REPLACE";let Z=rp($.location,z,D);t&&t(Z,z),p=b();let Q=kv(Z,p),ae=$.createHref(Z);h.replaceState(Q,"",ae),u&&x&&x({action:g,location:$.location,delta:0})}function U(z){return uj(z)}let $={get action(){return g},get location(){return s(o,h)},listen(z){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(Iv,_),x=z,()=>{o.removeEventListener(Iv,_),x=null}},createHref(z){return e(o,z)},createURL:U,encodeLocation(z){let D=U(z);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:N,replace:I,go(z){return h.go(z)}};return $}function uj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:gu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function D_(s,e,t="/"){return hj(s,e,t,!1)}function hj(s,e,t,a){let o=typeof e=="string"?wl(e):e,u=Ra(o.pathname||"/",t);if(u==null)return null;let h=O_(s);dj(h);let g=null;for(let x=0;g==null&&x<h.length;++x){let p=Nj(u);g=wj(h[x],p,a)}return g}function O_(s,e=[],t=[],a="",o=!1){let u=(h,g,x=o,p)=>{let b={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&x)return;Zt(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let _=Sa([a,b.relativePath]),N=t.concat(b);h.children&&h.children.length>0&&(Zt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),O_(h.children,e,N,_,x)),!(h.path==null&&!h.index)&&e.push({path:_,score:bj(_,h.index),routesMeta:N})};return s.forEach((h,g)=>{var x;if(h.path===""||!((x=h.path)!=null&&x.includes("?")))u(h,g);else for(let p of M_(h.path))u(h,g,!0,p)}),e}function M_(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let h=M_(a.join("/")),g=[];return g.push(...h.map(x=>x===""?u:[u,x].join("/"))),o&&g.push(...h),g.map(x=>s.startsWith("/")&&x===""?"/":x)}function dj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:vj(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var fj=/^:[\w-]+$/,mj=3,gj=2,pj=1,xj=10,yj=-2,Dv=s=>s==="*";function bj(s,e){let t=s.split("/"),a=t.length;return t.some(Dv)&&(a+=yj),e&&(a+=gj),t.filter(o=>!Dv(o)).reduce((o,u)=>o+(fj.test(u)?mj:u===""?pj:xj),a)}function vj(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function wj(s,e,t=!1){let{routesMeta:a}=s,o={},u="/",h=[];for(let g=0;g<a.length;++g){let x=a[g],p=g===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",_=Ld({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},b),N=x.route;if(!_&&p&&t&&!a[a.length-1].route.index&&(_=Ld({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!_)return null;Object.assign(o,_.params),h.push({params:o,pathname:Sa([u,_.pathname]),pathnameBase:Cj(Sa([u,_.pathnameBase])),route:N}),_.pathnameBase!=="/"&&(u=Sa([u,_.pathnameBase]))}return h}function Ld(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=_j(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:_},N)=>{if(b==="*"){let U=g[N]||"";h=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const I=g[N];return _&&!I?p[b]=void 0:p[b]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:s}}function _j(s,e=!1,t=!0){Us(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,x)=>(a.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Nj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Us(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ra(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var Tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ej=s=>Tj.test(s);function jj(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?wl(s):s,u;if(t)if(Ej(t))u=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Us(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?u=Ov(t.substring(1),"/"):u=Ov(t,e)}else u=e;return{pathname:u,search:Aj(a),hash:Rj(o)}}function Ov(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Lg(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sj(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function V_(s){let e=Sj(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function L_(s,e,t,a=!1){let o;typeof s=="string"?o=wl(s):(o={...s},Zt(!o.pathname||!o.pathname.includes("?"),Lg("?","pathname","search",o)),Zt(!o.pathname||!o.pathname.includes("#"),Lg("#","pathname","hash",o)),Zt(!o.search||!o.search.includes("#"),Lg("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,g;if(h==null)g=t;else{let _=e.length-1;if(!a&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),_-=1;o.pathname=N.join("/")}g=_>=0?e[_]:"/"}let x=jj(o,g),p=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(p||b)&&(x.pathname+="/"),x}var Sa=s=>s.join("/").replace(/\/\/+/g,"/"),Cj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Aj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Rj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Ij(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var P_=["POST","PUT","PATCH","DELETE"];new Set(P_);var kj=["GET",...P_];new Set(kj);var Ho=E.createContext(null);Ho.displayName="DataRouter";var lf=E.createContext(null);lf.displayName="DataRouterState";E.createContext(!1);var U_=E.createContext({isTransitioning:!1});U_.displayName="ViewTransition";var Dj=E.createContext(new Map);Dj.displayName="Fetchers";var Oj=E.createContext(null);Oj.displayName="Await";var Zr=E.createContext(null);Zr.displayName="Navigation";var ju=E.createContext(null);ju.displayName="Location";var ea=E.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var Hp=E.createContext(null);Hp.displayName="RouteError";function Mj(s,{relative:e}={}){Zt(Su(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=E.useContext(Zr),{hash:o,pathname:u,search:h}=Cu(s,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:Sa([t,u])),a.createHref({pathname:g,search:h,hash:o})}function Su(){return E.useContext(ju)!=null}function Va(){return Zt(Su(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(ju).location}var z_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function B_(s){E.useContext(Zr).static||E.useLayoutEffect(s)}function ir(){let{isDataRoute:s}=E.useContext(ea);return s?Qj():Vj()}function Vj(){Zt(Su(),"useNavigate() may be used only in the context of a <Router> component.");let s=E.useContext(Ho),{basename:e,navigator:t}=E.useContext(Zr),{matches:a}=E.useContext(ea),{pathname:o}=Va(),u=JSON.stringify(V_(a)),h=E.useRef(!1);return B_(()=>{h.current=!0}),E.useCallback((x,p={})=>{if(Us(h.current,z_),!h.current)return;if(typeof x=="number"){t.go(x);return}let b=L_(x,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Sa([e,b.pathname])),(p.replace?t.replace:t.push)(b,p.state,p)},[e,t,u,o,s])}E.createContext(null);function Lj(){let{matches:s}=E.useContext(ea),e=s[s.length-1];return e?e.params:{}}function Cu(s,{relative:e}={}){let{matches:t}=E.useContext(ea),{pathname:a}=Va(),o=JSON.stringify(V_(t));return E.useMemo(()=>L_(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function Pj(s,e){return H_(s,e)}function H_(s,e,t,a,o){var Z;Zt(Su(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=E.useContext(Zr),{matches:h}=E.useContext(ea),g=h[h.length-1],x=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",_=g&&g.route;{let Q=_&&_.path||"";F_(p,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let N=Va(),I;if(e){let Q=typeof e=="string"?wl(e):e;Zt(b==="/"||((Z=Q.pathname)==null?void 0:Z.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),I=Q}else I=N;let U=I.pathname||"/",$=U;if(b!=="/"){let Q=b.replace(/^\//,"").split("/");$="/"+U.replace(/^\//,"").split("/").slice(Q.length).join("/")}let z=D_(s,{pathname:$});Us(_||z!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Us(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=Fj(z&&z.map(Q=>Object.assign({},Q,{params:Object.assign({},x,Q.params),pathname:Sa([b,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?b:Sa([b,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,t,a,o);return e&&D?E.createElement(ju.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},D):D}function Uj(){let s=Yj(),e=Ij(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:u},"ErrorBoundary")," or"," ",E.createElement("code",{style:u},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:o},t):null,h)}var zj=E.createElement(Uj,null),Bj=class extends E.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?E.createElement(ea.Provider,{value:this.props.routeContext},E.createElement(Hp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hj({routeContext:s,match:e,children:t}){let a=E.useContext(Ho);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ea.Provider,{value:s},t)}function Fj(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t==null?void 0:t.errors;if(h!=null){let b=u.findIndex(_=>_.route.id&&(h==null?void 0:h[_.route.id])!==void 0);Zt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,x=-1;if(t)for(let b=0;b<u.length;b++){let _=u[b];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(x=b),_.route.id){let{loaderData:N,errors:I}=t,U=_.route.loader&&!N.hasOwnProperty(_.route.id)&&(!I||I[_.route.id]===void 0);if(_.route.lazy||U){g=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}let p=t&&a?(b,_)=>{var N,I;a(b,{location:t.location,params:((I=(N=t.matches)==null?void 0:N[0])==null?void 0:I.params)??{},errorInfo:_})}:void 0;return u.reduceRight((b,_,N)=>{let I,U=!1,$=null,z=null;t&&(I=h&&_.route.id?h[_.route.id]:void 0,$=_.route.errorElement||zj,g&&(x<0&&N===0?(F_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,z=null):x===N&&(U=!0,z=_.route.hydrateFallbackElement||null)));let D=e.concat(u.slice(0,N+1)),Z=()=>{let Q;return I?Q=$:U?Q=z:_.route.Component?Q=E.createElement(_.route.Component,null):_.route.element?Q=_.route.element:Q=b,E.createElement(Hj,{match:_,routeContext:{outlet:b,matches:D,isDataRoute:t!=null},children:Q})};return t&&(_.route.ErrorBoundary||_.route.errorElement||N===0)?E.createElement(Bj,{location:t.location,revalidation:t.revalidation,component:$,error:I,children:Z(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:p}):Z()},null)}function Fp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qj(s){let e=E.useContext(Ho);return Zt(e,Fp(s)),e}function Gj(s){let e=E.useContext(lf);return Zt(e,Fp(s)),e}function $j(s){let e=E.useContext(ea);return Zt(e,Fp(s)),e}function qp(s){let e=$j(s),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function Kj(){return qp("useRouteId")}function Yj(){var a;let s=E.useContext(Hp),e=Gj("useRouteError"),t=qp("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[t]}function Qj(){let{router:s}=qj("useNavigate"),e=qp("useNavigate"),t=E.useRef(!1);return B_(()=>{t.current=!0}),E.useCallback(async(o,u={})=>{Us(t.current,z_),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Mv={};function F_(s,e,t){!e&&!Mv[s]&&(Mv[s]=!0,Us(!1,t))}E.memo(Xj);function Xj({routes:s,future:e,state:t,unstable_onError:a}){return H_(s,void 0,t,a,e)}function zr(s){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wj({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:u=!1}){Zt(!Su(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=E.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=wl(t));let{pathname:x="/",search:p="",hash:b="",state:_=null,key:N="default"}=t,I=E.useMemo(()=>{let U=Ra(x,h);return U==null?null:{location:{pathname:U,search:p,hash:b,state:_,key:N},navigationType:a}},[h,x,p,b,_,N,a]);return Us(I!=null,`<Router basename="${h}"> is not able to match the URL "${x}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:E.createElement(Zr.Provider,{value:g},E.createElement(ju.Provider,{children:e,value:I}))}function Jj({children:s,location:e}){return Pj(ap(s),e)}function ap(s,e=[]){let t=[];return E.Children.forEach(s,(a,o)=>{if(!E.isValidElement(a))return;let u=[...e,o];if(a.type===E.Fragment){t.push.apply(t,ap(a.props.children,u));return}Zt(a.type===zr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=ap(a.props.children,u)),t.push(h)}),t}var Td="get",Ed="application/x-www-form-urlencoded";function of(s){return s!=null&&typeof s.tagName=="string"}function Zj(s){return of(s)&&s.tagName.toLowerCase()==="button"}function eS(s){return of(s)&&s.tagName.toLowerCase()==="form"}function tS(s){return of(s)&&s.tagName.toLowerCase()==="input"}function nS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function sS(s,e){return s.button===0&&(!e||e==="_self")&&!nS(s)}function ip(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function rS(s,e){let t=ip(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(u=>{t.append(o,u)})}),t}var gd=null;function aS(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var iS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pg(s){return s!=null&&!iS.has(s)?(Us(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ed}"`),null):s}function lS(s,e){let t,a,o,u,h;if(eS(s)){let g=s.getAttribute("action");a=g?Ra(g,e):null,t=s.getAttribute("method")||Td,o=Pg(s.getAttribute("enctype"))||Ed,u=new FormData(s)}else if(Zj(s)||tS(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=s.getAttribute("formaction")||g.getAttribute("action");if(a=x?Ra(x,e):null,t=s.getAttribute("formmethod")||g.getAttribute("method")||Td,o=Pg(s.getAttribute("formenctype"))||Pg(g.getAttribute("enctype"))||Ed,u=new FormData(g,s),!aS()){let{name:p,type:b,value:_}=s;if(b==="image"){let N=p?`${p}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else p&&u.append(p,_)}}else{if(of(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Td,a=null,o=Ed,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function oS(s,e,t){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&Ra(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function cS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function hS(s,e,t){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await cS(u,t);return h.links?h.links():[]}return[]}));return gS(a.flat(1).filter(uS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Vv(s,e,t,a,o,u){let h=(x,p)=>t[p]?x.route.id!==t[p].route.id:!0,g=(x,p)=>{var b;return t[p].pathname!==x.pathname||((b=t[p].route.path)==null?void 0:b.endsWith("*"))&&t[p].params["*"]!==x.params["*"]};return u==="assets"?e.filter((x,p)=>h(x,p)||g(x,p)):u==="data"?e.filter((x,p)=>{var _;let b=a.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(h(x,p)||g(x,p))return!0;if(x.route.shouldRevalidate){let N=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(s,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function dS(s,e,{includeHydrateFallback:t}={}){return fS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function fS(s){return[...new Set(s)]}function mS(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function gS(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(mS(o));return t.has(u)||(t.add(u),a.push({key:u,link:o})),a},[])}function q_(){let s=E.useContext(Ho);return Gp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function pS(){let s=E.useContext(lf);return Gp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var $p=E.createContext(void 0);$p.displayName="FrameworkContext";function G_(){let s=E.useContext($p);return Gp(s,"You must render this element inside a <HydratedRouter> element"),s}function xS(s,e){let t=E.useContext($p),[a,o]=E.useState(!1),[u,h]=E.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:p,onMouseLeave:b,onTouchStart:_}=e,N=E.useRef(null);E.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let $=D=>{D.forEach(Z=>{h(Z.isIntersecting)})},z=new IntersectionObserver($,{threshold:.5});return N.current&&z.observe(N.current),()=>{z.disconnect()}}},[s]),E.useEffect(()=>{if(a){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[a]);let I=()=>{o(!0)},U=()=>{o(!1),h(!1)};return t?s!=="intent"?[u,N,{}]:[u,N,{onFocus:Qc(g,I),onBlur:Qc(x,U),onMouseEnter:Qc(p,I),onMouseLeave:Qc(b,U),onTouchStart:Qc(_,I)}]:[!1,N,{}]}function Qc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function yS({page:s,...e}){let{router:t}=q_(),a=E.useMemo(()=>D_(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?E.createElement(vS,{page:s,matches:a,...e}):null}function bS(s){let{manifest:e,routeModules:t}=G_(),[a,o]=E.useState([]);return E.useEffect(()=>{let u=!1;return hS(s,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,t]),a}function vS({page:s,matches:e,...t}){let a=Va(),{manifest:o,routeModules:u}=G_(),{basename:h}=q_(),{loaderData:g,matches:x}=pS(),p=E.useMemo(()=>Vv(s,e,x,o,a,"data"),[s,e,x,o,a]),b=E.useMemo(()=>Vv(s,e,x,o,a,"assets"),[s,e,x,o,a]),_=E.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let U=new Set,$=!1;if(e.forEach(D=>{var Q;let Z=o.routes[D.route.id];!Z||!Z.hasLoader||(!p.some(ae=>ae.route.id===D.route.id)&&D.route.id in g&&((Q=u[D.route.id])!=null&&Q.shouldRevalidate)||Z.hasClientLoader?$=!0:U.add(D.route.id))}),U.size===0)return[];let z=oS(s,h,"data");return $&&U.size>0&&z.searchParams.set("_routes",e.filter(D=>U.has(D.route.id)).map(D=>D.route.id).join(",")),[z.pathname+z.search]},[h,g,a,o,p,e,s,u]),N=E.useMemo(()=>dS(b,o),[b,o]),I=bS(b);return E.createElement(E.Fragment,null,_.map(U=>E.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),N.map(U=>E.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),I.map(({key:U,link:$})=>E.createElement("link",{key:U,nonce:t.nonce,...$})))}function wS(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$_&&(window.__reactRouterVersion="7.9.6")}catch{}function _S({basename:s,children:e,window:t}){let a=E.useRef();a.current==null&&(a.current=lj({window:t,v5Compat:!0}));let o=a.current,[u,h]=E.useState({action:o.action,location:o.location}),g=E.useCallback(x=>{E.startTransition(()=>h(x))},[h]);return E.useLayoutEffect(()=>o.listen(g),[o,g]),E.createElement(Wj,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var K_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y_=E.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:u,replace:h,state:g,target:x,to:p,preventScrollReset:b,viewTransition:_,...N},I){let{basename:U}=E.useContext(Zr),$=typeof p=="string"&&K_.test(p),z,D=!1;if(typeof p=="string"&&$&&(z=p,$_))try{let A=new URL(window.location.href),M=p.startsWith("//")?new URL(A.protocol+p):new URL(p),k=Ra(M.pathname,U);M.origin===A.origin&&k!=null?p=k+M.search+M.hash:D=!0}catch{Us(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=Mj(p,{relative:o}),[Q,ae,me]=xS(a,N),ye=jS(p,{replace:h,state:g,target:x,preventScrollReset:b,relative:o,viewTransition:_});function S(A){e&&e(A),A.defaultPrevented||ye(A)}let j=E.createElement("a",{...N,...me,href:z||Z,onClick:D||u?e:S,ref:wS(I,ae),target:x,"data-discover":!$&&t==="render"?"true":void 0});return Q&&!$?E.createElement(E.Fragment,null,j,E.createElement(yS,{page:Z})):j});Y_.displayName="Link";var NS=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:u,to:h,viewTransition:g,children:x,...p},b){let _=Cu(h,{relative:p.relative}),N=Va(),I=E.useContext(lf),{navigator:U,basename:$}=E.useContext(Zr),z=I!=null&&IS(_)&&g===!0,D=U.encodeLocation?U.encodeLocation(_).pathname:_.pathname,Z=N.pathname,Q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),Q=Q?Q.toLowerCase():null,D=D.toLowerCase()),Q&&$&&(Q=Ra(Q,$)||Q);const ae=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let me=Z===D||!o&&Z.startsWith(D)&&Z.charAt(ae)==="/",ye=Q!=null&&(Q===D||!o&&Q.startsWith(D)&&Q.charAt(D.length)==="/"),S={isActive:me,isPending:ye,isTransitioning:z},j=me?e:void 0,A;typeof a=="function"?A=a(S):A=[a,me?"active":null,ye?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(S):u;return E.createElement(Y_,{...p,"aria-current":j,className:A,ref:b,style:M,to:h,viewTransition:g},typeof x=="function"?x(S):x)});NS.displayName="NavLink";var TS=E.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:u,method:h=Td,action:g,onSubmit:x,relative:p,preventScrollReset:b,viewTransition:_,...N},I)=>{let U=AS(),$=RS(g,{relative:p}),z=h.toLowerCase()==="get"?"get":"post",D=typeof g=="string"&&K_.test(g),Z=Q=>{if(x&&x(Q),Q.defaultPrevented)return;Q.preventDefault();let ae=Q.nativeEvent.submitter,me=(ae==null?void 0:ae.getAttribute("formmethod"))||h;U(ae||Q.currentTarget,{fetcherKey:e,method:me,navigate:t,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:_})};return E.createElement("form",{ref:I,method:z,action:$,onSubmit:a?x:Z,...N,"data-discover":!D&&s==="render"?"true":void 0})});TS.displayName="Form";function ES(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q_(s){let e=E.useContext(Ho);return Zt(e,ES(s)),e}function jS(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:u,viewTransition:h}={}){let g=ir(),x=Va(),p=Cu(s,{relative:u});return E.useCallback(b=>{if(sS(b,e)){b.preventDefault();let _=t!==void 0?t:gu(x)===gu(p);g(s,{replace:_,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[x,g,p,t,a,e,s,o,u,h])}function X_(s){Us(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(ip(s)),t=E.useRef(!1),a=Va(),o=E.useMemo(()=>rS(a.search,t.current?null:e.current),[a.search]),u=ir(),h=E.useCallback((g,x)=>{const p=ip(typeof g=="function"?g(new URLSearchParams(o)):g);t.current=!0,u("?"+p,x)},[u,o]);return[o,h]}var SS=0,CS=()=>`__${String(++SS)}__`;function AS(){let{router:s}=Q_("useSubmit"),{basename:e}=E.useContext(Zr),t=Kj();return E.useCallback(async(a,o={})=>{let{action:u,method:h,encType:g,formData:x,body:p}=lS(a,e);if(o.navigate===!1){let b=o.fetcherKey||CS();await s.fetch(b,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function RS(s,{relative:e}={}){let{basename:t}=E.useContext(Zr),a=E.useContext(ea);Zt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...Cu(s||".",{relative:e})},h=Va();if(s==null){u.search=h.search;let g=new URLSearchParams(u.search),x=g.getAll("index");if(x.some(b=>b==="")){g.delete("index"),x.filter(_=>_).forEach(_=>g.append("index",_));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:Sa([t,u.pathname])),gu(u)}function IS(s,{relative:e}={}){let t=E.useContext(U_);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Q_("useViewTransitionState"),o=Cu(s,{relative:e});if(!t.isTransitioning)return!1;let u=Ra(t.currentLocation.pathname,a)||t.currentLocation.pathname,h=Ra(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Ld(o.pathname,h)!=null||Ld(o.pathname,u)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),Lv=s=>{const e=DS(s);return e.charAt(0).toUpperCase()+e.slice(1)},W_=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),OS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=E.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:h,...g},x)=>E.createElement("svg",{ref:x,...MS,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:W_("lucide",o),...!u&&!OS(g)&&{"aria-hidden":"true"},...g},[...h.map(([p,b])=>E.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(s,e)=>{const t=E.forwardRef(({className:a,...o},u)=>E.createElement(VS,{ref:u,iconNode:e,className:W_(`lucide-${kS(Lv(s))}`,`lucide-${s}`,a),...o}));return t.displayName=Lv(s),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kp=Re("arrow-left",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Pd=Re("arrow-right",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Pv=Re("baby",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],BS=Re("banknote",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Uv=Re("bell",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qS=Re("book-open",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ud=Re("briefcase",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],su=Re("building-2",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gl=Re("calendar",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],QS=Re("camera",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],WS=Re("chart-pie",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ru=Re("check",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],eC=Re("chevron-down",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xr=Re("chevron-right",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zn=Re("circle-alert",nC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Os=Re("circle-check-big",sC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pi=Re("circle-check",rC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],iC=Re("circle-question-mark",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],oC=Re("circle-user",lC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],J_=Re("circle-x",cC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],au=Re("clock",uC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],cf=Re("cloud-upload",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zv=Re("database",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ls=Re("download",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gC=Re("external-link",mC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lp=Re("eye-off",pC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pu=Re("eye",xC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Z_=Re("file-spreadsheet",yC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],it=Re("file-text",bC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Yp=Re("file",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Bv=Re("flask-conical",wC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Hv=Re("folder-open",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Fv=Re("folder",NC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],EC=Re("funnel",TC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Qp=Re("graduation-cap",jC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ug=Re("image",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],AC=Re("info",CC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],IC=Re("landmark",RC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],e1=Re("layout-grid",kC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],qv=Re("list",DC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bi=Re("loader-circle",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pl=Re("lock",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LC=Re("log-out",VC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],t1=Re("mail",PC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zC=Re("map-pin",UC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Xp=Re("maximize-2",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],hl=Re("message-circle",HC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jo=Re("message-square",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ls=Re("pen-line",qC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],n1=Re("phone",GC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],So=Re("plus",$C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Gv=Re("refresh-ccw",KC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],s1=Re("rotate-ccw",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Au=Re("save",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],r1=Re("school",XC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_l=Re("search",WC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Co=Re("send",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eA=Re("settings",ZC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bo=Re("shield-check",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zg=Re("square-check-big",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ao=Re("square-pen",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],aA=Re("stethoscope",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fn=Re("trash-2",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oA=Re("triangle-alert",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],In=Re("upload",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fr=Re("user",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mo=Re("users",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],op=Re("utensils",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fn=Re("x",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Wp=Re("zoom-in",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Jp=Re("zoom-out",gA),pA=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:bo,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],a1="TRC D LIU TRNG MU GIO VNG ANH",xA="modulepreload",yA=function(s){return"/"+s},$v={},iu=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let h=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(t.map(p=>{if(p=yA(p),p in $v)return;$v[p]=!0;const b=p.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":xA,b||(N.as="script"),N.crossOrigin="",N.href=p,x&&N.setAttribute("nonce",x),document.head.appendChild(N),b)return new Promise((I,U)=>{N.addEventListener("load",I),N.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},bA=()=>{};var Kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vA=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],g=s[t++],x=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const u=s[t++],h=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},l1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,x=o+2<s.length,p=x?s[o+2]:0,b=u>>2,_=(u&3)<<4|g>>4;let N=(g&15)<<2|p>>6,I=p&63;x||(I=64,h||(N=64)),a.push(t[b],t[_],t[N],t[I])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(i1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):vA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],g=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const _=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||_==null)throw new wA;const N=u<<2|g>>4;if(a.push(N),p!==64){const I=g<<4&240|p>>2;if(a.push(I),_!==64){const U=p<<6&192|_;a.push(U)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class wA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _A=function(s){const e=i1(s);return l1.encodeByteArray(e,!0)},zd=function(s){return _A(s).replace(/\./g,"")},o1=function(s){try{return l1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=()=>NA().__FIREBASE_DEFAULTS__,EA=()=>{if(typeof process>"u"||typeof Kv>"u")return;const s=Kv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},jA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&o1(s[1]);return e&&JSON.parse(e)},uf=()=>{try{return bA()||TA()||EA()||jA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},c1=s=>{var e,t;return(t=(e=uf())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},Zp=s=>{const e=c1(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},u1=()=>{var s;return(s=uf())==null?void 0:s.config},h1=s=>{var e;return(e=uf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hf(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[zd(JSON.stringify(t)),zd(JSON.stringify(h)),""].join(".")}const lu={};function CA(){const s={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?s.emulator.push(e):s.prod.push(e);return s}function AA(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Yv=!1;function df(s,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||lu[s]===e||lu[s]||Yv)return;lu[s]=e;function t(N){return`__firebase__banner__${N}`}const a="__firebase__banner",u=CA().prod.length>0;function h(){const N=document.getElementById(a);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function x(N,I){N.setAttribute("width","24"),N.setAttribute("id",I),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Yv=!0,h()},N}function b(N,I){N.setAttribute("id",I),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function _(){const N=AA(a),I=t("text"),U=document.getElementById(I)||document.createElement("span"),$=t("learnmore"),z=document.getElementById($)||document.createElement("a"),D=t("preprendIcon"),Z=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Q=N.element;g(Q),b(z,$);const ae=p();x(Z,D),Q.append(Z,U,z,ae),document.body.appendChild(Q)}u?(U.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(es())}function IA(){var e;const s=(e=uf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MA(){const s=es();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function VA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LA(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="FirebaseError";class Tr extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=UA,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?zA(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Tr(o,g,a)}}function zA(s,e){return s.replace(BA,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const BA=/\{\$([^}]+)}/g;function HA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ti(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(Qv(u)&&Qv(h)){if(!Ti(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function Qv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Wc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Jc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function FA(s,e){const t=new qA(s,e);return t.subscribe.bind(t)}class qA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");GA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=Bg),o.error===void 0&&(o.error=Bg),o.complete===void 0&&(o.complete=Bg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GA(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Bg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(s){return s&&s._delegate?s._delegate:s}class Ia{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new SA;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YA(e))try{this.getOrInitializeService({instanceIdentifier:cl})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cl){return this.instances.has(e)}getOptions(e=cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:KA(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=cl){return this.component?this.component.multipleInstances?e:cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KA(s){return s===cl?void 0:s}function YA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ht||(ht={}));const XA={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},WA=ht.INFO,JA={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},ZA=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=JA[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e0{constructor(e){this.name=e,this._logLevel=WA,this._logHandler=ZA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const eR=(s,e)=>e.some(t=>s instanceof t);let Xv,Wv;function tR(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return Wv||(Wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f1=new WeakMap,cp=new WeakMap,m1=new WeakMap,Hg=new WeakMap,t0=new WeakMap;function sR(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(vi(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&f1.set(t,s)}).catch(()=>{}),t0.set(e,s),e}function rR(s){if(cp.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});cp.set(s,e)}let up={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return cp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||m1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function aR(s){up=s(up)}function iR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(Fg(this),e,...t);return m1.set(a,e.sort?e.sort():[e]),vi(a)}:nR().includes(s)?function(...e){return s.apply(Fg(this),e),vi(f1.get(this))}:function(...e){return vi(s.apply(Fg(this),e))}}function lR(s){return typeof s=="function"?iR(s):(s instanceof IDBTransaction&&rR(s),eR(s,tR())?new Proxy(s,up):s)}function vi(s){if(s instanceof IDBRequest)return sR(s);if(Hg.has(s))return Hg.get(s);const e=lR(s);return e!==s&&(Hg.set(s,e),t0.set(e,s)),e}const Fg=s=>t0.get(s);function oR(s,e,{blocked:t,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=vi(h);return a&&h.addEventListener("upgradeneeded",x=>{a(vi(h.result),x.oldVersion,x.newVersion,vi(h.transaction),x)}),t&&h.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),g.then(x=>{u&&x.addEventListener("close",()=>u()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const cR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],qg=new Map;function Jv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(qg.get(e))return qg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=uR.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||cR.includes(t)))return;const u=async function(h,...g){const x=this.transaction(h,o?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[t](...g),o&&x.done]))[0]};return qg.set(e,u),u}aR(s=>({...s,get:(e,t,a)=>Jv(e,t)||s.get(e,t,a),has:(e,t)=>!!Jv(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dR(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function dR(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",Zv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new e0("@firebase/app"),fR="@firebase/app-compat",mR="@firebase/analytics-compat",gR="@firebase/analytics",pR="@firebase/app-check-compat",xR="@firebase/app-check",yR="@firebase/auth",bR="@firebase/auth-compat",vR="@firebase/database",wR="@firebase/data-connect",_R="@firebase/database-compat",NR="@firebase/functions",TR="@firebase/functions-compat",ER="@firebase/installations",jR="@firebase/installations-compat",SR="@firebase/messaging",CR="@firebase/messaging-compat",AR="@firebase/performance",RR="@firebase/performance-compat",IR="@firebase/remote-config",kR="@firebase/remote-config-compat",DR="@firebase/storage",OR="@firebase/storage-compat",MR="@firebase/firestore",VR="@firebase/ai",LR="@firebase/firestore-compat",PR="firebase",UR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",zR={[hp]:"fire-core",[fR]:"fire-core-compat",[gR]:"fire-analytics",[mR]:"fire-analytics-compat",[xR]:"fire-app-check",[pR]:"fire-app-check-compat",[yR]:"fire-auth",[bR]:"fire-auth-compat",[vR]:"fire-rtdb",[wR]:"fire-data-connect",[_R]:"fire-rtdb-compat",[NR]:"fire-fn",[TR]:"fire-fn-compat",[ER]:"fire-iid",[jR]:"fire-iid-compat",[SR]:"fire-fcm",[CR]:"fire-fcm-compat",[AR]:"fire-perf",[RR]:"fire-perf-compat",[IR]:"fire-rc",[kR]:"fire-rc-compat",[DR]:"fire-gcs",[OR]:"fire-gcs-compat",[MR]:"fire-fst",[LR]:"fire-fst-compat",[VR]:"fire-vertex","fire-js":"fire-js",[PR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,fp=new Map,mp=new Map;function ew(s,e){try{s.container.addComponent(e)}catch(t){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ei(s){const e=s.name;if(mp.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,s);for(const t of Ro.values())ew(t,s);for(const t of fp.values())ew(t,s);return!0}function ku(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ns(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Ru("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=UR;function n0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:dp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw wi.create("bad-app-name",{appName:String(o)});if(t||(t=u1()),!t)throw wi.create("no-options");const u=Ro.get(o);if(u){if(Ti(t,u.options)&&Ti(a,u.config))return u;throw wi.create("duplicate-app",{appName:o})}const h=new QA(o);for(const x of mp.values())h.addComponent(x);const g=new HR(t,a,h);return Ro.set(o,g),g}function ff(s=dp){const e=Ro.get(s);if(!e&&s===dp&&u1())return n0();if(!e)throw wi.create("no-app",{appName:s});return e}async function FR(s){let e=!1;const t=s.name;Ro.has(t)?(e=!0,Ro.delete(t)):fp.has(t)&&s.decRefCount()<=0&&(fp.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(a=>a.delete())),s.isDeleted=!0)}function tr(s,e,t){let a=zR[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(h.join(" "));return}Ei(new Ia(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebase-heartbeat-database",GR=1,xu="firebase-heartbeat-store";let Gg=null;function g1(){return Gg||(Gg=oR(qR,GR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(s=>{throw wi.create("idb-open",{originalErrorMessage:s.message})})),Gg}async function $R(s){try{const t=(await g1()).transaction(xu),a=await t.objectStore(xu).get(p1(s));return await t.done,a}catch(e){if(e instanceof Tr)ka.warn(e.message);else{const t=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ka.warn(t.message)}}}async function tw(s,e){try{const a=(await g1()).transaction(xu,"readwrite");await a.objectStore(xu).put(e,p1(s)),await a.done}catch(t){if(t instanceof Tr)ka.warn(t.message);else{const a=wi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ka.warn(a.message)}}}function p1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,YR=30;class QR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WR(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=nw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>YR){const h=JR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ka.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nw(),{heartbeatsToSend:a,unsentEntries:o}=XR(this._heartbeatsCache.heartbeats),u=zd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return ka.warn(t),""}}}function nw(){return new Date().toISOString().substring(0,10)}function XR(s,e=KR){const t=[];let a=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),sw(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sw(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class WR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LA()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $R(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return tw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return tw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function sw(s){return zd(JSON.stringify({version:2,heartbeats:s})).length}function JR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(s){Ei(new Ia("platform-logger",e=>new hR(e),"PRIVATE")),Ei(new Ia("heartbeat",e=>new QR(e),"PRIVATE")),tr(hp,Zv,s),tr(hp,Zv,"esm2020"),tr("fire-js","")}ZR("");var e4="firebase",t4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(e4,t4,"app");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,x1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,j){function A(){}A.prototype=j.prototype,S.F=j.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(M,k,O){for(var R=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)R[_e-2]=arguments[_e];return j.prototype[k].apply(M,R)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,j,A){A||(A=0);const M=Array(16);if(typeof j=="string")for(var k=0;k<16;++k)M[k]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(k=0;k<16;++k)M[k]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=S.g[0],A=S.g[1],k=S.g[2];let O=S.g[3],R;R=j+(O^A&(k^O))+M[0]+3614090360&4294967295,j=A+(R<<7&4294967295|R>>>25),R=O+(k^j&(A^k))+M[1]+3905402710&4294967295,O=j+(R<<12&4294967295|R>>>20),R=k+(A^O&(j^A))+M[2]+606105819&4294967295,k=O+(R<<17&4294967295|R>>>15),R=A+(j^k&(O^j))+M[3]+3250441966&4294967295,A=k+(R<<22&4294967295|R>>>10),R=j+(O^A&(k^O))+M[4]+4118548399&4294967295,j=A+(R<<7&4294967295|R>>>25),R=O+(k^j&(A^k))+M[5]+1200080426&4294967295,O=j+(R<<12&4294967295|R>>>20),R=k+(A^O&(j^A))+M[6]+2821735955&4294967295,k=O+(R<<17&4294967295|R>>>15),R=A+(j^k&(O^j))+M[7]+4249261313&4294967295,A=k+(R<<22&4294967295|R>>>10),R=j+(O^A&(k^O))+M[8]+1770035416&4294967295,j=A+(R<<7&4294967295|R>>>25),R=O+(k^j&(A^k))+M[9]+2336552879&4294967295,O=j+(R<<12&4294967295|R>>>20),R=k+(A^O&(j^A))+M[10]+4294925233&4294967295,k=O+(R<<17&4294967295|R>>>15),R=A+(j^k&(O^j))+M[11]+2304563134&4294967295,A=k+(R<<22&4294967295|R>>>10),R=j+(O^A&(k^O))+M[12]+1804603682&4294967295,j=A+(R<<7&4294967295|R>>>25),R=O+(k^j&(A^k))+M[13]+4254626195&4294967295,O=j+(R<<12&4294967295|R>>>20),R=k+(A^O&(j^A))+M[14]+2792965006&4294967295,k=O+(R<<17&4294967295|R>>>15),R=A+(j^k&(O^j))+M[15]+1236535329&4294967295,A=k+(R<<22&4294967295|R>>>10),R=j+(k^O&(A^k))+M[1]+4129170786&4294967295,j=A+(R<<5&4294967295|R>>>27),R=O+(A^k&(j^A))+M[6]+3225465664&4294967295,O=j+(R<<9&4294967295|R>>>23),R=k+(j^A&(O^j))+M[11]+643717713&4294967295,k=O+(R<<14&4294967295|R>>>18),R=A+(O^j&(k^O))+M[0]+3921069994&4294967295,A=k+(R<<20&4294967295|R>>>12),R=j+(k^O&(A^k))+M[5]+3593408605&4294967295,j=A+(R<<5&4294967295|R>>>27),R=O+(A^k&(j^A))+M[10]+38016083&4294967295,O=j+(R<<9&4294967295|R>>>23),R=k+(j^A&(O^j))+M[15]+3634488961&4294967295,k=O+(R<<14&4294967295|R>>>18),R=A+(O^j&(k^O))+M[4]+3889429448&4294967295,A=k+(R<<20&4294967295|R>>>12),R=j+(k^O&(A^k))+M[9]+568446438&4294967295,j=A+(R<<5&4294967295|R>>>27),R=O+(A^k&(j^A))+M[14]+3275163606&4294967295,O=j+(R<<9&4294967295|R>>>23),R=k+(j^A&(O^j))+M[3]+4107603335&4294967295,k=O+(R<<14&4294967295|R>>>18),R=A+(O^j&(k^O))+M[8]+1163531501&4294967295,A=k+(R<<20&4294967295|R>>>12),R=j+(k^O&(A^k))+M[13]+2850285829&4294967295,j=A+(R<<5&4294967295|R>>>27),R=O+(A^k&(j^A))+M[2]+4243563512&4294967295,O=j+(R<<9&4294967295|R>>>23),R=k+(j^A&(O^j))+M[7]+1735328473&4294967295,k=O+(R<<14&4294967295|R>>>18),R=A+(O^j&(k^O))+M[12]+2368359562&4294967295,A=k+(R<<20&4294967295|R>>>12),R=j+(A^k^O)+M[5]+4294588738&4294967295,j=A+(R<<4&4294967295|R>>>28),R=O+(j^A^k)+M[8]+2272392833&4294967295,O=j+(R<<11&4294967295|R>>>21),R=k+(O^j^A)+M[11]+1839030562&4294967295,k=O+(R<<16&4294967295|R>>>16),R=A+(k^O^j)+M[14]+4259657740&4294967295,A=k+(R<<23&4294967295|R>>>9),R=j+(A^k^O)+M[1]+2763975236&4294967295,j=A+(R<<4&4294967295|R>>>28),R=O+(j^A^k)+M[4]+1272893353&4294967295,O=j+(R<<11&4294967295|R>>>21),R=k+(O^j^A)+M[7]+4139469664&4294967295,k=O+(R<<16&4294967295|R>>>16),R=A+(k^O^j)+M[10]+3200236656&4294967295,A=k+(R<<23&4294967295|R>>>9),R=j+(A^k^O)+M[13]+681279174&4294967295,j=A+(R<<4&4294967295|R>>>28),R=O+(j^A^k)+M[0]+3936430074&4294967295,O=j+(R<<11&4294967295|R>>>21),R=k+(O^j^A)+M[3]+3572445317&4294967295,k=O+(R<<16&4294967295|R>>>16),R=A+(k^O^j)+M[6]+76029189&4294967295,A=k+(R<<23&4294967295|R>>>9),R=j+(A^k^O)+M[9]+3654602809&4294967295,j=A+(R<<4&4294967295|R>>>28),R=O+(j^A^k)+M[12]+3873151461&4294967295,O=j+(R<<11&4294967295|R>>>21),R=k+(O^j^A)+M[15]+530742520&4294967295,k=O+(R<<16&4294967295|R>>>16),R=A+(k^O^j)+M[2]+3299628645&4294967295,A=k+(R<<23&4294967295|R>>>9),R=j+(k^(A|~O))+M[0]+4096336452&4294967295,j=A+(R<<6&4294967295|R>>>26),R=O+(A^(j|~k))+M[7]+1126891415&4294967295,O=j+(R<<10&4294967295|R>>>22),R=k+(j^(O|~A))+M[14]+2878612391&4294967295,k=O+(R<<15&4294967295|R>>>17),R=A+(O^(k|~j))+M[5]+4237533241&4294967295,A=k+(R<<21&4294967295|R>>>11),R=j+(k^(A|~O))+M[12]+1700485571&4294967295,j=A+(R<<6&4294967295|R>>>26),R=O+(A^(j|~k))+M[3]+2399980690&4294967295,O=j+(R<<10&4294967295|R>>>22),R=k+(j^(O|~A))+M[10]+4293915773&4294967295,k=O+(R<<15&4294967295|R>>>17),R=A+(O^(k|~j))+M[1]+2240044497&4294967295,A=k+(R<<21&4294967295|R>>>11),R=j+(k^(A|~O))+M[8]+1873313359&4294967295,j=A+(R<<6&4294967295|R>>>26),R=O+(A^(j|~k))+M[15]+4264355552&4294967295,O=j+(R<<10&4294967295|R>>>22),R=k+(j^(O|~A))+M[6]+2734768916&4294967295,k=O+(R<<15&4294967295|R>>>17),R=A+(O^(k|~j))+M[13]+1309151649&4294967295,A=k+(R<<21&4294967295|R>>>11),R=j+(k^(A|~O))+M[4]+4149444226&4294967295,j=A+(R<<6&4294967295|R>>>26),R=O+(A^(j|~k))+M[11]+3174756917&4294967295,O=j+(R<<10&4294967295|R>>>22),R=k+(j^(O|~A))+M[2]+718787259&4294967295,k=O+(R<<15&4294967295|R>>>17),R=A+(O^(k|~j))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+j&4294967295,S.g[1]=S.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+O&4294967295}a.prototype.v=function(S,j){j===void 0&&(j=S.length);const A=j-this.blockSize,M=this.C;let k=this.h,O=0;for(;O<j;){if(k==0)for(;O<=A;)o(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<j;)if(M[k++]=S.charCodeAt(O++),k==this.blockSize){o(this,M),k=0;break}}else for(;O<j;)if(M[k++]=S[O++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=j},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var j=1;j<S.length-8;++j)S[j]=0;j=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=j&255,j/=256;for(this.v(S),S=Array(16),j=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)S[j++]=this.g[A]>>>M&255;return S};function u(S,j){var A=g;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=j(S)}function h(S,j){this.h=j;const A=[];let M=!0;for(let k=S.length-1;k>=0;k--){const O=S[k]|0;M&&O==j||(A[k]=O,M=!1)}this.g=A}var g={};function x(S){return-128<=S&&S<128?u(S,function(j){return new h([j|0],j<0?-1:0)}):new h([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return _;if(S<0)return z(p(-S));const j=[];let A=1;for(let M=0;S>=A;M++)j[M]=S/A|0,A*=4294967296;return new h(j,0)}function b(S,j){if(S.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(S.charAt(0)=="-")return z(b(S.substring(1),j));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(j,8));let M=_;for(let O=0;O<S.length;O+=8){var k=Math.min(8,S.length-O);const R=parseInt(S.substring(O,O+k),j);k<8?(k=p(Math.pow(j,k)),M=M.j(k).add(p(R))):(M=M.j(A),M=M.add(p(R)))}return M}var _=x(0),N=x(1),I=x(16777216);s=h.prototype,s.m=function(){if($(this))return-z(this).m();let S=0,j=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);S+=(M>=0?M:4294967296+M)*j,j*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(U(this))return"0";if($(this))return"-"+z(this).toString(S);const j=p(Math.pow(S,6));var A=this;let M="";for(;;){const k=ae(A,j).g;A=D(A,k.j(j));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=k,U(A))return O+M;for(;O.length<6;)O="0"+O;M=O+M}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function U(S){if(S.h!=0)return!1;for(let j=0;j<S.g.length;j++)if(S.g[j]!=0)return!1;return!0}function $(S){return S.h==-1}s.l=function(S){return S=D(this,S),$(S)?-1:U(S)?0:1};function z(S){const j=S.g.length,A=[];for(let M=0;M<j;M++)A[M]=~S.g[M];return new h(A,~S.h).add(N)}s.abs=function(){return $(this)?z(this):this},s.add=function(S){const j=Math.max(this.g.length,S.g.length),A=[];let M=0;for(let k=0;k<=j;k++){let O=M+(this.i(k)&65535)+(S.i(k)&65535),R=(O>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);M=R>>>16,O&=65535,R&=65535,A[k]=R<<16|O}return new h(A,A[A.length-1]&-2147483648?-1:0)};function D(S,j){return S.add(z(j))}s.j=function(S){if(U(this)||U(S))return _;if($(this))return $(S)?z(this).j(z(S)):z(z(this).j(S));if($(S))return z(this.j(z(S)));if(this.l(I)<0&&S.l(I)<0)return p(this.m()*S.m());const j=this.g.length+S.g.length,A=[];for(var M=0;M<2*j;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<S.g.length;k++){const O=this.i(M)>>>16,R=this.i(M)&65535,_e=S.i(k)>>>16,Pe=S.i(k)&65535;A[2*M+2*k]+=R*Pe,Z(A,2*M+2*k),A[2*M+2*k+1]+=O*Pe,Z(A,2*M+2*k+1),A[2*M+2*k+1]+=R*_e,Z(A,2*M+2*k+1),A[2*M+2*k+2]+=O*_e,Z(A,2*M+2*k+2)}for(S=0;S<j;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=j;S<2*j;S++)A[S]=0;return new h(A,0)};function Z(S,j){for(;(S[j]&65535)!=S[j];)S[j+1]+=S[j]>>>16,S[j]&=65535,j++}function Q(S,j){this.g=S,this.h=j}function ae(S,j){if(U(j))throw Error("division by zero");if(U(S))return new Q(_,_);if($(S))return j=ae(z(S),j),new Q(z(j.g),z(j.h));if($(j))return j=ae(S,z(j)),new Q(z(j.g),j.h);if(S.g.length>30){if($(S)||$(j))throw Error("slowDivide_ only works with positive integers.");for(var A=N,M=j;M.l(S)<=0;)A=me(A),M=me(M);var k=ye(A,1),O=ye(M,1);for(M=ye(M,2),A=ye(A,2);!U(M);){var R=O.add(M);R.l(S)<=0&&(k=k.add(A),O=R),M=ye(M,1),A=ye(A,1)}return j=D(S,k.j(j)),new Q(k,j)}for(k=_;S.l(j)>=0;){for(A=Math.max(1,Math.floor(S.m()/j.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),O=p(A),R=O.j(j);$(R)||R.l(S)>0;)A-=M,O=p(A),R=O.j(j);U(O)&&(O=N),k=k.add(O),S=D(S,R)}return new Q(k,S)}s.B=function(S){return ae(this,S).h},s.and=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<j;M++)A[M]=this.i(M)&S.i(M);return new h(A,this.h&S.h)},s.or=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<j;M++)A[M]=this.i(M)|S.i(M);return new h(A,this.h|S.h)},s.xor=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<j;M++)A[M]=this.i(M)^S.i(M);return new h(A,this.h^S.h)};function me(S){const j=S.g.length+1,A=[];for(let M=0;M<j;M++)A[M]=S.i(M)<<1|S.i(M-1)>>>31;return new h(A,S.h)}function ye(S,j){const A=j>>5;j%=32;const M=S.g.length-A,k=[];for(let O=0;O<M;O++)k[O]=j>0?S.i(O+A)>>>j|S.i(O+A+1)<<32-j:S.i(O+A);return new h(k,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,x1=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=b,_i=h}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y1,Zc,b1,jd,gp,v1,w1,_1;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var y=0;y<d.length;++y){var w=d[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var a=t(this);function o(d,y){if(y)e:{var w=a;d=d.split(".");for(var C=0;C<d.length-1;C++){var X=d[C];if(!(X in w))break e;w=w[X]}d=d[d.length-1],C=w[d],y=y(C),y!=C&&y!=null&&e(w,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var w=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&w.push([C,y[C]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function x(d,y,w){return d.call.apply(d.bind,arguments)}function p(d,y,w){return p=x,p.apply(null,arguments)}function b(d,y){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function _(d,y){function w(){}w.prototype=y.prototype,d.Z=y.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(C,X,se){for(var Ee=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Ee[tt-2]=arguments[tt];return y.prototype[X].apply(C,Ee)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function I(d){const y=d.length;if(y>0){const w=Array(y);for(let C=0;C<y;C++)w[C]=d[C];return w}return[]}function U(d,y){for(let C=1;C<arguments.length;C++){const X=arguments[C];var w=typeof X;if(w=w!="object"?w:X?Array.isArray(X)?"array":w:"null",w=="array"||w=="object"&&typeof X.length=="number"){w=d.length||0;const se=X.length||0;d.length=w+se;for(let Ee=0;Ee<se;Ee++)d[w+Ee]=X[Ee]}else d.push(X)}}class ${constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(d){h.setTimeout(()=>{throw d},0)}function D(){var d=S;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,w){const C=Q.get();C.set(y,w),this.h?this.h.next=C:this.g=C,this.h=C}}var Q=new $(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ye=!1,S=new Z,j=()=>{const d=Promise.resolve(void 0);me=()=>{d.then(A)}};function A(){for(var d;d=D();){try{d.h.call(d.g)}catch(w){z(w)}var y=Q;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}ye=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};h.addEventListener("test",w,y),h.removeEventListener("test",w,y)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function _e(d,y){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}_(_e,k),_e.prototype.init=function(d,y){const w=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(w=="mouseover"?y=d.fromElement:w=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),H=0;function ge(d,y,w,C,X){this.listener=d,this.proxy=null,this.src=y,this.type=w,this.capture=!!C,this.ha=X,this.key=++H,this.da=this.fa=!1}function Se(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ue(d,y,w){for(const C in d)y.call(w,d[C],C,d)}function Ge(d,y){for(const w in d)y.call(void 0,d[w],w,d)}function P(d){const y={};for(const w in d)y[w]=d[w];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(d,y){let w,C;for(let X=1;X<arguments.length;X++){C=arguments[X];for(w in C)d[w]=C[w];for(let se=0;se<ne.length;se++)w=ne[se],Object.prototype.hasOwnProperty.call(C,w)&&(d[w]=C[w])}}function G(d){this.src=d,this.g={},this.h=0}G.prototype.add=function(d,y,w,C,X){const se=d.toString();d=this.g[se],d||(d=this.g[se]=[],this.h++);const Ee=Y(d,y,C,X);return Ee>-1?(y=d[Ee],w||(y.fa=!1)):(y=new ge(y,this.src,se,!!C,X),y.fa=w,d.push(y)),y};function pe(d,y){const w=y.type;if(w in d.g){var C=d.g[w],X=Array.prototype.indexOf.call(C,y,void 0),se;(se=X>=0)&&Array.prototype.splice.call(C,X,1),se&&(Se(y),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Y(d,y,w,C){for(let X=0;X<d.length;++X){const se=d[X];if(!se.da&&se.listener==y&&se.capture==!!w&&se.ha==C)return X}return-1}var V="closure_lm_"+(Math.random()*1e6|0),q={};function le(d,y,w,C,X){if(Array.isArray(y)){for(let se=0;se<y.length;se++)le(d,y[se],w,C,X);return null}return w=Tn(w),d&&d[Pe]?d.J(y,w,g(C)?!!C.capture:!1,X):Ie(d,y,w,!1,C,X)}function Ie(d,y,w,C,X,se){if(!y)throw Error("Invalid event type");const Ee=g(X)?!!X.capture:!!X;let tt=Xt(d);if(tt||(d[V]=tt=new G(d)),w=tt.add(y,w,C,Ee,se),w.proxy)return w;if(C=Ne(),w.proxy=C,C.src=d,C.listener=w,d.addEventListener)O||(X=Ee),X===void 0&&(X=!1),d.addEventListener(y.toString(),C,X);else if(d.attachEvent)d.attachEvent(et(y.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ne(){function d(w){return y.call(d.src,d.listener,w)}const y=vt;return d}function Ae(d,y,w,C,X){if(Array.isArray(y))for(var se=0;se<y.length;se++)Ae(d,y[se],w,C,X);else C=g(C)?!!C.capture:!!C,w=Tn(w),d&&d[Pe]?(d=d.i,se=String(y).toString(),se in d.g&&(y=d.g[se],w=Y(y,w,C,X),w>-1&&(Se(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete d.g[se],d.h--)))):d&&(d=Xt(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Y(y,w,C,X)),(w=d>-1?y[d]:null)&&Ve(w))}function Ve(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Pe])pe(y.i,d);else{var w=d.type,C=d.proxy;y.removeEventListener?y.removeEventListener(w,C,d.capture):y.detachEvent?y.detachEvent(et(w),C):y.addListener&&y.removeListener&&y.removeListener(C),(w=Xt(y))?(pe(w,d),w.h==0&&(w.src=null,y[V]=null)):Se(d)}}}function et(d){return d in q?q[d]:q[d]="on"+d}function vt(d,y){if(d.da)d=!0;else{y=new _e(y,this);const w=d.listener,C=d.ha||d.src;d.fa&&Ve(d),d=w.call(C,y)}return d}function Xt(d){return d=d[V],d instanceof G?d:null}var Pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tn(d){return typeof d=="function"?d:(d[Pt]||(d[Pt]=function(y){return d.handleEvent(y)}),d[Pt])}function Nt(){M.call(this),this.i=new G(this),this.M=this,this.G=null}_(Nt,M),Nt.prototype[Pe]=!0,Nt.prototype.removeEventListener=function(d,y,w,C){Ae(this,d,y,w,C)};function qt(d,y){var w,C=d.G;if(C)for(w=[];C;C=C.G)w.push(C);if(d=d.M,C=y.type||y,typeof y=="string")y=new k(y,d);else if(y instanceof k)y.target=y.target||d;else{var X=y;y=new k(C,d),xe(y,X)}X=!0;let se,Ee;if(w)for(Ee=w.length-1;Ee>=0;Ee--)se=y.g=w[Ee],X=kn(se,C,!0,y)&&X;if(se=y.g=d,X=kn(se,C,!0,y)&&X,X=kn(se,C,!1,y)&&X,w)for(Ee=0;Ee<w.length;Ee++)se=y.g=w[Ee],X=kn(se,C,!1,y)&&X}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const w=d.g[y];for(let C=0;C<w.length;C++)Se(w[C]);delete d.g[y],d.h--}}this.G=null},Nt.prototype.J=function(d,y,w,C){return this.i.add(String(d),y,!1,w,C)},Nt.prototype.K=function(d,y,w,C){return this.i.add(String(d),y,!0,w,C)};function kn(d,y,w,C){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let se=0;se<y.length;++se){const Ee=y[se];if(Ee&&!Ee.da&&Ee.capture==w){const tt=Ee.listener,cn=Ee.ha||Ee.src;Ee.fa&&pe(d.i,Ee),X=tt.call(cn,C)!==!1&&X}}return X&&!C.defaultPrevented}function ts(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(d,y||0)}function hs(d){d.g=ts(()=>{d.g=null,d.i&&(d.i=!1,hs(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class tn extends M{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(d){M.call(this),this.h=d,this.g={}}_(Fe,M);var $e=[];function pt(d){Ue(d.g,function(y,w){this.g.hasOwnProperty(w)&&Ve(y)},d),d.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),pt(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=h.JSON.stringify,on=h.JSON.parse,Dn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function On(){}function $n(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){k.call(this,"d")}_(kt,k);function mn(){k.call(this,"c")}_(mn,k);var Tt={},zs=null;function Mn(){return zs=zs||new Nt}Tt.Ia="serverreachability";function jr(d){k.call(this,Tt.Ia,d)}_(jr,k);function ds(d){const y=Mn();qt(y,new jr(y))}Tt.STAT_EVENT="statevent";function lr(d,y){k.call(this,Tt.STAT_EVENT,d),this.stat=y}_(lr,k);function Bt(d){const y=Mn();qt(y,new lr(y,d))}Tt.Ja="timingevent";function fs(d,y){k.call(this,Tt.Ja,d),this.size=y}_(fs,k);function ms(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function ns(){this.g=!0}ns.prototype.ua=function(){this.g=!1};function Pi(d,y,w,C,X,se){d.info(function(){if(d.g)if(se){var Ee="",tt=se.split("&");for(let wt=0;wt<tt.length;wt++){var cn=tt[wt].split("=");if(cn.length>1){const Wt=cn[0];cn=cn[1];const qs=Wt.split("_");Ee=qs.length>=2&&qs[1]=="type"?Ee+(Wt+"="+cn+"&"):Ee+(Wt+"=redacted&")}}}else Ee=null;else Ee=se;return"XMLHTTP REQ ("+C+") [attempt "+X+"]: "+y+`
`+w+`
`+Ee})}function na(d,y,w,C,X,se,Ee){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+X+"]: "+y+`
`+w+`
`+se+" "+Ee})}function ee(d,y,w,C){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Te(d,w)+(C?" "+C:"")})}function oe(d,y){d.info(function(){return"TIMEOUT: "+y})}ns.prototype.info=function(){};function Te(d,y){if(!d.g)return y;if(!y)return null;try{const se=JSON.parse(y);if(se){for(d=0;d<se.length;d++)if(Array.isArray(se[d])){var w=se[d];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var X=C[0];if(X!="noop"&&X!="stop"&&X!="close")for(let Ee=1;Ee<C.length;Ee++)C[Ee]=""}}}}return Ut(se)}catch{return y}}var je={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},be={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ye;function qe(){}_(qe,On),qe.prototype.g=function(){return new XMLHttpRequest},Ye=new qe;function at(d){return encodeURIComponent(String(d))}function Et(d){var y=1;d=d.split(":");const w=[];for(;y>0&&d.length;)w.push(d.shift()),y--;return d.length&&w.push(d.join(":")),w}function xt(d,y,w,C){this.j=d,this.i=y,this.l=w,this.S=C||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new B}function B(){this.i=null,this.g="",this.h=!1}var fe={},ve={};function Le(d,y,w){d.M=1,d.A=Ui(pn(y)),d.u=w,d.R=!0,Me(d,null)}function Me(d,y){d.F=Date.now(),$t(d),d.B=pn(d.A);var w=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),Il(w.i,"t",C),d.C=0,w=d.j.L,d.h=new B,d.g=oh(d.j,w?y:null,!d.u),d.P>0&&(d.O=new tn(p(d.Y,d,d.g),d.P)),y=d.V,w=d.g,C=d.ba;var X="readystatechange";Array.isArray(X)||(X&&($e[0]=X.toString()),X=$e);for(let se=0;se<X.length;se++){const Ee=le(w,X[se],C||y.handleEvent,!1,y.h||y);if(!Ee)break;y.g[Ee.key]=Ee}y=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),ds(),Pi(d.i,d.v,d.B,d.l,d.S,d.u)}xt.prototype.ba=function(d){d=d.target;const y=this.O;y&&hr(d)==3?y.j():this.Y(d)},xt.prototype.Y=function(d){try{if(d==this.g)e:{const tt=hr(this.g),cn=this.g.ya(),wt=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||tt!=4||cn==7||(cn==8||wt<=0?ds(3):ds(2)),Kn(this);var y=this.g.ca();this.X=y;var w=rt(this);if(this.o=y==200,na(this.i,this.v,this.B,this.l,this.S,tt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,X=this.g;if((C=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(C)){var se=C;break t}}se=null}if(d=se)ee(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bs(this,d);else{this.o=!1,this.m=3,Bt(12),Yn(this),ss(this);break e}}if(this.R){d=!0;let Wt;for(;!this.K&&this.C<w.length;)if(Wt=Vn(this,w),Wt==ve){tt==4&&(this.m=4,Bt(14),d=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==fe){this.m=4,Bt(15),ee(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else ee(this.i,this.l,Wt,null),Bs(this,Wt);if(Dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||w.length!=0||this.h.h||(this.m=1,Bt(16),d=!1),this.o=this.o&&d,!d)ee(this.i,this.l,w,"[Invalid Chunked Response]"),Yn(this),ss(this);else if(w.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),uc(Ee),Ee.P=!0,Bt(11))}}else ee(this.i,this.l,w,null),Bs(this,w);tt==4&&Yn(this),this.o&&!this.K&&(tt==4?rh(this.j,this):(this.o=!1,$t(this)))}else ra(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Yn(this),ss(this)}}}catch{}finally{}};function rt(d){if(!Dt(d))return d.g.la();const y=Ln(d.g);if(y==="")return"";let w="";const C=y.length,X=hr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Yn(d),ss(d),"";d.h.i=new h.TextDecoder}for(let se=0;se<C;se++)d.h.h=!0,w+=d.h.i.decode(y[se],{stream:!(X&&se==C-1)});return y.length=0,d.h.g+=w,d.C=0,d.h.g}function Dt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vn(d,y){var w=d.C,C=y.indexOf(`
`,w);return C==-1?ve:(w=Number(y.substring(w,C)),isNaN(w)?fe:(C+=1,C+w>y.length?ve:(y=y.slice(C,C+w),d.C=C+w,y)))}xt.prototype.cancel=function(){this.K=!0,Yn(this)};function $t(d){d.T=Date.now()+d.H,or(d,d.H)}function or(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ms(p(d.aa,d),y)}function Kn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}xt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(oe(this.i,this.B),this.M!=2&&(ds(),Bt(17)),Yn(this),this.m=2,ss(this)):or(this,this.T-d)};function ss(d){d.j.I==0||d.K||rh(d.j,d)}function Yn(d){Kn(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,pt(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Bs(d,y){try{var w=d.j;if(w.I!=0&&(w.g==d||Cr(w.h,d))){if(!d.L&&Cr(w.h,d)&&w.I==3){try{var C=w.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var X=C;if(X[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Vl(w),Ga(w);else break e;$i(w),Bt(18)}}else w.xa=X[1],0<w.xa-w.K&&X[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ms(p(w.Va,w),6e3));Sr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Or(w,11)}else if((d.L||w.g==d)&&Vl(w),!R(y))for(X=w.Ba.g.parse(y),y=0;y<X.length;y++){let wt=X[y];const Wt=wt[0];if(!(Wt<=w.K))if(w.K=Wt,wt=wt[1],w.I==2)if(wt[0]=="c"){w.M=wt[1],w.ba=wt[2];const qs=wt[3];qs!=null&&(w.ka=qs,w.j.info("VER="+w.ka));const Mr=wt[4];Mr!=null&&(w.za=Mr,w.j.info("SVER="+w.za));const dr=wt[5];dr!=null&&typeof dr=="number"&&dr>0&&(C=1.5*dr,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const fr=d.g;if(fr){const Ki=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var se=C.h;se.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Jo(se,se.h),se.h=null))}if(C.G){const Ll=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(C.wa=Ll,Ct(C.J,C.G,Ll))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var Ee=d;if(C.na=lh(C,C.L?C.ba:null,C.W),Ee.L){Zo(C.h,Ee);var tt=Ee,cn=C.O;cn&&(tt.H=cn),tt.D&&(Kn(tt),$t(tt)),C.g=Ee}else nh(C);w.i.length>0&&Dr(w)}else wt[0]!="stop"&&wt[0]!="close"||Or(w,7);else w.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Or(w,7):oc(w):wt[0]!="noop"&&w.l&&w.l.qa(wt),w.A=0)}}ds(4)}catch{}}var gn=class{constructor(d,y){this.g=d,this.map=y}};function Xo(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Sr(d){return d.h?1:d.g?d.g.size:0}function Cr(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Jo(d,y){d.g?d.g.add(y):d.h=y}function Zo(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Xo.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ec(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const w of d.g.values())y=y.concat(w.G);return y}return I(d.i)}var Xu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Al(d,y){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const C=d[w].indexOf("=");let X,se=null;C>=0?(X=d[w].substring(0,C),se=d[w].substring(C+1)):X=d[w],y(X,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function js(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof js?(this.l=d.l,Cn(this,d.j),this.o=d.o,this.g=d.g,Pa(this,d.u),this.h=d.h,tc(this,eh(d.i)),this.m=d.m):d&&(y=String(d).match(Xu))?(this.l=!1,Cn(this,y[1]||"",!0),this.o=Ar(y[2]||""),this.g=Ar(y[3]||"",!0),Pa(this,y[4]),this.h=Ar(y[5]||"",!0),tc(this,y[6]||"",!0),this.m=Ar(y[7]||"")):(this.l=!1,this.i=new za(null,this.l))}js.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(zi(y,Rl,!0),":");var w=this.g;return(w||y=="file")&&(d.push("//"),(y=this.o)&&d.push(zi(y,Rl,!0),"@"),d.push(at(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(zi(w,w.charAt(0)=="/"?nc:Wu,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",zi(w,Ju)),d.join("")},js.prototype.resolve=function(d){const y=pn(this);let w=!!d.j;w?Cn(y,d.j):w=!!d.o,w?y.o=d.o:w=!!d.g,w?y.g=d.g:w=d.u!=null;var C=d.h;if(w)Pa(y,d.u);else if(w=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var X=y.h.lastIndexOf("/");X!=-1&&(C=y.h.slice(0,X+1)+C)}if(X=C,X==".."||X==".")C="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){C=X.lastIndexOf("/",0)==0,X=X.split("/");const se=[];for(let Ee=0;Ee<X.length;){const tt=X[Ee++];tt=="."?C&&Ee==X.length&&se.push(""):tt==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),C&&Ee==X.length&&se.push("")):(se.push(tt),C=!0)}C=se.join("/")}else C=X}return w?y.h=C:w=d.i.toString()!=="",w?tc(y,eh(d.i)):w=!!d.m,w&&(y.m=d.m),y};function pn(d){return new js(d)}function Cn(d,y,w){d.j=w?Ar(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Pa(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function tc(d,y,w){y instanceof za?(d.i=y,kl(d.i,d.l)):(w||(y=zi(y,Ua)),d.i=new za(y,d.l))}function Ct(d,y,w){d.i.set(y,w)}function Ui(d){return Ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ar(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zi(d,y,w){return typeof d=="string"?(d=encodeURI(d).replace(y,gs),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gs(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Rl=/[#\/\?@]/g,Wu=/[#\?:]/g,nc=/[#\?]/g,Ua=/[#\?@]/g,Ju=/#/g;function za(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ps(d){d.g||(d.g=new Map,d.h=0,d.i&&Al(d.i,function(y,w){d.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}s=za.prototype,s.add=function(d,y){ps(this),this.i=null,d=Ba(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(y),this.h+=1,this};function Zu(d,y){ps(d),y=Ba(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function sc(d,y){return ps(d),y=Ba(d,y),d.g.has(y)}s.forEach=function(d,y){ps(this),this.g.forEach(function(w,C){w.forEach(function(X){d.call(y,X,C,this)},this)},this)};function rc(d,y){ps(d);let w=[];if(typeof y=="string")sc(d,y)&&(w=w.concat(d.g.get(Ba(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)w=w.concat(d[y]);return w}s.set=function(d,y){return ps(this),this.i=null,d=Ba(this,d),sc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=rc(this,d),d.length>0?String(d[0]):y):y};function Il(d,y,w){Zu(d,y),w.length>0&&(d.i=null,d.g.set(Ba(d,y),I(w)),d.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var w=y[C];const X=at(w);w=rc(this,w);for(let se=0;se<w.length;se++){let Ee=X;w[se]!==""&&(Ee+="="+at(w[se])),d.push(Ee)}}return this.i=d.join("&")};function eh(d){const y=new za;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Ba(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function kl(d,y){y&&!d.j&&(ps(d),d.i=null,d.g.forEach(function(w,C){const X=C.toLowerCase();C!=X&&(Zu(this,C),Il(this,X,w))},d)),d.j=y}function cr(d,y){const w=new ns;if(h.Image){const C=new Image;C.onload=b(Hs,w,"TestLoadImage: loaded",!0,y,C),C.onerror=b(Hs,w,"TestLoadImage: error",!1,y,C),C.onabort=b(Hs,w,"TestLoadImage: abort",!1,y,C),C.ontimeout=b(Hs,w,"TestLoadImage: timeout",!1,y,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else y(!1)}function ac(d,y){const w=new ns,C=new AbortController,X=setTimeout(()=>{C.abort(),Hs(w,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:C.signal}).then(se=>{clearTimeout(X),se.ok?Hs(w,"TestPingServer: ok",!0,y):Hs(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Hs(w,"TestPingServer: error",!1,y)})}function Hs(d,y,w,C,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),C(w)}catch{}}function Ha(){this.g=new Dn}function Rr(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Rr,On),Rr.prototype.g=function(){return new Bi(this.i,this.h)};function Bi(d,y){Nt.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Bi,Nt),s=Bi.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,ur(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dl(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dl(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Fa(this):ur(this),this.readyState==3&&Dl(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Fa(this))},s.Na=function(d){this.g&&(this.response=d,Fa(this))},s.ga=function(){this.g&&Fa(this)};function Fa(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ur(d)}s.setRequestHeader=function(d,y){this.A.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=y.next();return d.join(`\r
`)};function ur(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Fs(d){let y="";return Ue(d,function(w,C){y+=C,y+=":",y+=w,y+=`\r
`}),y}function Hi(d,y,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=Fs(w),typeof d=="string"?w!=null&&at(w):Ct(d,y,w))}function Ot(d){Nt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ot,Nt);var Ir=/^https?$/i,ic=["POST","PUT"];s=Ot.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,y,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ye.g(),this.g.onreadystatechange=N(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(se){Fi(this,se);return}if(d=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var X in C)w.set(X,C[X]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const se of C.keys())w.set(se,C.get(se));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(se=>se.toLowerCase()=="content-type"),X=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(ic,y,void 0)>=0)||C||X||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Ee]of w)this.g.setRequestHeader(se,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(se){Fi(this,se)}};function Fi(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,lc(d),sa(d)}function lc(d){d.A||(d.A=!0,qt(d,"complete"),qt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,qt(this,"complete"),qt(this,"abort"),sa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sa(this,!0)),Ot.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},s.Xa=function(){qi(this)};function qi(d){if(d.h&&typeof u<"u"){if(d.v&&hr(d)==4)setTimeout(d.Ca.bind(d),0);else if(qt(d,"readystatechange"),hr(d)==4){d.h=!1;try{const se=d.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var C;if(C=se===0){let Ee=String(d.D).match(Xu)[1]||null;!Ee&&h.self&&h.self.location&&(Ee=h.self.location.protocol.slice(0,-1)),C=!Ir.test(Ee?Ee.toLowerCase():"")}w=C}if(w)qt(d,"complete"),qt(d,"success");else{d.o=6;try{var X=hr(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",lc(d)}}finally{sa(d)}}}}function sa(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,y||qt(d,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function hr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return hr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),on(y)}};function Ln(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ra(d){const y={};d=(d.g&&hr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(R(d[C]))continue;var w=Et(d[C]);const X=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const se=y[X]||[];y[X]=se,se.push(w)}Ge(y,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(d,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||y}function qa(d){this.za=0,this.i=[],this.j=new ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kr("baseRetryDelayMs",5e3,d),this.Za=kr("retryDelaySeedMs",1e4,d),this.Ta=kr("forwardChannelMaxRetries",2,d),this.va=kr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Xo(d&&d.concurrentRequestLimit),this.Ba=new Ha,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=qa.prototype,s.ka=8,s.I=1,s.connect=function(d,y,w,C){Bt(0),this.W=d,this.H=y||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=lh(this,null,this.W),Dr(this)};function oc(d){if(Ol(d),d.I==3){var y=d.V++,w=pn(d.J);if(Ct(w,"SID",d.M),Ct(w,"RID",y),Ct(w,"TYPE","terminate"),Gi(d,w),y=new xt(d,d.j,y),y.M=2,y.A=Ui(pn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&h.Image&&(new Image().src=y.A,w=!0),w||(y.g=oh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),$t(y)}ih(d)}function Ga(d){d.g&&(uc(d),d.g.cancel(),d.g=null)}function Ol(d){Ga(d),d.v&&(h.clearTimeout(d.v),d.v=null),Vl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Dr(d){if(!Wo(d.h)&&!d.m){d.m=!0;var y=d.Ea;me||j(),ye||(me(),ye=!0),S.add(y,d),d.D=0}}function Ml(d,y){return Sr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ms(p(d.Ea,d,y),ah(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new xt(this,this.j,d);let se=this.o;if(this.U&&(se?(se=P(se),xe(se,this.U)):se=this.U),this.u!==null||this.R||(X.J=se,se=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=th(this,X,y),w=pn(this.J),Ct(w,"RID",d),Ct(w,"CVER",22),this.G&&Ct(w,"X-HTTP-Session-Id",this.G),Gi(this,w),se&&(this.R?y="headers="+at(Fs(se))+"&"+y:this.u&&Hi(w,this.u,se)),Jo(this.h,X),this.Ra&&Ct(w,"TYPE","init"),this.S?(Ct(w,"$req",y),Ct(w,"SID","null"),X.U=!0,Le(X,w,null)):Le(X,w,y),this.I=2}}else this.I==3&&(d?cc(this,d):this.i.length==0||Wo(this.h)||cc(this))};function cc(d,y){var w;y?w=y.l:w=d.V++;const C=pn(d.J);Ct(C,"SID",d.M),Ct(C,"RID",w),Ct(C,"AID",d.K),Gi(d,C),d.u&&d.o&&Hi(C,d.u,d.o),w=new xt(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),y&&(d.i=y.G.concat(d.i)),y=th(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Jo(d.h,w),Le(w,C,y)}function Gi(d,y){d.H&&Ue(d.H,function(w,C){Ct(y,C,w)}),d.l&&Ue({},function(w,C){Ct(y,C,w)})}function th(d,y,w){w=Math.min(d.i.length,w);const C=d.l?p(d.l.Ka,d.l,d):null;e:{var X=d.i;let tt=-1;for(;;){const cn=["count="+w];tt==-1?w>0?(tt=X[0].g,cn.push("ofs="+tt)):tt=0:cn.push("ofs="+tt);let wt=!0;for(let Wt=0;Wt<w;Wt++){var se=X[Wt].g;const qs=X[Wt].map;if(se-=tt,se<0)tt=Math.max(0,X[Wt].g-100),wt=!1;else try{se="req"+se+"_"||"";try{var Ee=qs instanceof Map?qs:Object.entries(qs);for(const[Mr,dr]of Ee){let fr=dr;g(dr)&&(fr=Ut(dr)),cn.push(se+Mr+"="+encodeURIComponent(fr))}}catch(Mr){throw cn.push(se+"type="+encodeURIComponent("_badmap")),Mr}}catch{C&&C(qs)}}if(wt){Ee=cn.join("&");break e}}Ee=void 0}return d=d.i.splice(0,w),y.G=d,Ee}function nh(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;me||j(),ye||(me(),ye=!0),S.add(y,d),d.A=0}}function $i(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ms(p(d.Da,d),ah(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,sh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ms(p(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Ga(this),sh(this))};function uc(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function sh(d){d.g=new xt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=pn(d.na);Ct(y,"RID","rpc"),Ct(y,"SID",d.M),Ct(y,"AID",d.K),Ct(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ct(y,"TO",d.ia),Ct(y,"TYPE","xmlhttp"),Gi(d,y),d.u&&d.o&&Hi(y,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ui(pn(y)),w.u=null,w.R=!0,Me(w,d)}s.Va=function(){this.C!=null&&(this.C=null,Ga(this),$i(this),Bt(19))};function Vl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function rh(d,y){var w=null;if(d.g==y){Vl(d),uc(d),d.g=null;var C=2}else if(Cr(d.h,y))w=y.G,Zo(d.h,y),C=1;else return;if(d.I!=0){if(y.o)if(C==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var X=d.D;C=Mn(),qt(C,new fs(C,w)),Dr(d)}else nh(d);else if(X=y.m,X==3||X==0&&y.X>0||!(C==1&&Ml(d,y)||C==2&&$i(d)))switch(w&&w.length>0&&(y=d.h,y.i=y.i.concat(w)),X){case 1:Or(d,5);break;case 4:Or(d,10);break;case 3:Or(d,6);break;default:Or(d,2)}}}function ah(d,y){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*y}function Or(d,y){if(d.j.info("Error code "+y),y==2){var w=p(d.bb,d),C=d.Ua;const X=!C;C=new js(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Cn(C,"https"),Ui(C),X?cr(C.toString(),w):ac(C.toString(),w)}else Bt(2);d.I=0,d.l&&d.l.pa(y),ih(d),Ol(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function ih(d){if(d.I=0,d.ja=[],d.l){const y=ec(d.h);(y.length!=0||d.i.length!=0)&&(U(d.ja,y),U(d.ja,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.oa()}}function lh(d,y,w){var C=w instanceof js?pn(w):new js(w);if(C.g!="")y&&(C.g=y+"."+C.g),Pa(C,C.u);else{var X=h.location;C=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const se=new js(null);C&&Cn(se,C),y&&(se.g=y),X&&Pa(se,X),w&&(se.h=w),C=se}return w=d.G,y=d.wa,w&&y&&Ct(C,w,y),Ct(C,"VER",d.ka),Gi(d,C),C}function oh(d,y,w){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new Ot(new Rr({ab:w})):new Ot(d.ma),y.Fa(d.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}s=ch.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function $a(){}$a.prototype.g=function(d,y){return new rs(d,y)};function rs(d,y){Nt.call(this),this.g=new qa(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!R(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new aa(this)}_(rs,Nt),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rs.prototype.close=function(){oc(this.g)},rs.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=Ut(d),d=w);y.i.push(new gn(y.Ya++,d)),y.I==3&&Dr(y)},rs.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,rs.Z.N.call(this)};function uh(d){kt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const w in y){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}_(uh,kt);function hh(){mn.call(this),this.status=1}_(hh,mn);function aa(d){this.g=d}_(aa,ch),aa.prototype.ra=function(){qt(this.g,"a")},aa.prototype.qa=function(d){qt(this.g,new uh(d))},aa.prototype.pa=function(d){qt(this.g,new hh)},aa.prototype.oa=function(){qt(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,rs.prototype.send=rs.prototype.o,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,_1=function(){return new $a},w1=function(){return Mn()},v1=Tt,gp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,jd=je,be.COMPLETE="complete",b1=be,$n.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Zc=$n,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,y1=Ot}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const aw="@firebase/firestore",iw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new e0("@firebase/firestore");function go(){return xl.logLevel}function ke(s,...e){if(xl.logLevel<=ht.DEBUG){const t=e.map(s0);xl.debug(`Firestore (${Fo}): ${s}`,...t)}}function Da(s,...e){if(xl.logLevel<=ht.ERROR){const t=e.map(s0);xl.error(`Firestore (${Fo}): ${s}`,...t)}}function Io(s,...e){if(xl.logLevel<=ht.WARN){const t=e.map(s0);xl.warn(`Firestore (${Fo}): ${s}`,...t)}}function s0(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,N1(s,a,t)}function N1(s,e,t){let a=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Da(a),new Error(a)}function jt(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||N1(e,o,a)}function Ze(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wn.UNAUTHENTICATED)))}shutdown(){}}class s4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class r4{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){jt(this.o===void 0,42304);let a=this.i;const o=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let u=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ca,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},g=x=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((x=>g(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?g(x):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ca)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(jt(typeof a.accessToken=="string",31837,{l:a}),new T1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class a4{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i4{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new a4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){jt(this.o===void 0,3512);const a=u=>{u.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(jt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=o4(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<t&&(a+=e.charAt(o[u]%62))}return a}}function dt(s,e){return s<e?-1:s>e?1:0}function pp(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return $g(o)===$g(u)?dt(o,u):$g(o)?1:-1}return dt(s.length,e.length)}const c4=55296,u4=57343;function $g(s){const e=s.charCodeAt(0);return e>=c4&&e<=u4}function ko(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__name__";class Br{constructor(e,t,a){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Xe(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const u=Br.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return dt(e.length,t.length)}static compareSegments(e,t){const a=Br.isNumericId(e),o=Br.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?Br.extractNumericId(e).compare(Br.extractNumericId(t)):pp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _i.fromString(e.substring(4,e.length-2))}}class Ft extends Br{construct(e,t,a){return new Ft(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Br{construct(e,t,a){return new qn(e,t,a)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ow}static keyField(){return new qn([ow])}static fromServerFormat(e){const t=[];let a="",o=0;const u=()=>{if(a.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ce(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new Ce(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new Ce(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ft.fromString(e))}static fromName(e){return new Be(Ft.fromString(e).popFirst(5))}static empty(){return new Be(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s,e,t){if(!t)throw new Ce(ue.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function d4(s,e,t,a){if(e===!0&&a===!0)throw new Ce(ue.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function cw(s){if(!Be.isDocumentKey(s))throw new Ce(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function uw(s){if(Be.isDocumentKey(s))throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function j1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function mf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Xe(12329,{type:typeof s})}function cs(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ce(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mf(s);throw new Ce(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(s,e){const t={typeString:s};return e&&(t.value=e),t}function Du(s,e){if(!j1(s))throw new Ce(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${a}' field to equal '${u.value}'`;break}}if(t)throw new Ce(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=-62135596800,dw=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*dw);return new Qt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hw)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dw}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,Qt._jsonSchema))return new Qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:Nn("string",Qt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Qt(0,0))}static max(){return new We(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function f4(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=We.fromTimestamp(a===1e9?new Qt(t+1,0):new Qt(t,a));return new ji(o,Be.empty(),e)}function m4(s){return new ji(s.readTime,s.key,yu)}class ji{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ji(We.min(),Be.empty(),yu)}static max(){return new ji(We.max(),Be.empty(),yu)}}function g4(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(s.documentKey,e.documentKey),t!==0?t:dt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(s){if(s.code!==ue.FAILED_PRECONDITION||s.message!==p4)throw s;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,a)=>{t(e)}))}static reject(e){return new de(((t,a)=>{a(e)}))}static waitFor(e){return new de(((t,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&t()}),(x=>a(x)))})),h=!0,u===o&&t()}))}static or(e){let t=de.resolve(!1);for(const a of e)t=t.next((o=>o?de.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,u)=>{a.push(t.call(this,o,u))})),this.waitFor(a)}static mapArray(e,t){return new de(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let x=0;x<u;x++){const p=x;t(e[p]).next((b=>{h[p]=b,++g,g===u&&a(h)}),(b=>o(b)))}}))}static doWhile(e,t){return new de(((a,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):a()};u()}))}}function y4(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-1;function pf(s){return s==null}function Bd(s){return s===0&&1/s==-1/0}function b4(s){return typeof s=="number"&&Number.isInteger(s)&&!Bd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="";function v4(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=fw(e)),e=w4(s.get(t),e);return fw(e)}function w4(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case S1:t+="";break;default:t+=u}}return t}function fw(s){return s+S1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Di(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function C1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||Hn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?a(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,t,a,o,u){this.key=e,this.value=t,this.color=a??Hn.RED,this.left=o??Hn.EMPTY,this.right=u??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,u){return new Hn(e??this.key,t??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,a),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Hn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,a,o,u){return this}insert(e,t,a){return new Hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gw(this.data.getIterator())}getIteratorFrom(e){return new gw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class gw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new jn(qn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new A1("Invalid base64 string: "+u):u}})(e);return new Gn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const _4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(s){if(jt(!!s,39018),typeof s=="string"){let e=0;const t=_4.exec(s);if(jt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:dn(s.seconds),nanos:dn(s.nanos)}}function dn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ci(s){return typeof s=="string"?Gn.fromBase64String(s):Gn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="server_timestamp",I1="__type__",k1="__previous_value__",D1="__local_write_time__";function i0(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[I1])==null?void 0:a.stringValue)===R1}function xf(s){const e=s.mapValue.fields[k1];return i0(e)?xf(e):e}function bu(s){const e=Si(s.mapValue.fields[D1].timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t,a,o,u,h,g,x,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=b}}const Hd="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||Hd}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="__type__",T4="__max__",yd={mapValue:{}},M1="__vector__",Fd="value";function Ai(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?i0(s)?4:j4(s)?9007199254740991:E4(s)?10:11:Xe(28295,{value:s})}function Wr(s,e){if(s===e)return!0;const t=Ai(s);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return bu(s).isEqual(bu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Si(o.timestampValue),g=Si(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Ci(o.bytesValue).isEqual(Ci(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return dn(o.geoPointValue.latitude)===dn(u.geoPointValue.latitude)&&dn(o.geoPointValue.longitude)===dn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return dn(o.integerValue)===dn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=dn(o.doubleValue),g=dn(u.doubleValue);return h===g?Bd(h)===Bd(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return ko(s.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(mw(h)!==mw(g))return!1;for(const x in h)if(h.hasOwnProperty(x)&&(g[x]===void 0||!Wr(h[x],g[x])))return!1;return!0})(s,e);default:return Xe(52216,{left:s})}}function wu(s,e){return(s.values||[]).find((t=>Wr(t,e)))!==void 0}function Do(s,e){if(s===e)return 0;const t=Ai(s),a=Ai(e);if(t!==a)return dt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=dn(u.integerValue||u.doubleValue),x=dn(h.integerValue||h.doubleValue);return g<x?-1:g>x?1:g===x?0:isNaN(g)?isNaN(x)?0:-1:1})(s,e);case 3:return pw(s.timestampValue,e.timestampValue);case 4:return pw(bu(s),bu(e));case 5:return pp(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=Ci(u),x=Ci(h);return g.compareTo(x)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),x=h.split("/");for(let p=0;p<g.length&&p<x.length;p++){const b=dt(g[p],x[p]);if(b!==0)return b}return dt(g.length,x.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=dt(dn(u.latitude),dn(h.latitude));return g!==0?g:dt(dn(u.longitude),dn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return xw(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var N,I,U,$;const g=u.fields||{},x=h.fields||{},p=(N=g[Fd])==null?void 0:N.arrayValue,b=(I=x[Fd])==null?void 0:I.arrayValue,_=dt(((U=p==null?void 0:p.values)==null?void 0:U.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return _!==0?_:xw(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===yd.mapValue&&h===yd.mapValue)return 0;if(u===yd.mapValue)return 1;if(h===yd.mapValue)return-1;const g=u.fields||{},x=Object.keys(g),p=h.fields||{},b=Object.keys(p);x.sort(),b.sort();for(let _=0;_<x.length&&_<b.length;++_){const N=pp(x[_],b[_]);if(N!==0)return N;const I=Do(g[x[_]],p[b[_]]);if(I!==0)return I}return dt(x.length,b.length)})(s.mapValue,e.mapValue);default:throw Xe(23264,{he:t})}}function pw(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return dt(s,e);const t=Si(s),a=Si(e),o=dt(t.seconds,a.seconds);return o!==0?o:dt(t.nanos,a.nanos)}function xw(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const u=Do(t[o],a[o]);if(u)return u}return dt(t.length,a.length)}function Oo(s){return xp(s)}function xp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=Si(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ci(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Be.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const u of t.values||[])o?o=!1:a+=",",a+=xp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${xp(t.fields[h])}`;return o+"}"})(s.mapValue):Xe(61005,{value:s})}function Sd(s){switch(Ai(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(s);return e?16+Sd(e):16;case 5:return 2*s.stringValue.length;case 6:return Ci(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+Sd(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Di(a.fields,((u,h)=>{o+=u.length+Sd(h)})),o})(s.mapValue);default:throw Xe(13486,{value:s})}}function yw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function yp(s){return!!s&&"integerValue"in s}function l0(s){return!!s&&"arrayValue"in s}function bw(s){return!!s&&"nullValue"in s}function vw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Cd(s){return!!s&&"mapValue"in s}function E4(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[O1])==null?void 0:a.stringValue)===M1}function ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Di(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=ou(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(s.arrayValue.values[t]);return e}return{...s}}function j4(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=qn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!t.isImmediateParentOf(g)){const x=this.getFieldsMap(t);this.applyChanges(x,a,o),a={},o=[],t=g.popLast()}h?a[g.lastSegment()]=ou(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,a,o)}delete(e){const t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];Cd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){Di(t,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new Ts(ou(this.value))}}function V1(s){const e=[];return Di(s.fields,((t,a)=>{const o=new qn([t]);if(Cd(a)){const u=V1(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t,a,o,u,h,g){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Jn(e,0,We.min(),We.min(),We.min(),Ts.empty(),0)}static newFoundDocument(e,t,a,o){return new Jn(e,1,t,We.min(),a,o,0)}static newNoDocument(e,t){return new Jn(e,2,t,We.min(),We.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,We.min(),We.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.position=e,this.inclusive=t}}function ww(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=Be.comparator(Be.fromName(h.referenceValue),t.key):a=Do(h,t.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function _w(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Wr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t="asc"){this.field=e,this.dir=t}}function S4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{}class _n extends L1{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new A4(e,t,a):t==="array-contains"?new k4(e,a):t==="in"?new D4(e,a):t==="not-in"?new O4(e,a):t==="array-contains-any"?new M4(e,a):new _n(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new R4(e,a):new I4(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&Ai(this.value)===Ai(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends L1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wr(e,t)}matches(e){return P1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function P1(s){return s.op==="and"}function U1(s){return C4(s)&&P1(s)}function C4(s){for(const e of s.filters)if(e instanceof wr)return!1;return!0}function bp(s){if(s instanceof _n)return s.field.canonicalString()+s.op.toString()+Oo(s.value);if(U1(s))return s.filters.map((e=>bp(e))).join(",");{const e=s.filters.map((t=>bp(t))).join(",");return`${s.op}(${e})`}}function z1(s,e){return s instanceof _n?(function(a,o){return o instanceof _n&&a.op===o.op&&a.field.isEqual(o.field)&&Wr(a.value,o.value)})(s,e):s instanceof wr?(function(a,o){return o instanceof wr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&z1(h,o.filters[g])),!0):!1})(s,e):void Xe(19439)}function B1(s){return s instanceof _n?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`})(s):s instanceof wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(B1).join(" ,")+"}"})(s):"Filter"}class A4 extends _n{constructor(e,t,a){super(e,t,a),this.key=Be.fromName(a.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class R4 extends _n{constructor(e,t){super(e,"in",t),this.keys=H1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I4 extends _n{constructor(e,t){super(e,"not-in",t),this.keys=H1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function H1(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Be.fromName(a.referenceValue)))}class k4 extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l0(t)&&wu(t.arrayValue,this.value)}}class D4 extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wu(this.value.arrayValue,t)}}class O4 extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wu(this.value.arrayValue,t)}}class M4 extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>wu(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function Nw(s,e=null,t=[],a=[],o=null,u=null,h=null){return new V4(s,e,t,a,o,u,h)}function o0(s){const e=Ze(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>bp(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Oo(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Oo(a))).join(",")),e.Te=t}return e.Te}function c0(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!S4(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!z1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!_w(s.startAt,e.startAt)&&_w(s.endAt,e.endAt)}function vp(s){return Be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t=null,a=[],o=[],u=null,h="F",g=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L4(s,e,t,a,o,u,h,g){return new $o(s,e,t,a,o,u,h,g)}function yf(s){return new $o(s)}function Tw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function F1(s){return s.collectionGroup!==null}function cu(s){const e=Ze(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new jn(qn.comparator);return h.filters.forEach((x=>{x.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new _u(u,a))})),t.has(qn.keyField().canonicalString())||e.Ie.push(new _u(qn.keyField(),a))}return e.Ie}function Gr(s){const e=Ze(s);return e.Ee||(e.Ee=P4(e,cu(s))),e.Ee}function P4(s,e){if(s.limitType==="F")return Nw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)}));const t=s.endAt?new qd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new qd(s.startAt.position,s.startAt.inclusive):null;return Nw(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function wp(s,e){const t=s.filters.concat([e]);return new $o(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function _p(s,e,t){return new $o(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function bf(s,e){return c0(Gr(s),Gr(e))&&s.limitType===e.limitType}function q1(s){return`${o0(Gr(s))}|lt:${s.limitType}`}function po(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>B1(o))).join(", ")}]`),pf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>Oo(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>Oo(o))).join(",")),`Target(${a})`})(Gr(s))}; limitType=${s.limitType})`}function vf(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Be.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of cu(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,x){const p=ww(h,g,x);return h.inclusive?p<=0:p<0})(a.startAt,cu(a),o)||a.endAt&&!(function(h,g,x){const p=ww(h,g,x);return h.inclusive?p>=0:p>0})(a.endAt,cu(a),o))})(s,e)}function U4(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function G1(s){return(e,t)=>{let a=!1;for(const o of cu(s)){const u=z4(o,e,t);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function z4(s,e,t){const a=s.field.isKeyField()?Be.comparator(e.key,t.key):(function(u,h,g){const x=h.data.field(u),p=g.data.field(u);return x!==null&&p!==null?Do(x,p):Xe(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Xe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((t,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return C1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new en(Be.comparator);function Oa(){return B4}const $1=new en(Be.comparator);function eu(...s){let e=$1;for(const t of s)e=e.insert(t.key,t);return e}function K1(s){let e=$1;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function ul(){return uu()}function Y1(){return uu()}function uu(){return new Tl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const H4=new en(Be.comparator),F4=new jn(Be.comparator);function ft(...s){let e=F4;for(const t of s)e=e.add(t);return e}const q4=new jn(dt);function G4(){return q4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function Q1(s){return{integerValue:""+s}}function $4(s,e){return b4(e)?Q1(e):u0(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this._=void 0}}function K4(s,e,t){return s instanceof Nu?(function(o,u){const h={fields:{[I1]:{stringValue:R1},[D1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&i0(u)&&(u=xf(u)),u&&(h.fields[k1]=u),{mapValue:h}})(t,e):s instanceof Mo?W1(s,e):s instanceof Tu?J1(s,e):(function(o,u){const h=X1(o,u),g=Ew(h)+Ew(o.Ae);return yp(h)&&yp(o.Ae)?Q1(g):u0(o.serializer,g)})(s,e)}function Y4(s,e,t){return s instanceof Mo?W1(s,e):s instanceof Tu?J1(s,e):t}function X1(s,e){return s instanceof Gd?(function(a){return yp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Nu extends wf{}class Mo extends wf{constructor(e){super(),this.elements=e}}function W1(s,e){const t=Z1(e);for(const a of s.elements)t.some((o=>Wr(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Tu extends wf{constructor(e){super(),this.elements=e}}function J1(s,e){let t=Z1(e);for(const a of s.elements)t=t.filter((o=>!Wr(o,a)));return{arrayValue:{values:t}}}class Gd extends wf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ew(s){return dn(s.integerValue||s.doubleValue)}function Z1(s){return l0(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this.field=e,this.transform=t}}function Q4(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Mo&&o instanceof Mo||a instanceof Tu&&o instanceof Tu?ko(a.elements,o.elements,Wr):a instanceof Gd&&o instanceof Gd?Wr(a.Ae,o.Ae):a instanceof Nu&&o instanceof Nu})(s.transform,e.transform)}class X4{constructor(e,t){this.version=e,this.transformResults=t}}class us{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new us}static exists(e){return new us(void 0,e)}static updateTime(e){return new us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _f{}function tN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Nf(s.key,us.none()):new Ou(s.key,s.data,us.none());{const t=s.data,a=Ts.empty();let o=new jn(qn.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new Oi(s.key,a,new Ms(o.toArray()),us.none())}}function W4(s,e,t){s instanceof Ou?(function(o,u,h){const g=o.value.clone(),x=Sw(o.fieldTransforms,u,h.transformResults);g.setAll(x),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):s instanceof Oi?(function(o,u,h){if(!Ad(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Sw(o.fieldTransforms,u,h.transformResults),x=u.data;x.setAll(nN(o)),x.setAll(g),u.convertToFoundDocument(h.version,x).setHasCommittedMutations()})(s,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function hu(s,e,t,a){return s instanceof Ou?(function(u,h,g,x){if(!Ad(u.precondition,h))return g;const p=u.value.clone(),b=Cw(u.fieldTransforms,x,h);return p.setAll(b),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(s,e,t,a):s instanceof Oi?(function(u,h,g,x){if(!Ad(u.precondition,h))return g;const p=Cw(u.fieldTransforms,x,h),b=h.data;return b.setAll(nN(u)),b.setAll(p),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((_=>_.field)))})(s,e,t,a):(function(u,h,g){return Ad(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,t)}function J4(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=X1(a.transform,o||null);u!=null&&(t===null&&(t=Ts.empty()),t.set(a.field,u))}return t||null}function jw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&ko(a,o,((u,h)=>Q4(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ou extends _f{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Oi extends _f{constructor(e,t,a,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nN(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function Sw(s,e,t){const a=new Map;jt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,Y4(h,g,t[o]))}return a}function Cw(s,e,t){const a=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);a.set(o.field,K4(u,h,e))}return a}class Nf extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z4 extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&W4(u,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=hu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=hu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Y1();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=t.has(o.key)?null:g;const x=tN(h,g);x!==null&&a.set(o.key,x),h.isValidDocument()||h.convertToNoDocument(We.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ft())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,((t,a)=>jw(t,a)))&&ko(this.baseMutations,e.baseMutations,((t,a)=>jw(t,a)))}}class h0{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){jt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return H4})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new h0(e,t,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,gt;function s5(s){switch(s){case ue.OK:return Xe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Xe(15467,{code:s})}}function sN(s){if(s===void 0)return Da("GRPC error has no .code"),ue.UNKNOWN;switch(s){case wn.OK:return ue.OK;case wn.CANCELLED:return ue.CANCELLED;case wn.UNKNOWN:return ue.UNKNOWN;case wn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case wn.INTERNAL:return ue.INTERNAL;case wn.UNAVAILABLE:return ue.UNAVAILABLE;case wn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case wn.NOT_FOUND:return ue.NOT_FOUND;case wn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case wn.ABORTED:return ue.ABORTED;case wn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case wn.DATA_LOSS:return ue.DATA_LOSS;default:return Xe(39323,{code:s})}}(gt=wn||(wn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=new _i([4294967295,4294967295],0);function Aw(s){const e=r5().encode(s),t=new x1;return t.update(e),new Uint8Array(t.digest())}function Rw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _i([t,a],0),new _i([o,u],0)]}class d0{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(a<0)throw new tu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_i.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(_i.fromNumber(a)));return o.compare(a5)===1&&(o=new _i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Aw(e),[a,o]=Rw(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new d0(u,o,t);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const t=Aw(e),[a,o]=Rw(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,a,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Tf(We.min(),o,new en(dt),Oa(),ft())}}class Mu{constructor(e,t,a,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Mu(a,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,a,o){this.be=e,this.removedTargetIds=t,this.key=a,this.De=o}}class rN{constructor(e,t){this.targetId=e,this.Ce=t}}class aN{constructor(e,t,a=Gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class Iw{constructor(){this.ve=0,this.Fe=kw(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),t=ft(),a=ft();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Xe(38017,{changeType:u})}})),new Mu(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=kw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oa(),this.Je=bd(),this.He=bd(),this.Ye=new en(dt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(vp(u))if(a===0){const h=new Be(u.path);this.et(t,h,Jn.newNoDocument(h,We.min()))}else jt(a===1,20013,{expectedCount:a});else{const h=this._t(t);if(h!==a){const g=this.ut(e),x=g?this.ct(g,e,h):1;if(x!==0){this.it(t);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=t;let h,g;try{h=Ci(a).toUint8Array()}catch(x){if(x instanceof A1)return Io("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{g=new d0(h,o,u)}catch(x){return Io(x instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return g.ge===0?null:g}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&vp(g.target)){const x=new Be(g.target.path);this.It(x).has(h)||this.Et(h,x)||this.et(h,x,Jn.newNoDocument(x,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let a=ft();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Tf(e,t,this.Ye,this.je,a);return this.je=Oa(),this.Je=bd(),this.He=bd(),this.Ye=new en(dt),o}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Iw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn(dt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn(dt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bd(){return new en(Be.comparator)}function kw(){return new en(Be.comparator)}const l5={asc:"ASCENDING",desc:"DESCENDING"},o5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c5={and:"AND",or:"OR"};class u5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Np(s,e){return s.useProto3Json||pf(e)?e:{value:e}}function $d(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function h5(s,e){return $d(s,e.toTimestamp())}function $r(s){return jt(!!s,49232),We.fromTimestamp((function(t){const a=Si(t);return new Qt(a.seconds,a.nanos)})(s))}function f0(s,e){return Tp(s,e).canonicalString()}function Tp(s,e){const t=(function(o){return new Ft(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function lN(s){const e=Ft.fromString(s);return jt(dN(e),10190,{key:e.toString()}),e}function Ep(s,e){return f0(s.databaseId,e.path)}function Kg(s,e){const t=lN(e);if(t.get(1)!==s.databaseId.projectId)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Be(cN(t))}function oN(s,e){return f0(s.databaseId,e)}function d5(s){const e=lN(s);return e.length===4?Ft.emptyPath():cN(e)}function jp(s){return new Ft(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function cN(s){return jt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Dw(s,e,t){return{name:Ep(s,e),fields:t.value.mapValue.fields}}function f5(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(jt(b===void 0||typeof b=="string",58123),Gn.fromBase64String(b||"")):(jt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Gn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(p){const b=p.code===void 0?ue.UNKNOWN:sN(p.code);return new Ce(b,p.message||"")})(h);t=new aN(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Kg(s,a.document.name),u=$r(a.document.updateTime),h=a.document.createTime?$r(a.document.createTime):We.min(),g=new Ts({mapValue:{fields:a.document.fields}}),x=Jn.newFoundDocument(o,u,h,g),p=a.targetIds||[],b=a.removedTargetIds||[];t=new Rd(p,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Kg(s,a.document),u=a.readTime?$r(a.readTime):We.min(),h=Jn.newNoDocument(o,u),g=a.removedTargetIds||[];t=new Rd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Kg(s,a.document),u=a.removedTargetIds||[];t=new Rd([],u,o,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new n5(o,u),g=a.targetId;t=new rN(g,h)}}return t}function m5(s,e){let t;if(e instanceof Ou)t={update:Dw(s,e.key,e.value)};else if(e instanceof Nf)t={delete:Ep(s,e.key)};else if(e instanceof Oi)t={update:Dw(s,e.key,e.data),updateMask:N5(e.fieldMask)};else{if(!(e instanceof Z4))return Xe(16599,{Vt:e.type});t={verify:Ep(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof Nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Mo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Tu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Gd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Xe(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:h5(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Xe(27497)})(s,e.precondition)),t}function g5(s,e){return s&&s.length>0?(jt(e!==void 0,14353),s.map((t=>(function(o,u){let h=o.updateTime?$r(o.updateTime):$r(u);return h.isEqual(We.min())&&(h=$r(u)),new X4(h,o.transformResults||[])})(t,e)))):[]}function p5(s,e){return{documents:[oN(s,e.path)]}}function x5(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=oN(s,o);const u=(function(p){if(p.length!==0)return hN(wr.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((b=>(function(N){return{field:xo(N.field),direction:v5(N.dir)}})(b)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Np(s,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function y5(s){let e=d5(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){jt(a===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(_){const N=uN(_);return N instanceof wr&&U1(N)?N.getFilters():[N]})(t.where));let h=[];t.orderBy&&(h=(function(_){return _.map((N=>(function(U){return new _u(yo(U.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(N)))})(t.orderBy));let g=null;t.limit&&(g=(function(_){let N;return N=typeof _=="object"?_.value:_,pf(N)?null:N})(t.limit));let x=null;t.startAt&&(x=(function(_){const N=!!_.before,I=_.values||[];return new qd(I,N)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const N=!_.before,I=_.values||[];return new qd(I,N)})(t.endAt)),L4(e,o,h,u,g,"F",x,p)}function b5(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=yo(t.unaryFilter.field);return _n.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return _n.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yo(t.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(t.unaryFilter.field);return _n.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return _n.create(yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return wr.create(t.compositeFilter.filters.map((a=>uN(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(t.compositeFilter.op))})(s):Xe(30097,{filter:s})}function v5(s){return l5[s]}function w5(s){return o5[s]}function _5(s){return c5[s]}function xo(s){return{fieldPath:s.canonicalString()}}function yo(s){return qn.fromServerFormat(s.fieldPath)}function hN(s){return s instanceof _n?(function(t){if(t.op==="=="){if(vw(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(bw(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vw(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(bw(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:w5(t.op),value:t.value}}})(s):s instanceof wr?(function(t){const a=t.getFilters().map((o=>hN(o)));return a.length===1?a[0]:{compositeFilter:{op:_5(t.op),filters:a}}})(s):Xe(54877,{filter:s})}function N5(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t,a,o,u=We.min(),h=We.min(),g=Gn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=x}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.yt=e}}function E5(s){const e=y5({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.Cn=new S5}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ji.min())}updateCollectionGroup(e,t,a){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class S5{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new jn(Ft.comparator),u=!o.has(a);return this.index[t]=o.add(a),u}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new jn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fN=41943040;class _s{static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(fN,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="LruGarbageCollector",C5=1048576;function Vw([s,e],[t,a]){const o=dt(s,t);return o===0?dt(e,a):o}class A5{constructor(e){this.Ir=e,this.buffer=new jn(Vw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Vw(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class R5{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(Mw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ke(Mw,"Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.Vr(3e5)}))}}class I5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(gf.ce);const a=new A5(t);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Ow)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ow):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,o,u,h,g,x,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,h=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(a=_,g=Date.now(),this.removeTargets(e,a,t)))).next((_=>(u=_,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((_=>(p=Date.now(),go()<=ht.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(x-g)+`ms
	Removed ${_} documents in `+(p-x)+`ms
Total Duration: ${p-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:_}))))}}function k5(s,e){return new I5(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.changes=new Tl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?de.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&hu(a.mutation,o,Ms.empty(),Qt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,ft()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=ft()){const o=ul();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((u=>{let h=eu();return u.forEach(((g,x)=>{h=h.insert(g,x.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const a=ul();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,ft())))}populateOverlays(e,t,a){const o=[];return a.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{t.set(h,g)}))}))}computeViews(e,t,a,o){let u=Oa();const h=uu(),g=(function(){return uu()})();return t.forEach(((x,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Oi)?u=u.insert(p.key,p):b!==void 0?(h.set(p.key,b.mutation.getFieldMask()),hu(b.mutation,p,b.mutation.getFieldMask(),Qt.now())):h.set(p.key,Ms.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((p,b)=>h.set(p,b))),t.forEach(((p,b)=>g.set(p,new O5(b,h.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,t){const a=uu();let o=new en(((h,g)=>h-g)),u=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const g of h)g.keys().forEach((x=>{const p=t.get(x);if(p===null)return;let b=a.get(x)||Ms.empty();b=g.applyToLocalView(p,b),a.set(x,b);const _=(o.get(g.batchId)||ft()).add(x);o=o.insert(g.batchId,_)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const x=g.getNext(),p=x.key,b=x.value,_=Y1();b.forEach((N=>{if(!u.has(N)){const I=tN(t.get(N),a.get(N));I!==null&&_.set(N,I),u=u.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,_))}return de.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return(function(h){return Be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):F1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-u.size):de.resolve(ul());let g=yu,x=u;return h.next((p=>de.forEach(p,((b,_)=>(g<_.largestBatchId&&(g=_.largestBatchId),u.get(b)?de.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{x=x.insert(b,N)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,x,p,ft()))).next((b=>({batchId:g,changes:K1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((a=>{let o=eu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const u=t.collectionGroup;let h=eu();return this.indexManager.getCollectionParents(e,u).next((g=>de.forEach(g,(x=>{const p=(function(_,N){return new $o(N,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((b=>{b.forEach(((_,N)=>{h=h.insert(_,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,u,o)))).next((h=>{u.forEach(((x,p)=>{const b=p.getKey();h.get(b)===null&&(h=h.insert(b,Jn.newInvalidDocument(b)))}));let g=eu();return h.forEach(((x,p)=>{const b=u.get(x);b!==void 0&&hu(b.mutation,p,Ms.empty(),Qt.now()),vf(t,p)&&(g=g.insert(x,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:$r(o.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:E5(o.bundledQuery),readTime:$r(o.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.overlays=new en(Be.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ul();return de.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,u)=>{this.St(e,t,u)})),de.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),de.resolve()}getOverlaysForCollection(e,t,a){const o=ul(),u=t.length+1,h=new Be(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const x=g.getNext().value,p=x.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&x.largestBatchId>a&&o.set(x.getKey(),x)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let u=new en(((p,b)=>p-b));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>a){let b=u.get(p.largestBatchId);b===null&&(b=ul(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=ul(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return de.resolve(g)}St(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new t5(t,a));let u=this.qr.get(t);u===void 0&&(u=ft(),this.qr.set(t,u)),this.qr.set(t,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.Qr=new jn(Rn.$r),this.Ur=new jn(Rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new Rn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new Rn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new Be(new Ft([])),a=new Rn(t,e),o=new Rn(t,e+1),u=[];return this.Ur.forEachInRange([a,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Be(new Ft([])),a=new Rn(t,e),o=new Rn(t,e+1);let u=ft();return this.Ur.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Rn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Rn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Be.comparator(e.key,t.key)||dt(e.Yr,t.Yr)}static Kr(e,t){return dt(e.Yr,t.Yr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(Rn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new e5(u,t,a,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Rn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.ei(a),u=o<0?0:o;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?a0:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Rn(t,0),o=new Rn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(h=>{const g=this.Xr(h.Yr);u.push(g)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new jn(dt);return t.forEach((o=>{const u=new Rn(o,0),h=new Rn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{a=a.add(g.Yr)}))})),de.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let u=a;Be.isDocumentKey(u)||(u=u.child(""));const h=new Rn(new Be(u),0);let g=new jn(dt);return this.Zr.forEachWhile((x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(x.Yr)),!0)}),h),de.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){jt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return de.forEach(t.mutations,(o=>{const u=new Rn(o.key,t.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new Rn(t,0),o=this.Zr.firstAfterOrEqual(a);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.ri=e,this.docs=(function(){return new en(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),u=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return de.resolve(a?a.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let a=Oa();return t.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Jn.newInvalidDocument(o))})),de.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let u=Oa();const h=t.path,g=new Be(h.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(g);for(;x.hasNext();){const{key:p,value:{document:b}}=x.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||g4(m4(b),a)<=0||(o.has(b.key)||vf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,t,a,o){Xe(9500)}ii(e,t){return de.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new B5(this)}getSize(e){return de.resolve(this.size)}}class B5 extends D5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.persistence=e,this.si=new Tl((t=>o0(t)),c0),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.oi=0,this._i=new m0,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((a,o)=>t(o))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,a){let o=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=t&&a.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),de.waitFor(u).next((()=>o))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return de.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),de.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return de.resolve(a)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t){this.ui={},this.overlays={},this.ci=new gf(0),this.li=!1,this.li=!0,this.hi=new P5,this.referenceDelegate=e(this),this.Pi=new H5(this),this.indexManager=new j5,this.remoteDocumentCache=(function(o){return new z5(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new T5(t),this.Ii=new V5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new U5(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){ke("MemoryPersistence","Starting transaction:",e);const o=new F5(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return de.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class F5 extends x4{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.Ri=new m0,this.Vi=null}static mi(e){return new g0(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),de.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(a=>{const o=Be.fromPath(a);return this.gi(e,o).next((u=>{u||t.removeEntry(o,We.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Kd{constructor(e,t){this.persistence=e,this.pi=new Tl((a=>v4(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=k5(this,t)}static mi(e,t){return new Kd(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?de.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((g=>{g||(a++,u.removeEntry(h,We.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),de.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sd(e.data.value)),t}br(e,t,a){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return de.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=o}static As(e,t){let a=ft(),o=ft();for(const u of t.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new p0(e,t.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VA()?8:y4(es())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new q5;return this.Ss(e,t,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,t,h,g.size)}))})).next((()=>u.result))}bs(e,t,a,o){return a.documentReadCount<this.fs?(go()<=ht.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(go()<=ht.DEBUG&&ke("QueryEngine","Query:",po(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(go()<=ht.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):de.resolve())}ys(e,t){if(Tw(t))return de.resolve(null);let a=Gr(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=_p(t,null,"F"),a=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=ft(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((x=>{const p=this.Ds(t,g);return this.Cs(t,p,h,x.readTime)?this.ys(e,_p(t,null,"F")):this.vs(e,p,t,x)}))))})))))}ws(e,t,a,o){return Tw(t)||o.isEqual(We.min())?de.resolve(null):this.ps.getDocuments(e,a).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,a,o)?de.resolve(null):(go()<=ht.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.vs(e,h,t,f4(o,yu)).next((g=>g)))}))}Ds(e,t){let a=new jn(G1(e));return t.forEach(((o,u)=>{vf(e,u)&&(a=a.add(u))})),a}Cs(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,a){return go()<=ht.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",po(t)),this.ps.getDocumentsMatchingQuery(e,t,ji.min(),a)}vs(e,t,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="LocalStore",$5=3e8;class K5{constructor(e,t,a,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new en(dt),this.xs=new Tl((u=>o0(u)),c0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Y5(s,e,t,a){return new K5(s,e,t,a)}async function gN(s,e){const t=Ze(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let x=ft();for(const p of o){h.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}return t.localDocuments.getDocuments(a,x).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:g})))}))}))}function Q5(s,e){const t=Ze(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,x,p,b){const _=p.batch,N=_.keys();let I=de.resolve();return N.forEach((U=>{I=I.next((()=>b.getEntry(x,U))).next(($=>{const z=p.docVersions.get(U);jt(z!==null,48541),$.version.compareTo(z)<0&&(_.applyToRemoteDocument($,p),$.isValidDocument()&&($.setReadTime(p.commitVersion),b.addEntry($)))}))})),I.next((()=>g.mutationQueue.removeMutationBatch(x,_)))})(t,a,e,u).next((()=>u.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let x=ft();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(x=x.add(g.batch.mutations[p].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function pN(s){const e=Ze(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function X5(s,e){const t=Ze(s),a=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((b,_)=>{const N=o.get(_);if(!N)return;g.push(t.Pi.removeMatchingKeys(u,b.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(u,b.addedDocuments,_))));let I=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Gn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):b.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(b.resumeToken,a)),o=o.insert(_,I),(function($,z,D){return $.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=$5?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(N,I,b)&&g.push(t.Pi.updateTargetData(u,I))}));let x=Oa(),p=ft();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(W5(u,h,e.documentUpdates).next((b=>{x=b.ks,p=b.qs}))),!a.isEqual(We.min())){const b=t.Pi.getLastRemoteSnapshotVersion(u).next((_=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(b)}return de.waitFor(g).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,x,p))).next((()=>x))})).then((u=>(t.Ms=o,u)))}function W5(s,e,t){let a=ft(),o=ft();return t.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=Oa();return t.forEach(((g,x)=>{const p=u.get(g);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),x.isNoDocument()&&x.version.isEqual(We.min())?(e.removeEntry(g,x.readTime),h=h.insert(g,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),h=h.insert(g,x)):ke(x0,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",x.version)})),{ks:h,qs:o}}))}function J5(s,e){const t=Ze(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=a0),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function Z5(s,e){const t=Ze(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.Pi.getTargetData(a,e).next((u=>u?(o=u,de.resolve(o)):t.Pi.allocateTargetId(a).next((h=>(o=new yi(e,h,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function Sp(s,e,t){const a=Ze(s),o=a.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Go(h))throw h;ke(x0,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Lw(s,e,t){const a=Ze(s);let o=We.min(),u=ft();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(x,p,b){const _=Ze(x),N=_.xs.get(b);return N!==void 0?de.resolve(_.Ms.get(N)):_.Pi.getTargetData(p,b)})(a,h,Gr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(h,g.targetId).next((x=>{u=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(h,e,t?o:We.min(),t?u:ft()))).next((g=>(eI(a,U4(e),g),{documents:g,Qs:u})))))}function eI(s,e,t){let a=s.Os.get(e)||We.min();t.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Os.set(e,a)}class Pw{constructor(){this.activeTargetIds=G4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tI{constructor(){this.Mo=new Pw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pw,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="ConnectivityMonitor";class zw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(Uw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(Uw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function Cp(){return vd===null?vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="RestConnection",sI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Hd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,t,a,o,u){const h=Cp(),g=this.zo(e,t.toUriEncodedString());ke(Yg,`Sending RPC '${e}' ${h}:`,g,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,u);const{host:p}=new URL(g),b=ta(p);return this.Jo(e,g,x,a,b).then((_=>(ke(Yg,`Received RPC '${e}' ${h}: `,_),_)),(_=>{throw Io(Yg,`RPC '${e}' ${h} failed with error: `,_,"url: ",g,"request:",a),_}))}Ho(e,t,a,o,u,h){return this.Go(e,t,a,o,u)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const a=sI[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class iI extends rI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,o,u){const h=Cp();return new Promise(((g,x)=>{const p=new y1;p.setWithCredentials(!0),p.listenOnce(b1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case jd.NO_ERROR:const _=p.getResponseJson();ke(Xn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(_)),g(_);break;case jd.TIMEOUT:ke(Xn,`RPC '${e}' ${h} timed out`),x(new Ce(ue.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:const N=p.getStatus();if(ke(Xn,`RPC '${e}' ${h} failed with status:`,N,"response text:",p.getResponseText()),N>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const U=I==null?void 0:I.error;if(U&&U.status&&U.message){const $=(function(D){const Z=D.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Z)>=0?Z:ue.UNKNOWN})(U.status);x(new Ce($,U.message))}else x(new Ce(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new Ce(ue.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ke(Xn,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(o);ke(Xn,`RPC '${e}' ${h} sending request:`,o),p.send(t,"POST",b,a,15)}))}T_(e,t,a){const o=Cp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=_1(),g=w1(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,t,a),x.encodeInitMessageHeaders=!0;const b=u.join("");ke(Xn,`Creating RPC '${e}' stream ${o}: ${b}`,x);const _=h.createWebChannel(b,x);this.I_(_);let N=!1,I=!1;const U=new aI({Yo:z=>{I?ke(Xn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(N||(ke(Xn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),N=!0),ke(Xn,`RPC '${e}' stream ${o} sending:`,z),_.send(z))},Zo:()=>_.close()}),$=(z,D,Z)=>{z.listen(D,(Q=>{try{Z(Q)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return $(_,Zc.EventType.OPEN,(()=>{I||(ke(Xn,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),$(_,Zc.EventType.CLOSE,(()=>{I||(I=!0,ke(Xn,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(_))})),$(_,Zc.EventType.ERROR,(z=>{I||(I=!0,Io(Xn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),U.a_(new Ce(ue.UNAVAILABLE,"The operation could not be completed")))})),$(_,Zc.EventType.MESSAGE,(z=>{var D;if(!I){const Z=z.data[0];jt(!!Z,16349);const Q=Z,ae=(Q==null?void 0:Q.error)||((D=Q[0])==null?void 0:D.error);if(ae){ke(Xn,`RPC '${e}' stream ${o} received error:`,ae);const me=ae.status;let ye=(function(A){const M=wn[A];if(M!==void 0)return sN(M)})(me),S=ae.message;ye===void 0&&(ye=ue.INTERNAL,S="Unknown error status: "+me+" with message "+ae.message),I=!0,U.a_(new Ce(ye,S)),_.close()}else ke(Xn,`RPC '${e}' stream ${o} received:`,Z),U.u_(Z)}})),$(g,v1.STAT_EVENT,(z=>{z.stat===gp.PROXY?ke(Xn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===gp.NOPROXY&&ke(Xn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(s){return new u5(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="PersistentStream";class yN{constructor(e,t,a,o,u,h,g,x){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Da(t.toString()),Da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new Ce(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(Bw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ke(Bw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lI extends yN{constructor(e,t,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=f5(this.serializer,e),a=(function(u){if(!("targetChange"in u))return We.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?We.min():h.readTime?$r(h.readTime):We.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=jp(this.serializer),t.addTarget=(function(u,h){let g;const x=h.target;if(g=vp(x)?{documents:p5(u,x)}:{query:x5(u,x).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=iN(u,h.resumeToken);const p=Np(u,h.expectedCount);p!==null&&(g.expectedCount=p)}else if(h.snapshotVersion.compareTo(We.min())>0){g.readTime=$d(u,h.snapshotVersion.toTimestamp());const p=Np(u,h.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=b5(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=jp(this.serializer),t.removeTarget=e,this.q_(t)}}class oI extends yN{constructor(e,t,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=g5(e.writeResults,e.commitTime),a=$r(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>m5(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{}class uI extends cI{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Tp(t,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(ue.UNKNOWN,u.toString())}))}Ho(e,t,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Tp(t,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ce(ue.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Da(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="RemoteStore";class dI{constructor(e,t,a,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{a.enqueueAndForget((async()=>{El(this)&&(ke(yl,"Restarting streams for network reachability change."),await(async function(x){const p=Ze(x);p.Ea.add(4),await Vu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await jf(p)})(this))}))})),this.Ra=new hI(a,o)}}async function jf(s){if(El(s))for(const e of s.da)await e(!0)}async function Vu(s){for(const e of s.da)await e(!1)}function bN(s,e){const t=Ze(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),w0(t)?v0(t):Ko(t).O_()&&b0(t,e))}function y0(s,e){const t=Ze(s),a=Ko(t);t.Ia.delete(e),a.O_()&&vN(t,e),t.Ia.size===0&&(a.O_()?a.L_():El(t)&&t.Ra.set("Unknown"))}function b0(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(s).Y_(e)}function vN(s,e){s.Va.Ue(e),Ko(s).Z_(e)}function v0(s){s.Va=new i5({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ko(s).start(),s.Ra.ua()}function w0(s){return El(s)&&!Ko(s).x_()&&s.Ia.size>0}function El(s){return Ze(s).Ea.size===0}function wN(s){s.Va=void 0}async function fI(s){s.Ra.set("Online")}async function mI(s){s.Ia.forEach(((e,t)=>{b0(s,e)}))}async function gI(s,e){wN(s),w0(s)?(s.Ra.ha(e),v0(s)):s.Ra.set("Unknown")}async function pI(s,e,t){if(s.Ra.set("Online"),e instanceof aN&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){ke(yl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Yd(s,a)}else if(e instanceof Rd?s.Va.Ze(e):e instanceof rN?s.Va.st(e):s.Va.tt(e),!t.isEqual(We.min()))try{const a=await pN(s.localStore);t.compareTo(a)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(x.resumeToken,h))}})),g.targetMismatches.forEach(((x,p)=>{const b=u.Ia.get(x);if(!b)return;u.Ia.set(x,b.withResumeToken(Gn.EMPTY_BYTE_STRING,b.snapshotVersion)),vN(u,x);const _=new yi(b.target,x,p,b.sequenceNumber);b0(u,_)})),u.remoteSyncer.applyRemoteEvent(g)})(s,t)}catch(a){ke(yl,"Failed to raise snapshot:",a),await Yd(s,a)}}async function Yd(s,e,t){if(!Go(e))throw e;s.Ea.add(1),await Vu(s),s.Ra.set("Offline"),t||(t=()=>pN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(yl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await jf(s)}))}function _N(s,e){return e().catch((t=>Yd(s,t,e)))}async function Sf(s){const e=Ze(s),t=Ri(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:a0;for(;xI(e);)try{const o=await J5(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,yI(e,o)}catch(o){await Yd(e,o)}NN(e)&&TN(e)}function xI(s){return El(s)&&s.Ta.length<10}function yI(s,e){s.Ta.push(e);const t=Ri(s);t.O_()&&t.X_&&t.ea(e.mutations)}function NN(s){return El(s)&&!Ri(s).x_()&&s.Ta.length>0}function TN(s){Ri(s).start()}async function bI(s){Ri(s).ra()}async function vI(s){const e=Ri(s);for(const t of s.Ta)e.ea(t.mutations)}async function wI(s,e,t){const a=s.Ta.shift(),o=h0.from(a,e,t);await _N(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Sf(s)}async function _I(s,e){e&&Ri(s).X_&&await(async function(a,o){if((function(h){return s5(h)&&h!==ue.ABORTED})(o.code)){const u=a.Ta.shift();Ri(a).B_(),await _N(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Sf(a)}})(s,e),NN(s)&&TN(s)}async function Hw(s,e){const t=Ze(s);t.asyncQueue.verifyOperationInProgress(),ke(yl,"RemoteStore received new credentials");const a=El(t);t.Ea.add(3),await Vu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jf(t)}async function NI(s,e){const t=Ze(s);e?(t.Ea.delete(2),await jf(t)):e||(t.Ea.add(2),await Vu(t),t.Ra.set("Unknown"))}function Ko(s){return s.ma||(s.ma=(function(t,a,o){const u=Ze(t);return u.sa(),new lI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:fI.bind(null,s),t_:mI.bind(null,s),r_:gI.bind(null,s),H_:pI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),w0(s)?v0(s):s.Ra.set("Unknown")):(await s.ma.stop(),wN(s))}))),s.ma}function Ri(s){return s.fa||(s.fa=(function(t,a,o){const u=Ze(t);return u.sa(),new oI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:bI.bind(null,s),r_:_I.bind(null,s),ta:vI.bind(null,s),na:wI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Sf(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(yl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,a,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,u){const h=Date.now()+a,g=new _0(e,t,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(s,e){if(Da("AsyncQueue",`${e}: ${s}`),Go(s))return new Ce(ue.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Be.comparator(t.key,a.key):(t,a)=>Be.comparator(t.key,a.key),this.keyedMap=eu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new wo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.ga=new en(Be.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Lo{constructor(e,t,a,o,u,h,g,x,p){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,t,a,o,u){const h=[];return t.forEach((g=>{h.push({type:0,doc:g})})),new Lo(e,t,wo.emptySet(t),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EI{constructor(){this.queries=qw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=Ze(t),u=o.queries;o.queries=qw(),u.forEach(((h,g)=>{for(const x of g.Sa)x.onError(a)}))})(this,new Ce(ue.ABORTED,"Firestore shutting down"))}}function qw(){return new Tl((s=>q1(s)),bf)}async function T0(s,e){const t=Ze(s);let a=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new TI,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const g=N0(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&j0(t)}async function E0(s,e){const t=Ze(s),a=e.query;let o=3;const u=t.queries.get(a);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function jI(s,e){const t=Ze(s);let a=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const g of h.Sa)g.Fa(o)&&(a=!0);h.wa=o}}a&&j0(t)}function SI(s,e,t){const a=Ze(s),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);a.queries.delete(e)}function j0(s){s.Ca.forEach((e=>{e.next()}))}var Ap,Gw;(Gw=Ap||(Ap={})).Ma="default",Gw.Cache="cache";class S0{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Lo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.key=e}}class jN{constructor(e){this.key=e}}class CI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=G1(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new Fw,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,_)=>{const N=o.get(b),I=vf(this.query,_)?_:null,U=!!N&&this.mutatedKeys.has(N.key),$=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let z=!1;N&&I?N.data.isEqual(I.data)?U!==$&&(a.track({type:3,doc:I}),z=!0):this.su(N,I)||(a.track({type:2,doc:I}),z=!0,(x&&this.eu(I,x)>0||p&&this.eu(I,p)<0)&&(g=!0)):!N&&I?(a.track({type:0,doc:I}),z=!0):N&&!I&&(a.track({type:1,doc:N}),z=!0,(x||p)&&(g=!0)),z&&(I?(h=h.add(I),u=$?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:h,iu:a,Cs:g,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,_)=>(function(I,U){const $=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:z})}};return $(I)-$(U)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(a),o=o??!1;const g=t&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,h.length!==0||p?{snapshot:new Lo(this.query,e.tu,u,h,e.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new jN(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new EN(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const C0="SyncEngine";class AI{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class RI{constructor(e){this.key=e,this.hu=!1}}class II{constructor(e,t,a,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Tl((g=>q1(g)),bf),this.Iu=new Map,this.Eu=new Set,this.du=new en(Be.comparator),this.Au=new Map,this.Ru=new m0,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kI(s,e,t=!0){const a=kN(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await SN(a,e,t,!0),o}async function DI(s,e){const t=kN(s);await SN(t,e,!0,!1)}async function SN(s,e,t,a){const o=await Z5(s.localStore,Gr(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let g;return a&&(g=await OI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&bN(s.remoteStore,o),g}async function OI(s,e,t,a,o){s.pu=(_,N,I)=>(async function($,z,D,Z){let Q=z.view.ru(D);Q.Cs&&(Q=await Lw($.localStore,z.query,!1).then((({documents:S})=>z.view.ru(S,Q))));const ae=Z&&Z.targetChanges.get(z.targetId),me=Z&&Z.targetMismatches.get(z.targetId)!=null,ye=z.view.applyChanges(Q,$.isPrimaryClient,ae,me);return Kw($,z.targetId,ye.au),ye.snapshot})(s,_,N,I);const u=await Lw(s.localStore,e,!0),h=new CI(e,u.Qs),g=h.ru(u.documents),x=Mu.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),p=h.applyChanges(g,s.isPrimaryClient,x);Kw(s,t,p.au);const b=new AI(e,t,h);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function MI(s,e,t){const a=Ze(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!bf(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Sp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&y0(a.remoteStore,o.targetId),Rp(a,o.targetId)})).catch(qo)):(Rp(a,o.targetId),await Sp(a.localStore,o.targetId,!0))}async function VI(s,e){const t=Ze(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),y0(t.remoteStore,a.targetId))}async function LI(s,e,t){const a=qI(s);try{const o=await(function(h,g){const x=Ze(h),p=Qt.now(),b=g.reduce(((I,U)=>I.add(U.key)),ft());let _,N;return x.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let U=Oa(),$=ft();return x.Ns.getEntries(I,b).next((z=>{U=z,U.forEach(((D,Z)=>{Z.isValidDocument()||($=$.add(D))}))})).next((()=>x.localDocuments.getOverlayedDocuments(I,U))).next((z=>{_=z;const D=[];for(const Z of g){const Q=J4(Z,_.get(Z.key).overlayedDocument);Q!=null&&D.push(new Oi(Z.key,Q,V1(Q.value.mapValue),us.exists(!0)))}return x.mutationQueue.addMutationBatch(I,p,D,g)})).next((z=>{N=z;const D=z.applyToLocalDocumentSet(_,$);return x.documentOverlayCache.saveOverlays(I,z.batchId,D)}))})).then((()=>({batchId:N.batchId,changes:K1(_)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,x){let p=h.Vu[h.currentUser.toKey()];p||(p=new en(dt)),p=p.insert(g,x),h.Vu[h.currentUser.toKey()]=p})(a,o.batchId,t),await Lu(a,o.changes),await Sf(a.remoteStore)}catch(o){const u=N0(o,"Failed to persist write");t.reject(u)}}async function CN(s,e){const t=Ze(s);try{const a=await X5(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Au.get(u);h&&(jt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?jt(h.hu,14607):o.removedDocuments.size>0&&(jt(h.hu,42227),h.hu=!1))})),await Lu(t,a,e)}catch(a){await qo(a)}}function $w(s,e,t){const a=Ze(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const x=Ze(h);x.onlineState=g;let p=!1;x.queries.forEach(((b,_)=>{for(const N of _.Sa)N.va(g)&&(p=!0)})),p&&j0(x)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function PI(s,e,t){const a=Ze(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new en(Be.comparator);h=h.insert(u,Jn.newNoDocument(u,We.min()));const g=ft().add(u),x=new Tf(We.min(),new Map,new en(dt),h,g);await CN(a,x),a.du=a.du.remove(u),a.Au.delete(e),A0(a)}else await Sp(a.localStore,e,!1).then((()=>Rp(a,e,t))).catch(qo)}async function UI(s,e){const t=Ze(s),a=e.batch.batchId;try{const o=await Q5(t.localStore,e);RN(t,a,null),AN(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Lu(t,o)}catch(o){await qo(o)}}async function zI(s,e,t){const a=Ze(s);try{const o=await(function(h,g){const x=Ze(h);return x.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return x.mutationQueue.lookupMutationBatch(p,g).next((_=>(jt(_!==null,37113),b=_.keys(),x.mutationQueue.removeMutationBatch(p,_)))).next((()=>x.mutationQueue.performConsistencyCheck(p))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>x.localDocuments.getDocuments(p,b)))}))})(a.localStore,e);RN(a,e,t),AN(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Lu(a,o)}catch(o){await qo(o)}}function AN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function RN(s,e,t){const a=Ze(s);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Rp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||IN(s,a)}))}function IN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(y0(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),A0(s))}function Kw(s,e,t){for(const a of t)a instanceof EN?(s.Ru.addReference(a.key,e),BI(s,a)):a instanceof jN?(ke(C0,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||IN(s,a.key)):Xe(19791,{wu:a})}function BI(s,e){const t=e.key,a=t.path.canonicalString();s.du.get(t)||s.Eu.has(a)||(ke(C0,"New document in limbo: "+t),s.Eu.add(a),A0(s))}function A0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Be(Ft.fromString(e)),a=s.fu.next();s.Au.set(a,new RI(t)),s.du=s.du.insert(t,a),bN(s.remoteStore,new yi(Gr(yf(t.path)),a,"TargetPurposeLimboResolution",gf.ce))}}async function Lu(s,e,t){const a=Ze(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,x)=>{h.push(a.pu(x,e,t).then((p=>{var b;if((p||t)&&a.isPrimaryClient){const _=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:b.current;a.sharedClientState.updateQueryState(x.targetId,_?"current":"not-current")}if(p){o.push(p);const _=p0.As(x.targetId,p);u.push(_)}})))})),await Promise.all(h),a.Pu.H_(o),await(async function(x,p){const b=Ze(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>de.forEach(p,(N=>de.forEach(N.Es,(I=>b.persistence.referenceDelegate.addReference(_,N.targetId,I))).next((()=>de.forEach(N.ds,(I=>b.persistence.referenceDelegate.removeReference(_,N.targetId,I)))))))))}catch(_){if(!Go(_))throw _;ke(x0,"Failed to update sequence numbers: "+_)}for(const _ of p){const N=_.targetId;if(!_.fromCache){const I=b.Ms.get(N),U=I.snapshotVersion,$=I.withLastLimboFreeSnapshotVersion(U);b.Ms=b.Ms.insert(N,$)}}})(a.localStore,u))}async function HI(s,e){const t=Ze(s);if(!t.currentUser.isEqual(e)){ke(C0,"User change. New user:",e.toKey());const a=await gN(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((x=>{x.reject(new Ce(ue.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Lu(t,a.Ls)}}function FI(s,e){const t=Ze(s),a=t.Au.get(e);if(a&&a.hu)return ft().add(a.key);{let o=ft();const u=t.Iu.get(e);if(!u)return o;for(const h of u){const g=t.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function kN(s){const e=Ze(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=CN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PI.bind(null,e),e.Pu.H_=jI.bind(null,e.eventManager),e.Pu.yu=SI.bind(null,e.eventManager),e}function qI(s){const e=Ze(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Y5(this.persistence,new G5,e.initialUser,this.serializer)}Cu(e){return new mN(g0.mi,this.serializer)}Du(e){return new tI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class GI extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){jt(this.persistence.referenceDelegate instanceof Kd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new R5(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new mN((a=>Kd.mi(a,t)),this.serializer)}}class Ip{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>$w(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=HI.bind(null,this.syncEngine),await NI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EI})()}createDatastore(e){const t=Ef(e.databaseInfo.databaseId),a=(function(u){return new iI(u)})(e.databaseInfo);return(function(u,h,g,x){return new uI(u,h,g,x)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,u,h,g){return new dI(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>$w(this.syncEngine,t,0)),(function(){return zw.v()?new zw:new nI})())}createSyncEngine(e,t){return(function(o,u,h,g,x,p,b){const _=new II(o,u,h,g,x,p);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Ze(o);ke(yl,"RemoteStore shutting down."),u.Ea.add(5),await Vu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class $I{constructor(e,t,a,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=o,this.user=Wn.UNAUTHENTICATED,this.clientId=r0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{ke(Ii,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ke(Ii,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=N0(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Xg(s,e){s.asyncQueue.verifyOperationInProgress(),ke(Ii,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await gN(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Yw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await KI(s);ke(Ii,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>Hw(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Hw(e.remoteStore,o))),s._onlineComponents=e}async function KI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(Ii,"Using user provided OfflineComponentProvider");try{await Xg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await Xg(s,new Qd)}}else ke(Ii,"Using default OfflineComponentProvider"),await Xg(s,new GI(void 0));return s._offlineComponents}async function DN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(Ii,"Using user provided OnlineComponentProvider"),await Yw(s,s._uninitializedComponentsProvider._online)):(ke(Ii,"Using default OnlineComponentProvider"),await Yw(s,new Ip))),s._onlineComponents}function YI(s){return DN(s).then((e=>e.syncEngine))}async function Xd(s){const e=await DN(s),t=e.eventManager;return t.onListen=kI.bind(null,e.syncEngine),t.onUnlisten=MI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VI.bind(null,e.syncEngine),t}function QI(s,e,t={}){const a=new Ca;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,x,p){const b=new R0({next:N=>{b.Nu(),h.enqueueAndForget((()=>E0(u,_)));const I=N.docs.has(g);!I&&N.fromCache?p.reject(new Ce(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&N.fromCache&&x&&x.source==="server"?p.reject(new Ce(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),_=new S0(yf(g.path),b,{includeMetadataChanges:!0,qa:!0});return T0(u,_)})(await Xd(s),s.asyncQueue,e,t,a))),a.promise}function XI(s,e,t={}){const a=new Ca;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,x,p){const b=new R0({next:N=>{b.Nu(),h.enqueueAndForget((()=>E0(u,_))),N.fromCache&&x.source==="server"?p.reject(new Ce(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(N)},error:N=>p.reject(N)}),_=new S0(g,b,{includeMetadataChanges:!0,qa:!0});return T0(u,_)})(await Xd(s),s.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firestore.googleapis.com",Xw=!0;class Ww{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MN,this.ssl=Xw}else this.host=e.host,this.ssl=e.ssl??Xw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C5)throw new Ce(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ON(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cf{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ww({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ww(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new n4;switch(a.type){case"firstParty":return new i4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ce(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Qw.get(t);a&&(ke("ComponentProvider","Removing Datastore"),Qw.delete(t),a.terminate())})(this),Promise.resolve()}}function WI(s,e,t,a={}){var p;s=cs(s,Cf);const o=ta(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${t}`;o&&(hf(`https://${g}`),df("Firestore",!0)),u.host!==MN&&u.host!==g&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:g,ssl:o,emulatorOptions:a};if(!Ti(x,h)&&(s._setSettings(x),a.mockUserToken)){let b,_;if(typeof a.mockUserToken=="string")b=a.mockUserToken,_=Wn.MOCK_USER;else{b=d1(a.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new Ce(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Wn(N)}s._authCredentials=new s4(new T1(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class rn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Du(t,rn._jsonSchema))return new rn(e,a||null,new Be(Ft.fromString(t.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:Nn("string",rn._jsonSchemaVersion),referencePath:Nn("string")};class Ni extends Mi{constructor(e,t,a){super(e,t,yf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Be(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function It(s,e,...t){if(s=St(s),E1("collection","path",e),s instanceof Cf){const a=Ft.fromString(e,...t);return uw(a),new Ni(s,null,a)}{if(!(s instanceof rn||s instanceof Ni))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ft.fromString(e,...t));return uw(a),new Ni(s.firestore,null,a)}}function He(s,e,...t){if(s=St(s),arguments.length===1&&(e=r0.newId()),E1("doc","path",e),s instanceof Cf){const a=Ft.fromString(e,...t);return cw(a),new rn(s,null,new Be(a))}{if(!(s instanceof rn||s instanceof Ni))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ft.fromString(e,...t));return cw(a),new rn(s.firestore,s instanceof Ni?s.converter:null,new Be(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="AsyncQueue";class Zw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xN(this,"async_queue_retry"),this._c=()=>{const a=Qg();a&&ke(Jw,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Qg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;ke(Jw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Da("INTERNAL UNHANDLED ERROR: ",e_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=_0.createAndSchedule(this,e,t,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Xe(47125,{Pc:e_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function e_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(s){return(function(t,a){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Jr extends Cf{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new Zw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zw(e),this._firestoreClient=void 0,await e}}}function JI(s,e){const t=typeof s=="object"?s:ff(),a=typeof s=="string"?s:Hd,o=ku(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Zp("firestore");u&&WI(o,...u)}return o}function Pu(s){if(s._terminated)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ZI(s),s._firestoreClient}function ZI(s){var a,o,u;const e=s._freezeSettings(),t=(function(g,x,p,b){return new N4(g,x,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ON(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new $I(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(g){const x=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(x),_online:x}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Gn.fromBase64String(e))}catch(t){throw new Ce(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zs(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,Zs._jsonSchema))return Zs.fromBase64String(e.bytes)}}Zs._jsonSchemaVersion="firestore/bytes/1.0",Zs._jsonSchema={type:Nn("string",Zs._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kr._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Kr._jsonSchema))return new Kr(e.latitude,e.longitude)}}Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:Nn("string",Kr._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,Yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yr(e.vectorValues);throw new Ce(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yr._jsonSchemaVersion="firestore/vectorValue/1.0",Yr._jsonSchema={type:Nn("string",Yr._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=/^__.*__$/;class tk{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class VN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:s})}}class Af{constructor(e,t,a,o,u,h){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Af({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LN(this.Ac)&&ek.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nk{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Ef(e)}Cc(e,t,a,o=!1){return new Af({Ac:e,methodName:t,Dc:a,path:qn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(s){const e=s._freezeSettings(),t=Ef(s._databaseId);return new nk(s._databaseId,!!e.ignoreUndefinedProperties,t)}function I0(s,e,t,a,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);O0("Data must be an object, but it was:",h,a);const g=zN(a,h);let x,p;if(u.merge)x=new Ms(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const _ of u.mergeFields){const N=kp(e,_,t);if(!h.contains(N))throw new Ce(ue.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);HN(b,N)||b.push(N)}x=new Ms(b),p=h.fieldTransforms.filter((_=>x.covers(_.field)))}else x=null,p=h.fieldTransforms;return new tk(new Ts(g),x,p)}class Hu extends zu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}function sk(s,e,t){return new Af({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class k0 extends zu{_toFieldTransform(e){return new eN(e.path,new Nu)}isEqual(e){return e instanceof k0}}class D0 extends zu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=sk(this,e,!0),a=this.vc.map((u=>Yo(u,t))),o=new Mo(a);return new eN(e.path,o)}isEqual(e){return e instanceof D0&&Ti(this.vc,e.vc)}}function PN(s,e,t,a){const o=s.Cc(1,e,t);O0("Data must be an object, but it was:",o,a);const u=[],h=Ts.empty();Di(a,((x,p)=>{const b=M0(e,x,t);p=St(p);const _=o.yc(b);if(p instanceof Hu)u.push(b);else{const N=Yo(p,_);N!=null&&(u.push(b),h.set(b,N))}}));const g=new Ms(u);return new VN(h,g,o.fieldTransforms)}function UN(s,e,t,a,o,u){const h=s.Cc(1,e,t),g=[kp(e,a,t)],x=[o];if(u.length%2!=0)throw new Ce(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(kp(e,u[N])),x.push(u[N+1]);const p=[],b=Ts.empty();for(let N=g.length-1;N>=0;--N)if(!HN(p,g[N])){const I=g[N];let U=x[N];U=St(U);const $=h.yc(I);if(U instanceof Hu)p.push(I);else{const z=Yo(U,$);z!=null&&(p.push(I),b.set(I,z))}}const _=new Ms(p);return new VN(b,_,h.fieldTransforms)}function rk(s,e,t,a=!1){return Yo(t,s.Cc(a?4:3,e))}function Yo(s,e){if(BN(s=St(s)))return O0("Unsupported field value:",e,s),zN(s,e);if(s instanceof zu)return(function(a,o){if(!LN(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let x=Yo(g,o.wc(h));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=St(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return $4(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Qt.fromDate(a);return{timestampValue:$d(o.serializer,u)}}if(a instanceof Qt){const u=new Qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:$d(o.serializer,u)}}if(a instanceof Kr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Zs)return{bytesValue:iN(o.serializer,a._byteString)};if(a instanceof rn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:f0(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Yr)return(function(h,g){return{mapValue:{fields:{[O1]:{stringValue:M1},[Fd]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return u0(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${mf(a)}`)})(s,e)}function zN(s,e){const t={};return C1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(s,((a,o)=>{const u=Yo(o,e.mc(a));u!=null&&(t[a]=u)})),{mapValue:{fields:t}}}function BN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qt||s instanceof Kr||s instanceof Zs||s instanceof rn||s instanceof zu||s instanceof Yr)}function O0(s,e,t){if(!BN(t)||!j1(t)){const a=mf(t);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function kp(s,e,t){if((e=St(e))instanceof Uu)return e._internalPath;if(typeof e=="string")return M0(s,e);throw Wd("Field path arguments must be of type string or ",s,!1,void 0,t)}const ak=new RegExp("[~\\*/\\[\\]]");function M0(s,e,t){if(e.search(ak)>=0)throw Wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Uu(...e.split("."))._internalPath}catch{throw Wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Wd(s,e,t,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let x="";return(u||h)&&(x+=" (found",u&&(x+=` in field ${a}`),h&&(x+=` in document ${o}`),x+=")"),new Ce(ue.INVALID_ARGUMENT,g+s+x)}function HN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t,a,o,u){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ik extends FN{data(){return super.data()}}function Rf(s,e){return typeof e=="string"?M0(s,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ce(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V0{}class GN extends V0{}function Sn(s,e,...t){let a=[];e instanceof V0&&a.push(e),a=a.concat(t),(function(u){const h=u.filter((x=>x instanceof L0)).length,g=u.filter((x=>x instanceof If)).length;if(h>1||h>0&&g>0)throw new Ce(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class If extends GN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new If(e,t,a)}_apply(e){const t=this._parse(e);return $N(e._query,t),new Mi(e.firestore,e.converter,wp(e._query,t))}_parse(e){const t=Bu(e.firestore);return(function(u,h,g,x,p,b,_){let N;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){s_(_,b);const U=[];for(const $ of _)U.push(n_(x,u,$));N={arrayValue:{values:U}}}else N=n_(x,u,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||s_(_,b),N=rk(g,h,_,b==="in"||b==="not-in");return _n.create(p,b,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ar(s,e,t){const a=e,o=Rf("where",s);return If._create(o,a,t)}class L0 extends V0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L0(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const x of g)$N(h,x),h=wp(h,x)})(e._query,t),new Mi(e.firestore,e.converter,wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P0 extends GN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new P0(e,t)}_apply(e){const t=(function(o,u,h){if(o.startAt!==null)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,h)})(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new $o(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Qo(s,e="asc"){const t=e,a=Rf("orderBy",s);return P0._create(a,t)}function n_(s,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F1(e)&&t.indexOf("/")!==-1)throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ft.fromString(t));if(!Be.isDocumentKey(a))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return yw(s,new Be(a))}if(t instanceof rn)return yw(s,t._key);throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(t)}.`)}function s_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $N(s,e){const t=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lk{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Di(e,((o,u)=>{a[o]=this.convertValue(u,t)})),a}convertVectorValue(e){var a,o,u;const t=(u=(o=(a=e.fields)==null?void 0:a[Fd].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>dn(h.doubleValue)));return new Yr(t)}convertGeoPoint(e){return new Kr(dn(e.latitude),dn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=xf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const t=Si(e);return new Qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ft.fromString(e);jt(dN(a),9688,{name:e});const o=new vu(a.get(1),a.get(3)),u=new Be(a.popFirst(5));return o.isEqual(t)||Da(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dl extends FN{constructor(e,t,a,o,u,h){super(e,t,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Rf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=dl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}dl._jsonSchemaVersion="firestore/documentSnapshot/1.0",dl._jsonSchema={type:Nn("string",dl._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class Id extends dl{data(e={}){return super.data(e)}}class fl{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nu(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Id(this._firestore,this._userDataWriter,a.key,a,new nu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const x=new Id(o._firestore,o._userDataWriter,g.doc.key,g.doc,new nu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:x,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const x=new Id(o._firestore,o._userDataWriter,g.doc.key,g.doc,new nu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:ok(g.type),doc:x,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=r0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ok(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(s){s=cs(s,rn);const e=cs(s.firestore,Jr);return QI(Pu(e),s._key).then((t=>KN(e,s,t)))}fl._jsonSchemaVersion="firestore/querySnapshot/1.0",fl._jsonSchema={type:Nn("string",fl._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class z0 extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}function vr(s){s=cs(s,Mi);const e=cs(s.firestore,Jr),t=Pu(e),a=new z0(e);return qN(s._query),XI(t,s._query).then((o=>new fl(e,a,s,o)))}function _o(s,e,t){s=cs(s,rn);const a=cs(s.firestore,Jr),o=U0(s.converter,e,t);return Fu(a,[I0(Bu(a),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,us.none())])}function Ht(s,e,t,...a){s=cs(s,rn);const o=cs(s.firestore,Jr),u=Bu(o);let h;return h=typeof(e=St(e))=="string"||e instanceof Uu?UN(u,"updateDoc",s._key,e,t,a):PN(u,"updateDoc",s._key,e),Fu(o,[h.toMutation(s._key,us.exists(!0))])}function jl(s){return Fu(cs(s.firestore,Jr),[new Nf(s._key,us.none())])}function Sl(s,e){const t=cs(s.firestore,Jr),a=He(s),o=U0(s.converter,e);return Fu(t,[I0(Bu(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,us.exists(!1))]).then((()=>a))}function _r(s,...e){var x,p,b;s=St(s);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||t_(e[a])||(t=e[a++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(t_(e[a])){const _=e[a];e[a]=(x=_.next)==null?void 0:x.bind(_),e[a+1]=(p=_.error)==null?void 0:p.bind(_),e[a+2]=(b=_.complete)==null?void 0:b.bind(_)}let u,h,g;if(s instanceof rn)h=cs(s.firestore,Jr),g=yf(s._key.path),u={next:_=>{e[a]&&e[a](KN(h,s,_))},error:e[a+1],complete:e[a+2]};else{const _=cs(s,Mi);h=cs(_.firestore,Jr),g=_._query;const N=new z0(h);u={next:I=>{e[a]&&e[a](new fl(h,N,_,I))},error:e[a+1],complete:e[a+2]},qN(s._query)}return(function(N,I,U,$){const z=new R0($),D=new S0(I,z,U);return N.asyncQueue.enqueueAndForget((async()=>T0(await Xd(N),D))),()=>{z.Nu(),N.asyncQueue.enqueueAndForget((async()=>E0(await Xd(N),D)))}})(Pu(h),g,o,u)}function Fu(s,e){return(function(a,o){const u=new Ca;return a.asyncQueue.enqueueAndForget((async()=>LI(await YI(a),o,u))),u.promise})(Pu(s),e)}function KN(s,e,t){const a=t.docs.get(e._key),o=new z0(s);return new dl(s,o,e._key,a,new nu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,a){this._verifyNotCommitted();const o=Wg(e,this._firestore),u=U0(o.converter,t,a),h=I0(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,a);return this._mutations.push(h.toMutation(o._key,us.none())),this}update(e,t,a,...o){this._verifyNotCommitted();const u=Wg(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Uu?UN(this._dataReader,"WriteBatch.update",u._key,t,a,o):PN(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,us.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wg(e,this._firestore);return this._mutations=this._mutations.concat(new Nf(t._key,us.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wg(s,e){if((s=St(s)).firestore!==e)throw new Ce(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){return new Hu("deleteField")}function Dp(){return new k0("serverTimestamp")}function Po(...s){return new D0("arrayUnion",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(s){return Pu(s=cs(s,Jr)),new ck(s,(e=>Fu(s,e)))}(function(e,t=!0){(function(o){Fo=o})(Nl),Ei(new Ia("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new Jr(new r4(a.getProvider("auth-internal")),new l4(h,a.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ce(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(p.options.projectId,b)})(h,o),h);return u={useFetchStreams:t,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),tr(aw,iw,e),tr(aw,iw,"esm2020")})();function YN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=YN,XN=new Ru("auth","Firebase",YN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new e0("@firebase/auth");function uk(s,...e){Jd.logLevel<=ht.WARN&&Jd.warn(`Auth (${Nl}): ${s}`,...e)}function kd(s,...e){Jd.logLevel<=ht.ERROR&&Jd.error(`Auth (${Nl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(s,...e){throw B0(s,...e)}function Qr(s,...e){return B0(s,...e)}function WN(s,e,t){const a={...QN(),[e]:t};return new Ru("auth","Firebase",a).create(e,{appName:s.name})}function Aa(s){return WN(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B0(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return XN.create(s,...e)}function Qe(s,e,...t){if(!s)throw B0(e,...t)}function Ea(s){const e="INTERNAL ASSERTION FAILED: "+s;throw kd(e),new Error(e)}function Ma(s,e){s||Ea(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function hk(){return r_()==="http:"||r_()==="https:"}function r_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hk()||DA()||"connection"in navigator)?navigator.onLine:!0}function fk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ma(t>e,"Short delay should be less than long delay!"),this.isMobile=RA()||OA()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(s,e){Ma(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pk=new qu(3e4,6e4);function Vi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function La(s,e,t,a,o={}){return ZN(s,o,async()=>{let u={},h={};a&&(e==="GET"?h=a:u={body:JSON.stringify(a)});const g=Iu({key:s.config.apiKey,...h}).slice(1),x=await s._getAdditionalHeaders();x["Content-Type"]="application/json",s.languageCode&&(x["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:x,...u};return kA()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&ta(s.emulatorConfig.host)&&(p.credentials="include"),JN.fetch()(await e2(s,s.config.apiHost,t,g),p)})}async function ZN(s,e,t){s._canInitEmulator=!1;const a={...mk,...e};try{const o=new yk(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw wd(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[x,p]=g.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(s,"credential-already-in-use",h);if(x==="EMAIL_EXISTS")throw wd(s,"email-already-in-use",h);if(x==="USER_DISABLED")throw wd(s,"user-disabled",h);const b=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw WN(s,b,p);Nr(s,b)}}catch(o){if(o instanceof Tr)throw o;Nr(s,"network-request-failed",{message:String(o)})}}async function Gu(s,e,t,a,o={}){const u=await La(s,e,t,a,o);return"mfaPendingCredential"in u&&Nr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function e2(s,e,t,a){const o=`${e}${t}?${a}`,u=s,h=u.config.emulator?H0(s.config,o):`${s.config.apiScheme}://${o}`;return gk.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function xk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Qr(this.auth,"network-request-failed")),pk.get())})}}function wd(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Qr(s,e,a);return o.customData._tokenResponse=t,o}function a_(s){return s!==void 0&&s.enterprise!==void 0}class bk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vk(s,e){return La(s,"GET","/v2/recaptchaConfig",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(s,e){return La(s,"POST","/v1/accounts:delete",e)}async function Zd(s,e){return La(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t2(s,e=!1){const t=St(s),a=await t.getIdToken(e),o=F0(a);Qe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:fu(Zg(o.auth_time)),issuedAtTime:fu(Zg(o.iat)),expirationTime:fu(Zg(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Zg(s){return Number(s)*1e3}function F0(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return kd("JWT malformed, contained fewer than 3 sections"),null;try{const o=o1(t);return o?JSON.parse(o):(kd("Failed to decode base64 JWT payload"),null)}catch(o){return kd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function i_(s){const e=F0(s);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Tr&&_k(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function _k({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(s){var _;const e=s.auth,t=await s.getIdToken(),a=await Uo(s,Zd(e,{idToken:t}));Qe(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=(_=o.providerUserInfo)!=null&&_.length?s2(o.providerUserInfo):[],h=Tk(s.providerData,u),g=s.isAnonymous,x=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),p=g?x:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Mp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function n2(s){const e=St(s);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tk(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function s2(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(s,e){const t=await ZN(s,{},async()=>{const a=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await e2(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:g,body:a};return s.emulatorConfig&&ta(s.emulatorConfig.host)&&(x.credentials="include"),JN.fetch()(h,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jk(s,e){return La(s,"POST","/v2/accounts:revokeToken",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=i_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:u}=await Ek(e,t);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:u}=t,h=new No;return a&&(Qe(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),o&&(Qe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Qe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Ea("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(s,e){Qe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new Nk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return t2(this,e)}reload(){return n2(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await ef(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ns(this.auth.app))return Promise.reject(Aa(this.auth));const e=await this.getIdToken();return await Uo(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,g=t.tenantId??void 0,x=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:N,isAnonymous:I,providerData:U,stsTokenManager:$}=t;Qe(_&&$,e,"internal-error");const z=No.fromJSON(this.name,$);Qe(typeof _=="string",e,"internal-error"),gi(a,e.name),gi(o,e.name),Qe(typeof N=="boolean",e,"internal-error"),Qe(typeof I=="boolean",e,"internal-error"),gi(u,e.name),gi(h,e.name),gi(g,e.name),gi(x,e.name),gi(p,e.name),gi(b,e.name);const D=new yr({uid:_,auth:e,email:o,emailVerified:N,displayName:a,isAnonymous:I,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:z,createdAt:p,lastLoginAt:b});return U&&Array.isArray(U)&&(D.providerData=U.map(Z=>({...Z}))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,a=!1){const o=new No;o.updateFromServerResponse(t);const u=new yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await ef(u),u}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];Qe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?s2(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new No;g.updateFromIdToken(a);const x=new yr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function ja(s){Ma(s instanceof Function,"Expected a class definition");let e=l_.get(s);return e?(Ma(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,l_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}r2.type="NONE";const Vp=r2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(s,e,t){return`firebase:${s}:${e}:${t}`}class To{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Dd(this.userKey,o.apiKey,u),this.fullPersistenceKey=Dd("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zd(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new To(ja(Vp),e,a);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||ja(Vp);const h=Dd(a,e.config.apiKey,e.name);let g=null;for(const p of t)try{const b=await p._get(h);if(b){let _;if(typeof b=="string"){const N=await Zd(e,{idToken:b}).catch(()=>{});if(!N)break;_=await yr._fromGetAccountInfoResponse(e,N,b)}else _=yr._fromJSON(e,b);p!==u&&(g=_),u=p;break}}catch{}const x=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new To(u,e,a):(u=x[0],g&&await u._set(h,g.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new To(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u2(e))return"Blackberry";if(h2(e))return"Webos";if(i2(e))return"Safari";if((e.includes("chrome/")||l2(e))&&!e.includes("edge/"))return"Chrome";if(c2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function a2(s=es()){return/firefox\//i.test(s)}function i2(s=es()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l2(s=es()){return/crios\//i.test(s)}function o2(s=es()){return/iemobile/i.test(s)}function c2(s=es()){return/android/i.test(s)}function u2(s=es()){return/blackberry/i.test(s)}function h2(s=es()){return/webos/i.test(s)}function q0(s=es()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Sk(s=es()){var e;return q0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function Ck(){return MA()&&document.documentMode===10}function d2(s=es()){return q0(s)||c2(s)||h2(s)||u2(s)||/windows phone/i.test(s)||o2(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(s,e=[]){let t;switch(s){case"Browser":t=o_(es());break;case"Worker":t=`${o_(es())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=u=>new Promise((h,g)=>{try{const x=e(u);h(x)}catch(x){g(x)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(s,e={}){return La(s,"GET","/v2/passwordPolicy",Vi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=6;class kk{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ik,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new Ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ja(t)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zd(this,{idToken:e}),a=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Ns(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,x=await this.tryRedirectSignIn(e);(!h||h===g)&&(x!=null&&x.user)&&(a=x.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(h){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ns(this.app))return Promise.reject(Aa(this));const t=e?St(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ns(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ns(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ja(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rk(this),t=new kk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await jk(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ja(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[ja(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,a,o);return()=>{h=!0,x()}}else{const x=e.addObserver(t);return()=>{h=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(Ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&uk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Cl(s){return St(s)}class c_{constructor(e){this.auth=e,this.observer=null,this.addObserver=FA(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(s){kf=s}function m2(s){return kf.loadJS(s)}function Mk(){return kf.recaptchaEnterpriseScript}function Vk(){return kf.gapiScript}function Lk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Pk{constructor(){this.enterprise=new Uk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Uk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zk="recaptcha-enterprise",g2="NO_RECAPTCHA";class Bk{constructor(e){this.type=zk,this.auth=Cl(e)}async verify(e="verify",t=!1){async function a(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{vk(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new bk(x);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,h(p.siteKey)}}).catch(x=>{g(x)})})}function o(u,h,g){const x=window.grecaptcha;a_(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(p=>{h(p)}).catch(()=>{h(g2)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pk().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{a(this.auth).then(g=>{if(!t&&a_(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let x=Mk();x.length!==0&&(x+=g),m2(x).then(()=>{o(g,u,h)}).catch(p=>{h(p)})}}).catch(g=>{h(g)})})}}async function u_(s,e,t,a=!1,o=!1){const u=new Bk(s);let h;if(o)h=g2;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const x=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const x=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Lp(s,e,t,a,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await u_(s,e,t,t==="getOobCode");return a(s,h)}else return a(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await u_(s,e,t,t==="getOobCode");return a(s,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(s,e){const t=ku(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Ti(u,e??{}))return o;Nr(o,"already-initialized")}return t.initialize({options:e})}function Hk(s,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ja);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function x2(s,e,t){const a=Cl(s);Qe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=y2(e),{host:h,port:g}=Fk(e),x=g===null?"":`:${g}`,p={url:`${u}//${h}${x}/`},b=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Qe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Qe(Ti(p,a.config.emulator)&&Ti(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,ta(h)?(hf(`${u}//${h}${x}`),df("Auth",!0)):qk()}function y2(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Fk(s){const e=y2(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:h_(a.substr(u.length+1))}}else{const[u,h]=a.split(":");return{host:u,port:h_(h)}}}function h_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function qk(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ea("not implemented")}_getIdTokenResponse(e){return Ea("not implemented")}_linkToIdToken(e,t){return Ea("not implemented")}_getReauthenticationResolver(e){return Ea("not implemented")}}async function Gk(s,e){return La(s,"POST","/v1/accounts:update",e)}async function $k(s,e){return La(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(s,e){return Gu(s,"POST","/v1/accounts:signInWithPassword",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(s,e){return Gu(s,"POST","/v1/accounts:signInWithEmailLink",Vi(s,e))}async function Qk(s,e){return Gu(s,"POST","/v1/accounts:signInWithEmailLink",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Df{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new zo(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new zo(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,t,"signInWithPassword",Kk);case"emailLink":return Yk(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,a,"signUpPassword",$k);case"emailLink":return Qk(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(s,e){return Gu(s,"POST","/v1/accounts:signInWithIdp",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="http://localhost";class ki extends Df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=t;if(!a||!o)return null;const h=new ki(a,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Eo(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:Xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jk(s){const e=Wc(Jc(s)).link,t=e?Wc(Jc(e)).deep_link_id:null,a=Wc(Jc(s)).deep_link_id;return(a?Wc(Jc(a)).link:null)||a||t||e||s}class Of{constructor(e){const t=Wc(Jc(e)),a=t.apiKey??null,o=t.oobCode??null,u=Wk(t.mode??null);Qe(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Jk(e);try{return new Of(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.providerId=Li.PROVIDER_ID}static credential(e,t){return zo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Of.parseLink(t);return Qe(a,"argument-error"),zo._fromEmailAndCode(e,a.code,a.tenantId)}}Li.PROVIDER_ID="password";Li.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends b2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends $u{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ki._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return _a.credential(t,a)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends $u{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Na.credential(e.oauthAccessToken)}catch{return null}}}Na.GITHUB_SIGN_IN_METHOD="github.com";Na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends $u{constructor(){super("twitter.com")}static credential(e,t){return ki._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Ta.credential(t,a)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(s,e){return Gu(s,"POST","/v1/accounts:signUp",Vi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const u=await yr._fromIdTokenResponse(e,a,o),h=d_(a);return new bl({user:u,providerId:h,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=d_(a);return new bl({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function d_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Tr{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new tf(e,t,a,o)}}function v2(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(s,u,e,a):u})}async function e6(s,e,t=!1){const a=await Uo(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return bl._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(s,e,t=!1){const{auth:a}=s;if(Ns(a.app))return Promise.reject(Aa(a));const o="reauthenticate";try{const u=await Uo(s,v2(a,o,e,s),t);Qe(u.idToken,a,"internal-error");const h=F0(u.idToken);Qe(h,a,"internal-error");const{sub:g}=h;return Qe(s.uid===g,a,"user-mismatch"),bl._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Nr(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(s,e,t=!1){if(Ns(s.app))return Promise.reject(Aa(s));const a="signIn",o=await v2(s,a,e),u=await bl._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(u.user),u}async function N2(s,e){return _2(Cl(s),e)}async function T2(s,e){return w2(St(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(s){const e=Cl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j2(s,e,t){if(Ns(s.app))return Promise.reject(Aa(s));const a=Cl(s),h=await Lp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zk).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&E2(s),x}),g=await bl._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function S2(s,e,t){return Ns(s.app)?Promise.reject(Aa(s)):N2(St(s),Li.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&E2(s),a})}function C2(s,e){return t6(St(s),null,e)}async function t6(s,e,t){const{auth:a}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(u.password=t);const h=await Uo(s,Gk(a,u));await s._updateTokensIfNecessary(h,!0)}function A2(s,e,t,a){return St(s).onIdTokenChanged(e,t,a)}function R2(s,e,t){return St(s).beforeAuthStateChanged(e,t)}function I2(s,e,t,a){return St(s).onAuthStateChanged(e,t,a)}function k2(s){return St(s).signOut()}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=1e3,s6=10;class O2 extends D2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,x)=>{this.notifyListeners(h,x)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(a);!t&&this.localCache[a]===h||this.notifyListeners(a,h)},u=this.storage.getItem(a);Ck()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,s6):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},n6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O2.type="LOCAL";const M2=O2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2 extends D2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}V2.type="SESSION";const G0=V2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new Mf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(h).map(async p=>p(t.origin,u)),x=await r6(g);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,x)=>{const p=$0("",20);o.port1.start();const b=setTimeout(()=>{x(new Error("unsupported_event"))},a);h={messageChannel:o,onMessage(_){const N=_;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(b),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function i6(s){Xr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function l6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o6(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function c6(){return L2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="firebaseLocalStorageDb",u6=1,sf="firebaseLocalStorage",U2="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vf(s,e){return s.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function h6(){const s=indexedDB.deleteDatabase(P2);return new Ku(s).toPromise()}function Pp(){const s=indexedDB.open(P2,u6);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(sf,{keyPath:U2})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(sf)?e(a):(a.close(),await h6(),e(await Pp()))})})}async function f_(s,e,t){const a=Vf(s,!0).put({[U2]:e,value:t});return new Ku(a).toPromise()}async function d6(s,e){const t=Vf(s,!1).get(e),a=await new Ku(t).toPromise();return a===void 0?null:a.value}function m_(s,e){const t=Vf(s,!0).delete(e);return new Ku(t).toPromise()}const f6=800,m6=3;class z2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>m6)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(c6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await l6(),!this.activeServiceWorker)return;this.sender=new a6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await f_(e,nf,"1"),await m_(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>f_(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>d6(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Vf(o,!1).getAll();return new Ku(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z2.type="LOCAL";const B2=z2;new qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(s,e){return e?ja(e):(Qe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends Df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p6(s){return _2(s.auth,new K0(s),s.bypassAuthState)}function x6(s){const{auth:e,user:t}=s;return Qe(t,e,"internal-error"),w2(t,new K0(s),s.bypassAuthState)}async function y6(s){const{auth:e,user:t}=s;return Qe(t,e,"internal-error"),e6(t,new K0(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,t,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const x={auth:this.auth,requestUri:t,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(x))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p6;case"linkViaPopup":case"linkViaRedirect":return y6;case"reauthViaPopup":case"reauthViaRedirect":return x6;default:Nr(this.auth,"internal-error")}}resolve(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new qu(2e3,1e4);class vo extends H2{constructor(e,t,a,o,u){super(e,t,o,u),this.provider=a,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Ma(this.filter.length===1,"Popup operations only handle one event");const e=$0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b6.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="pendingRedirect",Od=new Map;class w6 extends H2{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const a=await _6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _6(s,e){const t=E6(e),a=T6(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function N6(s,e){Od.set(s._key(),e)}function T6(s){return ja(s._redirectPersistence)}function E6(s){return Dd(v6,s.config.apiKey,s.name)}async function j6(s,e,t=!1){if(Ns(s.app))return Promise.reject(Aa(s));const a=Cl(s),o=g6(a,e),h=await new w6(a,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=600*1e3;class C6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!F2(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Qr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S6&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(e))}saveEventToCache(e){this.cachedEventUids.add(g_(e)),this.lastProcessedEventTime=Date.now()}}function g_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function F2({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(s,e={}){return La(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k6=/^https?/;async function D6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await R6(s);for(const t of e)try{if(O6(t))return}catch{}Nr(s,"unauthorized-domain")}function O6(s){const e=Op(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===a}if(!k6.test(t))return!1;if(I6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new qu(3e4,6e4);function p_(){const s=Xr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function V6(s){return new Promise((e,t)=>{var o,u,h;function a(){p_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p_(),t(Qr(s,"network-request-failed"))},timeout:M6.get()})}if((u=(o=Xr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=Xr().gapi)!=null&&h.load)a();else{const g=Lk("iframefcb");return Xr()[g]=()=>{gapi.load?a():t(Qr(s,"network-request-failed"))},m2(`${Vk()}?onload=${g}`).catch(x=>t(x))}}).catch(e=>{throw Md=null,e})}let Md=null;function L6(s){return Md=Md||V6(s),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new qu(5e3,15e3),U6="__/auth/iframe",z6="emulator/auth/iframe",B6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F6(s){const e=s.config;Qe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?H0(e,z6):`https://${s.config.authDomain}/${U6}`,a={apiKey:e.apiKey,appName:s.name,v:Nl},o=H6.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${t}?${Iu(a).slice(1)}`}async function q6(s){const e=await L6(s),t=Xr().gapi;return Qe(t,s,"internal-error"),e.open({where:document.body,url:F6(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B6,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const h=Qr(s,"network-request-failed"),g=Xr().setTimeout(()=>{u(h)},P6.get());function x(){Xr().clearTimeout(g),o(a)}a.ping(x).then(x,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$6=500,K6=600,Y6="_blank",Q6="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X6(s,e,t,a=$6,o=K6){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const x={...G6,width:a.toString(),height:o.toString(),top:u,left:h},p=es().toLowerCase();t&&(g=l2(p)?Y6:t),a2(p)&&(e=e||Q6,x.scrollbars="yes");const b=Object.entries(x).reduce((N,[I,U])=>`${N}${I}=${U},`,"");if(Sk(p)&&g!=="_self")return W6(e||"",g),new x_(null);const _=window.open(e||"",g,b);Qe(_,s,"popup-blocked");try{_.focus()}catch{}return new x_(_)}function W6(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="__/auth/handler",Z6="emulator/auth/handler",e3=encodeURIComponent("fac");async function y_(s,e,t,a,o,u){Qe(s.config.authDomain,s,"auth-domain-config-required"),Qe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:Nl,eventId:o};if(e instanceof b2){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",HA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))h[b]=_}if(e instanceof $u){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const x=await s._getAppCheckToken(),p=x?`#${e3}=${encodeURIComponent(x)}`:"";return`${t3(s)}?${Iu(g).slice(1)}${p}`}function t3({config:s}){return s.emulator?H0(s,Z6):`https://${s.authDomain}/${J6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class n3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G0,this._completeRedirectFn=j6,this._overrideRedirectResult=N6}async _openPopup(e,t,a,o){var h;Ma((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await y_(e,t,a,Op(),o);return X6(e,u,$0())}async _openRedirect(e,t,a,o){await this._originValidation(e);const u=await y_(e,t,a,Op(),o);return i6(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Ma(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await q6(e),a=new C6(e);return t.register("authEvent",o=>(Qe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ep,{type:ep},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[ep];u!==void 0&&t(!!u),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=D6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d2()||i2()||q0()}}const q2=n3;var b_="@firebase/auth",v_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a3(s){Ei(new Ia("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;Qe(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f2(s)},p=new Dk(a,o,u,x);return Hk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ei(new Ia("auth-internal",e=>{const t=Cl(e.getProvider("auth").getImmediate());return(a=>new s3(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(b_,v_,r3(s)),tr(b_,v_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=300,l3=h1("authIdTokenMaxAge")||i3;let w_=null;const o3=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>l3)return;const o=t==null?void 0:t.token;w_!==o&&(w_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Eu(s=ff()){const e=ku(s,"auth");if(e.isInitialized())return e.getImmediate();const t=p2(s,{popupRedirectResolver:q2,persistence:[B2,M2,G0]}),a=h1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const h=o3(u.toString());R2(t,h,()=>h(t.currentUser)),A2(t,g=>h(g))}}const o=c1("auth");return o&&x2(t,`http://${o}`),t}function c3(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}Ok({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=Qr("internal-error");u.customData=o,t(u)},a.type="text/javascript",a.charset="UTF-8",c3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a3("Browser");const u3=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Of,AuthCredential:Df,EmailAuthCredential:zo,EmailAuthProvider:Li,FacebookAuthProvider:wa,GithubAuthProvider:Na,GoogleAuthProvider:_a,OAuthCredential:ki,TwitterAuthProvider:Ta,beforeAuthStateChanged:R2,browserLocalPersistence:M2,browserPopupRedirectResolver:q2,browserSessionPersistence:G0,connectAuthEmulator:x2,createUserWithEmailAndPassword:j2,getAuth:Eu,getIdTokenResult:t2,inMemoryPersistence:Vp,indexedDBLocalPersistence:B2,initializeAuth:p2,onAuthStateChanged:I2,onIdTokenChanged:A2,prodErrorMap:QN,reauthenticateWithCredential:T2,reload:n2,signInWithCredential:N2,signInWithEmailAndPassword:S2,signOut:k2,updatePassword:C2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="type.googleapis.com/google.protobuf.Int64Value",d3="type.googleapis.com/google.protobuf.UInt64Value";function G2(s,e){const t={};for(const a in s)s.hasOwnProperty(a)&&(t[a]=e(s[a]));return t}function rf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>rf(e));if(typeof s=="function"||typeof s=="object")return G2(s,e=>rf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Bo(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case h3:case d3:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Bo(e)):typeof s=="function"||typeof s=="object"?G2(s,e=>Bo(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class os extends Tr{constructor(e,t,a){super(`${Y0}/${e}`,t||""),this.details=a,Object.setPrototypeOf(this,os.prototype)}}function f3(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function af(s,e){let t=f3(s),a=t,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!__[h])return new os("internal","internal");t=__[h],a=h}const g=u.message;typeof g=="string"&&(a=g),o=u.details,o!==void 0&&(o=Bo(o))}}catch{}return t==="ok"?null:new os(t,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,t,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ns(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||t.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o==null||o.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="us-central1",g3=/^data: (.*?)(?:\n|$)/;function p3(s){let e=null;return{promise:new Promise((t,a)=>{e=setTimeout(()=>{a(new os("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class x3{constructor(e,t,a,o,u=Up,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new m3(e,t,a,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Up}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function y3(s,e,t){const a=ta(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${t}`,a&&(hf(s.emulatorOrigin+"/backends"),df("Functions",!0))}function b3(s,e,t){const a=o=>w3(s,e,o,t||{});return a.stream=(o,u)=>N3(s,e,o,u),a}function $2(s){return s.emulatorOrigin&&ta(s.emulatorOrigin)?"include":void 0}async function v3(s,e,t,a,o){t["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:$2(o)})}catch{return{status:0,json:null}}let h=null;try{h=await u.json()}catch{}return{status:u.status,json:h}}async function K2(s,e){const t={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(t.Authorization="Bearer "+a.authToken),a.messagingToken&&(t["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=a.appCheckToken),t}function w3(s,e,t,a){const o=s._url(e);return _3(s,o,t,a)}async function _3(s,e,t,a){t=rf(t);const o={data:t},u=await K2(s,a),h=a.timeout||7e4,g=p3(h),x=await Promise.race([v3(e,o,u,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!x)throw new os("cancelled","Firebase Functions instance was deleted.");const p=af(x.status,x.json);if(p)throw p;if(!x.json)throw new os("internal","Response is not valid JSON object.");let b=x.json.data;if(typeof b>"u"&&(b=x.json.result),typeof b>"u")throw new os("internal","Response is missing data field.");return{data:Bo(b)}}function N3(s,e,t,a){const o=s._url(e);return T3(s,o,t,a||{})}async function T3(s,e,t,a){var N;t=rf(t);const o={data:t},u=await K2(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:a==null?void 0:a.signal,credentials:$2(s)})}catch(I){if(I instanceof Error&&I.name==="AbortError"){const $=new os("cancelled","Request was cancelled.");return{data:Promise.reject($),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject($)}}}}}}const U=af(0,null);return{data:Promise.reject(U),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(U)}}}}}}let g,x;const p=new Promise((I,U)=>{g=I,x=U});(N=a==null?void 0:a.signal)==null||N.addEventListener("abort",()=>{const I=new os("cancelled","Request was cancelled.");x(I)});const b=h.body.getReader(),_=E3(b,g,x,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const I=_.getReader();return{async next(){const{value:U,done:$}=await I.read();return{value:U,done:$}},async return(){return await I.cancel(),{done:!0,value:void 0}}}}},data:p}}function E3(s,e,t,a){const o=(h,g)=>{const x=h.match(g3);if(!x)return;const p=x[1];try{const b=JSON.parse(p);if("result"in b){e(Bo(b.result));return}if("message"in b){g.enqueue(Bo(b.message));return}if("error"in b){const _=af(0,b);g.error(_),t(_);return}}catch(b){if(b instanceof os){g.error(b),t(b);return}}},u=new TextDecoder;return new ReadableStream({start(h){let g="";return x();async function x(){if(a!=null&&a.aborted){const p=new os("cancelled","Request was cancelled");return h.error(p),t(p),Promise.resolve()}try{const{value:p,done:b}=await s.read();if(b){g.trim()&&o(g.trim(),h),h.close();return}if(a!=null&&a.aborted){const N=new os("cancelled","Request was cancelled");h.error(N),t(N),await s.cancel();return}g+=u.decode(p,{stream:!0});const _=g.split(`
`);g=_.pop()||"";for(const N of _)N.trim()&&o(N.trim(),h);return x()}catch(p){const b=p instanceof os?p:af(0,null);h.error(b),t(b)}}},cancel(){return s.cancel()}})}const N_="@firebase/functions",T_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="auth-internal",S3="app-check-internal",C3="messaging-internal";function A3(s){const e=(t,{instanceIdentifier:a})=>{const o=t.getProvider("app").getImmediate(),u=t.getProvider(j3),h=t.getProvider(C3),g=t.getProvider(S3);return new x3(o,u,h,g,a)};Ei(new Ia(Y0,e,"PUBLIC").setMultipleInstances(!0)),tr(N_,T_,s),tr(N_,T_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(s=ff(),e=Up){const a=ku(St(s),Y0).getImmediate({identifier:e}),o=Zp("functions");return o&&Q2(a,...o),a}function Q2(s,e,t){y3(St(s),e,t)}function R3(s,e,t){return b3(St(s),e,t)}A3();const X2=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:os,connectFunctionsEmulator:Q2,getFunctions:Y2,httpsCallable:R3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="firebasestorage.googleapis.com",J2="storageBucket",I3=120*1e3,k3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends Tr{constructor(e,t,a=0){super(tp(e),`Firebase Storage: ${t} (${tp(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var an;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(an||(an={}));function tp(s){return"storage/"+s}function Q0(){const s="An unknown error occurred, please check the error payload for server response.";return new ln(an.UNKNOWN,s)}function D3(s){return new ln(an.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function O3(s){return new ln(an.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function M3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ln(an.UNAUTHENTICATED,s)}function V3(){return new ln(an.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function L3(s){return new ln(an.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function P3(){return new ln(an.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U3(){return new ln(an.CANCELED,"User canceled the upload/download.")}function z3(s){return new ln(an.INVALID_URL,"Invalid URL '"+s+"'.")}function B3(s){return new ln(an.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function H3(){return new ln(an.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+J2+"' property when initializing the app?")}function F3(){return new ln(an.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function q3(){return new ln(an.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G3(s){return new ln(an.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zp(s){return new ln(an.INVALID_ARGUMENT,s)}function Z2(){return new ln(an.APP_DELETED,"The Firebase app was deleted.")}function $3(s){return new ln(an.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mu(s,e){return new ln(an.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Xc(s){throw new ln(an.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=Vs.makeFromUrl(e,t)}catch{return new Vs(e,"")}if(a.path==="")return a;throw B3(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+o+h,"i"),x={bucket:1,path:3};function p(ae){ae.path_=decodeURIComponent(ae.path)}const b="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${b}/b/${o}/o${N}`,"i"),U={bucket:1,path:3},$=t===W2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",D=new RegExp(`^https?://${$}/${o}/${z}`,"i"),Q=[{regex:g,indices:x,postModify:u},{regex:I,indices:U,postModify:p},{regex:D,indices:{bucket:1,path:2},postModify:p}];for(let ae=0;ae<Q.length;ae++){const me=Q[ae],ye=me.regex.exec(e);if(ye){const S=ye[me.indices.bucket];let j=ye[me.indices.path];j||(j=""),a=new Vs(S,j),me.postModify(a);break}}if(a==null)throw z3(e);return a}}class K3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(s,e,t){let a=1,o=null,u=null,h=!1,g=0;function x(){return g===2}let p=!1;function b(...z){p||(p=!0,e.apply(null,z))}function _(z){o=setTimeout(()=>{o=null,s(I,x())},z)}function N(){u&&clearTimeout(u)}function I(z,...D){if(p){N();return}if(z){N(),b.call(null,z,...D);return}if(x()||h){N(),b.call(null,z,...D);return}a<64&&(a*=2);let Q;g===1?(g=2,Q=0):Q=(a+Math.random())*1e3,_(Q)}let U=!1;function $(z){U||(U=!0,N(),!p&&(o!==null?(z||(g=2),clearTimeout(o),_(0)):z||(g=1)))}return _(0),u=setTimeout(()=>{h=!0,$(!0)},t),$}function Q3(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(s){return s!==void 0}function W3(s){return typeof s=="object"&&!Array.isArray(s)}function X0(s){return typeof s=="string"||s instanceof String}function E_(s){return W0()&&s instanceof Blob}function W0(){return typeof Blob<"u"}function j_(s,e,t,a){if(a<e)throw zp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw zp(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function eT(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var ml;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ml||(ml={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,t,a,o,u,h,g,x,p,b,_,N=!0,I=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=x,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=_,this.retry=N,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,$)=>{this.resolve_=U,this.reject_=$,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new _d(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=g=>{const x=g.loaded,p=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,p)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const g=u.getErrorCode()===ml.NO_ERROR,x=u.getStatus();if(!g||J3(x,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===ml.ABORT;a(!1,new _d(!1,null,b));return}const p=this.successCodes_.indexOf(x)!==-1;a(!0,new _d(p,u))})},t=(a,o)=>{const u=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const x=this.callback_(g,g.getResponse());X3(x)?u(x):u()}catch(x){h(x)}else if(g!==null){const x=Q0();x.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,x)):h(x)}else if(o.canceled){const x=this.appDelete_?Z2():U3();h(x)}else{const x=P3();h(x)}};this.canceled_?t(!1,new _d(!1,null,!0)):this.backoffId_=Y3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Q3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _d{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function eD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function tD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function sD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function rD(s,e,t,a,o,u,h=!0,g=!1){const x=eT(s.urlParams),p=s.url+x,b=Object.assign({},s.headers);return nD(b,e),eD(b,t),tD(b,u),sD(b,a),new Z3(p,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iD(...s){const e=aD();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(W0())return new Blob(s);throw new ln(an.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(s){if(typeof atob>"u")throw G3("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class np{constructor(e,t){this.data=e,this.contentType=t||null}}function cD(s,e){switch(s){case qr.RAW:return new np(tT(e));case qr.BASE64:case qr.BASE64URL:return new np(nT(s,e));case qr.DATA_URL:return new np(hD(e),dD(e))}throw Q0()}function tT(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=a,h=s.charCodeAt(++t);a=65536|(u&1023)<<10|h&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function uD(s){let e;try{e=decodeURIComponent(s)}catch{throw mu(qr.DATA_URL,"Malformed data URL.")}return tT(e)}function nT(s,e){switch(s){case qr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw mu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case qr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw mu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=oD(e)}catch(o){throw o.message.includes("polyfill")?o:mu(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class sT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mu(qr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=fD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function hD(s){const e=new sT(s);return e.base64?nT(qr.BASE64,e.rest):uD(e.rest)}function dD(s){return new sT(s).contentType}function fD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){let a=0,o="";E_(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(E_(this.data_)){const a=this.data_,o=lD(a,e,t);return o===null?null:new xi(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new xi(a,!0)}}static getBlob(...e){if(W0()){const t=e.map(a=>a instanceof xi?a.data_:a);return new xi(iD.apply(null,t))}else{const t=e.map(h=>X0(h)?cD(qr.RAW,h).data:h.data_);let a=0;t.forEach(h=>{a+=h.byteLength});const o=new Uint8Array(a);let u=0;return t.forEach(h=>{for(let g=0;g<h.length;g++)o[u++]=h[g]}),new xi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(s){let e;try{e=JSON.parse(s)}catch{return null}return W3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function gD(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function aT(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(s,e){return e}class is{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||pD}}let Nd=null;function xD(s){return!X0(s)||s.length<2?s:aT(s)}function iT(){if(Nd)return Nd;const s=[];s.push(new is("bucket")),s.push(new is("generation")),s.push(new is("metageneration")),s.push(new is("name","fullPath",!0));function e(u,h){return xD(h)}const t=new is("name");t.xform=e,s.push(t);function a(u,h){return h!==void 0?Number(h):h}const o=new is("size");return o.xform=a,s.push(o),s.push(new is("timeCreated")),s.push(new is("updated")),s.push(new is("md5Hash",null,!0)),s.push(new is("cacheControl",null,!0)),s.push(new is("contentDisposition",null,!0)),s.push(new is("contentEncoding",null,!0)),s.push(new is("contentLanguage",null,!0)),s.push(new is("contentType",null,!0)),s.push(new is("metadata","customMetadata",!0)),Nd=s,Nd}function yD(s,e){function t(){const a=s.bucket,o=s.fullPath,u=new Vs(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function bD(s,e,t){const a={};a.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];a[h.local]=h.xform(a,e[h.server])}return yD(a,s),a}function lT(s,e,t){const a=rT(e);return a===null?null:bD(s,a,t)}function vD(s,e,t,a){const o=rT(e);if(o===null||!X0(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(p=>{const b=s.bucket,_=s.fullPath,N="/b/"+h(b)+"/o/"+h(_),I=J0(N,t,a),U=eT({alt:"media",token:p});return I+U})[0]}function wD(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}class oT{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(s){if(!s)throw Q0()}function _D(s,e){function t(a,o){const u=lT(s,o,e);return cT(u!==null),u}return t}function ND(s,e){function t(a,o){const u=lT(s,o,e);return cT(u!==null),vD(u,o,s.host,s._protocol)}return t}function uT(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=V3():o=M3():t.getStatus()===402?o=O3(s.bucket):t.getStatus()===403?o=L3(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function TD(s){const e=uT(s);function t(a,o){let u=e(a,o);return a.getStatus()===404&&(u=D3(s.path)),u.serverResponse=o.serverResponse,u}return t}function ED(s,e,t){const a=e.fullServerUrl(),o=J0(a,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,g=new oT(o,u,ND(s,t),h);return g.errorHandler=TD(e),g}function jD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function SD(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=jD(null,e)),a}function CD(s,e,t,a,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function g(){let Q="";for(let ae=0;ae<2;ae++)Q=Q+Math.random().toString().slice(2);return Q}const x=g();h["Content-Type"]="multipart/related; boundary="+x;const p=SD(e,a,o),b=wD(p,t),_="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+x+`\r
Content-Type: `+p.contentType+`\r
\r
`,N=`\r
--`+x+"--",I=xi.getBlob(_,a,N);if(I===null)throw F3();const U={name:p.fullPath},$=J0(u,s.host,s._protocol),z="POST",D=s.maxUploadRetryTime,Z=new oT($,z,_D(s,t),D);return Z.urlParams=U,Z.headers=h,Z.body=I.uploadData(),Z.errorHandler=uT(e),Z}class AD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ml.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ml.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ml.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,u){if(this.sent_)throw Xc("cannot .send() more than once");if(ta(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RD extends AD{initXhr(){this.xhr_.responseType="text"}}function hT(){return new RD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t){this._service=e,t instanceof Vs?this._location=t:this._location=Vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vl(e,t)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aT(this._location.path)}get storage(){return this._service}get parent(){const e=mD(this._location.path);if(e===null)return null;const t=new Vs(this._location.bucket,e);return new vl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $3(e)}}function ID(s,e,t){s._throwIfRoot("uploadBytes");const a=CD(s.storage,s._location,iT(),new xi(e,!0),t);return s.storage.makeRequestWithTokens(a,hT).then(o=>({metadata:o,ref:s}))}function kD(s){s._throwIfRoot("getDownloadURL");const e=ED(s.storage,s._location,iT());return s.storage.makeRequestWithTokens(e,hT).then(t=>{if(t===null)throw q3();return t})}function DD(s,e){const t=gD(s._location.path,e),a=new Vs(s._location.bucket,t);return new vl(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(s){return/^[A-Za-z]+:\/\//.test(s)}function MD(s,e){return new vl(s,e)}function dT(s,e){if(s instanceof Z0){const t=s;if(t._bucket==null)throw H3();const a=new vl(t,t._bucket);return e!=null?dT(a,e):a}else return e!==void 0?DD(s,e):s}function VD(s,e){if(e&&OD(e)){if(s instanceof Z0)return MD(s,e);throw zp("To use ref(service, url), the first argument must be a Storage instance.")}else return dT(s,e)}function S_(s,e){const t=e==null?void 0:e[J2];return t==null?null:Vs.makeFromBucketSpec(t,s)}function LD(s,e,t,a={}){s.host=`${e}:${t}`;const o=ta(e);o&&(hf(`https://${s.host}/b`),df("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:d1(u,s.app.options.projectId))}class Z0{constructor(e,t,a,o,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=W2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I3,this._maxUploadRetryTime=k3,this._requests=new Set,o!=null?this._bucket=Vs.makeFromBucketSpec(o,this._host):this._bucket=S_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vs.makeFromBucketSpec(this._url,e):this._bucket=S_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){j_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){j_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vl(this,e)}_makeRequest(e,t,a,o,u=!0){if(this._deleted)return new K3(Z2());{const h=rD(e,this._appId,a,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const C_="@firebase/storage",A_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="storage";function nr(s,e,t){return s=St(s),ID(s,e,t)}function sr(s){return s=St(s),kD(s)}function rr(s,e){return s=St(s),VD(s,e)}function PD(s=ff(),e){s=St(s);const a=ku(s,fT).getImmediate({identifier:e}),o=Zp("storage");return o&&UD(a,...o),a}function UD(s,e,t,a={}){LD(s,e,t,a)}function zD(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Z0(t,a,o,e,Nl)}function BD(){Ei(new Ia(fT,zD,"PUBLIC").setMultipleInstances(!0)),tr(C_,A_,""),tr(C_,A_,"esm2020")}BD();const ex={apiKey:"AIzaSyAfqqFbf2AVCOOm8Trm57qTSpWoAk-Jbx4",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},Lf=n0(ex),we=JI(Lf),Vd=Eu(Lf),HD=Y2(Lf),Ps=PD(Lf),mT=Object.freeze(Object.defineProperty({__proto__:null,auth:Vd,db:we,firebaseConfig:ex,functions:HD,storage:Ps},Symbol.toStringTag,{value:"Module"})),gT=E.createContext(void 0),FD=({children:s})=>{const[e,t]=E.useState(null),[a,o]=E.useState(!0);E.useEffect(()=>{const g=I2(Vd,async x=>{if(x)try{const p=He(we,"users",x.uid),b=await br(p);if(b.exists())t({id:b.id,...b.data()});else if(x.email){const _=Sn(It(we,"users"),ar("email","==",x.email)),N=await vr(_);if(N.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),t(null);else{const I=N.docs[0].data();t({id:N.docs[0].id,...I})}}else t(null)}catch(p){console.error("Error fetching user data:",p),t(null)}else t(null);o(!1)});return()=>g()},[]);const u=async(g,x)=>{try{if(!x)throw new Error("Password is required for Firebase Auth");let p=g;if(!g.includes("@"))try{const{httpsCallable:b}=await iu(async()=>{const{httpsCallable:$}=await Promise.resolve().then(()=>X2);return{httpsCallable:$}},[]),{functions:_}=await iu(async()=>{const{functions:$}=await Promise.resolve().then(()=>mT);return{functions:$}},void 0);p=(await b(_,"getEmailByUsername")({username:g})).data.email}catch(b){console.error("Username lookup failed:",b);const _=Sn(It(we,"users"),ar("username","==",g)),N=await vr(_);if(N.empty)return console.error("Username not found"),!1;const I=N.docs[0].data();I.email&&(p=I.email)}return await S2(Vd,p,x),!0}catch(p){return console.error("Login failed:",p),!1}},h=async()=>{try{await k2(Vd),t(null)}catch(g){console.error("Logout failed:",g)}};return i.jsx(gT.Provider,{value:{user:e,login:u,logout:h,isAuthenticated:!!e,loading:a},children:!a&&s})},Es=()=>{const s=E.useContext(gT);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},pT=E.createContext(void 0),qD=({toasts:s,removeToast:e})=>i.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:s.map(t=>i.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[i.jsxs("div",{className:"p-4 flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(ru,{className:"h-4 w-4 text-green-600"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900",children:t.message}),t.subMessage&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.subMessage})]}),i.jsx("button",{onClick:()=>e(t.id),className:"text-gray-400 hover:text-gray-600",children:i.jsx(fn,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"h-1 w-full bg-gray-100",children:i.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),i.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},t.id))}),GD=s=>{const e=new Date(s),a=Math.floor((new Date().getTime()-e.getTime())/1e3);return a<60?"Va xong":a<3600?`${Math.floor(a/60)} pht trc`:a<86400?`${Math.floor(a/3600)} gi trc`:`${Math.floor(a/86400)} ngy trc`},$D=({children:s})=>{const{user:e}=Es(),[t,a]=E.useState([]),[o,u]=E.useState([]);E.useEffect(()=>{const N=setTimeout(()=>{h("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(N)},[]),E.useEffect(()=>{if(!e){u([]);return}const N=Sn(It(we,"notifications"),ar("receivers","array-contains",e.id),Qo("createdAt","desc")),I=_r(N,U=>{const $=U.docs.map(z=>{var Z;const D=z.data();return{id:z.id,type:D.type,user:D.senderName,avatar:D.senderAvatar,content:D.message.replace(D.senderName,"").trim(),time:GD(D.createdAt),isRead:D.isRead,fileType:(Z=D.metadata)==null?void 0:Z.fileType,targetPath:D.targetPath}});u($)});return()=>I()},[e]);const h=(N,I="",U="success")=>{const $=Date.now().toString();a(z=>[...z,{id:$,message:N,subMessage:I,type:U}]),setTimeout(()=>{a(z=>z.filter(D=>D.id!==$))},3e3)},g=N=>{a(I=>I.filter(U=>U.id!==N))},x=async N=>{u(I=>I.map(U=>U.id===N?{...U,isRead:!0}:U));try{const I=He(we,"notifications",N);await Ht(I,{isRead:!0})}catch(I){console.error("Error marking notification as read:",I)}},p=async()=>{u(I=>I.map(U=>({...U,isRead:!0}))),o.filter(I=>!I.isRead).map(I=>I.id).forEach(async I=>{try{await Ht(He(we,"notifications",I),{isRead:!0})}catch(U){console.error(U)}})},b=N=>{u(I=>I.filter(U=>U.id!==N))},_=o.filter(N=>!N.isRead).length;return i.jsxs(pT.Provider,{value:{addToast:h,notifications:o,markAsRead:x,markAllAsRead:p,removeNotification:b,unreadCount:_},children:[s,i.jsx(qD,{toasts:t,removeToast:g})]})},Er=()=>{const s=E.useContext(pT);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},KD=({isOpen:s,onClose:e})=>{const[t,a]=E.useState(""),[o,u]=E.useState(""),[h,g]=E.useState(""),[x,p]=E.useState(!1),[b,_]=E.useState(!1),[N,I]=E.useState(!1),{addToast:U}=Er();if(!s)return null;const $=async z=>{if(z.preventDefault(),o!==h){U("Mt khu mi khng khp!","error");return}if(o.length<6){U("Mt khu mi phi c t nht 6 k t.","error");return}I(!0);try{const Z=Eu().currentUser;if(Z&&Z.email){const Q=Li.credential(Z.email,t);await T2(Z,Q),await C2(Z,o),U("i mt khu thnh cng!","success"),e(),a(""),u(""),g("")}else U("Khng tm thy thng tin ngi dng.","error")}catch(D){console.error("Error changing password:",D),D.code==="auth/wrong-password"?U("Mt khu hin ti khng ng.","error"):D.code==="auth/too-many-requests"?U("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):U(`Li: ${D.message}`,"error")}finally{I(!1)}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(pl,{className:"h-5 w-5"}),"i mt khu"]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("form",{onSubmit:$,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:t,onChange:z=>a(z.target.value),placeholder:"Nhp mt khu hin ti..."}),i.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:x?i.jsx(lp,{className:"h-4 w-4"}):i.jsx(pu,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:b?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:z=>u(z.target.value),placeholder:"Nhp mt khu mi..."}),i.jsx("button",{type:"button",onClick:()=>_(!b),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:b?i.jsx(lp,{className:"h-4 w-4"}):i.jsx(pu,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),i.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:h,onChange:z=>g(z.target.value),placeholder:"Nhp li mt khu mi..."})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:N,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Au,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},YD=({isOpen:s,onClose:e})=>{const{user:t}=Es(),{addToast:a}=Er(),[o,u]=E.useState(""),[h,g]=E.useState(""),[x,p]=E.useState(""),[b,_]=E.useState(""),[N,I]=E.useState(""),[U,$]=E.useState(!1),[z,D]=E.useState(!1),[Z,Q]=E.useState(!1),ae=E.useRef(null),me=E.useRef(null);if(E.useEffect(()=>{t&&s&&(u(t.fullName||""),g(t.phone||""),p(t.address||""),_(t.avatar||""),I(t.signatureUrl||""))},[t,s]),!s)return null;const ye=async O=>{var _e;const R=(_e=O.target.files)==null?void 0:_e[0];if(!(!R||!t)){if(!R.type.startsWith("image/")){a("Vui lng chn file nh!","","error");return}if(R.size>2*1024*1024){a("Kch thc nh ti a l 2MB!","","error");return}D(!0);try{const Pe=rr(Ps,`avatars/${t.id}/${Date.now()}_${R.name}`);await nr(Pe,R);const H=await sr(Pe);_(H),a("Ti nh i din thnh cng!","","success")}catch(Pe){console.error("Error uploading avatar:",Pe),a("Li khi ti nh i din!","","error")}finally{D(!1)}}},S=async O=>{var _e;const R=(_e=O.target.files)==null?void 0:_e[0];if(!(!R||!t)){if(R.type!=="image/png"){a("Vui lng chn file PNG cho ch k ( c nn trong sut)!","","error");return}if(R.size>1*1024*1024){a("Kch thc ch k ti a l 1MB!","","error");return}Q(!0);try{const Pe=rr(Ps,`signatures/${t.id}/signature.png`);await nr(Pe,R,{contentType:"image/png"});const H=await sr(Pe);I(H),a("Ti ch k thnh cng!","","success")}catch(Pe){console.error("Error uploading signature:",Pe),a("Li khi ti ch k!","","error")}finally{Q(!1)}}},j=()=>{I(""),a(" xa ch k!","","success")},A=async O=>{if(O.preventDefault(),!!t){if(!o.trim()){a("H v tn khng c  trng!","","error");return}$(!0);try{const R=He(we,"users",t.id);await Ht(R,{fullName:o.trim(),phone:h.trim(),address:x.trim(),avatar:b,signatureUrl:N}),a("Cp nht thng tin thnh cng!","","success"),e(),window.location.reload()}catch(R){console.error("Error updating profile:",R),a("Li khi cp nht thng tin!","","error")}finally{$(!1)}}},M=O=>O?O.charAt(0).toUpperCase():"U",k=O=>{switch(O){case"admin":return"bg-red-100 text-red-700 border-red-200";case"head_teacher":return"bg-blue-100 text-blue-700 border-blue-200";case"office_head":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"teacher":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"staff":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Fr,{className:"h-5 w-5"}),"Thng tin ti khon"]}),i.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{onSubmit:A,className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative group",children:[b?i.jsx("img",{src:b,alt:o,className:"h-24 w-24 rounded-full object-cover border-4 border-blue-100 shadow-lg"}):i.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold border-4 border-blue-100 shadow-lg",children:M(o)}),i.jsx("button",{type:"button",onClick:()=>{var O;return(O=ae.current)==null?void 0:O.click()},disabled:z,className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:z?i.jsx(bi,{className:"h-6 w-6 text-white animate-spin"}):i.jsx(QS,{className:"h-6 w-6 text-white"})}),i.jsx("input",{type:"file",ref:ae,onChange:ye,accept:"image/*",className:"hidden"})]}),i.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${k(t==null?void 0:t.role)}`,children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(t1,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"truncate",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(Fr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:t==null?void 0:t.username})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nhm"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(Ud,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:(t==null?void 0:t.group)||"Cha cp nht"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Trng thi"}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${(t==null?void 0:t.status)==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(t==null?void 0:t.status)==="active"?"Hot ng":"Khng hot ng"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:O=>u(O.target.value),placeholder:"Nhp h v tn..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S in thoi"}),i.jsxs("div",{className:"relative",children:[i.jsx(n1,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"tel",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:h,onChange:O=>g(O.target.value),placeholder:"Nhp s in thoi..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"a ch"}),i.jsxs("div",{className:"relative",children:[i.jsx(zC,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:x,onChange:O=>p(O.target.value),placeholder:"Nhp a ch..."})]})]})]}),i.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ls,{className:"h-5 w-5 text-indigo-600"}),i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ch k in t"})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Ti ln nh ch k nh dng PNG vi nn trong sut. Ch k s c s dng khi chn vo ti liu Word."}),N?i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"relative inline-block rounded-lg border-2 border-dashed border-indigo-200 p-2",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:[i.jsx("img",{src:N,alt:"Ch k",className:"max-h-20 max-w-full object-contain"}),i.jsx("button",{type:"button",onClick:j,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",title:"Xa ch k",children:i.jsx(Fn,{className:"h-3 w-3"})})]})}):i.jsx("div",{className:"mb-3 flex items-center justify-center h-20 rounded-lg border-2 border-dashed border-indigo-200",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:i.jsx("span",{className:"text-sm text-gray-400",children:"Cha c ch k"})}),i.jsx("button",{type:"button",onClick:()=>{var O;return(O=me.current)==null?void 0:O.click()},disabled:Z,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-700 bg-white border border-indigo-300 rounded-lg hover:bg-indigo-50 transition-colors disabled:opacity-50",children:Z?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"})," ang ti..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ls,{className:"h-4 w-4"})," ",N?"Thay i ch k":"Ti ln ch k"]})}),i.jsx("input",{type:"file",ref:me,onChange:S,accept:"image/png",className:"hidden"})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-100",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:U,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:U?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"})," ang lu..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Au,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},QD=()=>{const s=Va(),e=ir(),{user:t,logout:a}=Es(),{notifications:o,unreadCount:u,markAllAsRead:h,markAsRead:g,removeNotification:x}=Er(),[p,b]=E.useState(!1),[_,N]=E.useState(!1),[I,U]=E.useState(!1),[$,z]=E.useState(!1),[D,Z]=E.useState(""),[Q,ae]=E.useState(""),me=E.useRef(null),ye=E.useRef(null);if(E.useEffect(()=>{const k=O=>{me.current&&!me.current.contains(O.target)&&b(!1),ye.current&&!ye.current.contains(O.target)&&N(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]),E.useEffect(()=>{(async()=>{try{const O=He(we,"app_settings","system_logo"),R=await br(O);R.exists()&&R.data().imageUrl&&Z(R.data().imageUrl);const _e=He(we,"app_settings","certification_logo"),Pe=await br(_e);Pe.exists()&&Pe.data().imageUrl&&ae(Pe.data().imageUrl)}catch(O){console.error("Error fetching logo:",O)}})()},[]),s.pathname==="/login")return null;const S=async()=>{await a(),e("/login")},j=k=>k?k.charAt(0).toUpperCase():"U",A=k=>{switch(k){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},M=k=>{switch(k){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return i.jsxs("header",{className:`sticky top-0 z-50 w-full ${M(t==null?void 0:t.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-20",children:[i.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[i.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:D?i.jsx("img",{src:D,alt:"Logo",className:"h-8 w-8 object-contain"}):i.jsx(Qp,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:a1}),i.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),Q&&i.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:i.jsx("img",{src:Q,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[i.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[i.jsx(_l,{className:"h-5 w-5 text-white/70"}),i.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),i.jsxs("div",{className:"relative",ref:ye,children:[i.jsxs("button",{onClick:()=>N(!_),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${u>0?"animate-wiggle":""}`,children:[i.jsx(Uv,{className:`h-6 w-6 ${_?"text-white":""} group-hover:scale-110 transition-transform`}),u>0&&i.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:u})]}),_&&i.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),u>0&&i.jsxs("button",{onClick:h,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[i.jsx(ru,{className:"h-3 w-3"})," nh du  c"]})]}),i.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[o.map(k=>i.jsxs("div",{onClick:()=>{if(g(k.id),x(k.id),k.targetPath){const O=k.targetPath.includes("highlight=");let R=k.targetPath;if(!O){const _e=k.targetPath.includes("?")?"&":"?";R=`${k.targetPath}${_e}highlight=true`}e(R),N(!1)}},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${k.isRead?"bg-white":"bg-blue-50/40"}`,children:[i.jsxs("div",{className:"flex-shrink-0 pt-1",children:[k.avatar?i.jsx("img",{src:k.avatar,alt:k.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):i.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${k.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:j(k.user)}),i.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[k.type==="upload"&&i.jsx(it,{className:"h-3 w-3 text-emerald-500"}),k.type==="comment"&&i.jsx(hl,{className:"h-3 w-3 text-blue-500"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[i.jsx("span",{className:"font-bold",children:k.user})," ",k.content]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs text-gray-400 font-medium",children:k.time}),k.fileType&&i.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:k.fileType}),!k.isRead&&i.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},k.id)),o.length===0&&i.jsxs("div",{className:"p-8 text-center text-gray-400",children:[i.jsx(Uv,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),i.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),i.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:i.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),i.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:me,children:[i.jsxs("button",{onClick:()=>b(!p),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${p?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[i.jsxs("div",{className:"relative",children:[t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:t.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):i.jsx("div",{className:`h-9 w-9 rounded-full ${A(t==null?void 0:t.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:t?j(t.fullName):i.jsx(oC,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),t?i.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[i.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:t.fullName}),i.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:t.roleLabel})]}):i.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:i.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),i.jsx(eC,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:(t==null?void 0:t.fullName)||"Khch"}),i.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"p-1.5",children:[i.jsxs("button",{onClick:()=>{b(!1),z(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:i.jsx(Fr,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),i.jsxs("button",{onClick:()=>{b(!1),U(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:i.jsx(eA,{className:"h-4 w-4"})}),"i mt khu"]})]}),i.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),i.jsx("div",{className:"p-1.5",children:i.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:i.jsx(LC,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),i.jsx(KD,{isOpen:I,onClose:()=>U(!1)}),i.jsx(YD,{isOpen:$,onClose:()=>z(!1)})]})},XD=({data:s,onClick:e})=>{const{id:t,title:a,description:o,icon:u,colorClass:h,bgClass:g,hoverClass:x,stats:p}=s;return i.jsxs("div",{onClick:()=>e(t),className:`
        group relative overflow-hidden rounded-2xl border border-gray-100 bg-white p-8 shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-2 hover:shadow-xl
        ${x}
      `,children:[i.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${g} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),i.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:`mb-6 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${g} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(u,{className:`h-8 w-8 ${h}`})}),i.jsx("h3",{className:"mb-3 text-2xl font-bold text-gray-800 group-hover:text-gray-900 tracking-tight",children:a}),i.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:o})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[p&&i.jsx("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all",children:p}),i.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",i.jsx(Pd,{className:"h-4 w-4"})]})]})]})]})},xT=E.createContext(void 0),WD=({children:s})=>{const[e,t]=E.useState("2025-2026"),[a,o]=E.useState(["2025-2026"]),[u,h]=E.useState(!0);E.useEffect(()=>{const p=Sn(It(we,"school_years")),b=_r(p,_=>{const N=_.docs.map(I=>I.id).sort().reverse();N.length===0?g():(o(N),N.includes(e)||t(N[0])),h(!1)});return()=>b()},[]);const g=async()=>{try{await _o(He(we,"school_years","2025-2026"),{createdAt:Dp(),name:"Nm hc 2025-2026"}),o(["2025-2026"]),t("2025-2026")}catch(p){console.error("Error initializing default school year:",p)}},x=async p=>{try{await _o(He(we,"school_years",p),{createdAt:Dp(),name:`Nm hc ${p}`}),t(p)}catch(b){throw console.error("Error creating school year:",b),b}};return i.jsx(xT.Provider,{value:{currentSchoolYear:e,setCurrentSchoolYear:t,schoolYears:a,isLoading:u,createNewSchoolYear:x},children:s})},Yu=()=>{const s=E.useContext(xT);if(s===void 0)throw new Error("useSchoolYear must be used within a SchoolYearProvider");return s},JD=()=>{var _;const s=ir(),{user:e,isAuthenticated:t}=Es(),{currentSchoolYear:a,setCurrentSchoolYear:o,schoolYears:u,createNewSchoolYear:h}=Yu(),[g,x]=Hr.useState([]),p=async()=>{const N=prompt("Nhp nm hc mi (VD: 2026-2027):");if(N){if(!N.match(/^\d{4}-\d{4}$/)){alert("nh dng nm hc khng hp l. Vui lng nhp dng YYYY-YYYY (VD: 2026-2027)");return}try{await h(N),alert(` khi to nm hc ${N} thnh cng!`)}catch{alert("C li xy ra khi to nm hc.")}}};if(E.useEffect(()=>{const N=Sn(It(we,"classes")),I=_r(N,async U=>{const $=U.docs.map(me=>({id:me.id,...me.data()})),z=Sn(It(we,"users"),ar("role","in",["teacher","head_teacher"])),Z=(await vr(z)).docs.map(me=>me.data()),Q=me=>me.toLowerCase().trim().replace(/\s+/g," "),ae=$.map(me=>{const ye=new Set,S=Q(me.id),j=Q(me.name);Z.forEach(M=>{if(!M.accessScope)return;const k=Q(M.accessScope);(k===S||k===j||j.includes(k)||k.includes(j))&&ye.add(M.fullName)});const A=Array.from(ye);return{...me,teachers:A.length>0?A:["Cha phn cng"],teacher:A.length>0?A.join(", "):"Cha phn cng"}});ae.sort((me,ye)=>me.name.localeCompare(ye.name)),x(ae)});return()=>I()},[]),E.useEffect(()=>{t||s("/login")},[t,s]),!e)return null;const b=N=>{var I;if(N==="van-ban-chi-dao")s("/van-ban-chi-dao");else if(N==="van-ban-truong")s("/van-ban-truong");else if(N==="quan-tri-he-thong")s("/quan-tri-he-thong");else if(N==="to-van-phong-ke-hoach")s("/to-van-phong-ke-hoach");else if(N==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}s("/to-van-phong-thuc-don")}else if(N==="to-chuyen-mon-ke-hoach")s("/to-chuyen-mon-ke-hoach");else if(N.startsWith("class-")){const U=N.replace("class-","");if(e.role==="teacher"){const $=g.find(D=>D.id===U),z=(I=e.accessScope)==null?void 0:I.toLowerCase().trim();if($&&z!==U.toLowerCase()&&z!==$.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}s(`/class/${U}`)}else console.log(`Navigating to category: ${N}`),alert(`ang truy cp vo phn h: ${N} (ang pht trin)`)};return i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 pt-8 pb-8 mb-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(e1,{className:"h-5 w-5 text-yellow-500"}),i.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["Xin cho c: ",e.fullName]}),i.jsxs("p",{className:"text-gray-500 mt-1",children:["Vai tr: ",i.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",i.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 whitespace-nowrap px-2",children:"Nm hc:"}),i.jsx("select",{value:a,onChange:N=>o(N.target.value),className:"form-select text-sm font-bold text-gray-800 bg-white border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 py-1.5 pl-3 pr-8",children:u.map(N=>i.jsx("option",{value:N,children:N},N))}),e.role==="admin"&&i.jsx("button",{onClick:p,className:"ml-2 p-1.5 text-blue-600 hover:bg-blue-100 rounded-md transition-colors",title:"Khi to nm hc mi",children:i.jsx(Hv,{className:"h-4 w-4"})})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 xl:gap-8",children:[i.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col",children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),i.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[i.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:i.jsx(Hv,{className:"h-7 w-7"})}),i.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors",children:"QUN L VN BN CHUNG"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),i.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 mt-2",children:[i.jsxs("div",{onClick:()=>s("/van-ban-chi-dao"),className:"bg-white p-6 cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:i.jsx(IC,{className:"h-6 w-6"})}),i.jsx(Pd,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-blue-700",children:"Vn bn Cp trn"}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"S/B GD"}),i.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"UBND"})]})]}),i.jsxs("div",{onClick:()=>s("/van-ban-truong"),className:"bg-white p-6 cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:i.jsx(r1,{className:"h-6 w-6"})}),i.jsx(Pd,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:"font-bold text-gray-800 mb-1 group-hover/item:text-emerald-700",children:"Vn bn Ni b"}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"K hoch"}),i.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Quyt nh"}),i.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded border border-gray-200",children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&i.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col",children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:"p-8 pb-4 relative z-10",children:[i.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:i.jsx(Ud,{className:"h-7 w-7"})}),i.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors",children:"T VN PHNG"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),i.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row border-t border-indigo-50 mt-4",children:[i.jsxs("div",{onClick:()=>b("to-van-phong-ke-hoach"),className:"flex-1 p-6 cursor-pointer hover:bg-indigo-50/60 transition-colors border-b sm:border-b-0 sm:border-r border-indigo-50 group/item",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg shadow-sm",children:i.jsx(it,{className:"h-5 w-5"})})}),i.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-indigo-700",children:"K HOCH & BO CO"}),i.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"K hoch ti chnh, Y t, Hot ng chung"})]}),i.jsxs("div",{onClick:()=>b("to-van-phong-thuc-don"),className:"flex-1 p-6 cursor-pointer hover:bg-purple-50/60 transition-colors group/item",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:i.jsx(op,{className:"h-5 w-5"})})}),i.jsx("h4",{className:"text-sm font-bold text-gray-800 mb-1 group-hover/item:text-purple-700",children:"THC N & BN TR"}),i.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&i.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col",children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:"p-8 pb-2 relative z-10",children:[i.jsx("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500",children:i.jsx(Qp,{className:"h-8 w-8"})}),i.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors",children:"T CHUYN MN"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),i.jsx("div",{className:"px-6 pb-4 relative z-10",children:i.jsxs("div",{onClick:()=>b("to-chuyen-mon-ke-hoach"),className:"flex items-center justify-between p-3 rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-white rounded-lg text-amber-600 shadow-sm",children:i.jsx(qS,{className:"h-5 w-5"})}),i.jsx("div",{children:i.jsx("h4",{className:"text-sm font-bold text-gray-800 group-hover/plan:text-amber-700",children:"K hoch T & Bin bn"})})]}),i.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),i.jsxs("div",{className:"flex-1 bg-gray-50/50 border-t border-amber-100 p-6 pt-4",children:[i.jsx("div",{className:"mb-4",children:i.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-3",children:"LP HC CA TI"})}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.map(N=>{var I;if(e.role==="teacher"){const U=(I=e.accessScope)==null?void 0:I.toLowerCase().trim(),$=N.id.toLowerCase(),z=N.name.toLowerCase();if(U!==$&&U!==z)return null}return i.jsxs("button",{onClick:()=>b(`class-${N.id}`),className:"relative group/btn flex flex-col items-center justify-center py-2 px-1 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all",children:[i.jsx("span",{className:"text-xs font-bold text-gray-700 group-hover/btn:text-amber-800",children:N.name}),N.newFiles>0&&i.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},N.id)})})]})]}),(e.role==="admin"||e.role==="vice_principal"&&((_=e.permissions)==null?void 0:_.includes("access_system_admin")))&&pA.map(N=>i.jsx(XD,{data:N,onClick:b},N.id))]})})]})},ZD=s=>{try{const e=new URL(s),t=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}catch{const t=s.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}},Qu=s=>!s||s==="#"?"#":s.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":ZD(s)?`https://docs.google.com/viewer?url=${encodeURIComponent(s)}&embedded=true`:s,sp=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),eO=()=>{var pe;const s=ir(),{addToast:e}=Er(),[t,a]=E.useState([]),[o,u]=E.useState(""),[h,g]=E.useState("Tt c"),{user:x}=Es(),p=(pe=x==null?void 0:x.permissions)==null?void 0:pe.includes("manage_documents"),[b,_]=E.useState(null),[N,I]=E.useState(!1),[U,$]=E.useState(!1),[z,D]=E.useState(!1),[Z,Q]=E.useState(!1),[ae,me]=E.useState(null),[ye,S]=E.useState(1),[j,A]=E.useState({}),[M,k]=E.useState(null),[O,R]=E.useState("");Hr.useEffect(()=>{const Y=Sn(It(we,"directive_documents"),Qo("ngayBanHanh","desc")),V=_r(Y,q=>{const le=[];q.forEach(Ie=>{le.push({id:Ie.id,...Ie.data()})}),a(le)});return()=>V()},[]);const _e=E.useMemo(()=>t.filter(Y=>{const V=Y.trichYeu.toLowerCase().includes(o.toLowerCase())||Y.soKyHieu.toLowerCase().includes(o.toLowerCase()),q=h==="Tt c"||Y.coQuanBanHanh===h;return V&&q}),[t,o,h]),Pe=Y=>{me(Y),Q(!0)},H=async()=>{if(ae){try{await jl(He(we,"directive_documents",ae.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(Y){console.error("Error deleting document:",Y),e("Li xa ti liu","Khng th xa ti liu ny.","error")}Q(!1),me(null)}},ge=Y=>{_(Y),S(1),I(!0)},Se=()=>{A({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),k(null),R(""),D(!1),$(!0)},Ue=Y=>{A({...Y}),D(!0),k(null),R(Y.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),$(!0)},Ge=Y=>{if(Y.target.files&&Y.target.files[0]){const V=Y.target.files[0];k(V),R(V.name)}},P=Y=>{Y.fileDinhKemUrl&&Y.fileDinhKemUrl!=="#"?window.open(Y.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},ne=()=>{k(null),R("")},xe=async Y=>{if(Y.preventDefault(),!(!j.trichYeu||!j.soKyHieu))try{let V=j.fileDinhKemUrl||"#";if(M){const q=rr(Ps,`directive_documents/${Date.now()}_${M.name}`),le=await nr(q,M);V=await sr(le.ref)}else!O&&!j.fileDinhKemUrl&&(V="#");z&&j.id?(await Ht(He(we,"directive_documents",j.id),{...j,fileDinhKemUrl:V}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await Sl(It(we,"directive_documents"),{...j,fileDinhKemUrl:V,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),$(!1)}catch(V){console.error("Error saving document:",V),e("Li lu d liu","Khng th lu vn bn ny.","error")}},G=Y=>{switch(Y){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[i.jsx(Kp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(it,{className:"h-6 w-6 text-blue-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CH O"})]})]}),p&&i.jsxs("button",{onClick:Se,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[i.jsx(So,{className:"h-5 w-5"}),i.jsx("span",{children:"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(Y=>i.jsx("button",{onClick:()=>g(Y),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${h===Y?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:Y},Y))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_l,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:Y=>u(Y.target.value)})]})})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.length>0?_e.map(Y=>i.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>ge(Y),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:i.jsx(it,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:Y.trichYeu}),Y.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:Y.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:Y.soKyHieu}),i.jsx(sp,{colorClass:"bg-yellow-100 text-yellow-800",children:Y.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(su,{className:"h-3 w-3"}),i.jsx("span",{className:G(Y.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:Y.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(gl,{className:"h-3 w-3"}),new Date(Y.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:V=>V.stopPropagation(),children:[i.jsx("button",{onClick:()=>ge(Y),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(pu,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>P(Y),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-4 w-4"})}),p&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ue(Y),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(Ao,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>Pe(Y),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(Fn,{className:"h-4 w-4"})})]})]})})]},Y.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(it,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[i.jsxs("span",{children:["Hin th ",_e.length," vn bn"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),Z&&ae&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',ae.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:H,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),N&&b&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(it,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>I(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:i.jsx(fn,{className:"h-6 w-6"})})]}),"   ",i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:b.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(sp,{colorClass:"bg-blue-100 text-blue-800",children:b.coQuanBanHanh}),i.jsx(sp,{colorClass:"bg-yellow-100 text-yellow-800",children:b.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(gl,{className:"h-3 w-3"})," ",new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:b.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(b.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(su,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:b.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:b.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>P(b),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[i.jsx(Ls,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>S(Y=>Math.max(.5,Y-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(Jp,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(ye*100),"%"]}),i.jsx("button",{onClick:()=>S(Y=>Math.min(2,Y+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(Wp,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>S(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(s1,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:b.fileDinhKemUrl&&b.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:Qu(b.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(it,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),U&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[z?i.jsx(Ao,{className:"h-5 w-5"}):i.jsx(So,{className:"h-5 w-5"}),z?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:xe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:j.trichYeu||"",onChange:Y=>A({...j,trichYeu:Y.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:j.soKyHieu||"",onChange:Y=>A({...j,soKyHieu:Y.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:j.ngayBanHanh||"",onChange:Y=>A({...j,ngayBanHanh:Y.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:j.coQuanBanHanh||"B GD&T",onChange:Y=>A({...j,coQuanBanHanh:Y.target.value}),children:[i.jsx("option",{value:"B GD&T",children:"B GD&T"}),i.jsx("option",{value:"S GD&T",children:"S GD&T"}),i.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),i.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:j.loaiVanBan||"Cng vn",onChange:Y=>A({...j,loaiVanBan:Y.target.value}),children:[i.jsx("option",{value:"Cng vn",children:"Cng vn"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:j.tomTatNoiDung||"",onChange:Y=>A({...j,tomTatNoiDung:Y.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),O?i.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:i.jsx(it,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:O}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(Os,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:ne,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(fn,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Ge}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(In,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Au,{className:"h-4 w-4"})," ",z?"Lu thay i":"To mi"]})]})]})})]})},R_=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),tO=()=>{var Y;const s=ir(),{currentSchoolYear:e}=Yu(),{addToast:t}=Er(),[a,o]=E.useState([]),[u,h]=E.useState(""),[g,x]=E.useState("Tt c"),{user:p}=Es(),b=(Y=p==null?void 0:p.permissions)==null?void 0:Y.includes("manage_documents"),[_,N]=E.useState(null),[I,U]=E.useState(!1),[$,z]=E.useState(!1),[D,Z]=E.useState(!1),[Q,ae]=E.useState(!1),[me,ye]=E.useState(null),[S,j]=E.useState(1),[A,M]=E.useState({}),[k,O]=E.useState(null),[R,_e]=E.useState("");Hr.useEffect(()=>{const V=Sn(It(we,"school_documents"),Qo("ngayBanHanh","desc")),q=_r(V,le=>{const Ie=[];le.forEach(Ne=>{const Ae=Ne.data();(Ae.schoolYear||"2025-2026")===e&&Ie.push({id:Ne.id,...Ae})}),o(Ie)});return()=>q()},[e]);const Pe=E.useMemo(()=>a.filter(V=>{const q=V.trichYeu.toLowerCase().includes(u.toLowerCase())||V.soKyHieu.toLowerCase().includes(u.toLowerCase()),le=g==="Tt c"||V.loaiVanBan===g;return q&&le}),[a,u,g]),H=V=>{ye(V),ae(!0)},ge=async()=>{if(me){try{await jl(He(we,"school_documents",me.id)),t(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(V){console.error("Error deleting document:",V),t("Li xa ti liu","Khng th xa ti liu ny.","error")}ae(!1),ye(null)}},Se=V=>{N(V),j(1),U(!0)},Ue=()=>{M({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),O(null),_e(""),Z(!1),z(!0)},Ge=V=>{M({...V}),Z(!0),O(null),_e(V.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),z(!0)},P=V=>{if(V.target.files&&V.target.files[0]){const q=V.target.files[0];O(q),_e(q.name)}},ne=V=>{V.fileDinhKemUrl&&V.fileDinhKemUrl!=="#"?window.open(V.fileDinhKemUrl,"_blank"):t("Khng c file","Vn bn ny khng c file nh km.","warning")},xe=()=>{O(null),_e("")},G=async V=>{if(V.preventDefault(),!(!A.trichYeu||!A.soKyHieu))try{let q=A.fileDinhKemUrl||"#";if(k){const le=rr(Ps,`school_documents/${Date.now()}_${k.name}`),Ie=await nr(le,k);q=await sr(Ie.ref)}else!R&&!A.fileDinhKemUrl&&(q="#");D&&A.id?(await Ht(He(we,"school_documents",A.id),{...A,fileDinhKemUrl:q}),t("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await Sl(It(we,"school_documents"),{...A,fileDinhKemUrl:q,schoolYear:e,createdAt:new Date().toISOString()}),t("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),z(!1)}catch(q){console.error("Error saving document:",q),t("Li lu d liu","Khng th lu vn bn ny.","error")}},pe=V=>{switch(V){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[i.jsx(Kp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(su,{className:"h-6 w-6 text-emerald-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"VN BN CA TRNG"})]})]}),b&&i.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[i.jsx(So,{className:"h-5 w-5"}),i.jsx("span",{children:"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(V=>i.jsx("button",{onClick:()=>x(V),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${g===V?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:V},V))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_l,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:u,onChange:V=>h(V.target.value)})]})})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Pe.length>0?Pe.map(V=>i.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>Se(V),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:i.jsx(it,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:V.trichYeu}),V.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:V.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:V.soKyHieu}),i.jsx(R_,{colorClass:pe(V.loaiVanBan),children:V.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(su,{className:"h-3 w-3"}),i.jsx("span",{children:V.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(gl,{className:"h-3 w-3"}),new Date(V.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:q=>q.stopPropagation(),children:[i.jsx("button",{onClick:()=>Se(V),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(pu,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>ne(V),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-4 w-4"})}),b&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ge(V),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(Ao,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>H(V),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(Fn,{className:"h-4 w-4"})})]})]})})]},V.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(it,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[i.jsxs("span",{children:["Hin th ",Pe.length," vn bn"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),Q&&me&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',me.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:ge,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),I&&_&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(it,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>U(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:_.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(R_,{colorClass:pe(_.loaiVanBan),children:_.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(gl,{className:"h-3 w-3"})," ",new Date(_.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:_.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(_.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(su,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:_.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:_.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>ne(_),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[i.jsx(Ls,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>j(V=>Math.max(.5,V-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(Jp,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(S*100),"%"]}),i.jsx("button",{onClick:()=>j(V=>Math.min(2,V+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(Wp,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>j(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(s1,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:_.fileDinhKemUrl&&_.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:Qu(_.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(it,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})}),$&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[D?i.jsx(Ao,{className:"h-5 w-5"}):i.jsx(So,{className:"h-5 w-5"}),D?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:G,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:A.trichYeu||"",onChange:V=>M({...A,trichYeu:V.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:A.soKyHieu||"",onChange:V=>M({...A,soKyHieu:V.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:A.ngayBanHanh||"",onChange:V=>M({...A,ngayBanHanh:V.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:A.coQuanBanHanh||"Ban Gim Hiu",onChange:V=>M({...A,coQuanBanHanh:V.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:A.loaiVanBan||"K hoch",onChange:V=>M({...A,loaiVanBan:V.target.value}),children:[i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"Bo co",children:"Bo co"}),i.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:A.tomTatNoiDung||"",onChange:V=>M({...A,tomTatNoiDung:V.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),R?i.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:i.jsx(it,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:R}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(Os,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:xe,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(fn,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:P}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(In,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Au,{className:"h-4 w-4"})," ",D?"Lu thay i":"To mi"]})]})]})})]})},nO=()=>{const{user:s}=Es(),{addToast:e}=Er(),[t,a]=E.useState(""),[o,u]=E.useState(""),[h,g]=E.useState(null),[x,p]=E.useState(!1),[b,_]=E.useState(""),[N,I]=E.useState(""),[U,$]=E.useState(null),[z,D]=E.useState(!1),[Z,Q]=E.useState("/login-background.jpg"),[ae,me]=E.useState(""),[ye,S]=E.useState(null),[j,A]=E.useState(!1),[M,k]=E.useState(!0),[O,R]=E.useState(!1),[_e,Pe]=E.useState(null),[H,ge]=E.useState(!1),[Se,Ue]=E.useState(null),Ge=async()=>{if(s){R(!0),Pe(null);try{let Ne=0,Ae=0;const Ve=await vr(It(we,"plans")),et=Jg(we);Ve.forEach(Pt=>{const Tn=Pt.data();if(!Tn.approval||!Tn.approval.status){const Nt=He(we,"plans",Pt.id);et.update(Nt,{approval:{status:"pending"},uploaderRole:Tn.uploaderRole||"teacher"}),Ne++}}),Ne>0&&await et.commit();const vt=await vr(It(we,"class_files")),Xt=Jg(we);vt.forEach(Pt=>{const Tn=Pt.data();if(!Tn.approval||!Tn.approval.status){const Nt=He(we,"class_files",Pt.id);Xt.update(Nt,{approval:{status:"pending"},uploaderRole:Tn.uploaderRole||"teacher"}),Ae++}}),Ae>0&&await Xt.commit(),Pe({plans:Ne,classFiles:Ae}),Ne>0||Ae>0?e("Migration hon thnh!",` cp nht ${Ne} k hoch v ${Ae} h s lp.`,"success"):e("Khng c g  cp nht","Tt c ti liu  c trng thi duyt.","success")}catch(Ne){console.error("Migration error:",Ne),e("Li Migration","Khng th cp nht d liu. Xem console  bit chi tit.","error")}finally{R(!1)}}},P=async()=>{if(!(!s||!window.confirm("Bn c chc mun xa tt c thng bo c c ng dn sai (/professional-group-plans)?"))){ge(!0),Ue(null);try{let Ne=0;const Ae=await vr(It(we,"notifications")),Ve=[];if(Ae.forEach(et=>{const vt=et.data();vt.targetPath&&vt.targetPath.includes("/professional-group-plans")&&Ve.push(et.id)}),Ve.length>0){for(let vt=0;vt<Ve.length;vt+=450){const Xt=Ve.slice(vt,vt+450),Pt=Jg(we);Xt.forEach(Tn=>{Pt.delete(He(we,"notifications",Tn))}),await Pt.commit(),Ne+=Xt.length,console.log(`Deleted chunk: ${Ne}/${Ve.length}`)}e("Dn dp hon tt!",` xa ${Ne} thng bo c sai ng dn.`,"success")}else e("Khng c thng bo li","Tt c thng bo hin ti u hp l.","success");Ue(Ne)}catch(Ne){console.error("Cleanup error details:",Ne);const Ae=Ne.code==="permission-denied"?"Li dn dp: Quyn truy cp b t chi. Vui lng kim tra li quyn Admin.":`Li dn dp: ${Ne.message||"Khng th xa d liu c."}`;e("Li",Ae,"error")}finally{ge(!1)}}};E.useEffect(()=>{(async()=>{try{const Ae=He(we,"app_settings","login_background"),Ve=await br(Ae);Ve.exists()&&Ve.data().imageUrl&&Q(Ve.data().imageUrl);const et=He(we,"app_settings","system_logo"),vt=await br(et);vt.exists()&&vt.data().imageUrl&&a(vt.data().imageUrl);const Xt=He(we,"app_settings","certification_logo"),Pt=await br(Xt);Pt.exists()&&Pt.data().imageUrl&&_(Pt.data().imageUrl)}catch(Ae){console.error("Error fetching settings:",Ae)}finally{k(!1)}})()},[]);const ne=Ne=>{if(Ne.target.files&&Ne.target.files[0]){const Ae=Ne.target.files[0];if(!Ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ae.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}g(Ae),u(URL.createObjectURL(Ae))}},xe=async()=>{if(!(!h||!s)){p(!0);try{const Ne=Date.now(),Ae=rr(Ps,`app_settings/system-logo-${Ne}.png`);await nr(Ae,h);const Ve=await sr(Ae);await _o(He(we,"app_settings","system_logo"),{imageUrl:Ve,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),a(Ve),u(""),g(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(Ne){console.error("Error uploading logo:",Ne),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{p(!1)}}},G=()=>{u(""),g(null)},pe=Ne=>{if(Ne.target.files&&Ne.target.files[0]){const Ae=Ne.target.files[0];if(!Ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ae.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}$(Ae),I(URL.createObjectURL(Ae))}},Y=async()=>{if(!(!U||!s)){D(!0);try{const Ne=Date.now(),Ae=rr(Ps,`app_settings/cert-logo-${Ne}.png`);await nr(Ae,U);const Ve=await sr(Ae);await _o(He(we,"app_settings","certification_logo"),{imageUrl:Ve,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),_(Ve),I(""),$(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(Ne){console.error("Error uploading cert logo:",Ne),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{D(!1)}}},V=()=>{I(""),$(null)},q=Ne=>{if(Ne.target.files&&Ne.target.files[0]){const Ae=Ne.target.files[0];if(!Ae.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ae.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}S(Ae),me(URL.createObjectURL(Ae))}},le=async()=>{if(!(!ye||!s)){A(!0);try{const Ne=Date.now(),Ae=rr(Ps,`app_settings/login-background-${Ne}.jpg`);await nr(Ae,ye);const Ve=await sr(Ae);await _o(He(we,"app_settings","login_background"),{imageUrl:Ve,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),Q(Ve),me(""),S(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(Ne){console.error("Error uploading:",Ne),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{A(!1)}}},Ie=()=>{me(""),S(null)};return M?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-amber-600 rounded-lg",children:i.jsx(zv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Migration: Thm Trng Thi Duyt"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Cp nht cc ti liu c (K hoch T CM v H s Lp) vi trng thi "Ch duyt"  kch hot chc nng ph duyt mi.',i.jsx("br",{}),i.jsx("span",{className:"text-amber-700 font-medium font-sans",children:"Lu : Ch cn chy mt ln. Cc ti liu  c trng thi s khng b nh hng."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:Ge,disabled:O,className:"flex items-center gap-2 px-6 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:O?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zv,{className:"h-4 w-4"}),"Chy Migration"]})}),_e&&i.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:["  cp nht: ",i.jsx("span",{className:"font-bold",children:_e.plans})," k hoch, ",i.jsx("span",{className:"font-bold",children:_e.classFiles})," h s lp"]})]})]})]})}),i.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-red-600 rounded-lg",children:i.jsx(Gv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Dn dp: Thng bo li ng dn"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Khc phc vn  "Trang trng" khi nhn vo thng bo c.',i.jsx("br",{}),i.jsx("span",{className:"text-red-700 font-medium font-sans",children:"Dn sch cc thng bo cha ng dn c (/professional-group-plans)."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:P,disabled:H,className:"flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:H?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"}),"ang dn dp..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Fn,{className:"h-4 w-4"}),"Dn dp thng bo li"]})}),Se!==null&&i.jsxs("div",{className:"text-sm text-red-700 bg-red-100 px-3 py-1.5 rounded-lg border border-red-200",children:["  xa: ",i.jsx("span",{className:"font-bold",children:Se})," thng bo li"]})]})]})]})})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:i.jsx(Ug,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(ru,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:t?i.jsx("img",{src:t,alt:"Current Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:ne,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),o&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:i.jsx("img",{src:o,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:xe,disabled:!h||x,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:x?"ang ti...":"Lu Logo"}),o&&i.jsx("button",{onClick:G,disabled:x,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:i.jsx(Ug,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(ru,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:b?i.jsx("img",{src:b,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:pe,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),N&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:i.jsx("img",{src:N,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Y,disabled:!U||z,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:z?"ang ti...":"Lu Logo"}),N&&i.jsx("button",{onClick:V,disabled:z,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:i.jsx(Ug,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(ru,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:i.jsx("img",{src:Z,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),i.jsx("input",{type:"file",accept:"image/*",onChange:q,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),i.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(Zn,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),ae&&i.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),i.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:i.jsx("img",{src:ae,alt:"Preview",className:"w-full h-64 object-contain"})})]}),i.jsxs("div",{className:"mt-6 flex gap-3",children:[i.jsx("button",{onClick:le,disabled:!ye||j,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:j?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):i.jsxs(i.Fragment,{children:[i.jsx(In,{className:"h-4 w-4"}),"Lu v p dng"]})}),ae&&i.jsxs("button",{onClick:Ie,disabled:j,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[i.jsx(Gv,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Zn,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm text-amber-800",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[i.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),i.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),i.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),i.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},sO=()=>{var ne,xe,G,pe,Y;const s=ir(),{user:e}=Es(),{addToast:t}=Er(),[a,o]=E.useState("users"),[u,h]=Hr.useState([]),[g,x]=Hr.useState({}),[p,b]=Hr.useState({});Hr.useEffect(()=>{var V;e&&(e.role==="admin"||(V=e.permissions)!=null&&V.includes("access_system_admin")||(t("Bn khng c quyn truy cp khu vc ny.","error"),s("/")))},[e,s,t]);const[_,N]=E.useState([]),[I,U]=E.useState(""),[$,z]=E.useState("Tt c"),[D,Z]=E.useState(!1),[Q,ae]=E.useState(!1),[me,ye]=E.useState(!1),[S,j]=E.useState({}),[A,M]=E.useState(""),[k,O]=E.useState(!1);Hr.useEffect(()=>{const V=Sn(It(we,"classes")),q=_r(V,le=>{const Ie=le.docs.map(Ve=>({id:Ve.id,...Ve.data()}));Ie.sort((Ve,et)=>Ve.name.localeCompare(et.name)),h(Ie);const Ne={},Ae={};Ie.forEach(Ve=>{Ne[Ve.name]=Ve.id,Ae[Ve.id]=Ve.name}),x(Ne),b(Ae)});return()=>q()},[]),Hr.useEffect(()=>{const V=Sn(It(we,"users")),q=_r(V,le=>{const Ie=[];le.forEach(Ne=>{Ie.push({id:Ne.id,...Ne.data()})}),N(Ie)});return()=>q()},[]);const R=E.useMemo(()=>_.filter(V=>{const q=V.fullName.toLowerCase().includes(I.toLowerCase())||V.username.toLowerCase().includes(I.toLowerCase())||V.email.toLowerCase().includes(I.toLowerCase()),le=$==="Tt c"||V.group===$;return q&&le}),[_,I,$]),_e=async V=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await jl(He(we,"users",V))}catch(q){console.error("Error deleting user:",q),t("Khng th xa ngi dng. Vui lng th li.","error")}},Pe=()=>{j({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:u.length>0?u[0].id:"choi",permissions:[]}),M(""),ae(!1),ye(!1),Z(!0)},H=V=>{j({...V}),ae(!0),ye(!1),M(""),Z(!0)},ge=V=>{const q=V.target.value;let le="",Ie=S.group,Ne="teacher";q==="Hiu Trng"?(le="Ton h thng",Ie="Ban Gim Hiu",Ne="admin"):q==="Ph Hiu Trng"?(le="Ton trng",Ie="Ban Gim Hiu",Ne="vice_principal"):q==="T trng chuyn mn"?(le="Ton b T chuyn mn",Ie="T Chuyn Mn",Ne="head_teacher"):q==="T ph chuyn mn"?(le="Ton b T chuyn mn",Ie="T Chuyn Mn",Ne="vice_head_teacher"):q==="Gio vin"?(le=u.length>0?u[0].id:"choi",Ie="T Chuyn Mn",Ne="teacher"):q==="T trng t vn phng"?(le="Ton b T Vn phng",Ie="T Vn Phng",Ne="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(q)&&(le="Khng gian T Vn phng",Ie="T Vn Phng",Ne="staff"),j({...S,role:Ne,roleLabel:q,accessScope:le,group:Ie,permissions:S.permissions||[]})},Se=async V=>{if(V.preventDefault(),!(!S.username||!S.fullName||!S.email)){O(!0);try{if(Q&&S.id){const q=Object.fromEntries(Object.entries(S).filter(([le,Ie])=>Ie!==void 0));if(await Ht(He(we,"users",S.id),q),me&&A)if(e&&S.id===e.id){const{updatePassword:le}=await iu(async()=>{const{updatePassword:Ne}=await Promise.resolve().then(()=>u3);return{updatePassword:Ne}},void 0),Ie=Eu();Ie.currentUser&&(await le(Ie.currentUser,A),t(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:le}=await iu(async()=>{const{httpsCallable:Ae}=await Promise.resolve().then(()=>X2);return{httpsCallable:Ae}},void 0),{functions:Ie}=await iu(async()=>{const{functions:Ae}=await Promise.resolve().then(()=>mT);return{functions:Ae}},void 0),Ne=le(Ie,"adminResetPassword");t("ang gi yu cu i mt khu...","info"),await Ne({targetUserId:S.id,newPassword:A}),t(` i mt khu cho user ${S.username} thnh cng!`,"success")}catch(le){console.error("Error calling adminResetPassword:",le),t(`Li i mt khu: ${le.message}`,"error")}else t("Cp nht thng tin h s thnh cng!","success")}else{let q="";try{const le=n0(ex,"SecondaryApp"),Ie=Eu(le);q=(await j2(Ie,S.email,A)).user.uid,await FR(le)}catch(le){console.error("Auth creation error:",le),le.code==="auth/email-already-in-use"?t("Email ny  c s dng bi ti khon khc.","error"):t(`Li to ti khon Auth: ${le.message}`,"error"),O(!1);return}await _o(He(we,"users",q),{...S,id:q,createdAt:new Date().toISOString()}),t(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}Z(!1)}catch(q){console.error("Error saving user:",q),t("Li khi lu d liu.","error")}finally{O(!1)}}},Ue=async V=>{const q=_.find(le=>le.id===V);if(q)try{const le=q.status==="active"?"inactive":"active";await Ht(He(we,"users",V),{status:le}),t(` ${le==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(le){console.error("Error updating status:",le),t("Khng th cp nht trng thi.","error")}},Ge=V=>V.includes("Hiu Trng")||V.includes("Admin")?"bg-red-100 text-red-700 border-red-200":V.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":V.includes("T trng")||V.includes("T ph")||V.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",P=()=>{const V=S.role||"";return V==="admin"?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[i.jsx(bo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[i.jsx(Zn,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):V==="vice_principal"?i.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[i.jsx(bo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[i.jsx(Zn,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):V==="head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(mo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:S.accessScope||"",onChange:q=>j({...S,accessScope:q.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(Os,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):V==="vice_head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(mo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:S.accessScope||"",onChange:q=>j({...S,accessScope:q.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(Os,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):V==="teacher"?i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[i.jsx(r1,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),i.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:S.accessScope||"",onChange:q=>j({...S,accessScope:q.target.value}),children:u.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):V==="office_head"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(mo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(Os,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[i.jsx(Ud,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),i.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[i.jsx(Kp,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:i.jsx(bo,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),i.jsx("div",{className:"mt-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("button",{onClick:()=>o("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(mo,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),i.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(bo,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),a==="users"&&i.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(V=>i.jsx("button",{onClick:()=>z(V),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${$===V?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:V},V))}),i.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[i.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_l,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:I,onChange:V=>U(V.target.value)})]}),i.jsxs("button",{onClick:Pe,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[i.jsx(So,{className:"h-5 w-5"}),i.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="users"?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length>0?R.map(V=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:i.jsx(Fr,{className:"h-6 w-6"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.fullName}),i.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fr,{className:"h-3 w-3"})," ",V.username]}),i.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(t1,{className:"h-3 w-3"})," ",V.email]})]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${Ge(V.roleLabel)}`,children:V.roleLabel}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(mo,{className:"h-3 w-3"})," ",V.group]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[i.jsx(Ud,{className:"h-4 w-4 text-gray-400"}),p[V.accessScope]||V.accessScope]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("button",{onClick:()=>Ue(V.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${V.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:V.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(Os,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):i.jsxs(i.Fragment,{children:[i.jsx(J_,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>H(V),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:i.jsx(Ao,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>_e(V.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:i.jsx(Fn,{className:"h-4 w-4"})})]})})]},V.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Fr,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:i.jsxs("span",{children:["Tng s ",R.length," ngi dng"]})})]})}):i.jsx(nO,{})}),D&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[Q?i.jsx(Ao,{className:"h-5 w-5"}):i.jsx(So,{className:"h-5 w-5"}),Q?"Cp nht thng tin":"To ti khon mi"]}),i.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"userForm",onSubmit:Se,className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[i.jsx(Fr,{className:"h-4 w-4"})," Thng tin ti khon"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,disabled:Q,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${Q?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:S.username||"",onChange:V=>j({...S,username:V.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:S.email||"",onChange:V=>j({...S,email:V.target.value})})]})]}),Q?i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),i.jsx("button",{type:"button",onClick:()=>ye(!me),className:"text-xs text-blue-600 hover:underline font-medium",children:me?"Hy i mt khu":"Reset mt khu"})]}),me&&i.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[i.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:A,onChange:V=>M(V.target.value)}),i.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",required:!Q,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:A,onChange:V=>M(V.target.value)}),i.jsx(pl,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:S.fullName||"",onChange:V=>j({...S,fullName:V.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:S.group||"T Chuyn Mn",onChange:V=>j({...S,group:V.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:S.roleLabel||"Gio vin",onChange:ge,children:[i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),i.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),i.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),i.jsx("option",{value:"Gio vin",children:"Gio vin"}),i.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),i.jsx("option",{value:"K ton",children:"K ton"}),i.jsx("option",{value:"Vn th",children:"Vn th"}),i.jsx("option",{value:"Y t",children:"Y t"}),i.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),P(),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[i.jsx(zg,{className:"h-4 w-4"})," Quyn hn b sung"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((ne=S.permissions)==null?void 0:ne.includes("manage_documents"))||!1,onChange:V=>{const q=S.permissions||[];V.target.checked?j({...S,permissions:[...q,"manage_documents"]}):j({...S,permissions:q.filter(le=>le!=="manage_documents")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),i.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((xe=S.permissions)==null?void 0:xe.includes("manage_office_docs"))||!1,onChange:V=>{const q=S.permissions||[];V.target.checked?j({...S,permissions:[...q,"manage_office_docs"]}):j({...S,permissions:q.filter(le=>le!=="manage_office_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),i.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((G=S.permissions)==null?void 0:G.includes("manage_boarding_docs"))||!1,onChange:V=>{const q=S.permissions||[];V.target.checked?j({...S,permissions:[...q,"manage_boarding_docs"]}):j({...S,permissions:q.filter(le=>le!=="manage_boarding_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),i.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((pe=S.permissions)==null?void 0:pe.includes("manage_plans"))||!1,onChange:V=>{const q=S.permissions||[];V.target.checked?j({...S,permissions:[...q,"manage_plans"]}):j({...S,permissions:q.filter(le=>le!=="manage_plans")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),i.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((Y=S.permissions)==null?void 0:Y.includes("access_system_admin"))||!1,onChange:V=>{const q=S.permissions||[];V.target.checked?j({...S,permissions:[...q,"access_system_admin"]}):j({...S,permissions:q.filter(le=>le!=="access_system_admin")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),i.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",form:"userForm",disabled:k,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?i.jsxs(i.Fragment,{children:[i.jsx(bi,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Au,{className:"h-4 w-4"})," ",Q?"Lu thay i":"To ti khon"]})})]})]})})]})},rO={admin:"Ban Gim Hiu",vice_principal:"Ph Hiu Trng",head_teacher:"T Trng Chuyn Mn",vice_head_teacher:"T Ph Chuyn Mn",teacher:"Gio Vin",staff:"Nhn Vin",office_head:"T Trng Vn Phng"},aO=async()=>{const s=Sn(It(we,"users"),ar("role","==","admin"));return(await vr(s)).docs.map(t=>t.id)},iO=async()=>{const s=Sn(It(we,"users"),ar("role","==","head_teacher"));return(await vr(s)).docs.map(t=>t.id)},lO=async s=>{const e=Sn(It(we,"users"),ar("role","==","teacher"),ar("group","==",s));return(await vr(e)).docs.map(a=>a.id)},oO=async s=>{const e=Sn(It(we,"users"),ar("role","==","teacher"),ar("accessScope","==",s));return(await vr(e)).docs.map(a=>a.id)},er=async(s,e,t)=>{var a,o,u,h;try{let g=[];const x=await aO();if(t.type==="office"){if(s==="upload"&&e.role==="staff"&&(g=[...x]),s==="comment"){const _=(a=t.extraInfo)==null?void 0:a.uploaderId;_&&g.push(_),g=[...g,...x]}}else if(t.type==="class"){const _=(o=t.extraInfo)==null?void 0:o.classId;if(s==="upload"&&e.role==="teacher"){const N=await iO();g=[...x,...N]}else s==="comment"&&((u=t.extraInfo)!=null&&u.uploaderId?g=[t.extraInfo.uploaderId]:(e.role==="admin"||e.role==="head_teacher"||e.role==="vice_head_teacher")&&_&&(g=[...await oO(_)]))}else if(t.type==="group")if(s==="upload"&&e.role==="head_teacher")if(e.group){const _=await lO(e.group);g=[...x,..._]}else g=[...x];else(s==="comment"||s==="system")&&(h=t.extraInfo)!=null&&h.uploaderId&&g.push(t.extraInfo.uploaderId);else t.type==="boarding"&&e.role==="staff"&&(g=[...x]);if(g=g.filter(_=>_!==e.id),g=[...new Set(g)],g.length===0){console.log("No receivers for this notification. Skipping.");return}let p=e.fullName||e.name;(!p||p===e.role||p==="head_teacher"||p==="vice_head_teacher")&&(p=rO[e.role]||e.role);const b={senderId:e.id,senderName:p,senderAvatar:e.avatar||"",targetPath:t.targetPath,message:`${s==="upload"?" ti ln":" gp  vo"} ${t.name||"ti liu"}`,type:s,isRead:!1,createdAt:new Date().toISOString(),receivers:g,metadata:{fileName:t.name}};await Sl(It(we,"notifications"),b),console.log(`Notification sent to ${g.length} users.`)}catch(g){console.error("Error creating notification:",g)}},cO=s=>{switch(s){case"excel":return i.jsx(Z_,{className:"h-6 w-6 text-green-600"});case"word":return i.jsx(it,{className:"h-6 w-6 text-blue-600"});case"pdf":return i.jsx(Yp,{className:"h-6 w-6 text-red-600"});default:return i.jsx(it,{className:"h-6 w-6 text-gray-500"})}},uO=()=>{var Y,V;const s=ir(),{user:e}=Es(),{currentSchoolYear:t}=Yu(),{addToast:a}=Er(),[o,u]=E.useState([]),[h,g]=E.useState("all"),[x,p]=E.useState(""),[b,_]=E.useState(null),[N,I]=E.useState(!1),[U,$]=E.useState(""),[z,D]=E.useState(!1),Z=E.useRef(null),[Q,ae]=E.useState(!1),[me,ye]=E.useState(null),[S,j]=E.useState({name:"",category:"general",note:""}),[A,M]=E.useState(!1),[k,O]=E.useState(null),R=e,_e=E.useMemo(()=>b?o.find(q=>q.id===b.id)||b:null,[o,b]);E.useEffect(()=>{const q=Sn(It(we,"office_docs"),Qo("uploadDate","desc")),le=_r(q,Ie=>{const Ne=[];Ie.forEach(Ae=>{const Ve=Ae.data();(Ve.schoolYear||"2025-2026")===t&&Ne.push({id:Ae.id,...Ve,comments:Ve.comments||[]})}),u(Ne)});return()=>le()},[t]);const Pe=o.filter(q=>{const le=h==="all"||q.category===h,Ie=q.name.toLowerCase().includes(x.toLowerCase())||q.uploader.name.toLowerCase().includes(x.toLowerCase());return le&&Ie});E.useEffect(()=>{var q;N&&((q=Z.current)==null||q.scrollIntoView({behavior:"smooth"}))},[_e==null?void 0:_e.comments,N]);const H=q=>{_(q),I(!0)},ge=(q,le)=>{le.stopPropagation(),O(q),M(!0)},Se=async()=>{if(k)try{await jl(He(we,"office_docs",k.id)),a(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),M(!1),O(null),(b==null?void 0:b.id)===k.id&&(I(!1),_(null))}catch(q){console.error("Error deleting document: ",q),a("Li","Khng th xa h s.","error")}},Ue=async q=>{if(q.preventDefault(),!U.trim()||!_e||!R)return;const le={id:Date.now().toString(),userId:R.id,userName:R.fullName,userRole:R.role,content:U,timestamp:new Date().toISOString()};try{const Ie=He(we,"office_docs",_e.id);await Ht(Ie,{comments:Po(le)}),$(""),a(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),R&&await er("comment",R,{type:"office",name:_e.name,targetPath:"/office-documents",extraInfo:{uploaderId:_e.uploader.id}})}catch(Ie){console.error("Error adding comment: ",Ie),a("Li","Khng th gi bnh lun.","error")}},Ge=q=>{switch(q){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},P=()=>{j({name:"",category:h==="all"?"general":h,note:""}),ye(null),ae(!0)},ne=q=>{if(q.preventDefault(),q.dataTransfer.files&&q.dataTransfer.files[0]){const le=q.dataTransfer.files[0];ye(le),S.name||j(Ie=>({...Ie,name:le.name.split(".")[0]}))}},xe=q=>{if(q.target.files&&q.target.files[0]){const le=q.target.files[0];ye(le),S.name||j(Ie=>({...Ie,name:le.name.split(".")[0]}))}},G=async()=>{if(me)try{let q="#";const le=rr(Ps,`office_docs/${Date.now()}_${me.name}`);await nr(le,me),q=await sr(le);const Ie={...S,uploader:{id:(R==null?void 0:R.id)||"unknown",name:(R==null?void 0:R.fullName)||"n danh",avatar:(R==null?void 0:R.avatar)||"",role:(R==null?void 0:R.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),schoolYear:t,comments:[],type:me.name.split(".").pop()||"file",fileType:me.name.split(".").pop()||"file",fileUrl:q};await Sl(It(we,"office_docs"),Ie),a("Ti ln thnh cng!",` lu h s: ${S.name}`,"success"),ae(!1)}catch(q){console.error("Error adding document: ",q),a("Li","Khng th ti ln h s.","error")}},pe=(q=!1)=>{if(!_e)return null;const le=_e.fileUrl;if(le&&le!=="#"){const Ie=Qu(le);return Ie==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(it,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:le,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:Ie,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(it,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:"bg-white border-b border-teal-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("span",{className:"p-2 bg-teal-100 rounded-lg text-teal-700",children:i.jsx(it,{className:"h-6 w-6"})}),"Kho K hoch & Bo co"]}),(((Y=e==null?void 0:e.permissions)==null?void 0:Y.includes("manage_documents"))||((V=e==null?void 0:e.permissions)==null?void 0:V.includes("manage_office_docs")))&&i.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-md transition-colors font-medium",children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),i.jsxs("nav",{className:"space-y-1",children:[i.jsxs("button",{onClick:()=>g("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${h==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${h==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),i.jsxs("button",{onClick:()=>g("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${h==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(BS,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),i.jsxs("button",{onClick:()=>g("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${h==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(aA,{className:"h-4 w-4"}),"Y t & Bn tr"]}),i.jsxs("button",{onClick:()=>g("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${h==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(it,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),i.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-6 flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 max-w-md shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:[i.jsx(_l,{className:"h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:x,onChange:q=>p(q.target.value)})]}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Pe.map(q=>i.jsxs("tr",{onClick:()=>H(q),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:cO(q.type)}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:q.name}),i.jsx("div",{className:"text-xs text-gray-500",children:Ge(q.category)})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:q.uploader.name.charAt(0)}),i.jsxs("div",{className:"ml-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.uploader.name}),i.jsx("div",{className:"text-xs text-gray-500",children:q.uploader.role})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(q.uploadDate).toLocaleDateString("vi-VN")}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(q.comments||[]).length>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[i.jsx(jo,{className:"w-3 h-3 mr-1"}),(q.comments||[]).length," Gp  mi"]}):i.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:le=>le.stopPropagation(),children:[i.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:i.jsx(Ls,{className:"h-4 w-4"})}),i.jsx("button",{onClick:le=>ge(q,le),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:i.jsx(Fn,{className:"h-4 w-4"})})]})})]},q.id))})]})})]})]}),A&&k&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',k.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Se,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),N&&_e&&i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>I(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:Ge(_e.category)}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:_e.name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>I(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(fn,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>D(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(Xp,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:pe(!1)})]}),i.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:_e.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(_e.uploadDate).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx(jo,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[(_e.comments||[]).length>0?(_e.comments||[]).map(q=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:q.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:q.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:q.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800",children:q.content})]})]},q.id)):i.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),i.jsx("div",{ref:Z})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:i.jsxs("form",{onSubmit:Ue,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:U,onChange:q=>$(q.target.value)}),i.jsx("button",{type:"submit",disabled:!U.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:i.jsx(Co,{className:"h-4 w-4"})})]})})]})]})]})]}),Q&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),i.jsx("button",{onClick:()=>ae(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:S.name,onChange:q=>j({...S,name:q.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:S.category,onChange:q=>j({...S,category:q.target.value}),children:[i.jsx("option",{value:"general",children:"Hnh chnh chung"}),i.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),i.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:ne,onDragOver:q=>q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${me?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:xe}),me?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(Os,{className:"h-10 w-10 text-teal-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:me.name}),i.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(me.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${S.category==="finance"?"bg-green-100 text-green-600":S.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:i.jsx(cf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),i.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:S.note,onChange:q=>j({...S,note:q.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:G,disabled:!me,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},hO=({type:s})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(s){case"excel":return i.jsx(Z_,{className:`${e} text-green-600`});case"pdf":return i.jsx(Yp,{className:`${e} text-red-500`});case"word":return i.jsx(it,{className:`${e} text-blue-600`});default:return i.jsx(it,{className:`${e} text-gray-400`})}},dO=()=>{const s=ir(),{user:e}=Es(),{addToast:t}=Er(),[a,o]=E.useState([]),[u,h]=E.useState("menu"),[g,x]=E.useState(""),[p,b]=E.useState(null),[_,N]=E.useState(!1),[I,U]=E.useState(""),$=E.useRef(null),[z,D]=E.useState(!1),[Z,Q]=E.useState(null),[ae,me]=E.useState({type:"menu",startDate:"",endDate:"",name:""}),[ye,S]=E.useState(!1),[j,A]=E.useState(null),[M,k]=E.useState(!1),O=e;E.useEffect(()=>{const G=Sn(It(we,"boarding_docs"),Qo("uploadDate","desc")),pe=_r(G,Y=>{const V=[];Y.forEach(q=>{V.push({id:q.id,...q.data()})}),o(V)});return()=>pe()},[]);const R=a.filter(G=>{const pe=G.category===u,Y=G.name.toLowerCase().includes(g.toLowerCase());return pe&&Y});E.useEffect(()=>{var G;_&&((G=$.current)==null||G.scrollIntoView({behavior:"smooth"}))},[p==null?void 0:p.comments,_]),E.useEffect(()=>{if(ae.type==="menu"&&ae.startDate&&ae.endDate){const G=new Date(ae.startDate);new Date(ae.endDate);const pe=new Date(G.getFullYear(),0,1),Y=Math.floor((G.getTime()-pe.getTime())/(1440*60*1e3)),V=Math.ceil((G.getDay()+1+Y)/7);me(q=>({...q,name:`Thc n Tun ${V} - Thng ${G.getMonth()+1}`}))}},[ae.startDate,ae.endDate,ae.type]);const _e=G=>{b(G),N(!0)},Pe=(G,pe)=>{pe&&pe.stopPropagation(),A(G),S(!0)},H=async()=>{if(j)try{await jl(He(we,"boarding_docs",j.id)),t(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),S(!1),A(null),(p==null?void 0:p.id)===j.id&&(N(!1),b(null))}catch(G){console.error("Error deleting document: ",G),t("Li","Khng th xa h s.","error")}},ge=async G=>{if(G.preventDefault(),!I.trim()||!p||!O)return;const pe={id:Date.now().toString(),userId:O.id,userName:O.fullName,userRole:O.role,content:I,timestamp:new Date().toISOString()};try{const Y=He(we,"boarding_docs",p.id);await Ht(Y,{comments:Po(pe)});const V={...p,comments:[...p.comments,pe]};b(V),U(""),t(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await er("comment",O,{type:"boarding",name:p.name,targetPath:"/boarding-menu"})}catch(Y){console.error("Error adding comment: ",Y),t("Li","Khng th gi bnh lun.","error")}},Se=G=>{switch(G){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},Ue=()=>{me({type:u==="menu"?"menu":u==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),Q(null),D(!0)},Ge=G=>{if(G.preventDefault(),G.dataTransfer.files&&G.dataTransfer.files[0]){const pe=G.dataTransfer.files[0];Q(pe),!ae.name&&ae.type!=="menu"&&me(Y=>({...Y,name:pe.name.split(".")[0]}))}},P=G=>{if(G.target.files&&G.target.files[0]){const pe=G.target.files[0];Q(pe),!ae.name&&ae.type!=="menu"&&me(Y=>({...Y,name:pe.name.split(".")[0]}))}},ne=async()=>{if(Z)try{const G=rr(Ps,`boarding_docs/${Date.now()}_${Z.name}`),pe=await nr(G,Z),Y=await sr(pe.ref),V={...ae,uploader:{id:(O==null?void 0:O.id)||"unknown",name:(O==null?void 0:O.fullName)||"n danh",avatar:(O==null?void 0:O.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:Z.name.split(".").pop()||"file",category:u,fileUrl:Y};await Sl(It(we,"boarding_docs"),V),t("Ti ln thnh cng!",` lu h s: ${ae.name}`,"success"),D(!1),O&&await er("upload",O,{type:"boarding",name:ae.name,targetPath:"/boarding-menu"})}catch(G){console.error("Error adding document: ",G),t("Li","Khng th ti ln h s.","error")}},xe=(G=!1)=>{if(!p)return null;if(p.fileUrl&&p.fileUrl!=="#"){const pe=Qu(p.fileUrl);return pe==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(it,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:p.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:pe,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[i.jsx(it,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:"bg-white border-b border-emerald-100 px-6 py-4 flex-shrink-0 z-20 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("span",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-700",children:i.jsx(op,{className:"h-6 w-6"})}),"Qun l Bn tr & Dinh dng"]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[i.jsx(pl,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),i.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5",children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),i.jsxs("nav",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>h("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(op,{className:"h-4 w-4"}),"Thc n Tun"]}),i.jsxs("button",{onClick:()=>h("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(bo,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),i.jsxs("button",{onClick:()=>h("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${u==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(WS,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),i.jsxs("div",{className:"flex-1 bg-gray-50 overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-800",children:Se(u)}),i.jsxs("div",{className:"relative",children:[i.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:g,onChange:G=>x(G.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64 bg-white shadow-sm"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[R.map(G=>i.jsxs("div",{onClick:()=>_e(G),className:"group bg-white rounded-2xl border border-gray-100 p-6 shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),i.jsx(hO,{type:G.type}),i.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:G.name}),i.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["ng bi ",i.jsx("span",{className:"font-medium text-gray-700",children:G.uploader.name})]}),i.jsxs("div",{className:"w-full pt-4 border-t border-gray-50 flex items-center justify-between mt-auto relative z-10",children:[i.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[i.jsx(gl,{className:"h-3 w-3"}),new Date(G.uploadDate).toLocaleDateString("vi-VN")]}),i.jsxs("div",{className:"flex items-center gap-1",children:[G.comments.length>0&&i.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded-full mr-1",children:[i.jsx(hl,{className:"h-3 w-3"}),G.comments.length]}),i.jsx("button",{onClick:pe=>Pe(G,pe),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:i.jsx(Fn,{className:"h-4 w-4"})})]})]})]},G.id)),R.length===0&&i.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:i.jsx(it,{className:"h-8 w-8 text-gray-300"})}),i.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),ye&&j&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',j.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:H,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),_&&p&&i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>N(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:i.jsx(it,{className:"h-5 w-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:p.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{p.fileUrl&&p.fileUrl!=="#"?window.open(p.fileUrl,"_blank"):t("Khng c file","Ti liu ny khng c file nh km.","warning")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>k(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(Xp,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:xe(!1)})]}),i.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:p.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(p.uploadDate).toLocaleDateString("vi-VN")})]}),p.category==="menu"&&p.startDate&&p.endDate&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[i.jsx(gl,{className:"h-3 w-3"}),i.jsx("span",{children:new Date(p.startDate).toLocaleDateString("vi-VN")}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(p.endDate).toLocaleDateString("vi-VN")})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx(hl,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),i.jsxs("div",{className:"space-y-4",children:[p.comments&&p.comments.length>0?p.comments.map(G=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:G.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:G.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:G.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:G.content}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(G.timestamp).toLocaleString("vi-VN")})]})]},G.id)):i.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[i.jsx(hl,{className:"h-10 w-10 mb-2 opacity-50"}),i.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),i.jsx("div",{ref:$})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[i.jsxs("form",{onSubmit:ge,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:I,onChange:G=>U(G.target.value)}),i.jsx("button",{type:"submit",disabled:!I.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:i.jsx(Co,{className:"h-4 w-4"})})]}),i.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[i.jsx(pl,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]}),M&&p&&i.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:i.jsx(it,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:p.name}),i.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:i.jsx(Jp,{className:"h-5 w-5"})}),i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:i.jsx(Wp,{className:"h-5 w-5"})}),i.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),i.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:xe(!0)})]}),z&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),i.jsx("button",{onClick:()=>D(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(G=>i.jsx("button",{onClick:()=>me(pe=>({...pe,type:G.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${ae.type===G.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:G.label},G.id))})]}),ae.type==="menu"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:ae.startDate,onChange:G=>me({...ae,startDate:G.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:ae.endDate,onChange:G=>me({...ae,endDate:G.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:ae.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:ae.name,onChange:G=>me({...ae,name:G.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:Ge,onDragOver:G=>G.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Z?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:P}),Z?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(Os,{className:"h-10 w-10 text-emerald-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:Z.name}),i.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(Z.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:i.jsx(cf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:ne,disabled:!Z,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},yT=({file:s,onClose:e,onSaveSuccess:t,onFileUpdate:a,collectionName:o,storageFolder:u="files",canEdit:h=!1,canApprove:g=!1,canComment:x=!1,canRespond:p=!1,onApprove:b,onRequestRevision:_,onPostComment:N,onEditComment:I,onDeleteComment:U,canManageComment:$})=>{var tn;const[z,D]=E.useState(!0),[Z,Q]=E.useState(!1),[ae,me]=E.useState(null),[ye,S]=E.useState(null),[j,A]=E.useState(!1),[M,k]=E.useState(null),[O,R]=E.useState(!1),[_e,Pe]=E.useState(null),[H,ge]=E.useState(""),[Se,Ue]=E.useState(!1),[Ge,P]=E.useState(""),[ne,xe]=E.useState(null),[G,pe]=E.useState(null),[Y,V]=E.useState(null),[q,le]=E.useState(null),{user:Ie}=Es(),Ne=E.useRef(null),Ae=E.useRef(Date.now()),Ve=(Fe,$e="info")=>{Pe({message:Fe,type:$e}),setTimeout(()=>Pe(null),3e3)},et=()=>{var $e,pt,Ut;return s.type?s.type.toLowerCase():((Ut=(pt=($e=s.url)==null?void 0:$e.split(".").pop())==null?void 0:pt.split("?")[0])==null?void 0:Ut.toLowerCase())||""},vt=()=>{const Fe=et(),$e=s.name.replace(/\.[^/.]+$/,"");return["xlsx","xls","csv"].includes(Fe)?`${$e}.xlsx`:["pptx","ppt"].includes(Fe)?`${$e}.pptx`:Fe==="pdf"?`${$e}.pdf`:`${$e}.docx`},Xt=()=>{const Fe=et();return!["pdf"].includes(Fe)};E.useEffect(()=>{s.url&&(me(s.url),xe(null))},[s.url]),E.useEffect(()=>{(async()=>{if(!h||!s.uploaderId){k(null);return}try{const $e=He(we,"users",s.uploaderId),pt=await br($e);if(pt.exists()){const Ut=pt.data();k(Ut.signatureUrl||null)}}catch($e){console.error("Error fetching author signature:",$e),k(null)}})()},[h,s.uploaderId]);const Pt=()=>{var Ut;if(!M)return;const $e=`chu_ky_${((Ut=s.uploader)==null?void 0:Ut.replace(/\s+/g,"_"))||"author"}.png`,pt=new Image;pt.crossOrigin="anonymous",pt.onload=()=>{const on=document.createElement("canvas");on.width=pt.naturalWidth,on.height=pt.naturalHeight;const Dn=on.getContext("2d");Dn&&(Dn.drawImage(pt,0,0),on.toBlob(On=>{if(On){const $n=URL.createObjectURL(On),Gt=document.createElement("a");Gt.href=$n,Gt.download=$e,document.body.appendChild(Gt),Gt.click(),document.body.removeChild(Gt),URL.revokeObjectURL($n),Ve(" ti ch k thnh cng!","success")}},"image/png"))},pt.onerror=()=>{console.error("Error loading signature image"),Ve("Li khi ti ch k","error")},pt.src=M};E.useEffect(()=>{const Fe=async $e=>{if($e.data.type==="FILE_SAVED"&&$e.data.base64&&await Tn($e.data.base64),$e.data.type==="FILE_LOAD_ERROR"){console.error("File load error from iframe:",$e.data);const pt=$e.data.code==="88"?"Ti liu c nh dng phc tp hoc qu ln, khng th xem trc trc tip.":`Li ti ti liu: ${$e.data.message}`;xe(pt),D(!1)}$e.data.type==="SAVE_NOT_ALLOWED"&&Ve($e.data.message||"Bn khng phi l tc gi ca file, vui lng lin h tc gi  yu cu chnh sa.","error"),$e.data.type==="SAVE_ERROR"&&(console.error("Save error from editor:",$e.data.message),$e.data.message&&($e.data.message.includes("code: 88")||$e.data.message.includes("code 88"))?console.log("Ignored error code 88 toast"):Ve("Li khi lu: "+($e.data.message||"Unknown error"),"error"),Q(!1))};return window.addEventListener("message",Fe),()=>window.removeEventListener("message",Fe)},[s,u,o]);const Tn=async Fe=>{if(h){Q(!0);try{const $e=atob(Fe.split(",")[1]),pt=new ArrayBuffer($e.length),Ut=new Uint8Array(pt);for(let Mn=0;Mn<$e.length;Mn++)Ut[Mn]=$e.charCodeAt(Mn);const on=et();let Dn="application/vnd.openxmlformats-officedocument.wordprocessingml.document";["xlsx","xls"].includes(on)&&(Dn="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),["pptx","ppt"].includes(on)&&(Dn="application/vnd.openxmlformats-officedocument.presentationml.presentation");const On=new Blob([pt],{type:Dn}),$n=Date.now(),Gt=s.name.replace(/[^a-zA-Z0-9]/g,"_"),kt=`${u}/${$n}_${Gt}.${on==="docx"||on==="doc"?"docx":on}`,mn=rr(Ps,kt);await nr(mn,On,{contentType:Dn});const Tt=await sr(mn),zs=He(we,o,s.id);await Ht(zs,{url:Tt,lastModified:new Date().toISOString()}),t==null||t(Tt),Ve(" lu thnh cng!","success")}catch($e){console.error("Error saving:",$e),Ve("Li khi lu: "+$e.message,"error")}finally{Q(!1)}}},Nt=()=>{if(!H.trim())return;const Fe=x?"comment":"response";N==null||N(H.trim(),Fe),ge(""),le(null)},qt=()=>{b==null||b()},kn=()=>{Ue(!0)},ts=()=>{Ge.trim()&&(_==null||_(Ge.trim()),Ue(!1),P(""))},hs=()=>{if(!s.approval)return null;const Fe=s.approval.status;return Fe==="approved"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[i.jsx(Os,{className:"h-3 w-3"}),"  duyt"]}):Fe==="needs_revision"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1",children:[i.jsx(Zn,{className:"h-3 w-3"})," Cn sa"]}):i.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700",children:"Ch duyt"})};return i.jsxs("div",{className:"fixed inset-0 z-[70] flex bg-gray-900",children:[i.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:i.jsx(it,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold text-base line-clamp-1",children:s.name}),i.jsx("p",{className:"text-xs text-blue-100 opacity-80",children:Xt()?"Chnh sa trc tip":"Ch xem"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[h&&M&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:Pt,className:"flex items-center gap-2 px-3 py-2 bg-indigo-500 hover:bg-indigo-600 rounded-lg transition-colors text-sm font-medium",title:"Ti ch k",children:[i.jsx(ls,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Ti ch k"})]}),i.jsx("button",{onClick:()=>R(!0),className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Hng dn chn ch k",children:i.jsx(iC,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"text-xs bg-blue-800 px-2 py-1 rounded text-blue-200",children:Z?"ang lu...":"T ng lu khi Save"}),i.jsx("a",{href:s.url,download:s.name,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-5 w-5"})}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-blue-500 rounded-full transition-colors",children:i.jsx(fn,{className:"h-5 w-5"})})]})]}),i.jsx("div",{className:"flex-1 relative bg-gray-100",children:ne?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Khng th xem trc ti liu"}),i.jsx("p",{className:"text-gray-600 max-w-md mb-6",children:ne}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("a",{href:s.url,download:s.name,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg flex items-center justify-center gap-2 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Ti xung"]}),i.jsxs("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(s.url)}&embedded=true`,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 font-bold rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(gC,{className:"h-5 w-5"}),"Xem bng Google Viewer"]})]})]}):i.jsxs(i.Fragment,{children:[s.url&&i.jsx("iframe",{ref:Ne,src:`/office/index.html?t=${Ae.current}&src=${encodeURIComponent(s.url)}&filename=${encodeURIComponent(vt())}&locale=en&mode=edit&canSave=${h&&Xt()?"true":"false"}`,className:"w-full h-full border-none",title:"Document Editor",onLoad:()=>D(!1)}),z&&i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:[i.jsx(bi,{className:"h-10 w-10 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"ang ti ti liu..."})]})]})})]}),i.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng tin file"}),hs()]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(Fr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:s.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(au,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:s.date?new Date(s.date).toLocaleDateString("vi-VN"):"Khng r"})]})]})]}),g&&((tn=s.approval)==null?void 0:tn.status)!=="approved"&&i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-blue-50 flex gap-2",children:[i.jsxs("button",{onClick:qt,className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(Os,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:kn,className:"flex-1 px-3 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(Zn,{className:"h-4 w-4"})," Yu cu sa"]})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"p-3 bg-white border-b border-gray-100 flex items-center gap-2",children:[i.jsx(jo,{className:"h-4 w-4 text-gray-500"}),i.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:"Lch s trao i"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:(s.comments||[]).length===0?i.jsx("p",{className:"text-sm text-gray-400 italic text-center py-4",children:"Cha c trao i no"}):(s.comments||[]).map(Fe=>{var $e;return i.jsxs("div",{className:`flex gap-2 ${Fe.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`h-7 w-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 text-white
                                        ${Fe.type==="request"?"bg-amber-500":Fe.type==="response"?"bg-blue-500":"bg-gray-400"}`,children:(($e=Fe.userName)==null?void 0:$e.charAt(0))||"U"}),i.jsxs("div",{className:`flex-1 p-2 rounded-lg text-sm ${Fe.type==="response"?"bg-blue-50":"bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-semibold text-gray-700 text-xs",children:Fe.userName}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(Fe.timestamp).toLocaleDateString("vi-VN")}),($==null?void 0:$(Fe))&&i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[i.jsx("button",{onClick:()=>pe({id:Fe.id,content:Fe.content}),className:"p-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx(ls,{className:"h-3 w-3"})}),i.jsx("button",{onClick:()=>V(Fe.id),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx(Fn,{className:"h-3 w-3"})})]})]})]}),i.jsx("p",{className:"text-gray-600",children:Fe.content}),p&&Fe.type==="request"&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:!q||q!==Fe.id?i.jsxs("button",{onClick:()=>le(Fe.id),className:"text-xs text-blue-600 hover:text-blue-800 font-bold flex items-center gap-1 transition-colors",children:[i.jsx(jo,{className:"h-3 w-3"}),"Phn hi yu cu ny"]}):i.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 duration-200",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",autoFocus:!0,value:H,onChange:pt=>ge(pt.target.value),placeholder:"Nhp ni dung phn hi...",className:"flex-1 px-3 py-2 text-sm border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",onKeyDown:pt=>pt.key==="Enter"&&Nt()}),i.jsx("button",{onClick:Nt,disabled:!H.trim(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 shadow-sm",children:i.jsx(Co,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>{le(null),ge("")},className:"px-2 py-2 text-gray-400 hover:bg-gray-100 rounded-lg",children:i.jsx(fn,{className:"h-4 w-4"})})]})})})]})]},Fe.id)})})]})]}),Se&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Yu cu sa li"}),i.jsx("textarea",{value:Ge,onChange:Fe=>P(Fe.target.value),placeholder:"Nhp l do yu cu sa...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>{Ue(!1),P("")},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:ts,disabled:!Ge.trim(),className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Gi yu cu"})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Chnh sa gp "}),i.jsx("textarea",{value:G.content,onChange:Fe=>pe({...G,content:Fe.target.value}),placeholder:"Nhp ni dung gp ...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>pe(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{G.content.trim()&&I&&(I(G.id,G.content.trim()),pe(null))},disabled:!G.content.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Lu thay i"})]})]})}),Y&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Xc nhn xa"}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{U&&(U(Y),V(null))},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold",children:"Xa"})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-[500px] max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(AC,{className:"h-5 w-5 text-blue-600"}),"Hng dn chn ch k vo ti liu"]}),i.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(fn,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:" Lu  quan trng:"}),i.jsx("p",{className:"text-blue-700",children:"Bn va ti xung file ch k. Hy lm theo cc bc di y  chn ch k vo ti liu Word ca bn."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"M ti liu Word"}),i.jsx("p",{className:"text-gray-600",children:"M ti liu cn chn ch k bng Microsoft Word hoc ng dng son tho vn bn."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"t con tr ti v tr mun chn"}),i.jsx("p",{className:"text-gray-600",children:"Click vo v tr trong ti liu ni bn mun t ch k (thng l cui trang hoc di vn bn)."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Vo menu Insert (Chn)"}),i.jsxs("p",{className:"text-gray-600",children:["Trn thanh menu, chn tab ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Insert"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Chn"}),")."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn Image  Image From File"}),i.jsxs("p",{className:"text-gray-600",children:["Click vo ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Picture"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Hnh nh"}),"), sau  chn ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"This Device"})," hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"From File"}),"."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn file ch k va ti"}),i.jsxs("p",{className:"text-gray-600",children:["Tm v chn file ch k ",i.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded text-xs",children:"chu_ky_[tn_ca_bn].png"})," trong th mc Downloads."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"6"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"iu chnh kch thc v v tr"}),i.jsx("p",{className:"text-gray-600",children:"Sau khi chn, bn c th ko gc nh  thay i kch thc v di chuyn n v tr mong mun."})]})]})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[i.jsx("p",{className:"font-semibold text-green-800 mb-1",children:" Hon thnh!"}),i.jsx("p",{className:"text-green-700 text-xs",children:"Ch k ca bn  c chn vo ti liu. Bn c th lu v chia s ti liu ny."})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:" hiu"})})]})}),_e&&i.jsxs("div",{className:`fixed bottom-4 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-lg shadow-lg text-white font-medium flex items-center gap-2
                    ${_e.type==="success"?"bg-green-600":_e.type==="error"?"bg-red-600":"bg-blue-600"}`,children:[_e.type==="success"&&i.jsx("span",{children:""}),_e.type==="error"&&i.jsx("span",{children:""}),_e.message]})]})},fO=()=>{var Te,je,be,Ye,qe,at,Et,xt;const s=ir(),{user:e}=Es(),{addToast:t}=Er(),[a,o]=X_(),{currentSchoolYear:u}=Yu(),[h,g]=E.useState(null),[x,p]=E.useState(!1),[b,_]=E.useState(null),[N,I]=E.useState([]),[U,$]=E.useState([]);E.useEffect(()=>{const B=Sn(It(we,"plans"),Qo("uploadDate","desc")),fe=_r(B,ve=>{const Le=[],Me=[];ve.forEach(rt=>{const Dt=rt.data(),Vn={id:rt.id,...Dt};(Dt.schoolYear||"2025-2026")===u&&(Dt.type==="plan"?Le.push(Vn):Me.push(Vn))}),I(Le),$(Me)});return()=>fe()},[u]);const z=E.useRef(null);E.useEffect(()=>{const B=a.get("fileId"),fe=a.get("highlight");if(!B||fe!=="true"||N.length===0&&U.length===0||z.current===B)return;const ve=N.find(rt=>rt.id===B),Le=U.find(rt=>rt.id===B),Me=ve||Le;if(Me){z.current=B,g(B),o({},{replace:!0});const rt=document.getElementById(`file-${B}`);rt&&rt.scrollIntoView({behavior:"smooth",block:"center"});const Dt=setTimeout(()=>{Z(Me),ae(!0)},300),Vn=setTimeout(()=>{g(null),z.current=null},5e3);return()=>{clearTimeout(Dt),clearTimeout(Vn)}}},[a,N,U,o]);const[D,Z]=E.useState(null),[Q,ae]=E.useState(!1),[me,ye]=E.useState(!1),[S,j]=E.useState(!1),[A,M]=E.useState(""),k=E.useRef(null),[O,R]=E.useState(null),[_e,Pe]=E.useState(""),[H,ge]=E.useState(!1),[Se,Ue]=E.useState(null),[Ge,P]=E.useState(!1),[ne,xe]=E.useState(null),[G,pe]=E.useState({type:"plan",name:"",date:"",status:"draft"}),[Y,V]=E.useState(!1),[q,le]=E.useState(null),[Ie,Ne]=E.useState(!1),[Ae,Ve]=E.useState(null),[et,vt]=E.useState(""),[Xt,Pt]=E.useState(!1),[Tn,Nt]=E.useState(null),qt=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="vice_head_teacher"||(e==null?void 0:e.role)==="teacher",kn=B=>{if(!e)return!1;const fe=B,ve=fe.uploaderId&&fe.uploaderId===e.id,Le=B.uploader===e.fullName;return ve||Le},ts=B=>{var ve;return!e||((ve=B.approval)==null?void 0:ve.status)==="approved"?!1:["principal","admin"].includes(e.role)},hs=B=>{var Me;if(!e)return!1;const fe=(Me=B.approval)==null?void 0:Me.status;return fe==="approved"?!1:kn(B)&&fe==="needs_revision"},tn=B=>e?B.userId===e.id:!1,Fe=B=>{const fe=B,ve=fe.fileType,Le=fe.url||"",Me=Le.includes(".docx")||Le.includes(".doc"),rt=ve==="word"||ve==="docx"||Me;return console.log("[isWordFile] Checking:",{fileType:ve,url:Le.substring(0,50)+"...",hasWordExtension:Me,result:rt}),rt},$e=(B,fe)=>{fe.stopPropagation(),Nt(B),Pt(!0)},pt=()=>{t("Lu thnh cng","Ti liu  c cp nht.","success")},Ut=B=>e?["principal","admin"].includes(e.role):!1,on=async B=>{if(e)try{const fe=He(we,"plans",B.id);await Ht(fe,{approval:{status:"approved",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString()}}),t(" duyt",` duyt h s "${B.title}".`,"success"),await er("system",e,{type:"group",name:` duyt: ${B.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:B.uploaderId}})}catch(fe){console.error("Error approving plan:",fe),t("Li","Khng th duyt h s. Vui lng th li.","error")}},Dn=async B=>{if(!(!e||B.uploaderId!==e.id)&&window.confirm("Bn c chc chn mun CHT bin bn ny? Sau khi cht s hin th trng thi ' cht'."))try{const fe=He(we,"plans",B.id);await Ht(fe,{status:"finalized"}),t(" cht bin bn","Bin bn hp  c chuyn sang trng thi  cht.","success")}catch(fe){console.error("Error finalizing minute:",fe),t("Li","Khng th cht bin bn. Vui lng th li.","error")}},On=B=>{Ve(B),vt(""),Ne(!0)},$n=async()=>{if(!(!e||!Ae))try{const B=He(we,"plans",Ae.id),fe={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:et||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},ve={status:"needs_revision",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString(),rejectionReason:et};await Ht(B,{approval:ve,comments:Po(fe),commentCount:(Ae.commentCount||0)+1}),D&&D.id===Ae.id&&Z({...D,approval:ve,comments:[...D.comments||[],fe],commentCount:(D.commentCount||0)+1}),t(" gi yu cu sa",` yu cu sa li h s "${Ae.title}".`,"success"),await er("comment",e,{type:"group",name:`Yu cu sa: ${Ae.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${Ae.id}&highlight=true`,extraInfo:{uploaderId:Ae.uploaderId}}),Ne(!1),Ve(null),vt("")}catch(B){console.error("Error requesting revision:",B),t("Li","Khng th gi yu cu sa. Vui lng th li.","error")}};E.useEffect(()=>{var B;me&&((B=k.current)==null||B.scrollIntoView({behavior:"smooth"}))},[me,D]);const Gt=B=>{Z(B),ae(!0)},kt=B=>{if(!e)return!1;const fe=B,ve=fe.uploaderId&&fe.uploaderId===e.id,Le=B.uploader===e.fullName;return ve||Le},mn=(B,fe)=>{fe.stopPropagation(),le(B),V(!0)},Tt=async()=>{if(q&&!kt(q)){t("Khng c quyn","Bn khng th xa ti liu ca ngi khc.","error"),V(!1);return}if(q)try{await jl(He(we,"plans",q.id)),t(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),V(!1),le(null),(D==null?void 0:D.id)===q.id&&(ye(!1),Z(null))}catch(B){console.error("Error deleting document: ",B),t("Li","Khng th xa h s. Vui lng th li.","error")}},zs=async B=>{var ve;if(B.preventDefault(),!A.trim()||!D||!e||!hs(D))return;const fe={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:A,timestamp:new Date().toISOString(),type:"response"};try{const Le=He(we,"plans",D.id);await Ht(Le,{approval:{...D.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:Po(fe),commentCount:(D.commentCount||0)+1}),M(""),t(" gi phn hi","Phn hi ca bn  c gi. H s chuyn sang trng thi ch duyt.","success");const Me=(ve=D.approval)==null?void 0:ve.reviewerId;Me&&Me!==e.id&&await er("comment",e,{type:"group",name:`Phn hi t ${e.fullName}: ${D.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${D.id}&highlight=true`,extraInfo:{uploaderId:Me}})}catch(Le){console.error("Error adding response: ",Le),t("Li","Khng th gi phn hi.","error")}},Mn=B=>{Ue(B),ge(!0)},jr=async()=>{var B,fe;if(!(!e||!Se||!D))try{const ve=He(we,"plans",D.id),Le=D.comments.filter(Vn=>Vn.id!==Se.id),Me={comments:Le,commentCount:Le.length};let rt=(B=D.approval)==null?void 0:B.status,Dt=(fe=D.approval)==null?void 0:fe.rejectionReason;Se.type==="request"&&rt==="needs_revision"&&(rt="pending",Dt=void 0,Me["approval.status"]="pending",Me["approval.rejectionReason"]=du(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),await Ht(ve,Me),D&&Z({...D,comments:Le,commentCount:Le.length,approval:{...D.approval,status:rt,rejectionReason:Dt}}),t(" xa","Ni dung  c xa.","success"),ge(!1),Ue(null)}catch(ve){console.error("Error deleting comment:",ve),t("Li","Khng th xa ni dung.","error")}},ds=B=>{_(B),p(!0)},lr=async()=>{if(b)try{const B=He(we,"plans",b.id);await Ht(B,{"approval.status":"pending","approval.rejectionReason":du(),"approval.reviewedAt":new Date().toISOString()}),D&&D.id===b.id&&Z({...D,approval:{...D.approval,status:"pending",rejectionReason:void 0}}),t(" hon tc","Yu cu sa  c xa.","success"),p(!1),_(null)}catch(B){console.error("Error deleting active revision:",B),t("Li","Khng th xa yu cu.","error")}},Bt=async B=>{var ve,Le;const fe=prompt("Nhp ni dung yu cu sa mi:",(ve=B.approval)==null?void 0:ve.rejectionReason);if(!(fe===null||fe===((Le=B.approval)==null?void 0:Le.rejectionReason))){if(!fe.trim()){alert("Ni dung khng c  trng!");return}try{const Me=He(we,"plans",B.id);await Ht(Me,{"approval.rejectionReason":fe,"approval.reviewedAt":new Date().toISOString()}),D&&D.id===B.id&&Z({...D,approval:{...D.approval,rejectionReason:fe}}),t("Thnh cng"," cp nht yu cu sa.","success")}catch(Me){console.error("Error editing active revision:",Me),t("Li","Khng th cp nht yu cu.","error")}}},fs=async(B,fe)=>{if(!(!e||!_e.trim()))try{const ve=He(we,"plans",fe.id),Le=fe.comments.map(Me=>Me.id===B?{...Me,content:_e,editedAt:new Date().toISOString()}:Me);await Ht(ve,{comments:Le}),t(" cp nht","Gp   c chnh sa.","success"),R(null),Pe(""),await er("comment",e,{type:"group",name:` sa gp : ${fe.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:fe.uploaderId}})}catch(ve){console.error("Error editing comment:",ve),t("Li","Khng th chnh sa gp .","error")}},ms=B=>{R(B.id),Pe(B.content)},ns=()=>{pe({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),xe(null),P(!0)},Pi=B=>{if(B.preventDefault(),B.dataTransfer.files&&B.dataTransfer.files[0]){const fe=B.dataTransfer.files[0];xe(fe),G.name||pe(ve=>({...ve,name:fe.name.split(".")[0]}))}},na=B=>{if(B.target.files&&B.target.files[0]){const fe=B.target.files[0];xe(fe),G.name||pe(ve=>({...ve,name:fe.name.split(".")[0]}))}},ee=async()=>{if(!(!ne&&!G.name))try{let B="#",fe="word";if(ne){const Le=rr(Ps,`plans/${Date.now()}_${ne.name}`);await nr(Le,ne),B=await sr(Le),fe=ne.name.endsWith("pdf")?"pdf":"word"}const ve={...G,title:G.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploaderId:(e==null?void 0:e.id)||"",uploaderRole:(e==null?void 0:e.role)||"teacher",uploadDate:new Date().toISOString(),schoolYear:u,viewers:[],commentCount:0,comments:[],fileType:fe,url:B,approval:{status:"pending"}};await Sl(It(we,"plans"),ve),t("Ti ln thnh cng",` lu h s: ${G.name} (${G.type==="plan"?"K hoch":"Bin bn"})`,"success"),P(!1),e&&await er("upload",e,{type:"group",name:G.name,targetPath:"/to-chuyen-mon-ke-hoach"})}catch(B){console.error("Error adding document: ",B),t("Li","Khng th lu h s. Vui lng th li.","error")}},oe=(B=!1)=>{if(!D)return null;const fe=D.url;if(fe&&fe!=="#"){const ve=Qu(fe);return ve==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(it,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:fe,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:ve,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(it,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[i.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:i.jsx(it,{className:"h-6 w-6"})}),"H s T Chuyn Mn"]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),qt&&i.jsxs("button",{onClick:ns,className:"flex items-center gap-2 bg-orange-600 hover:bg-orange-700 text-white px-5 py-2.5 rounded-lg shadow-md transition-all font-medium",children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln Bin bn/K hoch"})]})]})]})}),i.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10 pb-20",children:[i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),i.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",i.jsx(xr,{className:"h-3 w-3"})]})]}),i.jsxs("div",{className:"grid gap-4",children:[N.map(B=>{var fe,ve,Le,Me,rt;return i.jsx("div",{id:`file-${B.id}`,onClick:()=>Gt(B),className:`bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition-all cursor-pointer group
                           ${h===B.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-100 hover:border-orange-200"}
                        `,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:i.jsx(it,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors",children:B.title}),((fe=B.approval)==null?void 0:fe.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase",children:[i.jsx(au,{className:"h-3 w-3"})," Ch duyt"]}),((ve=B.approval)==null?void 0:ve.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[i.jsx(pi,{className:"h-3 w-3"}),"  duyt"]}),(((Le=B.approval)==null?void 0:Le.status)==="rejected"||((Me=B.approval)==null?void 0:Me.status)==="needs_revision")&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-orange-100 text-orange-700 uppercase",title:B.approval.rejectionReason,children:[i.jsx(ls,{className:"h-3 w-3"})," Cn sa"]})]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mo,{className:"h-3 w-3"})," ",B.uploader]}),i.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(au,{className:"h-3 w-3"})," ",new Date(B.uploadDate).toLocaleDateString("vi-VN")]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[Ut()&&((rt=B.approval)==null?void 0:rt.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:Dt=>{Dt.stopPropagation(),on(B)},className:"px-3 py-1.5 text-xs font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(pi,{className:"h-3.5 w-3.5"})," Duyt"]}),i.jsxs("button",{onClick:Dt=>{Dt.stopPropagation(),On(B)},className:"px-3 py-1.5 text-xs font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(ls,{className:"h-3.5 w-3.5"})," Yu cu sa"]})]}),i.jsxs("div",{className:"flex -space-x-2",children:[B.viewers.map((Dt,Vn)=>i.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs font-medium text-gray-600",children:Dt},Vn)),B.viewers.length>0&&i.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[10px] text-gray-400",children:"+"})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[i.jsx(jo,{className:"h-4 w-4"}),i.jsx("span",{className:"text-xs font-medium",children:B.commentCount})]})})]})]})},B.id)}),N.length===0&&i.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400",children:[i.jsx(it,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"Cha c k hoch no."]})]})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp T"}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded-md text-gray-500 hover:text-orange-600 shadow-sm",children:i.jsx(EC,{className:"h-4 w-4"})})})]}),i.jsxs("div",{className:"relative border-l-2 border-gray-200 ml-3 md:ml-6 space-y-8 pb-4",children:[U.map(B=>{var fe,ve,Le,Me,rt,Dt,Vn;return i.jsxs("div",{className:"relative pl-8 md:pl-10",children:[i.jsx("div",{className:"absolute -left-[9px] top-0 h-5 w-5 rounded-full bg-white border-4 border-orange-200"}),i.jsx("div",{className:"absolute -left-2 top-7 md:top-1 md:-left-24 w-20 md:text-right",children:i.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(B.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})}),i.jsxs("div",{id:`file-${B.id}`,onClick:()=>Gt(B),className:`bg-white rounded-lg border p-4 hover:shadow-md transition-all cursor-pointer group relative pr-10
                              ${h===B.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-200 hover:border-orange-300"}
                           `,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[B.status==="finalized"?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 uppercase",children:[i.jsx(pi,{className:"h-3 w-3"}),"  cht"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 uppercase animate-pulse",children:[i.jsx(Zn,{className:"h-3 w-3"})," ang tho lun"]}),((fe=B.approval)==null?void 0:fe.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-50 text-amber-600 border border-amber-200",children:[i.jsx(au,{className:"h-3 w-3"})," Ch duyt"]}),((ve=B.approval)==null?void 0:ve.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-50 text-green-600 border border-green-200",children:[i.jsx(pi,{className:"h-3 w-3"}),"  duyt"]}),(((Le=B.approval)==null?void 0:Le.status)==="rejected"||((Me=B.approval)==null?void 0:Me.status)==="needs_revision")&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-orange-50 text-orange-600 border border-orange-200",title:B.approval.rejectionReason,children:[i.jsx(ls,{className:"h-3 w-3"})," Cn sa"]})]}),Ut()&&((rt=B.approval)==null?void 0:rt.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:$t=>{$t.stopPropagation(),on(B)},className:"px-2 py-1 text-[10px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(pi,{className:"h-3 w-3"})," Duyt"]}),i.jsxs("button",{onClick:$t=>{$t.stopPropagation(),On(B)},className:"px-2 py-1 text-[10px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(ls,{className:"h-3 w-3"})," Yu cu sa"]})]})]}),i.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3 group-hover:text-orange-700",children:B.title}),(((Dt=B.approval)==null?void 0:Dt.status)==="rejected"||((Vn=B.approval)==null?void 0:Vn.status)==="needs_revision")&&B.approval.rejectionReason&&i.jsxs("div",{className:"mb-3 text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded border border-orange-100",children:[i.jsx("span",{className:"font-semibold",children:"Yu cu sa:"})," ",B.approval.rejectionReason]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-100 group-hover:bg-orange-50 group-hover:border-orange-100 transition-colors",children:[B.fileType==="word"?i.jsx(it,{className:"h-4 w-4 text-blue-600"}):i.jsx(Yp,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{className:"text-xs text-gray-600 font-medium truncate max-w-[150px]",children:["Bien_ban_hop_",B.date,".",B.fileType==="word"?"docx":"pdf"]})]}),i.jsxs("span",{className:"text-xs font-bold text-orange-600 opacity-0 group-hover:opacity-100 transition-opacity flex items-center",children:["Chi tit ",i.jsx(xr,{className:"h-3 w-3"})]})]}),i.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[kt(B)&&B.status!=="finalized"&&i.jsx("button",{onClick:$t=>{$t.stopPropagation(),Dn(B)},className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Cht bin bn",children:i.jsx(pl,{className:"h-4 w-4"})}),kt(B)&&i.jsx("button",{onClick:$t=>mn(B,$t),className:"p-1.5 text-gray-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa ti liu",children:i.jsx(Fn,{className:"h-4 w-4"})})]})]})]},B.id)}),U.length===0&&i.jsx("div",{className:"pl-10 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})]})]}),Y&&q&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',q.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),Ie&&Ae&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ls,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn ang yu cu chnh sa cho ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Ae.title,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:et,onChange:B=>vt(B.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{Ne(!1),Ve(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:$n,disabled:!et.trim(),className:"px-4 py-2 text-sm font-bold text-white bg-amber-500 rounded-lg hover:bg-amber-600 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Co,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),me&&D&&i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>ye(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-start bg-orange-50/30 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-1 block",children:D.type==="plan"?"K hoch":"Bin bn hp"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:D.title})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[D&&Fe(D)&&kn(D)&&i.jsxs("button",{onClick:B=>$e(D,B),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors flex items-center gap-1",title:"Chnh sa file Word",children:[i.jsx(ls,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium hidden md:inline",children:"Chnh sa"})]}),D.type==="minute"&&kt(D)&&D.status!=="finalized"&&i.jsxs("button",{onClick:()=>Dn(D),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex items-center gap-1",title:"Cht bin bn",children:[i.jsx(pl,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium hidden md:inline",children:"Cht"})]}),i.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(Ls,{className:"h-5 w-5"})}),kt(D)&&i.jsx("button",{onClick:B=>mn(D,B),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti liu",children:i.jsx(Fn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>ye(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(fn,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>j(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-orange-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(Xp,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:oe(!1)})]}),i.jsxs("div",{className:"w-full md:w-96 bg-gray-50 border-l border-gray-200 flex flex-col h-1/2 md:h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:D.author||"Khng r"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(D.uploadDate||D.createdAt||Date.now()).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 shadow-sm flex items-center gap-2",children:[i.jsx(jo,{className:"h-5 w-5 text-gray-500"}),i.jsx("h3",{className:"font-bold text-gray-800",children:"Lch s Yu cu & Phn hi"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 font-sans",children:[((Te=D.approval)==null?void 0:Te.status)==="needs_revision"&&((je=D.approval)==null?void 0:je.rejectionReason)&&!((be=D.comments)!=null&&be.length&&D.comments[D.comments.length-1].type==="request"&&D.comments[D.comments.length-1].content===D.approval.rejectionReason)&&i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 group relative",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1 flex items-center gap-1",children:[i.jsx(Zn,{className:"h-3 w-3"})," Yu cu sa hin ti"]}),i.jsx("p",{className:"text-sm text-amber-900",children:D.approval.rejectionReason})]}),Ut()&&i.jsxs("div",{className:"flex gap-1 ml-2",children:[i.jsx("button",{onClick:()=>Bt(D),className:"p-1 text-amber-700 hover:bg-amber-100 rounded transition-colors",title:"Sa ni dung yu cu",children:i.jsx(ls,{className:"h-3 w-3"})}),i.jsx("button",{onClick:()=>ds(D),className:"p-1 text-amber-700 hover:bg-amber-100 hover:text-red-600 rounded transition-colors",title:"Hy b yu cu ny",children:i.jsx(Fn,{className:"h-3 w-3"})})]})]})}),!D.comments||D.comments.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:i.jsx(Os,{className:"h-6 w-6 text-gray-300"})}),i.jsx("p",{className:"text-sm",children:"Cha c lch s chnh sa no."})]}):D.comments.map(B=>i.jsxs("div",{className:`flex gap-3 ${B.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold text-white shadow-sm
                                          ${B.type==="request"?"bg-amber-500":"bg-blue-500"}
                                       `,children:B.userName.charAt(0)}),i.jsx("div",{className:"flex-1 max-w-[85%] space-y-1",children:i.jsxs("div",{className:`p-3 rounded-2xl shadow-sm text-sm relative group
                                             ${B.type==="request"?"bg-amber-50 border border-amber-100 text-gray-800 rounded-tl-none":B.type==="response"?"bg-blue-50 border border-blue-100 text-gray-800 rounded-tr-none":"bg-white border border-gray-200 text-gray-600"}
                                          `,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsxs("span",{className:`text-xs font-bold ${B.type==="request"?"text-amber-700":"text-blue-700"}`,children:[B.userName,B.type==="request"&&i.jsx("span",{className:"ml-1 text-[10px] bg-amber-200 px-1 rounded text-amber-800",children:"Yu cu sa"})]}),B.userId===(e==null?void 0:e.id)&&i.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity absolute right-2 top-2 bg-white/50 rounded-lg p-0.5 backdrop-blur-sm",children:[i.jsx("button",{onClick:()=>ms(B),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",title:"Sa",children:i.jsx(ls,{className:"h-3 w-3"})}),i.jsx("button",{onClick:()=>Mn(B),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",title:"Xa",children:i.jsx(Fn,{className:"h-3 w-3"})})]})]}),O===B.id?i.jsxs("div",{className:"mt-2",children:[i.jsx("textarea",{className:"w-full text-sm border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none",value:_e,onChange:fe=>Pe(fe.target.value),rows:2}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{onClick:()=>R(null),className:"text-xs px-2 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Hy"}),i.jsx("button",{onClick:()=>fs(B.id,D),className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lu"})]})]}):i.jsx("p",{className:"whitespace-pre-wrap",children:B.content}),i.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[new Date(B.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," - ",new Date(B.timestamp).toLocaleDateString("vi-VN"),B.editedAt&&i.jsx("span",{className:"italic ml-1",children:"( sa)"})]})]})})]},B.id)),i.jsx("div",{ref:k})]}),i.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:((Ye=D.approval)==null?void 0:Ye.status)==="needs_revision"&&hs(D)?i.jsxs("form",{onSubmit:zs,className:"flex gap-2 relative",children:[i.jsx("input",{type:"text",value:A,onChange:B=>M(B.target.value),placeholder:"Nhp phn hi/gii trnh ca bn...",className:"flex-1 bg-gray-50 border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all shadow-sm"}),i.jsx("button",{type:"submit",disabled:!A.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-4 py-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center justify-center",children:i.jsx(Co,{className:"h-5 w-5"})})]}):((qe=D.approval)==null?void 0:qe.status)==="pending"&&Ut()?i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>on(D),className:"flex-1 bg-green-500 hover:bg-green-600 text-white rounded-xl px-4 py-3 font-bold shadow-sm transition-all flex items-center justify-center gap-2",children:[i.jsx(pi,{className:"h-5 w-5"})," Duyt ngay"]}),i.jsxs("button",{onClick:()=>On(D),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white rounded-xl px-4 py-3 font-bold shadow-sm transition-all flex items-center justify-center gap-2",children:[i.jsx(ls,{className:"h-5 w-5"})," Yu cu sa"]})]}):i.jsx("div",{className:"text-center text-xs text-gray-500 bg-gray-50 p-2 rounded-lg border border-dashed border-gray-200",children:((at=D.approval)==null?void 0:at.status)==="approved"?"H s  c duyt. Khng th chnh sa thm.":!hs(D)&&((Et=D.approval)==null?void 0:Et.status)==="needs_revision"?"ang ch tc gi phn hi...":"H s ang ch x l."})})]})]})]})]}),Ge&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),i.jsx("button",{onClick:()=>P(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>pe({...G,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${G.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),i.jsx("button",{onClick:()=>pe({...G,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${G.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:G.name,onChange:B=>pe({...G,name:B.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:G.type==="minute"?"Ngy hp":"Thi gian p dng"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:G.date,onChange:B=>pe({...G,date:B.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:G.status,onChange:B=>pe({...G,status:B.target.value}),children:[i.jsx("option",{value:"draft",children:" ang tho lun"}),i.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:Pi,onDragOver:B=>B.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${ne?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:na,accept:".pdf,.doc,.docx"}),ne?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(Os,{className:"h-10 w-10 text-orange-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:ne.name}),i.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(ne.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:i.jsx(cf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})}),Q&&D&&i.jsx(yT,{file:{id:D.id,name:D.title,url:D.url||"",type:D.fileType,uploader:D.uploader,uploaderId:D.uploaderId,uploaderRole:D.uploaderRole,date:D.uploadDate,comments:D.comments||[],commentCount:D.commentCount||0,approval:D.approval,status:((xt=D.approval)==null?void 0:xt.status)||"pending"},onClose:()=>{ae(!1),Z(null)},onSaveSuccess:pt,collectionName:"plans",storageFolder:"plans",canEdit:kn(D),canApprove:Ut(),canComment:ts(D),canRespond:hs(D),onApprove:()=>on(D),onRequestRevision:B=>{Ve(D),vt(B),$n()},onPostComment:(B,fe)=>{fe==="response"&&(M(B),zs({preventDefault:()=>{}}))},canManageComment:tn,onEditComment:async(B,fe)=>{if(!(!D||!e))try{const ve=(D.type==="plan","plans"),Le=He(we,ve,D.id),rt=(D.comments||[]).map(Dt=>Dt.id===B?{...Dt,content:fe,editedAt:new Date().toISOString()}:Dt);await Ht(Le,{comments:rt}),Z({...D,comments:rt}),t(" cp nht gp ","Ni dung gp   c lu.","success")}catch(ve){console.error("Error editing comment:",ve),t("Li","Khng th cp nht gp .","error")}},onDeleteComment:async B=>{var ve,Le,Me;if(!D||!e)return;const fe=(ve=D.comments)==null?void 0:ve.find(rt=>rt.id===B);if(fe)try{const rt=(D.type==="plan","plans"),Dt=He(we,rt,D.id),$t=(D.comments||[]).filter(Yn=>Yn.id!==B),or={comments:$t,commentCount:$t.length};let Kn=(Le=D.approval)==null?void 0:Le.status,ss=(Me=D.approval)==null?void 0:Me.rejectionReason;fe.type==="request"&&Kn==="needs_revision"&&(Kn="pending",ss=void 0,or["approval.status"]="pending",or["approval.rejectionReason"]=du(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),fe.type==="response"&&$t.some(Bs=>Bs.type==="request")&&Kn==="pending"&&(Kn="needs_revision",or["approval.status"]="needs_revision",t(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Ht(Dt,or),Z({...D,comments:$t,commentCount:$t.length,approval:{...D.approval,status:Kn,rejectionReason:ss}}),t(" xa gp ","Gp   c xa thnh cng.","success")}catch(rt){console.error("Error deleting comment:",rt),t("Li","Khng th xa gp .","error")}}}),H&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Fn,{className:"h-6 w-6 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xa gp ?"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Bn c chc chn mun xa gp  ny khng? Hnh ng ny khng th hon tc."}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>ge(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:jr,className:"px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa gp "})]})]})})}),x&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-6 w-6 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hy yu cu sa?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa yu cu sa ny? ",i.jsx("br",{}),"H s s quay v trng thi ",i.jsx("span",{className:"font-bold text-blue-600",children:"'Ch duyt'"}),"."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Khng xa"}),i.jsx("button",{onClick:lr,className:"px-4 py-2 text-sm font-bold text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors",children:"ng  xa"})]})]})})})]})},mO=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],gO=s=>{const e=s.split("-");let t=parseInt(e[0]),a=parseInt(e[1]);return(isNaN(t)||isNaN(a))&&(t=new Date().getFullYear(),a=t+1),[{id:"m9",name:`Thng 09/${t}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${t}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${t}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${t}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${a}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${a}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${a}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${a}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${a}`,fileCount:0,files:[]}]},I_=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],pO=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],xO=()=>{var na;const{classId:s}=Lj(),e=ir(),[t,a]=X_(),{user:o}=Es(),{addToast:u}=Er(),{currentSchoolYear:h}=Yu(),[g,x]=E.useState(null),p=(ee,oe,Te)=>{if(!ee)return!1;const je=at=>at.toLowerCase().trim().replace(/\s+/g," "),be=je(ee),Ye=je(oe),qe=Te?je(Te):"";return be===Ye||be===qe||qe&&be.includes(qe)||qe&&qe.includes(be)?!0:(console.log("[matchesClassScope] No match:",{scope:ee,classId:oe,className:Te,normalizedScope:be,normalizedName:qe}),!1)},[b,_]=E.useState(null),[N,I]=E.useState({}),[U,$]=E.useState({}),[z,D]=E.useState([]),[Z,Q]=E.useState([]),[ae,me]=E.useState(!0),[ye,S]=E.useState("students"),[j,A]=E.useState("week"),[M,k]=E.useState(()=>{const oe=new Date().getMonth()+1;return oe===9?"m9":oe>=10?`m${oe}`:`m0${oe}`}),[O,R]=E.useState("all"),[_e,Pe]=E.useState(""),[H,ge]=E.useState(null),[Se,Ue]=E.useState(!1),[Ge,P]=E.useState("");E.useRef(null);const[ne,xe]=E.useState(!1),[G,pe]=E.useState(null),[Y,V]=E.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[q,le]=E.useState(!1),[Ie,Ne]=E.useState(null),[Ae,Ve]=E.useState(!1),[et,vt]=E.useState(null),[Xt,Pt]=E.useState(""),[Tn,Nt]=E.useState(null),[qt,kn]=E.useState(!1),[ts,hs]=E.useState(null),tn=ee=>{if(!o)return!1;const oe=ee,Te=oe.uploaderId&&oe.uploaderId===o.id,je=oe.uploader===o.fullName;return Te||je},Fe=()=>{u("Lu thnh cng","Ti liu  c cp nht.","success")},$e=ee=>{var be;if(!o)return!1;const oe=ee,Te=oe.uploaderRole;return!Te||((be=oe.approval)==null?void 0:be.status)==="approved"?!1:o.role==="vice_principal"?["head_teacher","vice_head_teacher","teacher"].includes(Te):["head_teacher","vice_head_teacher"].includes(o.role)?Te==="teacher":!1},pt=ee=>{var Et,xt,B;if(!o)return!1;const oe=ee,Te=(Et=oe.approval)==null?void 0:Et.status;if(Te==="approved")return!1;const je=oe.uploaderId===o.id,be=((xt=oe.uploader)==null?void 0:xt.toLowerCase())===((B=o.fullName)==null?void 0:B.toLowerCase()),Ye=je||be,qe=Te==="needs_revision",at=Ye&&qe;return console.log("[canRespond]",{fileName:ee.name,uploaderId:oe.uploaderId,userId:o.id,isOwner:Ye,approvalStatus:Te,needsRevision:qe,result:at}),at},Ut=ee=>{var je,be;if(!o)return!1;const oe=ee.uploaderId===o.id,Te=((je=ee.uploader)==null?void 0:je.toLowerCase())===((be=o.fullName)==null?void 0:be.toLowerCase());return oe||Te},on=ee=>o?ee.userId===o.id:!1,Dn=async()=>{var ee,oe;if(!(!ts||!H||!o))try{const Te=He(we,"class_files",H.id),be=(H.comments||[]).filter(Et=>Et.id!==ts.id),Ye={comments:be,commentCount:be.length,hasNewComments:be.length>0};let qe=(ee=H.approval)==null?void 0:ee.status,at=(oe=H.approval)==null?void 0:oe.rejectionReason;ts.type==="request"&&qe==="needs_revision"&&(qe="pending",at=void 0,Ye["approval.status"]="pending",Ye["approval.rejectionReason"]=du(),u(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),ts.type==="response"&&be.some(xt=>xt.type==="request")&&qe==="pending"&&(qe="needs_revision",Ye["approval.status"]="needs_revision",u(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Ht(Te,Ye),ge({...H,comments:be,commentCount:be.length,hasNewComments:be.length>0,approval:{...H.approval,status:qe,rejectionReason:at}}),kn(!1),hs(null),u(" xa gp ","Gp   c xa thnh cng.","success")}catch(Te){console.error("Error deleting comment:",Te),u("Li","Khng th xa gp .","error")}},On=ee=>{if(!o)return!1;const oe=ee.uploaderId===o.id,Te=ee.uploader===o.fullName;if(oe||!ee.uploaderId&&Te)return!1;let je=ee.uploaderRole;return ee.uploaderId&&N[ee.uploaderId]?je=N[ee.uploaderId]:ee.uploader&&U[ee.uploader]&&(je=U[ee.uploader]),je?o.role==="vice_principal"?["head_teacher","vice_head_teacher"].includes(je):["head_teacher","vice_head_teacher"].includes(o.role)?je==="teacher":!1:!1},$n=ee=>{let oe=[...ee];if(_e.trim()){const Te=_e.toLowerCase().trim();oe=oe.filter(je=>{var be,Ye;return((be=je.name)==null?void 0:be.toLowerCase().includes(Te))||((Ye=je.uploader)==null?void 0:Ye.toLowerCase().includes(Te))})}switch(O){case"new":const Te=new Date;Te.setDate(Te.getDate()-7),oe=oe.filter(je=>new Date(je.date)>=Te).sort((je,be)=>new Date(be.date).getTime()-new Date(je.date).getTime());break;case"unread":oe=oe.filter(je=>je.comments&&je.comments.length>0||je.hasNewComments);break;case"all":default:oe=oe.sort((je,be)=>new Date(be.date).getTime()-new Date(je.date).getTime());break}return oe},Gt=async ee=>{if(o)try{const oe=He(we,"class_files",ee.id);await Ht(oe,{approval:{status:"approved",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString()}}),u(" duyt h s",`H s "${ee.name}"  c ph duyt.`,"success");const Te=`/class/${s}`;await er("system",o,{type:"class",name:` duyt: ${ee.name}`,targetPath:Te,extraInfo:{uploaderId:ee.uploaderId}})}catch(oe){console.error("Error approving file:",oe),u("Li","Khng th duyt h s. Vui lng th li.","error")}},kt=async()=>{if(!(!o||!et))try{const ee=He(we,"class_files",et.id),oe={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:Xt||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},Te={status:"needs_revision",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString(),rejectionReason:Xt};await Ht(ee,{approval:Te,comments:Po(oe),commentCount:(et.commentCount||0)+1}),H&&H.id===et.id&&ge({...H,approval:Te,comments:[...H.comments||[],oe],commentCount:(H.commentCount||0)+1}),u(" gi yu cu sa",` yu cu sa li h s "${et.name}".`,"success");const je=`/class/${s}?fileId=${et.id}&highlight=true`;await er("comment",o,{type:"class",name:`Yu cu sa: ${et.name}`,targetPath:je,extraInfo:{uploaderId:et.uploaderId,classId:s}}),Ve(!1),vt(null),Pt("")}catch(ee){console.error("Error requesting revision:",ee),u("Li","Khng th gi yu cu sa. Vui lng th li.","error")}},mn=async ee=>{var Te;if(!Ge.trim()||!H||!o||!pt(H))return;const oe={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:Ge,timestamp:new Date().toISOString(),type:"response"};try{const je=He(we,"class_files",H.id);await Ht(je,{approval:{...H.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:Po(oe),commentCount:(H.commentCount||0)+1}),ge({...H,approval:{...H.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:[...H.comments||[],oe],commentCount:(H.commentCount||0)+1}),P(""),u(" gi phn hi","Phn hi  c gi. H s chuyn sang trng thi ch duyt.","success");const be=(Te=H.approval)==null?void 0:Te.reviewerId;if(be&&be!==o.id){const Ye=`/class/${s}?fileId=${H.id}&highlight=true`;await er("comment",o,{type:"class",name:`Phn hi t ${o.fullName}: ${H.name}`,targetPath:Ye,extraInfo:{uploaderId:be}})}}catch(je){console.error("Error adding response:",je),u("Li","Khng th gi phn hi.","error")}};E.useEffect(()=>{if(!s)return;(async()=>{try{const oe=He(we,"classes",s),Te=await br(oe);let je=null,be=[];if(Te.exists())je=Te.data();else{console.warn("Class not found in Firestore, checking Mock...");const Ye=mO.find(qe=>qe.id===s);Ye&&(je=Ye)}if(je){console.log("[ClassRecords] Class data loaded:",{classId:s,className:je.name,currentUser:o==null?void 0:o.fullName,userScope:o==null?void 0:o.accessScope,userRole:o==null?void 0:o.role});const Ye=qe=>qe.toLowerCase().trim().replace(/\s+/g," ");try{const qe=Sn(It(we,"users"),ar("role","in",["teacher","head_teacher","vice_head_teacher"])),Et=(await vr(qe)).docs.map(Me=>Me.data()),xt={},B={};Et.forEach(Me=>{Me.id&&Me.role&&(xt[Me.id]=Me.role),Me.fullName&&Me.role&&(B[Me.fullName]=Me.role)}),I(xt),$(B);const fe=new Set,ve=Ye(s),Le=Ye(je.name);Et.forEach(Me=>{if(!Me.accessScope)return;const rt=Ye(Me.accessScope);(rt===ve||rt===Le||Le.includes(rt)||rt.includes(Le))&&fe.add(Me.fullName)}),be=Array.from(fe),console.log("[ClassRecords] Found teachers from DB:",be),be.length===0&&(console.warn("[ClassRecords] No teacher found for class:",s),be=["Cha phn cng"])}catch(qe){console.error("Error fetching teacher details:",qe),be=["Cha phn cng"]}_({id:s,...je,teachers:be,teacher:be.join(", ")})}}catch(oe){console.error("Error fetching class:",oe)}finally{me(!1)}})()},[s]),E.useEffect(()=>{if(!s)return;const ee=Sn(It(we,"class_files"),ar("classId","==",s)),oe=_r(ee,Te=>{const je=Te.docs.map(qe=>({id:qe.id,...qe.data()}));Q(je),console.log("[ClassRecords] Fetched files from Firestore:",je.length),je.forEach(qe=>console.log(`  - ${qe.name} | month: "${qe.month}" | type: ${qe.planType}`));const Ye=gO(h).map(qe=>{const at=je.filter(Et=>{if((Et.schoolYear||"2025-2026")!==h||(Et.category||"plan")!=="plan")return!1;let fe=!1;const ve=qe.id.replace("m",""),Le=String(Et.month||"").replace("m","");return parseInt(ve,10)===parseInt(Le,10)&&(fe=!0),!!fe});return{...qe,files:at,fileCount:at.length}});console.log("[ClassRecords] Grouped files into folders:",Ye.map(qe=>`${qe.name}: ${qe.fileCount} files`)),D(Ye)});return()=>oe()},[s]),E.useEffect(()=>{!o||ae||o.role==="teacher"&&b&&!p(o.accessScope,s,b.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:o.accessScope,classId:s,className:b.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[o,s,e,b,ae]);const Tt=E.useRef(null);if(E.useEffect(()=>{const ee=t.get("fileId"),oe=t.get("highlight");if(console.log("[ClassRecords] URL Params:",{fileId:ee,highlight:oe,allFilesCount:Z.length}),!ee||oe!=="true"||Z.length===0||Tt.current===ee)return;const Te=Z.find(je=>je.id===ee);if(Te){console.log("[ClassRecords] Found target file:",Te.name,"category:",Te.category),Tt.current=ee;const je=Te.category||"plan";if(je==="plan"){S("plan");const at=Te.planType||"week";A(at)}else je==="assessment"?S("assessment"):je==="students"?S("students"):je==="steam"&&S("steam");const be=z.find(at=>at.files.some(Et=>Et.id===ee));be&&(console.log("[ClassRecords] Auto-expanding folder:",be.id),k(be.id)),x(ee),a({},{replace:!0});const Ye=setTimeout(()=>{ge(Te),Ue(!0)},300),qe=setTimeout(()=>{x(null),Tt.current=null},5e3);return()=>{clearTimeout(Ye),clearTimeout(qe)}}else console.warn("[ClassRecords] File not found:",ee)},[t,a,z,Z]),ae)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!b)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),i.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const zs=((o==null?void 0:o.role)==="teacher"||(o==null?void 0:o.role)==="head_teacher"||(o==null?void 0:o.role)==="vice_head_teacher")&&p(o.accessScope,s,b==null?void 0:b.name);console.log("[ClassRecords] Upload permission:",{canUpload:zs,userRole:o==null?void 0:o.role,userScope:o==null?void 0:o.accessScope,classId:s,className:b==null?void 0:b.name});const Mn=(ee,oe)=>{oe.stopPropagation(),ge(ee),Ue(!0)},jr=(ee,oe,Te)=>{Te.stopPropagation(),Ne({file:ee,folderId:oe}),le(!0)},ds=async()=>{if(Ie)try{console.log("[DELETE] Attempting to delete file:",{fileId:Ie.file.id,fileName:Ie.file.name,classId:s}),await jl(He(we,"class_files",Ie.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),u(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(ee){console.error("[DELETE] Error deleting file:",ee),console.error("[DELETE] Error code:",ee.code),console.error("[DELETE] Error message:",ee.message);let oe="Vui lng th li sau.";ee.code==="permission-denied"&&(oe="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),u("Li khi xa ti liu",oe,"error")}finally{le(!1),Ne(null)}},lr=ee=>{k(M===ee?null:ee)},Bt=ee=>{switch(ee){case"word":return i.jsx(it,{className:"h-5 w-5 text-blue-600"});case"excel":return i.jsx(it,{className:"h-5 w-5 text-green-600"});case"pdf":return i.jsx(it,{className:"h-5 w-5 text-red-600"});default:return i.jsx(it,{className:"h-5 w-5 text-gray-400"})}},fs=()=>{V({area:ye,planType:j,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),pe(null),xe(!0)},ms=ee=>{if(ee.preventDefault(),ee.dataTransfer.files&&ee.dataTransfer.files[0]){const oe=ee.dataTransfer.files[0];pe(oe),Y.name||V(Te=>({...Te,name:oe.name.split(".")[0]}))}},ns=ee=>{if(ee.target.files&&ee.target.files[0]){const oe=ee.target.files[0];pe(oe),Y.name||V(Te=>({...Te,name:oe.name.split(".")[0]}))}},Pi=async()=>{var ee,oe;if(!(!G||!Y.name||!o))try{const Te=rr(Ps,`class-files/${s}/${Date.now()}_${G.name}`);await nr(Te,G);const je=await sr(Te),be={name:Y.name,type:((ee=G.name.split(".").pop())==null?void 0:ee.toLowerCase())||"other",url:je,uploader:o.fullName,uploaderId:o.id,uploaderRole:o.role,schoolYear:h,date:new Date().toISOString(),classId:s,month:Y.month,monthName:((oe=I_.find(Ye=>Ye.value===Y.month))==null?void 0:oe.label)||"Thng khc",hasNewComments:!1,commentCount:0,comments:[],createdAt:Dp(),planType:Y.planType,week:Y.week,category:Y.area,approval:{status:"pending"}};await Sl(It(we,"class_files"),be),u("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),er("upload",o,{type:"class",name:Y.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),xe(!1)}catch(Te){console.error("Error uploading file:",Te),u("Li khi ti ln","Vui lng th li sau.","error")}};return i.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[i.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),i.jsx(xr,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>e("/"),children:[i.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm",children:i.jsx("span",{className:"text-2xl font-bold text-amber-600",children:((na=b==null?void 0:b.name)==null?void 0:na.split(" ").pop())||"?"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(b==null?void 0:b.name)||"Lp hc"}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(e1,{className:"h-4 w-4"})," GVCN:"]}),b!=null&&b.teachers&&b.teachers.length>1?i.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.teachers.map((ee,oe)=>i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:ee},oe))}):i.jsx("span",{className:"font-semibold text-gray-700",children:(b==null?void 0:b.teacher)||"Cha cp nht"})]})]})]}),zs&&i.jsxs("button",{onClick:fs,className:"flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-xl shadow-md shadow-amber-200 transition-all font-bold transform hover:-translate-y-0.5",children:[i.jsx(In,{className:"h-5 w-5"}),i.jsx("span",{children:"Ti ln h s lp"})]})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:i.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[i.jsxs("button",{onClick:()=>S("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${ye==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(qv,{className:"h-4 w-4"}),"DANH SCH LP",ye==="students"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${ye==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(it,{className:"h-4 w-4"}),"K HOCH GIO DC",ye==="plan"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${ye==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Pv,{className:"h-4 w-4"}),"NH GI TR",ye==="assessment"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${ye==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Bv,{className:"h-4 w-4"}),"D N STEAM",ye==="steam"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),i.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>R("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${O==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),i.jsx("button",{onClick:()=>R("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${O==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),i.jsxs("button",{onClick:()=>R("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${O==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[i.jsx(hl,{className:"h-3 w-3"})," C gp "]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",value:_e,onChange:ee=>Pe(ee.target.value),className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),ye==="plan"&&i.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[i.jsx("button",{onClick:()=>A("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${j==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),i.jsx("button",{onClick:()=>A("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${j==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),i.jsx("button",{onClick:()=>A("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${j==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),i.jsxs("div",{className:"space-y-4",children:[ye==="plan"&&i.jsxs(i.Fragment,{children:[j==="year"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Fv,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",h]}),(()=>{let ee=z.flatMap(oe=>oe.files).filter(oe=>oe.planType==="year");return ee=$n(ee),ee.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(oe=>i.jsxs("div",{onClick:Te=>Mn(oe,Te),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Bt(oe.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:oe.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(oe.date).toLocaleDateString("vi-VN")})]}),i.jsx("button",{onClick:Te=>jr(oe,"year",Te),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Fn,{className:"h-4 w-4"})})]},oe.id))})})()]}),(j==="month"||j==="week")&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(ee=>{let oe=ee.files.filter(be=>j==="month"?be.planType==="month":j==="week"?be.planType==="week"||!be.planType:!1);oe=$n(oe);const Te=oe.length,je=M===ee.id;return i.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[i.jsxs("div",{onClick:()=>lr(ee.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${je?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${je?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:i.jsx(Fv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${je?"text-amber-900":"text-gray-700"}`,children:ee.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[Te," ",j==="month"?"K hoch thng":"K hoch tun"]})]})]}),i.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${je?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:i.jsx(xr,{className:"h-5 w-5"})})]}),je&&i.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[oe.map(be=>{var Ye,qe,at,Et,xt,B,fe;return i.jsxs("div",{onClick:ve=>{g===be.id&&x(null),Mn(be,ve)},className:`flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all ${g===be.id?"border-red-400 bg-red-50 animate-pulse ring-2 ring-red-300":"border-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[Bt(be.type),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:be.name}),((Ye=be.approval)==null?void 0:Ye.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700",children:[i.jsx(au,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((qe=be.approval)==null?void 0:qe.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700",children:[i.jsx(pi,{className:"h-2.5 w-2.5"}),"  duyt"]}),((at=be.approval)==null?void 0:at.status)==="needs_revision"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse",children:[i.jsx(oA,{className:"h-2.5 w-2.5"})," Cn sa"]}),((Et=be.approval)==null?void 0:Et.status)==="responded"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700",children:[i.jsx(hl,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((xt=be.approval)==null?void 0:xt.status)==="rejected"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700",title:be.approval.rejectionReason,children:[i.jsx(J_,{className:"h-2.5 w-2.5"})," T chi"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(gl,{className:"h-3 w-3"})," ",new Date(be.date).toLocaleDateString("vi-VN"),j==="week"&&be.week&&i.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",be.week]})]}),((B=be.approval)==null?void 0:B.status)==="rejected"&&be.approval.rejectionReason&&i.jsxs("div",{className:"mt-1 text-[10px] text-red-600",children:[i.jsx("span",{className:"font-semibold",children:"L do:"})," ",be.approval.rejectionReason]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[On(be)&&((fe=be.approval)==null?void 0:fe.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:ve=>{ve.stopPropagation(),Gt(be)},className:"px-2 py-1 text-[9px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(pi,{className:"h-3 w-3"})," Duyt"]}),i.jsxs("button",{onClick:ve=>{ve.stopPropagation(),vt(be),Pt(""),Ve(!0)},className:"px-2 py-1 text-[9px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(ls,{className:"h-3 w-3"})," Yu cu sa"]})]}),be.hasNewComments&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[i.jsx(hl,{className:"h-3 w-3"}),"Gp  mi"]}),Ut(be)&&i.jsx("button",{onClick:ve=>jr(be,ee.id,ve),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Fn,{className:"h-4 w-4"})})]})]},be.id)}),oe.length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},ee.id)})})]}),ye==="students"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(qv,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{let ee=Z.filter(oe=>oe.category==="students");return ee=$n(ee),console.log("[Student List Tab] Total files:",Z.length,"Student files:",ee.length),console.log("[Student List Tab] All file categories:",Z.map(oe=>({name:oe.name,category:oe.category}))),ee.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(oe=>i.jsxs("div",{onClick:Te=>Mn(oe,Te),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Bt(oe.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:oe.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(oe.date).toLocaleDateString("vi-VN")})]}),Ut(oe)&&i.jsx("button",{onClick:Te=>jr(oe,"students",Te),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Fn,{className:"h-4 w-4"})})]},oe.id))})})()]}),ye==="assessment"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx(Pv,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),ye==="steam"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx(Bv,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),q&&Ie&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Ie.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>le(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:ds,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),Ae&&et&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ls,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu gio vin sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp yu cu chnh sa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',et.name,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:Xt,onChange:ee=>Pt(ee.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{Ve(!1),vt(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:kt,disabled:!Xt.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Co,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),ne&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),i.jsx("button",{onClick:()=>xe(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(fn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(ee=>i.jsx("button",{onClick:()=>V({...Y,area:ee.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${Y.area===ee.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ee.label},ee.id))})]}),Y.area==="plan"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(ee=>i.jsx("button",{onClick:()=>V({...Y,planType:ee.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${Y.planType===ee.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:ee.label},ee.id))})]}),Y.area!=="students"&&(Y.area!=="plan"||Y.planType!=="year")&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:Y.month,onChange:ee=>V({...Y,month:ee.target.value}),children:I_.map(ee=>i.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),(Y.area!=="plan"||Y.planType==="week")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:Y.week,onChange:ee=>V({...Y,week:ee.target.value}),children:pO.map(ee=>i.jsx("option",{value:ee.value,children:ee.label},ee.value))})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[Y.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:Y.name,onChange:ee=>V({...Y,name:ee.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:ms,onDragOver:ee=>ee.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${G?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ns}),G?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(Os,{className:"h-10 w-10 text-amber-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:G.name}),i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(G.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:i.jsx(cf,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),i.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:Y.note,onChange:ee=>V({...Y,note:ee.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Pi,disabled:!G||!Y.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})}),qt&&ts&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Fn,{className:"h-6 w-6 text-red-500"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Xa gp "}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm text-gray-700 italic",children:['"',ts.content.substring(0,100),ts.content.length>100?"...":"",'"']}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{kn(!1),hs(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{onClick:Dn,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors",children:"Xa"})]})]})}),Se&&H&&i.jsx(yT,{file:{id:H.id,name:H.name,url:H.url||"",type:H.type,uploader:H.uploader,uploaderId:H.uploaderId,uploaderRole:H.uploaderRole,date:H.date,comments:H.comments,approval:H.approval},onClose:()=>{Ue(!1),ge(null)},onSaveSuccess:Fe,collectionName:"class_files",storageFolder:`class-files/${s}`,canEdit:tn(H),canApprove:On&&On(H),canComment:$e(H),canRespond:pt(H),onApprove:()=>Gt(H),onRequestRevision:ee=>{vt(H),Pt(ee),kt()},onPostComment:ee=>{P(ee),mn()},canManageComment:on,onEditComment:async(ee,oe)=>{if(!(!H||!o))try{const Te=He(we,"class_files",H.id),be=(H.comments||[]).map(Ye=>Ye.id===ee?{...Ye,content:oe,editedAt:new Date().toISOString()}:Ye);await Ht(Te,{comments:be}),ge({...H,comments:be}),u(" cp nht gp ","Ni dung gp   c lu.","success")}catch(Te){console.error("Error editing comment:",Te),u("Li","Khng th cp nht gp .","error")}},onDeleteComment:async ee=>{var Te,je,be;if(!H||!o)return;const oe=(Te=H.comments)==null?void 0:Te.find(Ye=>Ye.id===ee);if(oe)try{const Ye=He(we,"class_files",H.id),at=(H.comments||[]).filter(fe=>fe.id!==ee),Et={comments:at,commentCount:at.length,hasNewComments:at.length>0};let xt=(je=H.approval)==null?void 0:je.status,B=(be=H.approval)==null?void 0:be.rejectionReason;oe.type==="request"&&xt==="needs_revision"&&(xt="pending",B=void 0,Et["approval.status"]="pending",Et["approval.rejectionReason"]=du(),u(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),oe.type==="response"&&at.some(ve=>ve.type==="request")&&xt==="pending"&&(xt="needs_revision",Et["approval.status"]="needs_revision",u(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Ht(Ye,Et),ge({...H,comments:at,commentCount:at.length,hasNewComments:at.length>0,approval:{...H.approval,status:xt,rejectionReason:B}}),u(" xa gp ","Gp   c xa thnh cng.","success")}catch(Ye){console.error("Error deleting comment:",Ye),u("Li","Khng th xa gp .","error")}}})]})},yO=()=>{const s=ir(),{login:e,isAuthenticated:t}=Es();E.useEffect(()=>{t&&s("/")},[t,s]),E.useEffect(()=>{(async()=>{try{const Q=He(we,"app_settings","login_background"),ae=await br(Q);ae.exists()&&ae.data().imageUrl&&z(ae.data().imageUrl)}catch(Q){console.error("Error fetching background:",Q)}})()},[]);const[a,o]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{(async()=>{try{const Q=He(we,"app_settings","system_logo"),ae=await br(Q);ae.exists()&&ae.data().imageUrl&&o(ae.data().imageUrl);const me=He(we,"app_settings","certification_logo"),ye=await br(me);ye.exists()&&ye.data().imageUrl&&h(ye.data().imageUrl)}catch(Q){console.error("Error fetching logo:",Q)}})()},[]);const[g,x]=E.useState(!1),[p,b]=E.useState(!1),[_,N]=E.useState(""),[I,U]=E.useState({username:"",password:""}),[$,z]=E.useState("/login-background.jpg"),D=async Z=>{Z.preventDefault(),b(!0),N("");const Q=await e(I.username,I.password);b(!1),Q||N("Tn ng nhp hoc mt khu khng ng.")};return i.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 z-0",children:i.jsx("img",{src:$,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:i.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:a?i.jsx("img",{src:a,alt:"Logo",className:"h-12 w-12 object-contain"}):i.jsx(Qp,{className:"h-12 w-12 text-blue-900"})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:a1}),i.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),_&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),_]}),i.jsxs("form",{onSubmit:D,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Fr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:I.username,onChange:Z=>U({...I,username:Z.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(pl,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:I.password,onChange:Z=>U({...I,password:Z.target.value})}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>x(!g),children:g?i.jsx(lp,{className:"h-5 w-5"}):i.jsx(pu,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),i.jsx("div",{className:"text-sm",children:i.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:["ng nhp",i.jsx(Pd,{className:"h-4 w-4"})]})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[i.jsx(n1,{className:"h-3 w-3"}),i.jsxs("span",{children:["H tr k thut: ",i.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),u&&i.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:i.jsx("img",{src:u,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},bO=()=>i.jsx(FD,{children:i.jsx($D,{children:i.jsx(WD,{children:i.jsx(_S,{children:i.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[i.jsx(QD,{}),i.jsx("main",{className:"flex-grow",children:i.jsxs(Jj,{children:[i.jsx(zr,{path:"/",element:i.jsx(JD,{})}),i.jsx(zr,{path:"/login",element:i.jsx(yO,{})}),i.jsx(zr,{path:"/van-ban-chi-dao",element:i.jsx(eO,{})}),i.jsx(zr,{path:"/van-ban-truong",element:i.jsx(tO,{})}),i.jsx(zr,{path:"/quan-tri-he-thong",element:i.jsx(sO,{})}),i.jsx(zr,{path:"/to-van-phong-ke-hoach",element:i.jsx(uO,{})}),i.jsx(zr,{path:"/to-van-phong-thuc-don",element:i.jsx(dO,{})}),i.jsx(zr,{path:"/to-chuyen-mon-ke-hoach",element:i.jsx(fO,{})}),i.jsx(zr,{path:"/class/:classId",element:i.jsx(xO,{})})]})})]})})})})}),bT=document.getElementById("root");if(!bT)throw new Error("Could not find root element to mount to");const vO=ij.createRoot(bT);vO.render(i.jsx(Hr.StrictMode,{children:i.jsx(bO,{})}));
