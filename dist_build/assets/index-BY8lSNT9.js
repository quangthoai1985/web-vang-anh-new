(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function P_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Vg={exports:{}},Zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function sE(){if(Cv)return Zc;Cv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:u}}return Zc.Fragment=e,Zc.jsx=t,Zc.jsxs=t,Zc}var Av;function rE(){return Av||(Av=1,Vg.exports=sE()),Vg.exports}var i=rE(),Lg={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function aE(){if(Rv)return We;Rv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function k(P){return P===null||typeof P!="object"?null:(P=N&&P[N]||P["@@iterator"],typeof P=="function"?P:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,z={};function Y(P,le,be){this.props=P,this.context=le,this.refs=z,this.updater=be||M}Y.prototype.isReactComponent={},Y.prototype.setState=function(P,le){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,le,"setState")},Y.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ae(){}ae.prototype=Y.prototype;function K(P,le,be){this.props=P,this.context=le,this.refs=z,this.updater=be||M}var H=K.prototype=new ae;H.constructor=K,$(H,Y.prototype),H.isPureReactComponent=!0;var de=Array.isArray;function ve(){}var E={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(P,le,be){var xe=be.ref;return{$$typeof:s,type:P,key:le,ref:xe!==void 0?xe:null,props:be}}function O(P,le){return A(P.type,le,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function V(P){var le={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(be){return le[be]})}var R=/\/+/g;function Ne(P,le){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):le.toString(36)}function je(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ve,ve):(P.status="pending",P.then(function(le){P.status==="pending"&&(P.status="fulfilled",P.value=le)},function(le){P.status==="pending"&&(P.status="rejected",P.reason=le)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ee(P,le,be,xe,Q){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var D=!1;if(P===null)D=!0;else switch(we){case"bigint":case"string":case"number":D=!0;break;case"object":switch(P.$$typeof){case s:case e:D=!0;break;case b:return D=P._init,ee(D(P._payload),le,be,xe,Q)}}if(D)return Q=Q(P),D=xe===""?"."+Ne(P,0):xe,de(Q)?(be="",D!=null&&(be=D.replace(R,"$&/")+"/"),ee(Q,le,be,"",function(Ee){return Ee})):Q!=null&&(I(Q)&&(Q=O(Q,be+(Q.key==null||P&&P.key===Q.key?"":(""+Q.key).replace(R,"$&/")+"/")+D)),le.push(Q)),1;D=0;var U=xe===""?".":xe+":";if(de(P))for(var q=0;q<P.length;q++)xe=P[q],we=U+Ne(xe,q),D+=ee(xe,le,be,we,Q);else if(q=k(P),typeof q=="function")for(P=q.call(P),q=0;!(xe=P.next()).done;)xe=xe.value,we=U+Ne(xe,q++),D+=ee(xe,le,be,we,Q);else if(we==="object"){if(typeof P.then=="function")return ee(je(P),le,be,xe,Q);throw le=String(P),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return D}function se(P,le,be){if(P==null)return P;var xe=[],Q=0;return ee(P,xe,"","",function(we){return le.call(be,we,Q++)}),xe}function Ce(P){if(P._status===-1){var le=P._result;le=le(),le.then(function(be){(P._status===0||P._status===-1)&&(P._status=1,P._result=be)},function(be){(P._status===0||P._status===-1)&&(P._status=2,P._result=be)}),P._status===-1&&(P._status=0,P._result=le)}if(P._status===1)return P._result.default;throw P._result}var Le=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ze={map:se,forEach:function(P,le,be){se(P,function(){le.apply(this,arguments)},be)},count:function(P){var le=0;return se(P,function(){le++}),le},toArray:function(P){return se(P,function(le){return le})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return We.Activity=w,We.Children=ze,We.Component=Y,We.Fragment=t,We.Profiler=o,We.PureComponent=K,We.StrictMode=a,We.Suspense=x,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,We.__COMPILER_RUNTIME={__proto__:null,c:function(P){return E.H.useMemoCache(P)}},We.cache=function(P){return function(){return P.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(P,le,be){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var xe=$({},P.props),Q=P.key;if(le!=null)for(we in le.key!==void 0&&(Q=""+le.key),le)!S.call(le,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&le.ref===void 0||(xe[we]=le[we]);var we=arguments.length-2;if(we===1)xe.children=be;else if(1<we){for(var D=Array(we),U=0;U<we;U++)D[U]=arguments[U+2];xe.children=D}return A(P.type,Q,xe)},We.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},We.createElement=function(P,le,be){var xe,Q={},we=null;if(le!=null)for(xe in le.key!==void 0&&(we=""+le.key),le)S.call(le,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Q[xe]=le[xe]);var D=arguments.length-2;if(D===1)Q.children=be;else if(1<D){for(var U=Array(D),q=0;q<D;q++)U[q]=arguments[q+2];Q.children=U}if(P&&P.defaultProps)for(xe in D=P.defaultProps,D)Q[xe]===void 0&&(Q[xe]=D[xe]);return A(P,we,Q)},We.createRef=function(){return{current:null}},We.forwardRef=function(P){return{$$typeof:g,render:P}},We.isValidElement=I,We.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:Ce}},We.memo=function(P,le){return{$$typeof:p,type:P,compare:le===void 0?null:le}},We.startTransition=function(P){var le=E.T,be={};E.T=be;try{var xe=P(),Q=E.S;Q!==null&&Q(be,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(ve,Le)}catch(we){Le(we)}finally{le!==null&&be.types!==null&&(le.types=be.types),E.T=le}},We.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},We.use=function(P){return E.H.use(P)},We.useActionState=function(P,le,be){return E.H.useActionState(P,le,be)},We.useCallback=function(P,le){return E.H.useCallback(P,le)},We.useContext=function(P){return E.H.useContext(P)},We.useDebugValue=function(){},We.useDeferredValue=function(P,le){return E.H.useDeferredValue(P,le)},We.useEffect=function(P,le){return E.H.useEffect(P,le)},We.useEffectEvent=function(P){return E.H.useEffectEvent(P)},We.useId=function(){return E.H.useId()},We.useImperativeHandle=function(P,le,be){return E.H.useImperativeHandle(P,le,be)},We.useInsertionEffect=function(P,le){return E.H.useInsertionEffect(P,le)},We.useLayoutEffect=function(P,le){return E.H.useLayoutEffect(P,le)},We.useMemo=function(P,le){return E.H.useMemo(P,le)},We.useOptimistic=function(P,le){return E.H.useOptimistic(P,le)},We.useReducer=function(P,le,be){return E.H.useReducer(P,le,be)},We.useRef=function(P){return E.H.useRef(P)},We.useState=function(P){return E.H.useState(P)},We.useSyncExternalStore=function(P,le,be){return E.H.useSyncExternalStore(P,le,be)},We.useTransition=function(){return E.H.useTransition()},We.version="19.2.0",We}var kv;function Xp(){return kv||(kv=1,Lg.exports=aE()),Lg.exports}var j=Xp();const Br=P_(j);var Pg={exports:{}},eu={},Ug={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function iE(){return Iv||(Iv=1,(function(s){function e(ee,se){var Ce=ee.length;ee.push(se);e:for(;0<Ce;){var Le=Ce-1>>>1,ze=ee[Le];if(0<o(ze,se))ee[Le]=se,ee[Ce]=ze,Ce=Le;else break e}}function t(ee){return ee.length===0?null:ee[0]}function a(ee){if(ee.length===0)return null;var se=ee[0],Ce=ee.pop();if(Ce!==se){ee[0]=Ce;e:for(var Le=0,ze=ee.length,P=ze>>>1;Le<P;){var le=2*(Le+1)-1,be=ee[le],xe=le+1,Q=ee[xe];if(0>o(be,Ce))xe<ze&&0>o(Q,be)?(ee[Le]=Q,ee[xe]=Ce,Le=xe):(ee[Le]=be,ee[le]=Ce,Le=le);else if(xe<ze&&0>o(Q,Ce))ee[Le]=Q,ee[xe]=Ce,Le=xe;else break e}}return se}function o(ee,se){var Ce=ee.sortIndex-se.sortIndex;return Ce!==0?Ce:ee.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var x=[],p=[],b=1,w=null,N=3,k=!1,M=!1,$=!1,z=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function H(ee){for(var se=t(p);se!==null;){if(se.callback===null)a(p);else if(se.startTime<=ee)a(p),se.sortIndex=se.expirationTime,e(x,se);else break;se=t(p)}}function de(ee){if($=!1,H(ee),!M)if(t(x)!==null)M=!0,ve||(ve=!0,V());else{var se=t(p);se!==null&&je(de,se.startTime-ee)}}var ve=!1,E=-1,S=5,A=-1;function O(){return z?!0:!(s.unstable_now()-A<S)}function I(){if(z=!1,ve){var ee=s.unstable_now();A=ee;var se=!0;try{e:{M=!1,$&&($=!1,ae(E),E=-1),k=!0;var Ce=N;try{t:{for(H(ee),w=t(x);w!==null&&!(w.expirationTime>ee&&O());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,N=w.priorityLevel;var ze=Le(w.expirationTime<=ee);if(ee=s.unstable_now(),typeof ze=="function"){w.callback=ze,H(ee),se=!0;break t}w===t(x)&&a(x),H(ee)}else a(x);w=t(x)}if(w!==null)se=!0;else{var P=t(p);P!==null&&je(de,P.startTime-ee),se=!1}}break e}finally{w=null,N=Ce,k=!1}se=void 0}}finally{se?V():ve=!1}}}var V;if(typeof K=="function")V=function(){K(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ne=R.port2;R.port1.onmessage=I,V=function(){Ne.postMessage(null)}}else V=function(){Y(I,0)};function je(ee,se){E=Y(function(){ee(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(ee){switch(N){case 1:case 2:case 3:var se=3;break;default:se=N}var Ce=N;N=se;try{return ee()}finally{N=Ce}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(ee,se){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ce=N;N=ee;try{return se()}finally{N=Ce}},s.unstable_scheduleCallback=function(ee,se,Ce){var Le=s.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Le+Ce:Le):Ce=Le,ee){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Ce+ze,ee={id:b++,callback:se,priorityLevel:ee,startTime:Ce,expirationTime:ze,sortIndex:-1},Ce>Le?(ee.sortIndex=Ce,e(p,ee),t(x)===null&&ee===t(p)&&($?(ae(E),E=-1):$=!0,je(de,Ce-Le))):(ee.sortIndex=ze,e(x,ee),M||k||(M=!0,ve||(ve=!0,V()))),ee},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(ee){var se=N;return function(){var Ce=N;N=se;try{return ee.apply(this,arguments)}finally{N=Ce}}}})(zg)),zg}var Dv;function lE(){return Dv||(Dv=1,Ug.exports=iE()),Ug.exports}var Bg={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function oE(){if(Ov)return $n;Ov=1;var s=Xp();function e(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(x,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:x,containerInfo:p,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,$n.createPortal=function(x,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(x,p,null,b)},$n.flushSync=function(x){var p=d.T,b=a.p;try{if(d.T=null,a.p=2,x)return x()}finally{d.T=p,a.p=b,a.d.f()}},$n.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(x,p))},$n.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},$n.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:k}):b==="script"&&a.d.X(x,{crossOrigin:w,integrity:N,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);a.d.M(x,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(x)},$n.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);a.d.L(x,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(x,p){if(typeof x=="string")if(p){var b=g(p.as,p.crossOrigin);a.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(x)},$n.requestFormReset=function(x){a.d.r(x)},$n.unstable_batchedUpdates=function(x,p){return x(p)},$n.useFormState=function(x,p,b){return d.H.useFormState(x,p,b)},$n.useFormStatus=function(){return d.H.useHostTransitionStatus()},$n.version="19.2.0",$n}var Mv;function cE(){if(Mv)return Bg.exports;Mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bg.exports=oE(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function uE(){if(Vv)return eu;Vv=1;var s=lE(),e=Xp(),t=cE();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function x(n){if(u(n)!==n)throw Error(a(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(a(188));return r!==n?null:n}for(var l=n,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return x(f),n;if(m===c)return x(f),r;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,T=f.child;T;){if(T===l){v=!0,l=f,c=m;break}if(T===c){v=!0,c=f,l=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===l){v=!0,l=m,c=f;break}if(T===c){v=!0,c=m,l=f;break}T=T.sibling}if(!v)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),K=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=I&&n[I]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case Y:return"Profiler";case z:return"StrictMode";case de:return"Suspense";case ve:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case K:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case H:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return r=n.displayName||null,r!==null?r:Ne(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return Ne(n(r))}catch{}}return null}var je=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Le=[],ze=-1;function P(n){return{current:n}}function le(n){0>ze||(n.current=Le[ze],Le[ze]=null,ze--)}function be(n,r){ze++,Le[ze]=n.current,n.current=r}var xe=P(null),Q=P(null),we=P(null),D=P(null);function U(n,r){switch(be(we,r),be(Q,n),be(xe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Wb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Wb(r),n=Jb(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}le(xe),be(xe,n)}function q(){le(xe),le(Q),le(we)}function Ee(n){n.memoizedState!==null&&be(D,n);var r=xe.current,l=Jb(r,n.type);r!==l&&(be(Q,n),be(xe,l))}function he(n){Q.current===n&&(le(xe),le(Q)),D.current===n&&(le(D),Qc._currentValue=Ce)}var Ie,He;function st(n){if(Ie===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Ie=r&&r[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+n+He}var Xe=!1;function gt(n,r){if(!n||Xe)return"";Xe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ie){var ne=ie}Reflect.construct(n,[],me)}else{try{me.call()}catch(ie){ne=ie}n.call(me.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(me=n())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var L=v.split(`
`),Z=T.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===Z.length)for(c=L.length-1,f=Z.length-1;1<=c&&0<=f&&L[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==Z[f]){var oe=`
`+L[c].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=c&&0<=f);break}}}finally{Xe=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?st(l):""}function pt(n,r){switch(n.tag){case 26:case 27:case 5:return st(n.type);case 16:return st("Lazy");case 13:return n.child!==r&&r!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return gt(n.type,!1);case 11:return gt(n.type.render,!1);case 1:return gt(n.type,!0);case 31:return st("Activity");default:return""}}function Lt(n){try{var r="",l=null;do r+=pt(n,l),l=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Tt=Object.prototype.hasOwnProperty,zt=s.unstable_scheduleCallback,bs=s.unstable_cancelCallback,ar=s.unstable_shouldYield,Dn=s.unstable_requestPaint,Bt=s.unstable_now,vs=s.unstable_getCurrentPriorityLevel,ws=s.unstable_ImmediatePriority,Us=s.unstable_UserBlockingPriority,Hn=s.unstable_NormalPriority,mt=s.unstable_LowPriority,Ye=s.unstable_IdlePriority,Et=s.log,en=s.unstable_setDisableYieldValue,It=null,bt=null;function Xt(n){if(typeof Et=="function"&&en(n),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(It,n)}catch{}}var vt=Math.clz32?Math.clz32:_s,ln=Math.log,as=Math.LN2;function _s(n){return n>>>=0,n===0?32:31-(ln(n)/as|0)|0}var Nn=256,Ns=262144,St=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function is(n,r,l){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~m,c!==0?f=Fn(c):(v&=T,v!==0?f=Fn(v):l||(l=T&~n,l!==0&&(f=Fn(l))))):(T=c&~m,T!==0?f=Fn(T):v!==0?f=Fn(v):l||(l=c&~n,l!==0&&(f=Fn(l)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:f}function Wn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Fi(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(){var n=St;return St<<=1,(St&62914560)===0&&(St=4194304),n}function qn(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function te(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function fe(n,r,l,c,f,m){var v=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var T=n.entanglements,L=n.expirationTimes,Z=n.hiddenUpdates;for(l=v&~l;0<l;){var oe=31-vt(l),me=1<<oe;T[oe]=0,L[oe]=-1;var ne=Z[oe];if(ne!==null)for(Z[oe]=null,oe=0;oe<ne.length;oe++){var ie=ne[oe];ie!==null&&(ie.lane&=-536870913)}l&=~me}c!==0&&_e(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~r))}function _e(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-vt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function B(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var c=31-vt(l),f=1<<c;f&r|n[c]&r&&(n[c]|=r),l&=~f}}function X(n,r){var l=r&-r;return l=(l&42)!==0?1:pe(l),(l&(n.suspendedLanes|r))!==0?0:l}function pe(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ye(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Me(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:wv(n.type))}function Oe(n,r){var l=se.p;try{return se.p=n,r()}finally{se.p=l}}var qe=Math.random().toString(36).slice(2),Ze="__reactFiber$"+qe,rt="__reactProps$"+qe,$t="__reactContainer$"+qe,on="__reactEvents$"+qe,Kt="__reactListeners$"+qe,Jn="__reactHandles$"+qe,ta="__reactResources$"+qe,Cn="__reactMarker$"+qe;function Dl(n){delete n[Ze],delete n[rt],delete n[on],delete n[Kt],delete n[Jn]}function jr(n){var r=n[Ze];if(r)return r;for(var l=n.parentNode;l;){if(r=l[$t]||l[Ze]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=av(n);n!==null;){if(l=n[Ze])return l;n=av(n)}return r}n=l,l=n.parentNode}return null}function zs(n){if(n=n[Ze]||n[$t]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function js(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Tr(n){var r=n[ta];return r||(r=n[ta]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function fn(n){n[Cn]=!0}var nc=new Set,sc={};function Er(n,r){Sr(n,r),Sr(n+"Capture",r)}function Sr(n,r){for(sc[n]=r,n=0;n<r.length;n++)nc.add(r[n])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ac={},ic={};function Zu(n){return Tt.call(ic,n)?!0:Tt.call(ac,n)?!1:rc.test(n)?ic[n]=!0:(ac[n]=!0,!1)}function Ol(n,r,l){if(Zu(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function Ts(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function mn(n,r,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+c)}}function An(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ha(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lc(n,r,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ct(n){if(!n._valueTracker){var r=Ha(n)?"checked":"value";n._valueTracker=lc(n,r,""+n[r])}}function qi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return n&&(c=Ha(n)?n.checked?"true":"false":n.value),n=c,n!==l?(r.setValue(n),!0):!1}function Cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $i=/[\n"\\]/g;function ls(n){return n.replace($i,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ml(n,r,l,c,f,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+An(r)):n.value!==""+An(r)&&(n.value=""+An(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?oc(n,v,An(r)):l!=null?oc(n,v,An(l)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+An(T):n.removeAttribute("name")}function ed(n,r,l,c,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ct(n);return}l=l!=null?""+An(l):"",r=r!=null?""+An(r):l,T||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ct(n)}function oc(n,r,l){r==="number"&&Cr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Fa(n,r,l,c){if(n=n.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=r.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+An(l),r=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function td(n,r,l){if(r!=null&&(r=""+An(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+An(l):""}function qa(n,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(a(92));if(je(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=An(r),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),Ct(n)}function os(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(n,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,l):typeof l!="number"||l===0||nd.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function uc(n,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&l[f]!==c&&cc(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&cc(n,m,r[m])}function Vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(n){return $a.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ir(){}var dc=null;function Bs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ka=null,Ar=null;function Ki(n){var r=zs(n);if(r&&(n=r.stateNode)){var l=n[rt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ml(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ls(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==n&&c.form===n.form){var f=c[rt]||null;if(!f)throw Error(a(90));Ml(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===n.form&&qi(c)}break e;case"textarea":td(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Fa(n,!!l.multiple,r,!1)}}}var Pl=!1;function Ga(n,r,l){if(Pl)return n(r,l);Pl=!0;try{var c=n(r);return c}finally{if(Pl=!1,(Ka!==null||Ar!==null)&&(Xd(),Ka&&(r=Ka,n=Ar,Ar=Ka=null,Ki(r),n)))for(r=0;r<n.length;r++)Ki(n[r])}}function lr(n,r){var l=n.stateNode;if(l===null)return null;var c=l[rt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(Hs)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Gi=!1}var Rr=null,hc=null,Yi=null;function fc(){if(Yi)return Yi;var n,r=hc,l=r.length,c,f="value"in Rr?Rr.value:Rr.textContent,m=f.length;for(n=0;n<l&&r[n]===f[n];n++);var v=l-n;for(c=1;c<=v&&r[l-c]===f[m-c];c++);return Yi=f.slice(n,1<c?1-c:void 0)}function Qi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function na(){return!0}function or(){return!1}function On(n){function r(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(l=n[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?na:or,this.isPropagationStopped=or,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),r}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=On(sa),Ya=w({},sa,{view:0,detail:0}),mc=On(Ya),Qa,Ul,Ir,zl=w({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ir&&(Ir&&n.type==="mousemove"?(Qa=n.screenX-Ir.screenX,Ul=n.screenY-Ir.screenY):Ul=Qa=0,Ir=n),Qa)},movementY:function(n){return"movementY"in n?n.movementY:Ul}}),gc=On(zl),Xi=w({},zl,{dataTransfer:0}),rd=On(Xi),ad=w({},Ya,{relatedTarget:0}),Wi=On(ad),pc=w({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),id=On(pc),Bl=w({},sa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ld=On(Bl),od=w({},sa,{data:0}),Dr=On(od),cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dd[n])?!!r[n]:!1}function Xa(){return hd}var Zn=w({},Ya,{key:function(n){if(n.key){var r=cd[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ud[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(n){return n.type==="keypress"?Qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fd=On(Zn),md=w({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ra=On(md),h=w({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),y=On(h),_=w({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=On(_),W=w({},zl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),re=On(W),Se=w({},sa,{newState:0,oldState:0}),et=On(Se),cn=[9,13,27,32],wt=Hs&&"CompositionEvent"in window,Gt=null;Hs&&"documentMode"in document&&(Gt=document.documentMode);var Fs=Hs&&"TextEvent"in window&&!Gt,Or=Hs&&(!wt||Gt&&8<Gt&&11>=Gt),cr=" ",ur=!1;function Ji(n,r){switch(n){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fl=!1;function Sj(n,r){switch(n){case"compositionend":return Hl(r);case"keypress":return r.which!==32?null:(ur=!0,cr);case"textInput":return n=r.data,n===cr&&ur?null:n;default:return null}}function Cj(n,r){if(Fl)return n==="compositionend"||!wt&&Ji(n,r)?(n=fc(),Yi=hc=Rr=null,Fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Or&&r.locale!=="ko"?null:r.data;default:return null}}var Aj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ox(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Aj[n.type]:r==="textarea"}function cx(n,r,l,c){Ka?Ar?Ar.push(c):Ar=[c]:Ka=c,r=sh(r,"onChange"),0<r.length&&(l=new kr("onChange","change",null,l,c),n.push({event:l,listeners:r}))}var xc=null,yc=null;function Rj(n){$b(n,0)}function gd(n){var r=js(n);if(qi(r))return n}function ux(n,r){if(n==="change")return r}var dx=!1;if(Hs){var Ff;if(Hs){var qf="oninput"in document;if(!qf){var hx=document.createElement("div");hx.setAttribute("oninput","return;"),qf=typeof hx.oninput=="function"}Ff=qf}else Ff=!1;dx=Ff&&(!document.documentMode||9<document.documentMode)}function fx(){xc&&(xc.detachEvent("onpropertychange",mx),yc=xc=null)}function mx(n){if(n.propertyName==="value"&&gd(yc)){var r=[];cx(r,yc,n,Bs(n)),Ga(Rj,r)}}function kj(n,r,l){n==="focusin"?(fx(),xc=r,yc=l,xc.attachEvent("onpropertychange",mx)):n==="focusout"&&fx()}function Ij(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gd(yc)}function Dj(n,r){if(n==="click")return gd(r)}function Oj(n,r){if(n==="input"||n==="change")return gd(r)}function Mj(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Es=typeof Object.is=="function"?Object.is:Mj;function bc(n,r){if(Es(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!Tt.call(r,f)||!Es(n[f],r[f]))return!1}return!0}function gx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function px(n,r){var l=gx(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=r&&c>=r)return{node:l,offset:r-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gx(l)}}function xx(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?xx(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function yx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Cr(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=Cr(n.document)}return r}function $f(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Vj=Hs&&"documentMode"in document&&11>=document.documentMode,ql=null,Kf=null,vc=null,Gf=!1;function bx(n,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Gf||ql==null||ql!==Cr(c)||(c=ql,"selectionStart"in c&&$f(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vc&&bc(vc,c)||(vc=c,c=sh(Kf,"onSelect"),0<c.length&&(r=new kr("onSelect","select",null,r,l),n.push({event:r,listeners:c}),r.target=ql)))}function Zi(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var $l={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Yf={},vx={};Hs&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function el(n){if(Yf[n])return Yf[n];if(!$l[n])return n;var r=$l[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in vx)return Yf[n]=r[l];return n}var wx=el("animationend"),_x=el("animationiteration"),Nx=el("animationstart"),Lj=el("transitionrun"),Pj=el("transitionstart"),Uj=el("transitioncancel"),jx=el("transitionend"),Tx=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function dr(n,r){Tx.set(n,r),Er(r,[n])}var pd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qs=[],Kl=0,Xf=0;function xd(){for(var n=Kl,r=Xf=Kl=0;r<n;){var l=qs[r];qs[r++]=null;var c=qs[r];qs[r++]=null;var f=qs[r];qs[r++]=null;var m=qs[r];if(qs[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&Ex(l,f,m)}}function yd(n,r,l,c){qs[Kl++]=n,qs[Kl++]=r,qs[Kl++]=l,qs[Kl++]=c,Xf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Wf(n,r,l,c){return yd(n,r,l,c),bd(n)}function tl(n,r){return yd(n,null,null,r),bd(n)}function Ex(n,r,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=n.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-vt(l),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=l|536870912),m):null}function bd(n){if(50<Hc)throw Hc=0,ig=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Gl={};function zj(n,r,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(n,r,l,c){return new zj(n,r,l,c)}function Jf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function aa(n,r){var l=n.alternate;return l===null?(l=Ss(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Sx(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function vd(n,r,l,c,f,m){var v=0;if(c=n,typeof n=="function")Jf(n)&&(v=1);else if(typeof n=="string")v=$T(n,l,xe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=Ss(31,l,r,f),n.elementType=A,n.lanes=m,n;case $:return nl(l.children,f,m,r);case z:v=8,f|=24;break;case Y:return n=Ss(12,l,r,f|2),n.elementType=Y,n.lanes=m,n;case de:return n=Ss(13,l,r,f),n.elementType=de,n.lanes=m,n;case ve:return n=Ss(19,l,r,f),n.elementType=ve,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:v=10;break e;case ae:v=9;break e;case H:v=11;break e;case E:v=14;break e;case S:v=16,c=null;break e}v=29,l=Error(a(130,n===null?"null":typeof n,"")),c=null}return r=Ss(v,l,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function nl(n,r,l,c){return n=Ss(7,n,c,r),n.lanes=l,n}function Zf(n,r,l){return n=Ss(6,n,null,r),n.lanes=l,n}function Cx(n){var r=Ss(18,null,null,0);return r.stateNode=n,r}function em(n,r,l){return r=Ss(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ax=new WeakMap;function $s(n,r){if(typeof n=="object"&&n!==null){var l=Ax.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Lt(r)},Ax.set(n,r),r)}return{value:n,source:r,stack:Lt(r)}}var Yl=[],Ql=0,wd=null,wc=0,Ks=[],Gs=0,Wa=null,Mr=1,Vr="";function ia(n,r){Yl[Ql++]=wc,Yl[Ql++]=wd,wd=n,wc=r}function Rx(n,r,l){Ks[Gs++]=Mr,Ks[Gs++]=Vr,Ks[Gs++]=Wa,Wa=n;var c=Mr;n=Vr;var f=32-vt(c)-1;c&=~(1<<f),l+=1;var m=32-vt(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Mr=1<<32-vt(r)+f|l<<f|c,Vr=m+n}else Mr=1<<m|l<<f|c,Vr=n}function tm(n){n.return!==null&&(ia(n,1),Rx(n,1,0))}function nm(n){for(;n===wd;)wd=Yl[--Ql],Yl[Ql]=null,wc=Yl[--Ql],Yl[Ql]=null;for(;n===Wa;)Wa=Ks[--Gs],Ks[Gs]=null,Vr=Ks[--Gs],Ks[Gs]=null,Mr=Ks[--Gs],Ks[Gs]=null}function kx(n,r){Ks[Gs++]=Mr,Ks[Gs++]=Vr,Ks[Gs++]=Wa,Mr=r.id,Vr=r.overflow,Wa=n}var Mn=null,Ht=null,ht=!1,Ja=null,Ys=!1,sm=Error(a(519));function Za(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _c($s(r,n)),sm}function Ix(n){var r=n.stateNode,l=n.type,c=n.memoizedProps;switch(r[Ze]=n,r[rt]=c,l){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(l=0;l<qc.length;l++)it(qc[l],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":it("invalid",r),ed(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":it("invalid",r);break;case"textarea":it("invalid",r),qa(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Qb(r.textContent,l)?(c.popover!=null&&(it("beforetoggle",r),it("toggle",r)),c.onScroll!=null&&it("scroll",r),c.onScrollEnd!=null&&it("scrollend",r),c.onClick!=null&&(r.onclick=ir),r=!0):r=!1,r||Za(n,!0)}function Dx(n){for(Mn=n.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:Mn=Mn.return}}function Xl(n){if(n!==Mn)return!1;if(!ht)return Dx(n),ht=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||wg(n.type,n.memoizedProps)),l=!l),l&&Ht&&Za(n),Dx(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ht=rv(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ht=rv(n)}else r===27?(r=Ht,fi(n.type)?(n=Eg,Eg=null,Ht=n):Ht=r):Ht=Mn?Xs(n.stateNode.nextSibling):null;return!0}function sl(){Ht=Mn=null,ht=!1}function rm(){var n=Ja;return n!==null&&(hs===null?hs=n:hs.push.apply(hs,n),Ja=null),n}function _c(n){Ja===null?Ja=[n]:Ja.push(n)}var am=P(null),rl=null,la=null;function ei(n,r,l){be(am,r._currentValue),r._currentValue=l}function oa(n){n._currentValue=am.current,le(am)}function im(n,r,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===l)break;n=n.return}}function lm(n,r,l,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var L=0;L<r.length;L++)if(T.context===r[L]){m.lanes|=l,T=m.alternate,T!==null&&(T.lanes|=l),im(m.return,l,n),c||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),im(v,l,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Wl(n,r,l,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var T=f.type;Es(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===D.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Qc):n=[Qc])}f=f.return}n!==null&&lm(r,n,l,c),r.flags|=262144}function _d(n){for(n=n.firstContext;n!==null;){if(!Es(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function al(n){rl=n,la=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Vn(n){return Ox(rl,n)}function Nd(n,r){return rl===null&&al(n),Ox(n,r)}function Ox(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},la===null){if(n===null)throw Error(a(308));la=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else la=la.next=r;return l}var Bj=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},Hj=s.unstable_scheduleCallback,Fj=s.unstable_NormalPriority,gn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new Bj,data:new Map,refCount:0}}function Nc(n){n.refCount--,n.refCount===0&&Hj(Fj,function(){n.controller.abort()})}var jc=null,cm=0,Jl=0,Zl=null;function qj(n,r){if(jc===null){var l=jc=[];cm=0,Jl=hg(),Zl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return cm++,r.then(Mx,Mx),r}function Mx(){if(--cm===0&&jc!==null){Zl!==null&&(Zl.status="fulfilled");var n=jc;jc=null,Jl=0,Zl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function $j(n,r){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<l.length;f++)(0,l[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Vx=ee.S;ee.S=function(n,r){bb=Bt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qj(n,r),Vx!==null&&Vx(n,r)};var il=P(null);function um(){var n=il.current;return n!==null?n:Pt.pooledCache}function jd(n,r){r===null?be(il,il.current):be(il,r.pool)}function Lx(){var n=um();return n===null?null:{parent:gn._currentValue,pool:n}}var eo=Error(a(460)),dm=Error(a(474)),Td=Error(a(542)),Ed={then:function(){}};function Px(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ux(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(ir,ir),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Bx(n),n;default:if(typeof r.status=="string")r.then(ir,ir);else{if(n=Pt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Bx(n),n}throw ol=r,eo}}function ll(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ol=l,eo):l}}var ol=null;function zx(){if(ol===null)throw Error(a(459));var n=ol;return ol=null,n}function Bx(n){if(n===eo||n===Td)throw Error(a(483))}var to=null,Tc=0;function Sd(n){var r=Tc;return Tc+=1,to===null&&(to=[]),Ux(to,n,r)}function Ec(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Cd(n,r){throw r.$$typeof===N?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Hx(n){function r(G,F){if(n){var J=G.deletions;J===null?(G.deletions=[F],G.flags|=16):J.push(F)}}function l(G,F){if(!n)return null;for(;F!==null;)r(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function f(G,F){return G=aa(G,F),G.index=0,G.sibling=null,G}function m(G,F,J){return G.index=J,n?(J=G.alternate,J!==null?(J=J.index,J<F?(G.flags|=67108866,F):J):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function v(G){return n&&G.alternate===null&&(G.flags|=67108866),G}function T(G,F,J,ce){return F===null||F.tag!==6?(F=Zf(J,G.mode,ce),F.return=G,F):(F=f(F,J),F.return=G,F)}function L(G,F,J,ce){var Pe=J.type;return Pe===$?oe(G,F,J.props.children,ce,J.key):F!==null&&(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===S&&ll(Pe)===F.type)?(F=f(F,J.props),Ec(F,J),F.return=G,F):(F=vd(J.type,J.key,J.props,null,G.mode,ce),Ec(F,J),F.return=G,F)}function Z(G,F,J,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=em(J,G.mode,ce),F.return=G,F):(F=f(F,J.children||[]),F.return=G,F)}function oe(G,F,J,ce,Pe){return F===null||F.tag!==7?(F=nl(J,G.mode,ce,Pe),F.return=G,F):(F=f(F,J),F.return=G,F)}function me(G,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Zf(""+F,G.mode,J),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case k:return J=vd(F.type,F.key,F.props,null,G.mode,J),Ec(J,F),J.return=G,J;case M:return F=em(F,G.mode,J),F.return=G,F;case S:return F=ll(F),me(G,F,J)}if(je(F)||V(F))return F=nl(F,G.mode,J,null),F.return=G,F;if(typeof F.then=="function")return me(G,Sd(F),J);if(F.$$typeof===K)return me(G,Nd(G,F),J);Cd(G,F)}return null}function ne(G,F,J,ce){var Pe=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Pe!==null?null:T(G,F,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return J.key===Pe?L(G,F,J,ce):null;case M:return J.key===Pe?Z(G,F,J,ce):null;case S:return J=ll(J),ne(G,F,J,ce)}if(je(J)||V(J))return Pe!==null?null:oe(G,F,J,ce,null);if(typeof J.then=="function")return ne(G,F,Sd(J),ce);if(J.$$typeof===K)return ne(G,F,Nd(G,J),ce);Cd(G,J)}return null}function ie(G,F,J,ce,Pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return G=G.get(J)||null,T(F,G,""+ce,Pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case k:return G=G.get(ce.key===null?J:ce.key)||null,L(F,G,ce,Pe);case M:return G=G.get(ce.key===null?J:ce.key)||null,Z(F,G,ce,Pe);case S:return ce=ll(ce),ie(G,F,J,ce,Pe)}if(je(ce)||V(ce))return G=G.get(J)||null,oe(F,G,ce,Pe,null);if(typeof ce.then=="function")return ie(G,F,J,Sd(ce),Pe);if(ce.$$typeof===K)return ie(G,F,J,Nd(F,ce),Pe);Cd(F,ce)}return null}function De(G,F,J,ce){for(var Pe=null,xt=null,Ve=F,nt=F=0,ot=null;Ve!==null&&nt<J.length;nt++){Ve.index>nt?(ot=Ve,Ve=null):ot=Ve.sibling;var yt=ne(G,Ve,J[nt],ce);if(yt===null){Ve===null&&(Ve=ot);break}n&&Ve&&yt.alternate===null&&r(G,Ve),F=m(yt,F,nt),xt===null?Pe=yt:xt.sibling=yt,xt=yt,Ve=ot}if(nt===J.length)return l(G,Ve),ht&&ia(G,nt),Pe;if(Ve===null){for(;nt<J.length;nt++)Ve=me(G,J[nt],ce),Ve!==null&&(F=m(Ve,F,nt),xt===null?Pe=Ve:xt.sibling=Ve,xt=Ve);return ht&&ia(G,nt),Pe}for(Ve=c(Ve);nt<J.length;nt++)ot=ie(Ve,G,nt,J[nt],ce),ot!==null&&(n&&ot.alternate!==null&&Ve.delete(ot.key===null?nt:ot.key),F=m(ot,F,nt),xt===null?Pe=ot:xt.sibling=ot,xt=ot);return n&&Ve.forEach(function(yi){return r(G,yi)}),ht&&ia(G,nt),Pe}function Fe(G,F,J,ce){if(J==null)throw Error(a(151));for(var Pe=null,xt=null,Ve=F,nt=F=0,ot=null,yt=J.next();Ve!==null&&!yt.done;nt++,yt=J.next()){Ve.index>nt?(ot=Ve,Ve=null):ot=Ve.sibling;var yi=ne(G,Ve,yt.value,ce);if(yi===null){Ve===null&&(Ve=ot);break}n&&Ve&&yi.alternate===null&&r(G,Ve),F=m(yi,F,nt),xt===null?Pe=yi:xt.sibling=yi,xt=yi,Ve=ot}if(yt.done)return l(G,Ve),ht&&ia(G,nt),Pe;if(Ve===null){for(;!yt.done;nt++,yt=J.next())yt=me(G,yt.value,ce),yt!==null&&(F=m(yt,F,nt),xt===null?Pe=yt:xt.sibling=yt,xt=yt);return ht&&ia(G,nt),Pe}for(Ve=c(Ve);!yt.done;nt++,yt=J.next())yt=ie(Ve,G,nt,yt.value,ce),yt!==null&&(n&&yt.alternate!==null&&Ve.delete(yt.key===null?nt:yt.key),F=m(yt,F,nt),xt===null?Pe=yt:xt.sibling=yt,xt=yt);return n&&Ve.forEach(function(nE){return r(G,nE)}),ht&&ia(G,nt),Pe}function Vt(G,F,J,ce){if(typeof J=="object"&&J!==null&&J.type===$&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case k:e:{for(var Pe=J.key;F!==null;){if(F.key===Pe){if(Pe=J.type,Pe===$){if(F.tag===7){l(G,F.sibling),ce=f(F,J.props.children),ce.return=G,G=ce;break e}}else if(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===S&&ll(Pe)===F.type){l(G,F.sibling),ce=f(F,J.props),Ec(ce,J),ce.return=G,G=ce;break e}l(G,F);break}else r(G,F);F=F.sibling}J.type===$?(ce=nl(J.props.children,G.mode,ce,J.key),ce.return=G,G=ce):(ce=vd(J.type,J.key,J.props,null,G.mode,ce),Ec(ce,J),ce.return=G,G=ce)}return v(G);case M:e:{for(Pe=J.key;F!==null;){if(F.key===Pe)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){l(G,F.sibling),ce=f(F,J.children||[]),ce.return=G,G=ce;break e}else{l(G,F);break}else r(G,F);F=F.sibling}ce=em(J,G.mode,ce),ce.return=G,G=ce}return v(G);case S:return J=ll(J),Vt(G,F,J,ce)}if(je(J))return De(G,F,J,ce);if(V(J)){if(Pe=V(J),typeof Pe!="function")throw Error(a(150));return J=Pe.call(J),Fe(G,F,J,ce)}if(typeof J.then=="function")return Vt(G,F,Sd(J),ce);if(J.$$typeof===K)return Vt(G,F,Nd(G,J),ce);Cd(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(l(G,F.sibling),ce=f(F,J),ce.return=G,G=ce):(l(G,F),ce=Zf(J,G.mode,ce),ce.return=G,G=ce),v(G)):l(G,F)}return function(G,F,J,ce){try{Tc=0;var Pe=Vt(G,F,J,ce);return to=null,Pe}catch(Ve){if(Ve===eo||Ve===Td)throw Ve;var xt=Ss(29,Ve,null,G.mode);return xt.lanes=ce,xt.return=G,xt}finally{}}}var cl=Hx(!0),Fx=Hx(!1),ti=!1;function hm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ni(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function si(n,r,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=bd(n),Ex(n,null,l),r}return yd(n,c,r,l),bd(n)}function Sc(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,B(n,l)}}function mm(n,r){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var gm=!1;function Cc(){if(gm){var n=Zl;if(n!==null)throw n}}function Ac(n,r,l,c){gm=!1;var f=n.updateQueue;ti=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var L=T,Z=L.next;L.next=null,v===null?m=Z:v.next=Z,v=L;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,T=oe.lastBaseUpdate,T!==v&&(T===null?oe.firstBaseUpdate=Z:T.next=Z,oe.lastBaseUpdate=L))}if(m!==null){var me=f.baseState;v=0,oe=Z=L=null,T=m;do{var ne=T.lane&-536870913,ie=ne!==T.lane;if(ie?(lt&ne)===ne:(c&ne)===ne){ne!==0&&ne===Jl&&(gm=!0),oe!==null&&(oe=oe.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var De=n,Fe=T;ne=r;var Vt=l;switch(Fe.tag){case 1:if(De=Fe.payload,typeof De=="function"){me=De.call(Vt,me,ne);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Fe.payload,ne=typeof De=="function"?De.call(Vt,me,ne):De,ne==null)break e;me=w({},me,ne);break e;case 2:ti=!0}}ne=T.callback,ne!==null&&(n.flags|=64,ie&&(n.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:T.tag,payload:T.payload,callback:T.callback,next:null},oe===null?(Z=oe=ie,L=me):oe=oe.next=ie,v|=ne;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;ie=T,T=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);oe===null&&(L=me),f.baseState=L,f.firstBaseUpdate=Z,f.lastBaseUpdate=oe,m===null&&(f.shared.lanes=0),oi|=v,n.lanes=v,n.memoizedState=me}}function qx(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function $x(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)qx(l[n],r)}var no=P(null),Ad=P(0);function Kx(n,r){n=xa,be(Ad,n),be(no,r),xa=n|r.baseLanes}function pm(){be(Ad,xa),be(no,no.current)}function xm(){xa=Ad.current,le(no),le(Ad)}var Cs=P(null),Qs=null;function ri(n){var r=n.alternate;be(un,un.current&1),be(Cs,n),Qs===null&&(r===null||no.current!==null||r.memoizedState!==null)&&(Qs=n)}function ym(n){be(un,un.current),be(Cs,n),Qs===null&&(Qs=n)}function Gx(n){n.tag===22?(be(un,un.current),be(Cs,n),Qs===null&&(Qs=n)):ai()}function ai(){be(un,un.current),be(Cs,Cs.current)}function As(n){le(Cs),Qs===n&&(Qs=null),le(un)}var un=P(0);function Rd(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||jg(l)||Tg(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ca=0,tt=null,Ot=null,pn=null,kd=!1,so=!1,ul=!1,Id=0,Rc=0,ro=null,Kj=0;function tn(){throw Error(a(321))}function bm(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Es(n[l],r[l]))return!1;return!0}function vm(n,r,l,c,f,m){return ca=m,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=n===null||n.memoizedState===null?Ry:Mm,ul=!1,m=l(c,f),ul=!1,so&&(m=Qx(r,l,c,f)),Yx(n),m}function Yx(n){ee.H=Dc;var r=Ot!==null&&Ot.next!==null;if(ca=0,pn=Ot=tt=null,kd=!1,Rc=0,ro=null,r)throw Error(a(300));n===null||xn||(n=n.dependencies,n!==null&&_d(n)&&(xn=!0))}function Qx(n,r,l,c){tt=n;var f=0;do{if(so&&(ro=null),Rc=0,so=!1,25<=f)throw Error(a(301));if(f+=1,pn=Ot=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=ky,m=r(l,c)}while(so);return m}function Gj(){var n=ee.H,r=n.useState()[0];return r=typeof r.then=="function"?kc(r):r,n=n.useState()[0],(Ot!==null?Ot.memoizedState:null)!==n&&(tt.flags|=1024),r}function wm(){var n=Id!==0;return Id=0,n}function _m(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function Nm(n){if(kd){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}kd=!1}ca=0,pn=Ot=tt=null,so=!1,Rc=Id=0,ro=null}function es(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tt.memoizedState=pn=n:pn=pn.next=n,pn}function dn(){if(Ot===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var r=pn===null?tt.memoizedState:pn.next;if(r!==null)pn=r,Ot=n;else{if(n===null)throw tt.alternate===null?Error(a(467)):Error(a(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?tt.memoizedState=pn=n:pn=pn.next=n}return pn}function Dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kc(n){var r=Rc;return Rc+=1,ro===null&&(ro=[]),n=Ux(ro,n,r),r=tt,(pn===null?r.memoizedState:pn.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Ry:Mm),n}function Od(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return kc(n);if(n.$$typeof===K)return Vn(n)}throw Error(a(438,String(n)))}function jm(n){var r=null,l=tt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Dd(),tt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),c=0;c<n;c++)l[c]=O;return r.index++,l}function ua(n,r){return typeof r=="function"?r(n):r}function Md(n){var r=dn();return Tm(r,Ot,n)}function Tm(n,r,l){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var T=v=null,L=null,Z=r,oe=!1;do{var me=Z.lane&-536870913;if(me!==Z.lane?(lt&me)===me:(ca&me)===me){var ne=Z.revertLane;if(ne===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),me===Jl&&(oe=!0);else if((ca&ne)===ne){Z=Z.next,ne===Jl&&(oe=!0);continue}else me={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(T=L=me,v=m):L=L.next=me,tt.lanes|=ne,oi|=ne;me=Z.action,ul&&l(m,me),m=Z.hasEagerState?Z.eagerState:l(m,me)}else ne={lane:me,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(T=L=ne,v=m):L=L.next=ne,tt.lanes|=me,oi|=me;Z=Z.next}while(Z!==null&&Z!==r);if(L===null?v=m:L.next=T,!Es(m,n.memoizedState)&&(xn=!0,oe&&(l=Zl,l!==null)))throw l;n.memoizedState=m,n.baseState=v,n.baseQueue=L,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Em(n){var r=dn(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Es(m,r.memoizedState)||(xn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function Xx(n,r,l){var c=tt,f=dn(),m=ht;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=r();var v=!Es((Ot||f).memoizedState,l);if(v&&(f.memoizedState=l,xn=!0),f=f.queue,Am(Zx.bind(null,c,f,n),[n]),f.getSnapshot!==r||v||pn!==null&&pn.memoizedState.tag&1){if(c.flags|=2048,ao(9,{destroy:void 0},Jx.bind(null,c,f,l,r),null),Pt===null)throw Error(a(349));m||(ca&127)!==0||Wx(c,r,l)}return l}function Wx(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=tt.updateQueue,r===null?(r=Dd(),tt.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function Jx(n,r,l,c){r.value=l,r.getSnapshot=c,ey(r)&&ty(n)}function Zx(n,r,l){return l(function(){ey(r)&&ty(n)})}function ey(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Es(n,l)}catch{return!0}}function ty(n){var r=tl(n,2);r!==null&&fs(r,n,2)}function Sm(n){var r=es();if(typeof n=="function"){var l=n;if(n=l(),ul){Xt(!0);try{l()}finally{Xt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},r}function ny(n,r,l,c){return n.baseState=l,Tm(n,Ot,typeof c=="function"?c:ua)}function Yj(n,r,l,c,f){if(Pd(n))throw Error(a(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};ee.T!==null?l(!0):m.isTransition=!1,c(m),l=r.pending,l===null?(m.next=r.pending=m,sy(r,m)):(m.next=l.next,r.pending=l.next=m)}}function sy(n,r){var l=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=ee.T,v={};ee.T=v;try{var T=l(f,c),L=ee.S;L!==null&&L(v,T),ry(n,r,T)}catch(Z){Cm(n,r,Z)}finally{m!==null&&v.types!==null&&(m.types=v.types),ee.T=m}}else try{m=l(f,c),ry(n,r,m)}catch(Z){Cm(n,r,Z)}}function ry(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){ay(n,r,c)},function(c){return Cm(n,r,c)}):ay(n,r,l)}function ay(n,r,l){r.status="fulfilled",r.value=l,iy(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,sy(n,l)))}function Cm(n,r,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,iy(r),r=r.next;while(r!==c)}n.action=null}function iy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function ly(n,r){return r}function oy(n,r){if(ht){var l=Pt.formState;if(l!==null){e:{var c=tt;if(ht){if(Ht){t:{for(var f=Ht,m=Ys;f.nodeType!==8;){if(!m){f=null;break t}if(f=Xs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ht=Xs(f.nextSibling),c=f.data==="F!";break e}}Za(c)}c=!1}c&&(r=l[0])}}return l=es(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:r},l.queue=c,l=Sy.bind(null,tt,c),c.dispatch=l,c=Sm(!1),m=Om.bind(null,tt,!1,c.queue),c=es(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,l=Yj.bind(null,tt,f,m,l),f.dispatch=l,c.memoizedState=n,[r,l,!1]}function cy(n){var r=dn();return uy(r,Ot,n)}function uy(n,r,l){if(r=Tm(n,r,ly)[0],n=Md(ua)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=kc(r)}catch(v){throw v===eo?Td:v}else c=r;r=dn();var f=r.queue,m=f.dispatch;return l!==r.memoizedState&&(tt.flags|=2048,ao(9,{destroy:void 0},Qj.bind(null,f,l),null)),[c,m,n]}function Qj(n,r){n.action=r}function dy(n){var r=dn(),l=Ot;if(l!==null)return uy(r,l,n);dn(),r=r.memoizedState,l=dn();var c=l.queue.dispatch;return l.memoizedState=n,[r,c,!1]}function ao(n,r,l,c){return n={tag:n,create:l,deps:c,inst:r,next:null},r=tt.updateQueue,r===null&&(r=Dd(),tt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,r.lastEffect=n),n}function hy(){return dn().memoizedState}function Vd(n,r,l,c){var f=es();tt.flags|=n,f.memoizedState=ao(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ld(n,r,l,c){var f=dn();c=c===void 0?null:c;var m=f.memoizedState.inst;Ot!==null&&c!==null&&bm(c,Ot.memoizedState.deps)?f.memoizedState=ao(r,m,l,c):(tt.flags|=n,f.memoizedState=ao(1|r,m,l,c))}function fy(n,r){Vd(8390656,8,n,r)}function Am(n,r){Ld(2048,8,n,r)}function Xj(n){tt.flags|=4;var r=tt.updateQueue;if(r===null)r=Dd(),tt.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function my(n){var r=dn().memoizedState;return Xj({ref:r,nextImpl:n}),function(){if((_t&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function gy(n,r){return Ld(4,2,n,r)}function py(n,r){return Ld(4,4,n,r)}function xy(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function yy(n,r,l){l=l!=null?l.concat([n]):null,Ld(4,4,xy.bind(null,r,n),l)}function Rm(){}function by(n,r){var l=dn();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&bm(r,c[1])?c[0]:(l.memoizedState=[n,r],n)}function vy(n,r){var l=dn();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&bm(r,c[1]))return c[0];if(c=n(),ul){Xt(!0);try{n()}finally{Xt(!1)}}return l.memoizedState=[c,r],c}function km(n,r,l){return l===void 0||(ca&1073741824)!==0&&(lt&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=wb(),tt.lanes|=n,oi|=n,l)}function wy(n,r,l,c){return Es(l,r)?l:no.current!==null?(n=km(n,l,c),Es(n,r)||(xn=!0),n):(ca&42)===0||(ca&1073741824)!==0&&(lt&261930)===0?(xn=!0,n.memoizedState=l):(n=wb(),tt.lanes|=n,oi|=n,r)}function _y(n,r,l,c,f){var m=se.p;se.p=m!==0&&8>m?m:8;var v=ee.T,T={};ee.T=T,Om(n,!1,r,l);try{var L=f(),Z=ee.S;if(Z!==null&&Z(T,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=$j(L,c);Ic(n,r,oe,Is(n))}else Ic(n,r,c,Is(n))}catch(me){Ic(n,r,{then:function(){},status:"rejected",reason:me},Is())}finally{se.p=m,v!==null&&T.types!==null&&(v.types=T.types),ee.T=v}}function Wj(){}function Im(n,r,l,c){if(n.tag!==5)throw Error(a(476));var f=Ny(n).queue;_y(n,f,r,Ce,l===null?Wj:function(){return jy(n),l(c)})}function Ny(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:Ce},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function jy(n){var r=Ny(n);r.next===null&&(r=n.alternate.memoizedState),Ic(n,r.next.queue,{},Is())}function Dm(){return Vn(Qc)}function Ty(){return dn().memoizedState}function Ey(){return dn().memoizedState}function Jj(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=Is();n=ni(l);var c=si(r,n,l);c!==null&&(fs(c,r,l),Sc(c,r,l)),r={cache:om()},n.payload=r;return}r=r.return}}function Zj(n,r,l){var c=Is();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pd(n)?Cy(r,l):(l=Wf(n,r,l,c),l!==null&&(fs(l,n,c),Ay(l,r,c)))}function Sy(n,r,l){var c=Is();Ic(n,r,l,c)}function Ic(n,r,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pd(n))Cy(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,T=m(v,l);if(f.hasEagerState=!0,f.eagerState=T,Es(T,v))return yd(n,r,f,0),Pt===null&&xd(),!1}catch{}finally{}if(l=Wf(n,r,f,c),l!==null)return fs(l,n,c),Ay(l,r,c),!0}return!1}function Om(n,r,l,c){if(c={lane:2,revertLane:hg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Pd(n)){if(r)throw Error(a(479))}else r=Wf(n,l,c,2),r!==null&&fs(r,n,2)}function Pd(n){var r=n.alternate;return n===tt||r!==null&&r===tt}function Cy(n,r){so=kd=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Ay(n,r,l){if((l&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,l|=c,r.lanes=l,B(n,l)}}var Dc={readContext:Vn,use:Od,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Dc.useEffectEvent=tn;var Ry={readContext:Vn,use:Od,useCallback:function(n,r){return es().memoizedState=[n,r===void 0?null:r],n},useContext:Vn,useEffect:fy,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,Vd(4194308,4,xy.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Vd(4194308,4,n,r)},useInsertionEffect:function(n,r){Vd(4,2,n,r)},useMemo:function(n,r){var l=es();r=r===void 0?null:r;var c=n();if(ul){Xt(!0);try{n()}finally{Xt(!1)}}return l.memoizedState=[c,r],c},useReducer:function(n,r,l){var c=es();if(l!==void 0){var f=l(r);if(ul){Xt(!0);try{l(r)}finally{Xt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=Zj.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var r=es();return n={current:n},r.memoizedState=n},useState:function(n){n=Sm(n);var r=n.queue,l=Sy.bind(null,tt,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:Rm,useDeferredValue:function(n,r){var l=es();return km(l,n,r)},useTransition:function(){var n=Sm(!1);return n=_y.bind(null,tt,n.queue,!0,!1),es().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var c=tt,f=es();if(ht){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),Pt===null)throw Error(a(349));(lt&127)!==0||Wx(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,fy(Zx.bind(null,c,m,n),[n]),c.flags|=2048,ao(9,{destroy:void 0},Jx.bind(null,c,m,l,r),null),l},useId:function(){var n=es(),r=Pt.identifierPrefix;if(ht){var l=Vr,c=Mr;l=(c&~(1<<32-vt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Id++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Kj++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Dm,useFormState:oy,useActionState:oy,useOptimistic:function(n){var r=es();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Om.bind(null,tt,!0,l),l.dispatch=r,[n,r]},useMemoCache:jm,useCacheRefresh:function(){return es().memoizedState=Jj.bind(null,tt)},useEffectEvent:function(n){var r=es(),l={impl:n};return r.memoizedState=l,function(){if((_t&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Mm={readContext:Vn,use:Od,useCallback:by,useContext:Vn,useEffect:Am,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:py,useMemo:vy,useReducer:Md,useRef:hy,useState:function(){return Md(ua)},useDebugValue:Rm,useDeferredValue:function(n,r){var l=dn();return wy(l,Ot.memoizedState,n,r)},useTransition:function(){var n=Md(ua)[0],r=dn().memoizedState;return[typeof n=="boolean"?n:kc(n),r]},useSyncExternalStore:Xx,useId:Ty,useHostTransitionStatus:Dm,useFormState:cy,useActionState:cy,useOptimistic:function(n,r){var l=dn();return ny(l,Ot,n,r)},useMemoCache:jm,useCacheRefresh:Ey};Mm.useEffectEvent=my;var ky={readContext:Vn,use:Od,useCallback:by,useContext:Vn,useEffect:Am,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:py,useMemo:vy,useReducer:Em,useRef:hy,useState:function(){return Em(ua)},useDebugValue:Rm,useDeferredValue:function(n,r){var l=dn();return Ot===null?km(l,n,r):wy(l,Ot.memoizedState,n,r)},useTransition:function(){var n=Em(ua)[0],r=dn().memoizedState;return[typeof n=="boolean"?n:kc(n),r]},useSyncExternalStore:Xx,useId:Ty,useHostTransitionStatus:Dm,useFormState:dy,useActionState:dy,useOptimistic:function(n,r){var l=dn();return Ot!==null?ny(l,Ot,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:jm,useCacheRefresh:Ey};ky.useEffectEvent=my;function Vm(n,r,l,c){r=n.memoizedState,l=l(c,r),l=l==null?r:w({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Lm={enqueueSetState:function(n,r,l){n=n._reactInternals;var c=Is(),f=ni(c);f.payload=r,l!=null&&(f.callback=l),r=si(n,f,c),r!==null&&(fs(r,n,c),Sc(r,n,c))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var c=Is(),f=ni(c);f.tag=1,f.payload=r,l!=null&&(f.callback=l),r=si(n,f,c),r!==null&&(fs(r,n,c),Sc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Is(),c=ni(l);c.tag=2,r!=null&&(c.callback=r),r=si(n,c,l),r!==null&&(fs(r,n,l),Sc(r,n,l))}};function Iy(n,r,l,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!bc(l,c)||!bc(f,m):!0}function Dy(n,r,l,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==n&&Lm.enqueueReplaceState(r,r.state,null)}function dl(n,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(n=n.defaultProps){l===r&&(l=w({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function Oy(n){pd(n)}function My(n){console.error(n)}function Vy(n){pd(n)}function Ud(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ly(n,r,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pm(n,r,l){return l=ni(l),l.tag=3,l.payload={element:null},l.callback=function(){Ud(n,r)},l}function Py(n){return n=ni(n),n.tag=3,n}function Uy(n,r,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Ly(r,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Ly(r,l,c),typeof f!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function eT(n,r,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Wl(r,l,f,!0),l=Cs.current,l!==null){switch(l.tag){case 31:case 13:return Qs===null?Wd():l.alternate===null&&nn===0&&(nn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Ed?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),cg(n,c,f)),!1;case 22:return l.flags|=65536,c===Ed?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),cg(n,c,f)),!1}throw Error(a(435,l.tag))}return cg(n,c,f),Wd(),!1}if(ht)return r=Cs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==sm&&(n=Error(a(422),{cause:c}),_c($s(n,l)))):(c!==sm&&(r=Error(a(423),{cause:c}),_c($s(r,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=$s(c,l),f=Pm(n.stateNode,c,f),mm(n,f),nn!==4&&(nn=2)),!1;var m=Error(a(520),{cause:c});if(m=$s(m,l),Bc===null?Bc=[m]:Bc.push(m),nn!==4&&(nn=2),r===null)return!0;c=$s(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=Pm(l.stateNode,c,n),mm(l,n),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ci===null||!ci.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Py(f),Uy(f,n,l,c),mm(l,f),!1}l=l.return}while(l!==null);return!1}var Um=Error(a(461)),xn=!1;function Ln(n,r,l,c){r.child=n===null?Fx(r,null,l,c):cl(r,n.child,l,c)}function zy(n,r,l,c,f){l=l.render;var m=r.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return al(r),c=vm(n,r,l,v,m,f),T=wm(),n!==null&&!xn?(_m(n,r,f),da(n,r,f)):(ht&&T&&tm(r),r.flags|=1,Ln(n,r,c,f),r.child)}function By(n,r,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!Jf(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,Hy(n,r,m,c,f)):(n=vd(l.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Gm(n,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:bc,l(v,c)&&n.ref===r.ref)return da(n,r,f)}return r.flags|=1,n=aa(m,c),n.ref=r.ref,n.return=r,r.child=n}function Hy(n,r,l,c,f){if(n!==null){var m=n.memoizedProps;if(bc(m,c)&&n.ref===r.ref)if(xn=!1,r.pendingProps=c=m,Gm(n,f))(n.flags&131072)!==0&&(xn=!0);else return r.lanes=n.lanes,da(n,r,f)}return zm(n,r,l,c,f)}function Fy(n,r,l,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return qy(n,r,m,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&jd(r,m!==null?m.cachePool:null),m!==null?Kx(r,m):pm(),Gx(r);else return c=r.lanes=536870912,qy(n,r,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(jd(r,m.cachePool),Kx(r,m),ai(),r.memoizedState=null):(n!==null&&jd(r,null),pm(),ai());return Ln(n,r,f,l),r.child}function Oc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qy(n,r,l,c,f){var m=um();return m=m===null?null:{parent:gn._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},n!==null&&jd(r,null),pm(),Gx(r),n!==null&&Wl(n,r,c,!0),r.childLanes=f,null}function zd(n,r){return r=Hd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function $y(n,r,l){return cl(r,n.child,null,l),n=zd(r,r.pendingProps),n.flags|=2,As(r),r.memoizedState=null,n}function tT(n,r,l){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(ht){if(c.mode==="hidden")return n=zd(r,c),r.lanes=536870912,Oc(null,n);if(ym(r),(n=Ht)?(n=sv(n,Ys),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Wa!==null?{id:Mr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},l=Cx(n),l.return=r,r.child=l,Mn=r,Ht=null)):n=null,n===null)throw Za(r);return r.lanes=536870912,null}return zd(r,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(ym(r),f)if(r.flags&256)r.flags&=-257,r=$y(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(xn||Wl(n,r,l,!1),f=(l&n.childLanes)!==0,xn||f){if(c=Pt,c!==null&&(v=X(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,tl(n,v),fs(c,n,v),Um;Wd(),r=$y(n,r,l)}else n=m.treeContext,Ht=Xs(v.nextSibling),Mn=r,ht=!0,Ja=null,Ys=!1,n!==null&&kx(r,n),r=zd(r,c),r.flags|=4096;return r}return n=aa(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Bd(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function zm(n,r,l,c,f){return al(r),l=vm(n,r,l,c,void 0,f),c=wm(),n!==null&&!xn?(_m(n,r,f),da(n,r,f)):(ht&&c&&tm(r),r.flags|=1,Ln(n,r,l,f),r.child)}function Ky(n,r,l,c,f,m){return al(r),r.updateQueue=null,l=Qx(r,c,l,f),Yx(n),c=wm(),n!==null&&!xn?(_m(n,r,m),da(n,r,m)):(ht&&c&&tm(r),r.flags|=1,Ln(n,r,l,m),r.child)}function Gy(n,r,l,c,f){if(al(r),r.stateNode===null){var m=Gl,v=l.contextType;typeof v=="object"&&v!==null&&(m=Vn(v)),m=new l(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},hm(r),v=l.contextType,m.context=typeof v=="object"&&v!==null?Vn(v):Gl,m.state=r.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Vm(r,l,v,c),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Lm.enqueueReplaceState(m,m.state,null),Ac(r,c,m,f),Cc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var T=r.memoizedProps,L=dl(l,T);m.props=L;var Z=m.context,oe=l.contextType;v=Gl,typeof oe=="object"&&oe!==null&&(v=Vn(oe));var me=l.getDerivedStateFromProps;oe=typeof me=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,oe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||Z!==v)&&Dy(r,m,c,v),ti=!1;var ne=r.memoizedState;m.state=ne,Ac(r,c,m,f),Cc(),Z=r.memoizedState,T||ne!==Z||ti?(typeof me=="function"&&(Vm(r,l,me,c),Z=r.memoizedState),(L=ti||Iy(r,l,L,c,ne,Z,v))?(oe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=v,c=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,fm(n,r),v=r.memoizedProps,oe=dl(l,v),m.props=oe,me=r.pendingProps,ne=m.context,Z=l.contextType,L=Gl,typeof Z=="object"&&Z!==null&&(L=Vn(Z)),T=l.getDerivedStateFromProps,(Z=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==me||ne!==L)&&Dy(r,m,c,L),ti=!1,ne=r.memoizedState,m.state=ne,Ac(r,c,m,f),Cc();var ie=r.memoizedState;v!==me||ne!==ie||ti||n!==null&&n.dependencies!==null&&_d(n.dependencies)?(typeof T=="function"&&(Vm(r,l,T,c),ie=r.memoizedState),(oe=ti||Iy(r,l,oe,c,ne,ie,L)||n!==null&&n.dependencies!==null&&_d(n.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ie,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ie,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ie),m.props=c,m.state=ie,m.context=L,c=oe):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Bd(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=cl(r,n.child,null,f),r.child=cl(r,null,l,f)):Ln(n,r,l,f),r.memoizedState=m.state,n=r.child):n=da(n,r,f),n}function Yy(n,r,l,c){return sl(),r.flags|=256,Ln(n,r,l,c),r.child}var Bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hm(n){return{baseLanes:n,cachePool:Lx()}}function Fm(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=ks),n}function Qy(n,r,l){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(un.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(ht){if(f?ri(r):ai(),(n=Ht)?(n=sv(n,Ys),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Wa!==null?{id:Mr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},l=Cx(n),l.return=r,r.child=l,Mn=r,Ht=null)):n=null,n===null)throw Za(r);return Tg(n)?r.lanes=32:r.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(ai(),f=r.mode,T=Hd({mode:"hidden",children:T},f),c=nl(c,f,l,null),T.return=r,c.return=r,T.sibling=c,r.child=T,c=r.child,c.memoizedState=Hm(l),c.childLanes=Fm(n,v,l),r.memoizedState=Bm,Oc(null,c)):(ri(r),qm(r,T))}var L=n.memoizedState;if(L!==null&&(T=L.dehydrated,T!==null)){if(m)r.flags&256?(ri(r),r.flags&=-257,r=$m(n,r,l)):r.memoizedState!==null?(ai(),r.child=n.child,r.flags|=128,r=null):(ai(),T=c.fallback,f=r.mode,c=Hd({mode:"visible",children:c.children},f),T=nl(T,f,l,null),T.flags|=2,c.return=r,T.return=r,c.sibling=T,r.child=c,cl(r,n.child,null,l),c=r.child,c.memoizedState=Hm(l),c.childLanes=Fm(n,v,l),r.memoizedState=Bm,r=Oc(null,c));else if(ri(r),Tg(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var Z=v.dgst;v=Z,c=Error(a(419)),c.stack="",c.digest=v,_c({value:c,source:null,stack:null}),r=$m(n,r,l)}else if(xn||Wl(n,r,l,!1),v=(l&n.childLanes)!==0,xn||v){if(v=Pt,v!==null&&(c=X(v,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,tl(n,c),fs(v,n,c),Um;jg(T)||Wd(),r=$m(n,r,l)}else jg(T)?(r.flags|=192,r.child=n.child,r=null):(n=L.treeContext,Ht=Xs(T.nextSibling),Mn=r,ht=!0,Ja=null,Ys=!1,n!==null&&kx(r,n),r=qm(r,c.children),r.flags|=4096);return r}return f?(ai(),T=c.fallback,f=r.mode,L=n.child,Z=L.sibling,c=aa(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Z!==null?T=aa(Z,T):(T=nl(T,f,l,null),T.flags|=2),T.return=r,c.return=r,c.sibling=T,r.child=c,Oc(null,c),c=r.child,T=n.child.memoizedState,T===null?T=Hm(l):(f=T.cachePool,f!==null?(L=gn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Lx(),T={baseLanes:T.baseLanes|l,cachePool:f}),c.memoizedState=T,c.childLanes=Fm(n,v,l),r.memoizedState=Bm,Oc(n.child,c)):(ri(r),l=n.child,n=l.sibling,l=aa(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=l,r.memoizedState=null,l)}function qm(n,r){return r=Hd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Hd(n,r){return n=Ss(22,n,null,r),n.lanes=0,n}function $m(n,r,l){return cl(r,n.child,null,l),n=qm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Xy(n,r,l){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),im(n.return,r,l)}function Km(n,r,l,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function Wy(n,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=un.current,T=(v&2)!==0;if(T?(v=v&1|2,r.flags|=128):v&=1,be(un,v),Ln(n,r,c,l),c=ht?wc:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xy(n,l,r);else if(n.tag===19)Xy(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=r.child,f=null;l!==null;)n=l.alternate,n!==null&&Rd(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),Km(r,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Rd(n)===null){r.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Km(r,!0,l,null,m,c);break;case"together":Km(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function da(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),oi|=r.lanes,(l&r.childLanes)===0)if(n!==null){if(Wl(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,l=aa(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=aa(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function Gm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&_d(n)))}function nT(n,r,l){switch(r.tag){case 3:U(r,r.stateNode.containerInfo),ei(r,gn,n.memoizedState.cache),sl();break;case 27:case 5:Ee(r);break;case 4:U(r,r.stateNode.containerInfo);break;case 10:ei(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ym(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ri(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Qy(n,r,l):(ri(r),n=da(n,r,l),n!==null?n.sibling:null);ri(r);break;case 19:var f=(n.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Wl(n,r,l,!1),c=(l&r.childLanes)!==0),f){if(c)return Wy(n,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),be(un,un.current),c)break;return null;case 22:return r.lanes=0,Fy(n,r,l,r.pendingProps);case 24:ei(r,gn,n.memoizedState.cache)}return da(n,r,l)}function Jy(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)xn=!0;else{if(!Gm(n,l)&&(r.flags&128)===0)return xn=!1,nT(n,r,l);xn=(n.flags&131072)!==0}else xn=!1,ht&&(r.flags&1048576)!==0&&Rx(r,wc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=ll(r.elementType),r.type=n,typeof n=="function")Jf(n)?(c=dl(n,c),r.tag=1,r=Gy(null,r,n,c,l)):(r.tag=0,r=zm(null,r,n,c,l));else{if(n!=null){var f=n.$$typeof;if(f===H){r.tag=11,r=zy(null,r,n,c,l);break e}else if(f===E){r.tag=14,r=By(null,r,n,c,l);break e}}throw r=Ne(n)||n,Error(a(306,r,""))}}return r;case 0:return zm(n,r,r.type,r.pendingProps,l);case 1:return c=r.type,f=dl(c,r.pendingProps),Gy(n,r,c,f,l);case 3:e:{if(U(r,r.stateNode.containerInfo),n===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,fm(n,r),Ac(r,c,null,l);var v=r.memoizedState;if(c=v.cache,ei(r,gn,c),c!==m.cache&&lm(r,[gn],l,!0),Cc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Yy(n,r,c,l);break e}else if(c!==f){f=$s(Error(a(424)),r),_c(f),r=Yy(n,r,c,l);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ht=Xs(n.firstChild),Mn=r,ht=!0,Ja=null,Ys=!0,l=Fx(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(sl(),c===f){r=da(n,r,l);break e}Ln(n,r,c,l)}r=r.child}return r;case 26:return Bd(n,r),n===null?(l=cv(r.type,null,r.pendingProps,null))?r.memoizedState=l:ht||(l=r.type,n=r.pendingProps,c=rh(we.current).createElement(l),c[Ze]=r,c[rt]=n,Pn(c,l,n),fn(c),r.stateNode=c):r.memoizedState=cv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ee(r),n===null&&ht&&(c=r.stateNode=iv(r.type,r.pendingProps,we.current),Mn=r,Ys=!0,f=Ht,fi(r.type)?(Eg=f,Ht=Xs(c.firstChild)):Ht=f),Ln(n,r,r.pendingProps.children,l),Bd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&ht&&((f=c=Ht)&&(c=IT(c,r.type,r.pendingProps,Ys),c!==null?(r.stateNode=c,Mn=r,Ht=Xs(c.firstChild),Ys=!1,f=!0):f=!1),f||Za(r)),Ee(r),f=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,wg(f,m)?c=null:v!==null&&wg(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=vm(n,r,Gj,null,null,l),Qc._currentValue=f),Bd(n,r),Ln(n,r,c,l),r.child;case 6:return n===null&&ht&&((n=l=Ht)&&(l=DT(l,r.pendingProps,Ys),l!==null?(r.stateNode=l,Mn=r,Ht=null,n=!0):n=!1),n||Za(r)),null;case 13:return Qy(n,r,l);case 4:return U(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=cl(r,null,c,l):Ln(n,r,c,l),r.child;case 11:return zy(n,r,r.type,r.pendingProps,l);case 7:return Ln(n,r,r.pendingProps,l),r.child;case 8:return Ln(n,r,r.pendingProps.children,l),r.child;case 12:return Ln(n,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,ei(r,r.type,c.value),Ln(n,r,c.children,l),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,al(r),f=Vn(f),c=c(f),r.flags|=1,Ln(n,r,c,l),r.child;case 14:return By(n,r,r.type,r.pendingProps,l);case 15:return Hy(n,r,r.type,r.pendingProps,l);case 19:return Wy(n,r,l);case 31:return tT(n,r,l);case 22:return Fy(n,r,l,r.pendingProps);case 24:return al(r),c=Vn(gn),n===null?(f=um(),f===null&&(f=Pt,m=om(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),r.memoizedState={parent:c,cache:f},hm(r),ei(r,gn,f)):((n.lanes&l)!==0&&(fm(n,r),Ac(r,null,null,l),Cc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ei(r,gn,c)):(c=m.cache,ei(r,gn,c),c!==f.cache&&lm(r,[gn],l,!0))),Ln(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function ha(n){n.flags|=4}function Ym(n,r,l,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Tb())n.flags|=8192;else throw ol=Ed,dm}else n.flags&=-16777217}function Zy(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!mv(r))if(Tb())n.flags|=8192;else throw ol=Ed,dm}function Fd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Ba():536870912,n.lanes|=r,co|=r)}function Mc(n,r){if(!ht)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(r)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,r}function sT(n,r,l){var c=r.pendingProps;switch(nm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Ft(r),null;case 3:return l=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),oa(gn),q(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Xl(r)?ha(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,rm())),Ft(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(ha(r),m!==null?(Ft(r),Zy(r,m)):(Ft(r),Ym(r,f,null,c,l))):m?m!==n.memoizedState?(ha(r),Ft(r),Zy(r,m)):(Ft(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&ha(r),Ft(r),Ym(r,f,n,c,l)),null;case 27:if(he(r),l=we.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&ha(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Ft(r),null}n=xe.current,Xl(r)?Ix(r):(n=iv(f,c,l),r.stateNode=n,ha(r))}return Ft(r),null;case 5:if(he(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&ha(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Ft(r),null}if(m=xe.current,Xl(r))Ix(r);else{var v=rh(we.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Ze]=r,m[rt]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(Pn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ha(r)}}return Ft(r),Ym(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&ha(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(n=we.current,Xl(r)){if(n=r.stateNode,l=r.memoizedProps,c=null,f=Mn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Ze]=r,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Qb(n.nodeValue,l)),n||Za(r,!0)}else n=rh(n).createTextNode(c),n[Ze]=r,r.stateNode=n}return Ft(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(c=Xl(r),l!==null){if(n===null){if(!c)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Ze]=r}else sl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),n=!1}else l=rm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(As(r),r):(As(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Ft(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Xl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ze]=r}else sl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),f=!1}else f=rm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(As(r),r):(As(r),null)}return As(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),Fd(r,r.updateQueue),Ft(r),null);case 4:return q(),n===null&&pg(r.stateNode.containerInfo),Ft(r),null;case 10:return oa(r.type),Ft(r),null;case 19:if(le(un),c=r.memoizedState,c===null)return Ft(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)Mc(c,!1);else{if(nn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Rd(n),m!==null){for(r.flags|=128,Mc(c,!1),n=m.updateQueue,r.updateQueue=n,Fd(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)Sx(l,n),l=l.sibling;return be(un,un.current&1|2),ht&&ia(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&Bt()>Yd&&(r.flags|=128,f=!0,Mc(c,!1),r.lanes=4194304)}else{if(!f)if(n=Rd(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Fd(r,n),Mc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!ht)return Ft(r),null}else 2*Bt()-c.renderingStartTime>Yd&&l!==536870912&&(r.flags|=128,f=!0,Mc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Bt(),n.sibling=null,l=un.current,be(un,f?l&1|2:l&1),ht&&ia(r,c.treeForkCount),n):(Ft(r),null);case 22:case 23:return As(r),xm(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),l=r.updateQueue,l!==null&&Fd(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),n!==null&&le(il),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),oa(gn),Ft(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function rT(n,r){switch(nm(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return oa(gn),q(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return he(r),null;case 31:if(r.memoizedState!==null){if(As(r),r.alternate===null)throw Error(a(340));sl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(As(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));sl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return le(un),null;case 4:return q(),null;case 10:return oa(r.type),null;case 22:case 23:return As(r),xm(),n!==null&&le(il),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return oa(gn),null;case 25:return null;default:return null}}function eb(n,r){switch(nm(r),r.tag){case 3:oa(gn),q();break;case 26:case 27:case 5:he(r);break;case 4:q();break;case 31:r.memoizedState!==null&&As(r);break;case 13:As(r);break;case 19:le(un);break;case 10:oa(r.type);break;case 22:case 23:As(r),xm(),n!==null&&le(il);break;case 24:oa(gn)}}function Vc(n,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&n)===n){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(T){Rt(r,r.return,T)}}function ii(n,r,l){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=r;var L=l,Z=T;try{Z()}catch(oe){Rt(f,L,oe)}}}c=c.next}while(c!==m)}}catch(oe){Rt(r,r.return,oe)}}function tb(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{$x(r,l)}catch(c){Rt(n,n.return,c)}}}function nb(n,r,l){l.props=dl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){Rt(n,r,c)}}function Lc(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(f){Rt(n,r,f)}}function Lr(n,r){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){Rt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Rt(n,r,f)}else l.current=null}function sb(n){var r=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){Rt(n,n.return,f)}}function Qm(n,r,l){try{var c=n.stateNode;ET(c,n.type,l,r),c[rt]=r}catch(f){Rt(n,n.return,f)}}function rb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fi(n.type)||n.tag===4}function Xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wm(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ir));else if(c!==4&&(c===27&&fi(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for(Wm(n,r,l),n=n.sibling;n!==null;)Wm(n,r,l),n=n.sibling}function qd(n,r,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(c!==4&&(c===27&&fi(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(qd(n,r,l),n=n.sibling;n!==null;)qd(n,r,l),n=n.sibling}function ab(n){var r=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Pn(r,c,l),r[Ze]=n,r[rt]=l}catch(m){Rt(n,n.return,m)}}var fa=!1,yn=!1,Jm=!1,ib=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function aT(n,r){if(n=n.containerInfo,bg=dh,n=yx(n),$f(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,T=-1,L=-1,Z=0,oe=0,me=n,ne=null;t:for(;;){for(var ie;me!==l||f!==0&&me.nodeType!==3||(T=v+f),me!==m||c!==0&&me.nodeType!==3||(L=v+c),me.nodeType===3&&(v+=me.nodeValue.length),(ie=me.firstChild)!==null;)ne=me,me=ie;for(;;){if(me===n)break t;if(ne===l&&++Z===f&&(T=v),ne===m&&++oe===c&&(L=v),(ie=me.nextSibling)!==null)break;me=ne,ne=me.parentNode}me=ie}l=T===-1||L===-1?null:{start:T,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(vg={focusedElem:n,selectionRange:l},dh=!1,Rn=r;Rn!==null;)if(r=Rn,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Rn=n;else for(;Rn!==null;){switch(r=Rn,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=r,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var De=dl(l.type,f);n=c.getSnapshotBeforeUpdate(De,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Fe){Rt(l,l.return,Fe)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)Ng(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ng(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,Rn=n;break}Rn=r.return}}function lb(n,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ga(n,l),c&4&&Vc(5,l);break;case 1:if(ga(n,l),c&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(v){Rt(l,l.return,v)}else{var f=dl(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Rt(l,l.return,v)}}c&64&&tb(l),c&512&&Lc(l,l.return);break;case 3:if(ga(n,l),c&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{$x(n,r)}catch(v){Rt(l,l.return,v)}}break;case 27:r===null&&c&4&&ab(l);case 26:case 5:ga(n,l),r===null&&c&4&&sb(l),c&512&&Lc(l,l.return);break;case 12:ga(n,l);break;case 31:ga(n,l),c&4&&ub(n,l);break;case 13:ga(n,l),c&4&&db(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=mT.bind(null,l),OT(n,l))));break;case 22:if(c=l.memoizedState!==null||fa,!c){r=r!==null&&r.memoizedState!==null||yn,f=fa;var m=yn;fa=c,(yn=r)&&!m?pa(n,l,(l.subtreeFlags&8772)!==0):ga(n,l),fa=f,yn=m}break;case 30:break;default:ga(n,l)}}function ob(n){var r=n.alternate;r!==null&&(n.alternate=null,ob(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Dl(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Yt=null,cs=!1;function ma(n,r,l){for(l=l.child;l!==null;)cb(n,r,l),l=l.sibling}function cb(n,r,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(It,l)}catch{}switch(l.tag){case 26:yn||Lr(l,r),ma(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:yn||Lr(l,r);var c=Yt,f=cs;fi(l.type)&&(Yt=l.stateNode,cs=!1),ma(n,r,l),Kc(l.stateNode),Yt=c,cs=f;break;case 5:yn||Lr(l,r);case 6:if(c=Yt,f=cs,Yt=null,ma(n,r,l),Yt=c,cs=f,Yt!==null)if(cs)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(l.stateNode)}catch(m){Rt(l,r,m)}else try{Yt.removeChild(l.stateNode)}catch(m){Rt(l,r,m)}break;case 18:Yt!==null&&(cs?(n=Yt,tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),yo(n)):tv(Yt,l.stateNode));break;case 4:c=Yt,f=cs,Yt=l.stateNode.containerInfo,cs=!0,ma(n,r,l),Yt=c,cs=f;break;case 0:case 11:case 14:case 15:ii(2,l,r),yn||ii(4,l,r),ma(n,r,l);break;case 1:yn||(Lr(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&nb(l,r,c)),ma(n,r,l);break;case 21:ma(n,r,l);break;case 22:yn=(c=yn)||l.memoizedState!==null,ma(n,r,l),yn=c;break;default:ma(n,r,l)}}function ub(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{yo(n)}catch(l){Rt(r,r.return,l)}}}function db(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{yo(n)}catch(l){Rt(r,r.return,l)}}function iT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new ib),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new ib),r;default:throw Error(a(435,n.tag))}}function $d(n,r){var l=iT(n);r.forEach(function(c){if(!l.has(c)){l.add(c);var f=gT.bind(null,n,c);c.then(f,f)}})}function us(n,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=n,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(fi(T.type)){Yt=T.stateNode,cs=!1;break e}break;case 5:Yt=T.stateNode,cs=!1;break e;case 3:case 4:Yt=T.stateNode.containerInfo,cs=!0;break e}T=T.return}if(Yt===null)throw Error(a(160));cb(m,v,f),Yt=null,cs=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)hb(r,n),r=r.sibling}var hr=null;function hb(n,r){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:us(r,n),ds(n),c&4&&(ii(3,n,n.return),Vc(3,n),ii(5,n,n.return));break;case 1:us(r,n),ds(n),c&512&&(yn||l===null||Lr(l,l.return)),c&64&&fa&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=hr;if(us(r,n),ds(n),c&512&&(yn||l===null||Lr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cn]||m[Ze]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Pn(m,c,l),m[Ze]=n,fn(m),c=m;break e;case"link":var v=hv("link","href",f).get(c+(l.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(c),Pn(m,c,l),f.head.appendChild(m);break;case"meta":if(v=hv("meta","content",f).get(c+(l.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(T,1);break t}}m=f.createElement(c),Pn(m,c,l),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Ze]=n,fn(m),c=m}n.stateNode=c}else fv(f,n.type,n.stateNode);else n.stateNode=dv(f,c,n.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?fv(f,n.type,n.stateNode):dv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Qm(n,n.memoizedProps,l.memoizedProps)}break;case 27:us(r,n),ds(n),c&512&&(yn||l===null||Lr(l,l.return)),l!==null&&c&4&&Qm(n,n.memoizedProps,l.memoizedProps);break;case 5:if(us(r,n),ds(n),c&512&&(yn||l===null||Lr(l,l.return)),n.flags&32){f=n.stateNode;try{os(f,"")}catch(De){Rt(n,n.return,De)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Qm(n,f,l!==null?l.memoizedProps:f)),c&1024&&(Jm=!0);break;case 6:if(us(r,n),ds(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(De){Rt(n,n.return,De)}}break;case 3:if(lh=null,f=hr,hr=ah(r.containerInfo),us(r,n),hr=f,ds(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{yo(r.containerInfo)}catch(De){Rt(n,n.return,De)}Jm&&(Jm=!1,fb(n));break;case 4:c=hr,hr=ah(n.stateNode.containerInfo),us(r,n),ds(n),hr=c;break;case 12:us(r,n),ds(n);break;case 31:us(r,n),ds(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 13:us(r,n),ds(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gd=Bt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 22:f=n.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Z=fa,oe=yn;if(fa=Z||f,yn=oe||L,us(r,n),yn=oe,fa=Z,ds(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(l===null||L||fa||yn||hl(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=L.stateNode;var me=L.memoizedProps.style,ne=me!=null&&me.hasOwnProperty("display")?me.display:null;T.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(De){Rt(L,L.return,De)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(De){Rt(L,L.return,De)}}}else if(r.tag===18){if(l===null){L=r;try{var ie=L.stateNode;f?nv(ie,!0):nv(L.stateNode,!1)}catch(De){Rt(L,L.return,De)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,$d(n,l))));break;case 19:us(r,n),ds(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$d(n,c)));break;case 30:break;case 21:break;default:us(r,n),ds(n)}}function ds(n){var r=n.flags;if(r&2){try{for(var l,c=n.return;c!==null;){if(rb(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,m=Xm(n);qd(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(os(v,""),l.flags&=-33);var T=Xm(n);qd(n,T,v);break;case 3:case 4:var L=l.stateNode.containerInfo,Z=Xm(n);Wm(n,Z,L);break;default:throw Error(a(161))}}catch(oe){Rt(n,n.return,oe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function fb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;fb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ga(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)lb(n,r.alternate,r),r=r.sibling}function hl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ii(4,r,r.return),hl(r);break;case 1:Lr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&nb(r,r.return,l),hl(r);break;case 27:Kc(r.stateNode);case 26:case 5:Lr(r,r.return),hl(r);break;case 22:r.memoizedState===null&&hl(r);break;case 30:hl(r);break;default:hl(r)}n=n.sibling}}function pa(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:pa(f,m,l),Vc(4,m);break;case 1:if(pa(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){Rt(c,c.return,Z)}if(c=m,f=c.updateQueue,f!==null){var T=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)qx(L[f],T)}catch(Z){Rt(c,c.return,Z)}}l&&v&64&&tb(m),Lc(m,m.return);break;case 27:ab(m);case 26:case 5:pa(f,m,l),l&&c===null&&v&4&&sb(m),Lc(m,m.return);break;case 12:pa(f,m,l);break;case 31:pa(f,m,l),l&&v&4&&ub(f,m);break;case 13:pa(f,m,l),l&&v&4&&db(f,m);break;case 22:m.memoizedState===null&&pa(f,m,l),Lc(m,m.return);break;case 30:break;default:pa(f,m,l)}r=r.sibling}}function Zm(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Nc(l))}function eg(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Nc(n))}function fr(n,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mb(n,r,l,c),r=r.sibling}function mb(n,r,l,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:fr(n,r,l,c),f&2048&&Vc(9,r);break;case 1:fr(n,r,l,c);break;case 3:fr(n,r,l,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Nc(n)));break;case 12:if(f&2048){fr(n,r,l,c),n=r.stateNode;try{var m=r.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){Rt(r,r.return,L)}}else fr(n,r,l,c);break;case 31:fr(n,r,l,c);break;case 13:fr(n,r,l,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?fr(n,r,l,c):Pc(n,r):m._visibility&2?fr(n,r,l,c):(m._visibility|=2,io(n,r,l,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Zm(v,r);break;case 24:fr(n,r,l,c),f&2048&&eg(r.alternate,r);break;default:fr(n,r,l,c)}}function io(n,r,l,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,v=r,T=l,L=c,Z=v.flags;switch(v.tag){case 0:case 11:case 15:io(m,v,T,L,f),Vc(8,v);break;case 23:break;case 22:var oe=v.stateNode;v.memoizedState!==null?oe._visibility&2?io(m,v,T,L,f):Pc(m,v):(oe._visibility|=2,io(m,v,T,L,f)),f&&Z&2048&&Zm(v.alternate,v);break;case 24:io(m,v,T,L,f),f&&Z&2048&&eg(v.alternate,v);break;default:io(m,v,T,L,f)}r=r.sibling}}function Pc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,c=r,f=c.flags;switch(c.tag){case 22:Pc(l,c),f&2048&&Zm(c.alternate,c);break;case 24:Pc(l,c),f&2048&&eg(c.alternate,c);break;default:Pc(l,c)}r=r.sibling}}var Uc=8192;function lo(n,r,l){if(n.subtreeFlags&Uc)for(n=n.child;n!==null;)gb(n,r,l),n=n.sibling}function gb(n,r,l){switch(n.tag){case 26:lo(n,r,l),n.flags&Uc&&n.memoizedState!==null&&KT(l,hr,n.memoizedState,n.memoizedProps);break;case 5:lo(n,r,l);break;case 3:case 4:var c=hr;hr=ah(n.stateNode.containerInfo),lo(n,r,l),hr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Uc,Uc=16777216,lo(n,r,l),Uc=c):lo(n,r,l));break;default:lo(n,r,l)}}function pb(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function zc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Rn=c,yb(c,n)}pb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)xb(n),n=n.sibling}function xb(n){switch(n.tag){case 0:case 11:case 15:zc(n),n.flags&2048&&ii(9,n,n.return);break;case 3:zc(n);break;case 12:zc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Kd(n)):zc(n);break;default:zc(n)}}function Kd(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Rn=c,yb(c,n)}pb(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ii(8,r,r.return),Kd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Kd(r));break;default:Kd(r)}n=n.sibling}}function yb(n,r){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:ii(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Rn=c;else e:for(l=n;Rn!==null;){c=Rn;var f=c.sibling,m=c.return;if(ob(c),c===l){Rn=null;break e}if(f!==null){f.return=m,Rn=f;break e}Rn=m}}}var lT={getCacheForType:function(n){var r=Vn(gn),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return Vn(gn).controller.signal}},oT=typeof WeakMap=="function"?WeakMap:Map,_t=0,Pt=null,at=null,lt=0,At=0,Rs=null,li=!1,oo=!1,tg=!1,xa=0,nn=0,oi=0,fl=0,ng=0,ks=0,co=0,Bc=null,hs=null,sg=!1,Gd=0,bb=0,Yd=1/0,Qd=null,ci=null,jn=0,ui=null,uo=null,ya=0,rg=0,ag=null,vb=null,Hc=0,ig=null;function Is(){return(_t&2)!==0&&lt!==0?lt&-lt:ee.T!==null?hg():Me()}function wb(){if(ks===0)if((lt&536870912)===0||ht){var n=Ns;Ns<<=1,(Ns&3932160)===0&&(Ns=262144),ks=n}else ks=536870912;return n=Cs.current,n!==null&&(n.flags|=32),ks}function fs(n,r,l){(n===Pt&&(At===2||At===9)||n.cancelPendingCommit!==null)&&(ho(n,0),di(n,lt,ks,!1)),te(n,l),((_t&2)===0||n!==Pt)&&(n===Pt&&((_t&2)===0&&(fl|=l),nn===4&&di(n,lt,ks,!1)),Pr(n))}function _b(n,r,l){if((_t&6)!==0)throw Error(a(327));var c=!l&&(r&127)===0&&(r&n.expiredLanes)===0||Wn(n,r),f=c?dT(n,r):og(n,r,!0),m=c;do{if(f===0){oo&&!c&&di(n,r,0,!1);break}else{if(l=n.current.alternate,m&&!cT(l)){f=og(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=n;f=Bc;var L=T.current.memoizedState.isDehydrated;if(L&&(ho(T,v).flags|=256),v=og(T,v,!1),v!==2){if(tg&&!L){T.errorRecoveryDisabledLanes|=m,fl|=m,f=4;break e}m=hs,hs=f,m!==null&&(hs===null?hs=m:hs.push.apply(hs,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){ho(n,0),di(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:di(c,r,ks,!li);break e;case 2:hs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=Gd+300-Bt(),10<f)){if(di(c,r,ks,!li),is(c,0,!0)!==0)break e;ya=r,c.timeoutHandle=Zb(Nb.bind(null,c,l,hs,Qd,sg,r,ks,fl,co,li,m,"Throttled",-0,0),f);break e}Nb(c,l,hs,Qd,sg,r,ks,fl,co,li,m,null,-0,0)}}break}while(!0);Pr(n)}function Nb(n,r,l,c,f,m,v,T,L,Z,oe,me,ne,ie){if(n.timeoutHandle=-1,me=r.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ir},gb(r,m,me);var De=(m&62914560)===m?Gd-Bt():(m&4194048)===m?bb-Bt():0;if(De=GT(me,De),De!==null){ya=m,n.cancelPendingCommit=De(kb.bind(null,n,r,m,l,c,f,v,T,L,oe,me,null,ne,ie)),di(n,m,v,!Z);return}}kb(n,r,m,l,c,f,v,T,L)}function cT(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Es(m(),f))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function di(n,r,l,c){r&=~ng,r&=~fl,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-vt(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&_e(n,l,r)}function Xd(){return(_t&6)===0?(Fc(0),!1):!0}function lg(){if(at!==null){if(At===0)var n=at.return;else n=at,la=rl=null,Nm(n),to=null,Tc=0,n=at;for(;n!==null;)eb(n.alternate,n),n=n.return;at=null}}function ho(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,AT(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),ya=0,lg(),Pt=n,at=l=aa(n.current,null),lt=r,At=0,Rs=null,li=!1,oo=Wn(n,r),tg=!1,co=ks=ng=fl=oi=nn=0,hs=Bc=null,sg=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-vt(c),m=1<<f;r|=n[f],c&=~m}return xa=r,xd(),l}function jb(n,r){tt=null,ee.H=Dc,r===eo||r===Td?(r=zx(),At=3):r===dm?(r=zx(),At=4):At=r===Um?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rs=r,at===null&&(nn=1,Ud(n,$s(r,n.current)))}function Tb(){var n=Cs.current;return n===null?!0:(lt&4194048)===lt?Qs===null:(lt&62914560)===lt||(lt&536870912)!==0?n===Qs:!1}function Eb(){var n=ee.H;return ee.H=Dc,n===null?Dc:n}function Sb(){var n=ee.A;return ee.A=lT,n}function Wd(){nn=4,li||(lt&4194048)!==lt&&Cs.current!==null||(oo=!0),(oi&134217727)===0&&(fl&134217727)===0||Pt===null||di(Pt,lt,ks,!1)}function og(n,r,l){var c=_t;_t|=2;var f=Eb(),m=Sb();(Pt!==n||lt!==r)&&(Qd=null,ho(n,r)),r=!1;var v=nn;e:do try{if(At!==0&&at!==null){var T=at,L=Rs;switch(At){case 8:lg(),v=6;break e;case 3:case 2:case 9:case 6:Cs.current===null&&(r=!0);var Z=At;if(At=0,Rs=null,fo(n,T,L,Z),l&&oo){v=0;break e}break;default:Z=At,At=0,Rs=null,fo(n,T,L,Z)}}uT(),v=nn;break}catch(oe){jb(n,oe)}while(!0);return r&&n.shellSuspendCounter++,la=rl=null,_t=c,ee.H=f,ee.A=m,at===null&&(Pt=null,lt=0,xd()),v}function uT(){for(;at!==null;)Cb(at)}function dT(n,r){var l=_t;_t|=2;var c=Eb(),f=Sb();Pt!==n||lt!==r?(Qd=null,Yd=Bt()+500,ho(n,r)):oo=Wn(n,r);e:do try{if(At!==0&&at!==null){r=at;var m=Rs;t:switch(At){case 1:At=0,Rs=null,fo(n,r,m,1);break;case 2:case 9:if(Px(m)){At=0,Rs=null,Ab(r);break}r=function(){At!==2&&At!==9||Pt!==n||(At=7),Pr(n)},m.then(r,r);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:Px(m)?(At=0,Rs=null,Ab(r)):(At=0,Rs=null,fo(n,r,m,7));break;case 5:var v=null;switch(at.tag){case 26:v=at.memoizedState;case 5:case 27:var T=at;if(v?mv(v):T.stateNode.complete){At=0,Rs=null;var L=T.sibling;if(L!==null)at=L;else{var Z=T.return;Z!==null?(at=Z,Jd(Z)):at=null}break t}}At=0,Rs=null,fo(n,r,m,5);break;case 6:At=0,Rs=null,fo(n,r,m,6);break;case 8:lg(),nn=6;break e;default:throw Error(a(462))}}hT();break}catch(oe){jb(n,oe)}while(!0);return la=rl=null,ee.H=c,ee.A=f,_t=l,at!==null?0:(Pt=null,lt=0,xd(),nn)}function hT(){for(;at!==null&&!ar();)Cb(at)}function Cb(n){var r=Jy(n.alternate,n,xa);n.memoizedProps=n.pendingProps,r===null?Jd(n):at=r}function Ab(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=Ky(l,r,r.pendingProps,r.type,void 0,lt);break;case 11:r=Ky(l,r,r.pendingProps,r.type.render,r.ref,lt);break;case 5:Nm(r);default:eb(l,r),r=at=Sx(r,xa),r=Jy(l,r,xa)}n.memoizedProps=n.pendingProps,r===null?Jd(n):at=r}function fo(n,r,l,c){la=rl=null,Nm(r),to=null,Tc=0;var f=r.return;try{if(eT(n,f,r,l,lt)){nn=1,Ud(n,$s(l,n.current)),at=null;return}}catch(m){if(f!==null)throw at=f,m;nn=1,Ud(n,$s(l,n.current)),at=null;return}r.flags&32768?(ht||c===1?n=!0:oo||(lt&536870912)!==0?n=!1:(li=n=!0,(c===2||c===9||c===3||c===6)&&(c=Cs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Rb(r,n)):Jd(r)}function Jd(n){var r=n;do{if((r.flags&32768)!==0){Rb(r,li);return}n=r.return;var l=sT(r.alternate,r,xa);if(l!==null){at=l;return}if(r=r.sibling,r!==null){at=r;return}at=r=n}while(r!==null);nn===0&&(nn=5)}function Rb(n,r){do{var l=rT(n.alternate,n);if(l!==null){l.flags&=32767,at=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){at=n;return}at=n=l}while(n!==null);nn=6,at=null}function kb(n,r,l,c,f,m,v,T,L){n.cancelPendingCommit=null;do Zd();while(jn!==0);if((_t&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Xf,fe(n,l,m,v,T,L),n===Pt&&(at=Pt=null,lt=0),uo=r,ui=n,ya=l,rg=m,ag=f,vb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,pT(Hn,function(){return Vb(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,f=se.p,se.p=2,v=_t,_t|=4;try{aT(n,r,l)}finally{_t=v,se.p=f,ee.T=c}}jn=1,Ib(),Db(),Ob()}}function Ib(){if(jn===1){jn=0;var n=ui,r=uo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null;var c=se.p;se.p=2;var f=_t;_t|=4;try{hb(r,n);var m=vg,v=yx(n.containerInfo),T=m.focusedElem,L=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&xx(T.ownerDocument.documentElement,T)){if(L!==null&&$f(T)){var Z=L.start,oe=L.end;if(oe===void 0&&(oe=Z),"selectionStart"in T)T.selectionStart=Z,T.selectionEnd=Math.min(oe,T.value.length);else{var me=T.ownerDocument||document,ne=me&&me.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),De=T.textContent.length,Fe=Math.min(L.start,De),Vt=L.end===void 0?Fe:Math.min(L.end,De);!ie.extend&&Fe>Vt&&(v=Vt,Vt=Fe,Fe=v);var G=px(T,Fe),F=px(T,Vt);if(G&&F&&(ie.rangeCount!==1||ie.anchorNode!==G.node||ie.anchorOffset!==G.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var J=me.createRange();J.setStart(G.node,G.offset),ie.removeAllRanges(),Fe>Vt?(ie.addRange(J),ie.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ie.addRange(J))}}}}for(me=[],ie=T;ie=ie.parentNode;)ie.nodeType===1&&me.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<me.length;T++){var ce=me[T];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}dh=!!bg,vg=bg=null}finally{_t=f,se.p=c,ee.T=l}}n.current=r,jn=2}}function Db(){if(jn===2){jn=0;var n=ui,r=uo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ee.T,ee.T=null;var c=se.p;se.p=2;var f=_t;_t|=4;try{lb(n,r.alternate,r)}finally{_t=f,se.p=c,ee.T=l}}jn=3}}function Ob(){if(jn===4||jn===3){jn=0,Dn();var n=ui,r=uo,l=ya,c=vb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jn=5:(jn=0,uo=ui=null,Mb(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ci=null),ye(l),r=r.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(It,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,f=se.p,se.p=2,ee.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var T=c[v];m(T.value,{componentStack:T.stack})}}finally{ee.T=r,se.p=f}}(ya&3)!==0&&Zd(),Pr(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===ig?Hc++:(Hc=0,ig=n):Hc=0,Fc(0)}}function Mb(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Nc(r)))}function Zd(){return Ib(),Db(),Ob(),Vb()}function Vb(){if(jn!==5)return!1;var n=ui,r=rg;rg=0;var l=ye(ya),c=ee.T,f=se.p;try{se.p=32>l?32:l,ee.T=null,l=ag,ag=null;var m=ui,v=ya;if(jn=0,uo=ui=null,ya=0,(_t&6)!==0)throw Error(a(331));var T=_t;if(_t|=4,xb(m.current),mb(m,m.current,v,l),_t=T,Fc(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(It,m)}catch{}return!0}finally{se.p=f,ee.T=c,Mb(n,r)}}function Lb(n,r,l){r=$s(l,r),r=Pm(n.stateNode,r,2),n=si(n,r,2),n!==null&&(te(n,2),Pr(n))}function Rt(n,r,l){if(n.tag===3)Lb(n,n,l);else for(;r!==null;){if(r.tag===3){Lb(r,n,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ci===null||!ci.has(c))){n=$s(l,n),l=Py(2),c=si(r,l,2),c!==null&&(Uy(l,c,r,n),te(c,2),Pr(c));break}}r=r.return}}function cg(n,r,l){var c=n.pingCache;if(c===null){c=n.pingCache=new oT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(tg=!0,f.add(l),n=fT.bind(null,n,r,l),r.then(n,n))}function fT(n,r,l){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Pt===n&&(lt&l)===l&&(nn===4||nn===3&&(lt&62914560)===lt&&300>Bt()-Gd?(_t&2)===0&&ho(n,0):ng|=l,co===lt&&(co=0)),Pr(n)}function Pb(n,r){r===0&&(r=Ba()),n=tl(n,r),n!==null&&(te(n,r),Pr(n))}function mT(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Pb(n,l)}function gT(n,r){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Pb(n,l)}function pT(n,r){return zt(n,r)}var eh=null,mo=null,ug=!1,th=!1,dg=!1,hi=0;function Pr(n){n!==mo&&n.next===null&&(mo===null?eh=mo=n:mo=mo.next=n),th=!0,ug||(ug=!0,yT())}function Fc(n,r){if(!dg&&th){dg=!0;do for(var l=!1,c=eh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,T=c.pingedLanes;m=(1<<31-vt(42|n)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Hb(c,m))}else m=lt,m=is(c,c===Pt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Wn(c,m)||(l=!0,Hb(c,m));c=c.next}while(l);dg=!1}}function xT(){Ub()}function Ub(){th=ug=!1;var n=0;hi!==0&&CT()&&(n=hi);for(var r=Bt(),l=null,c=eh;c!==null;){var f=c.next,m=zb(c,r);m===0?(c.next=null,l===null?eh=f:l.next=f,f===null&&(mo=l)):(l=c,(n!==0||(m&3)!==0)&&(th=!0)),c=f}jn!==0&&jn!==5||Fc(n),hi!==0&&(hi=0)}function zb(n,r){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-vt(m),T=1<<v,L=f[v];L===-1?((T&l)===0||(T&c)!==0)&&(f[v]=Fi(T,r)):L<=r&&(n.expiredLanes|=T),m&=~T}if(r=Pt,l=lt,l=is(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===r&&(At===2||At===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&bs(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Wn(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(c!==null&&bs(c),ye(l)){case 2:case 8:l=Us;break;case 32:l=Hn;break;case 268435456:l=Ye;break;default:l=Hn}return c=Bb.bind(null,n),l=zt(l,c),n.callbackPriority=r,n.callbackNode=l,r}return c!==null&&c!==null&&bs(c),n.callbackPriority=2,n.callbackNode=null,2}function Bb(n,r){if(jn!==0&&jn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Zd()&&n.callbackNode!==l)return null;var c=lt;return c=is(n,n===Pt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(_b(n,c,r),zb(n,Bt()),n.callbackNode!=null&&n.callbackNode===l?Bb.bind(null,n):null)}function Hb(n,r){if(Zd())return null;_b(n,r,!0)}function yT(){RT(function(){(_t&6)!==0?zt(ws,xT):Ub()})}function hg(){if(hi===0){var n=Jl;n===0&&(n=Nn,Nn<<=1,(Nn&261888)===0&&(Nn=256)),hi=n}return hi}function Fb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ll(""+n)}function qb(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function bT(n,r,l,c,f){if(r==="submit"&&l&&l.stateNode===f){var m=Fb((f[rt]||null).action),v=c.submitter;v&&(r=(r=v[rt]||null)?Fb(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var T=new kr("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hi!==0){var L=v?qb(f,v):new FormData(f);Im(l,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(T.preventDefault(),L=v?qb(f,v):new FormData(f),Im(l,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var fg=0;fg<Qf.length;fg++){var mg=Qf[fg],vT=mg.toLowerCase(),wT=mg[0].toUpperCase()+mg.slice(1);dr(vT,"on"+wT)}dr(wx,"onAnimationEnd"),dr(_x,"onAnimationIteration"),dr(Nx,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(Lj,"onTransitionRun"),dr(Pj,"onTransitionStart"),dr(Uj,"onTransitionCancel"),dr(jx,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function $b(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var T=c[v],L=T.instance,Z=T.currentTarget;if(T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Z;try{m(f)}catch(oe){pd(oe)}f.currentTarget=null,m=L}else for(v=0;v<c.length;v++){if(T=c[v],L=T.instance,Z=T.currentTarget,T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Z;try{m(f)}catch(oe){pd(oe)}f.currentTarget=null,m=L}}}}function it(n,r){var l=r[on];l===void 0&&(l=r[on]=new Set);var c=n+"__bubble";l.has(c)||(Kb(r,n,2,!1),l.add(c))}function gg(n,r,l){var c=0;r&&(c|=4),Kb(l,n,c,r)}var nh="_reactListening"+Math.random().toString(36).slice(2);function pg(n){if(!n[nh]){n[nh]=!0,nc.forEach(function(l){l!=="selectionchange"&&(_T.has(l)||gg(l,!1,n),gg(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[nh]||(r[nh]=!0,gg("selectionchange",!1,r))}}function Kb(n,r,l,c){switch(wv(r)){case 2:var f=XT;break;case 8:f=WT;break;default:f=kg}l=f.bind(null,r,l,n),f=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,l,{capture:!0,passive:f}):n.addEventListener(r,l,!0):f!==void 0?n.addEventListener(r,l,{passive:f}):n.addEventListener(r,l,!1)}function xg(n,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=c.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=jr(T),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){c=m=v;continue e}T=T.parentNode}}c=c.return}Ga(function(){var Z=m,oe=Bs(l),me=[];e:{var ne=Tx.get(n);if(ne!==void 0){var ie=kr,De=n;switch(n){case"keypress":if(Qi(l)===0)break e;case"keydown":case"keyup":ie=fd;break;case"focusin":De="focus",ie=Wi;break;case"focusout":De="blur",ie=Wi;break;case"beforeblur":case"afterblur":ie=Wi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case wx:case _x:case Nx:ie=id;break;case jx:ie=C;break;case"scroll":case"scrollend":ie=mc;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ra;break;case"toggle":case"beforetoggle":ie=et}var Fe=(r&4)!==0,Vt=!Fe&&(n==="scroll"||n==="scrollend"),G=Fe?ne!==null?ne+"Capture":null:ne;Fe=[];for(var F=Z,J;F!==null;){var ce=F;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||G===null||(ce=lr(F,G),ce!=null&&Fe.push($c(F,ce,J))),Vt)break;F=F.return}0<Fe.length&&(ne=new ie(ne,De,null,l,oe),me.push({event:ne,listeners:Fe}))}}if((r&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",ne&&l!==dc&&(De=l.relatedTarget||l.fromElement)&&(jr(De)||De[$t]))break e;if((ie||ne)&&(ne=oe.window===oe?oe:(ne=oe.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(De=l.relatedTarget||l.toElement,ie=Z,De=De?jr(De):null,De!==null&&(Vt=u(De),Fe=De.tag,De!==Vt||Fe!==5&&Fe!==27&&Fe!==6)&&(De=null)):(ie=null,De=Z),ie!==De)){if(Fe=gc,ce="onMouseLeave",G="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Fe=ra,ce="onPointerLeave",G="onPointerEnter",F="pointer"),Vt=ie==null?ne:js(ie),J=De==null?ne:js(De),ne=new Fe(ce,F+"leave",ie,l,oe),ne.target=Vt,ne.relatedTarget=J,ce=null,jr(oe)===Z&&(Fe=new Fe(G,F+"enter",De,l,oe),Fe.target=J,Fe.relatedTarget=Vt,ce=Fe),Vt=ce,ie&&De)t:{for(Fe=NT,G=ie,F=De,J=0,ce=G;ce;ce=Fe(ce))J++;ce=0;for(var Pe=F;Pe;Pe=Fe(Pe))ce++;for(;0<J-ce;)G=Fe(G),J--;for(;0<ce-J;)F=Fe(F),ce--;for(;J--;){if(G===F||F!==null&&G===F.alternate){Fe=G;break t}G=Fe(G),F=Fe(F)}Fe=null}else Fe=null;ie!==null&&Gb(me,ne,ie,Fe,!1),De!==null&&Vt!==null&&Gb(me,Vt,De,Fe,!0)}}e:{if(ne=Z?js(Z):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var xt=ux;else if(ox(ne))if(dx)xt=Oj;else{xt=Ij;var Ve=kj}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?Z&&Vl(Z.elementType)&&(xt=ux):xt=Dj;if(xt&&(xt=xt(n,Z))){cx(me,xt,l,oe);break e}Ve&&Ve(n,ne,Z),n==="focusout"&&Z&&ne.type==="number"&&Z.memoizedProps.value!=null&&oc(ne,"number",ne.value)}switch(Ve=Z?js(Z):window,n){case"focusin":(ox(Ve)||Ve.contentEditable==="true")&&(ql=Ve,Kf=Z,vc=null);break;case"focusout":vc=Kf=ql=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,bx(me,l,oe);break;case"selectionchange":if(Vj)break;case"keydown":case"keyup":bx(me,l,oe)}var nt;if(wt)e:{switch(n){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Fl?Ji(n,l)&&(ot="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ot="onCompositionStart");ot&&(Or&&l.locale!=="ko"&&(Fl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Fl&&(nt=fc()):(Rr=oe,hc="value"in Rr?Rr.value:Rr.textContent,Fl=!0)),Ve=sh(Z,ot),0<Ve.length&&(ot=new Dr(ot,n,null,l,oe),me.push({event:ot,listeners:Ve}),nt?ot.data=nt:(nt=Hl(l),nt!==null&&(ot.data=nt)))),(nt=Fs?Sj(n,l):Cj(n,l))&&(ot=sh(Z,"onBeforeInput"),0<ot.length&&(Ve=new Dr("onBeforeInput","beforeinput",null,l,oe),me.push({event:Ve,listeners:ot}),Ve.data=nt)),bT(me,n,Z,l,oe)}$b(me,r)})}function $c(n,r,l){return{instance:n,listener:r,currentTarget:l}}function sh(n,r){for(var l=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=lr(n,l),f!=null&&c.unshift($c(n,f,m)),f=lr(n,r),f!=null&&c.push($c(n,f,m))),n.tag===3)return c;n=n.return}return[]}function NT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Gb(n,r,l,c,f){for(var m=r._reactName,v=[];l!==null&&l!==c;){var T=l,L=T.alternate,Z=T.stateNode;if(T=T.tag,L!==null&&L===c)break;T!==5&&T!==26&&T!==27||Z===null||(L=Z,f?(Z=lr(l,m),Z!=null&&v.unshift($c(l,Z,L))):f||(Z=lr(l,m),Z!=null&&v.push($c(l,Z,L)))),l=l.return}v.length!==0&&n.push({event:r,listeners:v})}var jT=/\r\n?/g,TT=/\u0000|\uFFFD/g;function Yb(n){return(typeof n=="string"?n:""+n).replace(jT,`
`).replace(TT,"")}function Qb(n,r){return r=Yb(r),Yb(n)===r}function Mt(n,r,l,c,f,m){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||os(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&os(n,""+c);break;case"className":Ts(n,"class",c);break;case"tabIndex":Ts(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(n,l,c);break;case"style":uc(n,c,m);break;case"data":if(r!=="object"){Ts(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Ll(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&Mt(n,r,"name",f.name,f,null),Mt(n,r,"formEncType",f.formEncType,f,null),Mt(n,r,"formMethod",f.formMethod,f,null),Mt(n,r,"formTarget",f.formTarget,f,null)):(Mt(n,r,"encType",f.encType,f,null),Mt(n,r,"method",f.method,f,null),Mt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Ll(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=ir);break;case"onScroll":c!=null&&it("scroll",n);break;case"onScrollEnd":c!=null&&it("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=Ll(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":it("beforetoggle",n),it("toggle",n),Ol(n,"popover",c);break;case"xlinkActuate":mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":mn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":mn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":mn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":mn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ol(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=sd.get(l)||l,Ol(n,l,c))}}function yg(n,r,l,c,f,m){switch(l){case"style":uc(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof c=="string"?os(n,c):(typeof c=="number"||typeof c=="bigint")&&os(n,""+c);break;case"onScroll":c!=null&&it("scroll",n);break;case"onScrollEnd":c!=null&&it("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ir);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),r=l.slice(2,f?l.length-7:void 0),m=n[rt]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,c,f);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Ol(n,l,c)}}}function Pn(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",n),it("load",n);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Mt(n,r,m,v,l,null)}}f&&Mt(n,r,"srcSet",l.srcSet,l,null),c&&Mt(n,r,"src",l.src,l,null);return;case"input":it("invalid",n);var T=m=v=f=null,L=null,Z=null;for(c in l)if(l.hasOwnProperty(c)){var oe=l[c];if(oe!=null)switch(c){case"name":f=oe;break;case"type":v=oe;break;case"checked":L=oe;break;case"defaultChecked":Z=oe;break;case"value":m=oe;break;case"defaultValue":T=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,r));break;default:Mt(n,r,c,oe,l,null)}}ed(n,m,T,L,Z,v,f,!1);return;case"select":it("invalid",n),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:Mt(n,r,f,T,l,null)}r=m,l=v,n.multiple=!!c,r!=null?Fa(n,!!c,r,!1):l!=null&&Fa(n,!!c,l,!0);return;case"textarea":it("invalid",n),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(T=l[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Mt(n,r,v,T,l,null)}qa(n,c,f,m);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Mt(n,r,L,c,l,null)}return;case"dialog":it("beforetoggle",n),it("toggle",n),it("cancel",n),it("close",n);break;case"iframe":case"object":it("load",n);break;case"video":case"audio":for(c=0;c<qc.length;c++)it(qc[c],n);break;case"image":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"embed":case"source":case"link":it("error",n),it("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(c=l[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Mt(n,r,Z,c,l,null)}return;default:if(Vl(r)){for(oe in l)l.hasOwnProperty(oe)&&(c=l[oe],c!==void 0&&yg(n,r,oe,c,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(c=l[T],c!=null&&Mt(n,r,T,c,l,null))}function ET(n,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,L=null,Z=null,oe=null;for(ie in l){var me=l[ie];if(l.hasOwnProperty(ie)&&me!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=me;default:c.hasOwnProperty(ie)||Mt(n,r,ie,null,c,me)}}for(var ne in c){var ie=c[ne];if(me=l[ne],c.hasOwnProperty(ne)&&(ie!=null||me!=null))switch(ne){case"type":m=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":oe=ie;break;case"value":v=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,r));break;default:ie!==me&&Mt(n,r,ne,ie,c,me)}}Ml(n,v,T,L,Z,oe,m,f);return;case"select":ie=v=T=ne=null;for(m in l)if(L=l[m],l.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ie=L;default:c.hasOwnProperty(m)||Mt(n,r,m,null,c,L)}for(f in c)if(m=c[f],L=l[f],c.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ne=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==L&&Mt(n,r,f,m,c,L)}r=T,l=v,c=ie,ne!=null?Fa(n,!!l,ne,!1):!!c!=!!l&&(r!=null?Fa(n,!!l,r,!0):Fa(n,!!l,l?[]:"",!1));return;case"textarea":ie=ne=null;for(T in l)if(f=l[T],l.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Mt(n,r,T,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":ne=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Mt(n,r,v,f,c,m)}td(n,ne,ie);return;case"option":for(var De in l)if(ne=l[De],l.hasOwnProperty(De)&&ne!=null&&!c.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:Mt(n,r,De,null,c,ne)}for(L in c)if(ne=c[L],ie=l[L],c.hasOwnProperty(L)&&ne!==ie&&(ne!=null||ie!=null))switch(L){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Mt(n,r,L,ne,c,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)ne=l[Fe],l.hasOwnProperty(Fe)&&ne!=null&&!c.hasOwnProperty(Fe)&&Mt(n,r,Fe,null,c,ne);for(Z in c)if(ne=c[Z],ie=l[Z],c.hasOwnProperty(Z)&&ne!==ie&&(ne!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,r));break;default:Mt(n,r,Z,ne,c,ie)}return;default:if(Vl(r)){for(var Vt in l)ne=l[Vt],l.hasOwnProperty(Vt)&&ne!==void 0&&!c.hasOwnProperty(Vt)&&yg(n,r,Vt,void 0,c,ne);for(oe in c)ne=c[oe],ie=l[oe],!c.hasOwnProperty(oe)||ne===ie||ne===void 0&&ie===void 0||yg(n,r,oe,ne,c,ie);return}}for(var G in l)ne=l[G],l.hasOwnProperty(G)&&ne!=null&&!c.hasOwnProperty(G)&&Mt(n,r,G,null,c,ne);for(me in c)ne=c[me],ie=l[me],!c.hasOwnProperty(me)||ne===ie||ne==null&&ie==null||Mt(n,r,me,ne,c,ie)}function Xb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ST(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,T=f.duration;if(m&&T&&Xb(v)){for(v=0,T=f.responseEnd,c+=1;c<l.length;c++){var L=l[c],Z=L.startTime;if(Z>T)break;var oe=L.transferSize,me=L.initiatorType;oe&&Xb(me)&&(L=L.responseEnd,v+=oe*(L<T?1:(T-Z)/(L-Z)))}if(--c,r+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var bg=null,vg=null;function rh(n){return n.nodeType===9?n:n.ownerDocument}function Wb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jb(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function wg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _g=null;function CT(){var n=window.event;return n&&n.type==="popstate"?n===_g?!1:(_g=n,!0):(_g=null,!1)}var Zb=typeof setTimeout=="function"?setTimeout:void 0,AT=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(n){return ev.resolve(null).then(n).catch(kT)}:Zb;function kT(n){setTimeout(function(){throw n})}function fi(n){return n==="head"}function tv(n,r){var l=r,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(f),yo(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Kc(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Kc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[Cn]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&Kc(n.ownerDocument.body);l=f}while(l);yo(r)}function nv(n,r){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function Ng(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ng(l),Dl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function IT(n,r,l,c){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Cn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Xs(n.nextSibling),n===null)break}return null}function DT(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Xs(n.nextSibling),n===null))return null;return n}function sv(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Xs(n.nextSibling),n===null))return null;return n}function jg(n){return n.data==="$?"||n.data==="$~"}function Tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function OT(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Xs(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Eg=null;function rv(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return Xs(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function av(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function iv(n,r,l){switch(r=rh(l),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Kc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Dl(n)}var Ws=new Map,lv=new Set;function ah(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ba=se.d;se.d={f:MT,r:VT,D:LT,C:PT,L:UT,m:zT,X:HT,S:BT,M:FT};function MT(){var n=ba.f(),r=Xd();return n||r}function VT(n){var r=zs(n);r!==null&&r.tag===5&&r.type==="form"?jy(r):ba.r(n)}var go=typeof document>"u"?null:document;function ov(n,r,l){var c=go;if(c&&typeof r=="string"&&r){var f=ls(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),lv.has(f)||(lv.add(f),n={rel:n,crossOrigin:l,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Pn(r,"link",n),fn(r),c.head.appendChild(r)))}}function LT(n){ba.D(n),ov("dns-prefetch",n,null)}function PT(n,r){ba.C(n,r),ov("preconnect",n,r)}function UT(n,r,l){ba.L(n,r,l);var c=go;if(c&&n&&r){var f='link[rel="preload"][as="'+ls(r)+'"]';r==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+ls(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+ls(l.imageSizes)+'"]')):f+='[href="'+ls(n)+'"]';var m=f;switch(r){case"style":m=po(n);break;case"script":m=xo(n)}Ws.has(m)||(n=w({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),Ws.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Gc(m))||r==="script"&&c.querySelector(Yc(m))||(r=c.createElement("link"),Pn(r,"link",n),fn(r),c.head.appendChild(r)))}}function zT(n,r){ba.m(n,r);var l=go;if(l&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ls(c)+'"][href="'+ls(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xo(n)}if(!Ws.has(m)&&(n=w({rel:"modulepreload",href:n},r),Ws.set(m,n),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yc(m)))return}c=l.createElement("link"),Pn(c,"link",n),fn(c),l.head.appendChild(c)}}}function BT(n,r,l){ba.S(n,r,l);var c=go;if(c&&n){var f=Tr(c).hoistableStyles,m=po(n);r=r||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(Gc(m)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},l),(l=Ws.get(m))&&Sg(n,l);var L=v=c.createElement("link");fn(L),Pn(L,"link",n),L._p=new Promise(function(Z,oe){L.onload=Z,L.onerror=oe}),L.addEventListener("load",function(){T.loading|=1}),L.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ih(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function HT(n,r){ba.X(n,r);var l=go;if(l&&n){var c=Tr(l).hoistableScripts,f=xo(n),m=c.get(f);m||(m=l.querySelector(Yc(f)),m||(n=w({src:n,async:!0},r),(r=Ws.get(f))&&Cg(n,r),m=l.createElement("script"),fn(m),Pn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function FT(n,r){ba.M(n,r);var l=go;if(l&&n){var c=Tr(l).hoistableScripts,f=xo(n),m=c.get(f);m||(m=l.querySelector(Yc(f)),m||(n=w({src:n,async:!0,type:"module"},r),(r=Ws.get(f))&&Cg(n,r),m=l.createElement("script"),fn(m),Pn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function cv(n,r,l,c){var f=(f=we.current)?ah(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=po(l.href),l=Tr(f).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=po(l.href);var m=Tr(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Gc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Ws.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ws.set(n,l),m||qT(f,n,l,v.state))),r&&c===null)throw Error(a(528,""));return v}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xo(l),l=Tr(f).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function po(n){return'href="'+ls(n)+'"'}function Gc(n){return'link[rel="stylesheet"]['+n+"]"}function uv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function qT(n,r,l,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Pn(r,"link",l),fn(r),n.head.appendChild(r))}function xo(n){return'[src="'+ls(n)+'"]'}function Yc(n){return"script[async]"+n}function dv(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+ls(l.href)+'"]');if(c)return r.instance=c,fn(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),fn(c),Pn(c,"style",f),ih(c,l.precedence,n),r.instance=c;case"stylesheet":f=po(l.href);var m=n.querySelector(Gc(f));if(m)return r.state.loading|=4,r.instance=m,fn(m),m;c=uv(l),(f=Ws.get(f))&&Sg(c,f),m=(n.ownerDocument||n).createElement("link"),fn(m);var v=m;return v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Pn(m,"link",c),r.state.loading|=4,ih(m,l.precedence,n),r.instance=m;case"script":return m=xo(l.src),(f=n.querySelector(Yc(m)))?(r.instance=f,fn(f),f):(c=l,(f=Ws.get(m))&&(c=w({},l),Cg(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),fn(f),Pn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,ih(c,l.precedence,n));return r.instance}function ih(n,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function Sg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Cg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var lh=null;function hv(n,r,l){if(lh===null){var c=new Map,f=lh=new Map;f.set(l,c)}else f=lh,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var m=l[f];if(!(m[Cn]||m[Ze]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=n+v;var T=c.get(v);T?T.push(m):c.set(v,[m])}}return c}function fv(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function $T(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function mv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function KT(n,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=po(c.href),m=r.querySelector(Gc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=oh.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=m,fn(m);return}m=r.ownerDocument||r,c=uv(c),(f=Ws.get(f))&&Sg(c,f),m=m.createElement("link"),fn(m);var v=m;v._p=new Promise(function(T,L){v.onload=T,v.onerror=L}),Pn(m,"link",c),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=oh.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var Ag=0;function GT(n,r){return n.stylesheets&&n.count===0&&uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&Ag===0&&(Ag=62500*ST());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Ag?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ch=null;function uh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ch=new Map,r.forEach(YT,n),ch=null,oh.call(n))}function YT(n,r){if(!(r.state.loading&4)){var l=ch.get(n);if(l)var c=l.get(null);else{l=new Map,ch.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=oh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Qc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function QT(n,r,l,c,f,m,v,T,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qn(0),this.hiddenUpdates=qn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function gv(n,r,l,c,f,m,v,T,L,Z,oe,me){return n=new QT(n,r,l,v,L,Z,oe,me,T),r=1,m===!0&&(r|=24),m=Ss(3,null,null,r),n.current=m,m.stateNode=n,r=om(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:r},hm(m),n}function pv(n){return n?(n=Gl,n):Gl}function xv(n,r,l,c,f,m){f=pv(f),c.context===null?c.context=f:c.pendingContext=f,c=ni(r),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=si(n,c,r),l!==null&&(fs(l,n,r),Sc(l,n,r))}function yv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Rg(n,r){yv(n,r),(n=n.alternate)&&yv(n,r)}function bv(n){if(n.tag===13||n.tag===31){var r=tl(n,67108864);r!==null&&fs(r,n,67108864),Rg(n,67108864)}}function vv(n){if(n.tag===13||n.tag===31){var r=Is();r=pe(r);var l=tl(n,r);l!==null&&fs(l,n,r),Rg(n,r)}}var dh=!0;function XT(n,r,l,c){var f=ee.T;ee.T=null;var m=se.p;try{se.p=2,kg(n,r,l,c)}finally{se.p=m,ee.T=f}}function WT(n,r,l,c){var f=ee.T;ee.T=null;var m=se.p;try{se.p=8,kg(n,r,l,c)}finally{se.p=m,ee.T=f}}function kg(n,r,l,c){if(dh){var f=Ig(c);if(f===null)xg(n,r,c,hh,l),_v(n,c);else if(ZT(f,n,r,l,c))c.stopPropagation();else if(_v(n,c),r&4&&-1<JT.indexOf(n)){for(;f!==null;){var m=zs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Fn(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var L=1<<31-vt(v);T.entanglements[1]|=L,v&=~L}Pr(m),(_t&6)===0&&(Yd=Bt()+500,Fc(0))}}break;case 31:case 13:T=tl(m,2),T!==null&&fs(T,m,2),Xd(),Rg(m,2)}if(m=Ig(c),m===null&&xg(n,r,c,hh,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else xg(n,r,c,null,l)}}function Ig(n){return n=Bs(n),Dg(n)}var hh=null;function Dg(n){if(hh=null,n=jr(n),n!==null){var r=u(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=d(r),n!==null)return n;n=null}else if(l===31){if(n=g(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return hh=n,null}function wv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vs()){case ws:return 2;case Us:return 8;case Hn:case mt:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Og=!1,mi=null,gi=null,pi=null,Xc=new Map,Wc=new Map,xi=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _v(n,r){switch(n){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":Xc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(r.pointerId)}}function Jc(n,r,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=zs(r),r!==null&&bv(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function ZT(n,r,l,c,f){switch(r){case"focusin":return mi=Jc(mi,n,r,l,c,f),!0;case"dragenter":return gi=Jc(gi,n,r,l,c,f),!0;case"mouseover":return pi=Jc(pi,n,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return Xc.set(m,Jc(Xc.get(m)||null,n,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Wc.set(m,Jc(Wc.get(m)||null,n,r,l,c,f)),!0}return!1}function Nv(n){var r=jr(n.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=d(l),r!==null){n.blockedOn=r,Oe(n.priority,function(){vv(l)});return}}else if(r===31){if(r=g(l),r!==null){n.blockedOn=r,Oe(n.priority,function(){vv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Ig(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);dc=c,l.target.dispatchEvent(c),dc=null}else return r=zs(l),r!==null&&bv(r),n.blockedOn=l,!1;r.shift()}return!0}function jv(n,r,l){fh(n)&&l.delete(r)}function eE(){Og=!1,mi!==null&&fh(mi)&&(mi=null),gi!==null&&fh(gi)&&(gi=null),pi!==null&&fh(pi)&&(pi=null),Xc.forEach(jv),Wc.forEach(jv)}function mh(n,r){n.blockedOn===r&&(n.blockedOn=null,Og||(Og=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,eE)))}var gh=null;function Tv(n){gh!==n&&(gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gh===n&&(gh=null);for(var r=0;r<n.length;r+=3){var l=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(Dg(c||l)===null)continue;break}var m=zs(l);m!==null&&(n.splice(r,3),r-=3,Im(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function yo(n){function r(L){return mh(L,n)}mi!==null&&mh(mi,n),gi!==null&&mh(gi,n),pi!==null&&mh(pi,n),Xc.forEach(r),Wc.forEach(r);for(var l=0;l<xi.length;l++){var c=xi[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<xi.length&&(l=xi[0],l.blockedOn===null);)Nv(l),l.blockedOn===null&&xi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[rt]||null;if(typeof m=="function")v||Tv(l);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[rt]||null)T=v.formAction;else if(Dg(f)!==null)continue}else T=v.action;typeof T=="function"?l[c+1]=T:(l.splice(c,3),c-=3),Tv(l)}}}function Ev(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Mg(n){this._internalRoot=n}ph.prototype.render=Mg.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,c=Is();xv(l,c,n,r,null,null)},ph.prototype.unmount=Mg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;xv(n.current,2,null,n,null,null),Xd(),r[$t]=null}};function ph(n){this._internalRoot=n}ph.prototype.unstable_scheduleHydration=function(n){if(n){var r=Me();n={blockedOn:null,target:n,priority:r};for(var l=0;l<xi.length&&r!==0&&r<xi[l].priority;l++);xi.splice(l,0,n),l===0&&Nv(n)}};var Sv=e.version;if(Sv!=="19.2.0")throw Error(a(527,Sv,"19.2.0"));se.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var tE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{It=xh.inject(tE),bt=xh}catch{}}return eu.createRoot=function(n,r){if(!o(n))throw Error(a(299));var l=!1,c="",f=Oy,m=My,v=Vy;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=gv(n,1,!1,null,null,l,c,null,f,m,v,Ev),n[$t]=r.current,pg(n),new Mg(r)},eu.hydrateRoot=function(n,r,l){if(!o(n))throw Error(a(299));var c=!1,f="",m=Oy,v=My,T=Vy,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=gv(n,1,!0,r,l??null,c,f,L,m,v,T,Ev),r.context=pv(null),l=r.current,c=Is(),c=pe(c),f=ni(c),f.callback=null,si(l,f,c),l=c,r.current.lanes=l,te(r,l),Pr(r),n[$t]=r.current,pg(n),new ph(r)},eu.version="19.2.0",eu}var Lv;function dE(){if(Lv)return Pg.exports;Lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Pg.exports=uE(),Pg.exports}var hE=dE();const fE=P_(hE);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pv="popstate";function mE(s={}){function e(o,u){let{pathname:d="/",search:g="",hash:x=""}=Tl(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),dp("",{pathname:d,search:g,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let x=o.location.href,p=x.indexOf("#");g=p===-1?x:x.slice(0,p)}return g+"#"+(typeof u=="string"?u:bu(u))}function a(o,u){Ps(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return pE(e,t,a,s)}function Wt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ps(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gE(){return Math.random().toString(36).substring(2,10)}function Uv(s,e){return{usr:s.state,key:s.key,idx:e}}function dp(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Tl(e):e,state:t,key:e&&e.key||a||gE()}}function bu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Tl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function pE(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,g="POP",x=null,p=b();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function b(){return(d.state||{idx:null}).idx}function w(){g="POP";let z=b(),Y=z==null?null:z-p;p=z,x&&x({action:g,location:$.location,delta:Y})}function N(z,Y){g="PUSH";let ae=dp($.location,z,Y);t&&t(ae,z),p=b()+1;let K=Uv(ae,p),H=$.createHref(ae);try{d.pushState(K,"",H)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(H)}u&&x&&x({action:g,location:$.location,delta:1})}function k(z,Y){g="REPLACE";let ae=dp($.location,z,Y);t&&t(ae,z),p=b();let K=Uv(ae,p),H=$.createHref(ae);d.replaceState(K,"",H),u&&x&&x({action:g,location:$.location,delta:0})}function M(z){return xE(z)}let $={get action(){return g},get location(){return s(o,d)},listen(z){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(Pv,w),x=z,()=>{o.removeEventListener(Pv,w),x=null}},createHref(z){return e(o,z)},createURL:M,encodeLocation(z){let Y=M(z);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:N,replace:k,go(z){return d.go(z)}};return $}function xE(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:bu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function U_(s,e,t="/"){return yE(s,e,t,!1)}function yE(s,e,t,a){let o=typeof e=="string"?Tl(e):e,u=Ia(o.pathname||"/",t);if(u==null)return null;let d=z_(s);bE(d);let g=null;for(let x=0;g==null&&x<d.length;++x){let p=RE(u);g=CE(d[x],p,a)}return g}function z_(s,e=[],t=[],a="",o=!1){let u=(d,g,x=o,p)=>{let b={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&x)return;Wt(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let w=Aa([a,b.relativePath]),N=t.concat(b);d.children&&d.children.length>0&&(Wt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),z_(d.children,e,N,w,x)),!(d.path==null&&!d.index)&&e.push({path:w,score:EE(w,d.index),routesMeta:N})};return s.forEach((d,g)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))u(d,g);else for(let p of B_(d.path))u(d,g,!0,p)}),e}function B_(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=B_(a.join("/")),g=[];return g.push(...d.map(x=>x===""?u:[u,x].join("/"))),o&&g.push(...d),g.map(x=>s.startsWith("/")&&x===""?"/":x)}function bE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:SE(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var vE=/^:[\w-]+$/,wE=3,_E=2,NE=1,jE=10,TE=-2,zv=s=>s==="*";function EE(s,e){let t=s.split("/"),a=t.length;return t.some(zv)&&(a+=TE),e&&(a+=_E),t.filter(o=>!zv(o)).reduce((o,u)=>o+(vE.test(u)?wE:u===""?NE:jE),a)}function SE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function CE(s,e,t=!1){let{routesMeta:a}=s,o={},u="/",d=[];for(let g=0;g<a.length;++g){let x=a[g],p=g===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},b),N=x.route;if(!w&&p&&t&&!a[a.length-1].route.index&&(w=Bh({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Aa([u,w.pathname]),pathnameBase:ME(Aa([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=Aa([u,w.pathnameBase]))}return d}function Bh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=AE(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:w},N)=>{if(b==="*"){let M=g[N]||"";d=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const k=g[N];return w&&!k?p[b]=void 0:p[b]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function AE(s,e=!1,t=!0){Ps(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,x)=>(a.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function RE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ia(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var kE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IE=s=>kE.test(s);function DE(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?Tl(s):s,u;if(t)if(IE(t))u=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?u=Bv(t.substring(1),"/"):u=Bv(t,e)}else u=e;return{pathname:u,search:VE(a),hash:LE(o)}}function Bv(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Hg(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function H_(s){let e=OE(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function F_(s,e,t,a=!1){let o;typeof s=="string"?o=Tl(s):(o={...s},Wt(!o.pathname||!o.pathname.includes("?"),Hg("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),Hg("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),Hg("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,g;if(d==null)g=t;else{let w=e.length-1;if(!a&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}g=w>=0?e[w]:"/"}let x=DE(o,g),p=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(p||b)&&(x.pathname+="/"),x}var Aa=s=>s.join("/").replace(/\/\/+/g,"/"),ME=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),VE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,LE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function PE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q_=["POST","PUT","PATCH","DELETE"];new Set(q_);var UE=["GET",...q_];new Set(UE);var Yo=j.createContext(null);Yo.displayName="DataRouter";var df=j.createContext(null);df.displayName="DataRouterState";j.createContext(!1);var $_=j.createContext({isTransitioning:!1});$_.displayName="ViewTransition";var zE=j.createContext(new Map);zE.displayName="Fetchers";var BE=j.createContext(null);BE.displayName="Await";var Jr=j.createContext(null);Jr.displayName="Navigation";var Au=j.createContext(null);Au.displayName="Location";var Zr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Zr.displayName="Route";var Wp=j.createContext(null);Wp.displayName="RouteError";function HE(s,{relative:e}={}){Wt(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=j.useContext(Jr),{hash:o,pathname:u,search:d}=ku(s,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:Aa([t,u])),a.createHref({pathname:g,search:d,hash:o})}function Ru(){return j.useContext(Au)!=null}function Pa(){return Wt(Ru(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Au).location}var K_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function G_(s){j.useContext(Jr).static||j.useLayoutEffect(s)}function rr(){let{isDataRoute:s}=j.useContext(Zr);return s?nS():FE()}function FE(){Wt(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(Yo),{basename:e,navigator:t}=j.useContext(Jr),{matches:a}=j.useContext(Zr),{pathname:o}=Pa(),u=JSON.stringify(H_(a)),d=j.useRef(!1);return G_(()=>{d.current=!0}),j.useCallback((x,p={})=>{if(Ps(d.current,K_),!d.current)return;if(typeof x=="number"){t.go(x);return}let b=F_(x,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Aa([e,b.pathname])),(p.replace?t.replace:t.push)(b,p.state,p)},[e,t,u,o,s])}j.createContext(null);function qE(){let{matches:s}=j.useContext(Zr),e=s[s.length-1];return e?e.params:{}}function ku(s,{relative:e}={}){let{matches:t}=j.useContext(Zr),{pathname:a}=Pa(),o=JSON.stringify(H_(t));return j.useMemo(()=>F_(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function $E(s,e){return Y_(s,e)}function Y_(s,e,t,a,o){var ae;Wt(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Jr),{matches:d}=j.useContext(Zr),g=d[d.length-1],x=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let K=w&&w.path||"";Q_(p,!w||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let N=Pa(),k;if(e){let K=typeof e=="string"?Tl(e):e;Wt(b==="/"||((ae=K.pathname)==null?void 0:ae.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${K.pathname}" was given in the \`location\` prop.`),k=K}else k=N;let M=k.pathname||"/",$=M;if(b!=="/"){let K=b.replace(/^\//,"").split("/");$="/"+M.replace(/^\//,"").split("/").slice(K.length).join("/")}let z=U_(s,{pathname:$});Ps(w||z!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Ps(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=XE(z&&z.map(K=>Object.assign({},K,{params:Object.assign({},x,K.params),pathname:Aa([b,u.encodeLocation?u.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?b:Aa([b,u.encodeLocation?u.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),d,t,a,o);return e&&Y?j.createElement(Au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},Y):Y}function KE(){let s=tS(),e=PE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,d)}var GE=j.createElement(KE,null),YE=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?j.createElement(Zr.Provider,{value:this.props.routeContext},j.createElement(Wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QE({routeContext:s,match:e,children:t}){let a=j.useContext(Yo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Zr.Provider,{value:s},t)}function XE(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t==null?void 0:t.errors;if(d!=null){let b=u.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);Wt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,x=-1;if(t)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(x=b),w.route.id){let{loaderData:N,errors:k}=t,M=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!k||k[w.route.id]===void 0);if(w.route.lazy||M){g=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}let p=t&&a?(b,w)=>{var N,k;a(b,{location:t.location,params:((k=(N=t.matches)==null?void 0:N[0])==null?void 0:k.params)??{},errorInfo:w})}:void 0;return u.reduceRight((b,w,N)=>{let k,M=!1,$=null,z=null;t&&(k=d&&w.route.id?d[w.route.id]:void 0,$=w.route.errorElement||GE,g&&(x<0&&N===0?(Q_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,z=null):x===N&&(M=!0,z=w.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,N+1)),ae=()=>{let K;return k?K=$:M?K=z:w.route.Component?K=j.createElement(w.route.Component,null):w.route.element?K=w.route.element:K=b,j.createElement(QE,{match:w,routeContext:{outlet:b,matches:Y,isDataRoute:t!=null},children:K})};return t&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?j.createElement(YE,{location:t.location,revalidation:t.revalidation,component:$,error:k,children:ae(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:p}):ae()},null)}function Jp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WE(s){let e=j.useContext(Yo);return Wt(e,Jp(s)),e}function JE(s){let e=j.useContext(df);return Wt(e,Jp(s)),e}function ZE(s){let e=j.useContext(Zr);return Wt(e,Jp(s)),e}function Zp(s){let e=ZE(s),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function eS(){return Zp("useRouteId")}function tS(){var a;let s=j.useContext(Wp),e=JE("useRouteError"),t=Zp("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[t]}function nS(){let{router:s}=WE("useNavigate"),e=Zp("useNavigate"),t=j.useRef(!1);return G_(()=>{t.current=!0}),j.useCallback(async(o,u={})=>{Ps(t.current,K_),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Hv={};function Q_(s,e,t){!e&&!Hv[s]&&(Hv[s]=!0,Ps(!1,t))}j.memo(sS);function sS({routes:s,future:e,state:t,unstable_onError:a}){return Y_(s,void 0,t,a,e)}function Ur(s){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rS({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:u=!1}){Wt(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof t=="string"&&(t=Tl(t));let{pathname:x="/",search:p="",hash:b="",state:w=null,key:N="default"}=t,k=j.useMemo(()=>{let M=Ia(x,d);return M==null?null:{location:{pathname:M,search:p,hash:b,state:w,key:N},navigationType:a}},[d,x,p,b,w,N,a]);return Ps(k!=null,`<Router basename="${d}"> is not able to match the URL "${x}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:j.createElement(Jr.Provider,{value:g},j.createElement(Au.Provider,{children:e,value:k}))}function aS({children:s,location:e}){return $E(hp(s),e)}function hp(s,e=[]){let t=[];return j.Children.forEach(s,(a,o)=>{if(!j.isValidElement(a))return;let u=[...e,o];if(a.type===j.Fragment){t.push.apply(t,hp(a.props.children,u));return}Wt(a.type===Ur,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=hp(a.props.children,u)),t.push(d)}),t}var Ch="get",Ah="application/x-www-form-urlencoded";function hf(s){return s!=null&&typeof s.tagName=="string"}function iS(s){return hf(s)&&s.tagName.toLowerCase()==="button"}function lS(s){return hf(s)&&s.tagName.toLowerCase()==="form"}function oS(s){return hf(s)&&s.tagName.toLowerCase()==="input"}function cS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function uS(s,e){return s.button===0&&(!e||e==="_self")&&!cS(s)}function fp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function dS(s,e){let t=fp(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(u=>{t.append(o,u)})}),t}var yh=null;function hS(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var fS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fg(s){return s!=null&&!fS.has(s)?(Ps(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ah}"`),null):s}function mS(s,e){let t,a,o,u,d;if(lS(s)){let g=s.getAttribute("action");a=g?Ia(g,e):null,t=s.getAttribute("method")||Ch,o=Fg(s.getAttribute("enctype"))||Ah,u=new FormData(s)}else if(iS(s)||oS(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=s.getAttribute("formaction")||g.getAttribute("action");if(a=x?Ia(x,e):null,t=s.getAttribute("formmethod")||g.getAttribute("method")||Ch,o=Fg(s.getAttribute("formenctype"))||Fg(g.getAttribute("enctype"))||Ah,u=new FormData(g,s),!hS()){let{name:p,type:b,value:w}=s;if(b==="image"){let N=p?`${p}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else p&&u.append(p,w)}}else{if(hf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ch,a=null,o=Ah,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e0(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gS(s,e,t){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&Ia(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function pS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function yS(s,e,t){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await pS(u,t);return d.links?d.links():[]}return[]}));return _S(a.flat(1).filter(xS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Fv(s,e,t,a,o,u){let d=(x,p)=>t[p]?x.route.id!==t[p].route.id:!0,g=(x,p)=>{var b;return t[p].pathname!==x.pathname||((b=t[p].route.path)==null?void 0:b.endsWith("*"))&&t[p].params["*"]!==x.params["*"]};return u==="assets"?e.filter((x,p)=>d(x,p)||g(x,p)):u==="data"?e.filter((x,p)=>{var w;let b=a.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(d(x,p)||g(x,p))return!0;if(x.route.shouldRevalidate){let N=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function bS(s,e,{includeHydrateFallback:t}={}){return vS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function vS(s){return[...new Set(s)]}function wS(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function _S(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(wS(o));return t.has(u)||(t.add(u),a.push({key:u,link:o})),a},[])}function X_(){let s=j.useContext(Yo);return e0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function NS(){let s=j.useContext(df);return e0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var t0=j.createContext(void 0);t0.displayName="FrameworkContext";function W_(){let s=j.useContext(t0);return e0(s,"You must render this element inside a <HydratedRouter> element"),s}function jS(s,e){let t=j.useContext(t0),[a,o]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:p,onMouseLeave:b,onTouchStart:w}=e,N=j.useRef(null);j.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let $=Y=>{Y.forEach(ae=>{d(ae.isIntersecting)})},z=new IntersectionObserver($,{threshold:.5});return N.current&&z.observe(N.current),()=>{z.disconnect()}}},[s]),j.useEffect(()=>{if(a){let $=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout($)}}},[a]);let k=()=>{o(!0)},M=()=>{o(!1),d(!1)};return t?s!=="intent"?[u,N,{}]:[u,N,{onFocus:tu(g,k),onBlur:tu(x,M),onMouseEnter:tu(p,k),onMouseLeave:tu(b,M),onTouchStart:tu(w,k)}]:[!1,N,{}]}function tu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function TS({page:s,...e}){let{router:t}=X_(),a=j.useMemo(()=>U_(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?j.createElement(SS,{page:s,matches:a,...e}):null}function ES(s){let{manifest:e,routeModules:t}=W_(),[a,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return yS(s,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,t]),a}function SS({page:s,matches:e,...t}){let a=Pa(),{manifest:o,routeModules:u}=W_(),{basename:d}=X_(),{loaderData:g,matches:x}=NS(),p=j.useMemo(()=>Fv(s,e,x,o,a,"data"),[s,e,x,o,a]),b=j.useMemo(()=>Fv(s,e,x,o,a,"assets"),[s,e,x,o,a]),w=j.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let M=new Set,$=!1;if(e.forEach(Y=>{var K;let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!p.some(H=>H.route.id===Y.route.id)&&Y.route.id in g&&((K=u[Y.route.id])!=null&&K.shouldRevalidate)||ae.hasClientLoader?$=!0:M.add(Y.route.id))}),M.size===0)return[];let z=gS(s,d,"data");return $&&M.size>0&&z.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[d,g,a,o,p,e,s,u]),N=j.useMemo(()=>bS(b,o),[b,o]),k=ES(b);return j.createElement(j.Fragment,null,w.map(M=>j.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),N.map(M=>j.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),k.map(({key:M,link:$})=>j.createElement("link",{key:M,nonce:t.nonce,...$})))}function CS(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var J_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{J_&&(window.__reactRouterVersion="7.9.6")}catch{}function AS({basename:s,children:e,window:t}){let a=j.useRef();a.current==null&&(a.current=mE({window:t,v5Compat:!0}));let o=a.current,[u,d]=j.useState({action:o.action,location:o.location}),g=j.useCallback(x=>{j.startTransition(()=>d(x))},[d]);return j.useLayoutEffect(()=>o.listen(g),[o,g]),j.createElement(rS,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var Z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e1=j.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:g,target:x,to:p,preventScrollReset:b,viewTransition:w,...N},k){let{basename:M}=j.useContext(Jr),$=typeof p=="string"&&Z_.test(p),z,Y=!1;if(typeof p=="string"&&$&&(z=p,J_))try{let A=new URL(window.location.href),O=p.startsWith("//")?new URL(A.protocol+p):new URL(p),I=Ia(O.pathname,M);O.origin===A.origin&&I!=null?p=I+O.search+O.hash:Y=!0}catch{Ps(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=HE(p,{relative:o}),[K,H,de]=jS(a,N),ve=DS(p,{replace:d,state:g,target:x,preventScrollReset:b,relative:o,viewTransition:w});function E(A){e&&e(A),A.defaultPrevented||ve(A)}let S=j.createElement("a",{...N,...de,href:z||ae,onClick:Y||u?e:E,ref:CS(k,H),target:x,"data-discover":!$&&t==="render"?"true":void 0});return K&&!$?j.createElement(j.Fragment,null,S,j.createElement(TS,{page:ae})):S});e1.displayName="Link";var RS=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:g,children:x,...p},b){let w=ku(d,{relative:p.relative}),N=Pa(),k=j.useContext(df),{navigator:M,basename:$}=j.useContext(Jr),z=k!=null&&PS(w)&&g===!0,Y=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,ae=N.pathname,K=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),K=K?K.toLowerCase():null,Y=Y.toLowerCase()),K&&$&&(K=Ia(K,$)||K);const H=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let de=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(H)==="/",ve=K!=null&&(K===Y||!o&&K.startsWith(Y)&&K.charAt(Y.length)==="/"),E={isActive:de,isPending:ve,isTransitioning:z},S=de?e:void 0,A;typeof a=="function"?A=a(E):A=[a,de?"active":null,ve?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(E):u;return j.createElement(e1,{...p,"aria-current":S,className:A,ref:b,style:O,to:d,viewTransition:g},typeof x=="function"?x(E):x)});RS.displayName="NavLink";var kS=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:u,method:d=Ch,action:g,onSubmit:x,relative:p,preventScrollReset:b,viewTransition:w,...N},k)=>{let M=VS(),$=LS(g,{relative:p}),z=d.toLowerCase()==="get"?"get":"post",Y=typeof g=="string"&&Z_.test(g),ae=K=>{if(x&&x(K),K.defaultPrevented)return;K.preventDefault();let H=K.nativeEvent.submitter,de=(H==null?void 0:H.getAttribute("formmethod"))||d;M(H||K.currentTarget,{fetcherKey:e,method:de,navigate:t,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:w})};return j.createElement("form",{ref:k,method:z,action:$,onSubmit:a?x:ae,...N,"data-discover":!Y&&s==="render"?"true":void 0})});kS.displayName="Form";function IS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t1(s){let e=j.useContext(Yo);return Wt(e,IS(s)),e}function DS(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:u,viewTransition:d}={}){let g=rr(),x=Pa(),p=ku(s,{relative:u});return j.useCallback(b=>{if(uS(b,e)){b.preventDefault();let w=t!==void 0?t:bu(x)===bu(p);g(s,{replace:w,state:a,preventScrollReset:o,relative:u,viewTransition:d})}},[x,g,p,t,a,e,s,o,u,d])}function n1(s){Ps(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(fp(s)),t=j.useRef(!1),a=Pa(),o=j.useMemo(()=>dS(a.search,t.current?null:e.current),[a.search]),u=rr(),d=j.useCallback((g,x)=>{const p=fp(typeof g=="function"?g(new URLSearchParams(o)):g);t.current=!0,u("?"+p,x)},[u,o]);return[o,d]}var OS=0,MS=()=>`__${String(++OS)}__`;function VS(){let{router:s}=t1("useSubmit"),{basename:e}=j.useContext(Jr),t=eS();return j.useCallback(async(a,o={})=>{let{action:u,method:d,encType:g,formData:x,body:p}=mS(a,e);if(o.navigate===!1){let b=o.fetcherKey||MS();await s.fetch(b,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:x,body:p,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function LS(s,{relative:e}={}){let{basename:t}=j.useContext(Jr),a=j.useContext(Zr);Wt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...ku(s||".",{relative:e})},d=Pa();if(s==null){u.search=d.search;let g=new URLSearchParams(u.search),x=g.getAll("index");if(x.some(b=>b==="")){g.delete("index"),x.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:Aa([t,u.pathname])),bu(u)}function PS(s,{relative:e}={}){let t=j.useContext($_);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=t1("useViewTransitionState"),o=ku(s,{relative:e});if(!t.isTransitioning)return!1;let u=Ia(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=Ia(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Bh(o.pathname,d)!=null||Bh(o.pathname,u)!=null}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),qv=s=>{const e=zS(s);return e.charAt(0).toUpperCase()+e.slice(1)},s1=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),BS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:d,...g},x)=>j.createElement("svg",{ref:x,...HS,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:s1("lucide",o),...!u&&!BS(g)&&{"aria-hidden":"true"},...g},[...d.map(([p,b])=>j.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(s,e)=>{const t=j.forwardRef(({className:a,...o},u)=>j.createElement(FS,{ref:u,iconNode:e,className:s1(`lucide-${US(qv(s))}`,`lucide-${s}`,a),...o}));return t.displayName=qv(s),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Do=Re("arrow-left",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hh=Re("arrow-right",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],qg=Re("baby",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],YS=Re("banknote",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$v=Re("bell",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],WS=Re("book-open",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Fh=Re("briefcase",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],cu=Re("building-2",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fr=Re("calendar",eC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],nC=Re("camera",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],rC=Re("chart-pie",sC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uu=Re("check",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lC=Re("chevron-down",iC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Os=Re("chevron-right",oC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qn=Re("circle-alert",cC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xs=Re("circle-check-big",uC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vi=Re("circle-check",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fC=Re("circle-question-mark",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],gC=Re("circle-user",mC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],mp=Re("circle-x",pC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],va=Re("clock",xC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ff=Re("cloud-upload",yC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Kv=Re("database",bC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wn=Re("download",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],r1=Re("external-link",wC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gp=Re("eye-off",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bl=Re("eye",NC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],n0=Re("file-spreadsheet",jC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ge=Re("file-text",TC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],mf=Re("file",EC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],$g=Re("flask-conical",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Gv=Re("folder-open",CC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Yv=Re("folder",AC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kC=Re("funnel",RC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],s0=Re("graduation-cap",IC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Kg=Re("image",DC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pp=Re("info",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],VC=Re("landmark",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],a1=Re("layout-grid",LC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Gg=Re("list",PC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ni=Re("loader-circle",UC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Oo=Re("lock",zC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],HC=Re("log-out",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],i1=Re("mail",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$C=Re("map-pin",qC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],l1=Re("maximize-2",KC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ta=Re("message-circle",GC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ea=Re("message-square",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ds=Re("pen-line",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],o1=Re("phone",XC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mo=Re("plus",WC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Qv=Re("refresh-ccw",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],c1=Re("rotate-ccw",ZC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Iu=Re("save",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],u1=Re("school",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],El=Re("search",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Du=Re("send",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aA=Re("settings",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],To=Re("shield-check",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yg=Re("square-check-big",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ji=Re("square-pen",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],uA=Re("stethoscope",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tn=Re("trash-2",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xv=Re("triangle-alert",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],In=Re("upload",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mr=Re("user",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vo=Re("users",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],xp=Re("utensils",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jt=Re("x",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],r0=Re("zoom-in",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],a0=Re("zoom-out",bA),vA=[{id:"quan-tri-he-thong",title:"QUN TR H THNG",description:"Qun l ti khon, phn quyn ngi dng v cu hnh h thng.",icon:To,colorClass:"text-slate-700",bgClass:"from-slate-100 to-slate-200",hoverClass:"hover:shadow-slate-300 hover:border-slate-400",stats:"Dnh cho Admin"}],d1="TRC D LIU TRNG MU GIO VNG ANH",wA="modulepreload",_A=function(s){return"/"+s},Wv={},du=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(t.map(p=>{if(p=_A(p),p in Wv)return;Wv[p]=!0;const b=p.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":wA,b||(N.as="script"),N.crossOrigin="",N.href=p,x&&N.setAttribute("nonce",x),document.head.appendChild(N),b)return new Promise((k,M)=>{N.addEventListener("load",k),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},NA=()=>{};var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jA=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],g=s[t++],x=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const u=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},f1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,g=d?s[o+1]:0,x=o+2<s.length,p=x?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let N=(g&15)<<2|p>>6,k=p&63;x||(k=64,d||(N=64)),a.push(t[b],t[w],t[N],t[k])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(h1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],g=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new TA;const N=u<<2|g>>4;if(a.push(N),p!==64){const k=g<<4&240|p>>2;if(a.push(k),w!==64){const M=p<<6&192|w;a.push(M)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class TA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EA=function(s){const e=h1(s);return f1.encodeByteArray(e,!0)},qh=function(s){return EA(s).replace(/\./g,"")},m1=function(s){try{return f1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>SA().__FIREBASE_DEFAULTS__,AA=()=>{if(typeof process>"u"||typeof Jv>"u")return;const s=Jv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},RA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&m1(s[1]);return e&&JSON.parse(e)},gf=()=>{try{return NA()||CA()||AA()||RA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},g1=s=>{var e,t;return(t=(e=gf())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},i0=s=>{const e=g1(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},p1=()=>{var s;return(s=gf())==null?void 0:s.config},x1=s=>{var e;return(e=gf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pf(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[qh(JSON.stringify(t)),qh(JSON.stringify(d)),""].join(".")}const hu={};function IA(){const s={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?s.emulator.push(e):s.prod.push(e);return s}function DA(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Zv=!1;function xf(s,e){if(typeof window>"u"||typeof document>"u"||!ea(window.location.host)||hu[s]===e||hu[s]||Zv)return;hu[s]=e;function t(N){return`__firebase__banner__${N}`}const a="__firebase__banner",u=IA().prod.length>0;function d(){const N=document.getElementById(a);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function x(N,k){N.setAttribute("width","24"),N.setAttribute("id",k),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Zv=!0,d()},N}function b(N,k){N.setAttribute("id",k),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=DA(a),k=t("text"),M=document.getElementById(k)||document.createElement("span"),$=t("learnmore"),z=document.getElementById($)||document.createElement("a"),Y=t("preprendIcon"),ae=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const K=N.element;g(K),b(z,$);const H=p();x(ae,Y),K.append(ae,M,z,H),document.body.appendChild(K)}u?(M.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function MA(){var e;const s=(e=gf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function PA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const s=Xn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function zA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BA(){try{return typeof indexedDB=="object"}catch{return!1}}function HA(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="FirebaseError";class _r extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=FA,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?qA(u,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new _r(o,g,a)}}function qA(s,e){return s.replace($A,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const $A=/\{\$([^}]+)}/g;function KA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ai(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const u=s[o],d=e[o];if(ew(u)&&ew(d)){if(!Ai(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function ew(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function su(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ru(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function GA(s,e){const t=new YA(s,e);return t.subscribe.bind(t)}class YA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=Qg),o.error===void 0&&(o.error=Qg),o.complete===void 0&&(o.complete=Qg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(s){return s&&s._delegate?s._delegate:s}class Da{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new kA;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JA(e))try{this.getOrInitializeService({instanceIdentifier:ml})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=ml){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ml){return this.instances.has(e)}getOptions(e=ml){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:WA(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ml){return this.component?this.component.multipleInstances?e:ml:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WA(s){return s===ml?void 0:s}function JA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ct||(ct={}));const e4={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},t4=ct.INFO,n4={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},s4=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=n4[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l0{constructor(e){this.name=e,this._logLevel=t4,this._logHandler=s4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const r4=(s,e)=>e.some(t=>s instanceof t);let tw,nw;function a4(){return tw||(tw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i4(){return nw||(nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b1=new WeakMap,yp=new WeakMap,v1=new WeakMap,Xg=new WeakMap,o0=new WeakMap;function l4(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(Ti(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&b1.set(t,s)}).catch(()=>{}),o0.set(e,s),e}function o4(s){if(yp.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});yp.set(s,e)}let bp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return yp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||v1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function c4(s){bp=s(bp)}function u4(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(Wg(this),e,...t);return v1.set(a,e.sort?e.sort():[e]),Ti(a)}:i4().includes(s)?function(...e){return s.apply(Wg(this),e),Ti(b1.get(this))}:function(...e){return Ti(s.apply(Wg(this),e))}}function d4(s){return typeof s=="function"?u4(s):(s instanceof IDBTransaction&&o4(s),r4(s,a4())?new Proxy(s,bp):s)}function Ti(s){if(s instanceof IDBRequest)return l4(s);if(Xg.has(s))return Xg.get(s);const e=d4(s);return e!==s&&(Xg.set(s,e),o0.set(e,s)),e}const Wg=s=>o0.get(s);function h4(s,e,{blocked:t,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),g=Ti(d);return a&&d.addEventListener("upgradeneeded",x=>{a(Ti(d.result),x.oldVersion,x.newVersion,Ti(d.transaction),x)}),t&&d.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),g.then(x=>{u&&x.addEventListener("close",()=>u()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const f4=["get","getKey","getAll","getAllKeys","count"],m4=["put","add","delete","clear"],Jg=new Map;function sw(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jg.get(e))return Jg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=m4.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||f4.includes(t)))return;const u=async function(d,...g){const x=this.transaction(d,o?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[t](...g),o&&x.done]))[0]};return Jg.set(e,u),u}c4(s=>({...s,get:(e,t,a)=>sw(e,t)||s.get(e,t,a),has:(e,t)=>!!sw(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p4(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function p4(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",rw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new l0("@firebase/app"),x4="@firebase/app-compat",y4="@firebase/analytics-compat",b4="@firebase/analytics",v4="@firebase/app-check-compat",w4="@firebase/app-check",_4="@firebase/auth",N4="@firebase/auth-compat",j4="@firebase/database",T4="@firebase/data-connect",E4="@firebase/database-compat",S4="@firebase/functions",C4="@firebase/functions-compat",A4="@firebase/installations",R4="@firebase/installations-compat",k4="@firebase/messaging",I4="@firebase/messaging-compat",D4="@firebase/performance",O4="@firebase/performance-compat",M4="@firebase/remote-config",V4="@firebase/remote-config-compat",L4="@firebase/storage",P4="@firebase/storage-compat",U4="@firebase/firestore",z4="@firebase/ai",B4="@firebase/firestore-compat",H4="firebase",F4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",q4={[vp]:"fire-core",[x4]:"fire-core-compat",[b4]:"fire-analytics",[y4]:"fire-analytics-compat",[w4]:"fire-app-check",[v4]:"fire-app-check-compat",[_4]:"fire-auth",[N4]:"fire-auth-compat",[j4]:"fire-rtdb",[T4]:"fire-data-connect",[E4]:"fire-rtdb-compat",[S4]:"fire-fn",[C4]:"fire-fn-compat",[A4]:"fire-iid",[R4]:"fire-iid-compat",[k4]:"fire-fcm",[I4]:"fire-fcm-compat",[D4]:"fire-perf",[O4]:"fire-perf-compat",[M4]:"fire-rc",[V4]:"fire-rc-compat",[L4]:"fire-gcs",[P4]:"fire-gcs-compat",[U4]:"fire-fst",[B4]:"fire-fst-compat",[z4]:"fire-vertex","fire-js":"fire-js",[H4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Map,_p=new Map,Np=new Map;function aw(s,e){try{s.container.addComponent(e)}catch(t){Oa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ri(s){const e=s.name;if(Np.has(e))return Oa.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,s);for(const t of Vo.values())aw(t,s);for(const t of _p.values())aw(t,s);return!0}function Vu(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function gs(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Ou("app","Firebase",$4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=F4;function c0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:wp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=p1()),!t)throw Ei.create("no-options");const u=Vo.get(o);if(u){if(Ai(t,u.options)&&Ai(a,u.config))return u;throw Ei.create("duplicate-app",{appName:o})}const d=new ZA(o);for(const x of Np.values())d.addComponent(x);const g=new K4(t,a,d);return Vo.set(o,g),g}function yf(s=wp){const e=Vo.get(s);if(!e&&s===wp&&p1())return c0();if(!e)throw Ei.create("no-app",{appName:s});return e}async function G4(s){let e=!1;const t=s.name;Vo.has(t)?(e=!0,Vo.delete(t)):_p.has(t)&&s.decRefCount()<=0&&(_p.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(a=>a.delete())),s.isDeleted=!0)}function Zs(s,e,t){let a=q4[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oa.warn(d.join(" "));return}Ri(new Da(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="firebase-heartbeat-database",Q4=1,vu="firebase-heartbeat-store";let Zg=null;function w1(){return Zg||(Zg=h4(Y4,Q4,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ei.create("idb-open",{originalErrorMessage:s.message})})),Zg}async function X4(s){try{const t=(await w1()).transaction(vu),a=await t.objectStore(vu).get(_1(s));return await t.done,a}catch(e){if(e instanceof _r)Oa.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oa.warn(t.message)}}}async function iw(s,e){try{const a=(await w1()).transaction(vu,"readwrite");await a.objectStore(vu).put(e,_1(s)),await a.done}catch(t){if(t instanceof _r)Oa.warn(t.message);else{const a=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Oa.warn(a.message)}}}function _1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=1024,J4=30;class Z4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new t5(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=lw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>J4){const d=n5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Oa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lw(),{heartbeatsToSend:a,unsentEntries:o}=e5(this._heartbeatsCache.heartbeats),u=qh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Oa.warn(t),""}}}function lw(){return new Date().toISOString().substring(0,10)}function e5(s,e=W4){const t=[];let a=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),ow(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ow(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class t5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BA()?HA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ow(s){return qh(JSON.stringify({version:2,heartbeats:s})).length}function n5(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(s){Ri(new Da("platform-logger",e=>new g4(e),"PRIVATE")),Ri(new Da("heartbeat",e=>new Z4(e),"PRIVATE")),Zs(vp,rw,s),Zs(vp,rw,"esm2020"),Zs("fire-js","")}s5("");var r5="firebase",a5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(r5,a5,"app");var cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,N1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,S){function A(){}A.prototype=S.prototype,E.F=S.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(O,I,V){for(var R=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)R[Ne-2]=arguments[Ne];return S.prototype[I].apply(O,R)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,S,A){A||(A=0);const O=Array(16);if(typeof S=="string")for(var I=0;I<16;++I)O[I]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(I=0;I<16;++I)O[I]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=E.g[0],A=E.g[1],I=E.g[2];let V=E.g[3],R;R=S+(V^A&(I^V))+O[0]+3614090360&4294967295,S=A+(R<<7&4294967295|R>>>25),R=V+(I^S&(A^I))+O[1]+3905402710&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(A^V&(S^A))+O[2]+606105819&4294967295,I=V+(R<<17&4294967295|R>>>15),R=A+(S^I&(V^S))+O[3]+3250441966&4294967295,A=I+(R<<22&4294967295|R>>>10),R=S+(V^A&(I^V))+O[4]+4118548399&4294967295,S=A+(R<<7&4294967295|R>>>25),R=V+(I^S&(A^I))+O[5]+1200080426&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(A^V&(S^A))+O[6]+2821735955&4294967295,I=V+(R<<17&4294967295|R>>>15),R=A+(S^I&(V^S))+O[7]+4249261313&4294967295,A=I+(R<<22&4294967295|R>>>10),R=S+(V^A&(I^V))+O[8]+1770035416&4294967295,S=A+(R<<7&4294967295|R>>>25),R=V+(I^S&(A^I))+O[9]+2336552879&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(A^V&(S^A))+O[10]+4294925233&4294967295,I=V+(R<<17&4294967295|R>>>15),R=A+(S^I&(V^S))+O[11]+2304563134&4294967295,A=I+(R<<22&4294967295|R>>>10),R=S+(V^A&(I^V))+O[12]+1804603682&4294967295,S=A+(R<<7&4294967295|R>>>25),R=V+(I^S&(A^I))+O[13]+4254626195&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(A^V&(S^A))+O[14]+2792965006&4294967295,I=V+(R<<17&4294967295|R>>>15),R=A+(S^I&(V^S))+O[15]+1236535329&4294967295,A=I+(R<<22&4294967295|R>>>10),R=S+(I^V&(A^I))+O[1]+4129170786&4294967295,S=A+(R<<5&4294967295|R>>>27),R=V+(A^I&(S^A))+O[6]+3225465664&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^A&(V^S))+O[11]+643717713&4294967295,I=V+(R<<14&4294967295|R>>>18),R=A+(V^S&(I^V))+O[0]+3921069994&4294967295,A=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(A^I))+O[5]+3593408605&4294967295,S=A+(R<<5&4294967295|R>>>27),R=V+(A^I&(S^A))+O[10]+38016083&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^A&(V^S))+O[15]+3634488961&4294967295,I=V+(R<<14&4294967295|R>>>18),R=A+(V^S&(I^V))+O[4]+3889429448&4294967295,A=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(A^I))+O[9]+568446438&4294967295,S=A+(R<<5&4294967295|R>>>27),R=V+(A^I&(S^A))+O[14]+3275163606&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^A&(V^S))+O[3]+4107603335&4294967295,I=V+(R<<14&4294967295|R>>>18),R=A+(V^S&(I^V))+O[8]+1163531501&4294967295,A=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(A^I))+O[13]+2850285829&4294967295,S=A+(R<<5&4294967295|R>>>27),R=V+(A^I&(S^A))+O[2]+4243563512&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^A&(V^S))+O[7]+1735328473&4294967295,I=V+(R<<14&4294967295|R>>>18),R=A+(V^S&(I^V))+O[12]+2368359562&4294967295,A=I+(R<<20&4294967295|R>>>12),R=S+(A^I^V)+O[5]+4294588738&4294967295,S=A+(R<<4&4294967295|R>>>28),R=V+(S^A^I)+O[8]+2272392833&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^A)+O[11]+1839030562&4294967295,I=V+(R<<16&4294967295|R>>>16),R=A+(I^V^S)+O[14]+4259657740&4294967295,A=I+(R<<23&4294967295|R>>>9),R=S+(A^I^V)+O[1]+2763975236&4294967295,S=A+(R<<4&4294967295|R>>>28),R=V+(S^A^I)+O[4]+1272893353&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^A)+O[7]+4139469664&4294967295,I=V+(R<<16&4294967295|R>>>16),R=A+(I^V^S)+O[10]+3200236656&4294967295,A=I+(R<<23&4294967295|R>>>9),R=S+(A^I^V)+O[13]+681279174&4294967295,S=A+(R<<4&4294967295|R>>>28),R=V+(S^A^I)+O[0]+3936430074&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^A)+O[3]+3572445317&4294967295,I=V+(R<<16&4294967295|R>>>16),R=A+(I^V^S)+O[6]+76029189&4294967295,A=I+(R<<23&4294967295|R>>>9),R=S+(A^I^V)+O[9]+3654602809&4294967295,S=A+(R<<4&4294967295|R>>>28),R=V+(S^A^I)+O[12]+3873151461&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^A)+O[15]+530742520&4294967295,I=V+(R<<16&4294967295|R>>>16),R=A+(I^V^S)+O[2]+3299628645&4294967295,A=I+(R<<23&4294967295|R>>>9),R=S+(I^(A|~V))+O[0]+4096336452&4294967295,S=A+(R<<6&4294967295|R>>>26),R=V+(A^(S|~I))+O[7]+1126891415&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~A))+O[14]+2878612391&4294967295,I=V+(R<<15&4294967295|R>>>17),R=A+(V^(I|~S))+O[5]+4237533241&4294967295,A=I+(R<<21&4294967295|R>>>11),R=S+(I^(A|~V))+O[12]+1700485571&4294967295,S=A+(R<<6&4294967295|R>>>26),R=V+(A^(S|~I))+O[3]+2399980690&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~A))+O[10]+4293915773&4294967295,I=V+(R<<15&4294967295|R>>>17),R=A+(V^(I|~S))+O[1]+2240044497&4294967295,A=I+(R<<21&4294967295|R>>>11),R=S+(I^(A|~V))+O[8]+1873313359&4294967295,S=A+(R<<6&4294967295|R>>>26),R=V+(A^(S|~I))+O[15]+4264355552&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~A))+O[6]+2734768916&4294967295,I=V+(R<<15&4294967295|R>>>17),R=A+(V^(I|~S))+O[13]+1309151649&4294967295,A=I+(R<<21&4294967295|R>>>11),R=S+(I^(A|~V))+O[4]+4149444226&4294967295,S=A+(R<<6&4294967295|R>>>26),R=V+(A^(S|~I))+O[11]+3174756917&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~A))+O[2]+718787259&4294967295,I=V+(R<<15&4294967295|R>>>17),R=A+(V^(I|~S))+O[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+V&4294967295}a.prototype.v=function(E,S){S===void 0&&(S=E.length);const A=S-this.blockSize,O=this.C;let I=this.h,V=0;for(;V<S;){if(I==0)for(;V<=A;)o(this,E,V),V+=this.blockSize;if(typeof E=="string"){for(;V<S;)if(O[I++]=E.charCodeAt(V++),I==this.blockSize){o(this,O),I=0;break}}else for(;V<S;)if(O[I++]=E[V++],I==this.blockSize){o(this,O),I=0;break}}this.h=I,this.o+=S},a.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;S=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=S&255,S/=256;for(this.v(E),E=Array(16),S=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)E[S++]=this.g[A]>>>O&255;return E};function u(E,S){var A=g;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=S(E)}function d(E,S){this.h=S;const A=[];let O=!0;for(let I=E.length-1;I>=0;I--){const V=E[I]|0;O&&V==S||(A[I]=V,O=!1)}this.g=A}var g={};function x(E){return-128<=E&&E<128?u(E,function(S){return new d([S|0],S<0?-1:0)}):new d([E|0],E<0?-1:0)}function p(E){if(isNaN(E)||!isFinite(E))return w;if(E<0)return z(p(-E));const S=[];let A=1;for(let O=0;E>=A;O++)S[O]=E/A|0,A*=4294967296;return new d(S,0)}function b(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return z(b(E.substring(1),S));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(S,8));let O=w;for(let V=0;V<E.length;V+=8){var I=Math.min(8,E.length-V);const R=parseInt(E.substring(V,V+I),S);I<8?(I=p(Math.pow(S,I)),O=O.j(I).add(p(R))):(O=O.j(A),O=O.add(p(R)))}return O}var w=x(0),N=x(1),k=x(16777216);s=d.prototype,s.m=function(){if($(this))return-z(this).m();let E=0,S=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);E+=(O>=0?O:4294967296+O)*S,S*=4294967296}return E},s.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M(this))return"0";if($(this))return"-"+z(this).toString(E);const S=p(Math.pow(E,6));var A=this;let O="";for(;;){const I=H(A,S).g;A=Y(A,I.j(S));let V=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=I,M(A))return V+O;for(;V.length<6;)V="0"+V;O=V+O}},s.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function M(E){if(E.h!=0)return!1;for(let S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function $(E){return E.h==-1}s.l=function(E){return E=Y(this,E),$(E)?-1:M(E)?0:1};function z(E){const S=E.g.length,A=[];for(let O=0;O<S;O++)A[O]=~E.g[O];return new d(A,~E.h).add(N)}s.abs=function(){return $(this)?z(this):this},s.add=function(E){const S=Math.max(this.g.length,E.g.length),A=[];let O=0;for(let I=0;I<=S;I++){let V=O+(this.i(I)&65535)+(E.i(I)&65535),R=(V>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);O=R>>>16,V&=65535,R&=65535,A[I]=R<<16|V}return new d(A,A[A.length-1]&-2147483648?-1:0)};function Y(E,S){return E.add(z(S))}s.j=function(E){if(M(this)||M(E))return w;if($(this))return $(E)?z(this).j(z(E)):z(z(this).j(E));if($(E))return z(this.j(z(E)));if(this.l(k)<0&&E.l(k)<0)return p(this.m()*E.m());const S=this.g.length+E.g.length,A=[];for(var O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let I=0;I<E.g.length;I++){const V=this.i(O)>>>16,R=this.i(O)&65535,Ne=E.i(I)>>>16,je=E.i(I)&65535;A[2*O+2*I]+=R*je,ae(A,2*O+2*I),A[2*O+2*I+1]+=V*je,ae(A,2*O+2*I+1),A[2*O+2*I+1]+=R*Ne,ae(A,2*O+2*I+1),A[2*O+2*I+2]+=V*Ne,ae(A,2*O+2*I+2)}for(E=0;E<S;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=S;E<2*S;E++)A[E]=0;return new d(A,0)};function ae(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function K(E,S){this.g=E,this.h=S}function H(E,S){if(M(S))throw Error("division by zero");if(M(E))return new K(w,w);if($(E))return S=H(z(E),S),new K(z(S.g),z(S.h));if($(S))return S=H(E,z(S)),new K(z(S.g),S.h);if(E.g.length>30){if($(E)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var A=N,O=S;O.l(E)<=0;)A=de(A),O=de(O);var I=ve(A,1),V=ve(O,1);for(O=ve(O,2),A=ve(A,2);!M(O);){var R=V.add(O);R.l(E)<=0&&(I=I.add(A),V=R),O=ve(O,1),A=ve(A,1)}return S=Y(E,I.j(S)),new K(I,S)}for(I=w;E.l(S)>=0;){for(A=Math.max(1,Math.floor(E.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),V=p(A),R=V.j(S);$(R)||R.l(E)>0;)A-=O,V=p(A),R=V.j(S);M(V)&&(V=N),I=I.add(V),E=Y(E,R)}return new K(I,E)}s.B=function(E){return H(this,E).h},s.and=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)&E.i(O);return new d(A,this.h&E.h)},s.or=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)|E.i(O);return new d(A,this.h|E.h)},s.xor=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)^E.i(O);return new d(A,this.h^E.h)};function de(E){const S=E.g.length+1,A=[];for(let O=0;O<S;O++)A[O]=E.i(O)<<1|E.i(O-1)>>>31;return new d(A,E.h)}function ve(E,S){const A=S>>5;S%=32;const O=E.g.length-A,I=[];for(let V=0;V<O;V++)I[V]=S>0?E.i(V+A)>>>S|E.i(V+A+1)<<32-S:E.i(V+A);return new d(I,E.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,N1=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=b,Si=d}).apply(typeof cw<"u"?cw:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j1,au,T1,Rh,jp,E1,S1,C1;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=t(this);function o(h,y){if(y)e:{var _=a;h=h.split(".");for(var C=0;C<h.length-1;C++){var W=h[C];if(!(W in _))break e;_=_[W]}h=h[h.length-1],C=_[h],y=y(C),y!=C&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var _=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.push([C,y[C]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function x(h,y,_){return h.call.apply(h.bind,arguments)}function p(h,y,_){return p=x,p.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(C,W,re){for(var Se=Array(arguments.length-2),et=2;et<arguments.length;et++)Se[et-2]=arguments[et];return y.prototype[W].apply(C,Se)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const y=h.length;if(y>0){const _=Array(y);for(let C=0;C<y;C++)_[C]=h[C];return _}return[]}function M(h,y){for(let C=1;C<arguments.length;C++){const W=arguments[C];var _=typeof W;if(_=_!="object"?_:W?Array.isArray(W)?"array":_:"null",_=="array"||_=="object"&&typeof W.length=="number"){_=h.length||0;const re=W.length||0;h.length=_+re;for(let Se=0;Se<re;Se++)h[_+Se]=W[Se]}else h.push(W)}}class ${constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){d.setTimeout(()=>{throw h},0)}function Y(){var h=E;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,_){const C=K.get();C.set(y,_),this.h?this.h.next=C:this.g=C,this.h=C}}var K=new $(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ve=!1,E=new ae,S=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(A)}};function A(){for(var h;h=Y();){try{h.h.call(h.g)}catch(_){z(_)}var y=K;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ve=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,y){I.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(Ne,I),Ne.prototype.init=function(h,y){const _=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),ee=0;function se(h,y,_,C,W){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!C,this.ha=W,this.key=++ee,this.da=this.fa=!1}function Ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Le(h,y,_){for(const C in h)y.call(_,h[C],C,h)}function ze(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function P(h){const y={};for(const _ in h)y[_]=h[_];return y}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(h,y){let _,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(_ in C)h[_]=C[_];for(let re=0;re<le.length;re++)_=le[re],Object.prototype.hasOwnProperty.call(C,_)&&(h[_]=C[_])}}function xe(h){this.src=h,this.g={},this.h=0}xe.prototype.add=function(h,y,_,C,W){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Se=we(h,y,C,W);return Se>-1?(y=h[Se],_||(y.fa=!1)):(y=new se(y,this.src,re,!!C,W),y.fa=_,h.push(y)),y};function Q(h,y){const _=y.type;if(_ in h.g){var C=h.g[_],W=Array.prototype.indexOf.call(C,y,void 0),re;(re=W>=0)&&Array.prototype.splice.call(C,W,1),re&&(Ce(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function we(h,y,_,C){for(let W=0;W<h.length;++W){const re=h[W];if(!re.da&&re.listener==y&&re.capture==!!_&&re.ha==C)return W}return-1}var D="closure_lm_"+(Math.random()*1e6|0),U={};function q(h,y,_,C,W){if(Array.isArray(y)){for(let re=0;re<y.length;re++)q(h,y[re],_,C,W);return null}return _=Lt(_),h&&h[je]?h.J(y,_,g(C)?!!C.capture:!1,W):Ee(h,y,_,!1,C,W)}function Ee(h,y,_,C,W,re){if(!y)throw Error("Invalid event type");const Se=g(W)?!!W.capture:!!W;let et=gt(h);if(et||(h[D]=et=new xe(h)),_=et.add(y,_,C,Se,re),_.proxy)return _;if(C=he(),_.proxy=C,C.src=h,C.listener=_,h.addEventListener)V||(W=Se),W===void 0&&(W=!1),h.addEventListener(y.toString(),C,W);else if(h.attachEvent)h.attachEvent(st(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function he(){function h(_){return y.call(h.src,h.listener,_)}const y=Xe;return h}function Ie(h,y,_,C,W){if(Array.isArray(y))for(var re=0;re<y.length;re++)Ie(h,y[re],_,C,W);else C=g(C)?!!C.capture:!!C,_=Lt(_),h&&h[je]?(h=h.i,re=String(y).toString(),re in h.g&&(y=h.g[re],_=we(y,_,C,W),_>-1&&(Ce(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[re],h.h--)))):h&&(h=gt(h))&&(y=h.g[y.toString()],h=-1,y&&(h=we(y,_,C,W)),(_=h>-1?y[h]:null)&&He(_))}function He(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[je])Q(y.i,h);else{var _=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(_,C,h.capture):y.detachEvent?y.detachEvent(st(_),C):y.addListener&&y.removeListener&&y.removeListener(C),(_=gt(y))?(Q(_,h),_.h==0&&(_.src=null,y[D]=null)):Ce(h)}}}function st(h){return h in U?U[h]:U[h]="on"+h}function Xe(h,y){if(h.da)h=!0;else{y=new Ne(y,this);const _=h.listener,C=h.ha||h.src;h.fa&&He(h),h=_.call(C,y)}return h}function gt(h){return h=h[D],h instanceof xe?h:null}var pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lt(h){return typeof h=="function"?h:(h[pt]||(h[pt]=function(y){return h.handleEvent(y)}),h[pt])}function Tt(){O.call(this),this.i=new xe(this),this.M=this,this.G=null}w(Tt,O),Tt.prototype[je]=!0,Tt.prototype.removeEventListener=function(h,y,_,C){Ie(this,h,y,_,C)};function zt(h,y){var _,C=h.G;if(C)for(_=[];C;C=C.G)_.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new I(y,h);else if(y instanceof I)y.target=y.target||h;else{var W=y;y=new I(C,h),be(y,W)}W=!0;let re,Se;if(_)for(Se=_.length-1;Se>=0;Se--)re=y.g=_[Se],W=bs(re,C,!0,y)&&W;if(re=y.g=h,W=bs(re,C,!0,y)&&W,W=bs(re,C,!1,y)&&W,_)for(Se=0;Se<_.length;Se++)re=y.g=_[Se],W=bs(re,C,!1,y)&&W}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let C=0;C<_.length;C++)Ce(_[C]);delete h.g[y],h.h--}}this.G=null},Tt.prototype.J=function(h,y,_,C){return this.i.add(String(h),y,!1,_,C)},Tt.prototype.K=function(h,y,_,C){return this.i.add(String(h),y,!0,_,C)};function bs(h,y,_,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let W=!0;for(let re=0;re<y.length;++re){const Se=y[re];if(Se&&!Se.da&&Se.capture==_){const et=Se.listener,cn=Se.ha||Se.src;Se.fa&&Q(h.i,Se),W=et.call(cn,C)!==!1&&W}}return W&&!C.defaultPrevented}function ar(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Dn(h){h.g=ar(()=>{h.g=null,h.i&&(h.i=!1,Dn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Bt extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Dn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(h){O.call(this),this.h=h,this.g={}}w(vs,O);var ws=[];function Us(h){Le(h.g,function(y,_){this.g.hasOwnProperty(_)&&He(y)},h),h.g={}}vs.prototype.N=function(){vs.Z.N.call(this),Us(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=d.JSON.stringify,mt=d.JSON.parse,Ye=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Et(){}function en(){}var It={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){I.call(this,"d")}w(bt,I);function Xt(){I.call(this,"c")}w(Xt,I);var vt={},ln=null;function as(){return ln=ln||new Tt}vt.Ia="serverreachability";function _s(h){I.call(this,vt.Ia,h)}w(_s,I);function Nn(h){const y=as();zt(y,new _s(y))}vt.STAT_EVENT="statevent";function Ns(h,y){I.call(this,vt.STAT_EVENT,h),this.stat=y}w(Ns,I);function St(h){const y=as();zt(y,new Ns(y,h))}vt.Ja="timingevent";function Fn(h,y){I.call(this,vt.Ja,h),this.size=y}w(Fn,I);function is(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Fi(h,y,_,C,W,re){h.info(function(){if(h.g)if(re){var Se="",et=re.split("&");for(let wt=0;wt<et.length;wt++){var cn=et[wt].split("=");if(cn.length>1){const Gt=cn[0];cn=cn[1];const Fs=Gt.split("_");Se=Fs.length>=2&&Fs[1]=="type"?Se+(Gt+"="+cn+"&"):Se+(Gt+"=redacted&")}}}else Se=null;else Se=re;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+y+`
`+_+`
`+Se})}function Ba(h,y,_,C,W,re,Se){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+y+`
`+_+`
`+re+" "+Se})}function qn(h,y,_,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+fe(h,_)+(C?" "+C:"")})}function te(h,y){h.info(function(){return"TIMEOUT: "+y})}Wn.prototype.info=function(){};function fe(h,y){if(!h.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var _=re[h];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var W=C[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Se=1;Se<C.length;Se++)C[Se]=""}}}}return Hn(re)}catch{return y}}var _e={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},B={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},X;function pe(){}w(pe,Et),pe.prototype.g=function(){return new XMLHttpRequest},X=new pe;function ye(h){return encodeURIComponent(String(h))}function Me(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Oe(h,y,_,C){this.j=h,this.i=y,this.l=_,this.S=C||1,this.V=new vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var Ze={},rt={};function $t(h,y,_){h.M=1,h.A=qi(mn(y)),h.u=_,h.R=!0,on(h,null)}function on(h,y){h.F=Date.now(),Cn(h),h.B=mn(h.A);var _=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Vl(_.i,"t",C),h.C=0,_=h.j.L,h.h=new qe,h.g=dd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Bt(p(h.Y,h,h.g),h.P)),y=h.V,_=h.g,C=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(ws[0]=W.toString()),W=ws);for(let re=0;re<W.length;re++){const Se=q(_,W[re],C||y.handleEvent,!1,y.h||y);if(!Se)break;y.g[Se.key]=Se}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Nn(),Fi(h.i,h.v,h.B,h.l,h.S,h.u)}Oe.prototype.ba=function(h){h=h.target;const y=this.O;y&&or(h)==3?y.j():this.Y(h)},Oe.prototype.Y=function(h){try{if(h==this.g)e:{const et=or(this.g),cn=this.g.ya(),wt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||et!=4||cn==7||(cn==8||wt<=0?Nn(3):Nn(2)),jr(this);var y=this.g.ca();this.X=y;var _=Kt(this);if(this.o=y==200,Ba(this.i,this.v,this.B,this.l,this.S,et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,W=this.g;if((C=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(C)){var re=C;break t}}re=null}if(h=re)qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tr(this,h);else{this.o=!1,this.m=3,St(12),js(this),zs(this);break e}}if(this.R){h=!0;let Gt;for(;!this.K&&this.C<_.length;)if(Gt=ta(this,_),Gt==rt){et==4&&(this.m=4,St(14),h=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Ze){this.m=4,St(15),qn(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else qn(this.i,this.l,Gt,null),Tr(this,Gt);if(Jn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||_.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)qn(this.i,this.l,_,"[Invalid Chunked Response]"),js(this),zs(this);else if(_.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),pc(Se),Se.P=!0,St(11))}}else qn(this.i,this.l,_,null),Tr(this,_);et==4&&js(this),this.o&&!this.K&&(et==4?ld(this.j,this):(this.o=!1,Cn(this)))}else sa(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),js(this),zs(this)}}}catch{}finally{}};function Kt(h){if(!Jn(h))return h.g.la();const y=On(h.g);if(y==="")return"";let _="";const C=y.length,W=or(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return js(h),zs(h),"";h.h.i=new d.TextDecoder}for(let re=0;re<C;re++)h.h.h=!0,_+=h.h.i.decode(y[re],{stream:!(W&&re==C-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Jn(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ta(h,y){var _=h.C,C=y.indexOf(`
`,_);return C==-1?rt:(_=Number(y.substring(_,C)),isNaN(_)?Ze:(C+=1,C+_>y.length?rt:(y=y.slice(C,C+_),h.C=C+_,y)))}Oe.prototype.cancel=function(){this.K=!0,js(this)};function Cn(h){h.T=Date.now()+h.H,Dl(h,h.H)}function Dl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=is(p(h.aa,h),y)}function jr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Oe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(te(this.i,this.B),this.M!=2&&(Nn(),St(17)),js(this),this.m=2,zs(this)):Dl(this,this.T-h)};function zs(h){h.j.I==0||h.K||ld(h.j,h)}function js(h){jr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Us(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Tr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||Sr(_.h,h))){if(!h.L&&Sr(_.h,h)&&_.I==3){try{var C=_.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Bl(_),Qa(_);else break e;Wi(_),St(18)}}else _.xa=W[1],0<_.xa-_.K&&W[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=is(p(_.Va,_),6e3));Er(_.h)<=1&&_.ta&&(_.ta=void 0)}else Dr(_,11)}else if((h.L||_.g==h)&&Bl(_),!R(y))for(W=_.Ba.g.parse(y),y=0;y<W.length;y++){let wt=W[y];const Gt=wt[0];if(!(Gt<=_.K))if(_.K=Gt,wt=wt[1],_.I==2)if(wt[0]=="c"){_.M=wt[1],_.ba=wt[2];const Fs=wt[3];Fs!=null&&(_.ka=Fs,_.j.info("VER="+_.ka));const Or=wt[4];Or!=null&&(_.za=Or,_.j.info("SVER="+_.za));const cr=wt[5];cr!=null&&typeof cr=="number"&&cr>0&&(C=1.5*cr,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const ur=h.g;if(ur){const Ji=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var re=C.h;re.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(rc(re,re.h),re.h=null))}if(C.G){const Hl=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(C.wa=Hl,Ct(C.J,C.G,Hl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var Se=h;if(C.na=ud(C,C.L?C.ba:null,C.W),Se.L){ac(C.h,Se);var et=Se,cn=C.O;cn&&(et.H=cn),et.D&&(jr(et),Cn(et)),C.g=Se}else ad(C);_.i.length>0&&Ir(_)}else wt[0]!="stop"&&wt[0]!="close"||Dr(_,7);else _.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Dr(_,7):mc(_):wt[0]!="noop"&&_.l&&_.l.qa(wt),_.A=0)}}Nn(4)}catch{}}var fn=class{constructor(h,y){this.g=h,this.map=y}};function nc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Er(h){return h.h?1:h.g?h.g.size:0}function Sr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function rc(h,y){h.g?h.g.add(y):h.h=y}function ac(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}nc.prototype.cancel=function(){if(this.i=ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ic(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return k(h.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const C=h[_].indexOf("=");let W,re=null;C>=0?(W=h[_].substring(0,C),re=h[_].substring(C+1)):W=h[_],y(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Ts(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Ts?(this.l=h.l,An(this,h.j),this.o=h.o,this.g=h.g,Ha(this,h.u),this.h=h.h,lc(this,sd(h.i)),this.m=h.m):h&&(y=String(h).match(Zu))?(this.l=!1,An(this,y[1]||"",!0),this.o=Cr(y[2]||""),this.g=Cr(y[3]||"",!0),Ha(this,y[4]),this.h=Cr(y[5]||"",!0),lc(this,y[6]||"",!0),this.m=Cr(y[7]||"")):(this.l=!1,this.i=new qa(null,this.l))}Ts.prototype.toString=function(){const h=[];var y=this.j;y&&h.push($i(y,Ml,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push($i(y,Ml,!0),"@"),h.push(ye(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push($i(_,_.charAt(0)=="/"?oc:ed,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",$i(_,td)),h.join("")},Ts.prototype.resolve=function(h){const y=mn(this);let _=!!h.j;_?An(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var C=h.h;if(_)Ha(y,h.u);else if(_=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var W=y.h.lastIndexOf("/");W!=-1&&(C=y.h.slice(0,W+1)+C)}if(W=C,W==".."||W==".")C="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){C=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let Se=0;Se<W.length;){const et=W[Se++];et=="."?C&&Se==W.length&&re.push(""):et==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),C&&Se==W.length&&re.push("")):(re.push(et),C=!0)}C=re.join("/")}else C=W}return _?y.h=C:_=h.i.toString()!=="",_?lc(y,sd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function mn(h){return new Ts(h)}function An(h,y,_){h.j=_?Cr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ha(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function lc(h,y,_){y instanceof qa?(h.i=y,Ll(h.i,h.l)):(_||(y=$i(y,Fa)),h.i=new qa(y,h.l))}function Ct(h,y,_){h.i.set(y,_)}function qi(h){return Ct(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Cr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $i(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,ls),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ls(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ml=/[#\/\?@]/g,ed=/[#\?:]/g,oc=/[#\?]/g,Fa=/[#\?@]/g,td=/#/g;function qa(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function os(h){h.g||(h.g=new Map,h.h=0,h.i&&Ol(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=qa.prototype,s.add=function(h,y){os(this),this.i=null,h=$a(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function nd(h,y){os(h),y=$a(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function cc(h,y){return os(h),y=$a(h,y),h.g.has(y)}s.forEach=function(h,y){os(this),this.g.forEach(function(_,C){_.forEach(function(W){h.call(y,W,C,this)},this)},this)};function uc(h,y){os(h);let _=[];if(typeof y=="string")cc(h,y)&&(_=_.concat(h.g.get($a(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}s.set=function(h,y){return os(this),this.i=null,h=$a(this,h),cc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=uc(this,h),h.length>0?String(h[0]):y):y};function Vl(h,y,_){nd(h,y),_.length>0&&(h.i=null,h.g.set($a(h,y),k(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var _=y[C];const W=ye(_);_=uc(this,_);for(let re=0;re<_.length;re++){let Se=W;_[re]!==""&&(Se+="="+ye(_[re])),h.push(Se)}}return this.i=h.join("&")};function sd(h){const y=new qa;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function $a(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ll(h,y){y&&!h.j&&(os(h),h.i=null,h.g.forEach(function(_,C){const W=C.toLowerCase();C!=W&&(nd(this,C),Vl(this,W,_))},h)),h.j=y}function ir(h,y){const _=new Wn;if(d.Image){const C=new Image;C.onload=b(Bs,_,"TestLoadImage: loaded",!0,y,C),C.onerror=b(Bs,_,"TestLoadImage: error",!1,y,C),C.onabort=b(Bs,_,"TestLoadImage: abort",!1,y,C),C.ontimeout=b(Bs,_,"TestLoadImage: timeout",!1,y,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function dc(h,y){const _=new Wn,C=new AbortController,W=setTimeout(()=>{C.abort(),Bs(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(re=>{clearTimeout(W),re.ok?Bs(_,"TestPingServer: ok",!0,y):Bs(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Bs(_,"TestPingServer: error",!1,y)})}function Bs(h,y,_,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(_)}catch{}}function Ka(){this.g=new Ye}function Ar(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Ar,Et),Ar.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(h,y){Tt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ki,Tt),s=Ki.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,lr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ga(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,lr(this)),this.g&&(this.readyState=3,lr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ga(this):lr(this),this.readyState==3&&Pl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ga(this))},s.Na=function(h){this.g&&(this.response=h,Ga(this))},s.ga=function(){this.g&&Ga(this)};function Ga(h){h.readyState=4,h.l=null,h.j=null,h.B=null,lr(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function lr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hs(h){let y="";return Le(h,function(_,C){y+=C,y+=":",y+=_,y+=`\r
`}),y}function Gi(h,y,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Hs(_),typeof h=="string"?_!=null&&ye(_):Ct(h,y,_))}function Dt(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Dt,Tt);var Rr=/^https?$/i,hc=["POST","PUT"];s=Dt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():X.g(),this.g.onreadystatechange=N(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(re){Yi(this,re);return}if(h=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)_.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const re of C.keys())_.set(re,C.get(re));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(re=>re.toLowerCase()=="content-type"),W=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(hc,y,void 0)>=0)||C||W||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Se]of _)this.g.setRequestHeader(re,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Yi(this,re)}};function Yi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,fc(h),na(h)}function fc(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,zt(this,"complete"),zt(this,"abort"),na(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),Dt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Qi(this):this.Xa())},s.Xa=function(){Qi(this)};function Qi(h){if(h.h&&typeof u<"u"){if(h.v&&or(h)==4)setTimeout(h.Ca.bind(h),0);else if(zt(h,"readystatechange"),or(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var C;if(C=re===0){let Se=String(h.D).match(Zu)[1]||null;!Se&&d.self&&d.self.location&&(Se=d.self.location.protocol.slice(0,-1)),C=!Rr.test(Se?Se.toLowerCase():"")}_=C}if(_)zt(h,"complete"),zt(h,"success");else{h.o=6;try{var W=or(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",fc(h)}}finally{na(h)}}}}function na(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||zt(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}s.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),mt(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(h){const y={};h=(h.g&&or(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(R(h[C]))continue;var _=Me(h[C]);const W=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const re=y[W]||[];y[W]=re,re.push(_)}ze(y,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Ya(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kr("baseRetryDelayMs",5e3,h),this.Za=kr("retryDelaySeedMs",1e4,h),this.Ta=kr("forwardChannelMaxRetries",2,h),this.va=kr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new nc(h&&h.concurrentRequestLimit),this.Ba=new Ka,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ya.prototype,s.ka=8,s.I=1,s.connect=function(h,y,_,C){St(0),this.W=h,this.H=y||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=ud(this,null,this.W),Ir(this)};function mc(h){if(Ul(h),h.I==3){var y=h.V++,_=mn(h.J);if(Ct(_,"SID",h.M),Ct(_,"RID",y),Ct(_,"TYPE","terminate"),Xi(h,_),y=new Oe(h,h.j,y),y.M=2,y.A=qi(mn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=dd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Cn(y)}cd(h)}function Qa(h){h.g&&(pc(h),h.g.cancel(),h.g=null)}function Ul(h){Qa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Bl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ir(h){if(!sc(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||S(),ve||(de(),ve=!0),E.add(y,h),h.D=0}}function zl(h,y){return Er(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=is(p(h.Ea,h,y),od(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new Oe(this,this.j,h);let re=this.o;if(this.U&&(re?(re=P(re),be(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=rd(this,W,y),_=mn(this.J),Ct(_,"RID",h),Ct(_,"CVER",22),this.G&&Ct(_,"X-HTTP-Session-Id",this.G),Xi(this,_),re&&(this.R?y="headers="+ye(Hs(re))+"&"+y:this.u&&Gi(_,this.u,re)),rc(this.h,W),this.Ra&&Ct(_,"TYPE","init"),this.S?(Ct(_,"$req",y),Ct(_,"SID","null"),W.U=!0,$t(W,_,null)):$t(W,_,y),this.I=2}}else this.I==3&&(h?gc(this,h):this.i.length==0||sc(this.h)||gc(this))};function gc(h,y){var _;y?_=y.l:_=h.V++;const C=mn(h.J);Ct(C,"SID",h.M),Ct(C,"RID",_),Ct(C,"AID",h.K),Xi(h,C),h.u&&h.o&&Gi(C,h.u,h.o),_=new Oe(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=rd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),rc(h.h,_),$t(_,C,y)}function Xi(h,y){h.H&&Le(h.H,function(_,C){Ct(y,C,_)}),h.l&&Le({},function(_,C){Ct(y,C,_)})}function rd(h,y,_){_=Math.min(h.i.length,_);const C=h.l?p(h.l.Ka,h.l,h):null;e:{var W=h.i;let et=-1;for(;;){const cn=["count="+_];et==-1?_>0?(et=W[0].g,cn.push("ofs="+et)):et=0:cn.push("ofs="+et);let wt=!0;for(let Gt=0;Gt<_;Gt++){var re=W[Gt].g;const Fs=W[Gt].map;if(re-=et,re<0)et=Math.max(0,W[Gt].g-100),wt=!1;else try{re="req"+re+"_"||"";try{var Se=Fs instanceof Map?Fs:Object.entries(Fs);for(const[Or,cr]of Se){let ur=cr;g(cr)&&(ur=Hn(cr)),cn.push(re+Or+"="+encodeURIComponent(ur))}}catch(Or){throw cn.push(re+"type="+encodeURIComponent("_badmap")),Or}}catch{C&&C(Fs)}}if(wt){Se=cn.join("&");break e}}Se=void 0}return h=h.i.splice(0,_),y.G=h,Se}function ad(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||S(),ve||(de(),ve=!0),E.add(y,h),h.A=0}}function Wi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=is(p(h.Da,h),od(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,id(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=is(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Qa(this),id(this))};function pc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function id(h){h.g=new Oe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=mn(h.na);Ct(y,"RID","rpc"),Ct(y,"SID",h.M),Ct(y,"AID",h.K),Ct(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ct(y,"TO",h.ia),Ct(y,"TYPE","xmlhttp"),Xi(h,y),h.u&&h.o&&Gi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=qi(mn(y)),_.u=null,_.R=!0,on(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Qa(this),Wi(this),St(19))};function Bl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ld(h,y){var _=null;if(h.g==y){Bl(h),pc(h),h.g=null;var C=2}else if(Sr(h.h,y))_=y.G,ac(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var W=h.D;C=as(),zt(C,new Fn(C,_)),Ir(h)}else ad(h);else if(W=y.m,W==3||W==0&&y.X>0||!(C==1&&zl(h,y)||C==2&&Wi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),W){case 1:Dr(h,5);break;case 4:Dr(h,10);break;case 3:Dr(h,6);break;default:Dr(h,2)}}}function od(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Dr(h,y){if(h.j.info("Error code "+y),y==2){var _=p(h.bb,h),C=h.Ua;const W=!C;C=new Ts(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||An(C,"https"),qi(C),W?ir(C.toString(),_):dc(C.toString(),_)}else St(2);h.I=0,h.l&&h.l.pa(y),cd(h),Ul(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function cd(h){if(h.I=0,h.ja=[],h.l){const y=ic(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function ud(h,y,_){var C=_ instanceof Ts?mn(_):new Ts(_);if(C.g!="")y&&(C.g=y+"."+C.g),Ha(C,C.u);else{var W=d.location;C=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;const re=new Ts(null);C&&An(re,C),y&&(re.g=y),W&&Ha(re,W),_&&(re.h=_),C=re}return _=h.G,y=h.wa,_&&y&&Ct(C,_,y),Ct(C,"VER",h.ka),Xi(h,C),C}function dd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Dt(new Ar({ab:_})):new Dt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function hd(){}s=hd.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Xa(){}Xa.prototype.g=function(h,y){return new Zn(h,y)};function Zn(h,y){Tt.call(this),this.g=new Ya(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ra(this)}w(Zn,Tt),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){mc(this.g)},Zn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Hn(h),h=_);y.i.push(new fn(y.Ya++,h)),y.I==3&&Ir(y)},Zn.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,Zn.Z.N.call(this)};function fd(h){bt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(fd,bt);function md(){Xt.call(this),this.status=1}w(md,Xt);function ra(h){this.g=h}w(ra,hd),ra.prototype.ra=function(){zt(this.g,"a")},ra.prototype.qa=function(h){zt(this.g,new fd(h))},ra.prototype.pa=function(h){zt(this.g,new md)},ra.prototype.oa=function(){zt(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,C1=function(){return new Xa},S1=function(){return as()},E1=vt,jp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,Rh=_e,B.COMPLETE="complete",T1=B,en.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,au=en,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,j1=Dt}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const uw="@firebase/firestore",dw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new l0("@firebase/firestore");function wo(){return vl.logLevel}function ke(s,...e){if(vl.logLevel<=ct.DEBUG){const t=e.map(u0);vl.debug(`Firestore (${Qo}): ${s}`,...t)}}function Ma(s,...e){if(vl.logLevel<=ct.ERROR){const t=e.map(u0);vl.error(`Firestore (${Qo}): ${s}`,...t)}}function Lo(s,...e){if(vl.logLevel<=ct.WARN){const t=e.map(u0);vl.warn(`Firestore (${Qo}): ${s}`,...t)}}function u0(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,A1(s,a,t)}function A1(s,e,t){let a=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Ma(a),new Error(a)}function Nt(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||A1(e,o,a)}function Je(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends _r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gn.UNAUTHENTICATED)))}shutdown(){}}class l5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class o5{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Nt(this.o===void 0,42304);let a=this.i;const o=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let u=new Ra;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ra,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},g=x=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((x=>g(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?g(x):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ra)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Nt(typeof a.accessToken=="string",31837,{l:a}),new R1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class c5{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u5{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new c5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Nt(this.o===void 0,3512);const a=u=>{u.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=h5(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<t&&(a+=e.charAt(o[u]%62))}return a}}function ut(s,e){return s<e?-1:s>e?1:0}function Tp(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return ep(o)===ep(u)?ut(o,u):ep(o)?1:-1}return ut(s.length,e.length)}const f5=55296,m5=57343;function ep(s){const e=s.charCodeAt(0);return e>=f5&&e<=m5}function Po(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="__name__";class zr{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ke(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ke(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const u=zr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return ut(e.length,t.length)}static compareSegments(e,t){const a=zr.isNumericId(e),o=zr.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?zr.extractNumericId(e).compare(zr.extractNumericId(t)):Tp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class Ut extends zr{construct(e,t,a){return new Ut(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new Ut(t)}static emptyPath(){return new Ut([])}}const g5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends zr{construct(e,t,a){return new zn(e,t,a)}static isValidIdentifier(e){return g5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fw}static keyField(){return new zn([fw])}static fromServerFormat(e){const t=[];let a="",o=0;const u=()=>{if(a.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(u(),o++)}if(u(),d)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Ut.fromString(e))}static fromName(e){return new Ue(Ut.fromString(e).popFirst(5))}static empty(){return new Ue(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(s,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function p5(s,e,t,a){if(e===!0&&a===!0)throw new Ae(ue.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function mw(s){if(!Ue.isDocumentKey(s))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function gw(s){if(Ue.isDocumentKey(s))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function I1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function bf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ke(12329,{type:typeof s})}function ss(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bf(s);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(s,e){const t={typeString:s};return e&&(t.value=e),t}function Lu(s,e){if(!I1(s))throw new Ae(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${a}' field to equal '${u.value}'`;break}}if(t)throw new Ae(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=-62135596800,xw=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*xw);return new qt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pw)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xw}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:_n("string",qt._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new qt(0,0))}static max(){return new Qe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function x5(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Qe.fromTimestamp(a===1e9?new qt(t+1,0):new qt(t,a));return new ki(o,Ue.empty(),e)}function y5(s){return new ki(s.readTime,s.key,wu)}class ki{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ki(Qe.min(),Ue.empty(),wu)}static max(){return new ki(Qe.max(),Ue.empty(),wu)}}function b5(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ue.comparator(s.documentKey,e.documentKey),t!==0?t:ut(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(s){if(s.code!==ue.FAILED_PRECONDITION||s.message!==v5)throw s;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,a)=>{t(e)}))}static reject(e){return new ge(((t,a)=>{a(e)}))}static waitFor(e){return new ge(((t,a)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&t()}),(x=>a(x)))})),d=!0,u===o&&t()}))}static or(e){let t=ge.resolve(!1);for(const a of e)t=t.next((o=>o?ge.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,u)=>{a.push(t.call(this,o,u))})),this.waitFor(a)}static mapArray(e,t){return new ge(((a,o)=>{const u=e.length,d=new Array(u);let g=0;for(let x=0;x<u;x++){const p=x;t(e[p]).next((b=>{d[p]=b,++g,g===u&&a(d)}),(b=>o(b)))}}))}static doWhile(e,t){return new ge(((a,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):a()};u()}))}}function _5(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=-1;function wf(s){return s==null}function $h(s){return s===0&&1/s==-1/0}function N5(s){return typeof s=="number"&&Number.isInteger(s)&&!$h(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="";function j5(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=yw(e)),e=T5(s.get(t),e);return yw(e)}function T5(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case D1:t+="";break;default:t+=u}}return t}function yw(s){return s+D1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Pi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function O1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?a(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,a,o,u){this.key=e,this.value=t,this.color=a??Un.RED,this.left=o??Un.EMPTY,this.right=u??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,u){return new Un(e??this.key,t??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,a),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Un.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,t,a,o,u){return this}insert(e,t,a){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vw(this.data.getIterator())}getIteratorFrom(e){return new vw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class vw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new En(zn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new M1("Invalid base64 string: "+u):u}})(e);return new Bn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const E5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(s){if(Nt(!!s,39018),typeof s=="string"){let e=0;const t=E5.exec(s);if(Nt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hn(s.seconds),nanos:hn(s.nanos)}}function hn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Di(s){return typeof s=="string"?Bn.fromBase64String(s):Bn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="server_timestamp",L1="__type__",P1="__previous_value__",U1="__local_write_time__";function f0(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[L1])==null?void 0:a.stringValue)===V1}function _f(s){const e=s.mapValue.fields[P1];return f0(e)?_f(e):e}function _u(s){const e=Ii(s.mapValue.fields[U1].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t,a,o,u,d,g,x,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=b}}const Kh="(default)";class Nu{constructor(e,t){this.projectId=e,this.database=t||Kh}static empty(){return new Nu("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="__type__",C5="__max__",wh={mapValue:{}},B1="__vector__",Gh="value";function Oi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?f0(s)?4:R5(s)?9007199254740991:A5(s)?10:11:Ke(28295,{value:s})}function Xr(s,e){if(s===e)return!0;const t=Oi(s);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return _u(s).isEqual(_u(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ii(o.timestampValue),g=Ii(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Di(o.bytesValue).isEqual(Di(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return hn(o.geoPointValue.latitude)===hn(u.geoPointValue.latitude)&&hn(o.geoPointValue.longitude)===hn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return hn(o.integerValue)===hn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=hn(o.doubleValue),g=hn(u.doubleValue);return d===g?$h(d)===$h(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Po(s.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(bw(d)!==bw(g))return!1;for(const x in d)if(d.hasOwnProperty(x)&&(g[x]===void 0||!Xr(d[x],g[x])))return!1;return!0})(s,e);default:return Ke(52216,{left:s})}}function ju(s,e){return(s.values||[]).find((t=>Xr(t,e)))!==void 0}function Uo(s,e){if(s===e)return 0;const t=Oi(s),a=Oi(e);if(t!==a)return ut(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=hn(u.integerValue||u.doubleValue),x=hn(d.integerValue||d.doubleValue);return g<x?-1:g>x?1:g===x?0:isNaN(g)?isNaN(x)?0:-1:1})(s,e);case 3:return ww(s.timestampValue,e.timestampValue);case 4:return ww(_u(s),_u(e));case 5:return Tp(s.stringValue,e.stringValue);case 6:return(function(u,d){const g=Di(u),x=Di(d);return g.compareTo(x)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),x=d.split("/");for(let p=0;p<g.length&&p<x.length;p++){const b=ut(g[p],x[p]);if(b!==0)return b}return ut(g.length,x.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=ut(hn(u.latitude),hn(d.latitude));return g!==0?g:ut(hn(u.longitude),hn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return _w(s.arrayValue,e.arrayValue);case 10:return(function(u,d){var N,k,M,$;const g=u.fields||{},x=d.fields||{},p=(N=g[Gh])==null?void 0:N.arrayValue,b=(k=x[Gh])==null?void 0:k.arrayValue,w=ut(((M=p==null?void 0:p.values)==null?void 0:M.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return w!==0?w:_w(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===wh.mapValue&&d===wh.mapValue)return 0;if(u===wh.mapValue)return 1;if(d===wh.mapValue)return-1;const g=u.fields||{},x=Object.keys(g),p=d.fields||{},b=Object.keys(p);x.sort(),b.sort();for(let w=0;w<x.length&&w<b.length;++w){const N=Tp(x[w],b[w]);if(N!==0)return N;const k=Uo(g[x[w]],p[b[w]]);if(k!==0)return k}return ut(x.length,b.length)})(s.mapValue,e.mapValue);default:throw Ke(23264,{he:t})}}function ww(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ut(s,e);const t=Ii(s),a=Ii(e),o=ut(t.seconds,a.seconds);return o!==0?o:ut(t.nanos,a.nanos)}function _w(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const u=Uo(t[o],a[o]);if(u)return u}return ut(t.length,a.length)}function zo(s){return Ep(s)}function Ep(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=Ii(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Di(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ue.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const u of t.values||[])o?o=!1:a+=",",a+=Ep(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${Ep(t.fields[d])}`;return o+"}"})(s.mapValue):Ke(61005,{value:s})}function kh(s){switch(Oi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_f(s);return e?16+kh(e):16;case 5:return 2*s.stringValue.length;case 6:return Di(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+kh(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Pi(a.fields,((u,d)=>{o+=u.length+kh(d)})),o})(s.mapValue);default:throw Ke(13486,{value:s})}}function Nw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sp(s){return!!s&&"integerValue"in s}function m0(s){return!!s&&"arrayValue"in s}function jw(s){return!!s&&"nullValue"in s}function Tw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ih(s){return!!s&&"mapValue"in s}function A5(s){var t,a;return((a=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[z1])==null?void 0:a.stringValue)===B1}function fu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Pi(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=fu(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(s.arrayValue.values[t]);return e}return{...s}}function R5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===C5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=zn.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!t.isImmediateParentOf(g)){const x=this.getFieldsMap(t);this.applyChanges(x,a,o),a={},o=[],t=g.popLast()}d?a[g.lastSegment()]=fu(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,a,o)}delete(e){const t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];Ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){Pi(t,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new ps(fu(this.value))}}function H1(s){const e=[];return Pi(s.fields,((t,a)=>{const o=new zn([t]);if(Ih(a)){const u=H1(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,a,o,u,d,g){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Yn(e,0,Qe.min(),Qe.min(),Qe.min(),ps.empty(),0)}static newFoundDocument(e,t,a,o){return new Yn(e,1,t,Qe.min(),a,o,0)}static newNoDocument(e,t){return new Yn(e,2,t,Qe.min(),Qe.min(),ps.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Qe.min(),Qe.min(),ps.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function Ew(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?a=Ue.comparator(Ue.fromName(d.referenceValue),t.key):a=Uo(d,t.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Sw(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Xr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function k5(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{}class vn extends F1{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new D5(e,t,a):t==="array-contains"?new V5(e,a):t==="in"?new L5(e,a):t==="not-in"?new P5(e,a):t==="array-contains-any"?new U5(e,a):new vn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new O5(e,a):new M5(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends F1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new br(e,t)}matches(e){return q1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q1(s){return s.op==="and"}function $1(s){return I5(s)&&q1(s)}function I5(s){for(const e of s.filters)if(e instanceof br)return!1;return!0}function Cp(s){if(s instanceof vn)return s.field.canonicalString()+s.op.toString()+zo(s.value);if($1(s))return s.filters.map((e=>Cp(e))).join(",");{const e=s.filters.map((t=>Cp(t))).join(",");return`${s.op}(${e})`}}function K1(s,e){return s instanceof vn?(function(a,o){return o instanceof vn&&a.op===o.op&&a.field.isEqual(o.field)&&Xr(a.value,o.value)})(s,e):s instanceof br?(function(a,o){return o instanceof br&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,d,g)=>u&&K1(d,o.filters[g])),!0):!1})(s,e):void Ke(19439)}function G1(s){return s instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`})(s):s instanceof br?(function(t){return t.op.toString()+" {"+t.getFilters().map(G1).join(" ,")+"}"})(s):"Filter"}class D5 extends vn{constructor(e,t,a){super(e,t,a),this.key=Ue.fromName(a.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class O5 extends vn{constructor(e,t){super(e,"in",t),this.keys=Y1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class M5 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=Y1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y1(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Ue.fromName(a.referenceValue)))}class V5 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return m0(t)&&ju(t.arrayValue,this.value)}}class L5 extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class P5 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class U5 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!m0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>ju(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,t=null,a=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function Cw(s,e=null,t=[],a=[],o=null,u=null,d=null){return new z5(s,e,t,a,o,u,d)}function g0(s){const e=Je(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Cp(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>zo(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>zo(a))).join(",")),e.Te=t}return e.Te}function p0(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!k5(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!K1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Sw(s.startAt,e.startAt)&&Sw(s.endAt,e.endAt)}function Ap(s){return Ue.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t=null,a=[],o=[],u=null,d="F",g=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function B5(s,e,t,a,o,u,d,g){return new Jo(s,e,t,a,o,u,d,g)}function Nf(s){return new Jo(s)}function Aw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Q1(s){return s.collectionGroup!==null}function mu(s){const e=Je(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new En(zn.comparator);return d.filters.forEach((x=>{x.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Tu(u,a))})),t.has(zn.keyField().canonicalString())||e.Ie.push(new Tu(zn.keyField(),a))}return e.Ie}function qr(s){const e=Je(s);return e.Ee||(e.Ee=H5(e,mu(s))),e.Ee}function H5(s,e){if(s.limitType==="F")return Cw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Tu(o.field,u)}));const t=s.endAt?new Yh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Yh(s.startAt.position,s.startAt.inclusive):null;return Cw(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function Rp(s,e){const t=s.filters.concat([e]);return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function kp(s,e,t){return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function jf(s,e){return p0(qr(s),qr(e))&&s.limitType===e.limitType}function X1(s){return`${g0(qr(s))}|lt:${s.limitType}`}function _o(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>G1(o))).join(", ")}]`),wf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>zo(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>zo(o))).join(",")),`Target(${a})`})(qr(s))}; limitType=${s.limitType})`}function Tf(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ue.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of mu(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,x){const p=Ew(d,g,x);return d.inclusive?p<=0:p<0})(a.startAt,mu(a),o)||a.endAt&&!(function(d,g,x){const p=Ew(d,g,x);return d.inclusive?p>=0:p>0})(a.endAt,mu(a),o))})(s,e)}function F5(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function W1(s){return(e,t)=>{let a=!1;for(const o of mu(s)){const u=q5(o,e,t);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function q5(s,e,t){const a=s.field.isKeyField()?Ue.comparator(e.key,t.key):(function(u,d,g){const x=d.data.field(u),p=g.data.field(u);return x!==null&&p!==null?Uo(x,p):Ke(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ke(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,((t,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return O1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new Zt(Ue.comparator);function Va(){return $5}const J1=new Zt(Ue.comparator);function iu(...s){let e=J1;for(const t of s)e=e.insert(t.key,t);return e}function Z1(s){let e=J1;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function gl(){return gu()}function eN(){return gu()}function gu(){return new Cl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const K5=new Zt(Ue.comparator),G5=new En(Ue.comparator);function dt(...s){let e=G5;for(const t of s)e=e.add(t);return e}const Y5=new En(ut);function Q5(){return Y5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function tN(s){return{integerValue:""+s}}function X5(s,e){return N5(e)?tN(e):x0(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function W5(s,e,t){return s instanceof Eu?(function(o,u){const d={fields:{[L1]:{stringValue:V1},[U1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&f0(u)&&(u=_f(u)),u&&(d.fields[P1]=u),{mapValue:d}})(t,e):s instanceof Bo?sN(s,e):s instanceof Su?rN(s,e):(function(o,u){const d=nN(o,u),g=Rw(d)+Rw(o.Ae);return Sp(d)&&Sp(o.Ae)?tN(g):x0(o.serializer,g)})(s,e)}function J5(s,e,t){return s instanceof Bo?sN(s,e):s instanceof Su?rN(s,e):t}function nN(s,e){return s instanceof Qh?(function(a){return Sp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Eu extends Ef{}class Bo extends Ef{constructor(e){super(),this.elements=e}}function sN(s,e){const t=aN(e);for(const a of s.elements)t.some((o=>Xr(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Su extends Ef{constructor(e){super(),this.elements=e}}function rN(s,e){let t=aN(e);for(const a of s.elements)t=t.filter((o=>!Xr(o,a)));return{arrayValue:{values:t}}}class Qh extends Ef{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Rw(s){return hn(s.integerValue||s.doubleValue)}function aN(s){return m0(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.field=e,this.transform=t}}function Z5(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Bo&&o instanceof Bo||a instanceof Su&&o instanceof Su?Po(a.elements,o.elements,Xr):a instanceof Qh&&o instanceof Qh?Xr(a.Ae,o.Ae):a instanceof Eu&&o instanceof Eu})(s.transform,e.transform)}class eR{constructor(e,t){this.version=e,this.transformResults=t}}class rs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Sf{}function lN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cf(s.key,rs.none()):new Pu(s.key,s.data,rs.none());{const t=s.data,a=ps.empty();let o=new En(zn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new Ui(s.key,a,new Ms(o.toArray()),rs.none())}}function tR(s,e,t){s instanceof Pu?(function(o,u,d){const g=o.value.clone(),x=Iw(o.fieldTransforms,u,d.transformResults);g.setAll(x),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):s instanceof Ui?(function(o,u,d){if(!Dh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=Iw(o.fieldTransforms,u,d.transformResults),x=u.data;x.setAll(oN(o)),x.setAll(g),u.convertToFoundDocument(d.version,x).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function pu(s,e,t,a){return s instanceof Pu?(function(u,d,g,x){if(!Dh(u.precondition,d))return g;const p=u.value.clone(),b=Dw(u.fieldTransforms,x,d);return p.setAll(b),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,t,a):s instanceof Ui?(function(u,d,g,x){if(!Dh(u.precondition,d))return g;const p=Dw(u.fieldTransforms,x,d),b=d.data;return b.setAll(oN(u)),b.setAll(p),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,t,a):(function(u,d,g){return Dh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,t)}function nR(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=nN(a.transform,o||null);u!=null&&(t===null&&(t=ps.empty()),t.set(a.field,u))}return t||null}function kw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Po(a,o,((u,d)=>Z5(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Pu extends Sf{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ui extends Sf{constructor(e,t,a,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function oN(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function Iw(s,e,t){const a=new Map;Nt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,g=e.data.field(u.field);a.set(u.field,J5(d,g,t[o]))}return a}function Dw(s,e,t){const a=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);a.set(o.field,W5(u,d,e))}return a}class Cf extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sR extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&tR(u,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=pu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=pu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=eN();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const x=lN(d,g);x!==null&&a.set(o.key,x),d.isValidDocument()||d.convertToNoDocument(Qe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,((t,a)=>kw(t,a)))&&Po(this.baseMutations,e.baseMutations,((t,a)=>kw(t,a)))}}class y0{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){Nt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return K5})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new y0(e,t,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ft;function lR(s){switch(s){case ue.OK:return Ke(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ke(15467,{code:s})}}function cN(s){if(s===void 0)return Ma("GRPC error has no .code"),ue.UNKNOWN;switch(s){case bn.OK:return ue.OK;case bn.CANCELLED:return ue.CANCELLED;case bn.UNKNOWN:return ue.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ue.INTERNAL;case bn.UNAVAILABLE:return ue.UNAVAILABLE;case bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case bn.NOT_FOUND:return ue.NOT_FOUND;case bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case bn.ABORTED:return ue.ABORTED;case bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case bn.DATA_LOSS:return ue.DATA_LOSS;default:return Ke(39323,{code:s})}}(ft=bn||(bn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Si([4294967295,4294967295],0);function Ow(s){const e=oR().encode(s),t=new N1;return t.update(e),new Uint8Array(t.digest())}function Mw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Si([t,a],0),new Si([o,u],0)]}class b0{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new lu(`Invalid padding: ${t}`);if(a<0)throw new lu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Si.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(Si.fromNumber(a)));return o.compare(cR)===1&&(o=new Si([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ow(e),[a,o]=Mw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new b0(u,o,t);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const t=Ow(e),[a,o]=Mw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,a,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Af(Qe.min(),o,new Zt(ut),Va(),dt())}}class Uu{constructor(e,t,a,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Uu(a,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,a,o){this.be=e,this.removedTargetIds=t,this.key=a,this.De=o}}class uN{constructor(e,t){this.targetId=e,this.Ce=t}}class dN{constructor(e,t,a=Bn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class Vw{constructor(){this.ve=0,this.Fe=Lw(),this.Me=Bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),a=dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Ke(38017,{changeType:u})}})),new Uu(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=Lw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Va(),this.Je=_h(),this.He=_h(),this.Ye=new Zt(ut)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Ap(u))if(a===0){const d=new Ue(u.path);this.et(t,d,Yn.newNoDocument(d,Qe.min()))}else Nt(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const g=this.ut(e),x=g?this.ct(g,e,d):1;if(x!==0){this.it(t);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=t;let d,g;try{d=Di(a).toUint8Array()}catch(x){if(x instanceof M1)return Lo("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{g=new b0(d,o,u)}catch(x){return Lo(x instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return g.ge===0?null:g}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Ap(g.target)){const x=new Ue(g.target.path);this.It(x).has(d)||this.Et(d,x)||this.et(d,x,Yn.newNoDocument(x,e))}u.Be&&(t.set(d,u.ke()),u.qe())}}));let a=dt();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Af(e,t,this.Ye,this.je,a);return this.je=Va(),this.Je=_h(),this.He=_h(),this.Ye=new Zt(ut),o}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(ut),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(ut),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _h(){return new Zt(Ue.comparator)}function Lw(){return new Zt(Ue.comparator)}const dR={asc:"ASCENDING",desc:"DESCENDING"},hR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class mR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ip(s,e){return s.useProto3Json||wf(e)?e:{value:e}}function Xh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function gR(s,e){return Xh(s,e.toTimestamp())}function $r(s){return Nt(!!s,49232),Qe.fromTimestamp((function(t){const a=Ii(t);return new qt(a.seconds,a.nanos)})(s))}function v0(s,e){return Dp(s,e).canonicalString()}function Dp(s,e){const t=(function(o){return new Ut(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function fN(s){const e=Ut.fromString(s);return Nt(yN(e),10190,{key:e.toString()}),e}function Op(s,e){return v0(s.databaseId,e.path)}function tp(s,e){const t=fN(e);if(t.get(1)!==s.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ue(gN(t))}function mN(s,e){return v0(s.databaseId,e)}function pR(s){const e=fN(s);return e.length===4?Ut.emptyPath():gN(e)}function Mp(s){return new Ut(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function gN(s){return Nt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Pw(s,e,t){return{name:Op(s,e),fields:t.value.mapValue.fields}}function xR(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(Nt(b===void 0||typeof b=="string",58123),Bn.fromBase64String(b||"")):(Nt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Bn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(p){const b=p.code===void 0?ue.UNKNOWN:cN(p.code);return new Ae(b,p.message||"")})(d);t=new dN(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=tp(s,a.document.name),u=$r(a.document.updateTime),d=a.document.createTime?$r(a.document.createTime):Qe.min(),g=new ps({mapValue:{fields:a.document.fields}}),x=Yn.newFoundDocument(o,u,d,g),p=a.targetIds||[],b=a.removedTargetIds||[];t=new Oh(p,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=tp(s,a.document),u=a.readTime?$r(a.readTime):Qe.min(),d=Yn.newNoDocument(o,u),g=a.removedTargetIds||[];t=new Oh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=tp(s,a.document),u=a.removedTargetIds||[];t=new Oh([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new iR(o,u),g=a.targetId;t=new uN(g,d)}}return t}function yR(s,e){let t;if(e instanceof Pu)t={update:Pw(s,e.key,e.value)};else if(e instanceof Cf)t={delete:Op(s,e.key)};else if(e instanceof Ui)t={update:Pw(s,e.key,e.data),updateMask:SR(e.fieldMask)};else{if(!(e instanceof sR))return Ke(16599,{Vt:e.type});t={verify:Op(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const g=d.transform;if(g instanceof Eu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Bo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Qh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ke(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:gR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(s,e.precondition)),t}function bR(s,e){return s&&s.length>0?(Nt(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?$r(o.updateTime):$r(u);return d.isEqual(Qe.min())&&(d=$r(u)),new eR(d,o.transformResults||[])})(t,e)))):[]}function vR(s,e){return{documents:[mN(s,e.path)]}}function wR(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=mN(s,o);const u=(function(p){if(p.length!==0)return xN(br.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((b=>(function(N){return{field:No(N.field),direction:jR(N.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=Ip(s,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function _R(s){let e=pR(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){Nt(a===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(w){const N=pN(w);return N instanceof br&&$1(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(M){return new Tu(jo(M.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(N)))})(t.orderBy));let g=null;t.limit&&(g=(function(w){let N;return N=typeof w=="object"?w.value:w,wf(N)?null:N})(t.limit));let x=null;t.startAt&&(x=(function(w){const N=!!w.before,k=w.values||[];return new Yh(k,N)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const N=!w.before,k=w.values||[];return new Yh(k,N)})(t.endAt)),B5(e,o,d,u,g,"F",x,p)}function NR(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=jo(t.unaryFilter.field);return vn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(t.unaryFilter.field);return vn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=jo(t.unaryFilter.field);return vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=jo(t.unaryFilter.field);return vn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(s):s.fieldFilter!==void 0?(function(t){return vn.create(jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return br.create(t.compositeFilter.filters.map((a=>pN(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(t.compositeFilter.op))})(s):Ke(30097,{filter:s})}function jR(s){return dR[s]}function TR(s){return hR[s]}function ER(s){return fR[s]}function No(s){return{fieldPath:s.canonicalString()}}function jo(s){return zn.fromServerFormat(s.fieldPath)}function xN(s){return s instanceof vn?(function(t){if(t.op==="=="){if(Tw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(jw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(jw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:TR(t.op),value:t.value}}})(s):s instanceof br?(function(t){const a=t.getFilters().map((o=>xN(o)));return a.length===1?a[0]:{compositeFilter:{op:ER(t.op),filters:a}}})(s):Ke(54877,{filter:s})}function SR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,a,o,u=Qe.min(),d=Qe.min(),g=Bn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=x}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.yt=e}}function AR(s){const e=_R({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.Cn=new kR}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(ki.min())}updateCollectionGroup(e,t,a){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class kR{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new En(Ut.comparator),u=!o.has(a);return this.index[t]=o.add(a),u}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new En(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bN=41943040;class ms{static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(bN,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ho(0)}static cr(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="LruGarbageCollector",IR=1048576;function Bw([s,e],[t,a]){const o=ut(s,t);return o===0?ut(e,a):o}class DR{constructor(e){this.Ir=e,this.buffer=new En(Bw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Bw(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OR{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(zw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?ke(zw,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Vr(3e5)}))}}class MR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(vf.ce);const a=new DR(t);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Uw)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,o,u,d,g,x,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,t)))).next((w=>(u=w,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(p=Date.now(),wo()<=ct.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(x-g)+`ms
	Removed ${w} documents in `+(p-x)+`ms
Total Duration: ${p-b}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function VR(s,e){return new MR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.changes=new Cl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ge.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&pu(a.mutation,o,Ms.empty(),qt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,dt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=dt()){const o=gl();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((u=>{let d=iu();return u.forEach(((g,x)=>{d=d.insert(g,x.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=gl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,dt())))}populateOverlays(e,t,a){const o=[];return a.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{t.set(d,g)}))}))}computeViews(e,t,a,o){let u=Va();const d=gu(),g=(function(){return gu()})();return t.forEach(((x,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Ui)?u=u.insert(p.key,p):b!==void 0?(d.set(p.key,b.mutation.getFieldMask()),pu(b.mutation,p,b.mutation.getFieldMask(),qt.now())):d.set(p.key,Ms.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((p,b)=>d.set(p,b))),t.forEach(((p,b)=>g.set(p,new PR(b,d.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,t){const a=gu();let o=new Zt(((d,g)=>d-g)),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const g of d)g.keys().forEach((x=>{const p=t.get(x);if(p===null)return;let b=a.get(x)||Ms.empty();b=g.applyToLocalView(p,b),a.set(x,b);const w=(o.get(g.batchId)||dt()).add(x);o=o.insert(g.batchId,w)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const x=g.getNext(),p=x.key,b=x.value,w=eN();b.forEach((N=>{if(!u.has(N)){const k=lN(t.get(N),a.get(N));k!==null&&w.set(N,k),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ge.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return(function(d){return Ue.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-u.size):ge.resolve(gl());let g=wu,x=u;return d.next((p=>ge.forEach(p,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?ge.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{x=x.insert(b,N)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,x,p,dt()))).next((b=>({batchId:g,changes:Z1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next((a=>{let o=iu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const u=t.collectionGroup;let d=iu();return this.indexManager.getCollectionParents(e,u).next((g=>ge.forEach(g,(x=>{const p=(function(w,N){return new Jo(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((b=>{b.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,u,o)))).next((d=>{u.forEach(((x,p)=>{const b=p.getKey();d.get(b)===null&&(d=d.insert(b,Yn.newInvalidDocument(b)))}));let g=iu();return d.forEach(((x,p)=>{const b=u.get(x);b!==void 0&&pu(b.mutation,p,Ms.empty(),qt.now()),Tf(t,p)&&(g=g.insert(x,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:$r(o.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:AR(o.bundledQuery),readTime:$r(o.readTime)}})(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.overlays=new Zt(Ue.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const a=gl();return ge.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,u)=>{this.St(e,t,u)})),ge.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),ge.resolve()}getOverlaysForCollection(e,t,a){const o=gl(),u=t.length+1,d=new Ue(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const x=g.getNext().value,p=x.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&x.largestBatchId>a&&o.set(x.getKey(),x)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let u=new Zt(((p,b)=>p-b));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>a){let b=u.get(p.largestBatchId);b===null&&(b=gl(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=gl(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return ge.resolve(g)}St(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new aR(t,a));let u=this.qr.get(t);u===void 0&&(u=dt(),this.qr.set(t,u)),this.qr.set(t,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.Qr=new En(kn.$r),this.Ur=new En(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new kn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new kn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new Ue(new Ut([])),a=new kn(t,e),o=new kn(t,e+1),u=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ue(new Ut([])),a=new kn(t,e),o=new kn(t,e+1);let u=dt();return this.Ur.forEachInRange([a,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new kn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class kn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ue.comparator(e.key,t.key)||ut(e.Yr,t.Yr)}static Kr(e,t){return ut(e.Yr,t.Yr)||Ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(kn.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new rR(u,t,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new kn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.ei(a),u=o<0?0:o;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?h0:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new kn(t,0),o=new kn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new En(ut);return t.forEach((o=>{const u=new kn(o,0),d=new kn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{a=a.add(g.Yr)}))})),ge.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let u=a;Ue.isDocumentKey(u)||(u=u.child(""));const d=new kn(new Ue(u),0);let g=new En(ut);return this.Zr.forEachWhile((x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(x.Yr)),!0)}),d),ge.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ge.forEach(t.mutations,(o=>{const u=new kn(o.key,t.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new kn(t,0),o=this.Zr.firstAfterOrEqual(a);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.ri=e,this.docs=(function(){return new Zt(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),u=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ge.resolve(a?a.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let a=Va();return t.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Yn.newInvalidDocument(o))})),ge.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let u=Va();const d=t.path,g=new Ue(d.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(g);for(;x.hasNext();){const{key:p,value:{document:b}}=x.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||b5(y5(b),a)<=0||(o.has(b.key)||Tf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,t,a,o){Ke(9500)}ii(e,t){return ge.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new $R(this)}getSize(e){return ge.resolve(this.size)}}class $R extends LR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.persistence=e,this.si=new Cl((t=>g0(t)),p0),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new w0,this.targetCount=0,this.ai=Ho.ur()}forEachTarget(e,t){return this.si.forEach(((a,o)=>t(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,a){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=t&&a.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ge.waitFor(u).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return ge.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),ge.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return ge.resolve(a)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this.ui={},this.overlays={},this.ci=new vf(0),this.li=!1,this.li=!0,this.hi=new HR,this.referenceDelegate=e(this),this.Pi=new KR(this),this.indexManager=new RR,this.remoteDocumentCache=(function(o){return new qR(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new CR(t),this.Ii=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new FR(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){ke("MemoryPersistence","Starting transaction:",e);const o=new GR(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ge.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class GR extends w5{constructor(e){super(),this.currentSequenceNumber=e}}class _0{constructor(e){this.persistence=e,this.Ri=new w0,this.Vi=null}static mi(e){return new _0(e)}get fi(){if(this.Vi)return this.Vi;throw Ke(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),ge.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,(a=>{const o=Ue.fromPath(a);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Qe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Wh{constructor(e,t){this.persistence=e,this.pi=new Cl((a=>j5(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=VR(this,t)}static mi(e,t){return new Wh(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return ge.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?ge.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((g=>{g||(a++,u.removeEntry(d,Qe.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}br(e,t,a){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ge.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=o}static As(e,t){let a=dt(),o=dt();for(const u of t.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new N0(e,t.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zA()?8:_5(Xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const u={result:null};return this.ys(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,t,o,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new YR;return this.Ss(e,t,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,t,d,g.size)}))})).next((()=>u.result))}bs(e,t,a,o){return a.documentReadCount<this.fs?(wo()<=ct.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(wo()<=ct.DEBUG&&ke("QueryEngine","Query:",_o(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(wo()<=ct.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):ge.resolve())}ys(e,t){if(Aw(t))return ge.resolve(null);let a=qr(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=kp(t,null,"F"),a=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=dt(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((x=>{const p=this.Ds(t,g);return this.Cs(t,p,d,x.readTime)?this.ys(e,kp(t,null,"F")):this.vs(e,p,t,x)}))))})))))}ws(e,t,a,o){return Aw(t)||o.isEqual(Qe.min())?ge.resolve(null):this.ps.getDocuments(e,a).next((u=>{const d=this.Ds(t,u);return this.Cs(t,d,a,o)?ge.resolve(null):(wo()<=ct.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.vs(e,d,t,x5(o,wu)).next((g=>g)))}))}Ds(e,t){let a=new En(W1(e));return t.forEach(((o,u)=>{Tf(e,u)&&(a=a.add(u))})),a}Cs(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,a){return wo()<=ct.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,ki.min(),a)}vs(e,t,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="LocalStore",XR=3e8;class WR{constructor(e,t,a,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Zt(ut),this.xs=new Cl((u=>g0(u)),p0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function JR(s,e,t,a){return new WR(s,e,t,a)}async function wN(s,e){const t=Je(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],g=[];let x=dt();for(const p of o){d.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)x=x.add(b.key)}return t.localDocuments.getDocuments(a,x).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:g})))}))}))}function ZR(s,e){const t=Je(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,x,p,b){const w=p.batch,N=w.keys();let k=ge.resolve();return N.forEach((M=>{k=k.next((()=>b.getEntry(x,M))).next(($=>{const z=p.docVersions.get(M);Nt(z!==null,48541),$.version.compareTo(z)<0&&(w.applyToRemoteDocument($,p),$.isValidDocument()&&($.setReadTime(p.commitVersion),b.addEntry($)))}))})),k.next((()=>g.mutationQueue.removeMutationBatch(x,w)))})(t,a,e,u).next((()=>u.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let x=dt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(x=x.add(g.batch.mutations[p].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function _N(s){const e=Je(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ek(s,e){const t=Je(s),a=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((b,w)=>{const N=o.get(w);if(!N)return;g.push(t.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(u,b.addedDocuments,w))));let k=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(Bn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,a)),o=o.insert(w,k),(function($,z,Y){return $.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=XR?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(N,k,b)&&g.push(t.Pi.updateTargetData(u,k))}));let x=Va(),p=dt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(tk(u,d,e.documentUpdates).next((b=>{x=b.ks,p=b.qs}))),!a.isEqual(Qe.min())){const b=t.Pi.getLastRemoteSnapshotVersion(u).next((w=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(b)}return ge.waitFor(g).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,x,p))).next((()=>x))})).then((u=>(t.Ms=o,u)))}function tk(s,e,t){let a=dt(),o=dt();return t.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=Va();return t.forEach(((g,x)=>{const p=u.get(g);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),x.isNoDocument()&&x.version.isEqual(Qe.min())?(e.removeEntry(g,x.readTime),d=d.insert(g,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),d=d.insert(g,x)):ke(j0,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",x.version)})),{ks:d,qs:o}}))}function nk(s,e){const t=Je(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=h0),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function sk(s,e){const t=Je(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.Pi.getTargetData(a,e).next((u=>u?(o=u,ge.resolve(o)):t.Pi.allocateTargetId(a).next((d=>(o=new _i(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function Vp(s,e,t){const a=Je(s),o=a.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Wo(d))throw d;ke(j0,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Hw(s,e,t){const a=Je(s);let o=Qe.min(),u=dt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(x,p,b){const w=Je(x),N=w.xs.get(b);return N!==void 0?ge.resolve(w.Ms.get(N)):w.Pi.getTargetData(p,b)})(a,d,qr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((x=>{u=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,t?o:Qe.min(),t?u:dt()))).next((g=>(rk(a,F5(e),g),{documents:g,Qs:u})))))}function rk(s,e,t){let a=s.Os.get(e)||Qe.min();t.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Os.set(e,a)}class Fw{constructor(){this.activeTargetIds=Q5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ak{constructor(){this.Mo=new Fw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fw,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="ConnectivityMonitor";class $w{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(qw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(qw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function Lp(){return Nh===null?Nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="RestConnection",lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ok{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Kh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,t,a,o,u){const d=Lp(),g=this.zo(e,t.toUriEncodedString());ke(np,`Sending RPC '${e}' ${d}:`,g,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,u);const{host:p}=new URL(g),b=ea(p);return this.Jo(e,g,x,a,b).then((w=>(ke(np,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Lo(np,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,t,a,o,u,d){return this.Go(e,t,a,o,u)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const a=lk[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class uk extends ok{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,o,u){const d=Lp();return new Promise(((g,x)=>{const p=new j1;p.setWithCredentials(!0),p.listenOnce(T1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rh.NO_ERROR:const w=p.getResponseJson();ke(Kn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Rh.TIMEOUT:ke(Kn,`RPC '${e}' ${d} timed out`),x(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const N=p.getStatus();if(ke(Kn,`RPC '${e}' ${d} failed with status:`,N,"response text:",p.getResponseText()),N>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const M=k==null?void 0:k.error;if(M&&M.status&&M.message){const $=(function(Y){const ae=Y.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(ae)>=0?ae:ue.UNKNOWN})(M.status);x(new Ae($,M.message))}else x(new Ae(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ke(Kn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);ke(Kn,`RPC '${e}' ${d} sending request:`,o),p.send(t,"POST",b,a,15)}))}T_(e,t,a){const o=Lp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=C1(),g=S1(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,t,a),x.encodeInitMessageHeaders=!0;const b=u.join("");ke(Kn,`Creating RPC '${e}' stream ${o}: ${b}`,x);const w=d.createWebChannel(b,x);this.I_(w);let N=!1,k=!1;const M=new ck({Yo:z=>{k?ke(Kn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(N||(ke(Kn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),N=!0),ke(Kn,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Zo:()=>w.close()}),$=(z,Y,ae)=>{z.listen(Y,(K=>{try{ae(K)}catch(H){setTimeout((()=>{throw H}),0)}}))};return $(w,au.EventType.OPEN,(()=>{k||(ke(Kn,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),$(w,au.EventType.CLOSE,(()=>{k||(k=!0,ke(Kn,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(w))})),$(w,au.EventType.ERROR,(z=>{k||(k=!0,Lo(Kn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),M.a_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),$(w,au.EventType.MESSAGE,(z=>{var Y;if(!k){const ae=z.data[0];Nt(!!ae,16349);const K=ae,H=(K==null?void 0:K.error)||((Y=K[0])==null?void 0:Y.error);if(H){ke(Kn,`RPC '${e}' stream ${o} received error:`,H);const de=H.status;let ve=(function(A){const O=bn[A];if(O!==void 0)return cN(O)})(de),E=H.message;ve===void 0&&(ve=ue.INTERNAL,E="Unknown error status: "+de+" with message "+H.message),k=!0,M.a_(new Ae(ve,E)),w.close()}else ke(Kn,`RPC '${e}' stream ${o} received:`,ae),M.u_(ae)}})),$(g,E1.STAT_EVENT,(z=>{z.stat===jp.PROXY?ke(Kn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===jp.NOPROXY&&ke(Kn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(s){return new mR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="PersistentStream";class jN{constructor(e,t,a,o,u,d,g,x){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(Kw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ke(Kw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dk extends jN{constructor(e,t,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xR(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Qe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Qe.min():d.readTime?$r(d.readTime):Qe.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Mp(this.serializer),t.addTarget=(function(u,d){let g;const x=d.target;if(g=Ap(x)?{documents:vR(u,x)}:{query:wR(u,x).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=hN(u,d.resumeToken);const p=Ip(u,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(Qe.min())>0){g.readTime=Xh(u,d.snapshotVersion.toTimestamp());const p=Ip(u,d.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=NR(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Mp(this.serializer),t.removeTarget=e,this.q_(t)}}class hk extends jN{constructor(e,t,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bR(e.writeResults,e.commitTime),a=$r(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Mp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>yR(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{}class mk extends fk{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,Dp(t,a),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ue.UNKNOWN,u.toString())}))}Ho(e,t,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Dp(t,a),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ae(ue.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ma(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="RemoteStore";class pk{constructor(e,t,a,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Al(this)&&(ke(wl,"Restarting streams for network reachability change."),await(async function(x){const p=Je(x);p.Ea.add(4),await zu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await kf(p)})(this))}))})),this.Ra=new gk(a,o)}}async function kf(s){if(Al(s))for(const e of s.da)await e(!0)}async function zu(s){for(const e of s.da)await e(!1)}function TN(s,e){const t=Je(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),C0(t)?S0(t):Zo(t).O_()&&E0(t,e))}function T0(s,e){const t=Je(s),a=Zo(t);t.Ia.delete(e),a.O_()&&EN(t,e),t.Ia.size===0&&(a.O_()?a.L_():Al(t)&&t.Ra.set("Unknown"))}function E0(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zo(s).Y_(e)}function EN(s,e){s.Va.Ue(e),Zo(s).Z_(e)}function S0(s){s.Va=new uR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Zo(s).start(),s.Ra.ua()}function C0(s){return Al(s)&&!Zo(s).x_()&&s.Ia.size>0}function Al(s){return Je(s).Ea.size===0}function SN(s){s.Va=void 0}async function xk(s){s.Ra.set("Online")}async function yk(s){s.Ia.forEach(((e,t)=>{E0(s,e)}))}async function bk(s,e){SN(s),C0(s)?(s.Ra.ha(e),S0(s)):s.Ra.set("Unknown")}async function vk(s,e,t){if(s.Ra.set("Online"),e instanceof dN&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){ke(wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Jh(s,a)}else if(e instanceof Oh?s.Va.Ze(e):e instanceof uN?s.Va.st(e):s.Va.tt(e),!t.isEqual(Qe.min()))try{const a=await _N(s.localStore);t.compareTo(a)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(x.resumeToken,d))}})),g.targetMismatches.forEach(((x,p)=>{const b=u.Ia.get(x);if(!b)return;u.Ia.set(x,b.withResumeToken(Bn.EMPTY_BYTE_STRING,b.snapshotVersion)),EN(u,x);const w=new _i(b.target,x,p,b.sequenceNumber);E0(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,t)}catch(a){ke(wl,"Failed to raise snapshot:",a),await Jh(s,a)}}async function Jh(s,e,t){if(!Wo(e))throw e;s.Ea.add(1),await zu(s),s.Ra.set("Offline"),t||(t=()=>_N(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(wl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await kf(s)}))}function CN(s,e){return e().catch((t=>Jh(s,t,e)))}async function If(s){const e=Je(s),t=Mi(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:h0;for(;wk(e);)try{const o=await nk(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,_k(e,o)}catch(o){await Jh(e,o)}AN(e)&&RN(e)}function wk(s){return Al(s)&&s.Ta.length<10}function _k(s,e){s.Ta.push(e);const t=Mi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function AN(s){return Al(s)&&!Mi(s).x_()&&s.Ta.length>0}function RN(s){Mi(s).start()}async function Nk(s){Mi(s).ra()}async function jk(s){const e=Mi(s);for(const t of s.Ta)e.ea(t.mutations)}async function Tk(s,e,t){const a=s.Ta.shift(),o=y0.from(a,e,t);await CN(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await If(s)}async function Ek(s,e){e&&Mi(s).X_&&await(async function(a,o){if((function(d){return lR(d)&&d!==ue.ABORTED})(o.code)){const u=a.Ta.shift();Mi(a).B_(),await CN(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await If(a)}})(s,e),AN(s)&&RN(s)}async function Gw(s,e){const t=Je(s);t.asyncQueue.verifyOperationInProgress(),ke(wl,"RemoteStore received new credentials");const a=Al(t);t.Ea.add(3),await zu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kf(t)}async function Sk(s,e){const t=Je(s);e?(t.Ea.delete(2),await kf(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function Zo(s){return s.ma||(s.ma=(function(t,a,o){const u=Je(t);return u.sa(),new dk(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:xk.bind(null,s),t_:yk.bind(null,s),r_:bk.bind(null,s),H_:vk.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),C0(s)?S0(s):s.Ra.set("Unknown")):(await s.ma.stop(),SN(s))}))),s.ma}function Mi(s){return s.fa||(s.fa=(function(t,a,o){const u=Je(t);return u.sa(),new hk(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Nk.bind(null,s),r_:Ek.bind(null,s),ta:jk.bind(null,s),na:Tk.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await If(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(wl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t,a,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,u){const d=Date.now()+a,g=new A0(e,t,d,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R0(s,e){if(Ma("AsyncQueue",`${e}: ${s}`),Wo(s))return new Ae(ue.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ue.comparator(t.key,a.key):(t,a)=>Ue.comparator(t.key,a.key),this.keyedMap=iu(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Co;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.ga=new Zt(Ue.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ke(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Fo{constructor(e,t,a,o,u,d,g,x,p){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,t,a,o,u){const d=[];return t.forEach((g=>{d.push({type:0,doc:g})})),new Fo(e,t,Co.emptySet(t),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ak{constructor(){this.queries=Qw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=Je(t),u=o.queries;o.queries=Qw(),u.forEach(((d,g)=>{for(const x of g.Sa)x.onError(a)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function Qw(){return new Cl((s=>X1(s)),jf)}async function k0(s,e){const t=Je(s);let a=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new Ck,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const g=R0(d,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&D0(t)}async function I0(s,e){const t=Je(s),a=e.query;let o=3;const u=t.queries.get(a);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function Rk(s,e){const t=Je(s);let a=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&D0(t)}function kk(s,e,t){const a=Je(s),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);a.queries.delete(e)}function D0(s){s.Ca.forEach((e=>{e.next()}))}var Pp,Xw;(Xw=Pp||(Pp={})).Ma="default",Xw.Cache="cache";class O0{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Fo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.key=e}}class IN{constructor(e){this.key=e}}class Ik{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=W1(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new Yw,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const N=o.get(b),k=Tf(this.query,w)?w:null,M=!!N&&this.mutatedKeys.has(N.key),$=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;N&&k?N.data.isEqual(k.data)?M!==$&&(a.track({type:3,doc:k}),z=!0):this.su(N,k)||(a.track({type:2,doc:k}),z=!0,(x&&this.eu(k,x)>0||p&&this.eu(k,p)<0)&&(g=!0)):!N&&k?(a.track({type:0,doc:k}),z=!0):N&&!k&&(a.track({type:1,doc:N}),z=!0,(x||p)&&(g=!0)),z&&(k?(d=d.add(k),u=$?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:d,iu:a,Cs:g,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,w)=>(function(k,M){const $=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Rt:z})}};return $(k)-$(M)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(a),o=o??!1;const g=t&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,d.length!==0||p?{snapshot:new Fo(this.query,e.tu,u,d,e.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new IN(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new kN(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const M0="SyncEngine";class Dk{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class Ok{constructor(e){this.key=e,this.hu=!1}}class Mk{constructor(e,t,a,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Cl((g=>X1(g)),jf),this.Iu=new Map,this.Eu=new Set,this.du=new Zt(Ue.comparator),this.Au=new Map,this.Ru=new w0,this.Vu={},this.mu=new Map,this.fu=Ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Vk(s,e,t=!0){const a=PN(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await DN(a,e,t,!0),o}async function Lk(s,e){const t=PN(s);await DN(t,e,!0,!1)}async function DN(s,e,t,a){const o=await sk(s.localStore,qr(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let g;return a&&(g=await Pk(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&TN(s.remoteStore,o),g}async function Pk(s,e,t,a,o){s.pu=(w,N,k)=>(async function($,z,Y,ae){let K=z.view.ru(Y);K.Cs&&(K=await Hw($.localStore,z.query,!1).then((({documents:E})=>z.view.ru(E,K))));const H=ae&&ae.targetChanges.get(z.targetId),de=ae&&ae.targetMismatches.get(z.targetId)!=null,ve=z.view.applyChanges(K,$.isPrimaryClient,H,de);return Jw($,z.targetId,ve.au),ve.snapshot})(s,w,N,k);const u=await Hw(s.localStore,e,!0),d=new Ik(e,u.Qs),g=d.ru(u.documents),x=Uu.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,x);Jw(s,t,p.au);const b=new Dk(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function Uk(s,e,t){const a=Je(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((d=>!jf(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Vp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&T0(a.remoteStore,o.targetId),Up(a,o.targetId)})).catch(Xo)):(Up(a,o.targetId),await Vp(a.localStore,o.targetId,!0))}async function zk(s,e){const t=Je(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),T0(t.remoteStore,a.targetId))}async function Bk(s,e,t){const a=Yk(s);try{const o=await(function(d,g){const x=Je(d),p=qt.now(),b=g.reduce(((k,M)=>k.add(M.key)),dt());let w,N;return x.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let M=Va(),$=dt();return x.Ns.getEntries(k,b).next((z=>{M=z,M.forEach(((Y,ae)=>{ae.isValidDocument()||($=$.add(Y))}))})).next((()=>x.localDocuments.getOverlayedDocuments(k,M))).next((z=>{w=z;const Y=[];for(const ae of g){const K=nR(ae,w.get(ae.key).overlayedDocument);K!=null&&Y.push(new Ui(ae.key,K,H1(K.value.mapValue),rs.exists(!0)))}return x.mutationQueue.addMutationBatch(k,p,Y,g)})).next((z=>{N=z;const Y=z.applyToLocalDocumentSet(w,$);return x.documentOverlayCache.saveOverlays(k,z.batchId,Y)}))})).then((()=>({batchId:N.batchId,changes:Z1(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,x){let p=d.Vu[d.currentUser.toKey()];p||(p=new Zt(ut)),p=p.insert(g,x),d.Vu[d.currentUser.toKey()]=p})(a,o.batchId,t),await Bu(a,o.changes),await If(a.remoteStore)}catch(o){const u=R0(o,"Failed to persist write");t.reject(u)}}async function ON(s,e){const t=Je(s);try{const a=await ek(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(Nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Nt(d.hu,14607):o.removedDocuments.size>0&&(Nt(d.hu,42227),d.hu=!1))})),await Bu(t,a,e)}catch(a){await Xo(a)}}function Ww(s,e,t){const a=Je(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const x=Je(d);x.onlineState=g;let p=!1;x.queries.forEach(((b,w)=>{for(const N of w.Sa)N.va(g)&&(p=!0)})),p&&D0(x)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Hk(s,e,t){const a=Je(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),u=o&&o.key;if(u){let d=new Zt(Ue.comparator);d=d.insert(u,Yn.newNoDocument(u,Qe.min()));const g=dt().add(u),x=new Af(Qe.min(),new Map,new Zt(ut),d,g);await ON(a,x),a.du=a.du.remove(u),a.Au.delete(e),V0(a)}else await Vp(a.localStore,e,!1).then((()=>Up(a,e,t))).catch(Xo)}async function Fk(s,e){const t=Je(s),a=e.batch.batchId;try{const o=await ZR(t.localStore,e);VN(t,a,null),MN(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Bu(t,o)}catch(o){await Xo(o)}}async function qk(s,e,t){const a=Je(s);try{const o=await(function(d,g){const x=Je(d);return x.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return x.mutationQueue.lookupMutationBatch(p,g).next((w=>(Nt(w!==null,37113),b=w.keys(),x.mutationQueue.removeMutationBatch(p,w)))).next((()=>x.mutationQueue.performConsistencyCheck(p))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>x.localDocuments.getDocuments(p,b)))}))})(a.localStore,e);VN(a,e,t),MN(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Bu(a,o)}catch(o){await Xo(o)}}function MN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function VN(s,e,t){const a=Je(s);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Up(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||LN(s,a)}))}function LN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(T0(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),V0(s))}function Jw(s,e,t){for(const a of t)a instanceof kN?(s.Ru.addReference(a.key,e),$k(s,a)):a instanceof IN?(ke(M0,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||LN(s,a.key)):Ke(19791,{wu:a})}function $k(s,e){const t=e.key,a=t.path.canonicalString();s.du.get(t)||s.Eu.has(a)||(ke(M0,"New document in limbo: "+t),s.Eu.add(a),V0(s))}function V0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ue(Ut.fromString(e)),a=s.fu.next();s.Au.set(a,new Ok(t)),s.du=s.du.insert(t,a),TN(s.remoteStore,new _i(qr(Nf(t.path)),a,"TargetPurposeLimboResolution",vf.ce))}}async function Bu(s,e,t){const a=Je(s),o=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,x)=>{d.push(a.pu(x,e,t).then((p=>{var b;if((p||t)&&a.isPrimaryClient){const w=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:b.current;a.sharedClientState.updateQueryState(x.targetId,w?"current":"not-current")}if(p){o.push(p);const w=N0.As(x.targetId,p);u.push(w)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(x,p){const b=Je(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ge.forEach(p,(N=>ge.forEach(N.Es,(k=>b.persistence.referenceDelegate.addReference(w,N.targetId,k))).next((()=>ge.forEach(N.ds,(k=>b.persistence.referenceDelegate.removeReference(w,N.targetId,k)))))))))}catch(w){if(!Wo(w))throw w;ke(j0,"Failed to update sequence numbers: "+w)}for(const w of p){const N=w.targetId;if(!w.fromCache){const k=b.Ms.get(N),M=k.snapshotVersion,$=k.withLastLimboFreeSnapshotVersion(M);b.Ms=b.Ms.insert(N,$)}}})(a.localStore,u))}async function Kk(s,e){const t=Je(s);if(!t.currentUser.isEqual(e)){ke(M0,"User change. New user:",e.toKey());const a=await wN(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((x=>{x.reject(new Ae(ue.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Bu(t,a.Ls)}}function Gk(s,e){const t=Je(s),a=t.Au.get(e);if(a&&a.hu)return dt().add(a.key);{let o=dt();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const g=t.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function PN(s){const e=Je(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ON.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hk.bind(null,e),e.Pu.H_=Rk.bind(null,e.eventManager),e.Pu.yu=kk.bind(null,e.eventManager),e}function Yk(s){const e=Je(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qk.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JR(this.persistence,new QR,e.initialUser,this.serializer)}Cu(e){return new vN(_0.mi,this.serializer)}Du(e){return new ak}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class Qk extends Zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Nt(this.persistence.referenceDelegate instanceof Wh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new OR(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ms.withCacheSize(this.cacheSizeBytes):ms.DEFAULT;return new vN((a=>Wh.mi(a,t)),this.serializer)}}class zp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ww(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kk.bind(null,this.syncEngine),await Sk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ak})()}createDatastore(e){const t=Rf(e.databaseInfo.databaseId),a=(function(u){return new uk(u)})(e.databaseInfo);return(function(u,d,g,x){return new mk(u,d,g,x)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,u,d,g){return new pk(a,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ww(this.syncEngine,t,0)),(function(){return $w.v()?new $w:new ik})())}createSyncEngine(e,t){return(function(o,u,d,g,x,p,b){const w=new Mk(o,u,d,g,x,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Je(o);ke(wl,"RemoteStore shutting down."),u.Ea.add(5),await zu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class Xk{constructor(e,t,a,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=o,this.user=Gn.UNAUTHENTICATED,this.clientId=d0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{ke(Vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(ke(Vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=R0(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function rp(s,e){s.asyncQueue.verifyOperationInProgress(),ke(Vi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await wN(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Zw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Wk(s);ke(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>Gw(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Gw(e.remoteStore,o))),s._onlineComponents=e}async function Wk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(Vi,"Using user provided OfflineComponentProvider");try{await rp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),await rp(s,new Zh)}}else ke(Vi,"Using default OfflineComponentProvider"),await rp(s,new Qk(void 0));return s._offlineComponents}async function UN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(Vi,"Using user provided OnlineComponentProvider"),await Zw(s,s._uninitializedComponentsProvider._online)):(ke(Vi,"Using default OnlineComponentProvider"),await Zw(s,new zp))),s._onlineComponents}function Jk(s){return UN(s).then((e=>e.syncEngine))}async function ef(s){const e=await UN(s),t=e.eventManager;return t.onListen=Vk.bind(null,e.syncEngine),t.onUnlisten=Uk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Lk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zk.bind(null,e.syncEngine),t}function Zk(s,e,t={}){const a=new Ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,x,p){const b=new L0({next:N=>{b.Nu(),d.enqueueAndForget((()=>I0(u,w)));const k=N.docs.has(g);!k&&N.fromCache?p.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&N.fromCache&&x&&x.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),w=new O0(Nf(g.path),b,{includeMetadataChanges:!0,qa:!0});return k0(u,w)})(await ef(s),s.asyncQueue,e,t,a))),a.promise}function e3(s,e,t={}){const a=new Ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,x,p){const b=new L0({next:N=>{b.Nu(),d.enqueueAndForget((()=>I0(u,w))),N.fromCache&&x.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(N)},error:N=>p.reject(N)}),w=new O0(g,b,{includeMetadataChanges:!0,qa:!0});return k0(u,w)})(await ef(s),s.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="firestore.googleapis.com",t_=!0;class n_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BN,this.ssl=t_}else this.host=e.host,this.ssl=e.ssl??t_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IR)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zN(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new i5;switch(a.type){case"firstParty":return new u5(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=e_.get(t);a&&(ke("ComponentProvider","Removing Datastore"),e_.delete(t),a.terminate())})(this),Promise.resolve()}}function t3(s,e,t,a={}){var p;s=ss(s,Df);const o=ea(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${t}`;o&&(pf(`https://${g}`),xf("Firestore",!0)),u.host!==BN&&u.host!==g&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:g,ssl:o,emulatorOptions:a};if(!Ai(x,d)&&(s._setSettings(x),a.mockUserToken)){let b,w;if(typeof a.mockUserToken=="string")b=a.mockUserToken,w=Gn.MOCK_USER;else{b=y1(a.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Gn(N)}s._authCredentials=new l5(new R1(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class sn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Lu(t,sn._jsonSchema))return new sn(e,a||null,new Ue(Ut.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:_n("string",sn._jsonSchemaVersion),referencePath:_n("string")};class Ci extends zi{constructor(e,t,a){super(e,t,Nf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Ue(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function kt(s,e,...t){if(s=jt(s),k1("collection","path",e),s instanceof Df){const a=Ut.fromString(e,...t);return gw(a),new Ci(s,null,a)}{if(!(s instanceof sn||s instanceof Ci))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ut.fromString(e,...t));return gw(a),new Ci(s.firestore,null,a)}}function Be(s,e,...t){if(s=jt(s),arguments.length===1&&(e=d0.newId()),k1("doc","path",e),s instanceof Df){const a=Ut.fromString(e,...t);return mw(a),new sn(s,null,new Ue(a))}{if(!(s instanceof sn||s instanceof Ci))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ut.fromString(e,...t));return mw(a),new sn(s.firestore,s instanceof Ci?s.converter:null,new Ue(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="AsyncQueue";class r_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NN(this,"async_queue_retry"),this._c=()=>{const a=sp();a&&ke(s_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wo(e))throw e;ke(s_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ma("INTERNAL UNHANDLED ERROR: ",a_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=A0.createAndSchedule(this,e,t,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:a_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(s){return(function(t,a){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Wr extends Df{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new r_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function n3(s,e){const t=typeof s=="object"?s:yf(),a=typeof s=="string"?s:Kh,o=Vu(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=i0("firestore");u&&t3(o,...u)}return o}function Hu(s){if(s._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||s3(s),s._firestoreClient}function s3(s){var a,o,u;const e=s._freezeSettings(),t=(function(g,x,p,b){return new S5(g,x,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,zN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Xk(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(g){const x=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(x),_online:x}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(Bn.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Js(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,Js._jsonSchema))return Js.fromBase64String(e.bytes)}}Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:_n("string",Js._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kr._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,Kr._jsonSchema))return new Kr(e.latitude,e.longitude)}}Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:_n("string",Kr._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gr(e.vectorValues);throw new Ae(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:_n("string",Gr._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=/^__.*__$/;class a3{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class HN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{Ac:s})}}class Of{constructor(e,t,a,o,u,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FN(this.Ac)&&r3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i3{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Rf(e)}Cc(e,t,a,o=!1){return new Of({Ac:e,methodName:t,Dc:a,path:zn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(s){const e=s._freezeSettings(),t=Rf(s._databaseId);return new i3(s._databaseId,!!e.ignoreUndefinedProperties,t)}function P0(s,e,t,a,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);B0("Data must be an object, but it was:",d,a);const g=KN(a,d);let x,p;if(u.merge)x=new Ms(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const N=Bp(e,w,t);if(!d.contains(N))throw new Ae(ue.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);YN(b,N)||b.push(N)}x=new Ms(b),p=d.fieldTransforms.filter((w=>x.covers(w.field)))}else x=null,p=d.fieldTransforms;return new a3(new ps(g),x,p)}class Ku extends qu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function l3(s,e,t){return new Of({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class U0 extends qu{_toFieldTransform(e){return new iN(e.path,new Eu)}isEqual(e){return e instanceof U0}}class z0 extends qu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=l3(this,e,!0),a=this.vc.map((u=>ec(u,t))),o=new Bo(a);return new iN(e.path,o)}isEqual(e){return e instanceof z0&&Ai(this.vc,e.vc)}}function qN(s,e,t,a){const o=s.Cc(1,e,t);B0("Data must be an object, but it was:",o,a);const u=[],d=ps.empty();Pi(a,((x,p)=>{const b=H0(e,x,t);p=jt(p);const w=o.yc(b);if(p instanceof Ku)u.push(b);else{const N=ec(p,w);N!=null&&(u.push(b),d.set(b,N))}}));const g=new Ms(u);return new HN(d,g,o.fieldTransforms)}function $N(s,e,t,a,o,u){const d=s.Cc(1,e,t),g=[Bp(e,a,t)],x=[o];if(u.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(Bp(e,u[N])),x.push(u[N+1]);const p=[],b=ps.empty();for(let N=g.length-1;N>=0;--N)if(!YN(p,g[N])){const k=g[N];let M=x[N];M=jt(M);const $=d.yc(k);if(M instanceof Ku)p.push(k);else{const z=ec(M,$);z!=null&&(p.push(k),b.set(k,z))}}const w=new Ms(p);return new HN(b,w,d.fieldTransforms)}function o3(s,e,t,a=!1){return ec(t,s.Cc(a?4:3,e))}function ec(s,e){if(GN(s=jt(s)))return B0("Unsupported field value:",e,s),KN(s,e);if(s instanceof qu)return(function(a,o){if(!FN(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let d=0;for(const g of a){let x=ec(g,o.wc(d));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=jt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return X5(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=qt.fromDate(a);return{timestampValue:Xh(o.serializer,u)}}if(a instanceof qt){const u=new qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Xh(o.serializer,u)}}if(a instanceof Kr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Js)return{bytesValue:hN(o.serializer,a._byteString)};if(a instanceof sn){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:v0(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Gr)return(function(d,g){return{mapValue:{fields:{[z1]:{stringValue:B1},[Gh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return x0(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${bf(a)}`)})(s,e)}function KN(s,e){const t={};return O1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(s,((a,o)=>{const u=ec(o,e.mc(a));u!=null&&(t[a]=u)})),{mapValue:{fields:t}}}function GN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof qt||s instanceof Kr||s instanceof Js||s instanceof sn||s instanceof qu||s instanceof Gr)}function B0(s,e,t){if(!GN(t)||!I1(t)){const a=bf(t);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Bp(s,e,t){if((e=jt(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return H0(s,e);throw tf("Field path arguments must be of type string or ",s,!1,void 0,t)}const c3=new RegExp("[~\\*/\\[\\]]");function H0(s,e,t){if(e.search(c3)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Fu(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function tf(s,e,t,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let x="";return(u||d)&&(x+=" (found",u&&(x+=` in field ${a}`),d&&(x+=` in document ${o}`),x+=")"),new Ae(ue.INVALID_ARGUMENT,g+s+x)}function YN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t,a,o,u){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class u3 extends QN{data(){return super.data()}}function Mf(s,e){return typeof e=="string"?H0(s,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F0{}class WN extends F0{}function Sn(s,e,...t){let a=[];e instanceof F0&&a.push(e),a=a.concat(t),(function(u){const d=u.filter((x=>x instanceof q0)).length,g=u.filter((x=>x instanceof Vf)).length;if(d>1||d>0&&g>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Vf extends WN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Vf(e,t,a)}_apply(e){const t=this._parse(e);return JN(e._query,t),new zi(e.firestore,e.converter,Rp(e._query,t))}_parse(e){const t=$u(e.firestore);return(function(u,d,g,x,p,b,w){let N;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){o_(w,b);const M=[];for(const $ of w)M.push(l_(x,u,$));N={arrayValue:{values:M}}}else N=l_(x,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||o_(w,b),N=o3(g,d,w,b==="in"||b==="not-in");return vn.create(p,b,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function sr(s,e,t){const a=e,o=Mf("where",s);return Vf._create(o,a,t)}class q0 extends F0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new q0(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const x of g)JN(d,x),d=Rp(d,x)})(e._query,t),new zi(e.firestore,e.converter,Rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $0 extends WN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $0(e,t)}_apply(e){const t=(function(o,u,d){if(o.startAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(u,d)})(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new Jo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function tc(s,e="asc"){const t=e,a=Mf("orderBy",s);return $0._create(a,t)}function l_(s,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q1(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ut.fromString(t));if(!Ue.isDocumentKey(a))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Nw(s,new Ue(a))}if(t instanceof sn)return Nw(s,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(t)}.`)}function o_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JN(s,e){const t=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class d3{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Pi(e,((o,u)=>{a[o]=this.convertValue(u,t)})),a}convertVectorValue(e){var a,o,u;const t=(u=(o=(a=e.fields)==null?void 0:a[Gh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((d=>hn(d.doubleValue)));return new Gr(t)}convertGeoPoint(e){return new Kr(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=_f(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ut.fromString(e);Nt(yN(a),9688,{name:e});const o=new Nu(a.get(1),a.get(3)),u=new Ue(a.popFirst(5));return o.isEqual(t)||Ma(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends QN{constructor(e,t,a,o,u,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Mf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pl._jsonSchemaVersion="firestore/documentSnapshot/1.0",pl._jsonSchema={type:_n("string",pl._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class Mh extends pl{data(e={}){return super.data(e)}}class xl{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Mh(this._firestore,this._userDataWriter,a.key,a,new ou(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const x=new Mh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:x,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const x=new Mh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ou(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:h3(g.type),doc:x,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=d0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(s){s=ss(s,sn);const e=ss(s.firestore,Wr);return Zk(Hu(e),s._key).then((t=>ZN(e,s,t)))}xl._jsonSchemaVersion="firestore/querySnapshot/1.0",xl._jsonSchema={type:_n("string",xl._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class G0 extends d3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function yr(s){s=ss(s,zi);const e=ss(s.firestore,Wr),t=Hu(e),a=new G0(e);return XN(s._query),e3(t,s._query).then((o=>new xl(e,a,s,o)))}function Ao(s,e,t){s=ss(s,sn);const a=ss(s.firestore,Wr),o=K0(s.converter,e,t);return Gu(a,[P0($u(a),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,rs.none())])}function Qt(s,e,t,...a){s=ss(s,sn);const o=ss(s.firestore,Wr),u=$u(o);let d;return d=typeof(e=jt(e))=="string"||e instanceof Fu?$N(u,"updateDoc",s._key,e,t,a):qN(u,"updateDoc",s._key,e),Gu(o,[d.toMutation(s._key,rs.exists(!0))])}function Rl(s){return Gu(ss(s.firestore,Wr),[new Cf(s._key,rs.none())])}function kl(s,e){const t=ss(s.firestore,Wr),a=Be(s),o=K0(s.converter,e);return Gu(t,[P0($u(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,rs.exists(!1))]).then((()=>a))}function vr(s,...e){var x,p,b;s=jt(s);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||i_(e[a])||(t=e[a++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(i_(e[a])){const w=e[a];e[a]=(x=w.next)==null?void 0:x.bind(w),e[a+1]=(p=w.error)==null?void 0:p.bind(w),e[a+2]=(b=w.complete)==null?void 0:b.bind(w)}let u,d,g;if(s instanceof sn)d=ss(s.firestore,Wr),g=Nf(s._key.path),u={next:w=>{e[a]&&e[a](ZN(d,s,w))},error:e[a+1],complete:e[a+2]};else{const w=ss(s,zi);d=ss(w.firestore,Wr),g=w._query;const N=new G0(d);u={next:k=>{e[a]&&e[a](new xl(d,N,w,k))},error:e[a+1],complete:e[a+2]},XN(s._query)}return(function(N,k,M,$){const z=new L0($),Y=new O0(k,z,M);return N.asyncQueue.enqueueAndForget((async()=>k0(await ef(N),Y))),()=>{z.Nu(),N.asyncQueue.enqueueAndForget((async()=>I0(await ef(N),Y)))}})(Hu(d),g,o,u)}function Gu(s,e){return(function(a,o){const u=new Ra;return a.asyncQueue.enqueueAndForget((async()=>Bk(await Jk(a),o,u))),u.promise})(Hu(s),e)}function ZN(s,e,t){const a=t.docs.get(e._key),o=new G0(s);return new pl(s,o,e._key,a,new ou(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,t,a){this._verifyNotCommitted();const o=ap(e,this._firestore),u=K0(o.converter,t,a),d=P0(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,a);return this._mutations.push(d.toMutation(o._key,rs.none())),this}update(e,t,a,...o){this._verifyNotCommitted();const u=ap(e,this._firestore);let d;return d=typeof(t=jt(t))=="string"||t instanceof Fu?$N(this._dataReader,"WriteBatch.update",u._key,t,a,o):qN(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,rs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ap(e,this._firestore);return this._mutations=this._mutations.concat(new Cf(t._key,rs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(s,e){if((s=jt(s)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(){return new Ku("deleteField")}function Hp(){return new U0("serverTimestamp")}function qo(...s){return new z0("arrayUnion",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(s){return Hu(s=ss(s,Wr)),new f3(s,(e=>Gu(s,e)))}(function(e,t=!0){(function(o){Qo=o})(Sl),Ri(new Da("firestore",((a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),g=new Wr(new o5(a.getProvider("auth-internal")),new d5(d,a.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(p.options.projectId,b)})(d,o),d);return u={useFetchStreams:t,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Zs(uw,dw,e),Zs(uw,dw,"esm2020")})();function e2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t2=e2,n2=new Ou("auth","Firebase",e2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new l0("@firebase/auth");function m3(s,...e){nf.logLevel<=ct.WARN&&nf.warn(`Auth (${Sl}): ${s}`,...e)}function Vh(s,...e){nf.logLevel<=ct.ERROR&&nf.error(`Auth (${Sl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(s,...e){throw Y0(s,...e)}function Yr(s,...e){return Y0(s,...e)}function s2(s,e,t){const a={...t2(),[e]:t};return new Ou("auth","Firebase",a).create(e,{appName:s.name})}function ka(s){return s2(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y0(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return n2.create(s,...e)}function $e(s,e,...t){if(!s)throw Y0(e,...t)}function Sa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Vh(e),new Error(e)}function La(s,e){s||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function g3(){return c_()==="http:"||c_()==="https:"}function c_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g3()||LA()||"connection"in navigator)?navigator.onLine:!0}function x3(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,La(t>e,"Short delay should be less than long delay!"),this.isMobile=OA()||PA()}get(){return p3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s,e){La(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v3=new Yu(3e4,6e4);function Bi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ua(s,e,t,a,o={}){return a2(s,o,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const g=Mu({key:s.config.apiKey,...d}).slice(1),x=await s._getAdditionalHeaders();x["Content-Type"]="application/json",s.languageCode&&(x["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:x,...u};return VA()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&ea(s.emulatorConfig.host)&&(p.credentials="include"),r2.fetch()(await i2(s,s.config.apiHost,t,g),p)})}async function a2(s,e,t){s._canInitEmulator=!1;const a={...y3,...e};try{const o=new _3(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw jh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[x,p]=g.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(s,"credential-already-in-use",d);if(x==="EMAIL_EXISTS")throw jh(s,"email-already-in-use",d);if(x==="USER_DISABLED")throw jh(s,"user-disabled",d);const b=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw s2(s,b,p);wr(s,b)}}catch(o){if(o instanceof _r)throw o;wr(s,"network-request-failed",{message:String(o)})}}async function Qu(s,e,t,a,o={}){const u=await Ua(s,e,t,a,o);return"mfaPendingCredential"in u&&wr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function i2(s,e,t,a){const o=`${e}${t}?${a}`,u=s,d=u.config.emulator?Q0(s.config,o):`${s.config.apiScheme}://${o}`;return b3.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function w3(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Yr(this.auth,"network-request-failed")),v3.get())})}}function jh(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Yr(s,e,a);return o.customData._tokenResponse=t,o}function u_(s){return s!==void 0&&s.enterprise!==void 0}class N3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return w3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j3(s,e){return Ua(s,"GET","/v2/recaptchaConfig",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(s,e){return Ua(s,"POST","/v1/accounts:delete",e)}async function sf(s,e){return Ua(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l2(s,e=!1){const t=jt(s),a=await t.getIdToken(e),o=X0(a);$e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:xu(lp(o.auth_time)),issuedAtTime:xu(lp(o.iat)),expirationTime:xu(lp(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function lp(s){return Number(s)*1e3}function X0(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=m1(t);return o?JSON.parse(o):(Vh("Failed to decode base64 JWT payload"),null)}catch(o){return Vh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function d_(s){const e=X0(s);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof _r&&E3(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function E3({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(s){var w;const e=s.auth,t=await s.getIdToken(),a=await $o(s,sf(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?c2(o.providerUserInfo):[],d=C3(s.providerData,u),g=s.isAnonymous,x=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),p=g?x:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new qp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function o2(s){const e=jt(s);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C3(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function c2(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(s,e){const t=await a2(s,{},async()=>{const a=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await i2(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:g,body:a};return s.emulatorConfig&&ea(s.emulatorConfig.host)&&(x.credentials="include"),r2.fetch()(d,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function R3(s,e){return Ua(s,"POST","/v2/accounts:revokeToken",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=d_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:u}=await A3(e,t);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:u}=t,d=new Ro;return a&&($e(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&($e(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&($e(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(s,e){$e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new S3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $o(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return l2(this,e)}reload(){return o2(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await rf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await $o(this,T3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,g=t.tenantId??void 0,x=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:k,providerData:M,stsTokenManager:$}=t;$e(w&&$,e,"internal-error");const z=Ro.fromJSON(this.name,$);$e(typeof w=="string",e,"internal-error"),bi(a,e.name),bi(o,e.name),$e(typeof N=="boolean",e,"internal-error"),$e(typeof k=="boolean",e,"internal-error"),bi(u,e.name),bi(d,e.name),bi(g,e.name),bi(x,e.name),bi(p,e.name),bi(b,e.name);const Y=new gr({uid:w,auth:e,email:o,emailVerified:N,displayName:a,isAnonymous:k,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:z,createdAt:p,lastLoginAt:b});return M&&Array.isArray(M)&&(Y.providerData=M.map(ae=>({...ae}))),x&&(Y._redirectEventId=x),Y}static async _fromIdTokenResponse(e,t,a=!1){const o=new Ro;o.updateFromServerResponse(t);const u=new gr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await rf(u),u}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];$e(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?c2(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new Ro;g.updateFromIdToken(a);const x=new gr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;function Ca(s){La(s instanceof Function,"Expected a class definition");let e=h_.get(s);return e?(La(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,h_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u2.type="NONE";const $p=u2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(s,e,t){return`firebase:${s}:${e}:${t}`}class ko{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Lh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Lh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sf(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new ko(Ca($p),e,a);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Ca($p);const d=Lh(a,e.config.apiKey,e.name);let g=null;for(const p of t)try{const b=await p._get(d);if(b){let w;if(typeof b=="string"){const N=await sf(e,{idToken:b}).catch(()=>{});if(!N)break;w=await gr._fromGetAccountInfoResponse(e,N,b)}else w=gr._fromJSON(e,b);p!==u&&(g=w),u=p;break}}catch{}const x=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new ko(u,e,a):(u=x[0],g&&await u._set(d,g.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new ko(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p2(e))return"Blackberry";if(x2(e))return"Webos";if(h2(e))return"Safari";if((e.includes("chrome/")||f2(e))&&!e.includes("edge/"))return"Chrome";if(g2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function d2(s=Xn()){return/firefox\//i.test(s)}function h2(s=Xn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f2(s=Xn()){return/crios\//i.test(s)}function m2(s=Xn()){return/iemobile/i.test(s)}function g2(s=Xn()){return/android/i.test(s)}function p2(s=Xn()){return/blackberry/i.test(s)}function x2(s=Xn()){return/webos/i.test(s)}function W0(s=Xn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function k3(s=Xn()){var e;return W0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function I3(){return UA()&&document.documentMode===10}function y2(s=Xn()){return W0(s)||g2(s)||x2(s)||p2(s)||/windows phone/i.test(s)||m2(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(s,e=[]){let t;switch(s){case"Browser":t=f_(Xn());break;case"Worker":t=`${f_(Xn())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=u=>new Promise((d,g)=>{try{const x=e(u);d(x)}catch(x){g(x)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(s,e={}){return Ua(s,"GET","/v2/passwordPolicy",Bi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=6;class V3{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??M3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m_(this),this.idTokenSubscription=new m_(this),this.beforeStateQueue=new D3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ca(t)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sf(this,{idToken:e}),a=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(gs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,x=await this.tryRedirectSignIn(e);(!d||d===g)&&(x!=null&&x.user)&&(a=x.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=x3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(ka(this));const t=e?jt(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O3(this),t=new V3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await R3(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ca(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Ca(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,a,o);return()=>{d=!0,x()}}else{const x=e.addObserver(t);return()=>{d=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&m3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Il(s){return jt(s)}class m_{constructor(e){this.auth=e,this.observer=null,this.addObserver=GA(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P3(s){Lf=s}function v2(s){return Lf.loadJS(s)}function U3(){return Lf.recaptchaEnterpriseScript}function z3(){return Lf.gapiScript}function B3(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class H3{constructor(){this.enterprise=new F3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class F3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const q3="recaptcha-enterprise",w2="NO_RECAPTCHA";class $3{constructor(e){this.type=q3,this.auth=Il(e)}async verify(e="verify",t=!1){async function a(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{j3(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new N3(x);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(x=>{g(x)})})}function o(u,d,g){const x=window.grecaptcha;u_(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(w2)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new H3().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(g=>{if(!t&&u_(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let x=U3();x.length!==0&&(x+=g),v2(x).then(()=>{o(g,u,d)}).catch(p=>{d(p)})}}).catch(g=>{d(g)})})}}async function g_(s,e,t,a=!1,o=!1){const u=new $3(s);let d;if(o)d=w2;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const x=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const x=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Kp(s,e,t,a,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await g_(s,e,t,t==="getOobCode");return a(s,d)}else return a(s,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await g_(s,e,t,t==="getOobCode");return a(s,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s,e){const t=Vu(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Ai(u,e??{}))return o;wr(o,"already-initialized")}return t.initialize({options:e})}function K3(s,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ca);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function N2(s,e,t){const a=Il(s);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=j2(e),{host:d,port:g}=G3(e),x=g===null?"":`:${g}`,p={url:`${u}//${d}${x}/`},b=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(Ai(p,a.config.emulator)&&Ai(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,ea(d)?(pf(`${u}//${d}${x}`),xf("Auth",!0)):Y3()}function j2(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function G3(s){const e=j2(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:p_(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:p_(d)}}}function p_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Y3(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,t){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}async function Q3(s,e){return Ua(s,"POST","/v1/accounts:update",e)}async function X3(s,e){return Ua(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(s,e){return Qu(s,"POST","/v1/accounts:signInWithPassword",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(s,e){return Qu(s,"POST","/v1/accounts:signInWithEmailLink",Bi(s,e))}async function Z3(s,e){return Qu(s,"POST","/v1/accounts:signInWithEmailLink",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Pf{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ko(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Ko(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,t,"signInWithPassword",W3);case"emailLink":return J3(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,a,"signUpPassword",X3);case"emailLink":return Z3(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(s,e){return Qu(s,"POST","/v1/accounts:signInWithIdp",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="http://localhost";class Li extends Pf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=t;if(!a||!o)return null;const d=new Li(a,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Io(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:e6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n6(s){const e=su(ru(s)).link,t=e?su(ru(e)).deep_link_id:null,a=su(ru(s)).deep_link_id;return(a?su(ru(a)).link:null)||a||t||e||s}class Uf{constructor(e){const t=su(ru(e)),a=t.apiKey??null,o=t.oobCode??null,u=t6(t.mode??null);$e(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=n6(e);try{return new Uf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.providerId=Hi.PROVIDER_ID}static credential(e,t){return Ko._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Uf.parseLink(t);return $e(a,"argument-error"),Ko._fromEmailAndCode(e,a.code,a.tenantId)}}Hi.PROVIDER_ID="password";Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends T2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Xu{constructor(){super("facebook.com")}static credential(e){return Li._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Li._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return _a.credential(t,a)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Xu{constructor(){super("github.com")}static credential(e){return Li._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Na.credential(e.oauthAccessToken)}catch{return null}}}Na.GITHUB_SIGN_IN_METHOD="github.com";Na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Xu{constructor(){super("twitter.com")}static credential(e,t){return Li._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ja.credential(t,a)}catch{return null}}}ja.TWITTER_SIGN_IN_METHOD="twitter.com";ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s6(s,e){return Qu(s,"POST","/v1/accounts:signUp",Bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const u=await gr._fromIdTokenResponse(e,a,o),d=x_(a);return new _l({user:u,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=x_(a);return new _l({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function x_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends _r{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new af(e,t,a,o)}}function E2(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(s,u,e,a):u})}async function r6(s,e,t=!1){const a=await $o(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return _l._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(s,e,t=!1){const{auth:a}=s;if(gs(a.app))return Promise.reject(ka(a));const o="reauthenticate";try{const u=await $o(s,E2(a,o,e,s),t);$e(u.idToken,a,"internal-error");const d=X0(u.idToken);$e(d,a,"internal-error");const{sub:g}=d;return $e(s.uid===g,a,"user-mismatch"),_l._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&wr(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(s,e,t=!1){if(gs(s.app))return Promise.reject(ka(s));const a="signIn",o=await E2(s,a,e),u=await _l._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(u.user),u}async function A2(s,e){return C2(Il(s),e)}async function R2(s,e){return S2(jt(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(s){const e=Il(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I2(s,e,t){if(gs(s.app))return Promise.reject(ka(s));const a=Il(s),d=await Kp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s6).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&k2(s),x}),g=await _l._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(g.user),g}function D2(s,e,t){return gs(s.app)?Promise.reject(ka(s)):A2(jt(s),Hi.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&k2(s),a})}function O2(s,e){return a6(jt(s),null,e)}async function a6(s,e,t){const{auth:a}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(u.password=t);const d=await $o(s,Q3(a,u));await s._updateTokensIfNecessary(d,!0)}function M2(s,e,t,a){return jt(s).onIdTokenChanged(e,t,a)}function V2(s,e,t){return jt(s).beforeAuthStateChanged(e,t)}function L2(s,e,t,a){return jt(s).onAuthStateChanged(e,t,a)}function P2(s){return jt(s).signOut()}const lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=1e3,l6=10;class z2 extends U2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,g,x)=>{this.notifyListeners(d,x)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);I3()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,l6):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},i6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}z2.type="LOCAL";const B2=z2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2 extends U2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}H2.type="SESSION";const J0=H2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new zf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(d).map(async p=>p(t.origin,u)),x=await o6(g);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,x)=>{const p=Z0("",20);o.port1.start();const b=setTimeout(()=>{x(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(w){const N=w;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(b),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function u6(s){Qr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function d6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h6(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function f6(){return F2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="firebaseLocalStorageDb",m6=1,of="firebaseLocalStorage",$2="fbase_key";class Wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(s,e){return s.transaction([of],e?"readwrite":"readonly").objectStore(of)}function g6(){const s=indexedDB.deleteDatabase(q2);return new Wu(s).toPromise()}function Gp(){const s=indexedDB.open(q2,m6);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(of,{keyPath:$2})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(of)?e(a):(a.close(),await g6(),e(await Gp()))})})}async function y_(s,e,t){const a=Bf(s,!0).put({[$2]:e,value:t});return new Wu(a).toPromise()}async function p6(s,e){const t=Bf(s,!1).get(e),a=await new Wu(t).toPromise();return a===void 0?null:a.value}function b_(s,e){const t=Bf(s,!0).delete(e);return new Wu(t).toPromise()}const x6=800,y6=3;class K2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>y6)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(f6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await d6(),!this.activeServiceWorker)return;this.sender=new c6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await y_(e,lf,"1"),await b_(e,lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>y_(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>p6(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>b_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Bf(o,!1).getAll();return new Wu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}K2.type="LOCAL";const G2=K2;new Yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(s,e){return e?Ca(e):($e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Pf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function v6(s){return C2(s.auth,new ex(s),s.bypassAuthState)}function w6(s){const{auth:e,user:t}=s;return $e(t,e,"internal-error"),S2(t,new ex(s),s.bypassAuthState)}async function _6(s){const{auth:e,user:t}=s;return $e(t,e,"internal-error"),r6(t,new ex(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const x={auth:this.auth,requestUri:t,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(x))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v6;case"linkViaPopup":case"linkViaRedirect":return _6;case"reauthViaPopup":case"reauthViaRedirect":return w6;default:wr(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=new Yu(2e3,1e4);class So extends Y2{constructor(e,t,a,o,u){super(e,t,o,u),this.provider=a,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=Z0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N6.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="pendingRedirect",Ph=new Map;class T6 extends Y2{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const a=await E6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E6(s,e){const t=A6(e),a=C6(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function S6(s,e){Ph.set(s._key(),e)}function C6(s){return Ca(s._redirectPersistence)}function A6(s){return Lh(j6,s.config.apiKey,s.name)}async function R6(s,e,t=!1){if(gs(s.app))return Promise.reject(ka(s));const a=Il(s),o=b6(a,e),d=await new T6(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=600*1e3;class I6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!Q2(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Yr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k6&&this.cachedEventUids.clear(),this.cachedEventUids.has(v_(e))}saveEventToCache(e){this.cachedEventUids.add(v_(e)),this.lastProcessedEventTime=Date.now()}}function v_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Q2({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(s,e={}){return Ua(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V6=/^https?/;async function L6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await O6(s);for(const t of e)try{if(P6(t))return}catch{}wr(s,"unauthorized-domain")}function P6(s){const e=Fp(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!V6.test(t))return!1;if(M6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Yu(3e4,6e4);function w_(){const s=Qr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function z6(s){return new Promise((e,t)=>{var o,u,d;function a(){w_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w_(),t(Yr(s,"network-request-failed"))},timeout:U6.get()})}if((u=(o=Qr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=Qr().gapi)!=null&&d.load)a();else{const g=B3("iframefcb");return Qr()[g]=()=>{gapi.load?a():t(Yr(s,"network-request-failed"))},v2(`${z3()}?onload=${g}`).catch(x=>t(x))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function B6(s){return Uh=Uh||z6(s),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=new Yu(5e3,15e3),F6="__/auth/iframe",q6="emulator/auth/iframe",$6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G6(s){const e=s.config;$e(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Q0(e,q6):`https://${s.config.authDomain}/${F6}`,a={apiKey:e.apiKey,appName:s.name,v:Sl},o=K6.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${t}?${Mu(a).slice(1)}`}async function Y6(s){const e=await B6(s),t=Qr().gapi;return $e(t,s,"internal-error"),e.open({where:document.body,url:G6(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$6,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const d=Yr(s,"network-request-failed"),g=Qr().setTimeout(()=>{u(d)},H6.get());function x(){Qr().clearTimeout(g),o(a)}a.ping(x).then(x,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X6=500,W6=600,J6="_blank",Z6="http://localhost";class __{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eI(s,e,t,a=X6,o=W6){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const x={...Q6,width:a.toString(),height:o.toString(),top:u,left:d},p=Xn().toLowerCase();t&&(g=f2(p)?J6:t),d2(p)&&(e=e||Z6,x.scrollbars="yes");const b=Object.entries(x).reduce((N,[k,M])=>`${N}${k}=${M},`,"");if(k3(p)&&g!=="_self")return tI(e||"",g),new __(null);const w=window.open(e||"",g,b);$e(w,s,"popup-blocked");try{w.focus()}catch{}return new __(w)}function tI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="__/auth/handler",sI="emulator/auth/handler",rI=encodeURIComponent("fac");async function N_(s,e,t,a,o,u){$e(s.config.authDomain,s,"auth-domain-config-required"),$e(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:Sl,eventId:o};if(e instanceof T2){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",KA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(e instanceof Xu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const x=await s._getAppCheckToken(),p=x?`#${rI}=${encodeURIComponent(x)}`:"";return`${aI(s)}?${Mu(g).slice(1)}${p}`}function aI({config:s}){return s.emulator?Q0(s,sI):`https://${s.authDomain}/${nI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class iI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=J0,this._completeRedirectFn=R6,this._overrideRedirectResult=S6}async _openPopup(e,t,a,o){var d;La((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await N_(e,t,a,Fp(),o);return eI(e,u,Z0())}async _openRedirect(e,t,a,o){await this._originValidation(e);const u=await N_(e,t,a,Fp(),o);return u6(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(La(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await Y6(e),a=new I6(e);return t.register("authEvent",o=>($e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(op,{type:op},o=>{var d;const u=(d=o==null?void 0:o[0])==null?void 0:d[op];u!==void 0&&t(!!u),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y2()||h2()||W0()}}const X2=iI;var j_="@firebase/auth",T_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cI(s){Ri(new Da("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;$e(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b2(s)},p=new L3(a,o,u,x);return K3(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ri(new Da("auth-internal",e=>{const t=Il(e.getProvider("auth").getImmediate());return(a=>new lI(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(j_,T_,oI(s)),Zs(j_,T_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=300,dI=x1("authIdTokenMaxAge")||uI;let E_=null;const hI=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>dI)return;const o=t==null?void 0:t.token;E_!==o&&(E_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Cu(s=yf()){const e=Vu(s,"auth");if(e.isInitialized())return e.getImmediate();const t=_2(s,{popupRedirectResolver:X2,persistence:[G2,B2,J0]}),a=x1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=hI(u.toString());V2(t,d,()=>d(t.currentUser)),M2(t,g=>d(g))}}const o=g1("auth");return o&&N2(t,`http://${o}`),t}function fI(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}P3({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=Yr("internal-error");u.customData=o,t(u)},a.type="text/javascript",a.charset="UTF-8",fI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cI("Browser");const mI=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Uf,AuthCredential:Pf,EmailAuthCredential:Ko,EmailAuthProvider:Hi,FacebookAuthProvider:wa,GithubAuthProvider:Na,GoogleAuthProvider:_a,OAuthCredential:Li,TwitterAuthProvider:ja,beforeAuthStateChanged:V2,browserLocalPersistence:B2,browserPopupRedirectResolver:X2,browserSessionPersistence:J0,connectAuthEmulator:N2,createUserWithEmailAndPassword:I2,getAuth:Cu,getIdTokenResult:l2,inMemoryPersistence:$p,indexedDBLocalPersistence:G2,initializeAuth:_2,onAuthStateChanged:L2,onIdTokenChanged:M2,prodErrorMap:t2,reauthenticateWithCredential:R2,reload:o2,signInWithCredential:A2,signInWithEmailAndPassword:D2,signOut:P2,updatePassword:O2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="type.googleapis.com/google.protobuf.Int64Value",pI="type.googleapis.com/google.protobuf.UInt64Value";function W2(s,e){const t={};for(const a in s)s.hasOwnProperty(a)&&(t[a]=e(s[a]));return t}function cf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>cf(e));if(typeof s=="function"||typeof s=="object")return W2(s,e=>cf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Go(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case gI:case pI:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Go(e)):typeof s=="function"||typeof s=="object"?W2(s,e=>Go(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ns extends _r{constructor(e,t,a){super(`${tx}/${e}`,t||""),this.details=a,Object.setPrototypeOf(this,ns.prototype)}}function xI(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function uf(s,e){let t=xI(s),a=t,o;try{const u=e&&e.error;if(u){const d=u.status;if(typeof d=="string"){if(!S_[d])return new ns("internal","internal");t=S_[d],a=d}const g=u.message;typeof g=="string"&&(a=g),o=u.details,o!==void 0&&(o=Go(o))}}catch{}return t==="ok"?null:new ns(t,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,gs(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||t.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o==null||o.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="us-central1",bI=/^data: (.*?)(?:\n|$)/;function vI(s){let e=null;return{promise:new Promise((t,a)=>{e=setTimeout(()=>{a(new ns("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class wI{constructor(e,t,a,o,u=Yp,d=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new yI(e,t,a,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Yp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function _I(s,e,t){const a=ea(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${t}`,a&&(pf(s.emulatorOrigin+"/backends"),xf("Functions",!0))}function NI(s,e,t){const a=o=>TI(s,e,o,t||{});return a.stream=(o,u)=>SI(s,e,o,u),a}function J2(s){return s.emulatorOrigin&&ea(s.emulatorOrigin)?"include":void 0}async function jI(s,e,t,a,o){t["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:J2(o)})}catch{return{status:0,json:null}}let d=null;try{d=await u.json()}catch{}return{status:u.status,json:d}}async function Z2(s,e){const t={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(t.Authorization="Bearer "+a.authToken),a.messagingToken&&(t["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=a.appCheckToken),t}function TI(s,e,t,a){const o=s._url(e);return EI(s,o,t,a)}async function EI(s,e,t,a){t=cf(t);const o={data:t},u=await Z2(s,a),d=a.timeout||7e4,g=vI(d),x=await Promise.race([jI(e,o,u,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!x)throw new ns("cancelled","Firebase Functions instance was deleted.");const p=uf(x.status,x.json);if(p)throw p;if(!x.json)throw new ns("internal","Response is not valid JSON object.");let b=x.json.data;if(typeof b>"u"&&(b=x.json.result),typeof b>"u")throw new ns("internal","Response is missing data field.");return{data:Go(b)}}function SI(s,e,t,a){const o=s._url(e);return CI(s,o,t,a||{})}async function CI(s,e,t,a){var N;t=cf(t);const o={data:t},u=await Z2(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:a==null?void 0:a.signal,credentials:J2(s)})}catch(k){if(k instanceof Error&&k.name==="AbortError"){const $=new ns("cancelled","Request was cancelled.");return{data:Promise.reject($),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject($)}}}}}}const M=uf(0,null);return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}let g,x;const p=new Promise((k,M)=>{g=k,x=M});(N=a==null?void 0:a.signal)==null||N.addEventListener("abort",()=>{const k=new ns("cancelled","Request was cancelled.");x(k)});const b=d.body.getReader(),w=AI(b,g,x,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const k=w.getReader();return{async next(){const{value:M,done:$}=await k.read();return{value:M,done:$}},async return(){return await k.cancel(),{done:!0,value:void 0}}}}},data:p}}function AI(s,e,t,a){const o=(d,g)=>{const x=d.match(bI);if(!x)return;const p=x[1];try{const b=JSON.parse(p);if("result"in b){e(Go(b.result));return}if("message"in b){g.enqueue(Go(b.message));return}if("error"in b){const w=uf(0,b);g.error(w),t(w);return}}catch(b){if(b instanceof ns){g.error(b),t(b);return}}},u=new TextDecoder;return new ReadableStream({start(d){let g="";return x();async function x(){if(a!=null&&a.aborted){const p=new ns("cancelled","Request was cancelled");return d.error(p),t(p),Promise.resolve()}try{const{value:p,done:b}=await s.read();if(b){g.trim()&&o(g.trim(),d),d.close();return}if(a!=null&&a.aborted){const N=new ns("cancelled","Request was cancelled");d.error(N),t(N),await s.cancel();return}g+=u.decode(p,{stream:!0});const w=g.split(`
`);g=w.pop()||"";for(const N of w)N.trim()&&o(N.trim(),d);return x()}catch(p){const b=p instanceof ns?p:uf(0,null);d.error(b),t(b)}}},cancel(){return s.cancel()}})}const C_="@firebase/functions",A_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="auth-internal",kI="app-check-internal",II="messaging-internal";function DI(s){const e=(t,{instanceIdentifier:a})=>{const o=t.getProvider("app").getImmediate(),u=t.getProvider(RI),d=t.getProvider(II),g=t.getProvider(kI);return new wI(o,u,d,g,a)};Ri(new Da(tx,e,"PUBLIC").setMultipleInstances(!0)),Zs(C_,A_,s),Zs(C_,A_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(s=yf(),e=Yp){const a=Vu(jt(s),tx).getImmediate({identifier:e}),o=i0("functions");return o&&tj(a,...o),a}function tj(s,e,t){_I(jt(s),e,t)}function OI(s,e,t){return NI(jt(s),e,t)}DI();const nj=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:ns,connectFunctionsEmulator:tj,getFunctions:ej,httpsCallable:OI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="firebasestorage.googleapis.com",rj="storageBucket",MI=120*1e3,VI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends _r{constructor(e,t,a=0){super(cp(e),`Firebase Storage: ${t} (${cp(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rn||(rn={}));function cp(s){return"storage/"+s}function nx(){const s="An unknown error occurred, please check the error payload for server response.";return new an(rn.UNKNOWN,s)}function LI(s){return new an(rn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function PI(s){return new an(rn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(rn.UNAUTHENTICATED,s)}function zI(){return new an(rn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BI(s){return new an(rn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function HI(){return new an(rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FI(){return new an(rn.CANCELED,"User canceled the upload/download.")}function qI(s){return new an(rn.INVALID_URL,"Invalid URL '"+s+"'.")}function $I(s){return new an(rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function KI(){return new an(rn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rj+"' property when initializing the app?")}function GI(){return new an(rn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YI(){return new an(rn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QI(s){return new an(rn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qp(s){return new an(rn.INVALID_ARGUMENT,s)}function aj(){return new an(rn.APP_DELETED,"The Firebase app was deleted.")}function XI(s){return new an(rn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yu(s,e){return new an(rn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function nu(s){throw new an(rn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=Vs.makeFromUrl(e,t)}catch{return new Vs(e,"")}if(a.path==="")return a;throw $I(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+o+d,"i"),x={bucket:1,path:3};function p(H){H.path_=decodeURIComponent(H.path)}const b="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",k=new RegExp(`^https?://${w}/${b}/b/${o}/o${N}`,"i"),M={bucket:1,path:3},$=t===sj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",Y=new RegExp(`^https?://${$}/${o}/${z}`,"i"),K=[{regex:g,indices:x,postModify:u},{regex:k,indices:M,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let H=0;H<K.length;H++){const de=K[H],ve=de.regex.exec(e);if(ve){const E=ve[de.indices.bucket];let S=ve[de.indices.path];S||(S=""),a=new Vs(E,S),de.postModify(a);break}}if(a==null)throw qI(e);return a}}class WI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(s,e,t){let a=1,o=null,u=null,d=!1,g=0;function x(){return g===2}let p=!1;function b(...z){p||(p=!0,e.apply(null,z))}function w(z){o=setTimeout(()=>{o=null,s(k,x())},z)}function N(){u&&clearTimeout(u)}function k(z,...Y){if(p){N();return}if(z){N(),b.call(null,z,...Y);return}if(x()||d){N(),b.call(null,z,...Y);return}a<64&&(a*=2);let K;g===1?(g=2,K=0):K=(a+Math.random())*1e3,w(K)}let M=!1;function $(z){M||(M=!0,N(),!p&&(o!==null?(z||(g=2),clearTimeout(o),w(0)):z||(g=1)))}return w(0),u=setTimeout(()=>{d=!0,$(!0)},t),$}function ZI(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(s){return s!==void 0}function tD(s){return typeof s=="object"&&!Array.isArray(s)}function sx(s){return typeof s=="string"||s instanceof String}function R_(s){return rx()&&s instanceof Blob}function rx(){return typeof Blob<"u"}function k_(s,e,t,a){if(a<e)throw Qp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw Qp(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function ij(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var yl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(yl||(yl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t,a,o,u,d,g,x,p,b,w,N=!0,k=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=x,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,$)=>{this.resolve_=M,this.reject_=$,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Th(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=g=>{const x=g.loaded,p=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,p)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const g=u.getErrorCode()===yl.NO_ERROR,x=u.getStatus();if(!g||nD(x,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===yl.ABORT;a(!1,new Th(!1,null,b));return}const p=this.successCodes_.indexOf(x)!==-1;a(!0,new Th(p,u))})},t=(a,o)=>{const u=this.resolve_,d=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const x=this.callback_(g,g.getResponse());eD(x)?u(x):u()}catch(x){d(x)}else if(g!==null){const x=nx();x.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,x)):d(x)}else if(o.canceled){const x=this.appDelete_?aj():FI();d(x)}else{const x=HI();d(x)}};this.canceled_?t(!1,new Th(!1,null,!0)):this.backoffId_=JI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ZI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function rD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function aD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function lD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function oD(s,e,t,a,o,u,d=!0,g=!1){const x=ij(s.urlParams),p=s.url+x,b=Object.assign({},s.headers);return iD(b,e),rD(b,t),aD(b,u),lD(b,a),new sD(p,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uD(...s){const e=cD();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(rx())return new Blob(s);throw new an(rn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(s){if(typeof atob>"u")throw QI("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class up{constructor(e,t){this.data=e,this.contentType=t||null}}function fD(s,e){switch(s){case Hr.RAW:return new up(lj(e));case Hr.BASE64:case Hr.BASE64URL:return new up(oj(s,e));case Hr.DATA_URL:return new up(gD(e),pD(e))}throw nx()}function lj(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=a,d=s.charCodeAt(++t);a=65536|(u&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function mD(s){let e;try{e=decodeURIComponent(s)}catch{throw yu(Hr.DATA_URL,"Malformed data URL.")}return lj(e)}function oj(s,e){switch(s){case Hr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw yu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Hr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw yu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=hD(e)}catch(o){throw o.message.includes("polyfill")?o:yu(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class cj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw yu(Hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=xD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function gD(s){const e=new cj(s);return e.base64?oj(Hr.BASE64,e.rest):mD(e.rest)}function pD(s){return new cj(s).contentType}function xD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){let a=0,o="";R_(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(R_(this.data_)){const a=this.data_,o=dD(a,e,t);return o===null?null:new wi(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new wi(a,!0)}}static getBlob(...e){if(rx()){const t=e.map(a=>a instanceof wi?a.data_:a);return new wi(uD.apply(null,t))}else{const t=e.map(d=>sx(d)?fD(Hr.RAW,d).data:d.data_);let a=0;t.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let u=0;return t.forEach(d=>{for(let g=0;g<d.length;g++)o[u++]=d[g]}),new wi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(s){let e;try{e=JSON.parse(s)}catch{return null}return tD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function bD(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function dj(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(s,e){return e}class ts{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||vD}}let Eh=null;function wD(s){return!sx(s)||s.length<2?s:dj(s)}function hj(){if(Eh)return Eh;const s=[];s.push(new ts("bucket")),s.push(new ts("generation")),s.push(new ts("metageneration")),s.push(new ts("name","fullPath",!0));function e(u,d){return wD(d)}const t=new ts("name");t.xform=e,s.push(t);function a(u,d){return d!==void 0?Number(d):d}const o=new ts("size");return o.xform=a,s.push(o),s.push(new ts("timeCreated")),s.push(new ts("updated")),s.push(new ts("md5Hash",null,!0)),s.push(new ts("cacheControl",null,!0)),s.push(new ts("contentDisposition",null,!0)),s.push(new ts("contentEncoding",null,!0)),s.push(new ts("contentLanguage",null,!0)),s.push(new ts("contentType",null,!0)),s.push(new ts("metadata","customMetadata",!0)),Eh=s,Eh}function _D(s,e){function t(){const a=s.bucket,o=s.fullPath,u=new Vs(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function ND(s,e,t){const a={};a.type="file";const o=t.length;for(let u=0;u<o;u++){const d=t[u];a[d.local]=d.xform(a,e[d.server])}return _D(a,s),a}function fj(s,e,t){const a=uj(e);return a===null?null:ND(s,a,t)}function jD(s,e,t,a){const o=uj(e);if(o===null||!sx(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(p=>{const b=s.bucket,w=s.fullPath,N="/b/"+d(b)+"/o/"+d(w),k=ax(N,t,a),M=ij({alt:"media",token:p});return k+M})[0]}function TD(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}class mj{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(s){if(!s)throw nx()}function ED(s,e){function t(a,o){const u=fj(s,o,e);return gj(u!==null),u}return t}function SD(s,e){function t(a,o){const u=fj(s,o,e);return gj(u!==null),jD(u,o,s.host,s._protocol)}return t}function pj(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=zI():o=UI():t.getStatus()===402?o=PI(s.bucket):t.getStatus()===403?o=BI(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function CD(s){const e=pj(s);function t(a,o){let u=e(a,o);return a.getStatus()===404&&(u=LI(s.path)),u.serverResponse=o.serverResponse,u}return t}function AD(s,e,t){const a=e.fullServerUrl(),o=ax(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,g=new mj(o,u,SD(s,t),d);return g.errorHandler=CD(e),g}function RD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function kD(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=RD(null,e)),a}function ID(s,e,t,a,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function g(){let K="";for(let H=0;H<2;H++)K=K+Math.random().toString().slice(2);return K}const x=g();d["Content-Type"]="multipart/related; boundary="+x;const p=kD(e,a,o),b=TD(p,t),w="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+x+`\r
Content-Type: `+p.contentType+`\r
\r
`,N=`\r
--`+x+"--",k=wi.getBlob(w,a,N);if(k===null)throw GI();const M={name:p.fullPath},$=ax(u,s.host,s._protocol),z="POST",Y=s.maxUploadRetryTime,ae=new mj($,z,ED(s,t),Y);return ae.urlParams=M,ae.headers=d,ae.body=k.uploadData(),ae.errorHandler=pj(e),ae}class DD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,u){if(this.sent_)throw nu("cannot .send() more than once");if(ea(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OD extends DD{initXhr(){this.xhr_.responseType="text"}}function xj(){return new OD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this._service=e,t instanceof Vs?this._location=t:this._location=Vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nl(e,t)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dj(this._location.path)}get storage(){return this._service}get parent(){const e=yD(this._location.path);if(e===null)return null;const t=new Vs(this._location.bucket,e);return new Nl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XI(e)}}function MD(s,e,t){s._throwIfRoot("uploadBytes");const a=ID(s.storage,s._location,hj(),new wi(e,!0),t);return s.storage.makeRequestWithTokens(a,xj).then(o=>({metadata:o,ref:s}))}function VD(s){s._throwIfRoot("getDownloadURL");const e=AD(s.storage,s._location,hj());return s.storage.makeRequestWithTokens(e,xj).then(t=>{if(t===null)throw YI();return t})}function LD(s,e){const t=bD(s._location.path,e),a=new Vs(s._location.bucket,t);return new Nl(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(s){return/^[A-Za-z]+:\/\//.test(s)}function UD(s,e){return new Nl(s,e)}function yj(s,e){if(s instanceof ix){const t=s;if(t._bucket==null)throw KI();const a=new Nl(t,t._bucket);return e!=null?yj(a,e):a}else return e!==void 0?LD(s,e):s}function zD(s,e){if(e&&PD(e)){if(s instanceof ix)return UD(s,e);throw Qp("To use ref(service, url), the first argument must be a Storage instance.")}else return yj(s,e)}function I_(s,e){const t=e==null?void 0:e[rj];return t==null?null:Vs.makeFromBucketSpec(t,s)}function BD(s,e,t,a={}){s.host=`${e}:${t}`;const o=ea(e);o&&(pf(`https://${s.host}/b`),xf("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:y1(u,s.app.options.projectId))}class ix{constructor(e,t,a,o,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=sj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MI,this._maxUploadRetryTime=VI,this._requests=new Set,o!=null?this._bucket=Vs.makeFromBucketSpec(o,this._host):this._bucket=I_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vs.makeFromBucketSpec(this._url,e):this._bucket=I_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nl(this,e)}_makeRequest(e,t,a,o,u=!0){if(this._deleted)return new WI(aj());{const d=oD(e,this._appId,a,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const D_="@firebase/storage",O_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="storage";function er(s,e,t){return s=jt(s),MD(s,e,t)}function tr(s){return s=jt(s),VD(s)}function nr(s,e){return s=jt(s),zD(s,e)}function HD(s=yf(),e){s=jt(s);const a=Vu(s,bj).getImmediate({identifier:e}),o=i0("storage");return o&&FD(a,...o),a}function FD(s,e,t,a={}){BD(s,e,t,a)}function qD(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new ix(t,a,o,e,Sl)}function $D(){Ri(new Da(bj,qD,"PUBLIC").setMultipleInstances(!0)),Zs(D_,O_,""),Zs(D_,O_,"esm2020")}$D();const lx={apiKey:"AIzaSyAfqqFbf2AVCOOm8Trm57qTSpWoAk-Jbx4",authDomain:"vang-anh-bd21c.firebaseapp.com",projectId:"vang-anh-bd21c",storageBucket:"vang-anh-bd21c.firebasestorage.app",messagingSenderId:"246040395102",appId:"1:246040395102:web:83653e18267f8eb242e3cf"},Hf=c0(lx),Te=n3(Hf),zh=Cu(Hf),KD=ej(Hf),Ls=HD(Hf),vj=Object.freeze(Object.defineProperty({__proto__:null,auth:zh,db:Te,firebaseConfig:lx,functions:KD,storage:Ls},Symbol.toStringTag,{value:"Module"})),wj=j.createContext(void 0),GD=({children:s})=>{const[e,t]=j.useState(null),[a,o]=j.useState(!0);j.useEffect(()=>{const g=L2(zh,async x=>{if(x)try{const p=Be(Te,"users",x.uid),b=await xr(p);if(b.exists())t({id:b.id,...b.data()});else if(x.email){const w=Sn(kt(Te,"users"),sr("email","==",x.email)),N=await yr(w);if(N.empty)console.warn("User found in Auth but not in Firestore (ID or Email mismatch)"),t(null);else{const k=N.docs[0].data();t({id:N.docs[0].id,...k})}}else t(null)}catch(p){console.error("Error fetching user data:",p),t(null)}else t(null);o(!1)});return()=>g()},[]);const u=async(g,x)=>{try{if(!x)throw new Error("Password is required for Firebase Auth");let p=g;if(!g.includes("@"))try{const{httpsCallable:b}=await du(async()=>{const{httpsCallable:$}=await Promise.resolve().then(()=>nj);return{httpsCallable:$}},[]),{functions:w}=await du(async()=>{const{functions:$}=await Promise.resolve().then(()=>vj);return{functions:$}},void 0);p=(await b(w,"getEmailByUsername")({username:g})).data.email}catch(b){console.error("Username lookup failed:",b);const w=Sn(kt(Te,"users"),sr("username","==",g)),N=await yr(w);if(N.empty)return console.error("Username not found"),!1;const k=N.docs[0].data();k.email&&(p=k.email)}return await D2(zh,p,x),!0}catch(p){return console.error("Login failed:",p),!1}},d=async()=>{try{await P2(zh),t(null)}catch(g){console.error("Logout failed:",g)}};return i.jsx(wj.Provider,{value:{user:e,login:u,logout:d,isAuthenticated:!!e,loading:a},children:!a&&s})},ys=()=>{const s=j.useContext(wj);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},_j=j.createContext(void 0),YD=({toasts:s,removeToast:e})=>i.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:s.map(t=>i.jsxs("div",{className:"pointer-events-auto w-80 bg-white rounded-xl shadow-2xl border-l-4 border-green-500 overflow-hidden animate-in slide-in-from-right duration-300 relative",children:[i.jsxs("div",{className:"p-4 flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(uu,{className:"h-4 w-4 text-green-600"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900",children:t.message}),t.subMessage&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.subMessage})]}),i.jsx("button",{onClick:()=>e(t.id),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Jt,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"h-1 w-full bg-gray-100",children:i.jsx("div",{className:"h-full bg-green-500 animate-[width_3s_linear_forwards] w-full origin-left"})}),i.jsx("style",{children:`
            @keyframes width {
              from { width: 100%; }
              to { width: 0%; }
            }
          `})]},t.id))}),QD=s=>{const e=new Date(s),a=Math.floor((new Date().getTime()-e.getTime())/1e3);return a<60?"Va xong":a<3600?`${Math.floor(a/60)} pht trc`:a<86400?`${Math.floor(a/3600)} gi trc`:`${Math.floor(a/86400)} ngy trc`},XD=({children:s})=>{const{user:e}=ys(),[t,a]=j.useState([]),[o,u]=j.useState([]);j.useEffect(()=>{const N=setTimeout(()=>{d("Cho mng quay tr li!","H thng  sn sng lm vic.","success")},1e3);return()=>clearTimeout(N)},[]),j.useEffect(()=>{if(!e){u([]);return}const N=Sn(kt(Te,"notifications"),sr("receivers","array-contains",e.id),tc("createdAt","desc")),k=vr(N,M=>{const $=M.docs.map(z=>{var ae;const Y=z.data();return{id:z.id,type:Y.type,user:Y.senderName,avatar:Y.senderAvatar,content:Y.message.replace(Y.senderName,"").trim(),time:QD(Y.createdAt),isRead:Y.isRead,fileType:(ae=Y.metadata)==null?void 0:ae.fileType,targetPath:Y.targetPath}});u($)});return()=>k()},[e]);const d=(N,k="",M="success")=>{const $=Date.now().toString();a(z=>[...z,{id:$,message:N,subMessage:k,type:M}]),setTimeout(()=>{a(z=>z.filter(Y=>Y.id!==$))},3e3)},g=N=>{a(k=>k.filter(M=>M.id!==N))},x=async N=>{u(k=>k.map(M=>M.id===N?{...M,isRead:!0}:M));try{const k=Be(Te,"notifications",N);await Qt(k,{isRead:!0})}catch(k){console.error("Error marking notification as read:",k)}},p=async()=>{u(k=>k.map(M=>({...M,isRead:!0}))),o.filter(k=>!k.isRead).map(k=>k.id).forEach(async k=>{try{await Qt(Be(Te,"notifications",k),{isRead:!0})}catch(M){console.error(M)}})},b=N=>{u(k=>k.filter(M=>M.id!==N))},w=o.filter(N=>!N.isRead).length;return i.jsxs(_j.Provider,{value:{addToast:d,notifications:o,markAsRead:x,markAllAsRead:p,removeNotification:b,unreadCount:w},children:[s,i.jsx(YD,{toasts:t,removeToast:g})]})},Nr=()=>{const s=j.useContext(_j);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},WD=({isOpen:s,onClose:e})=>{const[t,a]=j.useState(""),[o,u]=j.useState(""),[d,g]=j.useState(""),[x,p]=j.useState(!1),[b,w]=j.useState(!1),[N,k]=j.useState(!1),{addToast:M}=Nr();if(!s)return null;const $=async z=>{if(z.preventDefault(),o!==d){M("Mt khu mi khng khp!","error");return}if(o.length<6){M("Mt khu mi phi c t nht 6 k t.","error");return}k(!0);try{const ae=Cu().currentUser;if(ae&&ae.email){const K=Hi.credential(ae.email,t);await R2(ae,K),await O2(ae,o),M("i mt khu thnh cng!","success"),e(),a(""),u(""),g("")}else M("Khng tm thy thng tin ngi dng.","error")}catch(Y){console.error("Error changing password:",Y),Y.code==="auth/wrong-password"?M("Mt khu hin ti khng ng.","error"):Y.code==="auth/too-many-requests"?M("Qu nhiu ln th tht bi. Vui lng th li sau.","error"):M(`Li: ${Y.message}`,"error")}finally{k(!1)}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Oo,{className:"h-5 w-5"}),"i mt khu"]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("form",{onSubmit:$,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:t,onChange:z=>a(z.target.value),placeholder:"Nhp mt khu hin ti..."}),i.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:x?i.jsx(gp,{className:"h-4 w-4"}):i.jsx(bl,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:b?"text":"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:z=>u(z.target.value),placeholder:"Nhp mt khu mi..."}),i.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:b?i.jsx(gp,{className:"h-4 w-4"}):i.jsx(bl,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),i.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all text-gray-900 bg-white",value:d,onChange:z=>g(z.target.value),placeholder:"Nhp li mt khu mi..."})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:N,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},JD=({isOpen:s,onClose:e})=>{const{user:t}=ys(),{addToast:a}=Nr(),[o,u]=j.useState(""),[d,g]=j.useState(""),[x,p]=j.useState(""),[b,w]=j.useState(""),[N,k]=j.useState(""),[M,$]=j.useState(!1),[z,Y]=j.useState(!1),[ae,K]=j.useState(!1),H=j.useRef(null),de=j.useRef(null);if(j.useEffect(()=>{t&&s&&(u(t.fullName||""),g(t.phone||""),p(t.address||""),w(t.avatar||""),k(t.signatureUrl||""))},[t,s]),!s)return null;const ve=async V=>{var Ne;const R=(Ne=V.target.files)==null?void 0:Ne[0];if(!(!R||!t)){if(!R.type.startsWith("image/")){a("Vui lng chn file nh!","","error");return}if(R.size>2*1024*1024){a("Kch thc nh ti a l 2MB!","","error");return}Y(!0);try{const je=nr(Ls,`avatars/${t.id}/${Date.now()}_${R.name}`);await er(je,R);const ee=await tr(je);w(ee),a("Ti nh i din thnh cng!","","success")}catch(je){console.error("Error uploading avatar:",je),a("Li khi ti nh i din!","","error")}finally{Y(!1)}}},E=async V=>{var Ne;const R=(Ne=V.target.files)==null?void 0:Ne[0];if(!(!R||!t)){if(R.type!=="image/png"){a("Vui lng chn file PNG cho ch k ( c nn trong sut)!","","error");return}if(R.size>1*1024*1024){a("Kch thc ch k ti a l 1MB!","","error");return}K(!0);try{const je=nr(Ls,`signatures/${t.id}/signature.png`);await er(je,R,{contentType:"image/png"});const ee=await tr(je);k(ee),a("Ti ch k thnh cng!","","success")}catch(je){console.error("Error uploading signature:",je),a("Li khi ti ch k!","","error")}finally{K(!1)}}},S=()=>{k(""),a(" xa ch k!","","success")},A=async V=>{if(V.preventDefault(),!!t){if(!o.trim()){a("H v tn khng c  trng!","","error");return}$(!0);try{const R=Be(Te,"users",t.id);await Qt(R,{fullName:o.trim(),phone:d.trim(),address:x.trim(),avatar:b,signatureUrl:N}),a("Cp nht thng tin thnh cng!","","success"),e(),window.location.reload()}catch(R){console.error("Error updating profile:",R),a("Li khi cp nht thng tin!","","error")}finally{$(!1)}}},O=V=>V?V.charAt(0).toUpperCase():"U",I=V=>{switch(V){case"admin":return"bg-red-100 text-red-700 border-red-200";case"head_teacher":return"bg-blue-100 text-blue-700 border-blue-200";case"office_head":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"teacher":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"staff":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200 text-gray-900",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(mr,{className:"h-5 w-5"}),"Thng tin ti khon"]}),i.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{onSubmit:A,className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative group",children:[b?i.jsx("img",{src:b,alt:o,className:"h-24 w-24 rounded-full object-cover border-4 border-blue-100 shadow-lg"}):i.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold border-4 border-blue-100 shadow-lg",children:O(o)}),i.jsx("button",{type:"button",onClick:()=>{var V;return(V=H.current)==null?void 0:V.click()},disabled:z,className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:z?i.jsx(Ni,{className:"h-6 w-6 text-white animate-spin"}):i.jsx(nC,{className:"h-6 w-6 text-white"})}),i.jsx("input",{type:"file",ref:H,onChange:ve,accept:"image/*",className:"hidden"})]}),i.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${I(t==null?void 0:t.role)}`,children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(i1,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"truncate",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(mr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:t==null?void 0:t.username})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nhm"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx(Fh,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:(t==null?void 0:t.group)||"Cha cp nht"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Trng thi"}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${(t==null?void 0:t.status)==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(t==null?void 0:t.status)==="active"?"Hot ng":"Khng hot ng"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(mr,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:o,onChange:V=>u(V.target.value),placeholder:"Nhp h v tn..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S in thoi"}),i.jsxs("div",{className:"relative",children:[i.jsx(o1,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"tel",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:d,onChange:V=>g(V.target.value),placeholder:"Nhp s in thoi..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"a ch"}),i.jsxs("div",{className:"relative",children:[i.jsx($C,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-900 bg-white",value:x,onChange:V=>p(V.target.value),placeholder:"Nhp a ch..."})]})]})]}),i.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Ds,{className:"h-5 w-5 text-indigo-600"}),i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ch k in t"})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Ti ln nh ch k nh dng PNG vi nn trong sut. Ch k s c s dng khi chn vo ti liu Word."}),N?i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"relative inline-block rounded-lg border-2 border-dashed border-indigo-200 p-2",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:[i.jsx("img",{src:N,alt:"Ch k",className:"max-h-20 max-w-full object-contain"}),i.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",title:"Xa ch k",children:i.jsx(Tn,{className:"h-3 w-3"})})]})}):i.jsx("div",{className:"mb-3 flex items-center justify-center h-20 rounded-lg border-2 border-dashed border-indigo-200",style:{background:"repeating-conic-gradient(#e5e7eb 0% 25%, transparent 0% 50%) 50% / 16px 16px"},children:i.jsx("span",{className:"text-sm text-gray-400",children:"Cha c ch k"})}),i.jsx("button",{type:"button",onClick:()=>{var V;return(V=de.current)==null?void 0:V.click()},disabled:ae,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-700 bg-white border border-indigo-300 rounded-lg hover:bg-indigo-50 transition-colors disabled:opacity-50",children:ae?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang ti..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"h-4 w-4"})," ",N?"Thay i ch k":"Ti ln ch k"]})}),i.jsx("input",{type:"file",ref:de,onChange:E,accept:"image/png",className:"hidden"})]}),i.jsxs("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-100",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",disabled:M,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:M?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang lu..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," Lu thay i"]})})]})]})})]})})},ZD=()=>{const s=Pa(),e=rr(),{user:t,logout:a}=ys(),{notifications:o,unreadCount:u,markAllAsRead:d,markAsRead:g,removeNotification:x}=Nr(),[p,b]=j.useState(!1),[w,N]=j.useState(!1),[k,M]=j.useState(!1),[$,z]=j.useState(!1),[Y,ae]=j.useState(""),[K,H]=j.useState(""),de=j.useRef(null),ve=j.useRef(null);if(j.useEffect(()=>{const I=V=>{de.current&&!de.current.contains(V.target)&&b(!1),ve.current&&!ve.current.contains(V.target)&&N(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]),j.useEffect(()=>{(async()=>{try{const V=Be(Te,"app_settings","system_logo"),R=await xr(V);R.exists()&&R.data().imageUrl&&ae(R.data().imageUrl);const Ne=Be(Te,"app_settings","certification_logo"),je=await xr(Ne);je.exists()&&je.data().imageUrl&&H(je.data().imageUrl)}catch(V){console.error("Error fetching logo:",V)}})()},[]),s.pathname==="/login")return null;const E=async()=>{await a(),e("/login")},S=I=>I?I.charAt(0).toUpperCase():"U",A=I=>{switch(I){case"admin":return"bg-red-500";case"head_teacher":return"bg-blue-500";case"office_head":return"bg-cyan-600";case"teacher":return"bg-emerald-500";case"staff":return"bg-purple-500";default:return"bg-gray-500"}},O=I=>{switch(I){case"admin":return"bg-blue-900";case"teacher":return"bg-orange-500";case"head_teacher":return"bg-indigo-600";case"office_head":return"bg-teal-700";case"staff":return"bg-teal-600";default:return"bg-blue-900"}};return i.jsxs("header",{className:`sticky top-0 z-50 w-full ${O(t==null?void 0:t.role)} text-white shadow-lg border-b border-white/10 transition-colors duration-500 animate-in slide-in-from-top-full`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-20",children:[i.jsxs("div",{onClick:()=>e("/"),className:"flex items-center gap-4 cursor-pointer group",children:[i.jsx("div",{className:"p-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl group-hover:bg-white group-hover:scale-105 transition-all duration-300 shadow-lg overflow-hidden",children:Y?i.jsx("img",{src:Y,alt:"Logo",className:"h-8 w-8 object-contain"}):i.jsx(s0,{className:"h-8 w-8 text-yellow-300 group-hover:text-yellow-600 transition-colors"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-lg md:text-xl font-bold text-white tracking-tight drop-shadow-sm",children:d1}),i.jsx("span",{className:"text-xs text-white/80 font-medium uppercase tracking-wider opacity-90",children:"H thng qun l tp trung"})]}),K&&i.jsx("div",{className:"hidden lg:block ml-4 pl-4 border-l border-white/20",children:i.jsx("img",{src:K,alt:"Chng nhn",className:"h-10 w-auto object-contain drop-shadow-md hover:scale-110 transition-transform duration-300",title:"Trng t chun Quc gia"})})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-6",children:[i.jsxs("div",{className:"hidden md:flex items-center bg-black/20 border border-white/10 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-white/30 focus-within:bg-black/30 transition-all duration-300 w-64 backdrop-blur-sm",children:[i.jsx(El,{className:"h-5 w-5 text-white/70"}),i.jsx("input",{type:"text",placeholder:"Tm kim vn bn...",className:"ml-2 bg-transparent border-none outline-none text-sm text-white placeholder-white/60 w-full"})]}),i.jsxs("div",{className:"relative",ref:ve,children:[i.jsxs("button",{onClick:()=>N(!w),className:`relative p-2 text-white/80 hover:bg-white/10 hover:text-white rounded-full transition-all duration-200 group ${u>0?"animate-wiggle":""}`,children:[i.jsx($v,{className:`h-6 w-6 ${w?"text-white":""} group-hover:scale-110 transition-transform`}),u>0&&i.jsx("span",{className:"absolute top-1 right-2 h-4 w-4 bg-red-500 rounded-full ring-2 ring-white/20 shadow-lg shadow-red-500/50 flex items-center justify-center text-[10px] font-bold text-white",children:u})]}),w&&i.jsxs("div",{className:"absolute right-0 top-full mt-4 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng bo mi"}),u>0&&i.jsxs("button",{onClick:d,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[i.jsx(uu,{className:"h-3 w-3"})," nh du  c"]})]}),i.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[o.map(I=>i.jsxs("div",{onClick:()=>{if(g(I.id),x(I.id),I.targetPath){const V=I.targetPath.includes("highlight=");let R=I.targetPath;if(!V){const Ne=I.targetPath.includes("?")?"&":"?";R=`${I.targetPath}${Ne}highlight=true`}e(R),N(!1)}},className:`p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer flex gap-3 ${I.isRead?"bg-white":"bg-blue-50/40"}`,children:[i.jsxs("div",{className:"flex-shrink-0 pt-1",children:[I.avatar?i.jsx("img",{src:I.avatar,alt:I.user,className:"h-10 w-10 rounded-full object-cover border border-gray-200"}):i.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-bold border border-gray-200 ${I.type==="system"?"bg-gray-800 text-white":"bg-blue-100 text-blue-700"}`,children:S(I.user)}),i.jsxs("div",{className:"absolute -mt-3 -ml-1 h-5 w-5 rounded-full border-2 border-white flex items-center justify-center bg-white shadow-sm",children:[I.type==="upload"&&i.jsx(Ge,{className:"h-3 w-3 text-emerald-500"}),I.type==="comment"&&i.jsx(Ta,{className:"h-3 w-3 text-blue-500"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 leading-snug",children:[i.jsx("span",{className:"font-bold",children:I.user})," ",I.content]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs text-gray-400 font-medium",children:I.time}),I.fileType&&i.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:I.fileType}),!I.isRead&&i.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]})]})]},I.id)),o.length===0&&i.jsxs("div",{className:"p-8 text-center text-gray-400",children:[i.jsx($v,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),i.jsx("p",{className:"text-sm",children:"Khng c thng bo mi"})]})]}),i.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:i.jsx("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 transition-colors",children:"Xem tt c thng bo"})})]})]}),i.jsxs("div",{className:"relative pl-4 border-l border-white/20",ref:de,children:[i.jsxs("button",{onClick:()=>b(!p),className:`flex items-center gap-3 p-1.5 rounded-full md:rounded-xl transition-all duration-200 ${p?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,children:[i.jsxs("div",{className:"relative",children:[t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:t.fullName,className:"h-9 w-9 rounded-full object-cover border-2 border-white/20 shadow-sm"}):i.jsx("div",{className:`h-9 w-9 rounded-full ${A(t==null?void 0:t.role)} text-white flex items-center justify-center text-sm font-bold border-2 border-white/20 shadow-sm`,children:t?S(t.fullName):i.jsx(gC,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-white/20"})]}),t?i.jsxs("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:[i.jsx("span",{className:"text-sm font-bold text-white leading-none mb-1",children:t.fullName}),i.jsx("span",{className:"text-[10px] text-white font-medium bg-black/20 px-1.5 py-0.5 rounded border border-white/10",children:t.roleLabel})]}):i.jsx("div",{className:"hidden md:flex flex-col items-start text-left mr-1",children:i.jsx("span",{className:"text-sm font-bold text-white",children:"Khch"})}),i.jsx(lC,{className:`hidden md:block h-4 w-4 text-white/70 transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-60 bg-white rounded-xl shadow-2xl border border-gray-100 ring-1 ring-black/5 overflow-hidden z-50 origin-top-right animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 bg-gray-50 md:hidden",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:(t==null?void 0:t.fullName)||"Khch"}),i.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.roleLabel})]}),i.jsxs("div",{className:"p-1.5",children:[i.jsxs("button",{onClick:()=>{b(!1),z(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-md",children:i.jsx(mr,{className:"h-4 w-4"})}),"Thng tin ti khon"]}),i.jsxs("button",{onClick:()=>{b(!1),M(!0)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-600 rounded-md",children:i.jsx(aA,{className:"h-4 w-4"})}),"i mt khu"]})]}),i.jsx("div",{className:"h-px bg-gray-100 my-0.5 mx-2"}),i.jsx("div",{className:"p-1.5",children:i.jsxs("button",{onClick:E,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors",children:[i.jsx("div",{className:"p-1.5 bg-red-100 text-red-500 rounded-md",children:i.jsx(HC,{className:"h-4 w-4"})}),"ng xut"]})})]})]})]})]})}),i.jsx(WD,{isOpen:k,onClose:()=>M(!1)}),i.jsx(JD,{isOpen:$,onClose:()=>z(!1)})]})},za=()=>{const[s,e]=j.useState(!1);return j.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),s},eO=({data:s,onClick:e})=>{const{id:t,title:a,description:o,icon:u,colorClass:d,bgClass:g,hoverClass:x,stats:p}=s,b=za();return i.jsxs("div",{onClick:()=>e(t),className:`
        group relative overflow-hidden ${b?"rounded-xl":"rounded-2xl"} border border-gray-100 bg-white ${b?"p-4":"p-8"} shadow-lg 
        transition-all duration-500 ease-out 
        cursor-pointer 
        hover:-translate-y-1 hover:shadow-xl
        ${x}
      `,children:[i.jsx("div",{className:`absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br ${g} blur-3xl opacity-50 group-hover:opacity-100 transition-opacity duration-500`}),i.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:`${b?"mb-3 h-10 w-10":"mb-6 h-16 w-16"} inline-flex items-center justify-center ${b?"rounded-xl":"rounded-2xl"} bg-gradient-to-br ${g} shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(u,{className:`${b?"h-5 w-5":"h-8 w-8"} ${d}`})}),i.jsx("h3",{className:`${b?"mb-1 text-base":"mb-3 text-2xl"} font-bold text-gray-800 group-hover:text-gray-900 tracking-tight`,children:a}),!b&&i.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:o})]}),i.jsxs("div",{className:`flex items-center justify-between ${b?"pt-2":"pt-4"} border-t border-gray-50`,children:[p&&i.jsx("span",{className:`${b?"text-[10px] px-2 py-0.5":"text-xs px-3 py-1"} font-semibold rounded-full bg-gray-50 text-gray-600 group-hover:bg-white group-hover:shadow-sm transition-all`,children:p}),!b&&i.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${d} opacity-0 transform translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300`,children:["Truy cp ",i.jsx(Hh,{className:"h-4 w-4"})]})]})]})]})},Nj=j.createContext(void 0),tO=({children:s})=>{const[e,t]=j.useState("2025-2026"),[a,o]=j.useState(["2025-2026"]),[u,d]=j.useState(!0);j.useEffect(()=>{const p=Sn(kt(Te,"school_years")),b=vr(p,w=>{const N=w.docs.map(k=>k.id).sort().reverse();N.length===0?g():(o(N),N.includes(e)||t(N[0])),d(!1)});return()=>b()},[]);const g=async()=>{try{await Ao(Be(Te,"school_years","2025-2026"),{createdAt:Hp(),name:"Nm hc 2025-2026"}),o(["2025-2026"]),t("2025-2026")}catch(p){console.error("Error initializing default school year:",p)}},x=async p=>{try{await Ao(Be(Te,"school_years",p),{createdAt:Hp(),name:`Nm hc ${p}`}),t(p)}catch(b){throw console.error("Error creating school year:",b),b}};return i.jsx(Nj.Provider,{value:{currentSchoolYear:e,setCurrentSchoolYear:t,schoolYears:a,isLoading:u,createNewSchoolYear:x},children:s})},Ju=()=>{const s=j.useContext(Nj);if(s===void 0)throw new Error("useSchoolYear must be used within a SchoolYearProvider");return s},nO=()=>{var N,k;const s=rr(),{user:e,isAuthenticated:t}=ys(),{currentSchoolYear:a,setCurrentSchoolYear:o,schoolYears:u,createNewSchoolYear:d}=Ju(),[g,x]=Br.useState([]),p=za(),b=async()=>{const M=prompt("Nhp nm hc mi (VD: 2026-2027):");if(M){if(!M.match(/^\d{4}-\d{4}$/)){alert("nh dng nm hc khng hp l. Vui lng nhp dng YYYY-YYYY (VD: 2026-2027)");return}try{await d(M),alert(` khi to nm hc ${M} thnh cng!`)}catch{alert("C li xy ra khi to nm hc.")}}};if(j.useEffect(()=>{const M=Sn(kt(Te,"classes")),$=vr(M,async z=>{const Y=z.docs.map(E=>({id:E.id,...E.data()})),ae=Sn(kt(Te,"users"),sr("role","in",["teacher","head_teacher"])),H=(await yr(ae)).docs.map(E=>E.data()),de=E=>E.toLowerCase().trim().replace(/\s+/g," "),ve=Y.map(E=>{const S=new Set,A=de(E.id),O=de(E.name);H.forEach(V=>{if(!V.accessScope)return;const R=de(V.accessScope);(R===A||R===O||O.includes(R)||R.includes(O))&&S.add(V.fullName)});const I=Array.from(S);return{...E,teachers:I.length>0?I:["Cha phn cng"],teacher:I.length>0?I.join(", "):"Cha phn cng"}});ve.sort((E,S)=>E.name.localeCompare(S.name)),x(ve)});return()=>$()},[]),j.useEffect(()=>{t||s("/login")},[t,s]),!e)return null;const w=M=>{var $;if(M==="van-ban-chi-dao")s("/van-ban-chi-dao");else if(M==="van-ban-truong")s("/van-ban-truong");else if(M==="quan-tri-he-thong")s("/quan-tri-he-thong");else if(M==="to-van-phong-ke-hoach")s("/to-van-phong-ke-hoach");else if(M==="to-van-phong-thuc-don"){if(e.group==="T Chuyn Mn"&&e.role!=="admin"){alert("Bn khng c quyn truy cp phn h ny. Khu vc dnh ring cho Ban Gim Hiu v T Vn Phng.");return}s("/to-van-phong-thuc-don")}else if(M==="to-chuyen-mon-ke-hoach")s("/to-chuyen-mon-ke-hoach");else if(M.startsWith("class-")){const z=M.replace("class-","");if(e.role==="teacher"){const Y=g.find(K=>K.id===z),ae=($=e.accessScope)==null?void 0:$.toLowerCase().trim();if(Y&&ae!==z.toLowerCase()&&ae!==Y.name.toLowerCase()){alert("Bn ch c quyn truy cp vo lp ca mnh.");return}}s(`/class/${z}`)}else console.log(`Navigating to category: ${M}`),alert(`ang truy cp vo phn h: ${M} (ang pht trin)`)};return i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsx("div",{className:`bg-white border-b border-gray-200 ${p?"pt-4 pb-4 mb-4":"pt-8 pb-8 mb-8"}`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[!p&&i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(a1,{className:"h-5 w-5 text-yellow-500"}),i.jsx("span",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"Bng iu khin qun tr"})]}),i.jsx("h2",{className:`${p?"text-xl":"text-3xl md:text-4xl"} font-bold text-gray-900 truncate`,children:p?`Cho c ${(N=e.fullName)==null?void 0:N.split(" ").pop()}`:`Xin cho c: ${e.fullName}`}),i.jsx("p",{className:`text-gray-500 ${p?"text-xs mt-0.5":"mt-1"}`,children:p?i.jsx("span",{className:"font-medium text-gray-700",children:e.roleLabel}):i.jsxs(i.Fragment,{children:["Vai tr: ",i.jsx("span",{className:"font-medium text-gray-800",children:e.roleLabel})," - ",i.jsx("span",{className:"font-medium text-gray-800",children:e.group})]})})]}),i.jsxs("div",{className:`flex items-center gap-2 bg-gray-50 ${p?"p-1.5":"p-2"} rounded-lg border border-gray-200 flex-shrink-0`,children:[!p&&i.jsx("span",{className:"text-sm font-medium text-gray-600 whitespace-nowrap px-2",children:"Nm hc:"}),i.jsx("select",{value:a,onChange:M=>o(M.target.value),className:`form-select ${p?"text-xs py-1 pl-2 pr-6":"text-sm py-1.5 pl-3 pr-8"} font-bold text-gray-800 bg-white border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500`,children:u.map(M=>i.jsx("option",{value:M,children:M},M))}),e.role==="admin"&&i.jsx("button",{onClick:b,className:`${p?"p-1":"ml-2 p-1.5"} text-blue-600 hover:bg-blue-100 rounded-md transition-colors`,title:"Khi to nm hc mi",children:i.jsx(Gv,{className:`${p?"h-3.5 w-3.5":"h-4 w-4"}`})})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 ${p?"gap-3":"gap-6 xl:gap-8"}`,children:[i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-blue-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-200 hover:border-blue-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-blue-50 to-indigo-100 blur-3xl opacity-50"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-4"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(Gv,{className:`${p?"h-5 w-5":"h-7 w-7"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-blue-700 transition-colors`,children:"QUN L VN BN CHUNG"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Lu tr v qun l tp trung cc vn bn hnh chnh i v n."})]}),i.jsxs("div",{className:`flex-1 grid grid-cols-2 gap-px bg-gray-100 border-t border-gray-100 ${p?"mt-1":"mt-2"}`,children:[i.jsxs("div",{onClick:()=>s("/van-ban-chi-dao"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-blue-50/50 transition-colors group/item relative`,children:[i.jsxs("div",{className:`flex items-center justify-between ${p?"mb-1.5":"mb-3"}`,children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-blue-100 text-blue-600 rounded-lg`,children:i.jsx(VC,{className:`${p?"h-4 w-4":"h-6 w-6"}`})}),!p&&i.jsx(Hh,{className:"h-4 w-4 text-blue-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:`font-bold text-gray-800 ${p?"text-xs mb-0.5":"mb-1"} group-hover/item:text-blue-700`,children:"Vn bn Cp trn"}),i.jsxs("div",{className:"flex flex-wrap gap-0.5",children:[i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"S/B GD"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"UBND"})]})]}),i.jsxs("div",{onClick:()=>s("/van-ban-truong"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-emerald-50/50 transition-colors group/item relative`,children:[i.jsxs("div",{className:`flex items-center justify-between ${p?"mb-1.5":"mb-3"}`,children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-emerald-100 text-emerald-600 rounded-lg`,children:i.jsx(u1,{className:`${p?"h-4 w-4":"h-6 w-6"}`})}),!p&&i.jsx(Hh,{className:"h-4 w-4 text-emerald-400 opacity-0 -translate-x-2 group-hover/item:opacity-100 group-hover/item:translate-x-0 transition-all"})]}),i.jsx("h4",{className:`font-bold text-gray-800 ${p?"text-xs mb-0.5":"mb-1"} group-hover/item:text-emerald-700`,children:"Vn bn Ni b"}),i.jsxs("div",{className:"flex flex-wrap gap-0.5",children:[i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"K hoch"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"Quyt nh"}),i.jsx("span",{className:`${p?"text-[8px] px-1 py-0":"text-[10px] px-1.5 py-0.5"} font-medium bg-gray-100 text-gray-500 rounded border border-gray-200`,children:"Bo co"})]})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="staff"||e.group==="T Vn Phng")&&i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-indigo-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-200 hover:border-indigo-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-indigo-50 to-purple-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-4"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(Fh,{className:`${p?"h-5 w-5":"h-7 w-7"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-indigo-700 transition-colors`,children:"T VN PHNG"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"Qun l hnh chnh, nhn s, ti sn, y t, thc n v cc cng tc h tr khc."})]}),i.jsxs("div",{className:`flex-1 grid grid-cols-2 gap-px bg-indigo-100/50 border-t border-indigo-50 ${p?"mt-1":"mt-4"}`,children:[i.jsxs("div",{onClick:()=>w("to-van-phong-ke-hoach"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-indigo-50/60 transition-colors group/item`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-3"}`,children:i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-indigo-100 text-indigo-600 rounded-lg shadow-sm inline-block`,children:i.jsx(Ge,{className:`${p?"h-4 w-4":"h-5 w-5"}`})})}),i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 mb-0.5 group-hover/item:text-indigo-700`,children:p?"K HOCH":"K HOCH & BO CO"}),i.jsx("p",{className:`${p?"text-[10px]":"text-xs"} text-gray-500 line-clamp-2`,children:p?"Ti chnh, Y t":"K hoch ti chnh, Y t, Hot ng chung"})]}),i.jsxs("div",{onClick:()=>w("to-van-phong-thuc-don"),className:`bg-white ${p?"p-3":"p-6"} cursor-pointer hover:bg-purple-50/60 transition-colors group/item`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-3"}`,children:i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-purple-100 text-purple-600 rounded-lg shadow-sm inline-block`,children:i.jsx(xp,{className:`${p?"h-4 w-4":"h-5 w-5"}`})})}),i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 mb-0.5 group-hover/item:text-purple-700`,children:p?"THC N":"THC N & BN TR"}),i.jsx("p",{className:`${p?"text-[10px]":"text-xs"} text-gray-500 line-clamp-2`,children:p?"V sinh ATTP":"Qun l thc n tun v V sinh ATTP"})]})]})]}),(e.role==="admin"||e.role==="vice_principal"||e.role==="head_teacher"||e.role==="vice_head_teacher"||e.role==="teacher")&&i.jsxs("div",{className:`group relative overflow-hidden ${p?"rounded-xl":"rounded-2xl"} border border-amber-100 bg-white shadow-lg transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-amber-200 hover:border-amber-300 flex flex-col`,children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-gradient-to-br from-amber-50 to-orange-100 blur-3xl opacity-50 group-hover:opacity-80 transition-opacity"}),i.jsxs("div",{className:`${p?"p-4 pb-2":"p-8 pb-2"} relative z-10`,children:[i.jsx("div",{className:`${p?"mb-2 h-10 w-10":"mb-4 h-14 w-14"} inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 to-amber-100 text-amber-600 shadow-sm group-hover:scale-110 transition-transform duration-500`,children:i.jsx(s0,{className:`${p?"h-5 w-5":"h-8 w-8"}`})}),i.jsx("h3",{className:`${p?"mb-1 text-base":"mb-2 text-2xl"} font-bold text-gray-800 tracking-tight group-hover:text-amber-700 transition-colors`,children:"T CHUYN MN"}),!p&&i.jsx("p",{className:"text-gray-500 leading-relaxed text-sm mb-4",children:"K hoch ging dy, bi son, chuyn , d liu cc lp v ti liu tham kho."})]}),i.jsx("div",{className:`${p?"px-4 pb-2":"px-6 pb-4"} relative z-10`,children:i.jsxs("div",{onClick:()=>w("to-chuyen-mon-ke-hoach"),className:`flex items-center justify-between ${p?"p-2":"p-3"} rounded-xl bg-amber-50 border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors group/plan`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-white rounded-lg text-amber-600 shadow-sm`,children:i.jsx(WS,{className:`${p?"h-4 w-4":"h-5 w-5"}`})}),i.jsx("div",{children:i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-800 group-hover/plan:text-amber-700`,children:p?"K hoch T":"K hoch T & Bin bn"})})]}),!p&&i.jsx("div",{className:"text-xs font-bold text-amber-600 underline opacity-0 group-hover/plan:opacity-100 transition-opacity",children:"Xem chi tit"})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50/50 border-t border-amber-100 ${p?"p-4 pt-3":"p-6 pt-4"}`,children:[i.jsx("div",{className:`${p?"mb-2":"mb-4"}`,children:i.jsx("h4",{className:`${p?"text-xs":"text-sm"} font-bold text-gray-700 uppercase tracking-wider border-l-4 border-amber-400 pl-2`,children:"LP HC CA TI"})}),i.jsx("div",{className:`grid ${p?"grid-cols-4 gap-1.5":"grid-cols-3 gap-2"}`,children:g.map(M=>{var $;if(e.role==="teacher"){const z=($=e.accessScope)==null?void 0:$.toLowerCase().trim(),Y=M.id.toLowerCase(),ae=M.name.toLowerCase();if(z!==Y&&z!==ae)return null}return i.jsxs("button",{onClick:()=>w(`class-${M.id}`),className:`relative group/btn flex flex-col items-center justify-center ${p?"py-1.5 px-1":"py-2 px-1"} bg-white border border-gray-200 rounded-lg shadow-sm hover:border-amber-300 hover:shadow-md hover:bg-amber-50 transition-all`,children:[i.jsx("span",{className:`${p?"text-[10px]":"text-xs"} font-bold text-gray-700 group-hover/btn:text-amber-800`,children:M.name}),M.newFiles>0&&i.jsx("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]},M.id)})})]})]}),(e.role==="admin"||e.role==="vice_principal"&&((k=e.permissions)==null?void 0:k.includes("access_system_admin")))&&vA.map(M=>i.jsx(eO,{data:M,onClick:w},M.id))]})})]})},jj=s=>{try{const e=new URL(s),t=decodeURIComponent(e.pathname).toLowerCase();return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}catch{const t=s.toLowerCase().split("?")[0];return[".doc",".docx",".xls",".xlsx",".ppt",".pptx"].some(o=>t.endsWith(o))}},jl=s=>!s||s==="#"?"#":s.toLowerCase().includes(".xls")?"EXCEL_NO_PREVIEW":jj(s)?`https://docs.google.com/viewer?url=${encodeURIComponent(s)}&embedded=true`:s,bo=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),sO=()=>{var we;const s=rr(),{addToast:e}=Nr(),[t,a]=j.useState([]),[o,u]=j.useState(""),[d,g]=j.useState("Tt c"),{user:x}=ys(),p=za(),b=(we=x==null?void 0:x.permissions)==null?void 0:we.includes("manage_documents"),[w,N]=j.useState(null),[k,M]=j.useState(!1),[$,z]=j.useState(!1),[Y,ae]=j.useState(!1),[K,H]=j.useState(!1),[de,ve]=j.useState(null),[E,S]=j.useState(1),[A,O]=j.useState({}),[I,V]=j.useState(null),[R,Ne]=j.useState("");Br.useEffect(()=>{const D=Sn(kt(Te,"directive_documents"),tc("ngayBanHanh","desc")),U=vr(D,q=>{const Ee=[];q.forEach(he=>{Ee.push({id:he.id,...he.data()})}),a(Ee)});return()=>U()},[]);const je=j.useMemo(()=>t.filter(D=>{const U=D.trichYeu.toLowerCase().includes(o.toLowerCase())||D.soKyHieu.toLowerCase().includes(o.toLowerCase()),q=d==="Tt c"||D.coQuanBanHanh===d;return U&&q}),[t,o,d]),ee=D=>{ve(D),H(!0)},se=async()=>{if(de){try{await Rl(Be(Te,"directive_documents",de.id)),e(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(D){console.error("Error deleting document:",D),e("Li xa ti liu","Khng th xa ti liu ny.","error")}H(!1),ve(null)}},Ce=D=>{N(D),S(1),M(!0)},Le=()=>{O({trichYeu:"",soKyHieu:"",coQuanBanHanh:"B GD&T",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"Cng vn",tomTatNoiDung:""}),V(null),Ne(""),ae(!1),z(!0)},ze=D=>{O({...D}),ae(!0),V(null),Ne(D.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),z(!0)},P=D=>{if(D.target.files&&D.target.files[0]){const U=D.target.files[0];V(U),Ne(U.name)}},le=D=>{D.fileDinhKemUrl&&D.fileDinhKemUrl!=="#"?window.open(D.fileDinhKemUrl,"_blank"):e("Khng c file","Vn bn ny khng c file nh km.","warning")},be=()=>{V(null),Ne("")},xe=async D=>{if(D.preventDefault(),!(!A.trichYeu||!A.soKyHieu))try{let U=A.fileDinhKemUrl||"#";if(I){const q=nr(Ls,`directive_documents/${Date.now()}_${I.name}`),Ee=await er(q,I);U=await tr(Ee.ref)}else!R&&!A.fileDinhKemUrl&&(U="#");Y&&A.id?(await Qt(Be(Te,"directive_documents",A.id),{...A,fileDinhKemUrl:U}),e("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await kl(kt(Te,"directive_documents"),{...A,fileDinhKemUrl:U,createdAt:new Date().toISOString()}),e("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),z(!1)}catch(U){console.error("Error saving document:",U),e("Li lu d liu","Khng th lu vn bn ny.","error")}},Q=D=>{switch(D){case"B GD&T":return"bg-red-100 text-red-700";case"S GD&T":return"bg-blue-100 text-blue-700";case"UBND Tnh":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${p?"py-4":"py-6"}`,children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[!p&&i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-blue-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:`${p?"p-1.5":"p-2"} bg-blue-100 rounded-lg`,children:i.jsx(Ge,{className:`${p?"h-5 w-5":"h-6 w-6"} text-blue-600`})}),i.jsx("h1",{className:`${p?"text-lg":"text-2xl"} font-bold text-gray-900 uppercase`,children:"VN BN CH O"})]})]}),b&&i.jsxs("button",{onClick:Le,className:`flex items-center gap-2 bg-blue-600 text-white ${p?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg hover:bg-blue-700 transition-colors shadow-md flex-shrink-0`,children:[i.jsx(Mo,{className:`${p?"h-4 w-4":"h-5 w-5"}`}),i.jsx("span",{children:p?"Thm mi":"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","B GD&T","S GD&T","UBND Tnh","UBND Phng"].map(D=>i.jsx("button",{onClick:()=>g(D),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${d===D?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:D},D))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:o,onChange:D=>u(D.target.value)})]})})]})]})}),i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${p?"py-4":"py-8"}`,children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[p?i.jsx("div",{className:"divide-y divide-gray-100",children:je.length>0?je.map(D=>i.jsxs("div",{onClick:()=>Ce(D),className:"p-4 hover:bg-blue-50/50 transition-colors cursor-pointer active:bg-blue-100",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-gray-100 text-gray-500 flex-shrink-0",children:i.jsx(Ge,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:D.trichYeu})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-2 ml-9",children:[i.jsx("span",{className:"text-[10px] font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200 text-gray-600",children:D.soKyHieu}),i.jsx(bo,{colorClass:Q(D.coQuanBanHanh),children:D.coQuanBanHanh}),i.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-gray-400",children:[i.jsx(Fr,{className:"h-2.5 w-2.5"}),new Date(D.ngayBanHanh).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 ml-9",onClick:U=>U.stopPropagation(),children:[i.jsxs("button",{onClick:()=>Ce(D),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[i.jsx(bl,{className:"h-3.5 w-3.5"})," Xem"]}),i.jsxs("button",{onClick:()=>le(D),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(wn,{className:"h-3.5 w-3.5"})," Ti"]}),b&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ze(D),className:"p-1.5 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:i.jsx(ji,{className:"h-3.5 w-3.5"})}),i.jsx("button",{onClick:()=>ee(D),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:i.jsx(Tn,{className:"h-3.5 w-3.5"})})]})]})]},D.id)):i.jsxs("div",{className:"py-12 text-center text-gray-500",children:[i.jsx(Ge,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-xs mt-1",children:"Th thay i b lc"})]})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:je.length>0?je.map(D=>i.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",onClick:()=>Ce(D),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-blue-600 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-700 transition-colors",children:D.trichYeu}),D.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:D.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:D.soKyHieu}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:D.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(cu,{className:"h-3 w-3"}),i.jsx("span",{className:Q(D.coQuanBanHanh).replace("bg-","text-").split(" ")[1],children:D.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Fr,{className:"h-3 w-3"}),new Date(D.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:U=>U.stopPropagation(),children:[i.jsx("button",{onClick:()=>Ce(D),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(bl,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>le(D),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-4 w-4"})}),b&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ze(D),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>ee(D),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]})})]},D.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Ge,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:`${p?"px-4 py-3":"px-6 py-4"} bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500`,children:[i.jsxs("span",{className:p?"text-xs":"",children:[je.length," vn bn"]}),!p&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),K&&de&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',de.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),k&&w&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:p?i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-blue-600 px-4 py-3 flex items-center gap-3 flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>M(!1),className:"p-1.5 -ml-1.5 text-white/80 hover:text-white hover:bg-blue-700 rounded-full transition-all",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-white font-semibold text-sm truncate",children:w.trichYeu}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"text-blue-100 text-[10px] font-mono",children:w.soKyHieu}),i.jsx("span",{className:"text-blue-200 text-[10px]",children:""}),i.jsx("span",{className:"text-blue-100 text-[10px]",children:new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})]}),i.jsx("div",{className:"flex-1 relative overflow-hidden",children:w.fileDinhKemUrl&&w.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(w.fileDinhKemUrl),className:"w-full h-full bg-white",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-white",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-300"}),i.jsx("p",{className:"text-base font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1 text-center px-8",children:"Vn bn ny cha c file nh km"})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between gap-3 safe-area-inset-bottom",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bo,{colorClass:Q(w.coQuanBanHanh),children:w.coQuanBanHanh}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:w.loaiVanBan})]}),i.jsxs("button",{onClick:()=>le(w),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-xl shadow-lg transition-all active:scale-95",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v"]})]})]}):i.jsx("div",{className:"h-full flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"bg-blue-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Ge,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>M(!1),className:"text-blue-100 hover:text-white hover:bg-blue-700 p-1 rounded-full transition-all",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:w.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(bo,{colorClass:"bg-blue-100 text-blue-800",children:w.coQuanBanHanh}),i.jsx(bo,{colorClass:"bg-yellow-100 text-yellow-800",children:w.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(Fr,{className:"h-3 w-3"})," ",new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:w.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(w.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(cu,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:w.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:w.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>le(w),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md transition-colors",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>S(D=>Math.max(.5,D-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(a0,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(E*100),"%"]}),i.jsx("button",{onClick:()=>S(D=>Math.min(2,D+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(r0,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>S(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(c1,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:w.fileDinhKemUrl&&w.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(w.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})})}),$&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[Y?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),Y?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:xe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:A.trichYeu||"",onChange:D=>O({...A,trichYeu:D.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"VD: 123/BGDT",value:A.soKyHieu||"",onChange:D=>O({...A,soKyHieu:D.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:A.ngayBanHanh||"",onChange:D=>O({...A,ngayBanHanh:D.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:A.coQuanBanHanh||"B GD&T",onChange:D=>O({...A,coQuanBanHanh:D.target.value}),children:[i.jsx("option",{value:"B GD&T",children:"B GD&T"}),i.jsx("option",{value:"S GD&T",children:"S GD&T"}),i.jsx("option",{value:"UBND Tnh",children:"UBND Tnh"}),i.jsx("option",{value:"UBND Phng",children:"UBND Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",value:A.loaiVanBan||"Cng vn",onChange:D=>O({...A,loaiVanBan:D.target.value}),children:[i.jsx("option",{value:"Cng vn",children:"Cng vn"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Ngh quyt",children:"Ngh quyt"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:A.tomTatNoiDung||"",onChange:D=>O({...A,tomTatNoiDung:D.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),R?i.jsxs("div",{className:"mt-1 p-4 border border-blue-200 rounded-lg bg-blue-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:R}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(xs,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:be,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(Jt,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:P}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(In,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-blue-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Iu,{className:"h-4 w-4"})," ",Y?"Lu thay i":"To mi"]})]})]})})]})},Sh=({children:s,colorClass:e})=>i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${e}`,children:s}),rO=()=>{var D;const s=rr(),{currentSchoolYear:e}=Ju(),{addToast:t}=Nr(),[a,o]=j.useState([]),[u,d]=j.useState(""),[g,x]=j.useState("Tt c"),{user:p}=ys(),b=za(),w=(D=p==null?void 0:p.permissions)==null?void 0:D.includes("manage_documents"),[N,k]=j.useState(null),[M,$]=j.useState(!1),[z,Y]=j.useState(!1),[ae,K]=j.useState(!1),[H,de]=j.useState(!1),[ve,E]=j.useState(null),[S,A]=j.useState(1),[O,I]=j.useState({}),[V,R]=j.useState(null),[Ne,je]=j.useState("");Br.useEffect(()=>{const U=Sn(kt(Te,"school_documents"),tc("ngayBanHanh","desc")),q=vr(U,Ee=>{const he=[];Ee.forEach(Ie=>{const He=Ie.data();(He.schoolYear||"2025-2026")===e&&he.push({id:Ie.id,...He})}),o(he)});return()=>q()},[e]);const ee=j.useMemo(()=>a.filter(U=>{const q=U.trichYeu.toLowerCase().includes(u.toLowerCase())||U.soKyHieu.toLowerCase().includes(u.toLowerCase()),Ee=g==="Tt c"||U.loaiVanBan===g;return q&&Ee}),[a,u,g]),se=U=>{E(U),de(!0)},Ce=async()=>{if(ve){try{await Rl(Be(Te,"school_documents",ve.id)),t(" xa ti liu thnh cng","D liu  c cp nht.","success")}catch(U){console.error("Error deleting document:",U),t("Li xa ti liu","Khng th xa ti liu ny.","error")}de(!1),E(null)}},Le=U=>{k(U),A(1),$(!0)},ze=()=>{I({trichYeu:"",soKyHieu:"",coQuanBanHanh:"Ban Gim Hiu",ngayBanHanh:new Date().toISOString().split("T")[0],loaiVanBan:"K hoch",tomTatNoiDung:""}),R(null),je(""),K(!1),Y(!0)},P=U=>{I({...U}),K(!0),R(null),je(U.fileDinhKemUrl?"Van_ban_dinh_kem.pdf":""),Y(!0)},le=U=>{if(U.target.files&&U.target.files[0]){const q=U.target.files[0];R(q),je(q.name)}},be=U=>{U.fileDinhKemUrl&&U.fileDinhKemUrl!=="#"?window.open(U.fileDinhKemUrl,"_blank"):t("Khng c file","Vn bn ny khng c file nh km.","warning")},xe=()=>{R(null),je("")},Q=async U=>{if(U.preventDefault(),!(!O.trichYeu||!O.soKyHieu))try{let q=O.fileDinhKemUrl||"#";if(V){const Ee=nr(Ls,`school_documents/${Date.now()}_${V.name}`),he=await er(Ee,V);q=await tr(he.ref)}else!Ne&&!O.fileDinhKemUrl&&(q="#");ae&&O.id?(await Qt(Be(Te,"school_documents",O.id),{...O,fileDinhKemUrl:q}),t("Cp nht thnh cng","Thng tin vn bn  c lu.","success")):(await kl(kt(Te,"school_documents"),{...O,fileDinhKemUrl:q,schoolYear:e,createdAt:new Date().toISOString()}),t("Thm mi thnh cng","Vn bn  c thm vo h thng.","success")),Y(!1)}catch(q){console.error("Error saving document:",q),t("Li lu d liu","Khng th lu vn bn ny.","error")}},we=U=>{switch(U){case"K hoch":return"bg-emerald-100 text-emerald-700";case"Quyt nh":return"bg-amber-100 text-amber-700";case"Thng bo":return"bg-blue-100 text-blue-700";case"Bo co":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${b?"py-4":"py-6"}`,children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[!b&&i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-emerald-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:`${b?"p-1.5":"p-2"} bg-emerald-100 rounded-lg`,children:i.jsx(cu,{className:`${b?"h-5 w-5":"h-6 w-6"} text-emerald-600`})}),i.jsx("h1",{className:`${b?"text-lg":"text-2xl"} font-bold text-gray-900 uppercase`,children:"VN BN CA TRNG"})]})]}),w&&i.jsxs("button",{onClick:ze,className:`flex items-center gap-2 bg-emerald-600 text-white ${b?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg hover:bg-emerald-700 transition-colors shadow-md flex-shrink-0`,children:[i.jsx(Mo,{className:`${b?"h-4 w-4":"h-5 w-5"}`}),i.jsx("span",{children:b?"Thm mi":"Thm vn bn mi"})]})]}),i.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","K hoch","Quyt nh","Thng bo","Bo co","Vn bn khc"].map(U=>i.jsx("button",{onClick:()=>x(U),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${g===U?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:U},U))}),i.jsx("div",{className:"flex w-full lg:w-auto gap-3",children:i.jsxs("div",{className:"relative flex-grow lg:w-64 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm transition-shadow",placeholder:"Tm theo tn hoc s hiu...",value:u,onChange:U=>d(U.target.value)})]})})]})]})}),i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${b?"py-4":"py-8"}`,children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[b?i.jsx("div",{className:"divide-y divide-gray-100",children:ee.length>0?ee.map(U=>i.jsxs("div",{onClick:()=>Le(U),className:"p-4 hover:bg-emerald-50/50 transition-colors cursor-pointer active:bg-emerald-100",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-gray-100 text-gray-500 flex-shrink-0",children:i.jsx(Ge,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:U.trichYeu})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-2 ml-9",children:[i.jsx("span",{className:"text-[10px] font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200 text-gray-600",children:U.soKyHieu}),i.jsx(Sh,{colorClass:we(U.loaiVanBan),children:U.loaiVanBan}),i.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-gray-400",children:[i.jsx(Fr,{className:"h-2.5 w-2.5"}),new Date(U.ngayBanHanh).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 ml-9",onClick:q=>q.stopPropagation(),children:[i.jsxs("button",{onClick:()=>Le(U),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors",children:[i.jsx(bl,{className:"h-3.5 w-3.5"})," Xem"]}),i.jsxs("button",{onClick:()=>be(U),className:"flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(wn,{className:"h-3.5 w-3.5"})," Ti"]}),w&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>P(U),className:"p-1.5 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:i.jsx(ji,{className:"h-3.5 w-3.5"})}),i.jsx("button",{onClick:()=>se(U),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:i.jsx(Tn,{className:"h-3.5 w-3.5"})})]})]})]},U.id)):i.jsxs("div",{className:"py-12 text-center text-gray-500",children:[i.jsx(Ge,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-xs mt-1",children:"Th thay i b lc"})]})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-1/2",children:"Trch yu vn bn"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thng tin"}),i.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.length>0?ee.map(U=>i.jsxs("tr",{className:"hover:bg-emerald-50/50 transition-colors cursor-pointer group",onClick:()=>Le(U),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-emerald-600 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-emerald-700 transition-colors",children:U.trichYeu}),U.tomTatNoiDung&&i.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:U.tomTatNoiDung})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:U.soKyHieu}),i.jsx(Sh,{colorClass:we(U.loaiVanBan),children:U.loaiVanBan})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(cu,{className:"h-3 w-3"}),i.jsx("span",{children:U.coQuanBanHanh})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Fr,{className:"h-3 w-3"}),new Date(U.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",onClick:q=>q.stopPropagation(),children:[i.jsx("button",{onClick:()=>Le(U),className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-colors",title:"Xem chi tit",children:i.jsx(bl,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>be(U),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-4 w-4"})}),w&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>P(U),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>se(U),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Xa",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]})})]},U.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Ge,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy vn bn no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc t kha tm kim"})]})})})})]})}),i.jsxs("div",{className:`${b?"px-4 py-3":"px-6 py-4"} bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500`,children:[i.jsxs("span",{className:b?"text-xs":"",children:[ee.length," vn bn"]}),!b&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white disabled:opacity-50",disabled:!0,children:"Trc"}),i.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50",children:"Sau"})]})]})]})}),H&&ve&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa vn bn ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',ve.trichYeu,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>de(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Ce,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),M&&N&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:b?i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-emerald-600 px-4 py-3 flex items-center gap-3 flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>$(!1),className:"p-1.5 -ml-1.5 text-white/80 hover:text-white hover:bg-emerald-700 rounded-full transition-all",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-white font-semibold text-sm truncate",children:N.trichYeu}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"text-emerald-100 text-[10px] font-mono",children:N.soKyHieu}),i.jsx("span",{className:"text-emerald-200 text-[10px]",children:""}),i.jsx("span",{className:"text-emerald-100 text-[10px]",children:new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})]}),i.jsx("div",{className:"flex-1 relative overflow-hidden",children:N.fileDinhKemUrl&&N.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(N.fileDinhKemUrl),className:"w-full h-full bg-white",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-white",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-300"}),i.jsx("p",{className:"text-base font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1 text-center px-8",children:"Vn bn ny cha c file nh km"})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between gap-3 safe-area-inset-bottom",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Sh,{colorClass:we(N.loaiVanBan),children:N.loaiVanBan})}),i.jsxs("button",{onClick:()=>be(N),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-bold text-white bg-emerald-600 hover:bg-emerald-700 rounded-xl shadow-lg transition-all active:scale-95",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v"]})]})]}):i.jsx("div",{className:"h-full flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"bg-emerald-600 px-6 py-3 flex justify-between items-center flex-shrink-0 shadow-md z-20",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[i.jsx(Ge,{className:"h-5 w-5"})," Chi tit vn bn"]}),i.jsx("button",{onClick:()=>$(!1),className:"text-emerald-100 hover:text-white hover:bg-emerald-700 p-1 rounded-full transition-all",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[i.jsxs("div",{className:"w-full lg:w-[35%] flex flex-col border-r border-gray-200 bg-white h-full",children:[i.jsxs("div",{className:"overflow-y-auto p-6 flex-1",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:N.trichYeu}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsx(Sh,{colorClass:we(N.loaiVanBan),children:N.loaiVanBan}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full",children:[i.jsx(Fr,{className:"h-3 w-3"})," ",new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")]})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"S / K hiu"}),i.jsx("p",{className:"font-mono text-sm text-gray-800 font-medium",children:N.soKyHieu})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-1",children:"Ngy ban hnh"}),i.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(N.ngayBanHanh).toLocaleDateString("vi-VN")})]})]})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx(cu,{className:"h-4 w-4 text-gray-400"})," n v ban hnh"]}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm",children:N.coQuanBanHanh})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tm tt ni dung"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed bg-gray-50 p-4 rounded-lg border border-gray-100 h-auto min-h-[100px]",children:N.tomTatNoiDung||"Cha c tm tt ni dung cho vn bn ny."})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center flex-shrink-0",children:[i.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800 underline",children:"Bo co li"}),i.jsxs("button",{onClick:()=>be(N),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-colors",children:[i.jsx(wn,{className:"h-4 w-4"})," Ti v my"]})]})]}),i.jsxs("div",{className:"w-full lg:w-[65%] bg-gray-100 flex flex-col h-full relative",children:[i.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-10",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Xem trc vn bn"}),i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>A(U=>Math.max(.5,U-.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Thu nh",children:i.jsx(a0,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-xs font-medium w-12 text-center text-gray-700",children:[Math.round(S*100),"%"]}),i.jsx("button",{onClick:()=>A(U=>Math.min(2,U+.1)),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Phng to",children:i.jsx(r0,{className:"h-4 w-4"})}),i.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),i.jsx("button",{onClick:()=>A(1),className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-gray-600 transition-all",title:"Mc nh",children:i.jsx(c1,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-slate-100/50 relative",children:i.jsx("div",{className:"absolute inset-0 w-full h-full",children:N.fileDinhKemUrl&&N.fileDinhKemUrl!=="#"?i.jsx("iframe",{src:jl(N.fileDinhKemUrl),className:"w-full h-full",title:"Document Preview"}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Vn bn ny cha c file nh km hoc file khng h tr xem trc."})]})})})]})]})]})})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[ae?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),ae?"Cp nht vn bn":"Thm vn bn mi"]}),i.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"documentForm",onSubmit:Q,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trch yu vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp trch yu ni dung vn bn...",value:O.trichYeu||"",onChange:U=>I({...O,trichYeu:U.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["S / K hiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"VD: 123/KH-MGVA",value:O.soKyHieu||"",onChange:U=>I({...O,soKyHieu:U.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ngy ban hnh ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",value:O.ngayBanHanh||"",onChange:U=>I({...O,ngayBanHanh:U.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C quan ban hnh"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:O.coQuanBanHanh||"Ban Gim Hiu",onChange:U=>I({...O,coQuanBanHanh:U.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Hi ng TKT",children:"Hi ng TKT"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi vn bn"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white",value:O.loaiVanBan||"K hoch",onChange:U=>I({...O,loaiVanBan:U.target.value}),children:[i.jsx("option",{value:"K hoch",children:"K hoch"}),i.jsx("option",{value:"Quyt nh",children:"Quyt nh"}),i.jsx("option",{value:"Thng bo",children:"Thng bo"}),i.jsx("option",{value:"Bo co",children:"Bo co"}),i.jsx("option",{value:"Vn bn khc",children:"Vn bn khc"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm tt ni dung"}),i.jsx("textarea",{rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:"Nhp tm tt ni dung chnh...",value:O.tomTatNoiDung||"",onChange:U=>I({...O,tomTatNoiDung:U.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File nh km"}),Ne?i.jsxs("div",{className:"mt-1 p-4 border border-emerald-200 rounded-lg bg-emerald-50 flex items-center justify-between animate-in fade-in zoom-in duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ne}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(xs,{className:"h-3 w-3 text-green-500"}),"  chn file"]})]})]}),i.jsx("button",{type:"button",onClick:xe,className:"p-1.5 hover:bg-red-100 hover:text-red-500 rounded-full text-gray-400 transition-colors",title:"Xa file",children:i.jsx(Jt,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"mt-1 relative flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-emerald-400 hover:bg-emerald-50/30 transition-all cursor-pointer bg-gray-50 group",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:le}),i.jsx("label",{htmlFor:"file-upload",className:"absolute inset-0 w-full h-full cursor-pointer z-10"}),i.jsxs("div",{className:"space-y-1 text-center pointer-events-none",children:[i.jsx(In,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-emerald-500 transition-colors"}),i.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[i.jsx("span",{className:"relative rounded-md font-medium text-emerald-600 focus-within:outline-none group-hover:underline",children:i.jsx("span",{children:"Ti file ln"})}),i.jsx("p",{className:"pl-1",children:"hoc ko th vo y"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX ti a 10MB"})]})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{type:"submit",form:"documentForm",className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md hover:shadow-lg transition-all",children:[i.jsx(Iu,{className:"h-4 w-4"})," ",ae?"Lu thay i":"To mi"]})]})]})})]})},aO=()=>{const{user:s}=ys(),{addToast:e}=Nr(),[t,a]=j.useState(""),[o,u]=j.useState(""),[d,g]=j.useState(null),[x,p]=j.useState(!1),[b,w]=j.useState(""),[N,k]=j.useState(""),[M,$]=j.useState(null),[z,Y]=j.useState(!1),[ae,K]=j.useState("/login-background.jpg"),[H,de]=j.useState(""),[ve,E]=j.useState(null),[S,A]=j.useState(!1),[O,I]=j.useState(!0),[V,R]=j.useState(!1),[Ne,je]=j.useState(null),[ee,se]=j.useState(!1),[Ce,Le]=j.useState(null),ze=async()=>{if(s){R(!0),je(null);try{let he=0,Ie=0;const He=await yr(kt(Te,"plans")),st=ip(Te);He.forEach(pt=>{const Lt=pt.data();if(!Lt.approval||!Lt.approval.status){const Tt=Be(Te,"plans",pt.id);st.update(Tt,{approval:{status:"pending"},uploaderRole:Lt.uploaderRole||"teacher"}),he++}}),he>0&&await st.commit();const Xe=await yr(kt(Te,"class_files")),gt=ip(Te);Xe.forEach(pt=>{const Lt=pt.data();if(!Lt.approval||!Lt.approval.status){const Tt=Be(Te,"class_files",pt.id);gt.update(Tt,{approval:{status:"pending"},uploaderRole:Lt.uploaderRole||"teacher"}),Ie++}}),Ie>0&&await gt.commit(),je({plans:he,classFiles:Ie}),he>0||Ie>0?e("Migration hon thnh!",` cp nht ${he} k hoch v ${Ie} h s lp.`,"success"):e("Khng c g  cp nht","Tt c ti liu  c trng thi duyt.","success")}catch(he){console.error("Migration error:",he),e("Li Migration","Khng th cp nht d liu. Xem console  bit chi tit.","error")}finally{R(!1)}}},P=async()=>{if(!(!s||!window.confirm("Bn c chc mun xa tt c thng bo c c ng dn sai (/professional-group-plans)?"))){se(!0),Le(null);try{let he=0;const Ie=await yr(kt(Te,"notifications")),He=[];if(Ie.forEach(st=>{const Xe=st.data();Xe.targetPath&&Xe.targetPath.includes("/professional-group-plans")&&He.push(st.id)}),He.length>0){for(let Xe=0;Xe<He.length;Xe+=450){const gt=He.slice(Xe,Xe+450),pt=ip(Te);gt.forEach(Lt=>{pt.delete(Be(Te,"notifications",Lt))}),await pt.commit(),he+=gt.length,console.log(`Deleted chunk: ${he}/${He.length}`)}e("Dn dp hon tt!",` xa ${he} thng bo c sai ng dn.`,"success")}else e("Khng c thng bo li","Tt c thng bo hin ti u hp l.","success");Le(he)}catch(he){console.error("Cleanup error details:",he);const Ie=he.code==="permission-denied"?"Li dn dp: Quyn truy cp b t chi. Vui lng kim tra li quyn Admin.":`Li dn dp: ${he.message||"Khng th xa d liu c."}`;e("Li",Ie,"error")}finally{se(!1)}}};j.useEffect(()=>{(async()=>{try{const Ie=Be(Te,"app_settings","login_background"),He=await xr(Ie);He.exists()&&He.data().imageUrl&&K(He.data().imageUrl);const st=Be(Te,"app_settings","system_logo"),Xe=await xr(st);Xe.exists()&&Xe.data().imageUrl&&a(Xe.data().imageUrl);const gt=Be(Te,"app_settings","certification_logo"),pt=await xr(gt);pt.exists()&&pt.data().imageUrl&&w(pt.data().imageUrl)}catch(Ie){console.error("Error fetching settings:",Ie)}finally{I(!1)}})()},[]);const le=he=>{if(he.target.files&&he.target.files[0]){const Ie=he.target.files[0];if(!Ie.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ie.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}g(Ie),u(URL.createObjectURL(Ie))}},be=async()=>{if(!(!d||!s)){p(!0);try{const he=Date.now(),Ie=nr(Ls,`app_settings/system-logo-${he}.png`);await er(Ie,d);const He=await tr(Ie);await Ao(Be(Te,"app_settings","system_logo"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),a(He),u(""),g(null),e("Thnh cng!"," cp nht logo h thng","success"),setTimeout(()=>window.location.reload(),1500)}catch(he){console.error("Error uploading logo:",he),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{p(!1)}}},xe=()=>{u(""),g(null)},Q=he=>{if(he.target.files&&he.target.files[0]){const Ie=he.target.files[0];if(!Ie.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ie.size>2*1024*1024){e("File qu ln","Logo khng c vt qu 2MB","error");return}$(Ie),k(URL.createObjectURL(Ie))}},we=async()=>{if(!(!M||!s)){Y(!0);try{const he=Date.now(),Ie=nr(Ls,`app_settings/cert-logo-${he}.png`);await er(Ie,M);const He=await tr(Ie);await Ao(Be(Te,"app_settings","certification_logo"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),w(He),k(""),$(null),e("Thnh cng!"," cp nht logo chng nhn","success"),setTimeout(()=>window.location.reload(),1500)}catch(he){console.error("Error uploading cert logo:",he),e("Li ti ln","Khng th cp nht logo. Vui lng th li.","error")}finally{Y(!1)}}},D=()=>{k(""),$(null)},U=he=>{if(he.target.files&&he.target.files[0]){const Ie=he.target.files[0];if(!Ie.type.startsWith("image/")){e("Vui lng chn file hnh nh","Ch chp nhn file nh (JPG, PNG, etc.)","error");return}if(Ie.size>5*1024*1024){e("File qu ln","Kch thc file khng c vt qu 5MB","error");return}E(Ie),de(URL.createObjectURL(Ie))}},q=async()=>{if(!(!ve||!s)){A(!0);try{const he=Date.now(),Ie=nr(Ls,`app_settings/login-background-${he}.jpg`);await er(Ie,ve);const He=await tr(Ie);await Ao(Be(Te,"app_settings","login_background"),{imageUrl:He,updatedAt:new Date().toISOString(),updatedBy:s.id,updatedByName:s.fullName}),K(He),de(""),E(null),e("Thnh cng!"," cp nht hnh nn ng nhp","success")}catch(he){console.error("Error uploading:",he),e("Li ti ln","Khng th cp nht hnh nn. Vui lng th li.","error")}finally{A(!1)}}},Ee=()=>{de(""),E(null)};return O?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-slate-700 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-amber-600 rounded-lg",children:i.jsx(Kv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Migration: Thm Trng Thi Duyt"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Cp nht cc ti liu c (K hoch T CM v H s Lp) vi trng thi "Ch duyt"  kch hot chc nng ph duyt mi.',i.jsx("br",{}),i.jsx("span",{className:"text-amber-700 font-medium font-sans",children:"Lu : Ch cn chy mt ln. Cc ti liu  c trng thi s khng b nh hng."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:ze,disabled:V,className:"flex items-center gap-2 px-6 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:V?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Kv,{className:"h-4 w-4"}),"Chy Migration"]})}),Ne&&i.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:["  cp nht: ",i.jsx("span",{className:"font-bold",children:Ne.plans})," k hoch, ",i.jsx("span",{className:"font-bold",children:Ne.classFiles})," h s lp"]})]})]})]})}),i.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-red-600 rounded-lg",children:i.jsx(Qv,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Dn dp: Thng bo li ng dn"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Khc phc vn  "Trang trng" khi nhn vo thng bo c.',i.jsx("br",{}),i.jsx("span",{className:"text-red-700 font-medium font-sans",children:"Dn sch cc thng bo cha ng dn c (/professional-group-plans)."})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:P,disabled:ee,className:"flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:ee?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"}),"ang dn dp..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tn,{className:"h-4 w-4"}),"Dn dp thng bo li"]})}),Ce!==null&&i.jsxs("div",{className:"text-sm text-red-700 bg-red-100 px-3 py-1.5 rounded-lg border border-red-200",children:["  xa: ",i.jsx("span",{className:"font-bold",children:Ce})," thng bo li"]})]})]})]})})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg",children:i.jsx(Kg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo H thng"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo hin th trn Header v trang ng nhp. Nn dng nh PNG nn trong sut, kch thc vung (VD: 512x512px)."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:t?i.jsx("img",{src:t,alt:"Current Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo ty chnh (ang dng mc nh)"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-indigo-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:le,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"})}),o&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-indigo-200 rounded-lg bg-indigo-50/30",children:i.jsx("img",{src:o,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:be,disabled:!d||x,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-all",children:x?"ang ti...":"Lu Logo"}),o&&i.jsx("button",{onClick:xe,disabled:x,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-emerald-600 rounded-lg",children:i.jsx(Kg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logo Chng Nhn (t Chun Quc Gia)"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Logo chng nhn trng t chun. S hin th  gc trang ng nhp v trn Header."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Logo hin ti"]})}),i.jsx("div",{className:"p-6 flex justify-center items-center bg-gray-100 min-h-[200px]",children:b?i.jsx("img",{src:b,alt:"Certification Logo",className:"h-32 w-32 object-contain"}):i.jsx("div",{className:"text-gray-400 text-sm italic",children:"Cha c logo chng nhn"})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-emerald-600"})," Ti ln Logo mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 cursor-pointer"})}),N&&i.jsx("div",{className:"mb-4 flex justify-center p-4 border border-dashed border-emerald-200 rounded-lg bg-emerald-50/30",children:i.jsx("img",{src:N,alt:"Preview",className:"h-24 w-24 object-contain"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:we,disabled:!M||z,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:z?"ang ti...":"Lu Logo"}),N&&i.jsx("button",{onClick:D,disabled:z,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Hy"})]})]})]})]})]}),i.jsx("hr",{className:"border-gray-200"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:i.jsx(Kg,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hnh nn trang ng nhp"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ty chnh hnh nn hin th trn trang ng nhp ca h thng. Hnh nh nn c kch thc ti thiu 1920x1080px  hin th tt nht."})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(uu,{className:"h-4 w-4 text-green-600"})," Hnh nn hin ti"]})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:i.jsx("img",{src:ae,alt:"Current Background",className:"w-full h-64 object-contain"})})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:i.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase flex items-center gap-2",children:[i.jsx(In,{className:"h-4 w-4 text-blue-600"})," Ti ln hnh nn mi"]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn file hnh nh"}),i.jsx("input",{type:"file",accept:"image/*",onChange:U,className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100\r
                cursor-pointer`}),i.jsxs("p",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"}),"Kch thc ti a: 5MB. nh dng: JPG, PNG, WEBP"]})]}),H&&i.jsxs("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem trc hnh nn mi:"}),i.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-lg overflow-hidden bg-blue-50/30",children:i.jsx("img",{src:H,alt:"Preview",className:"w-full h-64 object-contain"})})]}),i.jsxs("div",{className:"mt-6 flex gap-3",children:[i.jsx("button",{onClick:q,disabled:!ve||S,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:S?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang ti ln..."]}):i.jsxs(i.Fragment,{children:[i.jsx(In,{className:"h-4 w-4"}),"Lu v p dng"]})}),H&&i.jsxs("button",{onClick:Ee,disabled:S,className:"flex items-center gap-2 px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-all",children:[i.jsx(Qv,{className:"h-4 w-4"}),"Hy b"]})]})]})]}),i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Qn,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm text-amber-800",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Lu  khi thay i hnh nn:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-700",children:[i.jsx("li",{children:"Hnh nn s c p dng ngay lp tc cho tt c ngi dng"}),i.jsx("li",{children:"Nn chn hnh nh c  phn gii cao (ti thiu 1920x1080px)"}),i.jsx("li",{children:"Hnh nh nn c ni dung ph hp vi mi trng trng hc"}),i.jsx("li",{children:"File c s c lu tr trn Firebase Storage"})]})]})]})})]})]})},iO=()=>{var le,be,xe,Q,we;const s=rr(),{user:e}=ys(),{addToast:t}=Nr(),[a,o]=j.useState("users"),[u,d]=Br.useState([]),[g,x]=Br.useState({}),[p,b]=Br.useState({});Br.useEffect(()=>{var D;e&&(e.role==="admin"||(D=e.permissions)!=null&&D.includes("access_system_admin")||(t("Bn khng c quyn truy cp khu vc ny.","error"),s("/")))},[e,s,t]);const[w,N]=j.useState([]),[k,M]=j.useState(""),[$,z]=j.useState("Tt c"),[Y,ae]=j.useState(!1),[K,H]=j.useState(!1),[de,ve]=j.useState(!1),[E,S]=j.useState({}),[A,O]=j.useState(""),[I,V]=j.useState(!1);Br.useEffect(()=>{const D=Sn(kt(Te,"classes")),U=vr(D,q=>{const Ee=q.docs.map(He=>({id:He.id,...He.data()}));Ee.sort((He,st)=>He.name.localeCompare(st.name)),d(Ee);const he={},Ie={};Ee.forEach(He=>{he[He.name]=He.id,Ie[He.id]=He.name}),x(he),b(Ie)});return()=>U()},[]),Br.useEffect(()=>{const D=Sn(kt(Te,"users")),U=vr(D,q=>{const Ee=[];q.forEach(he=>{Ee.push({id:he.id,...he.data()})}),N(Ee)});return()=>U()},[]);const R=j.useMemo(()=>w.filter(D=>{const U=D.fullName.toLowerCase().includes(k.toLowerCase())||D.username.toLowerCase().includes(k.toLowerCase())||D.email.toLowerCase().includes(k.toLowerCase()),q=$==="Tt c"||D.group===$;return U&&q}),[w,k,$]),Ne=async D=>{if(window.confirm("Bn c chc chn mun xa ngi dng ny khng? Hnh ng ny khng th hon tc."))try{await Rl(Be(Te,"users",D))}catch(U){console.error("Error deleting user:",U),t("Khng th xa ngi dng. Vui lng th li.","error")}},je=()=>{S({status:"active",role:"teacher",roleLabel:"Gio vin",group:"T Chuyn Mn",accessScope:u.length>0?u[0].id:"choi",permissions:[]}),O(""),H(!1),ve(!1),ae(!0)},ee=D=>{S({...D}),H(!0),ve(!1),O(""),ae(!0)},se=D=>{const U=D.target.value;let q="",Ee=E.group,he="teacher";U==="Hiu Trng"?(q="Ton h thng",Ee="Ban Gim Hiu",he="admin"):U==="Ph Hiu Trng"?(q="Ton trng",Ee="Ban Gim Hiu",he="vice_principal"):U==="T trng chuyn mn"?(q="Ton b T chuyn mn",Ee="T Chuyn Mn",he="head_teacher"):U==="T ph chuyn mn"?(q="Ton b T chuyn mn",Ee="T Chuyn Mn",he="vice_head_teacher"):U==="Gio vin"?(q=u.length>0?u[0].id:"choi",Ee="T Chuyn Mn",he="teacher"):U==="T trng t vn phng"?(q="Ton b T Vn phng",Ee="T Vn Phng",he="office_head"):["K ton","Vn th","Y t","Nhn vin"].includes(U)&&(q="Khng gian T Vn phng",Ee="T Vn Phng",he="staff"),S({...E,role:he,roleLabel:U,accessScope:q,group:Ee,permissions:E.permissions||[]})},Ce=async D=>{if(D.preventDefault(),!(!E.username||!E.fullName||!E.email)){V(!0);try{if(K&&E.id){const U=Object.fromEntries(Object.entries(E).filter(([q,Ee])=>Ee!==void 0));if(await Qt(Be(Te,"users",E.id),U),de&&A)if(e&&E.id===e.id){const{updatePassword:q}=await du(async()=>{const{updatePassword:he}=await Promise.resolve().then(()=>mI);return{updatePassword:he}},void 0),Ee=Cu();Ee.currentUser&&(await q(Ee.currentUser,A),t(" cp nht mt khu ca bn thnh cng!","success"))}else try{const{httpsCallable:q}=await du(async()=>{const{httpsCallable:Ie}=await Promise.resolve().then(()=>nj);return{httpsCallable:Ie}},void 0),{functions:Ee}=await du(async()=>{const{functions:Ie}=await Promise.resolve().then(()=>vj);return{functions:Ie}},void 0),he=q(Ee,"adminResetPassword");t("ang gi yu cu i mt khu...","info"),await he({targetUserId:E.id,newPassword:A}),t(` i mt khu cho user ${E.username} thnh cng!`,"success")}catch(q){console.error("Error calling adminResetPassword:",q),t(`Li i mt khu: ${q.message}`,"error")}else t("Cp nht thng tin h s thnh cng!","success")}else{let U="";try{const q=c0(lx,"SecondaryApp"),Ee=Cu(q);U=(await I2(Ee,E.email,A)).user.uid,await G4(q)}catch(q){console.error("Auth creation error:",q),q.code==="auth/email-already-in-use"?t("Email ny  c s dng bi ti khon khc.","error"):t(`Li to ti khon Auth: ${q.message}`,"error"),V(!1);return}await Ao(Be(Te,"users",U),{...E,id:U,createdAt:new Date().toISOString()}),t(" to ti khon thnh cng! Ngi dng c th ng nhp ngay.","success")}ae(!1)}catch(U){console.error("Error saving user:",U),t("Li khi lu d liu.","error")}finally{V(!1)}}},Le=async D=>{const U=w.find(q=>q.id===D);if(U)try{const q=U.status==="active"?"inactive":"active";await Qt(Be(Te,"users",D),{status:q}),t(` ${q==="active"?"m kha":"kha"} ti khon thnh cng.`,"success")}catch(q){console.error("Error updating status:",q),t("Khng th cp nht trng thi.","error")}},ze=D=>D.includes("Hiu Trng")||D.includes("Admin")?"bg-red-100 text-red-700 border-red-200":D.includes("Ph Hiu")?"bg-orange-100 text-orange-700 border-orange-200":D.includes("T trng")||D.includes("T ph")||D.includes("K ton")?"bg-blue-100 text-blue-700 border-blue-200":"bg-emerald-100 text-emerald-700 border-emerald-200",P=()=>{const D=E.role||"";return D==="admin"?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[i.jsx(To,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-red-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-red-200 rounded px-3 py-1.5 text-sm bg-red-100/50 text-red-900 font-medium cursor-not-allowed",value:"Ton h thng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 bg-white/50 p-2 rounded border border-red-100",children:[i.jsx(Qn,{className:"h-4 w-4"}),"C quyn truy cp v qun l tt c cc t/lp."]})]})]}):D==="vice_principal"?i.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-teal-800 mb-2 flex items-center gap-2",children:[i.jsx(To,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-teal-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-teal-200 rounded px-3 py-1.5 text-sm bg-teal-100/50 text-teal-900 font-medium cursor-not-allowed",value:"Ton trng (Theo phn quyn)"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-teal-600 bg-white/50 p-2 rounded border border-teal-100",children:[i.jsx(Qn,{className:"h-4 w-4"}),'Truy cp d liu ton trng. Cc quyn qun tr h thng chu nh hng bi ci t "Quyn hn b sung" t Admin.']})]})]}):D==="head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(xs,{className:"h-3 w-3"}),"Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):D==="vice_head_teacher"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu (Lp ph trch)"}),i.jsxs("select",{className:"w-full border border-blue-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:[i.jsx("option",{value:"Ton b T chuyn mn",children:"Ton b T chuyn mn (Khng dy lp)"}),u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(xs,{className:"h-3 w-3"}),"Quyn hn tng ng T trng: Qun l chung T chuyn mn V qun l lp c chn."]})]})]}):D==="teacher"?i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-emerald-800 mb-2 flex items-center gap-2",children:[i.jsx(u1,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-emerald-700 uppercase mb-1",children:"Phm vi d liu (Chn lp)"}),i.jsx("select",{className:"w-full border border-emerald-300 rounded px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none bg-white",value:E.accessScope||"",onChange:U=>S({...E,accessScope:U.target.value}),children:u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:"Quyn hn:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Upload file"}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 rounded text-[10px] font-medium",children:"Chnh sa k hoch lp"})]})]})]})]}):D==="office_head"?i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[i.jsx(vo,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-blue-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",disabled:!0,className:"w-full border border-blue-200 rounded px-3 py-1.5 text-sm bg-blue-100/50 text-blue-900 font-medium cursor-not-allowed",value:"Ton b T Vn phng"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[i.jsx(xs,{className:"h-3 w-3"}),"Qun l chung T Vn phng (Bao gm Y t, K ton, Vn th...)."]})]})]}):i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 transition-all duration-300",children:[i.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-2 flex items-center gap-2",children:[i.jsx(Fh,{className:"h-4 w-4"})," Phm vi truy cp & Quyn hn"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-purple-700 uppercase mb-1",children:"Phm vi d liu"}),i.jsx("input",{type:"text",readOnly:!0,className:"w-full border border-purple-200 rounded px-3 py-1.5 text-sm bg-purple-100/50 text-purple-900 font-medium focus:outline-none",value:"Khng gian T Vn phng"})]}),i.jsxs("div",{className:"space-y-2 mt-2 bg-white/60 p-3 rounded border border-purple-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Vn bn chung (B/S)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yg,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"K hoch & Thc n (Ni b VP)"})]})]})]})]})};return i.jsxs("div",{className:"min-h-screen bg-gray-50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-sm text-gray-500 hover:text-slate-600 transition-colors mb-2",children:[i.jsx(Do,{className:"h-4 w-4 mr-1"})," Quay li Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s("/"),children:[i.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:i.jsx(To,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 uppercase",children:"QUN TR H THNG"})]})]})}),i.jsx("div",{className:"mt-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("button",{onClick:()=>o("users"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="users"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(vo,{className:"inline h-4 w-4 mr-2"}),"Qun l Ngi dng"]}),i.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-3 text-sm font-semibold transition-all border-b-2 ${a==="settings"?"border-slate-700 text-slate-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(To,{className:"inline h-4 w-4 mr-2"}),"Ci t ng dng"]})]})}),a==="users"&&i.jsxs("div",{className:"mt-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[i.jsx("div",{className:"flex overflow-x-auto pb-1 lg:pb-0 gap-2 w-full lg:w-auto no-scrollbar",children:["Tt c","Ban Gim Hiu","T Chuyn Mn","T Vn Phng"].map(D=>i.jsx("button",{onClick:()=>z(D),className:`
                    whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all
                    ${$===D?"bg-slate-700 text-white shadow-md shadow-slate-300":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}
                  `,children:D},D))}),i.jsxs("div",{className:"flex w-full lg:w-auto gap-3",children:[i.jsxs("div",{className:"relative flex-grow lg:w-72 group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(El,{className:"h-5 w-5 text-gray-400 group-focus-within:text-slate-500 transition-colors"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 sm:text-sm transition-shadow",placeholder:"Tm tn, email hoc ti khon...",value:k,onChange:D=>M(D.target.value)})]}),i.jsxs("button",{onClick:je,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[i.jsx(Mo,{className:"h-5 w-5"}),i.jsx("span",{className:"hidden sm:inline",children:"To ti khon"})]})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="users"?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ngi dng"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vai tr & Nhm"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phm vi truy cp"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length>0?R.map(D=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 border border-slate-200",children:i.jsx(mr,{className:"h-6 w-6"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.fullName}),i.jsxs("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mr,{className:"h-3 w-3"})," ",D.username]}),i.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(i1,{className:"h-3 w-3"})," ",D.email]})]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-col items-start gap-1.5",children:[i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${ze(D.roleLabel)}`,children:D.roleLabel}),i.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(vo,{className:"h-3 w-3"})," ",D.group]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2",children:[i.jsx(Fh,{className:"h-4 w-4 text-gray-400"}),p[D.accessScope]||D.accessScope]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("button",{onClick:()=>Le(D.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${D.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:D.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(xs,{className:"w-3 h-3 mr-1"})," ang hot ng"]}):i.jsxs(i.Fragment,{children:[i.jsx(mp,{className:"w-3 h-3 mr-1"}),"  kha"]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>ee(D),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chnh sa",children:i.jsx(ji,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>Ne(D.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti khon",children:i.jsx(Tn,{className:"h-4 w-4"})})]})})]},D.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(mr,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-base font-medium",children:"Khng tm thy ngi dng no"}),i.jsx("p",{className:"text-sm mt-1",children:"Th thay i b lc hoc to mi"})]})})})})]})}),i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:i.jsxs("span",{children:["Tng s ",R.length," ngi dng"]})})]})}):i.jsx(aO,{})}),Y&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[i.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[K?i.jsx(ji,{className:"h-5 w-5"}):i.jsx(Mo,{className:"h-5 w-5"}),K?"Cp nht thng tin":"To ti khon mi"]}),i.jsx("button",{onClick:()=>ae(!1),className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",children:i.jsxs("form",{id:"userForm",onSubmit:Ce,className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("h4",{className:"text-sm font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[i.jsx(mr,{className:"h-4 w-4"})," Thng tin ti khon"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn ng nhp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,disabled:K,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all ${K?"bg-gray-100 text-gray-500":""}`,placeholder:"VD: nguyenvanan",value:E.username||"",onChange:D=>S({...E,username:D.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: an@truong.edu.vn",value:E.email||"",onChange:D=>S({...E,email:D.target.value})})]})]}),K?i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu"}),i.jsx("button",{type:"button",onClick:()=>ve(!de),className:"text-xs text-blue-600 hover:underline font-medium",children:de?"Hy i mt khu":"Reset mt khu"})]}),de&&i.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-2",children:[i.jsx("input",{type:"password",className:"w-full border border-blue-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-blue-50",placeholder:"Nhp mt khu mi...",value:A,onChange:D=>O(D.target.value)}),i.jsx("p",{className:"text-xs text-blue-600 mt-1 italic",children:"Nhp mt khu mi  thay i cho ngi dng ny."})]})]}):i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mt khu khi to ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",required:!K,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"Nhp mt khu...",value:A,onChange:D=>O(D.target.value)}),i.jsx(Oo,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["H v tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all",placeholder:"VD: Nguyn Vn An",value:E.fullName||"",onChange:D=>S({...E,fullName:D.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nhm ngi dng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:E.group||"T Chuyn Mn",onChange:D=>S({...E,group:D.target.value}),children:[i.jsx("option",{value:"Ban Gim Hiu",children:"Ban Gim Hiu"}),i.jsx("option",{value:"T Chuyn Mn",children:"T Chuyn Mn"}),i.jsx("option",{value:"T Vn Phng",children:"T Vn Phng"}),i.jsx("option",{value:"Khc",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vai tr c th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition-all bg-white",value:E.roleLabel||"Gio vin",onChange:se,children:[i.jsx("option",{value:"Hiu Trng",children:"Hiu Trng"}),i.jsx("option",{value:"Ph Hiu Trng",children:"Ph Hiu Trng"}),i.jsx("option",{value:"T trng chuyn mn",children:"T trng chuyn mn"}),i.jsx("option",{value:"T ph chuyn mn",children:"T ph chuyn mn"}),i.jsx("option",{value:"Gio vin",children:"Gio vin"}),i.jsx("option",{value:"T trng t vn phng",children:"T trng t vn phng"}),i.jsx("option",{value:"K ton",children:"K ton"}),i.jsx("option",{value:"Vn th",children:"Vn th"}),i.jsx("option",{value:"Y t",children:"Y t"}),i.jsx("option",{value:"Nhn vin",children:"Nhn vin"})]})]})]}),P(),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 mt-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-orange-800 mb-2 flex items-center gap-2",children:[i.jsx(Yg,{className:"h-4 w-4"})," Quyn hn b sung"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-all cursor-pointer",checked:((le=E.permissions)==null?void 0:le.includes("manage_documents"))||!1,onChange:D=>{const U=E.permissions||[];D.target.checked?S({...E,permissions:[...U,"manage_documents"]}):S({...E,permissions:U.filter(q=>q!=="manage_documents")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-orange-700 transition-colors",children:"c php qun l vn bn (Upload, Chnh sa, Xa)"})]}),i.jsx("p",{className:"text-xs text-orange-600 pl-6 mb-3",children:"* Cho php ngi dng ny ng ti v qun l cc vn bn chung ca trng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-all cursor-pointer",checked:((be=E.permissions)==null?void 0:be.includes("manage_office_docs"))||!1,onChange:D=>{const U=E.permissions||[];D.target.checked?S({...E,permissions:[...U,"manage_office_docs"]}):S({...E,permissions:U.filter(q=>q!=="manage_office_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors",children:"Qun l vn bn T Vn phng"})]}),i.jsx("p",{className:"text-xs text-purple-600 pl-6 mb-3",children:"* Cho php upload, sa, xa vn bn trong khu vc T Vn phng."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-all cursor-pointer",checked:((xe=E.permissions)==null?void 0:xe.includes("manage_boarding_docs"))||!1,onChange:D=>{const U=E.permissions||[];D.target.checked?S({...E,permissions:[...U,"manage_boarding_docs"]}):S({...E,permissions:U.filter(q=>q!=="manage_boarding_docs")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 transition-colors",children:"Qun l ti liu Bn tr"})]}),i.jsx("p",{className:"text-xs text-indigo-600 pl-6 mb-3",children:"* Cho php upload, sa, xa ti liu bn tr (thc n, an ton thc phm)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all cursor-pointer",checked:((Q=E.permissions)==null?void 0:Q.includes("manage_plans"))||!1,onChange:D=>{const U=E.permissions||[];D.target.checked?S({...E,permissions:[...U,"manage_plans"]}):S({...E,permissions:U.filter(q=>q!=="manage_plans")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-blue-700 transition-colors",children:"Qun l k hoch T Chuyn mn"})]}),i.jsx("p",{className:"text-xs text-blue-600 pl-6 mb-3",children:"* Cho php upload, sa, xa k hoch dy hc (Ch dnh cho Admin/Head Teacher)."}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[i.jsx("div",{className:"relative flex items-center",children:i.jsx("input",{type:"checkbox",className:"peer h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded transition-all cursor-pointer",checked:((we=E.permissions)==null?void 0:we.includes("access_system_admin"))||!1,onChange:D=>{const U=E.permissions||[];D.target.checked?S({...E,permissions:[...U,"access_system_admin"]}):S({...E,permissions:U.filter(q=>q!=="access_system_admin")})}})}),i.jsx("span",{className:"text-sm text-gray-700 group-hover:text-red-700 transition-colors",children:"c php truy cp Qun tr h thng"})]}),i.jsx("p",{className:"text-xs text-red-600 pl-6",children:"* CP QUYN CAO NHT: Cho php truy cp vo trang qun tr h thng (Dnh cho Ph Hiu trng hoc Th k)."})]})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsx("button",{type:"submit",form:"userForm",disabled:I,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:I?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"h-4 w-4 animate-spin"})," ang x l..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Iu,{className:"h-4 w-4"})," ",K?"Lu thay i":"To ti khon"]})})]})]})})]})},lO={admin:"Ban Gim Hiu",vice_principal:"Ph Hiu Trng",head_teacher:"T Trng Chuyn Mn",vice_head_teacher:"T Ph Chuyn Mn",teacher:"Gio Vin",staff:"Nhn Vin",office_head:"T Trng Vn Phng"},oO=async()=>{const s=Sn(kt(Te,"users"),sr("role","==","admin"));return(await yr(s)).docs.map(t=>t.id)},cO=async()=>{const s=Sn(kt(Te,"users"),sr("role","==","head_teacher"));return(await yr(s)).docs.map(t=>t.id)},uO=async s=>{const e=Sn(kt(Te,"users"),sr("role","==","teacher"),sr("group","==",s));return(await yr(e)).docs.map(a=>a.id)},dO=async s=>{const e=Sn(kt(Te,"users"),sr("role","==","teacher"),sr("accessScope","==",s));return(await yr(e)).docs.map(a=>a.id)},pr=async(s,e,t)=>{var a,o,u,d;try{let g=[];const x=await oO();if(t.type==="office"){if(s==="upload"&&e.role==="staff"&&(g=[...x]),s==="comment"){const w=(a=t.extraInfo)==null?void 0:a.uploaderId;w&&g.push(w),g=[...g,...x]}}else if(t.type==="class"){const w=(o=t.extraInfo)==null?void 0:o.classId;if(s==="upload"&&e.role==="teacher"){const N=await cO();g=[...x,...N]}else s==="comment"&&((u=t.extraInfo)!=null&&u.uploaderId?g=[t.extraInfo.uploaderId]:(e.role==="admin"||e.role==="head_teacher"||e.role==="vice_head_teacher")&&w&&(g=[...await dO(w)]))}else if(t.type==="group")if(s==="upload"&&e.role==="head_teacher")if(e.group){const w=await uO(e.group);g=[...x,...w]}else g=[...x];else(s==="comment"||s==="system")&&(d=t.extraInfo)!=null&&d.uploaderId&&g.push(t.extraInfo.uploaderId);else t.type==="boarding"&&e.role==="staff"&&(g=[...x]);if(g=g.filter(w=>w!==e.id),g=[...new Set(g)],g.length===0){console.log("No receivers for this notification. Skipping.");return}let p=e.fullName||e.name;(!p||p===e.role||p==="head_teacher"||p==="vice_head_teacher")&&(p=lO[e.role]||e.role);const b={senderId:e.id,senderName:p,senderAvatar:e.avatar||"",targetPath:t.targetPath,message:`${s==="upload"?" ti ln":" gp  vo"} ${t.name||"ti liu"}`,type:s,isRead:!1,createdAt:new Date().toISOString(),receivers:g,metadata:{fileName:t.name}};await kl(kt(Te,"notifications"),b),console.log(`Notification sent to ${g.length} users.`)}catch(g){console.error("Error creating notification:",g)}},M_=s=>{switch(s){case"excel":return i.jsx(n0,{className:"h-6 w-6 text-green-600"});case"word":return i.jsx(Ge,{className:"h-6 w-6 text-blue-600"});case"pdf":return i.jsx(mf,{className:"h-6 w-6 text-red-600"});default:return i.jsx(Ge,{className:"h-6 w-6 text-gray-500"})}},hO=()=>{var D,U;const s=rr(),{user:e}=ys(),{currentSchoolYear:t}=Ju(),{addToast:a}=Nr(),o=za(),[u,d]=j.useState([]),[g,x]=j.useState("all"),[p,b]=j.useState(""),[w,N]=j.useState(null),[k,M]=j.useState(!1),[$,z]=j.useState(""),[Y,ae]=j.useState(!1),K=j.useRef(null),[H,de]=j.useState(!1),[ve,E]=j.useState(null),[S,A]=j.useState({name:"",category:"general",note:""}),[O,I]=j.useState(!1),[V,R]=j.useState(null),Ne=e,je=j.useMemo(()=>w?u.find(q=>q.id===w.id)||w:null,[u,w]);j.useEffect(()=>{const q=Sn(kt(Te,"office_docs"),tc("uploadDate","desc")),Ee=vr(q,he=>{const Ie=[];he.forEach(He=>{const st=He.data();(st.schoolYear||"2025-2026")===t&&Ie.push({id:He.id,...st,comments:st.comments||[]})}),d(Ie)});return()=>Ee()},[t]);const ee=u.filter(q=>{const Ee=g==="all"||q.category===g,he=q.name.toLowerCase().includes(p.toLowerCase())||q.uploader.name.toLowerCase().includes(p.toLowerCase());return Ee&&he});j.useEffect(()=>{var q;k&&((q=K.current)==null||q.scrollIntoView({behavior:"smooth"}))},[je==null?void 0:je.comments,k]);const se=q=>{N(q),M(!0)},Ce=(q,Ee)=>{Ee.stopPropagation(),R(q),I(!0)},Le=async()=>{if(V)try{await Rl(Be(Te,"office_docs",V.id)),a(" xa ti liu thnh cng","H s  c loi b khi danh sch.","success"),I(!1),R(null),(w==null?void 0:w.id)===V.id&&(M(!1),N(null))}catch(q){console.error("Error deleting document: ",q),a("Li","Khng th xa h s.","error")}},ze=async q=>{if(q.preventDefault(),!$.trim()||!je||!Ne)return;const Ee={id:Date.now().toString(),userId:Ne.id,userName:Ne.fullName,userRole:Ne.role,content:$,timestamp:new Date().toISOString()};try{const he=Be(Te,"office_docs",je.id);await Qt(he,{comments:qo(Ee)}),z(""),a(" gi gp ","Ni dung ca bn  c ghi nhn.","success"),Ne&&await pr("comment",Ne,{type:"office",name:je.name,targetPath:"/office-documents",extraInfo:{uploaderId:je.uploader.id}})}catch(he){console.error("Error adding comment: ",he),a("Li","Khng th gi bnh lun.","error")}},P=q=>{switch(q){case"finance":return"Ti chnh & K ton";case"medical":return"Y t & Bn tr";case"general":return"Hnh chnh chung";default:return"Tt c h s"}},le=()=>{A({name:"",category:g==="all"?"general":g,note:""}),E(null),de(!0)},be=q=>{if(q.preventDefault(),q.dataTransfer.files&&q.dataTransfer.files[0]){const Ee=q.dataTransfer.files[0];E(Ee),S.name||A(he=>({...he,name:Ee.name.split(".")[0]}))}},xe=q=>{if(q.target.files&&q.target.files[0]){const Ee=q.target.files[0];E(Ee),S.name||A(he=>({...he,name:Ee.name.split(".")[0]}))}},Q=async()=>{if(ve)try{let q="#";const Ee=nr(Ls,`office_docs/${Date.now()}_${ve.name}`);await er(Ee,ve),q=await tr(Ee);const he={...S,uploader:{id:(Ne==null?void 0:Ne.id)||"unknown",name:(Ne==null?void 0:Ne.fullName)||"n danh",avatar:(Ne==null?void 0:Ne.avatar)||"",role:(Ne==null?void 0:Ne.roleLabel)||"Nhn vin"},uploadDate:new Date().toISOString(),schoolYear:t,comments:[],type:ve.name.split(".").pop()||"file",fileType:ve.name.split(".").pop()||"file",fileUrl:q};await kl(kt(Te,"office_docs"),he),a("Ti ln thnh cng!",` lu h s: ${S.name}`,"success"),de(!1)}catch(q){console.error("Error adding document: ",q),a("Li","Khng th ti ln h s.","error")}},we=(q=!1)=>{if(!je)return null;const Ee=je.fileUrl;if(Ee&&Ee!=="#"){const he=jl(Ee);return he==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:Ee,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:he,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:`bg-white border-b border-teal-100 ${o?"px-4 py-3":"px-6 py-4"} flex-shrink-0 z-20 shadow-sm`,children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[!o&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-teal-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-teal-700",children:"K hoch & Bo co"})]}),i.jsxs("div",{className:"flex justify-between items-center gap-3",children:[i.jsxs("h1",{className:`${o?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[i.jsx("span",{className:`${o?"p-1.5":"p-2"} bg-teal-100 rounded-lg text-teal-700`,children:i.jsx(Ge,{className:`${o?"h-5 w-5":"h-6 w-6"}`})}),"Kho K hoch & Bo co"]}),(((D=e==null?void 0:e.permissions)==null?void 0:D.includes("manage_documents"))||((U=e==null?void 0:e.permissions)==null?void 0:U.includes("manage_office_docs")))&&i.jsxs("button",{onClick:le,className:`flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white ${o?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg shadow-md transition-colors font-medium`,children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln k hoch mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Danh mc h s"}),i.jsxs("nav",{className:"space-y-1",children:[i.jsxs("button",{onClick:()=>x("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="all"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${g==="all"?"bg-teal-500":"bg-gray-300"}`}),"Tt c h s"]}),i.jsxs("button",{onClick:()=>x("finance"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="finance"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(YS,{className:"h-4 w-4"}),"Ti chnh & K ton"]}),i.jsxs("button",{onClick:()=>x("medical"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="medical"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(uA,{className:"h-4 w-4"}),"Y t & Bn tr"]}),i.jsxs("button",{onClick:()=>x("general"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all ${g==="general"?"bg-teal-50 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),"Hnh chnh chung"]})]})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50 overflow-y-auto ${o?"p-4":"p-6"}`,children:[o&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 no-scrollbar",children:[{id:"all",label:"Tt c"},{id:"finance",label:"Ti chnh"},{id:"medical",label:"Y t"},{id:"general",label:"Hnh chnh"}].map(q=>i.jsx("button",{onClick:()=>x(q.id),className:`flex-shrink-0 px-3 py-1.5 text-xs font-bold rounded-full transition-all ${g===q.id?"bg-teal-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:q.label},q.id))}),i.jsxs("div",{className:`${o?"mb-4":"mb-6"} flex items-center bg-white border border-gray-200 rounded-lg px-3 py-2 ${o?"":"max-w-md"} shadow-sm focus-within:ring-2 focus-within:ring-teal-500 transition-all`,children:[i.jsx(El,{className:"h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim ti liu...",className:"ml-2 bg-transparent border-none outline-none text-sm w-full text-gray-700",value:p,onChange:q=>b(q.target.value)})]}),o?i.jsxs("div",{className:"space-y-3",children:[ee.map(q=>i.jsxs("div",{onClick:()=>se(q),className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm hover:shadow-md hover:border-teal-300 transition-all cursor-pointer",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:M_(q.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 truncate",children:q.name}),i.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:P(q.category)})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-6 w-6 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-[10px]",children:q.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600",children:q.uploader.name}),i.jsxs("span",{className:"text-[10px] text-gray-400",children:[" ",new Date(q.uploadDate).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[(q.comments||[]).length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx(Ea,{className:"w-2.5 h-2.5 mr-0.5"}),(q.comments||[]).length]}),i.jsx("button",{onClick:Ee=>Ce(q,Ee),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]})]},q.id)),ee.length===0&&i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx(Ge,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),i.jsx("p",{className:"text-sm",children:"Khng c ti liu no"})]})]}):i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn ti liu"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngi ng"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy ng"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gp "}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(q=>i.jsxs("tr",{onClick:()=>se(q),className:"hover:bg-teal-50/40 cursor-pointer transition-colors group",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:M_(q.type)}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-teal-700 transition-colors",children:q.name}),i.jsx("div",{className:"text-xs text-gray-500",children:P(q.category)})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-xs",children:q.uploader.name.charAt(0)}),i.jsxs("div",{className:"ml-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.uploader.name}),i.jsx("div",{className:"text-xs text-gray-500",children:q.uploader.role})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(q.uploadDate).toLocaleDateString("vi-VN")}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(q.comments||[]).length>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[i.jsx(Ea,{className:"w-3 h-3 mr-1"}),(q.comments||[]).length," Gp  mi"]}):i.jsx("span",{className:"text-xs text-gray-400",children:"Cha c gp "})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:Ee=>Ee.stopPropagation(),children:[i.jsx("button",{className:"p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-full transition-all",children:i.jsx(wn,{className:"h-4 w-4"})}),i.jsx("button",{onClick:Ee=>Ce(q,Ee),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",children:i.jsx(Tn,{className:"h-4 w-4"})})]})})]},q.id))})]})})]})]}),O&&V&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',V.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Le,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),k&&je&&(o?i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 bg-white flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>M(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(Do,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-sm font-bold text-gray-900 truncate",children:je.name}),i.jsxs("p",{className:"text-[10px] text-gray-500",children:[P(je.category),"  ",new Date(je.uploadDate).toLocaleDateString("vi-VN")]})]})]}),i.jsx("div",{className:"flex-1 bg-gray-100 overflow-hidden",children:we(!1)}),i.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 px-4 py-3 safe-area-inset-bottom",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:"h-7 w-7 rounded-full bg-teal-100 flex items-center justify-center text-teal-700 font-bold text-[10px] flex-shrink-0",children:je.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:je.uploader.name}),(je.comments||[]).length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx(Ea,{className:"w-2.5 h-2.5 mr-0.5"}),(je.comments||[]).length]})]}),i.jsxs("a",{href:je.fileUrl,download:!0,className:"flex items-center gap-1.5 px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium shadow-md",onClick:q=>q.stopPropagation(),children:[i.jsx(wn,{className:"h-4 w-4"}),"Ti v"]})]})})]}):i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>M(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-teal-100 flex justify-between items-start bg-teal-50/30 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-wider mb-1 block",children:P(je.category)}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight",children:je.name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>M(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(Jt,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>ae(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-teal-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(l1,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:we(!1)})]}),i.jsxs("div",{className:"w-full md:w-72 lg:w-80 bg-white flex flex-col h-1/2 md:h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:je.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(je.uploadDate).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx(Ea,{className:"h-4 w-4 text-teal-500"}),"  kin & Gp "]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[(je.comments||[]).length>0?(je.comments||[]).map(q=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-teal-100 text-teal-700 border border-teal-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:q.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-100 rounded-xl rounded-tl-none p-3 flex-1",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:q.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:q.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800",children:q.content})]})]},q.id)):i.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"Cha c gp  no."}),i.jsx("div",{ref:K})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:i.jsxs("form",{onSubmit:ze,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent shadow-sm",placeholder:"Nhp ni dung gp ...",value:$,onChange:q=>z(q.target.value)}),i.jsx("button",{type:"submit",disabled:!$.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:bg-gray-300 transition-all",children:i.jsx(Du,{className:"h-4 w-4"})})]})})]})]})]})]})),H&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-teal-600"}),"Ti ln Ti liu"]}),i.jsx("button",{onClick:()=>de(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all",placeholder:"VD: K hoch thu chi thng 11...",value:S.name,onChange:q=>A({...S,name:q.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phn loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all bg-white",value:S.category,onChange:q=>A({...S,category:q.target.value}),children:[i.jsx("option",{value:"general",children:"Hnh chnh chung"}),i.jsx("option",{value:"finance",children:"Ti chnh & K ton"}),i.jsx("option",{value:"medical",children:"Y t & Bn tr"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:be,onDragOver:q=>q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${ve?"border-teal-500 bg-teal-50":"border-gray-300 hover:bg-gray-50 hover:border-teal-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:xe}),ve?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(xs,{className:"h-10 w-10 text-teal-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-teal-800 truncate max-w-[250px]",children:ve.name}),i.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[(ve.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:`p-3 rounded-full mb-3 transition-colors ${S.category==="finance"?"bg-green-100 text-green-600":S.category==="medical"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:i.jsx(ff,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-teal-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch thm"}),i.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition-all text-sm",placeholder:"M t ngn gn ni dung...",value:S.note,onChange:q=>A({...S,note:q.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>de(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Q,disabled:!ve,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},fO=({type:s})=>{const e="h-12 w-12 mb-4 transition-transform group-hover:scale-110 duration-300";switch(s){case"excel":return i.jsx(n0,{className:`${e} text-green-600`});case"pdf":return i.jsx(mf,{className:`${e} text-red-500`});case"word":return i.jsx(Ge,{className:`${e} text-blue-600`});default:return i.jsx(Ge,{className:`${e} text-gray-400`})}},mO=()=>{const s=rr(),{user:e}=ys(),{addToast:t}=Nr(),a=za(),[o,u]=j.useState([]),[d,g]=j.useState("menu"),[x,p]=j.useState(""),[b,w]=j.useState(null),[N,k]=j.useState(!1),[M,$]=j.useState(""),z=j.useRef(null),[Y,ae]=j.useState(!1),[K,H]=j.useState(null),[de,ve]=j.useState({type:"menu",startDate:"",endDate:"",name:""}),[E,S]=j.useState(!1),[A,O]=j.useState(null),[I,V]=j.useState(!1),R=e;j.useEffect(()=>{const Q=Sn(kt(Te,"boarding_docs"),tc("uploadDate","desc")),we=vr(Q,D=>{const U=[];D.forEach(q=>{U.push({id:q.id,...q.data()})}),u(U)});return()=>we()},[]);const Ne=o.filter(Q=>{const we=Q.category===d,D=Q.name.toLowerCase().includes(x.toLowerCase());return we&&D});j.useEffect(()=>{var Q;N&&((Q=z.current)==null||Q.scrollIntoView({behavior:"smooth"}))},[b==null?void 0:b.comments,N]),j.useEffect(()=>{if(de.type==="menu"&&de.startDate&&de.endDate){const Q=new Date(de.startDate);new Date(de.endDate);const we=new Date(Q.getFullYear(),0,1),D=Math.floor((Q.getTime()-we.getTime())/(1440*60*1e3)),U=Math.ceil((Q.getDay()+1+D)/7);ve(q=>({...q,name:`Thc n Tun ${U} - Thng ${Q.getMonth()+1}`}))}},[de.startDate,de.endDate,de.type]);const je=Q=>{w(Q),k(!0)},ee=(Q,we)=>{we&&we.stopPropagation(),O(Q),S(!0)},se=async()=>{if(A)try{await Rl(Be(Te,"boarding_docs",A.id)),t(" xa ti liu thnh cng","H s  c xa khi h thng.","success"),S(!1),O(null),(b==null?void 0:b.id)===A.id&&(k(!1),w(null))}catch(Q){console.error("Error deleting document: ",Q),t("Li","Khng th xa h s.","error")}},Ce=async Q=>{if(Q.preventDefault(),!M.trim()||!b||!R)return;const we={id:Date.now().toString(),userId:R.id,userName:R.fullName,userRole:R.role,content:M,timestamp:new Date().toISOString()};try{const D=Be(Te,"boarding_docs",b.id);await Qt(D,{comments:qo(we)});const U={...b,comments:[...b.comments,we]};w(U),$(""),t(" gi bnh lun"," kin ca bn  c ghi nhn.","success"),await pr("comment",R,{type:"boarding",name:b.name,targetPath:"/boarding-menu"})}catch(D){console.error("Error adding comment: ",D),t("Li","Khng th gi bnh lun.","error")}},Le=Q=>{switch(Q){case"menu":return"Thc n Tun";case"food_safety":return"H s V sinh ATTP";case"nutrition":return"Bo co Dinh dng";default:return""}},ze=()=>{ve({type:d==="menu"?"menu":d==="food_safety"?"food_safety":"nutrition",startDate:"",endDate:"",name:""}),H(null),ae(!0)},P=Q=>{if(Q.preventDefault(),Q.dataTransfer.files&&Q.dataTransfer.files[0]){const we=Q.dataTransfer.files[0];H(we),!de.name&&de.type!=="menu"&&ve(D=>({...D,name:we.name.split(".")[0]}))}},le=Q=>{if(Q.target.files&&Q.target.files[0]){const we=Q.target.files[0];H(we),!de.name&&de.type!=="menu"&&ve(D=>({...D,name:we.name.split(".")[0]}))}},be=async()=>{if(K)try{const Q=nr(Ls,`boarding_docs/${Date.now()}_${K.name}`),we=await er(Q,K),D=await tr(we.ref),U={...de,uploader:{id:(R==null?void 0:R.id)||"unknown",name:(R==null?void 0:R.fullName)||"n danh",avatar:(R==null?void 0:R.avatar)||""},uploadDate:new Date().toISOString(),comments:[],fileType:K.name.split(".").pop()||"file",category:d,fileUrl:D};await kl(kt(Te,"boarding_docs"),U),t("Ti ln thnh cng!",` lu h s: ${de.name}`,"success"),ae(!1),R&&await pr("upload",R,{type:"boarding",name:de.name,targetPath:"/boarding-menu"})}catch(Q){console.error("Error adding document: ",Q),t("Li","Khng th ti ln h s.","error")}},xe=(Q=!1)=>{if(!b)return null;if(b.fileUrl&&b.fileUrl!=="#"){const we=jl(b.fileUrl);return we==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:b.fileUrl,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsx("div",{className:"w-full h-full",children:i.jsx("iframe",{src:we,className:"w-full h-full border-0",title:"Document Preview"})})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})};return i.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[i.jsx("div",{className:`bg-white border-b border-emerald-100 ${a?"px-4 py-3":"px-6 py-4"} flex-shrink-0 z-20 shadow-sm`,children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[!a&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-emerald-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{children:"T Vn phng"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-emerald-700",children:"Bn tr"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:`${a?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[i.jsx("span",{className:`${a?"p-1.5":"p-2"} bg-emerald-100 rounded-lg text-emerald-700`,children:i.jsx(xp,{className:`${a?"h-5 w-5":"h-6 w-6"}`})}),"Qun l Bn tr & Dinh dng"]}),!a&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-12 flex items-center gap-1",children:[i.jsx(Oo,{className:"h-3 w-3"})," Ch dnh cho BGH, Y t & K ton"]})]}),i.jsxs("button",{onClick:ze,className:`flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white ${a?"px-3 py-2 text-sm":"px-5 py-2.5"} rounded-lg shadow-md hover:shadow-lg transition-all font-medium transform hover:-translate-y-0.5`,children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:"Ti ln h s mi"})]})]})]})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 overflow-y-auto hidden md:block",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Nghip v Bn tr"}),i.jsxs("nav",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>g("menu"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="menu"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(xp,{className:"h-4 w-4"}),"Thc n Tun"]}),i.jsxs("button",{onClick:()=>g("food_safety"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="food_safety"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(To,{className:"h-4 w-4"}),"H s V sinh ATTP"]}),i.jsxs("button",{onClick:()=>g("nutrition"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all ${d==="nutrition"?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(rC,{className:"h-4 w-4"}),"Bo co Dinh dng"]})]})]})}),i.jsxs("div",{className:`flex-1 bg-gray-50 overflow-y-auto ${a?"p-4":"p-6"}`,children:[a&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 no-scrollbar",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"V sinh ATTP"},{id:"nutrition",label:"Dinh dng"}].map(Q=>i.jsx("button",{onClick:()=>g(Q.id),className:`flex-shrink-0 px-3 py-1.5 text-xs font-bold rounded-full transition-all ${d===Q.id?"bg-emerald-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:Q.label},Q.id))}),i.jsxs("div",{className:`flex items-center justify-between ${a?"mb-4":"mb-8"}`,children:[i.jsx("h2",{className:`${a?"text-base":"text-lg"} font-bold text-gray-800`,children:Le(d)}),i.jsxs("div",{className:"relative",children:[i.jsx(El,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim h s...",value:x,onChange:Q=>p(Q.target.value),className:`pl-9 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 ${a?"w-40":"w-64"} bg-white shadow-sm`})]})]}),i.jsxs("div",{className:`grid ${a?"grid-cols-2 gap-3":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"}`,children:[Ne.map(Q=>i.jsxs("div",{onClick:()=>je(Q),className:`group bg-white rounded-2xl border border-gray-100 ${a?"p-4":"p-6"} shadow-sm hover:shadow-lg hover:border-emerald-200 cursor-pointer transition-all duration-300 flex flex-col items-center text-center relative overflow-hidden`,children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-50 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),i.jsx("div",{className:`${a?"mb-2":"mb-4"}`,children:a?i.jsxs("div",{className:"h-10 w-10 flex items-center justify-center bg-gray-100 rounded-lg",children:[Q.type==="excel"&&i.jsx(n0,{className:"h-5 w-5 text-green-600"}),Q.type==="pdf"&&i.jsx(mf,{className:"h-5 w-5 text-red-500"}),Q.type==="word"&&i.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),!["excel","pdf","word"].includes(Q.type)&&i.jsx(Ge,{className:"h-5 w-5 text-gray-400"})]}):i.jsx(fO,{type:Q.type})}),i.jsx("h3",{className:`${a?"text-xs":"text-sm"} font-bold text-gray-800 mb-1 line-clamp-2 group-hover:text-emerald-700 transition-colors`,children:Q.name}),i.jsxs("p",{className:`${a?"text-[10px]":"text-xs"} text-gray-500 ${a?"mb-2":"mb-4"}`,children:["ng bi ",i.jsx("span",{className:"font-medium text-gray-700",children:Q.uploader.name})]}),i.jsxs("div",{className:`w-full ${a?"pt-2":"pt-4"} border-t border-gray-50 flex items-center justify-between mt-auto relative z-10`,children:[i.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[i.jsx(Fr,{className:"h-3 w-3"}),new Date(Q.uploadDate).toLocaleDateString("vi-VN")]}),i.jsxs("div",{className:"flex items-center gap-1",children:[Q.comments.length>0&&i.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] font-bold text-red-500 bg-red-50 px-1 py-0.5 rounded-full",children:[i.jsx(Ta,{className:"h-2.5 w-2.5"}),Q.comments.length]}),!a&&i.jsx("button",{onClick:we=>ee(Q,we),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Xa ti liu",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]})]},Q.id)),Ne.length===0&&i.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:i.jsx(Ge,{className:"h-8 w-8 text-gray-300"})}),i.jsx("p",{children:"Khng tm thy h s no."})]})]})]})]}),E&&A&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',A.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),N&&b&&(a?i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 bg-white flex-shrink-0 safe-area-inset-top",children:[i.jsx("button",{onClick:()=>k(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(Os,{className:"h-5 w-5 rotate-180"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-sm font-bold text-gray-900 truncate",children:b.name}),i.jsxs("p",{className:"text-[10px] text-gray-500",children:[Le(d),"  ",new Date(b.uploadDate).toLocaleDateString("vi-VN")]})]})]}),i.jsx("div",{className:"flex-1 bg-gray-100 overflow-hidden",children:xe(!1)}),i.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 px-4 py-3 safe-area-inset-bottom",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:"h-7 w-7 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-[10px] flex-shrink-0",children:b.uploader.name.charAt(0)}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:b.uploader.name}),b.comments.length>0&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:[i.jsx(Ta,{className:"w-2.5 h-2.5 mr-0.5"}),b.comments.length]})]}),i.jsx("button",{onClick:Q=>ee(b,Q),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(Tn,{className:"h-4 w-4"})}),i.jsxs("a",{href:b.fileUrl,download:!0,className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium shadow-md",onClick:Q=>Q.stopPropagation(),children:[i.jsx(wn,{className:"h-4 w-4"}),"Ti v"]})]})})]}):i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>k(!1)}),i.jsxs("div",{className:"relative w-full max-w-6xl bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-emerald-50 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-white rounded-lg border border-emerald-100 shadow-sm",children:i.jsx(Ge,{className:"h-5 w-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-0.5 block",children:"Chi tit h s"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-1",children:b.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{b.fileUrl&&b.fileUrl!=="#"?window.open(b.fileUrl,"_blank"):t("Khng c file","Ti liu ny khng c file nh km.","error")},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>k(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-row",children:[i.jsxs("div",{className:"flex-1 overflow-hidden bg-gray-100 border-r border-gray-200 relative flex flex-col",children:[i.jsx("div",{className:"absolute top-4 right-6 flex gap-2 z-10",children:i.jsx("button",{onClick:()=>V(!0),className:"bg-white/80 backdrop-blur p-1.5 rounded-md shadow-sm text-gray-600 hover:text-emerald-600 border border-gray-200 hover:scale-110 transition-all",title:"Phng to ton mn hnh",children:i.jsx(l1,{className:"h-4 w-4"})})}),i.jsx("div",{className:"flex-1 w-full h-full",children:xe(!1)})]}),i.jsxs("div",{className:"w-72 lg:w-80 bg-white flex flex-col h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:b.uploader.name})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(b.uploadDate).toLocaleDateString("vi-VN")})]}),b.category==="menu"&&b.startDate&&b.endDate&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Thi gian p dng"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[i.jsx(Fr,{className:"h-3 w-3"}),i.jsx("span",{children:new Date(b.startDate).toLocaleDateString("vi-VN")}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(b.endDate).toLocaleDateString("vi-VN")})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2 sticky top-0 bg-white pb-2 z-10",children:[i.jsx(Ta,{className:"h-4 w-4 text-emerald-500"}),"Gp  chuyn mn"]}),i.jsxs("div",{className:"space-y-4",children:[b.comments&&b.comments.length>0?b.comments.map(Q=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center justify-center text-xs font-bold flex-shrink-0",children:Q.userName.charAt(0)}),i.jsxs("div",{className:"bg-gray-50 rounded-xl rounded-tl-none p-3 flex-1 border border-gray-100",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-900",children:Q.userName}),i.jsx("span",{className:"text-[10px] text-gray-500",children:Q.userRole})]}),i.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:Q.content}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(Q.timestamp).toLocaleString("vi-VN")})]})]},Q.id)):i.jsxs("div",{className:"text-center py-12 flex flex-col items-center text-gray-300",children:[i.jsx(Ta,{className:"h-10 w-10 mb-2 opacity-50"}),i.jsx("span",{className:"text-xs italic",children:"Cha c gp  no."})]}),i.jsx("div",{ref:z})]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[i.jsxs("form",{onSubmit:Ce,className:"relative",children:[i.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3 bg-white border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent shadow-sm",placeholder:"Nhp  kin ch o...",value:M,onChange:Q=>$(Q.target.value)}),i.jsx("button",{type:"submit",disabled:!M.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-all",children:i.jsx(Du,{className:"h-4 w-4"})})]}),i.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center flex items-center justify-center gap-1",children:[i.jsx(Oo,{className:"h-2.5 w-2.5"})," Ch ni b BGH xem c."]})]})]})]})]})]})),I&&b&&i.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 text-white backdrop-blur-md z-10",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:i.jsx(Ge,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white leading-none",children:b.name}),i.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Ch  xem ton mn hnh"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Thu nh",children:i.jsx(a0,{className:"h-5 w-5"})}),i.jsx("button",{className:"p-2 hover:bg-white/20 rounded-full transition-colors",title:"Phng to",children:i.jsx(r0,{className:"h-5 w-5"})}),i.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),i.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-red-500/80 hover:text-white bg-white/10 rounded-full transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center custom-scrollbar bg-neutral-900/50",children:xe(!0)})]}),Y&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-emerald-600"}),"Ti ln Bn tr"]}),i.jsx("button",{onClick:()=>ae(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi d liu"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"menu",label:"Thc n Tun"},{id:"food_safety",label:"H s V sinh ATTP"},{id:"nutrition",label:"Bo co Dinh dng"}].map(Q=>i.jsx("button",{onClick:()=>ve(we=>({...we,type:Q.id})),className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-all ${de.type===Q.id?"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:Q.label},Q.id))})]}),de.type==="menu"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:de.startDate,onChange:Q=>ve({...de,startDate:Q.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"n ngy"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-sm",value:de.endDate,onChange:Q=>ve({...de,endDate:Q.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn hin th ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",placeholder:de.type==="menu"?"T ng in khi chn ngy...":"Nhp tn h s...",value:de.name,onChange:Q=>ve({...de,name:Q.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:P,onDragOver:Q=>Q.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${K?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:bg-gray-50 hover:border-emerald-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:le}),K?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(xs,{className:"h-10 w-10 text-emerald-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-emerald-800 truncate max-w-[250px]",children:K.name}),i.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[(K.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-emerald-100 text-emerald-600 transition-colors",children:i.jsx(ff,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-emerald-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:be,disabled:!K,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})})]})},Tj=({file:s,onClose:e,onSaveSuccess:t,onFileUpdate:a,collectionName:o,storageFolder:u="files",canEdit:d=!1,canApprove:g=!1,canComment:x=!1,canRespond:p=!1,onApprove:b,onRequestRevision:w,onPostComment:N,onEditComment:k,onDeleteComment:M,canManageComment:$})=>{var Us,Hn;const[z,Y]=j.useState(!0),[ae,K]=j.useState(!1),[H,de]=j.useState(null),[ve,E]=j.useState(null),[S,A]=j.useState(!1),[O,I]=j.useState(null),[V,R]=j.useState(!1),[Ne,je]=j.useState(null),[ee,se]=j.useState(""),[Ce,Le]=j.useState(!1),[ze,P]=j.useState(""),[le,be]=j.useState(null),[xe,Q]=j.useState(null),[we,D]=j.useState(null),[U,q]=j.useState(null),{user:Ee}=ys(),he=za(),[Ie,He]=j.useState(!1),st=j.useRef(null),Xe=j.useRef(Date.now()),gt=(mt,Ye="info")=>{je({message:mt,type:Ye}),setTimeout(()=>je(null),3e3)},pt=()=>{var Ye,Et,en;return s.type?s.type.toLowerCase():((en=(Et=(Ye=s.url)==null?void 0:Ye.split(".").pop())==null?void 0:Et.split("?")[0])==null?void 0:en.toLowerCase())||""},Lt=()=>{const mt=pt(),Ye=s.name.replace(/\.[^/.]+$/,"");return["xlsx","xls","csv"].includes(mt)?`${Ye}.xlsx`:["pptx","ppt"].includes(mt)?`${Ye}.pptx`:mt==="pdf"?`${Ye}.pdf`:`${Ye}.docx`},Tt=()=>{const mt=pt();return!["pdf"].includes(mt)};j.useEffect(()=>{s.url&&(de(s.url),be(null))},[s.url]),j.useEffect(()=>{(async()=>{if(!d||!s.uploaderId){I(null);return}try{const Ye=Be(Te,"users",s.uploaderId),Et=await xr(Ye);if(Et.exists()){const en=Et.data();I(en.signatureUrl||null)}}catch(Ye){console.error("Error fetching author signature:",Ye),I(null)}})()},[d,s.uploaderId]);const zt=()=>{var en;if(!O)return;const Ye=`chu_ky_${((en=s.uploader)==null?void 0:en.replace(/\s+/g,"_"))||"author"}.png`,Et=new Image;Et.crossOrigin="anonymous",Et.onload=()=>{const It=document.createElement("canvas");It.width=Et.naturalWidth,It.height=Et.naturalHeight;const bt=It.getContext("2d");bt&&(bt.drawImage(Et,0,0),It.toBlob(Xt=>{if(Xt){const vt=URL.createObjectURL(Xt),ln=document.createElement("a");ln.href=vt,ln.download=Ye,document.body.appendChild(ln),ln.click(),document.body.removeChild(ln),URL.revokeObjectURL(vt),gt(" ti ch k thnh cng!","success")}},"image/png"))},Et.onerror=()=>{console.error("Error loading signature image"),gt("Li khi ti ch k","error")},Et.src=O};j.useEffect(()=>{const mt=async Ye=>{if(Ye.data.type==="FILE_SAVED"&&Ye.data.base64&&await bs(Ye.data.base64),Ye.data.type==="FILE_LOAD_ERROR"){console.error("File load error from iframe:",Ye.data);const Et=Ye.data.code==="88"?"Ti liu c nh dng phc tp hoc qu ln, khng th xem trc trc tip.":`Li ti ti liu: ${Ye.data.message}`;be(Et),Y(!1)}Ye.data.type==="SAVE_NOT_ALLOWED"&&gt(Ye.data.message||"Bn khng phi l tc gi ca file, vui lng lin h tc gi  yu cu chnh sa.","error"),Ye.data.type==="SAVE_ERROR"&&(console.error("Save error from editor:",Ye.data.message),Ye.data.message&&(Ye.data.message.includes("code: 88")||Ye.data.message.includes("code 88"))?console.log("Ignored error code 88 toast"):gt("Li khi lu: "+(Ye.data.message||"Unknown error"),"error"),K(!1))};return window.addEventListener("message",mt),()=>window.removeEventListener("message",mt)},[s,u,o]);const bs=async mt=>{if(d){K(!0);try{const Ye=atob(mt.split(",")[1]),Et=new ArrayBuffer(Ye.length),en=new Uint8Array(Et);for(let St=0;St<Ye.length;St++)en[St]=Ye.charCodeAt(St);const It=pt();let bt="application/vnd.openxmlformats-officedocument.wordprocessingml.document";["xlsx","xls"].includes(It)&&(bt="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),["pptx","ppt"].includes(It)&&(bt="application/vnd.openxmlformats-officedocument.presentationml.presentation");const Xt=new Blob([Et],{type:bt}),vt=Date.now(),ln=s.name.replace(/[^a-zA-Z0-9]/g,"_"),as=`${u}/${vt}_${ln}.${It==="docx"||It==="doc"?"docx":It}`,_s=nr(Ls,as);await er(_s,Xt,{contentType:bt});const Nn=await tr(_s),Ns=Be(Te,o,s.id);await Qt(Ns,{url:Nn,lastModified:new Date().toISOString()}),t==null||t(Nn),gt(" lu thnh cng!","success")}catch(Ye){console.error("Error saving:",Ye),gt("Li khi lu: "+Ye.message,"error")}finally{K(!1)}}},ar=()=>{if(!ee.trim())return;const mt=x?"comment":"response";N==null||N(ee.trim(),mt),se(""),q(null)},Dn=()=>{b==null||b()},Bt=()=>{Le(!0)},vs=()=>{ze.trim()&&(w==null||w(ze.trim()),Le(!1),P(""))},ws=()=>{if(!s.approval)return null;const mt=s.approval.status;return mt==="approved"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[i.jsx(xs,{className:"h-3 w-3"}),"  duyt"]}):mt==="needs_revision"?i.jsxs("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"})," Cn sa"]}):i.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700",children:"Ch duyt"})};return i.jsxs("div",{className:"fixed inset-0 z-[70] flex bg-gray-900",children:[i.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[i.jsxs("div",{className:`flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md flex-shrink-0 ${he?"py-2":""}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:i.jsx(Ge,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"font-semibold text-base truncate pr-2",children:s.name}),!he&&i.jsx("p",{className:"text-xs text-blue-100 opacity-80",children:Tt()?"Chnh sa trc tip":"Ch xem"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!he&&d&&O&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:zt,className:"flex items-center gap-2 px-3 py-2 bg-indigo-500 hover:bg-indigo-600 rounded-lg transition-colors text-sm font-medium",title:"Ti ch k",children:[i.jsx(Ds,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Ti ch k"})]}),i.jsx("button",{onClick:()=>R(!0),className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Hng dn chn ch k",children:i.jsx(fC,{className:"h-5 w-5"})})]}),!he&&i.jsx("div",{className:"text-xs bg-blue-800 px-2 py-1 rounded text-blue-200",children:ae?"ang lu...":"T ng lu khi Save"}),i.jsx("a",{href:s.url,download:s.name,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-blue-500 rounded-full transition-colors",children:i.jsx(Jt,{className:"h-5 w-5"})})]})]}),i.jsx("div",{className:"flex-1 relative bg-gray-100",children:le?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Khng th xem trc ti liu"}),i.jsx("p",{className:"text-gray-600 max-w-md mb-6",children:le}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("a",{href:s.url,download:s.name,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg flex items-center justify-center gap-2 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung"]}),i.jsxs("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(s.url)}&embedded=true`,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 font-bold rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors shadow-lg hover:shadow-xl",children:[i.jsx(r1,{className:"h-5 w-5"}),"Xem bng Google Viewer"]})]})]}):i.jsxs(i.Fragment,{children:[s.url&&(he?i.jsx("iframe",{ref:st,src:`https://docs.google.com/viewer?url=${encodeURIComponent(s.url)}&embedded=true`,className:"w-full h-full border-none",title:"Document Viewer",onLoad:()=>Y(!1),sandbox:"allow-scripts allow-same-origin allow-popups"}):i.jsx("iframe",{ref:st,src:`/office/index.html?t=${Xe.current}&src=${encodeURIComponent(s.url)}&filename=${encodeURIComponent(Lt())}&locale=en&mode=edit&canSave=${d&&Tt()?"true":"false"}`,className:"w-full h-full border-none",title:"Document Editor",onLoad:()=>Y(!1)})),z&&i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:[i.jsx(Ni,{className:"h-10 w-10 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"ang ti ti liu..."})]})]})}),he&&i.jsxs("div",{className:"bg-white border-t border-gray-200 p-3 pb-safe flex flex-col gap-2 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-20",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[ws(),i.jsxs("button",{onClick:()=>He(!0),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-blue-600 bg-gray-100 px-2 py-1 rounded-full",children:[i.jsx(pp,{className:"h-3 w-3"})," Chi tit & LS",s.commentCount?i.jsx("span",{className:"ml-1 bg-red-500 text-white text-[9px] px-1 rounded-full",children:s.commentCount}):null]})]}),d&&O&&i.jsx("button",{onClick:zt,className:"text-indigo-600 p-1.5 bg-indigo-50 rounded-lg",title:"Ti ch k",children:i.jsx(Ds,{className:"h-4 w-4"})})]}),g&&((Us=s.approval)==null?void 0:Us.status)!=="approved"&&i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsxs("button",{onClick:Dn,className:"flex-1 px-3 py-2.5 bg-green-600 active:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(xs,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:Bt,className:"flex-1 px-3 py-2.5 bg-amber-500 active:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Qn,{className:"h-4 w-4"})," Yu cu sa"]})]})]})]}),he&&Ie&&i.jsx("div",{className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/50 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white w-full max-h-[80vh] rounded-t-2xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"Thng tin & Trao i"}),i.jsx("button",{onClick:()=>He(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(mr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:s.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(va,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:s.date?new Date(s.date).toLocaleDateString("vi-VN"):"Khng r"})]})]}),i.jsxs("h4",{className:"font-bold text-gray-800 text-sm mb-2 flex items-center gap-2",children:[i.jsx(Ea,{className:"h-4 w-4"})," Lch s trao i"]}),i.jsx(V_,{comments:s.comments||[],canManageComment:$,onEdit:Q,onDelete:D,canRespond:p,replyingToId:U,setReplyingToId:q,newComment:ee,setNewComment:se,handleSubmitComment:ar})]}),i.jsx("div",{className:"p-3 border-t border-gray-100",children:i.jsx("button",{onClick:()=>He(!1),className:"w-full py-3 bg-gray-100 text-gray-700 font-bold rounded-lg",children:"ng"})})]})}),!he&&i.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col flex-shrink-0",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"Thng tin file"}),ws()]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(mr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:s.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx(va,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{children:s.date?new Date(s.date).toLocaleDateString("vi-VN"):"Khng r"})]})]})]}),g&&((Hn=s.approval)==null?void 0:Hn.status)!=="approved"&&i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-blue-50 flex gap-2",children:[i.jsxs("button",{onClick:Dn,className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(xs,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:Bt,className:"flex-1 px-3 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 transition-colors",children:[i.jsx(Qn,{className:"h-4 w-4"})," Yu cu sa"]})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"p-3 bg-white border-b border-gray-100 flex items-center gap-2",children:[i.jsx(Ea,{className:"h-4 w-4 text-gray-500"}),i.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:"Lch s trao i"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:i.jsx(V_,{comments:s.comments||[],canManageComment:$,onEdit:Q,onDelete:D,canRespond:p,replyingToId:U,setReplyingToId:q,newComment:ee,setNewComment:se,handleSubmitComment:ar})})]})]}),Ce&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Yu cu sa li"}),i.jsx("textarea",{value:ze,onChange:mt=>P(mt.target.value),placeholder:"Nhp l do yu cu sa...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>{Le(!1),P("")},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:vs,disabled:!ze.trim(),className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Gi yu cu"})]})]})}),xe&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Chnh sa gp "}),i.jsx("textarea",{value:xe.content,onChange:mt=>Q({...xe,content:mt.target.value}),placeholder:"Nhp ni dung gp ...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none h-24 text-gray-800"}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{xe.content.trim()&&k&&(k(xe.id,xe.content.trim()),Q(null))},disabled:!xe.content.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold disabled:opacity-50",children:"Lu thay i"})]})]})}),we&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-96 max-w-[90vw]",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Xc nhn xa"}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"Hy"}),i.jsx("button",{onClick:()=>{M&&(M(we),D(null))},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold",children:"Xa"})]})]})}),V&&i.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-[500px] max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(pp,{className:"h-5 w-5 text-blue-600"}),"Hng dn chn ch k vo ti liu"]}),i.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:" Lu  quan trng:"}),i.jsx("p",{className:"text-blue-700",children:"Bn va ti xung file ch k. Hy lm theo cc bc di y  chn ch k vo ti liu Word ca bn."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"M ti liu Word"}),i.jsx("p",{className:"text-gray-600",children:"M ti liu cn chn ch k bng Microsoft Word hoc ng dng son tho vn bn."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"t con tr ti v tr mun chn"}),i.jsx("p",{className:"text-gray-600",children:"Click vo v tr trong ti liu ni bn mun t ch k (thng l cui trang hoc di vn bn)."})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Vo menu Insert (Chn)"}),i.jsxs("p",{className:"text-gray-600",children:["Trn thanh menu, chn tab ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Insert"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Chn"}),")."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn Image  Image From File"}),i.jsxs("p",{className:"text-gray-600",children:["Click vo ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Picture"})," (hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"Hnh nh"}),"), sau  chn ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"This Device"})," hoc ",i.jsx("span",{className:"font-semibold bg-gray-100 px-2 py-0.5 rounded",children:"From File"}),"."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"Chn file ch k va ti"}),i.jsxs("p",{className:"text-gray-600",children:["Tm v chn file ch k ",i.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded text-xs",children:"chu_ky_[tn_ca_bn].png"})," trong th mc Downloads."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold",children:"6"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:"iu chnh kch thc v v tr"}),i.jsx("p",{className:"text-gray-600",children:"Sau khi chn, bn c th ko gc nh  thay i kch thc v di chuyn n v tr mong mun."})]})]})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[i.jsx("p",{className:"font-semibold text-green-800 mb-1",children:" Hon thnh!"}),i.jsx("p",{className:"text-green-700 text-xs",children:"Ch k ca bn  c chn vo ti liu. Bn c th lu v chia s ti liu ny."})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:" hiu"})})]})}),Ne&&i.jsxs("div",{className:`fixed bottom-4 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-lg shadow-lg text-white font-medium flex items-center gap-2
                    ${Ne.type==="success"?"bg-green-600":Ne.type==="error"?"bg-red-600":"bg-blue-600"}`,children:[Ne.type==="success"&&i.jsx("span",{children:""}),Ne.type==="error"&&i.jsx("span",{children:""}),Ne.message]})]})},V_=({comments:s,canManageComment:e,onEdit:t,onDelete:a,canRespond:o,replyingToId:u,setReplyingToId:d,newComment:g,setNewComment:x,handleSubmitComment:p})=>i.jsx("div",{className:"space-y-3",children:!s||s.length===0?i.jsx("p",{className:"text-sm text-gray-400 italic text-center py-4",children:"Cha c trao i no"}):s.map(b=>{var w;return i.jsxs("div",{className:`flex gap-2 ${b.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`h-7 w-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 text-white
                            ${b.type==="request"?"bg-amber-500":b.type==="response"?"bg-blue-500":"bg-gray-400"}`,children:((w=b.userName)==null?void 0:w.charAt(0))||"U"}),i.jsxs("div",{className:`flex-1 p-2 rounded-lg text-sm ${b.type==="response"?"bg-blue-50":"bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-semibold text-gray-700 text-xs",children:b.userName}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(b.timestamp).toLocaleDateString("vi-VN")}),(e==null?void 0:e(b))&&i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[i.jsx("button",{onClick:()=>t({id:b.id,content:b.content}),className:"p-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx(Ds,{className:"h-3 w-3"})}),i.jsx("button",{onClick:()=>a(b.id),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx(Tn,{className:"h-3 w-3"})})]})]})]}),i.jsx("p",{className:"text-gray-600",children:b.content}),o&&b.type==="request"&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:!u||u!==b.id?i.jsxs("button",{onClick:()=>d(b.id),className:"text-xs text-blue-600 hover:text-blue-800 font-bold flex items-center gap-1 transition-colors",children:[i.jsx(Ea,{className:"h-3 w-3"}),"Phn hi yu cu ny"]}):i.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 duration-200",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",autoFocus:!0,value:g,onChange:N=>x(N.target.value),placeholder:"Nhp ni dung phn hi...",className:"flex-1 px-3 py-2 text-sm border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",onKeyDown:N=>N.key==="Enter"&&p()}),i.jsx("button",{onClick:p,disabled:!g.trim(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 shadow-sm",children:i.jsx(Du,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>{d(null),x("")},className:"px-2 py-2 text-gray-400 hover:bg-gray-100 rounded-lg",children:i.jsx(Jt,{className:"h-4 w-4"})})]})})})]})]},b.id)})}),gO=()=>{var te,fe,_e;const s=rr(),{user:e}=ys(),{addToast:t}=Nr(),[a,o]=n1(),{currentSchoolYear:u}=Ju(),d=za(),[g,x]=j.useState(!1),[p,b]=j.useState(null),[w,N]=j.useState(!1),[k,M]=j.useState(null),[$,z]=j.useState([]),[Y,ae]=j.useState([]);j.useEffect(()=>{const B=Sn(kt(Te,"plans"),tc("uploadDate","desc")),X=vr(B,pe=>{const ye=[],Me=[];pe.forEach(Oe=>{const qe=Oe.data(),Ze={id:Oe.id,...qe};(qe.schoolYear||"2025-2026")===u&&(qe.type==="plan"?ye.push(Ze):Me.push(Ze))}),z(ye),ae(Me)});return()=>X()},[u]);const K=j.useRef(null);j.useEffect(()=>{const B=a.get("fileId"),X=a.get("highlight");if(!B||X!=="true"||$.length===0&&Y.length===0||K.current===B)return;const pe=$.find(Oe=>Oe.id===B),ye=Y.find(Oe=>Oe.id===B),Me=pe||ye;if(Me){K.current=B,b(B),o({},{replace:!0});const Oe=document.getElementById(`file-${B}`);Oe&&Oe.scrollIntoView({behavior:"smooth",block:"center"});const qe=setTimeout(()=>{de(Me),E(!0)},300),Ze=setTimeout(()=>{b(null),K.current=null},5e3);return()=>{clearTimeout(qe),clearTimeout(Ze)}}},[a,$,Y,o]);const[H,de]=j.useState(null),[ve,E]=j.useState(!1),[S,A]=j.useState(!1),[O,I]=j.useState(!1),[V,R]=j.useState(""),Ne=j.useRef(null),[je,ee]=j.useState(null),[se,Ce]=j.useState(""),[Le,ze]=j.useState(!1),[P,le]=j.useState(null),[be,xe]=j.useState(!1),[Q,we]=j.useState(null),[D,U]=j.useState({type:"plan",name:"",date:"",status:"draft"}),[q,Ee]=j.useState(!1),[he,Ie]=j.useState(null),[He,st]=j.useState(!1),[Xe,gt]=j.useState(null),[pt,Lt]=j.useState(""),[Tt,zt]=j.useState(!1),[bs,ar]=j.useState(null),Dn=(e==null?void 0:e.role)==="head_teacher"||(e==null?void 0:e.role)==="vice_head_teacher"||(e==null?void 0:e.role)==="teacher",Bt=B=>{if(!e)return!1;const X=B,pe=X.uploaderId&&X.uploaderId===e.id,ye=B.uploader===e.fullName;return pe||ye},vs=B=>{var pe;return!e||((pe=B.approval)==null?void 0:pe.status)==="approved"?!1:["principal","admin"].includes(e.role)},ws=B=>{var Me;if(!e)return!1;const X=(Me=B.approval)==null?void 0:Me.status;return X==="approved"?!1:Bt(B)&&X==="needs_revision"},Us=B=>e?B.userId===e.id:!1,Hn=B=>{const X=B,pe=X.fileType,ye=X.url||"",Me=ye.includes(".docx")||ye.includes(".doc"),Oe=pe==="word"||pe==="docx"||Me;return console.log("[isWordFile] Checking:",{fileType:pe,url:ye.substring(0,50)+"...",hasWordExtension:Me,result:Oe}),Oe},mt=(B,X)=>{X.stopPropagation(),ar(B),zt(!0)},Ye=()=>{t("Lu thnh cng","Ti liu  c cp nht.","success")},Et=B=>e?["principal","admin"].includes(e.role):!1,en=async B=>{if(e)try{const X=Be(Te,"plans",B.id);await Qt(X,{approval:{status:"approved",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString()}}),t(" duyt",` duyt h s "${B.title}".`,"success"),await pr("system",e,{type:"group",name:` duyt: ${B.title}`,targetPath:"/to-chuyen-mon-ke-hoach",extraInfo:{uploaderId:B.uploaderId}})}catch(X){console.error("Error approving plan:",X),t("Li","Khng th duyt h s. Vui lng th li.","error")}},It=async B=>{if(!(!e||B.uploaderId!==e.id)&&window.confirm("Bn c chc chn mun CHT bin bn ny? Sau khi cht s hin th trng thi ' cht'."))try{const X=Be(Te,"plans",B.id);await Qt(X,{status:"finalized"}),t(" cht bin bn","Bin bn hp  c chuyn sang trng thi  cht.","success")}catch(X){console.error("Error finalizing minute:",X),t("Li","Khng th cht bin bn. Vui lng th li.","error")}},bt=B=>{gt(B),Lt(""),st(!0)},Xt=async()=>{if(!(!e||!Xe))try{const B=Be(Te,"plans",Xe.id),X={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:pt||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},pe={status:"needs_revision",reviewerId:e.id,reviewerName:e.fullName,reviewerRole:e.role,reviewedAt:new Date().toISOString(),rejectionReason:pt};await Qt(B,{approval:pe,comments:qo(X),commentCount:(Xe.commentCount||0)+1}),H&&H.id===Xe.id&&de({...H,approval:pe,comments:[...H.comments||[],X],commentCount:(H.commentCount||0)+1}),t(" gi yu cu sa",` yu cu sa li h s "${Xe.title}".`,"success"),await pr("comment",e,{type:"group",name:`Yu cu sa: ${Xe.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${Xe.id}&highlight=true`,extraInfo:{uploaderId:Xe.uploaderId}}),st(!1),gt(null),Lt("")}catch(B){console.error("Error requesting revision:",B),t("Li","Khng th gi yu cu sa. Vui lng th li.","error")}};j.useEffect(()=>{var B;S&&((B=Ne.current)==null||B.scrollIntoView({behavior:"smooth"}))},[S,H]);const vt=B=>{de(B),E(!0)},ln=B=>{if(!e)return!1;const X=B,pe=X.uploaderId&&X.uploaderId===e.id,ye=B.uploader===e.fullName;return pe||ye},as=(B,X)=>{X.stopPropagation(),Ie(B),Ee(!0)},_s=async()=>{if(he&&!ln(he)){t("Khng c quyn","Bn khng th xa ti liu ca ngi khc.","error"),Ee(!1);return}if(he)try{await Rl(Be(Te,"plans",he.id)),t(" xa ti liu thnh cng","H s  c xa khi danh sch.","success"),Ee(!1),Ie(null),(H==null?void 0:H.id)===he.id&&(A(!1),de(null))}catch(B){console.error("Error deleting document: ",B),t("Li","Khng th xa h s. Vui lng th li.","error")}},Nn=async B=>{var pe;if(!V.trim()||!H||!e||!ws(H))return;const X={id:Date.now().toString(),userId:e.id,userName:e.fullName,userRole:e.role,content:V,timestamp:new Date().toISOString(),type:"response"};try{const ye=Be(Te,"plans",H.id);await Qt(ye,{approval:{...H.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:qo(X),commentCount:(H.commentCount||0)+1}),R(""),t(" gi phn hi","Phn hi ca bn  c gi. H s chuyn sang trng thi ch duyt.","success");const Me=(pe=H.approval)==null?void 0:pe.reviewerId;Me&&Me!==e.id&&await pr("comment",e,{type:"group",name:`Phn hi t ${e.fullName}: ${H.title}`,targetPath:`/to-chuyen-mon-ke-hoach?fileId=${H.id}&highlight=true`,extraInfo:{uploaderId:Me}})}catch(ye){console.error("Error adding response: ",ye),t("Li","Khng th gi phn hi.","error")}},Ns=async()=>{var B,X;if(!(!e||!P||!H))try{const pe=Be(Te,"plans",H.id),ye=H.comments.filter(Ze=>Ze.id!==P.id),Me={comments:ye,commentCount:ye.length};let Oe=(B=H.approval)==null?void 0:B.status,qe=(X=H.approval)==null?void 0:X.rejectionReason;P.type==="request"&&Oe==="needs_revision"&&(Oe="pending",qe=void 0,Me["approval.status"]="pending",Me["approval.rejectionReason"]=Eo(),Me["approval.rejectionReason"]=Eo(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","success")),await Qt(pe,Me),H&&de({...H,comments:ye,commentCount:ye.length,approval:{...H.approval,status:Oe,rejectionReason:qe}}),t(" xa","Ni dung  c xa.","success"),ze(!1),le(null)}catch(pe){console.error("Error deleting comment:",pe),t("Li","Khng th xa ni dung.","error")}},St=async()=>{if(k)try{const B=Be(Te,"plans",k.id);await Qt(B,{"approval.status":"pending","approval.rejectionReason":Eo(),"approval.reviewedAt":new Date().toISOString()}),H&&H.id===k.id&&de({...H,approval:{...H.approval,status:"pending",rejectionReason:void 0}}),t(" hon tc","Yu cu sa  c xa.","success"),N(!1),M(null)}catch(B){console.error("Error deleting active revision:",B),t("Li","Khng th xa yu cu.","error")}},Fn=()=>{U({type:"plan",name:"",date:new Date().toISOString().split("T")[0],status:"draft"}),we(null),xe(!0)},is=B=>{if(B.preventDefault(),B.dataTransfer.files&&B.dataTransfer.files[0]){const X=B.dataTransfer.files[0];we(X),D.name||U(pe=>({...pe,name:X.name.split(".")[0]}))}},Wn=B=>{if(B.target.files&&B.target.files[0]){const X=B.target.files[0];we(X),D.name||U(pe=>({...pe,name:X.name.split(".")[0]}))}},Fi=async()=>{if(!(!Q&&!D.name))try{let B="#",X="word";if(Q){const ye=nr(Ls,`plans/${Date.now()}_${Q.name}`);await er(ye,Q),B=await tr(ye),X=Q.name.endsWith("pdf")?"pdf":"word"}const pe={...D,title:D.name,uploader:(e==null?void 0:e.fullName)||"n danh",uploaderId:(e==null?void 0:e.id)||"",uploaderRole:(e==null?void 0:e.role)||"teacher",uploadDate:new Date().toISOString(),schoolYear:u,viewers:[],commentCount:0,comments:[],fileType:X,url:B,approval:{status:"pending"}};await kl(kt(Te,"plans"),pe),t("Ti ln thnh cng",` lu h s: ${D.name} (${D.type==="plan"?"K hoch":"Bin bn"})`,"success"),xe(!1),e&&await pr("upload",e,{type:"group",name:D.name,targetPath:"/to-chuyen-mon-ke-hoach"})}catch(B){console.error("Error adding document: ",B),t("Li","Khng th lu h s. Vui lng th li.","error")}},Ba=(B=!1)=>{if(!H)return null;const X=H.url;if(X&&X!=="#"){const pe=jl(X);return pe==="EXCEL_NO_PREVIEW"?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 bg-gray-50 rounded-lg p-8",children:[i.jsx("div",{className:"p-4 bg-green-100 rounded-full mb-4",children:i.jsx(Ge,{className:"h-16 w-16 text-green-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"File Excel"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center max-w-md",children:"File Excel khng th xem trc trc tip. Vui lng ti xung  xem ni dung."}),i.jsxs("a",{href:X,download:!0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all font-bold",children:[i.jsx(wn,{className:"h-5 w-5"}),"Ti xung file"]})]}):i.jsxs("div",{className:"w-full h-full relative group",children:[i.jsx("iframe",{src:pe,className:"w-full h-full border-0",title:"Document Preview",sandbox:"allow-scripts allow-same-origin allow-popups"}),d&&jj(X)&&i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 w-full px-4",children:i.jsxs("a",{href:pe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-white/90 backdrop-blur-sm text-gray-800 border border-gray-200 font-bold rounded-xl shadow-lg hover:bg-gray-50 transition-all font-sans",children:[i.jsx(r1,{className:"h-4 w-4"}),"M trong ca s mi"]})})]})}else return i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50",children:[i.jsx(Ge,{className:"h-16 w-16 mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium",children:"Khng c bn xem trc"}),i.jsx("p",{className:"text-sm",children:"Ti liu ny cha c file nh km hoc file khng h tr xem trc."})]})},qn=()=>{var B,X,pe;return H?i.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-50",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngi ng"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:H.uploader||"Khng r"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Ngy ti ln"}),i.jsx("span",{className:"text-xs font-bold text-gray-800",children:new Date(H.uploadDate||H.date||H.createdAt||Date.now()).toLocaleDateString("vi-VN")})]})]}),i.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 shadow-sm flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5 text-gray-500"}),i.jsx("h3",{className:"font-bold text-gray-800",children:"Lch s Yu cu & Phn hi"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 font-sans",children:[((B=H.approval)==null?void 0:B.status)==="needs_revision"&&((X=H.approval)==null?void 0:X.rejectionReason)&&!((pe=H.comments)!=null&&pe.length&&H.comments[H.comments.length-1].type==="request"&&H.comments[H.comments.length-1].content===H.approval.rejectionReason)&&i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 group relative",children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1 flex items-center gap-1",children:[i.jsx(Qn,{className:"h-3 w-3"})," Yu cu sa hin ti"]}),i.jsx("p",{className:"text-sm text-amber-900",children:H.approval.rejectionReason})]})})}),!H.comments||H.comments.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx("div",{className:"bg-gray-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:i.jsx(xs,{className:"h-6 w-6 text-gray-300"})}),i.jsx("p",{className:"text-sm",children:"Cha c lch s chnh sa no."})]}):H.comments.map(ye=>i.jsxs("div",{className:`flex gap-3 ${ye.type==="response"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold text-white shadow-sm
                           ${ye.type==="request"?"bg-amber-500":"bg-blue-500"}
                        `,children:ye.userName.charAt(0)}),i.jsxs("div",{className:"flex-1 max-w-[85%] space-y-1",children:[i.jsx("div",{className:`p-3 rounded-2xl shadow-sm text-sm relative group
                              ${ye.type==="request"?"bg-amber-50 border border-amber-100 text-gray-800 rounded-tl-none":ye.type==="response"?"bg-blue-50 border border-blue-100 text-gray-800 rounded-tr-none":"bg-white border border-gray-200 text-gray-600"}
                           `,children:i.jsx("p",{children:ye.content})}),i.jsx("div",{className:`text-[10px] text-gray-400 flex items-center gap-1 ${ye.type==="response"?"justify-end":""}`,children:i.jsx("span",{children:new Date(ye.timestamp||ye.createdAt).toLocaleString("vi-VN")})})]})]},ye.id))]})]}):null};return i.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[i.jsx("div",{className:"bg-white border-b border-orange-100 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4",children:[!d&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-orange-600",onClick:()=>s("/"),children:"Dashboard"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-orange-600",children:"T Chuyn Mn"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-orange-700",children:"K hoch T"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:`${d?"text-lg":"text-2xl"} font-bold text-gray-900 flex items-center gap-2 md:gap-3 cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>s("/"),children:[d?i.jsx("button",{onClick:B=>{B.stopPropagation(),s("/")},className:"mr-1",children:i.jsx(Os,{className:"h-5 w-5 rotate-180 text-gray-500"})}):i.jsx("span",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:i.jsx(Ge,{className:"h-6 w-6"})}),i.jsx("span",{children:"H s T Chuyn Mn"})]}),!d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:"Qun l k hoch hot ng v lu tr bin bn hp nh k."})]}),Dn&&i.jsxs("button",{onClick:Fn,className:`flex items-center justify-center gap-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg shadow-md transition-all font-medium ${d?"w-full py-2 text-sm":"px-5 py-2.5"}`,children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{children:d?"Ti ln mi":"Ti ln Bin bn/K hoch"})]})]})]})}),i.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8 space-y-6 md:space-y-10 pb-24 md:pb-20",children:[i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[i.jsx("h2",{className:"text-base md:text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"K hoch Hot ng"}),i.jsxs("button",{className:"text-xs font-medium text-gray-500 hover:text-orange-600 flex items-center gap-1",children:["Xem tt c ",i.jsx(Os,{className:"h-3 w-3"})]})]}),i.jsxs("div",{className:"grid gap-3 md:gap-4 grid-cols-1",children:[$.map(B=>{var X,pe,ye,Me,Oe;return i.jsx("div",{id:`file-${B.id}`,onClick:()=>vt(B),className:`bg-white rounded-xl p-4 md:p-5 border shadow-sm hover:shadow-md transition-all cursor-pointer group
                           ${p===B.id?"ring-2 ring-orange-500 bg-orange-50 animate-pulse":"border-gray-100 hover:border-orange-200"}
                        `,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 md:h-12 md:w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:i.jsx(Ge,{className:"h-5 w-5 md:h-6 md:w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2 mb-1",children:[i.jsx("h3",{className:"text-sm md:text-base font-bold text-gray-900 group-hover:text-orange-700 transition-colors leading-tight line-clamp-2",children:B.title}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[((X=B.approval)==null?void 0:X.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase whitespace-nowrap",children:[i.jsx(va,{className:"h-3 w-3"})," Ch duyt"]}),((pe=B.approval)==null?void 0:pe.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase whitespace-nowrap",children:[i.jsx(vi,{className:"h-3 w-3"}),"  duyt"]}),(((ye=B.approval)==null?void 0:ye.status)==="rejected"||((Me=B.approval)==null?void 0:Me.status)==="needs_revision")&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-orange-100 text-orange-700 uppercase whitespace-nowrap",title:B.approval.rejectionReason,children:[i.jsx(Ds,{className:"h-3 w-3"})," Cn sa"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mt-1 text-[10px] md:text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1 truncate max-w-[100px] md:max-w-none",children:[i.jsx(vo,{className:"h-3 w-3"})," ",B.uploader]}),i.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full flex-shrink-0"}),i.jsxs("span",{className:"flex items-center gap-1 flex-shrink-0",children:[i.jsx(va,{className:"h-3 w-3"})," ",new Date(B.uploadDate).toLocaleDateString("vi-VN")]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 justify-between md:justify-end w-full md:w-auto mt-1 md:mt-0 border-t md:border-t-0 border-gray-100 md:border-transparent pt-3 md:pt-0",children:[Et()&&((Oe=B.approval)==null?void 0:Oe.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:qe=>{qe.stopPropagation(),en(B)},className:"px-2 md:px-3 py-1.5 text-xs font-bold text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(vi,{className:"h-3.5 w-3.5"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Duyt"})]}),i.jsxs("button",{onClick:qe=>{qe.stopPropagation(),bt(B)},className:"px-2 md:px-3 py-1.5 text-xs font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg transition-colors shadow-sm flex items-center gap-1",children:[i.jsx(Ds,{className:"h-3.5 w-3.5"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Sa"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 ml-auto md:ml-0",children:[i.jsxs("div",{className:"flex -space-x-2",children:[B.viewers.map((qe,Ze)=>i.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-[10px] md:text-xs font-medium text-gray-600",children:qe},Ze)),B.viewers.length>0&&i.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 rounded-full bg-gray-50 border-2 border-white flex items-center justify-center text-[8px] md:text-[10px] text-gray-400",children:"+"})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[i.jsx(Ea,{className:"h-3 w-3 md:h-4 md:w-4"}),i.jsx("span",{className:"text-xs font-medium",children:B.commentCount})]})})]})]})]})},B.id)}),$.length===0&&i.jsxs("div",{className:"text-center py-8 md:py-12 bg-white rounded-xl border border-dashed border-gray-300",children:[i.jsx(Ge,{className:"h-10 w-10 md:h-12 md:w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Cha c k hoch no c ti ln."})]})]})]}),i.jsx("div",{className:"border-t border-gray-200"}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[i.jsx("h2",{className:"text-base md:text-lg font-bold text-gray-800 uppercase tracking-tight border-l-4 border-orange-500 pl-3",children:"Bin bn Hp t"}),i.jsx("button",{className:"p-1 text-gray-400 hover:text-orange-600 rounded-lg hover:bg-orange-50",children:i.jsx(kC,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:i.jsxs("div",{className:"relative pl-4 md:pl-8 py-4 md:py-8 space-y-6 md:space-y-8 before:absolute before:inset-y-0 before:left-4 md:before:left-8 before:w-0.5 before:bg-gray-200",children:[Y.map(B=>{var X,pe,ye,Me;return i.jsxs("div",{className:"relative pl-6 md:pl-8 pr-4 md:pr-6",children:[i.jsx("div",{className:`absolute left-[-5px] md:left-[-6px] top-1 h-3 w-3 md:h-4 md:w-4 rounded-full border-2 md:border-4 border-white ${B.status==="finalized"?"bg-green-500 ring-2 ring-green-100":"bg-orange-400 ring-2 ring-orange-100"} z-10`}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-1 md:gap-4 mb-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-500 font-mono",children:B.date}),i.jsxs("div",{className:"flex items-center gap-2",children:[B.status==="draft"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-orange-100 text-orange-700 rounded-full uppercase border border-orange-200",children:[i.jsx(va,{className:"h-2.5 w-2.5 inline mr-1"})," ang tho lun"]}),((X=B.approval)==null?void 0:X.status)==="pending"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-amber-100 text-amber-700 rounded-full uppercase border border-amber-200",children:[i.jsx(va,{className:"h-2.5 w-2.5 inline mr-1"})," Ch duyt"]}),((pe=B.approval)==null?void 0:pe.status)==="approved"&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-green-100 text-green-700 rounded-full uppercase border border-green-200",children:[i.jsx(vi,{className:"h-2.5 w-2.5 inline mr-1"})," Duyt"]}),(((ye=B.approval)==null?void 0:ye.status)==="rejected"||((Me=B.approval)==null?void 0:Me.status)==="needs_revision")&&i.jsxs("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-orange-100 text-orange-700 rounded-full uppercase border border-orange-200",children:[i.jsx(Ds,{className:"h-2.5 w-2.5 inline mr-1"})," Yu cu sa"]})]})]}),i.jsxs("div",{onClick:()=>vt(B),className:`group p-3 md:p-4 rounded-xl border-2 transition-all cursor-pointer bg-gray-50 hover:bg-white hover:shadow-md
                                 ${p===B.id?"border-orange-500 ring-2 ring-orange-200":"border-transparent hover:border-orange-100"}
                              `,children:[i.jsx("h3",{className:"text-sm md:text-base font-bold text-gray-800 mb-2 md:mb-3 group-hover:text-orange-700 transition-colors",children:B.title}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-xs md:text-sm text-gray-600 group-hover:border-orange-300 transition-colors flex-1 w-full truncate",children:[B.fileType==="word"?i.jsx(Ge,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}):i.jsx(mf,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),i.jsx("span",{className:"truncate flex-1",children:"Xem bin bn chi tit..."})]})})]})]},B.id)}),Y.length===0&&i.jsx("div",{className:"pl-6 md:pl-8 text-sm text-gray-400 italic",children:"Cha c bin bn hp no."})]})})]})]}),q&&he&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',he.title,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Ee(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:_s,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),He&&Xe&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ds,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn ang yu cu chnh sa cho ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Xe.title,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:pt,onChange:B=>Lt(B.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{st(!1),gt(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:Xt,disabled:!pt.trim(),className:"px-4 py-2 text-sm font-bold text-white bg-amber-500 rounded-lg hover:bg-amber-600 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Du,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),S&&H&&i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex justify-end",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity",onClick:()=>A(!1)}),i.jsxs("div",{className:`relative w-full ${d?"h-full":"max-w-6xl h-full"} bg-white shadow-2xl flex flex-col animate-in slide-in-from-right duration-300`,children:[i.jsxs("div",{className:`px-4 py-3 border-b border-orange-100 flex items-center gap-3 bg-orange-50/30 flex-shrink-0 safe-area-inset-top ${d?"justify-start":"justify-between"}`,children:[d&&i.jsx("button",{onClick:()=>A(!1),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-full",children:i.jsx(Os,{className:"h-5 w-5 rotate-180"})}),i.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[i.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-wider mb-0.5 block",children:H.type==="plan"?"K hoch":"Bin bn hp"}),i.jsx("h2",{className:`font-bold text-gray-900 leading-tight truncate ${d?"text-sm":"text-lg"}`,children:H.title})]}),i.jsx("div",{className:"flex items-center gap-1",children:!d&&i.jsxs(i.Fragment,{children:[H&&Hn(H)&&Bt(H)&&i.jsxs("button",{onClick:B=>mt(H,B),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors flex items-center gap-1",title:"Chnh sa file Word",children:[i.jsx(Ds,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:"Sa"})]}),i.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ti xung",children:i.jsx(wn,{className:"h-5 w-5"})}),ln(H)&&i.jsx("button",{onClick:B=>as(H,B),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xa ti liu",children:i.jsx(Tn,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>A(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx(Jt,{className:"h-6 w-6"})})]})})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row relative",children:[i.jsx("div",{className:"flex-1 overflow-hidden bg-gray-100 border-b md:border-b-0 md:border-r border-gray-200 relative flex flex-col",children:i.jsx("div",{className:"flex-1 w-full h-full",children:Ba(!1)})}),!d&&i.jsx("div",{className:"w-80 bg-gray-50 border-l border-gray-200 flex flex-col h-full flex-shrink-0",children:qn()})]}),d&&i.jsxs("div",{className:"bg-white border-t border-gray-200 p-3 pb-safe flex flex-col gap-2 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-20",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[((te=H.approval)==null?void 0:te.status)==="approved"&&i.jsxs("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[i.jsx(vi,{className:"h-3 w-3"}),"  duyt"]}),((fe=H.approval)==null?void 0:fe.status)==="pending"&&i.jsxs("span",{className:"text-xs font-bold text-amber-600 flex items-center gap-1",children:[i.jsx(va,{className:"h-3 w-3"})," Ch duyt"]}),i.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-blue-600 bg-gray-100 px-3 py-1.5 rounded-full",children:[i.jsx(pp,{className:"h-3 w-3"})," Chi tit & LS",H.commentCount?i.jsx("span",{className:"ml-1 bg-red-500 text-white text-[9px] px-1.5 rounded-full",children:H.commentCount}):null]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"p-2 text-gray-500 bg-gray-50 rounded-lg",children:i.jsx(wn,{className:"h-4 w-4"})}),ln(H)&&i.jsx("button",{onClick:B=>as(H,B),className:"p-2 text-red-500 bg-red-50 rounded-lg",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]}),Et()&&((_e=H.approval)==null?void 0:_e.status)==="pending"&&i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsxs("button",{onClick:()=>en(H),className:"flex-1 px-3 py-2.5 bg-green-600 active:bg-green-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(vi,{className:"h-4 w-4"})," Duyt"]}),i.jsxs("button",{onClick:()=>bt(H),className:"flex-1 px-3 py-2.5 bg-amber-500 active:bg-amber-600 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Ds,{className:"h-4 w-4"})," Yu cu sa"]})]}),H.type==="minute"&&ln(H)&&H.status!=="finalized"&&i.jsxs("button",{onClick:()=>It(H),className:"w-full mt-1 px-3 py-2.5 bg-blue-600 active:bg-blue-700 text-white text-sm font-bold rounded-lg flex items-center justify-center gap-1 shadow-sm",children:[i.jsx(Oo,{className:"h-4 w-4"})," Cht bin bn"]})]}),d&&g&&i.jsx("div",{className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/50 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white w-full max-h-[85vh] rounded-t-2xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"Thng tin & Lch s"}),i.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:i.jsx(Jt,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:qn()})]})})]})]}),be&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-orange-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-orange-600"}),"Thm mi H s Chuyn Mn"]}),i.jsx("button",{onClick:()=>xe(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loi h s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>U({...D,type:"plan"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${D.type==="plan"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"K hoch hot ng"}),i.jsx("button",{onClick:()=>U({...D,type:"minute"}),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-all ${D.type==="minute"?"bg-white text-orange-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Bin bn hp t"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tn vn bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",placeholder:"VD: K hoch chuyn mn Thng 11...",value:D.name,onChange:B=>U({...D,name:B.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:D.type==="minute"?"Ngy hp":"Thi gian p dng"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all text-sm",value:D.date,onChange:B=>U({...D,date:B.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trng thi"}),i.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all bg-white text-sm",value:D.status,onChange:B=>U({...D,status:B.target.value}),children:[i.jsx("option",{value:"draft",children:" ang tho lun"}),i.jsx("option",{value:"finalized",children:"  cht / Ban hnh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:is,onDragOver:B=>B.preventDefault(),className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Q?"border-orange-500 bg-orange-50":"border-gray-300 hover:bg-gray-50 hover:border-orange-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Wn,accept:".pdf,.doc,.docx"}),Q?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(xs,{className:"h-10 w-10 text-orange-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-orange-800 truncate max-w-[250px]",children:Q.name}),i.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[(Q.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-orange-100 text-orange-600 transition-colors",children:i.jsx(ff,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-orange-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Word (Ti a 10MB)"})]})]})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Fi,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-orange-600 hover:bg-orange-700 rounded-lg shadow-md transition-all",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})}),ve&&H&&i.jsx(Tj,{file:{id:H.id,name:H.title,url:H.url||"",type:H.fileType,uploader:H.uploader,uploaderId:H.uploaderId,uploaderRole:H.uploaderRole,date:H.uploadDate,comments:H.comments||[],commentCount:H.commentCount||0,approval:H.approval},onClose:()=>{E(!1),de(null)},onSaveSuccess:Ye,collectionName:"plans",storageFolder:"plans",canEdit:Bt(H),canApprove:Et(),canComment:vs(H),canRespond:ws(H),onApprove:()=>en(H),onRequestRevision:B=>{gt(H),Lt(B),Xt()},onPostComment:(B,X)=>{X==="response"&&(R(B),Nn())},canManageComment:Us,onEditComment:async(B,X)=>{if(!(!H||!e))try{const pe=(H.type==="plan","plans"),ye=Be(Te,pe,H.id),Oe=(H.comments||[]).map(qe=>qe.id===B?{...qe,content:X,editedAt:new Date().toISOString()}:qe);await Qt(ye,{comments:Oe}),de({...H,comments:Oe}),t(" cp nht gp ","Ni dung gp   c lu.","success")}catch(pe){console.error("Error editing comment:",pe),t("Li","Khng th cp nht gp .","error")}},onDeleteComment:async B=>{var pe,ye,Me;if(!H||!e)return;const X=(pe=H.comments)==null?void 0:pe.find(Oe=>Oe.id===B);if(X)try{const Oe=(H.type==="plan","plans"),qe=Be(Te,Oe,H.id),rt=(H.comments||[]).filter(Jn=>Jn.id!==B),$t={comments:rt,commentCount:rt.length};let on=(ye=H.approval)==null?void 0:ye.status,Kt=(Me=H.approval)==null?void 0:Me.rejectionReason;X.type==="request"&&on==="needs_revision"&&(on="pending",Kt=void 0,$t["approval.status"]="pending",$t["approval.rejectionReason"]=Eo(),t(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","success")),X.type==="response"&&rt.some(ta=>ta.type==="request")&&on==="pending"&&(on="needs_revision",$t["approval.status"]="needs_revision",t(" hon tc","Phn hi  b xa. Bn c th phn hi li.","success")),await Qt(qe,$t),de({...H,comments:rt,commentCount:rt.length,approval:{...H.approval,status:on,rejectionReason:Kt}}),t(" xa gp ","Gp   c xa thnh cng.","success")}catch(Oe){console.error("Error deleting comment:",Oe),t("Li","Khng th xa gp .","error")}}}),Le&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Tn,{className:"h-6 w-6 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xa gp ?"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Bn c chc chn mun xa gp  ny khng? Hnh ng ny khng th hon tc."}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>ze(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Ns,className:"px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa gp "})]})]})})}),w&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-6 w-6 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hy yu cu sa?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa yu cu sa ny? ",i.jsx("br",{}),"H s s quay v trng thi ",i.jsx("span",{className:"font-bold text-blue-600",children:"'Ch duyt'"}),"."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Khng xa"}),i.jsx("button",{onClick:St,className:"px-4 py-2 text-sm font-bold text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors",children:"ng  xa"})]})]})})})]})},pO=[{id:"choi",name:"LP CHI",teacher:"C L Th Mai",studentCount:30,newFiles:2},{id:"la1",name:"LP L 1",teacher:"C Nguyn Th Lan",studentCount:35,newFiles:5},{id:"la2",name:"LP L 2",teacher:"C Trn Th Cc",studentCount:32,newFiles:0},{id:"la3",name:"LP L 3",teacher:"C Phm Th Trc",studentCount:34,newFiles:1},{id:"la4",name:"LP L 4",teacher:"C Hong Th o",studentCount:33,newFiles:3}],xO=s=>{const e=s.split("-");let t=parseInt(e[0]),a=parseInt(e[1]);return(isNaN(t)||isNaN(a))&&(t=new Date().getFullYear(),a=t+1),[{id:"m9",name:`Thng 09/${t}`,fileCount:0,files:[]},{id:"m10",name:`Thng 10/${t}`,fileCount:0,files:[]},{id:"m11",name:`Thng 11/${t}`,fileCount:0,files:[]},{id:"m12",name:`Thng 12/${t}`,fileCount:0,files:[]},{id:"m01",name:`Thng 01/${a}`,fileCount:0,files:[]},{id:"m02",name:`Thng 02/${a}`,fileCount:0,files:[]},{id:"m03",name:`Thng 03/${a}`,fileCount:0,files:[]},{id:"m04",name:`Thng 04/${a}`,fileCount:0,files:[]},{id:"m05",name:`Thng 05/${a}`,fileCount:0,files:[]}]},L_=[{value:"09",label:"Thng 9"},{value:"10",label:"Thng 10"},{value:"11",label:"Thng 11"},{value:"12",label:"Thng 12"},{value:"01",label:"Thng 1"},{value:"02",label:"Thng 2"},{value:"03",label:"Thng 3"},{value:"04",label:"Thng 4"},{value:"05",label:"Thng 5"}],yO=[{value:"1",label:"Tun 1"},{value:"2",label:"Tun 2"},{value:"3",label:"Tun 3"},{value:"4",label:"Tun 4"}],bO=()=>{var qn;const{classId:s}=qE(),e=rr(),[t,a]=n1(),{user:o}=ys(),u=za(),{addToast:d}=Nr(),{currentSchoolYear:g}=Ju(),[x,p]=j.useState(null),b=(te,fe,_e)=>{if(!te)return!1;const B=Me=>Me.toLowerCase().trim().replace(/\s+/g," "),X=B(te),pe=B(fe),ye=_e?B(_e):"";return X===pe||X===ye||ye&&X.includes(ye)||ye&&ye.includes(X)?!0:(console.log("[matchesClassScope] No match:",{scope:te,classId:fe,className:_e,normalizedScope:X,normalizedName:ye}),!1)},[w,N]=j.useState(null),[k,M]=j.useState({}),[$,z]=j.useState({}),[Y,ae]=j.useState([]),[K,H]=j.useState([]),[de,ve]=j.useState(!0),[E,S]=j.useState("students"),[A,O]=j.useState("week"),[I,V]=j.useState(()=>{const fe=new Date().getMonth()+1;return fe===9?"m9":fe>=10?`m${fe}`:`m0${fe}`}),[R,Ne]=j.useState("all"),[je,ee]=j.useState(""),[se,Ce]=j.useState(null),[Le,ze]=j.useState(!1),[P,le]=j.useState("");j.useRef(null);const[be,xe]=j.useState(!1),[Q,we]=j.useState(null),[D,U]=j.useState({area:"plan",planType:"week",month:"11",week:"1",name:"",note:""}),[q,Ee]=j.useState(!1),[he,Ie]=j.useState(null),[He,st]=j.useState(!1),[Xe,gt]=j.useState(null),[pt,Lt]=j.useState(""),[Tt,zt]=j.useState(null),[bs,ar]=j.useState(!1),[Dn,Bt]=j.useState(null),vs=te=>{if(!o)return!1;const fe=te,_e=fe.uploaderId&&fe.uploaderId===o.id,B=fe.uploader===o.fullName;return _e||B},ws=()=>{d("Lu thnh cng","Ti liu  c cp nht.","success")},Us=te=>{var X;if(!o)return!1;const fe=te,_e=fe.uploaderRole;return!_e||((X=fe.approval)==null?void 0:X.status)==="approved"?!1:o.role==="vice_principal"?["head_teacher","vice_head_teacher","teacher"].includes(_e):["head_teacher","vice_head_teacher"].includes(o.role)?_e==="teacher":!1},Hn=te=>{var Oe,qe,Ze;if(!o)return!1;const fe=te,_e=(Oe=fe.approval)==null?void 0:Oe.status;if(_e==="approved")return!1;const B=fe.uploaderId===o.id,X=((qe=fe.uploader)==null?void 0:qe.toLowerCase())===((Ze=o.fullName)==null?void 0:Ze.toLowerCase()),pe=B||X,ye=_e==="needs_revision",Me=pe&&ye;return console.log("[canRespond]",{fileName:te.name,uploaderId:fe.uploaderId,userId:o.id,isOwner:pe,approvalStatus:_e,needsRevision:ye,result:Me}),Me},mt=te=>{var B,X;if(!o)return!1;const fe=te.uploaderId===o.id,_e=((B=te.uploader)==null?void 0:B.toLowerCase())===((X=o.fullName)==null?void 0:X.toLowerCase());return fe||_e},Ye=te=>o?te.userId===o.id:!1,Et=async()=>{var te,fe;if(!(!Dn||!se||!o))try{const _e=Be(Te,"class_files",se.id),X=(se.comments||[]).filter(Oe=>Oe.id!==Dn.id),pe={comments:X,commentCount:X.length,hasNewComments:X.length>0};let ye=(te=se.approval)==null?void 0:te.status,Me=(fe=se.approval)==null?void 0:fe.rejectionReason;Dn.type==="request"&&ye==="needs_revision"&&(ye="pending",Me=void 0,pe["approval.status"]="pending",pe["approval.rejectionReason"]=Eo(),d(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),Dn.type==="response"&&X.some(qe=>qe.type==="request")&&ye==="pending"&&(ye="needs_revision",pe["approval.status"]="needs_revision",d(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Qt(_e,pe),Ce({...se,comments:X,commentCount:X.length,hasNewComments:X.length>0,approval:{...se.approval,status:ye,rejectionReason:Me}}),ar(!1),Bt(null),d(" xa gp ","Gp   c xa thnh cng.","success")}catch(_e){console.error("Error deleting comment:",_e),d("Li","Khng th xa gp .","error")}},en=te=>{if(!o)return!1;const fe=te.uploaderId===o.id,_e=te.uploader===o.fullName;if(fe||!te.uploaderId&&_e)return!1;let B=te.uploaderRole;return te.uploaderId&&k[te.uploaderId]?B=k[te.uploaderId]:te.uploader&&$[te.uploader]&&(B=$[te.uploader]),B?o.role==="vice_principal"?["head_teacher","vice_head_teacher"].includes(B):["head_teacher","vice_head_teacher"].includes(o.role)?B==="teacher":!1:!1},It=te=>{let fe=[...te];if(je.trim()){const _e=je.toLowerCase().trim();fe=fe.filter(B=>{var X,pe;return((X=B.name)==null?void 0:X.toLowerCase().includes(_e))||((pe=B.uploader)==null?void 0:pe.toLowerCase().includes(_e))})}switch(R){case"new":const _e=new Date;_e.setDate(_e.getDate()-7),fe=fe.filter(B=>new Date(B.date)>=_e).sort((B,X)=>new Date(X.date).getTime()-new Date(B.date).getTime());break;case"unread":fe=fe.filter(B=>B.comments&&B.comments.length>0||B.hasNewComments);break;case"all":default:fe=fe.sort((B,X)=>new Date(X.date).getTime()-new Date(B.date).getTime());break}return fe},bt=async te=>{if(o)try{const fe=Be(Te,"class_files",te.id);await Qt(fe,{approval:{status:"approved",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString()}}),d(" duyt h s",`H s "${te.name}"  c ph duyt.`,"success");const _e=`/class/${s}`;await pr("system",o,{type:"class",name:` duyt: ${te.name}`,targetPath:_e,extraInfo:{uploaderId:te.uploaderId}})}catch(fe){console.error("Error approving file:",fe),d("Li","Khng th duyt h s. Vui lng th li.","error")}},Xt=async()=>{if(!(!o||!Xe))try{const te=Be(Te,"class_files",Xe.id),fe={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:pt||"Yu cu chnh sa li.",timestamp:new Date().toISOString(),type:"request"},_e={status:"needs_revision",reviewerId:o.id,reviewerName:o.fullName,reviewerRole:o.role,reviewedAt:new Date().toISOString(),rejectionReason:pt};await Qt(te,{approval:_e,comments:qo(fe),commentCount:(Xe.commentCount||0)+1}),se&&se.id===Xe.id&&Ce({...se,approval:_e,comments:[...se.comments||[],fe],commentCount:(se.commentCount||0)+1}),d(" gi yu cu sa",` yu cu sa li h s "${Xe.name}".`,"success");const B=`/class/${s}?fileId=${Xe.id}&highlight=true`;await pr("comment",o,{type:"class",name:`Yu cu sa: ${Xe.name}`,targetPath:B,extraInfo:{uploaderId:Xe.uploaderId,classId:s}}),st(!1),gt(null),Lt("")}catch(te){console.error("Error requesting revision:",te),d("Li","Khng th gi yu cu sa. Vui lng th li.","error")}},vt=async te=>{var _e;if(!P.trim()||!se||!o||!Hn(se))return;const fe={id:Date.now().toString(),userId:o.id,userName:o.fullName,userRole:o.role,content:P,timestamp:new Date().toISOString(),type:"response"};try{const B=Be(Te,"class_files",se.id);await Qt(B,{approval:{...se.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:qo(fe),commentCount:(se.commentCount||0)+1}),Ce({...se,approval:{...se.approval,status:"pending",reviewedAt:new Date().toISOString()},comments:[...se.comments||[],fe],commentCount:(se.commentCount||0)+1}),le(""),d(" gi phn hi","Phn hi  c gi. H s chuyn sang trng thi ch duyt.","success");const X=(_e=se.approval)==null?void 0:_e.reviewerId;if(X&&X!==o.id){const pe=`/class/${s}?fileId=${se.id}&highlight=true`;await pr("comment",o,{type:"class",name:`Phn hi t ${o.fullName}: ${se.name}`,targetPath:pe,extraInfo:{uploaderId:X}})}}catch(B){console.error("Error adding response:",B),d("Li","Khng th gi phn hi.","error")}};j.useEffect(()=>{if(!s)return;(async()=>{try{const fe=Be(Te,"classes",s),_e=await xr(fe);let B=null,X=[];if(_e.exists())B=_e.data();else{console.warn("Class not found in Firestore, checking Mock...");const pe=pO.find(ye=>ye.id===s);pe&&(B=pe)}if(B){console.log("[ClassRecords] Class data loaded:",{classId:s,className:B.name,currentUser:o==null?void 0:o.fullName,userScope:o==null?void 0:o.accessScope,userRole:o==null?void 0:o.role});const pe=ye=>ye.toLowerCase().trim().replace(/\s+/g," ");try{const ye=Sn(kt(Te,"users"),sr("role","in",["teacher","head_teacher","vice_head_teacher"])),Oe=(await yr(ye)).docs.map(Kt=>Kt.data()),qe={},Ze={};Oe.forEach(Kt=>{Kt.id&&Kt.role&&(qe[Kt.id]=Kt.role),Kt.fullName&&Kt.role&&(Ze[Kt.fullName]=Kt.role)}),M(qe),z(Ze);const rt=new Set,$t=pe(s),on=pe(B.name);Oe.forEach(Kt=>{if(!Kt.accessScope)return;const Jn=pe(Kt.accessScope);(Jn===$t||Jn===on||on.includes(Jn)||Jn.includes(on))&&rt.add(Kt.fullName)}),X=Array.from(rt),console.log("[ClassRecords] Found teachers from DB:",X),X.length===0&&(console.warn("[ClassRecords] No teacher found for class:",s),X=["Cha phn cng"])}catch(ye){console.error("Error fetching teacher details:",ye),X=["Cha phn cng"]}N({id:s,...B,teachers:X,teacher:X.join(", ")})}}catch(fe){console.error("Error fetching class:",fe)}finally{ve(!1)}})()},[s]),j.useEffect(()=>{if(!s)return;const te=Sn(kt(Te,"class_files"),sr("classId","==",s)),fe=vr(te,_e=>{const B=_e.docs.map(ye=>({id:ye.id,...ye.data()}));H(B),console.log("[ClassRecords] Fetched files from Firestore:",B.length),B.forEach(ye=>console.log(`  - ${ye.name} | month: "${ye.month}" | type: ${ye.planType}`));const pe=xO(g).map(ye=>{const Me=B.filter(Oe=>{if((Oe.schoolYear||"2025-2026")!==g||(Oe.category||"plan")!=="plan")return!1;let rt=!1;const $t=ye.id.replace("m",""),on=String(Oe.month||"").replace("m","");return parseInt($t,10)===parseInt(on,10)&&(rt=!0),!!rt});return{...ye,files:Me,fileCount:Me.length}});console.log("[ClassRecords] Grouped files into folders:",pe.map(ye=>`${ye.name}: ${ye.fileCount} files`)),ae(pe)});return()=>fe()},[s]),j.useEffect(()=>{!o||de||o.role==="teacher"&&w&&!b(o.accessScope,s,w.name)&&(console.warn("[ClassRecords] Permission denied:",{userScope:o.accessScope,classId:s,className:w.name}),alert("Bn khng c quyn truy cp vo lp ny."),e("/"))},[o,s,e,w,de]);const ln=j.useRef(null);if(j.useEffect(()=>{const te=t.get("fileId"),fe=t.get("highlight");if(console.log("[ClassRecords] URL Params:",{fileId:te,highlight:fe,allFilesCount:K.length}),!te||fe!=="true"||K.length===0||ln.current===te)return;const _e=K.find(B=>B.id===te);if(_e){console.log("[ClassRecords] Found target file:",_e.name,"category:",_e.category),ln.current=te;const B=_e.category||"plan";if(B==="plan"){S("plan");const Me=_e.planType||"week";O(Me)}else B==="assessment"?S("assessment"):B==="students"?S("students"):B==="steam"&&S("steam");const X=Y.find(Me=>Me.files.some(Oe=>Oe.id===te));X&&(console.log("[ClassRecords] Auto-expanding folder:",X.id),V(X.id)),p(te),a({},{replace:!0});const pe=setTimeout(()=>{Ce(_e),ze(!0)},300),ye=setTimeout(()=>{p(null),ln.current=null},5e3);return()=>{clearTimeout(pe),clearTimeout(ye)}}else console.warn("[ClassRecords] File not found:",te)},[t,a,Y,K]),de)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})});if(!w)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Khng tm thy lp hc"}),i.jsx("button",{onClick:()=>e("/"),className:"mt-4 text-blue-600 hover:underline",children:"Quay li Dashboard"})]})});const as=((o==null?void 0:o.role)==="teacher"||(o==null?void 0:o.role)==="head_teacher"||(o==null?void 0:o.role)==="vice_head_teacher")&&b(o.accessScope,s,w==null?void 0:w.name);console.log("[ClassRecords] Upload permission:",{canUpload:as,userRole:o==null?void 0:o.role,userScope:o==null?void 0:o.accessScope,classId:s,className:w==null?void 0:w.name});const _s=(te,fe)=>{fe.stopPropagation(),Ce(te),ze(!0)},Nn=(te,fe,_e)=>{_e.stopPropagation(),Ie({file:te,folderId:fe}),Ee(!0)},Ns=async()=>{if(he)try{console.log("[DELETE] Attempting to delete file:",{fileId:he.file.id,fileName:he.file.name,classId:s}),await Rl(Be(Te,"class_files",he.file.id)),console.log("[DELETE] Successfully deleted file from Firestore"),d(" xa ti liu thnh cng","H s  c xa khi th mc lp.","success")}catch(te){console.error("[DELETE] Error deleting file:",te),console.error("[DELETE] Error code:",te.code),console.error("[DELETE] Error message:",te.message);let fe="Vui lng th li sau.";te.code==="permission-denied"&&(fe="Bn khng c quyn xa ti liu ny. Vui lng lin h Ban Gim Hiu."),d("Li khi xa ti liu",fe,"error")}finally{Ee(!1),Ie(null)}},St=te=>{V(I===te?null:te)},Fn=te=>{switch(te){case"word":return i.jsx(Ge,{className:"h-5 w-5 text-blue-600"});case"excel":return i.jsx(Ge,{className:"h-5 w-5 text-green-600"});case"pdf":return i.jsx(Ge,{className:"h-5 w-5 text-red-600"});default:return i.jsx(Ge,{className:"h-5 w-5 text-gray-400"})}},is=()=>{U({area:E,planType:A,month:new Date().getMonth()+1>8||new Date().getMonth()+1<6?(new Date().getMonth()+1).toString().padStart(2,"0"):"09",week:"1",name:"",note:""}),we(null),xe(!0)},Wn=te=>{if(te.preventDefault(),te.dataTransfer.files&&te.dataTransfer.files[0]){const fe=te.dataTransfer.files[0];we(fe),D.name||U(_e=>({..._e,name:fe.name.split(".")[0]}))}},Fi=te=>{if(te.target.files&&te.target.files[0]){const fe=te.target.files[0];we(fe),D.name||U(_e=>({..._e,name:fe.name.split(".")[0]}))}},Ba=async()=>{var te,fe;if(!(!Q||!D.name||!o))try{const _e=nr(Ls,`class-files/${s}/${Date.now()}_${Q.name}`);await er(_e,Q);const B=await tr(_e),X={name:D.name,type:((te=Q.name.split(".").pop())==null?void 0:te.toLowerCase())||"other",url:B,uploader:o.fullName,uploaderId:o.id,uploaderRole:o.role,schoolYear:g,date:new Date().toISOString(),classId:s,month:D.month,monthName:((fe=L_.find(pe=>pe.value===D.month))==null?void 0:fe.label)||"Thng khc",hasNewComments:!1,commentCount:0,comments:[],createdAt:Hp(),planType:D.planType,week:D.week,category:D.area,approval:{status:"pending"}};await kl(kt(Te,"class_files"),X),d("Ti ln thnh cng!","D liu  c cp nht vo h thng.","success"),pr("upload",o,{type:"class",name:D.name,targetPath:`/class/${s}`,extraInfo:{classId:s}}),xe(!1)}catch(_e){console.error("Error uploading file:",_e),d("Li khi ti ln","Vui lng th li sau.","error")}};return i.jsxs("div",{className:"min-h-screen bg-amber-50/30 font-sans pb-20",children:[i.jsxs("div",{className:"bg-white border-b border-amber-200 sticky top-0 z-30 shadow-sm",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[!u&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[i.jsx("span",{className:"cursor-pointer hover:text-amber-600",onClick:()=>e("/"),children:"Dashboard"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"cursor-pointer hover:text-amber-600",children:"T Chuyn Mn"}),i.jsx(Os,{className:"h-3 w-3"}),i.jsx("span",{className:"font-semibold text-amber-700",children:"H s lp hc"})]}),i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity flex-1 min-w-0",onClick:()=>e("/"),children:[i.jsx("div",{className:`${u?"h-10 w-10":"h-16 w-16"} rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border border-amber-200 shadow-sm flex-shrink-0`,children:i.jsx("span",{className:`${u?"text-lg":"text-2xl"} font-bold text-amber-600`,children:((qn=w==null?void 0:w.name)==null?void 0:qn.split(" ").pop())||"?"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h1",{className:`${u?"text-lg":"text-2xl"} font-bold text-gray-900 truncate`,children:(w==null?void 0:w.name)||"Lp hc"}),!u&&i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(a1,{className:"h-4 w-4"})," GVCN:"]}),w!=null&&w.teachers&&w.teachers.length>1?i.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.teachers.map((te,fe)=>i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md font-semibold text-xs border border-amber-200",children:te},fe))}):i.jsx("span",{className:"font-semibold text-gray-700",children:(w==null?void 0:w.teacher)||"Cha cp nht"})]}),u&&(w==null?void 0:w.teachers)&&i.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[w.teachers.length," gio vin"]})]})]}),as&&i.jsxs("button",{onClick:is,className:`${u?"p-3 rounded-full":"flex items-center gap-2 px-6 py-3 rounded-xl"} bg-amber-500 hover:bg-amber-600 text-white shadow-md shadow-amber-200 transition-all font-bold flex-shrink-0`,title:"Ti ln h s lp",children:[i.jsx(In,{className:"h-5 w-5"}),!u&&i.jsx("span",{children:"Ti ln h s lp"})]})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:u?i.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 gap-0.5",children:[i.jsxs("button",{onClick:()=>S("students"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="students"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(Gg,{className:"h-4 w-4"}),i.jsx("span",{children:"Lp"})]}),i.jsxs("button",{onClick:()=>S("plan"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="plan"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),i.jsx("span",{children:"KH GD"})]}),i.jsxs("button",{onClick:()=>S("assessment"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="assessment"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx(qg,{className:"h-4 w-4"}),i.jsx("span",{children:"nh gi"})]}),i.jsxs("button",{onClick:()=>S("steam"),className:`flex-1 flex flex-col items-center gap-0.5 py-2.5 px-2 rounded-lg text-xs font-bold transition-all ${E==="steam"?"bg-white text-amber-600 shadow-sm":"text-gray-500"}`,children:[i.jsx($g,{className:"h-4 w-4"}),i.jsx("span",{children:"STEAM"})]})]}):i.jsxs("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-0.5",children:[i.jsxs("button",{onClick:()=>S("students"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="students"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Gg,{className:"h-4 w-4"}),"DANH SCH LP",E==="students"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("plan"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="plan"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(Ge,{className:"h-4 w-4"}),"K HOCH GIO DC",E==="plan"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("assessment"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="assessment"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx(qg,{className:"h-4 w-4"}),"NH GI TR",E==="assessment"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]}),i.jsxs("button",{onClick:()=>S("steam"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold text-sm transition-all relative ${E==="steam"?"bg-white text-amber-600 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-x border-amber-100 z-10":"bg-transparent text-gray-500 hover:bg-amber-50 hover:text-amber-700"}`,children:[i.jsx($g,{className:"h-4 w-4"}),"D N STEAM",E==="steam"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white"})]})]})})]}),i.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Ne("all"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Tt c"}),i.jsx("button",{onClick:()=>Ne("new"),className:`px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="new"?"bg-amber-500 text-white border-amber-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:"Mi nht"}),i.jsxs("button",{onClick:()=>Ne("unread"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-full border transition-all ${R==="unread"?"bg-red-500 text-white border-red-500":"bg-white text-gray-500 border-gray-200 hover:border-amber-300"}`,children:[i.jsx(Ta,{className:"h-3 w-3"})," C gp "]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(El,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Tm nhanh k hoch...",value:je,onChange:te=>ee(te.target.value),className:"pl-9 pr-4 py-2 w-full sm:w-64 bg-white border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400"})]})]}),E==="plan"&&i.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-white p-1 rounded-lg border border-amber-100 w-fit",children:[i.jsx("button",{onClick:()=>O("year"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="year"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Nm"}),i.jsx("button",{onClick:()=>O("month"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="month"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Thng"}),i.jsx("button",{onClick:()=>O("week"),className:`px-4 py-2 text-sm font-bold rounded-md transition-all ${A==="week"?"bg-amber-500 text-white shadow-sm":"text-gray-500 hover:bg-amber-50"}`,children:"K hoch Tun"})]}),i.jsxs("div",{className:"space-y-4",children:[E==="plan"&&i.jsxs(i.Fragment,{children:[A==="year"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Yv,{className:"h-5 w-5 text-amber-500"}),"K hoch Nm hc ",g]}),(()=>{let te=Y.flatMap(fe=>fe.files).filter(fe=>fe.planType==="year");return te=It(te),te.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c k hoch nm no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(fe=>i.jsxs("div",{onClick:_e=>_s(fe,_e),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Fn(fe.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:fe.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(fe.date).toLocaleDateString("vi-VN")})]}),i.jsx("button",{onClick:_e=>Nn(fe,"year",_e),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Tn,{className:"h-4 w-4"})})]},fe.id))})})()]}),(A==="month"||A==="week")&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(te=>{let fe=te.files.filter(X=>A==="month"?X.planType==="month":A==="week"?X.planType==="week"||!X.planType:!1);fe=It(fe);const _e=fe.length,B=I===te.id;return i.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3",children:[i.jsxs("div",{onClick:()=>St(te.id),className:`
                                          relative flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border
                                          ${B?"bg-amber-100 border-amber-300 shadow-sm":"bg-white border-amber-100 hover:bg-amber-50"}
                                       `,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${B?"bg-amber-500 text-white":"bg-amber-100 text-amber-600"}`,children:i.jsx(Yv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${B?"text-amber-900":"text-gray-700"}`,children:te.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[_e," ",A==="month"?"K hoch thng":"K hoch tun"]})]})]}),i.jsx("div",{className:`p-1.5 rounded-full transition-transform duration-300 ${B?"rotate-90 bg-amber-200 text-amber-800":"text-gray-400"}`,children:i.jsx(Os,{className:"h-5 w-5"})})]}),B&&i.jsxs("div",{className:"mt-2 ml-4 pl-4 border-l-2 border-amber-200 space-y-2 animate-in slide-in-from-top-2 duration-300",children:[fe.map(X=>{var pe,ye,Me,Oe,qe,Ze,rt,$t,on,Kt,Jn,ta;return i.jsxs("div",{onClick:Cn=>{x===X.id&&p(null),_s(X,Cn)},className:`flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm hover:border-amber-300 hover:shadow-md cursor-pointer group transition-all ${x===X.id?"border-red-400 bg-red-50 animate-pulse ring-2 ring-red-300":"border-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[Fn(X.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[u?i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700 truncate",children:X.name}),i.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[((pe=X.approval)==null?void 0:pe.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 whitespace-nowrap",children:[i.jsx(va,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((ye=X.approval)==null?void 0:ye.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700 whitespace-nowrap",children:[i.jsx(vi,{className:"h-2.5 w-2.5"}),"  duyt"]}),((Me=X.approval)==null?void 0:Me.status)==="needs_revision"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse whitespace-nowrap",children:[i.jsx(Xv,{className:"h-2.5 w-2.5"})," Cn sa"]}),((Oe=X.approval)==null?void 0:Oe.status)==="responded"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700 whitespace-nowrap",children:[i.jsx(Ta,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((qe=X.approval)==null?void 0:qe.status)==="rejected"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700 whitespace-nowrap",title:X.approval.rejectionReason,children:[i.jsx(mp,{className:"h-2.5 w-2.5"})," T chi"]}),i.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[i.jsx(Fr,{className:"h-2.5 w-2.5"})," ",new Date(X.date).toLocaleDateString("vi-VN")]}),A==="week"&&X.week&&i.jsxs("span",{className:"px-1 py-0.5 bg-gray-100 rounded text-[10px] text-gray-600 font-medium whitespace-nowrap",children:["T",X.week]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-amber-700",children:X.name}),((Ze=X.approval)==null?void 0:Ze.status)==="pending"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700",children:[i.jsx(va,{className:"h-2.5 w-2.5"})," Ch duyt"]}),((rt=X.approval)==null?void 0:rt.status)==="approved"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-green-100 text-green-700",children:[i.jsx(vi,{className:"h-2.5 w-2.5"}),"  duyt"]}),(($t=X.approval)==null?void 0:$t.status)==="needs_revision"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-amber-100 text-amber-700 animate-pulse",children:[i.jsx(Xv,{className:"h-2.5 w-2.5"})," Cn sa"]}),((on=X.approval)==null?void 0:on.status)==="responded"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-blue-100 text-blue-700",children:[i.jsx(Ta,{className:"h-2.5 w-2.5"}),"  phn hi"]}),((Kt=X.approval)==null?void 0:Kt.status)==="rejected"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-red-100 text-red-700",title:X.approval.rejectionReason,children:[i.jsx(mp,{className:"h-2.5 w-2.5"})," T chi"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(Fr,{className:"h-3 w-3"})," ",new Date(X.date).toLocaleDateString("vi-VN"),A==="week"&&X.week&&i.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600 font-medium",children:["Tun ",X.week]})]})]}),((Jn=X.approval)==null?void 0:Jn.status)==="rejected"&&X.approval.rejectionReason&&i.jsxs("div",{className:"mt-1 text-[10px] text-red-600",children:[i.jsx("span",{className:"font-semibold",children:"L do:"})," ",X.approval.rejectionReason]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[en(X)&&((ta=X.approval)==null?void 0:ta.status)==="pending"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:Cn=>{Cn.stopPropagation(),bt(X)},className:"px-2 py-1 text-[9px] font-bold text-white bg-green-500 hover:bg-green-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(vi,{className:"h-3 w-3"})," Duyt"]}),i.jsxs("button",{onClick:Cn=>{Cn.stopPropagation(),gt(X),Lt(""),st(!0)},className:"px-2 py-1 text-[9px] font-bold text-white bg-amber-500 hover:bg-amber-600 rounded transition-colors flex items-center gap-0.5",children:[i.jsx(Ds,{className:"h-3 w-3"})," Yu cu sa"]})]}),X.hasNewComments&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-bold animate-pulse",children:[i.jsx(Ta,{className:"h-3 w-3"}),"Gp  mi"]}),mt(X)&&i.jsx("button",{onClick:Cn=>Nn(X,te.id,Cn),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Tn,{className:"h-4 w-4"})})]})]},X.id)}),fe.length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"Cha c k hoch no c ti ln."})]})]},te.id)})})]}),E==="students"&&i.jsxs("div",{className:"bg-white rounded-xl border border-amber-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Gg,{className:"h-5 w-5 text-amber-500"}),"Danh sch Lp"]}),(()=>{let te=K.filter(fe=>fe.category==="students");return te=It(te),console.log("[Student List Tab] Total files:",K.length,"Student files:",te.length),console.log("[Student List Tab] All file categories:",K.map(fe=>({name:fe.name,category:fe.category}))),te.length===0?i.jsx("p",{className:"text-gray-400 italic",children:"Cha c danh sch no c ti ln."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(fe=>i.jsxs("div",{onClick:_e=>_s(fe,_e),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-amber-300 hover:shadow-md cursor-pointer transition-all",children:[Fn(fe.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-800 truncate",children:fe.name}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(fe.date).toLocaleDateString("vi-VN")})]}),mt(fe)&&i.jsx("button",{onClick:_e=>Nn(fe,"students",_e),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",children:i.jsx(Tn,{className:"h-4 w-4"})})]},fe.id))})})()]}),E==="assessment"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx(qg,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"Khu vc nh gi tr"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"D liu s c cp nht trong hc k ti."})]}),E==="steam"&&i.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[i.jsx($g,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-500 font-medium",children:"D n STEAM"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Cc d n hc tp ang c xy dng."})]})]})]}),q&&he&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Xc nhn xa ti liu?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Bn c chc chn mun xa file ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',he.file.name,'"']})," khng? Hnh ng ny khng th hon tc."]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>Ee(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsx("button",{onClick:Ns,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-md transition-colors",children:"Xa vnh vin"})]})]})})}),He&&Xe&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ds,{className:"h-8 w-8 text-amber-600"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"Yu cu gio vin sa li?"}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4 text-center",children:["Bn sp yu cu chnh sa h s ",i.jsxs("span",{className:"font-semibold text-gray-800",children:['"',Xe.name,'"']})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ni dung cn chnh sa ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{className:"w-full border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all resize-none",rows:4,placeholder:"Nhp chi tit cc im cn sa...",value:pt,onChange:te=>Lt(te.target.value)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>{st(!1),gt(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy b"}),i.jsxs("button",{onClick:Xt,disabled:!pt.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 rounded-lg hover:bg-amber-700 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Du,{className:"h-4 w-4 mr-1 inline"})," Gi yu cu"]})]})]})})}),be&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-amber-100 flex justify-between items-center bg-white",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-amber-600"}),"Thm mi Ti liu Lp hc"]}),i.jsx("button",{onClick:()=>xe(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(Jt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khu vc lu tr"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"students",label:"Danh sch Lp"},{id:"plan",label:"K hoch"},{id:"assessment",label:"nh gi Tr"},{id:"steam",label:"D n STEAM"}].map(te=>i.jsx("button",{onClick:()=>U({...D,area:te.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${D.area===te.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:te.label},te.id))})]}),D.area==="plan"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi k hoch"}),i.jsx("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[{id:"year",label:"K hoch Nm"},{id:"month",label:"K hoch Thng"},{id:"week",label:"K hoch Tun"}].map(te=>i.jsx("button",{onClick:()=>U({...D,planType:te.id}),className:`flex-1 py-2 px-2 text-sm font-medium rounded-md transition-all ${D.planType===te.id?"bg-white text-amber-700 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"}`,children:te.label},te.id))})]}),D.area!=="students"&&(D.area!=="plan"||D.planType!=="year")&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Thng"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:D.month,onChange:te=>U({...D,month:te.target.value}),children:L_.map(te=>i.jsx("option",{value:te.value,children:te.label},te.value))})]}),(D.area!=="plan"||D.planType==="week")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chn Tun"}),i.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all bg-white text-sm",value:D.week,onChange:te=>U({...D,week:te.target.value}),children:yO.map(te=>i.jsx("option",{value:te.value,children:te.label},te.value))})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[D.area==="assessment"?"Tn phiu nh gi":"Tn ti liu"," ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{autoFocus:!0,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"VD: K hoch ch  Gia nh...",value:D.name,onChange:te=>U({...D,name:te.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tp nh km"}),i.jsxs("div",{onDrop:Wn,onDragOver:te=>te.preventDefault(),className:`border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all group relative ${Q?"border-amber-500 bg-amber-50":"border-gray-300 hover:bg-gray-50 hover:border-amber-400"}`,children:[i.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Fi}),Q?i.jsxs("div",{className:"flex flex-col items-center text-center animate-in zoom-in duration-300",children:[i.jsx(xs,{className:"h-10 w-10 text-amber-600 mb-2"}),i.jsx("p",{className:"text-sm font-bold text-amber-800 truncate max-w-[250px]",children:Q.name}),i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[(Q.size/1024).toFixed(0)," KB -  sn sng"]})]}):i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"p-3 rounded-full mb-3 bg-amber-100 text-amber-600 transition-colors",children:i.jsx(ff,{className:"h-8 w-8"})}),i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Ko th file vo y hoc ",i.jsx("span",{className:"text-amber-600 underline",children:"Bm  chn"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"H tr PDF, Excel, Word, nh (Ti a 10MB)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ghi ch (Ty chn)"}),i.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-sm",placeholder:"Ghi ch cho T trng/BGH (nu c)...",value:D.note,onChange:te=>U({...D,note:te.target.value})})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm rounded-lg border border-transparent hover:border-gray-300 transition-all",children:"Hy b"}),i.jsxs("button",{onClick:Ba,disabled:!Q||!D.name,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-amber-500 hover:bg-amber-600 rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(In,{className:"h-4 w-4"})," Lu h s"]})]})]})}),bs&&Dn&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Tn,{className:"h-6 w-6 text-red-500"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Xa gp "}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Bn c chc chn mun xa gp  ny? Thao tc ny khng th hon tc."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm text-gray-700 italic",children:['"',Dn.content.substring(0,100),Dn.content.length>100?"...":"",'"']}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{ar(!1),Bt(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{onClick:Et,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors",children:"Xa"})]})]})}),Le&&se&&i.jsx(Tj,{file:{id:se.id,name:se.name,url:se.url||"",type:se.type,uploader:se.uploader,uploaderId:se.uploaderId,uploaderRole:se.uploaderRole,date:se.date,comments:se.comments,approval:se.approval},onClose:()=>{ze(!1),Ce(null)},onSaveSuccess:ws,collectionName:"class_files",storageFolder:`class-files/${s}`,canEdit:vs(se),canApprove:en&&en(se),canComment:Us(se),canRespond:Hn(se),onApprove:()=>bt(se),onRequestRevision:te=>{gt(se),Lt(te),Xt()},onPostComment:te=>{le(te),vt()},canManageComment:Ye,onEditComment:async(te,fe)=>{if(!(!se||!o))try{const _e=Be(Te,"class_files",se.id),X=(se.comments||[]).map(pe=>pe.id===te?{...pe,content:fe,editedAt:new Date().toISOString()}:pe);await Qt(_e,{comments:X}),Ce({...se,comments:X}),d(" cp nht gp ","Ni dung gp   c lu.","success")}catch(_e){console.error("Error editing comment:",_e),d("Li","Khng th cp nht gp .","error")}},onDeleteComment:async te=>{var _e,B,X;if(!se||!o)return;const fe=(_e=se.comments)==null?void 0:_e.find(pe=>pe.id===te);if(fe)try{const pe=Be(Te,"class_files",se.id),Me=(se.comments||[]).filter(rt=>rt.id!==te),Oe={comments:Me,commentCount:Me.length,hasNewComments:Me.length>0};let qe=(B=se.approval)==null?void 0:B.status,Ze=(X=se.approval)==null?void 0:X.rejectionReason;fe.type==="request"&&qe==="needs_revision"&&(qe="pending",Ze=void 0,Oe["approval.status"]="pending",Oe["approval.rejectionReason"]=Eo(),d(" hon tc","Yu cu sa  b xa. Trng thi h s tr v 'Ch duyt'.","info")),fe.type==="response"&&Me.some($t=>$t.type==="request")&&qe==="pending"&&(qe="needs_revision",Oe["approval.status"]="needs_revision",d(" hon tc","Phn hi  b xa. Bn c th phn hi li.","info")),await Qt(pe,Oe),Ce({...se,comments:Me,commentCount:Me.length,hasNewComments:Me.length>0,approval:{...se.approval,status:qe,rejectionReason:Ze}}),d(" xa gp ","Gp   c xa thnh cng.","success")}catch(pe){console.error("Error deleting comment:",pe),d("Li","Khng th xa gp .","error")}}})]})},vO=()=>{const s=rr(),{login:e,isAuthenticated:t}=ys();j.useEffect(()=>{t&&s("/")},[t,s]),j.useEffect(()=>{(async()=>{try{const K=Be(Te,"app_settings","login_background"),H=await xr(K);H.exists()&&H.data().imageUrl&&z(H.data().imageUrl)}catch(K){console.error("Error fetching background:",K)}})()},[]);const[a,o]=j.useState(""),[u,d]=j.useState("");j.useEffect(()=>{(async()=>{try{const K=Be(Te,"app_settings","system_logo"),H=await xr(K);H.exists()&&H.data().imageUrl&&o(H.data().imageUrl);const de=Be(Te,"app_settings","certification_logo"),ve=await xr(de);ve.exists()&&ve.data().imageUrl&&d(ve.data().imageUrl)}catch(K){console.error("Error fetching logo:",K)}})()},[]);const[g,x]=j.useState(!1),[p,b]=j.useState(!1),[w,N]=j.useState(""),[k,M]=j.useState({username:"",password:""}),[$,z]=j.useState("/login-background.jpg"),Y=async ae=>{ae.preventDefault(),b(!0),N("");const K=await e(k.username,k.password);b(!1),K||N("Tn ng nhp hoc mt khu khng ng.")};return i.jsxs("div",{className:"min-h-screen relative flex items-center justify-end pr-8 sm:pr-16 lg:pr-24 font-sans overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 z-0",children:i.jsx("img",{src:$,alt:"Trng Mu Gio Vng Anh",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 sm:mx-0",children:i.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex p-4 bg-blue-900/10 rounded-full mb-4",children:a?i.jsx("img",{src:a,alt:"Logo",className:"h-12 w-12 object-contain"}):i.jsx(s0,{className:"h-12 w-12 text-blue-900"})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900 mb-2",children:d1}),i.jsx("div",{className:"h-1 w-20 bg-amber-400 rounded-full mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ng nhp"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cho mng cc C quay tr li lm vic! "})]}),w&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),w]}),i.jsxs("form",{onSubmit:Y,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn ng nhp"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(mr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"VD: admin, totruong, gv_la1...",value:k.username,onChange:ae=>M({...k,username:ae.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu"}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Oo,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-600 transition-colors"})}),i.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent sm:text-sm transition-all",placeholder:"",value:k.password,onChange:ae=>M({...k,password:ae.target.value})}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",onClick:()=>x(!g),children:g?i.jsx(gp,{className:"h-5 w-5"}):i.jsx(bl,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Ghi nh ng nhp"})]}),i.jsx("div",{className:"text-sm",children:i.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Qun mt khu?"})})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang x l..."]}):i.jsxs(i.Fragment,{children:["ng nhp",i.jsx(Hh,{className:"h-4 w-4"})]})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[i.jsx(o1,{className:"h-3 w-3"}),i.jsxs("span",{children:["H tr k thut: ",i.jsx("span",{className:"font-semibold text-gray-700",children:"0984.651.653 (Thy Thoi)"})]})]})})]})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/30 to-transparent backdrop-blur-sm py-4",children:i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-xs sm:text-sm text-white drop-shadow-lg",children:[" ",new Date().getFullYear()," Trng Mu Gio Vng Anh. All rights reserved."]})})}),u&&i.jsx("div",{className:"fixed top-6 left-6 z-20 animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:i.jsx("img",{src:u,alt:"Chng nhn t chun",className:"h-32 w-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300 cursor-pointer",title:"Trng Mm non t chun Quc gia"})})]})},wO=()=>i.jsx(GD,{children:i.jsx(XD,{children:i.jsx(tO,{children:i.jsx(AS,{children:i.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-gray-900 bg-gray-50",children:[i.jsx(ZD,{}),i.jsx("main",{className:"flex-grow",children:i.jsxs(aS,{children:[i.jsx(Ur,{path:"/",element:i.jsx(nO,{})}),i.jsx(Ur,{path:"/login",element:i.jsx(vO,{})}),i.jsx(Ur,{path:"/van-ban-chi-dao",element:i.jsx(sO,{})}),i.jsx(Ur,{path:"/van-ban-truong",element:i.jsx(rO,{})}),i.jsx(Ur,{path:"/quan-tri-he-thong",element:i.jsx(iO,{})}),i.jsx(Ur,{path:"/to-van-phong-ke-hoach",element:i.jsx(hO,{})}),i.jsx(Ur,{path:"/to-van-phong-thuc-don",element:i.jsx(mO,{})}),i.jsx(Ur,{path:"/to-chuyen-mon-ke-hoach",element:i.jsx(gO,{})}),i.jsx(Ur,{path:"/class/:classId",element:i.jsx(bO,{})})]})})]})})})})}),Ej=document.getElementById("root");if(!Ej)throw new Error("Could not find root element to mount to");const _O=fE.createRoot(Ej);_O.render(i.jsx(Br.StrictMode,{children:i.jsx(wO,{})}));
